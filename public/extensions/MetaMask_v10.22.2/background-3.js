LavaPack.loadBundle([[2434,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(n(e[r]));const r=p(...t);return p(a(r.length,192),r)}const t=y(e);return 1===t.length&&t[0]<128?t:p(a(t.length,128),t)}function s(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return l(d(e))}function a(e,t){if(e<56)return Uint8Array.from([e+t]);const r=m(e),n=m(t+55+r.length/2);return Uint8Array.from(h(n+r))}function o(e,t=!1){if(!e||0===e.length)return Uint8Array.from([]);const r=c(y(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,a,o;const u=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(d<=183){if(t=d-127,n=128===d?Uint8Array.from([]):s(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(d<=191){if(r=d-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(s(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=s(e,r,t+r),{data:n,remainder:e.slice(t+r)}}if(d<=247){for(t=d-191,a=s(e,1,t);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.slice(t)}}{if(r=d-246,t=i(s(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=s(e,r,n);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.slice(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=o;const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function d(e){let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}function l(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=l(e.slice(n,n+2))}return t}function p(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}function f(e){return(new TextEncoder).encode(e)}function m(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?h((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):f(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?h(m(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:d,concatBytes:p,hexToBytes:h,utf8ToBytes:f};const E={encode:n,decode:o};r.default=E}}},{package:"eth-lattice-keyring>gridplus-sdk>rlp",file:"node_modules/gridplus-sdk/node_modules/rlp/dist/index.js"}],[2435,{"./lib":2437,"./lib/elliptic":2436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./lib")(e("./lib/elliptic"))}}},{package:"eth-lattice-keyring>gridplus-sdk>secp256k1",file:"node_modules/gridplus-sdk/node_modules/secp256k1/elliptic.js"}],[2436,{elliptic:1940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=new(0,e("elliptic").ec)("secp256k1"),s=n.curve,i=s.n.constructor;function a(e){const t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){let r=new i(t);if(r.cmp(s.p)>=0)return null;r=r.toRed(s.red);let a=r.redSqr().redIMul(r).redIAdd(s.b).redSqrt();return 3===e!==a.isOdd()&&(a=a.redNeg()),n.keyPair({pub:{x:r,y:a}})}(t,e.subarray(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){let a=new i(t),o=new i(r);if(a.cmp(s.p)>=0||o.cmp(s.p)>=0)return null;if(a=a.toRed(s.red),o=o.toRed(s.red),(6===e||7===e)&&o.isOdd()!==(7===e))return null;const c=a.redSqr().redIMul(a);return o.redSqr().redISub(c.redIAdd(s.b)).isZero()?n.keyPair({pub:{x:a,y:o}}):null}(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function o(e,t){const r=t.encode(null,33===e.length);for(let t=0;t<e.length;++t)e[t]=r[t]}t.exports={contextRandomize:()=>0,privateKeyVerify(e){const t=new i(e);return t.cmp(s.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){const t=new i(e),r=s.n.sub(t).umod(s.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){const r=new i(t);if(r.cmp(s.n)>=0)return 1;if(r.iadd(new i(e)),r.cmp(s.n)>=0&&r.isub(s.n),r.isZero())return 1;const n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new i(t);if(r.cmp(s.n)>=0||r.isZero())return 1;r.imul(new i(e)),r.cmp(s.n)>=0&&(r=r.umod(s.n));const n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify:e=>null===a(e)?1:0,publicKeyCreate(e,t){const r=new i(t);if(r.cmp(s.n)>=0||r.isZero())return 1;return o(e,n.keyFromPrivate(t).getPublic()),0},publicKeyConvert(e,t){const r=a(t);if(null===r)return 1;return o(e,r.getPublic()),0},publicKeyNegate(e,t){const r=a(t);if(null===r)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),o(e,n),0},publicKeyCombine(e,t){const r=new Array(t.length);for(let e=0;e<t.length;++e)if(r[e]=a(t[e]),null===r[e])return 1;let n=r[0].getPublic();for(let e=1;e<r.length;++e)n=n.add(r[e].pub);return n.isInfinity()?2:(o(e,n),0)},publicKeyTweakAdd(e,t,r){const n=a(t);if(null===n)return 1;if((r=new i(r)).cmp(s.n)>=0)return 2;const c=n.getPublic().add(s.g.mul(r));return c.isInfinity()?2:(o(e,c),0)},publicKeyTweakMul(e,t,r){const n=a(t);if(null===n)return 1;if((r=new i(r)).cmp(s.n)>=0||r.isZero())return 2;return o(e,n.getPublic().mul(r)),0},signatureNormalize(e){const t=new i(e.subarray(0,32)),r=new i(e.subarray(32,64));return t.cmp(s.n)>=0||r.cmp(s.n)>=0?1:(1===r.cmp(n.nh)&&e.set(s.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){const r=t.subarray(0,32),n=t.subarray(32,64);if(new i(r).cmp(s.n)>=0)return 1;if(new i(n).cmp(s.n)>=0)return 1;const{output:a}=e;let o=a.subarray(4,37);o[0]=0,o.set(r,1);let c=33,u=0;for(;c>1&&0===o[u]&&!(128&o[u+1]);--c,++u);if(o=o.subarray(u),128&o[0])return 1;if(c>1&&0===o[0]&&!(128&o[1]))return 1;let d=a.subarray(39,72);d[0]=0,d.set(n,1);let l=33,h=0;for(;l>1&&0===d[h]&&!(128&d[h+1]);--l,++h);return d=d.subarray(h),128&d[0]||l>1&&0===d[0]&&!(128&d[1])?1:(e.outputlen=6+c+l,a[0]=48,a[1]=e.outputlen-2,a[2]=2,a[3]=o.length,a.set(o,4),a[4+c]=2,a[5+c]=d.length,a.set(d,6+c),0)},signatureImport(e,t){if(t.length<8)return 1;if(t.length>72)return 1;if(48!==t[0])return 1;if(t[1]!==t.length-2)return 1;if(2!==t[2])return 1;const r=t[3];if(0===r)return 1;if(5+r>=t.length)return 1;if(2!==t[4+r])return 1;const n=t[5+r];if(0===n)return 1;if(6+r+n!==t.length)return 1;if(128&t[4])return 1;if(r>1&&0===t[4]&&!(128&t[5]))return 1;if(128&t[r+6])return 1;if(n>1&&0===t[r+6]&&!(128&t[r+7]))return 1;let a=t.subarray(4,4+r);if(33===a.length&&0===a[0]&&(a=a.subarray(1)),a.length>32)return 1;let o=t.subarray(6+r);if(33===o.length&&0===o[0]&&(o=o.slice(1)),o.length>32)throw new Error("S length is too long");let c=new i(a);c.cmp(s.n)>=0&&(c=new i(0));let u=new i(t.subarray(6+r));return u.cmp(s.n)>=0&&(u=new i(0)),e.set(c.toArrayLike(Uint8Array,"be",32),0),e.set(u.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,a,o){if(o){const e=o;o=n=>{const s=e(t,r,null,a,n);if(!(s instanceof Uint8Array&&32===s.length))throw new Error("This is the way");return new i(s)}}const c=new i(r);if(c.cmp(s.n)>=0||c.isZero())return 1;let u;try{u=n.sign(t,r,{canonical:!0,k:o,pers:a})}catch(e){return 1}return e.signature.set(u.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(u.s.toArrayLike(Uint8Array,"be",32),32),e.recid=u.recoveryParam,0},ecdsaVerify(e,t,r){const o={r:e.subarray(0,32),s:e.subarray(32,64)},c=new i(o.r),u=new i(o.s);if(c.cmp(s.n)>=0||u.cmp(s.n)>=0)return 1;if(1===u.cmp(n.nh)||c.isZero()||u.isZero())return 3;const d=a(r);if(null===d)return 2;const l=d.getPublic();return n.verify(t,o,l)?0:3},ecdsaRecover(e,t,r,a){const c={r:t.slice(0,32),s:t.slice(32,64)},u=new i(c.r),d=new i(c.s);if(u.cmp(s.n)>=0||d.cmp(s.n)>=0)return 1;if(u.isZero()||d.isZero())return 2;let l;try{l=n.recoverPubKey(a,c,r)}catch(e){return 2}return o(e,l),0},ecdh(e,t,r,o,c,u,d){const l=a(t);if(null===l)return 1;const h=new i(r);if(h.cmp(s.n)>=0||h.isZero())return 2;const p=l.getPublic().mul(h);if(c===undefined){const t=p.encode(null,!0),r=n.hash().update(t).digest();for(let t=0;t<32;++t)e[t]=r[t]}else{u||(u=new Uint8Array(32));const t=p.getX().toArray("be",32);for(let e=0;e<32;++e)u[e]=t[e];d||(d=new Uint8Array(32));const r=p.getY().toArray("be",32);for(let e=0;e<32;++e)d[e]=r[e];const n=c(u,d,o);if(!(n instanceof Uint8Array&&n.length===e.length))return 2;e.set(n)}return 0}}}}},{package:"eth-lattice-keyring>gridplus-sdk>secp256k1",file:"node_modules/gridplus-sdk/node_modules/secp256k1/lib/elliptic.js"}],[2437,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n="Impossible case. Please create issue.",s="The tweak was out of range or the resulted private key is invalid",i="The tweak was out of range or equal to zero",a="Unknow error on context randomization",o="Private Key is invalid",c="Public Key could not be parsed",u="Public Key serialization error",d="The sum of the public keys is not valid",l="Signature could not be parsed",h="The nonce generation function failed, or the private key was invalid",p="Public key could not be recover",f="Scalar was invalid (zero or overflow)";function m(e,t){if(!e)throw new Error(t)}function g(e,t,r){if(m(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==undefined)if(Array.isArray(r)){const n=`Expected ${e} to be an Uint8Array with length [${r.join(", ")}]`;m(r.includes(t.length),n)}else{const n=`Expected ${e} to be an Uint8Array with length ${r}`;m(t.length===r,n)}}function y(e){m("Boolean"===b(e),"Expected compressed to be a Boolean")}function E(e=(e=>new Uint8Array(e)),t){return"function"==typeof e&&(e=e(t)),g("output",e,t),e}function b(e){return Object.prototype.toString.call(e).slice(8,-1)}t.exports=e=>({contextRandomize(t){if(m(null===t||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==t&&g("seed",t,32),1===e.contextRandomize(t))throw new Error(a)},privateKeyVerify:t=>(g("private key",t,32),0===e.privateKeyVerify(t)),privateKeyNegate(t){switch(g("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(n)}},privateKeyTweakAdd(t,r){switch(g("private key",t,32),g("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(s)}},privateKeyTweakMul(t,r){switch(g("private key",t,32),g("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(i)}},publicKeyVerify:t=>(g("public key",t,[33,65]),0===e.publicKeyVerify(t)),publicKeyCreate(t,r=!0,n){switch(g("private key",t,32),y(r),n=E(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(o);case 2:throw new Error(u)}},publicKeyConvert(t,r=!0,n){switch(g("public key",t,[33,65]),y(r),n=E(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(c);case 2:throw new Error(u)}},publicKeyNegate(t,r=!0,s){switch(g("public key",t,[33,65]),y(r),s=E(s,r?33:65),e.publicKeyNegate(s,t)){case 0:return s;case 1:throw new Error(c);case 2:throw new Error(n);case 3:throw new Error(u)}},publicKeyCombine(t,r=!0,n){m(Array.isArray(t),"Expected public keys to be an Array"),m(t.length>0,"Expected public keys array will have more than zero items");for(const e of t)g("public key",e,[33,65]);switch(y(r),n=E(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(c);case 2:throw new Error(d);case 3:throw new Error(u)}},publicKeyTweakAdd(t,r,n=!0,i){switch(g("public key",t,[33,65]),g("tweak",r,32),y(n),i=E(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(c);case 2:throw new Error(s)}},publicKeyTweakMul(t,r,n=!0,s){switch(g("public key",t,[33,65]),g("tweak",r,32),y(n),s=E(s,n?33:65),e.publicKeyTweakMul(s,t,r)){case 0:return s;case 1:throw new Error(c);case 2:throw new Error(i)}},signatureNormalize(t){switch(g("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(l)}},signatureExport(t,r){g("signature",t,64);const s={output:r=E(r,72),outputlen:72};switch(e.signatureExport(s,t)){case 0:return r.slice(0,s.outputlen);case 1:throw new Error(l);case 2:throw new Error(n)}},signatureImport(t,r){switch(g("signature",t),r=E(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(l);case 2:throw new Error(n)}},ecdsaSign(t,r,s={},i){g("message",t,32),g("private key",r,32),m("Object"===b(s),"Expected options to be an Object"),s.data!==undefined&&g("options.data",s.data),s.noncefn!==undefined&&m("Function"===b(s.noncefn),"Expected options.noncefn to be a Function");const a={signature:i=E(i,64),recid:null};switch(e.ecdsaSign(a,t,r,s.data,s.noncefn)){case 0:return a;case 1:throw new Error(h);case 2:throw new Error(n)}},ecdsaVerify(t,r,n){switch(g("signature",t,64),g("message",r,32),g("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(l);case 2:throw new Error(c)}},ecdsaRecover(t,r,s,i=!0,a){switch(g("signature",t,64),m("Number"===b(r)&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),g("message",s,32),y(i),a=E(a,i?33:65),e.ecdsaRecover(a,t,r,s)){case 0:return a;case 1:throw new Error(l);case 2:throw new Error(p);case 3:throw new Error(n)}},ecdh(t,r,n={},s){switch(g("public key",t,[33,65]),g("private key",r,32),m("Object"===b(n),"Expected options to be an Object"),n.data!==undefined&&g("options.data",n.data),n.hashfn!==undefined?(m("Function"===b(n.hashfn),"Expected options.hashfn to be a Function"),n.xbuf!==undefined&&g("options.xbuf",n.xbuf,32),n.ybuf!==undefined&&g("options.ybuf",n.ybuf,32),g("output",s)):s=E(s,32),e.ecdh(s,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return s;case 1:throw new Error(c);case 2:throw new Error(f)}}})}}},{package:"eth-lattice-keyring>gridplus-sdk>secp256k1",file:"node_modules/gridplus-sdk/node_modules/secp256k1/lib/index.js"}],[2438,{"./nil.js":2441,"./parse.js":2442,"./stringify.js":2446,"./v1.js":2447,"./v3.js":2448,"./v4.js":2450,"./v5.js":2451,"./validate.js":2452,"./version.js":2453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=h(e("./v1.js")),s=h(e("./v3.js")),i=h(e("./v4.js")),a=h(e("./v5.js")),o=h(e("./nil.js")),c=h(e("./version.js")),u=h(e("./validate.js")),d=h(e("./stringify.js")),l=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/index.js"}],[2439,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function s(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,n,i,a){return s((o=s(s(t,e),s(n,a)))<<(c=i)|o>>>32-c,r);var o,c}function a(e,t,r,n,s,a,o){return i(t&r|~t&n,e,t,s,a,o)}function o(e,t,r,n,s,a,o){return i(t&n|r&~n,e,t,s,a,o)}function c(e,t,r,n,s,a,o){return i(t^r^n,e,t,s,a,o)}function u(e,t,r,n,s,a,o){return i(r^(t|~n),e,t,s,a,o)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let s=0;s<r;s+=8){const r=e[s>>5]>>>s%32&255,i=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,i=-271733879,d=-1732584194,l=271733878;for(let t=0;t<e.length;t+=16){const n=r,h=i,p=d,f=l;r=a(r,i,d,l,e[t],7,-680876936),l=a(l,r,i,d,e[t+1],12,-389564586),d=a(d,l,r,i,e[t+2],17,606105819),i=a(i,d,l,r,e[t+3],22,-1044525330),r=a(r,i,d,l,e[t+4],7,-176418897),l=a(l,r,i,d,e[t+5],12,1200080426),d=a(d,l,r,i,e[t+6],17,-1473231341),i=a(i,d,l,r,e[t+7],22,-45705983),r=a(r,i,d,l,e[t+8],7,1770035416),l=a(l,r,i,d,e[t+9],12,-1958414417),d=a(d,l,r,i,e[t+10],17,-42063),i=a(i,d,l,r,e[t+11],22,-1990404162),r=a(r,i,d,l,e[t+12],7,1804603682),l=a(l,r,i,d,e[t+13],12,-40341101),d=a(d,l,r,i,e[t+14],17,-1502002290),i=a(i,d,l,r,e[t+15],22,1236535329),r=o(r,i,d,l,e[t+1],5,-165796510),l=o(l,r,i,d,e[t+6],9,-1069501632),d=o(d,l,r,i,e[t+11],14,643717713),i=o(i,d,l,r,e[t],20,-373897302),r=o(r,i,d,l,e[t+5],5,-701558691),l=o(l,r,i,d,e[t+10],9,38016083),d=o(d,l,r,i,e[t+15],14,-660478335),i=o(i,d,l,r,e[t+4],20,-405537848),r=o(r,i,d,l,e[t+9],5,568446438),l=o(l,r,i,d,e[t+14],9,-1019803690),d=o(d,l,r,i,e[t+3],14,-187363961),i=o(i,d,l,r,e[t+8],20,1163531501),r=o(r,i,d,l,e[t+13],5,-1444681467),l=o(l,r,i,d,e[t+2],9,-51403784),d=o(d,l,r,i,e[t+7],14,1735328473),i=o(i,d,l,r,e[t+12],20,-1926607734),r=c(r,i,d,l,e[t+5],4,-378558),l=c(l,r,i,d,e[t+8],11,-2022574463),d=c(d,l,r,i,e[t+11],16,1839030562),i=c(i,d,l,r,e[t+14],23,-35309556),r=c(r,i,d,l,e[t+1],4,-1530992060),l=c(l,r,i,d,e[t+4],11,1272893353),d=c(d,l,r,i,e[t+7],16,-155497632),i=c(i,d,l,r,e[t+10],23,-1094730640),r=c(r,i,d,l,e[t+13],4,681279174),l=c(l,r,i,d,e[t],11,-358537222),d=c(d,l,r,i,e[t+3],16,-722521979),i=c(i,d,l,r,e[t+6],23,76029189),r=c(r,i,d,l,e[t+9],4,-640364487),l=c(l,r,i,d,e[t+12],11,-421815835),d=c(d,l,r,i,e[t+15],16,530742520),i=c(i,d,l,r,e[t+2],23,-995338651),r=u(r,i,d,l,e[t],6,-198630844),l=u(l,r,i,d,e[t+7],10,1126891415),d=u(d,l,r,i,e[t+14],15,-1416354905),i=u(i,d,l,r,e[t+5],21,-57434055),r=u(r,i,d,l,e[t+12],6,1700485571),l=u(l,r,i,d,e[t+3],10,-1894986606),d=u(d,l,r,i,e[t+10],15,-1051523),i=u(i,d,l,r,e[t+1],21,-2054922799),r=u(r,i,d,l,e[t+8],6,1873313359),l=u(l,r,i,d,e[t+15],10,-30611744),d=u(d,l,r,i,e[t+6],15,-1560198380),i=u(i,d,l,r,e[t+13],21,1309151649),r=u(r,i,d,l,e[t+4],6,-145523070),l=u(l,r,i,d,e[t+11],10,-1120210379),d=u(d,l,r,i,e[t+2],15,718787259),i=u(i,d,l,r,e[t+9],21,-343485551),r=s(r,n),i=s(i,h),d=s(d,p),l=s(l,f)}return[r,i,d,l]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=d}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/md5-browser.js"}],[2440,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/native-browser.js"}],[2441,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/nil.js"}],[2442,{"./validate.js":2452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=i}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/parse.js"}],[2443,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/regex.js"}],[2444,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)};const s=new Uint8Array(16)}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/rng-browser.js"}],[2445,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function s(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),o=new Array(a);for(let t=0;t<a;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];o[t]=r}o[a-1][14]=8*(e.length-1)/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=o[e][t];for(let e=16;e<80;++e)i[e]=s(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let a=r[0],c=r[1],u=r[2],d=r[3],l=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=s(a,5)+n(r,c,u,d)+l+t[r]+i[e]>>>0;l=d,d=u,u=s(c,30)>>>0,c=a,a=o}r[0]=r[0]+a>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+l>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=i}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/sha1-browser.js"}],[2446,{"./validate.js":2452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=a;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function a(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}var o=function(e,t=0){const r=a(e,t);if(!(0,s.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=o}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/stringify.js"}],[2447,{"./rng.js":2444,"./stringify.js":2446},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./rng.js"))&&n.__esModule?n:{default:n},i=e("./stringify.js");let a,o,c=0,u=0;var d=function(e,t,r){let n=t&&r||0;const d=t||new Array(16);let l=(e=e||{}).node||a,h=e.clockseq!==undefined?e.clockseq:o;if(null==l||null==h){const t=e.random||(e.rng||s.default)();null==l&&(l=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=o=16383&(t[6]<<8|t[7]))}let p=e.msecs!==undefined?e.msecs:Date.now(),f=e.nsecs!==undefined?e.nsecs:u+1;const m=p-c+(f-u)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||p>c)&&e.nsecs===undefined&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,u=f,o=h,p+=122192928e5;const g=(1e4*(268435455&p)+f)%4294967296;d[n++]=g>>>24&255,d[n++]=g>>>16&255,d[n++]=g>>>8&255,d[n++]=255&g;const y=p/4294967296*1e4&268435455;d[n++]=y>>>8&255,d[n++]=255&y,d[n++]=y>>>24&15|16,d[n++]=y>>>16&255,d[n++]=h>>>8|128,d[n++]=255&h;for(let e=0;e<6;++e)d[n+e]=l[e];return t||(0,i.unsafeStringify)(d)};r.default=d}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/v1.js"}],[2448,{"./md5.js":2439,"./v35.js":2449},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,s.default);r.default=a}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/v3.js"}],[2449,{"./parse.js":2442,"./stringify.js":2446},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,a,o){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,i.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,a){o=o||0;for(let e=0;e<16;++e)a[o+e]=u[e];return a}return(0,s.unsafeStringify)(u)}try{n.name=e}catch(e){}return n.DNS=a,n.URL=o,n};var n,s=e("./stringify.js"),i=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=o}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/v35.js"}],[2450,{"./native.js":2440,"./rng.js":2444,"./stringify.js":2446},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./native.js")),s=a(e("./rng.js")),i=e("./stringify.js");function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const a=(e=e||{}).random||(e.rng||s.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return(0,i.unsafeStringify)(a)};r.default=o}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/v4.js"}],[2451,{"./sha1.js":2445,"./v35.js":2449},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,s.default);r.default=a}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/v5.js"}],[2452,{"./regex.js":2443},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var i=function(e){return"string"==typeof e&&s.default.test(e)};r.default=i}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/validate.js"}],[2453,{"./validate.js":2452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=i}}},{package:"eth-lattice-keyring>gridplus-sdk>uuid",file:"node_modules/gridplus-sdk/node_modules/uuid/dist/version.js"}],[25,{"../../../../shared/constants/permissions":3217,reselect:3007},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermittedAccountsByOrigin=r.getChangedAccounts=void 0;var n=e("reselect"),s=e("../../../../shared/constants/permissions");const i=(0,n.createSelector)((e=>e.subjects),(e=>Object.values(e).reduce(((e,t)=>{var r,n;const i=null===(r=t.permissions)||void 0===r||null===(n=r.eth_accounts)||void 0===n?void 0:n.caveats.find((({type:e})=>e===s.CaveatTypes.restrictReturnedAccounts));return i&&e.set(t.origin,i.value),e}),new Map)));r.getPermittedAccountsByOrigin=i;r.getChangedAccounts=(e,t)=>{if(t===undefined)return e;const r=new Map;if(e===t)return r;const n=new Set([...e.keys()]);for(const s of t.keys()){const i=e.get(s)??[];t.get(s)!==i&&r.set(s,i),n.delete(s)}for(const t of n.keys())r.set(t,e.get(t));return r}}}},{package:"$root$",file:"app/scripts/controllers/permissions/selectors.js"}],[2511,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);t.exports=e=>!n.has(e&&e.code)}}},{package:"is-retry-allowed",file:"node_modules/is-retry-allowed/index.js"}],[2515,{"./src/relative":2516,"./src/url":2517},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{URLWithLegacySupport:n,format:s,URLSearchParams:i,defaultBase:a}=e("./src/url"),o=e("./src/relative");t.exports={URL:n,URLSearchParams:i,format:s,relative:o,defaultBase:a}}}},{package:"eth-lattice-keyring>gridplus-sdk>borc>iso-url",file:"node_modules/iso-url/index.js"}],[2516,{"./url":2517},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{URLWithLegacySupport:n,format:s}=e("./url");t.exports=(e,t={},r={},i)=>{let a,o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||i||o)+":";try{a=new n(e)}catch(e){a={}}const c=Object.assign({},t,{protocol:o||a.protocol,host:t.host||a.host});return new n(e,s(c)).toString()}}}},{package:"eth-lattice-keyring>gridplus-sdk>borc>iso-url",file:"node_modules/iso-url/src/relative.js"}],[2517,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=self.location?self.location.protocol+"//"+self.location.host:"",s=self.URL;t.exports={URLWithLegacySupport:class{constructor(e="",t=n){this.super=new s(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:n,format:function(e){if("string"==typeof e){return new s(e).toString()}if(!(e instanceof s)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",s=e.protocol?e.protocol+"//":"",i=e.host||"",a=e.hostname||"",o=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"";return`${s}${t||r}${i||a+n}${e.path||u+o}${c}`}}}}}},{package:"eth-lattice-keyring>gridplus-sdk>borc>iso-url",file:"node_modules/iso-url/src/url-browser.js"}],[2519,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){return t=t||"and",r=r||", ",e.length<2?e[0]||"":(t.slice(0,2)===r?2==e.length&&(t=t.slice(1)):t=" "+t,e.slice(0,-1).join(r)+t+" "+e[e.length-1])}}}},{package:"@segment/loosely-validate-event>join-component",file:"node_modules/join-component/index.js"}],[2520,{buffer:1789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){!function(e,n){"object"==typeof r&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):function(){const t=e.Base64,r=n();r.noConflict=()=>(e.Base64=t,r),e.Meteor&&(Base64=r),e.Base64=r}()}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,(function(){const t="3.6.1",r="function"==typeof atob,n="function"==typeof btoa,s="function"==typeof e,i="function"==typeof TextDecoder?new TextDecoder:undefined,a="function"==typeof TextEncoder?new TextEncoder:undefined,o=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],c=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(o),u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),l="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),h=e=>e.replace(/[+\/]/g,(e=>"+"==e?"-":"_")).replace(/=+$/m,""),p=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),f=e=>{let t,r,n,s,i="";const a=e.length%3;for(let a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(s=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|s,i+=o[t>>18&63]+o[t>>12&63]+o[t>>6&63]+o[63&t]}return a?i.slice(0,a-3)+"===".substring(a):i},m=n?e=>btoa(e):s?t=>e.from(t,"binary").toString("base64"):f,g=s?t=>e.from(t).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(d.apply(null,e.subarray(r,r+4096)));return m(t.join(""))},y=(e,t=!1)=>t?h(g(e)):g(e),E=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?d(192|t>>>6)+d(128|63&t):d(224|t>>>12&15)+d(128|t>>>6&63)+d(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return d(240|t>>>18&7)+d(128|t>>>12&63)+d(128|t>>>6&63)+d(128|63&t)},b=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,_=e=>e.replace(b,E),T=s?t=>e.from(t,"utf8").toString("base64"):a?e=>g(a.encode(e)):e=>m(_(e)),w=(e,t=!1)=>t?h(T(e)):T(e),v=e=>w(e,!0),S=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,k=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return d(55296+(t>>>10))+d(56320+(1023&t));case 3:return d((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return d((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},A=e=>e.replace(S,k),P=e=>{if(e=e.replace(/\s+/g,""),!u.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,s="";for(let i=0;i<e.length;)t=c[e.charAt(i++)]<<18|c[e.charAt(i++)]<<12|(r=c[e.charAt(i++)])<<6|(n=c[e.charAt(i++)]),s+=64===r?d(t>>16&255):64===n?d(t>>16&255,t>>8&255):d(t>>16&255,t>>8&255,255&t);return s},M=r?e=>atob(p(e)):s?t=>e.from(t,"base64").toString("binary"):P,x=s?t=>l(e.from(t,"base64")):e=>l(M(e),(e=>e.charCodeAt(0))),I=e=>x(O(e)),R=s?t=>e.from(t,"base64").toString("utf8"):i?e=>i.decode(x(e)):e=>A(M(e)),O=e=>p(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),C=e=>R(O(e)),N=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),j=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,N(t));e("fromBase64",(function(){return C(this)})),e("toBase64",(function(e){return w(this,e)})),e("toBase64URI",(function(){return w(this,!0)})),e("toBase64URL",(function(){return w(this,!0)})),e("toUint8Array",(function(){return I(this)}))},L=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,N(t));e("toBase64",(function(e){return y(this,e)})),e("toBase64URI",(function(){return y(this,!0)})),e("toBase64URL",(function(){return y(this,!0)}))},U={version:t,VERSION:"3.6.1",atob:M,atobPolyfill:P,btoa:m,btoaPolyfill:f,fromBase64:C,toBase64:w,encode:w,encodeURI:v,encodeURL:v,utob:_,btou:A,decode:C,isValid:e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/=+$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:y,toUint8Array:I,extendString:j,extendUint8Array:L,extendBuiltins:()=>{j(),L()},Base64:{}};return Object.keys(U).forEach((e=>U.Base64[e]=U[e])),U}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ensdomains/content-hash>js-base64",file:"node_modules/js-base64/base64.js"}],[2524,{"@metamask/safe-event-emitter":1183,"eth-rpc-errors":2e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcEngine=void 0;const s=n(e("@metamask/safe-event-emitter")),i=e("eth-rpc-errors");class a extends s.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[s,i,o]=await a._runAllMiddleware(e,t,this._middleware);return i?(await a._runReturnHandlers(o),n(s)):r((async e=>{try{await a._runReturnHandlers(o)}catch(t){return e(t)}return e()}))}catch(e){return n(e)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const r=new i.EthereumRpcError(i.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:undefined,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new i.EthereumRpcError(i.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=Object.assign({},e),n={id:r.id,jsonrpc:r.jsonrpc};let s=null;try{await this._processRequest(r,n)}catch(e){s=e}return s&&(delete n.result,n.error||(n.error=i.serializeError(s))),t(s,n)}async _processRequest(e,t){const[r,n,s]=await a._runAllMiddleware(e,t,this._middleware);if(a._checkForCompletion(e,t,n),await a._runReturnHandlers(s),r)throw r}static async _runAllMiddleware(e,t,r){const n=[];let s=null,i=!1;for(const o of r)if([s,i]=await a._runMiddleware(e,t,o,n),i)break;return[s,i,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((s=>{const a=e=>{const r=e||t.error;r&&(t.error=i.serializeError(r)),s([r,!0])},c=r=>{t.error?a(t.error):(r&&("function"!=typeof r&&a(new i.EthereumRpcError(i.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${o(e)}`,{request:e})),n.push(r)),s([null,!1]))};try{r(e,t,c,a)}catch(e){a(e)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new i.EthereumRpcError(i.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${o(e)}`,{request:e});if(!r)throw new i.EthereumRpcError(i.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${o(e)}`,{request:e})}}function o(e){return JSON.stringify(e,null,2)}r.JsonRpcEngine=a}}},{package:"json-rpc-engine",file:"node_modules/json-rpc-engine/dist/JsonRpcEngine.js"}],[2525,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAsyncMiddleware=void 0,r.createAsyncMiddleware=function(e){return async(t,r,n,s)=>{let i;const a=new Promise((e=>{i=e}));let o=null,c=!1;const u=async()=>{c=!0,n((e=>{o=e,i()})),await a};try{await e(t,r,u),c?(await a,o(null)):s(null)}catch(e){o?o(e):s(e)}}}}}},{package:"json-rpc-engine",file:"node_modules/json-rpc-engine/dist/createAsyncMiddleware.js"}],[2526,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createScaffoldMiddleware=void 0,r.createScaffoldMiddleware=function(e){return(t,r,n,s)=>{const i=e[t.method];return i===undefined?n():"function"==typeof i?i(t,r,n,s):(r.result=i,s())}}}}},{package:"json-rpc-engine",file:"node_modules/json-rpc-engine/dist/createScaffoldMiddleware.js"}],[2527,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getUniqueId=void 0;const n=4294967295;let s=Math.floor(Math.random()*n);r.getUniqueId=function(){return s=(s+1)%n,s}}}},{package:"json-rpc-engine",file:"node_modules/json-rpc-engine/dist/getUniqueId.js"}],[2528,{"./getUniqueId":2527},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createIdRemapMiddleware=void 0;const n=e("./getUniqueId");r.createIdRemapMiddleware=function(){return(e,t,r,s)=>{const i=e.id,a=n.getUniqueId();e.id=a,t.id=a,r((r=>{e.id=i,t.id=i,r()}))}}}}},{package:"json-rpc-engine",file:"node_modules/json-rpc-engine/dist/idRemapMiddleware.js"}],[2529,{"./JsonRpcEngine":2524,"./createAsyncMiddleware":2525,"./createScaffoldMiddleware":2526,"./getUniqueId":2527,"./idRemapMiddleware":2528,"./mergeMiddleware":2530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./idRemapMiddleware"),r),s(e("./createAsyncMiddleware"),r),s(e("./createScaffoldMiddleware"),r),s(e("./getUniqueId"),r),s(e("./JsonRpcEngine"),r),s(e("./mergeMiddleware"),r)}}},{package:"json-rpc-engine",file:"node_modules/json-rpc-engine/dist/index.js"}],[2530,{"./JsonRpcEngine":2524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mergeMiddleware=void 0;const n=e("./JsonRpcEngine");r.mergeMiddleware=function(e){const t=new n.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()}}}},{package:"json-rpc-engine",file:"node_modules/json-rpc-engine/dist/mergeMiddleware.js"}],[2531,{"readable-stream":2996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("readable-stream");r.default=function(e){if(!e||!e.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,r=new n.Duplex({objectMode:!0,read:()=>undefined,write:function(e,n,s){t.handle(e,((e,t)=>{r.push(t)})),s()}});return t.on&&t.on("notification",(e=>{r.push(e)})),r}}}},{package:"json-rpc-middleware-stream",file:"node_modules/json-rpc-middleware-stream/dist/createEngineStream.js"}],[2532,{"@metamask/safe-event-emitter":1183,"readable-stream":2996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const s=n(e("@metamask/safe-event-emitter")),i=e("readable-stream");r.default=function(e={}){const t={},r=new i.Duplex({objectMode:!0,read:()=>undefined,write:function(r,s,i){let o=null;try{!r.id?function(r){(null==e?void 0:e.retryOnMessage)&&r.method===e.retryOnMessage&&Object.values(t).forEach((({req:e,retryCount:r=0})=>{if(e.id){if(r>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);t[e.id].retryCount=r+1,a(e)}}));n.emit("notification",r)}(r):function(e){const r=t[e.id];if(!r)return void console.warn(`StreamMiddleware - Unknown response id "${e.id}"`);delete t[e.id],Object.assign(r.res,e),setTimeout(r.end)}(r)}catch(e){o=e}i(o)}}),n=new s.default;return{events:n,middleware:(e,r,n,s)=>{a(e),t[e.id]={req:e,res:r,next:n,end:s}},stream:r};function a(e){r.push(e)}}}}},{package:"json-rpc-middleware-stream",file:"node_modules/json-rpc-middleware-stream/dist/createStreamMiddleware.js"}],[2533,{"./createEngineStream":2531,"./createStreamMiddleware":2532},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createStreamMiddleware=r.createEngineStream=void 0;const s=n(e("./createEngineStream"));r.createEngineStream=s.default;const i=n(e("./createStreamMiddleware"));r.createStreamMiddleware=i.default}}},{package:"json-rpc-middleware-stream",file:"node_modules/json-rpc-middleware-stream/dist/index.js"}],[2535,{jsonify:2536},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n="undefined"!=typeof JSON?JSON:e("jsonify");t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var a,o="boolean"==typeof t.cycles&&t.cycles,c=t.replacer||function(e,t){return t},u=t.cmp&&(a=t.cmp,function(e){return function(t,r){var n={key:t,value:e[t]},s={key:r,value:e[r]};return a(n,s)}}),d=[];return function e(t,a,l,h){var p=r?"\n"+new Array(h+1).join(r):"",f=r?": ":":";if(l&&l.toJSON&&"function"==typeof l.toJSON&&(l=l.toJSON()),(l=c.call(t,a,l))!==undefined){if("object"!=typeof l||null===l)return n.stringify(l);if(s(l)){for(var m=[],g=0;g<l.length;g++){var y=e(l,g,l[g],h+1)||n.stringify(null);m.push(p+r+y)}return"["+m.join(",")+p+"]"}if(-1!==d.indexOf(l)){if(o)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}d.push(l);var E=i(l).sort(u&&u(l));for(m=[],g=0;g<E.length;g++){var b=e(l,a=E[g],l[a],h+1);if(b){var _=n.stringify(a)+f+b;m.push(p+r+_)}}return d.splice(d.indexOf(l),1),"{"+m.join(",")+p+"}"}}({"":e},"",e,0)};var s=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},i=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r}}}},{package:"lavamoat>json-stable-stringify",file:"node_modules/json-stable-stringify/index.js"}],[2536,{"./lib/parse":2537,"./lib/stringify":2538},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.parse=e("./lib/parse"),r.stringify=e("./lib/stringify")}}},{package:"lavamoat>json-stable-stringify>jsonify",file:"node_modules/jsonify/index.js"}],[2537,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(e){throw{name:"SyntaxError",message:e,at:n,text:i}},u=function(e){return e&&e!==s&&c("Expected '"+e+"' instead of '"+s+"'"),s=i.charAt(n),n+=1,s},d=function(){var e,t="";for("-"===s&&(t="-",u("-"));s>="0"&&s<="9";)t+=s,u();if("."===s)for(t+=".";u()&&s>="0"&&s<="9";)t+=s;if("e"===s||"E"===s)for(t+=s,u(),"-"!==s&&"+"!==s||(t+=s,u());s>="0"&&s<="9";)t+=s,u();if(e=+t,isFinite(e))return e;c("Bad number")},l=function(){var e,t,r,n="";if('"'===s)for(;u();){if('"'===s)return u(),n;if("\\"===s)if(u(),"u"===s){for(r=0,t=0;t<4&&(e=parseInt(u(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof o[s])break;n+=o[s]}else n+=s}c("Bad string")},h=function(){for(;s&&s<=" ";)u()};a=function(){switch(h(),s){case"{":return function(){var e,t={};if("{"===s){if(u("{"),h(),"}"===s)return u("}"),t;for(;s;){if(e=l(),h(),u(":"),Object.hasOwnProperty.call(t,e)&&c('Duplicate key "'+e+'"'),t[e]=a(),h(),"}"===s)return u("}"),t;u(","),h()}}c("Bad object")}();case"[":return function(){var e=[];if("["===s){if(u("["),h(),"]"===s)return u("]"),e;for(;s;){if(e.push(a()),h(),"]"===s)return u("]"),e;u(","),h()}}c("Bad array")}();case'"':return l();case"-":return d();default:return s>="0"&&s<="9"?d():function(){switch(s){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}c("Unexpected '"+s+"'")}()}},t.exports=function(e,t){var r;return i=e,n=0,s=" ",r=a(),h(),s&&c("Syntax error"),"function"==typeof t?function e(r,n){var s,i,a=r[n];if(a&&"object"==typeof a)for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&((i=e(a,s))!==undefined?a[s]=i:delete a[s]);return t.call(r,n,a)}({"":r},""):r}}}},{package:"lavamoat>json-stable-stringify>jsonify",file:"node_modules/jsonify/lib/parse.js"}],[2538,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function c(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,(function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function u(e,t){var r,a,o,d,l,h=n,p=t[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof i&&(p=i.call(t,e,p)),typeof p){case"string":return c(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(n+=s,l=[],"[object Array]"===Object.prototype.toString.apply(p)){for(d=p.length,r=0;r<d;r+=1)l[r]=u(r,p)||"null";return o=0===l.length?"[]":n?"[\n"+n+l.join(",\n"+n)+"\n"+h+"]":"["+l.join(",")+"]",n=h,o}if(i&&"object"==typeof i)for(d=i.length,r=0;r<d;r+=1)"string"==typeof(a=i[r])&&(o=u(a,p))&&l.push(c(a)+(n?": ":":")+o);else for(a in p)Object.prototype.hasOwnProperty.call(p,a)&&(o=u(a,p))&&l.push(c(a)+(n?": ":":")+o);return o=0===l.length?"{}":n?"{\n"+n+l.join(",\n"+n)+"\n"+h+"}":"{"+l.join(",")+"}",n=h,o}}t.exports=function(e,t,r){var a;if(n="",s="","number"==typeof r)for(a=0;a<r;a+=1)s+=" ";else"string"==typeof r&&(s=r);if(i=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return u("",{"":e})}}}},{package:"lavamoat>json-stable-stringify>jsonify",file:"node_modules/jsonify/lib/stringify.js"}],[2539,{"./helpers":2540},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./helpers"),s=n.ValidatorResult,i=n.SchemaError,a={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0}},o=a.validators={};function c(e,t,r,n,s){var i=t.throwError;t.throwError=!1;var a=this.validateSchema(e,s,t,r);return t.throwError=i,!a.valid&&n instanceof Function&&n(a),a.valid}function u(e,t,r,n,s,i){if(this.types.object(e)&&(!t.properties||t.properties[s]===undefined))if(!1===t.additionalProperties)i.addError({name:"additionalProperties",argument:s,message:"additionalProperty "+JSON.stringify(s)+" exists in instance when not allowed"});else{var a=t.additionalProperties||{};"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,s,a,r,n);var o=this.validateSchema(e[s],a,r,n.makeChild(a,s));o.instance!==i.instance[s]&&(i.instance[s]=o.instance),i.importErrors(o)}}o.type=function(e,t,r,n){if(e===undefined)return null;var i=new s(e,t,r,n),a=Array.isArray(t.type)?t.type:[t.type];if(!a.some(this.testType.bind(this,e,t,r,n))){var o=a.map((function(e){return e.id&&"<"+e.id+">"||e+""}));i.addError({name:"type",argument:o,message:"is not of a type(s) "+o})}return i},o.anyOf=function(e,t,r,n){if(e===undefined)return null;var a=new s(e,t,r,n),o=new s(e,t,r,n);if(!Array.isArray(t.anyOf))throw new i("anyOf must be an array");if(!t.anyOf.some(c.bind(this,e,r,n,(function(e){o.importErrors(e)})))){var u=t.anyOf.map((function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));r.nestedErrors&&a.importErrors(o),a.addError({name:"anyOf",argument:u,message:"is not any of "+u.join(",")})}return a},o.allOf=function(e,t,r,n){if(e===undefined)return null;if(!Array.isArray(t.allOf))throw new i("allOf must be an array");var a=new s(e,t,r,n),o=this;return t.allOf.forEach((function(t,s){var i=o.validateSchema(e,t,r,n);if(!i.valid){var c=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+s+"]";a.addError({name:"allOf",argument:{id:c,length:i.errors.length,valid:i},message:"does not match allOf schema "+c+" with "+i.errors.length+" error[s]:"}),a.importErrors(i)}})),a},o.oneOf=function(e,t,r,n){if(e===undefined)return null;if(!Array.isArray(t.oneOf))throw new i("oneOf must be an array");var a=new s(e,t,r,n),o=new s(e,t,r,n),u=t.oneOf.filter(c.bind(this,e,r,n,(function(e){o.importErrors(e)}))).length,d=t.oneOf.map((function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));return 1!==u&&(r.nestedErrors&&a.importErrors(o),a.addError({name:"oneOf",argument:d,message:"is not exactly one from "+d.join(",")})),a},o.properties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n),a=t.properties||{};for(var o in a){"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,o,a[o],r,n);var c=Object.hasOwnProperty.call(e,o)?e[o]:undefined,u=this.validateSchema(c,a[o],r,n.makeChild(a[o],o));u.instance!==i.instance[o]&&(i.instance[o]=u.instance),i.importErrors(u)}return i}},o.patternProperties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n),a=t.patternProperties||{};for(var o in e){var c=!0;for(var d in a){if(new RegExp(d).test(o)){c=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,o,a[d],r,n);var l=this.validateSchema(e[o],a[d],r,n.makeChild(a[d],o));l.instance!==i.instance[o]&&(i.instance[o]=l.instance),i.importErrors(l)}}c&&u.call(this,e,t,r,n,o,i)}return i}},o.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var i=new s(e,t,r,n);for(var a in e)u.call(this,e,t,r,n,a,i);return i}},o.minProperties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n);return Object.keys(e).length>=t.minProperties||i.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),i}},o.maxProperties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n);return Object.keys(e).length<=t.maxProperties||i.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),i}},o.items=function(e,t,r,n){var i=this;if(this.types.array(e)&&t.items){var a=new s(e,t,r,n);return e.every((function(e,s){var o=Array.isArray(t.items)?t.items[s]||t.additionalItems:t.items;if(o===undefined)return!0;if(!1===o)return a.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=i.validateSchema(e,o,r,n.makeChild(o,s));return c.instance!==a.instance[s]&&(a.instance[s]=c.instance),a.importErrors(c),!0})),a}},o.minimum=function(e,t,r,n){if(this.types.number(e)){var i=new s(e,t,r,n);return(t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum:e>=t.minimum)||i.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),i}},o.maximum=function(e,t,r,n){if(this.types.number(e)){var i=new s(e,t,r,n);return(t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum:e<=t.maximum)||i.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),i}};var d=function(e,t,r,a,o,c){if(this.types.number(e)){var u=t[o];if(0==u)throw new i(o+" cannot be zero");var d=new s(e,t,r,a),l=n.getDecimalPlaces(e),h=n.getDecimalPlaces(u),p=Math.max(l,h),f=Math.pow(10,p);return Math.round(e*f)%Math.round(u*f)!=0&&d.addError({name:o,argument:u,message:c+JSON.stringify(u)}),d}};function l(e,t,r){var s,i=r.length;for(s=t+1;s<i;s++)if(n.deepCompareStrict(e,r[s]))return!1;return!0}o.multipleOf=function(e,t,r,n){return d.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},o.divisibleBy=function(e,t,r,n){return d.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},o.required=function(e,t,r,n){var i=new s(e,t,r,n);return e===undefined&&!0===t.required?i.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach((function(t){e[t]===undefined&&i.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})})),i},o.pattern=function(e,t,r,n){if(this.types.string(e)){var i=new s(e,t,r,n);return e.match(t.pattern)||i.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),i}},o.format=function(e,t,r,i){if(e!==undefined){var a=new s(e,t,r,i);return a.disableFormat||n.isFormat(e,t.format,this)||a.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),a}},o.minLength=function(e,t,r,n){if(this.types.string(e)){var i=new s(e,t,r,n),a=e.match(/[\uDC00-\uDFFF]/g);return e.length-(a?a.length:0)>=t.minLength||i.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),i}},o.maxLength=function(e,t,r,n){if(this.types.string(e)){var i=new s(e,t,r,n),a=e.match(/[\uDC00-\uDFFF]/g);return e.length-(a?a.length:0)<=t.maxLength||i.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),i}},o.minItems=function(e,t,r,n){if(this.types.array(e)){var i=new s(e,t,r,n);return e.length>=t.minItems||i.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),i}},o.maxItems=function(e,t,r,n){if(this.types.array(e)){var i=new s(e,t,r,n);return e.length<=t.maxItems||i.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),i}},o.uniqueItems=function(e,t,r,i){if(this.types.array(e)){var a=new s(e,t,r,i);return e.every((function(e,t,r){for(var s=t+1;s<r.length;s++)if(n.deepCompareStrict(e,r[s]))return!1;return!0}))||a.addError({name:"uniqueItems",message:"contains duplicate item"}),a}},o.uniqueItems=function(e,t,r,n){if(this.types.array(e)){var i=new s(e,t,r,n);return e.every(l)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i}},o.dependencies=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n);for(var a in t.dependencies)if(e[a]!==undefined){var o=t.dependencies[a],c=n.makeChild(o,a);if("string"==typeof o&&(o=[o]),Array.isArray(o))o.forEach((function(t){e[t]===undefined&&i.addError({name:"dependencies",argument:c.propertyPath,message:"property "+t+" not found, required by "+c.propertyPath})}));else{var u=this.validateSchema(e,o,r,c);i.instance!==u.instance&&(i.instance=u.instance),u&&u.errors.length&&(i.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),i.importErrors(u))}}return i}},o.enum=function(e,t,r,a){if(e===undefined)return null;if(!Array.isArray(t.enum))throw new i("enum expects an array",t);var o=new s(e,t,r,a);return t.enum.some(n.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),o},o.const=function(e,t,r,i){if(e===undefined)return null;var a=new s(e,t,r,i);return n.deepCompareStrict(t.const,e)||a.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),a},o.not=o.disallow=function(e,t,r,n){var i=this;if(e===undefined)return null;var a=new s(e,t,r,n),o=t.not||t.disallow;return o?(Array.isArray(o)||(o=[o]),o.forEach((function(s){if(i.testType(e,t,r,n,s)){var o=s&&s.id&&"<"+s.id+">"||s;a.addError({name:"not",argument:o,message:"is of prohibited type "+o})}})),a):null},t.exports=a}}},{package:"jsonschema",file:"node_modules/jsonschema/lib/attribute.js"}],[2540,{url:3155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),s=r.ValidationError=function(e,t,r,n,s,i){n&&(this.property=n),e&&(this.message=e),r&&(r.id?this.schema=r.id:this.schema=r),t&&(this.instance=t),this.name=s,this.argument=i,this.stack=this.toString()};s.prototype.toString=function(){return this.property+" "+this.message};var i=r.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&!0===r.disableFormat};function a(e,t){return t+": "+e.toString()+"\n"}i.prototype.addError=function(e){var t;if("string"==typeof e)t=new s(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new s(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},i.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},i.prototype.toString=function(e){return this.errors.map(a).join("")},Object.defineProperty(i.prototype,"valid",{get:function(){return!this.errors.length}});var o=r.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};o.prototype=Object.create(Error.prototype,{constructor:{value:o,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var c=r.SchemaContext=function(e,t,r,n,s){this.schema=e,this.options=t,this.propertyPath=r,this.base=n,this.schemas=s};c.prototype.resolve=function(e){return n.resolve(this.base,e)},c.prototype.makeChild=function(e,t){var r=t===undefined?this.propertyPath:this.propertyPath+d(t),s=n.resolve(this.base,e.id||""),i=new c(e,this.options,r,s,Object.create(this.schemas));return e.id&&!i.schemas[s]&&(i.schemas[s]=e),i};var u=r.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};u.regexp=u.regex,u.pattern=u.regex,u.ipv4=u["ip-address"],r.isFormat=function(e,t,r){if("string"==typeof e&&u[t]!==undefined){if(u[t]instanceof RegExp)return u[t].test(e);if("function"==typeof u[t])return u[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var d=r.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};function l(e,t,r,n){"object"==typeof r?t[n]=f(e[n],r):-1===e.indexOf(r)&&t.push(r)}function h(e,t,r){t[r]=e[r]}function p(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=f(e[n],t[n]):r[n]=t[n]}function f(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(l.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(h.bind(null,e,n)),Object.keys(t).forEach(p.bind(null,e,t,n))),n}function m(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}r.deepCompareStrict=function e(t,r){if(typeof t!=typeof r)return!1;if(t instanceof Array)return r instanceof Array&&(t.length===r.length&&t.every((function(n,s){return e(t[s],r[s])})));if("object"==typeof t){if(!t||!r)return t===r;var n=Object.keys(t),s=Object.keys(r);return n.length===s.length&&n.every((function(n){return e(t[n],r[n])}))}return t===r},t.exports.deepMerge=f,r.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var s=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(s in e))return;e=e[s]}return e},r.encodePath=function(e){return e.map(m).join("")},r.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var r=e.toString().split("e");if(2===r.length){if("-"!==r[1][0])return t;t=Number(r[1].slice(1))}var n=r[0].split(".");return 2===n.length&&(t+=n[1].length),t}}}},{package:"jsonschema",file:"node_modules/jsonschema/lib/helpers.js"}],[2541,{"./helpers":2540,"./scan":2542,"./validator":2543},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports.Validator=e("./validator");t.exports.ValidatorResult=e("./helpers").ValidatorResult,t.exports.ValidationError=e("./helpers").ValidationError,t.exports.SchemaError=e("./helpers").SchemaError,t.exports.SchemaScanResult=e("./scan").SchemaScanResult,t.exports.scan=e("./scan").scan,t.exports.validate=function(e,t,r){return(new n).validate(e,t,r)}}}},{package:"jsonschema",file:"node_modules/jsonschema/lib/index.js"}],[2542,{"./helpers":2540,url:3155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),s=e("./helpers");function i(e,t){this.id=e,this.ref=t}t.exports.SchemaScanResult=i,t.exports.scan=function(e,t){function r(e,t){if(t&&"object"==typeof t)if(t.$ref){var i=n.resolve(e,t.$ref);u[i]=u[i]?u[i]+1:0}else{var d=t.id?n.resolve(e,t.id):e;if(d){if(d.indexOf("#")<0&&(d+="#"),c[d]){if(!s.deepCompareStrict(c[d],t))throw new Error("Schema <"+t+"> already exists with different definition");return c[d]}c[d]=t,"#"==d[d.length-1]&&(c[d.substring(0,d.length-1)]=t)}a(d+"/items",t.items instanceof Array?t.items:[t.items]),a(d+"/extends",t.extends instanceof Array?t.extends:[t.extends]),r(d+"/additionalItems",t.additionalItems),o(d+"/properties",t.properties),r(d+"/additionalProperties",t.additionalProperties),o(d+"/definitions",t.definitions),o(d+"/patternProperties",t.patternProperties),o(d+"/dependencies",t.dependencies),a(d+"/disallow",t.disallow),a(d+"/allOf",t.allOf),a(d+"/anyOf",t.anyOf),a(d+"/oneOf",t.oneOf),r(d+"/not",t.not)}}function a(e,t){if(t instanceof Array)for(var n=0;n<t.length;n++)r(e+"/"+n,t[n])}function o(e,t){if(t&&"object"==typeof t)for(var n in t)r(e+"/"+n,t[n])}var c={},u={};return r(e,t),new i(c,u)}}}},{package:"jsonschema",file:"node_modules/jsonschema/lib/scan.js"}],[2543,{"./attribute":2539,"./helpers":2540,"./scan":2542,url:3155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),s=e("./attribute"),i=e("./helpers"),a=e("./scan").scan,o=i.ValidatorResult,c=i.SchemaError,u=i.SchemaContext,d=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(h),this.attributes=Object.create(s.validators)};function l(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}d.prototype.customFormats={},d.prototype.schemas=null,d.prototype.types=null,d.prototype.attributes=null,d.prototype.unresolvedRefs=null,d.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n=a(t||"/",e),s=t||e.id;for(var i in n.id)this.schemas[i]=n.id[i];for(var i in n.ref)this.unresolvedRefs.push(i);return this.unresolvedRefs=this.unresolvedRefs.filter((function(e){return void 0===r.schemas[e]})),this.schemas[s]},d.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},d.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},d.prototype.setSchemas=function(e){this.schemas=e},d.prototype.getSchema=function(e){return this.schemas[e]},d.prototype.validate=function(e,t,r,s){r||(r={});var i=r.propertyName||"instance",o=n.resolve(r.base||"/",t.id||"");if(!s){(s=new u(t,r,i,o,Object.create(this.schemas))).schemas[o]||(s.schemas[o]=t);var d=a(o,t);for(var l in d.id){var h=d.id[l];s.schemas[l]=h}}if(t){var p=this.validateSchema(e,t,r,s);if(!p)throw new Error("Result undefined");return p}throw new c("no schema specified",t)},d.prototype.validateSchema=function(e,t,r,n){var a,d=new o(e,t,r,n);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(t.extends instanceof Array){var h={schema:t,ctx:n};t.extends.forEach(this.schemaTraverser.bind(this,h)),t=h.schema,h.schema=null,h.ctx=null,h=null}else t=i.deepMerge(t,this.superResolve(t.extends,n));if(a=l(t)){var p=this.resolve(t,a,n),f=new u(p.subschema,r,n.propertyPath,p.switchSchema,n.schemas);return this.validateSchema(e,p.subschema,r,f)}var m=r&&r.skipAttributes||[];for(var g in t)if(!s.ignoreProperties[g]&&m.indexOf(g)<0){var y=null,E=this.attributes[g];if(E)y=E.call(this,e,t,r,n);else if(!1===r.allowUnknownAttributes)throw new c("Unsupported attribute: "+g,t);y&&d.importErrors(y)}if("function"==typeof r.rewrite){var b=r.rewrite.call(this,e,t,r,n);d.instance=b}return d},d.prototype.schemaTraverser=function(e,t){e.schema=i.deepMerge(e.schema,this.superResolve(t,e.ctx))},d.prototype.superResolve=function(e,t){var r;return(r=l(e))?this.resolve(e,r,t).subschema:e},d.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var s=n.parse(t),a=s&&s.hash,o=a&&a.length&&t.substr(0,t.length-a.length);if(!o||!r.schemas[o])throw new c("no such schema <"+t+">",e);var u=i.objectGetPath(r.schemas[o],a.substr(1));if(u===undefined)throw new c("no such schema "+a+" located in <"+o+">",e);return{subschema:u,switchSchema:t}},d.prototype.testType=function(e,t,r,n,s){if("function"==typeof this.types[s])return this.types[s].call(this,e);if(s&&"object"==typeof s){var i=this.validateSchema(e,s,r,n);return i===undefined||!(i&&i.errors.length)}return!0};var h=d.prototype.types={};h.string=function(e){return"string"==typeof e},h.number=function(e){return"number"==typeof e&&isFinite(e)},h.integer=function(e){return"number"==typeof e&&e%1==0},h.boolean=function(e){return"boolean"==typeof e},h.array=function(e){return Array.isArray(e)},h.null=function(e){return null===e},h.date=function(e){return e instanceof Date},h.any=function(e){return!0},h.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)},t.exports=d}}},{package:"jsonschema",file:"node_modules/jsonschema/lib/validator.js"}],[26,{"../../../../shared/constants/permissions":3217,"@metamask/permission-controller":1163},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unrestrictedMethods=r.getPermissionSpecifications=r.getCaveatSpecifications=void 0;var n=e("@metamask/permission-controller"),s=e("../../../../shared/constants/permissions");const i=Object.freeze({...s.RestrictedMethods}),a=Object.freeze({[s.CaveatTypes.restrictReturnedAccounts]:e=>({type:s.CaveatTypes.restrictReturnedAccounts,value:e})});r.getCaveatSpecifications=({getIdentities:e})=>({[s.CaveatTypes.restrictReturnedAccounts]:{type:s.CaveatTypes.restrictReturnedAccounts,decorator:(e,t)=>async r=>(await e(r)).filter((e=>t.value.includes(e))).slice(0,1),validator:(t,r,n)=>function(e,t){if(!Array.isArray(e)||0===e.length)throw new Error(`${i.eth_accounts} error: Expected non-empty array of Ethereum addresses.`);const r=t();e.forEach((e=>{if(!e||"string"!=typeof e)throw new Error(`${i.eth_accounts} error: Expected an array of Ethereum addresses. Received: "${e}".`);if(!r[e])throw new Error(`${i.eth_accounts} error: Received unrecognized address: "${e}".`)}))}(t.value,e)}});r.getPermissionSpecifications=({getAllAccounts:e,getIdentities:t,captureKeyringTypesWithMissingIdentities:r})=>({[i.eth_accounts]:{permissionType:n.PermissionType.RestrictedMethod,targetKey:i.eth_accounts,allowedCaveats:[s.CaveatTypes.restrictReturnedAccounts],factory:(e,t)=>{if(Array.isArray(e.caveats))throw new Error(`${i.eth_accounts} error: Received unexpected caveats. Any permitted caveats will be added automatically.`);if(!t.approvedAccounts)throw new Error(`${i.eth_accounts} error: No approved accounts specified.`);return(0,n.constructPermission)({...e,caveats:[a[s.CaveatTypes.restrictReturnedAccounts](t.approvedAccounts)]})},methodImplementation:async n=>{const s=await e(),i=t();return s.sort(((e,t)=>{if(!i[e])throw r(i,s),new Error(`Missing identity for address: "${e}".`);if(!i[t])throw r(i,s),new Error(`Missing identity for address: "${t}".`);return i[e].lastSelected===i[t].lastSelected?0:i[e].lastSelected===undefined?1:i[t].lastSelected===undefined?-1:i[t].lastSelected-i[e].lastSelected}))},validator:(e,t,r)=>{const{caveats:n}=e;if(!n||1!==n.length||n[0].type!==s.CaveatTypes.restrictReturnedAccounts)throw new Error(`${i.eth_accounts} error: Invalid caveats. There must be a single caveat of type "${s.CaveatTypes.restrictReturnedAccounts}".`)}}});const o=Object.freeze(["eth_blockNumber","eth_call","eth_chainId","eth_coinbase","eth_decrypt","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getEncryptionPublicKey","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleByBlockHashAndIndex","eth_getUncleByBlockNumberAndIndex","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_getWork","eth_hashrate","eth_mining","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_protocolVersion","eth_sendRawTransaction","eth_sendTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_submitHashrate","eth_submitWork","eth_syncing","eth_uninstallFilter","metamask_getProviderState","metamask_watchAsset","net_listening","net_peerCount","net_version","personal_ecRecover","personal_sign","wallet_watchAsset","web3_clientVersion","web3_sha3"]);r.unrestrictedMethods=o}}},{package:"$root$",file:"app/scripts/controllers/permissions/specifications.js"}],[2610,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=Math.max,s=Math.min;t.exports=function(e,t,r){return e>=s(t,r)&&e<n(t,r)}}}},{package:"lodash",file:"node_modules/lodash/_baseInRange.js"}],[2629,{"./_trimmedEndIndex":2709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_trimmedEndIndex"),s=/^\s+/;t.exports=function(e){return e?e.slice(0,n(e)+1).replace(s,""):e}}}},{package:"lodash",file:"node_modules/lodash/_baseTrim.js"}],[27,{"../../../shared/constants/hardware-wallets":3213,"../../../shared/constants/network":3216,"../../../shared/constants/preferences":3218,"./network":17,"@metamask/obs-store":1156,"eth-sig-util":2002},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("eth-sig-util"),i=e("../../../shared/constants/network"),a=e("../../../shared/constants/hardware-wallets"),o=e("../../../shared/constants/preferences"),c=e("./network");r.default=class{constructor(e={}){const t={useBlockie:!1,useNonceField:!1,usePhishDetect:!0,dismissSeedBackUpReminder:!1,disabledRpcMethodPreferences:{eth_sign:!1},useMultiAccountBalanceChecker:!0,useTokenDetection:!1,useNftDetection:!1,useCurrencyRateCheck:!0,openSeaEnabled:!1,advancedGasFee:null,featureFlags:{showIncomingTransactions:!0},knownMethodData:{},currentLocale:e.initLangCode,identities:{},lostIdentities:{},forgottenPassword:!1,preferences:{autoLockTimeLimit:undefined,showFiatInTestnets:!1,showTestNetworks:!1,useNativeCurrencyAsPrimaryCurrency:!0,hideZeroBalanceTokens:!1},ipfsGateway:i.IPFS_DEFAULT_GATEWAY_URL,infuraBlocked:null,ledgerTransportType:window.navigator.hid?a.LedgerTransportTypes.webhid:a.LedgerTransportTypes.u2f,transactionSecurityCheckEnabled:!1,theme:o.ThemeType.os,...e.initState};this.network=e.network,this.store=new n.ObservableStore(t),this.store.setMaxListeners(13),this.openPopup=e.openPopup,this.tokenListController=e.tokenListController,this._subscribeToInfuraAvailability(),global.setPreference=(e,t)=>this.setFeatureFlag(e,t)}setPasswordForgotten(e){this.store.updateState({forgottenPassword:e})}setUseBlockie(e){this.store.updateState({useBlockie:e})}setUseNonceField(e){this.store.updateState({useNonceField:e})}setUsePhishDetect(e){this.store.updateState({usePhishDetect:e})}setUseMultiAccountBalanceChecker(e){this.store.updateState({useMultiAccountBalanceChecker:e})}setUseTokenDetection(e){this.store.updateState({useTokenDetection:e}),this.tokenListController.updatePreventPollingOnNetworkRestart(!e),e?this.tokenListController.start():(this.tokenListController.clearingTokenListData(),this.tokenListController.stop())}setUseNftDetection(e){this.store.updateState({useNftDetection:e})}setUseCurrencyRateCheck(e){this.store.updateState({useCurrencyRateCheck:e})}setOpenSeaEnabled(e){this.store.updateState({openSeaEnabled:e})}setAdvancedGasFee(e){this.store.updateState({advancedGasFee:e})}setTheme(e){this.store.updateState({theme:e})}setTransactionSecurityCheckEnabled(e){this.store.updateState({transactionSecurityCheckEnabled:e})}addKnownMethodData(e,t){const{knownMethodData:r}=this.store.getState();r[e]=t,this.store.updateState({knownMethodData:r})}setCurrentLocale(e){const t=["ar","dv","fa","he","ku"].includes(e)?"rtl":"auto";return this.store.updateState({currentLocale:e,textDirection:t}),t}setAddresses(e){const t=this.store.getState().identities,r=e.reduce(((e,r,n)=>{const s=t[r]||{};return e[r]={name:`Account ${n+1}`,address:r,...s},e}),{});this.store.updateState({identities:r})}removeAddress(e){const{identities:t}=this.store.getState();if(!t[e])throw new Error(`${e} can't be deleted cause it was not found`);if(delete t[e],this.store.updateState({identities:t}),e===this.getSelectedAddress()){const[e]=Object.keys(t);this.setSelectedAddress(e)}return e}addAddresses(e){const{identities:t}=this.store.getState();e.forEach((e=>{if(t[e])return;const r=Object.keys(t).length;t[e]={name:`Account ${r+1}`,address:e}})),this.store.updateState({identities:t})}syncAddresses(e){if(!Array.isArray(e)||0===e.length)throw new Error("Expected non-empty array of addresses. Error #11201");const{identities:t,lostIdentities:r}=this.store.getState(),n={};Object.keys(t).forEach((r=>{e.includes(r)||(n[r]=t[r],delete t[r])})),Object.keys(n).length>0&&Object.keys(n).forEach((e=>{r[e]=n[e]})),this.store.updateState({identities:t,lostIdentities:r}),this.addAddresses(e);let s=this.getSelectedAddress();return e.includes(s)||([s]=e,this.setSelectedAddress(s)),s}setSelectedAddress(e){const t=(0,s.normalize)(e),{identities:r}=this.store.getState(),n=r[t];if(!n)throw new Error(`Identity for '${t} not found`);n.lastSelected=Date.now(),this.store.updateState({identities:r,selectedAddress:t})}getSelectedAddress(){return this.store.getState().selectedAddress}async setAccountLabel(e,t){if(!e)throw new Error(`setAccountLabel requires a valid address, got ${String(e)}`);const r=(0,s.normalize)(e),{identities:n}=this.store.getState();return n[r]=n[r]||{},n[r].name=t,this.store.updateState({identities:n}),t}async setFeatureFlag(e,t){const r={...this.store.getState().featureFlags,[e]:t};return this.store.updateState({featureFlags:r}),r}async setPreference(e,t){const r={...this.getPreferences(),[e]:t};return this.store.updateState({preferences:r}),r}getPreferences(){return this.store.getState().preferences}getIpfsGateway(){return this.store.getState().ipfsGateway}async setIpfsGateway(e){return this.store.updateState({ipfsGateway:e}),e}setLedgerTransportPreference(e){return this.store.updateState({ledgerTransportType:e}),e}getLedgerTransportPreference(){return this.store.getState().ledgerTransportType}async setDismissSeedBackUpReminder(e){await this.store.updateState({dismissSeedBackUpReminder:e})}async setDisabledRpcMethodPreference(e,t){const r={...this.store.getState().disabledRpcMethodPreferences,[e]:t};this.store.updateState({disabledRpcMethodPreferences:r})}getRpcMethodPreferences(){return this.store.getState().disabledRpcMethodPreferences}_subscribeToInfuraAvailability(){this.network.on(c.NETWORK_EVENTS.INFURA_IS_BLOCKED,(()=>{this._setInfuraBlocked(!0)})),this.network.on(c.NETWORK_EVENTS.INFURA_IS_UNBLOCKED,(()=>{this._setInfuraBlocked(!1)}))}_setInfuraBlocked(e){const{infuraBlocked:t}=this.store.getState();t!==e&&this.store.updateState({infuraBlocked:e})}}}}},{package:"$root$",file:"app/scripts/controllers/preferences.js"}],[2709,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=/\s/;t.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}}}},{package:"lodash",file:"node_modules/lodash/_trimmedEndIndex.js"}],[2716,{"./_baseInRange":2610,"./toFinite":2745,"./toNumber":2747},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseInRange"),s=e("./toFinite"),i=e("./toNumber");t.exports=function(e,t,r){return t=s(t),r===undefined?(r=t,t=0):r=s(r),e=i(e),n(e,t,r)}}}},{package:"lodash",file:"node_modules/lodash/inRange.js"}],[2722,{"./_baseKeys":2620,"./_getTag":2661,"./_isPrototype":2676,"./isArguments":2717,"./isArray":2718,"./isArrayLike":2719,"./isBuffer":2721,"./isTypedArray":2734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseKeys"),s=e("./_getTag"),i=e("./isArguments"),a=e("./isArray"),o=e("./isArrayLike"),c=e("./isBuffer"),u=e("./_isPrototype"),d=e("./isTypedArray"),l=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(o(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||d(e)||i(e)))return!e.length;var t=s(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!n(e).length;for(var r in e)if(l.call(e,r))return!1;return!0}}}},{package:"lodash",file:"node_modules/lodash/isEmpty.js"}],[2725,{"./toInteger":2746},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toInteger");t.exports=function(e){return"number"==typeof e&&e==n(e)}}}},{package:"lodash",file:"node_modules/lodash/isInteger.js"}],[2738,{"./_baseAssignValue":2600,"./_baseForOwn":2605,"./_baseIteratee":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseAssignValue"),s=e("./_baseForOwn"),i=e("./_baseIteratee");t.exports=function(e,t){var r={};return t=i(t,3),s(e,(function(e,s,i){n(r,s,t(e,s,i))})),r}}}},{package:"lodash",file:"node_modules/lodash/mapValues.js"}],[2745,{"./toNumber":2747},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toNumber"),s=1/0;t.exports=function(e){return e?(e=n(e))===s||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}}}},{package:"lodash",file:"node_modules/lodash/toFinite.js"}],[2746,{"./toFinite":2745},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toFinite");t.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}}}},{package:"lodash",file:"node_modules/lodash/toInteger.js"}],[2747,{"./_baseTrim":2629,"./isObject":2729,"./isSymbol":2733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseTrim"),s=e("./isObject"),i=e("./isSymbol"),a=0/0,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(i(e))return a;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=c.test(e);return r||u.test(e)?d(e.slice(2),r?2:8):o.test(e)?a:+e}}}},{package:"lodash",file:"node_modules/lodash/toNumber.js"}],[2759,{"./util":2763},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encodeText:n}=e("./util");t.exports=class{constructor(e,t,r,s){this.name=e,this.code=t,this.codeBuf=n(this.code),this.alphabet=s,this.codec=r(s)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/base.js"}],[2760,{"./base.js":2759,"./rfc4648":2762,"./util":2763,"@multiformats/base-x":1210},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@multiformats/base-x"),s=e("./base.js"),{rfc4648:i}=e("./rfc4648"),{decodeText:a,encodeText:o}=e("./util"),c=[["identity","\0",()=>({encode:a,decode:o}),""],["base2","0",i(1),"01"],["base8","7",i(3),"01234567"],["base10","9",n,"0123456789"],["base16","f",i(4),"0123456789abcdef"],["base16upper","F",i(4),"0123456789ABCDEF"],["base32hex","v",i(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",i(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",i(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",i(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",i(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",n,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",n,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",n,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",n,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],u=c.reduce(((e,t)=>(e[t[0]]=new s(t[0],t[1],t[2],t[3]),e)),{}),d=c.reduce(((e,t)=>(e[t[1]]=u[t[0]],e)),{});t.exports={names:u,codes:d}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/constants.js"}],[2761,{"./constants":2760,"./util":2763},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./constants"),{encodeText:s,decodeText:i,concat:a}=e("./util");function o(e){if(Object.prototype.hasOwnProperty.call(n.names,e))return n.names[e];if(Object.prototype.hasOwnProperty.call(n.codes,e))return n.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(r=t.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:r,codeBuf:n}=o(e);return function(e,t){o(e).decode(i(t))}(r,t),a([n,t],n.length+t.length)}).encode=function(e,t){const r=o(e),n=s(r.encode(t));return a([r.codeBuf,n],r.codeBuf.length+n.length)},r.decode=function(e){e instanceof Uint8Array&&(e=i(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),o(e[0]).decode(e.substring(1))},r.isEncoded=function(e){if(e instanceof Uint8Array&&(e=i(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return o(e[0]).name}catch(e){return!1}},r.encoding=o,r.encodingFromData=function(e){return e instanceof Uint8Array&&(e=i(e)),o(e[0])};const c=Object.freeze(n.names),u=Object.freeze(n.codes);r.names=c,r.codes=u}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/index.js"}],[2762,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={rfc4648:e=>t=>({encode:r=>((e,t,r)=>{const n="="===t[t.length-1],s=(1<<r)-1;let i="",a=0,o=0;for(let n=0;n<e.length;++n)for(o=o<<8|e[n],a+=8;a>r;)a-=r,i+=t[s&o>>a];if(a&&(i+=t[s&o<<r-a]),n)for(;i.length*r&7;)i+="=";return i})(r,t,e),decode:r=>((e,t,r)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*r/8|0);let a=0,o=0,c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined)throw new SyntaxError("Invalid character "+e[t]);o=o<<r|s,a+=r,a>=8&&(a-=8,i[c++]=255&o>>a)}if(a>=r||255&o<<8-a)throw new SyntaxError("Unexpected end of data");return i})(r,t,e)})}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/rfc4648.js"}],[2763,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=new TextDecoder,s=new TextEncoder;t.exports={decodeText:e=>n.decode(e),encodeText:e=>s.encode(e),concat:function(e,t){const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/util.js"}],[2764,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r){var n,s=0,i=0,a=r=r||0,o=t.length;do{if(a>=o||i>49)throw e.bytes=0,new RangeError("Could not decode varint");n=t[a++],s+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=a-r,s}}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/decode.js"}],[2765,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r,s){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");r=r||[];var i=s=s||0;for(;t>=n;)r[s++]=255&t|128,t/=128;for(;-128&t;)r[s++]=255&t|128,t>>>=7;return r[s]=0|t,e.bytes=s-i+1,r};var n=Math.pow(2,31)}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/encode.js"}],[2766,{"./decode.js":2764,"./encode.js":2765,"./length.js":2767},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/index.js"}],[2767,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=Math.pow(2,7),s=Math.pow(2,14),i=Math.pow(2,21),a=Math.pow(2,28),o=Math.pow(2,35),c=Math.pow(2,42),u=Math.pow(2,49),d=Math.pow(2,56),l=Math.pow(2,63);t.exports=function(e){return e<n?1:e<s?2:e<i?3:e<a?4:e<o?5:e<c?6:e<u?7:e<d?8:e<l?9:10}}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/length.js"}],[2768,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,docid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,json:512,messagepack:513,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056});t.exports={baseTable:n}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/generated-table.js"}],[2769,{"./maps":2770,"./util":2771,"uint8arrays/concat":3147,varint:2766},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("varint"),s=e("uint8arrays/concat"),i=e("./util"),{nameToVarint:a,constantToCode:o,nameToCode:c,codeToName:u}=e("./maps");function d(e){const t=n.decode(e),r=u[t];if(r===undefined)throw new Error(`Code "${t}" not found`);return r}function l(e){return u[e]}function h(e){const t=c[e];if(t===undefined)throw new Error(`Codec "${e}" not found`);return t}function p(e){return n.decode(e)}function f(e){const t=a[e];if(t===undefined)throw new Error(`Codec "${e}" not found`);return t}function m(e){return i.varintEncode(e)}t.exports={addPrefix:function(e,t){let r;if(e instanceof Uint8Array)r=i.varintUint8ArrayEncode(e);else{if(!a[e])throw new Error("multicodec not recognized");r=a[e]}return s([r,t],r.length+t.length)},rmPrefix:function(e){return n.decode(e),e.slice(n.decode.bytes)},getNameFromData:d,getNameFromCode:l,getCodeFromName:h,getCodeFromData:p,getVarintFromName:f,getVarintFromCode:m,getCodec:function(e){return d(e)},getName:function(e){return l(e)},getNumber:function(e){return h(e)},getCode:function(e){return p(e)},getCodeVarint:function(e){return f(e)},getVarint:function(e){return Array.from(m(e))},...o,nameToVarint:a,nameToCode:c,codeToName:u}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/index.js"}],[2770,{"./generated-table":2768,"./util":2771},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{baseTable:n}=e("./generated-table"),s=e("./util").varintEncode,i={},a={},o={};for(const e in n){const t=e,r=n[t];i[t]=s(r);a[t.toUpperCase().replace(/-/g,"_")]=r,o[r]||(o[r]=t)}Object.freeze(i),Object.freeze(a),Object.freeze(o);const c=Object.freeze(n);t.exports={nameToVarint:i,constantToCode:a,nameToCode:c,codeToName:o}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/maps.js"}],[2771,{"uint8arrays/from-string":3149,"uint8arrays/to-string":3150,varint:2766},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("varint"),s=e("uint8arrays/to-string"),i=e("uint8arrays/from-string");function a(e){return parseInt(s(e,"base16"),16)}t.exports={numberToUint8Array:function(e){let t=e.toString(16);t.length%2==1&&(t="0"+t);return i(t,"base16")},uint8ArrayToNumber:a,varintUint8ArrayEncode:function(e){return Uint8Array.from(n.encode(a(e)))},varintEncode:function(e){return Uint8Array.from(n.encode(e))}}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/util.js"}],[2789,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){for(var n=self.crypto||self.msCrypto,s="-_",i=36;i--;)s+=i.toString(36);for(i=36;i---10;)s+=i.toString(36).toUpperCase();t.exports=function(e){var t="",r=n.getRandomValues(new Uint8Array(e||21));for(i=e||21;i--;)t+=s[63&r[i]];return t}}}},{package:"nanoid",file:"node_modules/nanoid/index.browser.js"}],[2794,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();t.exports=r=n.fetch,n.fetch&&(r.default=n.fetch.bind(n)),r.Headers=n.Headers,r.Request=n.Request,r.Response=n.Response}}},{package:"node-fetch",file:"node_modules/node-fetch/browser.js"}],[2797,{assert:1556,"await-semaphore":1564,"ethjs-query":2079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("ethjs-query"),s=e("assert"),i=e("await-semaphore").Mutex;t.exports=class{constructor({provider:e,blockTracker:t,getPendingTransactions:r,getConfirmedTransactions:s}){this.provider=e,this.blockTracker=t,this.ethQuery=new n(e),this.getPendingTransactions=r,this.getConfirmedTransactions=s,this.lockMap={}}async getGlobalLock(){const e=this._lookupMutex("global");return{releaseLock:await e.acquire()}}async getNonceLock(e){await this._globalMutexFree();const t=await this._takeMutex(e);try{const r={},n=await this._getNetworkNextNonce(e),i=this._getHighestLocallyConfirmed(e),a=n.nonce,o=Math.max(a,i),c=this.getPendingTransactions(e),u=this._getHighestContinuousFrom(c,o)||0;r.params={highestLocallyConfirmed:i,highestSuggested:o,nextNetworkNonce:a},r.local=u,r.network=n;const d=Math.max(n.nonce,u.nonce);return s(Number.isInteger(d),`nonce-tracker - nextNonce is not an integer - got: (${typeof d}) "${d}"`),{nextNonce:d,nonceDetails:r,releaseLock:t}}catch(e){throw t(),e}}async _globalMutexFree(){const e=this._lookupMutex("global");(await e.acquire())()}async _takeMutex(e){const t=this._lookupMutex(e);return await t.acquire()}_lookupMutex(e){let t=this.lockMap[e];return t||(t=new i,this.lockMap[e]=t),t}async _getNetworkNextNonce(e){const t=await this.blockTracker.getLatestBlock(),r=(await this.ethQuery.getTransactionCount(e,t)).toNumber();s(Number.isInteger(r),`nonce-tracker - baseCount is not an integer - got: (${typeof r}) "${r}"`);return{name:"network",nonce:r,details:{blockNumber:t,baseCount:r}}}_getHighestLocallyConfirmed(e){const t=this.getConfirmedTransactions(e),r=this._getHighestNonce(t);return Number.isInteger(r)?r+1:0}_getHighestNonce(e){const t=e.map((e=>{const t=e.txParams.nonce;return s(typeof t,"string","nonces should be hex strings"),parseInt(t,16)}));return Math.max.apply(null,t)}_getHighestContinuousFrom(e,t){const r=e.map((e=>{const t=e.txParams.nonce;return s(typeof t,"string","nonces should be hex strings"),parseInt(t,16)}));let n=t;for(;r.includes(n);)n++;return{name:"local",nonce:n,details:{startPoint:t,highest:n}}}}}}},{package:"nonce-tracker",file:"node_modules/nonce-tracker/index.js"}],[28,{"../../../shared/constants/common":3211,"../../../shared/constants/gas":3212,"../../../shared/constants/network":3216,"../../../shared/constants/smartTransactions":3219,"../../../shared/constants/swaps":3220,"../../../shared/constants/time":3221,"../../../shared/lib/fetch-with-cache":3225,"../../../shared/lib/swaps-utils":3228,"../../../shared/lib/transactions-controller-utils":3231,"../../../shared/modules/Numeric":3233,"../../../shared/modules/conversion.utils":3237,"../../../shared/modules/string-utils":3248,"../../../shared/modules/swaps.utils":3249,"../../../ui/helpers/utils/optimism/fetchEstimatedL1Fee":3870,"./network":17,"@ethersproject/contracts":372,"@ethersproject/providers":411,"@metamask/obs-store":1156,"bignumber.js":1699,"human-standard-token-abi":2492,lodash:2737,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.default=void 0;var n=e("@ethersproject/providers"),s=e("@ethersproject/contracts"),i=k(e("loglevel")),a=k(e("bignumber.js")),o=e("@metamask/obs-store"),c=e("lodash"),u=k(e("human-standard-token-abi")),d=e("../../../shared/modules/conversion.utils"),l=e("../../../shared/constants/swaps"),h=e("../../../shared/constants/gas"),p=e("../../../shared/constants/network"),f=e("../../../shared/constants/smartTransactions"),m=e("../../../shared/modules/swaps.utils"),g=e("../../../shared/lib/swaps-utils"),y=k(e("../../../shared/lib/fetch-with-cache")),E=e("../../../shared/constants/time"),b=e("../../../shared/modules/string-utils"),_=e("../../../shared/lib/transactions-controller-utils"),T=k(e("../../../ui/helpers/utils/optimism/fetchEstimatedL1Fee")),w=e("../../../shared/modules/Numeric"),v=e("../../../shared/constants/common"),S=e("./network");function k(e){return e&&e.__esModule?e:{default:e}}const A=25e5,P=E.MINUTE;function M(e=25e5,t=0,r=0){const n=new a.default(e,10).minus(t,10);return!n.lt(0)&&n.lt(r,16)?`0x${n.toString(16)}`:r}const x={quotes:{},quotesPollingLimitEnabled:!1,fetchParams:null,tokens:null,tradeTxId:null,approveTxId:null,quotesLastFetched:null,customMaxGas:"",customGasPrice:null,customMaxFeePerGas:null,customMaxPriorityFeePerGas:null,swapsUserFeeLevel:"",selectedAggId:null,customApproveTxData:"",errorKey:"",topAggId:null,routeState:"",swapsFeatureIsLive:!0,saveFetchedQuotes:!1,swapsQuoteRefreshTime:P,swapsQuotePrefetchingRefreshTime:P,swapsStxBatchStatusRefreshTime:f.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxGetTransactionsRefreshTime:f.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxMaxFeeMultiplier:f.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER,swapsFeatureFlags:{}};function I(e){if(!Array.isArray(e)||0===e.length)throw new Error("Expected non-empty array param.");const t=[...e];if(t.sort(((e,t)=>{const r=new a.default(e.overallValueOfQuote,10),n=new a.default(t.overallValueOfQuote,10);return r.equals(n)?0:r.lessThan(n)?-1:1})),t.length%2==1){const e=t[(t.length-1)/2].overallValueOfQuote;return R(t.filter((t=>e===t.overallValueOfQuote)))}const r=t.length/2,n=r-1,s=t[r].overallValueOfQuote,i=t[n].overallValueOfQuote,o=t.filter((e=>s===e.overallValueOfQuote)),c=t.filter((e=>i===e.overallValueOfQuote)),u=R(o),d=R(c);return{ethFee:new a.default(u.ethFee,10).plus(d.ethFee,10).dividedBy(2).toString(10),metaMaskFeeInEth:new a.default(u.metaMaskFeeInEth,10).plus(d.metaMaskFeeInEth,10).dividedBy(2).toString(10),ethValueOfTokens:new a.default(u.ethValueOfTokens,10).plus(d.ethValueOfTokens,10).dividedBy(2).toString(10)}}function R(e){const t=e.reduce(((e,t)=>({ethFee:e.ethFee.plus(t.ethFee,10),metaMaskFeeInEth:e.metaMaskFeeInEth.plus(t.metaMaskFeeInEth,10),ethValueOfTokens:e.ethValueOfTokens.plus(t.ethValueOfTokens,10)})),{ethFee:new a.default(0,10),metaMaskFeeInEth:new a.default(0,10),ethValueOfTokens:new a.default(0,10)});return{ethFee:t.ethFee.div(e.length,10).toString(10),metaMaskFeeInEth:t.metaMaskFeeInEth.div(e.length,10).toString(10),ethValueOfTokens:t.ethValueOfTokens.div(e.length,10).toString(10)}}r.default=class{constructor({getBufferedGasLimit:e,networkController:t,provider:r,getProviderConfig:s,getTokenRatesState:i,fetchTradesInfo:a=g.fetchTradesInfo,getCurrentChainId:c,getEIP1559GasFeeEstimates:u}){this.store=new o.ObservableStore({swapsState:{...x}}),this.resetState=()=>{this.store.updateState({swapsState:{...x}})},this._fetchTradesInfo=a,this._getCurrentChainId=c,this._getEIP1559GasFeeEstimates=u,this.getBufferedGasLimit=e,this.getTokenRatesState=i,this.pollCount=0,this.getProviderConfig=s,this.indexOfNewestCallInFlight=0,this.ethersProvider=new n.Web3Provider(r),this._currentNetwork=t.store.getState().network,t.on(S.NETWORK_EVENTS.NETWORK_DID_CHANGE,(e=>{"loading"!==e&&e!==this._currentNetwork&&(this._currentNetwork=e,this.ethersProvider=new n.Web3Provider(r))}))}async fetchSwapsNetworkConfig(e){const t=await(0,y.default)((0,g.getBaseApi)("network",e),{method:"GET"},{cacheRefreshTime:6e5}),{refreshRates:r,parameters:n={}}=t||{};if(!r||"number"!=typeof r.quotes||"number"!=typeof r.quotesPrefetching)throw new Error(`MetaMask - invalid response for refreshRates: ${t}`);return{quotes:1e3*r.quotes,quotesPrefetching:1e3*r.quotesPrefetching,stxGetTransactions:1e3*r.stxGetTransactions,stxBatchStatus:1e3*r.stxBatchStatus,stxStatusDeadline:r.stxStatusDeadline,stxMaxFeeMultiplier:n.stxMaxFeeMultiplier}}async _setSwapsNetworkConfig(){var e,t,r,n,s,i;const a=this._getCurrentChainId();let o;try{o=await this.fetchSwapsNetworkConfig(a)}catch(e){console.error("Request for Swaps network config failed: ",e)}const{swapsState:c}=this.store.getState();this.store.updateState({swapsState:{...c,swapsQuoteRefreshTime:(null===(e=o)||void 0===e?void 0:e.quotes)||P,swapsQuotePrefetchingRefreshTime:(null===(t=o)||void 0===t?void 0:t.quotesPrefetching)||P,swapsStxGetTransactionsRefreshTime:(null===(r=o)||void 0===r?void 0:r.stxGetTransactions)||f.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxBatchStatusRefreshTime:(null===(n=o)||void 0===n?void 0:n.stxBatchStatus)||f.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxStatusDeadline:(null===(s=o)||void 0===s?void 0:s.stxStatusDeadline)||f.FALLBACK_SMART_TRANSACTIONS_DEADLINE,swapsStxMaxFeeMultiplier:(null===(i=o)||void 0===i?void 0:i.stxMaxFeeMultiplier)||f.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER}})}pollForNewQuotes(){const{swapsState:{swapsQuoteRefreshTime:e,swapsQuotePrefetchingRefreshTime:t,quotesPollingLimitEnabled:r}}=this.store.getState(),n=r?e:t;this.pollingTimeout=setTimeout((()=>{var e;const{swapsState:t}=this.store.getState();this.fetchAndSetQuotes(t.fetchParams,null===(e=t.fetchParams)||void 0===e?void 0:e.metaData,!0)}),n)}stopPollingForQuotes(){this.pollingTimeout&&clearTimeout(this.pollingTimeout)}async fetchAndSetQuotes(e,t={},r){const{chainId:n}=t,{swapsState:{quotesPollingLimitEnabled:s,saveFetchedQuotes:i}}=this.store.getState();if(!e)return null;r||(this.pollCount=0),clearTimeout(this.pollingTimeout),r||this.setSwapsErrorKey("");const a=this.indexOfNewestCallInFlight+1;this.indexOfNewestCallInFlight=a,i||this.setSaveFetchedQuotes(!0);let[o]=await Promise.all([this._fetchTradesInfo(e,{...t}),this._setSwapsNetworkConfig()]);const{swapsState:{saveFetchedQuotes:u}}=this.store.getState();if(!u)return[{},null];o=(0,c.mapValues)(o,(e=>({...e,sourceTokenInfo:t.sourceTokenInfo,destinationTokenInfo:t.destinationTokenInfo}))),n===p.CHAIN_IDS.OPTIMISM&&Object.values(o).length>0&&await Promise.all(Object.values(o).map((async e=>{if(e.trade){const t=await(0,T.default)({txParams:e.trade,chainId:n},this.ethersProvider);e.multiLayerL1TradeFeeTotal=t}return e})));const d=Date.now();let h=!1;if(!(0,m.isSwapsDefaultTokenAddress)(e.sourceToken,n)&&Object.values(o).length){const t=await this._getERC20Allowance(e.sourceToken,e.fromAddress,n),[s]=Object.values(o);if(h=s.approvalNeeded&&t.eq(0)&&"wrappedNative"!==s.aggregator,h){if(!r){const{gasLimit:e}=await this.timedoutGasReturn(s.approvalNeeded);o=(0,c.mapValues)(o,(t=>({...t,approvalNeeded:{...t.approvalNeeded,gas:e||l.DEFAULT_ERC20_APPROVE_GAS}})))}}else o=(0,c.mapValues)(o,(e=>({...e,approvalNeeded:null})))}let f=null;if(h||null!=e&&e.balanceError||(o=await this.getAllQuotesWithGasEstimates(o)),0===Object.values(o).length)this.setSwapsErrorKey(l.QUOTES_NOT_AVAILABLE_ERROR);else{const[e,t]=await this._findTopQuoteAndCalculateSavings(o);f=e,o=t}if(this.indexOfNewestCallInFlight!==a)throw new Error(l.SWAPS_FETCH_ORDER_CONFLICT);const{swapsState:g}=this.store.getState();let{selectedAggId:y}=g;return o[y]||(y=null),this.store.updateState({swapsState:{...g,quotes:o,fetchParams:{...e,metaData:t},quotesLastFetched:d,selectedAggId:y,topAggId:f}}),s&&(this.pollCount+=1),!s||this.pollCount<4?(this.pollForNewQuotes(),[o,f]):(this.resetPostFetchState(),this.setSwapsErrorKey(l.QUOTES_EXPIRED_ERROR),null)}safeRefetchQuotes(){const{swapsState:e}=this.store.getState();!this.pollingTimeout&&e.fetchParams&&this.fetchAndSetQuotes(e.fetchParams)}setSelectedQuoteAggId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,selectedAggId:e}})}setSwapsTokens(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,tokens:e}})}clearSwapsQuotes(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...e,quotes:{}}})}setSwapsErrorKey(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,errorKey:e}})}async getAllQuotesWithGasEstimates(e){const t=await Promise.all(Object.values(e).map((async e=>{const{gasLimit:t,simulationFails:r}=await this.timedoutGasReturn(e.trade);return[t,r,e.aggregator]}))),r={};return t.forEach((([t,n,s])=>{if(t&&!n){const n=M(e[s].maxGas,e[s].estimatedRefund,t);r[s]={...e[s],gasEstimate:t,gasEstimateWithRefund:n}}else e[s].approvalNeeded&&(r[s]=e[s])})),r}timedoutGasReturn(e){return new Promise((t=>{let r=!1;const n=setTimeout((()=>{r=!0,t({gasLimit:null,simulationFails:!0})}),5*E.SECOND),s={data:e.data,from:e.from,to:e.to,value:e.value};this.getBufferedGasLimit({txParams:s},1).then((({gasLimit:e,simulationFails:s})=>{r||(clearTimeout(n),t({gasLimit:e,simulationFails:s}))})).catch((e=>{i.default.error(e),r||(clearTimeout(n),t({gasLimit:null,simulationFails:!0}))}))}))}async setInitialGasEstimate(e){const{swapsState:t}=this.store.getState(),r={...t.quotes[e]},{gasLimit:n,simulationFails:s}=await this.timedoutGasReturn(r.trade);if(n&&!s){const e=M(r.maxGas,r.estimatedRefund,n);r.gasEstimate=n,r.gasEstimateWithRefund=e}this.store.updateState({swapsState:{...t,quotes:{...t.quotes,[e]:r}}})}setApproveTxId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,approveTxId:e}})}setTradeTxId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,tradeTxId:e}})}setQuotesLastFetched(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,quotesLastFetched:e}})}setSwapsTxGasPrice(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customGasPrice:e}})}setSwapsTxMaxFeePerGas(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxFeePerGas:e}})}setSwapsUserFeeLevel(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,swapsUserFeeLevel:e}})}setSwapsQuotesPollingLimitEnabled(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,quotesPollingLimitEnabled:e}})}setSwapsTxMaxFeePriorityPerGas(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxPriorityFeePerGas:e}})}setSwapsTxGasLimit(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxGas:e}})}setCustomApproveTxData(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customApproveTxData:e}})}setBackgroundSwapRouteState(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,routeState:e}})}setSaveFetchedQuotes(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,saveFetchedQuotes:e}})}setSwapsLiveness(e){const{swapsState:t}=this.store.getState(),{swapsFeatureIsLive:r}=e;this.store.updateState({swapsState:{...t,swapsFeatureIsLive:r}})}setSwapsFeatureFlags(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,swapsFeatureFlags:e}})}resetPostFetchState(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...x,tokens:e.tokens,fetchParams:e.fetchParams,swapsFeatureIsLive:e.swapsFeatureIsLive,swapsQuoteRefreshTime:e.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsQuotePrefetchingRefreshTime,swapsFeatureFlags:e.swapsFeatureFlags}}),clearTimeout(this.pollingTimeout)}resetSwapsState(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...x,swapsQuoteRefreshTime:e.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsQuotePrefetchingRefreshTime}}),clearTimeout(this.pollingTimeout)}async _findTopQuoteAndCalculateSavings(e={}){const{contractExchangeRates:t}=this.getTokenRatesState(),{swapsState:{customGasPrice:r,customMaxPriorityFeePerGas:n}}=this.store.getState(),s=this._getCurrentChainId();if(!Object.keys(e).length)return{};const i=(0,c.cloneDeep)(e),{gasFeeEstimates:o,gasEstimateType:u}=await this._getEIP1559GasFeeEstimates();let l="0x0";if(u===h.GasEstimateTypes.feeMarket){const{high:{suggestedMaxPriorityFeePerGas:e},estimatedBaseFee:t}=o,r=(0,d.decGWEIToHexWEI)(e),s=new w.Numeric(t,10,v.EtherDenomination.GWEI).toDenomination(v.EtherDenomination.WEI);l=new w.Numeric(n||r,16).add(s).round(6).toString()}else u===h.GasEstimateTypes.legacy?l=r||(0,d.decGWEIToHexWEI)(o.high):u===h.GasEstimateTypes.ethGasPrice&&(l=r||(0,d.decGWEIToHexWEI)(o.gasPrice));let p=null,f=null;Object.values(i).forEach((e=>{const{aggregator:r,approvalNeeded:n,averageGas:i,destinationAmount:o=0,destinationToken:c,destinationTokenInfo:u,gasEstimateWithRefund:h,sourceAmount:g,sourceToken:y,trade:E,fee:T,multiLayerL1TradeFeeTotal:S}=e,k=(h?new a.default(h,16):new a.default(i||A,10)).plus((null==n?void 0:n.gas)||"0x0",16).toString(16);let P=(0,_.calcGasTotal)(k,l);null!==S&&(P=(0,d.sumHexes)(P||"0x0",S||"0x0"));const M=new w.Numeric(P,16,v.EtherDenomination.WEI).add(new w.Numeric(E.value,16,v.EtherDenomination.WEI)),x=M.toDenomination(v.EtherDenomination.ETH).round(6).value,I=(0,m.isSwapsDefaultTokenAddress)(y,s)?M.minus(new w.Numeric(g,10)).toDenomination(v.EtherDenomination.ETH).round(6).value:x,R=(0,_.calcTokenAmount)(o,u.decimals),O=new a.default(100,10).minus(T,10).div(100),C=R.div(O).minus(R),N=t[Object.keys(t).find((e=>(0,b.isEqualCaseInsensitive)(e,c)))],j=N||1,L=R.times(j.toString(10),10),U=(0,m.isSwapsDefaultTokenAddress)(c,s)?1:N,D=U===undefined?L:L.minus(I,10);e.ethFee=I.toString(10),U!==undefined&&(e.ethValueOfTokens=L.toString(10),e.overallValueOfQuote=D.toString(10),e.metaMaskFeeInEth=C.times(U.toString(10)).toString(10)),(null===f||D.gt(f))&&(p=r,f=D)}));let g=null;if((0,m.isSwapsDefaultTokenAddress)(i[p].destinationToken,s)||Boolean(t[Object.keys(t).find((e=>{var t;return(0,b.isEqualCaseInsensitive)(e,null===(t=i[p])||void 0===t?void 0:t.destinationToken)}))])){const e=i[p];g={};const{ethFee:t,metaMaskFeeInEth:r,ethValueOfTokens:n}=I(Object.values(i));g.performance=new a.default(e.ethValueOfTokens,10).minus(n,10),g.fee=new a.default(t).minus(e.ethFee,10),g.metaMaskFee=e.metaMaskFeeInEth,g.total=g.performance.plus(g.fee).minus(g.metaMaskFee).toString(10),g.performance=g.performance.toString(10),g.fee=g.fee.toString(10),g.medianMetaMaskFee=r,i[p].isBestQuote=!0,i[p].savings=g}return[p,i]}async _getERC20Allowance(e,t,r){const n=new s.Contract(e,u.default,this.ethersProvider);return await n.allowance(t,l.SWAPS_CHAINID_CONTRACT_ADDRESS_MAP[r])}};const O={getMedianEthValueQuote:I,meansOfQuotesFeesAndValue:R};r.utils=O}}},{package:"$root$",file:"app/scripts/controllers/swaps.js"}],[2809,{"safe-event-emitter":3015,xtend:3197},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){e("xtend");const n=e("safe-event-emitter");t.exports=class extends n{constructor(e={}){super(),this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState(),r=Object.assign({},t,e);this.putState(r)}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}}}},{package:"@metamask/eth-keyring-controller>obs-store",file:"node_modules/obs-store/index.js"}],[29,{"../../../../shared/constants/app":3209,"../../../../shared/constants/gas":3212,"../../../../shared/constants/metametrics":3215,"../../../../shared/constants/network":3216,"../../../../shared/constants/transaction":3223,"../../../../shared/lib/transactions-controller-utils":3231,"../../../../shared/modules/Numeric":3233,"../../../../shared/modules/conversion.utils":3237,"../../../../shared/modules/swaps.utils":3249,"../../../../shared/modules/transaction.utils":3250,"../../lib/cleanErrorStack":39,"../../lib/util":85,"../../metamask-controller":86,"./lib/util":31,"./pending-tx-tracker":32,"./tx-gas-utils":33,"./tx-state-manager":34,"@ethereumjs/common":300,"@ethereumjs/tx":305,"@metamask/obs-store":1156,"bignumber.js":1699,"eth-rpc-errors":2e3,"ethereumjs-util":2044,"ethjs-query":2079,lodash:2737,loglevel:2749,"nonce-tracker":2797,"safe-event-emitter":3015},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=O(e("safe-event-emitter")),s=e("@metamask/obs-store"),i=e("ethereumjs-util"),a=O(e("ethjs-query")),o=e("eth-rpc-errors"),c=O(e("@ethereumjs/common")),u=e("@ethereumjs/tx"),d=O(e("nonce-tracker")),l=O(e("loglevel")),h=O(e("bignumber.js")),p=e("lodash"),f=O(e("../../lib/cleanErrorStack")),m=e("../../lib/util"),g=e("../../../../shared/constants/transaction"),y=e("../../metamask-controller"),E=e("../../../../shared/constants/gas"),b=e("../../../../shared/modules/conversion.utils"),_=e("../../../../shared/modules/swaps.utils"),T=e("../../../../shared/constants/metametrics"),w=e("../../../../shared/constants/network"),v=e("../../../../shared/modules/transaction.utils"),S=e("../../../../shared/constants/app"),k=e("../../../../shared/lib/transactions-controller-utils"),A=e("../../../../shared/modules/Numeric"),P=O(e("./tx-state-manager")),M=O(e("./tx-gas-utils")),x=O(e("./pending-tx-tracker")),I=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=R(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=s?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(e("./lib/util"));function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(R=function(e){return e?r:t})(e)}function O(e){return e&&e.__esModule?e:{default:e}}const C=[g.TransactionType.swap,g.TransactionType.swapApproval],N=[...C,g.TransactionType.simpleSend,g.TransactionType.tokenMethodTransfer,g.TransactionType.tokenMethodTransferFrom,g.TransactionType.contractInteraction],j="failed on-chain";class L extends n.default{constructor(e){super(),this.getNetworkState=e.getNetworkState,this._getCurrentChainId=e.getCurrentChainId,this.getProviderConfig=e.getProviderConfig,this._getCurrentNetworkEIP1559Compatibility=e.getCurrentNetworkEIP1559Compatibility,this._getCurrentAccountEIP1559Compatibility=e.getCurrentAccountEIP1559Compatibility,this.preferencesStore=e.preferencesStore||new s.ObservableStore({}),this.provider=e.provider,this.getPermittedAccounts=e.getPermittedAccounts,this.blockTracker=e.blockTracker,this.signEthTx=e.signTransaction,this.inProcessOfSigning=new Set,this._trackMetaMetricsEvent=e.trackMetaMetricsEvent,this._getParticipateInMetrics=e.getParticipateInMetrics,this._getEIP1559GasFeeEstimates=e.getEIP1559GasFeeEstimates,this.createEventFragment=e.createEventFragment,this.updateEventFragment=e.updateEventFragment,this.finalizeEventFragment=e.finalizeEventFragment,this.getEventFragmentById=e.getEventFragmentById,this.getDeviceModel=e.getDeviceModel,this.getAccountType=e.getAccountType,this.getTokenStandardAndDetails=e.getTokenStandardAndDetails,this.securityProviderRequest=e.securityProviderRequest,this.memStore=new s.ObservableStore({}),this.resetState=()=>{this._updateMemstore()},this.query=new a.default(this.provider),this.txGasUtil=new M.default(this.provider),this._mapMethods(),this.txStateManager=new P.default({initState:e.initState,txHistoryLimit:e.txHistoryLimit,getNetworkState:this.getNetworkState,getCurrentChainId:e.getCurrentChainId}),this.store=this.txStateManager.store,this.nonceTracker=new d.default({provider:this.provider,blockTracker:this.blockTracker,getPendingTransactions:(...t)=>[...this.txStateManager.getPendingTransactions(...t),...e.getExternalPendingTransactions(...t)],getConfirmedTransactions:this.txStateManager.getConfirmedTransactions.bind(this.txStateManager)}),this.pendingTxTracker=new x.default({provider:this.provider,nonceTracker:this.nonceTracker,publishTransaction:e=>this.query.sendRawTransaction(e),getPendingTransactions:()=>[...this.txStateManager.getPendingTransactions(),...this.txStateManager.getApprovedTransactions()],approveTransaction:this.approveTransaction.bind(this),getCompletedTransactions:this.txStateManager.getConfirmedTransactions.bind(this.txStateManager)}),this.txStateManager.store.subscribe((()=>this.emit(y.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE))),this._setupListeners(),this._updateMemstore(),this.txStateManager.store.subscribe((()=>this._updateMemstore())),e.onNetworkStateChange((()=>{this._onBootCleanUp(),this._updateMemstore()})),this._updatePendingTxsAfterFirstBlock(),this._onBootCleanUp()}getChainId(){const e=this.getNetworkState(),t=this._getCurrentChainId(),r=parseInt(t,16);return"loading"===e||Number.isNaN(r)?0:r}async getEIP1559Compatibility(e){const t=await this._getCurrentNetworkEIP1559Compatibility(),r=await this._getCurrentAccountEIP1559Compatibility(e);return t&&r}async getCommonConfiguration(e){const{type:t,nickname:r}=this.getProviderConfig(),n=await this.getEIP1559Compatibility(e)?w.HARDFORKS.LONDON:w.HARDFORKS.BERLIN;if(t!==w.NETWORK_TYPES.RPC&&t!==w.NETWORK_TYPES.SEPOLIA)return new c.default({chain:t,hardfork:n});const s=parseInt(this._getCurrentChainId(),16),i=this.getNetworkState(),a={name:r,chainId:s,networkId:"loading"===i?0:parseInt(i,10)};return c.default.forCustomChain(w.NETWORK_TYPES.MAINNET,a,n)}addTransaction(e){this.txStateManager.addTransaction(e),this.emit(`${e.id}:unapproved`,e),this._trackTransactionMetricsEvent(e,g.TransactionMetaMetricsEvent.added,e.actionId)}wipeTransactions(e){this.txStateManager.wipeTransactions(e)}async newUnapprovedTransaction(e,t={}){l.default.debug(`MetaMaskController newUnapprovedTransaction ${JSON.stringify(e)}`);const r=await this.addUnapprovedTransaction(t.method,e,t.origin,undefined,undefined,t.id);return new Promise(((e,t)=>{this.txStateManager.once(`${r.id}:finished`,(r=>{switch(r.status){case g.TransactionStatus.submitted:return e(r.hash);case g.TransactionStatus.rejected:return t((0,f.default)(o.ethErrors.provider.userRejectedRequest("MetaMask Tx Signature: User denied transaction signature.")));case g.TransactionStatus.failed:return t((0,f.default)(o.ethErrors.rpc.internal(r.err.message)));default:return t((0,f.default)(o.ethErrors.rpc.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(r.txParams)}`)))}}))}))}_getTransaction(e){const{transactions:t}=this.store.getState();return t[e]}_isUnapprovedTransaction(e){return this.txStateManager.getTransaction(e).status===g.TransactionStatus.unapproved}_throwErrorIfNotUnapprovedTx(e,t){if(!this._isUnapprovedTransaction(e))throw new Error(`TransactionsController: Can only call ${t} on an unapproved transaction.\n         Current tx status: ${this.txStateManager.getTransaction(e).status}`)}_updateTransaction(e,t,r){const n=this.txStateManager.getTransaction(e),s=(0,p.merge)(n,t);this.txStateManager.updateTransaction(s,r)}updatePreviousGasParams(e,{maxFeePerGas:t,maxPriorityFeePerGas:r,gasLimit:n}){const s={previousGas:{maxFeePerGas:t,maxPriorityFeePerGas:r,gasLimit:n}};s.previousGas=(0,p.pickBy)(s.previousGas);const i=`Update Previous Gas for ${e}`;return this._updateTransaction(e,s,i),this._getTransaction(e)}async updateEditableParams(e,{data:t,from:r,to:n,value:s,gas:i,gasPrice:a}){this._throwErrorIfNotUnapprovedTx(e,"updateEditableParams");const o={txParams:{data:t,from:r,to:n,value:s,gas:i,gasPrice:a}};o.txParams=(0,p.pickBy)(o.txParams,(e=>e!==undefined));const c=this._getTransaction(e),{type:u}=await(0,v.determineTransactionType)({...c.txParams,...o.txParams},this.query);o.type=u;const d=`Update Editable Params for ${e}`;return this._updateTransaction(e,o,d),this._getTransaction(e)}updateTransactionGasFees(e,{gas:t,gasLimit:r,gasPrice:n,maxPriorityFeePerGas:s,maxFeePerGas:i,estimateUsed:a,estimateSuggested:o,defaultGasEstimates:c,originalGasEstimate:u,userEditedGasLimit:d,userFeeLevel:l}){this._throwErrorIfNotUnapprovedTx(e,"updateTransactionGasFees");let h={txParams:{gas:t,gasLimit:r,gasPrice:n,maxPriorityFeePerGas:s,maxFeePerGas:i},estimateUsed:a,estimateSuggested:o,defaultGasEstimates:c,originalGasEstimate:u,userEditedGasLimit:d,userFeeLevel:l};h.txParams=(0,p.pickBy)(h.txParams),h=(0,p.pickBy)(h);const f=`Update Transaction Gas Fees for ${e}`;return this._updateTransaction(e,h,f),this._getTransaction(e)}updateTransactionEstimatedBaseFee(e,{estimatedBaseFee:t,decEstimatedBaseFee:r}){this._throwErrorIfNotUnapprovedTx(e,"updateTransactionEstimatedBaseFee");let n={estimatedBaseFee:t,decEstimatedBaseFee:r};n=(0,p.pickBy)(n);const s=`Update Transaction Estimated Base Fees for ${e}`;return this._updateTransaction(e,n,s),this._getTransaction(e)}updateSwapApprovalTransaction(e,{type:t,sourceTokenSymbol:r}){this._throwErrorIfNotUnapprovedTx(e,"updateSwapApprovalTransaction");let n={type:t,sourceTokenSymbol:r};n=(0,p.pickBy)(n);const s=`Update Swap Approval Transaction for ${e}`;return this._updateTransaction(e,n,s),this._getTransaction(e)}updateSwapTransaction(e,{sourceTokenSymbol:t,destinationTokenSymbol:r,type:n,destinationTokenDecimals:s,destinationTokenAddress:i,swapMetaData:a,swapTokenValue:o,estimatedBaseFee:c,approvalTxId:u}){this._throwErrorIfNotUnapprovedTx(e,"updateSwapTransaction");let d={sourceTokenSymbol:t,destinationTokenSymbol:r,type:n,destinationTokenDecimals:s,destinationTokenAddress:i,swapMetaData:a,swapTokenValue:o,estimatedBaseFee:c,approvalTxId:u};d=(0,p.pickBy)(d);const l=`Update Swap Transaction for ${e}`;return this._updateTransaction(e,d,l),this._getTransaction(e)}updateTransactionUserSettings(e,{userEditedGasLimit:t,userFeeLevel:r}){this._throwErrorIfNotUnapprovedTx(e,"updateTransactionUserSettings");let n={userEditedGasLimit:t,userFeeLevel:r};n=(0,p.pickBy)(n);const s=`Update User Settings for ${e}`;return this._updateTransaction(e,n,s),this._getTransaction(e)}updateTransactionSendFlowHistory(e,t,r){var n;this._throwErrorIfNotUnapprovedTx(e,"updateTransactionSendFlowHistory");const s=this._getTransaction(e);if(t===((null==s||null===(n=s.sendFlowHistory)||void 0===n?void 0:n.length)||0)){const t=`Update sendFlowHistory for ${e}`;this.txStateManager.updateTransaction({...s,sendFlowHistory:[...(null==s?void 0:s.sendFlowHistory)??[],...r]},t)}return this._getTransaction(e)}async addTransactionGasDefaults(e){const t=await(0,v.determineTransactionContractCode)(e.txParams,this.query);let r=e;try{r=await this.addTxGasDefaults(e,t)}catch(t){throw l.default.warn(t),r=this.txStateManager.getTransaction(e.id),r.loadingDefaults=!1,this.txStateManager.updateTransaction(e,"Failed to calculate gas defaults."),t}return r.loadingDefaults=!1,this.txStateManager.updateTransaction(r,"Added new unapproved transaction."),r}async addUnapprovedTransaction(e,t,r,n,s=[],i){if(n!==undefined&&!N.includes(n))throw new Error(`TransactionController - invalid transactionType value: ${n}`);if(i){let e=this.txStateManager.getTransactionWithActionId(i);if(e)return this.emit("newUnapprovedTx",e),e=await this.addTransactionGasDefaults(e),e}const a=I.normalizeTxParams(t),c=await this.getEIP1559Compatibility();I.validateTxParams(a,c);let u=this.txStateManager.generateTxMeta({txParams:a,origin:r,sendFlowHistory:s});if(i&&(u.actionId=i),r===S.ORIGIN_METAMASK){if(a.from!==this.getSelectedAddress())throw o.ethErrors.rpc.internal({message:"Internally initiated transaction is using invalid account.",data:{origin:r,fromAddress:a.from,selectedAddress:this.getSelectedAddress()}})}else{if(!(await this.getPermittedAccounts(r)).includes(a.from))throw o.ethErrors.provider.unauthorized({data:{origin:r}})}const{type:d}=await(0,v.determineTransactionType)(a,this.query);if(u.type=n||d,u.txParams.value=u.txParams.value?(0,m.addHexPrefix)(u.txParams.value):"0x0",e&&this.securityProviderRequest){const t=await this.securityProviderRequest(u,e);u.securityProviderResponse=t}return this.addTransaction(u),this.emit("newUnapprovedTx",u),u=await this.addTransactionGasDefaults(u),u}async addTxGasDefaults(e,t){const r=e.txParams.type!==g.TransactionEnvelopeType.legacy&&await this.getEIP1559Compatibility(),{gasPrice:n,maxFeePerGas:s,maxPriorityFeePerGas:i}=await this._getDefaultGasFees(e,r),{gasLimit:a,simulationFails:o}=await this._getDefaultGasLimit(e,t);if(e=this.txStateManager.getTransaction(e.id),o&&(e.simulationFails=o),r){const t=this.getAdvancedGasFee();Boolean(t)&&!C.includes(e.type)?(e.userFeeLevel=E.CUSTOM_GAS_ESTIMATE,e.txParams.maxFeePerGas=(0,b.decGWEIToHexWEI)(t.maxBaseFee),e.txParams.maxPriorityFeePerGas=(0,b.decGWEIToHexWEI)(t.priorityFee)):!e.txParams.gasPrice||e.txParams.maxFeePerGas||e.txParams.maxPriorityFeePerGas?(s&&i&&!e.txParams.maxFeePerGas&&!e.txParams.maxPriorityFeePerGas||e.origin===S.ORIGIN_METAMASK?e.userFeeLevel=E.GasRecommendations.medium:e.userFeeLevel=E.PriorityLevels.dAppSuggested,s&&!e.txParams.maxFeePerGas&&(e.txParams.maxFeePerGas=s),i&&!e.txParams.maxPriorityFeePerGas&&(e.txParams.maxPriorityFeePerGas=i),n&&!e.txParams.maxFeePerGas&&(e.txParams.maxFeePerGas=n),e.txParams.maxFeePerGas&&!e.txParams.maxPriorityFeePerGas&&(e.txParams.maxPriorityFeePerGas=e.txParams.maxFeePerGas)):(e.txParams.maxFeePerGas=e.txParams.gasPrice,e.txParams.maxPriorityFeePerGas=e.txParams.gasPrice,e.origin===S.ORIGIN_METAMASK?e.userFeeLevel=E.CUSTOM_GAS_ESTIMATE:e.userFeeLevel=E.PriorityLevels.dAppSuggested),delete e.txParams.gasPrice}else delete e.txParams.maxPriorityFeePerGas,delete e.txParams.maxFeePerGas;return!n||e.txParams.gasPrice||e.txParams.maxPriorityFeePerGas||e.txParams.maxFeePerGas||(e.txParams.gasPrice=n),a&&!e.txParams.gas&&(e.txParams.gas=a,e.originalGasEstimate=a),e.defaultGasEstimates={estimateType:e.userFeeLevel,gas:e.txParams.gas,gasPrice:e.txParams.gasPrice,maxFeePerGas:e.txParams.maxFeePerGas,maxPriorityFeePerGas:e.txParams.maxPriorityFeePerGas},e}async _getDefaultGasFees(e,t){if(!t&&e.txParams.gasPrice||t&&e.txParams.maxFeePerGas&&e.txParams.maxPriorityFeePerGas)return{};try{const{gasFeeEstimates:e,gasEstimateType:r}=await this._getEIP1559GasFeeEstimates();if(t&&r===E.GasEstimateTypes.feeMarket){const{medium:{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:r}={}}=e;if(t&&r)return{maxFeePerGas:(0,b.decGWEIToHexWEI)(r),maxPriorityFeePerGas:(0,b.decGWEIToHexWEI)(t)}}else{if(r===E.GasEstimateTypes.legacy)return{gasPrice:(0,b.decGWEIToHexWEI)(e.medium)};if(r===E.GasEstimateTypes.ethGasPrice)return{gasPrice:(0,b.decGWEIToHexWEI)(e.gasPrice)}}}catch(e){console.error(e)}const r=await this.query.gasPrice();return{gasPrice:r&&(0,m.addHexPrefix)(r.toString(16))}}async _getDefaultGasLimit(e){const t=this._getCurrentChainId(),r=w.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[t],n=(0,m.getChainType)(t);if(e.txParams.gas)return{};if(e.txParams.to&&e.type===g.TransactionType.simpleSend&&"custom"!==n&&!e.txParams.data)return{gasLimit:E.GAS_LIMITS.SIMPLE};const{blockGasLimit:s,estimatedGasHex:i,simulationFails:a}=await this.txGasUtil.analyzeGasUsage(e);return{gasLimit:this.txGasUtil.addGasBuffer((0,m.addHexPrefix)(i),s,r),simulationFails:a}}generateNewGasParams(e,t={},r=11){const{txParams:n}=e,s={},i={};return t.gasLimit&&(i.gas=(null==t?void 0:t.gas)??E.GAS_LIMITS.SIMPLE),t.estimateSuggested&&(i.estimateSuggested=t.estimateSuggested),t.estimateUsed&&(i.estimateUsed=t.estimateUsed),(0,v.isEIP1559Transaction)(e)?(s.maxFeePerGas=n.maxFeePerGas,s.maxPriorityFeePerGas=n.maxPriorityFeePerGas,i.maxFeePerGas=(null==t?void 0:t.maxFeePerGas)||(0,b.bnToHex)((0,m.BnMultiplyByFraction)((0,m.hexToBn)(n.maxFeePerGas),r,10)),i.maxPriorityFeePerGas=(null==t?void 0:t.maxPriorityFeePerGas)||(0,b.bnToHex)((0,m.BnMultiplyByFraction)((0,m.hexToBn)(n.maxPriorityFeePerGas),r,10))):(s.gasPrice=n.gasPrice,i.gasPrice=(null==t?void 0:t.gasPrice)||(0,b.bnToHex)((0,m.BnMultiplyByFraction)((0,m.hexToBn)(n.gasPrice),r,10))),{previousGasParams:s,newGasParams:i}}async createCancelTransaction(e,t,{estimatedBaseFee:r,actionId:n}={}){if(n){const e=this.txStateManager.getTransactionWithActionId(n);if(e)return e}const s=this.txStateManager.getTransaction(e),{txParams:i}=s,{from:a,nonce:o}=i,{previousGasParams:c,newGasParams:u}=this.generateNewGasParams(s,{...t,gasLimit:t.gasLimit||E.GAS_LIMITS.SIMPLE}),d=this.txStateManager.generateTxMeta({txParams:{from:a,to:a,nonce:o,value:"0x0",...u},previousGasParams:c,loadingDefaults:!1,status:g.TransactionStatus.approved,type:g.TransactionType.cancel,actionId:n});return r&&(d.estimatedBaseFee=r),this.addTransaction(d),await this.approveTransaction(d.id,n),d}async createSpeedUpTransaction(e,t,{estimatedBaseFee:r,actionId:n}={}){if(n){const e=this.txStateManager.getTransactionWithActionId(n);if(e)return e}const s=this.txStateManager.getTransaction(e),{txParams:i}=s,{previousGasParams:a,newGasParams:o}=this.generateNewGasParams(s,t),c=this.txStateManager.generateTxMeta({txParams:{...i,...o},previousGasParams:a,loadingDefaults:!1,status:g.TransactionStatus.approved,type:g.TransactionType.retry,originalType:s.type,actionId:n});return r&&(c.estimatedBaseFee=r),this.addTransaction(c),await this.approveTransaction(c.id,n),c}async updateTransaction(e){this.txStateManager.updateTransaction(e,"confTx: user updated transaction")}async updateAndApproveTransaction(e,t){this.txStateManager.updateTransaction(e,"confTx: user approved transaction"),await this.approveTransaction(e.id,t)}async approveTransaction(e,t){const r=this.txStateManager.getTransaction(e);if(this.inProcessOfSigning.has(e))return;let n;this.inProcessOfSigning.add(e);try{this.txStateManager.setTxStatusApproved(e);const s=r.txParams.from;let{customNonceValue:i}=r;i=Number(i),n=await this.nonceTracker.getNonceLock(s);const a=r.previousGasParams?r.txParams.nonce:n.nextNonce,o=0===i?i:i||a;r.txParams.nonce=(0,m.addHexPrefix)(o.toString(16)),r.nonceDetails=n.nonceDetails,i&&(r.nonceDetails.customNonceValue=i),this.txStateManager.updateTransaction(r,"transactions#approveTransaction");const c=await this.signTransaction(e);await this.publishTransaction(e,c,t),this._trackTransactionMetricsEvent(r,g.TransactionMetaMetricsEvent.approved,t),n.releaseLock()}catch(r){try{this._failTransaction(e,r,t)}catch(e){l.default.error(e)}throw n&&n.releaseLock(),r}finally{this.inProcessOfSigning.delete(e)}}async approveTransactionsWithSameNonce(e=[]){if(0===e.length)return"";const t=e[0],r=await this.getCommonConfiguration(t.from),n=u.TransactionFactory.fromTxData(t,{common:r}),s=(0,i.bufferToHex)(n.serialize());if(this.inProcessOfSigning.has(s))return"";let a,o;this.inProcessOfSigning.add(s);try{const r=t.from;o=await this.nonceTracker.getNonceLock(r);const n=o.nextNonce;a=await Promise.all(e.map((e=>(e.nonce=(0,m.addHexPrefix)(n.toString(16)),this.signExternalTransaction(e)))))}catch(e){throw l.default.error(e),e}finally{o&&o.releaseLock(),this.inProcessOfSigning.delete(s)}return a}async signExternalTransaction(e){const t=I.normalizeTxParams(e),r=this.getChainId(),n=(0,v.isEIP1559Transaction)({txParams:t})?g.TransactionEnvelopeType.feeMarket:g.TransactionEnvelopeType.legacy,s={...t,type:n,gasLimit:t.gas,chainId:new A.Numeric(r,10).toPrefixedHexString()},a=s.from,o=await this.getCommonConfiguration(a),c=u.TransactionFactory.fromTxData(s,{common:o}),d=await this.signEthTx(c,a);return(0,i.bufferToHex)(d.serialize())}async signTransaction(e){const t=this.txStateManager.getTransaction(e),r=this.getChainId(),n=(0,v.isEIP1559Transaction)(t)?g.TransactionEnvelopeType.feeMarket:g.TransactionEnvelopeType.legacy,s={...t.txParams,type:n,chainId:r,gasLimit:t.txParams.gas},a=s.from,o=await this.getCommonConfiguration(s.from),c=u.TransactionFactory.fromTxData(s,{common:o}),d=await this.signEthTx(c,a);t.r=(0,i.bufferToHex)(d.r),t.s=(0,i.bufferToHex)(d.s),t.v=(0,i.bufferToHex)(d.v),this.txStateManager.updateTransaction(t,"transactions#signTransaction: add r, s, v values"),this.txStateManager.setTxStatusSigned(t.id);return(0,i.bufferToHex)(d.serialize())}async publishTransaction(e,t,r){const n=this.txStateManager.getTransaction(e);if(n.rawTx=t,n.type===g.TransactionType.swap){const e=await this.query.getBalance(n.txParams.from);n.preTxBalance=e.toString(16)}let s;this.txStateManager.updateTransaction(n,"transactions#publishTransaction");try{s=await this.query.sendRawTransaction(t)}catch(e){if(!e.message.toLowerCase().includes("known transaction"))throw e;s=(0,i.keccak)((0,i.toBuffer)((0,m.addHexPrefix)(t),"hex")).toString("hex"),s=(0,m.addHexPrefix)(s)}this.setTxHash(e,s),this.txStateManager.setTxStatusSubmitted(e),this._trackTransactionMetricsEvent(n,g.TransactionMetaMetricsEvent.submitted,r)}async updatePostTxBalance({txMeta:e,txId:t,numberOfAttempts:r=6}){const n=await this.query.getBalance(e.txParams.from),s=this.txStateManager.getTransaction(t),i=s.approvalTxId?this.txStateManager.getTransaction(s.approvalTxId):null;s.postTxBalance=n.toString(16);(0,_.isSwapsDefaultTokenAddress)(e.destinationTokenAddress,e.chainId)&&e.preTxBalance===s.postTxBalance&&r>0?setTimeout((()=>{this.updatePostTxBalance({txMeta:e,txId:t,numberOfAttempts:r-1})}),5e3):(this.txStateManager.updateTransaction(s,"transactions#confirmTransaction - add postTxBalance"),this._trackSwapsMetrics(s,i))}async confirmTransaction(e,t,r,n){const s=this.txStateManager.getTransaction(e);if(s)try{const i=I.normalizeTxReceiptGasUsed(t.gasUsed);s.txReceipt={...t,gasUsed:i},r&&(s.baseFeePerGas=r),n&&(s.blockTimestamp=n),this.txStateManager.setTxStatusConfirmed(e),this._markNonceDuplicatesDropped(e);const{submittedTime:a}=s,o={gas_used:i};a&&(o.completion_time=this._getTransactionCompletionTime(a)),"0x0"===t.status&&(o.status=j),this._trackTransactionMetricsEvent(s,g.TransactionMetaMetricsEvent.finalized,undefined,o),this.txStateManager.updateTransaction(s,"transactions#confirmTransaction - add txReceipt"),s.type===g.TransactionType.swap&&await this.updatePostTxBalance({txMeta:s,txId:e})}catch(e){l.default.error(e)}}async confirmExternalTransaction(e,t,r){if(await this.txStateManager.addExternalTransaction(e),!e)return;const n=e.id;try{const s=I.normalizeTxReceiptGasUsed(t.gasUsed);e.txReceipt={...t,gasUsed:s},r&&(e.baseFeePerGas=r),this.txStateManager.setTxStatusConfirmed(n),this._markNonceDuplicatesDropped(n);const{submittedTime:i}=e,a={gas_used:s};i&&(a.completion_time=this._getTransactionCompletionTime(i)),"0x0"===t.status&&(a.status=j),this._trackTransactionMetricsEvent(e,g.TransactionMetaMetricsEvent.finalized,undefined,a),this.txStateManager.updateTransaction(e,"transactions#confirmTransaction - add txReceipt"),e.type===g.TransactionType.swap&&await this.updatePostTxBalance({txMeta:e,txId:n})}catch(e){l.default.error(e)}}async cancelTransaction(e,t){const r=this.txStateManager.getTransaction(e);this.txStateManager.setTxStatusRejected(e),this._trackTransactionMetricsEvent(r,g.TransactionMetaMetricsEvent.rejected,t)}setTxHash(e,t){const r=this.txStateManager.getTransaction(e);r.hash=t,this.txStateManager.updateTransaction(r,"transactions#setTxHash")}async createTransactionEventFragment(e,t,r){const n=this.txStateManager.getTransaction(e),{properties:s,sensitiveProperties:i}=await this._buildEventFragmentProperties(n);this._createTransactionEventFragment(n,t,s,i,r)}_mapMethods(){this.getState=()=>this.memStore.getState(),this.getSelectedAddress=()=>this.preferencesStore.getState().selectedAddress,this.getUnapprovedTxCount=()=>Object.keys(this.txStateManager.getUnapprovedTxList()).length,this.getPendingTxCount=e=>this.txStateManager.getPendingTransactions(e).length,this.getTransactions=e=>this.txStateManager.getTransactions(e),this.getAdvancedGasFee=()=>this.preferencesStore.getState().advancedGasFee}async _updatePendingTxsAfterFirstBlock(){await this.blockTracker.getLatestBlock(),await this.pendingTxTracker.updatePendingTxs()}_onBootCleanUp(){this.txStateManager.getTransactions({searchCriteria:{status:g.TransactionStatus.unapproved,loadingDefaults:!0}}).forEach((e=>{this.addTxGasDefaults(e).then((e=>{e.loadingDefaults=!1,this.txStateManager.updateTransaction(e,"transactions: gas estimation for tx on boot")})).catch((t=>{const r=this.txStateManager.getTransaction(e.id);r.loadingDefaults=!1,this.txStateManager.updateTransaction(r,"failed to estimate gas during boot cleanup."),this._failTransaction(r.id,t)}))})),this.txStateManager.getTransactions({searchCriteria:{status:g.TransactionStatus.approved}}).forEach((e=>{this.approveTransaction(e.id)}))}_setupListeners(){this.txStateManager.on("tx:status-update",this.emit.bind(this,"tx:status-update")),this._setupBlockTrackerListener(),this.pendingTxTracker.on("tx:warning",(e=>{this.txStateManager.updateTransaction(e,"transactions/pending-tx-tracker#event: tx:warning")})),this.pendingTxTracker.on("tx:failed",((e,t)=>{this._failTransaction(e,t)})),this.pendingTxTracker.on("tx:confirmed",((e,t,r,n)=>this.confirmTransaction(e,t,r,n))),this.pendingTxTracker.on("tx:dropped",(e=>{this._dropTransaction(e)})),this.pendingTxTracker.on("tx:block-update",((e,t)=>{e.firstRetryBlockNumber||(e.firstRetryBlockNumber=t,this.txStateManager.updateTransaction(e,"transactions/pending-tx-tracker#event: tx:block-update"))})),this.pendingTxTracker.on("tx:retry",(e=>{"retryCount"in e||(e.retryCount=0),e.retryCount+=1,this.txStateManager.updateTransaction(e,"transactions/pending-tx-tracker#event: tx:retry")}))}_markNonceDuplicatesDropped(e){const t=this.txStateManager.getTransaction(e),{nonce:r,from:n}=t.txParams,s=this.txStateManager.getTransactions({searchCriteria:{nonce:r,from:n}});s.length&&s.forEach((r=>{r.id!==e&&(r.replacedBy=t.hash,r.replacedById=t.id,this.txStateManager.updateTransaction(t,"transactions/pending-tx-tracker#event: tx:confirmed reference to confirmed txHash with same nonce"),r.status!==g.TransactionStatus.failed&&this._dropTransaction(r.id))}))}_setupBlockTrackerListener(){let e=!1;const t=this._onLatestBlock.bind(this),{blockTracker:r,txStateManager:n}=this;function s(){const s=n.getPendingTransactions();!e&&s.length>0?(r.on("latest",t),e=!0):e&&!s.length&&(r.removeListener("latest",t),e=!1)}n.on("tx:status-update",s),s()}async _onLatestBlock(e){try{await this.pendingTxTracker.updatePendingTxs()}catch(e){l.default.error(e)}try{await this.pendingTxTracker.resubmitPendingTxs(e)}catch(e){l.default.error(e)}}_updateMemstore(){const e=this.txStateManager.getUnapprovedTxList(),t=this.txStateManager.getTransactions({limit:100});this.memStore.updateState({unapprovedTxs:e,currentNetworkTxList:t})}_calculateTransactionsCost(e,t){let r="0x0";null!=t&&t.txReceipt&&(r=(0,k.calcGasTotal)(t.txReceipt.gasUsed,t.txReceipt.effectiveGasPrice));const n=(0,k.calcGasTotal)(e.txReceipt.gasUsed,e.txReceipt.effectiveGasPrice),s=new h.default(n,16).plus(r,16).toString(16);return{approvalGasCostInEth:Number((0,b.hexWEIToDecETH)(r)),tradeGasCostInEth:Number((0,b.hexWEIToDecETH)(n)),tradeAndApprovalGasCostInEth:Number((0,b.hexWEIToDecETH)(s))}}_trackSwapsMetrics(e,t){if(this._getParticipateInMetrics()&&e.swapMetaData)if("0x0"===e.txReceipt.status)this._trackMetaMetricsEvent({event:"Swap Failed",sensitiveProperties:{...e.swapMetaData},category:T.EVENT.CATEGORIES.SWAPS});else{const r=(0,k.getSwapsTokensReceivedFromTxMeta)(e.destinationTokenSymbol,e,e.destinationTokenAddress,e.txParams.from,e.destinationTokenDecimals,t,e.chainId),n=r?`${new h.default(r,10).div(e.swapMetaData.token_to_amount,10).times(100).round(2)}%`:null,s=e.txReceipt.gasUsed&&e.swapMetaData.estimated_gas?`${new h.default(e.txReceipt.gasUsed,16).div(e.swapMetaData.estimated_gas,10).times(100).round(2)}%`:null,i=this._calculateTransactionsCost(e,t);this._trackMetaMetricsEvent({event:"Swap Completed",category:T.EVENT.CATEGORIES.SWAPS,sensitiveProperties:{...e.swapMetaData,token_to_amount_received:r,quote_vs_executionRatio:n,estimated_vs_used_gasRatio:s,approval_gas_cost_in_eth:i.approvalGasCostInEth,trade_gas_cost_in_eth:i.tradeGasCostInEth,trade_and_approval_gas_cost_in_eth:i.tradeAndApprovalGasCostInEth}})}}_allowanceAmountInRelationToDappProposedValue(e,t,r){return e===g.TransactionApprovalAmountType.custom&&t&&r?`${new h.default(t,10).div(r,10).times(100).round(2)}`:null}_allowanceAmountInRelationToTokenBalance(e,t,r){return(e===g.TransactionApprovalAmountType.custom||e===g.TransactionApprovalAmountType.dappProposed)&&t&&r?`${new h.default(t,16).div(r,10).times(100).round(2)}`:null}async _buildEventFragmentProperties(e,t){const{type:r,time:n,status:s,chainId:i,origin:a,txParams:{gasPrice:o,gas:c,maxFeePerGas:u,maxPriorityFeePerGas:d,estimateSuggested:l,estimateUsed:h},defaultGasEstimates:p,originalType:f,replacedById:m,metamaskNetworkId:y,customTokenAmount:b,dappProposedTokenAmount:_,currentTokenBalance:T,originalApprovalAmount:w,finalApprovalAmount:A,contractMethodName:P,securityProviderResponse:M}=e,x=a===S.ORIGIN_METAMASK?"user":"dapp",{assetType:I,tokenStandard:R}=await(0,v.determineTransactionAssetType)(e,this.query,this.getTokenStandardAndDetails),O={};if((0,v.isEIP1559Transaction)(e)?(O.max_fee_per_gas=u,O.max_priority_fee_per_gas=d):O.gas_price=o,p){const{estimateType:t}=p;if(t){O.default_estimate=t;let r=e.defaultGasEstimates.maxFeePerGas,n=e.defaultGasEstimates.maxPriorityFeePerGas;if([E.GasRecommendations.low,E.GasRecommendations.medium,E.GasRecommendations.high].includes(t)){var C,N;const{gasFeeEstimates:e}=await this._getEIP1559GasFeeEstimates();var j,L;if(null!=e&&null!==(C=e[t])&&void 0!==C&&C.suggestedMaxFeePerGas)r=null===(j=e[t])||void 0===j?void 0:j.suggestedMaxFeePerGas,O.default_max_fee_per_gas=r;if(null!=e&&null!==(N=e[t])&&void 0!==N&&N.suggestedMaxPriorityFeePerGas)n=null===(L=e[t])||void 0===L?void 0:L.suggestedMaxPriorityFeePerGas,O.default_max_priority_fee_per_gas=n}}e.defaultGasEstimates.gas&&(O.default_gas=e.defaultGasEstimates.gas),e.defaultGasEstimates.gasPrice&&(O.default_gas_price=e.defaultGasEstimates.gasPrice)}l&&(O.estimate_suggested=l),h&&(O.estimate_used=h),null!=t&&t.gas_used&&(O.gas_used=t.gas_used);const U=this._getGasValuesInGWEI(O);let D="0";e.txParams.maxFeePerGas&&(D="2");const F=[g.TransactionType.contractInteraction,g.TransactionType.tokenMethodApprove,g.TransactionType.tokenMethodSafeTransferFrom,g.TransactionType.tokenMethodSetApprovalForAll,g.TransactionType.tokenMethodTransfer,g.TransactionType.tokenMethodTransferFrom,g.TransactionType.smart,g.TransactionType.swap,g.TransactionType.swapApproval].includes(r),B="Approve";let G,z,q,H,$=g.TransactionType.simpleSend;r===g.TransactionType.cancel?$=g.TransactionType.cancel:r===g.TransactionType.retry?$=f:r===g.TransactionType.deployContract?$=g.TransactionType.deployContract:F&&($=g.TransactionType.contractInteraction,z=P,z===B&&R===g.TokenStandard.ERC20&&("0"===_||"0"===b?G=g.TransactionApprovalAmountType.revoke:b?G=g.TransactionApprovalAmountType.custom:_&&(G=g.TransactionApprovalAmountType.dappProposed),q=this._allowanceAmountInRelationToDappProposedValue(G,w,A),H=this._allowanceAmountInRelationToTokenBalance(G,_,T)));const V=this._getTransaction(m),K={RETRY:g.TransactionType.retry,CANCEL:g.TransactionType.cancel,SAME_NONCE:"other"};let Q,W;null!=t&&t.dropped&&(Q=K.SAME_NONCE,(null==V?void 0:V.type)===g.TransactionType.cancel?Q=K.CANCEL:(null==V?void 0:V.type)===g.TransactionType.retry&&(Q=K.RETRY)),W=1===(null==M?void 0:M.flagAsDangerous)?["flagged_as_malicious"]:2===(null==M?void 0:M.flagAsDangerous)?["flagged_as_safety_unknown"]:null;let Y={chain_id:i,referrer:a,source:x,network:y,eip_1559_version:D,gas_edit_type:"none",gas_edit_attempted:"none",account_type:await this.getAccountType(this.getSelectedAddress()),device_model:await this.getDeviceModel(this.getSelectedAddress()),asset_type:I,token_standard:R,transaction_type:$,transaction_speed_up:r===g.TransactionType.retry,ui_customizations:W};z===B&&(Y={...Y,transaction_approval_amount_type:G});let J={status:s,transaction_envelope_type:(0,v.isEIP1559Transaction)(e)?k.TRANSACTION_ENVELOPE_TYPE_NAMES.FEE_MARKET:k.TRANSACTION_ENVELOPE_TYPE_NAMES.LEGACY,first_seen:n,gas_limit:c,transaction_contract_method:z,transaction_replaced:Q,...t,...U};return z===B&&(J={...J,transaction_approval_amount_vs_balance_ratio:H,transaction_approval_amount_vs_proposed_ratio:q}),{properties:Y,sensitiveProperties:J}}_createTransactionEventFragment(e,t,r,n,s){const i=`transaction-${[g.TransactionMetaMetricsEvent.finalized,g.TransactionMetaMetricsEvent.submitted].includes(t)?"submitted":"added"}-${e.id}`;if(void 0===this.getEventFragmentById(i))switch(t){case g.TransactionMetaMetricsEvent.added:this.createEventFragment({category:T.EVENT.CATEGORIES.TRANSACTIONS,initialEvent:g.TransactionMetaMetricsEvent.added,successEvent:g.TransactionMetaMetricsEvent.approved,failureEvent:g.TransactionMetaMetricsEvent.rejected,properties:r,sensitiveProperties:n,persist:!0,uniqueIdentifier:i,actionId:s});break;case g.TransactionMetaMetricsEvent.approved:case g.TransactionMetaMetricsEvent.rejected:this.createEventFragment({category:T.EVENT.CATEGORIES.TRANSACTIONS,successEvent:g.TransactionMetaMetricsEvent.approved,failureEvent:g.TransactionMetaMetricsEvent.rejected,properties:r,sensitiveProperties:n,persist:!0,uniqueIdentifier:i,actionId:s});break;case g.TransactionMetaMetricsEvent.submitted:this.createEventFragment({category:T.EVENT.CATEGORIES.TRANSACTIONS,initialEvent:g.TransactionMetaMetricsEvent.submitted,successEvent:g.TransactionMetaMetricsEvent.finalized,properties:r,sensitiveProperties:n,persist:!0,uniqueIdentifier:i,actionId:s});break;case g.TransactionMetaMetricsEvent.finalized:this.createEventFragment({category:T.EVENT.CATEGORIES.TRANSACTIONS,successEvent:g.TransactionMetaMetricsEvent.finalized,properties:r,sensitiveProperties:n,persist:!0,uniqueIdentifier:i,actionId:s})}}async _trackTransactionMetricsEvent(e,t,r,n={}){if(!e)return;const{properties:s,sensitiveProperties:i}=await this._buildEventFragmentProperties(e,n);let a;switch(this._createTransactionEventFragment(e,t,s,i,r),t){case g.TransactionMetaMetricsEvent.approved:a=`transaction-added-${e.id}`,this.updateEventFragment(a,{properties:s,sensitiveProperties:i}),this.finalizeEventFragment(a);break;case g.TransactionMetaMetricsEvent.rejected:a=`transaction-added-${e.id}`,this.updateEventFragment(a,{properties:s,sensitiveProperties:i}),this.finalizeEventFragment(a,{abandoned:!0});break;case g.TransactionMetaMetricsEvent.finalized:a=`transaction-submitted-${e.id}`,this.updateEventFragment(a,{properties:s,sensitiveProperties:i}),this.finalizeEventFragment(`transaction-submitted-${e.id}`)}}_getTransactionCompletionTime(e){return Math.round((Date.now()-e)/1e3).toString()}_getGasValuesInGWEI(e){const t={};for(const r in e)(0,i.isHexString)(e[r])?t[r]=(0,b.hexWEIToDecGWEI)(e[r]):t[r]=e[r];return t}_failTransaction(e,t,r){this.txStateManager.setTxStatusFailed(e,t);const n=this.txStateManager.getTransaction(e);this._trackTransactionMetricsEvent(n,g.TransactionMetaMetricsEvent.finalized,r,{error:t.message})}_dropTransaction(e){this.txStateManager.setTxStatusDropped(e);const t=this.txStateManager.getTransaction(e);this._trackTransactionMetricsEvent(t,g.TransactionMetaMetricsEvent.finalized,undefined,{dropped:!0})}}r.default=L}}},{package:"$root$",file:"app/scripts/controllers/transactions/index.js"}],[3,{"../../../shared/modules/hexstring-utils":3241,"../lib/util":85,"@ethersproject/hdnode":383,"ethereumjs-util":2044,"ethereumjs-wallet":2050,"ethereumjs-wallet/thirdparty":2065,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@ethersproject/hdnode"),s=e("ethereumjs-util"),i=d(e("ethereumjs-wallet")),a=d(e("ethereumjs-wallet/thirdparty")),o=d(e("loglevel")),c=e("../../../shared/modules/hexstring-utils"),u=e("../lib/util");function d(e){return e&&e.__esModule?e:{default:e}}var l={async importAccount(e,t){return(0,this.strategies[e])(...t)},strategies:{"Private Key":e=>{if(!e)throw new Error("Cannot import an empty key.");if((0,n.isValidMnemonic)(e.trim()))throw new Error("t('importAccountErrorIsSRP')");const t=e.replace(/\s+/gu,""),r=(0,u.addHexPrefix)(t);let i;try{i=(0,s.toBuffer)(r)}catch(e){throw new Error("t('importAccountErrorNotHexadecimal')")}try{if(!(0,s.isValidPrivate)(i)||(0,s.getBinarySize)(r)!==64+"0x".length)throw new Error("t('importAccountErrorNotAValidPrivateKey')")}catch(e){throw new Error("t('importAccountErrorNotAValidPrivateKey')")}return(0,c.stripHexPrefix)(r)},"JSON File":(e,t)=>{let r;try{r=a.default.fromEtherWallet(e,t)}catch(n){o.default.debug("Attempt to import as EtherWallet format failed, trying V3"),r=i.default.fromV3(e,t,!0)}return function(e){const t=e.getPrivateKey();return(0,s.bufferToHex)(t)}(r)}}};r.default=l}}},{package:"$root$",file:"app/scripts/account-import-strategies/index.js"}],[30,{"fast-json-patch":2295,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.generateHistoryEntry=a,r.migrateFromSnapshotsToDiffs=function(e){return e.map(((t,r)=>0===r?t:a(e[r-1],t)))},r.replayHistory=function(e){return(0,i.cloneDeep)(e).reduce(((e,t)=>s.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t={...e};return delete t.history,(0,i.cloneDeep)(t)};var n,s=(n=e("fast-json-patch"))&&n.__esModule?n:{default:n},i=e("lodash");function a(e,t,r){const n=s.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n}}}},{package:"$root$",file:"app/scripts/controllers/transactions/lib/tx-state-history-helpers.js"}],[3006,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(r=t.exports=function(e){return String(e).replace(r.expr,"")}).expr=/\/+$/}}},{package:"remove-trailing-slash",file:"node_modules/remove-trailing-slash/index.js"}],[3023,{buffer:1789,pbkdf2:2823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("pbkdf2").pbkdf2Sync,s=2147483647;function i(e,t,n,s,i){if(r.isBuffer(e)&&r.isBuffer(n))e.copy(n,s,t,t+i);else for(;i--;)n[s++]=e[t++]}t.exports=function(e,t,a,o,c,u,d){if(0===a||0!=(a&a-1))throw Error("N must be > 0 and a power of 2");if(a>s/128/o)throw Error("Parameter N is too large");if(o>s/128/c)throw Error("Parameter r is too large");var l,h=new r(256*o),p=new r(128*o*a),f=new Int32Array(16),m=new Int32Array(16),g=new r(64),y=n(e,t,1,128*c*o,"sha256");if(d){var E=c*a*2,b=0;l=function(){++b%1e3==0&&d({current:b,total:E,percent:b/E*100})}}for(var _=0;_<c;_++)T(y,128*_*o,o,a,p,h);return n(e,y,1,u,"sha256");function T(e,t,r,n,s,i){var a,o=128*r;for(e.copy(i,0,t,t+o),a=0;a<n;a++)i.copy(s,a*o,0,0+o),w(i,0,o,r),l&&l();for(a=0;a<n;a++){var c=0+64*(2*r-1);k(s,(i.readUInt32LE(c)&n-1)*o,i,0,o),w(i,0,o,r),l&&l()}i.copy(e,t,0,0+o)}function w(e,t,r,n){var s;for(i(e,t+64*(2*n-1),g,0,64),s=0;s<2*n;s++)k(e,64*s,g,0,64),S(g),i(g,0,e,r+64*s,64);for(s=0;s<n;s++)i(e,r+2*s*64,e,t+64*s,64);for(s=0;s<n;s++)i(e,r+64*(2*s+1),e,t+64*(s+n),64)}function v(e,t){return e<<t|e>>>32-t}function S(e){var t;for(t=0;t<16;t++)f[t]=(255&e[4*t+0])<<0,f[t]|=(255&e[4*t+1])<<8,f[t]|=(255&e[4*t+2])<<16,f[t]|=(255&e[4*t+3])<<24;for(i(f,0,m,0,16),t=8;t>0;t-=2)m[4]^=v(m[0]+m[12],7),m[8]^=v(m[4]+m[0],9),m[12]^=v(m[8]+m[4],13),m[0]^=v(m[12]+m[8],18),m[9]^=v(m[5]+m[1],7),m[13]^=v(m[9]+m[5],9),m[1]^=v(m[13]+m[9],13),m[5]^=v(m[1]+m[13],18),m[14]^=v(m[10]+m[6],7),m[2]^=v(m[14]+m[10],9),m[6]^=v(m[2]+m[14],13),m[10]^=v(m[6]+m[2],18),m[3]^=v(m[15]+m[11],7),m[7]^=v(m[3]+m[15],9),m[11]^=v(m[7]+m[3],13),m[15]^=v(m[11]+m[7],18),m[1]^=v(m[0]+m[3],7),m[2]^=v(m[1]+m[0],9),m[3]^=v(m[2]+m[1],13),m[0]^=v(m[3]+m[2],18),m[6]^=v(m[5]+m[4],7),m[7]^=v(m[6]+m[5],9),m[4]^=v(m[7]+m[6],13),m[5]^=v(m[4]+m[7],18),m[11]^=v(m[10]+m[9],7),m[8]^=v(m[11]+m[10],9),m[9]^=v(m[8]+m[11],13),m[10]^=v(m[9]+m[8],18),m[12]^=v(m[15]+m[14],7),m[13]^=v(m[12]+m[15],9),m[14]^=v(m[13]+m[12],13),m[15]^=v(m[14]+m[13],18);for(t=0;t<16;++t)f[t]=m[t]+f[t];for(t=0;t<16;t++){var r=4*t;e[r+0]=f[t]>>0&255,e[r+1]=f[t]>>8&255,e[r+2]=f[t]>>16&255,e[r+3]=f[t]>>24&255}}function k(e,t,r,n,s){for(var i=0;i<s;i++)r[n+i]^=e[t+i]}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-wallet>scryptsy",file:"node_modules/scryptsy/lib/scrypt.js"}],[3089,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=()=>!0,s=["newListener","removeListener"],i=e=>!s.includes(e);t.exports=function(e,t){let r=(t=t||{}).eventFilter||n;if("skipInternal"===r&&(r=i),"function"!=typeof r)throw new Error("createEventEmitterProxy - Invalid eventFilter");let s=e;return new Proxy({},{get:(e,t)=>"setTarget"===t?a:s[t],set:(e,t,r)=>"setTarget"===t?(a=r,!0):(s[t]=r,!0)});function a(e){const t=s;s=e,t.eventNames().filter(r).forEach((r=>{(function(e,t){if(e.rawListeners)return e.rawListeners(t);let r=e._events[t]||[];Array.isArray(r)||(r=[r]);return r.slice()})(t,r).forEach((t=>e.on(r,t)))})),t.removeAllListeners()}}}}},{package:"swappable-obj-proxy",file:"node_modules/swappable-obj-proxy/src/createEventEmitterProxy.js"}],[3090,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){let t=e;return new Proxy({},{get:(e,n)=>"setTarget"===n?r:t[n],set:(e,n,s)=>"setTarget"===n?(r=s,!0):(t[n]=s,!0)});function r(e){t=e}}}}},{package:"swappable-obj-proxy",file:"node_modules/swappable-obj-proxy/src/createSwappableProxy.js"}],[3091,{"./createEventEmitterProxy":3089,"./createSwappableProxy":3090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./createSwappableProxy"),s=e("./createEventEmitterProxy");t.exports={createSwappableProxy:n,createEventEmitterProxy:s}}}},{package:"swappable-obj-proxy",file:"node_modules/swappable-obj-proxy/src/index.js"}],[3092,{_process:2832,stream:1792},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("stream");function s(e,t,s){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var i=!1,a=!1,o=[],c=!1,u=new n;function d(){for(;o.length&&!u.paused;){var e=o.shift();if(null===e)return u.emit("end");u.emit("data",e)}}function l(){u.writable=!1,t.call(u),!u.readable&&u.autoDestroy&&u.destroy()}return u.readable=u.writable=!0,u.paused=!1,u.autoDestroy=!(s&&!1===s.autoDestroy),u.write=function(t){return e.call(this,t),!u.paused},u.queue=u.push=function(e){return c||(null===e&&(c=!0),o.push(e),d()),u},u.on("end",(function(){u.readable=!1,!u.writable&&u.autoDestroy&&r.nextTick((function(){u.destroy()}))})),u.end=function(e){if(!i)return i=!0,arguments.length&&u.write(e),l(),u},u.destroy=function(){if(!a)return a=!0,i=!0,o.length=0,u.writable=u.readable=!1,u.emit("close"),u},u.pause=function(){if(!u.paused)return u.paused=!0,u},u.resume=function(){return u.paused&&(u.paused=!1,u.emit("resume")),d(),u.paused||u.emit("drain"),u},u}t.exports=s,s.through=s}).call(this)}).call(this,e("_process"))}}},{package:"debounce-stream>through",file:"node_modules/through/index.js"}],[3097,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"base32-encode>to-data-view",file:"node_modules/to-data-view/index.js"}],[3099,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.FIAT_RATES_UPDATE=r.NOTIFICATION=r.BLOCK=r.CONNECT=r.ERROR=void 0;r.ERROR="blockchain-error";r.CONNECT="blockchain-connect";r.BLOCK="blockchain-block";r.NOTIFICATION="blockchain-notification";r.FIAT_RATES_UPDATE="fiat-rates-update"}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/blockchain.js"}],[31,{"../../../../../shared/constants/transaction":3223,"../../../../../shared/modules/hexstring-utils":3241,"../../../../../shared/modules/transaction.utils":3250,"../../../lib/util":85,"@ethersproject/abi":348,"eth-rpc-errors":2e3,"human-standard-token-abi":2492},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getFinalStates=function(){return[c.TransactionStatus.rejected,c.TransactionStatus.confirmed,c.TransactionStatus.failed,c.TransactionStatus.dropped]},r.normalizeAndValidateTxParams=function(e,t=!0){const r=h(e,t);return g(r),r},r.normalizeTxParams=h,r.normalizeTxReceiptGasUsed=function(e){return"string"==typeof e?e:e.toString(16)},r.validateConfirmedExternalTransaction=void 0,r.validateFrom=E,r.validateInputData=y,r.validateRecipient=b,r.validateTxParams=g;var n,s=e("eth-rpc-errors"),i=e("@ethersproject/abi"),a=(n=e("human-standard-token-abi"))&&n.__esModule?n:{default:n},o=e("../../../lib/util"),c=e("../../../../../shared/constants/transaction"),u=e("../../../../../shared/modules/transaction.utils"),d=e("../../../../../shared/modules/hexstring-utils");const l={from:o.addHexPrefix,to:(e,t)=>t?(0,o.addHexPrefix)(e).toLowerCase():(0,o.addHexPrefix)(e),nonce:o.addHexPrefix,value:o.addHexPrefix,data:o.addHexPrefix,gas:o.addHexPrefix,gasPrice:o.addHexPrefix,maxFeePerGas:o.addHexPrefix,maxPriorityFeePerGas:o.addHexPrefix,type:o.addHexPrefix,estimateSuggested:e=>e,estimateUsed:e=>e};function h(e,t=!0){const r={};for(const n in l)e[n]&&(r[n]=l[n](e[n],t));return r}function p(e,t,r){if(void 0!==e[r])throw s.ethErrors.rpc.invalidParams(`Invalid transaction params: specified ${t} but also included ${r}, these cannot be mixed`)}function f(e,t){if("string"!=typeof e[t])throw s.ethErrors.rpc.invalidParams(`Invalid transaction params: ${t} is not a string. got: (${e[t]})`)}function m(e,t){switch(t){case"maxFeePerGas":case"maxPriorityFeePerGas":if(e.type&&e.type!==c.TransactionEnvelopeType.feeMarket)throw s.ethErrors.rpc.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but including maxFeePerGas and maxPriorityFeePerGas requires type: "${c.TransactionEnvelopeType.feeMarket}"`);break;default:if(e.type&&e.type===c.TransactionEnvelopeType.feeMarket)throw s.ethErrors.rpc.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but included a gasPrice instead of maxFeePerGas and maxPriorityFeePerGas`)}}function g(e,t=!0){if(!e||"object"!=typeof e||Array.isArray(e))throw s.ethErrors.rpc.invalidParams("Invalid transaction params: must be an object.");if(!e.to&&!e.data)throw s.ethErrors.rpc.invalidParams('Invalid transaction params: must specify "data" for contract deployments, or "to" (and optionally "data") for all other types of transactions.');if((0,u.isEIP1559Transaction)({txParams:e})&&!t)throw s.ethErrors.rpc.invalidParams("Invalid transaction params: params specify an EIP-1559 transaction but the current network does not support EIP-1559");Object.entries(e).forEach((([t,r])=>{switch(t){case"from":E(e);break;case"to":b(e);break;case"gasPrice":m(e,"gasPrice"),p(e,"gasPrice","maxFeePerGas"),p(e,"gasPrice","maxPriorityFeePerGas"),f(e,"gasPrice");break;case"maxFeePerGas":m(e,"maxFeePerGas"),p(e,"maxFeePerGas","gasPrice"),f(e,"maxFeePerGas");break;case"maxPriorityFeePerGas":m(e,"maxPriorityFeePerGas"),p(e,"maxPriorityFeePerGas","gasPrice"),f(e,"maxPriorityFeePerGas");break;case"value":if(f(e,"value"),r.toString().includes("-"))throw s.ethErrors.rpc.invalidParams(`Invalid transaction value "${r}": not a positive number.`);if(r.toString().includes("."))throw s.ethErrors.rpc.invalidParams(`Invalid transaction value of "${r}": number must be in wei.`);if(!r.match(/^0x[a-fA-F0-9]+$/u))throw s.ethErrors.rpc.invalidParams(`Invalid transaction value of "${r}": not a valid hex string.`);break;case"chainId":if("number"!=typeof r&&"string"!=typeof r)throw s.ethErrors.rpc.invalidParams(`Invalid transaction params: ${t} is not a Number or hex string. got: (${r})`);break;case"data":y(r),f(e,"data");break;default:f(e,t)}}))}function y(e){if(null!==e){const t=new i.Interface(a.default);try{t.parseTransaction({data:e})}catch(e){if(e.message.match(/BUFFER_OVERRUN/))throw s.ethErrors.rpc.invalidParams("Invalid transaction params: data out-of-bounds, BUFFER_OVERRUN.")}}}function E(e){if("string"!=typeof e.from)throw s.ethErrors.rpc.invalidParams(`Invalid "from" address "${e.from}": not a string.`);if(!(0,d.isValidHexAddress)(e.from,{allowNonPrefixed:!1}))throw s.ethErrors.rpc.invalidParams('Invalid "from" address.')}function b(e){if("0x"===e.to||null===e.to){if(!e.data)throw s.ethErrors.rpc.invalidParams('Invalid "to" address.');delete e.to}else if(e.to!==undefined&&!(0,d.isValidHexAddress)(e.to,{allowNonPrefixed:!1}))throw s.ethErrors.rpc.invalidParams('Invalid "to" address.');return e}r.validateConfirmedExternalTransaction=({txMeta:e,pendingTransactions:t,confirmedTransactions:r}={})=>{if(!e||!e.txParams)throw s.ethErrors.rpc.invalidParams('"txMeta" or "txMeta.txParams" is missing');if(e.status!==c.TransactionStatus.confirmed)throw s.ethErrors.rpc.invalidParams('External transaction status should be "confirmed"');const n=e.txParams.nonce;if(t&&t.length>0){if(t.find((e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.nonce)===n})))throw s.ethErrors.rpc.invalidParams("External transaction nonce should not be in pending txs")}if(r&&r.length>0){if(r.find((e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.nonce)===n})))throw s.ethErrors.rpc.invalidParams("External transaction nonce should not be in confirmed txs")}}}}},{package:"$root$",file:"app/scripts/controllers/transactions/lib/util.js"}],[3100,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.POOL_RELAY_TYPE=r.CERTIFICATE_TYPE=r.ADDRESS_TYPE=r.NETWORK_IDS=r.PROTOCOL_MAGICS=void 0;var n=Object.freeze({mainnet:764824073,testnet:42});r.PROTOCOL_MAGICS=n;var s=Object.freeze({mainnet:1,testnet:0});r.NETWORK_IDS=s;var i=Object.freeze({Base:0,Pointer:4,Enterprise:6,Byron:8,Reward:14});r.ADDRESS_TYPE=i;var a=Object.freeze({StakeRegistration:0,StakeDeregistration:1,StakeDelegation:2,StakePoolRegistration:3});r.CERTIFICATE_TYPE=a;var o=Object.freeze({SingleHostIp:0,SingleHostName:1,MultipleHostName:2});r.POOL_RELAY_TYPE=o}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/cardano.js"}],[3101,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.WAIT_FOR_SELECTION=r.WORD=r.PASSPHRASE_ON_DEVICE=r.PASSPHRASE=r.PIN=r.BUTTON=r.LOADING=r.USED_ELSEWHERE=r.RELEASED=r.ACQUIRED=r.RELEASE=r.ACQUIRE=r.CHANGED=r.DISCONNECT=r.CONNECT_UNACQUIRED=r.CONNECT=void 0;r.CONNECT="device-connect";r.CONNECT_UNACQUIRED="device-connect_unacquired";r.DISCONNECT="device-disconnect";r.CHANGED="device-changed";r.ACQUIRE="device-acquire";r.RELEASE="device-release";r.ACQUIRED="device-acquired";r.RELEASED="device-released";r.USED_ELSEWHERE="device-used_elsewhere";r.LOADING="device-loading";r.BUTTON="button";r.PIN="pin";r.PASSPHRASE="passphrase";r.PASSPHRASE_ON_DEVICE="passphrase_on_device";r.WORD="word";r.WAIT_FOR_SELECTION="device-wait_for_selection"}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/device.js"}],[3102,{"@babel/runtime/helpers/inheritsLoose":186,"@babel/runtime/helpers/interopRequireDefault":187,"@babel/runtime/helpers/wrapNativeSuper":205},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.LIBUSB_ERROR_MESSAGE=r.WEBUSB_ERROR_MESSAGE=r.INVALID_PIN_ERROR_MESSAGE=r.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE=r.TypedError=r.TrezorError=r.ERROR_CODES=void 0;var s=n(e("@babel/runtime/helpers/inheritsLoose")),i=n(e("@babel/runtime/helpers/wrapNativeSuper")),a={Init_NotInitialized:"TrezorConnect not yet initialized",Init_AlreadyInitialized:"TrezorConnect has been already initialized",Init_IframeBlocked:"Iframe blocked",Init_IframeTimeout:"Iframe timeout",Init_ManifestMissing:"Manifest not set. Read more at https://github.com/trezor/connect/blob/develop/docs/index.md",Popup_ConnectionMissing:"Unable to establish connection with iframe",Transport_Missing:"Transport is missing",Transport_InvalidProtobuf:"",Method_InvalidPackage:"This version of trezor-connect is not suitable to work without browser. Use trezor-connect@extended package instead",Method_InvalidParameter:"",Method_NotAllowed:"Method not allowed for this configuration",Method_PermissionsNotGranted:"Permissions not granted",Method_Cancel:"Cancelled",Method_Interrupted:"Popup closed",Method_UnknownCoin:"Coin not found",Method_AddressNotMatch:"Addresses do not match",Method_FirmwareUpdate_DownloadFailed:"Failed to download firmware binary",Method_CustomMessage_Callback:'Parameter "callback" is not a function',Method_Discovery_BundleException:"",Method_Override:"override",Method_NoResponse:"Call resolved without response",Backend_NotSupported:"BlockchainLink settings not found in coins.json",Backend_WorkerMissing:"",Backend_Disconnected:"Backend disconnected",Backend_Invalid:"Invalid backend",Backend_Error:"",Runtime:"",Device_NotFound:"Device not found",Device_InitializeFailed:"",Device_FwException:"",Device_ModeException:"",Device_Disconnected:"Device disconnected",Device_UsedElsewhere:"Device is used in another window",Device_InvalidState:"Passphrase is incorrect",Device_CallInProgress:"Device call in progress"};r.ERROR_CODES=a;var o=function(e){function t(t,r){var n;return(n=e.call(this,r)||this).code=t,n.message=r,n}return(0,s.default)(t,e),t}((0,i.default)(Error));r.TrezorError=o;r.TypedError=function(e,t){return new o(e,t||a[e])};r.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE="wrong previous session";r.INVALID_PIN_ERROR_MESSAGE="PIN invalid";r.WEBUSB_ERROR_MESSAGE="NetworkError: Unable to claim interface.";r.LIBUSB_ERROR_MESSAGE="LIBUSB_ERROR"}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/errors.js"}],[3103,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CALL=r.ERROR=r.INIT=r.LOADED=r.BOOTSTRAP=void 0;r.BOOTSTRAP="iframe-bootstrap";r.LOADED="iframe-loaded";r.INIT="iframe-init";r.ERROR="iframe-error";r.CALL="iframe-call"}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/iframe.js"}],[3104,{"./blockchain":3099,"./cardano":3100,"./device":3101,"./errors":3102,"./iframe":3103,"./network":3105,"./popup":3106,"./transport":3107,"./ui":3108},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CARDANO=r.UI=r.TRANSPORT=r.POPUP=r.NETWORK=r.IFRAME=r.ERRORS=r.DEVICE=r.BLOCKCHAIN=r.BLOCKCHAIN_EVENT=r.RESPONSE_EVENT=r.TRANSPORT_EVENT=r.DEVICE_EVENT=r.UI_EVENT=r.CORE_EVENT=void 0;var n=p(e("./blockchain"));r.BLOCKCHAIN=n;var s=p(e("./device"));r.DEVICE=s;var i=p(e("./errors"));r.ERRORS=i;var a=p(e("./iframe"));r.IFRAME=a;var o=p(e("./network"));r.NETWORK=o;var c=p(e("./popup"));r.POPUP=c;var u=p(e("./transport"));r.TRANSPORT=u;var d=p(e("./ui"));r.UI=d;var l=p(e("./cardano"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=s?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}r.CARDANO=l;r.CORE_EVENT="CORE_EVENT";r.UI_EVENT="UI_EVENT";r.DEVICE_EVENT="DEVICE_EVENT";r.TRANSPORT_EVENT="TRANSPORT_EVENT";r.RESPONSE_EVENT="RESPONSE_EVENT";r.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT"}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/index.js"}],[3105,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.TYPES=void 0;var n=Object.freeze({bitcoin:"Bitcoin",ethereum:"Ethereum",eos:"Eos",nem:"NEM",stellar:"Stellar",cardano:"Cardano",ripple:"Ripple",tezos:"Tezors",binance:"Binance"});r.TYPES=n}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/network.js"}],[3106,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CLOSE_WINDOW=r.CANCEL_POPUP_REQUEST=r.CLOSED=r.HANDSHAKE=r.EXTENSION_USB_PERMISSIONS=r.ERROR=r.INIT=r.LOADED=r.BOOTSTRAP=void 0;r.BOOTSTRAP="popup-bootstrap";r.LOADED="popup-loaded";r.INIT="popup-init";r.ERROR="popup-error";r.EXTENSION_USB_PERMISSIONS="open-usb-permissions";r.HANDSHAKE="popup-handshake";r.CLOSED="popup-closed";r.CANCEL_POPUP_REQUEST="ui-cancel-popup-request";r.CLOSE_WINDOW="window.close"}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/popup.js"}],[3107,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.START_PENDING=r.DISABLE_WEBUSB=r.REQUEST=r.STREAM=r.UPDATE=r.ERROR=r.START=void 0;r.START="transport-start";r.ERROR="transport-error";r.UPDATE="transport-update";r.STREAM="transport-stream";r.REQUEST="transport-request_device";r.DISABLE_WEBUSB="transport-disable_webusb";r.START_PENDING="transport-start_pending"}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/transport.js"}],[3108,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.IFRAME_FAILURE=r.ADDRESS_VALIDATION=r.BUNDLE_PROGRESS=r.LOGIN_CHALLENGE_RESPONSE=r.LOGIN_CHALLENGE_REQUEST=r.CUSTOM_MESSAGE_RESPONSE=r.CUSTOM_MESSAGE_REQUEST=r.CHANGE_SETTINGS=r.RECEIVE_WORD=r.RECEIVE_FEE=r.RECEIVE_ACCOUNT=r.CHANGE_ACCOUNT=r.RECEIVE_DEVICE=r.RECEIVE_PASSPHRASE=r.RECEIVE_PIN=r.RECEIVE_CONFIRMATION=r.RECEIVE_PERMISSION=r.REQUEST_WORD=r.REQUEST_BUTTON=r.INSUFFICIENT_FUNDS=r.UPDATE_CUSTOM_FEE=r.SELECT_FEE=r.SELECT_ACCOUNT=r.SELECT_DEVICE=r.SET_OPERATION=r.LOADING=r.CONNECT=r.INVALID_PASSPHRASE_ACTION=r.INVALID_PASSPHRASE=r.REQUEST_PASSPHRASE_ON_DEVICE=r.REQUEST_PASSPHRASE=r.INVALID_PIN=r.REQUEST_PIN=r.REQUEST_CONFIRMATION=r.REQUEST_PERMISSION=r.CLOSE_UI_WINDOW=r.REQUEST_UI_WINDOW=r.DEVICE_NEEDS_BACKUP=r.FIRMWARE_PROGRESS=r.FIRMWARE_NOT_INSTALLED=r.FIRMWARE_NOT_COMPATIBLE=r.FIRMWARE_NOT_SUPPORTED=r.FIRMWARE_OUTDATED=r.FIRMWARE_OLD=r.SEEDLESS=r.INITIALIZE=r.REQUIRE_MODE=r.NOT_IN_BOOTLOADER=r.BOOTLOADER=r.TRANSPORT=void 0;r.TRANSPORT="ui-no_transport";r.BOOTLOADER="ui-device_bootloader_mode";r.NOT_IN_BOOTLOADER="ui-device_not_in_bootloader_mode";r.REQUIRE_MODE="ui-device_require_mode";r.INITIALIZE="ui-device_not_initialized";r.SEEDLESS="ui-device_seedless";r.FIRMWARE_OLD="ui-device_firmware_old";r.FIRMWARE_OUTDATED="ui-device_firmware_outdated";r.FIRMWARE_NOT_SUPPORTED="ui-device_firmware_unsupported";r.FIRMWARE_NOT_COMPATIBLE="ui-device_firmware_not_compatible";r.FIRMWARE_NOT_INSTALLED="ui-device_firmware_not_installed";r.FIRMWARE_PROGRESS="ui-firmware-progress";r.DEVICE_NEEDS_BACKUP="ui-device_needs_backup";r.REQUEST_UI_WINDOW="ui-request_window";r.CLOSE_UI_WINDOW="ui-close_window";r.REQUEST_PERMISSION="ui-request_permission";r.REQUEST_CONFIRMATION="ui-request_confirmation";r.REQUEST_PIN="ui-request_pin";r.INVALID_PIN="ui-invalid_pin";r.REQUEST_PASSPHRASE="ui-request_passphrase";r.REQUEST_PASSPHRASE_ON_DEVICE="ui-request_passphrase_on_device";r.INVALID_PASSPHRASE="ui-invalid_passphrase";r.INVALID_PASSPHRASE_ACTION="ui-invalid_passphrase_action";r.CONNECT="ui-connect";r.LOADING="ui-loading";r.SET_OPERATION="ui-set_operation";r.SELECT_DEVICE="ui-select_device";r.SELECT_ACCOUNT="ui-select_account";r.SELECT_FEE="ui-select_fee";r.UPDATE_CUSTOM_FEE="ui-update_custom_fee";r.INSUFFICIENT_FUNDS="ui-insufficient_funds";r.REQUEST_BUTTON="ui-button";r.REQUEST_WORD="ui-request_word";r.RECEIVE_PERMISSION="ui-receive_permission";r.RECEIVE_CONFIRMATION="ui-receive_confirmation";r.RECEIVE_PIN="ui-receive_pin";r.RECEIVE_PASSPHRASE="ui-receive_passphrase";r.RECEIVE_DEVICE="ui-receive_device";r.CHANGE_ACCOUNT="ui-change_account";r.RECEIVE_ACCOUNT="ui-receive_account";r.RECEIVE_FEE="ui-receive_fee";r.RECEIVE_WORD="ui-receive_word";r.CHANGE_SETTINGS="ui-change_settings";r.CUSTOM_MESSAGE_REQUEST="ui-custom_request";r.CUSTOM_MESSAGE_RESPONSE="ui-custom_response";r.LOGIN_CHALLENGE_REQUEST="ui-login_challenge_request";r.LOGIN_CHALLENGE_RESPONSE="ui-login_challenge_response";r.BUNDLE_PROGRESS="ui-bundle_progress";r.ADDRESS_VALIDATION="ui-address_validation";r.IFRAME_FAILURE="ui-iframe_failure"}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/constants/ui.js"}],[3109,{"@babel/runtime/helpers/defineProperty":182,"@babel/runtime/helpers/interopRequireDefault":187},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.parse=r.corsValidator=r.getEnv=r.DEFAULT_PRIORITY=void 0;var s=n(e("@babel/runtime/helpers/defineProperty"));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var a="8.2.6",o="https://connect.trezor.io/"+(a.split(".").map((function(e){return parseInt(e,10)}))[0]+"/");r.DEFAULT_PRIORITY=2;var c={configSrc:"./data/config.json",version:a,debug:!1,priority:2,trustedHost:!1,connectSrc:o,iframeSrc:o+"iframe.html",popup:!0,popupSrc:o+"popup.html",webusbSrc:o+"webusb.html",transportReconnect:!1,webusb:!0,pendingTransportEvent:!0,supportedBrowser:"undefined"==typeof navigator||!/Trident|MSIE|Edge/.test(navigator.userAgent),manifest:null,env:"web",lazyLoad:!1,timestamp:(new Date).getTime(),interactionTimeout:600},u=function(){if("undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect)return"webextension";if("undefined"!=typeof navigator){if("string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};r.getEnv=u;var d=function(e){if("string"==typeof e)return e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//)||e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//)||e.match(/^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//)?e:void 0};r.corsValidator=d;r.parse=function(e){void 0===e&&(e={});var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},c);if(Object.prototype.hasOwnProperty.call(e,"debug")&&(Array.isArray(e),"boolean"==typeof e.debug?t.debug=e.debug:"string"==typeof e.debug&&(t.debug="true"===e.debug)),"string"==typeof e.connectSrc&&(t.connectSrc=e.connectSrc),"undefined"!=typeof global&&"string"==typeof global.__TREZOR_CONNECT_SRC&&(t.connectSrc=d(global.__TREZOR_CONNECT_SRC),t.debug=!0),"undefined"!=typeof window&&window.location&&"string"==typeof window.location.search){var r=window.location.search.split("&").find((function(e){return e.indexOf("trezor-connect-src")>=0}));if(r){var n=r.split("=")[1];t.connectSrc=d(decodeURIComponent(n)),t.debug=!0}}var a=t.connectSrc||o;return t.iframeSrc=a+"iframe.html",t.popupSrc=a+"popup.html",t.webusbSrc=a+"webusb.html","boolean"==typeof e.transportReconnect&&(t.transportReconnect=e.transportReconnect),"boolean"==typeof e.webusb&&(t.webusb=e.webusb),"boolean"==typeof e.popup&&(t.popup=e.popup),"boolean"==typeof e.lazyLoad&&(t.lazyLoad=e.lazyLoad),"boolean"==typeof e.pendingTransportEvent&&(t.pendingTransportEvent=e.pendingTransportEvent),"undefined"!=typeof window&&window.location&&"file:"===window.location.protocol&&(t.origin="file://"+window.location.pathname,t.webusb=!1),"string"==typeof e.extension&&(t.extension=e.extension),"string"==typeof e.env?t.env=e.env:t.env=u(),"number"==typeof e.timestamp&&(t.timestamp=e.timestamp),"number"==typeof e.interactionTimeout&&(t.interactionTimeout=e.interactionTimeout),"object"==typeof e.manifest&&(t.manifest=function(e){if(e&&"string"==typeof e.email&&"string"==typeof e.appUrl)return{email:e.email,appUrl:e.appUrl}}(e.manifest)),c=t}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/data/ConnectSettings.js"}],[3110,{"../../constants":3104,"../../data/ConnectSettings":3109,"../../iframe/builder":3112,"../../message":3116,"../../message/builder":3115,"../../popup/PopupManager":3118,"../../types":3125,"../../utils/debug":3141,"../../webusb/button":3143,"@babel/runtime/helpers/asyncToGenerator":178,"@babel/runtime/helpers/defineProperty":182,"@babel/runtime/helpers/interopRequireDefault":187,"@babel/runtime/regenerator":206,events:1790},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.disableWebUSB=r.requestLogin=r.customMessage=r.getSettings=r.renderWebUSBButton=r.uiResponse=r.call=r.init=r.cancel=r.dispose=r.manifest=r.eventEmitter=void 0;var s=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/defineProperty")),a=n(e("@babel/runtime/helpers/asyncToGenerator")),o=n(e("events")),c=n(e("../../popup/PopupManager")),u=y(e("../../iframe/builder")),d=n(e("../../webusb/button")),l=e("../../message"),h=e("../../message/builder"),p=e("../../data/ConnectSettings"),f=e("../../utils/debug"),m=e("../../constants");y(e("../../types"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=s?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=new o.default;r.eventEmitter=_;var T,w,v=(0,f.initLog)("[trezor-connect.js]"),S=function(){var e=new c.default(T);return e.on(m.POPUP.CLOSED,(function(e){u.postMessage({type:m.POPUP.CLOSED,payload:e?{error:e}:null},!1)})),e};r.manifest=function(e){T=(0,p.parse)({manifest:e})};var k=function(){_.removeAllListeners(),u.dispose(),w&&w.close()};r.dispose=k;r.cancel=function(e){w&&w.emit(m.POPUP.CLOSED,e)};var A=function(e){if(e.origin===u.origin){var t=(0,l.parseMessage)(e.data),r=t.event,n=t.type,s=t.payload,i=t.id||0;switch(v.log("handleMessage",t),r){case m.RESPONSE_EVENT:u.messagePromises[i]?(u.messagePromises[i].resolve({id:i,success:t.success,payload:s}),delete u.messagePromises[i]):v.warn("Unknown message id "+i);break;case m.DEVICE_EVENT:case m.TRANSPORT_EVENT:case m.BLOCKCHAIN_EVENT:_.emit(r,t),_.emit(n,s);break;case m.UI_EVENT:if(n===m.IFRAME.BOOTSTRAP){u.clearTimeout();break}n===m.IFRAME.LOADED&&u.initPromise.resolve(),n===m.IFRAME.ERROR&&u.initPromise.reject(s.error),_.emit(r,t),_.emit(n,s);break;default:v.log("Undefined message",r,e)}}},P=function(){var e=(0,a.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),!u.instance){e.next=3;break}throw m.ERRORS.TypedError("Init_AlreadyInitialized");case 3:if(T||(T=(0,p.parse)(t)),T.manifest){e.next=6;break}throw m.ERRORS.TypedError("Init_ManifestMissing");case 6:if(!T.lazyLoad){e.next=9;break}return T.lazyLoad=!1,e.abrupt("return");case 9:return w||(w=S()),v.enabled=!!T.debug,window.addEventListener("message",A),window.addEventListener("unload",k),e.next=15,u.init(T);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.init=P;var M=function(){var e=(0,a.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.instance||u.timeout){e.next=15;break}if((T=(0,p.parse)(T)).manifest){e.next=4;break}return e.abrupt("return",(0,l.errorMessage)(m.ERRORS.TypedError("Init_ManifestMissing")));case 4:return w||(w=S()),w.request(!0),e.prev=6,e.next=9,P(T);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),w&&(["Init_IframeBlocked","Init_IframeTimeout"].includes(e.t0.code)?w.postMessage((0,h.UiMessage)(m.UI.IFRAME_FAILURE)):w.close()),e.abrupt("return",(0,l.errorMessage)(e.t0));case 15:if(!u.timeout){e.next=17;break}return e.abrupt("return",(0,l.errorMessage)(m.ERRORS.TypedError("Init_ManifestMissing")));case 17:if(!u.error){e.next=19;break}return e.abrupt("return",(0,l.errorMessage)(u.error));case 19:return T.popup&&w&&w.request(),e.prev=20,e.next=23,u.postMessage({type:m.IFRAME.CALL,payload:t});case 23:if(!(r=e.sent)){e.next=27;break}return!r.success&&"Device_CallInProgress"!==r.payload.code&&w&&w.unlock(),e.abrupt("return",r);case 27:return w&&w.unlock(),e.abrupt("return",(0,l.errorMessage)(m.ERRORS.TypedError("Method_NoResponse")));case 31:return e.prev=31,e.t1=e.catch(20),v.error("__call error",e.t1),w&&w.close(),e.abrupt("return",(0,l.errorMessage)(e.t1));case 36:case"end":return e.stop()}}),e,null,[[6,11],[20,31]])})));return function(t){return e.apply(this,arguments)}}();r.call=M;var x=function(e){u.postMessage({event:m.UI_EVENT,type:m.UI.CUSTOM_MESSAGE_RESPONSE,payload:e})};r.uiResponse=function(e){var t=e.type,r=e.payload;u.postMessage({event:m.UI_EVENT,type:t,payload:r})};r.renderWebUSBButton=function(e){(0,d.default)(e,T.webusbSrc,u.origin)};r.getSettings=function(){return u.instance?M({method:"getSettings"}):Promise.resolve((0,l.errorMessage)(m.ERRORS.TypedError("Init_NotInitialized")))};var I=function(){var e=(0,a.default)(s.default.mark((function e(t){var r,n,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof t.callback){e.next=2;break}return e.abrupt("return",(0,l.errorMessage)(m.ERRORS.TypedError("Method_CustomMessage_Callback")));case 2:return r=t.callback,n=function(){var e=(0,a.default)(s.default.mark((function e(t){var n,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data)||n.type!==m.UI.CUSTOM_MESSAGE_REQUEST){e.next=6;break}return e.next=4,r(n.payload);case 4:i=e.sent,x(i||{message:"release"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",n,!1),e.next=7,M(b(b({method:"customMessage"},t),{},{callback:null}));case 7:return i=e.sent,window.removeEventListener("message",n),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.customMessage=I;var R=function(){var e=(0,a.default)(s.default.mark((function e(t){var r,n,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.callback){e.next=9;break}return r=t.callback,n=function(){var e=(0,a.default)(s.default.mark((function e(t){var n,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data)||n.type!==m.UI.LOGIN_CHALLENGE_REQUEST){e.next=12;break}return e.prev=2,e.next=5,r();case 5:i=e.sent,u.postMessage({event:m.UI_EVENT,type:m.UI.LOGIN_CHALLENGE_RESPONSE,payload:i}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),u.postMessage({event:m.UI_EVENT,type:m.UI.LOGIN_CHALLENGE_RESPONSE,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",n,!1),e.next=6,M(b(b({method:"requestLogin"},t),{},{asyncChallenge:!0,callback:null}));case 6:return i=e.sent,window.removeEventListener("message",n),e.abrupt("return",i);case 9:return e.abrupt("return",M(b({method:"requestLogin"},t)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.requestLogin=R;r.disableWebUSB=function(){u.postMessage({event:m.UI_EVENT,type:m.TRANSPORT.DISABLE_WEBUSB})}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/env/browser/index.js"}],[3111,{"@babel/runtime/helpers/asyncToGenerator":178,"@babel/runtime/helpers/interopRequireDefault":187,"@babel/runtime/regenerator":206,"cross-fetch":1910},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.getOrigin=r.httpRequest=void 0;var s=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("cross-fetch")),o=function(){var e=(0,i.default)(s.default.mark((function e(t,r){var n,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r="text"),e.next=3,(0,a.default)(t,{credentials:"same-origin"});case 3:if(!(n=e.sent).ok){e.next=13;break}if("json"!==r){e.next=10;break}return e.next=8,n.text();case 8:return i=e.sent,e.abrupt("return",JSON.parse(i));case 10:if("binary"!==r){e.next=12;break}return e.abrupt("return",n.arrayBuffer());case 12:return e.abrupt("return",n.text());case 13:throw new Error("httpRequest error: "+t+" "+n.statusText);case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();r.httpRequest=o;r.getOrigin=function(e){if(0===e.indexOf("file://"))return"file://";var t=e.match(/^.+\:\/\/[^\/]+/);return Array.isArray(t)&&t.length>0?t[0]:"unknown"}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/env/browser/networkUtils.js"}],[3112,{"../constants":3104,"../env/browser/networkUtils":3111,"../utils/deferred":3142,"./inline-styles":3113,"@babel/runtime/helpers/asyncToGenerator":178,"@babel/runtime/helpers/interopRequireDefault":187,"@babel/runtime/regenerator":206},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.clearTimeout=r.dispose=r.postMessage=r.init=r.messagePromises=r.error=r.timeout=r.initPromise=r.origin=r.instance=void 0;var s,i,a=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),c=e("../utils/deferred"),u=e("../constants"),d=e("../env/browser/networkUtils"),l=n(e("./inline-styles"));r.instance=s,r.origin=i;var h=(0,c.create)();r.initPromise=h;var p,f=0;r.timeout=f,r.error=p;var m=0,g={};r.messagePromises=g;var y=function(){var e=(0,o.default)(a.default.mark((function e(t){var n,o,l,p,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.initPromise=h=(0,c.create)(),(n=document.getElementById("trezorconnect"))?r.instance=s=n:(r.instance=s=document.createElement("iframe"),s.frameBorder="0",s.width="0px",s.height="0px",s.style.position="absolute",s.style.display="none",s.style.border="0px",s.style.width="0px",s.style.height="0px",s.id="trezorconnect"),"web"===t.env?(l=t.manifest?JSON.stringify(t.manifest):"undefined",p="version="+t.version+"&manifest="+encodeURIComponent(btoa(JSON.stringify(l))),o=t.iframeSrc+"?"+p):o=t.iframeSrc,s.setAttribute("src",o),t.webusb&&s.setAttribute("allow","usb"),r.origin=i=(0,d.getOrigin)(s.src),r.timeout=f=window.setTimeout((function(){h.reject(u.ERRORS.TypedError("Init_IframeTimeout"))}),1e4),m=function(){if(s){try{var e=s.contentWindow.location.origin;if(!e||"null"===e)return void b()}catch(e){}var r;"undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect&&(chrome.runtime.onConnect.addListener((function(){})),r=chrome.runtime.id),s.contentWindow.postMessage({type:u.IFRAME.INIT,payload:{settings:t,extension:r}},i),s.onload=undefined}else h.reject(u.ERRORS.TypedError("Init_IframeBlocked"))},s.attachEvent?s.attachEvent("onload",m):s.onload=m,document.body&&(document.body.appendChild(s),E()),e.prev=11,e.next=14,h.promise;case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(11),s&&(s.parentNode&&s.parentNode.removeChild(s),r.instance=s=null),e.t0;case 20:return e.prev=20,window.clearTimeout(f),r.timeout=f=0,e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[11,16,20,24]])})));return function(t){return e.apply(this,arguments)}}();r.init=y;var E=function(){if(!s)throw u.ERRORS.TypedError("Init_IframeBlocked");var e=s.ownerDocument,t=e.head||e.getElementsByTagName("head")[0],r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("id","TrezorConnectStylesheet"),r.styleSheet?(r.styleSheet.cssText=l.default,t.appendChild(r)):(r.appendChild(document.createTextNode(l.default)),t.append(r))},b=function(){window.clearTimeout(f),r.error=p=u.ERRORS.TypedError("Init_IframeBlocked"),_(),h.reject(p)};r.postMessage=function(e,t){if(void 0===t&&(t=!0),!s)throw u.ERRORS.TypedError("Init_IframeBlocked");if(t){m++,e.id=m,g[m]=(0,c.create)();var r=g[m].promise;return s.contentWindow.postMessage(e,i),r}return s.contentWindow.postMessage(e,i),null};var _=function(){if(s&&s.parentNode)try{s.parentNode.removeChild(s)}catch(e){}r.instance=s=null,r.timeout=f=0};r.dispose=_;r.clearTimeout=function(){window.clearTimeout(f)}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/iframe/builder.js"}],[3113,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.default=void 0;r.default='.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */'}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/iframe/inline-styles.js"}],[3114,{"./constants":3104,"./env/node":3110,"./types":3125,"@babel/runtime/helpers/defineProperty":182,"@babel/runtime/helpers/interopRequireDefault":187},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0;var s={};r.default=void 0;var i=n(e("@babel/runtime/helpers/defineProperty")),a=e("./constants");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(s,e)||e in r&&r[e]===a[e]||(r[e]=a[e]))}));var o=e("./env/node"),c=e("./types");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(s,e)||e in r&&r[e]===c[e]||(r[e]=c[e]))}));var l={manifest:o.manifest,init:o.init,getSettings:o.getSettings,on:function(e,t){o.eventEmitter.on(e,t)},off:function(e,t){o.eventEmitter.removeListener(e,t)},removeAllListeners:function(){o.eventEmitter.removeAllListeners()},uiResponse:o.uiResponse,blockchainGetAccountBalanceHistory:function(e){return(0,o.call)(d({method:"blockchainGetAccountBalanceHistory"},e))},blockchainGetCurrentFiatRates:function(e){return(0,o.call)(d({method:"blockchainGetCurrentFiatRates"},e))},blockchainGetFiatRatesForTimestamps:function(e){return(0,o.call)(d({method:"blockchainGetFiatRatesForTimestamps"},e))},blockchainDisconnect:function(e){return(0,o.call)(d({method:"blockchainDisconnect"},e))},blockchainEstimateFee:function(e){return(0,o.call)(d({method:"blockchainEstimateFee"},e))},blockchainGetTransactions:function(e){return(0,o.call)(d({method:"blockchainGetTransactions"},e))},blockchainSetCustomBackend:function(e){return(0,o.call)(d({method:"blockchainSetCustomBackend"},e))},blockchainSubscribe:function(e){return(0,o.call)(d({method:"blockchainSubscribe"},e))},blockchainSubscribeFiatRates:function(e){return(0,o.call)(d({method:"blockchainSubscribeFiatRates"},e))},blockchainUnsubscribe:function(e){return(0,o.call)(d({method:"blockchainUnsubscribe"},e))},blockchainUnsubscribeFiatRates:function(e){return(0,o.call)(d({method:"blockchainUnsubscribeFiatRates"},e))},customMessage:function(e){return(0,o.customMessage)(e)},requestLogin:function(e){return(0,o.requestLogin)(e)},cardanoGetAddress:function(e){var t=o.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,o.call)(d(d({method:"cardanoGetAddress"},e),{},{useEventListener:t}))},cardanoGetNativeScriptHash:function(e){return(0,o.call)(d({method:"cardanoGetNativeScriptHash"},e))},cardanoGetPublicKey:function(e){return(0,o.call)(d({method:"cardanoGetPublicKey"},e))},cardanoSignTransaction:function(e){return(0,o.call)(d({method:"cardanoSignTransaction"},e))},cipherKeyValue:function(e){return(0,o.call)(d({method:"cipherKeyValue"},e))},composeTransaction:function(e){return(0,o.call)(d({method:"composeTransaction"},e))},ethereumGetAddress:function(e){var t=o.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,o.call)(d(d({method:"ethereumGetAddress"},e),{},{useEventListener:t}))},ethereumGetPublicKey:function(e){return(0,o.call)(d({method:"ethereumGetPublicKey"},e))},ethereumSignMessage:function(e){return(0,o.call)(d({method:"ethereumSignMessage"},e))},ethereumSignTransaction:function(e){return(0,o.call)(d({method:"ethereumSignTransaction"},e))},ethereumSignTypedData:function(e){return(0,o.call)(d({method:"ethereumSignTypedData"},e))},ethereumVerifyMessage:function(e){return(0,o.call)(d({method:"ethereumVerifyMessage"},e))},getAccountInfo:function(e){return(0,o.call)(d({method:"getAccountInfo"},e))},getAddress:function(e){var t=o.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,o.call)(d(d({method:"getAddress"},e),{},{useEventListener:t}))},getDeviceState:function(e){return(0,o.call)(d({method:"getDeviceState"},e))},getFeatures:function(e){return(0,o.call)(d({method:"getFeatures"},e))},getPublicKey:function(e){return(0,o.call)(d({method:"getPublicKey"},e))},liskGetAddress:function(){return(0,o.call)({method:"liskDeprecated"})},liskGetPublicKey:function(){return(0,o.call)({method:"liskDeprecated"})},liskSignMessage:function(){return(0,o.call)({method:"liskDeprecated"})},liskSignTransaction:function(){return(0,o.call)({method:"liskDeprecated"})},liskVerifyMessage:function(){return(0,o.call)({method:"liskDeprecated"})},nemGetAddress:function(e){var t=o.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,o.call)(d(d({method:"nemGetAddress"},e),{},{useEventListener:t}))},nemSignTransaction:function(e){return(0,o.call)(d({method:"nemSignTransaction"},e))},pushTransaction:function(e){return(0,o.call)(d({method:"pushTransaction"},e))},rippleGetAddress:function(e){var t=o.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,o.call)(d(d({method:"rippleGetAddress"},e),{},{useEventListener:t}))},rippleSignTransaction:function(e){return(0,o.call)(d({method:"rippleSignTransaction"},e))},signMessage:function(e){return(0,o.call)(d({method:"signMessage"},e))},signTransaction:function(e){return(0,o.call)(d({method:"signTransaction"},e))},stellarGetAddress:function(e){var t=o.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,o.call)(d(d({method:"stellarGetAddress"},e),{},{useEventListener:t}))},stellarSignTransaction:function(e){return(0,o.call)(d({method:"stellarSignTransaction"},e))},tezosGetAddress:function(e){var t=o.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,o.call)(d(d({method:"tezosGetAddress"},e),{},{useEventListener:t}))},tezosGetPublicKey:function(e){return(0,o.call)(d({method:"tezosGetPublicKey"},e))},tezosSignTransaction:function(e){return(0,o.call)(d({method:"tezosSignTransaction"},e))},eosGetPublicKey:function(e){return(0,o.call)(d({method:"eosGetPublicKey"},e))},eosSignTransaction:function(e){return(0,o.call)(d({method:"eosSignTransaction"},e))},binanceGetAddress:function(e){var t=o.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,o.call)(d(d({method:"binanceGetAddress"},e),{},{useEventListener:t}))},binanceGetPublicKey:function(e){return(0,o.call)(d({method:"binanceGetPublicKey"},e))},binanceSignTransaction:function(e){return(0,o.call)(d({method:"binanceSignTransaction"},e))},verifyMessage:function(e){return(0,o.call)(d({method:"verifyMessage"},e))},resetDevice:function(e){return(0,o.call)(d({method:"resetDevice"},e))},wipeDevice:function(e){return(0,o.call)(d({method:"wipeDevice"},e))},applyFlags:function(e){return(0,o.call)(d({method:"applyFlags"},e))},applySettings:function(e){return(0,o.call)(d({method:"applySettings"},e))},backupDevice:function(e){return(0,o.call)(d({method:"backupDevice"},e))},changePin:function(e){return(0,o.call)(d({method:"changePin"},e))},firmwareUpdate:function(e){return(0,o.call)(d({method:"firmwareUpdate"},e))},recoveryDevice:function(e){return(0,o.call)(d({method:"recoveryDevice"},e))},getCoinInfo:function(e){return(0,o.call)(d({method:"getCoinInfo"},e))},rebootToBootloader:function(e){return(0,o.call)(d({method:"rebootToBootloader"},e))},dispose:o.dispose,cancel:o.cancel,renderWebUSBButton:o.renderWebUSBButton,disableWebUSB:o.disableWebUSB};r.default=l}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/index.js"}],[3115,{"../constants":3104,"@babel/runtime/helpers/defineProperty":182,"@babel/runtime/helpers/interopRequireDefault":187},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.BlockchainMessage=r.ResponseMessage=r.TransportMessage=r.DeviceMessage=r.UiMessage=void 0;var s=n(e("@babel/runtime/helpers/defineProperty")),i=e("../constants");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.UiMessage=function(e,t){return{event:i.UI_EVENT,type:e,payload:t}};r.DeviceMessage=function(e,t){return{event:i.DEVICE_EVENT,type:e,payload:t}};r.TransportMessage=function(e,t){return{event:i.TRANSPORT_EVENT,type:e,payload:t.error?o(o({},t),{},{error:t.error.message,code:t.error.code}):t}};r.ResponseMessage=function(e,t,r){return void 0===r&&(r=null),{event:i.RESPONSE_EVENT,type:i.RESPONSE_EVENT,id:e,success:t,payload:t?r:{error:r.error.message,code:r.error.code}}};r.BlockchainMessage=function(e,t){return{event:i.BLOCKCHAIN_EVENT,type:e,payload:t}}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/message/builder.js"}],[3116,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.errorMessage=r.parseMessage=void 0;r.parseMessage=function(e){var t={event:e.event,type:e.type,payload:e.payload};return"number"==typeof e.id&&(t.id=e.id),"boolean"==typeof e.success&&(t.success=e.success),t};r.errorMessage=function(e){return{success:!1,payload:{error:e.message,code:e.code}}}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/message/index.js"}],[3117,{"@babel/runtime/helpers/defineProperty":182,"@babel/runtime/helpers/interopRequireDefault":187,"@metamask/eth-sig-util":1067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/defineProperty"));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var i=e("@metamask/eth-sig-util");function a(e){switch(Object.prototype.toString.call(e)){case"[object Object]":var t=Object.keys(e).map((function(t){return[t,a(e[t])]}));return Object.fromEntries(t);case"[object Array]":return e.map((function(e){return a(e)}));case"[object BigInt]":return e.toString();default:return e}}t.exports=function(e,t){if(!t)throw new Error("Trezor: Only version 4 of typed data signing is supported");var r=i.SignTypedDataVersion.V4,o=i.TypedDataUtils.sanitizeData(e),c=o.types,u=o.primaryType,d=o.domain,l=o.message;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({domain_separator_hash:i.TypedDataUtils.hashStruct("EIP712Domain",a(d),c,r).toString("hex"),message_hash:i.TypedDataUtils.hashStruct(u,a(l),c,r).toString("hex")},e)}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/plugins/ethereum/typedData.js"}],[3118,{"../constants/iframe":3103,"../constants/popup":3106,"../constants/ui":3108,"../env/browser/networkUtils":3111,"../utils/deferred":3142,"./showPopupRequest":3119,"@babel/runtime/helpers/assertThisInitialized":177,"@babel/runtime/helpers/asyncToGenerator":178,"@babel/runtime/helpers/defineProperty":182,"@babel/runtime/helpers/inheritsLoose":186,"@babel/runtime/helpers/interopRequireDefault":187,"@babel/runtime/regenerator":206,events:1790},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.default=void 0;var s=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("@babel/runtime/helpers/assertThisInitialized")),o=n(e("@babel/runtime/helpers/inheritsLoose")),c=n(e("@babel/runtime/helpers/defineProperty")),u=n(e("events")),d=y(e("../constants/popup")),l=y(e("../constants/iframe")),h=y(e("../constants/ui")),p=e("./showPopupRequest"),f=e("../env/browser/networkUtils"),m=e("../utils/deferred");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=s?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var E=function(e){function t(t){var r;return r=e.call(this)||this,(0,c.default)((0,a.default)(r),"requestTimeout",0),(0,c.default)((0,a.default)(r),"closeInterval",0),(0,c.default)((0,a.default)(r),"extensionTabId",0),r.settings=t,r.origin=(0,f.getOrigin)(t.popupSrc),r.handleMessage=r.handleMessage.bind((0,a.default)(r)),r.iframeHandshake=(0,m.create)(l.LOADED),"webextension"===r.settings.env&&(r.handleExtensionConnect=r.handleExtensionConnect.bind((0,a.default)(r)),r.handleExtensionMessage=r.handleExtensionMessage.bind((0,a.default)(r)),chrome.runtime.onConnect.addListener(r.handleExtensionConnect)),window.addEventListener("message",r.handleMessage,!1),r}(0,o.default)(t,e);var r=t.prototype;return r.request=function(e){var t=this;if(void 0===e&&(e=!1),this.locked)this._window&&("webextension"===this.settings.env?chrome.tabs.update(this._window.id,{active:!0}):this._window.focus());else{var r=this.open.bind(this);if(this.locked=!0,this.settings.supportedBrowser){var n=e||"webextension"===this.settings.env?1:850;this.requestTimeout=window.setTimeout((function(){t.requestTimeout=0,r(e)}),n)}else r()}},r.cancel=function(){this.close()},r.unlock=function(){this.locked=!1},r.open=function(e){var t=this,r=this.settings.popupSrc;this.settings.supportedBrowser?(this.popupPromise=(0,m.create)(d.LOADED),this.openWrapper(e?r+"#loading":r),this.closeInterval=window.setInterval((function(){t._window&&("webextension"===t.settings.env?chrome.tabs.get(t._window.id,(function(e){e||(t.close(),t.emit(d.CLOSED))})):t._window.closed&&(t.close(),t.emit(d.CLOSED)))}),500),this.openTimeout=window.setTimeout((function(){t.close(),(0,p.showPopupRequest)(t.open.bind(t),(function(){t.emit(d.CLOSED)}))}),3e3)):this.openWrapper(r+"#unsupported")},r.openWrapper=function(e){var t=this;"webextension"===this.settings.env?chrome.windows.getCurrent(null,(function(r){"normal"!==r.type?chrome.windows.create({url:e},(function(e){chrome.tabs.query({windowId:e.id,active:!0},(function(e){t._window=e[0]}))})):chrome.tabs.query({currentWindow:!0,active:!0},(function(r){t.extensionTabId=r[0].id,chrome.tabs.create({url:e,index:r[0].index+1},(function(e){t._window=e}))}))})):"electron"===this.settings.env?this._window=window.open(e,"modal"):(this._window=window.open("","_blank"),this._window&&(this._window.location.href=e))},r.handleExtensionConnect=function(e){"trezor-connect"===e.name&&(!this._window||this._window&&this._window.id!==e.sender.tab.id?e.disconnect():(window.clearTimeout(this.openTimeout),this.extensionPort=e,this.extensionPort.onMessage.addListener(this.handleExtensionMessage)))},r.handleExtensionMessage=function(e){var t=this;if(this.extensionPort){var r=this.extensionPort,n=e.data;if(n&&"object"==typeof n)if(n.type===d.ERROR){var s=n.payload&&"string"==typeof n.payload.error?n.payload.error:null;this.emit(d.CLOSED,s?"Popup error: "+s:null),this.close()}else n.type===d.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){r.postMessage({type:d.INIT,payload:{settings:t.settings,useBroadcastChannel:e}})}))):n.type===d.EXTENSION_USB_PERMISSIONS?chrome.tabs.query({currentWindow:!0,active:!0},(function(e){chrome.tabs.create({url:"trezor-usb-permissions.html",index:e[0].index+1},(function(e){}))})):n.type===d.CLOSE_WINDOW&&(this.emit(d.CLOSED),this.close())}},r.handleMessage=function(e){var t=this,r=e.data;if((0,f.getOrigin)(e.origin)===this.origin&&r&&"object"==typeof r)if(r.type===l.LOADED){var n=!(!r.payload||"boolean"!=typeof r.payload.useBroadcastChannel)&&r.payload.useBroadcastChannel;this.iframeHandshake.resolve(n)}else if(r.type===d.BOOTSTRAP)window.clearTimeout(this.openTimeout);else if(r.type===d.ERROR&&this._window){var s=r.payload&&"string"==typeof r.payload.error?r.payload.error:null;this.emit(d.CLOSED,s?"Popup error: "+s:null),this.close()}else r.type===d.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){t._window.postMessage({type:d.INIT,payload:{settings:t.settings,useBroadcastChannel:e}},t.origin)}))):r.type!==d.CANCEL_POPUP_REQUEST&&r.type!==h.CLOSE_UI_WINDOW||this.close()},r.close=function(){if(this.locked=!1,this.popupPromise=undefined,this.requestTimeout&&(window.clearTimeout(this.requestTimeout),this.requestTimeout=0),this.openTimeout&&(window.clearTimeout(this.openTimeout),this.openTimeout=0),this.closeInterval&&(window.clearInterval(this.closeInterval),this.closeInterval=0),this.extensionPort&&(this.extensionPort.disconnect(),this.extensionPort=null),this.extensionTabId&&(chrome.tabs.update(this.extensionTabId,{active:!0}),this.extensionTabId=0),this._window){if("webextension"===this.settings.env){chrome.runtime.lastError;chrome.tabs.remove(this._window.id,(function(){chrome.runtime.lastError}))}else this._window.close();this._window=null}},r.postMessage=function(){var e=(0,i.default)(s.default.mark((function e(t){var r=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._window||t.type===h.REQUEST_UI_WINDOW||!this.openTimeout){e.next=4;break}return this.close(),(0,p.showPopupRequest)(this.open.bind(this),(function(){r.emit(d.CLOSED)})),e.abrupt("return");case 4:if(!this.popupPromise){e.next=7;break}return e.next=7,this.popupPromise.promise;case 7:this._window&&this._window.postMessage(t,this.origin);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(u.default);r.default=E}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/popup/PopupManager.js"}],[3119,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.showPopupRequest=void 0;var n="TrezorConnectInteractionLayer",s='\n    <div class="trezorconnect-container" id="'+n+'">\n        <div class="trezorconnect-window">\n            <div class="trezorconnect-head">\n                <svg class="trezorconnect-logo" x="0px" y="0px" viewBox="0 0 163.7 41.9" width="78px" height="20px" preserveAspectRatio="xMinYMin meet">\n                    <polygon points="101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1"/>\n                    <path d="M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z"/>\n                    <path d="M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z"/>\n                    <polygon points="82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 "/>\n                    <path d="M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z"/>\n                    <path d="M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z"/>\n                    <polygon points="40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 "/>\n                </svg>\n                <div class="trezorconnect-close">\n                    <svg x="0px" y="0px" viewBox="24 24 60 60" width="24px" height="24px" preserveAspectRatio="xMinYMin meet">\n                        <polygon class="st0" points="40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 "/>\n                    </svg>\n                </div>\n            </div>\n            <div class="trezorconnect-body">\n                <h3>Popup was blocked</h3>\n                <p>Please click to Continue to open popup manually</p>\n                <button class="trezorconnect-open">Continue</button>\n            </div>\n        </div>\n    </div>\n';r.showPopupRequest=function(e,t){if(!document.getElementById(n)){var r=document.createElement("div");r.id=n,r.className="trezorconnect-container",r.innerHTML=s,document.body&&document.body.appendChild(r),r.getElementsByClassName("trezorconnect-open")[0].onclick=function(){e(),document.body&&document.body.removeChild(r)},r.getElementsByClassName("trezorconnect-close")[0].onclick=function(){t(),document.body&&document.body.removeChild(r)}}}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/popup/showPopupRequest.js"}],[3120,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/account.js"}],[3121,{"../constants":3104,"./account":3120,"./backend/blockchain":3122,"./events":3124,"./misc":3126,"./networks/binance":3127,"./networks/bitcoin":3128,"./networks/cardano":3129,"./networks/coinInfo":3130,"./networks/eos":3131,"./networks/ethereum":3132,"./networks/nem":3133,"./networks/ripple":3134,"./networks/stellar":3135,"./networks/tezos":3136,"./params":3137,"./trezor/device":3138,"./trezor/management":3139,"./trezor/protobuf":3140},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){s(e("../constants")),s(e("./params")),s(e("./trezor/device")),s(e("./trezor/management")),s(e("./trezor/protobuf")),s(e("./account")),s(e("./networks/bitcoin")),s(e("./networks/binance")),s(e("./networks/cardano")),s(e("./networks/coinInfo")),s(e("./networks/eos")),s(e("./networks/ethereum")),s(e("./networks/nem")),s(e("./networks/ripple")),s(e("./networks/stellar")),s(e("./networks/tezos")),s(e("./misc")),s(e("./events")),s(e("./backend/blockchain"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,r&&r.set(e,s),s}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/api.js"}],[3122,{"../../constants":3104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){e("../../constants")}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/backend/blockchain.js"}],[3123,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/backend/transactions.js"}],[3124,{"../constants":3104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){e("../constants")}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/events.js"}],[3125,{"./account":3120,"./api":3121,"./backend/blockchain":3122,"./backend/transactions":3123,"./events":3124,"./misc":3126,"./networks/binance":3127,"./networks/bitcoin":3128,"./networks/cardano":3129,"./networks/coinInfo":3130,"./networks/eos":3131,"./networks/ethereum":3132,"./networks/nem":3133,"./networks/ripple":3134,"./networks/stellar":3135,"./networks/tezos":3136,"./params":3137,"./trezor/device":3138,"./trezor/management":3139},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0;var n=e("./api");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||(r[e]=n[e]))}));var s=e("./events");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===s[e]||(r[e]=s[e]))}));var i=e("./misc");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||(r[e]=i[e]))}));var a=e("./params");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===a[e]||(r[e]=a[e]))}));var o=e("./account");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||(r[e]=o[e]))}));var c=e("./trezor/device");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===c[e]||(r[e]=c[e]))}));var u=e("./trezor/management");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===u[e]||(r[e]=u[e]))}));var d=e("./networks/bitcoin");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===d[e]||(r[e]=d[e]))}));var l=e("./networks/binance");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===l[e]||(r[e]=l[e]))}));var h=e("./networks/cardano");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===h[e]||(r[e]=h[e]))}));var p=e("./networks/coinInfo");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===p[e]||(r[e]=p[e]))}));var f=e("./networks/eos");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===f[e]||(r[e]=f[e]))}));var m=e("./networks/ethereum");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===m[e]||(r[e]=m[e]))}));var g=e("./networks/nem");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===g[e]||(r[e]=g[e]))}));var y=e("./networks/ripple");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===y[e]||(r[e]=y[e]))}));var E=e("./networks/stellar");Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===E[e]||(r[e]=E[e]))}));var b=e("./networks/tezos");Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===b[e]||(r[e]=b[e]))}));var _=e("./backend/blockchain");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===_[e]||(r[e]=_[e]))}));var T=e("./backend/transactions");Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===T[e]||(r[e]=T[e]))}))}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/index.js"}],[3126,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/misc.js"}],[3127,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/binance.js"}],[3128,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/bitcoin.js"}],[3129,{"../trezor/protobuf":3140},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CardanoTxWitnessType=r.CardanoTxSigningMode=r.CardanoPoolRelayType=r.CardanoNativeScriptHashDisplayFormat=r.CardanoNativeScriptType=r.CardanoCertificateType=r.CardanoAddressType=void 0;var n=e("../trezor/protobuf");r.CardanoAddressType=n.Enum_CardanoAddressType,r.CardanoCertificateType=n.Enum_CardanoCertificateType,r.CardanoNativeScriptType=n.Enum_CardanoNativeScriptType,r.CardanoNativeScriptHashDisplayFormat=n.Enum_CardanoNativeScriptHashDisplayFormat,r.CardanoPoolRelayType=n.Enum_CardanoPoolRelayType,r.CardanoTxSigningMode=n.Enum_CardanoTxSigningMode,r.CardanoTxWitnessType=n.Enum_CardanoTxWitnessType}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/cardano.js"}],[3130,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/coinInfo.js"}],[3131,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/eos.js"}],[3132,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/ethereum.js"}],[3133,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/nem.js"}],[3134,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/ripple.js"}],[3135,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/stellar.js"}],[3136,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/networks/tezos.js"}],[3137,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/params.js"}],[3138,{"../../constants":3104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){e("../../constants")}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/trezor/device.js"}],[3139,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/trezor/management.js"}],[3140,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.Enum_TezosBallotType=r.Enum_TezosContractType=r.Enum_StellarSignerType=r.Enum_StellarMemoType=r.Enum_StellarAssetType=r.Enum_NEMImportanceTransferMode=r.Enum_NEMModificationType=r.Enum_NEMSupplyChangeType=r.Enum_NEMMosaicLevy=r.Enum_WordRequestType=r.Enum_RecoveryDeviceType=r.Enum_SdProtectOperationType=r.Enum_Capability=r.Enum_SafetyCheckLevel=r.Enum_BackupType=r.Enum_EthereumDataType=r.Enum_PinMatrixRequestType=r.Enum_ButtonRequestType=r.Enum_FailureType=r.Enum_CardanoTxWitnessType=r.Enum_CardanoTxSigningMode=r.Enum_CardanoTxAuxiliaryDataSupplementType=r.Enum_CardanoPoolRelayType=r.Enum_CardanoCertificateType=r.Enum_CardanoNativeScriptHashDisplayFormat=r.Enum_CardanoNativeScriptType=r.Enum_CardanoAddressType=r.Enum_CardanoDerivationType=r.Enum_RequestType=r.Enum_AmountUnit=r.Enum_DecredStakingSpendType=r.Enum_OutputScriptType=r.Enum_InputScriptType=r.Enum_BinanceTimeInForce=r.Enum_BinanceOrderSide=r.Enum_BinanceOrderType=void 0;var n=Object.freeze({OT_UNKNOWN:0,MARKET:1,LIMIT:2,OT_RESERVED:3});r.Enum_BinanceOrderType=n;var s=Object.freeze({SIDE_UNKNOWN:0,BUY:1,SELL:2});r.Enum_BinanceOrderSide=s;var i=Object.freeze({TIF_UNKNOWN:0,GTE:1,TIF_RESERVED:2,IOC:3});r.Enum_BinanceTimeInForce=i;var a=Object.freeze({SPENDADDRESS:0,SPENDMULTISIG:1,EXTERNAL:2,SPENDWITNESS:3,SPENDP2SHWITNESS:4,SPENDTAPROOT:5});r.Enum_InputScriptType=a;var o=Object.freeze({PAYTOADDRESS:0,PAYTOSCRIPTHASH:1,PAYTOMULTISIG:2,PAYTOOPRETURN:3,PAYTOWITNESS:4,PAYTOP2SHWITNESS:5,PAYTOTAPROOT:6});r.Enum_OutputScriptType=o;var c=Object.freeze({SSGen:0,SSRTX:1});r.Enum_DecredStakingSpendType=c;var u=Object.freeze({BITCOIN:0,MILLIBITCOIN:1,MICROBITCOIN:2,SATOSHI:3});r.Enum_AmountUnit=u;var d=Object.freeze({TXINPUT:0,TXOUTPUT:1,TXMETA:2,TXFINISHED:3,TXEXTRADATA:4,TXORIGINPUT:5,TXORIGOUTPUT:6});r.Enum_RequestType=d;var l=Object.freeze({LEDGER:0,ICARUS:1,ICARUS_TREZOR:2});r.Enum_CardanoDerivationType=l;var h=Object.freeze({BASE:0,BASE_SCRIPT_KEY:1,BASE_KEY_SCRIPT:2,BASE_SCRIPT_SCRIPT:3,POINTER:4,POINTER_SCRIPT:5,ENTERPRISE:6,ENTERPRISE_SCRIPT:7,BYRON:8,REWARD:14,REWARD_SCRIPT:15});r.Enum_CardanoAddressType=h;var p=Object.freeze({PUB_KEY:0,ALL:1,ANY:2,N_OF_K:3,INVALID_BEFORE:4,INVALID_HEREAFTER:5});r.Enum_CardanoNativeScriptType=p;var f=Object.freeze({HIDE:0,BECH32:1,POLICY_ID:2});r.Enum_CardanoNativeScriptHashDisplayFormat=f;var m=Object.freeze({STAKE_REGISTRATION:0,STAKE_DEREGISTRATION:1,STAKE_DELEGATION:2,STAKE_POOL_REGISTRATION:3});r.Enum_CardanoCertificateType=m;var g=Object.freeze({SINGLE_HOST_IP:0,SINGLE_HOST_NAME:1,MULTIPLE_HOST_NAME:2});r.Enum_CardanoPoolRelayType=g;var y=Object.freeze({NONE:0,CATALYST_REGISTRATION_SIGNATURE:1});r.Enum_CardanoTxAuxiliaryDataSupplementType=y;var E=Object.freeze({ORDINARY_TRANSACTION:0,POOL_REGISTRATION_AS_OWNER:1,MULTISIG_TRANSACTION:2});r.Enum_CardanoTxSigningMode=E;var b=Object.freeze({BYRON_WITNESS:0,SHELLEY_WITNESS:1});r.Enum_CardanoTxWitnessType=b;var _=Object.freeze({Failure_UnexpectedMessage:1,Failure_ButtonExpected:2,Failure_DataError:3,Failure_ActionCancelled:4,Failure_PinExpected:5,Failure_PinCancelled:6,Failure_PinInvalid:7,Failure_InvalidSignature:8,Failure_ProcessError:9,Failure_NotEnoughFunds:10,Failure_NotInitialized:11,Failure_PinMismatch:12,Failure_WipeCodeMismatch:13,Failure_InvalidSession:14,Failure_FirmwareError:99});r.Enum_FailureType=_;var T=Object.freeze({ButtonRequest_Other:1,ButtonRequest_FeeOverThreshold:2,ButtonRequest_ConfirmOutput:3,ButtonRequest_ResetDevice:4,ButtonRequest_ConfirmWord:5,ButtonRequest_WipeDevice:6,ButtonRequest_ProtectCall:7,ButtonRequest_SignTx:8,ButtonRequest_FirmwareCheck:9,ButtonRequest_Address:10,ButtonRequest_PublicKey:11,ButtonRequest_MnemonicWordCount:12,ButtonRequest_MnemonicInput:13,_Deprecated_ButtonRequest_PassphraseType:14,ButtonRequest_UnknownDerivationPath:15,ButtonRequest_RecoveryHomepage:16,ButtonRequest_Success:17,ButtonRequest_Warning:18,ButtonRequest_PassphraseEntry:19,ButtonRequest_PinEntry:20});r.Enum_ButtonRequestType=T;var w=Object.freeze({PinMatrixRequestType_Current:1,PinMatrixRequestType_NewFirst:2,PinMatrixRequestType_NewSecond:3,PinMatrixRequestType_WipeCodeFirst:4,PinMatrixRequestType_WipeCodeSecond:5});r.Enum_PinMatrixRequestType=w;var v=Object.freeze({UINT:1,INT:2,BYTES:3,STRING:4,BOOL:5,ADDRESS:6,ARRAY:7,STRUCT:8});r.Enum_EthereumDataType=v;var S=Object.freeze({Bip39:0,Slip39_Basic:1,Slip39_Advanced:2});r.Enum_BackupType=S;var k=Object.freeze({Strict:0,PromptAlways:1,PromptTemporarily:2});r.Enum_SafetyCheckLevel=k;var A=Object.freeze({Capability_Bitcoin:1,Capability_Bitcoin_like:2,Capability_Binance:3,Capability_Cardano:4,Capability_Crypto:5,Capability_EOS:6,Capability_Ethereum:7,Capability_Lisk:8,Capability_Monero:9,Capability_NEM:10,Capability_Ripple:11,Capability_Stellar:12,Capability_Tezos:13,Capability_U2F:14,Capability_Shamir:15,Capability_ShamirGroups:16,Capability_PassphraseEntry:17});r.Enum_Capability=A;var P=Object.freeze({DISABLE:0,ENABLE:1,REFRESH:2});r.Enum_SdProtectOperationType=P;var M=Object.freeze({RecoveryDeviceType_ScrambledWords:0,RecoveryDeviceType_Matrix:1});r.Enum_RecoveryDeviceType=M;var x=Object.freeze({WordRequestType_Plain:0,WordRequestType_Matrix9:1,WordRequestType_Matrix6:2});r.Enum_WordRequestType=x;var I=Object.freeze({MosaicLevy_Absolute:1,MosaicLevy_Percentile:2});r.Enum_NEMMosaicLevy=I;var R=Object.freeze({SupplyChange_Increase:1,SupplyChange_Decrease:2});r.Enum_NEMSupplyChangeType=R;var O=Object.freeze({CosignatoryModification_Add:1,CosignatoryModification_Delete:2});r.Enum_NEMModificationType=O;var C=Object.freeze({ImportanceTransfer_Activate:1,ImportanceTransfer_Deactivate:2});r.Enum_NEMImportanceTransferMode=C;var N=Object.freeze({NATIVE:0,ALPHANUM4:1,ALPHANUM12:2});r.Enum_StellarAssetType=N;var j=Object.freeze({NONE:0,TEXT:1,ID:2,HASH:3,RETURN:4});r.Enum_StellarMemoType=j;var L=Object.freeze({ACCOUNT:0,PRE_AUTH:1,HASH:2});r.Enum_StellarSignerType=L;var U=Object.freeze({Implicit:0,Originated:1});r.Enum_TezosContractType=U;var D=Object.freeze({Yay:0,Nay:1,Pass:2});r.Enum_TezosBallotType=D}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/types/trezor/protobuf.js"}],[3141,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.getLog=r.enableLogByPrefix=r.enableLog=r.initLog=void 0;var n={DescriptorStream:"color: #77ab59",DeviceList:"color: #36802d",Device:"color: #bada55",Core:"color: #c9df8a",IFrame:"color: #FFFFFF; background: #f4a742;",Popup:"color: #f48a00"},s=function(){function e(e,t){this.prefix=e,this.enabled=t,this.messages=[],this.css=n[e]||"color: #000000; background: #FFFFFF;"}var t=e.prototype;return t.addMessage=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];this.messages.push({level:e,prefix:t,message:n,timestamp:(new Date).getTime()}),this.messages.length>100&&this.messages.shift()},t.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["log",this.prefix].concat(t)),this.enabled)&&(n=console).log.apply(n,[this.prefix].concat(t))},t.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["error",this.prefix].concat(t)),this.enabled)&&(n=console).error.apply(n,[this.prefix].concat(t))},t.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["warn",this.prefix].concat(t)),this.enabled)&&(n=console).warn.apply(n,[this.prefix].concat(t))},t.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["debug",this.prefix].concat(t)),this.enabled)&&(n=console).log.apply(n,["%c"+this.prefix,this.css].concat(t))},e}(),i={};r.initLog=function(e,t){var r=new s(e,!!t);return i[e]=r,r};r.enableLog=function(e){Object.keys(i).forEach((function(t){i[t].enabled=e}))};r.enableLogByPrefix=function(e,t){i[e]&&(i[e].enabled=t)};r.getLog=function(){var e=[];return Object.keys(i).forEach((function(t){e=e.concat(i[t].messages)})),e.sort((function(e,t){return e.timestamp-t.timestamp})),e}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/utils/debug.js"}],[3142,{"@babel/runtime/helpers/asyncToGenerator":178,"@babel/runtime/helpers/interopRequireDefault":187,"@babel/runtime/regenerator":206},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.create=function(e,t){var r,n=function(e){},a=function(e){},o=new Promise(function(){var t=(0,i.default)(s.default.mark((function t(i,o){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i,a=o,"function"!=typeof e){t.next=11;break}return t.prev=3,t.next=6,e();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),o(t.t0);case 11:"string"==typeof e&&(r=e);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e,r){return t.apply(this,arguments)}}());return{id:r,device:t,resolve:n,reject:a,promise:o}},r.createAsync=function(e){var t=function(e){},r=function(e){},n=new Promise((function(e,n){t=e,r=n})),a=function(){var t=(0,i.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{resolve:t,reject:r,promise:n,run:function(){return a(),n}}},r.resolveTimeoutPromise=function(e,t){return new Promise((function(r){setTimeout((function(){r(t)}),e)}))},r.rejectTimeoutPromise=void 0;var s=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator"));r.rejectTimeoutPromise=function(e,t){return new Promise((function(r,n){setTimeout((function(){n(t)}),e)}))}}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/utils/deferred.js"}],[3143,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.default=void 0;var n=function(e,t,r){var n=e||".trezor-webusb-button",s=document.querySelectorAll(n),i=t+"?"+Date.now();s.forEach((function(e){if(e.getElementsByTagName("iframe").length<1){var t=e.getBoundingClientRect(),n=document.createElement("iframe");n.frameBorder="0",n.width=Math.round(t.width)+"px",n.height=Math.round(t.height)+"px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex="1",n.setAttribute("allow","usb"),n.setAttribute("scrolling","no"),n.onload=function(){n.contentWindow.postMessage({},r)},n.src=i,e.append(n)}}))};r.default=n}}},{package:"eth-trezor-keyring>trezor-connect",file:"node_modules/trezor-connect/lib/webusb/button.js"}],[3145,{buffer:1788},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var r,n;r=this,n=function(){var t={};function r(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},t.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==e.from?(t.encodeBase64=function(t){return e.from(t).toString("base64")},t.decodeBase64=function(t){return r(t),new Uint8Array(Array.prototype.slice.call(e.from(t,"base64"),0))}):(t.encodeBase64=function(t){return new e(t).toString("base64")},t.decodeBase64=function(t){return r(t),new Uint8Array(Array.prototype.slice.call(new e(t,"base64"),0))}):(t.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},t.decodeBase64=function(e){r(e);var t,n=atob(e),s=new Uint8Array(n.length);for(t=0;t<n.length;t++)s[t]=n.charCodeAt(t);return s}),t},void 0!==t&&t.exports?t.exports=n():(r.nacl||(r.nacl={}),r.nacl.util=n())}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-sig-util>tweetnacl-util",file:"node_modules/tweetnacl-util/nacl-util.js"}],[3146,{crypto:1788},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(t){var r=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},s=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var a=r(),o=r([1]),c=r([56129,1]),u=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function m(e,t,r,n,s){var i,a=0;for(i=0;i<s;i++)a|=e[t+i]^r[n+i];return(1&a-1>>>8)-1}function g(e,t,r,n){return m(e,t,r,n,16)}function y(e,t,r,n){return m(e,t,r,n,32)}function E(e,t,r,n){!function(e,t,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,o=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,d=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,E=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,T=i,w=a,v=o,S=c,k=u,A=d,P=l,M=h,x=p,I=f,R=m,O=g,C=y,N=E,j=b,L=_,U=0;U<20;U+=2)T^=(s=(C^=(s=(x^=(s=(k^=(s=T+C|0)<<7|s>>>25)+T|0)<<9|s>>>23)+k|0)<<13|s>>>19)+x|0)<<18|s>>>14,A^=(s=(w^=(s=(N^=(s=(I^=(s=A+w|0)<<7|s>>>25)+A|0)<<9|s>>>23)+I|0)<<13|s>>>19)+N|0)<<18|s>>>14,R^=(s=(P^=(s=(v^=(s=(j^=(s=R+P|0)<<7|s>>>25)+R|0)<<9|s>>>23)+j|0)<<13|s>>>19)+v|0)<<18|s>>>14,L^=(s=(O^=(s=(M^=(s=(S^=(s=L+O|0)<<7|s>>>25)+L|0)<<9|s>>>23)+S|0)<<13|s>>>19)+M|0)<<18|s>>>14,T^=(s=(S^=(s=(v^=(s=(w^=(s=T+S|0)<<7|s>>>25)+T|0)<<9|s>>>23)+w|0)<<13|s>>>19)+v|0)<<18|s>>>14,A^=(s=(k^=(s=(M^=(s=(P^=(s=A+k|0)<<7|s>>>25)+A|0)<<9|s>>>23)+P|0)<<13|s>>>19)+M|0)<<18|s>>>14,R^=(s=(I^=(s=(x^=(s=(O^=(s=R+I|0)<<7|s>>>25)+R|0)<<9|s>>>23)+O|0)<<13|s>>>19)+x|0)<<18|s>>>14,L^=(s=(j^=(s=(N^=(s=(C^=(s=L+j|0)<<7|s>>>25)+L|0)<<9|s>>>23)+C|0)<<13|s>>>19)+N|0)<<18|s>>>14;T=T+i|0,w=w+a|0,v=v+o|0,S=S+c|0,k=k+u|0,A=A+d|0,P=P+l|0,M=M+h|0,x=x+p|0,I=I+f|0,R=R+m|0,O=O+g|0,C=C+y|0,N=N+E|0,j=j+b|0,L=L+_|0,e[0]=T>>>0&255,e[1]=T>>>8&255,e[2]=T>>>16&255,e[3]=T>>>24&255,e[4]=w>>>0&255,e[5]=w>>>8&255,e[6]=w>>>16&255,e[7]=w>>>24&255,e[8]=v>>>0&255,e[9]=v>>>8&255,e[10]=v>>>16&255,e[11]=v>>>24&255,e[12]=S>>>0&255,e[13]=S>>>8&255,e[14]=S>>>16&255,e[15]=S>>>24&255,e[16]=k>>>0&255,e[17]=k>>>8&255,e[18]=k>>>16&255,e[19]=k>>>24&255,e[20]=A>>>0&255,e[21]=A>>>8&255,e[22]=A>>>16&255,e[23]=A>>>24&255,e[24]=P>>>0&255,e[25]=P>>>8&255,e[26]=P>>>16&255,e[27]=P>>>24&255,e[28]=M>>>0&255,e[29]=M>>>8&255,e[30]=M>>>16&255,e[31]=M>>>24&255,e[32]=x>>>0&255,e[33]=x>>>8&255,e[34]=x>>>16&255,e[35]=x>>>24&255,e[36]=I>>>0&255,e[37]=I>>>8&255,e[38]=I>>>16&255,e[39]=I>>>24&255,e[40]=R>>>0&255,e[41]=R>>>8&255,e[42]=R>>>16&255,e[43]=R>>>24&255,e[44]=O>>>0&255,e[45]=O>>>8&255,e[46]=O>>>16&255,e[47]=O>>>24&255,e[48]=C>>>0&255,e[49]=C>>>8&255,e[50]=C>>>16&255,e[51]=C>>>24&255,e[52]=N>>>0&255,e[53]=N>>>8&255,e[54]=N>>>16&255,e[55]=N>>>24&255,e[56]=j>>>0&255,e[57]=j>>>8&255,e[58]=j>>>16&255,e[59]=j>>>24&255,e[60]=L>>>0&255,e[61]=L>>>8&255,e[62]=L>>>16&255,e[63]=L>>>24&255}(e,t,r,n)}function b(e,t,r,n){!function(e,t,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,o=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,d=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,E=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,T=0;T<20;T+=2)i^=(s=(y^=(s=(p^=(s=(u^=(s=i+y|0)<<7|s>>>25)+i|0)<<9|s>>>23)+u|0)<<13|s>>>19)+p|0)<<18|s>>>14,d^=(s=(a^=(s=(E^=(s=(f^=(s=d+a|0)<<7|s>>>25)+d|0)<<9|s>>>23)+f|0)<<13|s>>>19)+E|0)<<18|s>>>14,m^=(s=(l^=(s=(o^=(s=(b^=(s=m+l|0)<<7|s>>>25)+m|0)<<9|s>>>23)+b|0)<<13|s>>>19)+o|0)<<18|s>>>14,_^=(s=(g^=(s=(h^=(s=(c^=(s=_+g|0)<<7|s>>>25)+_|0)<<9|s>>>23)+c|0)<<13|s>>>19)+h|0)<<18|s>>>14,i^=(s=(c^=(s=(o^=(s=(a^=(s=i+c|0)<<7|s>>>25)+i|0)<<9|s>>>23)+a|0)<<13|s>>>19)+o|0)<<18|s>>>14,d^=(s=(u^=(s=(h^=(s=(l^=(s=d+u|0)<<7|s>>>25)+d|0)<<9|s>>>23)+l|0)<<13|s>>>19)+h|0)<<18|s>>>14,m^=(s=(f^=(s=(p^=(s=(g^=(s=m+f|0)<<7|s>>>25)+m|0)<<9|s>>>23)+g|0)<<13|s>>>19)+p|0)<<18|s>>>14,_^=(s=(b^=(s=(E^=(s=(y^=(s=_+b|0)<<7|s>>>25)+_|0)<<9|s>>>23)+y|0)<<13|s>>>19)+E|0)<<18|s>>>14;e[0]=i>>>0&255,e[1]=i>>>8&255,e[2]=i>>>16&255,e[3]=i>>>24&255,e[4]=d>>>0&255,e[5]=d>>>8&255,e[6]=d>>>16&255,e[7]=d>>>24&255,e[8]=m>>>0&255,e[9]=m>>>8&255,e[10]=m>>>16&255,e[11]=m>>>24&255,e[12]=_>>>0&255,e[13]=_>>>8&255,e[14]=_>>>16&255,e[15]=_>>>24&255,e[16]=l>>>0&255,e[17]=l>>>8&255,e[18]=l>>>16&255,e[19]=l>>>24&255,e[20]=h>>>0&255,e[21]=h>>>8&255,e[22]=h>>>16&255,e[23]=h>>>24&255,e[24]=p>>>0&255,e[25]=p>>>8&255,e[26]=p>>>16&255,e[27]=p>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,n)}var _=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function T(e,t,r,n,s,i,a){var o,c,u=new Uint8Array(16),d=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=i[c];for(;s>=64;){for(E(d,u,a,_),c=0;c<64;c++)e[t+c]=r[n+c]^d[c];for(o=1,c=8;c<16;c++)o=o+(255&u[c])|0,u[c]=255&o,o>>>=8;s-=64,t+=64,n+=64}if(s>0)for(E(d,u,a,_),c=0;c<s;c++)e[t+c]=r[n+c]^d[c];return 0}function w(e,t,r,n,s){var i,a,o=new Uint8Array(16),c=new Uint8Array(64);for(a=0;a<16;a++)o[a]=0;for(a=0;a<8;a++)o[a]=n[a];for(;r>=64;){for(E(c,o,s,_),a=0;a<64;a++)e[t+a]=c[a];for(i=1,a=8;a<16;a++)i=i+(255&o[a])|0,o[a]=255&i,i>>>=8;r-=64,t+=64}if(r>0)for(E(c,o,s,_),a=0;a<r;a++)e[t+a]=c[a];return 0}function v(e,t,r,n,s){var i=new Uint8Array(32);b(i,n,s,_);for(var a=new Uint8Array(8),o=0;o<8;o++)a[o]=n[o+16];return w(e,t,r,a,i)}function S(e,t,r,n,s,i,a){var o=new Uint8Array(32);b(o,i,a,_);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=i[u+16];return T(e,t,r,n,s,c,o)}var k=function(e){var t,r,n,s,i,a,o,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),s=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|s<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(s>>>4|i<<12),this.r[5]=i>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|a<<2),o=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|o<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(o>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function A(e,t,r,n,s,i){var a=new k(i);return a.update(r,n,s),a.finish(e,t),0}function P(e,t,r,n,s,i){var a=new Uint8Array(16);return A(a,0,r,n,s,i),g(e,t,a,0)}function M(e,t,r,n,s){var i;if(r<32)return-1;for(S(e,0,t,0,r,n,s),A(e,16,e,32,r-32,e),i=0;i<16;i++)e[i]=0;return 0}function x(e,t,r,n,s){var i,a=new Uint8Array(32);if(r<32)return-1;if(v(a,0,32,n,s),0!==P(t,16,t,32,r-32,a))return-1;for(S(e,0,t,0,r,n,s),i=0;i<32;i++)e[i]=0;return 0}function I(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function R(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function O(e,t,r){for(var n,s=~(r-1),i=0;i<16;i++)n=s&(e[i]^t[i]),e[i]^=n,t[i]^=n}function C(e,t){var n,s,i,a=r(),o=r();for(n=0;n<16;n++)o[n]=t[n];for(R(o),R(o),R(o),s=0;s<2;s++){for(a[0]=o[0]-65517,n=1;n<15;n++)a[n]=o[n]-65535-(a[n-1]>>16&1),a[n-1]&=65535;a[15]=o[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,O(o,a,1-i)}for(n=0;n<16;n++)e[2*n]=255&o[n],e[2*n+1]=o[n]>>8}function N(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return C(r,e),C(n,t),y(r,0,n,0)}function j(e){var t=new Uint8Array(32);return C(t,e),1&t[0]}function L(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function D(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function F(e,t,r){var n,s,i=0,a=0,o=0,c=0,u=0,d=0,l=0,h=0,p=0,f=0,m=0,g=0,y=0,E=0,b=0,_=0,T=0,w=0,v=0,S=0,k=0,A=0,P=0,M=0,x=0,I=0,R=0,O=0,C=0,N=0,j=0,L=r[0],U=r[1],D=r[2],F=r[3],B=r[4],G=r[5],z=r[6],q=r[7],H=r[8],$=r[9],V=r[10],K=r[11],Q=r[12],W=r[13],Y=r[14],J=r[15];i+=(n=t[0])*L,a+=n*U,o+=n*D,c+=n*F,u+=n*B,d+=n*G,l+=n*z,h+=n*q,p+=n*H,f+=n*$,m+=n*V,g+=n*K,y+=n*Q,E+=n*W,b+=n*Y,_+=n*J,a+=(n=t[1])*L,o+=n*U,c+=n*D,u+=n*F,d+=n*B,l+=n*G,h+=n*z,p+=n*q,f+=n*H,m+=n*$,g+=n*V,y+=n*K,E+=n*Q,b+=n*W,_+=n*Y,T+=n*J,o+=(n=t[2])*L,c+=n*U,u+=n*D,d+=n*F,l+=n*B,h+=n*G,p+=n*z,f+=n*q,m+=n*H,g+=n*$,y+=n*V,E+=n*K,b+=n*Q,_+=n*W,T+=n*Y,w+=n*J,c+=(n=t[3])*L,u+=n*U,d+=n*D,l+=n*F,h+=n*B,p+=n*G,f+=n*z,m+=n*q,g+=n*H,y+=n*$,E+=n*V,b+=n*K,_+=n*Q,T+=n*W,w+=n*Y,v+=n*J,u+=(n=t[4])*L,d+=n*U,l+=n*D,h+=n*F,p+=n*B,f+=n*G,m+=n*z,g+=n*q,y+=n*H,E+=n*$,b+=n*V,_+=n*K,T+=n*Q,w+=n*W,v+=n*Y,S+=n*J,d+=(n=t[5])*L,l+=n*U,h+=n*D,p+=n*F,f+=n*B,m+=n*G,g+=n*z,y+=n*q,E+=n*H,b+=n*$,_+=n*V,T+=n*K,w+=n*Q,v+=n*W,S+=n*Y,k+=n*J,l+=(n=t[6])*L,h+=n*U,p+=n*D,f+=n*F,m+=n*B,g+=n*G,y+=n*z,E+=n*q,b+=n*H,_+=n*$,T+=n*V,w+=n*K,v+=n*Q,S+=n*W,k+=n*Y,A+=n*J,h+=(n=t[7])*L,p+=n*U,f+=n*D,m+=n*F,g+=n*B,y+=n*G,E+=n*z,b+=n*q,_+=n*H,T+=n*$,w+=n*V,v+=n*K,S+=n*Q,k+=n*W,A+=n*Y,P+=n*J,p+=(n=t[8])*L,f+=n*U,m+=n*D,g+=n*F,y+=n*B,E+=n*G,b+=n*z,_+=n*q,T+=n*H,w+=n*$,v+=n*V,S+=n*K,k+=n*Q,A+=n*W,P+=n*Y,M+=n*J,f+=(n=t[9])*L,m+=n*U,g+=n*D,y+=n*F,E+=n*B,b+=n*G,_+=n*z,T+=n*q,w+=n*H,v+=n*$,S+=n*V,k+=n*K,A+=n*Q,P+=n*W,M+=n*Y,x+=n*J,m+=(n=t[10])*L,g+=n*U,y+=n*D,E+=n*F,b+=n*B,_+=n*G,T+=n*z,w+=n*q,v+=n*H,S+=n*$,k+=n*V,A+=n*K,P+=n*Q,M+=n*W,x+=n*Y,I+=n*J,g+=(n=t[11])*L,y+=n*U,E+=n*D,b+=n*F,_+=n*B,T+=n*G,w+=n*z,v+=n*q,S+=n*H,k+=n*$,A+=n*V,P+=n*K,M+=n*Q,x+=n*W,I+=n*Y,R+=n*J,y+=(n=t[12])*L,E+=n*U,b+=n*D,_+=n*F,T+=n*B,w+=n*G,v+=n*z,S+=n*q,k+=n*H,A+=n*$,P+=n*V,M+=n*K,x+=n*Q,I+=n*W,R+=n*Y,O+=n*J,E+=(n=t[13])*L,b+=n*U,_+=n*D,T+=n*F,w+=n*B,v+=n*G,S+=n*z,k+=n*q,A+=n*H,P+=n*$,M+=n*V,x+=n*K,I+=n*Q,R+=n*W,O+=n*Y,C+=n*J,b+=(n=t[14])*L,_+=n*U,T+=n*D,w+=n*F,v+=n*B,S+=n*G,k+=n*z,A+=n*q,P+=n*H,M+=n*$,x+=n*V,I+=n*K,R+=n*Q,O+=n*W,C+=n*Y,N+=n*J,_+=(n=t[15])*L,a+=38*(w+=n*D),o+=38*(v+=n*F),c+=38*(S+=n*B),u+=38*(k+=n*G),d+=38*(A+=n*z),l+=38*(P+=n*q),h+=38*(M+=n*H),p+=38*(x+=n*$),f+=38*(I+=n*V),m+=38*(R+=n*K),g+=38*(O+=n*Q),y+=38*(C+=n*W),E+=38*(N+=n*Y),b+=38*(j+=n*J),i=(n=(i+=38*(T+=n*U))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),E=(n=E+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),_=(n=_+s+65535)-65536*(s=Math.floor(n/65536)),i=(n=(i+=s-1+37*(s-1))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),E=(n=E+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),_=(n=_+s+65535)-65536*(s=Math.floor(n/65536)),i+=s-1+37*(s-1),e[0]=i,e[1]=a,e[2]=o,e[3]=c,e[4]=u,e[5]=d,e[6]=l,e[7]=h,e[8]=p,e[9]=f,e[10]=m,e[11]=g,e[12]=y,e[13]=E,e[14]=b,e[15]=_}function B(e,t){F(e,t,t)}function G(e,t){var n,s=r();for(n=0;n<16;n++)s[n]=t[n];for(n=253;n>=0;n--)B(s,s),2!==n&&4!==n&&F(s,s,t);for(n=0;n<16;n++)e[n]=s[n]}function z(e,t){var n,s=r();for(n=0;n<16;n++)s[n]=t[n];for(n=250;n>=0;n--)B(s,s),1!==n&&F(s,s,t);for(n=0;n<16;n++)e[n]=s[n]}function q(e,t,n){var s,i,a=new Uint8Array(32),o=new Float64Array(80),u=r(),d=r(),l=r(),h=r(),p=r(),f=r();for(i=0;i<31;i++)a[i]=t[i];for(a[31]=127&t[31]|64,a[0]&=248,L(o,n),i=0;i<16;i++)d[i]=o[i],h[i]=u[i]=l[i]=0;for(u[0]=h[0]=1,i=254;i>=0;--i)O(u,d,s=a[i>>>3]>>>(7&i)&1),O(l,h,s),U(p,u,l),D(u,u,l),U(l,d,h),D(d,d,h),B(h,p),B(f,u),F(u,l,u),F(l,d,p),U(p,u,l),D(u,u,l),B(d,u),D(l,h,f),F(u,l,c),U(u,u,h),F(l,l,u),F(u,h,f),F(h,d,o),B(d,p),O(u,d,s),O(l,h,s);for(i=0;i<16;i++)o[i+16]=u[i],o[i+32]=l[i],o[i+48]=d[i],o[i+64]=h[i];var m=o.subarray(32),g=o.subarray(16);return G(m,m),F(g,g,m),C(e,g),0}function H(e,t){return q(e,t,i)}function $(e,t){return n(t,32),H(e,t)}function V(e,t,r){var n=new Uint8Array(32);return q(n,r,t),b(e,s,n,_)}k.prototype.blocks=function(e,t,r){for(var n,s,i,a,o,c,u,d,l,h,p,f,m,g,y,E,b,_,T,w=this.fin?0:2048,v=this.h[0],S=this.h[1],k=this.h[2],A=this.h[3],P=this.h[4],M=this.h[5],x=this.h[6],I=this.h[7],R=this.h[8],O=this.h[9],C=this.r[0],N=this.r[1],j=this.r[2],L=this.r[3],U=this.r[4],D=this.r[5],F=this.r[6],B=this.r[7],G=this.r[8],z=this.r[9];r>=16;)h=l=0,h+=(v+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*C,h+=(S+=8191&(n>>>13|(s=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*z),h+=(k+=8191&(s>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*G),h+=(A+=8191&(i>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*B),l=(h+=(P+=8191&(a>>>4|(o=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*F))>>>13,h&=8191,h+=(M+=o>>>1&8191)*(5*D),h+=(x+=8191&(o>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*U),h+=(I+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*L),h+=(R+=8191&(u>>>8|(d=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*j),p=l+=(h+=(O+=d>>>5|w)*(5*N))>>>13,p+=v*N,p+=S*C,p+=k*(5*z),p+=A*(5*G),l=(p+=P*(5*B))>>>13,p&=8191,p+=M*(5*F),p+=x*(5*D),p+=I*(5*U),p+=R*(5*L),l+=(p+=O*(5*j))>>>13,p&=8191,f=l,f+=v*j,f+=S*N,f+=k*C,f+=A*(5*z),l=(f+=P*(5*G))>>>13,f&=8191,f+=M*(5*B),f+=x*(5*F),f+=I*(5*D),f+=R*(5*U),m=l+=(f+=O*(5*L))>>>13,m+=v*L,m+=S*j,m+=k*N,m+=A*C,l=(m+=P*(5*z))>>>13,m&=8191,m+=M*(5*G),m+=x*(5*B),m+=I*(5*F),m+=R*(5*D),g=l+=(m+=O*(5*U))>>>13,g+=v*U,g+=S*L,g+=k*j,g+=A*N,l=(g+=P*C)>>>13,g&=8191,g+=M*(5*z),g+=x*(5*G),g+=I*(5*B),g+=R*(5*F),y=l+=(g+=O*(5*D))>>>13,y+=v*D,y+=S*U,y+=k*L,y+=A*j,l=(y+=P*N)>>>13,y&=8191,y+=M*C,y+=x*(5*z),y+=I*(5*G),y+=R*(5*B),E=l+=(y+=O*(5*F))>>>13,E+=v*F,E+=S*D,E+=k*U,E+=A*L,l=(E+=P*j)>>>13,E&=8191,E+=M*N,E+=x*C,E+=I*(5*z),E+=R*(5*G),b=l+=(E+=O*(5*B))>>>13,b+=v*B,b+=S*F,b+=k*D,b+=A*U,l=(b+=P*L)>>>13,b&=8191,b+=M*j,b+=x*N,b+=I*C,b+=R*(5*z),_=l+=(b+=O*(5*G))>>>13,_+=v*G,_+=S*B,_+=k*F,_+=A*D,l=(_+=P*U)>>>13,_&=8191,_+=M*L,_+=x*j,_+=I*N,_+=R*C,T=l+=(_+=O*(5*z))>>>13,T+=v*z,T+=S*G,T+=k*B,T+=A*F,l=(T+=P*D)>>>13,T&=8191,T+=M*U,T+=x*L,T+=I*j,T+=R*N,v=h=8191&(l=(l=((l+=(T+=O*C)>>>13)<<2)+l|0)+(h&=8191)|0),S=p+=l>>>=13,k=f&=8191,A=m&=8191,P=g&=8191,M=y&=8191,x=E&=8191,I=b&=8191,R=_&=8191,O=T&=8191,t+=16,r-=16;this.h[0]=v,this.h[1]=S,this.h[2]=k,this.h[3]=A,this.h[4]=P,this.h[5]=M,this.h[6]=x,this.h[7]=I,this.h[8]=R,this.h[9]=O},k.prototype.finish=function(e,t){var r,n,s,i,a=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,a[0]=this.h[0]+5,r=a[0]>>>13,a[0]&=8191,i=1;i<10;i++)a[i]=this.h[i]+r,r=a[i]>>>13,a[i]&=8191;for(a[9]-=8192,n=(1^r)-1,i=0;i<10;i++)a[i]&=n;for(n=~n,i=0;i<10;i++)this.h[i]=this.h[i]&n|a[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),s=this.h[0]+this.pad[0],this.h[0]=65535&s,i=1;i<8;i++)s=(this.h[i]+this.pad[i]|0)+(s>>>16)|0,this.h[i]=65535&s;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},k.prototype.update=function(e,t,r){var n,s;if(this.leftover){for((s=16-this.leftover)>r&&(s=r),n=0;n<s;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=s,t+=s,this.leftover+=s,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(s=r-r%16,this.blocks(e,t,s),t+=s,r-=s),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var K=M,Q=x;var W=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Y(e,t,r,n){for(var s,i,a,o,c,u,d,l,h,p,f,m,g,y,E,b,_,T,w,v,S,k,A,P,M,x,I=new Int32Array(16),R=new Int32Array(16),O=e[0],C=e[1],N=e[2],j=e[3],L=e[4],U=e[5],D=e[6],F=e[7],B=t[0],G=t[1],z=t[2],q=t[3],H=t[4],$=t[5],V=t[6],K=t[7],Q=0;n>=128;){for(w=0;w<16;w++)v=8*w+Q,I[w]=r[v+0]<<24|r[v+1]<<16|r[v+2]<<8|r[v+3],R[w]=r[v+4]<<24|r[v+5]<<16|r[v+6]<<8|r[v+7];for(w=0;w<80;w++)if(s=O,i=C,a=N,o=j,c=L,u=U,d=D,F,h=B,p=G,f=z,m=q,g=H,y=$,E=V,K,A=65535&(k=K),P=k>>>16,M=65535&(S=F),x=S>>>16,A+=65535&(k=(H>>>14|L<<18)^(H>>>18|L<<14)^(L>>>9|H<<23)),P+=k>>>16,M+=65535&(S=(L>>>14|H<<18)^(L>>>18|H<<14)^(H>>>9|L<<23)),x+=S>>>16,A+=65535&(k=H&$^~H&V),P+=k>>>16,M+=65535&(S=L&U^~L&D),x+=S>>>16,A+=65535&(k=W[2*w+1]),P+=k>>>16,M+=65535&(S=W[2*w]),x+=S>>>16,S=I[w%16],P+=(k=R[w%16])>>>16,M+=65535&S,x+=S>>>16,M+=(P+=(A+=65535&k)>>>16)>>>16,A=65535&(k=T=65535&A|P<<16),P=k>>>16,M=65535&(S=_=65535&M|(x+=M>>>16)<<16),x=S>>>16,A+=65535&(k=(B>>>28|O<<4)^(O>>>2|B<<30)^(O>>>7|B<<25)),P+=k>>>16,M+=65535&(S=(O>>>28|B<<4)^(B>>>2|O<<30)^(B>>>7|O<<25)),x+=S>>>16,P+=(k=B&G^B&z^G&z)>>>16,M+=65535&(S=O&C^O&N^C&N),x+=S>>>16,l=65535&(M+=(P+=(A+=65535&k)>>>16)>>>16)|(x+=M>>>16)<<16,b=65535&A|P<<16,A=65535&(k=m),P=k>>>16,M=65535&(S=o),x=S>>>16,P+=(k=T)>>>16,M+=65535&(S=_),x+=S>>>16,C=s,N=i,j=a,L=o=65535&(M+=(P+=(A+=65535&k)>>>16)>>>16)|(x+=M>>>16)<<16,U=c,D=u,F=d,O=l,G=h,z=p,q=f,H=m=65535&A|P<<16,$=g,V=y,K=E,B=b,w%16==15)for(v=0;v<16;v++)S=I[v],A=65535&(k=R[v]),P=k>>>16,M=65535&S,x=S>>>16,S=I[(v+9)%16],A+=65535&(k=R[(v+9)%16]),P+=k>>>16,M+=65535&S,x+=S>>>16,_=I[(v+1)%16],A+=65535&(k=((T=R[(v+1)%16])>>>1|_<<31)^(T>>>8|_<<24)^(T>>>7|_<<25)),P+=k>>>16,M+=65535&(S=(_>>>1|T<<31)^(_>>>8|T<<24)^_>>>7),x+=S>>>16,_=I[(v+14)%16],P+=(k=((T=R[(v+14)%16])>>>19|_<<13)^(_>>>29|T<<3)^(T>>>6|_<<26))>>>16,M+=65535&(S=(_>>>19|T<<13)^(T>>>29|_<<3)^_>>>6),x+=S>>>16,x+=(M+=(P+=(A+=65535&k)>>>16)>>>16)>>>16,I[v]=65535&M|x<<16,R[v]=65535&A|P<<16;A=65535&(k=B),P=k>>>16,M=65535&(S=O),x=S>>>16,S=e[0],P+=(k=t[0])>>>16,M+=65535&S,x+=S>>>16,x+=(M+=(P+=(A+=65535&k)>>>16)>>>16)>>>16,e[0]=O=65535&M|x<<16,t[0]=B=65535&A|P<<16,A=65535&(k=G),P=k>>>16,M=65535&(S=C),x=S>>>16,S=e[1],P+=(k=t[1])>>>16,M+=65535&S,x+=S>>>16,x+=(M+=(P+=(A+=65535&k)>>>16)>>>16)>>>16,e[1]=C=65535&M|x<<16,t[1]=G=65535&A|P<<16,A=65535&(k=z),P=k>>>16,M=65535&(S=N),x=S>>>16,S=e[2],P+=(k=t[2])>>>16,M+=65535&S,x+=S>>>16,x+=(M+=(P+=(A+=65535&k)>>>16)>>>16)>>>16,e[2]=N=65535&M|x<<16,t[2]=z=65535&A|P<<16,A=65535&(k=q),P=k>>>16,M=65535&(S=j),x=S>>>16,S=e[3],P+=(k=t[3])>>>16,M+=65535&S,x+=S>>>16,x+=(M+=(P+=(A+=65535&k)>>>16)>>>16)>>>16,e[3]=j=65535&M|x<<16,t[3]=q=65535&A|P<<16,A=65535&(k=H),P=k>>>16,M=65535&(S=L),x=S>>>16,S=e[4],P+=(k=t[4])>>>16,M+=65535&S,x+=S>>>16,x+=(M+=(P+=(A+=65535&k)>>>16)>>>16)>>>16,e[4]=L=65535&M|x<<16,t[4]=H=65535&A|P<<16,A=65535&(k=$),P=k>>>16,M=65535&(S=U),x=S>>>16,S=e[5],P+=(k=t[5])>>>16,M+=65535&S,x+=S>>>16,x+=(M+=(P+=(A+=65535&k)>>>16)>>>16)>>>16,e[5]=U=65535&M|x<<16,t[5]=$=65535&A|P<<16,A=65535&(k=V),P=k>>>16,M=65535&(S=D),x=S>>>16,S=e[6],P+=(k=t[6])>>>16,M+=65535&S,x+=S>>>16,x+=(M+=(P+=(A+=65535&k)>>>16)>>>16)>>>16,e[6]=D=65535&M|x<<16,t[6]=V=65535&A|P<<16,A=65535&(k=K),P=k>>>16,M=65535&(S=F),x=S>>>16,S=e[7],P+=(k=t[7])>>>16,M+=65535&S,x+=S>>>16,x+=(M+=(P+=(A+=65535&k)>>>16)>>>16)>>>16,e[7]=F=65535&M|x<<16,t[7]=K=65535&A|P<<16,Q+=128,n-=128}return n}function J(e,t,r){var n,s=new Int32Array(8),i=new Int32Array(8),a=new Uint8Array(256),o=r;for(s[0]=1779033703,s[1]=3144134277,s[2]=1013904242,s[3]=2773480762,s[4]=1359893119,s[5]=2600822924,s[6]=528734635,s[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,Y(s,i,t,r),r%=128,n=0;n<r;n++)a[n]=t[o-r+n];for(a[r]=128,a[(r=256-128*(r<112?1:0))-9]=0,f(a,r-8,o/536870912|0,o<<3),Y(s,i,a,r),n=0;n<8;n++)f(e,8*n,s[n],i[n]);return 0}function Z(e,t){var n=r(),s=r(),i=r(),a=r(),o=r(),c=r(),u=r(),l=r(),h=r();D(n,e[1],e[0]),D(h,t[1],t[0]),F(n,n,h),U(s,e[0],e[1]),U(h,t[0],t[1]),F(s,s,h),F(i,e[3],t[3]),F(i,i,d),F(a,e[2],t[2]),U(a,a,a),D(o,s,n),D(c,a,i),U(u,a,i),U(l,s,n),F(e[0],o,c),F(e[1],l,u),F(e[2],u,c),F(e[3],o,l)}function X(e,t,r){var n;for(n=0;n<4;n++)O(e[n],t[n],r)}function ee(e,t){var n=r(),s=r(),i=r();G(i,t[2]),F(n,t[0],i),F(s,t[1],i),C(e,s),e[31]^=j(n)<<7}function te(e,t,r){var n,s;for(I(e[0],a),I(e[1],o),I(e[2],o),I(e[3],a),s=255;s>=0;--s)X(e,t,n=r[s/8|0]>>(7&s)&1),Z(t,e),Z(e,e),X(e,t,n)}function re(e,t){var n=[r(),r(),r(),r()];I(n[0],l),I(n[1],h),I(n[2],o),F(n[3],l,h),te(e,n,t)}function ne(e,t,s){var i,a=new Uint8Array(64),o=[r(),r(),r(),r()];for(s||n(t,32),J(a,t,32),a[0]&=248,a[31]&=127,a[31]|=64,re(o,a),ee(e,o),i=0;i<32;i++)t[i+32]=e[i];return 0}var se=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,s,i;for(n=63;n>=32;--n){for(r=0,s=n-32,i=n-12;s<i;++s)t[s]+=r-16*t[n]*se[s-(n-32)],r=Math.floor((t[s]+128)/256),t[s]-=256*r;t[s]+=r,t[n]=0}for(r=0,s=0;s<32;s++)t[s]+=r-(t[31]>>4)*se[s],r=t[s]>>8,t[s]&=255;for(s=0;s<32;s++)t[s]-=r*se[s];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function ae(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function oe(e,t,n,s){var i,a,o=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),d=new Float64Array(64),l=[r(),r(),r(),r()];J(o,s,32),o[0]&=248,o[31]&=127,o[31]|=64;var h=n+64;for(i=0;i<n;i++)e[64+i]=t[i];for(i=0;i<32;i++)e[32+i]=o[32+i];for(J(u,e.subarray(32),n+32),ae(u),re(l,u),ee(e,l),i=32;i<64;i++)e[i]=s[i];for(J(c,e,n+64),ae(c),i=0;i<64;i++)d[i]=0;for(i=0;i<32;i++)d[i]=u[i];for(i=0;i<32;i++)for(a=0;a<32;a++)d[i+a]+=c[i]*o[a];return ie(e.subarray(32),d),h}function ce(e,t,n,s){var i,c=new Uint8Array(32),d=new Uint8Array(64),l=[r(),r(),r(),r()],h=[r(),r(),r(),r()];if(n<64)return-1;if(function(e,t){var n=r(),s=r(),i=r(),c=r(),d=r(),l=r(),h=r();return I(e[2],o),L(e[1],t),B(i,e[1]),F(c,i,u),D(i,i,e[2]),U(c,e[2],c),B(d,c),B(l,d),F(h,l,d),F(n,h,i),F(n,n,c),z(n,n),F(n,n,i),F(n,n,c),F(n,n,c),F(e[0],n,c),B(s,e[0]),F(s,s,c),N(s,i)&&F(e[0],e[0],p),B(s,e[0]),F(s,s,c),N(s,i)?-1:(j(e[0])===t[31]>>7&&D(e[0],a,e[0]),F(e[3],e[0],e[1]),0)}(h,s))return-1;for(i=0;i<n;i++)e[i]=t[i];for(i=0;i<32;i++)e[i+32]=s[i];if(J(d,e,n),ae(d),te(l,h,d),re(h,t.subarray(32)),Z(l,h),ee(c,l),n-=64,y(t,0,c,0)){for(i=0;i<n;i++)e[i]=0;return-1}for(i=0;i<n;i++)e[i]=t[i+64];return n}var ue=16,de=64,le=32,he=64;function pe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function fe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function me(e){for(var t=0;t<e.length;t++)e[t]=0}t.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:S,crypto_stream:v,crypto_stream_salsa20_xor:T,crypto_stream_salsa20:w,crypto_onetimeauth:A,crypto_onetimeauth_verify:P,crypto_verify_16:g,crypto_verify_32:y,crypto_secretbox:M,crypto_secretbox_open:x,crypto_scalarmult:q,crypto_scalarmult_base:H,crypto_box_beforenm:V,crypto_box_afternm:K,crypto_box:function(e,t,r,n,s,i){var a=new Uint8Array(32);return V(a,s,i),K(e,t,r,n,a)},crypto_box_open:function(e,t,r,n,s,i){var a=new Uint8Array(32);return V(a,s,i),Q(e,t,r,n,a)},crypto_box_keypair:$,crypto_hash:J,crypto_sign:oe,crypto_sign_keypair:ne,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ue,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:de,crypto_sign_PUBLICKEYBYTES:le,crypto_sign_SECRETKEYBYTES:he,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:r,D:u,L:se,pack25519:C,unpack25519:L,M:F,A:U,S:B,Z:D,pow2523:z,add:Z,set25519:I,modL:ie,scalarmult:te,scalarbase:re},t.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},t.secretbox=function(e,t,r){fe(e,t,r),pe(r,t);for(var n=new Uint8Array(32+e.length),s=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+32]=e[i];return M(s,n,n.length,t,r),s.subarray(ue)},t.secretbox.open=function(e,t,r){fe(e,t,r),pe(r,t);for(var n=new Uint8Array(ue+e.length),s=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+ue]=e[i];return n.length<32||0!==x(s,n,n.length,t,r)?null:s.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=ue,t.scalarMult=function(e,t){if(fe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return q(r,e,t),r},t.scalarMult.base=function(e){if(fe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return H(t,e),t},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox(e,r,i)},t.box.before=function(e,t){fe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return V(r,e,t),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox.open(e,r,i)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return $(e,t),{publicKey:e,secretKey:t}},t.box.keyPair.fromSecretKey=function(e){if(fe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return H(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(e,t){if(fe(e,t),t.length!==he)throw new Error("bad secret key size");var r=new Uint8Array(de+e.length);return oe(r,e,e.length,t),r},t.sign.open=function(e,t){if(fe(e,t),t.length!==le)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var s=new Uint8Array(n),i=0;i<s.length;i++)s[i]=r[i];return s},t.sign.detached=function(e,r){for(var n=t.sign(e,r),s=new Uint8Array(de),i=0;i<s.length;i++)s[i]=n[i];return s},t.sign.detached.verify=function(e,t,r){if(fe(e,t,r),t.length!==de)throw new Error("bad signature size");if(r.length!==le)throw new Error("bad public key size");var n,s=new Uint8Array(de+e.length),i=new Uint8Array(de+e.length);for(n=0;n<de;n++)s[n]=t[n];for(n=0;n<e.length;n++)s[n+de]=e[n];return ce(i,s,s.length,r)>=0},t.sign.keyPair=function(){var e=new Uint8Array(le),t=new Uint8Array(he);return ne(e,t),{publicKey:e,secretKey:t}},t.sign.keyPair.fromSecretKey=function(e){if(fe(e),e.length!==he)throw new Error("bad secret key size");for(var t=new Uint8Array(le),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},t.sign.keyPair.fromSeed=function(e){if(fe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(le),r=new Uint8Array(he),n=0;n<32;n++)r[n]=e[n];return ne(t,r,!0),{publicKey:t,secretKey:r}},t.sign.publicKeyLength=le,t.sign.secretKeyLength=he,t.sign.seedLength=32,t.sign.signatureLength=de,t.hash=function(e){fe(e);var t=new Uint8Array(64);return J(t,e,e.length),t},t.hash.hashLength=64,t.verify=function(e,t){return fe(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===m(e,0,t,0,e.length))},t.setPRNG=function(e){n=e},function(){var r="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(r&&r.getRandomValues){t.setPRNG((function(e,t){var n,s=new Uint8Array(t);for(n=0;n<t;n+=65536)r.getRandomValues(s.subarray(n,n+Math.min(t-n,65536)));for(n=0;n<t;n++)e[n]=s[n];me(s)}))}else void 0!==e&&(r=e("crypto"))&&r.randomBytes&&t.setPRNG((function(e,t){var n,s=r.randomBytes(t);for(n=0;n<t;n++)e[n]=s[n];me(s)}))}()}(void 0!==t&&t.exports?t.exports:self.nacl=self.nacl||{})}}},{package:"eth-sig-util>tweetnacl",file:"node_modules/tweetnacl/nacl-fast.js"}],[3147,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/concat.js"}],[3148,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/equals.js"}],[3149,{multibase:2761},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encoding:n}=e("multibase"),s=new TextEncoder;t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?s.encode(e):"ascii"===t?function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e):n(t).decode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/from-string.js"}],[3150,{multibase:2761},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encoding:n}=e("multibase"),s=new TextDecoder("utf8");t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?s.decode(e):"ascii"===t?function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e):n(t).encode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/to-string.js"}],[3184,{util:1795},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,r.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"@ensdomains/content-hash>multihashes>web-encoding",file:"node_modules/web-encoding/src/lib.js"}],[32,{"../../../../shared/constants/transaction":3223,"./tx-state-manager":34,"ethjs-query":2079,loglevel:2749,"safe-event-emitter":3015},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(e("safe-event-emitter")),s=c(e("loglevel")),i=c(e("ethjs-query")),a=e("../../../../shared/constants/transaction"),o=e("./tx-state-manager");function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends n.default{constructor(e){super(),u(this,"DROPPED_BUFFER_COUNT",3),u(this,"droppedBlocksBufferByHash",new Map),this.query=e.query||new i.default(e.provider),this.nonceTracker=e.nonceTracker,this.getPendingTransactions=e.getPendingTransactions,this.getCompletedTransactions=e.getCompletedTransactions,this.publishTransaction=e.publishTransaction,this.approveTransaction=e.approveTransaction,this.confirmTransaction=e.confirmTransaction}async updatePendingTxs(){const e=await this.nonceTracker.getGlobalLock();try{const e=this.getPendingTransactions();await Promise.all(e.map((e=>this._checkPendingTx(e))))}catch(e){s.default.error("PendingTransactionTracker - Error updating pending transactions"),s.default.error(e)}e.releaseLock()}async resubmitPendingTxs(e){const t=this.getPendingTransactions();if(t.length)for(const s of t)try{await this._resubmitTx(s,e)}catch(e){var r,n;const t=(null===(r=e.value)||void 0===r||null===(n=r.message)||void 0===n?void 0:n.toLowerCase())||e.message.toLowerCase();if(t.includes("replacement transaction underpriced")||t.includes("known transaction")||t.includes("gas price too low to replace")||t.includes("transaction with the same hash was already imported")||t.includes("gateway timeout")||t.includes("nonce too low"))return;s.warning={error:t,message:o.ERROR_SUBMITTING},this.emit("tx:warning",s,e)}}async _resubmitTx(e,t){e.firstRetryBlockNumber||this.emit("tx:block-update",e,t);const r=e.firstRetryBlockNumber||t,n=Number.parseInt(t,16)-Number.parseInt(r,16),s=e.retryCount||0;if(n<Math.min(50,Math.pow(2,s)))return undefined;if(!("rawTx"in e))return this.approveTransaction(e.id);const{rawTx:i}=e,a=await this.publishTransaction(i);return this.emit("tx:retry",e),a}async _checkPendingTx(e){const t=e.hash,r=e.id;if(e.status===a.TransactionStatus.submitted){if(!t){const e=new Error("We had an error while submitting this transaction, please try again.");return e.name="NoTxHashError",void this.emit("tx:failed",r,e)}if(await this._checkIfNonceIsTaken(e))this.emit("tx:dropped",r);else{try{const e=await this.query.getTransactionReceipt(t);if(null!=e&&e.blockNumber){const{baseFeePerGas:t,timestamp:n}=await this.query.getBlockByHash(null==e?void 0:e.blockHash,!1);return void this.emit("tx:confirmed",r,e,t,n)}}catch(t){return e.warning={error:t.message,message:"There was a problem loading this transaction."},void this.emit("tx:warning",e,t)}await this._checkIfTxWasDropped(e)&&this.emit("tx:dropped",r)}}}async _checkIfTxWasDropped(e){const{hash:t,txParams:{nonce:r,from:n}}=e,s=await this.query.getTransactionCount(n);if(parseInt(r,16)>=s.toNumber())return!1;this.droppedBlocksBufferByHash.has(t)||this.droppedBlocksBufferByHash.set(t,0);const i=this.droppedBlocksBufferByHash.get(t);return i<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByHash.set(t,i+1),!1):(this.droppedBlocksBufferByHash.delete(t),!0)}async _checkIfNonceIsTaken(e){const t=e.txParams.from;return this.getCompletedTransactions(t).some((t=>!(t.id===e.id)&&t.txParams.nonce===e.txParams.nonce))}}r.default=d}}},{package:"$root$",file:"app/scripts/controllers/transactions/pending-tx-tracker.js"}],[3207,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM=r.AUTO_LOCK_TIMEOUT_ALARM=void 0;r.AUTO_LOCK_TIMEOUT_ALARM="AUTO_LOCK_TIMEOUT_ALARM";r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM="METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM"}}},{package:"$root$",file:"shared/constants/alarms.js"}],[3219,{"./time":3221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=void 0;const n=10*e("./time").SECOND;r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=n;r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=180;r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=2}}},{package:"$root$",file:"shared/constants/smartTransactions.js"}],[33,{"../../../../shared/modules/conversion.utils":3237,"../../lib/util":85,"ethereumjs-util":2044,"ethjs-query":2079,lodash:2737,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(e("ethjs-query")),s=u(e("loglevel")),i=e("ethereumjs-util"),a=e("lodash"),o=e("../../lib/util"),c=e("../../../../shared/modules/conversion.utils");function u(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(e){this.query=new n.default(e)}async analyzeGasUsage(e){const t=await this.query.getBlockByNumber("latest",!1),r=(0,o.hexToBn)(t.gasLimit),n=(0,o.BnMultiplyByFraction)(r,19,20);let i,a=(0,c.bnToHex)(n);try{a=await this.estimateTxGas(e)}catch(e){s.default.warn(e),i={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:t.number,blockGasLimit:t.gasLimit}}}return{blockGasLimit:t.gasLimit,estimatedGasHex:a,simulationFails:i}}async estimateTxGas(e){const t=(0,a.cloneDeep)(e.txParams);return delete t.gasPrice,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,await this.query.estimateGas(t)}addGasBuffer(e,t,r=1.5){const n=(0,o.hexToBn)(e),s=(0,o.hexToBn)(t).muln(.9),i=n.muln(r);return n.gt(s)?(0,c.bnToHex)(n):i.lt(s)?(0,c.bnToHex)(i):(0,c.bnToHex)(s)}async getBufferedGasLimit(e,t){const{blockGasLimit:r,estimatedGasHex:n,simulationFails:s}=await this.analyzeGasUsage(e);return{gasLimit:this.addGasBuffer((0,i.addHexPrefix)(n),r,t),simulationFails:s}}}}}},{package:"$root$",file:"app/scripts/controllers/transactions/tx-gas-utils.js"}],[34,{"../../../../shared/constants/app":3209,"../../../../shared/constants/transaction":3223,"../../../../shared/modules/random-id":3245,"../../../../shared/modules/transaction.utils":3250,"../../metamask-controller":86,"./lib/tx-state-history-helpers":30,"./lib/util":31,"@metamask/obs-store":1156,lodash:2737,loglevel:2749,"safe-event-emitter":3015},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ERROR_SUBMITTING=void 0;var n=f(e("safe-event-emitter")),s=e("@metamask/obs-store"),i=f(e("loglevel")),a=e("lodash"),o=f(e("../../../../shared/modules/random-id")),c=e("../../../../shared/constants/transaction"),u=e("../../metamask-controller"),d=e("../../../../shared/modules/transaction.utils"),l=e("../../../../shared/constants/app"),h=e("./lib/tx-state-history-helpers"),p=e("./lib/util");function f(e){return e&&e.__esModule?e:{default:e}}const m="There was an error when resubmitting this transaction.";r.ERROR_SUBMITTING=m;class g extends n.default{constructor({initState:e,txHistoryLimit:t,getNetworkState:r,getCurrentChainId:n}){super(),this.store=new s.ObservableStore({transactions:{},...e}),this.txHistoryLimit=t,this.getNetworkState=r,this.getCurrentChainId=n}generateTxMeta(e={}){var t;const r=this.getNetworkState(),n=this.getCurrentChainId();if("loading"===r)throw new Error("MetaMask is having trouble connecting to the network");let s=null;return e.txParams&&"string"==typeof e.origin&&e.origin!==l.ORIGIN_METAMASK&&(void 0!==e.txParams.gasPrice?s={gasPrice:e.txParams.gasPrice}:void 0===e.txParams.maxFeePerGas&&void 0===e.txParams.maxPriorityFeePerGas||(s={maxPriorityFeePerGas:e.txParams.maxPriorityFeePerGas,maxFeePerGas:e.txParams.maxFeePerGas}),void 0!==e.txParams.gas&&(s={...s,gas:e.txParams.gas})),{id:(0,o.default)(),time:(new Date).getTime(),status:c.TransactionStatus.unapproved,metamaskNetworkId:r,originalGasEstimate:null===(t=e.txParams)||void 0===t?void 0:t.gas,userEditedGasLimit:!1,chainId:n,loadingDefaults:!0,dappSuggestedGasFees:s,sendFlowHistory:[],...e}}getUnapprovedTxList(){const e=this.getCurrentChainId(),t=this.getNetworkState();return(0,a.pickBy)(this.store.getState().transactions,(r=>r.status===c.TransactionStatus.unapproved&&(0,d.transactionMatchesNetwork)(r,e,t)))}getApprovedTransactions(e){const t={status:c.TransactionStatus.approved};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getPendingTransactions(e){const t={status:c.TransactionStatus.submitted};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getConfirmedTransactions(e){const t={status:c.TransactionStatus.confirmed};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getTransactionWithActionId(e){return(0,a.values)((0,a.pickBy)(this.store.getState().transactions,(t=>t.actionId===e)))[0]}addTransaction(e){e.txParams&&(e.txParams=(0,p.normalizeAndValidateTxParams)(e.txParams,!1)),this.once(`${e.id}:signed`,(()=>{this.removeAllListeners(`${e.id}:rejected`)})),this.once(`${e.id}:rejected`,(()=>{this.removeAllListeners(`${e.id}:signed`)})),e.history=[];const t=(0,h.snapshotFromTxMeta)(e);e.history.push(t);const r=this.getTransactions({filterToCurrentNetwork:!1}),{txHistoryLimit:n}=this,s=new Set,i=r.reverse().filter((e=>{const{nonce:t,from:r}=e.txParams,{chainId:i,metamaskNetworkId:a,status:o}=e,c=`${t}-${i??a}-${r}`;return!s.has(c)&&(!(s.size<n-1||!1===(0,p.getFinalStates)().includes(o))||(s.add(c),!1))})).map((e=>e.id));return this._deleteTransactions(i),this._addTransactionsToState([e]),e}addExternalTransaction(e){var t;const r=null==e||null===(t=e.txParams)||void 0===t?void 0:t.from,n=this.getConfirmedTransactions(r),s=this.getPendingTransactions(r);return(0,p.validateConfirmedExternalTransaction)({txMeta:e,pendingTransactions:s,confirmedTransactions:n}),this._addTransactionsToState([e]),e}getTransaction(e){const{transactions:t}=this.store.getState();return t[e]}updateTransaction(e,t){if(e.txParams)try{e.txParams=(0,p.normalizeAndValidateTxParams)(e.txParams,!1)}catch(t){if(e.warning.message!==m)throw t;return void this.setTxStatusFailed(e.id,t)}this._updateTransactionHistory(e,t)}_updateTransactionHistory(e,t){const r=(0,h.snapshotFromTxMeta)(e),n=(0,h.replayHistory)(e.history),s=(0,h.generateHistoryEntry)(n,r,t);s.length&&e.history.push(s);const i=e.id;this.store.updateState({transactions:{...this.store.getState().transactions,[i]:e}})}getTransactions({searchCriteria:e={},initialList:t,filterToCurrentNetwork:r=!0,limit:n}={}){const s=this.getCurrentChainId(),i=this.getNetworkState(),o=(0,a.mapValues)(e,(e=>"function"==typeof e?e:t=>t===e)),c=t?(0,a.keyBy)(t,"id"):this.store.getState().transactions,u=(0,a.sortBy)((0,a.pickBy)(c,(e=>{if(r&&!1===(0,d.transactionMatchesNetwork)(e,s,i))return!1;for(const[t,r]of Object.entries(o))if(t in e.txParams){if(!1===r(e.txParams[t]))return!1}else if(!1===r(e[t]))return!1;return!0})),"time");if(n!==undefined){const e=new Set,t=[];for(let r=u.length-1;r>-1;r--){const s=u[r],{nonce:i}=s.txParams;if(!e.has(i)){if(!(e.size<n))continue;e.add(i)}t.unshift(s)}return t}return u}setTxStatusRejected(e){this._setTransactionStatus(e,c.TransactionStatus.rejected),this._deleteTransaction(e)}setTxStatusUnapproved(e){this._setTransactionStatus(e,c.TransactionStatus.unapproved)}setTxStatusApproved(e){this._setTransactionStatus(e,c.TransactionStatus.approved)}setTxStatusSigned(e){this._setTransactionStatus(e,c.TransactionStatus.signed)}setTxStatusSubmitted(e){const t=this.getTransaction(e);t.submittedTime=(new Date).getTime(),this.updateTransaction(t,"txStateManager - add submitted time stamp"),this._setTransactionStatus(e,c.TransactionStatus.submitted)}setTxStatusConfirmed(e){this._setTransactionStatus(e,c.TransactionStatus.confirmed)}setTxStatusDropped(e){this._setTransactionStatus(e,c.TransactionStatus.dropped)}setTxStatusFailed(e,t){var r;const n=t||new Error("Internal metamask failure"),s=this.getTransaction(e);s.err={message:(null===(r=n.message)||void 0===r?void 0:r.toString())||n.toString(),rpc:n.value,stack:n.stack},this._updateTransactionHistory(s,"transactions:tx-state-manager#fail - add error"),this._setTransactionStatus(e,c.TransactionStatus.failed)}wipeTransactions(e){const{transactions:t}=this.store.getState(),r=this.getNetworkState(),n=this.getCurrentChainId();this.store.updateState({transactions:(0,a.omitBy)(t,(t=>t.txParams.from===e&&(0,d.transactionMatchesNetwork)(t,n,r)))})}clearUnapprovedTxs(){this.store.updateState({transactions:(0,a.omitBy)(this.store.getState().transactions,(e=>e.status===c.TransactionStatus.unapproved))})}_setTransactionStatus(e,t){const r=this.getTransaction(e);if(r){r.status=t;try{this._updateTransactionHistory(r,`txStateManager: setting status to ${t}`),this.emit(`${r.id}:${t}`,e),this.emit("tx:status-update",e,t),[c.TransactionStatus.submitted,c.TransactionStatus.rejected,c.TransactionStatus.failed].includes(t)&&this.emit(`${r.id}:finished`,r),this.emit(u.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}catch(e){i.default.error(e)}}}_addTransactionsToState(e){this.store.updateState({transactions:e.reduce(((e,t)=>(e[t.id]=t,e)),this.store.getState().transactions)})}_deleteTransaction(e){const{transactions:t}=this.store.getState();delete t[e],this.store.updateState({transactions:t})}_deleteTransactions(e){const{transactions:t}=this.store.getState();e.forEach((e=>{delete t[e]})),this.store.updateState({transactions:t})}}r.default=g}}},{package:"$root$",file:"app/scripts/controllers/transactions/tx-state-manager.js"}],[35,{"../../shared/constants/app":3209,"./lib/util":85,"webextension-polyfill":3193},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.onMessageReceived=r.checkForMultipleVersionsRunning=void 0;var n,s=(n=e("webextension-polyfill"))&&n.__esModule?n:{default:n},i=e("../../shared/constants/app"),a=e("./lib/util");const o="isRunning";r.onMessageReceived=e=>{e===o&&console.warn("Warning! You have multiple instances of MetaMask running!")};r.checkForMultipleVersionsRunning=async()=>{if((0,a.getPlatform)()!==i.PLATFORM_CHROME&&(0,a.getPlatform)()!==i.PLATFORM_FIREFOX)return;const e=(0,a.getPlatform)()===i.PLATFORM_CHROME?i.CHROME_BUILD_IDS:i.FIREFOX_BUILD_IDS,t=s.default.runtime.id;for(const r of e)if(r!==t)try{await s.default.runtime.sendMessage(r,o)}catch(e){}}}}},{package:"$root$",file:"app/scripts/detect-multiple-instances.js"}],[36,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={config:{}};r.default=n}}},{package:"$root$",file:"app/scripts/first-time-state.js"}],[37,{"@metamask/base-controller":993,"@metamask/obs-store":1156},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("@metamask/base-controller");function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.ObservableStore{constructor({config:e,controllerMessenger:t,state:r,persist:n}){super(r),i(this,"config",{}),this.persist=n,this.controllerMessenger=t,e&&this.updateStructure(e)}updateStructure(e){this.config=e,this.removeAllListeners();for(const t of Object.keys(e)){if(!e[t])throw new Error(`Undefined '${t}'`);const r=e[t];r.subscribe?e[t].subscribe((e=>{this.updateState({[t]:e})})):this.controllerMessenger.subscribe(`${r.name}:stateChange`,(r=>{let n=r;this.persist&&(n=(0,s.getPersistentState)(r,e[t].metadata)),this.updateState({[t]:n})}))}}getFlatState(){if(!this.config)return{};let e={};for(const t of Object.keys(this.config)){const r=this.config[t],n=r.getState?r.getState():r.state;e={...e,...n}}return e}}r.default=a}}},{package:"$root$",file:"app/scripts/lib/ComposableObservableStore.js"}],[38,{"../../../shared/constants/network":3216,"../constants/contracts":5,"./util":85,"@ethersproject/contracts":372,"@ethersproject/providers":411,"@metamask/obs-store":1156,"eth-query":1996,loglevel:2749,pify:2829,"single-call-balance-checker-abi":3083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=p(e("eth-query")),s=e("@metamask/obs-store"),i=p(e("loglevel")),a=p(e("pify")),o=e("@ethersproject/providers"),c=e("@ethersproject/contracts"),u=p(e("single-call-balance-checker-abi")),d=e("../../../shared/constants/network"),l=e("../constants/contracts"),h=e("./util");function p(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(e={}){const t={accounts:{},currentBlockGasLimit:""};this.store=new s.ObservableStore(t),this.resetState=()=>{this.store.updateState(t)},this._provider=e.provider,this._query=(0,a.default)(new n.default(this._provider)),this._blockTracker=e.blockTracker,this._currentBlockNumber=this._blockTracker.getCurrentBlock(),this._blockTracker.once("latest",(e=>{this._currentBlockNumber=e})),this._updateForBlock=this._updateForBlock.bind(this),this.getCurrentChainId=e.getCurrentChainId,this.getNetworkIdentifier=e.getNetworkIdentifier,this.preferencesController=e.preferencesController,this.onboardingController=e.onboardingController,this.onboardingController.store.subscribe((0,h.previousValueComparator)((async(e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n}=t;!r&&n&&this._updateAccounts()}),this.onboardingController.store.getState())),this.preferencesController.store.subscribe((0,h.previousValueComparator)((async(e,t)=>{const{selectedAddress:r}=e,{selectedAddress:n,useMultiAccountBalanceChecker:s}=t;r===n||s||this._updateAccounts()}),this.onboardingController.store.getState())),this.ethersProvider=new o.Web3Provider(this._provider)}start(){this._blockTracker.removeListener("latest",this._updateForBlock),this._blockTracker.addListener("latest",this._updateForBlock),this._updateAccounts()}stop(){this._blockTracker.removeListener("latest",this._updateForBlock)}syncWithAddresses(e){const{accounts:t}=this.store.getState(),r=Object.keys(t),n=[];e.forEach((e=>{r.includes(e)||n.push(e)}));const s=[];r.forEach((t=>{e.includes(t)||s.push(t)})),this.addAccounts(n),this.removeAccount(s)}addAccounts(e){const{accounts:t}=this.store.getState();e.forEach((e=>{t[e]={}})),this.store.updateState({accounts:t}),this._currentBlockNumber&&this._updateAccounts()}removeAccount(e){const{accounts:t}=this.store.getState();e.forEach((e=>{delete t[e]})),this.store.updateState({accounts:t})}clearAccounts(){this.store.updateState({accounts:{}})}async _updateForBlock(e){this._currentBlockNumber=e;const t=await this._query.getBlockByNumber(e,!1);if(!t)return;const r=t.gasLimit;this.store.updateState({currentBlockGasLimit:r});try{await this._updateAccounts()}catch(e){i.default.error(e)}}async _updateAccounts(){const{completedOnboarding:e}=this.onboardingController.store.getState();if(!e)return;const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();let r=[];if(t){const{accounts:e}=this.store.getState();r=Object.keys(e)}else{r=[this.preferencesController.getSelectedAddress()]}const n=this.getCurrentChainId(),s=this.getNetworkIdentifier();if(s===d.LOCALHOST_RPC_URL||"http://127.0.0.1:8545"===s)await Promise.all(r.map(this._updateAccount.bind(this)));else switch(n){case d.CHAIN_IDS.MAINNET:await this._updateAccountsViaBalanceChecker(r,l.SINGLE_CALL_BALANCES_ADDRESS);break;case d.CHAIN_IDS.GOERLI:await this._updateAccountsViaBalanceChecker(r,l.SINGLE_CALL_BALANCES_ADDRESS_GOERLI);break;case d.CHAIN_IDS.SEPOLIA:await this._updateAccountsViaBalanceChecker(r,l.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA);break;case d.CHAIN_IDS.BSC:await this._updateAccountsViaBalanceChecker(r,l.SINGLE_CALL_BALANCES_ADDRESS_BSC);break;case d.CHAIN_IDS.OPTIMISM:await this._updateAccountsViaBalanceChecker(r,l.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM);break;case d.CHAIN_IDS.POLYGON:await this._updateAccountsViaBalanceChecker(r,l.SINGLE_CALL_BALANCES_ADDRESS_POLYGON);break;case d.CHAIN_IDS.AVALANCHE:await this._updateAccountsViaBalanceChecker(r,l.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE);break;case d.CHAIN_IDS.FANTOM:await this._updateAccountsViaBalanceChecker(r,l.SINGLE_CALL_BALANCES_ADDRESS_FANTOM);break;case d.CHAIN_IDS.ARBITRUM:await this._updateAccountsViaBalanceChecker(r,l.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM);break;default:await Promise.all(r.map(this._updateAccount.bind(this)))}}async _updateAccount(e){const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();let r="0x0";try{r=await this._query.getBalance(e)}catch(e){var n,s;if("eth_getBalance"!==(null===(n=e.data)||void 0===n||null===(s=n.request)||void 0===s?void 0:s.method))throw e}const i={address:e,balance:r},{accounts:a}=this.store.getState();if(!a[e])return;let o=a;t||(o={},Object.keys(a).forEach((t=>{e!==t&&(o[t]={address:t,balance:null})}))),o[e]=i,this.store.updateState({accounts:o})}async _updateAccountsViaBalanceChecker(e,t){const{accounts:r}=this.store.getState(),n={};Object.keys(r).forEach((t=>{e.includes(t)||(n[t]={address:t,balance:null})})),this.ethersProvider=new o.Web3Provider(this._provider);const s=await new c.Contract(t,u.default,this.ethersProvider),a=["0x0000000000000000000000000000000000000000"];try{const t=await s.balances(e,a);e.forEach(((e,r)=>{const s=t[r]?t[r].toHexString():"0x0";n[e]={address:e,balance:s}})),this.store.updateState({accounts:n})}catch(t){i.default.warn("MetaMask - Account Tracker single call balance fetch failed",t),Promise.all(e.map(this._updateAccount.bind(this)))}}}}}},{package:"$root$",file:"app/scripts/lib/account-tracker.js"}],[39,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){let{name:t}=e;t=t===undefined?"Error":String(t);let r=e.message;r=r===undefined?"":String(r),""===t?e.stack=e.message:""===r?e.stack=e.name:e.stack||(e.stack=`${e.name}: ${e.message}`);return e}}}},{package:"$root$",file:"app/scripts/lib/cleanErrorStack.js"}],[40,{loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){const e=[];return function(t,r,n,i){return e.indexOf(t.id)>=0?(s.default.info(`RPC request with id ${t.id} already seen.`),i()):(e.push(t.id),n())}};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createDupeReqFilterMiddleware.js"}],[41,{loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){n((n=>{r.error&&s.default.error("Error in RPC response:\n",r),t.isMetamaskInternal||(s.default.info(`RPC (${e.origin}):`,t,"->",r),n())}))}};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createLoggerMiddleware.js"}],[42,{"../../../shared/modules/mv3.utils":3242,"eth-rpc-errors":2e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../shared/modules/mv3.utils");var i=(e,t,r,i)=>async a=>{if(t._writableState.ended)return;if(!e[a.method])return void t.write({jsonrpc:"2.0",error:n.ethErrors.rpc.methodNotFound({message:`${a.method} not found`}),id:a.id});let o,c;try{o=await e[a.method](...a.params)}catch(e){c=e}finally{s.isManifestV3&&r&&"getState"!==a.method&&i.set(r.getState())}t._writableState.ended?c&&console.error(c):c?t.write({jsonrpc:"2.0",error:(0,n.serializeError)(c,{shouldIncludeStack:!0}),id:a.id}):t.write({jsonrpc:"2.0",result:o,id:a.id})};r.default=i}}},{package:"$root$",file:"app/scripts/lib/createMetaRPCHandler.js"}],[43,{"./middleware/pending":61,"@metamask/eth-json-rpc-middleware":1040,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({version:e,getAccounts:t,processTransaction:r,processEthSignMessage:a,processTypedMessage:o,processTypedMessageV3:c,processTypedMessageV4:u,processPersonalMessage:d,processDecryptMessage:l,processEncryptionPublicKey:h,getPendingNonce:p,getPendingTransactionByHash:f}){return(0,n.mergeMiddleware)([(0,n.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,s.createWalletMiddleware)({getAccounts:t,processTransaction:r,processEthSignMessage:a,processTypedMessage:o,processTypedMessageV3:c,processTypedMessageV4:u,processPersonalMessage:d,processDecryptMessage:l,processEncryptionPublicKey:h}),(0,i.createPendingNonceMiddleware)({getPendingNonce:p}),(0,i.createPendingTxMiddleware)({getPendingTransactionByHash:f})])};var n=e("json-rpc-engine"),s=e("@metamask/eth-json-rpc-middleware"),i=e("./middleware/pending")}}},{package:"$root$",file:"app/scripts/lib/createMetamaskMiddleware.js"}],[44,{loglevel:2749,"webextension-polyfill":3193},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({location:e,registerOnboarding:t}){return async function(r,i,a,o){try{if("wallet_registerOnboarding"!==r.method)return void a();r.tabId&&r.tabId!==s.default.tabs.TAB_ID_NONE?await t(e,r.tabId):n.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),i.result=!0,o()}catch(e){o(e)}}};var n=i(e("loglevel")),s=i(e("webextension-polyfill"));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[45,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.origin=e.origin,n()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[46,{"../../../shared/constants/app":3209,"../../../shared/constants/metametrics":3215,"../../../shared/constants/time":3221,"../../../shared/modules/siwe":3247,"eth-rpc-errors":2e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({trackEvent:e,getMetricsState:t,rateLimitSeconds:r=300,securityProviderRequest:d}){return async function(f,m,g){const{origin:y,method:E}=f,b=l[E]??c,_=b===c&&void 0!==p[E],T=!0===t().participateInMetaMetrics,w=h[E],v=y!==s.ORIGIN_METAMASK&&b!==u&&!1===_&&!0===T;if(v){const t=w?w.REQUESTED:o.EVENT_NAMES.PROVIDER_METHOD_CALLED,n={};let c;if(t===o.EVENT_NAMES.SIGNATURE_REQUESTED){var S,k,A;n.signature_type=E;const e=null==f||null===(S=f.params)||void 0===S?void 0:S[0],t=null==f||null===(k=f.params)||void 0===k?void 0:k[1];c={...null==f||null===(A=f.params)||void 0===A?void 0:A[2],from:t,data:e,origin:y};const r={msgParams:c,status:"unapproved",type:f.method};try{const t=await d(r,f.method);if(1===(null==t?void 0:t.flagAsDangerous)?n.ui_customizations=["flagged_as_malicious"]:2===(null==t?void 0:t.flagAsDangerous)?n.ui_customizations=["flagged_as_safety_unknown"]:n.ui_customizations=null,E===s.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,a.detectSIWE)({data:e});t&&(null===n.ui_customizations?n.ui_customizations=[o.METAMETRIC_KEY_OPTIONS[o.METAMETRIC_KEY.UI_CUSTOMIZATIONS].SIWE]:n.ui_customizations.push(o.METAMETRIC_KEY_OPTIONS[o.METAMETRIC_KEY.UI_CUSTOMIZATIONS].SIWE))}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Error calling securityProviderRequest - ${e}`)}}else n.method=E;e({event:t,category:o.EVENT.CATEGORIES.INPAGE_PROVIDER,referrer:{url:y},properties:n}),p[E]=setTimeout((()=>{delete p[E]}),i.SECOND*r)}g((async t=>{var r,i;if(!1===v||void 0===w)return t();const c={};let u,l;if(E===s.MESSAGE_TYPE.ETH_SIGN&&(null===(r=m.error)||void 0===r?void 0:r.code)===n.errorCodes.rpc.methodNotFound?(u=w.FAILED,c.error=m.error):u=4001===(null===(i=m.error)||void 0===i?void 0:i.code)?w.REJECTED:w.APPROVED,w.REQUESTED===o.EVENT_NAMES.SIGNATURE_REQUESTED){var h,p,g;c.signature_type=E;const e=null==f||null===(h=f.params)||void 0===h?void 0:h[0],t=null==f||null===(p=f.params)||void 0===p?void 0:p[1];l={...null==f||null===(g=f.params)||void 0===g?void 0:g[2],from:t,data:e,origin:y};const r={msgParams:l,status:"unapproved",type:f.method};try{const t=await d(r,f.method);if(1===(null==t?void 0:t.flagAsDangerous)?c.ui_customizations=["flagged_as_malicious"]:2===(null==t?void 0:t.flagAsDangerous)?c.ui_customizations=["flagged_as_safety_unknown"]:c.ui_customizations=null,E===s.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,a.detectSIWE)({data:e});t&&(null===c.ui_customizations?c.ui_customizations=[o.METAMETRIC_KEY_OPTIONS[o.METAMETRIC_KEY.UI_CUSTOMIZATIONS].SIWE]:c.ui_customizations.push(o.METAMETRIC_KEY_OPTIONS[o.METAMETRIC_KEY.UI_CUSTOMIZATIONS].SIWE))}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Error calling securityProviderRequest - ${e}`)}}else c.method=E;return e({event:u,category:o.EVENT.CATEGORIES.INPAGE_PROVIDER,referrer:{url:y},properties:c}),t()}))}};var n=e("eth-rpc-errors"),s=e("../../../shared/constants/app"),i=e("../../../shared/constants/time"),a=e("../../../shared/modules/siwe"),o=e("../../../shared/constants/metametrics");const c="rate_limited",u="blocked",d="non_rate_limited",l={[s.MESSAGE_TYPE.ETH_SIGN]:d,[s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:d,[s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:d,[s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:d,[s.MESSAGE_TYPE.PERSONAL_SIGN]:d,[s.MESSAGE_TYPE.ETH_DECRYPT]:d,[s.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:d,[s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:c,[s.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:c,[s.MESSAGE_TYPE.SEND_METADATA]:u,[s.MESSAGE_TYPE.GET_PROVIDER_STATE]:u},h={[s.MESSAGE_TYPE.ETH_SIGN]:{APPROVED:o.EVENT_NAMES.SIGNATURE_APPROVED,FAILED:o.EVENT_NAMES.SIGNATURE_FAILED,REJECTED:o.EVENT_NAMES.SIGNATURE_REJECTED,REQUESTED:o.EVENT_NAMES.SIGNATURE_REQUESTED},[s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:o.EVENT_NAMES.SIGNATURE_APPROVED,REJECTED:o.EVENT_NAMES.SIGNATURE_REJECTED,REQUESTED:o.EVENT_NAMES.SIGNATURE_REQUESTED},[s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:o.EVENT_NAMES.SIGNATURE_APPROVED,REJECTED:o.EVENT_NAMES.SIGNATURE_REJECTED,REQUESTED:o.EVENT_NAMES.SIGNATURE_REQUESTED},[s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:o.EVENT_NAMES.SIGNATURE_APPROVED,REJECTED:o.EVENT_NAMES.SIGNATURE_REJECTED,REQUESTED:o.EVENT_NAMES.SIGNATURE_REQUESTED},[s.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:o.EVENT_NAMES.SIGNATURE_APPROVED,REJECTED:o.EVENT_NAMES.SIGNATURE_REJECTED,REQUESTED:o.EVENT_NAMES.SIGNATURE_REQUESTED},[s.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:o.EVENT_NAMES.DECRYPTION_APPROVED,REJECTED:o.EVENT_NAMES.DECRYPTION_REJECTED,REQUESTED:o.EVENT_NAMES.DECRYPTION_REQUESTED},[s.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:o.EVENT_NAMES.ENCRYPTION_PUBLIC_KEY_APPROVED,REJECTED:o.EVENT_NAMES.ENCRYPTION_PUBLIC_KEY_REJECTED,REQUESTED:o.EVENT_NAMES.ENCRYPTION_PUBLIC_KEY_REQUESTED},[s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:o.EVENT_NAMES.PERMISSIONS_APPROVED,REJECTED:o.EVENT_NAMES.PERMISSIONS_REJECTED,REQUESTED:o.EVENT_NAMES.PERMISSIONS_REQUESTED},[s.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:o.EVENT_NAMES.PERMISSIONS_APPROVED,REJECTED:o.EVENT_NAMES.PERMISSIONS_REJECTED,REQUESTED:o.EVENT_NAMES.PERMISSIONS_REQUESTED}},p={}}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[47,{"promise-to-callback":2833,"readable-stream":2996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return new a(e,t)};var n,s=e("readable-stream"),i=(n=e("promise-to-callback"))&&n.__esModule?n:{default:n};class a extends s.Writable{constructor(e,t){super({objectMode:!0,...t}),this._asyncWriteFn=e}_write(e,t,r){(0,i.default)(this._asyncWriteFn(e,t))(r)}}}}},{package:"$root$",file:"app/scripts/lib/createStreamSink.js"}],[470,{"@ethereumjs/tx":305,"@ethereumjs/util":316,"@keystonehq/bc-ur-registry-eth":476,buffer:1789,hdkey:2488,rlp:473,uuid:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(r,"__esModule",{value:!0});var s=n(e("hdkey")),i=e("@ethereumjs/util"),a=n(e("rlp")),o=e("@ethereumjs/tx"),c=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid");const d="QR Hardware Wallet Device",l="m",h="0/*";var p,f;!function(e){e.hd="hd",e.pubkey="pubkey"}(p||(p={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(f||(f={}));class m{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type=d,this.requestSignature=async(e,t,r,n)=>{const s=await this.getInteraction().requestSignature(t,r,n),i=s.getRequestId(),a=s.getSignature();if(i){if(u.stringify(i)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId")}return{r:a.slice(0,32),s:a.slice(32,64),v:a.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n=`m/${e.getOrigin().getPath()}`,s=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),i=(null==(r=e.getChildren())?void 0:r.getPath())||h,a=e.getName();if(e.getNote()===f.standard?this.keyringAccount=f.standard:e.getNote()===f.ledger_legacy&&(this.keyringAccount=f.ledger_legacy),!s)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const o=e.getBip32Key();this.xfp=s,this.xpub=o,this.hdPath=n,this.childrenPath=i,a!==undefined&&""!==a&&(this.name=a),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let s=!1;const a=e.getOutputDescriptors();if(!a||0===a.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(a.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r=`M/${t.getOrigin().getPath()}`,n="0x"+i.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===f.ledger_live&&(this.keyringAccount=f.ledger_live),this.paths[i.toChecksumAddress(n)]===undefined&&(s=!0),this.paths[i.toChecksumAddress(n)]=r}}catch(e){throw new Error(`KeystoneError#invalid_data: ${e}`)}})),s},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(l,e);n.push({address:t,balance:null,index:e}),this.indexes[i.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(l,e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===p.hd){this.checkKeyring(),this.hdk||(this.hdk=s.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),a="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(a)}{const e=Object.keys(this.paths)[t];if(e)return i.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=p.hd,this.keyringAccount=f.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath=h,this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===c.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=p.hd,this.__readCryptoHDKey(e)):(this.keyringMode=p.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||p.hd,this.keyringAccount=e.keyringAccount||f.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||h)}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(l,e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===p.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?c.DataType.transaction:c.DataType.typedTransaction;let s;s=0===r.type?t.from(a.encode(r.getMessageToSign(!1))):r.getMessageToSign(!1);const i=await this._pathFromAddress(e),d=r.common.chainId(),l=u.v4(),h=c.EthSignRequest.constructETHRequest(s,n,i,this.xfp,l,d),{r:p,s:f,v:m}=await this.requestSignature(l,h,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return o.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:p,s:f,v:m},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=i.stripHexPrefix(r),s=await this._pathFromAddress(e),a=u.v4(),o=c.EthSignRequest.constructETHRequest(t.from(n,"hex"),c.DataType.personalMessage,s,this.xfp,a,undefined,e),{r:d,s:l,v:h}=await this.requestSignature(a,o,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([d,l,h]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),s=u.v4(),i=c.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),c.DataType.typedData,n,this.xfp,s,undefined,e),{r:a,s:o,v:d}=await this.requestSignature(s,i,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([a,o,d]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===p.hd){const t=i.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex(l,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=i.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}m.type=d,r.BaseKeyring=m}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.development.js"}],[471,{"@ethereumjs/tx":305,"@ethereumjs/util":316,"@keystonehq/bc-ur-registry-eth":476,buffer:1789,hdkey:2488,rlp:473,uuid:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(r,"__esModule",{value:!0});var s,i,a=n(e("hdkey")),o=e("@ethereumjs/util"),c=n(e("rlp")),u=e("@ethereumjs/tx"),d=e("@keystonehq/bc-ur-registry-eth"),l=e("uuid");!function(e){e.hd="hd",e.pubkey="pubkey"}(s||(s={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(i||(i={}));class h{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type="QR Hardware Wallet Device",this.requestSignature=async(e,t,r,n)=>{const s=await this.getInteraction().requestSignature(t,r,n),i=s.getRequestId(),a=s.getSignature();if(i&&l.stringify(i)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId");return{r:a.slice(0,32),s:a.slice(32,64),v:a.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n="m/"+e.getOrigin().getPath(),s=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),a=(null==(r=e.getChildren())?void 0:r.getPath())||"0/*",o=e.getName();if(e.getNote()===i.standard?this.keyringAccount=i.standard:e.getNote()===i.ledger_legacy&&(this.keyringAccount=i.ledger_legacy),!s)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const c=e.getBip32Key();this.xfp=s,this.xpub=c,this.hdPath=n,this.childrenPath=a,void 0!==o&&""!==o&&(this.name=o),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let s=!1;const a=e.getOutputDescriptors();if(!a||0===a.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(a.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r="M/"+t.getOrigin().getPath(),n="0x"+o.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===i.ledger_live&&(this.keyringAccount=i.ledger_live),void 0===this.paths[o.toChecksumAddress(n)]&&(s=!0),this.paths[o.toChecksumAddress(n)]=r}}catch(e){throw new Error("KeystoneError#invalid_data: "+e)}})),s},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e}),this.indexes[o.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===s.hd){this.checkKeyring(),this.hdk||(this.hdk=a.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),s="0x"+o.publicToAddress(n.publicKey,!0).toString("hex");return o.toChecksumAddress(s)}{const e=Object.keys(this.paths)[t];if(e)return o.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=s.hd,this.keyringAccount=i.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath="0/*",this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===d.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=s.hd,this.__readCryptoHDKey(e)):(this.keyringMode=s.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||s.hd,this.keyringAccount=e.keyringAccount||i.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||"0/*")}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===s.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?d.DataType.transaction:d.DataType.typedTransaction;let s;s=0===r.type?t.from(c.encode(r.getMessageToSign(!1))):r.getMessageToSign(!1);const i=await this._pathFromAddress(e),a=r.common.chainId(),o=l.v4(),h=d.EthSignRequest.constructETHRequest(s,n,i,this.xfp,o,a),{r:p,s:f,v:m}=await this.requestSignature(o,h,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return u.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:p,s:f,v:m},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=o.stripHexPrefix(r),s=await this._pathFromAddress(e),i=l.v4(),a=d.EthSignRequest.constructETHRequest(t.from(n,"hex"),d.DataType.personalMessage,s,this.xfp,i,void 0,e),{r:c,s:u,v:h}=await this.requestSignature(i,a,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([c,u,h]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),s=l.v4(),i=d.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),d.DataType.typedData,n,this.xfp,s,void 0,e),{r:a,s:o,v:c}=await this.requestSignature(s,i,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([a,o,c]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===s.hd){const t=o.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex("m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=o.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}h.type="QR Hardware Wallet Device",r.BaseKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.production.min.js"}],[472,{"./base-eth-keyring.cjs.development.js":470,"./base-eth-keyring.cjs.production.min.js":471},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./base-eth-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/index.js"}],[473,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(n(e[r]));const r=p(...t);return p(a(r.length,192),r)}const t=y(e);return 1===t.length&&t[0]<128?t:p(a(t.length,128),t)}function s(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return l(d(e))}function a(e,t){if(e<56)return Uint8Array.from([e+t]);const r=m(e),n=m(t+55+r.length/2);return Uint8Array.from(h(n+r))}function o(e,t=!1){if(!e||0===e.length)return Uint8Array.from([]);const r=c(y(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,a,o;const u=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(d<=183){if(t=d-127,n=128===d?Uint8Array.from([]):s(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(d<=191){if(r=d-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(s(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=s(e,r,t+r),{data:n,remainder:e.slice(t+r)}}if(d<=247){for(t=d-191,a=s(e,1,t);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.slice(t)}}{if(r=d-246,t=i(s(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=s(e,r,n);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.slice(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=o;const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function d(e){let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}function l(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=l(e.slice(n,n+2))}return t}function p(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}function f(e){return(new TextEncoder).encode(e)}function m(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?h((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):f(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?h(m(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:d,concatBytes:p,hexToBytes:h,utf8ToBytes:f};const E={encode:n,decode:o};r.default=E}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>rlp",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/rlp/dist/index.js"}],[48,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.tabId=e.tabId,n()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[49,{"../../../shared/constants/app":3209,"../../../shared/constants/metametrics":3215,"../../../shared/modules/hexstring-utils":3241,"../../../shared/modules/random-id":3245,"../metamask-controller":86,"./util":85,"@metamask/obs-store":1156,buffer:1789,"eth-rpc-errors":2e3,"ethereumjs-util":2044,events:1790,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=f(e("events")),s=e("@metamask/obs-store"),i=e("ethereumjs-util"),a=e("eth-rpc-errors"),o=f(e("loglevel")),c=e("../../../shared/constants/app"),u=e("../../../shared/constants/metametrics"),d=e("../metamask-controller"),l=f(e("../../../shared/modules/random-id")),h=e("../../../shared/modules/hexstring-utils"),p=e("./util");function f(e){return e&&e.__esModule?e:{default:e}}const m=/^[0-9A-Fa-f]+$/gu;class g extends n.default{constructor(e){super(),this.memStore=new s.ObservableStore({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}),this.resetState=()=>{this.memStore.updateState({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})},this.messages=[],this.metricsEvent=e.metricsEvent}get unapprovedDecryptMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addUnapprovedMessageAsync(e,t){return new Promise(((r,n)=>{if(!e.from)return void n(new Error("MetaMask Decryption: from field is required."));const s=this.addUnapprovedMessage(e,t);this.once(`${s}:finished`,(t=>{switch(t.status){case"decrypted":return void r(t.rawData);case"rejected":return void n(a.ethErrors.provider.userRejectedRequest("MetaMask Decryption: User denied message decryption."));case"errored":return void n(new Error("This message cannot be decrypted"));default:n(new Error(`MetaMask Decryption: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){o.default.debug(`DecryptMessageManager addUnapprovedMessage: ${JSON.stringify(e)}`),t&&(e.origin=t.origin),e.data=this.normalizeMsgData(e.data);const r=(new Date).getTime(),n=(0,l.default)(),s={id:n,msgParams:e,time:r,status:"unapproved",type:c.MESSAGE_TYPE.ETH_DECRYPT};return this.addMsg(s),this.emit("update"),n}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForDecryption(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusDecrypted(e,t){const r=this.getMsg(e);r.rawData=t,this._updateMsg(r),this._setMsgStatus(e,"decrypted")}async prepMsgForDecryption(e){return delete e.metamaskId,e}rejectMsg(e,t=undefined){t&&this.metricsEvent({event:t,category:u.EVENT.CATEGORIES.MESSAGES,properties:{action:"Decrypt Message Request"}}),this._setMsgStatus(e,"rejected")}errorMessage(e,t){const r=this.getMsg(e);r.error=t,this._updateMsg(r),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const r=this.getMsg(e);if(!r)throw new Error(`DecryptMessageManager - Message not found for id: "${e}".`);r.status=t,this._updateMsg(r),this.emit(`${e}:${t}`,r),"rejected"!==t&&"decrypted"!==t&&"errored"!==t||this.emit(`${e}:finished`,r)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedDecryptMsgs:e,unapprovedDecryptMsgCount:t}),this.emit(d.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}normalizeMsgData(e){try{const t=(0,h.stripHexPrefix)(e);if(t.match(m))return(0,p.addHexPrefix)(t)}catch(e){o.default.debug("Message was not hex encoded, interpreting as utf8.")}return(0,i.bufferToHex)(t.from(e,"utf8"))}}r.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/lib/decrypt-message-manager.js"}],[499,{"./metamask-airgapped-keyring.cjs.development.js":500,"./metamask-airgapped-keyring.cjs.production.min.js":501},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./metamask-airgapped-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/index.js"}],[5,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA=r.SINGLE_CALL_BALANCES_ADDRESS_POLYGON=r.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM=r.SINGLE_CALL_BALANCES_ADDRESS_GOERLI=r.SINGLE_CALL_BALANCES_ADDRESS_FANTOM=r.SINGLE_CALL_BALANCES_ADDRESS_BSC=r.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE=r.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM=r.SINGLE_CALL_BALANCES_ADDRESS=void 0;r.SINGLE_CALL_BALANCES_ADDRESS="0xb1f8e55c7f64d203c1400b9d8555d050f94adf39";r.SINGLE_CALL_BALANCES_ADDRESS_GOERLI="0x9788C4E93f9002a7ad8e72633b11E8d1ecd51f9b";r.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA="";r.SINGLE_CALL_BALANCES_ADDRESS_BSC="0x2352c63A83f9Fd126af8676146721Fa00924d7e4";r.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM="0xB1c568e9C3E6bdaf755A60c7418C269eb11524FC";r.SINGLE_CALL_BALANCES_ADDRESS_POLYGON="0x2352c63A83f9Fd126af8676146721Fa00924d7e4";r.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE="0xD023D153a0DFa485130ECFdE2FAA7e612EF94818";r.SINGLE_CALL_BALANCES_ADDRESS_FANTOM="0x07f697424ABe762bB808c109860c04eA488ff92B";r.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM="0x151E24A486D7258dd7C33Fb67E4bB01919B7B32c"}}},{package:"$root$",file:"app/scripts/constants/contracts.ts"}],[50,{"../../../shared/constants/app":3209,"../../../shared/constants/metametrics":3215,"../../../shared/modules/random-id":3245,"../metamask-controller":86,"@metamask/obs-store":1156,"eth-rpc-errors":2e3,events:1790,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("events")),s=e("@metamask/obs-store"),i=e("eth-rpc-errors"),a=l(e("loglevel")),o=e("../../../shared/constants/app"),c=e("../../../shared/constants/metametrics"),u=e("../metamask-controller"),d=l(e("../../../shared/modules/random-id"));function l(e){return e&&e.__esModule?e:{default:e}}class h extends n.default{constructor(e){super(),this.memStore=new s.ObservableStore({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}),this.resetState=()=>{this.memStore.updateState({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})},this.messages=[],this.metricsEvent=e.metricsEvent}get unapprovedEncryptionPublicKeyMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addUnapprovedMessageAsync(e,t){return new Promise(((r,n)=>{if(!e)return void n(new Error("MetaMask Message: address field is required."));const s=this.addUnapprovedMessage(e,t);this.once(`${s}:finished`,(t=>{switch(t.status){case"received":return void r(t.rawData);case"rejected":return void n(i.ethErrors.provider.userRejectedRequest("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){a.default.debug("EncryptionPublicKeyManager addUnapprovedMessage: address");const r=(new Date).getTime(),n=(0,d.default)(),s={id:n,msgParams:e,time:r,status:"unapproved",type:o.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY};return t&&(s.origin=t.origin),this.addMsg(s),this.emit("update"),n}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForEncryptionPublicKey(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusReceived(e,t){const r=this.getMsg(e);r.rawData=t,this._updateMsg(r),this._setMsgStatus(e,"received")}async prepMsgForEncryptionPublicKey(e){return delete e.metamaskId,e}rejectMsg(e,t=undefined){t&&this.metricsEvent({event:t,category:c.EVENT.CATEGORIES.MESSAGES,properties:{action:"Encryption public key Request"}}),this._setMsgStatus(e,"rejected")}errorMessage(e,t){const r=this.getMsg(e);r.error=t,this._updateMsg(r),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const r=this.getMsg(e);if(!r)throw new Error(`EncryptionPublicKeyManager - Message not found for id: "${e}".`);r.status=t,this._updateMsg(r),this.emit(`${e}:${t}`,r),"rejected"!==t&&"received"!==t||this.emit(`${e}:finished`,r)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedEncryptionPublicKeyMsgs:e,unapprovedEncryptionPublicKeyMsgCount:t}),this.emit(u.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}}r.default=h}}},{package:"$root$",file:"app/scripts/lib/encryption-public-key-manager.js"}],[500,{"@ethereumjs/tx":305,"@keystonehq/base-eth-keyring":472,"@keystonehq/bc-ur-registry-eth":476,"@metamask/obs-store":506,buffer:1789,events:1790,rlp:3012,uuid:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/base-eth-keyring"),i=e("events"),a=e("@metamask/obs-store"),o=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),u=e("@ethereumjs/tx"),d=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class l extends i.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(`${e}-signed`),this.removeAllListeners(`${e}-canceled`)},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=o.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=o.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((s,i)=>{const a=e.toUR(),u=e.getRequestId(),d=c.stringify(u),l={requestId:d,payload:{type:a.type,cbor:a.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:l}}),this.once(`${d}-signed`,(e=>{const r=o.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),s(r)})),this.once(`${d}-canceled`,(()=>{this.resetState(),i(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(`${e}-signed`,t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(`${t}-canceled`)}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},l.instance)return l.instance;this.memStore=new a.ObservableStore({sync:{reading:!1},sign:{},_version:1}),l.instance=this}}class h extends s.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new l,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=undefined,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const r=0===t.type?o.DataType.transaction:o.DataType.typedTransaction;let n;n=0===t.type?d.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const s=await this._pathFromAddress(e),i=t.common.chainId(),a=c.v4(),l=o.EthSignRequest.constructETHRequest(n,r,s,this.xfp,a,i,e),{r:h,s:p,v:f}=await this.requestSignature(a,l,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),m=t.toJSON();m.v=f,m.s=p,m.r=h,m.type=t.type;return u.TransactionFactory.fromTxData(m,{common:t.common})}}h.type=s.BaseKeyring.type,r.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.development.js"}],[501,{"@ethereumjs/tx":305,"@keystonehq/base-eth-keyring":472,"@keystonehq/bc-ur-registry-eth":476,"@metamask/obs-store":506,buffer:1789,events:1790,rlp:3012,uuid:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/base-eth-keyring"),i=e("events"),a=e("@metamask/obs-store"),o=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),u=e("@ethereumjs/tx"),d=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class l extends i.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(e+"-signed"),this.removeAllListeners(e+"-canceled")},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=o.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=o.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((s,i)=>{const a=e.toUR(),u=e.getRequestId(),d=c.stringify(u),l={requestId:d,payload:{type:a.type,cbor:a.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:l}}),this.once(d+"-signed",(e=>{const r=o.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),s(r)})),this.once(d+"-canceled",(()=>{this.resetState(),i(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(e+"-signed",t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(t+"-canceled")}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},l.instance)return l.instance;this.memStore=new a.ObservableStore({sync:{reading:!1},sign:{},_version:1}),l.instance=this}}class h extends s.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new l,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=void 0,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const r=0===t.type?o.DataType.transaction:o.DataType.typedTransaction;let n;n=0===t.type?d.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const s=await this._pathFromAddress(e),i=t.common.chainId(),a=c.v4(),l=o.EthSignRequest.constructETHRequest(n,r,s,this.xfp,a,i,e),{r:h,s:p,v:f}=await this.requestSignature(a,l,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),m=t.toJSON();return m.v=f,m.s=p,m.r=h,m.type=t.type,u.TransactionFactory.fromTxData(m,{common:t.common})}}h.type=s.BaseKeyring.type,r.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.production.min.js"}],[502,{"./ObservableStore":504},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[503,{"./ObservableStore":504},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/MergedStore.js"}],[504,{"@metamask/safe-event-emitter":1183},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[505,{stream:1792},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/asStream.js"}],[506,{"./ComposedStore":502,"./MergedStore":503,"./ObservableStore":504,"./asStream":505,"./transform":507},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/index.js"}],[507,{through2:508},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("through2");r.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/transform.js"}],[508,{_process:2832,"readable-stream":2996,util:1795,xtend:3197},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Transform,s=e("util").inherits,i=e("xtend");function a(e){n.call(this,e),this._destroyed=!1}function o(e,t,r){r(null,e)}function c(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=o),"function"!=typeof n&&(n=null),e(t,r,n)}}s(a,n),a.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,r){var n=new a(e);return n._transform=t,r&&(n._flush=r),n})),t.exports.ctor=c((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=i(e,t),a.call(this,this.options)}return s(n,a),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),t.exports.obj=c((function(e,t,r){var n=new a(i({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/through2/through2.js"}],[51,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}];r.default=n}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[52,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}];r.default=n}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[53,{"./contracts/registry":51,"./contracts/resolver":52,"@ensdomains/content-hash":235,"eth-ens-namehash":1969,"ethjs-contract":2075,"ethjs-query":2079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=async function({provider:e,name:t}){const r=new s.default(e),u=n.default.hash(t),l=new i.default(r),h=Number.parseInt(await r.net_version(),10),p=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(h);if(!p)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${h}"`);const f=l(o.default).at(p),m=(await f.resolver(u))[0];if(d(m))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const g=l(c.default).at(m),y=await g.supportsInterface("0xbc1c58d1"),E=await g.supportsInterface("0xd8389dc5");if(y[0]){const e=(await g.contenthash(u))[0];let t=a.default.decode(e);const r=a.default.getCodec(e);return"ipfs-ns"!==r&&"ipns-ns"!==r||(t=a.default.helpers.cidV0ToV1Base32(t)),{type:r,hash:t}}if(E[0]){const e=(await g.content(u))[0];if(d(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var n=u(e("eth-ens-namehash")),s=u(e("ethjs-query")),i=u(e("ethjs-contract")),a=u(e("@ensdomains/content-hash")),o=u(e("./contracts/registry")),c=u(e("./contracts/resolver"));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[54,{"../../../../shared/modules/fetch-with-timeout":3239,"./resolver":53,"base32-encode":1696,"base64-js":1697,"webextension-polyfill":3193},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:r}){const a=d.map((e=>`*://*.${e}/*`));return i.default.webRequest.onErrorOccurred.addListener(c,{urls:a,types:["main_frame"]}),{remove(){i.default.webRequest.onErrorOccurred.removeListener(c)}};async function c(a){const{tabId:c,url:l}=a;if(-1===c||"0x1"!==t())return;const{hostname:h,pathname:p,search:f,hash:m}=new URL(l),g=h.split("."),y=g[g.length-1];d.includes(y)&&async function({tabId:t,name:a,pathname:c,search:d,fragment:l}){const h=r();i.default.tabs.update(t,{url:"loading.html"});let p=`https://app.ens.domains/name/${a}`;try{const{type:r,hash:f}=await(0,o.default)({provider:e,name:a});if("ipfs-ns"===r||"ipns-ns"===r){const e=`https://${f}.${r.slice(0,4)}.${h}${c}${d||""}${l||""}`;try{200===(await u(e,{method:"HEAD"})).status&&(p=e)}catch(e){console.warn(e)}}else if("swarm-ns"===r)p=`https://swarm-gateways.net/bzz:/${f}${c}${d||""}${l||""}`;else if("onion"===r||"onion3"===r)p=`http://${f}.onion${c}${d||""}${l||""}`;else if("zeronet"===r)p=`http://127.0.0.1:43110/${f}${c}${d||""}${l||""}`;else if("skynet-ns"===r){const e=f.padEnd(f.length+4-f.length%4,"="),t=s.default.toByteArray(e),r={padding:!1};p=`https://${(0,n.default)(t,"RFC4648-HEX",r).toLowerCase()}.siasky.net${c}${d||""}${l||""}`}}catch(e){console.warn(e)}finally{i.default.tabs.update(t,{url:p})}}({tabId:c,name:h,pathname:p,search:f,fragment:m})}};var n=c(e("base32-encode")),s=c(e("base64-js")),i=c(e("webextension-polyfill")),a=c(e("../../../../shared/modules/fetch-with-timeout")),o=c(e("./resolver"));function c(e){return e&&e.__esModule?e:{default:e}}const u=(0,a.default)(),d=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[57,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return s((0,n.cloneDeep)(e),(e=>null===e?"null":typeof e))};var n=e("lodash");function s(e={},t){return Object.entries(e).forEach((([r,n])=>{e[r]="object"==typeof n&&null!==n?s(n,t):t(n)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[58,{"../../../shared/modules/browser-runtime.utils":3234,"@sentry/browser":1249,loglevel:2749,"webextension-polyfill":3193},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("webextension-polyfill")),s=o(e("loglevel")),i=e("@sentry/browser"),a=e("../../../shared/modules/browser-runtime.utils");function o(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(){this.isSupported=Boolean(n.default.storage.local),this.isSupported||s.default.error("Storage local API not available."),this.dataPersistenceFailing=!1}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');try{await this._set({data:e,meta:this.metadata}),this.dataPersistenceFailing&&(this.dataPersistenceFailing=!1)}catch(e){this.dataPersistenceFailing||(this.dataPersistenceFailing=!0,(0,i.captureException)(e)),s.default.error("error setting state in local store:",e)}}async get(){if(!this.isSupported)return undefined;const e=await this._get();return t=e,0===Object.keys(t).length?undefined:e;var t}_get(){const{local:e}=n.default.storage;return new Promise(((t,r)=>{e.get(null).then((e=>{const n=(0,a.checkForLastError)();n?r(n):t(e)}))}))}_set(e){const{local:t}=n.default.storage;return new Promise(((r,n)=>{t.set(e).then((()=>{const e=(0,a.checkForLastError)();e?n(e):r()}))}))}}}}},{package:"$root$",file:"app/scripts/lib/local-store.js"}],[59,{"../../../shared/constants/app":3209,"../../../shared/constants/metametrics":3215,"../../../shared/modules/random-id":3245,"../metamask-controller":86,"@metamask/obs-store":1156,buffer:1789,"eth-rpc-errors":2e3,"ethereumjs-util":2044,events:1790},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.normalizeMsgData=p;var n=l(e("events")),s=e("@metamask/obs-store"),i=e("ethereumjs-util"),a=e("eth-rpc-errors"),o=e("../../../shared/constants/app"),c=e("../metamask-controller"),u=l(e("../../../shared/modules/random-id")),d=e("../../../shared/constants/metametrics");function l(e){return e&&e.__esModule?e:{default:e}}class h extends n.default{constructor({metricsEvent:e,securityProviderRequest:t}){super(),this.memStore=new s.ObservableStore({unapprovedMsgs:{},unapprovedMsgCount:0}),this.resetState=()=>{this.memStore.updateState({unapprovedMsgs:{},unapprovedMsgCount:0})},this.messages=[],this.metricsEvent=e,this.securityProviderRequest=t}get unapprovedMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addUnapprovedMessageAsync(e,t){const r=await this.addUnapprovedMessage(e,t);return await new Promise(((t,n)=>{this.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return t(r.rawSig);case"rejected":return n(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return n(new Error(`MetaMask Message Signature: ${r.error}`));default:return n(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=p(e.data);const r=(new Date).getTime(),n=(0,u.default)(),s={id:n,msgParams:e,time:r,status:"unapproved",type:o.MESSAGE_TYPE.ETH_SIGN};this.addMsg(s);const i=await this.securityProviderRequest(s,s.type);return s.securityProviderResponse=i,this.emit("update"),n}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const r=this.getMsg(e);r.rawSig=t,this._updateMsg(r),this._setMsgStatus(e,"signed")}async prepMsgForSigning(e){return delete e.metamaskId,e}rejectMsg(e,t=undefined){if(t){const r=this.getMsg(e);this.metricsEvent({event:t,category:d.EVENT.CATEGORIES.TRANSACTIONS,properties:{action:"Sign Request",type:r.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const r=this.getMsg(e);r.error=t,this._updateMsg(r),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const r=this.getMsg(e);if(!r)throw new Error(`MessageManager - Message not found for id: "${e}".`);r.status=t,this._updateMsg(r),this.emit(`${e}:${t}`,r),"rejected"!==t&&"signed"!==t||this.emit(`${e}:finished`,r)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedMsgs:e,unapprovedMsgCount:t}),this.emit(c.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}}function p(e){return"0x"===e.slice(0,2)?e:(0,i.bufferToHex)(t.from(e,"utf8"))}r.default=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/lib/message-manager.js"}],[6,{"../../../shared/constants/alerts":3208,"@metamask/obs-store":1156},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("../../../shared/constants/alerts");const i={alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce(((e,t)=>(e[t]=!0,e)),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}};r.default=class{constructor(e={}){const{initState:t={},preferencesStore:r}=e,s={...i,alertEnabledness:{...i.alertEnabledness,...t.alertEnabledness}};this.store=new n.ObservableStore(s),this.selectedAddress=r.getState().selectedAddress,r.subscribe((({selectedAddress:e})=>{this.store.getState().unconnectedAccountAlertShownOrigins&&this.selectedAddress!==e&&(this.selectedAddress=e,this.store.updateState({unconnectedAccountAlertShownOrigins:{}}))}))}setAlertEnabledness(e,t){let{alertEnabledness:r}=this.store.getState();r={...r},r[e]=t,this.store.updateState({alertEnabledness:r})}setUnconnectedAccountAlertShown(e){let{unconnectedAccountAlertShownOrigins:t}=this.store.getState();t={...t},t[e]=!0,this.store.updateState({unconnectedAccountAlertShownOrigins:t})}getWeb3ShimUsageState(e){return this.store.getState().web3ShimUsageOrigins[e]}setWeb3ShimUsageRecorded(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.dismissed)}_setWeb3ShimUsageState(e,t){let{web3ShimUsageOrigins:r}=this.store.getState();r={...r},r[e]=t,this.store.updateState({web3ShimUsageOrigins:r})}}}}},{package:"$root$",file:"app/scripts/controllers/alert.js"}],[61,{"../util":85,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:s,params:i}=t;if("eth_getTransactionCount"!==s)return void n();const[a,o]=i;"pending"===o?r.result=await e(a):n()}))},r.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:i,params:a}=t;if("eth_getTransactionByHash"!==i)return void n();const[o]=a,c=e(o);c?r.result=(0,s.formatTxMetaForRpcResult)(c):n()}))};var n=e("json-rpc-engine"),s=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[62,{events:1790},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("events"))&&n.__esModule?n:{default:n};class i extends s.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const r=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||r&&r.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const r of t)try{const t=await r.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==r.version)throw new Error("Migrator - Migration did not update version number correctly");e=t}catch(t){const n=t.message;return t.message=`MetaMask Migration Error #${r.version}: ${n}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}r.default=i}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[63,{"../../../shared/modules/fetch-with-timeout":3239,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("loglevel"));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const a=(0,s(e("../../../shared/modules/fetch-with-timeout")).default)();r.default=class{constructor(){i(this,"isSupported",!0),this._initialized=!1,this._initializing=this._init(),this._state=undefined}async _init(){try{const e=await a("http://localhost:12345/state.json");e.ok&&(this._state=await e.json())}catch(e){n.default.debug(`Error loading network state: '${e.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this._state}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');this._initialized||await this._initializing,this._state={data:e,meta:this._metadata}}}}}},{package:"$root$",file:"app/scripts/lib/network-store.js"}],[64,{"../platforms/extension":170,"safe-event-emitter":3015},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.NOTIFICATION_MANAGER_EVENTS=void 0;var n=i(e("safe-event-emitter")),s=i(e("../platforms/extension"));function i(e){return e&&e.__esModule?e:{default:e}}const a={POPUP_CLOSED:"onPopupClosed"};r.NOTIFICATION_MANAGER_EVENTS=a;class o extends n.default{constructor(){super(),this.platform=new s.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const r=await this._getPopup(t);if(r)await this.platform.focusWindow(r.id);else{let e=0,t=0;try{const r=await this.platform.getLastFocusedWindow();t=r.top,e=r.left+(r.width-360)}catch(r){const{screenX:n,screenY:s,outerWidth:i}=window;t=Math.max(s,0),e=Math.max(n+(i-360),0)}const r=await this.platform.openWindow({url:"notification.html",type:"popup",width:360,height:620,left:e,top:t});r.left!==e&&"fullscreen"!==r.state&&await this.platform.updateWindowPosition(r.id,e,t),this._setCurrentPopupId(r.id),this._popupId=r.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(a.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}r.default=o}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[65,{"../../../shared/constants/app":3209,"../../../shared/constants/metametrics":3215,"../../../shared/modules/hexstring-utils":3241,"../../../shared/modules/random-id":3245,"../../../shared/modules/siwe":3247,"../metamask-controller":86,"./util":85,"@metamask/obs-store":1156,buffer:1789,"eth-rpc-errors":2e3,"ethereumjs-util":2044,events:1790,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=m(e("events")),s=e("@metamask/obs-store"),i=e("ethereumjs-util"),a=e("eth-rpc-errors"),o=m(e("loglevel")),c=e("../../../shared/constants/app"),u=e("../metamask-controller"),d=m(e("../../../shared/modules/random-id")),l=e("../../../shared/constants/metametrics"),h=e("../../../shared/modules/siwe"),p=e("../../../shared/modules/hexstring-utils"),f=e("./util");function m(e){return e&&e.__esModule?e:{default:e}}const g=/^[0-9A-Fa-f]+$/gu;class y extends n.default{constructor({metricsEvent:e,securityProviderRequest:t}){super(),this.memStore=new s.ObservableStore({unapprovedPersonalMsgs:{},unapprovedPersonalMsgCount:0}),this.resetState=()=>{this.memStore.updateState({unapprovedPersonalMsgs:{},unapprovedPersonalMsgCount:0})},this.messages=[],this.metricsEvent=e,this.securityProviderRequest=t}get unapprovedPersonalMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addUnapprovedMessageAsync(e,t){return new Promise(((r,n)=>{e.from?this.addUnapprovedMessage(e,t).then((t=>{this.once(`${t}:finished`,(t=>{switch(t.status){case"signed":return void r(t.rawSig);case"rejected":return void n(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return void n(new Error(`MetaMask Message Signature: ${t.error}`));default:n(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))})):n(new Error("MetaMask Message Signature: from field is required."))}))}async addUnapprovedMessage(e,t){o.default.debug(`PersonalMessageManager addUnapprovedMessage: ${JSON.stringify(e)}`),t&&(e.origin=t.origin),e.data=this.normalizeMsgData(e.data);const r=(0,h.detectSIWE)(e);e.siwe=r;const n=(new Date).getTime(),s=(0,d.default)(),i={id:s,msgParams:e,time:n,status:"unapproved",type:c.MESSAGE_TYPE.PERSONAL_SIGN};this.addMsg(i);const a=await this.securityProviderRequest(i,i.type);return i.securityProviderResponse=a,this.emit("update"),s}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const r=this.getMsg(e);r.rawSig=t,this._updateMsg(r),this._setMsgStatus(e,"signed")}async prepMsgForSigning(e){return delete e.metamaskId,e}rejectMsg(e,t=undefined){if(t){const r=this.getMsg(e);this.metricsEvent({event:t,category:l.EVENT.CATEGORIES.TRANSACTIONS,properties:{action:"Sign Request",type:r.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const r=this.getMsg(e);r.error=t,this._updateMsg(r),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const r=this.getMsg(e);if(!r)throw new Error(`PersonalMessageManager - Message not found for id: "${e}".`);r.status=t,this._updateMsg(r),this.emit(`${e}:${t}`,r),"rejected"!==t&&"signed"!==t||this.emit(`${e}:finished`,r)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedPersonalMsgs:e,unapprovedPersonalMsgCount:t}),this.emit(u.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}normalizeMsgData(e){try{const t=(0,p.stripHexPrefix)(e);if(t.match(g))return(0,f.addHexPrefix)(t)}catch(e){o.default.debug("Message was not hex encoded, interpreting as utf8.")}return(0,i.bufferToHex)(t.from(e,"utf8"))}}r.default=y}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/lib/personal-message-manager.js"}],[66,{"../../../../shared/constants/network":3216,"./handlers":70,"@metamask/permission-controller":1163,"@metamask/rpc-methods/dist/utils":1182,"eth-rpc-errors":2e3,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createMethodMiddleware=function(e){const t=l.filter((t=>!Object.hasOwnProperty.call(e,t)));if(t.length>0)throw new Error(`Missing expected hooks:\n\n${t.join("\n")}\n`);return async function(t,r,n,s){if(c.UNSUPPORTED_RPC_METHODS.has(t.method))return s(a.ethErrors.rpc.methodNotSupported());const o=d.get(t.method);if(o){const{implementation:a,hookNames:c}=o;try{return await a(t,r,n,s,(0,i.selectHooks)(e,c))}catch(e){return console.error(e),s(e)}}return n()}};var n,s=e("@metamask/permission-controller"),i=e("@metamask/rpc-methods/dist/utils"),a=e("eth-rpc-errors"),o=e("lodash"),c=e("../../../../shared/constants/network");const u=[...((n=e("./handlers"))&&n.__esModule?n:{default:n}).default,...s.permissionRpcMethods.handlers],d=u.reduce(((e,t)=>{for(const r of t.methodNames)e.set(r,t);return e}),new Map),l=Array.from(new Set((0,o.flatten)(u.map((({hookNames:e})=>Object.keys(e))))).values())}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[67,{"../../../../../shared/constants/app":3209,"../../../../../shared/constants/metametrics":3215,"../../../../../shared/modules/network.utils":3243,"eth-rpc-errors":2e3,lodash:2737,"valid-url":3174},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("eth-rpc-errors"),i=(n=e("valid-url"))&&n.__esModule?n:{default:n},a=e("lodash"),o=e("../../../../../shared/constants/app"),c=e("../../../../../shared/modules/network.utils"),u=e("../../../../../shared/constants/metametrics");var d={methodNames:[o.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,r,n,{upsertNetworkConfiguration:d,getCurrentChainId:l,getCurrentRpcUrl:h,findNetworkConfigurationBy:p,setActiveNetwork:f,requestUserApproval:m}){var g;if(null===(g=e.params)||void 0===g||!g[0]||"object"!=typeof e.params[0])return n(s.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:y}=e,{chainId:E,chainName:b=null,blockExplorerUrls:_=null,nativeCurrency:T=null,rpcUrls:w}=e.params[0],v=Object.keys((0,a.omit)(e.params[0],["chainId","chainName","blockExplorerUrls","iconUrls","rpcUrls","nativeCurrency"]));if(v.length>0)return n(s.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${v}`}));const S=e=>{try{const t=new URL(e);return"localhost"===t.hostname||"127.0.0.1"===t.hostname}catch(e){return!1}},k=Array.isArray(w)?w.find((e=>S(e)||i.default.isHttpsUri(e))):null,A=null!==_&&Array.isArray(_)?_.find((e=>S(e)||i.default.isHttpsUri(e))):null;if(!k)return n(s.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${w}`}));if(null!==_&&!A)return n(s.ethErrors.rpc.invalidParams({message:`Expected null or array with at least one valid string HTTPS URL 'blockExplorerUrl'. Received: ${_}`}));const P="string"==typeof E&&E.toLowerCase();if(!(0,c.isPrefixedFormattedHexString)(P))return n(s.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${E}`}));if(!(0,c.isSafeChainId)(parseInt(P,16)))return n(s.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${P}": numerical value greater than max safe value. Received:\n${E}`}));const M=p({chainId:P});if(M&&M.rpcUrl===k){t.result=null;const e=l(),r=h();if(e===P&&r===k)return n();try{await m({origin:y,type:o.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,requestData:{rpcUrl:M.rpcUrl,chainId:M.chainId,nickname:M.nickname,ticker:M.ticker}}),await f(M.id),t.result=null}catch(e){if(e.code!==s.errorCodes.provider.userRejectedRequest)return n(e)}return n()}if("string"!=typeof b||!b)return n(s.ethErrors.rpc.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${b}`}));const x=b.length>100?b.substring(0,100):b;if(null!==T){if("object"!=typeof T||Array.isArray(T))return n(s.ethErrors.rpc.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${T}`}));if(18!==T.decimals)return n(s.ethErrors.rpc.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${T.decimals}`}));if(!T.symbol||"string"!=typeof T.symbol)return n(s.ethErrors.rpc.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${T.symbol}`}))}const I=(null==T?void 0:T.symbol)||o.UNKNOWN_TICKER_SYMBOL;if(I!==o.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof I||I.length<2||I.length>6))return n(s.ethErrors.rpc.invalidParams({message:`Expected 2-6 character string 'nativeCurrency.symbol'. Received:\n${I}`}));if(M&&M.chainId===P&&M.ticker!==I)return n(s.ethErrors.rpc.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${I}`}));let R;try{await m({origin:y,type:o.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN,requestData:{chainId:P,rpcPrefs:{blockExplorerUrl:A},chainName:x,rpcUrl:k,ticker:I}}),R=await d({chainId:P,rpcPrefs:{blockExplorerUrl:A},nickname:x,rpcUrl:k,ticker:I},{source:u.EVENT.SOURCE.NETWORK.DAPP,referrer:y}),t.result=null}catch(e){return n(e)}try{await m({origin:y,type:o.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,requestData:{rpcUrl:k,chainId:P,nickname:x,ticker:I,networkConfigurationId:R}}),await f(R)}catch(e){if(e.code!==s.errorCodes.provider.userRejectedRequest)return n(e)}return n()},hookNames:{upsertNetworkConfiguration:!0,getCurrentChainId:!0,getCurrentRpcUrl:!0,findNetworkConfigurationBy:!0,setActiveNetwork:!0,requestUserApproval:!0}};r.default=d}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[68,{"../../../../../shared/constants/app":3209},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,r,n,{getAccounts:s}){return t.result=await s(),n()},hookNames:{getAccounts:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.js"}],[69,{"../../../../../shared/constants/app":3209},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,r,n,{getProviderState:s}){return t.result={...await s(e.origin)},n()},hookNames:{getProviderState:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.js"}],[7,{"../../../shared/constants/alarms":3207,"../../../shared/constants/app":3209,"../../../shared/constants/time":3221,"../../../shared/modules/mv3.utils":3242,"../../../ui/helpers/utils/build-types":3856,"../metamask-controller":86,"@metamask/obs-store":1156,events:1790},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("events"))&&n.__esModule?n:{default:n},i=e("@metamask/obs-store"),a=e("../metamask-controller"),o=e("../../../shared/constants/time"),c=e("../../../shared/constants/alarms"),u=e("../../../shared/modules/mv3.utils"),d=e("../../../ui/helpers/utils/build-types"),l=e("../../../shared/constants/app");class h extends s.default{constructor(e={}){const{addUnlockListener:t,isUnlocked:r,initState:n,onInactiveTimeout:s,showUnlockRequest:a,preferencesStore:o,qrHardwareStore:c}=e;super(),this.onInactiveTimeout=s||(()=>undefined),this.store=new i.ObservableStore({timeoutMinutes:0,connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,browserEnvironment:{},popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[],recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),outdatedBrowserWarningLastShown:(new Date).getTime(),nftsDetectionNoticeDismissed:!1,showTestnetMessageInDropdown:!0,showBetaHeader:(0,d.isBeta)(),trezorModel:null,currentPopupId:undefined,...n,qrHardware:{},nftsDropdownState:{},usedNetworks:{"0x1":!0,"0x5":!0,"0x539":!0}}),this.timer=null,this.isUnlocked=r,this.waitingForUnlock=[],t(this.handleUnlock.bind(this)),this._showUnlockRequest=a,o.subscribe((({preferences:e})=>{this.store.getState().timeoutMinutes!==e.autoLockTimeLimit&&this._setInactiveTimeout(e.autoLockTimeLimit)})),c.subscribe((e=>{this.store.updateState({qrHardware:e})}));const{preferences:u}=o.getState();this._setInactiveTimeout(u.autoLockTimeLimit)}getUnlockPromise(e){return new Promise((t=>{this.isUnlocked()?t():this.waitForUnlock(t,e)}))}waitForUnlock(e,t){this.waitingForUnlock.push({resolve:e}),this.emit(a.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE),t&&this._showUnlockRequest()}handleUnlock(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;)this.waitingForUnlock.shift().resolve();this.emit(a.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}}setDefaultHomeActiveTabName(e){this.store.updateState({defaultHomeActiveTabName:e})}setConnectedStatusPopoverHasBeenShown(){this.store.updateState({connectedStatusPopoverHasBeenShown:!0})}setRecoveryPhraseReminderHasBeenShown(){this.store.updateState({recoveryPhraseReminderHasBeenShown:!0})}setRecoveryPhraseReminderLastShown(e){this.store.updateState({recoveryPhraseReminderLastShown:e})}setOutdatedBrowserWarningLastShown(e){this.store.updateState({outdatedBrowserWarningLastShown:e})}setLastActiveTime(){this._resetTimer()}_setInactiveTimeout(e){this.store.updateState({timeoutMinutes:e}),this._resetTimer()}_resetTimer(){const{timeoutMinutes:e}=this.store.getState();this.timer?clearTimeout(this.timer):u.isManifestV3&&chrome.alarms.clear(c.AUTO_LOCK_TIMEOUT_ALARM),e&&(u.isManifestV3?(chrome.alarms.create(c.AUTO_LOCK_TIMEOUT_ALARM,{delayInMinutes:e,periodInMinutes:e}),chrome.alarms.onAlarm.addListener((e=>{e.name===c.AUTO_LOCK_TIMEOUT_ALARM&&(this.onInactiveTimeout(),chrome.alarms.clear(c.AUTO_LOCK_TIMEOUT_ALARM))}))):this.timer=setTimeout((()=>this.onInactiveTimeout()),e*o.MINUTE))}setBrowserEnvironment(e,t){this.store.updateState({browserEnvironment:{os:e,browser:t}})}addPollingToken(e,t){if(t!==l.POLLING_TOKEN_ENVIRONMENT_TYPES[l.ENVIRONMENT_TYPE_BACKGROUND]){const r=this.store.getState()[t];this.store.updateState({[t]:[...r,e]})}}removePollingToken(e,t){if(t!==l.POLLING_TOKEN_ENVIRONMENT_TYPES[l.ENVIRONMENT_TYPE_BACKGROUND]){const r=this.store.getState()[t];this.store.updateState({[t]:r.filter((t=>t!==e))})}}clearPollingTokens(){this.store.updateState({popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[]})}setShowTestnetMessageInDropdown(e){this.store.updateState({showTestnetMessageInDropdown:e})}setShowBetaHeader(e){this.store.updateState({showBetaHeader:e})}setTrezorModel(e){this.store.updateState({trezorModel:e})}updateNftDropDownState(e){this.store.updateState({nftsDropdownState:e})}setFirstTimeUsedNetwork(e){const t=this.store.getState(),{usedNetworks:r}=t;r[e]=!0,this.store.updateState({usedNetworks:r})}setCurrentPopupId(e){this.store.updateState({currentPopupId:e})}getCurrentPopupId(){return this.store.getState().currentPopupId}}r.default=h}}},{package:"$root$",file:"app/scripts/controllers/app-state.js"}],[70,{"./add-ethereum-chain":67,"./eth-accounts":68,"./get-provider-state":69,"./log-web3-shim-usage":71,"./request-accounts":72,"./send-metadata":73,"./switch-ethereum-chain":74,"./watch-asset":75},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("./add-ethereum-chain")),s=l(e("./eth-accounts")),i=l(e("./get-provider-state")),a=l(e("./log-web3-shim-usage")),o=l(e("./request-accounts")),c=l(e("./send-metadata")),u=l(e("./switch-ethereum-chain")),d=l(e("./watch-asset"));function l(e){return e&&e.__esModule?e:{default:e}}var h=[n.default,s.default,i.default,a.default,o.default,c.default,u.default,d.default];r.default=h}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/index.js"}],[71,{"../../../../../shared/constants/app":3209,"../../../../../shared/constants/metametrics":3215},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../../../shared/constants/app"),s=e("../../../../../shared/constants/metametrics");var i={methodNames:[n.MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,r,n,{sendMetrics:i,getWeb3ShimUsageState:a,setWeb3ShimUsageRecorded:o}){const{origin:c}=e;a(c)===undefined&&(o(c),i({event:"Website Accessed window.web3 Shim",category:s.EVENT.CATEGORIES.INPAGE_PROVIDER,referrer:{url:c}},{excludeMetaMetricsId:!0}));return t.result=!0,n()},hookNames:{sendMetrics:!0,getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};r.default=i}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.js"}],[72,{"../../../../../shared/constants/app":3209,"eth-rpc-errors":2e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../../../shared/constants/app");var i={methodNames:[s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS],implementation:async function(e,t,r,i,{origin:o,getAccounts:c,getUnlockPromise:u,hasPermission:d,requestAccountsPermission:l}){if(a.has(o))return t.error=n.ethErrors.rpc.resourceUnavailable(`Already processing ${s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS}. Please wait.`),i();if(d(s.MESSAGE_TYPE.ETH_ACCOUNTS)){try{a.add(o),await u(!0),t.result=await c(),i()}catch(e){i(e)}finally{a.delete(o)}return undefined}try{await l()}catch(e){return t.error=e,i()}const h=await c();h.length>0?t.result=h:t.error=n.ethErrors.rpc.internal("Accounts unexpectedly unavailable. Please report this bug.");return i()},hookNames:{origin:!0,getAccounts:!0,getUnlockPromise:!0,hasPermission:!0,requestAccountsPermission:!0}};r.default=i;const a=new Set}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/request-accounts.js"}],[73,{"../../../../../shared/constants/app":3209,"eth-rpc-errors":2e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors");var s={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.SEND_METADATA],implementation:function(e,t,r,s,{addSubjectMetadata:i,subjectType:a}){const{origin:o,params:c}=e;if(!c||"object"!=typeof c||Array.isArray(c))return s(n.ethErrors.rpc.invalidParams({data:c}));{const{icon:e=null,name:t=null,...r}=c;i({...r,iconUrl:e,name:t,subjectType:a,origin:o})}return t.result=!0,s()},hookNames:{addSubjectMetadata:!0,subjectType:!0}};r.default=s}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/send-metadata.js"}],[74,{"../../../../../shared/constants/app":3209,"../../../../../shared/constants/network":3216,"../../../../../shared/modules/network.utils":3243,"eth-rpc-errors":2e3,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("lodash"),i=e("../../../../../shared/constants/app"),a=e("../../../../../shared/constants/network"),o=e("../../../../../shared/modules/network.utils");var c={methodNames:[i.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN],implementation:async function(e,t,r,c,{getCurrentChainId:u,findNetworkConfigurationBy:d,setProviderType:l,setActiveNetwork:h,requestUserApproval:p}){var f;if(null===(f=e.params)||void 0===f||!f[0]||"object"!=typeof e.params[0])return c(n.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:m}=e,{chainId:g}=e.params[0],y=Object.keys((0,s.omit)(e.params[0],["chainId"]));if(y.length>0)return c(n.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${y}`}));const E="string"==typeof g&&g.toLowerCase();if(!(0,o.isPrefixedFormattedHexString)(E))return c(n.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${g}`}));if(!(0,o.isSafeChainId)(parseInt(E,16)))return c(n.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${E}": numerical value greater than max safe value. Received:\n${g}`}));const b=function(e,t){if(e in a.CHAIN_ID_TO_TYPE_MAP)return{chainId:e,ticker:a.CURRENCY_SYMBOLS.ETH,nickname:a.NETWORK_TO_NAME_MAP[e],rpcUrl:a.CHAIN_ID_TO_RPC_URL_MAP[e],type:a.CHAIN_ID_TO_TYPE_MAP[e]};return t({chainId:e})}(E,d);if(b){if(u()===E)return t.result=null,c();try{const e=await p({origin:m,type:i.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,requestData:b});g in a.CHAIN_ID_TO_TYPE_MAP&&e.type!==a.NETWORK_TYPES.LOCALHOST&&e.type!==a.NETWORK_TYPES.LINEA_TESTNET?l(e.type):await h(e.id),t.result=null}catch(e){return c(e)}return c()}return c(n.ethErrors.provider.custom({code:4902,message:`Unrecognized chain ID "${g}". Try adding the chain using ${i.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN} first.`}))},hookNames:{getCurrentChainId:!0,findNetworkConfigurationBy:!0,setProviderType:!0,setActiveNetwork:!0,requestUserApproval:!0}};r.default=c}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/switch-ethereum-chain.js"}],[75,{"../../../../../shared/constants/app":3209,"eth-rpc-errors":2e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../../../shared/constants/app");var i={methodNames:[s.MESSAGE_TYPE.WATCH_ASSET,s.MESSAGE_TYPE.WATCH_ASSET_LEGACY],implementation:async function(e,t,r,s,{handleWatchAssetRequest:i}){try{const{options:r,type:n}=e.params,a=await i(r,n);return await a.result,t.result=!0,s()}catch(e){return"User rejected to watch the asset."===e.message?s(n.ethErrors.provider.userRejectedRequest()):s(e)}},hookNames:{handleWatchAssetRequest:!0}};r.default=i}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/watch-asset.js"}],[76,{"./createMethodMiddleware":66},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./createMethodMiddleware");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/index.js"}],[77,{"../../../shared/constants/app":3209,"../../../shared/modules/fetch-with-timeout":3239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.securityProviderCheck=async function(e,t,r,n){let s;if(t===i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA)s={host_name:e.msgParams.origin,rpc_method_name:t,chain_id:r,data:e.msgParams.data,currentLocale:n};else if(t===i.MESSAGE_TYPE.ETH_SIGN||t===i.MESSAGE_TYPE.PERSONAL_SIGN)s={host_name:e.msgParams.origin,rpc_method_name:t,chain_id:r,data:{signer_address:e.msgParams.from,msg_to_sign:e.msgParams.data},currentLocale:n};else{var o,c,u,d,l,h;s={host_name:e.origin,rpc_method_name:t,chain_id:r,data:{from_address:null==e||null===(o=e.txParams)||void 0===o?void 0:o.from,to_address:null==e||null===(c=e.txParams)||void 0===c?void 0:c.to,gas:null==e||null===(u=e.txParams)||void 0===u?void 0:u.gas,gasPrice:null==e||null===(d=e.txParams)||void 0===d?void 0:d.gasPrice,value:null==e||null===(l=e.txParams)||void 0===l?void 0:l.value,data:null==e||null===(h=e.txParams)||void 0===h?void 0:h.data},currentLocale:n}}const p=await a("https://proxy.metafi.codefi.network/opensea/security/v1/validate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});return await p.json()};var n,s=(n=e("../../../shared/modules/fetch-with-timeout"))&&n.__esModule?n:{default:n},i=e("../../../shared/constants/app");const a=(0,s.default)()}}},{package:"$root$",file:"app/scripts/lib/security-provider-helpers.js"}],[78,{"../../../shared/constants/hardware-wallets":3213,"@metamask/eth-keyring-controller":1050,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@metamask/eth-keyring-controller"),i=(n=e("loglevel"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/hardware-wallets");var o={async verifyAccounts(e,t){if(!e||e.length<1)throw new Error("No created accounts defined.");const r=new s.KeyringController({}).getKeyringBuilderForType(a.HardwareKeyringTypes.hdKeyTree)(),n={mnemonic:t,numberOfAccounts:e.length};await r.deserialize(n);const o=await r.getAccounts();if(i.default.debug(`Created accounts: ${JSON.stringify(e)}`),i.default.debug(`Restored accounts: ${JSON.stringify(o)}`),o.length!==e.length)throw new Error("Wrong number of accounts");for(let t=0;t<o.length;t++)if(o[t].toLowerCase()!==e[t].toLowerCase())throw new Error(`Not identical accounts! Original: ${e[t]}, Restored: ${o[t]}`)}};r.default=o}}},{package:"$root$",file:"app/scripts/lib/seed-phrase-verifier.js"}],[79,{"../util":85,"@segment/loosely-validate-event":1243,buffer:1789,"is-retry-allowed":2511,lodash:2737,"remove-trailing-slash":3006,timers:3093},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t,n){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=u(e("remove-trailing-slash")),i=u(e("@segment/loosely-validate-event")),a=e("lodash"),o=u(e("is-retry-allowed")),c=e("../util");function u(e){return e&&e.__esModule?e:{default:e}}const d=()=>({});r.default=class{constructor(e,t={}){this.writeKey=e,this.host=(0,s.default)(t.host||"https://api.segment.io"),this.flushInterval=t.flushInterval||1e4,this.flushAt=t.flushAt||Math.max(t.flushAt,1)||20,this.queue=[],this.path="/v1/batch",this.maxQueueSize=460800,this.flushed=!1,this.retryCount=3,Object.defineProperty(this,"enable",{configurable:!1,writable:!1,enumerable:!0,value:!0})}_validate(e,t){(0,i.default)(e,t)}_message(e,t,r){return this._validate(t,e),this.enqueue(e,t,r),this}identify(e,t){return this._message("identify",e,t)}track(e,t){return this._message("track",e,t)}page(e,t){return this._message("page",e,t)}enqueue(e,t,r=d){if(!this.enable)return void n(r);const s={...t,type:e};if(s.context={...s.context,library:{name:"analytics-node"}},s.timestamp||(s.timestamp=new Date),s.messageId||(s.messageId=(0,c.generateRandomId)()),s.anonymousId&&!(0,a.isString)(s.anonymousId)&&(s.anonymousId=JSON.stringify(s.anonymousId)),s.userId&&!(0,a.isString)(s.userId)&&(s.userId=JSON.stringify(s.userId)),this.queue.push({message:s,callback:r}),!this.flushed)return this.flushed=!0,void this.flush();const i=this.queue.length>=this.flushAt,o=this.queue.reduce(((e,t)=>e+JSON.stringify(t).length),0)>=this.maxQueueSize;(i||o)&&this.flush(),this.flushInterval&&!this.timer&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))}flush(e=d){if(!this.enable)return n(e),Promise.resolve();if(this.timer&&(clearTimeout(this.timer),this.timer=null),!this.queue.length)return n(e),Promise.resolve();const r=this.queue.splice(0,this.flushAt),s=r.map((e=>e.callback)),i={batch:r.map((e=>e.message)),timestamp:new Date,sentAt:new Date},a={Authorization:`Basic ${t.from(this.writeKey,"utf8").toString("base64")}`};return this._sendRequest(`${this.host}${this.path}`,{method:"POST",body:JSON.stringify(i),headers:a},(t=>{n((()=>{s.forEach((e=>e(t,i))),e(t,i)}))}),0)}_retryRequest(e,t,r,n){const s=100*Math.pow(2,n);setTimeout((()=>{this._sendRequest(e,t,r,n+1)}),s)}async _sendRequest(e,t,r,n){return fetch(e,t).then((async s=>{if(s.ok)r();else if(this._isErrorRetryable({response:s})&&n<=this.retryCount)this._retryRequest(e,t,r,n);else{const e=new Error(s.statusText);r(e)}})).catch((s=>{this._isErrorRetryable(s)&&n<=this.retryCount?this._retryRequest(e,t,r,n):r(s)}))}_isErrorRetryable(e){return!!function(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,o.default)(e)}(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}}).call(this)}).call(this,e("buffer").Buffer,e("timers").setImmediate)}}},{package:"$root$",file:"app/scripts/lib/segment/analytics.js"}],[8,{"../../../shared/modules/string-utils":3248},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../shared/modules/string-utils");r.default=class{constructor(e={}){const{preferencesController:t,addressBookController:r,networkController:n,trackMetaMetricsEvent:s}=e;this.preferencesController=t,this.addressBookController=r,this.networkController=n,this._trackMetaMetricsEvent=s}async restoreUserData(e){const t=this.preferencesController.store.getState(),{preferences:r,addressBook:n,network:s}=JSON.parse(e);r&&(r.identities=t.identities,r.lostIdentities=t.lostIdentities,r.selectedAddress=t.selectedAddress,this.preferencesController.store.updateState(r)),n&&this.addressBookController.update(n,!0),s&&this.networkController.store.updateState(s),(r||n||s)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.store.getState()},addressBook:{...this.addressBookController.state},network:{networkConfigurations:this.networkController.store.getState().networkConfigurations}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),r=new Date,s=e=>(0,n.prependZero)(e,2);return{fileName:`MetaMaskUserData.${r.getFullYear()}_${s(r.getMonth()+1)}_${s(r.getDay())}_${s(r.getHours())}_${s(r.getMinutes())}_${s(r.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/controllers/backup.js"}],[80,{"../../../../shared/constants/time":3221,"./analytics":79,_process:2832},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.segment=r.createSegmentMock=void 0;var n,s=e("../../../../shared/constants/time"),i=(n=e("./analytics"))&&n.__esModule?n:{default:n};const a="XdGJ17zKf3NjBPCDQ2UDjJjkx6FYBMGP",o=t.env.SEGMENT_HOST??null,c=undefined,u=5*s.SECOND,d=(e=c)=>{const t={queue:[],flush(){t.queue.forEach((([e,t])=>{t()})),t.queue=[]},track(r,n=(()=>undefined)){t.queue.push([r,n]),t.queue.length>=e&&t.flush()},page(){},identify(){}};return t};r.createSegmentMock=d;const l=new i.default(a,{host:o,flushAt:c,flushInterval:u});r.segment=l}).call(this)}).call(this,e("_process"))}}},{package:"$root$",file:"app/scripts/lib/segment/index.js"}],[84,{"../../../shared/constants/app":3209,"../../../shared/constants/metametrics":3215,"../../../shared/modules/hexstring-utils":3241,"../../../shared/modules/random-id":3245,"../metamask-controller":86,"@metamask/obs-store":1156,assert:1556,"eth-rpc-errors":2e3,"eth-sig-util":2002,events:1790,jsonschema:2541,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=m(e("events")),s=e("assert"),i=e("@metamask/obs-store"),a=e("eth-rpc-errors"),o=e("eth-sig-util"),c=m(e("loglevel")),u=m(e("jsonschema")),d=e("../../../shared/constants/app"),l=e("../metamask-controller"),h=m(e("../../../shared/modules/random-id")),p=e("../../../shared/constants/metametrics"),f=e("../../../shared/modules/hexstring-utils");function m(e){return e&&e.__esModule?e:{default:e}}class g extends n.default{constructor({getCurrentChainId:e,metricsEvent:t,securityProviderRequest:r}){super(),this._getCurrentChainId=e,this.memStore=new i.ObservableStore({unapprovedTypedMessages:{},unapprovedTypedMessagesCount:0}),this.resetState=()=>{this.memStore.updateState({unapprovedTypedMessages:{},unapprovedTypedMessagesCount:0})},this.messages=[],this.metricsEvent=t,this.securityProviderRequest=r}get unapprovedTypedMessagesCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addUnapprovedMessageAsync(e,t,r){return new Promise(((n,s)=>{this.addUnapprovedMessage(e,t,r).then((t=>{this.once(`${t}:finished`,(t=>{switch(t.status){case"signed":return n(t.rawSig);case"rejected":return s(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return s(new Error(`MetaMask Message Signature: ${t.error}`));default:return s(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}async addUnapprovedMessage(e,t,r){e.version=r,t&&(e.origin=t.origin),this.validateParams(e),c.default.debug(`TypedMessageManager addUnapprovedMessage: ${JSON.stringify(e)}`);const n=(new Date).getTime(),s=(0,h.default)(),i={id:s,msgParams:e,time:n,status:"unapproved",type:d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA};this.addMsg(i);const a=await this.securityProviderRequest(i,i.type);return i.securityProviderResponse=a,this.emit("update"),s}validateParams(e){switch(s.strict.ok(e&&"object"==typeof e,"Params must be an object."),s.strict.ok("data"in e,'Params must include a "data" field.'),s.strict.ok("from"in e,'Params must include a "from" field.'),s.strict.ok("string"==typeof e.from&&(0,f.isValidHexAddress)(e.from,{allowNonPrefixed:!1}),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.'),e.version){case"V1":s.strict.ok(Array.isArray(e.data),'"params.data" must be an array.'),s.strict.doesNotThrow((()=>{(0,o.typedSignatureHash)(e.data)}),"Signing data must be valid EIP-712 typed data.");break;case"V3":case"V4":{let t;s.strict.equal(typeof e.data,"string",'"params.data" must be a string.'),s.strict.doesNotThrow((()=>{t=JSON.parse(e.data)}),'"data" must be a valid JSON string.');const r=u.default.validate(t,o.TYPED_MESSAGE_SCHEMA);if(0!==r.errors.length)throw a.ethErrors.rpc.invalidParams({message:"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx.",data:r.errors.map((e=>e.message.toString()))});s.strict.ok(t.primaryType in t.types,`Primary type of "${t.primaryType}" has no type definition.`);let{chainId:n}=t.domain;if(n){const e=parseInt(this._getCurrentChainId(),16);s.strict.ok(!Number.isNaN(e),`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`),"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10)),s.strict.equal(n,e,`Provided chainId "${n}" must match the active chainId "${e}"`)}break}default:s.strict.fail(`Unknown typed data version "${e.version}"`)}}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const r=this.getMsg(e);r.rawSig=t,this._updateMsg(r),this._setMsgStatus(e,"signed")}async prepMsgForSigning(e){return delete e.metamaskId,delete e.version,e}rejectMsg(e,t=undefined){if(t){const r=this.getMsg(e);this.metricsEvent({event:t,category:p.EVENT.CATEGORIES.TRANSACTIONS,properties:{action:"Sign Request",version:r.msgParams.version,type:r.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const r=this.getMsg(e);r.error=t,this._updateMsg(r),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const r=this.getMsg(e);if(!r)throw new Error(`TypedMessageManager - Message not found for id: "${e}".`);r.status=t,this._updateMsg(r),this.emit(`${e}:${t}`,r),"rejected"!==t&&"signed"!==t&&"errored"!==t||this.emit(`${e}:finished`,r)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedTypedMessages:e,unapprovedTypedMessagesCount:t}),this.emit(l.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}}r.default=g}}},{package:"$root$",file:"app/scripts/lib/typed-message-manager.js"}]],[],{});