LavaPack.loadBundle([[209,{"./077-supplements/077-supplement-for-082":205,"./077-supplements/077-supplement-for-084":206,"./077-supplements/077-supplement-for-086":207,"./077-supplements/077-supplement-for-088":208,"@metamask/utils":2787,lodash:4382,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=u(e("loglevel")),i=e("@metamask/utils"),a=u(e("./077-supplements/077-supplement-for-082")),o=u(e("./077-supplements/077-supplement-for-084")),c=u(e("./077-supplements/077-supplement-for-086")),l=u(e("./077-supplements/077-supplement-for-088"));function u(e){return e&&e.__esModule?e:{default:e}}r.default={version:77,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=77;let r=function(e){if(!(0,i.hasProperty)(e,"TokenListController"))return n.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,i.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,i.hasProperty)(e.TokenListController,"tokensChainsCache"))return n.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;const{TokenListController:s}=e,{tokensChainsCache:a}=s;let o,c;for(const e in a){var l,u;if(o=a[e].data||{},c={},Array.isArray(o))for(const e of o)c[e.address]=e;else if((null===(l=Object.keys(o)[0])||void 0===l?void 0:l.toLowerCase())!==(null===(u=o[Object.keys(o)[0]])||void 0===u||null===(u=u.address)||void 0===u?void 0:u.toLowerCase()))for(const e in o)c[o[e].address]=o[e];a[e].data=Object.keys(c).length>0?c:o}return s.tokensChainsCache=a,{...e,TokenListController:{...s}}}(t.data);return r=(0,a.default)(r),r=(0,o.default)(r),r=(0,c.default)(r),r=(0,l.default)(r),t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/077.js"}],[2090,{"./common.js":2085,"./enums.js":2088,"./interfaces.js":2091,"./types.js":2092,"./utils.js":2093},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./common.js"),r),n(e("./enums.js"),r),n(e("./interfaces.js"),r),n(e("./types.js"),r),n(e("./utils.js"),r)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/index.js"}],[2091,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/interfaces.js"}],[2092,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/types.js"}],[2093,{"./enums.js":2088,"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseGethGenesis=void 0;const s=e("@ethereumjs/util"),n=e("./enums.js");function i(e,t=!0){const{name:r,config:i,difficulty:a,mixHash:o,gasLimit:c,coinbase:l,baseFeePerGas:u,excessBlobGas:d}=e;let{extraData:h,timestamp:m,nonce:p}=e;const f=Number(m),{chainId:g}=i;if(""===h&&(h="0x"),(0,s.isHexPrefixed)(m)||(m=(0,s.intToHex)(parseInt(m))),18!==p.length&&(p=function(e){return e&&"0x0"!==e?(0,s.isHexPrefixed)(e)?"0x"+(0,s.stripHexPrefix)(e).padStart(16,"0"):"0x"+e.padStart(16,"0"):"0x0000000000000000"}(p)),i.eip155Block!==i.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const v={name:r,chainId:g,networkId:g,genesis:{timestamp:m,gasLimit:c,difficulty:a,nonce:p,extraData:h,mixHash:o,coinbase:l,baseFeePerGas:u,excessBlobGas:d},hardfork:undefined,hardforks:[],bootstrapNodes:[],consensus:i.clique!==undefined?{type:"poa",algorithm:"clique",clique:{period:i.clique.period??i.clique.blockperiodseconds,epoch:i.clique.epoch??i.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},_={[n.Hardfork.Homestead]:{name:"homesteadBlock"},[n.Hardfork.Dao]:{name:"daoForkBlock"},[n.Hardfork.TangerineWhistle]:{name:"eip150Block"},[n.Hardfork.SpuriousDragon]:{name:"eip155Block"},[n.Hardfork.Byzantium]:{name:"byzantiumBlock"},[n.Hardfork.Constantinople]:{name:"constantinopleBlock"},[n.Hardfork.Petersburg]:{name:"petersburgBlock"},[n.Hardfork.Istanbul]:{name:"istanbulBlock"},[n.Hardfork.MuirGlacier]:{name:"muirGlacierBlock"},[n.Hardfork.Berlin]:{name:"berlinBlock"},[n.Hardfork.London]:{name:"londonBlock"},[n.Hardfork.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:t},[n.Hardfork.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[n.Hardfork.Cancun]:{name:"cancunTime",postMerge:!0,isTimestamp:!0},[n.Hardfork.Prague]:{name:"pragueTime",postMerge:!0,isTimestamp:!0}},y=Object.keys(_).reduce(((e,t)=>(e[_[t].name]=t,e)),{}),k=Object.keys(i).filter((e=>y[e]!==undefined&&i[e]!==undefined&&null!==i[e]));v.hardforks=k.map((e=>({name:y[e],block:!0===_[y[e]].isTimestamp||"number"!=typeof i[e]?null:i[e],timestamp:!0===_[y[e]].isTimestamp&&"number"==typeof i[e]?i[e]:undefined}))).filter((e=>null!==e.block||e.timestamp!==undefined)),v.hardforks.sort((function(e,t){return(e.block??Infinity)-(t.block??Infinity)})),v.hardforks.sort((function(e,t){return(e.timestamp??0)-(t.timestamp??0)}));for(const e of v.hardforks)e.timestamp===f&&(e.timestamp=0);if(i.terminalTotalDifficulty!==undefined){const e={name:n.Hardfork.Paris,ttd:i.terminalTotalDifficulty,block:null},t=v.hardforks.findIndex((e=>!0===_[e.name]?.postMerge));-1!==t?v.hardforks.splice(t,0,e):v.hardforks.push(e)}const w=v.hardforks.length>0?v.hardforks.slice(-1)[0]:undefined;return v.hardfork=w?.name,v.hardforks.unshift({name:n.Hardfork.Chainstart,block:0}),v}r.parseGethGenesis=function(e,t,r){try{const s=["config","difficulty","gasLimit","nonce","alloc"];if(s.some((t=>!(t in e)))){const t=s.filter((t=>!(t in e)));throw new Error(`Invalid format, expected geth genesis field "${t}" missing`)}return t!==undefined&&(e.name=t),i(e,r)}catch(e){throw new Error(`Error parsing parameters file: ${e.message}`)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/utils.js"}],[2094,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function s(e){if(Array.isArray(e)){const t=[];let r=0;for(let n=0;n<e.length;n++){const i=s(e[n]);t.push(i),r+=i.length}return m(a(r,192),...t)}const t=v(e);return 1===t.length&&t[0]<128?t:m(a(t.length,128),t)}function n(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(u(e))}function a(e,t){if(e<56)return Uint8Array.from([e+t]);const r=f(e),s=f(t+55+r.length/2);return Uint8Array.from(h(s+r))}function o(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=c(v(e));if(t)return{data:r.data,remainder:r.remainder.slice()};if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,s,a,o;const l=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(u<=183){if(t=u-127,s=128===u?Uint8Array.from([]):n(e,1,t),2===t&&s[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:s,remainder:e.subarray(t)}}if(u<=191){if(r=u-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(n(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return s=n(e,r,t+r),{data:s,remainder:e.subarray(t+r)}}if(u<=247){for(t=u-191,a=n(e,1,t);a.length;)o=c(a),l.push(o.data),a=o.remainder;return{data:l,remainder:e.subarray(t)}}{if(r=u-246,t=i(n(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const s=r+t;if(s>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=n(e,r,s);a.length;)o=c(a),l.push(o.data),a=o.remainder;return{data:l,remainder:e.subarray(s)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.RLP=r.utils=r.decode=r.encode=void 0,r.encode=s,r.decode=o;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const s=2*r;t[r]=d(e.slice(s,s+2))}return t}function m(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return r}function p(e){return(new TextEncoder).encode(e)}function f(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function v(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?h((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):p(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?h(f(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:u,concatBytes:m,hexToBytes:h,utf8ToBytes:p},r.RLP={encode:s,decode:o}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/rlp",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/rlp/dist/cjs/index.js"}],[2095,{"./bytes.js":2099,"./constants.js":2100,"./helpers.js":2103,"./internal.js":2105,"@ethereumjs/rlp":2114,"ethereum-cryptography/keccak.js":3804,"ethereum-cryptography/secp256k1.js":3821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const s=e("@ethereumjs/rlp"),n=e("ethereum-cryptography/keccak.js"),i=e("ethereum-cryptography/secp256k1.js"),a=e("./bytes.js"),o=e("./constants.js"),c=e("./helpers.js"),l=e("./internal.js");class u{constructor(e=o.BIGINT_0,t=o.BIGINT_0,r=o.KECCAK256_RLP,s=o.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=s,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:s,codeHash:n}=e;return new u(t!==undefined?(0,a.bytesToBigInt)((0,a.toBytes)(t)):undefined,r!==undefined?(0,a.bytesToBigInt)((0,a.toBytes)(r)):undefined,s!==undefined?(0,a.toBytes)(s):undefined,n!==undefined?(0,a.toBytes)(n):undefined)}static fromRlpSerializedAccount(e){const t=s.RLP.decode(e);if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,s,n]=e;return new u((0,a.bytesToBigInt)(t),(0,a.bytesToBigInt)(r),s,n)}_validate(){if(this.nonce<o.BIGINT_0)throw new Error("nonce must be greater than zero");if(this.balance<o.BIGINT_0)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,a.bigIntToUnpaddedBytes)(this.nonce),(0,a.bigIntToUnpaddedBytes)(this.balance),this.storageRoot,this.codeHash]}serialize(){return s.RLP.encode(this.raw())}isContract(){return!(0,a.equalsBytes)(this.codeHash,o.KECCAK256_NULL)}isEmpty(){return this.balance===o.BIGINT_0&&this.nonce===o.BIGINT_0&&(0,a.equalsBytes)(this.codeHash,o.KECCAK256_NULL)}}r.Account=u;r.isValidAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,t){(0,c.assertIsHexString)(e);const r=(0,l.stripHexPrefix)(e).toLowerCase();let s="";if(t!==undefined){s=(0,a.bytesToBigInt)((0,a.toBytes)(t)).toString()+"0x"}const i=(0,a.utf8ToBytes)(s+r),o=(0,a.bytesToHex)((0,n.keccak256)(i)).slice(2);let u="0x";for(let e=0;e<r.length;e++)parseInt(o[e],16)>=8?u+=r[e].toUpperCase():u+=r[e];return u};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,t){return(0,c.assertIsBytes)(e),(0,c.assertIsBytes)(t),(0,a.bytesToBigInt)(t)===o.BIGINT_0?(0,n.keccak256)(s.RLP.encode([e,Uint8Array.from([])])).subarray(-20):(0,n.keccak256)(s.RLP.encode([e,t])).subarray(-20)};r.generateAddress2=function(e,t,r){if((0,c.assertIsBytes)(e),(0,c.assertIsBytes)(t),(0,c.assertIsBytes)(r),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==t.length)throw new Error("Expected salt to be of length 32");return(0,n.keccak256)((0,a.concatBytes)((0,a.hexToBytes)("0xff"),e,t,(0,n.keccak256)(r))).subarray(-20)};r.isValidPrivate=function(e){return i.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,t=!1){if((0,c.assertIsBytes)(e),64===e.length)try{return i.secp256k1.ProjectivePoint.fromHex((0,a.concatBytes)(Uint8Array.from([4]),e)),!0}catch(e){return!1}if(!t)return!1;try{return i.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,t=!1){if((0,c.assertIsBytes)(e),t&&64!==e.length&&(e=i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),64!==e.length)throw new Error("Expected pubKey to be of length 64");return(0,n.keccak256)(e).subarray(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,c.assertIsBytes)(e),i.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1)};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,c.assertIsBytes)(e),64!==e.length&&(e=i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),e};r.zeroAddress=function(){const e=(0,a.zeros)(20);return(0,a.bytesToHex)(e)};function d(e){const[t,r,s,n]=e;return[t,r,0===s.length?o.KECCAK256_RLP:s,0===n.length?o.KECCAK256_NULL:n]}r.isZeroAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=d;const h=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,s,n]=e;return[t,r,(0,a.equalsBytes)(s,o.KECCAK256_RLP)?h:s,(0,a.equalsBytes)(n,o.KECCAK256_NULL)?h:n]},r.accountBodyToRLP=function(e,t=!0){const r=t?d(e):e;return s.RLP.encode(r)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/account.js"}],[2096,{"./account.js":2095,"./bytes.js":2099,"./constants.js":2100},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const s=e("./account.js"),n=e("./bytes.js"),i=e("./constants.js");class a{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.bytes=e}static zero(){return new a((0,n.zeros)(20))}static fromString(e){if(!(0,s.isValidAddress)(e))throw new Error("Invalid address");return new a((0,n.toBytes)(e))}static fromPublicKey(e){if(!(e instanceof Uint8Array))throw new Error("Public key should be Uint8Array");const t=(0,s.pubToAddress)(e);return new a(t)}static fromPrivateKey(e){if(!(e instanceof Uint8Array))throw new Error("Private key should be Uint8Array");const t=(0,s.privateToAddress)(e);return new a(t)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new a((0,s.generateAddress)(e.bytes,(0,n.bigIntToBytes)(t)))}static generate2(e,t,r){if(!(t instanceof Uint8Array))throw new Error("Expected salt to be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("Expected initCode to be a Uint8Array");return new a((0,s.generateAddress2)(e.bytes,t,r))}equals(e){return(0,n.equalsBytes)(this.bytes,e.bytes)}isZero(){return this.equals(a.zero())}isPrecompileOrSystemAddress(){const e=(0,n.bytesToBigInt)(this.bytes),t=i.BIGINT_0,r=BigInt("0xffff");return e>=t&&e<=r}toString(){return(0,n.bytesToHex)(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}r.Address=a}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/address.js"}],[2097,{events:3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const s=e("events");class n extends s.EventEmitter{emit(e,...t){let[r,s]=t;const n=this;let i=n._events[e]??[];return s===undefined&&"function"==typeof r&&(s=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:s},s=undefined),i=Array.isArray(i)?i:[i],async function(e,t,r){let s;for await(const n of t)try{n.length<2?n.call(e,r):await new Promise(((t,s)=>{n.call(e,r,(e=>{e?s(e):t()}))}))}catch(e){s=e}if(s)throw s}(n,i.slice(),r).then(s).catch(s),n.listenerCount(e)>0}once(e,t){const r=this;let s;if("function"!=typeof t)throw new TypeError("listener must be a function");return s=t.length>=2?function(n,i){r.removeListener(e,s),t(n,i)}:function(n){r.removeListener(e,s),t(n,s)},r.on(e,s),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,s){let n,i,a=this._events[e]??[];const o="after"===s?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),i=a.length,n=a.length;n--;)if(a[n]===t){i=n+o;break}return a.splice(i,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=n}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/asyncEventEmitter.js"}],[2098,{"./bytes.js":2099,"ethereum-cryptography/sha256.js":3822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.commitmentsToVersionedHashes=r.computeVersionedHash=r.blobsToProofs=r.blobsToCommitments=r.getBlobs=void 0;const s=e("ethereum-cryptography/sha256.js"),n=e("./bytes.js"),i=4096,a=131072;function o(e){const t=new Uint8Array(131072);for(let r=0;r<i;r++){const s=new Uint8Array(32);s.set(e.subarray(31*r,31*(r+1)),0),t.set(s,32*r)}return t}r.getBlobs=e=>{const t=(0,n.utf8ToBytes)(e),r=t.byteLength;if(0===r)throw Error("invalid blob data");if(r>262143)throw Error("blob data is too large");const s=Math.ceil(r/a),i=function(e,t){const r=new Uint8Array(t*a).fill(0);return r.set(e),r[e.byteLength]=128,r}(t,s),c=[];for(let e=0;e<s;e++){const t=o(i.subarray(e*a,(e+1)*a));c.push(t)}return c};r.blobsToCommitments=(e,t)=>{const r=[];for(const s of t)r.push(e.blobToKzgCommitment(s));return r};r.blobsToProofs=(e,t,r)=>t.map(((t,s)=>e.computeBlobKzgProof(t,r[s])));r.computeVersionedHash=(e,t)=>{const r=new Uint8Array(32);return r.set([t],0),r.set((0,s.sha256)(e).subarray(1),1),r};r.commitmentsToVersionedHashes=e=>{const t=[];for(const s of e)t.push((0,r.computeVersionedHash)(s,1));return t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/blobs.js"}],[2099,{"./helpers.js":2103,"./internal.js":2105,"ethereum-cryptography/random.js":3820,"ethereum-cryptography/utils.js":3823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.utf8ToBytes=r.equalsBytes=r.bytesToUtf8=r.bigInt64ToBytes=r.int32ToBytes=r.bytesToBigInt64=r.bytesToInt32=r.concatBytes=r.randomBytes=r.compareBytes=r.intToUnpaddedBytes=r.bigIntToUnpaddedBytes=r.bigIntMin=r.bigIntMax=r.bigIntToHex=r.validateNoLeadingZeroes=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.toBytes=r.unpadHex=r.unpadArray=r.unpadBytes=r.setLengthRight=r.setLengthLeft=r.zeros=r.bigIntToBytes=r.intToBytes=r.intToHex=r.hexToBytes=r.bytesToInt=r.bytesToBigInt=r.bytesToHex=r.unprefixedHexToBytes=r.bytesToUnprefixedHex=void 0;const s=e("ethereum-cryptography/random.js"),n=e("ethereum-cryptography/utils.js"),i=e("./helpers.js"),a=e("./internal.js"),o=BigInt(0);r.bytesToUnprefixedHex=n.bytesToHex;const c={},l={};for(let e=0;e<16;e++){const t=e,r=16*e,s=e.toString(16).toLowerCase();l[s]=t,l[s.toUpperCase()]=t,c[s]=r,c[s.toUpperCase()]=r}function u(e){const t=e.length,r=new Uint8Array(t/2);for(let s=0;s<t;s+=2)r[s/2]=c[e[s]]+l[e[s+1]];return r}r.unprefixedHexToBytes=e=>{if("0x"===e.slice(0,2))throw new Error("hex string is prefixed with 0x, should be unprefixed");return u((0,a.padToEven)(e))};const d=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=e=>{let t="0x";if(e===undefined||0===e.length)return t;for(const r of e)t+=d[r];return t};const h=[];for(let e=0;e<=65535;e++)h[e]=BigInt(e);r.bytesToBigInt=(e,t=!1)=>{t&&e.reverse();const s=(0,r.bytesToHex)(e);return"0x"===s?o:4===s.length?h[e[0]]:6===s.length?h[256*e[0]+e[1]]:BigInt(s)};r.bytesToInt=e=>{const t=Number((0,r.bytesToBigInt)(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.hexToBytes=e=>{if("string"!=typeof e)throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);return(e=e.slice(2)).length%2!=0&&(e=(0,a.padToEven)(e)),u(e)};r.intToHex=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBytes=e=>{const t=(0,r.intToHex)(e);return(0,r.hexToBytes)(t)};r.bigIntToBytes=(e,t=!1)=>{const s=(0,r.toBytes)("0x"+(0,a.padToEven)(e.toString(16)));return t?s.reverse():s};r.zeros=e=>new Uint8Array(e);const m=(e,t,s)=>s?e.length<t?new Uint8Array([...e,...(0,r.zeros)(t-e.length)]):e.subarray(0,t):e.length<t?new Uint8Array([...(0,r.zeros)(t-e.length),...e]):e.subarray(-t);r.setLengthLeft=(e,t)=>((0,i.assertIsBytes)(e),m(e,t,!1));r.setLengthRight=(e,t)=>((0,i.assertIsBytes)(e),m(e,t,!0));const p=e=>{let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBytes=e=>((0,i.assertIsBytes)(e),p(e));r.unpadArray=e=>((0,i.assertIsArray)(e),p(e));r.unpadHex=e=>((0,i.assertIsHexString)(e),e=(0,a.stripHexPrefix)(e),"0x"+p(e));r.toBytes=e=>{if(null===e||e===undefined)return new Uint8Array;if(Array.isArray(e)||e instanceof Uint8Array)return Uint8Array.from(e);if("string"==typeof e){if(!(0,a.isHexString)(e))throw new Error(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${e}`);return(0,r.hexToBytes)(e)}if("number"==typeof e)return(0,r.intToBytes)(e);if("bigint"==typeof e){if(e<o)throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),(0,r.unprefixedHexToBytes)(t)}if(e.toBytes!==undefined)return e.toBytes();throw new Error("invalid type")};r.fromSigned=e=>BigInt.asIntN(256,(0,r.bytesToBigInt)(e));r.toUnsigned=e=>(0,r.bigIntToBytes)(BigInt.asUintN(256,e));r.addHexPrefix=e=>"string"!=typeof e||(0,a.isHexPrefixed)(e)?e:"0x"+e;r.short=(e,t=50)=>{const s=e instanceof Uint8Array?(0,r.bytesToHex)(e):e,n="0x"===s.slice(0,2)?t+2:t;return s.length<=n?s:s.slice(0,n)+"…"};r.validateNoLeadingZeroes=e=>{for(const[t,s]of Object.entries(e))if(s!==undefined&&s.length>0&&0===s[0])throw new Error(`${t} cannot have leading zeroes, received: ${(0,r.bytesToHex)(s)}`)};r.bigIntToHex=e=>"0x"+e.toString(16);r.bigIntMax=(...e)=>e.reduce(((e,t)=>t>e?t:e));r.bigIntMin=(...e)=>e.reduce(((e,t)=>t<e?t:e));r.bigIntToUnpaddedBytes=e=>(0,r.unpadBytes)((0,r.bigIntToBytes)(e));r.intToUnpaddedBytes=e=>(0,r.unpadBytes)((0,r.intToBytes)(e));r.compareBytes=(e,t)=>{const s=(0,r.bytesToBigInt)(e),n=(0,r.bytesToBigInt)(t);return s>n?1:s<n?-1:0};r.randomBytes=e=>(0,s.getRandomBytesSync)(e);r.concatBytes=(...e)=>{if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return r},r.bytesToInt32=function(e,t=!1){return e.length<4&&(e=m(e,4,t)),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,t)},r.bytesToBigInt64=function(e,t=!1){return e.length<8&&(e=m(e,8,t)),new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0,t)},r.int32ToBytes=function(e,t=!1){const r=new ArrayBuffer(4);return new DataView(r).setUint32(0,e,t),new Uint8Array(r)},r.bigInt64ToBytes=function(e,t=!1){const r=new ArrayBuffer(8);return new DataView(r).setBigUint64(0,e,t),new Uint8Array(r)};var f=e("ethereum-cryptography/utils.js");Object.defineProperty(r,"bytesToUtf8",{enumerable:!0,get:function(){return f.bytesToUtf8}}),Object.defineProperty(r,"equalsBytes",{enumerable:!0,get:function(){return f.equalsBytes}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return f.utf8ToBytes}})}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/bytes.js"}],[21,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isFeatureAnnouncementRead=function(e,t){if(t.includes(e.id))return!0;return function(e){const t=Date.now()-e.getTime();return t/s>=90}(new Date(e.createdAt))},r.processFeatureAnnouncement=function(e){return{type:e.type,id:e.data.id,createdAt:new Date(e.createdAt).toISOString(),data:e.data,isRead:!1}};const s=864e5}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/processors/process-feature-announcement.ts"}],[210,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,n.hasProperty)(e,"PhishingController")||!(0,n.isObject)(e.PhishingController))return e;const{PhishingController:t}=e;return delete t.phishing,delete t.lastFetched,e}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=78}}},{package:"$root$",file:"app/scripts/migrations/078.ts"}],[2100,{"./bytes.js":2099,"ethereum-cryptography/secp256k1.js":3821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BIGINT_2EXP256=r.BIGINT_2EXP224=r.BIGINT_2EXP160=r.BIGINT_2EXP96=r.BIGINT_224=r.BIGINT_160=r.BIGINT_100=r.BIGINT_96=r.BIGINT_256=r.BIGINT_255=r.BIGINT_128=r.BIGINT_64=r.BIGINT_32=r.BIGINT_31=r.BIGINT_28=r.BIGINT_27=r.BIGINT_8=r.BIGINT_7=r.BIGINT_3=r.BIGINT_2=r.BIGINT_1=r.BIGINT_0=r.BIGINT_NEG1=r.RIPEMD160_ADDRESS_STRING=r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const s=e("ethereum-cryptography/secp256k1.js"),n=e("./bytes.js");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=s.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=s.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=(0,n.hexToBytes)(r.KECCAK256_NULL_S),r.KECCAK256_RLP_ARRAY_S="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=(0,n.hexToBytes)(r.KECCAK256_RLP_ARRAY_S),r.KECCAK256_RLP_S="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=(0,n.hexToBytes)(r.KECCAK256_RLP_S),r.RLP_EMPTY_STRING=Uint8Array.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16,r.RIPEMD160_ADDRESS_STRING="0000000000000000000000000000000000000003",r.BIGINT_NEG1=BigInt(-1),r.BIGINT_0=BigInt(0),r.BIGINT_1=BigInt(1),r.BIGINT_2=BigInt(2),r.BIGINT_3=BigInt(3),r.BIGINT_7=BigInt(7),r.BIGINT_8=BigInt(8),r.BIGINT_27=BigInt(27),r.BIGINT_28=BigInt(28),r.BIGINT_31=BigInt(31),r.BIGINT_32=BigInt(32),r.BIGINT_64=BigInt(64),r.BIGINT_128=BigInt(128),r.BIGINT_255=BigInt(255),r.BIGINT_256=BigInt(256),r.BIGINT_96=BigInt(96),r.BIGINT_100=BigInt(100),r.BIGINT_160=BigInt(160),r.BIGINT_224=BigInt(224),r.BIGINT_2EXP96=BigInt(7922816251426434e13),r.BIGINT_2EXP160=BigInt(1461501637330903e33),r.BIGINT_2EXP224=BigInt(2695994666715064e52),r.BIGINT_2EXP256=r.BIGINT_2**r.BIGINT_256}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/constants.js"}],[2101,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ValueEncoding=r.KeyEncoding=void 0,function(e){e.String="string",e.Bytes="view",e.Number="number"}(r.KeyEncoding||(r.KeyEncoding={})),function(e){e.String="string",e.Bytes="view",e.JSON="json"}(r.ValueEncoding||(r.ValueEncoding={}))}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/db.js"}],[2102,{"./bytes.js":2099,"./internal.js":2105},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseGethGenesisState=void 0;const s=e("./bytes.js"),n=e("./internal.js");r.parseGethGenesisState=function(e){const t={};for(let r of Object.keys(e.alloc)){let{balance:i,code:a,storage:o,nonce:c}=e.alloc[r];r=(0,s.addHexPrefix)(r.toLowerCase()),i=(0,n.isHexPrefixed)(i)?i:(0,s.bigIntToHex)(BigInt(i)),a=a!==undefined?(0,s.addHexPrefix)(a):undefined,o=o!==undefined?Object.entries(o):undefined,c=c!==undefined?(0,s.addHexPrefix)(c):undefined,t[r]=[i,a,o,c]}return t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/genesis.js"}],[2103,{"./internal.js":2105},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBytes=r.assertIsHexString=void 0;const s=e("./internal.js");r.assertIsHexString=function(e){if(!(0,s.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBytes=function(e){if(!(e instanceof Uint8Array)){throw new Error(`This method only supports Uint8Array but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/helpers.js"}],[2104,{"./account.js":2095,"./address.js":2096,"./asyncEventEmitter.js":2097,"./blobs.js":2098,"./bytes.js":2099,"./constants.js":2100,"./db.js":2101,"./genesis.js":2102,"./internal.js":2105,"./kzg.js":2106,"./lock.js":2107,"./mapDB.js":2108,"./provider.js":2109,"./signature.js":2110,"./types.js":2111,"./units.js":2112,"./withdrawal.js":2113},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,n(e("./constants.js"),r),n(e("./units.js"),r),n(e("./account.js"),r),n(e("./address.js"),r),n(e("./db.js"),r),n(e("./withdrawal.js"),r),n(e("./signature.js"),r),n(e("./bytes.js"),r),n(e("./types.js"),r),n(e("./asyncEventEmitter.js"),r),n(e("./blobs.js"),r),n(e("./genesis.js"),r);var i=e("./internal.js");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return i.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return i.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),n(e("./kzg.js"),r),n(e("./lock.js"),r),n(e("./mapDB.js"),r),n(e("./provider.js"),r)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/index.js"}],[2105,{"./bytes.js":2099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0;const s=e("./bytes.js");function n(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}r.isHexPrefixed=n;function i(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return n(e)?e.slice(2):e},r.padToEven=i,r.getBinarySize=function(e){if("string"!=typeof e)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof e);return(0,s.utf8ToBytes)(e).byteLength},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const s=e.length;for("0x"===e.substring(0,2)&&(r=2);r<s;r+=2){const s=parseInt(e.substr(r,2),16);t+=String.fromCharCode(s)}return t},r.fromUtf8=function(e){const t=(0,s.utf8ToBytes)(e);return`0x${i((0,s.bytesToUnprefixedHex)(t)).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const s=e.charCodeAt(r).toString(16);t+=s.length<2?`0${s}`:s}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const s=[];for(let n=0;n<e.length;n++){let i=e[n][t];if(!0!==r||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";s.push(i)}return s},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/internal.js"}],[2106,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.initKZG=void 0,r.initKZG=function(e,t){e.loadTrustedSetup()}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/kzg.js"}],[2107,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/lock.js"}],[2108,{"./bytes.js":2099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MapDB=void 0;const s=e("./bytes.js");class n{constructor(e){this._database=e??new Map}async get(e){const t=e instanceof Uint8Array?(0,s.bytesToUnprefixedHex)(e):e.toString();return this._database.get(t)}async put(e,t){const r=e instanceof Uint8Array?(0,s.bytesToUnprefixedHex)(e):e.toString();this._database.set(r,t)}async del(e){const t=e instanceof Uint8Array?(0,s.bytesToUnprefixedHex)(e):e.toString();this._database.delete(t)}async batch(e){for(const t of e)"del"===t.type&&await this.del(t.key),"put"===t.type&&await this.put(t.key,t.value)}shallowCopy(){return new n(this._database)}open(){return Promise.resolve()}}r.MapDB=n}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/mapDB.js"}],[2109,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;r.fetchFromProvider=async(e,t)=>{const r=JSON.stringify({method:t.method,params:t.params,jsonrpc:"2.0",id:1}),s=await fetch(e,{headers:{"content-type":"application/json"},method:"POST",body:r});if(!s.ok)throw new Error(`JSONRpcError: ${JSON.stringify({method:t.method,status:s.status,message:await s.text().catch((()=>"Could not parse error message likely because of a network error"))},null,2)}`);return(await s.json()).result};r.getProvider=e=>{if("string"==typeof e)return e;if("object"==typeof e&&e._getConnection!==undefined)return e._getConnection().url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/provider.js"}],[211,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:79,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=79;const r=function(e){var t,r;(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.collectiblesDetectionNoticeDismissed)!==undefined&&delete e.AppStateController.collectiblesDetectionNoticeDismissed;(null==e||null===(r=e.metamask)||void 0===r?void 0:r.collectiblesDropdownState)!==undefined&&delete e.metamask.collectiblesDropdownState;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/079.js"}],[2110,{"./bytes.js":2099,"./constants.js":2100,"./helpers.js":2103,"ethereum-cryptography/keccak.js":3804,"ethereum-cryptography/secp256k1.js":3821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.calculateSigRecovery=r.ecsign=void 0;const s=e("ethereum-cryptography/keccak.js"),n=e("ethereum-cryptography/secp256k1.js"),i=e("./bytes.js"),a=e("./constants.js"),o=e("./helpers.js");function c(e,t){return e===a.BIGINT_0||e===a.BIGINT_1?e:t===undefined?e-a.BIGINT_27:e-(t*a.BIGINT_2+BigInt(35))}function l(e){return e===a.BIGINT_0||e===a.BIGINT_1}r.ecsign=function(e,t,r){const s=n.secp256k1.sign(e,t),i=s.toCompactRawBytes();return{r:i.slice(0,32),s:i.slice(32,64),v:r===undefined?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(r)*a.BIGINT_2}},r.calculateSigRecovery=c;r.ecrecover=function(e,t,r,s,a){const o=(0,i.concatBytes)((0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(s,32)),u=c(t,a);if(!l(u))throw new Error("Invalid signature v value");return n.secp256k1.Signature.fromCompact(o).addRecoveryBit(Number(u)).recoverPublicKey(e).toRawBytes(!1).slice(1)};r.toRpcSig=function(e,t,r,s){if(!l(c(e,s)))throw new Error("Invalid signature v value");return(0,i.bytesToHex)((0,i.concatBytes)((0,i.setLengthLeft)(t,32),(0,i.setLengthLeft)(r,32),(0,i.toBytes)(e)))};r.toCompactSig=function(e,t,r,s){if(!l(c(e,s)))throw new Error("Invalid signature v value");const n=Uint8Array.from([...r]);return(e>BigInt(28)&&e%a.BIGINT_2===a.BIGINT_1||e===a.BIGINT_1||e===BigInt(28))&&(n[0]|=128),(0,i.bytesToHex)((0,i.concatBytes)((0,i.setLengthLeft)(t,32),(0,i.setLengthLeft)(n,32)))};r.fromRpcSig=function(e){const t=(0,i.toBytes)(e);let r,s,n;if(t.length>=65)r=t.subarray(0,32),s=t.subarray(32,64),n=(0,i.bytesToBigInt)(t.subarray(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.subarray(0,32),s=t.subarray(32,64),n=BigInt((0,i.bytesToInt)(t.subarray(32,33))>>7),s[0]&=127}return n<27&&(n+=a.BIGINT_27),{v:n,r:r,s:s}};r.isValidSignature=function(e,t,r,s=!0,n){if(32!==t.length||32!==r.length)return!1;if(!l(c(e,n)))return!1;const o=(0,i.bytesToBigInt)(t),u=(0,i.bytesToBigInt)(r);return!(o===a.BIGINT_0||o>=a.SECP256K1_ORDER||u===a.BIGINT_0||u>=a.SECP256K1_ORDER)&&!(s&&u>=a.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBytes)(e);const t=(0,i.utf8ToBytes)(`Ethereum Signed Message:\n${e.length}`);return(0,s.keccak256)((0,i.concatBytes)(t,e))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/signature.js"}],[2111,{"./bytes.js":2099,"./internal.js":2105},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const s=e("./bytes.js"),n=e("./internal.js");var i;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(i=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,n.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,s.toBytes)(e);switch(t){case i.Uint8Array:return r;case i.BigInt:return(0,s.bytesToBigInt)(r);case i.Number:{const e=(0,s.bytesToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case i.PrefixedHexString:return(0,s.bytesToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/types.js"}],[2112,{"./constants.js":2100},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.formatBigDecimal=r.GWEI_TO_WEI=void 0;const s=e("./constants.js");r.GWEI_TO_WEI=BigInt(1e9),r.formatBigDecimal=function(e,t,r){t===s.BIGINT_0&&(t=s.BIGINT_1);const n=e/t,i=(e-n*t)*r/t,a=String(r).length-1-String(i).length;return`${n}.${"0".repeat(a)}${i}`}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/units.js"}],[2113,{"./address.js":2096,"./bytes.js":2099,"./constants.js":2100,"./types.js":2111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const s=e("./address.js"),n=e("./bytes.js"),i=e("./constants.js"),a=e("./types.js");class o{constructor(e,t,r,s){this.index=e,this.validatorIndex=t,this.address=r,this.amount=s}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:c}=e,l=(0,a.toType)(t,a.TypeOutput.BigInt),u=(0,a.toType)(r,a.TypeOutput.BigInt),d=i instanceof s.Address?i:new s.Address((0,n.toBytes)(i)),h=(0,a.toType)(c,a.TypeOutput.BigInt);return new o(l,u,d,h)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,s,n]=e;return o.fromWithdrawalData({index:t,validatorIndex:r,address:s,amount:n})}static toBytesArray(e){const{index:t,validatorIndex:r,address:n,amount:o}=e;return[(0,a.toType)(t,a.TypeOutput.BigInt)===i.BIGINT_0?new Uint8Array:(0,a.toType)(t,a.TypeOutput.Uint8Array),(0,a.toType)(r,a.TypeOutput.BigInt)===i.BIGINT_0?new Uint8Array:(0,a.toType)(r,a.TypeOutput.Uint8Array),n instanceof s.Address?n.bytes:(0,a.toType)(n,a.TypeOutput.Uint8Array),(0,a.toType)(o,a.TypeOutput.BigInt)===i.BIGINT_0?new Uint8Array:(0,a.toType)(o,a.TypeOutput.Uint8Array)]}raw(){return o.toBytesArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.bytes,amount:this.amount}}toJSON(){return{index:(0,n.bigIntToHex)(this.index),validatorIndex:(0,n.bigIntToHex)(this.validatorIndex),address:(0,n.bytesToHex)(this.address.bytes),amount:(0,n.bigIntToHex)(this.amount)}}}r.Withdrawal=o}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/withdrawal.js"}],[2114,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function s(e){if(Array.isArray(e)){const t=[];let r=0;for(let n=0;n<e.length;n++){const i=s(e[n]);t.push(i),r+=i.length}return m(a(r,192),...t)}const t=v(e);return 1===t.length&&t[0]<128?t:m(a(t.length,128),t)}function n(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(u(e))}function a(e,t){if(e<56)return Uint8Array.from([e+t]);const r=f(e),s=f(t+55+r.length/2);return Uint8Array.from(h(s+r))}function o(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=c(v(e));if(t)return{data:r.data,remainder:r.remainder.slice()};if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,s,a,o;const l=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(u<=183){if(t=u-127,s=128===u?Uint8Array.from([]):n(e,1,t),2===t&&s[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:s,remainder:e.subarray(t)}}if(u<=191){if(r=u-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(n(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return s=n(e,r,t+r),{data:s,remainder:e.subarray(t+r)}}if(u<=247){for(t=u-191,a=n(e,1,t);a.length;)o=c(a),l.push(o.data),a=o.remainder;return{data:l,remainder:e.subarray(t)}}{if(r=u-246,t=i(n(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const s=r+t;if(s>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=n(e,r,s);a.length;)o=c(a),l.push(o.data),a=o.remainder;return{data:l,remainder:e.subarray(s)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.RLP=r.utils=r.decode=r.encode=void 0,r.encode=s,r.decode=o;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const s=2*r;t[r]=d(e.slice(s,s+2))}return t}function m(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return r}function p(e){return(new TextEncoder).encode(e)}function f(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function v(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?h((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):p(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?h(f(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:u,concatBytes:m,hexToBytes:h,utf8ToBytes:p},r.RLP={encode:s,decode:o}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util>@ethereumjs/rlp",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/node_modules/@ethereumjs/rlp/dist/cjs/index.js"}],[2115,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},n=s;r.BaseControllerV1=s,r.BaseControllerV1_default=n}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[2116,{"./chunk-UJFCPTF3.js":2118,"./chunk-Z4BLTVTB.js":2119},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,s).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,s).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,s).delete(e)}clearActions(){c.__privateGet.call(void 0,this,s).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(r)for(const[e,s]of r.entries())try{if(s){const r=c.__privateGet.call(void 0,this,a).get(e),n=s(...t);n!==r&&(c.__privateGet.call(void 0,this,a).set(e,n),e(n,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let s=c.__privateGet.call(void 0,this,n).get(e);if(s||(s=new Map,c.__privateGet.call(void 0,this,n).set(e,s)),s.set(t,r),r){const s=c.__privateGet.call(void 0,this,i).get(e);if(s){const e=r(...s());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,n).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,n).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[2117,{"./chunk-Z4BLTVTB.js":2119,immer:4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((s,n)=>{try{const i=t[n];if(!i)throw new Error(`No metadata found for '${String(n)}'`);const a=i[r],o=e[n];return"function"==typeof a?s[n]=a(o):a&&(s[n]=o),s}catch(e){return setTimeout((()=>{throw e})),s}}),{})}s=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){n.__privateAdd.call(void 0,this,s,void 0),this.messagingSystem=e,this.name=r,n.__privateSet.call(void 0,this,s,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return n.__privateGet.call(void 0,this,s)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,n.__privateGet.call(void 0,this,s),e);return n.__privateSet.call(void 0,this,s,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,n.__privateGet.call(void 0,this,s),e);n.__privateSet.call(void 0,this,s,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[2118,{"./chunk-Z4BLTVTB.js":2119},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m=e("./chunk-Z4BLTVTB.js");s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=m.__privateGet.call(void 0,this,a);return m.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=m.__privateGet.call(void 0,this,i);return m.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${m.__privateGet.call(void 0,this,n)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){m.__privateAdd.call(void 0,this,o),m.__privateAdd.call(void 0,this,l),m.__privateAdd.call(void 0,this,d),m.__privateAdd.call(void 0,this,s,void 0),m.__privateAdd.call(void 0,this,n,void 0),m.__privateAdd.call(void 0,this,i,void 0),m.__privateAdd.call(void 0,this,a,void 0),m.__privateSet.call(void 0,this,s,e),m.__privateSet.call(void 0,this,n,t),m.__privateSet.call(void 0,this,i,r),m.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).registerActionHandler(e,t)}unregisterActionHandler(e){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).unregisterActionHandler(e)}call(e,...t){if(!m.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return m.__privateGet.call(void 0,this,s).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).publish(e,...t)}subscribe(e,t,r){if(!m.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?m.__privateGet.call(void 0,this,s).subscribe(e,t,r):m.__privateGet.call(void 0,this,s).subscribe(e,t)}unsubscribe(e,t){if(!m.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);m.__privateGet.call(void 0,this,s).unsubscribe(e,t)}clearEventSubscriptions(e){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).clearEventSubscriptions(e)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2119,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(s(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,n)=>(s(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(s(e,t,"access private method"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[212,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:80,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=80;const r=function(e){var t;(null==e||null===(t=e.metamask)||void 0===t?void 0:t.showPortfolioTooltip)!==undefined&&delete e.metamask.showPortfolioTooltip;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/080.js"}],[2120,{"./chunk-FTHCJ6HY.js":2115,"./chunk-G42723LG.js":2116,"./chunk-IURK6TKD.js":2117,"./chunk-UJFCPTF3.js":2118,"./chunk-Z4BLTVTB.js":2119},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-FTHCJ6HY.js"),n=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=n.BaseController,r.BaseControllerV1=s.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=n.getAnonymizedState,r.getPersistentState=n.getPersistentState}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/index.js"}],[2121,{"./chunk-PFNSOF67.js":2125,"@ethereumjs/util":2134,"@metamask/ethjs-unit":1472,"@metamask/utils":2152,"bn.js":3528,buffer:3576,"eth-ens-namehash":3768,"fast-deep-equal":3902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-PFNSOF67.js"),i=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=s(e("bn.js")),l=s(e("eth-ens-namehash")),u=s(e("fast-deep-equal")),d=new Error("timeout"),h=["__proto__","constructor","prototype"];function m(e){return e?new(0,c.default)(o.remove0x.call(void 0,e),16):new(0,c.default)(0)}async function p(e,t){const r=await fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}async function f(e,t){const r=await p(e,t);return await r.json()}r.PROTOTYPE_POLLUTION_BLOCKLIST=h,r.isSafeDynamicKey=function(e){return"string"==typeof e&&!h.some((t=>e===t))},r.isSafeChainId=function(e){if(!o.isHexString.call(void 0,e))return!1;const t=Number.parseInt(e,o.isStrictHexString.call(void 0,e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=n.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return o.add0x.call(void 0,e.toString(16))},r.fractionBN=function(e,t,r){const s=new(0,c.default)(t),n=new(0,c.default)(r);return e.mul(s).div(n)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new(0,c.default)(0);const t=e.toString().split("."),r=t[0]||"0";let s=t[1]||"";if(!s)return a.toWei.call(void 0,r,"gwei");if(s.length<=9)return a.toWei.call(void 0,`${r}.${s}`,"gwei");const n=s.slice(9)[0];s=s.slice(0,9);let i=a.toWei.call(void 0,`${r}.${s}`,"gwei");return Number(n)>=5&&(i=i.add(new(0,c.default)(1))),i},r.weiHexToGweiDec=function(e){const t=new(0,c.default)(o.remove0x.call(void 0,e),16);return a.fromWei.call(void 0,t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return}},r.hexToBN=m,r.hexToText=function(e){try{const r=o.remove0x.call(void 0,e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new(0,c.default)(m(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&o.isStrictHexString.call(void 0,e)?e:`0x${c.default.isBN(e)?e.toString(16):new(0,c.default)(e.toString(),10).toString(16)}`},r.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return void(t&&console.error(e))}},r.safelyExecuteWithTimeout=async function(e,t=!1,r=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return void(t&&console.error(e))}},r.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=o.add0x.call(void 0,e);return o.isHexString.call(void 0,t)?i.toChecksumAddress.call(void 0,t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?o.add0x.call(void 0,e):e;return!!o.isStrictHexString.call(void 0,r)&&i.isValidAddress.call(void 0,r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=f,r.fetchWithErrorHandling=async function({url:e,options:t,timeout:r,errorCodesToCatch:s}){let n;try{n=r?Promise.race([await f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):await f(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==d)throw e;console.error(e)}(e,s)}return n},r.timeoutFetch=async function(e,t,r=500){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])},r.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((s,n)=>{const i=(e,t)=>{e?n(e):s(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))},r.convertHexToDecimal=(e="0x0")=>o.isStrictHexString.call(void 0,e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return u.default.call(void 0,e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/chunk-2CQ3YJMB.js"}],[2122,{"@metamask/utils":2152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/utils"),n=s.createProjectLogger.call(void 0,"controller-utils");r.createModuleLogger=s.createModuleLogger,r.projectLogger=n}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/chunk-DBJSLKNR.js"}],[2123,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},n={...s,rpc:"rpc"};var i=(e=>(e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e))(i||{}),a={mainnet:"0x1",goerli:"0x5",sepolia:"0xaa36a7",aurora:"0x4e454152","linea-goerli":"0xe704","linea-sepolia":"0xe705","linea-mainnet":"0xe708"},o=(e=>(e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc="",e))(o||{});r.InfuraNetworkType=s,r.NetworkType=n,r.isNetworkType=function(e){return Object.values(n).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(s).includes(e)},r.BuiltInNetworkName=i,r.ChainId=a,r.NetworksTicker=o}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/chunk-F775U3C2.js"}],[2124,{"./chunk-DBJSLKNR.js":2122,"@metamask/utils":2152,"@spruceid/siwe-parser":3058,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-DBJSLKNR.js"),n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),a=s.createModuleLogger.call(void 0,s.projectLogger,"detect-siwe");function o(e){try{const s="string"!=typeof(r=e)?r:n.remove0x.call(void 0,r),i=t.from(s,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return a(t),e}var r}var c={"http:":"80","https:":"443"},l=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.parseDomainParts=l,r.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:r}=e;if(!t||!r?.parsedMessage?.domain)return!1;const s=new URL(t),n=l(r.parsedMessage.domain,s.protocol);return 0===n.hostname.localeCompare(s.hostname,void 0,{sensitivity:"accent"})&&(""!==n.port&&n.port!==s.port?""===s.port&&n.port===c[s.protocol]:""===n.username||n.username===s.username)}catch(e){return a(e),!1}},r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new(0,i.ParsedMessage)(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/chunk-M6G3ISXG.js"}],[2125,{"./chunk-F775U3C2.js":2123},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-F775U3C2.js"),n={[s.NetworkType.goerli]:{chainId:s.ChainId.goerli,ticker:"GoerliETH",rpcPrefs:{blockExplorerUrl:`https://${s.NetworkType.goerli}.etherscan.io`}},[s.NetworkType.sepolia]:{chainId:s.ChainId.sepolia,ticker:"SepoliaETH",rpcPrefs:{blockExplorerUrl:`https://${s.NetworkType.sepolia}.etherscan.io`}},[s.NetworkType.mainnet]:{chainId:s.ChainId.mainnet,ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[s.NetworkType["linea-goerli"]]:{chainId:s.ChainId["linea-goerli"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[s.NetworkType["linea-sepolia"]]:{chainId:s.ChainId["linea-sepolia"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},[s.NetworkType["linea-mainnet"]]:{chainId:s.ChainId["linea-mainnet"],ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[s.NetworkType.rpc]:{chainId:void 0,blockExplorerUrl:void 0,ticker:void 0,rpcPrefs:void 0}},i=(e=>(e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SnapDialogDefault="snap_dialog",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset",e))(i||{}),a={[s.ChainId.goerli]:"goerli",[s.ChainId.sepolia]:"sepolia",[s.ChainId.mainnet]:"mainnet",[s.ChainId["linea-goerli"]]:"linea-goerli",[s.ChainId["linea-sepolia"]]:"linea-sepolia",[s.ChainId["linea-mainnet"]]:"linea-mainnet",[s.ChainId.aurora]:"aurora"};r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH"},r.BUILT_IN_NETWORKS=n,r.OPENSEA_PROXY_URL="https://proxy.api.cx.metamask.io/opensea/v1/api/v2",r.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",r.NFT_API_VERSION="1",r.NFT_API_TIMEOUT=15e3,r.ORIGIN_METAMASK="metamask",r.ApprovalType=i,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=a}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/chunk-PFNSOF67.js"}],[2126,{"./chunk-2CQ3YJMB.js":2121,"./chunk-DBJSLKNR.js":2122,"./chunk-F775U3C2.js":2123,"./chunk-M6G3ISXG.js":2124,"./chunk-PFNSOF67.js":2125},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-M6G3ISXG.js");e("./chunk-DBJSLKNR.js");var n=e("./chunk-2CQ3YJMB.js"),i=e("./chunk-PFNSOF67.js"),a=e("./chunk-F775U3C2.js");r.ASSET_TYPES=i.ASSET_TYPES,r.ApprovalType=i.ApprovalType,r.BNToHex=n.BNToHex,r.BUILT_IN_NETWORKS=i.BUILT_IN_NETWORKS,r.BuiltInNetworkName=a.BuiltInNetworkName,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=i.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP,r.ChainId=a.ChainId,r.ERC1155=i.ERC1155,r.ERC1155_INTERFACE_ID=i.ERC1155_INTERFACE_ID,r.ERC1155_METADATA_URI_INTERFACE_ID=i.ERC1155_METADATA_URI_INTERFACE_ID,r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=i.ERC1155_TOKEN_RECEIVER_INTERFACE_ID,r.ERC20=i.ERC20,r.ERC721=i.ERC721,r.ERC721_ENUMERABLE_INTERFACE_ID=i.ERC721_ENUMERABLE_INTERFACE_ID,r.ERC721_INTERFACE_ID=i.ERC721_INTERFACE_ID,r.ERC721_METADATA_INTERFACE_ID=i.ERC721_METADATA_INTERFACE_ID,r.FALL_BACK_VS_CURRENCY=i.FALL_BACK_VS_CURRENCY,r.GANACHE_CHAIN_ID=i.GANACHE_CHAIN_ID,r.GWEI=i.GWEI,r.IPFS_DEFAULT_GATEWAY_URL=i.IPFS_DEFAULT_GATEWAY_URL,r.InfuraNetworkType=a.InfuraNetworkType,r.MAX_SAFE_CHAIN_ID=i.MAX_SAFE_CHAIN_ID,r.NFT_API_BASE_URL=i.NFT_API_BASE_URL,r.NFT_API_TIMEOUT=i.NFT_API_TIMEOUT,r.NFT_API_VERSION=i.NFT_API_VERSION,r.NetworkType=a.NetworkType,r.NetworksTicker=a.NetworksTicker,r.OPENSEA_PROXY_URL=i.OPENSEA_PROXY_URL,r.ORIGIN_METAMASK=i.ORIGIN_METAMASK,r.RPC=i.RPC,r.TESTNET_TICKER_SYMBOLS=i.TESTNET_TICKER_SYMBOLS,r.convertHexToDecimal=n.convertHexToDecimal,r.detectSIWE=s.detectSIWE,r.fetchWithErrorHandling=n.fetchWithErrorHandling,r.fractionBN=n.fractionBN,r.fromHex=n.fromHex,r.getBuyURL=n.getBuyURL,r.gweiDecToWEIBN=n.gweiDecToWEIBN,r.handleFetch=n.handleFetch,r.hexToBN=n.hexToBN,r.hexToText=n.hexToText,r.isInfuraNetworkType=a.isInfuraNetworkType,r.isNetworkType=a.isNetworkType,r.isNonEmptyArray=n.isNonEmptyArray,r.isPlainObject=n.isPlainObject,r.isSafeChainId=n.isSafeChainId,r.isSafeDynamicKey=n.isSafeDynamicKey,r.isSmartContractCode=n.isSmartContractCode,r.isValidHexAddress=n.isValidHexAddress,r.isValidJson=n.isValidJson,r.isValidSIWEOrigin=s.isValidSIWEOrigin,r.normalizeEnsName=n.normalizeEnsName,r.parseDomainParts=s.parseDomainParts,r.query=n.query,r.safelyExecute=n.safelyExecute,r.safelyExecuteWithTimeout=n.safelyExecuteWithTimeout,r.successfulFetch=n.successfulFetch,r.timeoutFetch=n.timeoutFetch,r.toChecksumHexAddress=n.toChecksumHexAddress,r.toHex=n.toHex,r.weiHexToGweiDec=n.weiHexToGweiDec}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[2127,{"./bytes":2130,"./constants":2131,"./helpers":2133,"./internal":2135,"@ethereumjs/rlp":442,buffer:3576,"ethereum-cryptography/keccak":3804,"ethereum-cryptography/secp256k1":3821,"ethereum-cryptography/utils":3823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const s=e("@ethereumjs/rlp"),n=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),a=e("ethereum-cryptography/utils"),o=e("./bytes"),c=e("./constants"),l=e("./helpers"),u=e("./internal"),d=BigInt(0);class h{constructor(e=d,t=d,r=c.KECCAK256_RLP,s=c.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=s,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:s,codeHash:n}=e;return new h(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,r!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):undefined,s!==undefined?(0,o.toBuffer)(s):undefined,n!==undefined?(0,o.toBuffer)(n):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(s.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,s,n]=e;return new h((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),s,n)}_validate(){if(this.nonce<d)throw new Error("nonce must be greater than zero");if(this.balance<d)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(s.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===d&&this.nonce===d&&this.codeHash.equals(c.KECCAK256_NULL)}}r.Account=h;r.isValidAddress=function(e){try{(0,l.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,l.assertIsHexString)(e);const s=(0,u.stripHexPrefix)(e).toLowerCase();let i="";if(r!==undefined){i=(0,o.bufferToBigInt)((0,o.toBuffer)(r)).toString()+"0x"}const c=t.from(i+s,"utf8"),d=(0,a.bytesToHex)((0,n.keccak256)(c));let h="0x";for(let e=0;e<s.length;e++)parseInt(d[e],16)>=8?h+=s[e].toUpperCase():h+=s[e];return h};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(r),(0,o.bufferToBigInt)(r)===BigInt(0)?t.from((0,n.keccak256)(s.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,n.keccak256)(s.RLP.encode((0,o.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,s){if((0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(r),(0,l.assertIsBuffer)(s),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const i=(0,n.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,n.keccak256)(s)]));return(0,o.toBuffer)(i).slice(-20)};r.isValidPrivate=function(e){return i.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,l.assertIsBuffer)(e),64===e.length)try{return i.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return i.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,l.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,n.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,l.assertIsBuffer)(e),t.from(i.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,l.assertIsBuffer)(e),64!==e.length&&(e=t.from(i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function m(e){const[t,r,s,n]=e;return[t,r,0===(0,o.arrToBufArr)(s).length?c.KECCAK256_RLP:s,0===(0,o.arrToBufArr)(n).length?c.KECCAK256_NULL:n]}r.isZeroAddress=function(e){try{(0,l.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=m;const p=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,s,n]=e;return[t,r,(0,o.arrToBufArr)(s).equals(c.KECCAK256_RLP)?p:s,(0,o.arrToBufArr)(n).equals(c.KECCAK256_NULL)?p:n]},r.accountBodyToRLP=function(e,t=!0){const r=t?m(e):e;return(0,o.arrToBufArr)(s.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/account.js"}],[2128,{"./account":2127,"./bytes":2130,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const s=e("./account"),n=e("./bytes");class i{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new i((0,n.zeros)(20))}static fromString(e){if(!(0,s.isValidAddress)(e))throw new Error("Invalid address");return new i((0,n.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,s.pubToAddress)(e);return new i(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,s.privateToAddress)(e);return new i(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new i((0,s.generateAddress)(e.buf,(0,n.bigIntToBuffer)(t)))}static generate2(e,r,n){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(n))throw new Error("Expected initCode to be a Buffer");return new i((0,s.generateAddress2)(e.buf,r,n))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(i.zero())}isPrecompileOrSystemAddress(){const e=(0,n.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=i}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/address.js"}],[2129,{events:3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const s=e("events");class n extends s.EventEmitter{emit(e,...t){let[r,s]=t;const n=this;let i=n._events[e]??[];return s===undefined&&"function"==typeof r&&(s=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:s},s=undefined),i=Array.isArray(i)?i:[i],async function(e,t,r){let s;for await(const n of t)try{n.length<2?n.call(e,r):await new Promise(((t,s)=>{n.call(e,r,(e=>{e?s(e):t()}))}))}catch(e){s=e}if(s)throw s}(n,i.slice(),r).then(s).catch(s),n.listenerCount(e)>0}once(e,t){const r=this;let s;if("function"!=typeof t)throw new TypeError("listener must be a function");return s=t.length>=2?function(n,i){r.removeListener(e,s),t(n,i)}:function(n){r.removeListener(e,s),t(n,s)},r.on(e,s),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,s){let n,i,a=this._events[e]??[];const o="after"===s?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),i=a.length,n=a.length;n--;)if(a[n]===t){i=n+o;break}return a.splice(i,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=n}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[213,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);t.meta.version=i;const r=function(e){if(!(0,n.hasProperty)(e,"SnapController")||!(0,n.hasProperty)(e,"PermissionController")||!(0,n.isObject)(e.PermissionController))return e;const{PermissionController:t}=e,{subjects:r}=t;if(!(0,n.isObject)(r))return e;const i="wallet_snap_";for(const[t,a]of Object.entries(r)){if(!(0,n.isObject)(a)||!(0,n.isObject)(a.permissions))return e;let r,o=1;const{permissions:c}=a,l={...c};for(const[a,u]of Object.entries(c))if(a.startsWith(i)){if(!(0,n.isObject)(u)||!(0,n.hasProperty)(u,"id")||!(0,n.hasProperty)(u,"date"))return e;if((0,n.hasProperty)(l,"wallet_snap")||(l.wallet_snap={caveats:[{type:"snapIds",value:{}}],invoker:t,parentCapability:"wallet_snap"}),!(0,n.isObject)(l.wallet_snap))return e;if(!(0,s.isArray)(l.wallet_snap.caveats))return e;const c=a.slice(i.length),d=l.wallet_snap.caveats[0];if(!(0,n.isObject)(d))return e;if(!(0,n.hasProperty)(d,"type")||"snapIds"!==d.type||!(0,n.hasProperty)(d,"value")||!(0,n.isObject)(d.value))return e;if(d.value[c]={},"number"!=typeof u.date||"string"!=typeof u.id)return e;u.date>o&&(o=u.date,r=u.id),delete l[a]}l.wallet_snap&&(l.wallet_snap.date=o,l.wallet_snap.id=r,a.permissions=l)}return e}(t.data);return t.data=r,t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=81}}},{package:"$root$",file:"app/scripts/migrations/081.ts"}],[2130,{"./helpers":2133,"./internal":2135,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const s=e("./helpers"),n=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const s=(0,r.intToHex)(e);return t.from((0,n.padToEven)(s.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const i=function(e,t,s){const n=(0,r.zeros)(t);return s?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,s.assertIsBuffer)(e),i(e,t,!1)};r.setLengthRight=function(e,t){return(0,s.assertIsBuffer)(e),i(e,t,!0)};const a=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,s.assertIsBuffer)(e),a(e)};r.unpadArray=function(e){return(0,s.assertIsArray)(e),a(e)};r.unpadHexString=function(e){return(0,s.assertIsHexString)(e),e=(0,n.stripHexPrefix)(e),"0x"+a(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,n.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,n.padToEven)((0,n.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function c(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=o,r.bigIntToBuffer=c;r.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,o(e))};r.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,n.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const s=t.isBuffer(e)?e.toString("hex"):e;return s.length<=r?s:s.slice(0,r)+"…"};r.toUtf8=function(e){if((e=(0,n.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let s=0;s<e.length;s++)t.push((0,r.baToJSON)(e[s]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(c(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/bytes.js"}],[2131,{buffer:3576,"ethereum-cryptography/secp256k1":3821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const s=e("buffer"),n=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=n.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=n.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=s.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=s.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=s.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=s.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/constants.js"}],[2132,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,s=0;s<e.length;r+=1,s+=2)t[r]=e[s]<<4|e[s+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const s=new Uint8Array(e.length/2+1);return s[0]=t<<5,1&~e.length||(s[0]|=16,s[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,s.subarray(1)),s};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const s=e[t];r[2*t]=s/16,r[2*t+1]=s%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const s=2-(1&t[0]);return t.subarray(s)}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/encoding.js"}],[2133,{"../../../../../../../../../is-buffer/index.js":4194,"./internal":2135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const s=e("./internal");r.assertIsHexString=function(e){if(!(0,s.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/helpers.js"}],[2134,{"./account":2127,"./address":2128,"./asyncEventEmitter":2129,"./bytes":2130,"./constants":2131,"./encoding":2132,"./internal":2135,"./lock":2136,"./provider":2137,"./signature":2138,"./types":2139,"./units":2140,"./withdrawal":2141},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,n(e("./constants"),r),n(e("./units"),r),n(e("./account"),r),n(e("./address"),r),n(e("./withdrawal"),r),n(e("./signature"),r),n(e("./bytes"),r),n(e("./types"),r),n(e("./encoding"),r),n(e("./asyncEventEmitter"),r);var i=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return i.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return i.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),n(e("./lock"),r),n(e("./provider"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/index.js"}],[2135,{buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function s(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=s,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const s=e.length;for("0x"===e.substring(0,2)&&(r=2);r<s;r+=2){const s=parseInt(e.substr(r,2),16);t+=String.fromCharCode(s)}return t},r.fromUtf8=function(t){return`0x${s(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const s=e.charCodeAt(r).toString(16);t+=s.length<2?`0${s}`:s}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const s=[];for(let n=0;n<e.length;n++){let i=e[n][t];if(!0!==r||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";s.push(i)}return s},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/internal.js"}],[2136,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/lock.js"}],[2137,{"micro-ftch":4425},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const s=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,s.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/provider.js"}],[2138,{"./bytes":2130,"./constants":2131,"./helpers":2133,buffer:3576,"ethereum-cryptography/keccak":3804,"ethereum-cryptography/secp256k1":3821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const s=e("ethereum-cryptography/keccak"),n=e("ethereum-cryptography/secp256k1"),i=e("./bytes"),a=e("./constants"),o=e("./helpers");function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function l(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,s){const i=n.secp256k1.sign(e,r),a=i.toCompactRawBytes();return{r:t.from(a.slice(0,32)),s:t.from(a.slice(32,64)),v:s===undefined?BigInt(i.recovery+27):BigInt(i.recovery+35)+BigInt(s)*BigInt(2)}};r.ecrecover=function(e,r,s,a,o){const u=t.concat([(0,i.setLengthLeft)(s,32),(0,i.setLengthLeft)(a,32)],64),d=c(r,o);if(!l(d))throw new Error("Invalid signature v value");const h=n.secp256k1.Signature.fromCompact(u).addRecoveryBit(Number(d)).recoverPublicKey(e);return t.from(h.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,s,n){if(!l(c(e,n)))throw new Error("Invalid signature v value");return(0,i.bufferToHex)(t.concat([(0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(s,32),(0,i.toBuffer)(e)]))};r.toCompactSig=function(e,r,s,n){if(!l(c(e,n)))throw new Error("Invalid signature v value");let a=s;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(a=t.from(s),a[0]|=128),(0,i.bufferToHex)(t.concat([(0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(a,32)]))};r.fromRpcSig=function(e){const t=(0,i.toBuffer)(e);let r,s,n;if(t.length>=65)r=t.slice(0,32),s=t.slice(32,64),n=(0,i.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),s=t.slice(32,64),n=BigInt((0,i.bufferToInt)(t.slice(32,33))>>7),s[0]&=127}return n<27&&(n+=BigInt(27)),{v:n,r:r,s:s}};r.isValidSignature=function(e,t,r,s=!0,n){if(32!==t.length||32!==r.length)return!1;if(!l(c(e,n)))return!1;const o=(0,i.bufferToBigInt)(t),u=(0,i.bufferToBigInt)(r);return!(o===BigInt(0)||o>=a.SECP256K1_ORDER||u===BigInt(0)||u>=a.SECP256K1_ORDER)&&!(s&&u>=a.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,s.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/signature.js"}],[2139,{"./bytes":2130,"./internal":2135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const s=e("./bytes"),n=e("./internal");var i;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(i=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,n.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,s.toBuffer)(e);switch(t){case i.Buffer:return r;case i.BigInt:return(0,s.bufferToBigInt)(r);case i.Number:{const e=(0,s.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case i.PrefixedHexString:return(0,s.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/types.js"}],[214,{"@metamask/utils":2787,lodash:4382,loglevel:4388,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=c,t.data=function(e){if(!(0,i.hasProperty)(e,"PreferencesController"))return o.default.warn("state.PreferencesController is undefined"),e;if(!(0,i.isObject)(e.PreferencesController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController)),e}if(!(0,i.hasProperty)(e,"NetworkController")||!(0,i.isObject)(e.NetworkController)){var s,n;return null===(s=global.sentry)||void 0===s||null===(n=s.captureException)||void 0===n||n.call(s,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,i.hasProperty)(e.PreferencesController,"frequentRpcListDetail")||!Array.isArray(e.PreferencesController.frequentRpcListDetail)){var c,l;if(!(e.NetworkController.networkConfigurations&&e.PreferencesController.frequentRpcListDetail===undefined))null===(c=global.sentry)||void 0===c||null===(l=c.captureException)||void 0===l||l.call(c,new Error("typeof state.PreferencesController.frequentRpcListDetail is "+typeof e.PreferencesController.frequentRpcListDetail));return e}if(!e.PreferencesController.frequentRpcListDetail.every(i.isObject)){var u,d;const t=e.PreferencesController.frequentRpcListDetail.find((e=>!(0,i.isObject)(e)));return null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error("state.PreferencesController.frequentRpcListDetail contains an element of type "+typeof t)),e}const{PreferencesController:h,NetworkController:m}=e,{frequentRpcListDetail:p}=h;if(!Array.isArray(p))return e;const f=p.reduce(((e,{rpcUrl:t,chainId:r,ticker:s,nickname:n,rpcPrefs:i})=>({...e,[(0,a.v4)()]:{rpcUrl:t,chainId:r,ticker:s,rpcPrefs:i,nickname:n}})),{});return delete h.frequentRpcListDetail,{...e,NetworkController:{...m,networkConfigurations:f},PreferencesController:{...h}}}(t.data),t},r.version=void 0;var s,n=e("lodash"),i=e("@metamask/utils"),a=e("uuid"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s};const c=r.version=82}}},{package:"$root$",file:"app/scripts/migrations/082.ts"}],[2140,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/units.js"}],[2141,{"./address":2128,"./bytes":2130,"./types":2139,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const s=e("./address"),n=e("./bytes"),i=e("./types");class a{constructor(e,t,r,s){this.index=e,this.validatorIndex=t,this.address=r,this.amount=s}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:n,amount:o}=e,c=(0,i.toType)(t,i.TypeOutput.BigInt),l=(0,i.toType)(r,i.TypeOutput.BigInt),u=new s.Address((0,i.toType)(n,i.TypeOutput.Buffer)),d=(0,i.toType)(o,i.TypeOutput.BigInt);return new a(c,l,u,d)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,s,n]=e;return a.fromWithdrawalData({index:t,validatorIndex:r,address:s,amount:n})}static toBufferArray(e){const{index:r,validatorIndex:n,address:a,amount:o}=e,c=(0,i.toType)(r,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(r,i.TypeOutput.Buffer),l=(0,i.toType)(n,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(n,i.TypeOutput.Buffer);let u;u=a instanceof s.Address?a.buf:(0,i.toType)(a,i.TypeOutput.Buffer);return[c,l,u,(0,i.toType)(o,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(o,i.TypeOutput.Buffer)]}raw(){return a.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,n.bigIntToHex)(this.index),validatorIndex:(0,n.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,n.bigIntToHex)(this.amount)}}}r.Withdrawal=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[2142,{"./errors.cjs":2150,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const s=e("@metamask/superstruct"),n=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,s.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/assert.cjs"}],[2143,{"./assert.cjs":2142,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,s.pattern)(e,o)}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/base64.cjs"}],[2144,{"./assert.cjs":2142,"./hex.cjs":2151,"@scure/base":2845,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const s=e("@scure/base"),n=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function d(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=l(),r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=t[e[s]];return(0,i.add0x)(r.join(""))}function m(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,s=new Uint8Array(r.length/2);for(let e=0;e<s.length;e++){const t=r.charCodeAt(2*e),n=r.charCodeAt(2*e+1),i=t-(t<o?a:c),l=n-(n<o?a:c);s[e]=16*i+l}return s}function f(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function v(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function _(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):v(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=m,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=m(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),s.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=f,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=g,r.stringToBytes=v,r.base64ToBytes=function(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),s.base64.decode(e)},r.valueToBytes=_,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let s=0;s<e.length;s++){const n=_(e[s]);t[s]=n,r+=n.length}const s=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)s.set(t[e],r),r+=t[e].length;return s},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/bytes.cjs"}],[2145,{"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const s=e("@metamask/superstruct");function n(e){return(0,s.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,s.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,s.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=n,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,s.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,s.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!n(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2146,{"./base64.cjs":2143,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const s=e("@metamask/superstruct"),n=e("./base64.cjs");r.ChecksumStruct=(0,s.size)((0,n.base64)((0,s.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/checksum.cjs"}],[2147,{"./assert.cjs":2142,"./bytes.cjs":2144,"./hex.cjs":2151,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,s.union)([(0,s.number)(),(0,s.bigint)(),(0,s.string)(),a.StrictHexStruct]),c=(0,s.coerce)((0,s.number)(),o,Number),l=(0,s.coerce)((0,s.bigint)(),o,BigInt),u=((0,s.union)([a.StrictHexStruct,(0,s.instance)(Uint8Array)]),(0,s.coerce)((0,s.instance)(Uint8Array),(0,s.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,s.coerce)(a.StrictHexStruct,(0,s.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,s.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof s.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,s.create)(e,l)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,s.create)(e,u)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,s.create)(e,d)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/coercers.cjs"}],[2148,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}get(e){return i(this,s,"f").get(e)}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/collections.cjs"}],[2149,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[215,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,n.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}const{NetworkController:s}=e;if(!(0,n.isObject)(s.networkConfigurations)){var i,a;return null===(i=global.sentry)||void 0===i||null===(a=i.captureException)||void 0===a||a.call(i,new Error("typeof NetworkController.networkConfigurations is "+typeof s.networkConfigurations)),e}const{networkConfigurations:o}=s,c={};for(const t of Object.keys(o)){const r=o[t];if(!(0,n.isObject)(r))return e;c[t]={...r,id:t}}return{...e,NetworkController:{...s,networkConfigurations:c}}}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=83}}},{package:"$root$",file:"app/scripts/migrations/083.ts"}],[2150,{"./misc.cjs":2156,"pony-cause":4519},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const s=e("pony-cause"),n=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,n.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new s.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/errors.cjs"}],[2151,{"./assert.cjs":2142,"./bytes.cjs":2144,"@metamask/superstruct":2643,"@noble/hashes/sha3":2827},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const s=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,s.is)(e,r.HexStruct)}function c(e){return(0,s.is)(e,r.StrictHexStruct)}function l(e){(0,i.assert)((0,s.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,s.is)(r,(0,s.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function u(e){return!!(0,s.is)(e,r.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,s.pattern)((0,s.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,s.is)(e,r.HexAddressStruct)||u(e)},r.getChecksumAddress=l,r.isValidChecksumAddress=u,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/hex.cjs"}],[2152,{"./assert.cjs":2142,"./base64.cjs":2143,"./bytes.cjs":2144,"./caip-types.cjs":2145,"./checksum.cjs":2146,"./coercers.cjs":2147,"./collections.cjs":2148,"./encryption-types.cjs":2149,"./errors.cjs":2150,"./hex.cjs":2151,"./json.cjs":2153,"./keyring.cjs":2154,"./logging.cjs":2155,"./misc.cjs":2156,"./number.cjs":2157,"./opaque.cjs":2158,"./promise.cjs":2159,"./time.cjs":2160,"./transaction-types.cjs":2161,"./versions.cjs":2162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./assert.cjs"),r),n(e("./base64.cjs"),r),n(e("./bytes.cjs"),r),n(e("./caip-types.cjs"),r),n(e("./checksum.cjs"),r),n(e("./coercers.cjs"),r),n(e("./collections.cjs"),r),n(e("./encryption-types.cjs"),r),n(e("./errors.cjs"),r),n(e("./hex.cjs"),r),n(e("./json.cjs"),r),n(e("./keyring.cjs"),r),n(e("./logging.cjs"),r),n(e("./misc.cjs"),r),n(e("./number.cjs"),r),n(e("./opaque.cjs"),r),n(e("./promise.cjs"),r),n(e("./time.cjs"),r),n(e("./transaction-types.cjs"),r),n(e("./versions.cjs"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/index.cjs"}],[2153,{"./assert.cjs":2142,"./misc.cjs":2156,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new s.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,s.object)(e),r.exactOptional=o;function c(e){return(0,s.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,s.union)([(0,s.literal)(null),(0,s.boolean)(),(0,s.define)("finite number",(e=>(0,s.is)(e,(0,s.number)())&&Number.isFinite(e))),(0,s.string)(),(0,s.array)((0,s.lazy)((()=>r.UnsafeJsonStruct))),(0,s.record)((0,s.string)(),(0,s.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,s.coerce)(r.UnsafeJsonStruct,(0,s.any)(),(e=>((0,n.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,n.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,s.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,s.nullable)((0,s.union)([(0,s.number)(),(0,s.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,s.integer)(),message:(0,s.string)(),data:o(r.JsonStruct),stack:o((0,s.string)())}),r.JsonRpcParamsStruct=(0,s.union)([(0,s.record)((0,s.string)(),r.JsonStruct),(0,s.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,s.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,s.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,s.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,s.optional)((0,s.unknown)()),error:(0,s.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,s.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,s.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,s.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,s.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,s.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,s.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:s}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||s&&null===e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/json.cjs"}],[2154,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/keyring.cjs"}],[2155,{debug:3721},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const n=(0,s(e("debug")).default)("metamask");r.createProjectLogger=function(e){return n.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/logging.cjs"}],[2156,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function s(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=s,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>s(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/misc.cjs"}],[2157,{"./assert.cjs":2142,"./hex.cjs":2151},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const s=e("./assert.cjs"),n=e("./hex.cjs");r.numberToHex=e=>((0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/number.cjs"}],[2158,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/opaque.cjs"}],[2159,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const s=new Promise(((e,s)=>{t=e,r=s}));return e&&s.catch((e=>{})),{promise:s,resolve:t,reject:r}}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/promise.cjs"}],[216,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,n.hasProperty)(e,"NetworkController")||!(0,n.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,n.hasProperty)(e.NetworkController,"network")){var s,i;if(e.NetworkController.networkId===undefined)null===(s=global.sentry)||void 0===s||null===(i=s.captureException)||void 0===i||i.call(s,new Error("typeof state.NetworkController.network is "+typeof e.NetworkController.network));return e}const a={...e.NetworkController};"loading"===a.network?(a.networkId=null,a.networkStatus="unknown"):(a.networkId=a.network,a.networkStatus="available");return delete a.network,{...e,NetworkController:a}}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=84}}},{package:"$root$",file:"app/scripts/migrations/084.ts"}],[2160,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const s=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return s(e,"count"),e*t},r.timeSince=function(e){return s(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/time.cjs"}],[2161,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2162,{"./assert.cjs":2142,"@metamask/superstruct":2643,semver:4845},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const s=e("@metamask/superstruct"),n=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/versions.cjs"}],[2163,{"./has-tx-object":2164,"@babel/runtime/helpers/asyncToGenerator":2064,"@babel/runtime/helpers/interopRequireDefault":2065,"@babel/runtime/regenerator":2068,"@metamask/ethjs-filter":2166,"@metamask/ethjs-util":2170,"ethjs-abi":3871,"js-sha3":4219,"promise-to-callback":4525},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=e("@babel/runtime/helpers/interopRequireDefault"),n=s(e("@babel/runtime/regenerator")),i=s(e("@babel/runtime/helpers/asyncToGenerator")),a=e("ethjs-abi"),o=e("@metamask/ethjs-filter"),c=e("@metamask/ethjs-util").getKeys,l=e("js-sha3").keccak_256,u=e("promise-to-callback"),d=e("./has-tx-object");t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=this;function r(e){return function(){var t,r=[].slice.call(arguments);"function"==typeof r[r.length-1]&&(t=r.pop());var n=function(e){return s.apply(this,arguments)}({methodObject:e,methodArgs:r});return t?u(n)(t):n}}function s(){return(s=(0,i.default)(n.default.mark((function e(r){var s,i,o,c,l,u,h;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.methodObject,i=r.methodArgs,o="call",c={},d(i)&&(c=i.pop()),(l=Object.assign({},t.defaultTxObject,c,{to:t.address})).data=a.encodeMethod(s,i),!1===s.constant&&(o="sendTransaction"),e.next=9,t.query[o](l);case 9:if(u=e.sent,"call"!==o){e.next=20;break}return e.prev=11,h=a.decodeMethod(s,u),e.abrupt("return",h);case 16:throw e.prev=16,e.t0=e.catch(11),new Error("[ethjs-contract] while formatting incoming raw call data "+JSON.stringify(u)+" "+e.t0);case 20:return e.abrupt("return",u);case 21:case"end":return e.stop()}}),e,null,[[11,16]])})))).apply(this,arguments)}t.abi=e.contractABI||[],t.query=e.query,t.address=e.address||"0x",t.bytecode=e.contractBytecode||"0x",t.defaultTxObject=e.contractDefaultTxObject||{},t.filters=new o(t.query),(h=t.abi,h.filter((function(e){return("function"===e.type||"event"===e.type)&&e.name.length>0}))).forEach((function(e){"function"===e.type?t[e.name]=r(e):"event"===e.type&&(t[e.name]=function(e){return function(){var r=[].slice.call(arguments),s=c(e.inputs,"type",!1),n=["0x"+l(e.name+"("+s.join(",")+")")],i=Object.assign({},r[0])||{},o=Object.assign({},r[0]||{},{to:t.address,topics:n}),u=Object.assign({},i,{decoder:function(t){return a.decodeEvent(e,t,n)},defaultFilterObject:o});return new t.filters.Filter(u)}}(e))}));var h}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-contract/lib/contract.js"}],[2164,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=["from","to","data","value","gasPrice","gas"];t.exports=function(e){if(!Array.isArray(e)||0===e.length)return!1;var t=e[e.length-1];if(!t)return!1;if("object"!=typeof t)return!1;if(0===Object.keys(t).length)return!0;var r=Object.keys(t);if(s.some((function(e){return r.includes(e)})))return!0;return!1}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-contract/lib/has-tx-object.js"}],[2165,{"./contract":2163,"./has-tx-object":2164,"@metamask/ethjs-filter":2166,"@metamask/ethjs-util":2170,"ethjs-abi":3871,"js-sha3":4219},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=e("ethjs-abi"),n=(e("js-sha3").keccak_256,e("@metamask/ethjs-filter"),e("@metamask/ethjs-util").getKeys),i=e("./contract"),a=e("./has-tx-object");t.exports=function(e){return function(t,r,o){if(!Array.isArray(t))throw new Error("[ethjs-contract] Contract ABI must be type Array, got type "+typeof t);if(void 0!==r&&"string"!=typeof r)throw new Error("[ethjs-contract] Contract bytecode must be type String, got type "+typeof r);if(void 0!==o&&"object"!=typeof o)throw new Error("[ethjs-contract] Contract default tx object must be type Object, got type "+typeof t);var c={at:function(s){return new i({address:s,query:e,contractBytecode:r,contractDefaultTxObject:o,contractABI:t})},new:function(){var i={},c=null,l=[].slice.call(arguments);"function"==typeof l[l.length-1]&&(c=l.pop()),a(l)&&(i=l.pop());var u=function(e){return e.filter((function(e){return"constructor"===e.type}))[0]}(t),d=Object.assign({},o,i);if(r&&(d.data=r),u){var h=s.encodeParams(n(u.inputs,"type"),l).substring(2);d.data=""+d.data+h}return c?e.sendTransaction(d,c):e.sendTransaction(d)}};return c}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-contract/lib/index.js"}],[2166,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function s(e,t){function r(e){var r=this;r.filterId=null,r.options=Object.assign({delay:300,decoder:function(e){return e},defaultFilterObject:{}},e||{}),r.watchers={},r.interval=setInterval((function(){null!==r.filterId&&Object.keys(r.watchers).length>0&&t.getFilterChanges(r.filterId,(function(e,t){var s=[],n=null;if(!e)try{t.forEach((function(e,n){s[n]=t[n],"object"==typeof t[n]&&(s[n].data=r.options.decoder(s[n].data))}))}catch(e){n=new Error("[ethjs-filter] while decoding filter change event data from RPC '"+JSON.stringify(s)+"': "+e)}Object.keys(r.watchers).forEach((function(i){var a=r.watchers[i];!0!==a.stop?n?a.callback(n,null):e?a.callback(e,null):Array.isArray(s)&&t.length>0&&a.callback(e,s):delete r.watchers[i]}))}))}),r.options.delay)}return r.prototype.at=function(e){this.filterId=e},r.prototype.watch=function(e){var t=e||function(){},r=this,s=Math.random().toString(36).substring(7);return r.watchers[s]={callback:t,stop:!1,stopWatching:function(){r.watchers[s].stop=!0}},r.watchers[s]},r.prototype.uninstall=function(e){var r=this,s=e||null;r.watchers=Object.assign({}),clearInterval(r.interval);var n=new Promise((function(e,s){t.uninstallFilter(r.filterId,(function(t,r){t?s(t):e(r)}))}));return s&&n.then((function(e){return s(null,e)})).catch((function(e){return s(e,null)})),s?null:n},r.prototype.new=function(){var r=null,s=this,n=[],i=[].slice.call(arguments);"function"==typeof i[i.length-1]&&(r=i.pop()),"Filter"===e&&n.push(Object.assign(s.options.defaultFilterObject,i[i.length-1]||{}));var a=new Promise((function(r,i){n.push((function(e,t){e?i(e):(s.filterId=t,r(t))})),t["new"+e].apply(t,n)}));return r&&a.then((function(e){return r(null,e)})).catch((function(e){return r(e,null)})),r?null:a},r}t.exports=function e(t){var r=this;if(!(r instanceof e))throw new Error("the EthFilter object must be instantiated with `new` flag.. (e.g. `const filters = new EthFilter(query);`)");if("object"!=typeof t)throw new Error("the EthFilter object must be instantiated with an EthQuery instance (e.g. `const filters = new EthFilter(new EthQuery(provider));`). See github.com/ethjs/ethjs-query for more details..");r.Filter=s("Filter",t),r.BlockFilter=s("BlockFilter",t),r.PendingTransactionFilter=s("PendingTransactionFilter",t)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract>@metamask/ethjs-filter",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-filter/lib/index.js"}],[2167,{"@metamask/ethjs-util":2170,"@metamask/number-to-bn":1863,"ethjs-schema":3873,"strip-hex-prefix":4893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=e("@metamask/number-to-bn"),n=e("ethjs-schema"),i=e("@metamask/ethjs-util"),a=i.arrayContainsArray,o=i.getBinarySize,c=i.padToEven,l=e("strip-hex-prefix");function u(e,t,r){if(-1===["string","number","object"].indexOf(typeof e)||null===e)return e;var n=s(e),i=r&&n.toString(16).length%2?"0":"";if(s(e).isNeg())throw new Error("[ethjs-format] while formatting quantity '"+n.toString(10)+"', invalid negative number. Number must be positive or zero.");return t?"0x"+i+n.toString(16):n}function d(e,t){var r=e;return-1===n.tags.indexOf(e)&&(r=u(e,t)),r}function h(e,t){var r=e,s=0;if("string"==typeof e&&(r="0x"+c(l(e)),s=o(r)),"0x00"===r&&(r="0x0"),"number"==typeof t&&null!==e&&"0x"!==r&&"0x0"!==r&&(!/^[0-9A-Fa-f]+$/.test(l(r))||s!==2+2*t))throw new Error("[ethjs-format] hex string '"+r+"' must be an alphanumeric "+(2+2*t)+" utf8 byte hex (chars: a-fA-F) string, is "+s+" bytes");return r}function m(e,t,r){var s=Object.assign({},t),i=null;if("string"==typeof e&&(i="Boolean|EthSyncing"===e?Object.assign({},n.objects.EthSyncing):"DATA|Transaction"===e?Object.assign({},n.objects.Transaction):Object.assign({},n.objects[e])),!a(Object.keys(t),i.__required))throw new Error("[ethjs-format] object "+JSON.stringify(t)+" must contain properties: "+i.__required.join(", "));return Object.keys(i).forEach((function(e){"__required"!==e&&void 0!==t[e]&&(s[e]=f(i[e],t[e],r))})),s}function p(e,t,r,s){var n=t.slice(),i=e;if("Array|DATA"===e&&(i=["D"]),"FilterChange"===e&&"string"==typeof t[0]&&(i=["D32"]),!0===r&&"number"==typeof s&&t.length<s)throw new Error("array "+JSON.stringify(t)+" must contain at least "+s+" params, but only contains "+t.length+".");return i=i.slice(),t.forEach((function(e,t){var s=0;i.length>1&&(s=t),n[t]=f(i[s],e,r)})),n}function f(e,t,r,s){var n=t;return"Q"===e?n=u(t,r):"QP"===e?n=u(t,r,!0):"Q|T"===e?n=d(t,r):"D"===e?n=h(t):"D20"===e?n=h(t,20):"D32"===e?n=h(t,32):"object"==typeof t&&null!==t&&!1===Array.isArray(t)?n=m(e,t,r):Array.isArray(t)&&(n=p(e,t,r,s)),n}t.exports={schema:n,formatQuantity:u,formatQuantityOrTag:d,formatObject:m,formatArray:p,format:f,formatInputs:function(e,t){return f(n.methods[e][0],t,!0,n.methods[e][2])},formatOutputs:function(e,t){return f(n.methods[e][1],t,!1)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-query>@metamask/ethjs-format",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-format/lib/index.js"}],[2168,{"@metamask/ethjs-format":2167,"@metamask/ethjs-rpc":2169,"promise-to-callback":4525},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=e("@metamask/ethjs-format"),n=e("@metamask/ethjs-rpc"),i=e("promise-to-callback");function a(e,t){var r=this,s=t||{};if(!(this instanceof a))throw new Error('[ethjs-query] the Eth object requires the "new" flag in order to function normally (i.e. `const eth = new Eth(provider);`).');if("object"!=typeof e)throw new Error("[ethjs-query] the Eth object requires that the first input 'provider' must be an object, got '"+typeof e+"' (i.e. 'const eth = new Eth(provider);')");r.options=Object.assign({debug:s.debug||!1,logger:s.logger||console,jsonSpace:s.jsonSpace||0}),r.rpc=new n(e),r.setProvider=r.rpc.setProvider}function o(e,t){return function(){var r=null,n=null,a=this,o=[].slice.call(arguments),c=e.replace("eth_","");o.length>0&&"function"==typeof o[o.length-1]&&(r=o.pop());var l=function(){var r=this;return new Promise((function(i,l){if(o.length<t[2])l(new Error("[ethjs-query] method '"+c+"' requires at least "+t[2]+" input (format type "+t[0][0]+"), "+o.length+" provided. For more information visit: https://github.com/ethereum/wiki/wiki/JSON-RPC#"+e.toLowerCase()));else if(o.length>t[0].length)l(new Error("[ethjs-query] method '"+c+"' requires at most "+t[0].length+" params, "+o.length+" provided '"+JSON.stringify(o,null,a.options.jsonSpace)+"'. For more information visit: https://github.com/ethereum/wiki/wiki/JSON-RPC#"+e.toLowerCase()));else{t[3]&&o.length<t[3]&&o.push("latest"),r.log("attempting method formatting for '"+c+"' with inputs "+JSON.stringify(o,null,r.options.jsonSpace));try{n=s.formatInputs(e,o),r.log("method formatting success for '"+c+"' with formatted result: "+JSON.stringify(n,null,r.options.jsonSpace))}catch(e){return void l(new Error("[ethjs-query] while formatting inputs '"+JSON.stringify(o,null,r.options.jsonSpace)+"' for method '"+c+"' error: "+e))}r.rpc.sendAsync({method:e,params:n}).then((function(t){r.log("attempting method formatting for '"+c+"' with raw outputs: "+JSON.stringify(t,null,r.options.jsonSpace));var n=s.formatOutputs(e,t);r.log("method formatting success for '"+c+"' formatted result: "+JSON.stringify(n,null,r.options.jsonSpace)),i(n)})).catch((function(e){l(e)}))}}))}.call(this);return r?i(l)(r):l}}t.exports=a,a.prototype.log=function(e){this.options.debug&&this.options.logger.log("[ethjs-query log] "+e)},Object.keys(s.schema.methods).forEach((function(e){Object.defineProperty(a.prototype,e.replace("eth_",""),{enumerable:!0,value:o(e,s.schema.methods[e])})}))}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-query",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-query/lib/index.js"}],[2169,{"promise-to-callback":4525},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=e("promise-to-callback");function n(e,t){var r=this,s=t||{};if(!(this instanceof n))throw new Error('[ethjs-rpc] the EthRPC object requires the "new" flag in order to function normally (i.e. `const eth = new EthRPC(provider);`).');r.options=Object.assign({jsonSpace:s.jsonSpace||0,max:s.max||9999999999999}),r.idCounter=Math.floor(Math.random()*r.options.max),r.setProvider=function(e){if("object"!=typeof e)throw new Error("[ethjs-rpc] the EthRPC object requires that the first input 'provider' must be an object, got '"+typeof e+"' (i.e. 'const eth = new EthRPC(provider);')");r.currentProvider=e},r.setProvider(e)}t.exports=n,n.prototype.sendAsync=function(e,t){var r=this;r.idCounter=r.idCounter%r.options.max;var n,i,a=(n=e,i=r.idCounter++,Object.assign({},{id:i,jsonrpc:"2.0",params:[]},n)),o=new Promise((function(e,t){r.currentProvider.sendAsync(a,(function(s,n){var i=n||{};if(s||i.error){var o="[ethjs-rpc] "+(i.error?"rpc":"")+" error with payload "+JSON.stringify(a,null,r.options.jsonSpace)+" "+(s?String(s):JSON.stringify(i.error,null,r.options.jsonSpace)),c=new Error(o);return c.value=s||i.error,void t(c)}e(i.result)}))}));return t?s(o)(t):o}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-query>@metamask/ethjs-rpc",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-rpc/lib/index.js"}],[217,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,n.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}return delete e.NetworkController.previousProviderStore,e}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=85}}},{package:"$root$",file:"app/scripts/migrations/085.ts"}],[2170,{buffer:3576,"is-hex-prefixed":4199,"strip-hex-prefix":4893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var s=e("is-hex-prefixed"),n=e("strip-hex-prefix");function i(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function a(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=a(e);return r.from(i(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:s,stripHexPrefix:n,padToEven:i,intToHex:a,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var s=e.charCodeAt(r).toString(16);t+=s.length<2?"0"+s:s}return"0x"+t},fromUtf8:function(e){return"0x"+i(r.from(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,s=e.length;for("0x"===e.substring(0,2)&&(r=2);r<s;r+=2){var n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},toUtf8:function(e){return r.from(i(n(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var s=[],n=0;n<e.length;n++){var i=e[n][t];if(r&&!i)i="";else if("string"!=typeof i)throw new Error("invalid abi");s.push(i)}return s},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract>@metamask/ethjs-util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-util/lib/index.js"}],[2171,{"./chunk-2XKEAKQG.js":2172,"./chunk-76FONEDA.js":2176,"./chunk-S6VGOPUY.js":2193,"./chunk-Z4BLTVTB.js":2201,"@metamask/eth-query":1395,"@metamask/utils":2787,events:3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y,k,w,b,T,S,E,P,I,A,j,C=e("./chunk-2XKEAKQG.js"),x=e("./chunk-76FONEDA.js"),N=e("./chunk-S6VGOPUY.js"),R=e("./chunk-Z4BLTVTB.js"),M=s(e("@metamask/eth-query")),B=e("@metamask/utils"),O=s(e("events")),L=B.createModuleLogger.call(void 0,N.projectLogger,"gas-fee-poller");n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakSet,m=function(){R.__privateGet.call(void 0,this,d)||(R.__privateMethod.call(void 0,this,g,v).call(this),R.__privateSet.call(void 0,this,d,!0),L("Started polling"))},p=new WeakSet,f=function(){R.__privateGet.call(void 0,this,d)&&(clearTimeout(R.__privateGet.call(void 0,this,u)),R.__privateSet.call(void 0,this,u,void 0),R.__privateSet.call(void 0,this,d,!1),L("Stopped polling"))},g=new WeakSet,v=async function(){await R.__privateMethod.call(void 0,this,_,y).call(this),R.__privateSet.call(void 0,this,u,setTimeout((()=>R.__privateMethod.call(void 0,this,g,v).call(this)),1e4))},_=new WeakSet,y=async function(){const e=R.__privateMethod.call(void 0,this,P,I).call(this);if(!e.length)return;L("Found unapproved transactions",e.length);const t=await R.__privateMethod.call(void 0,this,A,j).call(this,e);L("Retrieved gas fee controller data",t),await Promise.all(e.flatMap((e=>{const{chainId:r}=e,s=t.get(r);return R.__privateMethod.call(void 0,this,k,w).call(this,e,s)})))},k=new WeakSet,w=async function(e,t){const{id:r}=e,[s,n]=await Promise.all([R.__privateMethod.call(void 0,this,b,T).call(this,e,t),R.__privateMethod.call(void 0,this,S,E).call(this,e)]);(s||n)&&this.hub.emit("transaction-updated",{transactionId:r,gasFeeEstimates:s?.gasFeeEstimates,gasFeeEstimatesLoaded:s?.gasFeeEstimatesLoaded,layer1GasFee:n})},b=new WeakSet,T=async function(e,t){const{chainId:r,networkClientId:s}=e,n=new(0,M.default)(R.__privateGet.call(void 0,this,o).call(this,r,s)),a=x.getGasFeeFlow.call(void 0,e,R.__privateGet.call(void 0,this,i));a&&L("Found gas fee flow",a.constructor.name,e.id);const c={ethQuery:n,gasFeeControllerData:t,transactionMeta:e};let l;if(a)try{l=(await a.getGasFees(c)).estimates}catch(t){L("Failed to get suggested gas fees",e.id,t)}if(l||!e.gasFeeEstimatesLoaded)return L("Updated gas fee estimates",{gasFeeEstimates:l,transaction:e.id}),{gasFeeEstimates:l,gasFeeEstimatesLoaded:!0}},S=new WeakSet,E=async function(e){const{chainId:t,networkClientId:r}=e,s=R.__privateGet.call(void 0,this,o).call(this,t,r),n=await C.getTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:R.__privateGet.call(void 0,this,l),provider:s,transactionMeta:e});return n&&L("Updated layer 1 gas fee",n,e.id),n},P=new WeakSet,I=function(){return R.__privateGet.call(void 0,this,c).call(this).filter((e=>"unapproved"===e.status))},A=new WeakSet,j=async function(e){const t=new Map;for(const r of e){const{chainId:e,networkClientId:s}=r;if(t.has(e))continue;const i=s??R.__privateGet.call(void 0,this,n).call(this,e);t.set(e,i)}L("Extracted network client IDs by chain ID",t);const r=Array.from(t.entries()).map((async([e,t])=>[e,await R.__privateGet.call(void 0,this,a).call(this,{networkClientId:t})]));return new Map(await Promise.all(r))},r.GasFeePoller=class{constructor({findNetworkClientIdByChainId:e,gasFeeFlows:t,getGasFeeControllerEstimates:r,getProvider:s,getTransactions:v,layer1GasFeeFlows:y,onStateChange:w}){R.__privateAdd.call(void 0,this,h),R.__privateAdd.call(void 0,this,p),R.__privateAdd.call(void 0,this,g),R.__privateAdd.call(void 0,this,_),R.__privateAdd.call(void 0,this,k),R.__privateAdd.call(void 0,this,b),R.__privateAdd.call(void 0,this,S),R.__privateAdd.call(void 0,this,P),R.__privateAdd.call(void 0,this,A),this.hub=new(0,O.default),R.__privateAdd.call(void 0,this,n,void 0),R.__privateAdd.call(void 0,this,i,void 0),R.__privateAdd.call(void 0,this,a,void 0),R.__privateAdd.call(void 0,this,o,void 0),R.__privateAdd.call(void 0,this,c,void 0),R.__privateAdd.call(void 0,this,l,void 0),R.__privateAdd.call(void 0,this,u,void 0),R.__privateAdd.call(void 0,this,d,!1),R.__privateSet.call(void 0,this,n,e),R.__privateSet.call(void 0,this,i,t),R.__privateSet.call(void 0,this,l,y),R.__privateSet.call(void 0,this,a,r),R.__privateSet.call(void 0,this,o,s),R.__privateSet.call(void 0,this,c,v),w((()=>{R.__privateMethod.call(void 0,this,P,I).call(this).length?R.__privateMethod.call(void 0,this,h,m).call(this):R.__privateMethod.call(void 0,this,p,f).call(this)}))}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-2EU6346V.js"}],[2172,{"./chunk-S6VGOPUY.js":2193,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-S6VGOPUY.js"),n=e("@metamask/utils").createModuleLogger.call(void 0,s.projectLogger,"layer-1-gas-fee-flow");async function i({layer1GasFeeFlows:e,provider:t,transactionMeta:r}){const s=function(e,t){return t.find((t=>t.matchesTransaction(e)))}(r,e);if(s){n("Found layer 1 gas fee flow",s.constructor.name,r.id);try{const{layer1Fee:e}=await s.getLayer1Fee({provider:t,transactionMeta:r});return e}catch(e){return void n("Failed to get layer 1 gas fee",r.id,e)}}}r.updateTransactionLayer1GasFee=async function(e){const t=await i(e);if(!t)return;const{transactionMeta:r}=e;r.layer1GasFee=t,n("Updated layer 1 gas fee",t,r.id)},r.getTransactionLayer1GasFee=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-2XKEAKQG.js"}],[2173,{"./chunk-S6VGOPUY.js":2193,"./chunk-Z4BLTVTB.js":2201,"@metamask/controller-utils":2126,events:3874,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y,k,w,b,T,S,E,P,I,A,j,C,x,N,R,M,B,O,L,G,F,D,H,U,$,W,V,K,J,q,z,Y,X,Q,Z,ee,te,re=e("./chunk-S6VGOPUY.js"),se=e("./chunk-Z4BLTVTB.js"),ne=e("@metamask/controller-utils"),ie=e("events"),ae=(s=ie)&&s.__esModule?s:{default:s},oe=e("lodash"),ce=["replacement transaction underpriced","known transaction","gas price too low to replace","transaction with the same hash was already imported","gateway timeout","nonce too low"],le=re.createModuleLogger.call(void 0,re.projectLogger,"pending-transactions");n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakSet,v=function(){se.__privateGet.call(void 0,this,m)||(se.__privateGet.call(void 0,this,n).on("latest",se.__privateGet.call(void 0,this,u)),se.__privateSet.call(void 0,this,m,!0),le("Started polling"))},_=new WeakSet,y=async function(e){const t=await se.__privateGet.call(void 0,this,d).call(this);try{await se.__privateMethod.call(void 0,this,k,w).call(this)}catch(e){le("Failed to check transactions",e)}finally{t()}try{await se.__privateMethod.call(void 0,this,b,T).call(this,e)}catch(e){le("Failed to resubmit transactions",e)}},k=new WeakSet,w=async function(){le("Checking transactions");const e=se.__privateMethod.call(void 0,this,G,F).call(this);e.length?(le("Found pending transactions to check",{count:e.length,ids:e.map((e=>e.id))}),await Promise.all(e.map((e=>se.__privateMethod.call(void 0,this,C,x).call(this,e))))):le("No pending transactions to check")},b=new WeakSet,T=async function(e){if(!se.__privateGet.call(void 0,this,l).call(this)||!se.__privateGet.call(void 0,this,m))return;le("Resubmitting transactions");const t=se.__privateMethod.call(void 0,this,G,F).call(this);if(t.length){le("Found pending transactions to resubmit",{count:t.length,ids:t.map((e=>e.id))});for(const r of t)try{await se.__privateMethod.call(void 0,this,P,I).call(this,r,e)}catch(e){const t=e.value?.message?.toLowerCase()||e.message?.toLowerCase()||String(e);if(se.__privateMethod.call(void 0,this,S,E).call(this,t)){le("Ignoring known transaction error",t);continue}se.__privateMethod.call(void 0,this,D,H).call(this,r,e.message,"There was an error when resubmitting this transaction.")}}else le("No pending transactions to resubmit")},S=new WeakSet,E=function(e){return ce.some((t=>e.includes(t)))},P=new WeakSet,I=async function(e,t){if(!se.__privateMethod.call(void 0,this,A,j).call(this,e,t))return;const{rawTx:r}=e;if(!se.__privateGet.call(void 0,this,f).call(this,e))return;const s=se.__privateGet.call(void 0,this,o).call(this,e.networkClientId);await se.__privateGet.call(void 0,this,h).call(this,s,r);const n=(e.retryCount??0)+1;se.__privateMethod.call(void 0,this,K,J).call(this,oe.merge.call(void 0,{},e,{retryCount:n}),"PendingTransactionTracker:transaction-retry - Retry count increased")},A=new WeakSet,j=function(e,t){const r=oe.cloneDeep.call(void 0,e);r.firstRetryBlockNumber||(r.firstRetryBlockNumber=t,se.__privateMethod.call(void 0,this,K,J).call(this,r,"PendingTransactionTracker:#isResubmitDue - First retry block number set"));const{firstRetryBlockNumber:s}=r,n=Number.parseInt(t,16)-Number.parseInt(s,16),i=e.retryCount||0;return n>=Math.min(50,Math.pow(2,i))},C=new WeakSet,x=async function(e){const{hash:t,id:r}=e;if(!t&&se.__privateGet.call(void 0,this,p).call(this,e)){const t=new Error("We had an error while submitting this transaction, please try again.");return t.name="NoTxHashError",void se.__privateMethod.call(void 0,this,U,$).call(this,e,t)}if(se.__privateMethod.call(void 0,this,O,L).call(this,e))return le("Nonce already taken",r),void se.__privateMethod.call(void 0,this,W,V).call(this,e);try{const r=await se.__privateMethod.call(void 0,this,q,z).call(this,t),s="0x1"===r?.status;if("0x0"===r?.status)return le("Transaction receipt has failed status"),void se.__privateMethod.call(void 0,this,U,$).call(this,e,new Error("Transaction dropped or replaced"));const{blockNumber:n,blockHash:i}=r||{};if(s&&n&&i)return void await se.__privateMethod.call(void 0,this,N,R).call(this,e,{...r,blockNumber:n,blockHash:i})}catch(t){return le("Failed to check transaction",r,t),void se.__privateMethod.call(void 0,this,D,H).call(this,e,t.message,"There was a problem loading this transaction.")}await se.__privateMethod.call(void 0,this,M,B).call(this,e)&&se.__privateMethod.call(void 0,this,W,V).call(this,e)},N=new WeakSet,R=async function(e,t){const{id:r}=e,{blockHash:s}=t;le("Transaction confirmed",r);const{baseFeePerGas:n,timestamp:i}=await se.__privateMethod.call(void 0,this,Y,X).call(this,s,!1),a=oe.cloneDeep.call(void 0,e);a.baseFeePerGas=n,a.blockTimestamp=i,a.status="confirmed",a.txParams={...a.txParams,gasUsed:t.gasUsed},a.txReceipt=t,a.verifiedOnBlockchain=!0,se.__privateMethod.call(void 0,this,K,J).call(this,a,"PendingTransactionTracker:#onTransactionConfirmed - Transaction confirmed"),this.hub.emit("transaction-confirmed",a)},M=new WeakSet,B=async function(e){const{hash:t,id:r,txParams:{nonce:s,from:n}}=e;if(!s||!t)return!1;const a=await se.__privateMethod.call(void 0,this,Q,Z).call(this,n),o=parseInt(a,16);if(parseInt(s,16)>=o)return!1;let c=se.__privateGet.call(void 0,this,i).get(t);return void 0===c&&(c=0,se.__privateGet.call(void 0,this,i).set(t,c)),c<3?(le("Incrementing dropped block count",{id:r,droppedBlockCount:c}),se.__privateGet.call(void 0,this,i).set(t,c+1),!1):(le("Hit dropped block count",r),se.__privateGet.call(void 0,this,i).delete(t),!0)},O=new WeakSet,L=function(e){const{id:t,txParams:r}=e;return se.__privateMethod.call(void 0,this,ee,te).call(this).some((e=>e.id!==t&&e.txParams.from===r.from&&"confirmed"===e.status&&e.txParams.nonce===r.nonce&&"incoming"!==e.type))},G=new WeakSet,F=function(){return se.__privateMethod.call(void 0,this,ee,te).call(this).filter((e=>"submitted"===e.status&&!e.verifiedOnBlockchain&&!e.isUserOperation))},D=new WeakSet,H=function(e,t,r){se.__privateMethod.call(void 0,this,K,J).call(this,{...e,warning:{error:t,message:r}},"PendingTransactionTracker:#warnTransaction - Warning added")},U=new WeakSet,$=function(e,t){le("Transaction failed",e.id,t),this.hub.emit("transaction-failed",e,t)},W=new WeakSet,V=function(e){le("Transaction dropped",e.id),this.hub.emit("transaction-dropped",e)},K=new WeakSet,J=function(e,t){this.hub.emit("transaction-updated",e,t)},q=new WeakSet,z=async function(e){return await ne.query.call(void 0,se.__privateGet.call(void 0,this,o).call(this),"getTransactionReceipt",[e])},Y=new WeakSet,X=async function(e,t){return await ne.query.call(void 0,se.__privateGet.call(void 0,this,o).call(this),"getBlockByHash",[e,t])},Q=new WeakSet,Z=async function(e){return await ne.query.call(void 0,se.__privateGet.call(void 0,this,o).call(this),"getTransactionCount",[e])},ee=new WeakSet,te=function(){const e=se.__privateGet.call(void 0,this,a).call(this);return se.__privateGet.call(void 0,this,c).call(this).filter((t=>t.chainId===e))},r.PendingTransactionTracker=class{constructor({blockTracker:e,getChainId:t,getEthQuery:r,getTransactions:s,isResubmitEnabled:w,getGlobalLock:T,publishTransaction:E,hooks:I}){se.__privateAdd.call(void 0,this,g),se.__privateAdd.call(void 0,this,_),se.__privateAdd.call(void 0,this,k),se.__privateAdd.call(void 0,this,b),se.__privateAdd.call(void 0,this,S),se.__privateAdd.call(void 0,this,P),se.__privateAdd.call(void 0,this,A),se.__privateAdd.call(void 0,this,C),se.__privateAdd.call(void 0,this,N),se.__privateAdd.call(void 0,this,M),se.__privateAdd.call(void 0,this,O),se.__privateAdd.call(void 0,this,G),se.__privateAdd.call(void 0,this,D),se.__privateAdd.call(void 0,this,U),se.__privateAdd.call(void 0,this,W),se.__privateAdd.call(void 0,this,K),se.__privateAdd.call(void 0,this,q),se.__privateAdd.call(void 0,this,Y),se.__privateAdd.call(void 0,this,Q),se.__privateAdd.call(void 0,this,ee),se.__privateAdd.call(void 0,this,n,void 0),se.__privateAdd.call(void 0,this,i,void 0),se.__privateAdd.call(void 0,this,a,void 0),se.__privateAdd.call(void 0,this,o,void 0),se.__privateAdd.call(void 0,this,c,void 0),se.__privateAdd.call(void 0,this,l,void 0),se.__privateAdd.call(void 0,this,u,void 0),se.__privateAdd.call(void 0,this,d,void 0),se.__privateAdd.call(void 0,this,h,void 0),se.__privateAdd.call(void 0,this,m,void 0),se.__privateAdd.call(void 0,this,p,void 0),se.__privateAdd.call(void 0,this,f,void 0),this.startIfPendingTransactions=()=>{se.__privateMethod.call(void 0,this,G,F).call(this).length?se.__privateMethod.call(void 0,this,g,v).call(this):this.stop()},this.hub=new(0,ae.default),se.__privateSet.call(void 0,this,n,e),se.__privateSet.call(void 0,this,i,new Map),se.__privateSet.call(void 0,this,a,t),se.__privateSet.call(void 0,this,o,r),se.__privateSet.call(void 0,this,c,s),se.__privateSet.call(void 0,this,l,w??(()=>!0)),se.__privateSet.call(void 0,this,u,se.__privateMethod.call(void 0,this,_,y).bind(this)),se.__privateSet.call(void 0,this,d,T),se.__privateSet.call(void 0,this,h,E),se.__privateSet.call(void 0,this,m,!1),se.__privateSet.call(void 0,this,f,I?.beforePublish??(()=>!0)),se.__privateSet.call(void 0,this,p,I?.beforeCheckPendingTransaction??(()=>!0))}async forceCheckTransaction(e){const t=await se.__privateGet.call(void 0,this,d).call(this);try{await se.__privateMethod.call(void 0,this,C,x).call(this,e)}catch(e){le("Failed to check transaction",e)}finally{t()}}stop(){se.__privateGet.call(void 0,this,m)&&(se.__privateGet.call(void 0,this,n).removeListener("latest",se.__privateGet.call(void 0,this,u)),se.__privateSet.call(void 0,this,m,!1),le("Stopped polling"))}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-6DODV6OV.js"}],[2174,{"./chunk-7NMV2NPM.js":2178,"./chunk-S6VGOPUY.js":2193,"./chunk-Z4BLTVTB.js":2201,"@metamask/eth-query":1395,"async-mutex":3466},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y,k,w,b,T,S,E,P,I=e("./chunk-7NMV2NPM.js"),A=e("./chunk-S6VGOPUY.js"),j=e("./chunk-Z4BLTVTB.js"),C=e("@metamask/eth-query"),x=(s=C)&&s.__esModule?s:{default:s},N=e("async-mutex");n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,k=new WeakSet,w=function(e){const t=j.__privateGet.call(void 0,this,v).get(e);t&&(t.pendingTransactionTracker.stop(),j.__privateGet.call(void 0,this,h).call(this,t.pendingTransactionTracker),t.incomingTransactionHelper.stop(),j.__privateGet.call(void 0,this,d).call(this,t.incomingTransactionHelper),j.__privateGet.call(void 0,this,v).delete(e))},b=new WeakSet,T=function(e){if(j.__privateGet.call(void 0,this,v).get(e))return;const{provider:t,blockTracker:r,configuration:{chainId:s}}=j.__privateGet.call(void 0,this,l).call(this,e);let n=j.__privateGet.call(void 0,this,_).get(s);n||(n=new(0,I.EtherscanRemoteTransactionSource)({includeTokenTransfers:j.__privateGet.call(void 0,this,o).includeTokenTransfers}),j.__privateGet.call(void 0,this,_).set(s,n));const i=j.__privateGet.call(void 0,this,m).call(this,{provider:t,blockTracker:r,chainId:s}),a=j.__privateGet.call(void 0,this,p).call(this,{blockTracker:r,etherscanRemoteTransactionSource:n,chainId:s}),c=j.__privateGet.call(void 0,this,f).call(this,{provider:t,blockTracker:r,chainId:s});j.__privateGet.call(void 0,this,v).set(e,{nonceTracker:i,incomingTransactionHelper:a,pendingTransactionTracker:c})},S=new WeakMap,E=new WeakSet,P=function({networkClientId:e,chainId:t}={}){let r;if(e)try{r=j.__privateGet.call(void 0,this,l).call(this,e)}catch(e){A.incomingTransactionsLogger.call(void 0,"failed to get network client by networkClientId")}if(!r&&t)try{const e=j.__privateGet.call(void 0,this,c).call(this,t);r=j.__privateGet.call(void 0,this,l).call(this,e)}catch(e){A.incomingTransactionsLogger.call(void 0,"failed to get network client by chainId")}return r},r.MultichainTrackingHelper=class{constructor({isMultichainEnabled:e,provider:t,nonceTracker:r,incomingTransactionOptions:s,findNetworkClientIdByChainId:P,getNetworkClientById:I,getNetworkClientRegistry:A,removeIncomingTransactionHelperListeners:C,removePendingTransactionTrackerListeners:x,createNonceTracker:N,createIncomingTransactionHelper:R,createPendingTransactionTracker:M,onNetworkStateChange:B}){j.__privateAdd.call(void 0,this,k),j.__privateAdd.call(void 0,this,b),j.__privateAdd.call(void 0,this,E),j.__privateAdd.call(void 0,this,n,void 0),j.__privateAdd.call(void 0,this,i,void 0),j.__privateAdd.call(void 0,this,a,void 0),j.__privateAdd.call(void 0,this,o,void 0),j.__privateAdd.call(void 0,this,c,void 0),j.__privateAdd.call(void 0,this,l,void 0),j.__privateAdd.call(void 0,this,u,void 0),j.__privateAdd.call(void 0,this,d,void 0),j.__privateAdd.call(void 0,this,h,void 0),j.__privateAdd.call(void 0,this,m,void 0),j.__privateAdd.call(void 0,this,p,void 0),j.__privateAdd.call(void 0,this,f,void 0),j.__privateAdd.call(void 0,this,g,new Map),j.__privateAdd.call(void 0,this,v,new Map),j.__privateAdd.call(void 0,this,_,new Map),this.checkForPendingTransactionAndStartPolling=()=>{for(const[,e]of j.__privateGet.call(void 0,this,v))e.pendingTransactionTracker.startIfPendingTransactions()},j.__privateAdd.call(void 0,this,y,(e=>{j.__privateGet.call(void 0,this,S).call(this,e);const t=Object.keys(e),r=Array.from(j.__privateGet.call(void 0,this,v).keys());r.filter((e=>!t.includes(e))).forEach((e=>{j.__privateMethod.call(void 0,this,k,w).call(this,e)}));t.filter((e=>!r.includes(e))).forEach((e=>{j.__privateMethod.call(void 0,this,b,T).call(this,e)}))})),j.__privateAdd.call(void 0,this,S,(e=>{const t=new Set;Object.values(e).forEach((e=>t.add(e.configuration.chainId)));Array.from(j.__privateGet.call(void 0,this,_).keys()).filter((e=>!t.has(e))).forEach((e=>{j.__privateGet.call(void 0,this,_).delete(e)}))})),j.__privateSet.call(void 0,this,n,e),j.__privateSet.call(void 0,this,i,t),j.__privateSet.call(void 0,this,a,r),j.__privateSet.call(void 0,this,o,s),j.__privateSet.call(void 0,this,c,P),j.__privateSet.call(void 0,this,l,I),j.__privateSet.call(void 0,this,u,A),j.__privateSet.call(void 0,this,d,C),j.__privateSet.call(void 0,this,h,x),j.__privateSet.call(void 0,this,m,N),j.__privateSet.call(void 0,this,p,R),j.__privateSet.call(void 0,this,f,M),B(((e,t)=>{if(j.__privateGet.call(void 0,this,n)){const e=j.__privateGet.call(void 0,this,u).call(this);t.forEach((({op:t,path:r})=>{if("remove"===t&&"networkConfigurations"===r[0]){const t=r[1];delete e[t]}})),j.__privateGet.call(void 0,this,y).call(this,e)}}))}initialize(){if(!j.__privateGet.call(void 0,this,n))return;const e=j.__privateGet.call(void 0,this,u).call(this);j.__privateGet.call(void 0,this,y).call(this,e)}has(e){return j.__privateGet.call(void 0,this,v).has(e)}getEthQuery({networkClientId:e,chainId:t}={}){return j.__privateGet.call(void 0,this,n)?new(0,x.default)(this.getProvider({networkClientId:e,chainId:t})):new(0,x.default)(this.getProvider())}getProvider({networkClientId:e,chainId:t}={}){if(!j.__privateGet.call(void 0,this,n))return j.__privateGet.call(void 0,this,i);const r=j.__privateMethod.call(void 0,this,E,P).call(this,{networkClientId:e,chainId:t});return r?.provider||j.__privateGet.call(void 0,this,i)}async acquireNonceLockForChainIdKey({chainId:e,key:t="global"}){let r=j.__privateGet.call(void 0,this,g).get(e);r||(r=new Map,j.__privateGet.call(void 0,this,g).set(e,r));let s=r.get(t);return s||(s=new(0,N.Mutex),r.set(t,s)),await s.acquire()}async getNonceLock(e,t){let r,s=j.__privateGet.call(void 0,this,a);if(t&&j.__privateGet.call(void 0,this,n)){const n=j.__privateGet.call(void 0,this,l).call(this,t);r=await this.acquireNonceLockForChainIdKey({chainId:n.configuration.chainId,key:e});const i=j.__privateGet.call(void 0,this,v).get(t);if(!i)throw new Error("missing nonceTracker for networkClientId");s=i.nonceTracker}try{const t=await s.getNonceLock(e);return{...t,releaseLock:()=>{t.releaseLock(),r?.()}}}catch(e){throw r?.(),e}}startIncomingTransactionPolling(e=[]){e.forEach((e=>{j.__privateGet.call(void 0,this,v).get(e)?.incomingTransactionHelper.start()}))}stopIncomingTransactionPolling(e=[]){e.forEach((e=>{j.__privateGet.call(void 0,this,v).get(e)?.incomingTransactionHelper.stop()}))}stopAllIncomingTransactionPolling(){for(const[,e]of j.__privateGet.call(void 0,this,v))e.incomingTransactionHelper.stop()}async updateIncomingTransactions(e=[]){(await Promise.allSettled(e.map((async e=>await(j.__privateGet.call(void 0,this,v).get(e)?.incomingTransactionHelper.update()))))).filter((e=>"rejected"===e.status)).forEach((e=>{A.incomingTransactionsLogger.call(void 0,"failed to update incoming transactions",e.reason)}))}stopAllTracking(){for(const[e]of j.__privateGet.call(void 0,this,v))j.__privateMethod.call(void 0,this,k,w).call(this,e)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-6OLJWLKK.js"}],[2175,{"./chunk-HMOSP33F.js":2182,"./chunk-KT6UAKBB.js":2184,"./chunk-S6VGOPUY.js":2193,"./chunk-UGN7PBON.js":2196,"@ethersproject/abi":481,"@metamask/controller-utils":2126,"@metamask/metamask-eth-abis":1743,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-KT6UAKBB.js"),n=e("./chunk-HMOSP33F.js"),i=e("./chunk-UGN7PBON.js"),a=e("./chunk-S6VGOPUY.js"),o=e("@ethersproject/abi"),c=e("@metamask/controller-utils"),l=e("@metamask/metamask-eth-abis"),u=e("@metamask/utils"),d=(e=>(e.ERC20="erc20",e.ERC721="erc721",e.ERC1155="erc1155",e.ERC20_WRAPPED="erc20Wrapped",e.ERC721_LEGACY="erc721Legacy",e))(d||{}),h=u.createModuleLogger.call(void 0,a.projectLogger,"simulation"),m=["Transfer","TransferSingle","TransferBatch","Deposit","Withdrawal"],p={erc20:{abi:l.abiERC20,standard:"erc20"},erc721:{abi:l.abiERC721,standard:"erc721"},erc1155:{abi:l.abiERC1155,standard:"erc1155"},erc20Wrapped:{abi:i.ABI_SIMULATION_ERC20_WRAPPED,standard:"erc20"},erc721Legacy:{abi:i.ABI_SIMULATION_ERC721_LEGACY,standard:"erc721"}},f=["execution reverted","insufficient funds for gas"];function g(e){const t=b(e.transactions[0]?.callTrace??{});h("Extracted logs",t);const r=function(){const e=Object.values(d);return new Map(e.map((e=>{const{abi:t}=p[e];return[e,new(0,o.Interface)(t)]})))}();return t.map((e=>{const t=function(e,t){const r=Object.values(d);for(const s of r)try{const r=t.get(s),{abi:n,standard:i}=p[s];return{...r.parseLog(e),abi:n,standard:i}}catch(e){continue}return}(e,r);if(!t)return void h("Failed to parse log",e);const s=t.abi.find((e=>e.name===t.name))?.inputs;if(!s)return void h("Failed to find inputs for event",t);const n=function(e,t){return e.reduce(((e,r,s)=>{const n=t[s].name.replace("_",""),i=v(r);return e[n]=i,e}),{})}(t.args,s);return{contractAddress:e.address,tokenStandard:t.standard,name:t.name,args:n,abi:t.abi}})).filter((e=>void 0!==e))}function v(e){return Array.isArray(e)?e.map(v):(e.toHexString?.()??e).toLowerCase()}function _(e){return"Transfer"===e.name&&"erc721"===e.tokenStandard&&0===parseInt(e.args.from,16)}function y(e){return"erc721"===e.tokenStandard?[e.args.tokenId]:"erc1155"===e.tokenStandard&&"TransferSingle"===e.name?[e.args.id]:"erc1155"===e.tokenStandard&&"TransferBatch"===e.name?e.args.ids:[void 0]}function k(e,t,r){const s=(n=r.return,c.toHex.call(void 0,c.hexToBN.call(void 0,n)));var n;return"erc721"===t.standard?s===e?"0x1":"0x0":s}function w(e,t,r){switch(e){case"erc721":return new(0,o.Interface)(l.abiERC721).encodeFunctionData("ownerOf",[r]);case"erc1155":return new(0,o.Interface)(l.abiERC1155).encodeFunctionData("balanceOf",[t,r]);default:return new(0,o.Interface)(l.abiERC20).encodeFunctionData("balanceOf",[t])}}function b(e){return[...e.logs??[],...(e.calls??[]).map((e=>b(e))).flat()]}function T(e,t){const r=c.hexToBN.call(void 0,t).sub(c.hexToBN.call(void 0,e)),s=r.isNeg(),n=c.toHex.call(void 0,r.abs());if(!r.isZero())return{previousBalance:e,newBalance:t,difference:n,isDecrease:s};h("Balance change is zero")}r.SupportedToken=d,r.getSimulationData=async function(e){const{chainId:t,from:r,to:i,value:a,data:o}=e;h("Getting simulation data",e);try{const c=await s.simulateTransactions.call(void 0,t,{transactions:[{data:o,from:r,maxFeePerGas:"0x0",maxPriorityFeePerGas:"0x0",to:i,value:a}],withCallTrace:!0,withLogs:!0}),l=c.transactions?.[0]?.error;if(l)throw new(0,n.SimulationError)(l);const u=function(e,t){const r=t.transactions[0];if(!r)return;const{stateDiff:s}=r,n=s?.pre?.[e]?.balance,i=s?.post?.[e]?.balance;if(!n||!i)return;return T(n,i)}(e.from,c),d=g(c);h("Parsed events",d);const p=await async function(e,t){const r=function(e,t){const r=new Set,s=new Map,n=new Map,i=t.filter((t=>m.includes(t.name)&&[t.args.from,t.args.to].includes(e.from)));h("Filtered user events",i);for(const t of i){const i=y(t);h("Extracted token ids",i);for(const a of i){const i={address:t.contractAddress,standard:t.tokenStandard,id:a},o=JSON.stringify(i);if(r.has(o)){h("Ignoring additional event with same contract and token ID",i);continue}r.add(o);const c=w(t.tokenStandard,e.from,a),l={from:e.from,to:t.contractAddress,data:c};_(t)||s.set(i,l),n.set(i,l)}}return{before:s,after:n}}(e,t);h("Generated balance transactions",[...r.after.values()]);const i=[...r.before.values(),e,...r.after.values()];if(1===i.length)return[];const a=await s.simulateTransactions.call(void 0,e.chainId,{transactions:i});if(h("Balance simulation response",a),a.transactions.length!==i.length)throw new(0,n.SimulationInvalidResponseError);let o=0;return[...r.after.keys()].map(((t,s)=>{const n=T(!r.before.get(t)?"0x0":k(e.from,t,a.transactions[o++]),k(e.from,t,a.transactions[s+r.before.size+1]));if(n)return{...t,...n}})).filter((e=>void 0!==e))}(e,d);return{nativeBalanceChange:u,tokenBalanceChanges:p}}catch(t){h("Failed to get simulation data",t,e);let r=t;f.some((e=>r.message?.includes(e)))&&(r=new(0,n.SimulationRevertedError));const{code:s,message:i}=r;return{tokenBalanceChanges:[],error:{code:s,message:i}}}},r.getEvents=g}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-74W7X6BE.js"}],[2176,{"./chunk-AYTU4HU5.js":2180,"@metamask/controller-utils":2126},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-AYTU4HU5.js"),n=e("@metamask/controller-utils");function i(e,t){return n.weiHexToGweiDec.call(void 0,e[t])}r.getGasFeeFlow=function(e,t){return t.find((t=>t.matchesTransaction(e)))},r.mergeGasFeeEstimates=function({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}){const r=t.type;return"fee-market"===r?Object.values(s.GasFeeEstimateLevel).reduce(((r,s)=>{return{...r,[s]:(i=e?.[s],a=t[s],{...i,suggestedMaxFeePerGas:n.weiHexToGweiDec.call(void 0,a.maxFeePerGas),suggestedMaxPriorityFeePerGas:n.weiHexToGweiDec.call(void 0,a.maxPriorityFeePerGas)})};var i,a}),{...e}):"legacy"===r?Object.values(s.GasFeeEstimateLevel).reduce(((e,r)=>({...e,[r]:i(t,r)})),{}):"eth_gasPrice"===r?{gasPrice:(a=t,n.weiHexToGweiDec.call(void 0,a.gasPrice))}:e;var a}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-76FONEDA.js"}],[2177,{"@metamask/rpc-errors":2006},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/rpc-errors");r.validateConfirmedExternalTransaction=function(e,t,r){if(!e||!e.txParams)throw s.rpcErrors.invalidParams('"transactionMeta" or "transactionMeta.txParams" is missing');if("confirmed"!==e.status)throw s.rpcErrors.invalidParams('External transaction status should be "confirmed"');const n=e.txParams.nonce;if(r&&r.length>0){if(r.find((e=>e.txParams?.nonce===n)))throw s.rpcErrors.invalidParams("External transaction nonce should not be in pending txs")}if(t&&t.length>0){if(t.find((e=>e.txParams?.nonce===n)))throw s.rpcErrors.invalidParams("External transaction nonce should not be in confirmed txs")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-7LXE4KHV.js"}],[2178,{"./chunk-S6VGOPUY.js":2193,"./chunk-UGN7PBON.js":2196,"./chunk-XVYXRCRL.js":2199,"./chunk-Z4BLTVTB.js":2201,"@metamask/controller-utils":2126,"async-mutex":3466,"bn.js":3528,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y=e("./chunk-XVYXRCRL.js"),k=e("./chunk-UGN7PBON.js"),w=e("./chunk-S6VGOPUY.js"),b=e("./chunk-Z4BLTVTB.js"),T=e("@metamask/controller-utils"),S=e("async-mutex"),E=e("bn.js"),P=(s=E)&&s.__esModule?s:{default:s},I=e("uuid");n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e,t){const r=Date.now()-e,s=Math.max(0,5e3-r);s>0?setTimeout(t,s):t()},l=new WeakMap,u=new WeakMap,d=new WeakSet,h=function(e){let t=e.result;return"0"===e.status&&(t=[],e.result.length&&w.incomingTransactionsLogger.call(void 0,"Ignored Etherscan request error",{message:e.result,type:b.__privateGet.call(void 0,this,i)?"token":"normal"})),t},m=new WeakSet,p=function(e,t){const r=b.__privateMethod.call(void 0,this,v,_).call(this,e,t);return{...r,txParams:{...r.txParams,data:e.input},..."0"===e.isError?{status:"confirmed"}:{error:new Error("Transaction failed"),status:"failed"}}},f=new WeakSet,g=function(e,t){return{...b.__privateMethod.call(void 0,this,v,_).call(this,e,t),isTransfer:!0,transferInformation:{contractAddress:e.contractAddress,decimals:Number(e.tokenDecimal),symbol:e.tokenSymbol}}},v=new WeakSet,_=function(e,t){const r=1e3*parseInt(e.timeStamp,10);return{blockNumber:e.blockNumber,chainId:t,hash:e.hash,id:I.v1.call(void 0,{msecs:r}),status:"confirmed",time:r,txParams:{chainId:t,from:e.from,gas:T.BNToHex.call(void 0,new(0,P.default)(e.gas)),gasPrice:T.BNToHex.call(void 0,new(0,P.default)(e.gasPrice)),gasUsed:T.BNToHex.call(void 0,new(0,P.default)(e.gasUsed)),nonce:T.BNToHex.call(void 0,new(0,P.default)(e.nonce)),to:e.to,value:T.BNToHex.call(void 0,new(0,P.default)(e.value))},type:"incoming",verifiedOnBlockchain:!1}},r.EtherscanRemoteTransactionSource=class{constructor({includeTokenTransfers:e}={}){b.__privateAdd.call(void 0,this,o),b.__privateAdd.call(void 0,this,d),b.__privateAdd.call(void 0,this,m),b.__privateAdd.call(void 0,this,f),b.__privateAdd.call(void 0,this,v),b.__privateAdd.call(void 0,this,n,void 0),b.__privateAdd.call(void 0,this,i,void 0),b.__privateAdd.call(void 0,this,a,new(0,S.Mutex)),b.__privateAdd.call(void 0,this,l,(async(e,t)=>{const{currentChainId:r}=e,s=await y.fetchEtherscanTransactions.call(void 0,t);return b.__privateMethod.call(void 0,this,d,h).call(this,s).map((e=>b.__privateMethod.call(void 0,this,m,p).call(this,e,r)))})),b.__privateAdd.call(void 0,this,u,(async(e,t)=>{const{currentChainId:r}=e,s=await y.fetchEtherscanTokenTransactions.call(void 0,t);return b.__privateMethod.call(void 0,this,d,h).call(this,s).map((e=>b.__privateMethod.call(void 0,this,f,g).call(this,e,r)))})),b.__privateSet.call(void 0,this,n,e??!0),b.__privateSet.call(void 0,this,i,!1)}isSupportedNetwork(e){return Object.keys(k.ETHERSCAN_SUPPORTED_NETWORKS).includes(e)}getLastBlockVariations(){return[b.__privateGet.call(void 0,this,i)?"token":"normal"]}async fetchTransactions(e){const t=await b.__privateGet.call(void 0,this,a).acquire(),r=Date.now(),s={...e,chainId:e.currentChainId};try{const t=b.__privateGet.call(void 0,this,i)?await b.__privateGet.call(void 0,this,u).call(this,e,s):await b.__privateGet.call(void 0,this,l).call(this,e,s);return b.__privateGet.call(void 0,this,n)&&b.__privateSet.call(void 0,this,i,!b.__privateGet.call(void 0,this,i)),t}finally{b.__privateMethod.call(void 0,this,o,c).call(this,r,t)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-7NMV2NPM.js"}],[2179,{"./chunk-AYTU4HU5.js":2180,"./chunk-QTKXIDGE.js":2190,"./chunk-S6VGOPUY.js":2193,"./chunk-Z4BLTVTB.js":2201,"@metamask/controller-utils":2126,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m=e("./chunk-QTKXIDGE.js"),p=e("./chunk-S6VGOPUY.js"),f=e("./chunk-AYTU4HU5.js"),g=e("./chunk-Z4BLTVTB.js"),v=e("@metamask/controller-utils"),_=e("@metamask/utils").createModuleLogger.call(void 0,p.projectLogger,"linea-gas-fee-flow"),y=[v.ChainId["linea-mainnet"],v.ChainId["linea-goerli"],v.ChainId["linea-sepolia"]],k={low:1,medium:1.35,high:1.7},w={low:1,medium:1.05,high:1.1};s=new WeakSet,n=async function(e){const{ethQuery:t,transactionMeta:r}=e,s=await g.__privateMethod.call(void 0,this,i,a).call(this,r,t);_("Received Linea response",s);const n=g.__privateMethod.call(void 0,this,o,c).call(this,s.baseFeePerGas,k);_("Generated base fees",g.__privateMethod.call(void 0,this,d,h).call(this,n));const m=g.__privateMethod.call(void 0,this,o,c).call(this,s.priorityFeePerGas,w);_("Generated priority fees",g.__privateMethod.call(void 0,this,d,h).call(this,m));const p=g.__privateMethod.call(void 0,this,l,u).call(this,n,m);_("Generated max fees",g.__privateMethod.call(void 0,this,d,h).call(this,p));return{estimates:Object.values(f.GasFeeEstimateLevel).reduce(((e,t)=>({...e,[t]:{maxFeePerGas:v.toHex.call(void 0,p[t]),maxPriorityFeePerGas:v.toHex.call(void 0,m[t])}})),{type:"fee-market"})}},i=new WeakSet,a=function(e,t){return v.query.call(void 0,t,"linea_estimateGas",[{from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,input:e.txParams.data,gasPrice:"0x100000000"}])},o=new WeakSet,c=function(e,t){const r=v.hexToBN.call(void 0,e);return{low:r.muln(t.low),medium:r.muln(t.medium),high:r.muln(t.high)}},l=new WeakSet,u=function(e,t){return{low:e.low.add(t.low),medium:e.medium.add(t.medium),high:e.high.add(t.high)}},d=new WeakSet,h=function(e){return Object.values(f.GasFeeEstimateLevel).map((t=>e[t].toString(10)))},r.LineaGasFeeFlow=class{constructor(){g.__privateAdd.call(void 0,this,s),g.__privateAdd.call(void 0,this,i),g.__privateAdd.call(void 0,this,o),g.__privateAdd.call(void 0,this,l),g.__privateAdd.call(void 0,this,d)}matchesTransaction(e){return y.includes(e.chainId)}async getGasFees(e){try{return await g.__privateMethod.call(void 0,this,s,n).call(this,e)}catch(t){return _("Using default flow as fallback due to error",t),(new(0,m.DefaultGasFeeFlow)).getGasFees(e)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-ARZHJFVG.js"}],[218,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"provider")){const t=e.NetworkController;return t.providerConfig=t.provider,delete t.provider,{...e,NetworkController:t}}var t,r;if((0,s.isObject)(e.NetworkController)){if(!(0,s.hasProperty)(e.NetworkController,"provider")){var n,i;if(e.NetworkController.providerConfig===undefined)null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error("typeof state.NetworkController.provider is "+typeof e.NetworkController.provider))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var s=e("@metamask/utils"),n=e("lodash");const i=r.version=86}}},{package:"$root$",file:"app/scripts/migrations/086.ts"}],[2180,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=(e=>(e.unapproved="unapproved",e.approved="approved",e.signed="signed",e.submitted="submitted",e.confirmed="confirmed",e.failed="failed",e.dropped="dropped",e.rejected="rejected",e.cancelled="cancelled",e))(s||{}),n=(e=>(e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device",e))(n||{}),i=(e=>(e.cancel="cancel",e.contractInteraction="contractInteraction",e.deployContract="contractDeployment",e.ethDecrypt="eth_decrypt",e.ethGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.incoming="incoming",e.personalSign="personal_sign",e.retry="retry",e.simpleSend="simpleSend",e.signTypedData="eth_signTypedData",e.smart="smart",e.swap="swap",e.swapAndSend="swapAndSend",e.swapApproval="swapApproval",e.tokenMethodApprove="approve",e.tokenMethodSafeTransferFrom="safetransferfrom",e.tokenMethodTransfer="transfer",e.tokenMethodTransferFrom="transferfrom",e.tokenMethodSetApprovalForAll="setapprovalforall",e.tokenMethodIncreaseAllowance="increaseAllowance",e))(i||{}),a=(e=>(e.legacy="0x0",e.accessList="0x1",e.feeMarket="0x2",e))(a||{}),o=(e=>(e.CUSTOM="custom",e.DAPP_SUGGESTED="dappSuggested",e.MEDIUM="medium",e))(o||{}),c=(e=>(e.Low="low",e.Medium="medium",e.High="high",e))(c||{}),l=(e=>(e.FeeMarket="fee-market",e.Legacy="legacy",e.GasPrice="eth_gasPrice",e))(l||{}),u=(e=>(e.erc20="erc20",e.erc721="erc721",e.erc1155="erc1155",e))(u||{}),d=(e=>(e.ChainNotSupported="chain-not-supported",e.Disabled="disabled",e.InvalidResponse="invalid-response",e.Reverted="reverted",e))(d||{});r.TransactionStatus=s,r.WalletDevice=n,r.TransactionType=i,r.TransactionEnvelopeType=a,r.UserFeeLevel=o,r.GasFeeEstimateLevel=c,r.GasFeeEstimateType=l,r.SimulationTokenStandard=u,r.SimulationErrorCode=d}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-AYTU4HU5.js"}],[2181,{"./chunk-76FONEDA.js":2176,"./chunk-QH2H4W3N.js":2188,"./chunk-S6VGOPUY.js":2193,"@metamask/controller-utils":2126,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-QH2H4W3N.js"),n=e("./chunk-76FONEDA.js"),i=e("./chunk-S6VGOPUY.js"),a=e("@metamask/controller-utils"),o=e("@metamask/utils"),c=o.createModuleLogger.call(void 0,i.projectLogger,"gas-fees");function l(e){return a.toHex.call(void 0,a.gweiDecToWEIBN.call(void 0,e))}r.updateGasFees=async function(e){const{txMeta:t}=e,r={...t.txParams},i=s.SWAP_TRANSACTION_TYPES.includes(t.type)?void 0:e.getSavedGasFees(t.chainId),u=await async function(e){const{eip1559:t,ethQuery:r,gasFeeFlows:s,getGasFeeEstimates:i,txMeta:l}=e,{networkClientId:u}=l;if(!t&&l.txParams.gasPrice||t&&l.txParams.maxFeePerGas&&l.txParams.maxPriorityFeePerGas)return{};const d=n.getGasFeeFlow.call(void 0,l,s);try{const e=await i({networkClientId:u}),t=await d.getGasFees({ethQuery:r,gasFeeControllerData:e,transactionMeta:l}),s=t.estimates?.type;switch(s){case"fee-market":return t.estimates.medium;case"legacy":return{gasPrice:t.estimates.medium};case"eth_gasPrice":return{gasPrice:t.estimates.gasPrice};default:throw new Error(`Unsupported gas fee estimate type returned from flow: ${s}`)}}catch(e){c("Failed to get suggested gas fees",e)}const h=await a.query.call(void 0,r,"gasPrice");return{gasPrice:h?o.add0x.call(void 0,h.toString(16)):void 0}}(e);c("Suggested gas fees",u);const d={...e,initialParams:r,savedGasFees:i,suggestedGasFees:u};t.txParams.maxFeePerGas=function(e){const{savedGasFees:t,eip1559:r,initialParams:s,suggestedGasFees:n}=e;if(!r)return;if(t){const e=l(t.maxBaseFee);return c("Using maxFeePerGas from savedGasFees",e),e}if(s.maxFeePerGas)return c("Using maxFeePerGas from request",s.maxFeePerGas),s.maxFeePerGas;if(s.gasPrice&&!s.maxPriorityFeePerGas)return c("Setting maxFeePerGas to gasPrice from request",s.gasPrice),s.gasPrice;if(n.maxFeePerGas)return c("Using suggested maxFeePerGas",n.maxFeePerGas),n.maxFeePerGas;if(n.gasPrice)return c("Setting maxFeePerGas to suggested gasPrice",n.gasPrice),n.gasPrice;return void c("maxFeePerGas not set")}(d),t.txParams.maxPriorityFeePerGas=function(e){const{eip1559:t,initialParams:r,savedGasFees:s,suggestedGasFees:n,txMeta:i}=e;if(!t)return;if(s){const e=l(s.priorityFee);return c("Using maxPriorityFeePerGas from savedGasFees.priorityFee",e),e}if(r.maxPriorityFeePerGas)return c("Using maxPriorityFeePerGas from request",r.maxPriorityFeePerGas),r.maxPriorityFeePerGas;if(r.gasPrice&&!r.maxFeePerGas)return c("Setting maxPriorityFeePerGas to gasPrice from request",r.gasPrice),r.gasPrice;if(n.maxPriorityFeePerGas)return c("Using suggested maxPriorityFeePerGas",n.maxPriorityFeePerGas),n.maxPriorityFeePerGas;if(i.txParams.maxFeePerGas)return c("Setting maxPriorityFeePerGas to maxFeePerGas",i.txParams.maxFeePerGas),i.txParams.maxFeePerGas;return void c("maxPriorityFeePerGas not set")}(d),t.txParams.gasPrice=function(e){const{eip1559:t,initialParams:r,suggestedGasFees:s}=e;if(t)return;if(r.gasPrice)return c("Using gasPrice from request",r.gasPrice),r.gasPrice;if(s.maxFeePerGas)return c("Using suggested maxFeePerGas",s.maxFeePerGas),s.maxFeePerGas;if(s.gasPrice)return c("Using suggested gasPrice",s.gasPrice),s.gasPrice;return void c("gasPrice not set")}(d),t.userFeeLevel=function(e){const{eip1559:t,initialParams:r,savedGasFees:s,suggestedGasFees:n,txMeta:i}=e;if(!t)return;if(s)return"custom";if(!r.maxFeePerGas&&!r.maxPriorityFeePerGas&&r.gasPrice)return i.origin===a.ORIGIN_METAMASK?"custom":"dappSuggested";if(!r.maxFeePerGas&&!r.maxPriorityFeePerGas&&n.maxFeePerGas&&n.maxPriorityFeePerGas)return"medium";if(i.origin===a.ORIGIN_METAMASK)return"medium";return"dappSuggested"}(d),c("Updated gas fee properties",{maxFeePerGas:t.txParams.maxFeePerGas,maxPriorityFeePerGas:t.txParams.maxPriorityFeePerGas,gasPrice:t.txParams.gasPrice}),(t.txParams.maxFeePerGas||t.txParams.maxPriorityFeePerGas)&&delete t.txParams.gasPrice,t.txParams.gasPrice&&(delete t.txParams.maxFeePerGas,delete t.txParams.maxPriorityFeePerGas),function(e){e.defaultGasEstimates||(e.defaultGasEstimates={});e.defaultGasEstimates.maxFeePerGas=e.txParams.maxFeePerGas,e.defaultGasEstimates.maxPriorityFeePerGas=e.txParams.maxPriorityFeePerGas,e.defaultGasEstimates.gasPrice=e.txParams.gasPrice,e.defaultGasEstimates.estimateType=e.userFeeLevel}(t)},r.gweiDecimalToWeiHex=l}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-C3WC4OJ3.js"}],[2182,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=class extends Error{constructor(e,t){super(e??"Simulation failed"),this.code=t}};r.SimulationError=s,r.SimulationChainNotSupportedError=class extends s{constructor(e){super(`Chain is not supported: ${e}`,"chain-not-supported")}},r.SimulationInvalidResponseError=class extends s{constructor(){super("Invalid response from simulation API","invalid-response")}},r.SimulationRevertedError=class extends s{constructor(){super("Transaction was reverted","reverted")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-HMOSP33F.js"}],[2183,{"./chunk-2EU6346V.js":2171,"./chunk-2XKEAKQG.js":2172,"./chunk-6DODV6OV.js":2173,"./chunk-6OLJWLKK.js":2174,"./chunk-74W7X6BE.js":2175,"./chunk-76FONEDA.js":2176,"./chunk-7LXE4KHV.js":2177,"./chunk-7NMV2NPM.js":2178,"./chunk-ARZHJFVG.js":2179,"./chunk-C3WC4OJ3.js":2181,"./chunk-NYKRCWBG.js":2185,"./chunk-OZ6UB42C.js":2186,"./chunk-PRUNMTRD.js":2187,"./chunk-QH2H4W3N.js":2188,"./chunk-QP75SWIQ.js":2189,"./chunk-QTKXIDGE.js":2190,"./chunk-RHDPOIS4.js":2191,"./chunk-RXIUMVA5.js":2192,"./chunk-S6VGOPUY.js":2193,"./chunk-SD6CWFDF.js":2194,"./chunk-TJMQEH57.js":2195,"./chunk-V72C4MCR.js":2197,"./chunk-WR5F34OW.js":2198,"./chunk-Z4BLTVTB.js":2201,"@ethereumjs/common":439,"@ethereumjs/tx":2207,"@ethereumjs/util":2219,"@metamask/base-controller":2120,"@metamask/controller-utils":2126,"@metamask/eth-query":1395,"@metamask/network-controller":1795,"@metamask/nonce-tracker":1852,"@metamask/rpc-errors":2006,"@metamask/utils":2787,"async-mutex":3466,"eth-method-registry":2229,events:3874,lodash:4382,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y,k,w,b,T,S,E,P,I,A,j,C,x,N,R,M,B,O,L,G,F,D,H,U,$,W,V,K,J,q,z,Y,X,Q,Z,ee=e("./chunk-PRUNMTRD.js"),te=e("./chunk-74W7X6BE.js"),re=e("./chunk-SD6CWFDF.js"),se=e("./chunk-RXIUMVA5.js"),ne=e("./chunk-6DODV6OV.js"),ie=e("./chunk-7LXE4KHV.js"),ae=e("./chunk-V72C4MCR.js"),oe=e("./chunk-QP75SWIQ.js"),ce=e("./chunk-NYKRCWBG.js"),le=e("./chunk-WR5F34OW.js"),ue=e("./chunk-TJMQEH57.js"),de=e("./chunk-2EU6346V.js"),he=e("./chunk-2XKEAKQG.js"),me=e("./chunk-RHDPOIS4.js"),pe=e("./chunk-6OLJWLKK.js"),fe=e("./chunk-7NMV2NPM.js"),ge=e("./chunk-ARZHJFVG.js"),ve=e("./chunk-QTKXIDGE.js"),_e=e("./chunk-C3WC4OJ3.js"),ye=e("./chunk-QH2H4W3N.js"),ke=e("./chunk-OZ6UB42C.js"),we=e("./chunk-76FONEDA.js"),be=e("./chunk-S6VGOPUY.js"),Te=e("./chunk-Z4BLTVTB.js"),Se=e("@ethereumjs/common"),Ee=e("@ethereumjs/tx"),Pe=e("@ethereumjs/util"),Ie=e("@metamask/base-controller"),Ae=e("@metamask/controller-utils"),je=e("@metamask/eth-query"),Ce=(s=je)&&s.__esModule?s:{default:s},xe=e("@metamask/network-controller"),Ne=e("@metamask/nonce-tracker"),Re=e("@metamask/rpc-errors"),Me=e("@metamask/utils"),Be=e("async-mutex"),Oe=e("eth-method-registry"),Le=e("events"),Ge=e("lodash"),Fe=e("uuid"),De={transactions:{persist:!0,anonymous:!1},methodData:{persist:!0,anonymous:!1},lastFetchedBlockNumbers:{persist:!0,anonymous:!1}},He=Se.Hardfork.London,Ue=1.1,$e=1.1,We="TransactionController",Ve=(e=>(e.Approved="approved",e.NotApproved="not-approved",e.SkippedViaBeforePublishHook="skipped-via-before-publish-hook",e))(Ve||{});var Ke=class extends Ie.BaseController{constructor({blockTracker:e,disableHistory:t,disableSendFlowHistory:r,disableSwaps:s,getCurrentAccountEIP1559Compatibility:y,getCurrentNetworkEIP1559Compatibility:T,getExternalPendingTransactions:I,getGasFeeEstimates:j,getNetworkClientRegistry:B,getNetworkState:L,getPermittedAccounts:F,getSavedGasFees:H,incomingTransactions:V={},isMultichainEnabled:J=!1,isSimulationEnabled:z,messenger:X,onNetworkStateChange:Z,pendingTransactions:ee={},provider:te,securityProviderRequest:re,sign:se,state:ne,testGasFeeFlows:ie,transactionHistoryLimit:ae=40,hooks:oe}){super({name:We,metadata:De,messenger:X,state:{methodData:{},transactions:[],lastFetchedBlockNumbers:{},...ne}}),Te.__privateAdd.call(void 0,this,d),Te.__privateAdd.call(void 0,this,m),Te.__privateAdd.call(void 0,this,f),Te.__privateAdd.call(void 0,this,_),Te.__privateAdd.call(void 0,this,k),Te.__privateAdd.call(void 0,this,b),Te.__privateAdd.call(void 0,this,S),Te.__privateAdd.call(void 0,this,P),Te.__privateAdd.call(void 0,this,A),Te.__privateAdd.call(void 0,this,C),Te.__privateAdd.call(void 0,this,N),Te.__privateAdd.call(void 0,this,M),Te.__privateAdd.call(void 0,this,O),Te.__privateAdd.call(void 0,this,G),Te.__privateAdd.call(void 0,this,D),Te.__privateAdd.call(void 0,this,U),Te.__privateAdd.call(void 0,this,W),Te.__privateAdd.call(void 0,this,K),Te.__privateAdd.call(void 0,this,q),Te.__privateAdd.call(void 0,this,Y),Te.__privateAdd.call(void 0,this,Q),Te.__privateAdd.call(void 0,this,n,new(0,Le.EventEmitter)),this.approvingTransactionIds=new Set,this.mutex=new(0,Be.Mutex),Te.__privateAdd.call(void 0,this,i,void 0),Te.__privateAdd.call(void 0,this,a,void 0),this.signAbortCallbacks=new Map,Te.__privateAdd.call(void 0,this,o,void 0),Te.__privateAdd.call(void 0,this,c,void 0),Te.__privateAdd.call(void 0,this,l,void 0),Te.__privateAdd.call(void 0,this,u,void 0),Te.__privateAdd.call(void 0,this,v,(()=>{this.pendingTransactionTracker.startIfPendingTransactions(),Te.__privateGet.call(void 0,this,u).checkForPendingTransactionAndStartPolling()})),this.messagingSystem=X,this.getNetworkState=L,this.isSendFlowHistoryDisabled=r??!1,this.isHistoryDisabled=t??!1,this.isSwapsDisabled=s??!1,Te.__privateSet.call(void 0,this,c,z??(()=>!0)),this.registry=new(0,Oe.MethodRegistry)({provider:te}),this.getSavedGasFees=H??(e=>{}),this.getCurrentAccountEIP1559Compatibility=y??(()=>Promise.resolve(!0)),this.getCurrentNetworkEIP1559Compatibility=T,this.getGasFeeEstimates=j||(()=>Promise.resolve({})),this.getPermittedAccounts=F,this.getExternalPendingTransactions=I??(()=>[]),this.securityProviderRequest=re,Te.__privateSet.call(void 0,this,i,V),Te.__privateSet.call(void 0,this,a,ee),Te.__privateSet.call(void 0,this,o,ae),this.sign=se,Te.__privateSet.call(void 0,this,l,!0===ie),this.afterSign=oe?.afterSign??(()=>!0),this.beforeCheckPendingTransaction=oe?.beforeCheckPendingTransaction??(()=>!0),this.beforePublish=oe?.beforePublish??(()=>!0),this.getAdditionalSignArguments=oe?.getAdditionalSignArguments??(()=>[]),this.publish=oe?.publish??(()=>Promise.resolve({transactionHash:void 0})),this.nonceTracker=Te.__privateMethod.call(void 0,this,d,h).call(this,{provider:te,blockTracker:e});const ce=e=>this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",e);Te.__privateSet.call(void 0,this,u,new(0,pe.MultichainTrackingHelper)({isMultichainEnabled:J,provider:te,nonceTracker:this.nonceTracker,incomingTransactionOptions:V,findNetworkClientIdByChainId:ce,getNetworkClientById:e=>this.messagingSystem.call("NetworkController:getNetworkClientById",e),getNetworkClientRegistry:B,removeIncomingTransactionHelperListeners:Te.__privateMethod.call(void 0,this,k,w).bind(this),removePendingTransactionTrackerListeners:Te.__privateMethod.call(void 0,this,S,E).bind(this),createNonceTracker:Te.__privateMethod.call(void 0,this,d,h).bind(this),createIncomingTransactionHelper:Te.__privateMethod.call(void 0,this,m,p).bind(this),createPendingTransactionTracker:Te.__privateMethod.call(void 0,this,f,g).bind(this),onNetworkStateChange:e=>{this.messagingSystem.subscribe("NetworkController:stateChange",e)}})),Te.__privateGet.call(void 0,this,u).initialize();const le=new(0,fe.EtherscanRemoteTransactionSource)({includeTokenTransfers:V.includeTokenTransfers});this.incomingTransactionHelper=Te.__privateMethod.call(void 0,this,m,p).call(this,{blockTracker:e,etherscanRemoteTransactionSource:le}),this.pendingTransactionTracker=Te.__privateMethod.call(void 0,this,f,g).call(this,{provider:te,blockTracker:e}),this.gasFeeFlows=Te.__privateMethod.call(void 0,this,C,x).call(this),this.layer1GasFeeFlows=Te.__privateMethod.call(void 0,this,N,R).call(this);new(0,de.GasFeePoller)({findNetworkClientIdByChainId:ce,gasFeeFlows:this.gasFeeFlows,getGasFeeControllerEstimates:this.getGasFeeEstimates,getProvider:(e,t)=>Te.__privateGet.call(void 0,this,u).getProvider({networkClientId:t,chainId:e}),getTransactions:()=>this.state.transactions,layer1GasFeeFlows:this.layer1GasFeeFlows,onStateChange:e=>{this.messagingSystem.subscribe("TransactionController:stateChange",e)}}).hub.on("transaction-updated",Te.__privateMethod.call(void 0,this,U,$).bind(this)),this.messagingSystem.subscribe("TransactionController:stateChange",Te.__privateGet.call(void 0,this,v)),Z((()=>{be.projectLogger.call(void 0,"Detected network change",this.getChainId()),this.pendingTransactionTracker.startIfPendingTransactions(),this.onBootCleanup()})),this.onBootCleanup(),Te.__privateGet.call(void 0,this,v).call(this)}failTransaction(e,t,r){let s;try{s=Te.__privateMethod.call(void 0,this,M,B).call(this,{transactionId:e.id,note:"TransactionController#failTransaction - Add error message and set status to failed",skipValidation:!0},(e=>{e.status="failed",e.error=ke.normalizeTxError.call(void 0,t)}))}catch(r){be.projectLogger.call(void 0,"Failed to mark transaction as failed",r),s={...e,status:"failed",error:ke.normalizeTxError.call(void 0,t)}}this.messagingSystem.publish(`${We}:transactionFailed`,{actionId:r,error:t.message,transactionMeta:s}),this.onTransactionStatusChange(s),this.messagingSystem.publish(`${We}:transactionFinished`,s),Te.__privateGet.call(void 0,this,n).emit(`${e.id}:finished`,s)}async registryLookup(e){const t=await this.registry.lookup(e);if(!t)return{registryMethod:"",parsedRegistryMethod:{name:void 0,args:void 0}};return{registryMethod:t,parsedRegistryMethod:this.registry.parse(t)}}destroy(){Te.__privateMethod.call(void 0,this,_,y).call(this)}async handleMethodData(e){const t=await this.mutex.acquire();try{const{methodData:t}=this.state;if(Object.keys(t).find((t=>e===t)))return t[e];const r=await this.registryLookup(e);return this.update((t=>{t.methodData[e]=r})),r}finally{t()}}async addTransaction(e,{actionId:t,deviceConfirmedOn:r,method:s,origin:n,requireApproval:i,securityAlertResponse:a,sendFlowHistory:o,swaps:c={},type:l,networkClientId:d}={}){if(be.projectLogger.call(void 0,"Adding transaction",e),e=ke.normalizeTransactionParams.call(void 0,e),d&&!Te.__privateGet.call(void 0,this,u).has(d))throw new Error("The networkClientId for this transaction could not be found");const h=d??Te.__privateMethod.call(void 0,this,K,J).call(this),m=await this.getEIP1559Compatibility(h);se.validateTxParams.call(void 0,e,m),n&&await se.validateTransactionOrigin.call(void 0,await this.getPermittedAccounts(n),Te.__privateMethod.call(void 0,this,Q,Z).call(this).address,e.from,n);const p=this.generateDappSuggestedGasFees(e,n),f=this.getChainId(h),g=Te.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:h,chainId:f}),v=l??(await re.determineTransactionType.call(void 0,e,g)).type,_=this.getTransactionWithActionId(t);let y=_?Ge.cloneDeep.call(void 0,_):{actionId:t,chainId:f,dappSuggestedGasFees:p,deviceConfirmedOn:r,id:Fe.v1.call(void 0),origin:n,securityAlertResponse:a,status:"unapproved",time:Date.now(),txParams:e,userEditedGasLimit:!1,verifiedOnBlockchain:!1,type:v,networkClientId:h};if(await this.updateGasProperties(y),!_){if(s&&this.securityProviderRequest){const e=await this.securityProviderRequest(y,s);y.securityProviderResponse=e}this.isSendFlowHistoryDisabled||(y.sendFlowHistory=o??[]),this.isHistoryDisabled||(y=oe.addInitialHistorySnapshot.call(void 0,y)),y=ye.updateSwapsTransaction.call(void 0,y,v,c,{isSwapsDisabled:this.isSwapsDisabled,cancelTransaction:this.cancelTransaction.bind(this),messenger:this.messagingSystem}),this.addMetadata(y),!1!==i?Te.__privateMethod.call(void 0,this,D,H).call(this,y):be.projectLogger.call(void 0,"Skipping simulation as approval not required"),this.messagingSystem.publish(`${We}:unapprovedTransactionAdded`,y)}return{result:this.processApproval(y,{isExisting:Boolean(_),requireApproval:i,actionId:t}),transactionMeta:y}}startIncomingTransactionPolling(e=[]){0!==e.length?Te.__privateGet.call(void 0,this,u).startIncomingTransactionPolling(e):this.incomingTransactionHelper.start()}stopIncomingTransactionPolling(e=[]){0!==e.length?Te.__privateGet.call(void 0,this,u).stopIncomingTransactionPolling(e):this.incomingTransactionHelper.stop()}stopAllIncomingTransactionPolling(){this.incomingTransactionHelper.stop(),Te.__privateGet.call(void 0,this,u).stopAllIncomingTransactionPolling()}async updateIncomingTransactions(e=[]){0!==e.length?await Te.__privateGet.call(void 0,this,u).updateIncomingTransactions(e):await this.incomingTransactionHelper.update()}async stopTransaction(e,t,{estimatedBaseFee:r,actionId:s}={}){if(this.getTransactionWithActionId(s))return;t&&(t=ke.normalizeGasFeeValues.call(void 0,t),ke.validateGasValues.call(void 0,t)),be.projectLogger.call(void 0,"Creating cancel transaction",e,t);const i=this.getTransaction(e);if(!i)return;if(!this.sign)throw new Error("No sign method defined.");const a=ke.getIncreasedPriceFromExisting.call(void 0,i.txParams.gasPrice,Ue),o=ke.isGasPriceValue.call(void 0,t)&&t.gasPrice,c=o&&ke.validateMinimumIncrease.call(void 0,o,a)||a,l=i.txParams?.maxFeePerGas,d=ke.getIncreasedPriceFromExisting.call(void 0,l,Ue),h=ke.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxFeePerGas,m=h&&ke.validateMinimumIncrease.call(void 0,h,d)||l&&d,p=i.txParams?.maxPriorityFeePerGas,f=ke.getIncreasedPriceFromExisting.call(void 0,p,Ue),g=ke.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxPriorityFeePerGas,v=g&&ke.validateMinimumIncrease.call(void 0,g,f)||p&&f,_=m&&v?{from:i.txParams.from,gasLimit:i.txParams.gas,maxFeePerGas:m,maxPriorityFeePerGas:v,type:"0x2",nonce:i.txParams.nonce,to:i.txParams.from,value:"0x0"}:{from:i.txParams.from,gasLimit:i.txParams.gas,gasPrice:c,nonce:i.txParams.nonce,to:i.txParams.from,value:"0x0"},y=this.prepareUnsignedEthTx(i.chainId,_),k=await this.sign(y,i.txParams.from),w=Pe.bufferToHex.call(void 0,k.serialize()),b=_.maxFeePerGas??_.gasPrice,T=_.maxFeePerGas?i.txParams.maxFeePerGas:i.txParams.gasPrice;be.projectLogger.call(void 0,"Submitting cancel transaction",{oldFee:T,newFee:b,txParams:_});const S=Te.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:i.networkClientId,chainId:i.chainId}),E=await this.publishTransactionForRetry(S,w,i),P={actionId:s,chainId:i.chainId,networkClientId:i.networkClientId,estimatedBaseFee:r,hash:E,id:Fe.v1.call(void 0),originalGasEstimate:i.txParams.gas,rawTx:w,status:"submitted",time:Date.now(),type:"cancel",txParams:_};this.addMetadata(P),this.messagingSystem.publish(`${We}:transactionApproved`,{transactionMeta:P,actionId:s}),this.messagingSystem.publish(`${We}:transactionSubmitted`,{transactionMeta:P,actionId:s}),this.messagingSystem.publish(`${We}:transactionFinished`,P),Te.__privateGet.call(void 0,this,n).emit(`${i.id}:finished`,P)}async speedUpTransaction(e,t,{actionId:r,estimatedBaseFee:s}={}){if(this.getTransactionWithActionId(r))return;t&&(t=ke.normalizeGasFeeValues.call(void 0,t),ke.validateGasValues.call(void 0,t)),be.projectLogger.call(void 0,"Creating speed up transaction",e,t);const n=this.getTransaction(e);if(!n)return;if(!this.sign)throw new Error("No sign method defined.");const i=ke.getIncreasedPriceFromExisting.call(void 0,n.txParams.gasPrice,$e),a=ke.isGasPriceValue.call(void 0,t)&&t.gasPrice,o=a&&ke.validateMinimumIncrease.call(void 0,a,i)||i,c=n.txParams?.maxFeePerGas,l=ke.getIncreasedPriceFromExisting.call(void 0,c,$e),d=ke.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxFeePerGas,h=d&&ke.validateMinimumIncrease.call(void 0,d,l)||c&&l,m=n.txParams?.maxPriorityFeePerGas,p=ke.getIncreasedPriceFromExisting.call(void 0,m,$e),f=ke.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxPriorityFeePerGas,g=f&&ke.validateMinimumIncrease.call(void 0,f,p)||m&&p,v=h&&g?{...n.txParams,gasLimit:n.txParams.gas,maxFeePerGas:h,maxPriorityFeePerGas:g,type:"0x2"}:{...n.txParams,gasLimit:n.txParams.gas,gasPrice:o},_=this.prepareUnsignedEthTx(n.chainId,v),y=await this.sign(_,n.txParams.from),k=this.updateTransactionMetaRSV(n,y),w=Pe.bufferToHex.call(void 0,y.serialize()),b=v.maxFeePerGas??v.gasPrice,T=v.maxFeePerGas?k.txParams.maxFeePerGas:k.txParams.gasPrice;be.projectLogger.call(void 0,"Submitting speed up transaction",{oldFee:T,newFee:b,txParams:v});const S=Te.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:n.networkClientId,chainId:n.chainId}),E=await this.publishTransactionForRetry(S,w,n),P={...k,estimatedBaseFee:s,id:Fe.v1.call(void 0),time:Date.now(),hash:E,actionId:r,originalGasEstimate:n.txParams.gas,type:"retry",originalType:n.type},I=h&&g?{...P,txParams:{...n.txParams,maxFeePerGas:h,maxPriorityFeePerGas:g}}:{...P,txParams:{...n.txParams,gasPrice:o}};this.addMetadata(I),this.messagingSystem.publish(`${We}:transactionApproved`,{transactionMeta:I,actionId:r}),this.messagingSystem.publish(`${We}:transactionSubmitted`,{transactionMeta:I,actionId:r}),this.messagingSystem.publish(`${We}:speedupTransactionAdded`,I)}async estimateGas(e,t){const r=Te.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:t}),{estimatedGas:s,simulationFails:n}=await ae.estimateGas.call(void 0,e,r);return{gas:s,simulationFails:n}}async estimateGasBuffered(e,t,r){const s=Te.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:r}),{blockGasLimit:n,estimatedGas:i,simulationFails:a}=await ae.estimateGas.call(void 0,e,s);return{gas:ae.addGasBuffer.call(void 0,i,n,t),simulationFails:a}}updateTransaction(e,t){const{id:r}=e;Te.__privateMethod.call(void 0,this,M,B).call(this,{transactionId:r,note:t},(()=>({...e})))}updateSecurityAlertResponse(e,t){if(!t)throw new Error("updateSecurityAlertResponse: securityAlertResponse should not be null");const r=this.getTransaction(e);if(!r)throw new Error("Cannot update security alert response as no transaction metadata found");const s={...r,securityAlertResponse:t};this.updateTransaction(s,`${We}:updatesecurityAlertResponse - securityAlertResponse updated`)}wipeTransactions(e,t){if(e&&!t)return void this.update((e=>{e.transactions=[]}));const r=this.getChainId(),s=this.state.transactions.filter((({chainId:s,txParams:n})=>{if(!(e||s===r))return!0;return!(!t||n.from?.toLowerCase()===t.toLowerCase())}));this.update((e=>{e.transactions=this.trimTransactionsForState(s)}))}async confirmExternalTransaction(e,t,r){const s=this.addExternalTransaction(e);try{const e=s.id,n={...s,status:"confirmed",txReceipt:t};r&&(n.baseFeePerGas=r),this.markNonceDuplicatesDropped(e),this.updateTransaction(n,`${We}:confirmExternalTransaction - Add external transaction`),this.onTransactionStatusChange(n),this.updatePostBalance(n),this.messagingSystem.publish(`${We}:transactionConfirmed`,n)}catch(e){console.error("Failed to confirm external transaction",e)}}updateTransactionSendFlowHistory(e,t,r){if(this.isSendFlowHistoryDisabled)throw new Error("Send flow history is disabled for the current transaction controller");const s=this.getTransaction(e);if(!s)throw new Error("Cannot update send flow history as no transaction metadata found");ke.validateIfTransactionUnapproved.call(void 0,s,"updateTransactionSendFlowHistory");const n=s.sendFlowHistory??[];if(t===n.length){const e={...s,sendFlowHistory:[...n,...r]};this.updateTransaction(e,`${We}:updateTransactionSendFlowHistory - sendFlowHistory updated`)}return this.getTransaction(e)}updateTransactionGasFees(e,{defaultGasEstimates:t,estimateUsed:r,estimateSuggested:s,gas:n,gasLimit:i,gasPrice:a,maxPriorityFeePerGas:o,maxFeePerGas:c,originalGasEstimate:l,userEditedGasLimit:u,userFeeLevel:d}){const h=this.getTransaction(e);if(!h)throw new Error("Cannot update transaction as no transaction metadata found");ke.validateIfTransactionUnapproved.call(void 0,h,"updateTransactionGasFees");let m={txParams:{gas:n,gasLimit:i,gasPrice:a,maxPriorityFeePerGas:o,maxFeePerGas:c},defaultGasEstimates:t,estimateUsed:r,estimateSuggested:s,originalGasEstimate:l,userEditedGasLimit:u,userFeeLevel:d};m.txParams=Ge.pickBy.call(void 0,m.txParams),m=Ge.pickBy.call(void 0,m);const p=Ge.merge.call(void 0,{},h,m);return this.updateTransaction(p,`${We}:updateTransactionGasFees - gas values updated`),this.getTransaction(e)}updatePreviousGasParams(e,{gasLimit:t,maxFeePerGas:r,maxPriorityFeePerGas:s}){const n=this.getTransaction(e);if(!n)throw new Error("Cannot update transaction as no transaction metadata found");ke.validateIfTransactionUnapproved.call(void 0,n,"updatePreviousGasParams");const i={previousGas:{gasLimit:t,maxFeePerGas:r,maxPriorityFeePerGas:s}};i.previousGas=Ge.pickBy.call(void 0,i.previousGas);const a=Ge.merge.call(void 0,{},n,i);return this.updateTransaction(a,`${We}:updatePreviousGasParams - Previous gas values updated`),this.getTransaction(e)}async getNonceLock(e,t){return Te.__privateGet.call(void 0,this,u).getNonceLock(e,t)}async updateEditableParams(e,{data:t,gas:r,gasPrice:s,from:n,to:i,value:a}){const o=this.getTransaction(e);if(!o)throw new Error("Cannot update editable params as no transaction metadata found");ke.validateIfTransactionUnapproved.call(void 0,o,"updateEditableParams");const c={txParams:{data:t,from:n,to:i,value:a,gas:r,gasPrice:s}};c.txParams=Ge.pickBy.call(void 0,c.txParams);const l=Ge.merge.call(void 0,{},o,c),d=Te.__privateGet.call(void 0,this,u).getProvider({chainId:o.chainId,networkClientId:o.networkClientId}),h=new(0,Ce.default)(d),{type:m}=await re.determineTransactionType.call(void 0,l.txParams,h);return l.type=m,await he.updateTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:this.layer1GasFeeFlows,provider:d,transactionMeta:l}),this.updateTransaction(l,`Update Editable Params for ${e}`),this.getTransaction(e)}async approveTransactionsWithSameNonce(e=[],{hasNonce:t}={}){if(be.projectLogger.call(void 0,"Approving transactions with same nonce",{transactions:e}),0===e.length)return"";const r=e[0],s=this.getCommonConfiguration(r.chainId);let n;try{n=this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",r.chainId)}catch(e){be.projectLogger.call(void 0,"failed to find networkClientId from chainId",e)}const i=Ee.TransactionFactory.fromTxData(r,{common:s}),a=Pe.bufferToHex.call(void 0,i.serialize());if(this.approvingTransactionIds.has(a))return"";let o,c;this.approvingTransactionIds.add(a);try{const s=r.from;c=!0!==t?await this.getNonceLock(s,n):void 0;const i=c?Me.add0x.call(void 0,c.nextNonce.toString(16)):r.nonce;c&&be.projectLogger.call(void 0,"Using nonce from nonce tracker",i,c.nonceDetails),o=await Promise.all(e.map((e=>(e.nonce=i,this.signExternalTransaction(e.chainId,e)))))}catch(e){throw be.projectLogger.call(void 0,"Error while signing transactions with same nonce",e),e}finally{c?.releaseLock(),this.approvingTransactionIds.delete(a)}return o}updateCustodialTransaction(e,{errorMessage:t,hash:r,status:s}){const i=this.getTransaction(e);if(!i)throw new Error("Cannot update custodial transaction as no transaction metadata found");if(!i.custodyId)throw new Error("Transaction must be a custodian transaction");if(s&&!["submitted","signed","failed"].includes(s))throw new Error(`Cannot update custodial transaction with status: ${s}`);const a=Ge.merge.call(void 0,{},i,Ge.pickBy.call(void 0,{hash:r,status:s}));"submitted"===a.status&&(a.submittedTime=(new Date).getTime()),"failed"===a.status&&(a.error=ke.normalizeTxError.call(void 0,new Error(t))),this.updateTransaction(a,`${We}:updateCustodialTransaction - Custodial transaction updated`),["submitted","failed"].includes(s)&&(this.messagingSystem.publish(`${We}:transactionFinished`,a),Te.__privateGet.call(void 0,this,n).emit(`${a.id}:finished`,a))}getTransactions({searchCriteria:e={},initialList:t,filterToCurrentNetwork:r=!0,limit:s}={}){const n=this.getChainId(),i=Ge.mapValues.call(void 0,e,(e=>"function"==typeof e?e:t=>t===e)),a=t??this.state.transactions,o=Ge.sortBy.call(void 0,Ge.pickBy.call(void 0,a,(e=>{if(r&&e.chainId!==n)return!1;for(const[t,r]of Object.entries(i))if(t in e.txParams){if(!1===r(e.txParams[t]))return!1}else if(!1===r(e[t]))return!1;return!0})),"time");if(void 0!==s){const e=new Set,t=[];for(let r=o.length-1;r>-1;r--){const n=o[r],{nonce:i}=n.txParams;if(!e.has(i)){if(!(e.size<s))continue;e.add(i)}t.unshift(n)}return t}return o}async estimateGasFee({transactionParams:e,chainId:t,networkClientId:r}){const s=Te.__privateMethod.call(void 0,this,W,V).call(this,{networkClientId:r,chainId:t}),n={txParams:e,chainId:t,networkClientId:s},i=we.getGasFeeFlow.call(void 0,n,this.gasFeeFlows),a=Te.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:s,chainId:t}),o=await this.getGasFeeEstimates({networkClientId:s});return i.getGasFees({ethQuery:a,gasFeeControllerData:o,transactionMeta:n})}async getLayer1GasFee({transactionParams:e,chainId:t,networkClientId:r}){const s=Te.__privateGet.call(void 0,this,u).getProvider({networkClientId:r,chainId:t});return await he.getTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:this.layer1GasFeeFlows,provider:s,transactionMeta:{txParams:e,chainId:t}})}async signExternalTransaction(e,t){if(!this.sign)throw new Error("No sign method defined.");const r=ke.normalizeTransactionParams.call(void 0,t),s=ke.isEIP1559Transaction.call(void 0,r)?"0x2":"0x0",n={...r,type:s,gasLimit:r.gas,chainId:e},{from:i}=n,a=this.getCommonConfiguration(e),o=Ee.TransactionFactory.fromTxData(n,{common:a}),c=await this.sign(o,i);return Pe.bufferToHex.call(void 0,c.serialize())}clearUnapprovedTransactions(){const e=this.state.transactions.filter((({status:e})=>"unapproved"!==e));this.update((t=>{t.transactions=this.trimTransactionsForState(e)}))}abortTransactionSigning(e){if(!this.getTransaction(e))throw new Error("Cannot abort signing as no transaction metadata found");const t=this.signAbortCallbacks.get(e);if(!t)throw new Error("Cannot abort signing as transaction is not waiting for signing");t(),this.signAbortCallbacks.delete(e)}addMetadata(e){this.update((t=>{t.transactions=this.trimTransactionsForState([...t.transactions,e])}))}async updateGasProperties(e){const t=await this.getEIP1559Compatibility(e.networkClientId)&&"0x0"!==e.txParams.type,{networkClientId:r,chainId:s}=e,n=Te.__privateMethod.call(void 0,this,Y,X).call(this,r),i=Te.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:r,chainId:s}),a=Te.__privateGet.call(void 0,this,u).getProvider({networkClientId:r,chainId:s});await ae.updateGas.call(void 0,{ethQuery:i,chainId:s,isCustomNetwork:n,txMeta:e}),await _e.updateGasFees.call(void 0,{eip1559:t,ethQuery:i,gasFeeFlows:this.gasFeeFlows,getGasFeeEstimates:this.getGasFeeEstimates,getSavedGasFees:this.getSavedGasFees.bind(this),txMeta:e}),await he.updateTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:this.layer1GasFeeFlows,provider:a,transactionMeta:e})}onBootCleanup(){this.clearUnapprovedTransactions(),this.failIncompleteTransactions()}failIncompleteTransactions(){const e=this.state.transactions.filter((e=>["approved","signed"].includes(e.status)));for(const t of e)this.failTransaction(t,new Error("Transaction incomplete at startup"))}async processApproval(e,{isExisting:t=!1,requireApproval:r,shouldShowRequest:s=!0,actionId:n}){const i=e.id;let a;const{meta:o,isCompleted:c}=this.isTransactionCompleted(i),l=c?Promise.resolve(o):this.waitForTransactionFinished(i);if(o&&!t&&!c)try{if(!1!==r){const t=await this.requestApproval(e,{shouldShowRequest:s});a=t.resultCallbacks;const r=t.value,n=r?.txMeta;n&&(be.projectLogger.call(void 0,"Updating transaction with approval data",{customNonce:n.customNonceValue,params:n.txParams}),this.updateTransaction(n,"TransactionController#processApproval - Updated with approval data"))}const{isCompleted:t}=this.isTransactionCompleted(i);if(!t){"skipped-via-before-publish-hook"===await this.approveTransaction(i)&&a&&a.success();const e=this.getTransaction(i);this.messagingSystem.publish(`${We}:transactionApproved`,{transactionMeta:e,actionId:n})}}catch(e){const{isCompleted:t}=this.isTransactionCompleted(i);if(!t){if(e?.code===Re.errorCodes.provider.userRejectedRequest)throw this.cancelTransaction(i,n),Re.providerErrors.userRejectedRequest("MetaMask Tx Signature: User denied transaction signature.");this.failTransaction(o,e,n)}}const u=await l;switch(u?.status){case"failed":throw a?.error(u.error),Re.rpcErrors.internal(u.error.message);case"submitted":return a?.success(),u.hash;default:const e=Re.rpcErrors.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(u||i)}`);throw a?.error(e),e}}async approveTransaction(e){const t=new Array;t.push(await this.mutex.acquire());let r=this.getTransactionOrThrow(e);try{if(!this.sign)return this.failTransaction(r,new Error("No sign method defined.")),"not-approved";if(!r.chainId)return this.failTransaction(r,new Error("No chainId defined.")),"not-approved";if(this.approvingTransactionIds.has(e))return be.projectLogger.call(void 0,"Skipping approval as signing in progress",e),"not-approved";this.approvingTransactionIds.add(e),t.push((()=>this.approvingTransactionIds.delete(e)));const[s,i]=await ee.getNextNonce.call(void 0,r,(e=>Te.__privateGet.call(void 0,this,u).getNonceLock(e,r.networkClientId)));i&&t.push(i),r=Te.__privateMethod.call(void 0,this,M,B).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction approved"},(e=>{const{txParams:t,chainId:r}=e;e.status="approved",e.txParams={...t,nonce:s,chainId:r,gasLimit:t.gas,...ke.isEIP1559Transaction.call(void 0,t)&&{type:"0x2"}}})),this.onTransactionStatusChange(r);const a=await this.signTransaction(r,r.txParams);if(!this.beforePublish(r))return be.projectLogger.call(void 0,"Skipping publishing transaction based on hook"),this.messagingSystem.publish(`${We}:transactionPublishingSkipped`,r),"skipped-via-before-publish-hook";if(!a)return"not-approved";const o=Te.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:r.networkClientId,chainId:r.chainId});let c;const l="swap"===r.type;l&&(be.projectLogger.call(void 0,"Determining pre-transaction balance"),c=await Ae.query.call(void 0,o,"getBalance",[r.txParams.from])),be.projectLogger.call(void 0,"Publishing transaction",r.txParams);let{transactionHash:d}=await this.publish(r,a);return void 0===d&&(d=await this.publishTransaction(o,a)),be.projectLogger.call(void 0,"Publish successful",d),r=Te.__privateMethod.call(void 0,this,M,B).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction submitted"},(e=>{e.hash=d,e.status="submitted",e.submittedTime=(new Date).getTime(),l&&(e.preTxBalance=c,be.projectLogger.call(void 0,"Updated pre-transaction balance",c))})),this.messagingSystem.publish(`${We}:transactionSubmitted`,{transactionMeta:r}),this.messagingSystem.publish(`${We}:transactionFinished`,r),Te.__privateGet.call(void 0,this,n).emit(`${e}:finished`,r),this.onTransactionStatusChange(r),"approved"}catch(e){return this.failTransaction(r,e),"not-approved"}finally{t.forEach((e=>e()))}}async publishTransaction(e,t){return await Ae.query.call(void 0,e,"sendRawTransaction",[t])}cancelTransaction(e,t){const r=this.state.transactions.find((({id:t})=>t===e));if(!r)return;this.update((t=>{const r=t.transactions.filter((({id:t})=>t!==e));t.transactions=this.trimTransactionsForState(r)}));const s={...r,status:"rejected"};this.messagingSystem.publish(`${We}:transactionFinished`,s),Te.__privateGet.call(void 0,this,n).emit(`${r.id}:finished`,s),this.messagingSystem.publish(`${We}:transactionRejected`,{transactionMeta:s,actionId:t}),this.onTransactionStatusChange(s)}trimTransactionsForState(e){const t=new Set,r=[...e].sort(((e,t)=>e.time>t.time?-1:1)).filter((e=>{const{chainId:r,status:s,txParams:n,time:i}=e;if(n){const e=`${String(n.nonce)}-${Ae.convertHexToDecimal.call(void 0,r)}-${new Date(i).toDateString()}`;if(t.has(e))return!0;if(t.size<Te.__privateGet.call(void 0,this,o)||!this.isFinalState(s))return t.add(e),!0}return!1}));return r.reverse(),r}isFinalState(e){return"rejected"===e||"confirmed"===e||"failed"===e}isLocalFinalState(e){return["confirmed","failed","rejected","submitted"].includes(e)}async requestApproval(e,{shouldShowRequest:t}){const r=this.getApprovalId(e),{origin:s}=e,n=Ae.ApprovalType.Transaction,i={txId:e.id};return await this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:s||Ae.ORIGIN_METAMASK,type:n,requestData:i,expectsResult:!0},t)}getTransaction(e){const{transactions:t}=this.state;return t.find((({id:t})=>t===e))}getTransactionOrThrow(e,t="TransactionController"){const r=this.getTransaction(e);if(!r)throw new Error(`${t}: No transaction found with id ${e}`);return r}getApprovalId(e){return String(e.id)}isTransactionCompleted(e){const t=this.getTransaction(e);if(!t)return{meta:void 0,isCompleted:!1};return{meta:t,isCompleted:this.isLocalFinalState(t.status)}}getChainId(e){const t=Te.__privateMethod.call(void 0,this,q,z).call(this),r=Te.__privateMethod.call(void 0,this,K,J).call(this);return e&&e!==r?this.messagingSystem.call("NetworkController:getNetworkClientById",e).configuration.chainId:t}prepareUnsignedEthTx(e,t){return Ee.TransactionFactory.fromTxData(t,{freeze:!1,common:this.getCommonConfiguration(e)})}getCommonConfiguration(e){const t={chainId:parseInt(e,16),defaultHardfork:He};return Se.Common.custom(t)}onIncomingTransactions({added:e,updated:t}){this.update((r=>{const{transactions:s}=r,n=[...e,...s.map((e=>t.find((({hash:t})=>t===e.hash))??e))];r.transactions=this.trimTransactionsForState(n)}))}onUpdatedLastFetchedBlockNumbers({lastFetchedBlockNumbers:e,blockNumber:t}){this.update((t=>{t.lastFetchedBlockNumbers=e})),this.messagingSystem.publish(`${We}:incomingTransactionBlockReceived`,t)}generateDappSuggestedGasFees(e,t){if(!t||t===Ae.ORIGIN_METAMASK)return;const{gasPrice:r,maxFeePerGas:s,maxPriorityFeePerGas:n,gas:i}=e;if(void 0===r&&void 0===s&&void 0===n&&void 0===i)return;const a={};return void 0!==r?a.gasPrice=r:void 0===s&&void 0===n||(a.maxFeePerGas=s,a.maxPriorityFeePerGas=n),void 0!==i&&(a.gas=i),a}addExternalTransaction(e){const{chainId:t}=e,{transactions:r}=this.state,s=e?.txParams?.from,n=r.filter((e=>e.txParams.from===s&&e.chainId===t)),i=n.filter((e=>"confirmed"===e.status)),a=n.filter((e=>"submitted"===e.status));ie.validateConfirmedExternalTransaction.call(void 0,e,i,a);const o=0!==(e.history??[]).length||this.isHistoryDisabled?e:oe.addInitialHistorySnapshot.call(void 0,e);return this.update((e=>{e.transactions=this.trimTransactionsForState([...e.transactions,o])})),o}markNonceDuplicatesDropped(e){const t=this.getTransaction(e);if(!t)return;const r=t.txParams?.nonce,s=t.txParams?.from,{chainId:n}=t,i=this.state.transactions.filter((t=>t.id!==e&&t.txParams.from===s&&t.txParams.nonce===r&&t.chainId===n&&"incoming"!==t.type)),a=i.map((e=>e.id));if(0!==i.length){this.update((e=>{for(const r of e.transactions)a.includes(r.id)&&(r.replacedBy=t?.hash,r.replacedById=t?.id)}));for(const e of this.state.transactions)a.includes(e.id)&&"failed"!==e.status&&this.setTransactionStatusDropped(e)}}setTransactionStatusDropped(e){const t={...e,status:"dropped"};this.messagingSystem.publish(`${We}:transactionDropped`,{transactionMeta:t}),this.updateTransaction(t,"TransactionController#setTransactionStatusDropped - Transaction dropped"),this.onTransactionStatusChange(t)}getTransactionWithActionId(e){return this.state.transactions.find((t=>e&&t.actionId===e))}async waitForTransactionFinished(e){return new Promise((t=>{Te.__privateGet.call(void 0,this,n).once(`${e}:finished`,(e=>{t(e)}))}))}updateTransactionMetaRSV(e,t){const r=Ge.cloneDeep.call(void 0,e);for(const e of["r","s","v"]){const s=t[e];null!=s&&(r[e]=Me.add0x.call(void 0,s.toString(16)))}return r}async getEIP1559Compatibility(e){const t=await this.getCurrentNetworkEIP1559Compatibility(e),r=await this.getCurrentAccountEIP1559Compatibility();return t&&r}async signTransaction(e,t){be.projectLogger.call(void 0,"Signing transaction",t);const r=this.prepareUnsignedEthTx(e.chainId,t);this.approvingTransactionIds.add(e.id);const s=await new Promise(((s,n)=>{this.sign?.(r,t.from,...this.getAdditionalSignArguments(e)).then(s,n),this.signAbortCallbacks.set(e.id,(()=>n(new Error("Signing aborted by user"))))}));if(this.signAbortCallbacks.delete(e.id),!s)return void be.projectLogger.call(void 0,"Skipping signed status as no signed transaction");const n=Ge.cloneDeep.call(void 0,e);if(!this.afterSign(n,s))return this.updateTransaction(n,"TransactionController#signTransaction - Update after sign"),void be.projectLogger.call(void 0,"Skipping signed status based on hook");const i={...this.updateTransactionMetaRSV(n,s),status:"signed"};this.updateTransaction(i,"TransactionController#approveTransaction - Transaction signed"),this.onTransactionStatusChange(i);const a=Pe.bufferToHex.call(void 0,s.serialize()),o=Ge.merge.call(void 0,{},i,{rawTx:a});return this.updateTransaction(o,"TransactionController#approveTransaction - RawTransaction added"),a}onTransactionStatusChange(e){this.messagingSystem.publish(`${We}:transactionStatusUpdated`,{transactionMeta:e})}getNonceTrackerTransactions(e,t,r=this.getChainId()){return ee.getAndFormatTransactionsForNonceTracker.call(void 0,r,t,e,this.state.transactions)}onConfirmedTransaction(e){be.projectLogger.call(void 0,"Processing confirmed transaction",e.id),this.markNonceDuplicatesDropped(e.id),this.messagingSystem.publish(`${We}:transactionConfirmed`,e),this.onTransactionStatusChange(e),this.updatePostBalance(e)}async updatePostBalance(e){try{if("swap"!==e.type)return;const t=Te.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:e.networkClientId,chainId:e.chainId}),{updatedTransactionMeta:r,approvalTransactionMeta:s}=await ye.updatePostTransactionBalance.call(void 0,e,{ethQuery:t,getTransaction:this.getTransaction.bind(this),updateTransaction:this.updateTransaction.bind(this)});this.messagingSystem.publish(`${We}:postTransactionBalanceUpdated`,{transactionMeta:r,approvalTransactionMeta:s})}catch(e){be.projectLogger.call(void 0,"Error while updating post transaction balance",e)}}async publishTransactionForRetry(e,t,r){try{return await this.publishTransaction(e,t)}catch(e){if(this.isTransactionAlreadyConfirmedError(e))throw await this.pendingTransactionTracker.forceCheckTransaction(r),new Error("Previous transaction is already confirmed");throw e}}isTransactionAlreadyConfirmedError(e){return e?.message?.includes("nonce too low")||e?.data?.message?.includes("nonce too low")}};n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakSet,h=function({provider:e,blockTracker:t,chainId:r}){return new(0,Ne.NonceTracker)({provider:e,blockTracker:t,getPendingTransactions:Te.__privateMethod.call(void 0,this,A,j).bind(this,r),getConfirmedTransactions:this.getNonceTrackerTransactions.bind(this,"confirmed")})},m=new WeakSet,p=function({blockTracker:e,etherscanRemoteTransactionSource:t,chainId:r}){const s=new(0,me.IncomingTransactionHelper)({blockTracker:e,getCurrentAccount:()=>Te.__privateMethod.call(void 0,this,Q,Z).call(this),getLastFetchedBlockNumbers:()=>this.state.lastFetchedBlockNumbers,getChainId:r?()=>r:this.getChainId.bind(this),isEnabled:Te.__privateGet.call(void 0,this,i).isEnabled,queryEntireHistory:Te.__privateGet.call(void 0,this,i).queryEntireHistory,remoteTransactionSource:t,transactionLimit:Te.__privateGet.call(void 0,this,o),updateTransactions:Te.__privateGet.call(void 0,this,i).updateTransactions});return Te.__privateMethod.call(void 0,this,b,T).call(this,s),s},f=new WeakSet,g=function({provider:e,blockTracker:t,chainId:r}){const s=new(0,Ce.default)(e),n=r?()=>r:this.getChainId.bind(this),i=new(0,ne.PendingTransactionTracker)({blockTracker:t,getChainId:n,getEthQuery:()=>s,getTransactions:()=>this.state.transactions,isResubmitEnabled:Te.__privateGet.call(void 0,this,a).isResubmitEnabled,getGlobalLock:()=>Te.__privateGet.call(void 0,this,u).acquireNonceLockForChainIdKey({chainId:n()}),publishTransaction:this.publishTransaction.bind(this),hooks:{beforeCheckPendingTransaction:this.beforeCheckPendingTransaction.bind(this),beforePublish:this.beforePublish.bind(this)}});return Te.__privateMethod.call(void 0,this,P,I).call(this,i),i},v=new WeakMap,_=new WeakSet,y=function(){this.pendingTransactionTracker.stop(),Te.__privateMethod.call(void 0,this,S,E).call(this,this.pendingTransactionTracker),this.incomingTransactionHelper.stop(),Te.__privateMethod.call(void 0,this,k,w).call(this,this.incomingTransactionHelper),Te.__privateGet.call(void 0,this,u).stopAllTracking()},k=new WeakSet,w=function(e){e.hub.removeAllListeners("transactions"),e.hub.removeAllListeners("updatedLastFetchedBlockNumbers")},b=new WeakSet,T=function(e){e.hub.on("transactions",this.onIncomingTransactions.bind(this)),e.hub.on("updatedLastFetchedBlockNumbers",this.onUpdatedLastFetchedBlockNumbers.bind(this))},S=new WeakSet,E=function(e){e.hub.removeAllListeners("transaction-confirmed"),e.hub.removeAllListeners("transaction-dropped"),e.hub.removeAllListeners("transaction-failed"),e.hub.removeAllListeners("transaction-updated")},P=new WeakSet,I=function(e){e.hub.on("transaction-confirmed",this.onConfirmedTransaction.bind(this)),e.hub.on("transaction-dropped",this.setTransactionStatusDropped.bind(this)),e.hub.on("transaction-failed",this.failTransaction.bind(this)),e.hub.on("transaction-updated",this.updateTransaction.bind(this))},A=new WeakSet,j=function(e,t){return[...this.getNonceTrackerTransactions("submitted",t,e),...this.getExternalPendingTransactions(t,e)]},C=new WeakSet,x=function(){return Te.__privateGet.call(void 0,this,l)?[new(0,ue.TestGasFeeFlow)]:[new(0,ge.LineaGasFeeFlow),new(0,ve.DefaultGasFeeFlow)]},N=new WeakSet,R=function(){return[new(0,ce.OptimismLayer1GasFeeFlow),new(0,le.ScrollLayer1GasFeeFlow)]},M=new WeakSet,B=function({transactionId:e,note:t,skipHistory:r,skipValidation:s},n){let i=[];this.update((a=>{const o=a.transactions.findIndex((({id:t})=>t===e));let c=a.transactions[o];c=n(c)??c,!0!==s&&(c.txParams=ke.normalizeTransactionParams.call(void 0,c.txParams),se.validateTxParams.call(void 0,c.txParams)),i=Te.__privateMethod.call(void 0,this,O,L).call(this,c);this.isHistoryDisabled||r||(c=oe.updateTransactionHistory.call(void 0,c,t??"Transaction updated")),a.transactions[o]=c}));const a=this.getTransaction(e);return i.length>0&&Te.__privateMethod.call(void 0,this,G,F).call(this,a,i),a},O=new WeakSet,L=function(e){const{id:t,txParams:r}=e,s=this.getTransaction(t)?.txParams;if(!s||Ge.isEqual.call(void 0,s,r))return[];const n=Object.keys(r).filter((e=>r[e]!==s[e]));return be.projectLogger.call(void 0,"Transaction parameters have been updated",t,n,s,r),n},G=new WeakSet,F=function(e,t){["to","value","data"].some((e=>t.includes(e)))&&(be.projectLogger.call(void 0,"Updating simulation data due to transaction parameter update"),Te.__privateMethod.call(void 0,this,D,H).call(this,e))},D=new WeakSet,H=async function(e){const{id:t,chainId:r,txParams:s}=e,{from:n,to:i,value:a,data:o}=s;let l={error:{code:"disabled",message:"Simulation disabled"},tokenBalanceChanges:[]};Te.__privateGet.call(void 0,this,c).call(this)&&(Te.__privateMethod.call(void 0,this,M,B).call(this,{transactionId:t,skipHistory:!0},(e=>{e.simulationData=void 0})),l=await te.getSimulationData.call(void 0,{chainId:r,from:n,to:i,value:a,data:o}));this.getTransaction(t)?(Te.__privateMethod.call(void 0,this,M,B).call(this,{transactionId:t,note:"TransactionController#updateSimulationData - Update simulation data"},(e=>{e.simulationData=l})),be.projectLogger.call(void 0,"Updated simulation data",t,l)):be.projectLogger.call(void 0,"Cannot update simulation data as transaction not found",t,l)},U=new WeakSet,$=function({transactionId:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:r,layer1GasFee:s}){Te.__privateMethod.call(void 0,this,M,B).call(this,{transactionId:e,skipHistory:!0},(e=>{t&&(e.gasFeeEstimates=t),void 0!==r&&(e.gasFeeEstimatesLoaded=r),s&&(e.layer1GasFee=s)}))},W=new WeakSet,V=function({networkClientId:e,chainId:t}){const r=Te.__privateMethod.call(void 0,this,q,z).call(this),s=Te.__privateMethod.call(void 0,this,K,J).call(this);return e||(t&&t!==r?this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",t):s)},K=new WeakSet,J=function(){return this.getNetworkState().selectedNetworkClientId},q=new WeakSet,z=function(){return this.messagingSystem.call("NetworkController:getNetworkClientById",this.getNetworkState().selectedNetworkClientId).configuration.chainId},Y=new WeakSet,X=function(e){const t=Te.__privateMethod.call(void 0,this,K,J).call(this);return e&&e!==t?this.messagingSystem.call("NetworkController:getNetworkClientById",e).configuration.type===xe.NetworkClientType.Custom:!Ae.isInfuraNetworkType.call(void 0,this.getNetworkState().selectedNetworkClientId)},Q=new WeakSet,Z=function(){return this.messagingSystem.call("AccountsController:getSelectedAccount")},r.HARDFORK=He,r.CANCEL_RATE=Ue,r.SPEED_UP_RATE=$e,r.ApprovalState=Ve,r.TransactionController=Ke}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-IVR4NMOF.js"}],[2184,{"./chunk-HMOSP33F.js":2182,"./chunk-S6VGOPUY.js":2193,"@metamask/controller-utils":2126,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-HMOSP33F.js"),n=e("./chunk-S6VGOPUY.js"),i=e("@metamask/controller-utils"),a=e("@metamask/utils").createModuleLogger.call(void 0,n.projectLogger,"simulation-api"),o="https://tx-sentinel-{0}.api.cx.metamask.io/",c="networks",l=0;function u(e){return o.replace("{0}",e)}r.simulateTransactions=async function(e,t){const r=await async function(e){const t=await async function(){const e=`${u("ethereum-mainnet")}${c}`,t=await fetch(e);return t.json()}(),r=i.convertHexToDecimal.call(void 0,e),n=t[r];if(!n?.confirmations)throw a("Chain is not supported",e),new(0,s.SimulationChainNotSupportedError)(e);return u(n.network)}(e);a("Sending request",r,t);const n=l;l+=1;const o=await fetch(r,{method:"POST",body:JSON.stringify({id:String(n),jsonrpc:"2.0",method:"infura_simulateTransactions",params:[t]})}),d=await o.json();if(a("Received response",d),d.error){const{code:e,message:t}=d.error;throw new(0,s.SimulationError)(t,e)}return d?.result}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-KT6UAKBB.js"}],[2185,{"./chunk-UGN7PBON.js":2196,"./chunk-YVCX6Z75.js":2200},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-YVCX6Z75.js"),n=e("./chunk-UGN7PBON.js"),i=[n.CHAIN_IDS.OPTIMISM,n.CHAIN_IDS.OPTIMISM_TESTNET,n.CHAIN_IDS.BASE,n.CHAIN_IDS.BASE_TESTNET,n.CHAIN_IDS.OPBNB,n.CHAIN_IDS.OPBNB_TESTNET,n.CHAIN_IDS.ZORA],a=class extends s.OracleLayer1GasFeeFlow{constructor(){super("0x420000000000000000000000000000000000000F")}matchesTransaction(e){return i.includes(e.chainId)}};r.OptimismLayer1GasFeeFlow=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-NYKRCWBG.js"}],[2186,{"@metamask/controller-utils":2126,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/controller-utils"),n=e("@metamask/utils"),i={data:e=>n.add0x.call(void 0,c(e)),from:e=>n.add0x.call(void 0,e).toLowerCase(),gas:e=>n.add0x.call(void 0,e),gasLimit:e=>n.add0x.call(void 0,e),gasPrice:e=>n.add0x.call(void 0,e),nonce:e=>n.add0x.call(void 0,e),to:e=>n.add0x.call(void 0,e).toLowerCase(),value:e=>n.add0x.call(void 0,e),maxFeePerGas:e=>n.add0x.call(void 0,e),maxPriorityFeePerGas:e=>n.add0x.call(void 0,e),estimatedBaseFee:e=>n.add0x.call(void 0,e),type:e=>n.add0x.call(void 0,e)};var a=(e,t)=>n.add0x.call(void 0,`${parseInt(""+e*t,10).toString(16)}`);function o(e){try{return JSON.parse(JSON.stringify(e)),!0}catch{return!1}}function c(e){const t=e.toLowerCase().startsWith("0x")?e.slice(0,2):"",r=t?e.slice(2):e;return t+(r.length%2==0?r:`0${r}`)}r.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error",r.normalizeTransactionParams=function(e){const t={from:""};for(const r of n.getKnownPropertyNames.call(void 0,i))e[r]&&(t[r]=i[r](e[r]));return t.value||(t.value="0x0"),t},r.isEIP1559Transaction=function(e){const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")},r.validateGasValues=e=>{Object.keys(e).forEach((t=>{const r=e[t];if("string"!=typeof r||!n.isStrictHexString.call(void 0,r))throw new TypeError(`expected hex string for ${t} but received: ${r}`)}))},r.isFeeMarketEIP1559Values=e=>void 0!==e?.maxFeePerGas||void 0!==e?.maxPriorityFeePerGas,r.isGasPriceValue=e=>void 0!==e?.gasPrice,r.getIncreasedPriceHex=a,r.getIncreasedPriceFromExisting=(e,t)=>a(s.convertHexToDecimal.call(void 0,e),t),r.validateMinimumIncrease=function(e,t){const r=s.convertHexToDecimal.call(void 0,e),n=s.convertHexToDecimal.call(void 0,t);if(r>=n)return e;throw new Error(`The proposed value: ${r} should meet or exceed the minimum value: ${n}`)},r.validateIfTransactionUnapproved=function(e,t){if("unapproved"!==e?.status)throw new Error(`TransactionsController: Can only call ${t} on an unapproved transaction.\n      Current tx status: ${e?.status}`)},r.normalizeTxError=function(e){return{name:e.name,message:e.message,stack:e.stack,code:e.code,rpc:o(e.value)?e.value:void 0}},r.normalizeGasFeeValues=function(e){const t=e=>"string"==typeof e?n.add0x.call(void 0,e):e;return"gasPrice"in e?{gasPrice:t(e.gasPrice)}:{maxFeePerGas:t(e.maxFeePerGas),maxPriorityFeePerGas:t(e.maxPriorityFeePerGas)}},r.padHexToEvenLength=c}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-OZ6UB42C.js"}],[2187,{"./chunk-S6VGOPUY.js":2193,"@metamask/controller-utils":2126},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-S6VGOPUY.js"),n=e("@metamask/controller-utils"),i=s.createModuleLogger.call(void 0,s.projectLogger,"nonce");r.getNextNonce=async function(e,t){const{customNonceValue:r,txParams:{from:s,nonce:a}}=e,o=r?n.toHex.call(void 0,r):void 0;if(o)return i("Using custom nonce",o),[o,void 0];if(a)return i("Using existing nonce",a),[a,void 0];const c=await t(s),l=n.toHex.call(void 0,c.nextNonce),u=c.releaseLock.bind(c);return i("Using nonce from nonce tracker",l,c.nonceDetails),[l,u]},r.getAndFormatTransactionsForNonceTracker=function(e,t,r,s){return s.filter((({chainId:s,isTransfer:n,isUserOperation:i,status:a,txParams:{from:o}})=>!n&&!i&&s===e&&a===r&&o.toLowerCase()===t.toLowerCase())).map((({status:e,txParams:{from:t,gas:r,value:s,nonce:n}})=>({status:e,history:[{}],txParams:{from:t??"",gas:r??"",value:s??"",nonce:n??""}})))}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-PRUNMTRD.js"}],[2188,{"./chunk-OZ6UB42C.js":2186,"./chunk-S6VGOPUY.js":2193,"./chunk-UGN7PBON.js":2196,"@metamask/controller-utils":2126,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-OZ6UB42C.js"),n=e("./chunk-UGN7PBON.js"),i=e("./chunk-S6VGOPUY.js"),a=e("@metamask/controller-utils"),o=e("lodash"),c=i.createModuleLogger.call(void 0,i.projectLogger,"swaps"),l=5e3,u="0x0000000000000000000000000000000000000000",d={name:"Ether",address:u,decimals:18},h={name:"Binance Coin",address:u,decimals:18},m={name:"Matic",address:u,decimals:18},p={name:"Avalanche",address:u,decimals:18},f={name:"Test Ether",address:u,decimals:18},g={name:"Ether",address:u,decimals:18},v={...d},_={...d},y={...d},k={[n.CHAIN_IDS.MAINNET]:d,"0x539":f,[n.CHAIN_IDS.BSC]:h,[n.CHAIN_IDS.POLYGON]:m,[n.CHAIN_IDS.GOERLI]:g,[n.CHAIN_IDS.AVALANCHE]:p,[n.CHAIN_IDS.OPTIMISM]:_,[n.CHAIN_IDS.ARBITRUM]:v,[n.CHAIN_IDS.ZKSYNC_ERA]:y},w=["swap","swapAndSend","swapApproval"];function b(e,t){return!(!e||!t)&&e===k[t]?.address}function T(e){return new Promise((t=>setTimeout(t,e)))}r.UPDATE_POST_TX_BALANCE_TIMEOUT=l,r.UPDATE_POST_TX_BALANCE_ATTEMPTS=6,r.DEFAULT_TOKEN_ADDRESS=u,r.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=k,r.SWAP_TRANSACTION_TYPES=w,r.updateSwapsTransaction=function(e,t,r,{isSwapsDisabled:n,cancelTransaction:i,messenger:a}){if(n||!w.includes(t))return e;if("swap"===t&&!1===r?.hasApproveTx&&e.simulationFails)throw i(e.id),new Error("Simulation failed");const c=r?.meta;if(!c)return e;let l=e;return"swapApproval"===t&&(l=function(e,{type:t,sourceTokenSymbol:r}){s.validateIfTransactionUnapproved.call(void 0,e,"updateSwapApprovalTransaction");let n={type:t,sourceTokenSymbol:r};return n=o.pickBy.call(void 0,{type:t,sourceTokenSymbol:r}),o.merge.call(void 0,{},e,n)}(e,c),a.publish("TransactionController:transactionNewSwapApproval",{transactionMeta:l})),"swapAndSend"===t&&(l=function(e,{approvalTxId:t,destinationTokenAddress:r,destinationTokenAmount:n,destinationTokenDecimals:i,destinationTokenSymbol:a,estimatedBaseFee:c,sourceTokenAddress:l,sourceTokenAmount:u,sourceTokenDecimals:d,sourceTokenSymbol:h,swapAndSendRecipient:m,swapMetaData:p,swapTokenValue:f,type:g}){s.validateIfTransactionUnapproved.call(void 0,e,"updateSwapTransaction");let v={approvalTxId:t,destinationTokenAddress:r,destinationTokenAmount:n,destinationTokenDecimals:i,destinationTokenSymbol:a,estimatedBaseFee:c,sourceTokenAddress:l,sourceTokenAmount:u,sourceTokenDecimals:d,sourceTokenSymbol:h,swapAndSendRecipient:m,swapMetaData:p,swapTokenValue:f,type:g};return v=o.pickBy.call(void 0,v),o.merge.call(void 0,{},e,v)}(e,c),a.publish("TransactionController:transactionNewSwapAndSend",{transactionMeta:l})),"swap"===t&&(l=function(e,{sourceTokenSymbol:t,destinationTokenSymbol:r,type:n,destinationTokenDecimals:i,destinationTokenAddress:a,swapMetaData:c,swapTokenValue:l,estimatedBaseFee:u,approvalTxId:d}){s.validateIfTransactionUnapproved.call(void 0,e,"updateSwapTransaction");let h={sourceTokenSymbol:t,destinationTokenSymbol:r,type:n,destinationTokenDecimals:i,destinationTokenAddress:a,swapMetaData:c,swapTokenValue:l,estimatedBaseFee:u,approvalTxId:d};return h=o.pickBy.call(void 0,h),o.merge.call(void 0,{},e,h)}(e,c),a.publish("TransactionController:transactionNewSwap",{transactionMeta:l})),l},r.updatePostTransactionBalance=async function(e,{ethQuery:t,getTransaction:r,updateTransaction:s}){c("Updating post transaction balance",e.id);const n=e.id;let i,o;for(let s=0;s<6;s++){c("Querying balance",{attempt:s});const u=await a.query.call(void 0,t,"getBalance",[e.txParams.from]);i={...r(n)??{}},o=i.approvalTxId?r(i.approvalTxId):void 0,i.postTxBalance=u.toString(16);const d=b(e.destinationTokenAddress,e.chainId);if(!d||e.preTxBalance!==i.postTxBalance){c("Finishing post balance update",{isDefaultTokenAddress:d,preTxBalance:e.preTxBalance,postTxBalance:i.postTxBalance});break}c("Waiting for balance to update",{delay:l}),await T(l)}return s(i,"TransactionController#updatePostTransactionBalance - Add post transaction balance"),c("Completed post balance update",i?.postTxBalance),{updatedTransactionMeta:i,approvalTransactionMeta:o}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-QH2H4W3N.js"}],[2189,{"fast-json-patch":3908,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n=e("fast-json-patch"),i=(s=n)&&s.__esModule?s:{default:s},a=e("lodash");function o(e){const t={...e};return delete t.history,a.cloneDeep.call(void 0,t)}r.addInitialHistorySnapshot=function(e){const t=o(e);return a.merge.call(void 0,{},e,{history:[t]})},r.updateTransactionHistory=function(e,t){if(!e.history)return e;const r=o(e);var s;const n=function(e,t,r){const s=i.default.compare(e,t);s[0]&&(r&&(s[0].note=r),s[0].timestamp=Date.now());return s}((s=e.history,a.cloneDeep.call(void 0,s).reduce(((e,t)=>i.default.applyPatch(e,t).newDocument))),r,t);return n.length>0?a.merge.call(void 0,{},e,{history:[...e.history,n]}):e}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-QP75SWIQ.js"}],[219,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,s.isObject)(e.TokensController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokensController is "+typeof e.TokensController)),e}return delete e.TokensController.suggestedAssets,e}(t.data),t},r.version=void 0;var s=e("@metamask/utils"),n=e("lodash");const i=r.version=87}}},{package:"$root$",file:"app/scripts/migrations/087.ts"}],[2190,{"./chunk-AYTU4HU5.js":2180,"./chunk-C3WC4OJ3.js":2181,"./chunk-S6VGOPUY.js":2193,"./chunk-Z4BLTVTB.js":2201,"@metamask/gas-fee-controller":1478,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m=e("./chunk-C3WC4OJ3.js"),p=e("./chunk-S6VGOPUY.js"),f=e("./chunk-AYTU4HU5.js"),g=e("./chunk-Z4BLTVTB.js"),v=e("@metamask/gas-fee-controller"),_=e("@metamask/utils").createModuleLogger.call(void 0,p.projectLogger,"default-gas-fee-flow");s=new WeakSet,n=function(e){return{type:"fee-market",...Object.values(f.GasFeeEstimateLevel).reduce(((t,r)=>({...t,[r]:g.__privateMethod.call(void 0,this,l,u).call(this,e,r)})),{})}},i=new WeakSet,a=function(e){return{type:"legacy",...Object.values(f.GasFeeEstimateLevel).reduce(((t,r)=>({...t,[r]:g.__privateMethod.call(void 0,this,d,h).call(this,e,r)})),{})}},o=new WeakSet,c=function(e){return{type:"eth_gasPrice",gasPrice:m.gweiDecimalToWeiHex.call(void 0,e.gasPrice)}},l=new WeakSet,u=function(e,t){return{maxFeePerGas:m.gweiDecimalToWeiHex.call(void 0,e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:m.gweiDecimalToWeiHex.call(void 0,e[t].suggestedMaxPriorityFeePerGas)}},d=new WeakSet,h=function(e,t){return m.gweiDecimalToWeiHex.call(void 0,e[t])},r.DefaultGasFeeFlow=class{constructor(){g.__privateAdd.call(void 0,this,s),g.__privateAdd.call(void 0,this,i),g.__privateAdd.call(void 0,this,o),g.__privateAdd.call(void 0,this,l),g.__privateAdd.call(void 0,this,d)}matchesTransaction(e){return!0}async getGasFees(e){const{gasFeeControllerData:t}=e,{gasEstimateType:r,gasFeeEstimates:l}=t;let u;switch(r){case v.GAS_ESTIMATE_TYPES.FEE_MARKET:_("Using fee market estimates",l),u=g.__privateMethod.call(void 0,this,s,n).call(this,l);break;case v.GAS_ESTIMATE_TYPES.LEGACY:_("Using legacy estimates",l),u=g.__privateMethod.call(void 0,this,i,a).call(this,l);break;case v.GAS_ESTIMATE_TYPES.ETH_GASPRICE:_("Using eth_gasPrice estimates",l),u=g.__privateMethod.call(void 0,this,o,c).call(this,l);break;default:throw new Error(`Unsupported gas estimate type: ${r}`)}return{estimates:u}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-QTKXIDGE.js"}],[2191,{"./chunk-S6VGOPUY.js":2193,"./chunk-Z4BLTVTB.js":2201,"async-mutex":3466,events:3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y,k,w,b,T,S,E,P,I,A,j,C,x,N,R,M,B=e("./chunk-S6VGOPUY.js"),O=e("./chunk-Z4BLTVTB.js"),L=e("async-mutex"),G=e("events"),F=(s=G)&&s.__esModule?s:{default:s},D=[e=>e.status,e=>e.txParams.gasUsed];n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakSet,_=function(e){e.sort(((e,t)=>e.time<t.time?-1:1))},y=new WeakSet,k=function(e,t){return e.filter((e=>!t.some((({hash:t})=>t===e.hash))))},w=new WeakSet,b=function(e,t){return e.filter((e=>t.some((t=>e.hash===t.hash&&O.__privateMethod.call(void 0,this,T,S).call(this,e,t)))))},T=new WeakSet,S=function(e,t){return D.some((r=>r(e)!==r(t)))},E=new WeakSet,P=function(){const e=O.__privateGet.call(void 0,this,p).getLastBlockVariations?.()??[],t=O.__privateMethod.call(void 0,this,x,N).call(this,e);return O.__privateGet.call(void 0,this,a).call(this)[t]},I=new WeakSet,A=function(e){const t=O.__privateMethod.call(void 0,this,E,P).call(this);return t?t+1:O.__privateGet.call(void 0,this,m)?void 0:e-10},j=new WeakSet,C=function(e,t){let r=-1;for(const t of e){const e=t.blockNumber?parseInt(t.blockNumber,10):-1;r=Math.max(r,e)}if(-1===r)return;const s=O.__privateMethod.call(void 0,this,x,N).call(this,t),n=O.__privateGet.call(void 0,this,a).call(this);n[s]>=r||this.hub.emit("updatedLastFetchedBlockNumbers",{lastFetchedBlockNumbers:{...n,[s]:r},blockNumber:r})},x=new WeakSet,N=function(e){const t=O.__privateGet.call(void 0,this,c).call(this),r=O.__privateGet.call(void 0,this,i).call(this)?.address.toLowerCase();return[t,r,...e].join("#")},R=new WeakSet,M=function(){const e=O.__privateGet.call(void 0,this,l).call(this),t=O.__privateGet.call(void 0,this,c).call(this),r=O.__privateGet.call(void 0,this,p).isSupportedNetwork(t);return e&&r},r.IncomingTransactionHelper=class{constructor({blockTracker:e,getCurrentAccount:t,getLastFetchedBlockNumbers:r,getLocalTransactions:s,getChainId:_,isEnabled:k,queryEntireHistory:b,remoteTransactionSource:S,transactionLimit:P,updateTransactions:A}){O.__privateAdd.call(void 0,this,v),O.__privateAdd.call(void 0,this,y),O.__privateAdd.call(void 0,this,w),O.__privateAdd.call(void 0,this,T),O.__privateAdd.call(void 0,this,E),O.__privateAdd.call(void 0,this,I),O.__privateAdd.call(void 0,this,j),O.__privateAdd.call(void 0,this,x),O.__privateAdd.call(void 0,this,R),O.__privateAdd.call(void 0,this,n,void 0),O.__privateAdd.call(void 0,this,i,void 0),O.__privateAdd.call(void 0,this,a,void 0),O.__privateAdd.call(void 0,this,o,void 0),O.__privateAdd.call(void 0,this,c,void 0),O.__privateAdd.call(void 0,this,l,void 0),O.__privateAdd.call(void 0,this,u,void 0),O.__privateAdd.call(void 0,this,d,new(0,L.Mutex)),O.__privateAdd.call(void 0,this,h,void 0),O.__privateAdd.call(void 0,this,m,void 0),O.__privateAdd.call(void 0,this,p,void 0),O.__privateAdd.call(void 0,this,f,void 0),O.__privateAdd.call(void 0,this,g,void 0),this.hub=new(0,F.default),O.__privateSet.call(void 0,this,n,e),O.__privateSet.call(void 0,this,i,t),O.__privateSet.call(void 0,this,a,r),O.__privateSet.call(void 0,this,o,s||(()=>[])),O.__privateSet.call(void 0,this,c,_),O.__privateSet.call(void 0,this,l,k??(()=>!0)),O.__privateSet.call(void 0,this,u,!1),O.__privateSet.call(void 0,this,m,b??!0),O.__privateSet.call(void 0,this,p,S),O.__privateSet.call(void 0,this,f,P),O.__privateSet.call(void 0,this,g,A??!1),O.__privateSet.call(void 0,this,h,(async e=>{try{await this.update(e)}catch(e){console.error("Error while checking incoming transactions",e)}}))}start(){O.__privateGet.call(void 0,this,u)||O.__privateMethod.call(void 0,this,R,M).call(this)&&(O.__privateGet.call(void 0,this,n).addListener("latest",O.__privateGet.call(void 0,this,h)),O.__privateSet.call(void 0,this,u,!0))}stop(){O.__privateGet.call(void 0,this,n).removeListener("latest",O.__privateGet.call(void 0,this,h)),O.__privateSet.call(void 0,this,u,!1)}async update(e){const t=await O.__privateGet.call(void 0,this,d).acquire();B.incomingTransactionsLogger.call(void 0,"Checking for incoming transactions");try{if(!O.__privateMethod.call(void 0,this,R,M).call(this))return;const t=parseInt(e||await O.__privateGet.call(void 0,this,n).getLatestBlock(),16),r=O.__privateGet.call(void 0,this,p).getLastBlockVariations?.()??[],s=O.__privateMethod.call(void 0,this,I,A).call(this,t),a=O.__privateGet.call(void 0,this,i).call(this),l=O.__privateGet.call(void 0,this,c).call(this);let u=[];try{u=await O.__privateGet.call(void 0,this,p).fetchTransactions({address:a.address,currentChainId:l,fromBlock:s,limit:O.__privateGet.call(void 0,this,f)})}catch(e){return void B.incomingTransactionsLogger.call(void 0,"Error while fetching remote transactions",e)}if(!O.__privateGet.call(void 0,this,g)){const e=a.address.toLowerCase();u=u.filter((t=>t.txParams.to?.toLowerCase()===e))}const d=O.__privateGet.call(void 0,this,g)?O.__privateGet.call(void 0,this,o).call(this):[],h=O.__privateMethod.call(void 0,this,y,k).call(this,u,d),m=O.__privateMethod.call(void 0,this,w,b).call(this,u,d);(h.length>0||m.length>0)&&(O.__privateMethod.call(void 0,this,v,_).call(this,h),O.__privateMethod.call(void 0,this,v,_).call(this,m),B.incomingTransactionsLogger.call(void 0,"Found incoming transactions",{new:h,updated:m}),this.hub.emit("transactions",{added:h,updated:m})),O.__privateMethod.call(void 0,this,j,C).call(this,u,r)}finally{t()}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-RHDPOIS4.js"}],[2192,{"./chunk-OZ6UB42C.js":2186,"@ethersproject/abi":481,"@metamask/controller-utils":2126,"@metamask/metamask-eth-abis":1743,"@metamask/rpc-errors":2006},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-OZ6UB42C.js"),n=e("@ethersproject/abi"),i=e("@metamask/controller-utils"),a=e("@metamask/metamask-eth-abis"),o=e("@metamask/rpc-errors");function c(e,t){switch(t){case"maxFeePerGas":case"maxPriorityFeePerGas":if(e.type&&"0x2"!==e.type)throw o.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but including maxFeePerGas and maxPriorityFeePerGas requires type: "0x2"`);break;default:if(e.type&&"0x2"===e.type)throw o.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but included a gasPrice instead of maxFeePerGas and maxPriorityFeePerGas`)}}function l(e,t,r){if(void 0!==e[r])throw o.rpcErrors.invalidParams(`Invalid transaction params: specified ${t} but also included ${r}, these cannot be mixed`)}function u(e,t){if("string"!=typeof e[t])throw o.rpcErrors.invalidParams(`Invalid transaction params: ${t} is not a string. got: (${e[t]})`)}r.validateTransactionOrigin=async function(e,t,r,s){if(s!==i.ORIGIN_METAMASK){if(!e.includes(r))throw o.providerErrors.unauthorized({data:{origin:s}})}else if(r!==t)throw o.rpcErrors.internal({message:"Internally initiated transaction is using invalid account.",data:{origin:s,fromAddress:r,selectedAddress:t}})},r.validateTxParams=function(e,t=!0){!function(e,t){if(s.isEIP1559Transaction.call(void 0,e)&&!t)throw o.rpcErrors.invalidParams("Invalid transaction params: params specify an EIP-1559 transaction but the current network does not support EIP-1559")}(e,t),function(e){if(!e||"string"!=typeof e)throw o.rpcErrors.invalidParams(`Invalid "from" address ${e}: not a string.`);if(!i.isValidHexAddress.call(void 0,e))throw o.rpcErrors.invalidParams('Invalid "from" address.')}(e.from),function(e){if("0x"===e.to||void 0===e.to){if(!e.data)throw o.rpcErrors.invalidParams('Invalid "to" address.');delete e.to}else if(void 0!==e.to&&!i.isValidHexAddress.call(void 0,e.to))throw o.rpcErrors.invalidParams('Invalid "to" address.')}(e),function(e){if(void 0!==e){if(e.includes("-"))throw o.rpcErrors.invalidParams(`Invalid transaction value "${e}": not a positive number.`);if(e.includes("."))throw o.rpcErrors.invalidParams(`Invalid transaction value "${e}": number must be in wei.`);const t=parseInt(e,10);if(!(Number.isFinite(t)&&!Number.isNaN(t)&&!isNaN(Number(e))&&Number.isSafeInteger(t)))throw o.rpcErrors.invalidParams(`Invalid transaction value ${e}: number must be a valid number.`)}}(e.value),function(e){if(e){const t=new(0,n.Interface)(a.abiERC20);try{t.parseTransaction({data:e})}catch(e){if(e.message.match(/BUFFER_OVERRUN/u))throw o.rpcErrors.invalidParams("Invalid transaction params: data out-of-bounds, BUFFER_OVERRUN.")}}}(e.data),function(e){if(void 0!==e&&"number"!=typeof e&&"string"!=typeof e)throw o.rpcErrors.invalidParams(`Invalid transaction params: chainId is not a Number or hex string. got: (${e})`)}(e.chainId),function(e){e.gasPrice&&(c(e,"gasPrice"),l(e,"gasPrice","maxFeePerGas"),l(e,"gasPrice","maxPriorityFeePerGas"),u(e,"gasPrice"));e.maxFeePerGas&&(c(e,"maxFeePerGas"),l(e,"maxFeePerGas","gasPrice"),u(e,"maxFeePerGas"));e.maxPriorityFeePerGas&&(c(e,"maxPriorityFeePerGas"),l(e,"maxPriorityFeePerGas","gasPrice"),u(e,"maxPriorityFeePerGas"))}(e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-RXIUMVA5.js"}],[2193,{"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/utils"),n=s.createProjectLogger.call(void 0,"transaction-controller"),i=s.createModuleLogger.call(void 0,n,"incoming-transactions");r.createModuleLogger=s.createModuleLogger,r.projectLogger=n,r.incomingTransactionsLogger=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-S6VGOPUY.js"}],[2194,{"@ethersproject/abi":481,"@metamask/controller-utils":2126,"@metamask/metamask-eth-abis":1743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@ethersproject/abi"),n=e("@metamask/controller-utils"),i=e("@metamask/metamask-eth-abis"),a=new(0,s.Interface)(i.abiERC20),o=new(0,s.Interface)(i.abiERC721),c=new(0,s.Interface)(i.abiERC1155),l=new(0,s.Interface)(i.abiFiatTokenV2);r.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error",r.determineTransactionType=async function(e,t){const{data:r,to:s}=e;if(r&&!s)return{type:"contractDeployment",getCodeResponse:void 0};const{contractCode:i,isContractAddress:u}=await async function(e,t){let r;try{r=await n.query.call(void 0,e,"getCode",[t])}catch(e){r=null}const s=!!r&&("0x"!==r&&"0x0"!==r);return{contractCode:r,isContractAddress:s}}(t,s);if(!u)return{type:"simpleSend",getCodeResponse:i};const d=0!==Number(e.value??"0"),h={type:"contractInteraction",getCodeResponse:i};if(!r||d)return h;const m=function(e){if(!e)return;try{return a.parseTransaction({data:e})}catch{}try{return o.parseTransaction({data:e})}catch{}try{return c.parseTransaction({data:e})}catch{}try{return l.parseTransaction({data:e})}catch{}return}(r)?.name;if(!m)return h;const p=["approve","setapprovalforall","transfer","transferfrom","safetransferfrom","increaseAllowance"].find((e=>e.toLowerCase()===m.toLowerCase()));return p?{type:p,getCodeResponse:i}:h}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-SD6CWFDF.js"}],[2195,{"./chunk-Z4BLTVTB.js":2201,"@metamask/controller-utils":2126},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a=e("./chunk-Z4BLTVTB.js"),o=e("@metamask/controller-utils"),c=1e15;s=new WeakMap,n=new WeakSet,i=function(e,t){const r=Math.ceil(e/t);return o.toHex.call(void 0,r)},r.TestGasFeeFlow=class{constructor(){a.__privateAdd.call(void 0,this,n),a.__privateAdd.call(void 0,this,s,1)}matchesTransaction(e){return!0}async getGasFees(e){const{transactionMeta:t}=e,{txParams:r}=t,{gas:o}=r;if(!o)throw new Error("Cannot estimate fee without gas value");const l=parseInt(o,16),u=.5*c,d=(a.__privateGet.call(void 0,this,s)+1)*c,h=a.__privateGet.call(void 0,this,s)*c,m=d-u,p=h-u,f=d+u,g=h+u;return a.__privateSet.call(void 0,this,s,a.__privateGet.call(void 0,this,s)+1),{estimates:{type:"fee-market",low:{maxFeePerGas:a.__privateMethod.call(void 0,this,n,i).call(this,m,l),maxPriorityFeePerGas:a.__privateMethod.call(void 0,this,n,i).call(this,p,l)},medium:{maxFeePerGas:a.__privateMethod.call(void 0,this,n,i).call(this,d,l),maxPriorityFeePerGas:a.__privateMethod.call(void 0,this,n,i).call(this,h,l)},high:{maxFeePerGas:a.__privateMethod.call(void 0,this,n,i).call(this,f,l),maxPriorityFeePerGas:a.__privateMethod.call(void 0,this,n,i).call(this,g,l)}}}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-TJMQEH57.js"}],[2196,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s={MAINNET:"0x1",GOERLI:"0x5",BASE:"0x2105",BASE_TESTNET:"0x14a33",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_TESTNET:"0x1a4",OPBNB:"0xcc",OPBNB_TESTNET:"0x15eb",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",GNOSIS:"0x64",ARBITRUM:"0xa4b1",ZKSYNC_ERA:"0x144",ZORA:"0x76adf1",SCROLL:"0x82750",SCROLL_SEPOLIA:"0x8274f"},n="etherscan.io",i="api",a={[s.GOERLI]:{domain:n,subdomain:`${i}-goerli`},[s.MAINNET]:{domain:n,subdomain:i},[s.SEPOLIA]:{domain:n,subdomain:`${i}-sepolia`},[s.LINEA_GOERLI]:{domain:"lineascan.build",subdomain:`${i}-goerli`},[s.LINEA_SEPOLIA]:{domain:"lineascan.build",subdomain:`${i}-sepolia`},[s.LINEA_MAINNET]:{domain:"lineascan.build",subdomain:i},[s.BSC]:{domain:"bscscan.com",subdomain:i},[s.BSC_TESTNET]:{domain:"bscscan.com",subdomain:`${i}-testnet`},[s.OPTIMISM]:{domain:n,subdomain:`${i}-optimistic`},[s.OPTIMISM_SEPOLIA]:{domain:n,subdomain:`${i}-sepolia-optimistic`},[s.POLYGON]:{domain:"polygonscan.com",subdomain:i},[s.POLYGON_TESTNET]:{domain:"polygonscan.com",subdomain:`${i}-mumbai`},[s.AVALANCHE]:{domain:"snowtrace.io",subdomain:i},[s.AVALANCHE_TESTNET]:{domain:"snowtrace.io",subdomain:`${i}-testnet`},[s.FANTOM]:{domain:"ftmscan.com",subdomain:i},[s.FANTOM_TESTNET]:{domain:"ftmscan.com",subdomain:`${i}-testnet`},[s.MOONBEAM]:{domain:"moonscan.io",subdomain:`${i}-moonbeam`},[s.MOONBEAM_TESTNET]:{domain:"moonscan.io",subdomain:`${i}-moonbase`},[s.MOONRIVER]:{domain:"moonscan.io",subdomain:`${i}-moonriver`},[s.GNOSIS]:{domain:"gnosisscan.io",subdomain:`${i}-gnosis`}},o={[s.OPTIMISM]:1,[s.OPTIMISM_SEPOLIA]:1};r.CHAIN_IDS=s,r.DEFAULT_ETHERSCAN_DOMAIN=n,r.DEFAULT_ETHERSCAN_SUBDOMAIN_PREFIX=i,r.ETHERSCAN_SUPPORTED_NETWORKS=a,r.GAS_BUFFER_CHAIN_OVERRIDES=o,r.ABI_SIMULATION_ERC20_WRAPPED=[{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Withdrawal",type:"event"}],r.ABI_SIMULATION_ERC721_LEGACY=[{anonymous:!1,inputs:[{indexed:!1,name:"_from",type:"address"},{indexed:!1,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"}]}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-UGN7PBON.js"}],[2197,{"./chunk-S6VGOPUY.js":2193,"./chunk-UGN7PBON.js":2196,"@metamask/controller-utils":2126,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-UGN7PBON.js"),n=e("./chunk-S6VGOPUY.js"),i=e("@metamask/controller-utils"),a=e("@metamask/utils"),o=a.createModuleLogger.call(void 0,n.projectLogger,"gas"),c="0x5208",l=1.5;async function u(e,t){const r={...e},{data:s,value:n}=r,{gasLimit:c,number:l}=await async function(e){return await i.query.call(void 0,e,"getBlockByNumber",["latest",!1])}(t),d=i.hexToBN.call(void 0,c);r.data=s?a.add0x.call(void 0,s):s,r.gas=i.BNToHex.call(void 0,i.fractionBN.call(void 0,d,19,20)),r.value=n||"0x0";let h,m=r.gas;try{m=await i.query.call(void 0,t,"estimateGas",[r])}catch(e){h={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:l,blockGasLimit:c}},o("Estimation failed",{...h,fallback:u})}return{blockGasLimit:c,estimatedGas:m,simulationFails:h}}function d(e,t,r){const s=i.hexToBN.call(void 0,e),n=i.hexToBN.call(void 0,t).muln(.9),c=s.muln(r);if(s.gt(n)){const t=a.add0x.call(void 0,e);return o("Using estimated value",t),t}if(c.lt(n)){const e=a.add0x.call(void 0,i.BNToHex.call(void 0,c));return o("Using padded estimate",e,r),e}const l=a.add0x.call(void 0,i.BNToHex.call(void 0,n));return o("Using 90% of block gas limit",l),l}r.log=o,r.FIXED_GAS=c,r.DEFAULT_GAS_MULTIPLIER=l,r.updateGas=async function(e){const{txMeta:t}=e,r={...t.txParams},[n,a]=await async function(e){const{isCustomNetwork:t,chainId:r,txMeta:n}=e;if(n.txParams.gas)return o("Using value from request",n.txParams.gas),[n.txParams.gas];if(await async function({ethQuery:e,txMeta:t,isCustomNetwork:r}){const{txParams:{to:s,data:n}}=t;if(r||!s||n)return!1;const a=await async function(e,t){return await i.query.call(void 0,e,"getCode",[t])}(e,s);return!a||"0x"===a}(e))return o("Using fixed value",c),[c];const{blockGasLimit:a,estimatedGas:h,simulationFails:m}=await u(n.txParams,e.ethQuery);if(t)return o("Using original estimate as custom network"),[h,m];const p=s.GAS_BUFFER_CHAIN_OVERRIDES[r]??l;return[d(h,a,p),m]}(e);t.txParams.gas=n,t.simulationFails=a,r.gas||(t.originalGasEstimate=t.txParams.gas),t.defaultGasEstimates||(t.defaultGasEstimates={}),t.defaultGasEstimates.gas=t.txParams.gas},r.estimateGas=u,r.addGasBuffer=d}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-V72C4MCR.js"}],[2198,{"./chunk-UGN7PBON.js":2196,"./chunk-YVCX6Z75.js":2200},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-YVCX6Z75.js"),n=e("./chunk-UGN7PBON.js"),i=[n.CHAIN_IDS.SCROLL,n.CHAIN_IDS.SCROLL_SEPOLIA],a=class extends s.OracleLayer1GasFeeFlow{constructor(){super("0x5300000000000000000000000000000000000002",!0)}matchesTransaction(e){return i.includes(e.chainId)}};r.ScrollLayer1GasFeeFlow=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-WR5F34OW.js"}],[2199,{"./chunk-S6VGOPUY.js":2193,"./chunk-UGN7PBON.js":2196,"@metamask/controller-utils":2126},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-UGN7PBON.js"),n=e("./chunk-S6VGOPUY.js"),i=e("@metamask/controller-utils");async function a(e,{address:t,chainId:r,fromBlock:s,limit:a}){const c=function(e,t){const r=o(e);let s=`${r}/api?`;for(const e of Object.keys(t)){const r=t[e];r&&(s+=`${e}=${r}&`)}return s+="tag=latest&page=1",s}(r,{...{module:"account",address:t,startBlock:s?.toString(),offset:a?.toString(),sort:"desc"},action:e});n.incomingTransactionsLogger.call(void 0,"Sending Etherscan request",c);return await i.handleFetch.call(void 0,c)}function o(e){const t=s.ETHERSCAN_SUPPORTED_NETWORKS[e];if(!t)throw new Error(`Etherscan does not support chain with ID: ${e}`);return`https://${t.subdomain}.${t.domain}`}r.fetchEtherscanTransactions=async function({address:e,chainId:t,fromBlock:r,limit:s}){return await a("txlist",{address:e,chainId:t,fromBlock:r,limit:s})},r.fetchEtherscanTokenTransactions=async function({address:e,chainId:t,fromBlock:r,limit:s}){return await a("tokentx",{address:e,chainId:t,fromBlock:r,limit:s})},r.getEtherscanApiHost=o}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-XVYXRCRL.js"}],[22,{"../constants/notification-schema":19,"./process-feature-announcement":21,"./process-onchain-notifications":23},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.processNotification=function(e,t=[]){if(o(e)){const r=(0,i.processFeatureAnnouncement)(e);return r.isRead=(0,i.isFeatureAnnouncementRead)(r,t),r}if(a(e))return(0,n.processOnChainNotification)(e);return(t=>{throw new Error(`No processor found for notification kind ${e.type}`)})()};var s=e("../constants/notification-schema"),n=e("./process-onchain-notifications"),i=e("./process-feature-announcement");const a=e=>Object.values(s.TRIGGER_TYPES).includes(e.type),o=e=>e.type===s.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/processors/process-notifications.ts"}],[220,{"@metamask/utils":2787,"ethereumjs-util":3832,lodash:4382,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=c,function(e){if((0,n.hasProperty)(e,"NftController")&&(0,n.isObject)(e.NftController)){const c=e.NftController;if((0,n.hasProperty)(c,"allNftContracts")&&(0,n.isObject)(c.allNftContracts)){const{allNftContracts:e}=c;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined&&"null"!==e||delete r[e];e[t]=(0,a.mapKeys)(r,((e,t)=>l(t)))}}))}else if((0,n.hasProperty)(c,"allNftContracts")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NftController.allNftContracts is "+typeof c.allNftContracts))}else o.default.warn("typeof state.NftController.allNftContracts is "+typeof c.allNftContracts);if((0,n.hasProperty)(c,"allNfts")&&(0,n.isObject)(c.allNfts)){const{allNfts:e}=c;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined&&"null"!==e||delete r[e];e[t]=(0,a.mapKeys)(r,((e,t)=>l(t)))}}))}else if((0,n.hasProperty)(c,"allNfts")){var s,i;null===(s=global.sentry)||void 0===s||null===(i=s.captureException)||void 0===i||i.call(s,new Error("typeof state.NftController.allNfts is "+typeof c.allNfts))}else o.default.warn("typeof state.NftController.allNfts is "+typeof c.allNfts);e.NftController=c}else if((0,n.hasProperty)(e,"NftController")){var c,u;null===(c=global.sentry)||void 0===c||null===(u=c.captureException)||void 0===u||u.call(c,new Error("typeof state.NftController is "+typeof e.NftController))}else o.default.warn("typeof state.NftController is undefined");if((0,n.hasProperty)(e,"TokenListController")&&(0,n.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,n.hasProperty)(t,"tokensChainsCache")&&(0,n.isObject)(t.tokensChainsCache)){for(const e of Object.keys(t.tokensChainsCache))"undefined"!==e&&e!==undefined&&"null"!==e||delete t.tokensChainsCache[e];t.tokensChainsCache=(0,a.mapKeys)(t.tokensChainsCache,((e,t)=>l(t)))}else if((0,n.hasProperty)(t,"tokensChainsCache")){var d,h;null===(d=global.sentry)||void 0===d||null===(h=d.captureException)||void 0===h||h.call(d,new Error("typeof state.TokenListController.tokensChainsCache is "+typeof e.TokenListController.tokensChainsCache))}else o.default.warn("typeof state.TokenListController.tokensChainsCache is undefined")}else o.default.warn("typeof state.TokenListController is "+typeof e.TokenListController);if((0,n.hasProperty)(e,"TokensController")&&(0,n.isObject)(e.TokensController)){const t=e.TokensController;if((0,n.hasProperty)(t,"allTokens")&&(0,n.isObject)(t.allTokens)){const{allTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allTokens=(0,a.mapKeys)(e,((e,t)=>l(t)))}else if((0,n.hasProperty)(t,"allTokens")){var m,p;null===(m=global.sentry)||void 0===m||null===(p=m.captureException)||void 0===p||p.call(m,new Error("typeof state.TokensController.allTokens is "+typeof t.allTokens))}else o.default.warn("typeof state.TokensController.allTokens is "+typeof t.allTokens);if((0,n.hasProperty)(t,"allIgnoredTokens")&&(0,n.isObject)(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allIgnoredTokens=(0,a.mapKeys)(e,((e,t)=>l(t)))}else if((0,n.hasProperty)(t,"allIgnoredTokens")){var f,g;null===(f=global.sentry)||void 0===f||null===(g=f.captureException)||void 0===g||g.call(f,new Error("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens))}else o.default.warn("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens);if((0,n.hasProperty)(t,"allDetectedTokens")&&(0,n.isObject)(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allDetectedTokens=(0,a.mapKeys)(e,((e,t)=>l(t)))}else if((0,n.hasProperty)(t,"allDetectedTokens")){var v,_;null===(v=global.sentry)||void 0===v||null===(_=v.captureException)||void 0===_||_.call(v,new Error("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens))}else o.default.warn("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens);e.TokensController=t}else{var y,k;null===(y=global.sentry)||void 0===y||null===(k=y.captureException)||void 0===k||k.call(y,new Error("typeof state.TokensController is "+typeof e.TokensController))}}(t.data),t},r.version=void 0;var s,n=e("@metamask/utils"),i=e("ethereumjs-util"),a=e("lodash"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s};const c=r.version=88;function l(e){if("string"==typeof e&&(0,n.isStrictHexString)(e))return e;return`0x${i.BN.isBN(e)?e.toString(16):new i.BN(e.toString(),10).toString(16)}`}}}},{package:"$root$",file:"app/scripts/migrations/088.ts"}],[2200,{"./chunk-S6VGOPUY.js":2193,"./chunk-Z4BLTVTB.js":2201,"@ethereumjs/common":439,"@ethereumjs/tx":2207,"@ethersproject/contracts":504,"@ethersproject/providers":542,"@metamask/utils":2787,buffer:3576,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m=e("./chunk-S6VGOPUY.js"),p=e("./chunk-Z4BLTVTB.js"),f=e("@ethereumjs/common"),g=e("@ethereumjs/tx"),v=e("@ethersproject/contracts"),_=e("@ethersproject/providers"),y=e("@metamask/utils"),k=e("lodash"),w=y.createModuleLogger.call(void 0,m.projectLogger,"oracle-layer1-gas-fee-flow"),b=[{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];s=new WeakMap,n=new WeakMap,i=new WeakSet,a=async function(e){const{provider:t,transactionMeta:r}=e,i=new(0,v.Contract)(p.__privateGet.call(void 0,this,s),b,new(0,_.Web3Provider)(t)),a=p.__privateMethod.call(void 0,this,o,c).call(this,r,p.__privateGet.call(void 0,this,n)).serialize(),l=await i.getL1Fee(a);if(void 0===l)throw new Error("No value returned from oracle contract");return{layer1Fee:l.toHexString()}},o=new WeakSet,c=function(e,r){const s=p.__privateMethod.call(void 0,this,l,u).call(this,e),n=p.__privateMethod.call(void 0,this,d,h).call(this,e);let i=g.TransactionFactory.fromTxData(s,{common:n});if(r){const e=t.from("abcdef0123456789abcdef0123456789abcdef0123456789abcdef0123456789","hex");i=i.sign(e)}return i},l=new WeakSet,u=function(e){return{...k.omit.call(void 0,e.txParams,"gas"),gasLimit:e.txParams.gas}},d=new WeakSet,h=function(e){const t=Number(e.chainId);return f.Common.custom({chainId:t,defaultHardfork:f.Hardfork.London})},r.OracleLayer1GasFeeFlow=class{constructor(e,t){p.__privateAdd.call(void 0,this,i),p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,l),p.__privateAdd.call(void 0,this,d),p.__privateAdd.call(void 0,this,s,void 0),p.__privateAdd.call(void 0,this,n,void 0),p.__privateSet.call(void 0,this,s,e),p.__privateSet.call(void 0,this,n,t??!1)}async getLayer1Fee(e){try{return await p.__privateMethod.call(void 0,this,i,a).call(this,e)}catch(e){throw w("Failed to get oracle layer 1 gas fee",e),new Error("Failed to get oracle layer 1 gas fee")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-YVCX6Z75.js"}],[2201,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(s(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,n)=>(s(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(s(e,t,"access private method"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-Z4BLTVTB.js"}],[2202,{"./chunk-2EU6346V.js":2171,"./chunk-2XKEAKQG.js":2172,"./chunk-6DODV6OV.js":2173,"./chunk-6OLJWLKK.js":2174,"./chunk-74W7X6BE.js":2175,"./chunk-76FONEDA.js":2176,"./chunk-7LXE4KHV.js":2177,"./chunk-7NMV2NPM.js":2178,"./chunk-ARZHJFVG.js":2179,"./chunk-AYTU4HU5.js":2180,"./chunk-C3WC4OJ3.js":2181,"./chunk-HMOSP33F.js":2182,"./chunk-IVR4NMOF.js":2183,"./chunk-KT6UAKBB.js":2184,"./chunk-NYKRCWBG.js":2185,"./chunk-OZ6UB42C.js":2186,"./chunk-PRUNMTRD.js":2187,"./chunk-QH2H4W3N.js":2188,"./chunk-QP75SWIQ.js":2189,"./chunk-QTKXIDGE.js":2190,"./chunk-RHDPOIS4.js":2191,"./chunk-RXIUMVA5.js":2192,"./chunk-S6VGOPUY.js":2193,"./chunk-SD6CWFDF.js":2194,"./chunk-TJMQEH57.js":2195,"./chunk-UGN7PBON.js":2196,"./chunk-V72C4MCR.js":2197,"./chunk-WR5F34OW.js":2198,"./chunk-XVYXRCRL.js":2199,"./chunk-YVCX6Z75.js":2200,"./chunk-Z4BLTVTB.js":2201},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-IVR4NMOF.js");e("./chunk-PRUNMTRD.js"),e("./chunk-74W7X6BE.js"),e("./chunk-KT6UAKBB.js");var n=e("./chunk-SD6CWFDF.js");e("./chunk-RXIUMVA5.js"),e("./chunk-6DODV6OV.js"),e("./chunk-7LXE4KHV.js"),e("./chunk-V72C4MCR.js"),e("./chunk-QP75SWIQ.js"),e("./chunk-NYKRCWBG.js"),e("./chunk-WR5F34OW.js"),e("./chunk-YVCX6Z75.js"),e("./chunk-TJMQEH57.js"),e("./chunk-2EU6346V.js"),e("./chunk-2XKEAKQG.js"),e("./chunk-RHDPOIS4.js"),e("./chunk-6OLJWLKK.js"),e("./chunk-7NMV2NPM.js"),e("./chunk-XVYXRCRL.js"),e("./chunk-HMOSP33F.js"),e("./chunk-ARZHJFVG.js"),e("./chunk-QTKXIDGE.js"),e("./chunk-C3WC4OJ3.js"),e("./chunk-QH2H4W3N.js");var i=e("./chunk-OZ6UB42C.js"),a=e("./chunk-76FONEDA.js");e("./chunk-UGN7PBON.js"),e("./chunk-S6VGOPUY.js");var o=e("./chunk-AYTU4HU5.js");e("./chunk-Z4BLTVTB.js"),r.CANCEL_RATE=s.CANCEL_RATE,r.GasFeeEstimateLevel=o.GasFeeEstimateLevel,r.GasFeeEstimateType=o.GasFeeEstimateType,r.HARDFORK=s.HARDFORK,r.SimulationErrorCode=o.SimulationErrorCode,r.SimulationTokenStandard=o.SimulationTokenStandard,r.TransactionController=s.TransactionController,r.TransactionEnvelopeType=o.TransactionEnvelopeType,r.TransactionStatus=o.TransactionStatus,r.TransactionType=o.TransactionType,r.UserFeeLevel=o.UserFeeLevel,r.WalletDevice=o.WalletDevice,r.determineTransactionType=n.determineTransactionType,r.isEIP1559Transaction=i.isEIP1559Transaction,r.mergeGasFeeEstimates=a.mergeGasFeeEstimates,r.normalizeTransactionParams=i.normalizeTransactionParams}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/index.js"}],[2203,{"./types":2210,"./util":2211,"@ethereumjs/common":439,"@ethereumjs/util":2219},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseTransaction=void 0;const s=e("@ethereumjs/common"),n=e("@ethereumjs/util"),i=e("./types"),a=e("./util");r.BaseTransaction=class{constructor(e,t){this.cache={hash:undefined,dataFee:undefined},this.activeCapabilities=[],this.DEFAULT_CHAIN=s.Chain.Mainnet,this.DEFAULT_HARDFORK=s.Hardfork.Merge;const{nonce:r,gasLimit:i,to:o,value:c,data:l,v:u,r:d,s:h,type:m}=e;this._type=Number((0,n.bufferToBigInt)((0,n.toBuffer)(m))),this.txOptions=t;const p=(0,n.toBuffer)(""===o?"0x":o),f=(0,n.toBuffer)(""===u?"0x":u),g=(0,n.toBuffer)(""===d?"0x":d),v=(0,n.toBuffer)(""===h?"0x":h);this.nonce=(0,n.bufferToBigInt)((0,n.toBuffer)(""===r?"0x":r)),this.gasLimit=(0,n.bufferToBigInt)((0,n.toBuffer)(""===i?"0x":i)),this.to=p.length>0?new n.Address(p):undefined,this.value=(0,n.bufferToBigInt)((0,n.toBuffer)(""===c?"0x":c)),this.data=(0,n.toBuffer)(""===l?"0x":l),this.v=f.length>0?(0,n.bufferToBigInt)(f):undefined,this.r=g.length>0?(0,n.bufferToBigInt)(g):undefined,this.s=v.length>0?(0,n.bufferToBigInt)(v):undefined,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const _=this.to===undefined||null===this.to,y=t.allowUnlimitedInitCodeSize??!1,k=t.common??this._getCommon();_&&k.isActivatedEIP(3860)&&!1===y&&(0,a.checkMaxInitCodeSize)(k,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){const{v:e}=this;if(e!==undefined&&e!==BigInt(0)&&e!==BigInt(1)){const e=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(e)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&e!==undefined&&e>n.SECP256K1_ORDER_DIV_2){const e=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(e)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let s=0;s<this.data.length;s++)0===this.data[s]?r+=e:r+=t;if((this.to===undefined||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return this.to===undefined||0===this.to.buf.length}isSigned(){const{v:e,r:t,s:r}=this;return e!==undefined&&t!==undefined&&r!==undefined}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,n.unpadBuffer)(e).length}catch(e){return!1}}getSenderAddress(){return new n.Address((0,n.publicToAddress)(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(i.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(i.Capability.EIP155ReplayProtection),t=!0);const r=this.getMessageToSign(!0),{v:s,r:a,s:o}=(0,n.ecsign)(r,e),c=this._processSignature(s,a,o);if(t){const e=this.activeCapabilities.indexOf(i.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return c}_getCommon(e,t){if(t!==undefined){const r=(0,n.bufferToBigInt)((0,n.toBuffer)(t));if(e){if(e.chainId()!==r){const e=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(e)}return e.copy()}return s.Common.isSupportedChainId(r)?new s.Common({chain:r,hardfork:this.DEFAULT_HARDFORK}):s.Common.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}return e?.copy()??new s.Common({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[s,i]of Object.entries(e))switch(t){case 64:if(r){if(i!==undefined&&i>=n.MAX_UINT64){const e=this._errorMsg(`${s} cannot equal or exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>n.MAX_UINT64){const e=this._errorMsg(`${s} cannot exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}break;case 256:if(r){if(i!==undefined&&i>=n.MAX_INTEGER){const e=this._errorMsg(`${s} cannot equal or exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>n.MAX_INTEGER){const e=this._errorMsg(`${s} cannot exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,s]of Object.entries(e))if(t.includes(r)&&Array.isArray(s))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,n.bufferToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let s=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return s+=`signed=${t} hf=${r}`,s}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/baseTransaction.js"}],[2204,{"./baseTransaction":2203,"./util":2211,"@ethereumjs/rlp":442,"@ethereumjs/util":2219,buffer:3576,"ethereum-cryptography/keccak":3804},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.FeeMarketEIP1559Transaction=void 0;const s=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak"),a=e("./baseTransaction"),o=e("./util"),c=t.from(2..toString(16).padStart(2,"0"),"hex");class l extends a.BaseTransaction{constructor(e,t={}){super({...e,type:2},t),this.DEFAULT_HARDFORK="london";const{chainId:r,accessList:s,maxFeePerGas:i,maxPriorityFeePerGas:c}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!1===this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const l=o.AccessLists.getAccessListData(s??[]);if(this.accessList=l.accessList,this.AccessListJSON=l.AccessListJSON,o.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,n.bufferToBigInt)((0,n.toBuffer)(""===i?"0x":i)),this.maxPriorityFeePerGas=(0,n.bufferToBigInt)((0,n.toBuffer)(""===c?"0x":c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),a.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>n.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this._validateYParity(),this._validateHighS();(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){if(!e.slice(0,1).equals(c))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: 2, received: ${e.slice(0,1).toString("hex")}`);const r=(0,n.arrToBufArr)(s.RLP.decode(e.slice(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return l.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,s,i,a,o,c,u,d,h,m,p,f]=e;return this._validateNotArray({chainId:r,v:m}),(0,n.validateNoLeadingZeroes)({nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:u,v:m,r:p,s:f}),new l({chainId:(0,n.bufferToBigInt)(r),nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:c,value:u,data:d,accessList:h??[],v:m!==undefined?(0,n.bufferToBigInt)(m):undefined,r:p,s:f},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(o.AccessLists.getDataFeeEIP2930(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,s=(t<r?t:r)+e;return this.gasLimit*s+this.value}raw(){return[(0,n.bigIntToUnpaddedBuffer)(this.chainId),(0,n.bigIntToUnpaddedBuffer)(this.nonce),(0,n.bigIntToUnpaddedBuffer)(this.maxPriorityFeePerGas),(0,n.bigIntToUnpaddedBuffer)(this.maxFeePerGas),(0,n.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,n.bigIntToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){const e=this.raw();return t.concat([c,t.from(s.RLP.encode((0,n.bufArrToArr)(e)))])}getMessageToSign(e=!0){const r=this.raw().slice(0,9),a=t.concat([c,t.from(s.RLP.encode((0,n.bufArrToArr)(r)))]);return e?t.from((0,i.keccak256)(a)):a}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,i.keccak256)(this.serialize()))),this.cache.hash):t.from((0,i.keccak256)(this.serialize()))}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:s}=this;this._validateHighS();try{return(0,n.ecrecover)(e,t+BigInt(27),(0,n.bigIntToUnpaddedBuffer)(r),(0,n.bigIntToUnpaddedBuffer)(s))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const s={...this.txOptions,common:this.common};return l.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,n.bufferToBigInt)(t),s:(0,n.bufferToBigInt)(r)},s)}toJSON(){const e=o.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,n.bigIntToHex)(this.chainId),nonce:(0,n.bigIntToHex)(this.nonce),maxPriorityFeePerGas:(0,n.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,n.bigIntToHex)(this.maxFeePerGas),gasLimit:(0,n.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,n.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:e,v:this.v!==undefined?(0,n.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,n.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,n.bigIntToHex)(this.s):undefined}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}r.FeeMarketEIP1559Transaction=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/eip1559Transaction.js"}],[2205,{"./baseTransaction":2203,"./util":2211,"@ethereumjs/rlp":442,"@ethereumjs/util":2219,buffer:3576,"ethereum-cryptography/keccak":3804},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessListEIP2930Transaction=void 0;const s=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak"),a=e("./baseTransaction"),o=e("./util"),c=t.from(1..toString(16).padStart(2,"0"),"hex");class l extends a.BaseTransaction{constructor(e,t={}){super({...e,type:1},t),this.DEFAULT_HARDFORK="berlin";const{chainId:r,accessList:s,gasPrice:i}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const c=o.AccessLists.getAccessListData(s??[]);if(this.accessList=c.accessList,this.AccessListJSON=c.AccessListJSON,o.AccessLists.verifyAccessList(this.accessList),this.gasPrice=(0,n.bufferToBigInt)((0,n.toBuffer)(""===i?"0x":i)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),a.BaseTransaction._validateNotArray(e),this.gasPrice*this.gasLimit>n.MAX_INTEGER){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}this._validateYParity(),this._validateHighS();(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){if(!e.slice(0,1).equals(c))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: 1, received: ${e.slice(0,1).toString("hex")}`);const r=(0,n.arrToBufArr)(s.RLP.decode(Uint8Array.from(e.slice(1))));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return l.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,s,i,a,o,c,u,d,h,m,p]=e;this._validateNotArray({chainId:r,v:h}),(0,n.validateNoLeadingZeroes)({nonce:s,gasPrice:i,gasLimit:a,value:c,v:h,r:m,s:p});return new l({chainId:(0,n.bufferToBigInt)(r),nonce:s,gasPrice:i,gasLimit:a,to:o,value:c,data:u,accessList:d??[],v:h!==undefined?(0,n.bufferToBigInt)(h):undefined,r:m,s:p},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(o.AccessLists.getDataFeeEIP2930(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[(0,n.bigIntToUnpaddedBuffer)(this.chainId),(0,n.bigIntToUnpaddedBuffer)(this.nonce),(0,n.bigIntToUnpaddedBuffer)(this.gasPrice),(0,n.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,n.bigIntToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){const e=this.raw();return t.concat([c,t.from(s.RLP.encode((0,n.bufArrToArr)(e)))])}getMessageToSign(e=!0){const r=this.raw().slice(0,8),a=t.concat([c,t.from(s.RLP.encode((0,n.bufArrToArr)(r)))]);return e?t.from((0,i.keccak256)(a)):a}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,i.keccak256)(this.serialize()))),this.cache.hash):t.from((0,i.keccak256)(this.serialize()))}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:s}=this;this._validateHighS();try{return(0,n.ecrecover)(e,t+BigInt(27),(0,n.bigIntToUnpaddedBuffer)(r),(0,n.bigIntToUnpaddedBuffer)(s))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const s={...this.txOptions,common:this.common};return l.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,n.bufferToBigInt)(t),s:(0,n.bufferToBigInt)(r)},s)}toJSON(){const e=o.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,n.bigIntToHex)(this.chainId),nonce:(0,n.bigIntToHex)(this.nonce),gasPrice:(0,n.bigIntToHex)(this.gasPrice),gasLimit:(0,n.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,n.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:e,v:this.v!==undefined?(0,n.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,n.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,n.bigIntToHex)(this.s):undefined}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}r.AccessListEIP2930Transaction=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/eip2930Transaction.js"}],[2206,{"@ethereumjs/util":2219},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeTxParams=void 0;const s=e("@ethereumjs/util");r.normalizeTxParams=e=>{const t=Object.assign({},e);return t.gasLimit=(0,s.toType)(t.gasLimit??t.gas,s.TypeOutput.BigInt),t.data=t.data===undefined?t.input:t.data,t.gasPrice=t.gasPrice!==undefined?BigInt(t.gasPrice):undefined,t.value=t.value!==undefined?BigInt(t.value):undefined,t.to=null!==t.to&&t.to!==undefined?(0,s.setLengthLeft)((0,s.toBuffer)(t.to),20):null,t.v="0x0"===t.v?"0x":t.v,t.r="0x0"===t.r?"0x":t.r,t.s="0x0"===t.s?"0x":t.s,"0x"!==t.v&&(t.v=(0,s.toType)(t.v,s.TypeOutput.BigInt)),t}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/fromRpc.js"}],[2207,{"./eip1559Transaction":2204,"./eip2930Transaction":2205,"./legacyTransaction":2208,"./transactionFactory":2209,"./types":2210},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=r.Transaction=r.AccessListEIP2930Transaction=r.FeeMarketEIP1559Transaction=void 0;var i=e("./eip1559Transaction");Object.defineProperty(r,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return i.FeeMarketEIP1559Transaction}});var a=e("./eip2930Transaction");Object.defineProperty(r,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return a.AccessListEIP2930Transaction}});var o=e("./legacyTransaction");Object.defineProperty(r,"Transaction",{enumerable:!0,get:function(){return o.Transaction}});var c=e("./transactionFactory");Object.defineProperty(r,"TransactionFactory",{enumerable:!0,get:function(){return c.TransactionFactory}}),n(e("./types"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/index.js"}],[2208,{"./baseTransaction":2203,"./types":2210,"@ethereumjs/rlp":442,"@ethereumjs/util":2219,buffer:3576,"ethereum-cryptography/keccak":3804},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Transaction=void 0;const s=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak"),a=e("./baseTransaction"),o=e("./types");function c(e,t){const r=Number(e),s=2*Number(t);return r===s+35||r===s+36}class l extends a.BaseTransaction{constructor(e,t={}){if(super({...e,type:0},t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=(0,n.bufferToBigInt)((0,n.toBuffer)(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>n.MAX_INTEGER){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),a.BaseTransaction._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?c(this.v,this.common.chainId())&&this.activeCapabilities.push(o.Capability.EIP155ReplayProtection):this.activeCapabilities.push(o.Capability.EIP155ReplayProtection));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){const r=(0,n.arrToBufArr)(s.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,s,i,a,o,c,u,d,h]=e;return(0,n.validateNoLeadingZeroes)({nonce:r,gasPrice:s,gasLimit:i,value:o,v:u,r:d,s:h}),new l({nonce:r,gasPrice:s,gasLimit:i,to:a,value:o,data:c,v:u,r:d,s:h},t)}raw(){return[(0,n.bigIntToUnpaddedBuffer)(this.nonce),(0,n.bigIntToUnpaddedBuffer)(this.gasPrice),(0,n.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,n.bigIntToUnpaddedBuffer)(this.value),this.data,this.v!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){return t.from(s.RLP.encode((0,n.bufArrToArr)(this.raw())))}_getMessageToSign(){const e=[(0,n.bigIntToUnpaddedBuffer)(this.nonce),(0,n.bigIntToUnpaddedBuffer)(this.gasPrice),(0,n.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,n.bigIntToUnpaddedBuffer)(this.value),this.data];return this.supports(o.Capability.EIP155ReplayProtection)&&(e.push((0,n.bigIntToUnpaddedBuffer)(this.common.chainId())),e.push((0,n.unpadBuffer)((0,n.toBuffer)(0))),e.push((0,n.unpadBuffer)((0,n.toBuffer)(0)))),e}getMessageToSign(e=!0){const r=this._getMessageToSign();return e?t.from((0,i.keccak256)(s.RLP.encode((0,n.bufArrToArr)(r)))):r}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,i.keccak256)(s.RLP.encode((0,n.bufArrToArr)(this.raw()))))),this.cache.hash):t.from((0,i.keccak256)(s.RLP.encode((0,n.bufArrToArr)(this.raw()))))}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}const e=this._getMessageToSign();return t.from((0,i.keccak256)(s.RLP.encode((0,n.bufArrToArr)(e))))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r:r,s:s}=this;this._validateHighS();try{return(0,n.ecrecover)(e,t,(0,n.bigIntToUnpaddedBuffer)(r),(0,n.bigIntToUnpaddedBuffer)(s),this.supports(o.Capability.EIP155ReplayProtection)?this.common.chainId():undefined)}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){this.supports(o.Capability.EIP155ReplayProtection)&&(e+=this.common.chainId()*BigInt(2)+BigInt(8));const s={...this.txOptions,common:this.common};return l.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:e,r:(0,n.bufferToBigInt)(t),s:(0,n.bufferToBigInt)(r)},s)}toJSON(){return{nonce:(0,n.bigIntToHex)(this.nonce),gasPrice:(0,n.bigIntToHex)(this.gasPrice),gasLimit:(0,n.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,n.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),v:this.v!==undefined?(0,n.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,n.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,n.bigIntToHex)(this.s):undefined}}_validateTxV(e,t){let r;const s=e!==undefined?Number(e):undefined;if(s!==undefined&&s<37&&27!==s&&28!==s)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${s}`);if(s!==undefined&&0!==s&&(!t||t.gteHardfork("spuriousDragon"))&&27!==s&&28!==s)if(t){if(!c(BigInt(s),t.chainId()))throw new Error(`Incompatible EIP155-based V ${s} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(s-35)%2==0?35:36,r=BigInt(s-e)/BigInt(2)}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}r.Transaction=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/legacyTransaction.js"}],[2209,{"../../../../../../../../../is-buffer/index.js":4194,"./eip1559Transaction":2204,"./eip2930Transaction":2205,"./fromRpc":2206,"./legacyTransaction":2208,"@ethereumjs/util":2219},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=void 0;const s=e("@ethereumjs/util"),n=e("./eip1559Transaction"),i=e("./eip2930Transaction"),a=e("./fromRpc"),o=e("./legacyTransaction");class c{constructor(){}static fromTxData(e,t={}){if("type"in e&&e.type!==undefined){const r=Number((0,s.bufferToBigInt)((0,s.toBuffer)(e.type)));if(0===r)return o.Transaction.fromTxData(e,t);if(1===r)return i.AccessListEIP2930Transaction.fromTxData(e,t);if(2===r)return n.FeeMarketEIP1559Transaction.fromTxData(e,t);throw new Error(`Tx instantiation with type ${r} not supported`)}return o.Transaction.fromTxData(e,t)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return o.Transaction.fromSerializedTx(e,t);switch(e[0]){case 1:return i.AccessListEIP2930Transaction.fromSerializedTx(e,t);case 2:return n.FeeMarketEIP1559Transaction.fromSerializedTx(e,t);default:throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}static fromBlockBodyData(e,r={}){if(t.isBuffer(e))return this.fromSerializedData(e,r);if(Array.isArray(e))return o.Transaction.fromValuesArray(e,r);throw new Error("Cannot decode transaction: unknown type input")}static async fromEthersProvider(e,t,r){const n=(0,s.getProvider)(e),i=await(0,s.fetchFromProvider)(n,{method:"eth_getTransactionByHash",params:[t]});if(null===i)throw new Error("No data returned from provider");return c.fromRPCTx(i,r)}static async fromRPCTx(e,t={}){return c.fromTxData((0,a.normalizeTxParams)(e),t)}}r.TransactionFactory=c}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/transactionFactory.js"}],[221,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"providerConfig")&&(0,s.isObject)(e.NetworkController.providerConfig)){const{networkConfigurations:t,providerConfig:r}=e.NetworkController;if(!(0,s.isObject)(t))return e;if(r.id)return e;let n;for(const i of Object.keys(t)){const a=t[i];if(!(0,s.isObject)(a))return e;if(a.rpcUrl===r.rpcUrl){n=a.id;break}}return n?(e.NetworkController.providerConfig={...r,id:n},{...e,NetworkController:e.NetworkController}):e}var t,r;if((0,s.isObject)(e.NetworkController)){if(!(0,s.isObject)(e.NetworkController.providerConfig)){var n,i;null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var s=e("@metamask/utils"),n=e("lodash");const i=r.version=89}}},{package:"$root$",file:"app/scripts/migrations/089.ts"}],[2210,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function s(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.isAccessList=r.isAccessListBuffer=r.Capability=void 0,function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(r.Capability||(r.Capability={})),r.isAccessListBuffer=s,r.isAccessList=function(e){return!s(e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/types.js"}],[2211,{"./types":2210,"@ethereumjs/util":2219},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessLists=r.checkMaxInitCodeSize=void 0;const s=e("@ethereumjs/util"),n=e("./types");r.checkMaxInitCodeSize=function(e,t){const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)};r.AccessLists=class{static getAccessListData(e){let t,r;if((0,n.isAccessList)(e)){t=e;const n=[];for(let t=0;t<e.length;t++){const r=e[t],i=(0,s.toBuffer)(r.address),a=[];for(let e=0;e<r.storageKeys.length;e++)a.push((0,s.toBuffer)(r.storageKeys[e]));n.push([i,a])}r=n}else{r=e??[];const n=[];for(let e=0;e<r.length;e++){const t=r[e],i=(0,s.bufferToHex)(t[0]),a=[];for(let e=0;e<t[1].length;e++)a.push((0,s.bufferToHex)(t[1][e]));const o={address:i,storageKeys:a};n.push(o)}t=n}return{AccessListJSON:t,accessList:r}}static verifyAccessList(e){for(let t=0;t<e.length;t++){const r=e[t],s=r[0],n=r[1];if(r[2]!==undefined)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==s.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<n.length;e++)if(32!==n[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],i={address:"0x"+(0,s.setLengthLeft)(n[0],20).toString("hex"),storageKeys:[]},a=n[1];for(let e=0;e<a.length;e++){const t=a[e];i.storageKeys.push("0x"+(0,s.setLengthLeft)(t,32).toString("hex"))}t.push(i)}return t}static getDataFeeEIP2930(e,t){const r=t.param("gasPrices","accessListStorageKeyCost"),s=t.param("gasPrices","accessListAddressCost");let n=0;for(let t=0;t<e.length;t++){n+=e[t][1].length}return e.length*Number(s)+n*Number(r)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/util.js"}],[2212,{"./bytes":2215,"./constants":2216,"./helpers":2218,"./internal":2220,"@ethereumjs/rlp":442,buffer:3576,"ethereum-cryptography/keccak":3804,"ethereum-cryptography/secp256k1":3821,"ethereum-cryptography/utils":3823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const s=e("@ethereumjs/rlp"),n=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),a=e("ethereum-cryptography/utils"),o=e("./bytes"),c=e("./constants"),l=e("./helpers"),u=e("./internal"),d=BigInt(0);class h{constructor(e=d,t=d,r=c.KECCAK256_RLP,s=c.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=s,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:s,codeHash:n}=e;return new h(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,r!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):undefined,s!==undefined?(0,o.toBuffer)(s):undefined,n!==undefined?(0,o.toBuffer)(n):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(s.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,s,n]=e;return new h((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),s,n)}_validate(){if(this.nonce<d)throw new Error("nonce must be greater than zero");if(this.balance<d)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(s.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===d&&this.nonce===d&&this.codeHash.equals(c.KECCAK256_NULL)}}r.Account=h;r.isValidAddress=function(e){try{(0,l.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,l.assertIsHexString)(e);const s=(0,u.stripHexPrefix)(e).toLowerCase();let i="";if(r!==undefined){i=(0,o.bufferToBigInt)((0,o.toBuffer)(r)).toString()+"0x"}const c=t.from(i+s,"utf8"),d=(0,a.bytesToHex)((0,n.keccak256)(c));let h="0x";for(let e=0;e<s.length;e++)parseInt(d[e],16)>=8?h+=s[e].toUpperCase():h+=s[e];return h};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(r),(0,o.bufferToBigInt)(r)===BigInt(0)?t.from((0,n.keccak256)(s.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,n.keccak256)(s.RLP.encode((0,o.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,s){if((0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(r),(0,l.assertIsBuffer)(s),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const i=(0,n.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,n.keccak256)(s)]));return(0,o.toBuffer)(i).slice(-20)};r.isValidPrivate=function(e){return i.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,l.assertIsBuffer)(e),64===e.length)try{return i.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return i.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,l.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,n.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,l.assertIsBuffer)(e),t.from(i.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,l.assertIsBuffer)(e),64!==e.length&&(e=t.from(i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function m(e){const[t,r,s,n]=e;return[t,r,0===(0,o.arrToBufArr)(s).length?c.KECCAK256_RLP:s,0===(0,o.arrToBufArr)(n).length?c.KECCAK256_NULL:n]}r.isZeroAddress=function(e){try{(0,l.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=m;const p=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,s,n]=e;return[t,r,(0,o.arrToBufArr)(s).equals(c.KECCAK256_RLP)?p:s,(0,o.arrToBufArr)(n).equals(c.KECCAK256_NULL)?p:n]},r.accountBodyToRLP=function(e,t=!0){const r=t?m(e):e;return(0,o.arrToBufArr)(s.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/account.js"}],[2213,{"./account":2212,"./bytes":2215,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const s=e("./account"),n=e("./bytes");class i{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new i((0,n.zeros)(20))}static fromString(e){if(!(0,s.isValidAddress)(e))throw new Error("Invalid address");return new i((0,n.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,s.pubToAddress)(e);return new i(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,s.privateToAddress)(e);return new i(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new i((0,s.generateAddress)(e.buf,(0,n.bigIntToBuffer)(t)))}static generate2(e,r,n){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(n))throw new Error("Expected initCode to be a Buffer");return new i((0,s.generateAddress2)(e.buf,r,n))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(i.zero())}isPrecompileOrSystemAddress(){const e=(0,n.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=i}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/address.js"}],[2214,{events:3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const s=e("events");class n extends s.EventEmitter{emit(e,...t){let[r,s]=t;const n=this;let i=n._events[e]??[];return s===undefined&&"function"==typeof r&&(s=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:s},s=undefined),i=Array.isArray(i)?i:[i],async function(e,t,r){let s;for await(const n of t)try{n.length<2?n.call(e,r):await new Promise(((t,s)=>{n.call(e,r,(e=>{e?s(e):t()}))}))}catch(e){s=e}if(s)throw s}(n,i.slice(),r).then(s).catch(s),n.listenerCount(e)>0}once(e,t){const r=this;let s;if("function"!=typeof t)throw new TypeError("listener must be a function");return s=t.length>=2?function(n,i){r.removeListener(e,s),t(n,i)}:function(n){r.removeListener(e,s),t(n,s)},r.on(e,s),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,s){let n,i,a=this._events[e]??[];const o="after"===s?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),i=a.length,n=a.length;n--;)if(a[n]===t){i=n+o;break}return a.splice(i,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=n}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[2215,{"./helpers":2218,"./internal":2220,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const s=e("./helpers"),n=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const s=(0,r.intToHex)(e);return t.from((0,n.padToEven)(s.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const i=function(e,t,s){const n=(0,r.zeros)(t);return s?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,s.assertIsBuffer)(e),i(e,t,!1)};r.setLengthRight=function(e,t){return(0,s.assertIsBuffer)(e),i(e,t,!0)};const a=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,s.assertIsBuffer)(e),a(e)};r.unpadArray=function(e){return(0,s.assertIsArray)(e),a(e)};r.unpadHexString=function(e){return(0,s.assertIsHexString)(e),e=(0,n.stripHexPrefix)(e),"0x"+a(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,n.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,n.padToEven)((0,n.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function c(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=o,r.bigIntToBuffer=c;r.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,o(e))};r.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,n.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const s=t.isBuffer(e)?e.toString("hex"):e;return s.length<=r?s:s.slice(0,r)+"…"};r.toUtf8=function(e){if((e=(0,n.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let s=0;s<e.length;s++)t.push((0,r.baToJSON)(e[s]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(c(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/bytes.js"}],[2216,{buffer:3576,"ethereum-cryptography/secp256k1":3821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const s=e("buffer"),n=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=n.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=n.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=s.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=s.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=s.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=s.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/constants.js"}],[2217,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,s=0;s<e.length;r+=1,s+=2)t[r]=e[s]<<4|e[s+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const s=new Uint8Array(e.length/2+1);return s[0]=t<<5,1&~e.length||(s[0]|=16,s[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,s.subarray(1)),s};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const s=e[t];r[2*t]=s/16,r[2*t+1]=s%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const s=2-(1&t[0]);return t.subarray(s)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/encoding.js"}],[2218,{"../../../../../../../../../is-buffer/index.js":4194,"./internal":2220},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const s=e("./internal");r.assertIsHexString=function(e){if(!(0,s.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/helpers.js"}],[2219,{"./account":2212,"./address":2213,"./asyncEventEmitter":2214,"./bytes":2215,"./constants":2216,"./encoding":2217,"./internal":2220,"./lock":2221,"./provider":2222,"./signature":2223,"./types":2224,"./units":2225,"./withdrawal":2226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,n(e("./constants"),r),n(e("./units"),r),n(e("./account"),r),n(e("./address"),r),n(e("./withdrawal"),r),n(e("./signature"),r),n(e("./bytes"),r),n(e("./types"),r),n(e("./encoding"),r),n(e("./asyncEventEmitter"),r);var i=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return i.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return i.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),n(e("./lock"),r),n(e("./provider"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/index.js"}],[222,{"@metamask/utils":2787,lodash:4382,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,i.hasProperty)(e,"PhishingController"))return a.default.warn("typeof state.PhishingController is undefined"),e;if(!(0,i.isObject)(e.PhishingController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController)),e}if(!(0,i.hasProperty)(e.PhishingController,"listState"))return a.default.warn("typeof state.PhishingController.listState is "+typeof e.PhishingController),e;return delete e.PhishingController.listState,e}(t.data),t},r.version=void 0;var s,n=e("lodash"),i=e("@metamask/utils"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=r.version=90}}},{package:"$root$",file:"app/scripts/migrations/090.ts"}],[2220,{buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function s(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=s,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const s=e.length;for("0x"===e.substring(0,2)&&(r=2);r<s;r+=2){const s=parseInt(e.substr(r,2),16);t+=String.fromCharCode(s)}return t},r.fromUtf8=function(t){return`0x${s(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const s=e.charCodeAt(r).toString(16);t+=s.length<2?`0${s}`:s}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const s=[];for(let n=0;n<e.length;n++){let i=e[n][t];if(!0!==r||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";s.push(i)}return s},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/internal.js"}],[2221,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/lock.js"}],[2222,{"micro-ftch":4425},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const s=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,s.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/provider.js"}],[2223,{"./bytes":2215,"./constants":2216,"./helpers":2218,buffer:3576,"ethereum-cryptography/keccak":3804,"ethereum-cryptography/secp256k1":3821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const s=e("ethereum-cryptography/keccak"),n=e("ethereum-cryptography/secp256k1"),i=e("./bytes"),a=e("./constants"),o=e("./helpers");function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function l(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,s){const i=n.secp256k1.sign(e,r),a=i.toCompactRawBytes();return{r:t.from(a.slice(0,32)),s:t.from(a.slice(32,64)),v:s===undefined?BigInt(i.recovery+27):BigInt(i.recovery+35)+BigInt(s)*BigInt(2)}};r.ecrecover=function(e,r,s,a,o){const u=t.concat([(0,i.setLengthLeft)(s,32),(0,i.setLengthLeft)(a,32)],64),d=c(r,o);if(!l(d))throw new Error("Invalid signature v value");const h=n.secp256k1.Signature.fromCompact(u).addRecoveryBit(Number(d)).recoverPublicKey(e);return t.from(h.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,s,n){if(!l(c(e,n)))throw new Error("Invalid signature v value");return(0,i.bufferToHex)(t.concat([(0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(s,32),(0,i.toBuffer)(e)]))};r.toCompactSig=function(e,r,s,n){if(!l(c(e,n)))throw new Error("Invalid signature v value");let a=s;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(a=t.from(s),a[0]|=128),(0,i.bufferToHex)(t.concat([(0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(a,32)]))};r.fromRpcSig=function(e){const t=(0,i.toBuffer)(e);let r,s,n;if(t.length>=65)r=t.slice(0,32),s=t.slice(32,64),n=(0,i.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),s=t.slice(32,64),n=BigInt((0,i.bufferToInt)(t.slice(32,33))>>7),s[0]&=127}return n<27&&(n+=BigInt(27)),{v:n,r:r,s:s}};r.isValidSignature=function(e,t,r,s=!0,n){if(32!==t.length||32!==r.length)return!1;if(!l(c(e,n)))return!1;const o=(0,i.bufferToBigInt)(t),u=(0,i.bufferToBigInt)(r);return!(o===BigInt(0)||o>=a.SECP256K1_ORDER||u===BigInt(0)||u>=a.SECP256K1_ORDER)&&!(s&&u>=a.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,s.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/signature.js"}],[2224,{"./bytes":2215,"./internal":2220},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const s=e("./bytes"),n=e("./internal");var i;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(i=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,n.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,s.toBuffer)(e);switch(t){case i.Buffer:return r;case i.BigInt:return(0,s.bufferToBigInt)(r);case i.Number:{const e=(0,s.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case i.PrefixedHexString:return(0,s.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/types.js"}],[2225,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/units.js"}],[2226,{"./address":2213,"./bytes":2215,"./types":2224,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const s=e("./address"),n=e("./bytes"),i=e("./types");class a{constructor(e,t,r,s){this.index=e,this.validatorIndex=t,this.address=r,this.amount=s}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:n,amount:o}=e,c=(0,i.toType)(t,i.TypeOutput.BigInt),l=(0,i.toType)(r,i.TypeOutput.BigInt),u=new s.Address((0,i.toType)(n,i.TypeOutput.Buffer)),d=(0,i.toType)(o,i.TypeOutput.BigInt);return new a(c,l,u,d)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,s,n]=e;return a.fromWithdrawalData({index:t,validatorIndex:r,address:s,amount:n})}static toBufferArray(e){const{index:r,validatorIndex:n,address:a,amount:o}=e,c=(0,i.toType)(r,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(r,i.TypeOutput.Buffer),l=(0,i.toType)(n,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(n,i.TypeOutput.Buffer);let u;u=a instanceof s.Address?a.buf:(0,i.toType)(a,i.TypeOutput.Buffer);return[c,l,u,(0,i.toType)(o,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(o,i.TypeOutput.Buffer)]}raw(){return a.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,n.bigIntToHex)(this.index),validatorIndex:(0,n.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,n.bigIntToHex)(this.amount)}}}r.Withdrawal=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[2227,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var r,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,m=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function f(e){for(var t,r,s=1,n=e.length,i=e[0]+"";s<n;){for(t=e[s++]+"",r=l-t.length;r--;t="0"+t);i+=t}for(n=i.length;48===i.charCodeAt(--n););return i.slice(0,n+1||1)}function g(e,t){var r,s,n=e.c,i=t.c,a=e.s,o=t.s,c=e.e,l=t.e;if(!a||!o)return null;if(r=n&&!n[0],s=i&&!i[0],r||s)return r?s?0:-o:a;if(a!=o)return a;if(r=a<0,s=c==l,!n||!i)return s?0:!n^r?1:-1;if(!s)return c>l^r?1:-1;for(o=(c=n.length)<(l=i.length)?c:l,a=0;a<o;a++)if(n[a]!=i[a])return n[a]>i[a]^r?1:-1;return c==l?0:c>l^r?1:-1}function v(e,t,r,s){if(e<t||e>r||e!==i(e))throw Error(a+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function _(e){var t=e.c.length-1;return p(e.e/l)==t&&e.c[t]%2!=0}function y(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function k(e,t,r){var s,n;if(t<0){for(n=r+".";++t;n+=r);e=n+e}else if(++t>(s=e.length)){for(n=r,t-=s;--t;n+=r);e+=n}else t<s&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,w,b,T,S,E,P,I,A,j,C=W.prototype={constructor:W,toString:null,valueOf:null},x=new W(1),N=20,R=4,M=-7,B=21,O=-1e7,L=1e7,G=!1,F=1,D=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function W(e,t){var r,n,a,c,d,h,m,p,f=this;if(!(f instanceof W))return new W(e,t);if(null==t){if(e&&!0===e._isBigNumber)return f.s=e.s,void(!e.c||e.e>L?f.c=f.e=null:e.e<O?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>L?f.c=f.e=null:(f.e=c,f.c=[e]))}p=String(e)}else{if(!s.test(p=String(e)))return b(f,p,h);f.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(d=p.search(/e/i))>0?(c<0&&(c=d),c+=+p.slice(d+1),p=p.substring(0,d)):c<0&&(c=p.length)}else{if(v(t,2,U.length,"Base"),10==t&&$)return q(f=new W(e),N+f.e+1,R);if(p=String(e),h="number"==typeof e){if(0*e!=0)return b(f,p,h,t);if(f.s=1/e<0?(p=p.slice(1),-1):1,W.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else f.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=U.slice(0,t),c=d=0,m=p.length;d<m;d++)if(r.indexOf(n=p.charAt(d))<0){if("."==n){if(d>c){c=m;continue}}else if(!a&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){a=!0,d=-1,c=0;continue}return b(f,String(e),h,t)}h=!1,(c=(p=w(p,t,10,f.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(d=0;48===p.charCodeAt(d);d++);for(m=p.length;48===p.charCodeAt(--m););if(p=p.slice(d,++m)){if(m-=d,h&&W.DEBUG&&m>15&&(e>u||e!==i(e)))throw Error(o+f.s*e);if((c=c-d-1)>L)f.c=f.e=null;else if(c<O)f.c=[f.e=0];else{if(f.e=c,f.c=[],d=(c+1)%l,c<0&&(d+=l),d<m){for(d&&f.c.push(+p.slice(0,d)),m-=l;d<m;)f.c.push(+p.slice(d,d+=l));d=l-(p=p.slice(d)).length}else d-=m;for(;d--;p+="0");f.c.push(+p)}}else f.c=[f.e=0]}function V(e,t,r,s){var n,i,a,o,c;if(null==r?r=R:v(r,0,8),!e.c)return e.toString();if(n=e.c[0],a=e.e,null==t)c=f(e.c),c=1==s||2==s&&(a<=M||a>=B)?y(c,a):k(c,a,"0");else if(i=(e=q(new W(e),t,r)).e,o=(c=f(e.c)).length,1==s||2==s&&(t<=i||i<=M)){for(;o<t;c+="0",o++);c=y(c,i)}else if(t-=a,c=k(c,i,"0"),i+1>o){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-o)>0)for(i+1==o&&(c+=".");t--;c+="0");return e.s<0&&n?"-"+c:c}function K(e,t){for(var r,s,n=1,i=new W(e[0]);n<e.length;n++)(!(s=new W(e[n])).s||(r=g(i,s))===t||0===r&&i.s===t)&&(i=s);return i}function J(e,t,r){for(var s=1,n=t.length;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,s++);return(r=s+r*l-1)>L?e.c=e.e=null:r<O?e.c=[e.e=0]:(e.e=r,e.c=t),e}function q(e,t,r,s){var a,o,u,h,m,p,f,g=e.c,v=d;if(g){e:{for(a=1,h=g[0];h>=10;h/=10,a++);if((o=t-a)<0)o+=l,u=t,m=g[p=0],f=i(m/v[a-u-1]%10);else if((p=n((o+1)/l))>=g.length){if(!s)break e;for(;g.length<=p;g.push(0));m=f=0,a=1,u=(o%=l)-l+1}else{for(m=h=g[p],a=1;h>=10;h/=10,a++);f=(u=(o%=l)-l+a)<0?0:i(m/v[a-u-1]%10)}if(s=s||t<0||null!=g[p+1]||(u<0?m:m%v[a-u-1]),s=r<4?(f||s)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||s||6==r&&(o>0?u>0?m/v[a-u]:0:g[p-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,s?(t-=e.e+1,g[0]=v[(l-t%l)%l],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=p,h=1,p--):(g.length=p+1,h=v[l-o],g[p]=u>0?i(m/v[a-u]%v[u])*h:0),s)for(;;){if(0==p){for(o=1,u=g[0];u>=10;u/=10,o++);for(u=g[0]+=h,h=1;u>=10;u/=10,h++);o!=h&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[p]+=h,g[p]!=c)break;g[p--]=0,h=1}for(o=g.length;0===g[--o];g.pop());}e.e>L?e.c=e.e=null:e.e<O&&(e.c=[e.e=0])}return e}function z(e){var t,r=e.e;return null===r?e.toString():(t=f(e.c),t=r<=M||r>=B?y(t,r):k(t,r,"0"),e.s<0?"-"+t:t)}return W.clone=e,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(v(r=e[t],0,m,t),N=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(v(r=e[t],0,8,t),R=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(v(r[0],-m,0,t),v(r[1],0,m,t),M=r[0],B=r[1]):(v(r,-m,m,t),M=-(B=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)v(r[0],-m,-1,t),v(r[1],1,m,t),O=r[0],L=r[1];else{if(v(r,-m,m,t),!r)throw Error(a+t+" cannot be zero: "+r);O=-(L=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(a+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw G=!r,Error(a+"crypto unavailable");G=r}else G=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(v(r=e[t],0,9,t),F=r),e.hasOwnProperty(t="POW_PRECISION")&&(v(r=e[t],0,m,t),D=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(a+t+" not an object: "+r);H=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);$="0123456789"==r.slice(0,10),U=r}}return{DECIMAL_PLACES:N,ROUNDING_MODE:R,EXPONENTIAL_AT:[M,B],RANGE:[O,L],CRYPTO:G,MODULO_MODE:F,POW_PRECISION:D,FORMAT:H,ALPHABET:U}},W.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!W.DEBUG)return!0;var t,r,s=e.c,n=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(s)){if((1===o||-1===o)&&n>=-m&&n<=m&&n===i(n)){if(0===s[0]){if(0===n&&1===s.length)return!0;break e}if((t=(n+1)%l)<1&&(t+=l),String(s[0]).length==t){for(t=0;t<s.length;t++)if((r=s[t])<0||r>=c||r!==i(r))break e;if(0!==r)return!0}}}else if(null===s&&null===n&&(null===o||1===o||-1===o))return!0;throw Error(a+"Invalid BigNumber: "+e)},W.maximum=W.max=function(){return K(arguments,-1)},W.minimum=W.min=function(){return K(arguments,1)},W.random=(T=9007199254740992,S=Math.random()*T&2097151?function(){return i(Math.random()*T)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,s,o,c,u=0,h=[],p=new W(x);if(null==e?e=N:v(e,0,m),o=n(e/l),G)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));u<o;)(c=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(h.push(c%1e14),u+=2);u=o/2}else{if(!crypto.randomBytes)throw G=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(o*=7);u<o;)(c=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(h.push(c%1e14),u+=7);u=o/7}if(!G)for(;u<o;)(c=S())<9e15&&(h[u++]=c%1e14);for(o=h[--u],e%=l,o&&e&&(c=d[l-e],h[u]=i(o/c)*c);0===h[u];h.pop(),u--);if(u<0)h=[s=0];else{for(s=-1;0===h[0];h.splice(0,1),s-=l);for(u=1,c=h[0];c>=10;c/=10,u++);u<l&&(s-=l-u)}return p.e=s,p.c=h,p}),W.sum=function(){for(var e=1,t=arguments,r=new W(t[0]);e<t.length;)r=r.plus(t[e++]);return r},w=function(){var e="0123456789";function t(e,t,r,s){for(var n,i,a=[0],o=0,c=e.length;o<c;){for(i=a.length;i--;a[i]*=t);for(a[0]+=s.indexOf(e.charAt(o++)),n=0;n<a.length;n++)a[n]>r-1&&(null==a[n+1]&&(a[n+1]=0),a[n+1]+=a[n]/r|0,a[n]%=r)}return a.reverse()}return function(s,n,i,a,o){var c,l,u,d,h,m,p,g,v=s.indexOf("."),_=N,y=R;for(v>=0&&(d=D,D=0,s=s.replace(".",""),m=(g=new W(n)).pow(s.length-v),D=d,g.c=t(k(f(m.c),m.e,"0"),10,i,e),g.e=g.c.length),u=d=(p=t(s,n,i,o?(c=U,e):(c=e,U))).length;0==p[--d];p.pop());if(!p[0])return c.charAt(0);if(v<0?--u:(m.c=p,m.e=u,m.s=a,p=(m=r(m,g,_,y,i)).c,h=m.r,u=m.e),v=p[l=u+_+1],d=i/2,h=h||l<0||null!=p[l+1],h=y<4?(null!=v||h)&&(0==y||y==(m.s<0?3:2)):v>d||v==d&&(4==y||h||6==y&&1&p[l-1]||y==(m.s<0?8:7)),l<1||!p[0])s=h?k(c.charAt(1),-_,c.charAt(0)):c.charAt(0);else{if(p.length=l,h)for(--i;++p[--l]>i;)p[l]=0,l||(++u,p=[1].concat(p));for(d=p.length;!p[--d];);for(v=0,s="";v<=d;s+=c.charAt(p[v++]));s=k(s,u,c.charAt(0))}return s}}(),r=function(){function e(e,t,r){var s,n,i,a,o=0,c=e.length,l=t%h,u=t/h|0;for(e=e.slice();c--;)o=((n=l*(i=e[c]%h)+(s=u*i+(a=e[c]/h|0)*l)%h*h+o)/r|0)+(s/h|0)+u*a,e[c]=n%r;return o&&(e=[o].concat(e)),e}function t(e,t,r,s){var n,i;if(r!=s)i=r>s?1:-1;else for(n=i=0;n<r;n++)if(e[n]!=t[n]){i=e[n]>t[n]?1:-1;break}return i}function r(e,t,r,s){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*s+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(s,n,a,o,u){var d,h,m,f,g,v,_,y,k,w,b,T,S,E,P,I,A,j=s.s==n.s?1:-1,C=s.c,x=n.c;if(!(C&&C[0]&&x&&x[0]))return new W(s.s&&n.s&&(C?!x||C[0]!=x[0]:x)?C&&0==C[0]||!x?0*j:j/0:NaN);for(k=(y=new W(j)).c=[],j=a+(h=s.e-n.e)+1,u||(u=c,h=p(s.e/l)-p(n.e/l),j=j/l|0),m=0;x[m]==(C[m]||0);m++);if(x[m]>(C[m]||0)&&h--,j<0)k.push(1),f=!0;else{for(E=C.length,I=x.length,m=0,j+=2,(g=i(u/(x[0]+1)))>1&&(x=e(x,g,u),C=e(C,g,u),I=x.length,E=C.length),S=I,b=(w=C.slice(0,I)).length;b<I;w[b++]=0);A=x.slice(),A=[0].concat(A),P=x[0],x[1]>=u/2&&P++;do{if(g=0,(d=t(x,w,I,b))<0){if(T=w[0],I!=b&&(T=T*u+(w[1]||0)),(g=i(T/P))>1)for(g>=u&&(g=u-1),_=(v=e(x,g,u)).length,b=w.length;1==t(v,w,_,b);)g--,r(v,I<_?A:x,_,u),_=v.length,d=1;else 0==g&&(d=g=1),_=(v=x.slice()).length;if(_<b&&(v=[0].concat(v)),r(w,v,b,u),b=w.length,-1==d)for(;t(x,w,I,b)<1;)g++,r(w,I<b?A:x,b,u),b=w.length}else 0===d&&(g++,w=[0]);k[m++]=g,w[0]?w[b++]=C[S]||0:(w=[C[S]],b=1)}while((S++<E||null!=w[0])&&j--);f=null!=w[0],k[0]||k.splice(0,1)}if(u==c){for(m=1,j=k[0];j>=10;j/=10,m++);q(y,a+(y.e=m+h*l-1)+1,o,f)}else y.e=h,y.r=+f;return y}}(),E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,P=/^([^.]+)\.$/,I=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,j=/^\s*\+(?=[\w.])|^\s+|\s+$/g,b=function(e,t,r,s){var n,i=r?t:t.replace(j,"");if(A.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(E,(function(e,t,r){return n="x"==(r=r.toLowerCase())?16:"b"==r?2:8,s&&s!=n?e:t})),s&&(n=s,i=i.replace(P,"$1").replace(I,"0.$1")),t!=i))return new W(i,n);if(W.DEBUG)throw Error(a+"Not a"+(s?" base "+s:"")+" number: "+t);e.s=null}e.c=e.e=null},C.absoluteValue=C.abs=function(){var e=new W(this);return e.s<0&&(e.s=1),e},C.comparedTo=function(e,t){return g(this,new W(e,t))},C.decimalPlaces=C.dp=function(e,t){var r,s,n,i=this;if(null!=e)return v(e,0,m),null==t?t=R:v(t,0,8),q(new W(i),e+i.e+1,t);if(!(r=i.c))return null;if(s=((n=r.length-1)-p(this.e/l))*l,n=r[n])for(;n%10==0;n/=10,s--);return s<0&&(s=0),s},C.dividedBy=C.div=function(e,t){return r(this,new W(e,t),N,R)},C.dividedToIntegerBy=C.idiv=function(e,t){return r(this,new W(e,t),0,1)},C.exponentiatedBy=C.pow=function(e,t){var r,s,o,c,u,d,h,m,p=this;if((e=new W(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+z(e));if(null!=t&&(t=new W(t)),u=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return m=new W(Math.pow(+z(p),u?e.s*(2-_(e)):+z(e))),t?m.mod(t):m;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new W(NaN);(s=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return c=p.s<0&&_(e)?-0:0,p.e>-1&&(c=1/c),new W(d?1/c:c);D&&(c=n(D/l+2))}for(u?(r=new W(.5),d&&(e.s=1),h=_(e)):h=(o=Math.abs(+z(e)))%2,m=new W(x);;){if(h){if(!(m=m.times(p)).c)break;c?m.c.length>c&&(m.c.length=c):s&&(m=m.mod(t))}if(o){if(0===(o=i(o/2)))break;h=o%2}else if(q(e=e.times(r),e.e+1,1),e.e>14)h=_(e);else{if(0===(o=+z(e)))break;h=o%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):s&&(p=p.mod(t))}return s?m:(d&&(m=x.div(m)),t?m.mod(t):c?q(m,D,R,undefined):m)},C.integerValue=function(e){var t=new W(this);return null==e?e=R:v(e,0,8),q(t,t.e+1,e)},C.isEqualTo=C.eq=function(e,t){return 0===g(this,new W(e,t))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(e,t){return g(this,new W(e,t))>0},C.isGreaterThanOrEqualTo=C.gte=function(e,t){return 1===(t=g(this,new W(e,t)))||0===t},C.isInteger=function(){return!!this.c&&p(this.e/l)>this.c.length-2},C.isLessThan=C.lt=function(e,t){return g(this,new W(e,t))<0},C.isLessThanOrEqualTo=C.lte=function(e,t){return-1===(t=g(this,new W(e,t)))||0===t},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(e,t){var r,s,n,i,a=this,o=a.s;if(t=(e=new W(e,t)).s,!o||!t)return new W(NaN);if(o!=t)return e.s=-t,a.plus(e);var u=a.e/l,d=e.e/l,h=a.c,m=e.c;if(!u||!d){if(!h||!m)return h?(e.s=-t,e):new W(m?a:NaN);if(!h[0]||!m[0])return m[0]?(e.s=-t,e):new W(h[0]?a:3==R?-0:0)}if(u=p(u),d=p(d),h=h.slice(),o=u-d){for((i=o<0)?(o=-o,n=h):(d=u,n=m),n.reverse(),t=o;t--;n.push(0));n.reverse()}else for(s=(i=(o=h.length)<(t=m.length))?o:t,o=t=0;t<s;t++)if(h[t]!=m[t]){i=h[t]<m[t];break}if(i&&(n=h,h=m,m=n,e.s=-e.s),(t=(s=m.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=c-1;s>o;){if(h[--s]<m[s]){for(r=s;r&&!h[--r];h[r]=t);--h[r],h[s]+=c}h[s]-=m[s]}for(;0==h[0];h.splice(0,1),--d);return h[0]?J(e,h,d):(e.s=3==R?-1:1,e.c=[e.e=0],e)},C.modulo=C.mod=function(e,t){var s,n,i=this;return e=new W(e,t),!i.c||!e.s||e.c&&!e.c[0]?new W(NaN):!e.c||i.c&&!i.c[0]?new W(i):(9==F?(n=e.s,e.s=1,s=r(i,e,0,3),e.s=n,s.s*=n):s=r(i,e,0,F),(e=i.minus(s.times(e))).c[0]||1!=F||(e.s=i.s),e)},C.multipliedBy=C.times=function(e,t){var r,s,n,i,a,o,u,d,m,f,g,v,_,y,k,w=this,b=w.c,T=(e=new W(e,t)).c;if(!(b&&T&&b[0]&&T[0]))return!w.s||!e.s||b&&!b[0]&&!T||T&&!T[0]&&!b?e.c=e.e=e.s=null:(e.s*=w.s,b&&T?(e.c=[0],e.e=0):e.c=e.e=null),e;for(s=p(w.e/l)+p(e.e/l),e.s*=w.s,(u=b.length)<(f=T.length)&&(_=b,b=T,T=_,n=u,u=f,f=n),n=u+f,_=[];n--;_.push(0));for(y=c,k=h,n=f;--n>=0;){for(r=0,g=T[n]%k,v=T[n]/k|0,i=n+(a=u);i>n;)r=((d=g*(d=b[--a]%k)+(o=v*d+(m=b[a]/k|0)*g)%k*k+_[i]+r)/y|0)+(o/k|0)+v*m,_[i--]=d%y;_[i]=r}return r?++s:_.splice(0,1),J(e,_,s)},C.negated=function(){var e=new W(this);return e.s=-e.s||null,e},C.plus=function(e,t){var r,s=this,n=s.s;if(t=(e=new W(e,t)).s,!n||!t)return new W(NaN);if(n!=t)return e.s=-t,s.minus(e);var i=s.e/l,a=e.e/l,o=s.c,u=e.c;if(!i||!a){if(!o||!u)return new W(n/0);if(!o[0]||!u[0])return u[0]?e:new W(o[0]?s:0*n)}if(i=p(i),a=p(a),o=o.slice(),n=i-a){for(n>0?(a=i,r=u):(n=-n,r=o),r.reverse();n--;r.push(0));r.reverse()}for((n=o.length)-(t=u.length)<0&&(r=u,u=o,o=r,t=n),n=0;t;)n=(o[--t]=o[t]+u[t]+n)/c|0,o[t]=c===o[t]?0:o[t]%c;return n&&(o=[n].concat(o),++a),J(e,o,a)},C.precision=C.sd=function(e,t){var r,s,n,i=this;if(null!=e&&e!==!!e)return v(e,1,m),null==t?t=R:v(t,0,8),q(new W(i),e,t);if(!(r=i.c))return null;if(s=(n=r.length-1)*l+1,n=r[n]){for(;n%10==0;n/=10,s--);for(n=r[0];n>=10;n/=10,s++);}return e&&i.e+1>s&&(s=i.e+1),s},C.shiftedBy=function(e){return v(e,-9007199254740991,u),this.times("1e"+e)},C.squareRoot=C.sqrt=function(){var e,t,s,n,i,a=this,o=a.c,c=a.s,l=a.e,u=N+4,d=new W("0.5");if(1!==c||!o||!o[0])return new W(!c||c<0&&(!o||o[0])?NaN:o?a:1/0);if(0==(c=Math.sqrt(+z(a)))||c==1/0?(((t=f(o)).length+l)%2==0&&(t+="0"),c=Math.sqrt(+t),l=p((l+1)/2)-(l<0||l%2),s=new W(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):s=new W(c+""),s.c[0])for((c=(l=s.e)+u)<3&&(c=0);;)if(i=s,s=d.times(i.plus(r(a,i,u,1))),f(i.c).slice(0,c)===(t=f(s.c)).slice(0,c)){if(s.e<l&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(q(s,s.e+N+2,1),e=!s.times(s).eq(a));break}if(!n&&(q(i,i.e+N+2,0),i.times(i).eq(a))){s=i;break}u+=4,c+=4,n=1}return q(s,s.e+N+1,R,e)},C.toExponential=function(e,t){return null!=e&&(v(e,0,m),e++),V(this,e,t,1)},C.toFixed=function(e,t){return null!=e&&(v(e,0,m),e=e+this.e+1),V(this,e,t)},C.toFormat=function(e,t,r){var s,n=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=H;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(s=n.toFixed(e,t),n.c){var i,o=s.split("."),c=+r.groupSize,l=+r.secondaryGroupSize,u=r.groupSeparator||"",d=o[0],h=o[1],m=n.s<0,p=m?d.slice(1):d,f=p.length;if(l&&(i=c,c=l,l=i,f-=i),c>0&&f>0){for(i=f%c||c,d=p.substr(0,i);i<f;i+=c)d+=u+p.substr(i,c);l>0&&(d+=u+p.slice(i)),m&&(d="-"+d)}s=h?d+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):d}return(r.prefix||"")+s+(r.suffix||"")},C.toFraction=function(e){var t,s,n,i,o,c,u,h,m,p,g,v,_=this,y=_.c;if(null!=e&&(!(u=new W(e)).isInteger()&&(u.c||1!==u.s)||u.lt(x)))throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+z(u));if(!y)return new W(_);for(t=new W(x),m=s=new W(x),n=h=new W(x),v=f(y),o=t.e=v.length-_.e-1,t.c[0]=d[(c=o%l)<0?l+c:c],e=!e||u.comparedTo(t)>0?o>0?t:m:u,c=L,L=1/0,u=new W(v),h.c[0]=0;p=r(u,t,0,1),1!=(i=s.plus(p.times(n))).comparedTo(e);)s=n,n=i,m=h.plus(p.times(i=m)),h=i,t=u.minus(p.times(i=t)),u=i;return i=r(e.minus(s),n,0,1),h=h.plus(i.times(m)),s=s.plus(i.times(n)),h.s=m.s=_.s,g=r(m,n,o*=2,R).minus(_).abs().comparedTo(r(h,s,o,R).minus(_).abs())<1?[m,n]:[h,s],L=c,g},C.toNumber=function(){return+z(this)},C.toPrecision=function(e,t){return null!=e&&v(e,1,m),V(this,e,t,2)},C.toString=function(e){var t,r=this,s=r.s,n=r.e;return null===n?s?(t="Infinity",s<0&&(t="-"+t)):t="NaN":(null==e?t=n<=M||n>=B?y(f(r.c),n):k(f(r.c),n,"0"):10===e&&$?t=k(f((r=q(new W(r),N+n+1,R)).c),r.e,"0"):(v(e,2,U.length,"Base"),t=w(k(f(r.c),n,"0"),10,e,s,!0)),s<0&&r.c[0]&&(t="-"+t)),t},C.valueOf=C.toJSON=function(){return z(this)},C._isBigNumber=!0,null!=t&&W.set(t),W}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"@metamask/smart-transactions-controller>bignumber.js",file:"node_modules/@metamask/smart-transactions-controller/node_modules/bignumber.js/bignumber.js"}],[2228,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=[{constant:!1,inputs:[{name:"_new",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSignatures",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[],name:"drain",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"bytes4"}],name:"entries",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_method",type:"string"}],name:"register",outputs:[{name:"",type:"bool"}],payable:!1,type:"function"},{inputs:[],type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"creator",type:"address"},{indexed:!0,name:"signature",type:"bytes4"},{indexed:!1,name:"method",type:"string"}],name:"Registered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"old",type:"address"},{indexed:!0,name:"current",type:"address"}],name:"NewOwner",type:"event"}]}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/abi.json"}],[2229,{"./abi.json":2228,"./registry-map.json":2230,"@metamask/ethjs-contract":2165,"@metamask/ethjs-query":2168},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MethodRegistry=void 0;const n=s(e("@metamask/ethjs-query")),i=s(e("@metamask/ethjs-contract")),a=s(e("./registry-map.json")),o=s(e("./abi.json"));r.MethodRegistry=class{constructor(e){if(!e.provider)throw new Error("Missing required 'provider' option");const t=a.default[e.network||"1"];if(!t)throw new Error("No method registry found on the requested network.");const r=new n.default(e.provider),s=(0,i.default)(r);this.registry=s(o.default).at(t)}async lookup(e){const t=await this.registry.entries(e);return t?t[0]:undefined}parse(e){const t=e.match(/^([^)(]*)\((.*)\)([^)(]*)$/u);let r;if(r=t?t[1].charAt(0).toUpperCase()+t[1].slice(1).split(/(?=[A-Z])/u).join(" "):"",t){const s=e.match(new RegExp(`${t[1]}\\(+([a-z1-9,()\\[\\]]+)\\)`,"u"));let n,i=[];return s&&(n=s[1].match(/[A-z1-9]+/gu),n&&(i=n.map((e=>({type:e}))))),{name:r,args:i}}return{}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/index.js"}],[223,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"networkConfigurations")&&(0,s.isObject)(e.NetworkController.networkConfigurations)){const{networkConfigurations:t}=e.NetworkController;for(const[e,r]of Object.entries(t))(0,s.isObject)(r)&&(r.chainId||delete t[e]);return e.NetworkController={...e.NetworkController,networkConfigurations:t},{...e,NetworkController:e.NetworkController}}var t,r;if((0,s.isObject)(e.NetworkController)){if(!(0,s.isObject)(e.NetworkController.networkConfigurations)){var n,i;null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error("typeof state.NetworkController.networkConfigurations is "+typeof e.NetworkController.networkConfigurations))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var s=e("@metamask/utils"),n=e("lodash");const i=r.version=91}}},{package:"$root$",file:"app/scripts/migrations/091.ts"}],[2230,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={1:"0x44691B39d1a75dC4E0A0346CBB15E310e6ED1E86"}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/registry-map.json"}],[2231,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={name:"@metamask/smart-transactions-controller",version:"11.0.0",description:"Improves success rates for swaps by trialing transactions privately and finding minimum fees",repository:{type:"git",url:"https://github.com/MetaMask/smart-transactions-controller.git"},license:"SEE LICENSE IN LICENSE",main:"dist/index.js",types:"dist/index.d.ts",files:["dist/"],scripts:{build:"tsc --project .","build:clean":"rm -rf dist && yarn build","build:link":"yarn build && cd dist && yarn link && rm -rf node_modules && cd ..",lint:"yarn lint:eslint && yarn lint:misc --check","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' '**/*.yml' '!.yarnrc.yml' --ignore-path .gitignore",prepack:"./scripts/prepack.sh",test:"jest","test:watch":"jest --watchAll"},dependencies:{"@babel/runtime":"^7.24.1","@ethereumjs/tx":"^5.2.1","@ethereumjs/util":"^9.0.2","@ethersproject/bytes":"^5.7.0","@metamask/base-controller":"^6.0.0","@metamask/controller-utils":"^11.0.0","@metamask/eth-json-rpc-provider":"^4.1.0","@metamask/eth-query":"^4.0.0","@metamask/network-controller":"^19.0.0","@metamask/polling-controller":"^8.0.0","@metamask/transaction-controller":"^34.0.0","bignumber.js":"^9.0.1",events:"^3.3.0","fast-json-patch":"^3.1.0",lodash:"^4.17.21"},devDependencies:{"@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"^3.1.0","@metamask/eslint-config":"^12.2.0","@metamask/eslint-config-jest":"^12.1.0","@metamask/eslint-config-nodejs":"^12.1.0","@metamask/eslint-config-typescript":"^12.1.0","@metamask/json-rpc-engine":"^9.0.0","@types/jest":"^26.0.24","@types/lodash":"^4.14.194","@types/node":"^18.19.17","@types/sinon":"^9.0.10","@typescript-eslint/eslint-plugin":"^5.33.0","@typescript-eslint/parser":"^5.33.0",eslint:"^8.48.0","eslint-config-prettier":"^8.8.0","eslint-plugin-import":"^2.27.5","eslint-plugin-jest":"^27.1.5","eslint-plugin-jsdoc":"^39.2.9","eslint-plugin-n":"^15.7.0","eslint-plugin-prettier":"^4.2.1","eslint-plugin-promise":"^6.1.1","isomorphic-fetch":"^3.0.0",jest:"^29.7.0",nock:"^14.0.0-beta.7",prettier:"^2.8.8","prettier-plugin-packagejson":"^2.4.3",sinon:"^9.2.4","ts-jest":"^29.1.4",typescript:"~4.8.4"},packageManager:"yarn@3.2.1",engines:{node:"^18.18 || >=20"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>keccak":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>secp256k1":!1,"@metamask/controller-utils>babel-runtime>core-js":!1,"@metamask/transaction-controller>@metamask/accounts-controller>@metamask/keyring-controller>ethereumjs-wallet>ethereum-cryptography>keccak":!1,"@metamask/transaction-controller>@metamask/accounts-controller>@metamask/keyring-controller>ethereumjs-wallet>ethereum-cryptography>secp256k1":!1}}}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/package.json"}],[2232,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=(e=>(e[e.Unverified=0]="Unverified",e[e.Blocked=1]="Blocked",e[e.Verified=2]="Verified",e[e.Unavailable=3]="Unavailable",e))(s||{});r.SnapsRegistryStatus=s}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4CA3O64H.js"}],[2233,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4URGXJP7.js"}],[2234,{"./chunk-EXN2TFDJ.js":2243,"./chunk-YYPUPKQY.js":2266,"@metamask/base-controller":2273,"@metamask/snaps-rpc-methods":2479,"@metamask/snaps-utils":2592,"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y,k,w=e("./chunk-YYPUPKQY.js"),b=e("./chunk-EXN2TFDJ.js"),T=e("@metamask/base-controller"),S=e("@metamask/snaps-rpc-methods"),E=e("@metamask/snaps-utils"),P=e("@metamask/utils"),I=class extends T.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{insights:{persist:!1,anonymous:!1}},name:"SnapInsightsController",state:{insights:{},...t}}),b.__privateAdd.call(void 0,this,s),b.__privateAdd.call(void 0,this,i),b.__privateAdd.call(void 0,this,o),b.__privateAdd.call(void 0,this,l),b.__privateAdd.call(void 0,this,d),b.__privateAdd.call(void 0,this,m),b.__privateAdd.call(void 0,this,f),b.__privateAdd.call(void 0,this,v),b.__privateAdd.call(void 0,this,y),this.messagingSystem.subscribe("TransactionController:unapprovedTransactionAdded",b.__privateMethod.call(void 0,this,o,c).bind(this)),this.messagingSystem.subscribe("TransactionController:transactionStatusUpdated",b.__privateMethod.call(void 0,this,m,p).bind(this)),this.messagingSystem.subscribe("SignatureController:stateChange",b.__privateMethod.call(void 0,this,l,u).bind(this))}};s=new WeakSet,n=function(e){return P.hasProperty.call(void 0,this.state.insights,e)},i=new WeakSet,a=function(e){const t=this.messagingSystem.call("SnapController:getAll");return w.getRunnableSnaps.call(void 0,t).reduce(((t,r)=>{const s=this.messagingSystem.call("PermissionController:getPermissions",r.id);return s&&P.hasProperty.call(void 0,s,e)&&t.push({snapId:r.id,permission:s[e]}),t}),[])},o=new WeakSet,c=function(e){const{id:t,txParams:r,chainId:s,origin:n}=e,o=`eip155:${parseInt(s,16)}`;b.__privateMethod.call(void 0,this,i,a).call(this,S.SnapEndowments.TransactionInsight).forEach((({snapId:e,permission:s})=>{const i=S.getTransactionOriginCaveat.call(void 0,s)&&n?n:null;this.update((r=>{var s;(s=r.insights)[t]??(s[t]={}),r.insights[t][e]={snapId:e,loading:!0}})),b.__privateMethod.call(void 0,this,v,_).call(this,{snapId:e,handler:E.HandlerType.OnTransaction,params:{transaction:r,chainId:o,transactionOrigin:i}}).then((r=>b.__privateMethod.call(void 0,this,y,k).call(this,{id:t,snapId:e,response:r}))).catch((r=>b.__privateMethod.call(void 0,this,y,k).call(this,{id:t,snapId:e,error:r})))}))},l=new WeakSet,u=function(e){for(const t of Object.keys(this.state.insights))P.hasProperty.call(void 0,e.unapprovedTypedMessages,t)||P.hasProperty.call(void 0,e.unapprovedPersonalMsgs,t)||b.__privateMethod.call(void 0,this,f,g).call(this,t);if(e.unapprovedPersonalMsgCount>0||e.unapprovedTypedMessagesCount>0){const t=b.__privateMethod.call(void 0,this,i,a).call(this,S.SnapEndowments.SignatureInsight);for(const r of Object.values(e.unapprovedPersonalMsgs))b.__privateMethod.call(void 0,this,d,h).call(this,t,r);for(const r of Object.values(e.unapprovedTypedMessages))b.__privateMethod.call(void 0,this,d,h).call(this,t,r)}},d=new WeakSet,h=function(e,t){const{id:r,msgParams:i}=t;if(b.__privateMethod.call(void 0,this,s,n).call(this,r))return;const{from:a,data:o,signatureMethod:c,origin:l}=i,u={from:a,data:"eth_signTypedData_v3"===c||"eth_signTypedData_v4"===c?JSON.parse(o):o,signatureMethod:c};e.forEach((({snapId:e,permission:t})=>{const s=S.getSignatureOriginCaveat.call(void 0,t),n=l&&s?l:null;this.update((t=>{var s;(s=t.insights)[r]??(s[r]={}),t.insights[r][e]={snapId:e,loading:!0}})),b.__privateMethod.call(void 0,this,v,_).call(this,{snapId:e,handler:E.HandlerType.OnSignature,params:{signature:u,signatureOrigin:n}}).then((t=>b.__privateMethod.call(void 0,this,y,k).call(this,{id:r,snapId:e,response:t}))).catch((t=>b.__privateMethod.call(void 0,this,y,k).call(this,{id:r,snapId:e,error:t})))}))},m=new WeakSet,p=function({transactionMeta:e}){"unapproved"!==e.status&&b.__privateMethod.call(void 0,this,f,g).call(this,e.id)},f=new WeakSet,g=function(e){b.__privateMethod.call(void 0,this,s,n).call(this,e)&&(Object.values(this.state.insights[e]).filter((e=>e.interfaceId)).forEach((e=>{this.messagingSystem.call("SnapInterfaceController:deleteInterface",e.interfaceId)})),this.update((t=>{delete t.insights[e]})))},v=new WeakSet,_=async function({snapId:e,handler:t,params:r}){return this.messagingSystem.call("SnapController:handleRequest",{snapId:e,origin:"",handler:t,request:{method:"",params:r}})},y=new WeakSet,k=function({id:e,snapId:t,response:r,error:s}){this.update((n=>{n.insights[e][t].loading=!1,n.insights[e][t].interfaceId=r?.id,n.insights[e][t].severity=r?.severity,n.insights[e][t].error=s?.message}))},r.SnapInsightsController=I}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-5O4O4BI5.js"}],[2235,{"./chunk-EXN2TFDJ.js":2243,"@metamask/post-message-stream":1939},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o=e("./chunk-EXN2TFDJ.js"),c=e("@metamask/post-message-stream"),l=class extends c.BasePostMessageStream{constructor({stream:e,jobId:t}){super(),o.__privateAdd.call(void 0,this,i),o.__privateAdd.call(void 0,this,s,void 0),o.__privateAdd.call(void 0,this,n,void 0),o.__privateSet.call(void 0,this,s,e),o.__privateSet.call(void 0,this,n,t),o.__privateGet.call(void 0,this,s).on("data",o.__privateMethod.call(void 0,this,i,a).bind(this))}_postMessage(e){o.__privateGet.call(void 0,this,s).write({jobId:o.__privateGet.call(void 0,this,n),data:e})}};s=new WeakMap,n=new WeakMap,i=new WeakSet,a=function(e){e.jobId===o.__privateGet.call(void 0,this,n)&&this.push(e.data)},r.ProxyPostMessageStream=l}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-7Y6P5FRN.js"}],[2236,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.RequestQueue=class{constructor(e){this.maxQueueSize=e,this.queueSizes=new Map}increment(e){const t=this.queueSizes.get(e)??0;if(t>=this.maxQueueSize)throw new Error("Maximum number of requests reached. Try again later.");this.queueSizes.set(e,t+1)}decrement(e){const t=this.queueSizes.get(e)??0;if(0===t)throw new Error(`Cannot decrement, ${e} does not have any outstanding requests.`);this.queueSizes.set(e,t-1)}get(e){return this.queueSizes.get(e)??0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-AP7CJ6DA.js"}],[2237,{"./chunk-BOFPNIRX.js":2239,"@metamask/snaps-sdk":2528,"@metamask/snaps-utils":2592,"fast-deep-equal":3902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n=e("./chunk-BOFPNIRX.js"),i=e("@metamask/snaps-sdk"),a=e("@metamask/snaps-utils"),o=e("fast-deep-equal"),c=(s=o)&&s.__esModule?s:{default:s};function l(e,t){let r;const s=new Promise(((s,n)=>{e.start((()=>{void 0===t?s():s(t)})),r=n}));return s.cancel=()=>{"finished"!==e.status&&(e.cancel(),r(new Error("The delay has been canceled.")))},s}var u=Symbol("Used to check if the requested promise has timeout (see withTimeout)");async function d(e,t){return t&&0!==t.length?await Promise.all(t.map((async t=>e.fetch(t)))):[]}r.setDiff=function(e,t){return Object.entries(e).reduce(((e,[r,s])=>(r in t||(e[r]=s),e)),{})},r.permissionsDiff=function(e,t){return Object.entries(e).reduce(((e,[r,s])=>{const n=r in t;return(!n||n&&!c.default.call(void 0,s.caveats??[],t[r].caveats??[]))&&(e[r]=s),e}),{})},r.delay=function(e,t){return l(new(0,n.Timer)(e),t)},r.delayWithTimer=l,r.hasTimedOut=u,r.withTimeout=async function(e,t){const r=l("number"==typeof t?new(0,n.Timer)(t):t,u);try{return await Promise.race([e,r])}finally{r.cancel()}},r.getSnapFiles=d,r.fetchSnap=async function(e,t){try{const e=await t.manifest(),r=await t.fetch(e.result.source.location.npm.filePath);i.assert.call(void 0,r.size<a.MAX_FILE_SIZE,"Snap source code must be smaller than 64 MB.");const{iconPath:s}=e.result.source.location.npm,n=s?await t.fetch(s):void 0,o=await d(t,e.result.source.files);a.validateAuxiliaryFiles.call(void 0,o),await Promise.all(o.map((async e=>{e.data.base64=await a.encodeBase64.call(void 0,e)})));const c=await d(t,e.result.source.locales),l={manifest:e,sourceCode:r,svgIcon:n,auxiliaryFiles:o,localizationFiles:a.getValidatedLocalizationFiles.call(void 0,c)};return await a.validateFetchedSnap.call(void 0,l),l}catch(t){throw new Error(`Failed to fetch snap "${e}": ${i.getErrorMessage.call(void 0,t)}.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-B6KTRDBK.js"}],[2238,{"@metamask/utils":2303,"@xstate/fsm":3191},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/utils"),n=e("@xstate/fsm");r.validateMachine=function(e){s.assert.call(void 0,"_options"in e,"The machine is not an @xstate/fsm machine");const t=e,r=new Set,n=e=>{return(t=e,Array.isArray(t)?t:null==t?[]:[t]).flatMap((e=>"string"==typeof e?[e]:(s.assert.call(void 0,"function"==typeof e),[]))).forEach(r.add.bind(r));var t};for(const e of Object.values(t.config.states)){n(e.entry),n(e.exit);for(const t of Object.values(e.on??{}))n(t.actions)}r.forEach((e=>s.assert.call(void 0,void 0!==t._options.actions&&e in t._options.actions,`Action "${e}" doesn't have an implementation`)))},r.forceStrict=function(e){let t=!1;e.subscribe((e=>{s.assert.call(void 0,!t||e.changed,"Invalid state transition"),t=!0}));const r=e.send.bind(e);e.send=(...t)=>(s.assert.call(void 0,e.status===n.InterpreterStatus.Running,"Interpreter is stopped"),r(...t))}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BO2ZDPWV.js"}],[2239,{"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/utils");r.Timer=class{constructor(e){s.assert.call(void 0,!Number.isNaN(e),new TypeError("Can't start a timer with NaN time")),s.assert.call(void 0,e>=0,new TypeError("Can't start a timer with negative time")),this.state={value:"stopped",remaining:e}}get status(){return this.state.value}get remaining(){return this.state.remaining}cancel(){s.assert.call(void 0,"paused"===this.status||"running"===this.status,new Error("Tried to cancel a not running Timer")),this.onFinish(!1)}finish(){s.assert.call(void 0,"finished"!==this.status,new Error("Tried to finish a finished Timer.")),this.onFinish(!0)}pause(){s.assert.call(void 0,"running"===this.state.value,new Error("Tried to pause a not running Timer"));const{callback:e,start:t,timeout:r,remaining:n}=this.state;void 0!==r&&clearTimeout(r),this.state={value:"paused",callback:e,remaining:n-(Date.now()-t)}}start(e){s.assert.call(void 0,"stopped"===this.state.value,new Error("Tried to start an already running Timer"));const{remaining:t}=this.state;this.state={value:"paused",remaining:t,callback:e},this.resume()}resume(){s.assert.call(void 0,"paused"===this.state.value,new Error("Tried to resume not paused Timer"));const{remaining:e,callback:t}=this.state,r=Date.now();let n;e!==Number.POSITIVE_INFINITY&&(n=setTimeout((()=>this.onFinish(!0)),e)),this.state={value:"running",callback:t,remaining:e,start:r,timeout:n}}onFinish(e){s.assert.call(void 0,"running"===this.state.value||"paused"===this.state.value),"running"===this.state.value&&void 0!==this.state.timeout&&clearTimeout(this.state.timeout);const{callback:t,remaining:r}=this.state;this.state={value:"finished",remaining:"running"===this.state.value?r-(Date.now()-this.state.start):r},e&&t()}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BOFPNIRX.js"}],[224,{"@metamask/utils":2787,lodash:4382,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,i.hasProperty)(e,"TokenListController"))return a.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,i.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,i.hasProperty)(e.TokenListController,"tokensChainsCache"))return a.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;e.TokenListController.tokensChainsCache===undefined&&delete e.TokenListController.tokensChainsCache;return e}(t.data),t},r.version=void 0;var s,n=e("lodash"),i=e("@metamask/utils"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=r.version=92.1}}},{package:"$root$",file:"app/scripts/migrations/092.1.ts"}],[2240,{"./chunk-EXN2TFDJ.js":2243,"@metamask/base-controller":2273,"@metamask/snaps-registry":2408,"@metamask/snaps-utils":2592,"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y,k,w,b,T,S,E,P,I,A,j=e("./chunk-EXN2TFDJ.js"),C=e("@metamask/base-controller"),x=e("@metamask/snaps-registry"),N=e("@metamask/snaps-utils"),R=e("@metamask/utils"),M={database:null,lastUpdated:null,databaseUnavailable:!1},B=class extends C.BaseController{constructor({messenger:e,state:t,url:r={registry:"https://acl.execution.metamask.io/latest/registry.json",signature:"https://acl.execution.metamask.io/latest/signature.json"},publicKey:u="0x025b65308f0f0fb8bc7f7ff87bfc296e0330eee5d3c1d1ee4a048b2fd6a86fa0a6",fetchFunction:p=globalThis.fetch.bind(globalThis),recentFetchThreshold:g=R.inMilliseconds.call(void 0,5,R.Duration.Minute),refetchOnAllowlistMiss:_=!0}){super({messenger:e,metadata:{database:{persist:!0,anonymous:!1},lastUpdated:{persist:!0,anonymous:!1},databaseUnavailable:{persist:!0,anonymous:!1}},name:"SnapsRegistry",state:{...M,...t}}),j.__privateAdd.call(void 0,this,l),j.__privateAdd.call(void 0,this,d),j.__privateAdd.call(void 0,this,m),j.__privateAdd.call(void 0,this,f),j.__privateAdd.call(void 0,this,v),j.__privateAdd.call(void 0,this,y),j.__privateAdd.call(void 0,this,w),j.__privateAdd.call(void 0,this,T),j.__privateAdd.call(void 0,this,E),j.__privateAdd.call(void 0,this,I),j.__privateAdd.call(void 0,this,s,void 0),j.__privateAdd.call(void 0,this,n,void 0),j.__privateAdd.call(void 0,this,i,void 0),j.__privateAdd.call(void 0,this,a,void 0),j.__privateAdd.call(void 0,this,o,void 0),j.__privateAdd.call(void 0,this,c,void 0),j.__privateSet.call(void 0,this,s,r),j.__privateSet.call(void 0,this,n,u),j.__privateSet.call(void 0,this,i,p),j.__privateSet.call(void 0,this,a,g),j.__privateSet.call(void 0,this,o,_),j.__privateSet.call(void 0,this,c,null),this.messagingSystem.registerActionHandler("SnapsRegistry:get",(async(...e)=>j.__privateMethod.call(void 0,this,y,k).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:getMetadata",(async(...e)=>j.__privateMethod.call(void 0,this,T,S).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:resolveVersion",(async(...e)=>j.__privateMethod.call(void 0,this,w,b).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:update",(async()=>j.__privateMethod.call(void 0,this,d,h).call(this)))}};s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakSet,u=function(){return this.state.lastUpdated&&Date.now()-this.state.lastUpdated<j.__privateGet.call(void 0,this,a)},d=new WeakSet,h=async function(){j.__privateGet.call(void 0,this,c)?await j.__privateGet.call(void 0,this,c):(null===j.__privateGet.call(void 0,this,c)&&j.__privateSet.call(void 0,this,c,j.__privateMethod.call(void 0,this,m,p).call(this)),await j.__privateGet.call(void 0,this,c),j.__privateSet.call(void 0,this,c,null))},m=new WeakSet,p=async function(){if(!j.__privateMethod.call(void 0,this,l,u).call(this))try{const e=await j.__privateMethod.call(void 0,this,I,A).call(this,j.__privateGet.call(void 0,this,s).registry),t=await j.__privateMethod.call(void 0,this,I,A).call(this,j.__privateGet.call(void 0,this,s).signature);j.__privateMethod.call(void 0,this,E,P).call(this,e,t),this.update((t=>{t.database=JSON.parse(e),t.lastUpdated=Date.now(),t.databaseUnavailable=!1}))}catch{this.update((e=>{e.databaseUnavailable=!0}))}},f=new WeakSet,g=async function(){return null===this.state.database&&await j.__privateMethod.call(void 0,this,d,h).call(this),this.state.database},v=new WeakSet,_=async function(e,t,r=!1){const s=await j.__privateMethod.call(void 0,this,f,g).call(this),n=s?.blockedSnaps.find((r=>"id"in r?r.id===e&&R.satisfiesVersionRange.call(void 0,t.version,r.versionRange):r.checksum===t.checksum));if(n)return{status:1,reason:n.reason};const i=s?.verifiedSnaps[e],a=i?.versions?.[t.version];return a&&a.checksum===t.checksum?{status:2}:j.__privateGet.call(void 0,this,o)&&!r?(await j.__privateMethod.call(void 0,this,d,h).call(this),j.__privateMethod.call(void 0,this,v,_).call(this,e,t,!0)):{status:this.state.databaseUnavailable?3:0}},y=new WeakSet,k=async function(e){return Object.entries(e).reduce((async(e,[t,r])=>{const s=await j.__privateMethod.call(void 0,this,v,_).call(this,t,r),n=await e;return n[t]=s,n}),Promise.resolve({}))},w=new WeakSet,b=async function(e,t,r=!1){const s=await j.__privateMethod.call(void 0,this,f,g).call(this),n=s?.verifiedSnaps[e]?.versions??null;if(!n&&j.__privateGet.call(void 0,this,o)&&!r)return await j.__privateMethod.call(void 0,this,d,h).call(this),j.__privateMethod.call(void 0,this,w,b).call(this,e,t,!0);if(!n)return t;const i=N.getTargetVersion.call(void 0,Object.keys(n),t);return i||!j.__privateGet.call(void 0,this,o)||r?i?(R.assertIsSemVerRange.call(void 0,i),i):t:(await j.__privateMethod.call(void 0,this,d,h).call(this),j.__privateMethod.call(void 0,this,w,b).call(this,e,t,!0))},T=new WeakSet,S=async function(e){const t=await j.__privateMethod.call(void 0,this,f,g).call(this);return t?.verifiedSnaps[e]?.metadata??null},E=new WeakSet,P=function(e,t){R.assert.call(void 0,j.__privateGet.call(void 0,this,n),"No public key provided.");const r=x.verify.call(void 0,{registry:e,signature:JSON.parse(t),publicKey:j.__privateGet.call(void 0,this,n)});R.assert.call(void 0,r,"Invalid registry signature.")},I=new WeakSet,A=async function(e){const t=await j.__privateGet.call(void 0,this,i).call(this,e);if(!t.ok)throw new Error(`Failed to fetch ${e}.`);return await t.text()},r.JsonSnapsRegistry=B}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-CPUUURMT.js"}],[2241,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-D74XJG2L.js"}],[2242,{"@metamask/snaps-sdk":2528,"@metamask/snaps-sdk/jsx":2532,"@metamask/snaps-utils":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/snaps-sdk"),n=e("@metamask/snaps-sdk/jsx"),i=e("@metamask/snaps-utils");function a(e,t){s.assert.call(void 0,void 0===e[t],`Duplicate component names are not allowed, found multiple instances of: "${t}".`)}function o(e,t,r){const s=r?e[r]:e,n=s?.[t.props.name];return"FileInput"===t.type?n??null:function(e){return"Checkbox"===e.type?e.props.checked:e.props.value}(t)??n??function(e){switch(e.type){case"Dropdown":{const t=i.getJsxChildren.call(void 0,e);return t[0]?.props.value}case"RadioGroup":{const t=i.getJsxChildren.call(void 0,e);return t[0]?.props.value}case"Checkbox":return!1;default:return null}}(t)??null}var c=1e6;r.getJsxInterface=function(e){return n.isJSXElementUnsafe.call(void 0,e)?e:i.getJsxElementFromComponent.call(void 0,e)},r.assertNameIsUnique=a,r.constructState=function(e,t){const r={},s=[];return i.walkJsx.call(void 0,t,((t,n)=>{let i=s[s.length-1];if(i&&n<=i.depth&&(s.pop(),i=s[s.length-1]),"Form"===t.type)return a(r,t.props.name),s.push({name:t.props.name,depth:n}),void(r[t.props.name]={});if(i&&("Input"===t.type||"Dropdown"===t.type||"RadioGroup"===t.type||"FileInput"===t.type||"Checkbox"===t.type)){const s=r[i.name];return a(s,t.props.name),void(s[t.props.name]=o(e,t,i.name))}"Input"!==t.type&&"Dropdown"!==t.type&&"RadioGroup"!==t.type&&"FileInput"!==t.type&&"Checkbox"!==t.type||(a(r,t.props.name),r[t.props.name]=o(e,t))})),r},r.validateInterfaceContext=function(e){if(!e)return;const t=i.getJsonSizeUnsafe.call(void 0,e);s.assert.call(void 0,t<=c,"A Snap interface context may not be larger than 1 MB.")}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-EVKVZUYY.js"}],[2243,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=(t=>void 0!==e?e:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,r)=>(void 0!==e?e:t)[r]}):t)((function(t){if(void 0!==e)return e.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')})),n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__require=s,r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-EXN2TFDJ.js"}],[2244,{"./chunk-AP7CJ6DA.js":2236,"./chunk-B6KTRDBK.js":2237,"./chunk-BO2ZDPWV.js":2238,"./chunk-BOFPNIRX.js":2239,"./chunk-EXN2TFDJ.js":2243,"./chunk-JQ54YYLU.js":2250,"./chunk-NXZVKBSV.js":2252,"./chunk-POQSARDG.js":2258,"@metamask/base-controller":2273,"@metamask/permission-controller":2292,"@metamask/rpc-errors":2006,"@metamask/snaps-rpc-methods":2479,"@metamask/snaps-sdk":2528,"@metamask/snaps-utils":2592,"@metamask/utils":2303,"@xstate/fsm":3191,nanoid:2315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-POQSARDG.js"),n=e("./chunk-AP7CJ6DA.js"),i=e("./chunk-JQ54YYLU.js"),a=e("./chunk-BO2ZDPWV.js"),o=e("./chunk-NXZVKBSV.js"),c=e("./chunk-B6KTRDBK.js"),l=e("./chunk-BOFPNIRX.js"),u=e("./chunk-EXN2TFDJ.js"),d=e("@metamask/base-controller"),h=e("@metamask/permission-controller"),m=e("@metamask/rpc-errors"),p=e("@metamask/snaps-rpc-methods"),f=e("@metamask/snaps-sdk"),g=e("@metamask/snaps-utils"),v=e("@metamask/utils"),_=e("@xstate/fsm"),y=e("nanoid"),k="SnapController",w="wallet_installSnap",b="wallet_updateSnap",T="wallet_installSnapResult",S=new Set(["initialPermissions","id","version","enabled","blocked"]),E={snaps:{},snapStates:{},unencryptedSnapStates:{}};function P(e){return Object.keys(e).reduce(((t,r)=>(S.has(r)&&(t[r]=e[r]),t)),{})}var I,A,j,C,x,N,R,M,B,O,L,G,F,D,H,U,$,W,V,K,J,q,z,Y,X,Q,Z,ee,te,re,se,ne,ie,ae,oe,ce,le,ue,de,he,me,pe,fe,ge,ve,_e,ye,ke,we,be,Te,Se,Ee,Pe,Ie,Ae,je,Ce,xe,Ne,Re,Me,Be,Oe,Le,Ge,Fe,De,He,Ue,$e,We,Ve,Ke,Je,qe,ze,Ye,Xe,Qe,Ze,et,tt,rt,st,nt,it,at,ot,ct,lt,ut,dt,ht,mt,pt,ft,gt,vt,_t,yt,kt,wt,bt,Tt,St,Et,Pt,It,At,jt,Ct,xt,Nt=class extends d.BaseController{constructor({closeAllConnections:e,messenger:t,state:r,dynamicPermissions:n=["eth_accounts"],environmentEndowmentPermissions:i=[],excludedPermissions:a={},idleTimeCheckInterval:o=v.inMilliseconds.call(void 0,5,v.Duration.Second),maxIdleTime:c=v.inMilliseconds.call(void 0,30,v.Duration.Second),maxRequestTime:l=v.inMilliseconds.call(void 0,60,v.Duration.Second),fetchFunction:d=globalThis.fetch.bind(globalThis),featureFlags:h={},detectSnapLocation:m=s.detectSnapLocation,preinstalledSnaps:p=null,encryptor:_,getMnemonic:y,getFeatureFlags:k=(()=>({}))}){super({messenger:t,metadata:{snapStates:{persist:!0,anonymous:!1},unencryptedSnapStates:{persist:!0,anonymous:!1},snaps:{persist:e=>Object.values(e).filter((e=>e.status!==g.SnapStatus.Installing)).map((e=>({...e,status:g.SnapStatus.Stopped}))).reduce(((e,t)=>(e[t.id]=t,e)),{}),anonymous:!1}},name:"SnapController",state:{...E,...r}}),u.__privateAdd.call(void 0,this,W),u.__privateAdd.call(void 0,this,K),u.__privateAdd.call(void 0,this,q),u.__privateAdd.call(void 0,this,Y),u.__privateAdd.call(void 0,this,Q),u.__privateAdd.call(void 0,this,ee),u.__privateAdd.call(void 0,this,re),u.__privateAdd.call(void 0,this,ne),u.__privateAdd.call(void 0,this,ae),u.__privateAdd.call(void 0,this,ce),u.__privateAdd.call(void 0,this,ue),u.__privateAdd.call(void 0,this,he),u.__privateAdd.call(void 0,this,pe),u.__privateAdd.call(void 0,this,ge),u.__privateAdd.call(void 0,this,_e),u.__privateAdd.call(void 0,this,ke),u.__privateAdd.call(void 0,this,be),u.__privateAdd.call(void 0,this,Se),u.__privateAdd.call(void 0,this,Pe),u.__privateAdd.call(void 0,this,Ae),u.__privateAdd.call(void 0,this,Ce),u.__privateAdd.call(void 0,this,Ne),u.__privateAdd.call(void 0,this,Me),u.__privateAdd.call(void 0,this,Oe),u.__privateAdd.call(void 0,this,Ge),u.__privateAdd.call(void 0,this,De),u.__privateAdd.call(void 0,this,Ue),u.__privateAdd.call(void 0,this,We),u.__privateAdd.call(void 0,this,Ke),u.__privateAdd.call(void 0,this,qe),u.__privateAdd.call(void 0,this,Ye),u.__privateAdd.call(void 0,this,Qe),u.__privateAdd.call(void 0,this,et),u.__privateAdd.call(void 0,this,rt),u.__privateAdd.call(void 0,this,nt),u.__privateAdd.call(void 0,this,at),u.__privateAdd.call(void 0,this,ct),u.__privateAdd.call(void 0,this,ut),u.__privateAdd.call(void 0,this,ht),u.__privateAdd.call(void 0,this,pt),u.__privateAdd.call(void 0,this,gt),u.__privateAdd.call(void 0,this,_t),u.__privateAdd.call(void 0,this,kt),u.__privateAdd.call(void 0,this,bt),u.__privateAdd.call(void 0,this,St),u.__privateAdd.call(void 0,this,Pt),u.__privateAdd.call(void 0,this,At),u.__privateAdd.call(void 0,this,Ct),u.__privateAdd.call(void 0,this,I,void 0),u.__privateAdd.call(void 0,this,A,void 0),u.__privateAdd.call(void 0,this,j,void 0),u.__privateAdd.call(void 0,this,C,void 0),u.__privateAdd.call(void 0,this,x,void 0),u.__privateAdd.call(void 0,this,N,void 0),u.__privateAdd.call(void 0,this,R,void 0),u.__privateAdd.call(void 0,this,M,void 0),u.__privateAdd.call(void 0,this,B,void 0),u.__privateAdd.call(void 0,this,O,void 0),u.__privateAdd.call(void 0,this,L,void 0),u.__privateAdd.call(void 0,this,G,void 0),u.__privateAdd.call(void 0,this,F,void 0),u.__privateAdd.call(void 0,this,D,void 0),u.__privateAdd.call(void 0,this,H,void 0),u.__privateAdd.call(void 0,this,U,void 0),u.__privateAdd.call(void 0,this,$,void 0),u.__privateSet.call(void 0,this,I,e),u.__privateSet.call(void 0,this,A,n),u.__privateSet.call(void 0,this,j,i),u.__privateSet.call(void 0,this,C,a),u.__privateSet.call(void 0,this,x,h),u.__privateSet.call(void 0,this,N,d),u.__privateSet.call(void 0,this,R,o),u.__privateSet.call(void 0,this,M,c),this.maxRequestTime=l,u.__privateSet.call(void 0,this,G,m),u.__privateSet.call(void 0,this,B,_),u.__privateSet.call(void 0,this,O,y),u.__privateSet.call(void 0,this,L,k),u.__privateSet.call(void 0,this,$,p),this._onUnhandledSnapError=this._onUnhandledSnapError.bind(this),this._onOutboundRequest=this._onOutboundRequest.bind(this),this._onOutboundResponse=this._onOutboundResponse.bind(this),u.__privateSet.call(void 0,this,D,new Map),u.__privateSet.call(void 0,this,F,new Map),u.__privateMethod.call(void 0,this,Y,X).call(this),this.messagingSystem.subscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.subscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.subscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.subscribe("SnapController:snapInstalled",(({id:e},t)=>{u.__privateMethod.call(void 0,this,Ct,xt).call(this,t,e,g.HandlerType.OnInstall).catch((t=>{g.logError.call(void 0,`Error when calling \`onInstall\` lifecycle hook for snap "${e}": ${f.getErrorMessage.call(void 0,t)}`)}))})),this.messagingSystem.subscribe("SnapController:snapUpdated",(({id:e},t,r)=>{u.__privateMethod.call(void 0,this,Ct,xt).call(this,r,e,g.HandlerType.OnUpdate).catch((t=>{g.logError.call(void 0,`Error when calling \`onUpdate\` lifecycle hook for snap "${e}": ${f.getErrorMessage.call(void 0,t)}`)}))})),u.__privateMethod.call(void 0,this,W,V).call(this),u.__privateMethod.call(void 0,this,K,J).call(this),u.__privateGet.call(void 0,this,$)&&u.__privateMethod.call(void 0,this,q,z).call(this,u.__privateGet.call(void 0,this,$)),Object.values(this.state?.snaps??{}).forEach((e=>u.__privateMethod.call(void 0,this,_t,yt).call(this,e.id)))}async updateBlockedSnaps(){u.__privateMethod.call(void 0,this,ae,oe).call(this),await this.messagingSystem.call("SnapsRegistry:update");const e=await this.messagingSystem.call("SnapsRegistry:get",Object.values(this.state.snaps).reduce(((e,t)=>(e[t.id]={version:t.version,checksum:t.manifest.source.shasum},e)),{}));await Promise.all(Object.entries(e).map((async([e,{status:t,reason:r}])=>1===t?u.__privateMethod.call(void 0,this,Q,Z).call(this,e,r):u.__privateMethod.call(void 0,this,ee,te).call(this,e))))}_onUnhandledSnapError(e,t){this.stopSnap(e,g.SnapStatusEvents.Crash).catch((e=>{g.logError.call(void 0,e)}))}_onOutboundRequest(e){const t=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);t.pendingInboundRequests.filter((e=>"running"===e.timer.status)).forEach((e=>e.timer.pause())),t.pendingOutboundRequests+=1}_onOutboundResponse(e){const t=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);t.pendingOutboundRequests-=1,0===t.pendingOutboundRequests&&t.pendingInboundRequests.filter((e=>"paused"===e.timer.status)).forEach((e=>e.timer.resume()))}async startSnap(e){u.__privateMethod.call(void 0,this,ae,oe).call(this);const t=this.state.snaps[e];if(!1===t.enabled)throw new Error(`Snap "${e}" is disabled.`);await u.__privateMethod.call(void 0,this,Oe,Le).call(this,{snapId:e,sourceCode:t.sourceCode})}enableSnap(e){if(this.getExpect(e),this.state.snaps[e].blocked)throw new Error(`Snap "${e}" is blocked and cannot be enabled.`);this.update((t=>{t.snaps[e].enabled=!0})),this.messagingSystem.publish("SnapController:snapEnabled",this.getTruncatedExpect(e))}async disableSnap(e){if(!this.has(e))throw new Error(`Snap "${e}" not found.`);this.update((t=>{t.snaps[e].enabled=!1})),this.isRunning(e)&&await this.stopSnap(e,g.SnapStatusEvents.Stop),this.messagingSystem.publish("SnapController:snapDisabled",this.getTruncatedExpect(e))}async stopSnap(e,t=g.SnapStatusEvents.Stop){var r;const s=u.__privateMethod.call(void 0,this,pt,ft).call(this,e);if(!s)throw new Error(`The snap "${e}" is not running.`);if(!s.stopping){s.stopping=!0;try{this.isRunning(e)&&(null==(r=u.__privateGet.call(void 0,this,I))||r.call(this,e),await u.__privateMethod.call(void 0,this,he,me).call(this,e))}finally{s.lastRequest=null,s.pendingInboundRequests=[],s.pendingOutboundRequests=0,s.stopping=!1,this.isRunning(e)&&u.__privateMethod.call(void 0,this,ue,de).call(this,e,t)}}}isRunning(e){return"running"===this.getExpect(e).status}has(e){return Boolean(this.get(e))}get(e){return this.state.snaps[e]}getExpect(e){const t=this.get(e);return v.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" not found.`)),t}getTruncated(e){const t=this.get(e);return t?P(t):null}getTruncatedExpect(e){return P(this.getExpect(e))}async updateSnapState(e,t,r){if(r){const r=await u.__privateMethod.call(void 0,this,_e,ye).call(this,e,t);this.update((t=>{t.snapStates[e]=r}))}else this.update((r=>{r.unencryptedSnapStates[e]=JSON.stringify(t)}))}clearSnapState(e,t){this.update((r=>{t?r.snapStates[e]=null:r.unencryptedSnapStates[e]=null}))}async getSnapState(e,t){const r=t?this.state.snapStates[e]:this.state.unencryptedSnapStates[e];if(null==r)return null;if(!t)return g.parseJson.call(void 0,r);return await u.__privateMethod.call(void 0,this,ge,ve).call(this,e,r)}async getSnapFile(e,t,r=f.AuxiliaryFileEncoding.Base64){const s=this.getExpect(e),n=g.normalizeRelative.call(void 0,t),i=s.auxiliaryFiles?.find((e=>e.path===n))?.value;if(!i)return null;const a=await g.encodeAuxiliaryFile.call(void 0,i,r);return v.assert.call(void 0,a.length<g.MAX_FILE_SIZE,`Failed to encode static file to "${r}": Static files must be less than 64 MB when encoded.`),a}async clearState(){const e=Object.keys(this.state.snaps);u.__privateGet.call(void 0,this,I)&&e.forEach((e=>{var t;null==(t=u.__privateGet.call(void 0,this,I))||t.call(this,e)})),await this.messagingSystem.call("ExecutionService:terminateAllSnaps"),e.forEach((e=>u.__privateMethod.call(void 0,this,Pe,Ie).call(this,e))),this.update((e=>{e.snaps={},e.snapStates={}})),u.__privateGet.call(void 0,this,F).clear(),u.__privateGet.call(void 0,this,$)&&(u.__privateMethod.call(void 0,this,q,z).call(this,u.__privateGet.call(void 0,this,$)),Object.values(this.state?.snaps).forEach((e=>u.__privateMethod.call(void 0,this,_t,yt).call(this,e.id))))}async removeSnap(e){return this.removeSnaps([e])}async removeSnaps(e){if(!Array.isArray(e))throw new Error("Expected array of snap ids.");e.forEach((e=>{const t=this.getExpect(e);v.assert.call(void 0,!1!==t.removable,`${e} is not removable.`)})),await Promise.all(e.map((async e=>{const t=this.getExpect(e),r=this.getTruncatedExpect(e);await this.disableSnap(e),u.__privateMethod.call(void 0,this,Pe,Ie).call(this,e),u.__privateMethod.call(void 0,this,Se,Ee).call(this,e),u.__privateGet.call(void 0,this,F).delete(e),this.update((t=>{delete t.snaps[e],delete t.snapStates[e],delete t.unencryptedSnapStates[e]})),t.status!==g.SnapStatus.Installing&&this.messagingSystem.publish("SnapController:snapUninstalled",r)})))}removeSnapFromSubject(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e),s=r?.[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds));if(!s)return;if(Boolean(s.value?.[t])){const r={...s.value};delete r[t],Object.keys(r).length>0?this.messagingSystem.call("PermissionController:updateCaveat",e,p.WALLET_SNAP_PERMISSION_KEY,g.SnapCaveatType.SnapIds,r):this.messagingSystem.call("PermissionController:revokePermissions",{[e]:[p.WALLET_SNAP_PERMISSION_KEY]})}}revokeDynamicSnapPermissions(e,t){v.assert.call(void 0,t.every((e=>u.__privateGet.call(void 0,this,A).includes(e))),"Non-dynamic permissions cannot be revoked"),this.messagingSystem.call("PermissionController:revokePermissions",{[e]:t})}incrementActiveReferences(e){u.__privateMethod.call(void 0,this,gt,vt).call(this,e).activeReferences+=1}decrementActiveReferences(e){const t=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);v.assert.call(void 0,t.activeReferences>0,"SnapController reference management is in an invalid state."),t.activeReferences-=1}getAllSnaps(){return Object.values(this.state.snaps).map(P)}getPermittedSnaps(e){const t=this.messagingSystem.call("PermissionController:getPermissions",e)??{},r=t[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds))?.value??{};return Object.keys(r).reduce(((e,t)=>{const r=this.get(t),s=this.getTruncated(t);return s&&r?.status!==g.SnapStatus.Installing&&(e[t]=s),e}),{})}async installSnaps(e,t){u.__privateMethod.call(void 0,this,ae,oe).call(this);const r={},s=Object.keys(t),n=[],i=[];try{for(const[s,{version:a}]of Object.entries(t)){g.assertIsValidSnapId.call(void 0,s);const[t,o]=g.resolveVersionRange.call(void 0,a);if(t)throw m.rpcErrors.invalidParams(`The "version" field must be a valid SemVer version range if specified. Received: "${a}".`);const c=u.__privateGet.call(void 0,this,G).call(this,s,{versionRange:o,fetch:u.__privateGet.call(void 0,this,N),allowLocal:u.__privateGet.call(void 0,this,x).allowLocalSnaps,resolveVersion:async e=>u.__privateGet.call(void 0,this,x).requireAllowlist?await u.__privateMethod.call(void 0,this,Ne,Re).call(this,s,e):e}),l=this.has(s)&&!c.shouldAlwaysReload;if(l&&u.__privateMethod.call(void 0,this,At,jt).call(this,s,o)){const e=this.getExpect(s);n.push({snapId:s,oldVersion:e.version});let t=u.__privateMethod.call(void 0,this,at,ot).call(this,s);if(void 0!==t)throw new Error("This snap is already being updated.");t=u.__privateMethod.call(void 0,this,ct,lt).call(this,s),t.newVersion=o}else l||i.push(s);r[s]=await this.processRequestedSnap(e,s,c,o)}i.forEach((t=>this.messagingSystem.publish("SnapController:snapInstalled",this.getTruncatedExpect(t),e))),n.forEach((({snapId:t,oldVersion:r})=>this.messagingSystem.publish("SnapController:snapUpdated",this.getTruncatedExpect(t),r,e))),s.forEach((e=>u.__privateGet.call(void 0,this,D).delete(e)))}catch(e){const t=i.filter((e=>this.has(e)));await this.removeSnaps(t);const r=[...u.__privateGet.call(void 0,this,D).keys()],s=n.map((({snapId:e})=>e)).filter((e=>r.includes(e)));throw await u.__privateMethod.call(void 0,this,ht,mt).call(this,s),e}return r}async processRequestedSnap(e,t,r,s){const n=this.getTruncated(t);if(n&&!r.shouldAlwaysReload)return v.satisfiesVersionRange.call(void 0,n.version,s)?n:await this.updateSnap(e,t,r,s,!1);u.__privateMethod.call(void 0,this,ne,ie).call(this);let i=u.__privateMethod.call(void 0,this,Ae,je).call(this,{origin:e,snapId:t,type:w});this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!1),n&&this.isRunning(t)&&await this.stopSnap(t,g.SnapStatusEvents.Stop),n&&r.shouldAlwaysReload&&u.__privateMethod.call(void 0,this,Pe,Ie).call(this,t);try{const{sourceCode:n}=await u.__privateMethod.call(void 0,this,Me,Be).call(this,{origin:e,id:t,location:r,versionRange:s});await this.authorize(t,i),i=u.__privateMethod.call(void 0,this,Ae,je).call(this,{origin:e,snapId:t,type:T}),await u.__privateMethod.call(void 0,this,Oe,Le).call(this,{snapId:t,sourceCode:n});const a=this.getTruncatedExpect(t);return u.__privateMethod.call(void 0,this,Ce,xe).call(this,i.id,{loading:!1,type:w}),a}catch(r){g.logError.call(void 0,`Error when adding ${t}.`,r);const s=r instanceof Error?r.message:r.toString();throw u.__privateMethod.call(void 0,this,Ce,xe).call(this,i.id,{loading:!1,type:w,error:s}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!1,s),r}}async updateSnap(e,t,r,s=g.DEFAULT_REQUESTED_SNAP_VERSION,n=!0){if(u.__privateMethod.call(void 0,this,ne,ie).call(this),u.__privateMethod.call(void 0,this,ae,oe).call(this),!v.isValidSemVerRange.call(void 0,s))throw new Error(`Received invalid snap version range: "${s}".`);let i=u.__privateMethod.call(void 0,this,Ae,je).call(this,{origin:e,snapId:t,type:b});try{this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!0);const a=this.getExpect(t),o=a.manifest,l=await c.fetchSnap.call(void 0,t,r),{sourceCode:d,manifest:h}=l,f=h.result,_=f.version;if(!v.gtVersion.call(void 0,_,a.version))throw m.rpcErrors.invalidParams(`Snap "${t}@${a.version}" is already installed. Couldn't update to a version inside requested "${s}" range.`);if(!v.satisfiesVersionRange.call(void 0,_,s))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${_}" which doesn't satisfy requested version range "${s}".`);await u.__privateMethod.call(void 0,this,re,se).call(this,t,{version:_,checksum:f.source.shasum,permissions:f.initialPermissions});const y=p.processSnapPermissions.call(void 0,f.initialPermissions);u.__privateMethod.call(void 0,this,Ue,$e).call(this,y);const{newPermissions:k,unusedPermissions:w,approvedPermissions:S}=u.__privateMethod.call(void 0,this,kt,wt).call(this,t,y),{newConnections:E,unusedConnections:P,approvedConnections:I}=u.__privateMethod.call(void 0,this,St,Et).call(this,t,o.initialConnections??{},f.initialConnections??{});u.__privateMethod.call(void 0,this,Ce,xe).call(this,i.id,{permissions:k,newVersion:f.version,newPermissions:k,approvedPermissions:S,unusedPermissions:w,newConnections:E,unusedConnections:P,approvedConnections:I,loading:!1});const{permissions:A,...j}=await i.promise;i=u.__privateMethod.call(void 0,this,Ae,je).call(this,{origin:e,snapId:t,type:T}),this.isRunning(t)&&await this.stopSnap(t,g.SnapStatusEvents.Stop),u.__privateMethod.call(void 0,this,ue,de).call(this,t,g.SnapStatusEvents.Update),u.__privateMethod.call(void 0,this,De,He).call(this,{origin:e,id:t,files:l,isUpdate:!0}),u.__privateMethod.call(void 0,this,Pt,It).call(this,{snapId:t,unusedPermissions:w,newPermissions:A,requestData:j}),f.initialConnections&&u.__privateMethod.call(void 0,this,ke,we).call(this,t,o.initialConnections??null,f.initialConnections);const C=u.__privateMethod.call(void 0,this,at,ot).call(this,t);void 0!==C&&(C.permissions.revoked=w,C.permissions.granted=A,C.permissions.requestData=j);const x=d.toString();v.assert.call(void 0,"string"==typeof x&&x.length>0,`Invalid source code for snap "${t}".`);try{await u.__privateMethod.call(void 0,this,Oe,Le).call(this,{snapId:t,sourceCode:x})}catch{throw new Error(`Snap ${t} crashed with updated source code.`)}const N=this.getTruncatedExpect(t);return n&&this.messagingSystem.publish("SnapController:snapUpdated",N,a.version,e),u.__privateMethod.call(void 0,this,Ce,xe).call(this,i.id,{loading:!1,type:b}),N}catch(r){g.logError.call(void 0,`Error when updating ${t},`,r);const s=r instanceof Error?r.message:r.toString();throw u.__privateMethod.call(void 0,this,Ce,xe).call(this,i.id,{loading:!1,error:s,type:b}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!0,s),r}}async getRegistryMetadata(e){return u.__privateMethod.call(void 0,this,ae,oe).call(this),await this.messagingSystem.call("SnapsRegistry:getMetadata",e)}async authorize(e,t){o.log.call(void 0,`Authorizing snap: ${e}`);const r=this.state.snaps[e],{initialPermissions:s,initialConnections:n}=r;try{const i=p.processSnapPermissions.call(void 0,s);u.__privateMethod.call(void 0,this,Ue,$e).call(this,i),u.__privateMethod.call(void 0,this,Ce,xe).call(this,t.id,{loading:!1,connections:n??{},permissions:i});const{permissions:a,...o}=await t.promise;u.__privateMethod.call(void 0,this,Pt,It).call(this,{snapId:e,newPermissions:a,requestData:o}),r.manifest.initialConnections&&u.__privateMethod.call(void 0,this,ke,we).call(this,e,null,r.manifest.initialConnections)}finally{u.__privateMethod.call(void 0,this,gt,vt).call(this,e).installPromise=null}}destroy(){super.destroy(),u.__privateGet.call(void 0,this,H)&&clearTimeout(u.__privateGet.call(void 0,this,H)),this.messagingSystem.unsubscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.unsubscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.unsubscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.clearEventSubscriptions("SnapController:snapInstalled"),this.messagingSystem.clearEventSubscriptions("SnapController:snapUpdated")}async handleRequest({snapId:e,origin:t,handler:r,request:s}){u.__privateMethod.call(void 0,this,ae,oe).call(this);const n={jsonrpc:"2.0",id:y.nanoid.call(void 0),...s};v.assertIsJsonRpcRequest.call(void 0,n);const i=p.handlerEndowments[r];v.assert.call(void 0,"string"==typeof i||null===i,"'permissionName' must be either a string or null.");const a=this.messagingSystem.call("PermissionController:getPermissions",e);if(!(null===i||a&&v.hasProperty.call(void 0,a,i)))throw new Error(`Snap "${e}" is not permitted to use "${i}".`);const o=i?a[i]:void 0;if(i===p.SnapEndowments.Rpc||i===p.SnapEndowments.Keyring){v.assert.call(void 0,o);const r=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",t),s=i===p.SnapEndowments.Rpc?p.getRpcCaveatOrigins.call(void 0,o):p.getKeyringCaveatOrigins.call(void 0,o);if(v.assert.call(void 0,s),!g.isOriginAllowed.call(void 0,s,r?.subjectType??h.SubjectType.Website,t))throw new Error(`Snap "${e}" is not permitted to handle requests from "${t}".`)}const c=u.__privateMethod.call(void 0,this,Ke,Je).call(this,e);if(!c)throw new Error(`Snap RPC message handler not found for snap "${e}".`);return c({origin:t,handler:r,request:n,timeout:u.__privateMethod.call(void 0,this,We,Ve).call(this,o)})}};I=new WeakMap,A=new WeakMap,j=new WeakMap,C=new WeakMap,x=new WeakMap,N=new WeakMap,R=new WeakMap,M=new WeakMap,B=new WeakMap,O=new WeakMap,L=new WeakMap,G=new WeakMap,F=new WeakMap,D=new WeakMap,H=new WeakMap,U=new WeakMap,$=new WeakMap,W=new WeakSet,V=function(){const e=({snapId:e})=>this.getExpect(e).enabled,t={initial:g.SnapStatus.Installing,states:{[g.SnapStatus.Installing]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e}}},[g.SnapStatus.Updating]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Stop]:g.SnapStatus.Stopped}},[g.SnapStatus.Running]:{on:{[g.SnapStatusEvents.Stop]:g.SnapStatus.Stopped,[g.SnapStatusEvents.Crash]:g.SnapStatus.Crashed}},[g.SnapStatus.Stopped]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Update]:g.SnapStatus.Updating}},[g.SnapStatus.Crashed]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Update]:g.SnapStatus.Updating}}}};u.__privateSet.call(void 0,this,U,_.createMachine.call(void 0,t)),a.validateMachine.call(void 0,u.__privateGet.call(void 0,this,U))},K=new WeakSet,J=function(){this.messagingSystem.registerActionHandler(`${k}:clearSnapState`,((...e)=>this.clearSnapState(...e))),this.messagingSystem.registerActionHandler(`${k}:get`,((...e)=>this.get(...e))),this.messagingSystem.registerActionHandler(`${k}:getSnapState`,(async(...e)=>this.getSnapState(...e))),this.messagingSystem.registerActionHandler(`${k}:handleRequest`,(async(...e)=>this.handleRequest(...e))),this.messagingSystem.registerActionHandler(`${k}:has`,((...e)=>this.has(...e))),this.messagingSystem.registerActionHandler(`${k}:updateBlockedSnaps`,(async()=>this.updateBlockedSnaps())),this.messagingSystem.registerActionHandler(`${k}:updateSnapState`,(async(...e)=>this.updateSnapState(...e))),this.messagingSystem.registerActionHandler(`${k}:enable`,((...e)=>this.enableSnap(...e))),this.messagingSystem.registerActionHandler(`${k}:disable`,(async(...e)=>this.disableSnap(...e))),this.messagingSystem.registerActionHandler(`${k}:remove`,(async(...e)=>this.removeSnap(...e))),this.messagingSystem.registerActionHandler(`${k}:getPermitted`,((...e)=>this.getPermittedSnaps(...e))),this.messagingSystem.registerActionHandler(`${k}:install`,(async(...e)=>this.installSnaps(...e))),this.messagingSystem.registerActionHandler(`${k}:getAll`,((...e)=>this.getAllSnaps(...e))),this.messagingSystem.registerActionHandler(`${k}:incrementActiveReferences`,((...e)=>this.incrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${k}:decrementActiveReferences`,((...e)=>this.decrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${k}:getRegistryMetadata`,(async(...e)=>this.getRegistryMetadata(...e))),this.messagingSystem.registerActionHandler(`${k}:disconnectOrigin`,((...e)=>this.removeSnapFromSubject(...e))),this.messagingSystem.registerActionHandler(`${k}:revokeDynamicPermissions`,((...e)=>this.revokeDynamicSnapPermissions(...e))),this.messagingSystem.registerActionHandler(`${k}:getFile`,(async(...e)=>this.getSnapFile(...e)))},q=new WeakSet,z=function(e){for(const{snapId:t,manifest:r,files:s,removable:n,hidden:i}of e){const e=this.get(t),a=void 0!==e,o=a&&v.gtVersion.call(void 0,r.version,e.version);if(a&&(!o||!0!==e.preinstalled))continue;const c=new(0,g.VirtualFile)({path:g.NpmSnapFileNames.Manifest,value:JSON.stringify(r),result:r}),l=s.map((({path:e,value:t})=>new(0,g.VirtualFile)({value:t,path:e}))),{filePath:d,iconPath:h}=r.source.location.npm,m=l.find((e=>e.path===d)),f=h?l.find((e=>e.path===h)):void 0;v.assert.call(void 0,m,"Source code not provided for preinstalled snap."),v.assert.call(void 0,!h||h&&f,"Icon not provided for preinstalled snap."),v.assert.call(void 0,void 0===r.source.files,"Auxiliary files are not currently supported for preinstalled snaps.");const _=r.source.locales?.map((e=>l.find((t=>t.path===e))))??[],y=g.getValidatedLocalizationFiles.call(void 0,_.filter(Boolean));v.assert.call(void 0,_.length===y.length,"Missing localization files for preinstalled snap.");const k={manifest:c,sourceCode:m,svgIcon:f,auxiliaryFiles:[],localizationFiles:y};u.__privateMethod.call(void 0,this,De,He).call(this,{id:t,origin:"metamask",files:k,removable:n,hidden:i,preinstalled:!0});const w=p.processSnapPermissions.call(void 0,r.initialPermissions);u.__privateMethod.call(void 0,this,Ue,$e).call(this,w);const{newPermissions:b,unusedPermissions:T}=u.__privateMethod.call(void 0,this,kt,wt).call(this,t,w);u.__privateMethod.call(void 0,this,Pt,It).call(this,{snapId:t,newPermissions:b,unusedPermissions:T}),r.initialConnections&&u.__privateMethod.call(void 0,this,ke,we).call(this,t,e?.initialConnections??null,r.initialConnections),this.update((e=>{e.snaps[t].status=g.SnapStatus.Stopped}))}},Y=new WeakSet,X=function(){u.__privateSet.call(void 0,this,H,setTimeout((()=>{u.__privateMethod.call(void 0,this,ce,le).call(this).catch((e=>{g.logError.call(void 0,e)})),u.__privateMethod.call(void 0,this,Y,X).call(this)}),u.__privateGet.call(void 0,this,R)))},Q=new WeakSet,Z=async function(e,t){if(this.has(e)){try{this.update((r=>{r.snaps[e].blocked=!0,r.snaps[e].blockInformation=t})),await this.disableSnap(e)}catch(t){g.logError.call(void 0,`Encountered error when stopping blocked snap "${e}".`,t)}this.messagingSystem.publish(`${k}:snapBlocked`,e,t)}},ee=new WeakSet,te=function(e){this.has(e)&&this.state.snaps[e].blocked&&(this.update((t=>{t.snaps[e].blocked=!1,delete t.snaps[e].blockInformation})),this.messagingSystem.publish(`${k}:snapUnblocked`,e))},re=new WeakSet,se=async function(e,t){const r=(await this.messagingSystem.call("SnapsRegistry:get",{[e]:t}))[e];if(1===r.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": The version is blocked. ${r.reason?.explanation??""}`);const s=Object.keys(t.permissions).some((e=>!i.ALLOWED_PERMISSIONS.includes(e)));if(u.__privateGet.call(void 0,this,x).requireAllowlist&&s&&2!==r.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": ${3===r.status?"The registry is temporarily unavailable.":"The snap is not on the allowlist."}`)},ne=new WeakSet,ie=function(){v.assert.call(void 0,!0!==u.__privateGet.call(void 0,this,x).disableSnapInstallation,"Installing Snaps is currently disabled in this version of MetaMask.")},ae=new WeakSet,oe=function(){const e=u.__privateGet.call(void 0,this,L).call(this);v.assert.call(void 0,!0!==e.disableSnaps,"The Snaps platform requires basic functionality to be used. Enable basic functionality in the settings to use the Snaps platform.")},ce=new WeakSet,le=async function(){const e=[...u.__privateGet.call(void 0,this,F).entries()];return Promise.all(e.filter((([e,t])=>0===t.activeReferences&&0===t.pendingInboundRequests.length&&t.lastRequest&&u.__privateGet.call(void 0,this,M)&&v.timeSince.call(void 0,t.lastRequest)>u.__privateGet.call(void 0,this,M))).map((async([e])=>this.stopSnap(e,g.SnapStatusEvents.Stop))))},ue=new WeakSet,de=function(e,t){const{interpreter:r}=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);r.send(t),this.update((t=>{t.snaps[e].status=r.state.value}))},he=new WeakSet,me=async function(e){await this.messagingSystem.call("ExecutionService:terminateSnap",e),await new Promise((e=>setTimeout(e,1)));u.__privateMethod.call(void 0,this,gt,vt).call(this,e).pendingInboundRequests.filter((e=>"finished"!==e.timer.status)).forEach((e=>e.timer.finish())),await new Promise((e=>setTimeout(e,1))),this.messagingSystem.publish("SnapController:snapTerminated",this.getTruncatedExpect(e))},pe=new WeakSet,fe=async function({snapId:e,salt:t,useCache:r,keyMetadata:s}){const n=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);if(n.encryptionKey&&n.encryptionSalt&&r)return{key:await u.__privateGet.call(void 0,this,B).importKey(n.encryptionKey),salt:n.encryptionSalt};const i=t??u.__privateGet.call(void 0,this,B).generateSalt(),a=await u.__privateGet.call(void 0,this,O).call(this),o=await p.getEncryptionEntropy.call(void 0,{snapId:e,mnemonicPhrase:a}),c=await u.__privateGet.call(void 0,this,B).keyFromPassword(o,i,!0,s),l=await u.__privateGet.call(void 0,this,B).exportKey(c);return r&&(n.encryptionKey=l,n.encryptionSalt=i),{key:c,salt:i}},ge=new WeakSet,ve=async function(e,t){try{const r=g.parseJson.call(void 0,t),{salt:s,keyMetadata:n}=r,a=u.__privateGet.call(void 0,this,B).isVaultUpdated(t),{key:o}=await u.__privateMethod.call(void 0,this,pe,fe).call(this,{snapId:e,salt:s,useCache:a,keyMetadata:n??i.LEGACY_ENCRYPTION_KEY_DERIVATION_OPTIONS}),c=await u.__privateGet.call(void 0,this,B).decryptWithKey(o,r);return v.assert.call(void 0,v.isValidJson.call(void 0,c)),c}catch{throw m.rpcErrors.internal({message:"Failed to decrypt snap state, the state must be corrupted."})}},_e=new WeakSet,ye=async function(e,t){const{key:r,salt:s}=await u.__privateMethod.call(void 0,this,pe,fe).call(this,{snapId:e,useCache:!0}),n=await u.__privateGet.call(void 0,this,B).encryptWithKey(r,t);return n.salt=s,JSON.stringify(n)},ke=new WeakSet,we=function(e,t,r){if(t){const s=c.setDiff.call(void 0,t,r);for(const t of Object.keys(s))this.removeSnapFromSubject(t,e)}for(const t of Object.keys(r))u.__privateMethod.call(void 0,this,be,Te).call(this,t,e)},be=new WeakSet,Te=function(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e),s=r?.[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds));if(Boolean(s?.value?.[t]))return;if(s)return void this.messagingSystem.call("PermissionController:updateCaveat",e,p.WALLET_SNAP_PERMISSION_KEY,g.SnapCaveatType.SnapIds,{...s.value,[t]:{}});const n={[p.WALLET_SNAP_PERMISSION_KEY]:{caveats:[{type:g.SnapCaveatType.SnapIds,value:{[t]:{}}}]}};this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:n,subject:{origin:e}})},Se=new WeakSet,Ee=function(e){const t=this.messagingSystem.call("PermissionController:getSubjectNames");for(const r of t)this.removeSnapFromSubject(r,e)},Pe=new WeakSet,Ie=function(e){this.messagingSystem.call("PermissionController:hasPermissions",e)&&this.messagingSystem.call("PermissionController:revokeAllPermissions",e)},Ae=new WeakSet,je=function({origin:e,snapId:t,type:r}){const s=y.nanoid.call(void 0);return{id:s,promise:this.messagingSystem.call("ApprovalController:addRequest",{origin:e,id:s,type:r,requestData:{metadata:{id:s,origin:t,dappOrigin:e},snapId:t},requestState:{loading:!0}},!0)}},Ce=new WeakSet,xe=function(e,t){try{this.messagingSystem.call("ApprovalController:updateRequestState",{id:e,requestState:t})}catch{}},Ne=new WeakSet,Re=async function(e,t){return await this.messagingSystem.call("SnapsRegistry:resolveVersion",e,t)},Me=new WeakSet,Be=async function(e){const{id:t,location:r,versionRange:s}=e;u.__privateMethod.call(void 0,this,_t,yt).call(this,t);const n=u.__privateMethod.call(void 0,this,gt,vt).call(this,t);n.installPromise||(o.log.call(void 0,`Adding snap: ${t}`),n.installPromise=(async()=>{const n=await c.fetchSnap.call(void 0,t,r),i=n.manifest.result;if(!v.satisfiesVersionRange.call(void 0,i.version,s))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${i.version}" which doesn't satisfy requested version range "${s}".`);return await u.__privateMethod.call(void 0,this,re,se).call(this,t,{version:i.version,checksum:i.source.shasum,permissions:i.initialPermissions}),u.__privateMethod.call(void 0,this,De,He).call(this,{...e,files:n,id:t})})());try{return await n.installPromise}catch(e){throw n.installPromise=null,e}},Oe=new WeakSet,Le=async function(e){const{snapId:t}=e;if(this.isRunning(t))throw new Error(`Snap "${t}" is already started.`);try{const r=u.__privateMethod.call(void 0,this,gt,vt).call(this,t),s=await this.messagingSystem.call("ExecutionService:executeSnap",{...e,endowments:await u.__privateMethod.call(void 0,this,Ge,Fe).call(this,t)});return u.__privateMethod.call(void 0,this,ue,de).call(this,t,g.SnapStatusEvents.Start),r.lastRequest=Date.now(),s}catch(e){throw await u.__privateMethod.call(void 0,this,he,me).call(this,t),e}},Ge=new WeakSet,Fe=async function(e){let t=[];for(const r of u.__privateGet.call(void 0,this,j))if(this.messagingSystem.call("PermissionController:hasPermission",e,r)){const s=await this.messagingSystem.call("PermissionController:getEndowments",e,r);if(s){if(!Array.isArray(s)||s.some((e=>"string"!=typeof e)))throw new Error("Expected an array of string endowment names.");t=t.concat(s)}}const r=[...new Set([...g.DEFAULT_ENDOWMENTS,...t])];return r.length<g.DEFAULT_ENDOWMENTS.length+t.length&&g.logError.call(void 0,`Duplicate endowments found for ${e}. Default endowments should not be requested.`,t),r},De=new WeakSet,He=function(e){const{id:t,origin:r,files:s,isUpdate:n=!1,removable:i,preinstalled:a,hidden:o}=e,{manifest:c,sourceCode:l,svgIcon:d,auxiliaryFiles:m,localizationFiles:p}=s;g.assertIsSnapManifest.call(void 0,c.result);const{version:f}=c.result,_=l.toString();v.assert.call(void 0,"string"==typeof _&&_.length>0,`Invalid source code for snap "${t}".`);const y=m.map((e=>(v.assert.call(void 0,"string"==typeof e.data.base64),{path:e.path,value:e.data.base64}))),k=this.state.snaps[t],w=[...k?.versionHistory??[],{version:f,date:Date.now(),origin:r}],b=p.map((e=>e.result)),T={...k,blocked:!1,enabled:!0,removable:i,preinstalled:a,hidden:o,id:t,initialConnections:c.result.initialConnections,initialPermissions:c.result.initialPermissions,manifest:c.result,status:u.__privateGet.call(void 0,this,U).config.initial,sourceCode:_,version:f,versionHistory:w,auxiliaryFiles:y,localizationFiles:b};delete T.blockInformation;const{inversePatches:S}=this.update((e=>{e.snaps[t]=T}));if(n){const e=u.__privateMethod.call(void 0,this,at,ot).call(this,t);void 0!==e&&(e.statePatches=S)}const{proposedName:E}=g.getLocalizedSnapManifest.call(void 0,c.result,"en",b);return this.messagingSystem.call("SubjectMetadataController:addSubjectMetadata",{subjectType:h.SubjectType.Snap,name:E,origin:T.id,version:f,svgIcon:d?.toString()??null}),{...T,sourceCode:_}},Ue=new WeakSet,$e=function(e){const t=Object.keys(e),r=Array.from(new Set(Object.values(p.handlerEndowments)));v.assert.call(void 0,t.some((e=>r.includes(e))),`A snap must request at least one of the following permissions: ${r.filter((e=>null!==e)).join(", ")}.`);const s=t.reduce(((e,t)=>(v.hasProperty.call(void 0,u.__privateGet.call(void 0,this,C),t)&&e.push(u.__privateGet.call(void 0,this,C)[t]),e)),[]);v.assert.call(void 0,0===s.length,`One or more permissions are not allowed:\n${s.join("\n")}`)},We=new WeakSet,Ve=function(e){return p.getMaxRequestTimeCaveat.call(void 0,e)??this.maxRequestTime},Ke=new WeakSet,Je=function(e){const t=u.__privateMethod.call(void 0,this,gt,vt).call(this,e),r=t.rpcHandler;if(r)return r;const s=new(0,n.RequestQueue)(5),i=new Map,a=async({origin:t,handler:r,request:n,timeout:a})=>{if(!1===this.state.snaps[e].enabled)throw new Error(`Snap "${e}" is disabled.`);if(this.state.snaps[e].status===g.SnapStatus.Installing)throw new Error(`Snap "${e}" is currently being installed. Please try again later.`);if(!this.isRunning(e)){let r=i.get(e);if(r){if(s.get(t)>=s.maxQueueSize)throw new Error("Exceeds maximum number of requests waiting to be resolved, please try again.")}else r=this.startSnap(e),i.set(e,r);s.increment(t);try{await r}finally{s.decrement(t),i.get(e)===r&&i.delete(e)}}const o=new(0,l.Timer)(a);u.__privateMethod.call(void 0,this,rt,st).call(this,e,n.id,o);const d=this.messagingSystem.call("ExecutionService:handleRpcRequest",e,{origin:t,handler:r,request:n});try{const t=await c.withTimeout.call(void 0,d,o);if(t===c.hasTimedOut)throw new Error(`${e} failed to respond to the request in time.`);await u.__privateMethod.call(void 0,this,et,tt).call(this,e,r,t);const s=await u.__privateMethod.call(void 0,this,Qe,Ze).call(this,e,r,t);return u.__privateMethod.call(void 0,this,nt,it).call(this,e,n.id),s}catch(t){u.__privateMethod.call(void 0,this,nt,it).call(this,e,n.id);const[r,s]=g.unwrapError.call(void 0,t);throw s||await this.stopSnap(e,g.SnapStatusEvents.Crash),r}};return t.rpcHandler=a,a},qe=new WeakSet,ze=async function(e,t){return this.messagingSystem.call("SnapInterfaceController:createInterface",e,t)},Ye=new WeakSet,Xe=function(e,t){v.assert.call(void 0,this.messagingSystem.call("SnapInterfaceController:getInterface",e,t))},Qe=new WeakSet,Ze=async function(e,t,r){switch(t){case g.HandlerType.OnTransaction:case g.HandlerType.OnSignature:case g.HandlerType.OnHomePage:{const t=r;if(t&&v.hasProperty.call(void 0,t,"content")){const{content:r,...s}=t;return{...s,id:await u.__privateMethod.call(void 0,this,qe,ze).call(this,e,r)}}return r}default:return r}},et=new WeakSet,tt=async function(e,t,r){switch(t){case g.HandlerType.OnTransaction:v.assertStruct.call(void 0,r,g.OnTransactionResponseStruct),r&&v.hasProperty.call(void 0,r,"id")&&u.__privateMethod.call(void 0,this,Ye,Xe).call(this,e,r.id);break;case g.HandlerType.OnSignature:v.assertStruct.call(void 0,r,g.OnSignatureResponseStruct),r&&v.hasProperty.call(void 0,r,"id")&&u.__privateMethod.call(void 0,this,Ye,Xe).call(this,e,r.id);break;case g.HandlerType.OnHomePage:v.assertStruct.call(void 0,r,g.OnHomePageResponseStruct),r&&v.hasProperty.call(void 0,r,"id")&&u.__privateMethod.call(void 0,this,Ye,Xe).call(this,e,r.id);break;case g.HandlerType.OnNameLookup:v.assertStruct.call(void 0,r,g.OnNameLookupResponseStruct)}},rt=new WeakSet,st=function(e,t,r){const s=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);s.pendingInboundRequests.push({requestId:t,timer:r}),s.lastRequest=null},nt=new WeakSet,it=function(e,t){const r=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);r.pendingInboundRequests=r.pendingInboundRequests.filter((e=>e.requestId!==t)),0===r.pendingInboundRequests.length&&(r.lastRequest=Date.now())},at=new WeakSet,ot=function(e){return u.__privateGet.call(void 0,this,D).get(e)},ct=new WeakSet,lt=function(e){v.assert.call(void 0,void 0===u.__privateGet.call(void 0,this,D).get(e),new Error(`Snap "${e}" rollback snapshot already exists.`)),u.__privateGet.call(void 0,this,D).set(e,{statePatches:[],permissions:{},newVersion:""});const t=u.__privateGet.call(void 0,this,D).get(e);return v.assert.call(void 0,void 0!==t,new Error(`Snapshot creation failed for ${e}.`)),t},ut=new WeakSet,dt=async function(e){const t=u.__privateMethod.call(void 0,this,at,ot).call(this,e);if(!t)throw new Error("A snapshot does not exist for this snap.");await this.stopSnap(e,g.SnapStatusEvents.Stop),this.get(e)?.status!==g.SnapStatus.Stopped&&u.__privateMethod.call(void 0,this,ue,de).call(this,e,g.SnapStatusEvents.Stop);const{statePatches:r,permissions:s}=t;r?.length&&this.applyPatches(r),this.get(e)?.status!==g.SnapStatus.Stopped&&this.update((t=>{t.snaps[e].status=g.SnapStatus.Stopped})),u.__privateMethod.call(void 0,this,Pt,It).call(this,{snapId:e,unusedPermissions:s.granted,newPermissions:s.revoked,requestData:s.requestData});const n=this.getTruncatedExpect(e);this.messagingSystem.publish("SnapController:snapRolledback",n,t.newVersion),u.__privateGet.call(void 0,this,D).delete(e)},ht=new WeakSet,mt=async function(e){for(const t of e)await u.__privateMethod.call(void 0,this,ut,dt).call(this,t)},pt=new WeakSet,ft=function(e){return u.__privateGet.call(void 0,this,F).get(e)},gt=new WeakSet,vt=function(e){const t=u.__privateMethod.call(void 0,this,pt,ft).call(this,e);return v.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" runtime data not found`)),t},_t=new WeakSet,yt=function(e){if(u.__privateGet.call(void 0,this,F).has(e))return;const t=this.get(e),r=_.interpret.call(void 0,u.__privateGet.call(void 0,this,U));r.start({context:{snapId:e},value:t?.status??u.__privateGet.call(void 0,this,U).config.initial}),a.forceStrict.call(void 0,r),u.__privateGet.call(void 0,this,F).set(e,{lastRequest:null,rpcHandler:null,installPromise:null,encryptionKey:null,encryptionSalt:null,activeReferences:0,pendingInboundRequests:[],pendingOutboundRequests:0,interpreter:r,stopping:!1})},kt=new WeakSet,wt=function(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e)??{},s=c.permissionsDiff.call(void 0,t,r),n=c.permissionsDiff.call(void 0,r,t);return{newPermissions:s,unusedPermissions:n,approvedPermissions:c.permissionsDiff.call(void 0,r,n)}},bt=new WeakSet,Tt=function(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",t),s=r?.[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds));return Boolean(s?.value?.[e])},St=new WeakSet,Et=function(e,t,r){const s=Object.keys(t).filter((t=>u.__privateMethod.call(void 0,this,bt,Tt).call(this,e,t))).reduce(((e,r)=>(e[r]=t[r],e)),{}),n=c.setDiff.call(void 0,r,s),i=c.setDiff.call(void 0,s,r);return{newConnections:n,unusedConnections:i,approvedConnections:c.setDiff.call(void 0,s,i)}},Pt=new WeakSet,It=function({snapId:e,unusedPermissions:t={},newPermissions:r={},requestData:s}){const n=Object.keys(t);v.isNonEmptyArray.call(void 0,n)&&this.messagingSystem.call("PermissionController:revokePermissions",{[e]:n}),v.isNonEmptyArray.call(void 0,Object.keys(r))&&this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:r,subject:{origin:e},requestData:s})},At=new WeakSet,jt=function(e,t){const r=this.getExpect(e);return!v.satisfiesVersionRange.call(void 0,r.version,t)&&!v.gtRange.call(void 0,r.version,t)},Ct=new WeakSet,xt=async function(e,t,r){const s=p.handlerEndowments[r];v.assert.call(void 0,s,"Lifecycle hook must have an endowment.");this.messagingSystem.call("PermissionController:hasPermission",t,s)&&await this.handleRequest({snapId:t,handler:r,origin:e,request:{jsonrpc:"2.0",method:r}})},r.controllerName=k,r.SNAP_APPROVAL_INSTALL=w,r.SNAP_APPROVAL_UPDATE=b,r.SNAP_APPROVAL_RESULT=T,r.SnapController=Nt}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-FKQTV3LO.js"}],[2245,{"./chunk-7Y6P5FRN.js":2235,"./chunk-EXN2TFDJ.js":2243,"./chunk-QRISQRFI.js":2260,nanoid:2315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n=e("./chunk-QRISQRFI.js"),i=e("./chunk-7Y6P5FRN.js"),a=e("./chunk-EXN2TFDJ.js"),o=e("nanoid"),c=class extends n.AbstractExecutionService{constructor({stream:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r,usePing:!1}),a.__privateAdd.call(void 0,this,s,void 0),a.__privateSet.call(void 0,this,s,e)}async terminateJob(e){a.__privateGet.call(void 0,this,s).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:o.nanoid.call(void 0)}})}async initEnvStream(e){const t=new(0,i.ProxyPostMessageStream)({stream:a.__privateGet.call(void 0,this,s),jobId:e});return await new Promise((e=>{t.once("data",e),t.write({name:"command",data:{jsonrpc:"2.0",method:"ping",id:o.nanoid.call(void 0)}})})),{worker:e,stream:t}}};s=new WeakMap,r.ProxyExecutionService=c}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-FZOI4WPB.js"}],[2246,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-G66GQJS6.js"}],[2247,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-HOY6NKQR.js"}],[2248,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-IDCWJJCQ.js"}],[2249,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JAUAKTUL.js"}],[225,{"@metamask/utils":2787,"@sentry/browser":2901,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,t.data=function(e){return function(e){const t=["networkId","networkStatus","providerConfig","networkDetails","networkConfigurations"];if(!(0,s.hasProperty)(e,"NetworkController")||!(0,i.isObject)(e.NetworkController))return(0,n.captureException)(`Migration ${a}: Invalid NetworkController state: ${typeof e.NetworkController}`),e;const r=e.NetworkController,o=(0,i.pick)(r,t);return{...e,NetworkController:o}}(e)}(t.data),t},r.version=void 0;var s=e("@metamask/utils"),n=e("@sentry/browser"),i=e("lodash");const a=r.version=92.2}}},{package:"$root$",file:"app/scripts/migrations/092.2.ts"}],[2250,{"@metamask/snaps-rpc-methods":2479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/snaps-rpc-methods"),n=Object.freeze(["snap_dialog","snap_manageState","snap_notify","snap_getLocale",s.SnapEndowments.Cronjob,s.SnapEndowments.HomePage,s.SnapEndowments.LifecycleHooks,s.SnapEndowments.EthereumProvider,s.SnapEndowments.TransactionInsight,s.SnapEndowments.SignatureInsight]);r.ALLOWED_PERMISSIONS=n,r.LEGACY_ENCRYPTION_KEY_DERIVATION_OPTIONS={algorithm:"PBKDF2",params:{iterations:1e4}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JQ54YYLU.js"}],[2251,{"./chunk-EXN2TFDJ.js":2243,"./chunk-RDBT3ZJQ.js":2261,"@metamask/snaps-utils":2592,"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n=e("./chunk-RDBT3ZJQ.js"),i=e("./chunk-EXN2TFDJ.js"),a=e("@metamask/snaps-utils"),o=e("@metamask/utils");function c(e){return o.assert.call(void 0,void 0!==e.data.canonicalPath),e.data.canonicalPath=`local:${e.data.canonicalPath}`,e}s=new WeakMap,r.LocalLocation=class{constructor(e,t={}){i.__privateAdd.call(void 0,this,s,void 0),o.assertStruct.call(void 0,e.toString(),a.LocalSnapIdStruct,"Invalid Snap Id"),o.assert.call(void 0,void 0===t.fetchOptions,"Currently adding fetch options to local: is unsupported."),i.__privateSet.call(void 0,this,s,new(0,n.HttpLocation)(new URL(e.toString().slice(a.SnapIdPrefixes.local.length)),{...t,fetchOptions:{cache:"no-cache"}}))}async manifest(){return c(await i.__privateGet.call(void 0,this,s).manifest())}async fetch(e){return c(await i.__privateGet.call(void 0,this,s).fetch(e))}get shouldAlwaysReload(){return!0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-LWBPKSU2.js"}],[2252,{"@metamask/snaps-utils":2592,"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/snaps-utils"),n=e("@metamask/utils").createModuleLogger.call(void 0,s.snapsLogger,"snaps-controllers");r.log=n}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-NXZVKBSV.js"}],[2253,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OHMCPTOI.js"}],[2254,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OIEUL55W.js"}],[2255,{"./chunk-EVKVZUYY.js":2242,"./chunk-EXN2TFDJ.js":2243,"@metamask/base-controller":2273,"@metamask/snaps-utils":2592,"@metamask/utils":2303,nanoid:2315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y=e("./chunk-EVKVZUYY.js"),k=e("./chunk-EXN2TFDJ.js"),w=e("@metamask/base-controller"),b=e("@metamask/snaps-utils"),T=e("@metamask/utils"),S=e("nanoid"),E=1e7,P="SnapInterfaceController",I=class extends w.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{interfaces:{persist:!1,anonymous:!1}},name:P,state:{interfaces:{},...t}}),k.__privateAdd.call(void 0,this,s),k.__privateAdd.call(void 0,this,i),k.__privateAdd.call(void 0,this,o),k.__privateAdd.call(void 0,this,l),k.__privateAdd.call(void 0,this,d),k.__privateAdd.call(void 0,this,m),k.__privateAdd.call(void 0,this,f),k.__privateAdd.call(void 0,this,v),k.__privateMethod.call(void 0,this,s,n).call(this)}async createInterface(e,t,r){const s=y.getJsxInterface.call(void 0,t);await k.__privateMethod.call(void 0,this,v,_).call(this,s),y.validateInterfaceContext.call(void 0,r);const n=S.nanoid.call(void 0),i=y.constructState.call(void 0,{},s);return this.update((t=>{t.interfaces[n]={snapId:e,content:s,state:i,context:r??null}})),n}getInterface(e,t){return k.__privateMethod.call(void 0,this,i,a).call(this,e,t),this.state.interfaces[t]}async updateInterface(e,t,r){k.__privateMethod.call(void 0,this,i,a).call(this,e,t);const s=y.getJsxInterface.call(void 0,r);await k.__privateMethod.call(void 0,this,v,_).call(this,s);const n=this.state.interfaces[t].state,o=y.constructState.call(void 0,n,s);this.update((e=>{e.interfaces[t].state=o,e.interfaces[t].content=s}))}deleteInterface(e){this.update((t=>{delete t.interfaces[e]}))}updateInterfaceState(e,t){this.update((r=>{r.interfaces[e].state=t}))}async resolveInterface(e,t,r){k.__privateMethod.call(void 0,this,i,a).call(this,e,t),k.__privateMethod.call(void 0,this,o,c).call(this,t),await k.__privateMethod.call(void 0,this,f,g).call(this,t,r),this.deleteInterface(t)}};s=new WeakSet,n=function(){this.messagingSystem.registerActionHandler(`${P}:createInterface`,this.createInterface.bind(this)),this.messagingSystem.registerActionHandler(`${P}:getInterface`,this.getInterface.bind(this)),this.messagingSystem.registerActionHandler(`${P}:updateInterface`,this.updateInterface.bind(this)),this.messagingSystem.registerActionHandler(`${P}:deleteInterface`,this.deleteInterface.bind(this)),this.messagingSystem.registerActionHandler(`${P}:updateInterfaceState`,this.updateInterfaceState.bind(this)),this.messagingSystem.registerActionHandler(`${P}:resolveInterface`,this.resolveInterface.bind(this))},i=new WeakSet,a=function(e,t){const r=this.state.interfaces[t];T.assert.call(void 0,void 0!==r,`Interface with id '${t}' not found.`),T.assert.call(void 0,r.snapId===e,`Interface not created by ${e}.`)},o=new WeakSet,c=function(e){T.assert.call(void 0,k.__privateMethod.call(void 0,this,m,p).call(this,e),`Approval request with id '${e}' not found.`)},l=new WeakSet,u=async function(){await this.messagingSystem.call("PhishingController:maybeUpdateState")},d=new WeakSet,h=function(e){return this.messagingSystem.call("PhishingController:testOrigin",e).result},m=new WeakSet,p=function(e){return this.messagingSystem.call("ApprovalController:hasRequest",{id:e})},f=new WeakSet,g=async function(e,t){await this.messagingSystem.call("ApprovalController:acceptRequest",e,t)},v=new WeakSet,_=async function(e){const t=b.getJsonSizeUnsafe.call(void 0,e);T.assert.call(void 0,t<=E,"A Snap UI may not be larger than 10 MB."),await k.__privateMethod.call(void 0,this,l,u).call(this),b.validateJsxLinks.call(void 0,e,k.__privateMethod.call(void 0,this,d,h).bind(this))},r.SnapInterfaceController=I}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OJBUUQ5D.js"}],[2256,{"./chunk-EXN2TFDJ.js":2243,"./chunk-FZOI4WPB.js":2245,"@metamask/post-message-stream":1939},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n=e("./chunk-FZOI4WPB.js"),i=e("./chunk-EXN2TFDJ.js"),a=e("@metamask/post-message-stream"),o=class extends n.ProxyExecutionService{constructor({messenger:e,setupSnapProvider:t,offscreenPromise:r}){super({messenger:e,setupSnapProvider:t,stream:new(0,a.BrowserRuntimePostMessageStream)({name:"parent",target:"child"})}),i.__privateAdd.call(void 0,this,s,void 0),i.__privateSet.call(void 0,this,s,r)}async initEnvStream(e){return await i.__privateGet.call(void 0,this,s),await super.initEnvStream(e)}};s=new WeakMap,r.OffscreenExecutionService=o}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OVATPF5I.js"}],[2257,{"./chunk-7Y6P5FRN.js":2235,"./chunk-EXN2TFDJ.js":2243,"./chunk-QRISQRFI.js":2260,"@metamask/post-message-stream":1939,"@metamask/snaps-utils":2592,"@metamask/utils":2303,nanoid:2315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i=e("./chunk-QRISQRFI.js"),a=e("./chunk-7Y6P5FRN.js"),o=e("./chunk-EXN2TFDJ.js"),c=e("@metamask/post-message-stream"),l=e("@metamask/snaps-utils"),u=e("@metamask/utils"),d=e("nanoid"),h="snaps-worker-pool",m=class extends i.AbstractExecutionService{constructor({documentUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r}),o.__privateAdd.call(void 0,this,s,void 0),o.__privateAdd.call(void 0,this,n,void 0),o.__privateSet.call(void 0,this,s,e)}async terminateJob(e){u.assert.call(void 0,o.__privateGet.call(void 0,this,n),"Runtime stream not initialized."),o.__privateGet.call(void 0,this,n).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:d.nanoid.call(void 0)}})}async initEnvStream(e){await this.createDocument(),u.assert.call(void 0,o.__privateGet.call(void 0,this,n),"Runtime stream not initialized.");return{worker:e,stream:new(0,a.ProxyPostMessageStream)({stream:o.__privateGet.call(void 0,this,n),jobId:e})}}async createDocument(){if(document.getElementById(h))return;const e=await l.createWindow.call(void 0,o.__privateGet.call(void 0,this,s).href,h,!1);o.__privateSet.call(void 0,this,n,new(0,c.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:e,targetOrigin:"*"}))}};s=new WeakMap,n=new WeakMap,r.WORKER_POOL_ID=h,r.WebWorkerExecutionService=m}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-P66VIDFG.js"}],[2258,{"./chunk-LWBPKSU2.js":2251,"./chunk-RDBT3ZJQ.js":2261,"./chunk-XWDEGRM5.js":2265,"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-LWBPKSU2.js"),n=e("./chunk-RDBT3ZJQ.js"),i=e("./chunk-XWDEGRM5.js"),a=e("@metamask/utils");r.detectSnapLocation=function(e,t){const r=t?.allowHttp??!1,o=t?.allowLocal??!1,c=new URL(e);switch(c.protocol){case"npm:":return new(0,i.NpmLocation)(c,t);case"local:":return a.assert.call(void 0,o,new TypeError("Fetching local snaps is disabled.")),new(0,s.LocalLocation)(c,t);case"http:":case"https:":return a.assert.call(void 0,r,new TypeError("Fetching snaps through http/https is disabled.")),new(0,n.HttpLocation)(c,t);default:throw new TypeError(`Unrecognized "${c.protocol}" snap location protocol.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-POQSARDG.js"}],[2259,{"./chunk-QRISQRFI.js":2260,"@metamask/post-message-stream":1939,"@metamask/snaps-utils":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-QRISQRFI.js"),n=e("@metamask/post-message-stream"),i=e("@metamask/snaps-utils"),a=class extends s.AbstractExecutionService{constructor({iframeUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r}),this.iframeUrl=e}terminateJob(e){document.getElementById(e.id)?.remove()}async initEnvStream(e){const t=await i.createWindow.call(void 0,this.iframeUrl.toString(),e);return{worker:t,stream:new(0,n.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:t,targetOrigin:"*"})}}};r.IframeExecutionService=a}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-PYSDWIVK.js"}],[226,{"@metamask/utils":2787,lodash:4382,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,function(e){!function(e){if((0,n.isNullOrUndefined)(e.PreferencesController))return void a.default.warn(`Migration #${o}: preferences controller null or undefined, skipping migration`);if((0,n.hasProperty)(e,"AppStateController")&&(0,n.isObject)(e.AppStateController)&&(0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)){var t;const r=null===(t=e.PreferencesController)||void 0===t?void 0:t.advancedGasFee,s=(0,n.isObject)(r)&&c(r);e.AppStateController.hadAdvancedGasFeesSetPriorToMigration92_3=s,(null===e.PreferencesController.advancedGasFee||(0,n.isObject)(e.PreferencesController.advancedGasFee)&&c(e.PreferencesController.advancedGasFee))&&(e.PreferencesController.advancedGasFee={})}else if(!1===(0,n.isObject)(e.AppStateController)){var r,s;null===(r=global.sentry)||void 0===r||null===(s=r.captureException)||void 0===s||s.call(r,new Error("typeof state.AppStateController is "+typeof e.AppStateController))}else if(!1===(0,n.isObject)(e.PreferencesController)){var i,l;null===(i=global.sentry)||void 0===i||null===(l=i.captureException)||void 0===l||l.call(i,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController))}}(e)}(t.data),t},r.version=void 0;var s,n=e("@metamask/utils"),i=e("lodash"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=r.version=92.3;function c(e){const t=Object.keys(e);return!(!t.includes("maxBaseFee")&&!t.includes("priorityFee"))}}}},{package:"$root$",file:"app/scripts/migrations/092.3.ts"}],[2260,{"./chunk-B6KTRDBK.js":2237,"./chunk-BOFPNIRX.js":2239,"./chunk-EXN2TFDJ.js":2243,"./chunk-NXZVKBSV.js":2252,"@metamask/json-rpc-engine":1516,"@metamask/json-rpc-middleware-stream":1540,"@metamask/object-multiplex":1866,"@metamask/rpc-errors":2006,"@metamask/snaps-utils":2592,"@metamask/utils":2303,nanoid:2315,"readable-stream":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m,p,f,g,v,_,y,k=e("./chunk-NXZVKBSV.js"),w=e("./chunk-B6KTRDBK.js"),b=e("./chunk-BOFPNIRX.js"),T=e("./chunk-EXN2TFDJ.js"),S=e("@metamask/json-rpc-engine"),E=e("@metamask/json-rpc-middleware-stream"),P=e("@metamask/object-multiplex"),I=(s=P)&&s.__esModule?s:{default:s},A=e("@metamask/rpc-errors"),j=e("@metamask/snaps-utils"),C=e("@metamask/utils"),x=e("nanoid"),N=e("readable-stream"),R="ExecutionService";function M(e,t){const r=new(0,I.default);return N.pipeline.call(void 0,e,r,e,(e=>{e&&(t?j.logError.call(void 0,`"${t}" stream failure.`,e):j.logError.call(void 0,e))})),r}n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakSet,m=function(e){T.__privateGet.call(void 0,this,n).delete(e)},p=new WeakSet,f=function(e,t){T.__privateGet.call(void 0,this,n).set(e,(async({origin:r,handler:s,request:n})=>await this.command(t,{id:x.nanoid.call(void 0),jsonrpc:"2.0",method:"snapRpc",params:{origin:r,handler:s,request:n,target:e}})))},g=new WeakSet,v=function(e,t){T.__privateGet.call(void 0,this,i).set(e,t),T.__privateGet.call(void 0,this,a).set(t,e)},_=new WeakSet,y=function(e){const t=T.__privateGet.call(void 0,this,a).get(e);if(!t)throw new Error(`job: "${e}" has no mapped snap.`);T.__privateGet.call(void 0,this,a).delete(e),T.__privateGet.call(void 0,this,i).delete(t),T.__privateMethod.call(void 0,this,h,m).call(this,t)},r.AbstractExecutionService=class{constructor({setupSnapProvider:e,messenger:t,initTimeout:r=C.inMilliseconds.call(void 0,60,C.Duration.Second),pingTimeout:s=C.inMilliseconds.call(void 0,2,C.Duration.Second),terminationTimeout:m=C.inMilliseconds.call(void 0,1,C.Duration.Second),usePing:f=!0}){T.__privateAdd.call(void 0,this,h),T.__privateAdd.call(void 0,this,p),T.__privateAdd.call(void 0,this,g),T.__privateAdd.call(void 0,this,_),T.__privateAdd.call(void 0,this,n,void 0),T.__privateAdd.call(void 0,this,i,void 0),T.__privateAdd.call(void 0,this,a,void 0),T.__privateAdd.call(void 0,this,o,void 0),T.__privateAdd.call(void 0,this,c,void 0),T.__privateAdd.call(void 0,this,l,void 0),T.__privateAdd.call(void 0,this,u,void 0),T.__privateAdd.call(void 0,this,d,void 0),T.__privateSet.call(void 0,this,n,new Map),this.jobs=new Map,this.setupSnapProvider=e,T.__privateSet.call(void 0,this,i,new Map),T.__privateSet.call(void 0,this,a,new Map),T.__privateSet.call(void 0,this,o,t),T.__privateSet.call(void 0,this,c,r),T.__privateSet.call(void 0,this,l,s),T.__privateSet.call(void 0,this,u,m),T.__privateSet.call(void 0,this,d,f),this.registerMessageHandlers()}registerMessageHandlers(){T.__privateGet.call(void 0,this,o).registerActionHandler(`${R}:handleRpcRequest`,(async(e,t)=>this.handleRpcRequest(e,t))),T.__privateGet.call(void 0,this,o).registerActionHandler(`${R}:executeSnap`,(async e=>this.executeSnap(e))),T.__privateGet.call(void 0,this,o).registerActionHandler(`${R}:terminateSnap`,(async e=>this.terminateSnap(e))),T.__privateGet.call(void 0,this,o).registerActionHandler(`${R}:terminateAllSnaps`,(async()=>this.terminateAllSnaps()))}async terminate(e){const t=this.jobs.get(e);if(!t)throw new Error(`Job with id "${e}" not found.`);try{const t=await w.withTimeout.call(void 0,this.command(e,{jsonrpc:"2.0",method:"terminate",params:[],id:x.nanoid.call(void 0)}),T.__privateGet.call(void 0,this,u));t!==w.hasTimedOut&&"OK"===t||j.logError.call(void 0,`Job "${e}" failed to terminate gracefully.`,t)}catch{}Object.values(t.streams).forEach((e=>{try{!e.destroyed&&e.destroy(),e.removeAllListeners()}catch(e){j.logError.call(void 0,"Error while destroying stream",e)}})),this.terminateJob(t),this.jobs.delete(e),T.__privateMethod.call(void 0,this,_,y).call(this,e),k.log.call(void 0,`Job "${e}" terminated.`)}async initJob(e,t){const{streams:r,worker:s}=await this.initStreams(e,t),n=new(0,S.JsonRpcEngine),i=E.createStreamMiddleware.call(void 0);N.pipeline.call(void 0,i.stream,r.command,i.stream,(e=>{e&&j.logError.call(void 0,"Command stream failure.",e)})),n.push(i.middleware);const a={id:e,streams:r,rpcEngine:n,worker:s};return this.jobs.set(e,a),a}async initStreams(e,t){const r=await w.withTimeout.call(void 0,this.initEnvStream(e),t);if(r===w.hasTimedOut)throw this.terminateJob({id:e}),new Error("The Snaps execution environment failed to start.");const{worker:s,stream:n}=r,i=M(n,`Job: "${e}"`),c=i.createStream(j.SNAP_STREAM_NAMES.COMMAND),l=t=>{if(!C.isJsonRpcNotification.call(void 0,t))return;const r=T.__privateGet.call(void 0,this,a).get(e);"OutboundRequest"===t.method?T.__privateGet.call(void 0,this,o).publish("ExecutionService:outboundRequest",r):"OutboundResponse"===t.method?T.__privateGet.call(void 0,this,o).publish("ExecutionService:outboundResponse",r):"UnhandledError"===t.method?C.isObject.call(void 0,t.params)&&t.params.error?(T.__privateGet.call(void 0,this,o).publish("ExecutionService:unhandledError",r,t.params.error),c.removeListener("data",l)):j.logError.call(void 0,new Error(`Received malformed "${t.method}" command stream notification.`)):j.logError.call(void 0,new Error(`Received unexpected command stream notification "${t.method}".`))};c.on("data",l);const u=i.createStream(j.SNAP_STREAM_NAMES.JSON_RPC);return{streams:{command:c,rpc:u,_connection:n},worker:s}}async terminateSnap(e){const t=T.__privateGet.call(void 0,this,i).get(e);t&&await this.terminate(t)}async terminateAllSnaps(){await Promise.all([...this.jobs.keys()].map((async e=>this.terminate(e)))),T.__privateGet.call(void 0,this,n).clear()}getRpcRequestHandler(e){return T.__privateGet.call(void 0,this,n).get(e)}async executeSnap({snapId:e,sourceCode:t,endowments:r}){if(T.__privateGet.call(void 0,this,i).has(e))throw new Error(`Snap "${e}" is already being executed.`);const s=x.nanoid.call(void 0),n=new(0,b.Timer)(T.__privateGet.call(void 0,this,c)),a=await this.initJob(s,n);if(T.__privateMethod.call(void 0,this,g,v).call(this,e,a.id),T.__privateGet.call(void 0,this,d)){if(await w.withTimeout.call(void 0,this.command(a.id,{jsonrpc:"2.0",method:"ping",id:x.nanoid.call(void 0)}),T.__privateGet.call(void 0,this,l))===w.hasTimedOut)throw new Error("The Snaps execution environment failed to start.")}const o=a.streams.rpc;this.setupSnapProvider(e,o);const u=n.remaining,h=await w.withTimeout.call(void 0,this.command(a.id,{jsonrpc:"2.0",method:"executeSnap",params:{snapId:e,sourceCode:t,endowments:r},id:x.nanoid.call(void 0)}),u);if(h===w.hasTimedOut)throw new Error(`${e} failed to start.`);return T.__privateMethod.call(void 0,this,p,f).call(this,e,a.id),h}async command(e,t){C.assertIsJsonRpcRequest.call(void 0,t);const r=this.jobs.get(e);if(!r)throw new Error(`Job with id "${e}" not found.`);k.log.call(void 0,"Parent: Sending Command",t);const s=await r.rpcEngine.handle(t);if(C.isJsonRpcFailure.call(void 0,s))throw new(0,A.JsonRpcError)(s.error.code,s.error.message,s.error.data);return s.result}async handleRpcRequest(e,t){const r=this.getRpcRequestHandler(e);if(!r)throw new Error(`Snap execution service returned no RPC handler for running snap "${e}".`);return r(t)}},r.setupMultiplex=M}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-QRISQRFI.js"}],[2261,{"@metamask/snaps-utils":2592,"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/snaps-utils"),n=e("@metamask/utils");r.HttpLocation=class{constructor(e,t={}){this.cache=new Map,n.assertStruct.call(void 0,e.toString(),s.HttpSnapIdStruct,"Invalid Snap Id: "),this.fetchFn=t.fetch??globalThis.fetch.bind(globalThis),this.fetchOptions=t.fetchOptions,this.url=e}async manifest(){if(this.validatedManifest)return this.validatedManifest.clone();const e=new URL(s.NpmSnapFileNames.Manifest,this.url).toString(),t=await this.fetchFn(e,this.fetchOptions);if(!t.ok)throw new Error(`Failed to fetch "${e}". Status code: ${t.status}.`);const r=await t.text(),n=s.parseJson.call(void 0,r),i=new(0,s.VirtualFile)({value:r,result:s.createSnapManifest.call(void 0,n),path:s.NpmSnapFileNames.Manifest,data:{canonicalPath:e}});return this.validatedManifest=i,this.manifest()}async fetch(e){const t=s.normalizeRelative.call(void 0,e),r=this.cache.get(t);if(void 0!==r){const{file:e,contents:t}=r,s=new Uint8Array(await t.arrayBuffer()),n=e.clone();return n.value=s,n}const i=this.toCanonical(t).toString(),a=await this.fetchFn(i,this.fetchOptions);if(!a.ok)throw new Error(`Failed to fetch "${i}". Status code: ${a.status}.`);const o=new(0,s.VirtualFile)({value:"",path:t,data:{canonicalPath:i}}),c=await a.blob();return n.assert.call(void 0,!this.cache.has(t),"Corrupted cache, multiple files with same path."),this.cache.set(t,{file:o,contents:c}),this.fetch(t)}get root(){return new URL(this.url)}toCanonical(e){return n.assert.call(void 0,!e.startsWith("/"),"Tried to parse absolute path."),new URL(e,this.url)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-RDBT3ZJQ.js"}],[2262,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-VNOCJWOK.js"}],[2263,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-WEY7ICES.js"}],[2264,{"./chunk-BOFPNIRX.js":2239,"./chunk-EXN2TFDJ.js":2243,"./chunk-YYPUPKQY.js":2266,"@metamask/base-controller":2273,"@metamask/snaps-rpc-methods":2479,"@metamask/snaps-utils":2592,"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o=e("./chunk-YYPUPKQY.js"),c=e("./chunk-BOFPNIRX.js"),l=e("./chunk-EXN2TFDJ.js"),u=e("@metamask/base-controller"),d=e("@metamask/snaps-rpc-methods"),h=e("@metamask/snaps-utils"),m=e("@metamask/utils"),p=m.inMilliseconds.call(void 0,24,m.Duration.Hour),f=class extends u.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{jobs:{persist:!0,anonymous:!1}},name:"CronjobController",state:{jobs:{},...t}}),l.__privateAdd.call(void 0,this,s,void 0),l.__privateAdd.call(void 0,this,n,void 0),l.__privateAdd.call(void 0,this,i,void 0),l.__privateAdd.call(void 0,this,a,void 0),l.__privateSet.call(void 0,this,i,new Map),l.__privateSet.call(void 0,this,a,new Map),l.__privateSet.call(void 0,this,s,e),this._handleSnapRegisterEvent=this._handleSnapRegisterEvent.bind(this),this._handleSnapUnregisterEvent=this._handleSnapUnregisterEvent.bind(this),this._handleEventSnapUpdated=this._handleEventSnapUpdated.bind(this),this.messagingSystem.subscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}getAllJobs(){const e=this.messagingSystem.call("SnapController:getAll");return o.getRunnableSnaps.call(void 0,e).map((e=>this.getSnapJobs(e.id))).flat().filter((e=>void 0!==e))}getSnapJobs(e){const t=l.__privateGet.call(void 0,this,s).call("PermissionController:getPermissions",e),r=t?.[d.SnapEndowments.Cronjob],n=d.getCronjobCaveatJobs.call(void 0,r);return n?.map(((t,r)=>({...t,id:`${e}-${r}`,snapId:e})))}register(e){const t=this.getSnapJobs(e);t?.forEach((e=>this.schedule(e)))}schedule(e){if(l.__privateGet.call(void 0,this,i).has(e.id))return;const t=h.parseCronExpression.call(void 0,e.expression).next(),r=new Date,s=t.getTime()-r.getTime();if(s>p)return;const n=new(0,c.Timer)(s);n.start((()=>{this.executeCronjob(e).catch((e=>{h.logError.call(void 0,e)})),l.__privateGet.call(void 0,this,i).delete(e.id),this.schedule(e)})),this.state.jobs[e.id]?.lastRun||this.updateJobLastRunState(e.id,0),l.__privateGet.call(void 0,this,i).set(e.id,n),l.__privateGet.call(void 0,this,a).set(e.id,e.snapId)}async executeCronjob(e){this.updateJobLastRunState(e.id,Date.now()),await l.__privateGet.call(void 0,this,s).call("SnapController:handleRequest",{snapId:e.snapId,origin:"",handler:h.HandlerType.OnCronjob,request:e.request})}unregister(e){const t=[...l.__privateGet.call(void 0,this,a).entries()].filter((([t,r])=>r===e));t.length&&t.forEach((([e])=>{const t=l.__privateGet.call(void 0,this,i).get(e);t&&(t.cancel(),l.__privateGet.call(void 0,this,i).delete(e),l.__privateGet.call(void 0,this,a).delete(e))}))}updateJobLastRunState(e,t){this.update((r=>{r.jobs[e]={lastRun:t}}))}async dailyCheckIn(){const e=this.getAllJobs();for(const t of e){const e=h.parseCronExpression.call(void 0,t.expression),r=this.state.jobs[t.id]?.lastRun;void 0!==r&&e.hasPrev()&&e.prev().getTime()>r&&await this.executeCronjob(t),this.schedule(t)}l.__privateSet.call(void 0,this,n,new(0,c.Timer)(p)),l.__privateGet.call(void 0,this,n).start((()=>{this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}))}destroy(){super.destroy(),this.messagingSystem.unsubscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),l.__privateGet.call(void 0,this,a).forEach((e=>{this.unregister(e)}))}_handleSnapRegisterEvent(e){this.register(e.id)}_handleSnapUnregisterEvent(e){this.unregister(e.id)}_handleEventSnapUpdated(e){this.unregister(e.id),this.register(e.id)}};s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,r.DAILY_TIMEOUT=p,r.CronjobController=f}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-XFUP7RFI.js"}],[2265,{"./chunk-EXN2TFDJ.js":2243,"@metamask/snaps-utils":2592,"@metamask/utils":2303,"browserify-zlib":3570,"concat-stream":2314,"get-npm-tarball-url":3955,"readable-stream":4794,"readable-web-to-node-stream":4795,"tar-stream":4900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,o,c=e("./chunk-EXN2TFDJ.js"),l=e("@metamask/snaps-utils"),u=e("@metamask/utils"),d=e("browserify-zlib"),h=s(e("concat-stream")),m=s(e("get-npm-tarball-url")),p=e("readable-stream"),f=e("readable-web-to-node-stream"),g=e("tar-stream"),v=new URL("https://registry.npmjs.org"),_=class{constructor(e,t={}){c.__privateAdd.call(void 0,this,a),c.__privateAdd.call(void 0,this,n,void 0),c.__privateAdd.call(void 0,this,i,void 0);const r=t.allowCustomRegistries??!1,s=t.fetch??globalThis.fetch.bind(globalThis),o=t.versionRange??l.DEFAULT_REQUESTED_SNAP_VERSION,d=t.resolveVersion??(async e=>e);let h;u.assertStruct.call(void 0,e.toString(),l.NpmSnapIdStruct,"Invalid Snap Id: "),""===e.host&&""===e.port&&""===e.username&&""===e.password?h=v:(h="https://",e.username&&(h+=e.username,e.password&&(h+=`:${e.password}`),h+="@"),h+=e.host,h=new URL(h),u.assert.call(void 0,r,new TypeError(`Custom NPM registries are disabled, tried to use "${h.toString()}".`))),u.assert.call(void 0,"/"===h.pathname&&""===h.search&&""===h.hash),u.assert.call(void 0,""!==e.pathname&&"/"!==e.pathname,new TypeError("The package name in NPM location is empty."));let m=e.pathname;m.startsWith("/")&&(m=m.slice(1)),this.meta={requestedRange:o,registry:h,packageName:m,fetch:s,resolveVersion:d}}async manifest(){if(c.__privateGet.call(void 0,this,n))return c.__privateGet.call(void 0,this,n).clone();const e=await this.fetch("snap.manifest.json"),t=l.parseJson.call(void 0,e.toString());return e.result=l.createSnapManifest.call(void 0,t),c.__privateSet.call(void 0,this,n,e),this.manifest()}async fetch(e){const t=l.normalizeRelative.call(void 0,e);c.__privateGet.call(void 0,this,i)||(await c.__privateMethod.call(void 0,this,a,o).call(this),u.assert.call(void 0,void 0!==c.__privateGet.call(void 0,this,i)));const r=c.__privateGet.call(void 0,this,i).get(t);return u.assert.call(void 0,void 0!==r,new TypeError(`File "${e}" not found in package.`)),r.clone()}get packageName(){return this.meta.packageName}get version(){return u.assert.call(void 0,void 0!==this.meta.version,"Tried to access version without first fetching NPM package."),this.meta.version}get registry(){return this.meta.registry}get versionRange(){return this.meta.requestedRange}};n=new WeakMap,i=new WeakMap,a=new WeakSet,o=async function(){u.assert.call(void 0,void 0===c.__privateGet.call(void 0,this,i));const e=await this.meta.resolveVersion(this.meta.requestedRange),{tarballURL:t,targetVersion:r}=await async function(e,t,r,s){if(b(r)&&u.isValidSemVerVersion.call(void 0,t))return{tarballURL:m.default.call(void 0,e,t),targetVersion:t};const n=await k(e,r,s),i=Object.keys(n?.versions??{}).map((e=>(u.assertIsSemVerVersion.call(void 0,e),e))),a=l.getTargetVersion.call(void 0,i,t);if(null===a)throw new Error(`Failed to find a matching version in npm metadata for package "${e}" and requested semver range "${t}".`);const o=n?.versions?.[a]?.dist?.tarball;return{tarballURL:o,targetVersion:a}}(this.meta.packageName,e,this.meta.registry,this.meta.fetch);if(!l.isValidUrl.call(void 0,t)||!t.toString().endsWith(".tgz"))throw new Error(`Failed to find valid tarball URL in NPM metadata for package "${this.meta.packageName}".`);const s=new URL(t);s.hostname=this.meta.registry.hostname,s.protocol=this.meta.registry.protocol;const n=await this.fetchNpmTarball(s);c.__privateSet.call(void 0,this,i,n),this.meta.version=r};var y=262144e3;async function k(e,t,r){const s=await r(new URL(e,t).toString(),{headers:{accept:b(t)?"application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*":"application/json"}});if(!s.ok)throw new Error(`Failed to fetch NPM registry entry. Status code: ${s.status}.`);const n=await s.json();if(!u.isObject.call(void 0,n))throw new Error(`Failed to fetch package "${e}" metadata from npm.`);return n}function w(e,t){let r="npm://";return""!==e.username&&(r+=e.username,""!==e.password&&(r+=`:${e.password}`),r+="@"),`${r}${e.host}/${t}/`}function b(e){return e.toString()===v.toString()}var T=/^package\//u;function S(e){return"function"!=typeof e.getReader?e:new(0,f.ReadableWebToNodeStream)(e)}r.DEFAULT_NPM_REGISTRY=v,r.BaseNpmLocation=_,r.TARBALL_SIZE_SAFETY_LIMIT=y,r.NpmLocation=class extends _{async fetchNpmTarball(e){const t=await this.meta.fetch(e.toString());if(!t.ok||!t.body)throw new Error(`Failed to fetch tarball for package "${this.meta.packageName}".`);const r=t.headers.get("content-length");u.assert.call(void 0,r,"Snap tarball has invalid content-length");const s=parseInt(r,10);return u.assert.call(void 0,s<=y,"Snap tarball exceeds size limit"),new Promise(((e,r)=>{const s=new Map,n=function(e,t){u.assert.call(void 0,e.endsWith("/"),"Base needs to end with '/' for relative paths to be added as children instead of siblings."),u.assert.call(void 0,e.startsWith("npm:"),'Protocol mismatch, expected "npm:".');const r=g.extract.call(void 0);let s=0;return r.on("entry",((n,i,a)=>{const{name:o,type:c}=n;if("file"===c){const n=o.replace(T,"");return i.pipe(h.default.call(void 0,{encoding:"uint8array"},(i=>{try{s+=i.byteLength,u.assert.call(void 0,s<y,"Snap tarball exceeds limit of 262144000 bytes.");const r=new(0,l.VirtualFile)({value:i,path:n,data:{canonicalPath:new URL(n,e).toString()}});return u.assert.call(void 0,!t.has(n),"Malformed tarball, multiple files with the same path."),t.set(n,r),a()}catch(e){return r.destroy(e)}})))}return i.on("end",(()=>a())),i.resume()})),r}(w(this.meta.registry,this.meta.packageName),s),i=t.body;if("pipeThrough"in i&&"DecompressionStream"in globalThis){const t=new DecompressionStream("gzip"),a=i.pipeThrough(t);p.pipeline.call(void 0,S(a),n,(t=>{t?r(t):e(s)}))}else p.pipeline.call(void 0,S(i),d.createGunzip.call(void 0),n,(t=>{t?r(t):e(s)}))}))}},r.fetchNpmMetadata=k,r.getNpmCanonicalBasePath=w}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-XWDEGRM5.js"}],[2266,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.getRunnableSnaps=e=>e.filter((e=>e.enabled&&!e.blocked))}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-YYPUPKQY.js"}],[2267,{"./chunk-4CA3O64H.js":2232,"./chunk-4URGXJP7.js":2233,"./chunk-5O4O4BI5.js":2234,"./chunk-7Y6P5FRN.js":2235,"./chunk-AP7CJ6DA.js":2236,"./chunk-B6KTRDBK.js":2237,"./chunk-BO2ZDPWV.js":2238,"./chunk-BOFPNIRX.js":2239,"./chunk-CPUUURMT.js":2240,"./chunk-D74XJG2L.js":2241,"./chunk-EVKVZUYY.js":2242,"./chunk-EXN2TFDJ.js":2243,"./chunk-FKQTV3LO.js":2244,"./chunk-FZOI4WPB.js":2245,"./chunk-G66GQJS6.js":2246,"./chunk-HOY6NKQR.js":2247,"./chunk-IDCWJJCQ.js":2248,"./chunk-JAUAKTUL.js":2249,"./chunk-JQ54YYLU.js":2250,"./chunk-LWBPKSU2.js":2251,"./chunk-NXZVKBSV.js":2252,"./chunk-OHMCPTOI.js":2253,"./chunk-OIEUL55W.js":2254,"./chunk-OJBUUQ5D.js":2255,"./chunk-OVATPF5I.js":2256,"./chunk-P66VIDFG.js":2257,"./chunk-POQSARDG.js":2258,"./chunk-PYSDWIVK.js":2259,"./chunk-QRISQRFI.js":2260,"./chunk-RDBT3ZJQ.js":2261,"./chunk-VNOCJWOK.js":2262,"./chunk-WEY7ICES.js":2263,"./chunk-XFUP7RFI.js":2264,"./chunk-XWDEGRM5.js":2265,"./chunk-YYPUPKQY.js":2266},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-XFUP7RFI.js");e("./chunk-4URGXJP7.js"),e("./chunk-D74XJG2L.js");var n=e("./chunk-P66VIDFG.js");e("./chunk-OHMCPTOI.js");var i=e("./chunk-OVATPF5I.js");e("./chunk-FZOI4WPB.js"),e("./chunk-HOY6NKQR.js");var a=e("./chunk-PYSDWIVK.js");e("./chunk-IDCWJJCQ.js");var o=e("./chunk-5O4O4BI5.js");e("./chunk-JAUAKTUL.js");var c=e("./chunk-YYPUPKQY.js"),l=e("./chunk-FKQTV3LO.js");e("./chunk-WEY7ICES.js");var u=e("./chunk-POQSARDG.js"),d=e("./chunk-LWBPKSU2.js"),h=e("./chunk-RDBT3ZJQ.js"),m=e("./chunk-XWDEGRM5.js");e("./chunk-G66GQJS6.js");var p=e("./chunk-CPUUURMT.js"),f=e("./chunk-4CA3O64H.js");e("./chunk-AP7CJ6DA.js"),e("./chunk-JQ54YYLU.js"),e("./chunk-VNOCJWOK.js");var g=e("./chunk-OJBUUQ5D.js");e("./chunk-EVKVZUYY.js");var v=e("./chunk-QRISQRFI.js");e("./chunk-OIEUL55W.js");var _=e("./chunk-7Y6P5FRN.js");e("./chunk-BO2ZDPWV.js"),e("./chunk-NXZVKBSV.js");var y=e("./chunk-B6KTRDBK.js");e("./chunk-BOFPNIRX.js"),e("./chunk-EXN2TFDJ.js"),r.AbstractExecutionService=v.AbstractExecutionService,r.BaseNpmLocation=m.BaseNpmLocation,r.CronjobController=s.CronjobController,r.DAILY_TIMEOUT=s.DAILY_TIMEOUT,r.DEFAULT_NPM_REGISTRY=m.DEFAULT_NPM_REGISTRY,r.HttpLocation=h.HttpLocation,r.IframeExecutionService=a.IframeExecutionService,r.JsonSnapsRegistry=p.JsonSnapsRegistry,r.LocalLocation=d.LocalLocation,r.NpmLocation=m.NpmLocation,r.OffscreenExecutionService=i.OffscreenExecutionService,r.ProxyPostMessageStream=_.ProxyPostMessageStream,r.SNAP_APPROVAL_INSTALL=l.SNAP_APPROVAL_INSTALL,r.SNAP_APPROVAL_RESULT=l.SNAP_APPROVAL_RESULT,r.SNAP_APPROVAL_UPDATE=l.SNAP_APPROVAL_UPDATE,r.SnapController=l.SnapController,r.SnapInsightsController=o.SnapInsightsController,r.SnapInterfaceController=g.SnapInterfaceController,r.SnapsRegistryStatus=f.SnapsRegistryStatus,r.TARBALL_SIZE_SAFETY_LIMIT=m.TARBALL_SIZE_SAFETY_LIMIT,r.WebWorkerExecutionService=n.WebWorkerExecutionService,r.controllerName=l.controllerName,r.delay=y.delay,r.delayWithTimer=y.delayWithTimer,r.detectSnapLocation=u.detectSnapLocation,r.fetchNpmMetadata=m.fetchNpmMetadata,r.fetchSnap=y.fetchSnap,r.getNpmCanonicalBasePath=m.getNpmCanonicalBasePath,r.getRunnableSnaps=c.getRunnableSnaps,r.getSnapFiles=y.getSnapFiles,r.hasTimedOut=y.hasTimedOut,r.permissionsDiff=y.permissionsDiff,r.setDiff=y.setDiff,r.setupMultiplex=v.setupMultiplex,r.withTimeout=y.withTimeout}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/index.js"}],[2268,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},n=s;r.BaseControllerV1=s,r.BaseControllerV1_default=n}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[2269,{"./chunk-UJFCPTF3.js":2271,"./chunk-Z4BLTVTB.js":2272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,s).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,s).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,s).delete(e)}clearActions(){c.__privateGet.call(void 0,this,s).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(r)for(const[e,s]of r.entries())try{if(s){const r=c.__privateGet.call(void 0,this,a).get(e),n=s(...t);n!==r&&(c.__privateGet.call(void 0,this,a).set(e,n),e(n,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let s=c.__privateGet.call(void 0,this,n).get(e);if(s||(s=new Map,c.__privateGet.call(void 0,this,n).set(e,s)),s.set(t,r),r){const s=c.__privateGet.call(void 0,this,i).get(e);if(s){const e=r(...s());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,n).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,n).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[227,{"@metamask/utils":2787,lodash:4382,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,i.hasProperty)(e,"PhishingController")&&(0,i.isObject)(e.PhishingController))delete e.PhishingController.stalelistLastFetched,delete e.PhishingController.hotlistLastFetched;else if((0,i.hasProperty)(e,"PhishingController")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController))}else a.default.warn("typeof state.PhishingController is undefined");return e}(t.data),t},r.version=void 0;var s,n=e("lodash"),i=e("@metamask/utils"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=r.version=92}}},{package:"$root$",file:"app/scripts/migrations/092.ts"}],[2270,{"./chunk-Z4BLTVTB.js":2272,immer:4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((s,n)=>{try{const i=t[n];if(!i)throw new Error(`No metadata found for '${String(n)}'`);const a=i[r],o=e[n];return"function"==typeof a?s[n]=a(o):a&&(s[n]=o),s}catch(e){return setTimeout((()=>{throw e})),s}}),{})}s=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){n.__privateAdd.call(void 0,this,s,void 0),this.messagingSystem=e,this.name=r,n.__privateSet.call(void 0,this,s,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return n.__privateGet.call(void 0,this,s)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,n.__privateGet.call(void 0,this,s),e);return n.__privateSet.call(void 0,this,s,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,n.__privateGet.call(void 0,this,s),e);n.__privateSet.call(void 0,this,s,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[2271,{"./chunk-Z4BLTVTB.js":2272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,l,u,d,h,m=e("./chunk-Z4BLTVTB.js");s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=m.__privateGet.call(void 0,this,a);return m.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=m.__privateGet.call(void 0,this,i);return m.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${m.__privateGet.call(void 0,this,n)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){m.__privateAdd.call(void 0,this,o),m.__privateAdd.call(void 0,this,l),m.__privateAdd.call(void 0,this,d),m.__privateAdd.call(void 0,this,s,void 0),m.__privateAdd.call(void 0,this,n,void 0),m.__privateAdd.call(void 0,this,i,void 0),m.__privateAdd.call(void 0,this,a,void 0),m.__privateSet.call(void 0,this,s,e),m.__privateSet.call(void 0,this,n,t),m.__privateSet.call(void 0,this,i,r),m.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).registerActionHandler(e,t)}unregisterActionHandler(e){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).unregisterActionHandler(e)}call(e,...t){if(!m.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return m.__privateGet.call(void 0,this,s).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).publish(e,...t)}subscribe(e,t,r){if(!m.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?m.__privateGet.call(void 0,this,s).subscribe(e,t,r):m.__privateGet.call(void 0,this,s).subscribe(e,t)}unsubscribe(e,t){if(!m.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);m.__privateGet.call(void 0,this,s).unsubscribe(e,t)}clearEventSubscriptions(e){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,s).clearEventSubscriptions(e)}}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2272,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(s(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,n)=>(s(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(s(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2273,{"./chunk-FTHCJ6HY.js":2268,"./chunk-G42723LG.js":2269,"./chunk-IURK6TKD.js":2270,"./chunk-UJFCPTF3.js":2271,"./chunk-Z4BLTVTB.js":2272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-FTHCJ6HY.js"),n=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=n.BaseController,r.BaseControllerV1=s.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=n.getAnonymizedState,r.getPersistentState=n.getPersistentState}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/index.js"}],[2274,{"./chunk-PFNSOF67.js":2278,"@ethereumjs/util":459,"@metamask/ethjs-unit":1472,"@metamask/utils":2303,"bn.js":3528,buffer:3576,"eth-ens-namehash":3768,"fast-deep-equal":3902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-PFNSOF67.js"),i=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=s(e("bn.js")),l=s(e("eth-ens-namehash")),u=s(e("fast-deep-equal")),d=new Error("timeout"),h=["__proto__","constructor","prototype"];function m(e){return e?new(0,c.default)(o.remove0x.call(void 0,e),16):new(0,c.default)(0)}async function p(e,t){const r=await fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}async function f(e,t){const r=await p(e,t);return await r.json()}r.PROTOTYPE_POLLUTION_BLOCKLIST=h,r.isSafeDynamicKey=function(e){return"string"==typeof e&&!h.some((t=>e===t))},r.isSafeChainId=function(e){if(!o.isHexString.call(void 0,e))return!1;const t=Number.parseInt(e,o.isStrictHexString.call(void 0,e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=n.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return o.add0x.call(void 0,e.toString(16))},r.fractionBN=function(e,t,r){const s=new(0,c.default)(t),n=new(0,c.default)(r);return e.mul(s).div(n)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new(0,c.default)(0);const t=e.toString().split("."),r=t[0]||"0";let s=t[1]||"";if(!s)return a.toWei.call(void 0,r,"gwei");if(s.length<=9)return a.toWei.call(void 0,`${r}.${s}`,"gwei");const n=s.slice(9)[0];s=s.slice(0,9);let i=a.toWei.call(void 0,`${r}.${s}`,"gwei");return Number(n)>=5&&(i=i.add(new(0,c.default)(1))),i},r.weiHexToGweiDec=function(e){const t=new(0,c.default)(o.remove0x.call(void 0,e),16);return a.fromWei.call(void 0,t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return}},r.hexToBN=m,r.hexToText=function(e){try{const r=o.remove0x.call(void 0,e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new(0,c.default)(m(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&o.isStrictHexString.call(void 0,e)?e:`0x${c.default.isBN(e)?e.toString(16):new(0,c.default)(e.toString(),10).toString(16)}`},r.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return void(t&&console.error(e))}},r.safelyExecuteWithTimeout=async function(e,t=!1,r=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return void(t&&console.error(e))}},r.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=o.add0x.call(void 0,e);return o.isHexString.call(void 0,t)?i.toChecksumAddress.call(void 0,t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?o.add0x.call(void 0,e):e;return!!o.isStrictHexString.call(void 0,r)&&i.isValidAddress.call(void 0,r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=f,r.fetchWithErrorHandling=async function({url:e,options:t,timeout:r,errorCodesToCatch:s}){let n;try{n=r?Promise.race([await f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):await f(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==d)throw e;console.error(e)}(e,s)}return n},r.timeoutFetch=async function(e,t,r=500){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])},r.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((s,n)=>{const i=(e,t)=>{e?n(e):s(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))},r.convertHexToDecimal=(e="0x0")=>o.isStrictHexString.call(void 0,e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return u.default.call(void 0,e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-2CQ3YJMB.js"}],[2275,{"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/utils"),n=s.createProjectLogger.call(void 0,"controller-utils");r.createModuleLogger=s.createModuleLogger,r.projectLogger=n}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-DBJSLKNR.js"}],[2276,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},n={...s,rpc:"rpc"};var i=(e=>(e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e))(i||{}),a={mainnet:"0x1",goerli:"0x5",sepolia:"0xaa36a7",aurora:"0x4e454152","linea-goerli":"0xe704","linea-sepolia":"0xe705","linea-mainnet":"0xe708"},o=(e=>(e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc="",e))(o||{});r.InfuraNetworkType=s,r.NetworkType=n,r.isNetworkType=function(e){return Object.values(n).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(s).includes(e)},r.BuiltInNetworkName=i,r.ChainId=a,r.NetworksTicker=o}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-F775U3C2.js"}],[2277,{"./chunk-DBJSLKNR.js":2275,"@metamask/utils":2303,"@spruceid/siwe-parser":3058,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-DBJSLKNR.js"),n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),a=s.createModuleLogger.call(void 0,s.projectLogger,"detect-siwe");function o(e){try{const s="string"!=typeof(r=e)?r:n.remove0x.call(void 0,r),i=t.from(s,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return a(t),e}var r}var c={"http:":"80","https:":"443"},l=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.parseDomainParts=l,r.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:r}=e;if(!t||!r?.parsedMessage?.domain)return!1;const s=new URL(t),n=l(r.parsedMessage.domain,s.protocol);return 0===n.hostname.localeCompare(s.hostname,void 0,{sensitivity:"accent"})&&(""!==n.port&&n.port!==s.port?""===s.port&&n.port===c[s.protocol]:""===n.username||n.username===s.username)}catch(e){return a(e),!1}},r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new(0,i.ParsedMessage)(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-M6G3ISXG.js"}],[2278,{"./chunk-F775U3C2.js":2276},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-F775U3C2.js"),n={[s.NetworkType.goerli]:{chainId:s.ChainId.goerli,ticker:"GoerliETH",rpcPrefs:{blockExplorerUrl:`https://${s.NetworkType.goerli}.etherscan.io`}},[s.NetworkType.sepolia]:{chainId:s.ChainId.sepolia,ticker:"SepoliaETH",rpcPrefs:{blockExplorerUrl:`https://${s.NetworkType.sepolia}.etherscan.io`}},[s.NetworkType.mainnet]:{chainId:s.ChainId.mainnet,ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[s.NetworkType["linea-goerli"]]:{chainId:s.ChainId["linea-goerli"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[s.NetworkType["linea-sepolia"]]:{chainId:s.ChainId["linea-sepolia"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},[s.NetworkType["linea-mainnet"]]:{chainId:s.ChainId["linea-mainnet"],ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[s.NetworkType.rpc]:{chainId:void 0,blockExplorerUrl:void 0,ticker:void 0,rpcPrefs:void 0}},i=(e=>(e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SnapDialogDefault="snap_dialog",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset",e))(i||{}),a={[s.ChainId.goerli]:"goerli",[s.ChainId.sepolia]:"sepolia",[s.ChainId.mainnet]:"mainnet",[s.ChainId["linea-goerli"]]:"linea-goerli",[s.ChainId["linea-sepolia"]]:"linea-sepolia",[s.ChainId["linea-mainnet"]]:"linea-mainnet",[s.ChainId.aurora]:"aurora"};r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH"},r.BUILT_IN_NETWORKS=n,r.OPENSEA_PROXY_URL="https://proxy.api.cx.metamask.io/opensea/v1/api/v2",r.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",r.NFT_API_VERSION="1",r.NFT_API_TIMEOUT=15e3,r.ORIGIN_METAMASK="metamask",r.ApprovalType=i,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=a}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-PFNSOF67.js"}],[2279,{"./chunk-2CQ3YJMB.js":2274,"./chunk-DBJSLKNR.js":2275,"./chunk-F775U3C2.js":2276,"./chunk-M6G3ISXG.js":2277,"./chunk-PFNSOF67.js":2278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-M6G3ISXG.js");e("./chunk-DBJSLKNR.js");var n=e("./chunk-2CQ3YJMB.js"),i=e("./chunk-PFNSOF67.js"),a=e("./chunk-F775U3C2.js");r.ASSET_TYPES=i.ASSET_TYPES,r.ApprovalType=i.ApprovalType,r.BNToHex=n.BNToHex,r.BUILT_IN_NETWORKS=i.BUILT_IN_NETWORKS,r.BuiltInNetworkName=a.BuiltInNetworkName,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=i.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP,r.ChainId=a.ChainId,r.ERC1155=i.ERC1155,r.ERC1155_INTERFACE_ID=i.ERC1155_INTERFACE_ID,r.ERC1155_METADATA_URI_INTERFACE_ID=i.ERC1155_METADATA_URI_INTERFACE_ID,r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=i.ERC1155_TOKEN_RECEIVER_INTERFACE_ID,r.ERC20=i.ERC20,r.ERC721=i.ERC721,r.ERC721_ENUMERABLE_INTERFACE_ID=i.ERC721_ENUMERABLE_INTERFACE_ID,r.ERC721_INTERFACE_ID=i.ERC721_INTERFACE_ID,r.ERC721_METADATA_INTERFACE_ID=i.ERC721_METADATA_INTERFACE_ID,r.FALL_BACK_VS_CURRENCY=i.FALL_BACK_VS_CURRENCY,r.GANACHE_CHAIN_ID=i.GANACHE_CHAIN_ID,r.GWEI=i.GWEI,r.IPFS_DEFAULT_GATEWAY_URL=i.IPFS_DEFAULT_GATEWAY_URL,r.InfuraNetworkType=a.InfuraNetworkType,r.MAX_SAFE_CHAIN_ID=i.MAX_SAFE_CHAIN_ID,r.NFT_API_BASE_URL=i.NFT_API_BASE_URL,r.NFT_API_TIMEOUT=i.NFT_API_TIMEOUT,r.NFT_API_VERSION=i.NFT_API_VERSION,r.NetworkType=a.NetworkType,r.NetworksTicker=a.NetworksTicker,r.OPENSEA_PROXY_URL=i.OPENSEA_PROXY_URL,r.ORIGIN_METAMASK=i.ORIGIN_METAMASK,r.RPC=i.RPC,r.TESTNET_TICKER_SYMBOLS=i.TESTNET_TICKER_SYMBOLS,r.convertHexToDecimal=n.convertHexToDecimal,r.detectSIWE=s.detectSIWE,r.fetchWithErrorHandling=n.fetchWithErrorHandling,r.fractionBN=n.fractionBN,r.fromHex=n.fromHex,r.getBuyURL=n.getBuyURL,r.gweiDecToWEIBN=n.gweiDecToWEIBN,r.handleFetch=n.handleFetch,r.hexToBN=n.hexToBN,r.hexToText=n.hexToText,r.isInfuraNetworkType=a.isInfuraNetworkType,r.isNetworkType=a.isNetworkType,r.isNonEmptyArray=n.isNonEmptyArray,r.isPlainObject=n.isPlainObject,r.isSafeChainId=n.isSafeChainId,r.isSafeDynamicKey=n.isSafeDynamicKey,r.isSmartContractCode=n.isSmartContractCode,r.isValidHexAddress=n.isValidHexAddress,r.isValidJson=n.isValidJson,r.isValidSIWEOrigin=s.isValidSIWEOrigin,r.normalizeEnsName=n.normalizeEnsName,r.parseDomainParts=s.parseDomainParts,r.query=n.query,r.safelyExecute=n.safelyExecute,r.safelyExecuteWithTimeout=n.safelyExecuteWithTimeout,r.successfulFetch=n.successfulFetch,r.timeoutFetch=n.timeoutFetch,r.toChecksumHexAddress=n.toChecksumHexAddress,r.toHex=n.toHex,r.weiHexToGweiDec=n.weiHexToGweiDec}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/index.js"}],[228,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&(0,n.isObject)(e.NetworkController.providerConfig)){const{providerConfig:t}=e.NetworkController;return t.ticker?e:(e.NetworkController.providerConfig={ticker:"ETH",...t},{...e,NetworkController:e.NetworkController})}var t,r;if((0,n.isObject)(e.NetworkController)){if((0,n.isObject)(e.NetworkController)&&!(0,n.isObject)(e.NetworkController.providerConfig)){var s,i;null===(s=global.sentry)||void 0===s||null===(i=s.captureException)||void 0===i||i.call(s,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=93}}},{package:"$root$",file:"app/scripts/migrations/093.ts"}],[2280,{"./chunk-FYADAA2G.js":2285,"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-FYADAA2G.js"),n=e("@metamask/utils");function i(e){return n.hasProperty.call(void 0,e,"decorator")}r.isRestrictedMethodCaveatSpecification=i,r.decorateWithCaveats=function(e,t,r){const{caveats:n}=t;if(!n)return e;let a=async t=>e(t);for(const e of n){const t=r[e.type];if(!t)throw new(0,s.UnrecognizedCaveatTypeError)(e.type);if(!i(t))throw new(0,s.CaveatSpecificationMismatchError)(t,"RestrictedMethod");a=t.decorator(a,e)}return a}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-3YOPLPVY.js"}],[2281,{"./chunk-7A3VYLCK.js":2282,"./chunk-VBIZGGQL.js":2286,"./chunk-X4ZAW4QR.js":2289,"./chunk-Z2XKIXLS.js":2290},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-VBIZGGQL.js"),n=e("./chunk-7A3VYLCK.js"),i=e("./chunk-X4ZAW4QR.js"),a={};e("./chunk-Z2XKIXLS.js").__export.call(void 0,a,{handlers:()=>o});var o=[n.requestPermissionsHandler,s.getPermissionsHandler,i.revokePermissionsHandler];r.handlers=o,r.rpc_methods_exports=a}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-6PXDVUYM.js"}],[2282,{"./chunk-FYADAA2G.js":2285,"@metamask/controller-utils":2279},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-FYADAA2G.js"),n=e("@metamask/controller-utils"),i={methodNames:["wallet_requestPermissions"],implementation:async function(e,t,r,i,{requestPermissionsForOrigin:a}){const{params:o}=e;if(!Array.isArray(o)||!n.isPlainObject.call(void 0,o[0]))return i(s.invalidParams.call(void 0,{data:{request:e}}));const[c]=o,[l]=await a(c);return t.result=Object.values(l),i()},hookNames:{requestPermissionsForOrigin:!0}};r.requestPermissionsHandler=i}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-7A3VYLCK.js"}],[2283,{"./chunk-3YOPLPVY.js":2280,"./chunk-F5TBMVWC.js":2284,"./chunk-FYADAA2G.js":2285,"./chunk-VQPP5PWS.js":2287,"./chunk-Z2XKIXLS.js":2290,"./chunk-ZH4MLSXX.js":2291,"@metamask/base-controller":2273,"@metamask/controller-utils":2279,"@metamask/rpc-errors":2006,"@metamask/utils":2303,"deep-freeze-strict":3723,immer:4186,nanoid:2315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n=e("./chunk-3YOPLPVY.js"),i=e("./chunk-ZH4MLSXX.js"),a=e("./chunk-F5TBMVWC.js"),o=e("./chunk-FYADAA2G.js"),c=e("./chunk-VQPP5PWS.js"),l=e("./chunk-Z2XKIXLS.js"),u=e("@metamask/base-controller"),d=e("@metamask/controller-utils"),h=e("@metamask/rpc-errors"),m=e("@metamask/utils"),p=e("deep-freeze-strict"),f=(s=p)&&s.__esModule?s:{default:s},g=e("immer"),v=e("nanoid"),_="PermissionController";var y,k,w,b,T,S,E,P,I,A,j,C,x=(e=>(e[e.Noop=0]="Noop",e[e.UpdateValue=1]="UpdateValue",e[e.DeleteCaveat=2]="DeleteCaveat",e[e.RevokePermission=3]="RevokePermission",e))(x||{}),N=class extends u.BaseController{constructor(e){const{caveatSpecifications:t,permissionSpecifications:r,unrestrictedMethods:s,messenger:n,state:i={}}=e;super({name:_,metadata:{subjects:{anonymous:!0,persist:!0}},messenger:n,state:{subjects:{},...i}}),l.__privateAdd.call(void 0,this,y),l.__privateAdd.call(void 0,this,w),l.__privateAdd.call(void 0,this,T),l.__privateAdd.call(void 0,this,E),l.__privateAdd.call(void 0,this,I),l.__privateAdd.call(void 0,this,j),this._unrestrictedMethods=new Set(s),this._caveatSpecifications=f.default.call(void 0,{...t}),this.validatePermissionSpecifications(r,this._caveatSpecifications),this._permissionSpecifications=f.default.call(void 0,{...r}),this.registerMessageHandlers(),this.createPermissionMiddleware=a.getPermissionMiddlewareFactory.call(void 0,{executeRestrictedMethod:this._executeRestrictedMethod.bind(this),getRestrictedMethod:this.getRestrictedMethod.bind(this),isUnrestrictedMethod:this.unrestrictedMethods.has.bind(this.unrestrictedMethods)})}get unrestrictedMethods(){return this._unrestrictedMethods}getPermissionSpecification(e){return this._permissionSpecifications[e]}getCaveatSpecification(e){return this._caveatSpecifications[e]}validatePermissionSpecifications(e,t){Object.entries(e).forEach((([e,{permissionType:r,targetName:s,allowedCaveats:a}])=>{if(!r||!m.hasProperty.call(void 0,i.PermissionType,r))throw new Error(`Invalid permission type: "${r}"`);if(!e)throw new Error(`Invalid permission target name: "${e}"`);if(e!==s)throw new Error(`Invalid permission specification: target name "${e}" must match specification.targetName value "${s}".`);a&&a.forEach((e=>{if(!m.hasProperty.call(void 0,t,e))throw new(0,o.UnrecognizedCaveatTypeError)(e);const s=t[e],i=n.isRestrictedMethodCaveatSpecification.call(void 0,s);if("RestrictedMethod"===r&&!i||"Endowment"===r&&i)throw new(0,o.CaveatSpecificationMismatchError)(s,r)}))}))}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${_}:clearPermissions`,(()=>this.clearState())),this.messagingSystem.registerActionHandler(`${_}:getEndowments`,((e,t,r)=>this.getEndowments(e,t,r))),this.messagingSystem.registerActionHandler(`${_}:getSubjectNames`,(()=>this.getSubjectNames())),this.messagingSystem.registerActionHandler(`${_}:getPermissions`,(e=>this.getPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:hasPermission`,((e,t)=>this.hasPermission(e,t))),this.messagingSystem.registerActionHandler(`${_}:hasPermissions`,(e=>this.hasPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:grantPermissions`,this.grantPermissions.bind(this)),this.messagingSystem.registerActionHandler(`${_}:grantPermissionsIncremental`,this.grantPermissionsIncremental.bind(this)),this.messagingSystem.registerActionHandler(`${_}:requestPermissions`,((e,t)=>this.requestPermissions(e,t))),this.messagingSystem.registerActionHandler(`${_}:requestPermissionsIncremental`,((e,t)=>this.requestPermissionsIncremental(e,t))),this.messagingSystem.registerActionHandler(`${_}:revokeAllPermissions`,(e=>this.revokeAllPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:revokePermissionForAllSubjects`,(e=>this.revokePermissionForAllSubjects(e))),this.messagingSystem.registerActionHandler(`${_}:revokePermissions`,this.revokePermissions.bind(this)),this.messagingSystem.registerActionHandler(`${_}:updateCaveat`,((e,t,r,s)=>{this.updateCaveat(e,t,r,s)}))}clearState(){this.update((e=>({subjects:{}})))}getTypedPermissionSpecification(e,t,r){const s="RestrictedMethod"===e?o.methodNotFound.call(void 0,t,r?{origin:r}:void 0):new(0,o.EndowmentPermissionDoesNotExistError)(t,r);if(!this.targetExists(t))throw s;const n=this.getPermissionSpecification(t);if(!i.hasSpecificationType.call(void 0,n,e))throw s;return n}getRestrictedMethod(e,t){return this.getTypedPermissionSpecification("RestrictedMethod",e,t).methodImplementation}getSubjectNames(){return Object.keys(this.state.subjects)}getPermission(e,t){return this.state.subjects[e]?.permissions[t]}getPermissions(e){return this.state.subjects[e]?.permissions}hasPermission(e,t){return Boolean(this.getPermission(e,t))}hasPermissions(e){return Boolean(this.state.subjects[e])}revokeAllPermissions(e){this.update((t=>{if(!t.subjects[e])throw new(0,o.UnrecognizedSubjectError)(e);delete t.subjects[e]}))}revokePermission(e,t){this.revokePermissions({[e]:[t]})}revokePermissions(e){this.update((t=>{Object.keys(e).forEach((r=>{if(!m.hasProperty.call(void 0,t.subjects,r))throw new(0,o.UnrecognizedSubjectError)(r);e[r].forEach((e=>{const{permissions:s}=t.subjects[r];if(!m.hasProperty.call(void 0,s,e))throw new(0,o.PermissionDoesNotExistError)(r,e);this.deletePermission(t.subjects,r,e)}))}))}))}revokePermissionForAllSubjects(e){0!==this.getSubjectNames().length&&this.update((t=>{Object.entries(t.subjects).forEach((([r,s])=>{const{permissions:n}=s;m.hasProperty.call(void 0,n,e)&&this.deletePermission(t.subjects,r,e)}))}))}deletePermission(e,t,r){const{permissions:s}=e[t];Object.keys(s).length>1?delete s[r]:delete e[t]}hasCaveat(e,t,r){return Boolean(this.getCaveat(e,t,r))}getCaveat(e,t,r){const s=this.getPermission(e,t);if(!s)throw new(0,o.PermissionDoesNotExistError)(e,t);return i.findCaveat.call(void 0,s,r)}addCaveat(e,t,r,s){if(this.hasCaveat(e,t,r))throw new(0,o.CaveatAlreadyExistsError)(e,t,r);this.setCaveat(e,t,r,s)}updateCaveat(e,t,r,s){if(!this.hasCaveat(e,t,r))throw new(0,o.CaveatDoesNotExistError)(e,t,r);this.setCaveat(e,t,r,s)}setCaveat(e,t,r,s){this.update((n=>{const i=n.subjects[e];if(!i)throw new(0,o.UnrecognizedSubjectError)(e);const a=i.permissions[t];if(!a)throw new(0,o.PermissionDoesNotExistError)(e,t);const c={type:r,value:s};if(this.validateCaveat(c,e,t),a.caveats){const e=a.caveats.findIndex((e=>e.type===c.type));-1===e?a.caveats.push(c):a.caveats.splice(e,1,c)}else a.caveats=[c];this.validateModifiedPermission(a,e)}))}updatePermissionsByCaveat(e,t){0!==Object.keys(this.state.subjects).length&&this.update((r=>{Object.values(r.subjects).forEach((s=>{Object.values(s.permissions).forEach((n=>{const{caveats:i}=n,a=i?.find((({type:t})=>t===e));if(!a)return;const o=t(a.value),{operation:c}=o;switch(c){case 0:break;case 1:a.value=o.value,this.validateCaveat(a,s.origin,n.parentCapability);break;case 2:this.deleteCaveat(n,e,s.origin);break;case 3:this.deletePermission(r.subjects,s.origin,n.parentCapability);break;default:throw new Error(`Unrecognized mutation result: "${c}"`)}}))}))}))}removeCaveat(e,t,r){this.update((s=>{const n=s.subjects[e]?.permissions[t];if(!n)throw new(0,o.PermissionDoesNotExistError)(e,t);if(!n.caveats)throw new(0,o.CaveatDoesNotExistError)(e,t,r);this.deleteCaveat(n,r,e)}))}deleteCaveat(e,t,r){if(!e.caveats)throw new(0,o.CaveatDoesNotExistError)(r,e.parentCapability,t);const s=e.caveats.findIndex((e=>e.type===t));if(-1===s)throw new(0,o.CaveatDoesNotExistError)(r,e.parentCapability,t);1===e.caveats.length?e.caveats=null:e.caveats.splice(s,1),this.validateModifiedPermission(e,r)}validateModifiedPermission(e,t){if(!this.targetExists(e.parentCapability))throw new Error(`Fatal: Existing permission target "${e.parentCapability}" has no specification.`);this.validatePermission(this.getPermissionSpecification(e.parentCapability),e,t)}targetExists(e){return m.hasProperty.call(void 0,this._permissionSpecifications,e)}grantPermissions({approvedPermissions:e,requestData:t,preserveExistingPermissions:r=!0,subject:s}){return l.__privateMethod.call(void 0,this,w,b).call(this,{approvedPermissions:e,subject:s,mergePermissions:!1,preserveExistingPermissions:r,requestData:t})}grantPermissionsIncremental({approvedPermissions:e,requestData:t,subject:r}){return l.__privateMethod.call(void 0,this,w,b).call(this,{approvedPermissions:e,subject:r,mergePermissions:!0,preserveExistingPermissions:!0,requestData:t})}validatePermission(e,t,r,{invokePermissionValidator:s,performCaveatValidation:n}={invokePermissionValidator:!0,performCaveatValidation:!0}){const{allowedCaveats:i,validator:a,targetName:c}=e;if(e.subjectTypes?.length&&e.subjectTypes.length>0){const t=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",r);if(!t||null===t.subjectType||!e.subjectTypes.includes(t.subjectType))throw"RestrictedMethod"===e.permissionType?o.methodNotFound.call(void 0,c,{origin:r}):new(0,o.EndowmentPermissionDoesNotExistError)(c,r)}if(m.hasProperty.call(void 0,t,"caveats")){const{caveats:e}=t;if(null!==e&&!(Array.isArray(e)&&e.length>0))throw new(0,o.InvalidCaveatsPropertyError)(r,c,e);const s=new Set;e?.forEach((e=>{if(n&&this.validateCaveat(e,r,c),!i?.includes(e.type))throw new(0,o.ForbiddenCaveatError)(e.type,r,c);if(s.has(e.type))throw new(0,o.DuplicateCaveatError)(e.type,r,c);s.add(e.type)}))}s&&a&&a(t,r,c)}setValidatedPermissions(e,t){this.update((r=>{r.subjects[e]||(r.subjects[e]={origin:e,permissions:{}}),r.subjects[e].permissions=g.castDraft.call(void 0,t)}))}constructCaveats(e,t,r){const s=r?.map((r=>{this.validateCaveat(r,e,t);const{type:s,value:n}=r;return{type:s,value:n}}));return s&&d.isNonEmptyArray.call(void 0,s)?s:void 0}validateCaveat(e,t,r){if(!d.isPlainObject.call(void 0,e))throw new(0,o.InvalidCaveatError)(e,t,r);if(2!==Object.keys(e).length)throw new(0,o.InvalidCaveatFieldsError)(e,t,r);if("string"!=typeof e.type)throw new(0,o.InvalidCaveatTypeError)(e,t,r);const s=this.getCaveatSpecification(e.type);if(!s)throw new(0,o.UnrecognizedCaveatTypeError)(e.type,t,r);if(!m.hasProperty.call(void 0,e,"value")||void 0===e.value)throw new(0,o.CaveatMissingValueError)(e,t,r);if(!d.isValidJson.call(void 0,e.value))throw new(0,o.CaveatInvalidJsonError)(e,t,r);s.validator?.(e,t,r)}async requestPermissions(e,t,r={}){const{origin:s}=e,{id:n=v.nanoid.call(void 0),preserveExistingPermissions:i=!0}=r;this.validateRequestedPermissions(s,t);const a={...r.metadata,id:n,origin:s},o={metadata:a,permissions:t},c=await this.requestUserApproval(o);return await l.__privateMethod.call(void 0,this,j,C).call(this,{subject:e,metadata:a,preserveExistingPermissions:i,approvedRequest:c})}async requestPermissionsIncremental(e,t,r={}){const{origin:s}=e,{id:n=v.nanoid.call(void 0)}=r;this.validateRequestedPermissions(s,t);const i=this.getPermissions(s)??{},[a,c]=l.__privateMethod.call(void 0,this,T,S).call(this,i,t);if(void 0===a||void 0===c)return[];try{this.validateRequestedPermissions(s,a)}catch(e){if(e instanceof Error)throw new(0,o.InvalidMergedPermissionsError)(s,e,c);throw o.internalError.call(void 0,"Unrecognized error type",{error:e})}const u={...r.metadata,id:n,origin:s},d={metadata:u,permissions:a,diff:{currentPermissions:i,permissionDiffMap:c}},h=await this.requestUserApproval(d);return await l.__privateMethod.call(void 0,this,j,C).call(this,{subject:e,metadata:u,preserveExistingPermissions:!1,approvedRequest:h})}validateRequestedPermissions(e,t){if(!d.isPlainObject.call(void 0,t))throw o.invalidParams.call(void 0,{message:`Requested permissions for origin "${e}" is not a plain object.`,data:{origin:e,requestedPermissions:t}});if(0===Object.keys(t).length)throw o.invalidParams.call(void 0,{message:`Permissions request for origin "${e}" contains no permissions.`,data:{requestedPermissions:t}});for(const r of Object.keys(t)){const s=t[r];if(!this.targetExists(r))throw o.methodNotFound.call(void 0,r,{origin:e,requestedPermissions:t});if(!d.isPlainObject.call(void 0,s)||void 0!==s.parentCapability&&r!==s.parentCapability)throw o.invalidParams.call(void 0,{message:`Permissions request for origin "${e}" contains invalid requested permission(s).`,data:{origin:e,requestedPermissions:t}});this.validatePermission(this.getPermissionSpecification(r),s,e,{invokePermissionValidator:!1,performCaveatValidation:!0})}}async requestUserApproval(e){const{origin:t,id:r}=e.metadata,s=await this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:t,requestData:e,type:"wallet_requestPermissions"},!0);return this.validateApprovedPermissions(s,{id:r,origin:t}),s}getSideEffects(e){return Object.keys(e).reduce(((e,t)=>{if(this.targetExists(t)){const r=this.getPermissionSpecification(t);r.sideEffect&&(e.permittedHandlers[t]=r.sideEffect.onPermitted,r.sideEffect.onFailure&&(e.failureHandlers[t]=r.sideEffect.onFailure))}return e}),{permittedHandlers:{},failureHandlers:{}})}async executeSideEffects(e,t){const{permittedHandlers:r,failureHandlers:s}=e,n={requestData:t,messagingSystem:this.messagingSystem},i=await Promise.allSettled(Object.values(r).map((e=>e(n)))),a=i.filter((e=>"rejected"===e.status));if(a.length>0){const e=Object.values(s);if(e.length>0)try{await Promise.all(e.map((e=>e(n))))}catch(e){throw o.internalError.call(void 0,"Unexpected error in side-effects",{error:e})}const t=a.map((e=>e.reason));throw t.forEach((e=>{console.error(e)})),t.length>1?o.internalError.call(void 0,"Multiple errors occurred during side-effects execution",{errors:t}):t[0]}return i.map((({value:e})=>e))}validateApprovedPermissions(e,t){const{id:r,origin:s}=t;if(!d.isPlainObject.call(void 0,e)||!d.isPlainObject.call(void 0,e.metadata))throw o.internalError.call(void 0,`Approved permissions request for subject "${s}" is invalid.`,{data:{approvedRequest:e}});const{metadata:{id:n,origin:i},permissions:a}=e;if(n!==r)throw o.internalError.call(void 0,`Approved permissions request for subject "${s}" mutated its id.`,{originalId:r,mutatedId:n});if(i!==s)throw o.internalError.call(void 0,`Approved permissions request for subject "${s}" mutated its origin.`,{originalOrigin:s,mutatedOrigin:i});try{this.validateRequestedPermissions(s,a)}catch(e){if(e instanceof Error)throw o.internalError.call(void 0,`Invalid approved permissions request: ${e.message}`,e instanceof h.JsonRpcError?e.data:void 0);throw o.internalError.call(void 0,"Unrecognized error type",{error:e})}}async acceptPermissionsRequest(e){const{id:t}=e.metadata;if(!this.hasApprovalRequest({id:t}))throw new(0,o.PermissionsRequestNotFoundError)(t);if(0!==Object.keys(e.permissions).length)try{await this.messagingSystem.call("ApprovalController:acceptRequest",t,e)}catch(e){throw this._rejectPermissionsRequest(t,e),e}else this._rejectPermissionsRequest(t,o.invalidParams.call(void 0,{message:"Must request at least one permission."}))}async rejectPermissionsRequest(e){if(!this.hasApprovalRequest({id:e}))throw new(0,o.PermissionsRequestNotFoundError)(e);this._rejectPermissionsRequest(e,o.userRejectedRequest.call(void 0))}hasApprovalRequest(e){return this.messagingSystem.call("ApprovalController:hasRequest",e)}_rejectPermissionsRequest(e,t){return this.messagingSystem.call("ApprovalController:rejectRequest",e,t)}async getEndowments(e,t,r){if(!this.hasPermission(e,t))throw o.unauthorized.call(void 0,{data:{origin:e,targetName:t}});return this.getTypedPermissionSpecification("Endowment",t,e).endowmentGetter({origin:e,requestData:r})}async executeRestrictedMethod(e,t,r){const s=this.getRestrictedMethod(t,e),n=await this._executeRestrictedMethod(s,{origin:e},t,r);if(void 0===n)throw new Error(`Internal request for method "${t}" as origin "${e}" returned no result.`);return n}_executeRestrictedMethod(e,t,r,s=[]){const{origin:i}=t,a=this.getPermission(i,r);if(!a)throw o.unauthorized.call(void 0,{data:{origin:i,method:r}});return n.decorateWithCaveats.call(void 0,e,a,this._caveatSpecifications)({method:r,params:s,context:{origin:i}})}};y=new WeakSet,k=function(e){const{merger:t}=this.getCaveatSpecification(e);if(void 0===t)throw new(0,o.CaveatMergerDoesNotExistError)(e);return t},w=new WeakSet,b=function({approvedPermissions:e,subject:t,mergePermissions:r,preserveExistingPermissions:s,requestData:n}){const{origin:a}=t;if(!a||"string"!=typeof a)throw new(0,o.InvalidSubjectIdentifierError)(a);const c=s?{...this.getPermissions(a)}:{};for(const[t,s]of Object.entries(e)){if(!this.targetExists(t))throw o.methodNotFound.call(void 0,t);if(void 0!==s.parentCapability&&t!==s.parentCapability)throw new(0,o.InvalidApprovedPermissionError)(a,t,s);const e=t,u=this.getPermissionSpecification(e),d={caveats:this.constructCaveats(a,e,s.caveats),invoker:a,target:e};let h,m=!0;u.factory?h=u.factory(d,n):(h=i.constructPermission.call(void 0,d),m=!1),r&&(h=l.__privateMethod.call(void 0,this,E,P).call(this,c[e],h)[0]),this.validatePermission(u,h,a,{invokePermissionValidator:!0,performCaveatValidation:m}),c[e]=h}return this.setValidatedPermissions(a,c),c},T=new WeakSet,S=function(e,t){const r={},s=g.produce.call(void 0,e,(e=>{const s=e;Object.entries(t).forEach((([e,t])=>{const n=s[e],[i,a]=l.__privateMethod.call(void 0,this,E,P).call(this,n??{},t);(void 0===n||Object.keys(a).length>0)&&(s[e]=i,r[e]=a)}))}));return 0===Object.keys(r).length?[]:[s,r]},E=new WeakSet,P=function(e,t){const{caveatPairs:r,leftUniqueCaveats:s,rightUniqueCaveats:n}=c.collectUniqueAndPairedCaveats.call(void 0,e,t),[i,a]=r.reduce((([e,t],[r,s])=>{const[n,i]=l.__privateMethod.call(void 0,this,I,A).call(this,r,s);return void 0!==n&&void 0!==i?(e.push(n),t[n.type]=i):e.push(r),[e,t]}),[[],{}]),o=[...i,...s,...n.map((e=>{const[t,r]=l.__privateMethod.call(void 0,this,I,A).call(this,void 0,e);return a[t.type]=r,t}))];return[{...e,...t,...o.length>0?{caveats:o}:{}},a]},I=new WeakSet,A=function(e,t){if(void 0!==e&&e.type!==t.type)throw new(0,o.CaveatMergeTypeMismatchError)(e.type,t.type);const r=l.__privateMethod.call(void 0,this,y,k).call(this,t.type);if(void 0===e)return[{...t},t.value];const[s,n]=r(e.value,t.value);return void 0!==s&&void 0!==n?[{type:t.type,value:s},n]:[]},j=new WeakSet,C=async function({subject:e,metadata:t,preserveExistingPermissions:r,approvedRequest:s}){const{permissions:n,...i}=s,a={...t},o=this.getSideEffects(n);if(Object.values(o.permittedHandlers).length>0){const e=await this.executeSideEffects(o,s);a.data=Object.keys(o.permittedHandlers).reduce(((t,r,s)=>({[r]:e[s],...t})),{})}return[this.grantPermissions({subject:e,approvedPermissions:n,preserveExistingPermissions:r,requestData:i}),a]},r.CaveatMutatorOperation=x,r.PermissionController=N}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-B6PDRQ7N.js"}],[2284,{"./chunk-FYADAA2G.js":2285,"@metamask/json-rpc-engine":1516},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-FYADAA2G.js"),n=e("@metamask/json-rpc-engine");r.getPermissionMiddlewareFactory=function({executeRestrictedMethod:e,getRestrictedMethod:t,isUnrestrictedMethod:r}){return function(i){const{origin:a}=i;if("string"!=typeof a||!a)throw new Error('The subject "origin" must be a non-empty string.');return n.createAsyncMiddleware.call(void 0,(async(n,o,c)=>{const{method:l,params:u}=n;if(r(l))return c();const d=t(l,a),h=await e(d,i,l,u);void 0!==h?o.result=h:o.error=s.internalError.call(void 0,`Request for method "${n.method}" returned undefined result.`,{request:n})}))}}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-F5TBMVWC.js"}],[2285,{"@metamask/rpc-errors":2006},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/rpc-errors");var n=class extends Error{constructor(e){super(`Invalid subject identifier: "${"string"==typeof e?e:typeof e}"`)}},i=class extends Error{constructor(e){super(`Unrecognized subject: "${e}" has no permissions.`)}},a=class extends Error{constructor(e){super(`Caveat value merger does not exist for type: "${e}"`)}},o=class extends Error{constructor(e,t,r){super(`Invalid merged permissions for subject "${e}":\n${t.message}`),this.cause=t,this.data={diff:r}}},c=class extends Error{constructor(e,t,r){super(`Invalid approved permission for origin "${e}" and target "${t}".`),this.data={origin:e,target:t,approvedPermission:r}}},l=class extends Error{constructor(e,t){super(`Subject "${e}" has no permission for "${t}".`)}},u=class extends Error{constructor(e,t){super(`${t?`Subject "${t}"`:"Unknown subject"} has no permission for "${e}".`),t&&(this.data={origin:t})}},d=class extends Error{constructor(e,t,r){super(`Unrecognized caveat type: "${e}"`),this.data={caveatType:e},void 0!==t&&(this.data.origin=t),void 0!==r&&(this.data.target=r)}},h=class extends Error{constructor(e,t,r){super(`The "caveats" property of permission for "${t}" of subject "${e}" is invalid. It must be a non-empty array if specified.`),this.data={origin:e,target:t,caveatsProperty:r}}},m=class extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" has no caveat of type "${r}".`)}},p=class extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" already has a caveat of type "${r}".`)}},f=class extends s.JsonRpcError{constructor(e,t,r){super(s.errorCodes.rpc.invalidParams,"Invalid caveat. Caveats must be plain objects.",{receivedCaveat:e}),this.data={origin:t,target:r}}},g=class extends Error{constructor(e,t,r){super(`Caveat types must be strings. Received: "${typeof e.type}"`),this.data={caveat:e,origin:t,target:r}}},v=class extends Error{constructor(e,t,r){super('Caveat is missing "value" field.'),this.data={caveat:e,origin:t,target:r}}},_=class extends Error{constructor(e,t,r){super('Caveat "value" is invalid JSON.'),this.data={caveat:e,origin:t,target:r}}},y=class extends Error{constructor(e,t,r){super(`Caveat has unexpected number of fields: "${Object.keys(e).length}"`),this.data={caveat:e,origin:t,target:r}}},k=class extends Error{constructor(e,t,r){super(`Permissions for target "${r}" may not have caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}},w=class extends Error{constructor(e,t,r){super(`Permissions for target "${r}" contains multiple caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}},b=class extends Error{constructor(e,t){super(`Cannot merge caveats of different types: "${e}" and "${t}".`),this.data={leftCaveatType:e,rightCaveatType:t}}},T=class extends Error{constructor(e,t){super(`Caveat specification uses a mismatched type. Expected caveats for ${t}`),this.data={caveatSpec:e,permissionType:t}}},S=class extends Error{constructor(e){super(`Permissions request with id "${e}" not found.`)}};r.unauthorized=function(e){return s.providerErrors.unauthorized({message:"Unauthorized to perform action. Try requesting the required permission(s) first. For more information, see: https://docs.metamask.io/guide/rpc-api.html#permissions",data:e.data})},r.methodNotFound=function(e,t){const r={message:`The method "${e}" does not exist / is not available.`};return void 0!==t&&(r.data=t),s.rpcErrors.methodNotFound(r)},r.invalidParams=function(e){return s.rpcErrors.invalidParams({data:e.data,message:e.message})},r.userRejectedRequest=function(e){return s.providerErrors.userRejectedRequest({data:e})},r.internalError=function(e,t){return s.rpcErrors.internal({message:e,data:t})},r.InvalidSubjectIdentifierError=n,r.UnrecognizedSubjectError=i,r.CaveatMergerDoesNotExistError=a,r.InvalidMergedPermissionsError=o,r.InvalidApprovedPermissionError=c,r.PermissionDoesNotExistError=l,r.EndowmentPermissionDoesNotExistError=u,r.UnrecognizedCaveatTypeError=d,r.InvalidCaveatsPropertyError=h,r.CaveatDoesNotExistError=m,r.CaveatAlreadyExistsError=p,r.InvalidCaveatError=f,r.InvalidCaveatTypeError=g,r.CaveatMissingValueError=v,r.CaveatInvalidJsonError=_,r.InvalidCaveatFieldsError=y,r.ForbiddenCaveatError=k,r.DuplicateCaveatError=w,r.CaveatMergeTypeMismatchError=b,r.CaveatSpecificationMismatchError=T,r.PermissionsRequestNotFoundError=S}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-FYADAA2G.js"}],[2286,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s={methodNames:["wallet_getPermissions"],implementation:async function(e,t,r,s,{getPermissionsForOrigin:n}){return t.result=Object.values(n()||{}),s()},hookNames:{getPermissionsForOrigin:!0}};r.getPermissionsHandler=s}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-VBIZGGQL.js"}],[2287,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=(e=>(e.RequestPermissions="wallet_requestPermissions",e.GetPermissions="wallet_getPermissions",e.RevokePermissions="wallet_revokePermissions",e))(s||{});r.MethodNames=s,r.collectUniqueAndPairedCaveats=function(e,t){const r=e?.caveats?.slice()??[],s=t.caveats?.slice()??[],n=[],i=[];return r.forEach((e=>{const t=s.findIndex((t=>t.type===e.type));-1===t?n.push(e):(i.push([e,s[t]]),s.splice(t,1))})),{caveatPairs:i,leftUniqueCaveats:n,rightUniqueCaveats:[...s]}}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-VQPP5PWS.js"}],[2288,{"@metamask/base-controller":2273},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/base-controller"),n=(e=>(e.Extension="extension",e.Internal="internal",e.Unknown="unknown",e.Website="website",e.Snap="snap",e))(n||{}),i={subjectMetadata:{persist:!0,anonymous:!1}},a={subjectMetadata:{}},o=class e extends s.BaseController{constructor({messenger:t,subjectCacheLimit:r,state:s={}}){if(!Number.isInteger(r)||r<1)throw new Error(`subjectCacheLimit must be a positive integer. Received: "${r}"`);const n=e=>t.call("PermissionController:hasPermissions",e);super({name:"SubjectMetadataController",metadata:i,messenger:t,state:{...e.getTrimmedState(s,n)}}),this.subjectHasPermissions=n,this.subjectCacheLimit=r,this.subjectsWithoutPermissionsEncounteredSinceStartup=new Set,this.messagingSystem.registerActionHandler(`${this.name}:getSubjectMetadata`,this.getSubjectMetadata.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:addSubjectMetadata`,this.addSubjectMetadata.bind(this))}clearState(){this.subjectsWithoutPermissionsEncounteredSinceStartup.clear(),this.update((e=>({...a})))}addSubjectMetadata(e){const{origin:t}=e,r={...e,extensionId:e.extensionId||null,iconUrl:e.iconUrl||null,name:e.name||null,subjectType:e.subjectType||null};let s=null;if(this.subjectsWithoutPermissionsEncounteredSinceStartup.size>=this.subjectCacheLimit){const e=this.subjectsWithoutPermissionsEncounteredSinceStartup.values().next().value;this.subjectsWithoutPermissionsEncounteredSinceStartup.delete(e),this.subjectHasPermissions(e)||(s=e)}this.subjectsWithoutPermissionsEncounteredSinceStartup.add(t),this.update((e=>{e.subjectMetadata[t]=r,"string"==typeof s&&delete e.subjectMetadata[s]}))}getSubjectMetadata(e){return this.state.subjectMetadata[e]}trimMetadataState(){this.update((t=>e.getTrimmedState(t,this.subjectHasPermissions)))}static getTrimmedState(e,t){const{subjectMetadata:r={}}=e;return{subjectMetadata:Object.keys(r).reduce(((e,s)=>(t(s)&&(e[s]=r[s]),e)),{})}}};r.SubjectType=n,r.SubjectMetadataController=o}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-VSDHL2GQ.js"}],[2289,{"./chunk-FYADAA2G.js":2285,"@metamask/utils":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-FYADAA2G.js"),n=e("@metamask/utils"),i={methodNames:["wallet_revokePermissions"],implementation:async function(e,t,r,i,{revokePermissionsForOrigin:a}){const{params:o}=e,c=o?.[0];if(!c)return i(s.invalidParams.call(void 0,{data:{request:e}}));const l=Object.keys(c);if(!n.isNonEmptyArray.call(void 0,l))return i(s.invalidParams.call(void 0,{data:{request:e}}));return a(l),t.result=null,i()},hookNames:{revokePermissionsForOrigin:!0}};r.revokePermissionsHandler=i}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-X4ZAW4QR.js"}],[229,{"@metamask/controller-utils":1250,"@metamask/network-controller":1795,"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&(0,n.isObject)(e.NetworkController.providerConfig)&&((0,n.hasProperty)(e.NetworkController.providerConfig,"id")||(0,n.hasProperty)(e.NetworkController.providerConfig,"type")&&e.NetworkController.providerConfig.type!==a.NetworkType.rpc)){const t=e.NetworkController.providerConfig.id||e.NetworkController.providerConfig.type;if(!t||"string"!=typeof t)return e;const r={[t]:{EIPS:{},status:i.NetworkStatus.Unknown}};if((0,n.hasProperty)(e.NetworkController,"networkDetails")&&(0,n.isObject)(e.NetworkController.networkDetails)){const{networkDetails:s}=e.NetworkController;s.EIPS&&(0,n.isObject)(s.EIPS)&&(r[t].EIPS={...s.EIPS}),delete e.NetworkController.networkDetails}return(0,n.hasProperty)(e.NetworkController,"networkStatus")&&"string"==typeof e.NetworkController.networkStatus&&(r[t].status=e.NetworkController.networkStatus,delete e.NetworkController.networkStatus),{...e,NetworkController:{...e.NetworkController,networksMetadata:r,selectedNetworkClientId:t}}}var t,r;if((0,n.isObject)(e.NetworkController)){if((0,n.isObject)(e.NetworkController)&&!(0,n.isObject)(e.NetworkController.providerConfig)){var s,o;null===(s=global.sentry)||void 0===s||null===(o=s.captureException)||void 0===o||o.call(s,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}else if((0,n.isObject)(e.NetworkController)&&(0,n.isObject)(e.NetworkController.providerConfig)){var c,l;null===(c=global.sentry)||void 0===c||null===(l=c.captureException)||void 0===l||l.call(c,new Error(`typeof state.NetworkController.providerConfig.id is ${typeof e.NetworkController.providerConfig.id} and state.NetworkController.providerConfig.type is ${e.NetworkController.providerConfig.type}`))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils"),i=e("@metamask/network-controller"),a=e("@metamask/controller-utils");const o=r.version=94}}},{package:"$root$",file:"app/scripts/migrations/094.ts"}],[2290,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=Object.defineProperty;r.__export=(e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})},r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateMethod=(e,t,r)=>(((e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)})(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-Z2XKIXLS.js"}],[2291,{nanoid:2315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("nanoid");var n=(e=>(e.RestrictedMethod="RestrictedMethod",e.Endowment="Endowment",e))(n||{});r.constructPermission=function(e){const{caveats:t=null,invoker:r,target:n}=e;return{id:s.nanoid.call(void 0),parentCapability:n,invoker:r,caveats:t,date:(new Date).getTime()}},r.findCaveat=function(e,t){return e.caveats?.find((e=>e.type===t))},r.PermissionType=n,r.hasSpecificationType=function(e,t){return e.permissionType===t}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-ZH4MLSXX.js"}],[2292,{"./chunk-3YOPLPVY.js":2280,"./chunk-6PXDVUYM.js":2281,"./chunk-7A3VYLCK.js":2282,"./chunk-B6PDRQ7N.js":2283,"./chunk-F5TBMVWC.js":2284,"./chunk-FYADAA2G.js":2285,"./chunk-VBIZGGQL.js":2286,"./chunk-VQPP5PWS.js":2287,"./chunk-VSDHL2GQ.js":2288,"./chunk-X4ZAW4QR.js":2289,"./chunk-Z2XKIXLS.js":2290,"./chunk-ZH4MLSXX.js":2291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-6PXDVUYM.js");e("./chunk-VBIZGGQL.js"),e("./chunk-7A3VYLCK.js"),e("./chunk-X4ZAW4QR.js");var n=e("./chunk-B6PDRQ7N.js"),i=e("./chunk-3YOPLPVY.js"),a=e("./chunk-ZH4MLSXX.js"),o=e("./chunk-VSDHL2GQ.js");e("./chunk-F5TBMVWC.js");var c=e("./chunk-FYADAA2G.js"),l=e("./chunk-VQPP5PWS.js");e("./chunk-Z2XKIXLS.js"),r.CaveatAlreadyExistsError=c.CaveatAlreadyExistsError,r.CaveatDoesNotExistError=c.CaveatDoesNotExistError,r.CaveatInvalidJsonError=c.CaveatInvalidJsonError,r.CaveatMergeTypeMismatchError=c.CaveatMergeTypeMismatchError,r.CaveatMergerDoesNotExistError=c.CaveatMergerDoesNotExistError,r.CaveatMissingValueError=c.CaveatMissingValueError,r.CaveatMutatorOperation=n.CaveatMutatorOperation,r.CaveatSpecificationMismatchError=c.CaveatSpecificationMismatchError,r.DuplicateCaveatError=c.DuplicateCaveatError,r.EndowmentPermissionDoesNotExistError=c.EndowmentPermissionDoesNotExistError,r.ForbiddenCaveatError=c.ForbiddenCaveatError,r.InvalidApprovedPermissionError=c.InvalidApprovedPermissionError,r.InvalidCaveatError=c.InvalidCaveatError,r.InvalidCaveatFieldsError=c.InvalidCaveatFieldsError,r.InvalidCaveatTypeError=c.InvalidCaveatTypeError,r.InvalidCaveatsPropertyError=c.InvalidCaveatsPropertyError,r.InvalidMergedPermissionsError=c.InvalidMergedPermissionsError,r.InvalidSubjectIdentifierError=c.InvalidSubjectIdentifierError,r.MethodNames=l.MethodNames,r.PermissionController=n.PermissionController,r.PermissionDoesNotExistError=c.PermissionDoesNotExistError,r.PermissionType=a.PermissionType,r.PermissionsRequestNotFoundError=c.PermissionsRequestNotFoundError,r.SubjectMetadataController=o.SubjectMetadataController,r.SubjectType=o.SubjectType,r.UnrecognizedCaveatTypeError=c.UnrecognizedCaveatTypeError,r.UnrecognizedSubjectError=c.UnrecognizedSubjectError,r.constructPermission=a.constructPermission,r.decorateWithCaveats=i.decorateWithCaveats,r.findCaveat=a.findCaveat,r.hasSpecificationType=a.hasSpecificationType,r.internalError=c.internalError,r.invalidParams=c.invalidParams,r.isRestrictedMethodCaveatSpecification=i.isRestrictedMethodCaveatSpecification,r.methodNotFound=c.methodNotFound,r.permissionRpcMethods=s.rpc_methods_exports,r.unauthorized=c.unauthorized,r.userRejectedRequest=c.userRejectedRequest}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/index.js"}],[2293,{"./errors.cjs":2301,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const s=e("@metamask/superstruct"),n=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,s.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.cjs"}],[2294,{"./assert.cjs":2293,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,s.pattern)(e,o)}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/base64.cjs"}],[2295,{"./assert.cjs":2293,"./hex.cjs":2302,"@scure/base":2845,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const s=e("@scure/base"),n=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function d(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=l(),r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=t[e[s]];return(0,i.add0x)(r.join(""))}function m(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,s=new Uint8Array(r.length/2);for(let e=0;e<s.length;e++){const t=r.charCodeAt(2*e),n=r.charCodeAt(2*e+1),i=t-(t<o?a:c),l=n-(n<o?a:c);s[e]=16*i+l}return s}function f(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function v(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function _(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):v(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=m,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=m(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),s.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=f,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=g,r.stringToBytes=v,r.base64ToBytes=function(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),s.base64.decode(e)},r.valueToBytes=_,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let s=0;s<e.length;s++){const n=_(e[s]);t[s]=n,r+=n.length}const s=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)s.set(t[e],r),r+=t[e].length;return s},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/bytes.cjs"}],[2296,{"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const s=e("@metamask/superstruct");function n(e){return(0,s.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,s.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,s.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=n,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,s.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,s.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!n(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2297,{"./base64.cjs":2294,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const s=e("@metamask/superstruct"),n=e("./base64.cjs");r.ChecksumStruct=(0,s.size)((0,n.base64)((0,s.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/checksum.cjs"}],[2298,{"./assert.cjs":2293,"./bytes.cjs":2295,"./hex.cjs":2302,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,s.union)([(0,s.number)(),(0,s.bigint)(),(0,s.string)(),a.StrictHexStruct]),c=(0,s.coerce)((0,s.number)(),o,Number),l=(0,s.coerce)((0,s.bigint)(),o,BigInt),u=((0,s.union)([a.StrictHexStruct,(0,s.instance)(Uint8Array)]),(0,s.coerce)((0,s.instance)(Uint8Array),(0,s.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,s.coerce)(a.StrictHexStruct,(0,s.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,s.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof s.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,s.create)(e,l)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,s.create)(e,u)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,s.create)(e,d)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/coercers.cjs"}],[2299,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}get(e){return i(this,s,"f").get(e)}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/collections.cjs"}],[23,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.processOnChainNotification=function(e){return{...e,id:e.id,createdAt:new Date(e.created_at).toISOString(),isRead:!e.unread}}}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/processors/process-onchain-notifications.ts"}],[230,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=n,function(e){(function(e){var t,r;const s=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(s).length)return;const n=(null===(r=e.TransactionController)||void 0===r?void 0:r.transactions)||{},i=Object.values(s).reduce(((e,t)=>(e[t.id]=t,e)),n);e.TransactionController={...e.TransactionController||{},transactions:i}})(e),function(e){var t;const r=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(r).length)return;const s={};for(const e of Object.values(r)){if(!e.blockNumber||!e.chainId||!e.txParams.to)continue;const t=parseInt(e.blockNumber,10),r=`${e.chainId}#${e.txParams.to.toLowerCase()}`,n=s[r]||-1;s[r]=Math.max(n,t)}e.TransactionController={...e.TransactionController,lastFetchedBlockNumbers:s}}(e),function(e){delete e.IncomingTransactionsController}(e)}(t.data),t},r.version=void 0;var s=e("lodash");const n=r.version=95}}},{package:"$root$",file:"app/scripts/migrations/095.ts"}],[2300,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2301,{"./misc.cjs":2307,"pony-cause":4519},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const s=e("pony-cause"),n=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,n.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new s.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/errors.cjs"}],[2302,{"./assert.cjs":2293,"./bytes.cjs":2295,"@metamask/superstruct":2643,"@noble/hashes/sha3":2827},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const s=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,s.is)(e,r.HexStruct)}function c(e){return(0,s.is)(e,r.StrictHexStruct)}function l(e){(0,i.assert)((0,s.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,s.is)(r,(0,s.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function u(e){return!!(0,s.is)(e,r.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,s.pattern)((0,s.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,s.is)(e,r.HexAddressStruct)||u(e)},r.getChecksumAddress=l,r.isValidChecksumAddress=u,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/hex.cjs"}],[2303,{"./assert.cjs":2293,"./base64.cjs":2294,"./bytes.cjs":2295,"./caip-types.cjs":2296,"./checksum.cjs":2297,"./coercers.cjs":2298,"./collections.cjs":2299,"./encryption-types.cjs":2300,"./errors.cjs":2301,"./hex.cjs":2302,"./json.cjs":2304,"./keyring.cjs":2305,"./logging.cjs":2306,"./misc.cjs":2307,"./number.cjs":2308,"./opaque.cjs":2309,"./promise.cjs":2310,"./time.cjs":2311,"./transaction-types.cjs":2312,"./versions.cjs":2313},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./assert.cjs"),r),n(e("./base64.cjs"),r),n(e("./bytes.cjs"),r),n(e("./caip-types.cjs"),r),n(e("./checksum.cjs"),r),n(e("./coercers.cjs"),r),n(e("./collections.cjs"),r),n(e("./encryption-types.cjs"),r),n(e("./errors.cjs"),r),n(e("./hex.cjs"),r),n(e("./json.cjs"),r),n(e("./keyring.cjs"),r),n(e("./logging.cjs"),r),n(e("./misc.cjs"),r),n(e("./number.cjs"),r),n(e("./opaque.cjs"),r),n(e("./promise.cjs"),r),n(e("./time.cjs"),r),n(e("./transaction-types.cjs"),r),n(e("./versions.cjs"),r)}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.cjs"}],[2304,{"./assert.cjs":2293,"./misc.cjs":2307,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new s.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,s.object)(e),r.exactOptional=o;function c(e){return(0,s.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,s.union)([(0,s.literal)(null),(0,s.boolean)(),(0,s.define)("finite number",(e=>(0,s.is)(e,(0,s.number)())&&Number.isFinite(e))),(0,s.string)(),(0,s.array)((0,s.lazy)((()=>r.UnsafeJsonStruct))),(0,s.record)((0,s.string)(),(0,s.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,s.coerce)(r.UnsafeJsonStruct,(0,s.any)(),(e=>((0,n.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,n.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,s.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,s.nullable)((0,s.union)([(0,s.number)(),(0,s.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,s.integer)(),message:(0,s.string)(),data:o(r.JsonStruct),stack:o((0,s.string)())}),r.JsonRpcParamsStruct=(0,s.union)([(0,s.record)((0,s.string)(),r.JsonStruct),(0,s.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,s.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,s.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,s.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,s.optional)((0,s.unknown)()),error:(0,s.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,s.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,s.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,s.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,s.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,s.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,s.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:s}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||s&&null===e)}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/json.cjs"}],[2305,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/keyring.cjs"}],[2306,{debug:3721},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const n=(0,s(e("debug")).default)("metamask");r.createProjectLogger=function(e){return n.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/logging.cjs"}],[2307,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function s(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=s,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>s(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/misc.cjs"}],[2308,{"./assert.cjs":2293,"./hex.cjs":2302},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const s=e("./assert.cjs"),n=e("./hex.cjs");r.numberToHex=e=>((0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/number.cjs"}],[2309,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/opaque.cjs"}],[231,{"../../../shared/constants/network":5047,"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=a,function(e){if(!((0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.PreferencesController,"featureFlags")&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")))return e;const{PreferencesController:t,NetworkController:r}=e,{featureFlags:a}=t,{showIncomingTransactions:o}=a,{networkConfigurations:c}=r,l=Object.values(c).map((e=>e.chainId)),u=[i.CHAIN_IDS.MAINNET,i.CHAIN_IDS.LINEA_MAINNET],d=[i.CHAIN_IDS.GOERLI,i.CHAIN_IDS.SEPOLIA,i.CHAIN_IDS.LINEA_GOERLI],h=[...u,...l,...d],m=(0,s.fromPairs)((0,s.map)(h,(e=>[e,o])));(null==a?void 0:a.showIncomingTransactions)!==undefined&&delete a.showIncomingTransactions;e.PreferencesController.incomingTransactionsPreferences=m}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils"),i=e("../../../shared/constants/network");const a=r.version=96}}},{package:"$root$",file:"app/scripts/migrations/096.ts"}],[2310,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const s=new Promise(((e,s)=>{t=e,r=s}));return e&&s.catch((e=>{})),{promise:s,resolve:t,reject:r}}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/promise.cjs"}],[2311,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const s=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return s(e,"count"),e*t},r.timeSince=function(e){return s(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/time.cjs"}],[2312,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2313,{"./assert.cjs":2293,"@metamask/superstruct":2643,semver:4845},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const s=e("@metamask/superstruct"),n=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-controllers>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/versions.cjs"}],[2314,{buffer:3576,"buffer-from":3581,inherits:4187,"readable-stream":4794,typedarray:4918},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var s=e("readable-stream").Writable,n=e("inherits"),i=e("buffer-from");if("undefined"==typeof Uint8Array)var a=e("typedarray").Uint8Array;else a=Uint8Array;function o(e,t){if(!(this instanceof o))return new o(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var r=e.encoding,n=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):n=!0,s.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=n,t&&this.on("finish",(function(){t(this.getBody())})),this.body=[]}t.exports=o,n(o,s),o.prototype._write=function(e,t,r){this.body.push(e),r()},o.prototype.inferEncoding=function(e){var t=e===undefined?this.body[0]:e;return r.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},o.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++)t.push.apply(t,e[r]);return t}(this.body):"string"===this.encoding?function(e){for(var t=[],s=0;s<e.length;s++){var n=e[s];"string"==typeof n||r.isBuffer(n)?t.push(n):c(n)?t.push(i(n)):t.push(i(String(n)))}t=r.isBuffer(e[0])?(t=r.concat(t)).toString("utf8"):t.join("");return t}(this.body):"buffer"===this.encoding?function(e){for(var t=[],s=0;s<e.length;s++){var n=e[s];r.isBuffer(n)?t.push(n):c(n)?t.push(i(n)):t.push(i(String(n)))}return r.concat(t)}(this.body):"uint8array"===this.encoding?function(e){for(var t=0,r=0;r<e.length;r++)"string"==typeof e[r]&&(e[r]=i(e[r])),t+=e[r].length;for(var s=new a(t),n=(r=0,0);r<e.length;r++)for(var o=e[r],c=0;c<o.length;c++)s[n++]=o[c];return s}(this.body):this.body):[]};Array.isArray;function c(e){return"string"==typeof e||(t=e,/Array\]$/.test(Object.prototype.toString.call(t)))||e&&"function"==typeof e.subarray;var t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>concat-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/concat-stream/index.js"}],[2315,{"./url-alphabet/index.cjs":2316},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:s}=e("./url-alphabet/index.cjs"),n=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let s=(2<<Math.log(e.length-1)/Math.LN2)-1,n=-~(1.6*s*t/e.length);return(i=t)=>{let a="";for(;;){let t=r(n),o=n;for(;o--;)if(a+=e[t[o]&s]||"",a.length===i)return a}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,n),customRandom:i,urlAlphabet:s,random:n}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.cjs"}],[2316,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/url-alphabet/index.cjs"}],[232,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=n,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,s.isEmpty)(r))return;const n=Object.keys(r).reduce(((e,t)=>{const s=r[t];return null!=s&&s.nonceDetails&&delete s.nonceDetails,{...e,[t]:s}}),{});e.TransactionController={...t,transactions:n}}(t.data),t},r.version=void 0;var s=e("lodash");const n=r.version=97}}},{package:"$root$",file:"app/scripts/migrations/097.ts"}],[233,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=n,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,s.isEmpty)(r))return;const n=Object.keys(r).reduce(((e,t)=>{const s=r[t];return s.verifiedOnBlockchain=Boolean(s.txReceipt),{...e,[t]:s}}),{});e.TransactionController={...t,transactions:n}}(t.data),t},r.version=void 0;var s=e("lodash");const n=r.version=98}}},{package:"$root$",file:"app/scripts/migrations/098.ts"}],[234,{lodash:4382,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,s.isEmpty)(r))return;const i=Object.keys(r).reduce(((e,t)=>{const i=(0,s.cloneDeep)(r[t]),a=(0,n.v1)();return i.id=a,{...e,[a]:i}}),{});e.TransactionController={...t,transactions:i}}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("uuid");const i=r.version=99}}},{package:"$root$",file:"app/scripts/migrations/099.ts"}],[235,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=n,function(e){var t,r;const n=(null==e||null===(t=e.AddressBookController)||void 0===t?void 0:t.addressBook)??{},i=(null==e||null===(r=e.NameController)||void 0===r||null===(r=r.names)||void 0===r?void 0:r.ethereumAddress)??{};if((0,s.isEmpty)(Object.keys(n)))return;for(const e of Object.keys(n)){const t=n[e];for(const r of Object.keys(t)){var a,o;const s=t[r],n=r.toLowerCase(),c=i[n]??{};null!==(a=(c[e]??{}).name)&&void 0!==a&&a.length||null===(o=s.name)||void 0===o||!o.length||null==n||!n.length||(i[n]=c,c[e]={name:s.name,sourceId:s.isEns?"ens":null,proposedNames:{}})}}e.NameController={...e.NameController,names:{ethereumAddress:i}}}(t.data),t},r.version=void 0;var s=e("lodash");const n=r.version=100}}},{package:"$root$",file:"app/scripts/migrations/100.ts"}],[236,{"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"networkId")){const t=e.NetworkController;return delete t.networkId,{...e,NetworkController:t}}var t,r;(0,s.isObject)(e.NetworkController)||null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController))}(t.data),t},r.version=void 0;var s=e("@metamask/utils"),n=e("lodash");const i=r.version=101}}},{package:"$root$",file:"app/scripts/migrations/101.ts"}],[237,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=n,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,s.isEmpty)(r))return;const n=Object.keys(r).reduce(((e,t)=>{const n=(0,s.cloneDeep)(r[t]);return null!=n&&n.err&&(n.error=n.err,delete n.err),{...e,[t]:n}}),{});e.TransactionController={...t,transactions:n}}(t.data),t},r.version=void 0;var s=e("lodash");const n=r.version=102}}},{package:"$root$",file:"app/scripts/migrations/102.ts"}],[238,{"../../../shared/constants/hardware-wallets":5039,"@metamask/utils":2787,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,s.hasProperty)(e,"PreferencesController")&&(0,s.isObject)(e.PreferencesController)&&window.navigator.userAgent.includes("Chrome")){const t=e.PreferencesController;return t.ledgerTransportType=i.LedgerTransportTypes.webhid,{...e,PreferencesController:t}}return e}(t.data),t},r.version=void 0;var s=e("@metamask/utils"),n=e("lodash"),i=e("../../../shared/constants/hardware-wallets");const a=r.version=103}}},{package:"$root$",file:"app/scripts/migrations/103.ts"}],[239,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=n,function(e){const t=null==e?void 0:e.TransactionController;if(!t)return;const r=(null==t?void 0:t.transactions)||{},s=Object.values(r).sort(((e,t)=>e.time>t.time?-1:1));e.TransactionController={...t,transactions:s}}(t.data),t},r.version=void 0;var s=e("lodash");const n=r.version=104}}},{package:"$root$",file:"app/scripts/migrations/104.ts"}],[24,{"../constants/notification-schema":19,"../processors/process-feature-announcement":21,"@contentful/rich-text-html-renderer":372,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FEATURE_ANNOUNCEMENT_URL=r.FEATURE_ANNOUNCEMENT_API=void 0,r.getFeatureAnnouncementNotifications=async function(){null;return[]};var s;e("@contentful/rich-text-html-renderer"),(s=e("loglevel"))&&s.__esModule,e("../processors/process-feature-announcement"),e("../constants/notification-schema");const n=r.FEATURE_ANNOUNCEMENT_API="https://cdn.contentful.com/spaces/:space_id/environments/master/entries";r.FEATURE_ANNOUNCEMENT_URL=`${n}?access_token=&content_type=productAnnouncement&include=10&fields.clients=extension`}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/services/feature-announcements.ts"}],[240,{"../../../shared/constants/eth-methods":5036,"@metamask/keyring-api":1622,"ethereumjs-util":3832,lodash:4382,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=c,function(e){(function(e){e.AccountsController={internalAccounts:{accounts:{},selectedAccount:""}}})(e),function(e){var t;const r=(null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)||{};if(0===Object.keys(r).length)return;const a={};Object.values(r).forEach((e=>{const t=(0,i.v4)({random:(0,n.sha256FromString)(e.address).slice(0,16)});a[t]={address:e.address,id:t,options:{},metadata:{name:e.name,lastSelected:e.lastSelected??undefined,importTime:0,keyring:{type:"HD Key Tree"}},methods:o.ETH_EOA_METHODS,type:s.EthAccountType.Eoa}})),e.AccountsController.internalAccounts.accounts=a}(e),function(e){var t;let r=null===(t=e.PreferencesController)||void 0===t?void 0:t.selectedAddress;if("string"!=typeof r){var s,n;null===(s=global.sentry)||void 0===s||null===(n=s.captureException)||void 0===n||n.call(s,new Error(`state.PreferencesController?.selectedAddress is ${r}`)),r=function(e){var t;const[r]=Object.keys((null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)||{});return r}(e)}const i=function(e,t){return Object.values(e.AccountsController.internalAccounts.accounts).find((e=>e.address.toLowerCase()===t.toLowerCase()))}(e,r);i&&(e.PreferencesController.selectedAddress=i.address,e.AccountsController.internalAccounts={...e.AccountsController.internalAccounts,selectedAccount:i.id})}(e)}(t.data),t},r.version=void 0;var s=e("@metamask/keyring-api"),n=e("ethereumjs-util"),i=e("uuid"),a=e("lodash"),o=e("../../../shared/constants/eth-methods");const c=r.version=105}}},{package:"$root$",file:"app/scripts/migrations/105.ts"}],[2408,{"./verify":2409,"@metamask/superstruct":2643,"@metamask/utils":2420},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapsRegistryDatabaseStruct=r.BlockedSnapStruct=r.BlockReasonStruct=r.VerifiedSnapStruct=r.ImagePathStruct=r.AdditionalSourceCodeStruct=r.SupportStruct=r.AuditStruct=r.AuthorStruct=void 0;const i=e("@metamask/superstruct"),a=e("@metamask/utils"),o=(0,i.refine)((0,i.string)(),"Npm ID",(e=>e.startsWith("npm:"))),c=(0,i.object)({checksum:a.ChecksumStruct});r.AuthorStruct=(0,i.object)({name:(0,i.string)(),website:(0,i.string)()}),r.AuditStruct=(0,i.object)({auditor:(0,i.string)(),report:(0,i.string)()}),r.SupportStruct=(0,i.object)({knowledgeBase:(0,i.optional)((0,i.string)()),faq:(0,i.optional)((0,i.string)()),contact:(0,i.optional)((0,i.string)()),keyRecovery:(0,i.optional)((0,i.string)())}),r.AdditionalSourceCodeStruct=(0,i.object)({name:(0,i.string)(),url:(0,i.string)()}),r.ImagePathStruct=(0,i.pattern)((0,i.string)(),/\.\/images\/.*\/\d+\.(?:png|jpe?g)$/u),r.VerifiedSnapStruct=(0,i.object)({id:o,metadata:(0,i.object)({name:(0,i.string)(),type:(0,i.optional)((0,i.enums)(["account"])),author:(0,i.optional)(r.AuthorStruct),website:(0,i.optional)((0,i.string)()),onboard:(0,i.optional)((0,i.boolean)()),summary:(0,i.optional)((0,i.string)()),description:(0,i.optional)((0,i.string)()),audits:(0,i.optional)((0,i.array)(r.AuditStruct)),category:(0,i.optional)((0,i.enums)(["interoperability","notifications","transaction insights","account management"])),tags:(0,i.optional)((0,i.array)((0,i.string)())),support:(0,i.optional)(r.SupportStruct),sourceCode:(0,i.optional)((0,i.string)()),hidden:(0,i.optional)((0,i.boolean)()),privateCode:(0,i.optional)((0,i.boolean)()),privacyPolicy:(0,i.optional)((0,i.string)()),termsOfUse:(0,i.optional)((0,i.string)()),additionalSourceCode:(0,i.optional)((0,i.array)(r.AdditionalSourceCodeStruct)),screenshots:(0,i.optional)((0,i.size)((0,i.array)(r.ImagePathStruct),3,3))}),versions:(0,i.record)(a.VersionStruct,c)}),r.BlockReasonStruct=(0,i.object)({explanation:(0,i.optional)((0,i.string)()),url:(0,i.optional)((0,i.string)())}),r.BlockedSnapStruct=(0,i.union)([(0,i.object)({id:o,versionRange:a.VersionRangeStruct,reason:(0,i.optional)(r.BlockReasonStruct)}),(0,i.object)({checksum:a.ChecksumStruct,reason:(0,i.optional)(r.BlockReasonStruct)})]),r.SnapsRegistryDatabaseStruct=(0,i.object)({verifiedSnaps:(0,i.record)(o,r.VerifiedSnapStruct),blockedSnaps:(0,i.array)(r.BlockedSnapStruct)}),n(e("./verify"),r)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/index.js"}],[2409,{"@metamask/superstruct":2643,"@metamask/utils":2420,"@noble/curves/secp256k1":2817,"@noble/hashes/sha256":2826},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.verify=r.SignatureStruct=void 0;const s=e("@metamask/superstruct"),n=e("@metamask/utils"),i=e("@noble/curves/secp256k1"),a=e("@noble/hashes/sha256");r.SignatureStruct=(0,s.object)({signature:n.StrictHexStruct,curve:(0,s.literal)("secp256k1"),format:(0,s.literal)("DER")}),r.verify=function({registry:e,signature:t,publicKey:s}){(0,n.assertStruct)(t,r.SignatureStruct,"Invalid signature object");const o=(0,n.hexToBytes)(s);return i.secp256k1.verify((0,n.remove0x)(t.signature),(0,a.sha256)((0,n.stringToBytes)(e)),o)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/verify.js"}],[241,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);t.meta.version=n;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,securityAlertsEnabled:!0!==t.transactionSecurityCheckEnabled}}}(t.data);return t.data=r,t},r.version=void 0;var s=e("lodash");const n=r.version=106}}},{package:"$root$",file:"app/scripts/migrations/106.js"}],[2410,{"./errors.cjs":2418,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const s=e("@metamask/superstruct"),n=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,s.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.cjs"}],[2411,{"./assert.cjs":2410,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,s.pattern)(e,o)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/base64.cjs"}]],[],{});