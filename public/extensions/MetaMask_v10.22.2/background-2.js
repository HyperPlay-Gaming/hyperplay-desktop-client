LavaPack.loadBundle([[2228,{"./assert.cjs":2217,"./misc.cjs":2231,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonRpcIdValidator=n.assertIsJsonRpcError=n.isJsonRpcError=n.assertIsJsonRpcFailure=n.isJsonRpcFailure=n.assertIsJsonRpcSuccess=n.isJsonRpcSuccess=n.assertIsJsonRpcResponse=n.isJsonRpcResponse=n.assertIsPendingJsonRpcResponse=n.isPendingJsonRpcResponse=n.JsonRpcResponseStruct=n.JsonRpcFailureStruct=n.JsonRpcSuccessStruct=n.PendingJsonRpcResponseStruct=n.assertIsJsonRpcRequest=n.isJsonRpcRequest=n.assertIsJsonRpcNotification=n.isJsonRpcNotification=n.JsonRpcNotificationStruct=n.JsonRpcRequestStruct=n.JsonRpcParamsStruct=n.JsonRpcErrorStruct=n.JsonRpcIdStruct=n.JsonRpcVersionStruct=n.jsonrpc2=n.getJsonSize=n.getSafeJson=n.isValidJson=n.JsonStruct=n.UnsafeJsonStruct=n.exactOptional=n.object=void 0;const s=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const n=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],n)}function o(e){return new s.Struct({...e,type:`optional ${e.type}`,validator:(t,n)=>!a(n)||e.validator(t,n),refiner:(t,n)=>!a(n)||e.refiner(t,n)})}n.object=e=>(0,s.object)(e),n.exactOptional=o;function f(e){return(0,s.create)(e,n.JsonStruct)}n.UnsafeJsonStruct=(0,s.union)([(0,s.literal)(null),(0,s.boolean)(),(0,s.define)("finite number",(e=>(0,s.is)(e,(0,s.number)())&&Number.isFinite(e))),(0,s.string)(),(0,s.array)((0,s.lazy)((()=>n.UnsafeJsonStruct))),(0,s.record)((0,s.string)(),(0,s.lazy)((()=>n.UnsafeJsonStruct)))]),n.JsonStruct=(0,s.coerce)(n.UnsafeJsonStruct,(0,s.any)(),(e=>((0,r.assertStruct)(e,n.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),n.isValidJson=function(e){try{return f(e),!0}catch{return!1}},n.getSafeJson=f,n.getJsonSize=function(e){(0,r.assertStruct)(e,n.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},n.jsonrpc2="2.0",n.JsonRpcVersionStruct=(0,s.literal)(n.jsonrpc2),n.JsonRpcIdStruct=(0,s.nullable)((0,s.union)([(0,s.number)(),(0,s.string)()])),n.JsonRpcErrorStruct=(0,n.object)({code:(0,s.integer)(),message:(0,s.string)(),data:o(n.JsonStruct),stack:o((0,s.string)())}),n.JsonRpcParamsStruct=(0,s.union)([(0,s.record)((0,s.string)(),n.JsonStruct),(0,s.array)(n.JsonStruct)]),n.JsonRpcRequestStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,method:(0,s.string)(),params:o(n.JsonRpcParamsStruct)}),n.JsonRpcNotificationStruct=(0,n.object)({jsonrpc:n.JsonRpcVersionStruct,method:(0,s.string)(),params:o(n.JsonRpcParamsStruct)}),n.isJsonRpcNotification=function(e){return(0,s.is)(e,n.JsonRpcNotificationStruct)},n.assertIsJsonRpcNotification=function(e,t){(0,r.assertStruct)(e,n.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},n.isJsonRpcRequest=function(e){return(0,s.is)(e,n.JsonRpcRequestStruct)},n.assertIsJsonRpcRequest=function(e,t){(0,r.assertStruct)(e,n.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},n.PendingJsonRpcResponseStruct=(0,s.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:(0,s.optional)((0,s.unknown)()),error:(0,s.optional)(n.JsonRpcErrorStruct)}),n.JsonRpcSuccessStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:n.JsonStruct}),n.JsonRpcFailureStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,error:n.JsonRpcErrorStruct}),n.JsonRpcResponseStruct=(0,s.union)([n.JsonRpcSuccessStruct,n.JsonRpcFailureStruct]),n.isPendingJsonRpcResponse=function(e){return(0,s.is)(e,n.PendingJsonRpcResponseStruct)},n.assertIsPendingJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,n.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},n.isJsonRpcResponse=function(e){return(0,s.is)(e,n.JsonRpcResponseStruct)},n.assertIsJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,n.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},n.isJsonRpcSuccess=function(e){return(0,s.is)(e,n.JsonRpcSuccessStruct)},n.assertIsJsonRpcSuccess=function(e,t){(0,r.assertStruct)(e,n.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},n.isJsonRpcFailure=function(e){return(0,s.is)(e,n.JsonRpcFailureStruct)},n.assertIsJsonRpcFailure=function(e,t){(0,r.assertStruct)(e,n.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},n.isJsonRpcError=function(e){return(0,s.is)(e,n.JsonRpcErrorStruct)},n.assertIsJsonRpcError=function(e,t){(0,r.assertStruct)(e,n.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},n.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:n,permitNull:s}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(n||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||s&&null===e)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/json.cjs"}],[2229,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/keyring.cjs"}],[223,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,r.isObject)(e.NetworkController)){var t,n;return null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}return delete e.NetworkController.previousProviderStore,e}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=85}}},{package:"$root$",file:"app/scripts/migrations/085.ts"}],[2230,{debug:3680},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.createProjectLogger=void 0;const r=(0,s(e("debug")).default)("metamask");n.createProjectLogger=function(e){return r.extend(e)},n.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/logging.cjs"}],[2231,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateNumberSize=n.calculateStringSize=n.isASCII=n.isPlainObject=n.ESCAPE_CHARACTERS_REGEXP=n.JsonSize=n.getKnownPropertyNames=n.hasProperty=n.isObject=n.isNullOrUndefined=n.isNonEmptyArray=void 0,n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isNullOrUndefined=function(e){return null===e||e===undefined},n.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function s(e){return e.charCodeAt(0)<=127}n.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),n.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(n.JsonSize||(n.JsonSize={})),n.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,n.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},n.isASCII=s,n.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>s(t)?e+1:e+2),0)+(e.match(n.ESCAPE_CHARACTERS_REGEXP)??[]).length},n.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/misc.cjs"}],[2232,{"./assert.cjs":2217,"./hex.cjs":2226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hexToBigInt=n.hexToNumber=n.bigIntToHex=n.numberToHex=void 0;const s=e("./assert.cjs"),r=e("./hex.cjs");n.numberToHex=e=>((0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,r.add0x)(e.toString(16)));n.bigIntToHex=e=>((0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=0,"Value must be a non-negative bigint."),(0,r.add0x)(e.toString(16)));n.hexToNumber=e=>{(0,r.assertIsHexString)(e);const t=parseInt(e,16);return(0,s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};n.hexToBigInt=e=>((0,r.assertIsHexString)(e),BigInt((0,r.add0x)(e)))}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/number.cjs"}],[2233,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/opaque.cjs"}],[2234,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createDeferredPromise=void 0,n.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,n;const s=new Promise(((e,s)=>{t=e,n=s}));return e&&s.catch((e=>{})),{promise:s,resolve:t,reject:n}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/promise.cjs"}],[2235,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.timeSince=n.inMilliseconds=n.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(n.Duration||(n.Duration={}));const s=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};n.inMilliseconds=function(e,t){return s(e,"count"),e*t},n.timeSince=function(e){return s(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/time.cjs"}],[2236,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2237,{"./assert.cjs":2217,"@metamask/superstruct":2619,semver:4939},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.satisfiesVersionRange=n.gtRange=n.gtVersion=n.assertIsSemVerRange=n.assertIsSemVerVersion=n.isValidSemVerRange=n.isValidSemVerVersion=n.VersionRangeStruct=n.VersionStruct=void 0;const s=e("@metamask/superstruct"),r=e("semver"),i=e("./assert.cjs");n.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`)),n.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`)),n.isValidSemVerVersion=function(e){return(0,s.is)(e,n.VersionStruct)},n.isValidSemVerRange=function(e){return(0,s.is)(e,n.VersionRangeStruct)},n.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,n.VersionStruct)},n.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,n.VersionRangeStruct)},n.gtVersion=function(e,t){return(0,r.gt)(e,t)},n.gtRange=function(e,t){return(0,r.gtr)(e,t)},n.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/versions.cjs"}],[2238,{"./errors.cjs":2246,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assertExhaustive=n.assertStruct=n.assert=n.AssertionError=void 0;const s=e("@metamask/superstruct"),r=e("./errors.cjs");function i(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}n.AssertionError=a,n.assert=function(e,t="Assertion failed.",n=a){if(!e){if(t instanceof Error)throw t;throw i(n,t)}},n.assertStruct=function(e,t,n="Assertion failed",o=a){try{(0,s.assert)(e,t)}catch(e){throw i(o,`${n}: ${function(e){return(0,r.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},n.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[2239,{"./assert.cjs":2238,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.base64=void 0;const s=e("@metamask/superstruct"),r=e("./assert.cjs");n.base64=(e,t={})=>{const n=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,r.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=n?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,s.pattern)(e,o)}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[224,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"provider")){const t=e.NetworkController;return t.providerConfig=t.provider,delete t.provider,{...e,NetworkController:t}}var t,n;if((0,s.isObject)(e.NetworkController)){if(!(0,s.hasProperty)(e.NetworkController,"provider")){var r,i;if(e.NetworkController.providerConfig===undefined)null===(r=global.sentry)||void 0===r||null===(i=r.captureException)||void 0===i||i.call(r,new Error("typeof state.NetworkController.provider is "+typeof e.NetworkController.provider))}}else null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=86}}},{package:"$root$",file:"app/scripts/migrations/086.ts"}],[2240,{"./assert.cjs":2238,"./hex.cjs":2247,"@scure/base":2842,buffer:3537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.createDataView=n.concatBytes=n.valueToBytes=n.base64ToBytes=n.stringToBytes=n.numberToBytes=n.signedBigIntToBytes=n.bigIntToBytes=n.hexToBytes=n.bytesToBase64=n.bytesToString=n.bytesToNumber=n.bytesToSignedBigInt=n.bytesToBigInt=n.bytesToHex=n.assertIsBytes=n.isBytes=void 0;const s=e("@scure/base"),r=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,f=87;const c=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function u(e){(0,r.assert)(l(e),"Value must be a Uint8Array.")}function d(e){if(u(e),0===e.length)return"0x";const t=c(),n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=t[e[s]];return(0,i.add0x)(n.join(""))}function p(e){u(e);const t=d(e);return BigInt(t)}function h(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),n=t.length%2==0?t:`0${t}`,s=new Uint8Array(n.length/2);for(let e=0;e<s.length;e++){const t=n.charCodeAt(2*e),r=n.charCodeAt(2*e+1),i=t-(t<o?a:f),c=r-(r<o?a:f);s[e]=16*i+c}return s}function m(e){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return h(e.toString(16))}function b(e){(0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return h(e.toString(16))}function g(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function y(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return b(e);if("string"==typeof e)return e.startsWith("0x")?h(e):g(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}n.isBytes=l,n.assertIsBytes=u,n.bytesToHex=d,n.bytesToBigInt=p,n.bytesToSignedBigInt=function(e){u(e);let t=BigInt(0);for(const n of e)t=(t<<BigInt(8))+BigInt(n);return BigInt.asIntN(8*e.length,t)},n.bytesToNumber=function(e){u(e);const t=p(e);return(0,r.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},n.bytesToString=function(e){return u(e),(new TextDecoder).decode(e)},n.bytesToBase64=function(e){return u(e),s.base64.encode(e)},n.hexToBytes=h,n.bigIntToBytes=m,n.signedBigIntToBytes=function(e,t){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)("number"==typeof t,"Byte length must be a number."),(0,r.assert)(t>0,"Byte length must be greater than 0."),(0,r.assert)(function(e,t){(0,r.assert)(t>0);const n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let n=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return s.reverse()},n.numberToBytes=b,n.stringToBytes=g,n.base64ToBytes=function(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),s.base64.decode(e)},n.valueToBytes=y,n.concatBytes=function(e){const t=new Array(e.length);let n=0;for(let s=0;s<e.length;s++){const r=y(e[s]);t[s]=r,n+=r.length}const s=new Uint8Array(n);for(let e=0,n=0;e<t.length;e++)s.set(t[e],n),n+=t[e].length;return s},n.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[2241,{"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toCaipChainId=n.parseCaipAccountId=n.parseCaipChainId=n.isCaipAccountAddress=n.isCaipAccountId=n.isCaipReference=n.isCaipNamespace=n.isCaipChainId=n.KnownCaipNamespace=n.CaipAccountAddressStruct=n.CaipAccountIdStruct=n.CaipReferenceStruct=n.CaipNamespaceStruct=n.CaipChainIdStruct=n.CAIP_ACCOUNT_ADDRESS_REGEX=n.CAIP_ACCOUNT_ID_REGEX=n.CAIP_REFERENCE_REGEX=n.CAIP_NAMESPACE_REGEX=n.CAIP_CHAIN_ID_REGEX=void 0;const s=e("@metamask/superstruct");function r(e){return(0,s.is)(e,n.CaipNamespaceStruct)}function i(e){return(0,s.is)(e,n.CaipReferenceStruct)}n.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,n.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,n.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,n.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,n.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,n.CaipChainIdStruct=(0,s.pattern)((0,s.string)(),n.CAIP_CHAIN_ID_REGEX),n.CaipNamespaceStruct=(0,s.pattern)((0,s.string)(),n.CAIP_NAMESPACE_REGEX),n.CaipReferenceStruct=(0,s.pattern)((0,s.string)(),n.CAIP_REFERENCE_REGEX),n.CaipAccountIdStruct=(0,s.pattern)((0,s.string)(),n.CAIP_ACCOUNT_ID_REGEX),n.CaipAccountAddressStruct=(0,s.pattern)((0,s.string)(),n.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(n.KnownCaipNamespace||(n.KnownCaipNamespace={})),n.isCaipChainId=function(e){return(0,s.is)(e,n.CaipChainIdStruct)},n.isCaipNamespace=r,n.isCaipReference=i,n.isCaipAccountId=function(e){return(0,s.is)(e,n.CaipAccountIdStruct)},n.isCaipAccountAddress=function(e){return(0,s.is)(e,n.CaipAccountAddressStruct)},n.parseCaipChainId=function(e){const t=n.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},n.parseCaipAccountId=function(e){const t=n.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.toCaipChainId=function(e,t){if(!r(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2242,{"./base64.cjs":2239,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ChecksumStruct=void 0;const s=e("@metamask/superstruct"),r=e("./base64.cjs");n.ChecksumStruct=(0,s.size)((0,r.base64)((0,s.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[2243,{"./assert.cjs":2238,"./bytes.cjs":2240,"./hex.cjs":2247,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createHex=n.createBytes=n.createBigInt=n.createNumber=void 0;const s=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,s.union)([(0,s.number)(),(0,s.bigint)(),(0,s.string)(),a.StrictHexStruct]),f=(0,s.coerce)((0,s.number)(),o,Number),c=(0,s.coerce)((0,s.bigint)(),o,BigInt),l=((0,s.union)([a.StrictHexStruct,(0,s.instance)(Uint8Array)]),(0,s.coerce)((0,s.instance)(Uint8Array),(0,s.union)([a.StrictHexStruct]),i.hexToBytes)),u=(0,s.coerce)(a.StrictHexStruct,(0,s.instance)(Uint8Array),i.bytesToHex);n.createNumber=function(e){try{const t=(0,s.create)(e,f);return(0,r.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof s.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},n.createBigInt=function(e){try{return(0,s.create)(e,c)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},n.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,s.create)(e,l)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},n.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,s.create)(e,u)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[2244,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.FrozenSet=n.FrozenMap=void 0;class o{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((n,s,r)=>e.call(t,n,s,this)))}get(e){return i(this,s,"f").get(e)}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}n.FrozenMap=o;class f{get size(){return i(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return i(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),a(this,r,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,r,"f").entries()}forEach(e,t){return i(this,r,"f").forEach(((n,s,r)=>e.call(t,n,s,this)))}has(e){return i(this,r,"f").has(e)}keys(){return i(this,r,"f").keys()}values(){return i(this,r,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}n.FrozenSet=f,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(f),Object.freeze(f.prototype)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[2245,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2246,{"./misc.cjs":2252,"pony-cause":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapError=n.getErrorMessage=n.isErrorWithStack=n.isErrorWithMessage=n.isErrorWithCode=void 0;const s=e("pony-cause"),r=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}n.isErrorWithCode=i,n.isErrorWithMessage=a,n.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},n.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,r.isNullOrUndefined)(e)?"":String(e)},n.wrapError=function(e,t){if((n=e)instanceof Error||(0,r.isObject)(n)&&"Error"===n.constructor.name){let n;return n=2===Error.length?new Error(t,{cause:e}):new s.ErrorWithCause(t,{cause:e}),i(e)&&(n.code=e.code),n}var n;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[2247,{"./assert.cjs":2238,"./bytes.cjs":2240,"@metamask/superstruct":2619,"@noble/hashes/sha3":2823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.remove0x=n.add0x=n.isValidChecksumAddress=n.getChecksumAddress=n.isValidHexAddress=n.assertIsStrictHexString=n.assertIsHexString=n.isStrictHexString=n.isHexString=n.HexChecksumAddressStruct=n.HexAddressStruct=n.StrictHexStruct=n.HexStruct=void 0;const s=e("@metamask/superstruct"),r=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,s.is)(e,n.HexStruct)}function f(e){return(0,s.is)(e,n.StrictHexStruct)}function c(e){(0,i.assert)((0,s.is)(e,n.HexChecksumAddressStruct),"Invalid hex address.");const t=u(e.toLowerCase()),o=u((0,a.bytesToHex)((0,r.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const n=o[t];return(0,i.assert)((0,s.is)(n,(0,s.string)()),"Hash shorter than address."),parseInt(n,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,s.is)(e,n.HexChecksumAddressStruct)&&c(e)===e}function u(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}n.HexStruct=(0,s.pattern)((0,s.string)(),/^(?:0x)?[0-9a-f]+$/iu),n.StrictHexStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]+$/iu),n.HexAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]{40}$/u),n.HexChecksumAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-fA-F]{40}$/u),n.isHexString=o,n.isStrictHexString=f,n.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},n.assertIsStrictHexString=function(e){(0,i.assert)(f(e),'Value must be a hexadecimal string, starting with "0x".')},n.isValidHexAddress=function(e){return(0,s.is)(e,n.HexAddressStruct)||l(e)},n.getChecksumAddress=c,n.isValidChecksumAddress=l,n.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},n.remove0x=u}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[2248,{"./assert.cjs":2238,"./base64.cjs":2239,"./bytes.cjs":2240,"./caip-types.cjs":2241,"./checksum.cjs":2242,"./coercers.cjs":2243,"./collections.cjs":2244,"./encryption-types.cjs":2245,"./errors.cjs":2246,"./hex.cjs":2247,"./json.cjs":2249,"./keyring.cjs":2250,"./logging.cjs":2251,"./misc.cjs":2252,"./number.cjs":2253,"./opaque.cjs":2254,"./promise.cjs":2255,"./time.cjs":2256,"./transaction-types.cjs":2257,"./versions.cjs":2258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./assert.cjs"),n),r(e("./base64.cjs"),n),r(e("./bytes.cjs"),n),r(e("./caip-types.cjs"),n),r(e("./checksum.cjs"),n),r(e("./coercers.cjs"),n),r(e("./collections.cjs"),n),r(e("./encryption-types.cjs"),n),r(e("./errors.cjs"),n),r(e("./hex.cjs"),n),r(e("./json.cjs"),n),r(e("./keyring.cjs"),n),r(e("./logging.cjs"),n),r(e("./misc.cjs"),n),r(e("./number.cjs"),n),r(e("./opaque.cjs"),n),r(e("./promise.cjs"),n),r(e("./time.cjs"),n),r(e("./transaction-types.cjs"),n),r(e("./versions.cjs"),n)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/index.cjs"}],[2249,{"./assert.cjs":2238,"./misc.cjs":2252,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonRpcIdValidator=n.assertIsJsonRpcError=n.isJsonRpcError=n.assertIsJsonRpcFailure=n.isJsonRpcFailure=n.assertIsJsonRpcSuccess=n.isJsonRpcSuccess=n.assertIsJsonRpcResponse=n.isJsonRpcResponse=n.assertIsPendingJsonRpcResponse=n.isPendingJsonRpcResponse=n.JsonRpcResponseStruct=n.JsonRpcFailureStruct=n.JsonRpcSuccessStruct=n.PendingJsonRpcResponseStruct=n.assertIsJsonRpcRequest=n.isJsonRpcRequest=n.assertIsJsonRpcNotification=n.isJsonRpcNotification=n.JsonRpcNotificationStruct=n.JsonRpcRequestStruct=n.JsonRpcParamsStruct=n.JsonRpcErrorStruct=n.JsonRpcIdStruct=n.JsonRpcVersionStruct=n.jsonrpc2=n.getJsonSize=n.getSafeJson=n.isValidJson=n.JsonStruct=n.UnsafeJsonStruct=n.exactOptional=n.object=void 0;const s=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const n=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],n)}function o(e){return new s.Struct({...e,type:`optional ${e.type}`,validator:(t,n)=>!a(n)||e.validator(t,n),refiner:(t,n)=>!a(n)||e.refiner(t,n)})}n.object=e=>(0,s.object)(e),n.exactOptional=o;function f(e){return(0,s.create)(e,n.JsonStruct)}n.UnsafeJsonStruct=(0,s.union)([(0,s.literal)(null),(0,s.boolean)(),(0,s.define)("finite number",(e=>(0,s.is)(e,(0,s.number)())&&Number.isFinite(e))),(0,s.string)(),(0,s.array)((0,s.lazy)((()=>n.UnsafeJsonStruct))),(0,s.record)((0,s.string)(),(0,s.lazy)((()=>n.UnsafeJsonStruct)))]),n.JsonStruct=(0,s.coerce)(n.UnsafeJsonStruct,(0,s.any)(),(e=>((0,r.assertStruct)(e,n.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),n.isValidJson=function(e){try{return f(e),!0}catch{return!1}},n.getSafeJson=f,n.getJsonSize=function(e){(0,r.assertStruct)(e,n.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},n.jsonrpc2="2.0",n.JsonRpcVersionStruct=(0,s.literal)(n.jsonrpc2),n.JsonRpcIdStruct=(0,s.nullable)((0,s.union)([(0,s.number)(),(0,s.string)()])),n.JsonRpcErrorStruct=(0,n.object)({code:(0,s.integer)(),message:(0,s.string)(),data:o(n.JsonStruct),stack:o((0,s.string)())}),n.JsonRpcParamsStruct=(0,s.union)([(0,s.record)((0,s.string)(),n.JsonStruct),(0,s.array)(n.JsonStruct)]),n.JsonRpcRequestStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,method:(0,s.string)(),params:o(n.JsonRpcParamsStruct)}),n.JsonRpcNotificationStruct=(0,n.object)({jsonrpc:n.JsonRpcVersionStruct,method:(0,s.string)(),params:o(n.JsonRpcParamsStruct)}),n.isJsonRpcNotification=function(e){return(0,s.is)(e,n.JsonRpcNotificationStruct)},n.assertIsJsonRpcNotification=function(e,t){(0,r.assertStruct)(e,n.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},n.isJsonRpcRequest=function(e){return(0,s.is)(e,n.JsonRpcRequestStruct)},n.assertIsJsonRpcRequest=function(e,t){(0,r.assertStruct)(e,n.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},n.PendingJsonRpcResponseStruct=(0,s.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:(0,s.optional)((0,s.unknown)()),error:(0,s.optional)(n.JsonRpcErrorStruct)}),n.JsonRpcSuccessStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:n.JsonStruct}),n.JsonRpcFailureStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,error:n.JsonRpcErrorStruct}),n.JsonRpcResponseStruct=(0,s.union)([n.JsonRpcSuccessStruct,n.JsonRpcFailureStruct]),n.isPendingJsonRpcResponse=function(e){return(0,s.is)(e,n.PendingJsonRpcResponseStruct)},n.assertIsPendingJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,n.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},n.isJsonRpcResponse=function(e){return(0,s.is)(e,n.JsonRpcResponseStruct)},n.assertIsJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,n.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},n.isJsonRpcSuccess=function(e){return(0,s.is)(e,n.JsonRpcSuccessStruct)},n.assertIsJsonRpcSuccess=function(e,t){(0,r.assertStruct)(e,n.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},n.isJsonRpcFailure=function(e){return(0,s.is)(e,n.JsonRpcFailureStruct)},n.assertIsJsonRpcFailure=function(e,t){(0,r.assertStruct)(e,n.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},n.isJsonRpcError=function(e){return(0,s.is)(e,n.JsonRpcErrorStruct)},n.assertIsJsonRpcError=function(e,t){(0,r.assertStruct)(e,n.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},n.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:n,permitNull:s}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(n||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||s&&null===e)}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/json.cjs"}],[225,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,s.isObject)(e.TokensController)){var t,n;return null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.TokensController is "+typeof e.TokensController)),e}return delete e.TokensController.suggestedAssets,e}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=87}}},{package:"$root$",file:"app/scripts/migrations/087.ts"}],[2250,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[2251,{debug:3680},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.createProjectLogger=void 0;const r=(0,s(e("debug")).default)("metamask");n.createProjectLogger=function(e){return r.extend(e)},n.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[2252,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateNumberSize=n.calculateStringSize=n.isASCII=n.isPlainObject=n.ESCAPE_CHARACTERS_REGEXP=n.JsonSize=n.getKnownPropertyNames=n.hasProperty=n.isObject=n.isNullOrUndefined=n.isNonEmptyArray=void 0,n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isNullOrUndefined=function(e){return null===e||e===undefined},n.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function s(e){return e.charCodeAt(0)<=127}n.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),n.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(n.JsonSize||(n.JsonSize={})),n.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,n.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},n.isASCII=s,n.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>s(t)?e+1:e+2),0)+(e.match(n.ESCAPE_CHARACTERS_REGEXP)??[]).length},n.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[2253,{"./assert.cjs":2238,"./hex.cjs":2247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hexToBigInt=n.hexToNumber=n.bigIntToHex=n.numberToHex=void 0;const s=e("./assert.cjs"),r=e("./hex.cjs");n.numberToHex=e=>((0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,r.add0x)(e.toString(16)));n.bigIntToHex=e=>((0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=0,"Value must be a non-negative bigint."),(0,r.add0x)(e.toString(16)));n.hexToNumber=e=>{(0,r.assertIsHexString)(e);const t=parseInt(e,16);return(0,s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};n.hexToBigInt=e=>((0,r.assertIsHexString)(e),BigInt((0,r.add0x)(e)))}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/number.cjs"}],[2254,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[2255,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createDeferredPromise=void 0,n.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,n;const s=new Promise(((e,s)=>{t=e,n=s}));return e&&s.catch((e=>{})),{promise:s,resolve:t,reject:n}}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[2256,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.timeSince=n.inMilliseconds=n.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(n.Duration||(n.Duration={}));const s=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};n.inMilliseconds=function(e,t){return s(e,"count"),e*t},n.timeSince=function(e){return s(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/time.cjs"}],[2257,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2258,{"./assert.cjs":2238,"@metamask/superstruct":2619,semver:4939},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.satisfiesVersionRange=n.gtRange=n.gtVersion=n.assertIsSemVerRange=n.assertIsSemVerVersion=n.isValidSemVerRange=n.isValidSemVerVersion=n.VersionRangeStruct=n.VersionStruct=void 0;const s=e("@metamask/superstruct"),r=e("semver"),i=e("./assert.cjs");n.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`)),n.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`)),n.isValidSemVerVersion=function(e){return(0,s.is)(e,n.VersionStruct)},n.isValidSemVerRange=function(e){return(0,s.is)(e,n.VersionRangeStruct)},n.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,n.VersionStruct)},n.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,n.VersionRangeStruct)},n.gtVersion=function(e,t){return(0,r.gt)(e,t)},n.gtRange=function(e,t){return(0,r.gtr)(e,t)},n.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[226,{"@metamask/utils":2765,"bn.js":3489,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=f,function(e){if((0,s.hasProperty)(e,"NftController")&&(0,s.isObject)(e.NftController)){const f=e.NftController;if((0,s.hasProperty)(f,"allNftContracts")&&(0,s.isObject)(f.allNftContracts)){const{allNftContracts:e}=f;Object.keys(e).every((t=>(0,s.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const n=e[t];if((0,s.isObject)(n)){for(const e of Object.keys(n))"undefined"!==e&&e!==undefined&&"null"!==e||delete n[e];e[t]=(0,i.mapKeys)(n,((e,t)=>c(t)))}}))}else if((0,s.hasProperty)(f,"allNftContracts")){var t,n;null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.NftController.allNftContracts is "+typeof f.allNftContracts))}else a.default.warn("typeof state.NftController.allNftContracts is "+typeof f.allNftContracts);if((0,s.hasProperty)(f,"allNfts")&&(0,s.isObject)(f.allNfts)){const{allNfts:e}=f;Object.keys(e).every((t=>(0,s.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const n=e[t];if((0,s.isObject)(n)){for(const e of Object.keys(n))"undefined"!==e&&e!==undefined&&"null"!==e||delete n[e];e[t]=(0,i.mapKeys)(n,((e,t)=>c(t)))}}))}else if((0,s.hasProperty)(f,"allNfts")){var r,o;null===(r=global.sentry)||void 0===r||null===(o=r.captureException)||void 0===o||o.call(r,new Error("typeof state.NftController.allNfts is "+typeof f.allNfts))}else a.default.warn("typeof state.NftController.allNfts is "+typeof f.allNfts);e.NftController=f}else if((0,s.hasProperty)(e,"NftController")){var f,l;null===(f=global.sentry)||void 0===f||null===(l=f.captureException)||void 0===l||l.call(f,new Error("typeof state.NftController is "+typeof e.NftController))}else a.default.warn("typeof state.NftController is undefined");if((0,s.hasProperty)(e,"TokenListController")&&(0,s.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,s.hasProperty)(t,"tokensChainsCache")&&(0,s.isObject)(t.tokensChainsCache)){for(const e of Object.keys(t.tokensChainsCache))"undefined"!==e&&e!==undefined&&"null"!==e||delete t.tokensChainsCache[e];t.tokensChainsCache=(0,i.mapKeys)(t.tokensChainsCache,((e,t)=>c(t)))}else if((0,s.hasProperty)(t,"tokensChainsCache")){var u,d;null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error("typeof state.TokenListController.tokensChainsCache is "+typeof e.TokenListController.tokensChainsCache))}else a.default.warn("typeof state.TokenListController.tokensChainsCache is undefined")}else a.default.warn("typeof state.TokenListController is "+typeof e.TokenListController);if((0,s.hasProperty)(e,"TokensController")&&(0,s.isObject)(e.TokensController)){const t=e.TokensController;if((0,s.hasProperty)(t,"allTokens")&&(0,s.isObject)(t.allTokens)){const{allTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allTokens=(0,i.mapKeys)(e,((e,t)=>c(t)))}else if((0,s.hasProperty)(t,"allTokens")){var p,h;null===(p=global.sentry)||void 0===p||null===(h=p.captureException)||void 0===h||h.call(p,new Error("typeof state.TokensController.allTokens is "+typeof t.allTokens))}else a.default.warn("typeof state.TokensController.allTokens is "+typeof t.allTokens);if((0,s.hasProperty)(t,"allIgnoredTokens")&&(0,s.isObject)(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allIgnoredTokens=(0,i.mapKeys)(e,((e,t)=>c(t)))}else if((0,s.hasProperty)(t,"allIgnoredTokens")){var m,b;null===(m=global.sentry)||void 0===m||null===(b=m.captureException)||void 0===b||b.call(m,new Error("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens))}else a.default.warn("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens);if((0,s.hasProperty)(t,"allDetectedTokens")&&(0,s.isObject)(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allDetectedTokens=(0,i.mapKeys)(e,((e,t)=>c(t)))}else if((0,s.hasProperty)(t,"allDetectedTokens")){var g,y;null===(g=global.sentry)||void 0===g||null===(y=g.captureException)||void 0===y||y.call(g,new Error("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens))}else a.default.warn("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens);e.TokensController=t}else{var v,w;null===(v=global.sentry)||void 0===v||null===(w=v.captureException)||void 0===w||w.call(v,new Error("typeof state.TokensController is "+typeof e.TokensController))}}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=o(e("bn.js")),i=e("lodash"),a=o(e("loglevel"));function o(e){return e&&e.__esModule?e:{default:e}}const f=n.version=88;function c(e){if("string"==typeof e&&(0,s.isStrictHexString)(e))return e;return`0x${r.default.isBN(e)?e.toString(16):new r.default(e.toString(10),10).toString(16)}`}}}},{package:"$root$",file:"app/scripts/migrations/088.ts"}],[227,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"providerConfig")&&(0,s.isObject)(e.NetworkController.providerConfig)){const{networkConfigurations:t,providerConfig:n}=e.NetworkController;if(!(0,s.isObject)(t))return e;if(n.id)return e;let r;for(const i of Object.keys(t)){const a=t[i];if(!(0,s.isObject)(a))return e;if(a.rpcUrl===n.rpcUrl){r=a.id;break}}return r?(e.NetworkController.providerConfig={...n,id:r},{...e,NetworkController:e.NetworkController}):e}var t,n;if((0,s.isObject)(e.NetworkController)){if(!(0,s.isObject)(e.NetworkController.providerConfig)){var r,i;null===(r=global.sentry)||void 0===r||null===(i=r.captureException)||void 0===i||i.call(r,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=89}}},{package:"$root$",file:"app/scripts/migrations/089.ts"}],[2276,{"@metamask/base-controller":1353,"@metamask/swappable-obj-proxy":2628},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o,f,c,l,u=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},d=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.SelectedNetworkController=n.SelectedNetworkControllerEventTypes=n.SelectedNetworkControllerActionTypes=n.METAMASK_DOMAIN=n.controllerName=void 0;const p=e("@metamask/base-controller"),h=e("@metamask/swappable-obj-proxy");n.controllerName="SelectedNetworkController";const m={domains:{persist:!0,anonymous:!1}},b=["npm:","local:"];n.METAMASK_DOMAIN="metamask",n.SelectedNetworkControllerActionTypes={getState:`${n.controllerName}:getState`,getNetworkClientIdForDomain:`${n.controllerName}:getNetworkClientIdForDomain`,setNetworkClientIdForDomain:`${n.controllerName}:setNetworkClientIdForDomain`},n.SelectedNetworkControllerEventTypes={stateChange:`${n.controllerName}:stateChange`};class g extends p.BaseController{constructor({messenger:e,state:t={domains:{}},useRequestQueuePreference:o,onPreferencesStateChange:c,domainProxyMap:p}){super({name:n.controllerName,metadata:m,messenger:e,state:t}),s.add(this),r.set(this,void 0),i.set(this,void 0),u(this,i,o,"f"),u(this,r,p,"f"),d(this,s,"m",a).call(this),this.messagingSystem.call("PermissionController:getSubjectNames").filter((e=>this.state.domains[e]===undefined)).forEach((e=>this.setNetworkClientIdForDomain(e,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId))),this.messagingSystem.subscribe("PermissionController:stateChange",((e,t)=>{t.forEach((({op:e,path:t})=>{if("subjects"===t[0]&&t[1]!==undefined&&"string"==typeof t[1]){const n=t[1];"add"===e&&this.state.domains[n]===undefined?this.setNetworkClientIdForDomain(n,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId):"remove"===e&&this.state.domains[n]!==undefined&&d(this,s,"m",f).call(this,n)}}))})),this.messagingSystem.subscribe("NetworkController:stateChange",(({selectedNetworkClientId:e,networkConfigurationsByChainId:t},n)=>{const s=n.find((({op:e,path:t})=>("replace"===e||"remove"===e)&&"networkConfigurationsByChainId"===t[0]));if(s){const n=Object.values(t).reduce(((e,t)=>(t.rpcEndpoints.forEach((({networkClientId:n})=>e[n]=t.chainId)),e)),{});Object.entries(this.state.domains).forEach((([r,i])=>{const a=n[i];if("remove"!==s.op||a){if("replace"===s.op){const e=s.path[1];if(!a||a===e){const n=t[e],{networkClientId:s}=n.rpcEndpoints[n.defaultRpcEndpointIndex];i!==s&&this.setNetworkClientIdForDomain(r,s)}}}else this.setNetworkClientIdForDomain(r,e)}))}})),c((({useRequestQueue:e})=>{d(this,i,"f")!==e&&(e?d(this,s,"m",l).call(this):Object.keys(this.state.domains).forEach((e=>{d(this,s,"m",f).call(this,e)})),u(this,i,e,"f"))}))}setNetworkClientIdForDomain(e,t){if(d(this,i,"f")){if(e===n.METAMASK_DOMAIN)throw new Error(`NetworkClientId for domain "${n.METAMASK_DOMAIN}" cannot be set on the SelectedNetworkController`);if(!b.some((t=>e.startsWith(t)))){if(!d(this,s,"m",c).call(this,e))throw new Error("NetworkClientId for domain cannot be called with a domain that has not yet been granted permissions");d(this,s,"m",o).call(this,e,t)}}}getNetworkClientIdForDomain(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");return d(this,i,"f")?this.state.domains[e]??t:t}getProviderAndBlockTracker(e){if(e===n.METAMASK_DOMAIN||b.some((t=>e.startsWith(t)))){const e=this.messagingSystem.call("NetworkController:getSelectedNetworkClient");if(e===undefined)throw new Error("Selected network not initialized");return e}let t=d(this,r,"f").get(e);if(t===undefined){let n;if(d(this,i,"f")&&d(this,s,"m",c).call(this,e)){const t=this.getNetworkClientIdForDomain(e);n=this.messagingSystem.call("NetworkController:getNetworkClientById",t)}else if(n=this.messagingSystem.call("NetworkController:getSelectedNetworkClient"),n===undefined)throw new Error("Selected network not initialized");t={provider:(0,h.createEventEmitterProxy)(n.provider),blockTracker:(0,h.createEventEmitterProxy)(n.blockTracker,{eventFilter:"skipInternal"})},d(this,r,"f").set(e,t)}return t}}n.SelectedNetworkController=g,r=new WeakMap,i=new WeakMap,s=new WeakSet,a=function(){this.messagingSystem.registerActionHandler(n.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,this.getNetworkClientIdForDomain.bind(this)),this.messagingSystem.registerActionHandler(n.SelectedNetworkControllerActionTypes.setNetworkClientIdForDomain,this.setNetworkClientIdForDomain.bind(this))},o=function(e,t){const n=this.messagingSystem.call("NetworkController:getNetworkClientById",t);this.update((n=>{n.domains[e]=t}));const s=this.getProviderAndBlockTracker(e);s.provider.setTarget(n.provider),s.blockTracker.setTarget(n.blockTracker)},f=function(e){const t=this.messagingSystem.call("NetworkController:getSelectedNetworkClient"),n=d(this,r,"f").get(e);n&&t?(n.provider.setTarget(t.provider),n.blockTracker.setTarget(t.blockTracker)):n&&d(this,r,"f").delete(e),this.update((t=>{delete t.domains[e]}))},c=function(e){return this.messagingSystem.call("PermissionController:hasPermissions",e)},l=function(){d(this,r,"f").forEach(((e,t)=>{const{selectedNetworkClientId:n}=this.messagingSystem.call("NetworkController:getState");d(this,s,"m",c).call(this,t)&&d(this,s,"m",o).call(this,t,n)}))}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkController.cjs"}],[2277,{"./SelectedNetworkController.cjs":2276},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createSelectedNetworkMiddleware=void 0;const s=e("./SelectedNetworkController.cjs");n.createSelectedNetworkMiddleware=e=>(t,n,r)=>{if(!t.origin)throw new Error("Request object is lacking an 'origin'");var i;return t.networkClientId=(i=t.origin,e.call(s.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,i)),r()}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkMiddleware.cjs"}],[2278,{"./SelectedNetworkController.cjs":2276,"./SelectedNetworkMiddleware.cjs":2277},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createSelectedNetworkMiddleware=n.METAMASK_DOMAIN=n.SelectedNetworkController=n.SelectedNetworkControllerEventTypes=n.SelectedNetworkControllerActionTypes=void 0;var s=e("./SelectedNetworkController.cjs");Object.defineProperty(n,"SelectedNetworkControllerActionTypes",{enumerable:!0,get:function(){return s.SelectedNetworkControllerActionTypes}}),Object.defineProperty(n,"SelectedNetworkControllerEventTypes",{enumerable:!0,get:function(){return s.SelectedNetworkControllerEventTypes}}),Object.defineProperty(n,"SelectedNetworkController",{enumerable:!0,get:function(){return s.SelectedNetworkController}}),Object.defineProperty(n,"METAMASK_DOMAIN",{enumerable:!0,get:function(){return s.METAMASK_DOMAIN}});var r=e("./SelectedNetworkMiddleware.cjs");Object.defineProperty(n,"createSelectedNetworkMiddleware",{enumerable:!0,get:function(){return r.createSelectedNetworkMiddleware}})}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/index.cjs"}],[228,{"@metamask/utils":2765,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,i.hasProperty)(e,"PhishingController"))return a.default.warn("typeof state.PhishingController is undefined"),e;if(!(0,i.isObject)(e.PhishingController)){var t,n;return null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController)),e}if(!(0,i.hasProperty)(e.PhishingController,"listState"))return a.default.warn("typeof state.PhishingController.listState is "+typeof e.PhishingController),e;return delete e.PhishingController.listState,e}(t.data),t},n.version=void 0;var s,r=e("lodash"),i=e("@metamask/utils"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=n.version=90}}},{package:"$root$",file:"app/scripts/migrations/090.ts"}],[229,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"networkConfigurations")&&(0,s.isObject)(e.NetworkController.networkConfigurations)){const{networkConfigurations:t}=e.NetworkController;for(const[e,n]of Object.entries(t))(0,s.isObject)(n)&&(n.chainId||delete t[e]);return e.NetworkController={...e.NetworkController,networkConfigurations:t},{...e,NetworkController:e.NetworkController}}var t,n;if((0,s.isObject)(e.NetworkController)){if(!(0,s.isObject)(e.NetworkController.networkConfigurations)){var r,i;null===(r=global.sentry)||void 0===r||null===(i=r.captureException)||void 0===i||i.call(r,new Error("typeof state.NetworkController.networkConfigurations is "+typeof e.NetworkController.networkConfigurations))}}else null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=91}}},{package:"$root$",file:"app/scripts/migrations/091.ts"}],[23,{"../../../development/build/constants":294,"../../../shared/constants/alarms":5120,"../../../shared/constants/app":5123,"../../../shared/constants/metametrics":5135,"../../../shared/constants/time":5151,"../../../shared/constants/transaction":5153,"../../../shared/modules/mv3.utils":5185,"../lib/util":134,"@metamask/base-controller":1353,"@metamask/name-controller":1911,"@metamask/utils":2765,buffer:3537,"ethereumjs-util":3753,lodash:4256,uuid:5050},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.overrideAnonymousEventNames=n.getDefaultMetaMetricsControllerState=n.default=void 0;var s=e("lodash"),r=e("ethereumjs-util"),i=e("uuid"),a=e("@metamask/name-controller"),o=e("@metamask/utils"),f=e("@metamask/base-controller"),c=e("../../../shared/constants/app"),l=e("../../../shared/constants/metametrics"),u=e("../../../shared/constants/time"),d=e("../../../shared/modules/mv3.utils"),p=e("../../../shared/constants/alarms"),h=e("../lib/util"),m=e("../../../shared/constants/transaction"),b=e("../../../development/build/constants");function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t,n){v(e,t),t.set(e,n)}function v(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function w(e,t){return e.get(S(e,t))}function T(e,t,n){return e.set(S(e,t),n),n}function S(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const k=n.overrideAnonymousEventNames={[m.TransactionMetaMetricsEvent.added]:m.AnonymousTransactionMetaMetricsEvent.added,[m.TransactionMetaMetricsEvent.approved]:m.AnonymousTransactionMetaMetricsEvent.approved,[m.TransactionMetaMetricsEvent.finalized]:m.AnonymousTransactionMetaMetricsEvent.finalized,[m.TransactionMetaMetricsEvent.rejected]:m.AnonymousTransactionMetaMetricsEvent.rejected,[m.TransactionMetaMetricsEvent.submitted]:m.AnonymousTransactionMetaMetricsEvent.submitted,[l.MetaMetricsEventName.SignatureRequested]:l.MetaMetricsEventName.SignatureRequestedAnon,[l.MetaMetricsEventName.SignatureApproved]:l.MetaMetricsEventName.SignatureApprovedAnon,[l.MetaMetricsEventName.SignatureRejected]:l.MetaMetricsEventName.SignatureRejectedAnon},_=e=>{setTimeout((()=>{throw e}))},E=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,h.generateRandomId)()},I={'You must pass either an "anonymousId" or a "userId".':!0},P={metaMetricsId:{persist:!0,anonymous:!0},participateInMetaMetrics:{persist:!0,anonymous:!0},latestNonAnonymousEventTimestamp:{persist:!0,anonymous:!0},fragments:{persist:!0,anonymous:!1},eventsBeforeMetricsOptIn:{persist:!0,anonymous:!1},traits:{persist:!0,anonymous:!1},previousUserTraits:{persist:!0,anonymous:!1},dataCollectionForMarketing:{persist:!0,anonymous:!1},marketingCampaignCookieId:{persist:!0,anonymous:!0},segmentApiCalls:{persist:!0,anonymous:!1}},C=()=>({participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],traits:{},previousUserTraits:{},fragments:{},segmentApiCalls:{}});n.getDefaultMetaMetricsControllerState=C;var j=new WeakMap,A=new WeakMap,x=new WeakMap,O=new WeakMap,N=new WeakSet,M=new WeakMap;class R extends f.BaseController{constructor({state:e={},messenger:t,segment:n,version:r,environment:i,extension:a,captureException:f=_}){var c,l;super({name:"MetaMetricsController",metadata:P,state:{participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],traits:{},previousUserTraits:{},fragments:{},segmentApiCalls:{},...e},messenger:t}),v(c=this,l=N),l.add(c),y(this,j,void 0),g(this,"chainId",void 0),g(this,"locale",void 0),g(this,"version",void 0),y(this,A,void 0),y(this,x,void 0),y(this,O,void 0),y(this,M,(0,s.memoize)(((e={})=>Object.values(e).reduce(((e,t)=>e.concat(...Object.values(t))),[])))),T(j,this,(e=>{const t=(0,o.getErrorMessage)(e);I[t]||f(e)})),this.chainId=S(N,this,B).call(this);const m=this.messagingSystem.call("PreferencesController:getState");this.locale=m.currentLocale.replace("_","-"),this.version="production"===i?r:`${r}-${i}`,T(A,this,a),T(x,this,i);const b=(0,s.omitBy)(e.fragments,"persist");this.messagingSystem.subscribe("PreferencesController:stateChange",(({currentLocale:e})=>{this.locale=null==e?void 0:e.replace("_","-")})),this.messagingSystem.subscribe("NetworkController:networkDidChange",(({selectedNetworkClientId:e})=>{this.chainId=S(N,this,B).call(this,e)})),T(O,this,n),Object.values(b).forEach((e=>{this.processAbandonedFragment(e)})),d.isManifestV3&&Object.values(e.segmentApiCalls||{}).forEach((({eventType:e,payload:t})=>{try{S(N,this,W).call(this,e,t)}catch(e){w(j,this).call(this,e)}})),d.isManifestV3?(w(A,this).alarms.getAll().then((e=>{(0,h.checkAlarmExists)(e,p.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||w(A,this).alarms.create(p.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})})),w(A,this).alarms.onAlarm.addListener((e=>{e.name===p.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()}))):setInterval((()=>{this.finalizeAbandonedFragments()}),30*u.SECOND)}finalizeAbandonedFragments(){Object.values(this.state.fragments).forEach((e=>{e.timeout&&e.lastUpdated&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.processAbandonedFragment(e)}))}generateMetaMetricsId(){return(0,r.bufferToHex)((0,r.keccak)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent||!e.category)throw new Error(`Must specify success event and category. Success event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.state,n=e.uniqueIdentifier??(0,i.v4)(),r={id:n,...e,lastUpdated:Date.now()},a=e.initialEvent===m.TransactionMetaMetricsEvent.submitted&&t[n]?{...t[n],canDeleteIfAbandoned:!1}:{};return this.update((e=>{e.fragments[n]=(0,s.merge)({},a,r)})),r.initialEvent&&this.trackEvent({event:r.initialEvent,category:r.category,properties:r.properties,sensitiveProperties:r.sensitiveProperties,page:r.page,referrer:r.referrer,revenue:r.revenue,value:r.value,currency:r.currency,environmentType:r.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),r}getEventFragmentById(e){return this.state.fragments[e]}processAbandonedFragment(e){e.canDeleteIfAbandoned?this.deleteEventFragment(e.id):this.finalizeEventFragment(e.id,{abandoned:!0})}updateEventFragment(e,t){const{fragments:n}=this.state,r=n[e];if(!r&&e.includes("transaction-submitted-"))this.update((n=>{n.fragments[e]={canDeleteIfAbandoned:!0,category:l.MetaMetricsEventCategory.Transactions,successEvent:m.TransactionMetaMetricsEvent.finalized,id:e,...t,lastUpdated:Date.now()}}));else{if(!r)throw new Error(`Event fragment with id ${e} does not exist.`);this.update((n=>{n.fragments[e]=(0,s.merge)(n.fragments[e],{...t,lastUpdated:Date.now()})}))}}deleteEventFragment(e){this.state.fragments[e]&&this.update((t=>{delete t.fragments[e]}))}finalizeEventFragment(e,{abandoned:t=!1,page:n,referrer:s}={}){const r=this.state.fragments[e];if(!r)throw new Error(`Funnel with id ${e} does not exist.`);const i=t?r.failureEvent:r.successEvent;this.trackEvent({event:i??"",category:r.category,properties:r.properties,sensitiveProperties:r.sensitiveProperties,page:n??r.page,referrer:r.referrer??s,revenue:r.revenue,value:r.value,currency:r.currency,environmentType:r.environmentType,actionId:r.actionId,uniqueIdentifier:r.uniqueIdentifier?`${r.uniqueIdentifier}-${t?"failure":"success"}`:undefined}),this.update((t=>{delete t.fragments[e]}))}identify(e){const{metaMetricsId:t,participateInMetaMetrics:n}=this.state;if(!n||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const s=S(N,this,$).call(this,e);S(N,this,V).call(this,s)}updateExtensionUninstallUrl(e,n){const s={};e&&(s.mmi=t.from(n).toString("base64"),s.env=w(x,this),s.av=this.version);const r=new URLSearchParams(s);w(A,this)&&w(A,this).runtime&&w(A,this).runtime.setUninstallURL(`https://metamask.io/uninstalled?${r}`)}async setParticipateInMetaMetrics(e){const{metaMetricsId:t}=this.state,n=e&&!t?this.generateMetaMetricsId():t;return this.update((t=>{t.participateInMetaMetrics=e,t.metaMetricsId=n})),e?(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn()):this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),w(x,this)!==b.ENVIRONMENT.DEVELOPMENT&&null!==n&&this.updateExtensionUninstallUrl(e,n),n}setDataCollectionForMarketing(e){const{metaMetricsId:t}=this.state;return this.update((t=>{t.dataCollectionForMarketing=e})),!e&&this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),t}setMarketingCampaignCookieId(e){this.update((t=>{t.marketingCampaignCookieId=e}))}trackPage(e,t){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==t||!t.isOptInPath))return;const{name:n,params:s,environmentType:r,page:i,referrer:a,actionId:o}=e,{metaMetricsId:f}=this.state,c=f?"userId":"anonymousId",u=f??l.METAMETRICS_ANONYMOUS_ID;S(N,this,W).call(this,"page",{messageId:E({actionId:o}),[c]:u,name:n,properties:{params:s,locale:this.locale,chain_id:this.chainId,environment_type:r},context:S(N,this,F).call(this,a,i)})}catch(e){w(j,this).call(this,e)}}trackEvent(e,t){S(N,this,D).call(this,e),S(N,this,L).call(this,e,t).catch((e=>{w(j,this).call(this,e)}))}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.state;e.forEach((e=>{this.trackEvent(e)}))}clearEventsAfterMetricsOptIn(){this.update((e=>{e.eventsBeforeMetricsOptIn=[]}))}addEventBeforeMetricsOptIn(e){this.update((t=>{t.eventsBeforeMetricsOptIn.push(e)}))}updateTraits(e){this.update((t=>{t.traits={...t.traits,...e}}))}getMetaMetricsId(){let{metaMetricsId:e}=this.state;return e||(e=this.generateMetaMetricsId(),this.update((t=>{t.metaMetricsId=e}))),e}_buildUserTraitsObject(e){var t;const{traits:n,previousUserTraits:r}=this.state,i={[l.MetaMetricsUserTrait.AddressBookEntries]:(0,s.sum)(Object.values(e.addressBook).map(s.size)),[l.MetaMetricsUserTrait.InstallDateExt]:n[l.MetaMetricsUserTrait.InstallDateExt]||"",[l.MetaMetricsUserTrait.LedgerConnectionType]:e.ledgerTransportType,[l.MetaMetricsUserTrait.NetworksAdded]:Object.values(e.networkConfigurationsByChainId).map((e=>e.chainId)),[l.MetaMetricsUserTrait.NetworksWithoutTicker]:Object.values(e.networkConfigurationsByChainId).filter((({nativeCurrency:e})=>!e)).map((({chainId:e})=>e)),[l.MetaMetricsUserTrait.NftAutodetectionEnabled]:e.useNftDetection,[l.MetaMetricsUserTrait.NumberOfAccounts]:Object.values(e.internalAccounts.accounts).length,[l.MetaMetricsUserTrait.NumberOfNftCollections]:S(N,this,G).call(this,e.allNfts),[l.MetaMetricsUserTrait.NumberOfNfts]:w(M,this).call(this,e.allNfts).length,[l.MetaMetricsUserTrait.NumberOfTokens]:S(N,this,H).call(this,e.allTokens),[l.MetaMetricsUserTrait.OpenSeaApiEnabled]:e.openSeaEnabled,[l.MetaMetricsUserTrait.ThreeBoxEnabled]:!1,[l.MetaMetricsUserTrait.Theme]:e.theme||"default",[l.MetaMetricsUserTrait.TokenDetectionEnabled]:e.useTokenDetection,[l.MetaMetricsUserTrait.ShowNativeTokenAsMainBalance]:e.ShowNativeTokenAsMainBalance,[l.MetaMetricsUserTrait.CurrentCurrency]:e.currentCurrency,[l.MetaMetricsUserTrait.SecurityProviders]:e.securityAlertsEnabled?["blockaid"]:[],[l.MetaMetricsUserTrait.PetnameAddressCount]:S(N,this,Y).call(this,e),[l.MetaMetricsUserTrait.IsMetricsOptedIn]:e.participateInMetaMetrics,[l.MetaMetricsUserTrait.HasMarketingConsent]:e.dataCollectionForMarketing,[l.MetaMetricsUserTrait.TokenSortPreference]:(null===(t=e.tokenSortConfig)||void 0===t?void 0:t.key)||"",[l.MetaMetricsUserTrait.PrivacyModeEnabled]:e.preferences.privacyMode,[l.MetaMetricsUserTrait.NetworkFilterPreference]:Object.keys(e.preferences.tokenNetworkFilter||{})};if(!r)return this.update((e=>{e.previousUserTraits=i})),i;if(r&&!(0,s.isEqual)(r,i)){const e=(0,s.pickBy)(i,((e,t)=>{const n=r[t];return!(0,s.isEqual)(n,e)}));return this.update((e=>{e.previousUserTraits=i})),e}return null}}function B(e){const t=e||this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId,{configuration:{chainId:n}}=this.messagingSystem.call("NetworkController:getNetworkClientById",t);return n}async function L(e,t){if(!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const n=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const r=k[`${e.event}`],i={...e,event:r??e.event},a=(0,s.merge)({...i.sensitiveProperties},{...i.properties});n.push(S(N,this,K).call(this,S(N,this,U).call(this,{...i,properties:a,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}n.push(S(N,this,K).call(this,S(N,this,U).call(this,e),t)),await Promise.all(n)}function D(e){if(!e.event||!e.category)throw new Error(`Must specify event and category. Event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}function F(e,t=l.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e,marketingCampaignCookieId:this.state.marketingCampaignCookieId}}function U(e){const{event:t,properties:n,revenue:r,value:i,currency:a,category:o,page:f,referrer:l,environmentType:u=c.ENVIRONMENT_TYPE_BACKGROUND}=e;return{event:t,messageId:E(e),properties:{...(0,s.omit)(n,["revenue","locale","currency","value"]),revenue:r,value:i,currency:a,category:o,locale:this.locale,chain_id:n&&"chain_id"in n&&"string"==typeof n.chain_id?n.chain_id:this.chainId,environment_type:u},context:S(N,this,F).call(this,l,f)}}function $(e){return Object.entries(e).reduce(((e,[t,n])=>S(N,this,q).call(this,n)?{...e,[t]:n.toISOString()}:S(N,this,J).call(this,n)?{...e,[t]:n}:(console.warn(`MetaMetricsController: "${t}" value is not a valid trait type`),e)),{})}function G(e={}){const t=w(M,this).call(this,e).map((e=>e.address));return new Set(t).size}function H(e){return Object.values(e).reduce(((e,t)=>e+(0,s.sum)(Object.values(t).map(s.size))),0)}function V(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{S(N,this,W).call(this,"identify",{userId:t??undefined,traits:e})}catch(e){w(j,this).call(this,e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}function J(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||S(N,this,z).call(this,e)||S(N,this,q).call(this,e)}function z(e){return Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"boolean"==typeof e))||e.every((e=>"number"==typeof e)))}function q(e){return"[object Date]"===Object.prototype.toString.call(e)}function K(e,t){const{isOptIn:n,metaMetricsId:s,matomoEvent:r,flushImmediately:i}=t||{};let a="userId",f=this.state.metaMetricsId,c=(null==t?void 0:t.excludeMetaMetricsId)??!1;const u=Boolean(e.event.match(/^send|^confirm/iu));return!1!==(null==t?void 0:t.excludeMetaMetricsId)&&u&&(c=!0),c||n&&!s?(a="anonymousId",f=l.METAMETRICS_ANONYMOUS_ID):n&&s&&(f=s),e[a]=f??undefined,!0===r&&(e.properties.legacy_event=!0),new Promise(((t,n)=>{S(N,this,W).call(this,"track",e,(e=>{if(e){const t=(0,o.isErrorWithMessage)(e)?e.message:"",s=(0,o.isErrorWithStack)(e)?e.stack:undefined,r=new Error(t);return s&&(r.stack=s),n(r)}return t()})),i&&w(O,this).flush()}))}function W(e,t,n){const{metaMetricsId:s,participateInMetaMetrics:r,latestNonAnonymousEventTimestamp:i}=this.state;if(!r||!s)return;const a=t.messageId||(0,h.generateRandomId)();let o=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,h.isValidDate)(e)&&(o=e)}const f={...t,messageId:a,timestamp:o};this.update((t=>{t.latestNonAnonymousEventTimestamp=f.anonymousId===l.METAMETRICS_ANONYMOUS_ID?i:o.valueOf(),t.segmentApiCalls[a]={eventType:e,payload:{...f,timestamp:f.timestamp.toString()}}}));w(O,this)[e](f,(e=>(this.update((e=>{delete e.segmentApiCalls[a]})),null==n?void 0:n(e))))}function Y(e){var t;const n=(null===(t=e.names)||void 0===t?void 0:t[a.NameType.ETHEREUM_ADDRESS])??{};return Object.keys(n).reduce(((e,t)=>{const s=n[t];return e+Object.keys(s).reduce(((e,t)=>{var n;return e+(Boolean(null===(n=s[t].name)||void 0===n?void 0:n.length)?1:0)}),0)}),0)}n.default=R}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics-controller.ts"}],[230,{"@metamask/utils":2765,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,i.hasProperty)(e,"TokenListController"))return a.default.warn("Skipping migration, TokenListController state is missing"),e;var t,n;if(!(0,i.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,i.hasProperty)(e.TokenListController,"tokensChainsCache"))return a.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;e.TokenListController.tokensChainsCache===undefined&&delete e.TokenListController.tokensChainsCache;return e}(t.data),t},n.version=void 0;var s,r=e("lodash"),i=e("@metamask/utils"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=n.version=92.1}}},{package:"$root$",file:"app/scripts/migrations/092.1.ts"}],[231,{"@metamask/utils":2765,"@sentry/browser":2892,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,t.data=function(e){return function(e){const t=["networkId","networkStatus","providerConfig","networkDetails","networkConfigurations"];if(!(0,s.hasProperty)(e,"NetworkController")||!(0,i.isObject)(e.NetworkController))return(0,r.captureException)(`Migration ${a}: Invalid NetworkController state: ${typeof e.NetworkController}`),e;const n=e.NetworkController,o=(0,i.pick)(n,t);return{...e,NetworkController:o}}(e)}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("@sentry/browser"),i=e("lodash");const a=n.version=92.2}}},{package:"$root$",file:"app/scripts/migrations/092.2.ts"}],[2313,{"./constants":2314,"./types":2316,"./utils":2317,"@ethersproject/bytes":487,"@metamask/controller-utils":1379,"@metamask/eth-query":1596,"@metamask/polling-controller":2359,"@metamask/transaction-controller":2647,"bignumber.js":2360,"lodash/cloneDeep":4236},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o,f,c,l,u,d,p,h,m,b,g,y,v,w,T,S,k,_,E,I=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},P=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},C=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultSmartTransactionsControllerState=n.DEFAULT_INTERVAL=void 0;const j=e("@ethersproject/bytes"),A=e("@metamask/controller-utils"),x=C(e("@metamask/eth-query")),O=e("@metamask/polling-controller"),N=e("@metamask/transaction-controller"),M=e("bignumber.js"),R=C(e("lodash/cloneDeep")),B=e("./constants"),L=e("./types"),D=e("./utils");n.DEFAULT_INTERVAL=5e3;const F="`ethQuery` is not defined on SmartTransactionsController",U="SmartTransactionsController",$={smartTransactionsState:{persist:!1,anonymous:!0}};function G(){return{smartTransactionsState:{smartTransactions:{},userOptIn:null,userOptInV2:null,fees:{approvalTxFees:null,tradeTxFees:null},liveness:!0,livenessByChainId:{[A.ChainId.mainnet]:!0,[A.ChainId.sepolia]:!0},feesByChainId:{[A.ChainId.mainnet]:{approvalTxFees:null,tradeTxFees:null},[A.ChainId.sepolia]:{approvalTxFees:null,tradeTxFees:null}}}}}n.getDefaultSmartTransactionsControllerState=G;class H extends((0,O.StaticIntervalPollingController)()){constructor({interval:e=n.DEFAULT_INTERVAL,clientId:t,chainId:b=A.ChainId.mainnet,supportedChainIds:g=[A.ChainId.mainnet,A.ChainId.sepolia],getNonceLock:y,confirmExternalTransaction:v,trackMetaMetricsEvent:w,state:T={},messenger:S,getTransactions:k,getMetaMetricsProps:_,getFeatureFlags:E,updateTransaction:P}){super({name:U,metadata:$,messenger:S,state:Object.assign(Object.assign({},G()),T)}),s.add(this),r.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),f.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,void 0),p.set(this,void 0),h.set(this,void 0),m.set(this,void 0),I(this,r,e,"f"),I(this,i,t,"f"),I(this,a,b,"f"),I(this,o,g,"f"),this.setIntervalLength(e),I(this,f,y,"f"),I(this,c,undefined,"f"),I(this,l,v,"f"),I(this,u,k,"f"),I(this,d,w,"f"),I(this,p,_,"f"),I(this,h,E,"f"),I(this,m,P,"f"),this.initializeSmartTransactionsForChainId(),this.messagingSystem.subscribe("NetworkController:stateChange",(({selectedNetworkClientId:e})=>{const{configuration:{chainId:t},provider:n}=this.messagingSystem.call("NetworkController:getNetworkClientById",e);I(this,a,t,"f"),I(this,c,new x.default(n),"f"),this.initializeSmartTransactionsForChainId(),this.checkPoll(this.state)})),this.messagingSystem.subscribe(`${U}:stateChange`,(e=>this.checkPoll(e)))}async _executePoll({networkClientId:e}){const t=P(this,s,"m",S).call(this,{networkClientId:e});return P(this,o,"f").includes(t)?this.updateSmartTransactions({networkClientId:e}):Promise.resolve()}checkPoll({smartTransactionsState:{smartTransactions:e}}){const t=e[P(this,a,"f")],n=null==t?void 0:t.filter(D.isSmartTransactionPending);!this.timeoutHandle&&(null==n?void 0:n.length)>0?this.poll():this.timeoutHandle&&0===(null==n?void 0:n.length)&&this.stop()}initializeSmartTransactionsForChainId(){P(this,o,"f").includes(P(this,a,"f"))&&this.update((e=>{var t;e.smartTransactionsState.smartTransactions[P(this,a,"f")]=null!==(t=e.smartTransactionsState.smartTransactions[P(this,a,"f")])&&void 0!==t?t:[]}))}async poll(e){e&&I(this,r,e,"f"),this.timeoutHandle&&clearInterval(this.timeoutHandle),P(this,o,"f").includes(P(this,a,"f"))&&(this.timeoutHandle=setInterval((()=>{(0,A.safelyExecute)((async()=>this.updateSmartTransactions()))}),P(this,r,"f")),await(0,A.safelyExecute)((async()=>this.updateSmartTransactions())))}async stop(){this.timeoutHandle&&clearInterval(this.timeoutHandle),this.timeoutHandle=undefined}setOptInState(e){this.update((t=>{t.smartTransactionsState.userOptInV2=e}))}trackStxStatusChange(e,t){let n=(0,R.default)(e);n=Object.assign(Object.assign({},(0,R.default)(t)),n),n.status!==(null==t?void 0:t.status)&&P(this,d,"f").call(this,{event:B.MetaMetricsEventName.StxStatusUpdated,category:B.MetaMetricsEventCategory.Transactions,properties:(0,D.getSmartTransactionMetricsProperties)(n),sensitiveProperties:(0,D.getSmartTransactionMetricsSensitiveProperties)(n)})}isNewSmartTransaction(e){const{smartTransactionsState:{smartTransactions:t}}=this.state,n=t[P(this,a,"f")],s=null==n?void 0:n.findIndex((t=>t.uuid===e));return-1===s||s===undefined}updateSmartTransaction(e,{networkClientId:t}={}){let n=P(this,c,"f"),r=P(this,a,"f");if(t){const{configuration:e,provider:s}=this.messagingSystem.call("NetworkController:getNetworkClientById",t);r=e.chainId,n=new x.default(s)}P(this,s,"m",v).call(this,e,{chainId:r,ethQuery:n})}async updateSmartTransactions({networkClientId:e}={}){const{smartTransactionsState:{smartTransactions:t}}=this.state,n=t[P(this,s,"m",S).call(this,{networkClientId:e})].filter(D.isSmartTransactionPending).map((e=>e.uuid));n.length>0&&this.fetchSmartTransactionsStatus(n,{networkClientId:e})}async fetchSmartTransactionsStatus(e,{networkClientId:t}={}){const n=new URLSearchParams({uuids:e.join(",")}),r=P(this,s,"m",S).call(this,{networkClientId:t}),i=P(this,s,"m",k).call(this,{networkClientId:t}),a=`${(0,D.getAPIRequestURL)(L.APIType.BATCH_STATUS,r)}?${n.toString()}`,o=await P(this,s,"m",b).call(this,a);for(const[e,t]of Object.entries(o)){const n={statusMetadata:t,status:(0,D.calculateStatus)(t),cancellable:(0,D.isSmartTransactionCancellable)(t),uuid:e};await P(this,s,"m",v).call(this,n,{chainId:r,ethQuery:i})}return o}async addNonceToTransaction(e){const t=await P(this,f,"f").call(this,e.from),n=t.nextNonce;return t.releaseLock(),Object.assign(Object.assign({},e),{nonce:`0x${n.toString(16)}`})}clearFees(){const e={approvalTxFees:null,tradeTxFees:null};return this.update((t=>{t.smartTransactionsState.fees=e})),e}async getFees(e,t,{networkClientId:n}={}){const r=P(this,s,"m",S).call(this,{networkClientId:n}),i=[];let o;if(t){const n=await this.addNonceToTransaction(t);i.push(n),o=Object.assign(Object.assign({},e),{nonce:(0,D.incrementNonceInHex)(n.nonce)})}else o=e.nonce?e:await this.addNonceToTransaction(e);i.push(o);const f=await P(this,s,"m",b).call(this,(0,D.getAPIRequestURL)(L.APIType.GET_FEES,r),{method:"POST",body:JSON.stringify({txs:i})});let c,l;return t?(c=null==f?void 0:f.txs[0],l=null==f?void 0:f.txs[1]):(c=null,l=null==f?void 0:f.txs[0]),this.update((e=>{r===P(this,a,"f")&&(e.smartTransactionsState.fees={approvalTxFees:c,tradeTxFees:l}),e.smartTransactionsState.feesByChainId[r]={approvalTxFees:c,tradeTxFees:l}})),{approvalTxFees:c,tradeTxFees:l}}async submitSignedTransactions({transactionMeta:e,txParams:t,signedTransactions:n,signedCanceledTransactions:r,networkClientId:i}){var a,o;const c=P(this,s,"m",S).call(this,{networkClientId:i}),l=P(this,s,"m",k).call(this,{networkClientId:i}),u=await P(this,s,"m",b).call(this,(0,D.getAPIRequestURL)(L.APIType.SUBMIT_TRANSACTIONS,c),{method:"POST",body:JSON.stringify({rawTxs:n,rawCancelTxs:r})}),d=Date.now();let p;try{const e=await(0,A.query)(l,"getBalance",[null==t?void 0:t.from]);p=new M.BigNumber(e).toString(16)}catch(e){console.error("provider error",e)}let h,m,g={};t&&!t.nonce&&(m=await P(this,f,"f").call(this,t.from),h=(0,j.hexlify)(m.nextNonce),g=m.nonceDetails,null!==(a=t.nonce)&&void 0!==a||(t.nonce=h));const y=Object.assign(Object.assign({},u),{txHash:(0,D.getTxHash)(n[0])});try{await P(this,s,"m",v).call(this,{chainId:c,nonceDetails:g,preTxBalance:p,status:L.SmartTransactionStatuses.PENDING,time:d,txParams:t,uuid:y.uuid,txHash:y.txHash,cancellable:!0,type:null!==(o=null==e?void 0:e.type)&&void 0!==o?o:"swap",transactionId:null==e?void 0:e.id},{chainId:c,ethQuery:l})}finally{null==m||m.releaseLock()}return y}async cancelSmartTransaction(e,{networkClientId:t}={}){const n=P(this,s,"m",S).call(this,{networkClientId:t});await P(this,s,"m",b).call(this,(0,D.getAPIRequestURL)(L.APIType.CANCEL,n),{method:"POST",body:JSON.stringify({uuid:e})})}async fetchLiveness({networkClientId:e}={}){const t=P(this,s,"m",S).call(this,{networkClientId:e});let n=!1;try{const e=await P(this,s,"m",b).call(this,(0,D.getAPIRequestURL)(L.APIType.LIVENESS,t));n=Boolean(e.smartTransactions)}catch(e){console.log('"fetchLiveness" API call failed')}return this.update((e=>{t===P(this,a,"f")&&(e.smartTransactionsState.liveness=n),e.smartTransactionsState.livenessByChainId[t]=n})),n}async setStatusRefreshInterval(e){e!==P(this,r,"f")&&I(this,r,e,"f")}getTransactions({addressFrom:e,status:t}){return P(this,s,"m",_).call(this).filter((n=>{var s;return n.status===t&&(null===(s=n.txParams)||void 0===s?void 0:s.from)===e}))}getSmartTransactionByMinedTxHash(e){if(!e)return undefined;return P(this,s,"m",_).call(this).find((t=>{var n,s;return(null===(s=null===(n=t.statusMetadata)||void 0===n?void 0:n.minedHash)||void 0===s?void 0:s.toLowerCase())===e.toLowerCase()}))}wipeSmartTransactions({address:e,ignoreNetwork:t}){if(!e)return;const n=e.toLowerCase();if(t){const{smartTransactionsState:{smartTransactions:e}}=this.state;Object.keys(e).forEach((e=>{P(this,s,"m",E).call(this,{chainId:e,addressLowerCase:n})}))}else P(this,s,"m",E).call(this,{chainId:P(this,a,"f"),addressLowerCase:n})}}n.default=H,r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,f=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,s=new WeakSet,b=async function(e,t){const n=Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json"},P(this,i,"f")&&{"X-Client-Id":P(this,i,"f")})});return(0,D.handleFetch)(e,n)},g=function(e,{chainId:t=P(this,a,"f")}){var n;const{smartTransactionsState:{smartTransactions:s}}=this.state,r=null!==(n=s[t])&&void 0!==n?n:[],i=null==r?void 0:r.findIndex((t=>t.uuid===e.uuid));-1!==i&&(0,A.isSafeDynamicKey)(t)&&this.update((n=>{n.smartTransactionsState.smartTransactions[t][i]=Object.assign(Object.assign({},n.smartTransactionsState.smartTransactions[t][i]),e)}))},y=async function(e){const t=await P(this,p,"f").call(this);e.accountHardwareType=null==t?void 0:t.accountHardwareType,e.accountType=null==t?void 0:t.accountType,e.deviceModel=null==t?void 0:t.deviceModel},v=async function(e,{chainId:t=P(this,a,"f"),ethQuery:n=P(this,c,"f")}){var r,o;const{smartTransactionsState:{smartTransactions:f}}=this.state,l=null!==(r=f[t])&&void 0!==r?r:[],d=null==l?void 0:l.findIndex((t=>t.uuid===e.uuid)),p=this.isNewSmartTransaction(e.uuid);if(P(this,c,"f")===undefined)throw new Error(F);if(p&&await P(this,s,"m",y).call(this,e),this.trackStxStatusChange(e,p?undefined:l[d]),p){const t=null==l?void 0:l.findIndex((t=>{var n,s,r;return(null===(n=t.txParams)||void 0===n?void 0:n.nonce)===(null===(s=e.txParams)||void 0===s?void 0:s.nonce)&&(null===(r=t.status)||void 0===r?void 0:r.startsWith("cancelled"))})),n=[(0,R.default)(e)],s=Object.assign(Object.assign({},e),{history:n}),r=t>-1?l.slice(0,t).concat(l.slice(t+1)).concat(s):l.concat(s);return void this.update((e=>{e.smartTransactionsState.smartTransactions[P(this,a,"f")]=r}))}const b=l[d],v=Object.assign(Object.assign({},b),e);if(this.messagingSystem.publish("SmartTransactionsController:smartTransaction",v),v.status===L.SmartTransactionStatuses.CANCELLED){if((0,D.getReturnTxHashAsap)(P(this,i,"f"),null===(o=P(this,h,"f").call(this))||void 0===o?void 0:o.smartTransactions)&&v.transactionId){const e=P(this,u,"f").call(this).find((e=>e.id===v.transactionId));if(e){const t=Object.assign(Object.assign({},e),{status:N.TransactionStatus.failed});P(this,m,"f").call(this,t,"Smart transaction cancelled")}}}e.status!==L.SmartTransactionStatuses.SUCCESS&&e.status!==L.SmartTransactionStatuses.REVERTED||e.confirmed?P(this,s,"m",g).call(this,e,{chainId:t}):await P(this,s,"m",T).call(this,v,{chainId:t,ethQuery:n})},w=function(e){if(!e)return!0;const t=P(this,u,"f").call(this),n=null==t?void 0:t.find((t=>{var n;return(null===(n=t.hash)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()}));return!n||![N.TransactionStatus.confirmed,N.TransactionStatus.submitted].includes(n.status)},T=async function(e,{chainId:t=P(this,a,"f"),ethQuery:n=P(this,c,"f")}){var r;if(n===undefined)throw new Error(F);const i=null===(r=e.statusMetadata)||void 0===r?void 0:r.minedHash;try{const r=await(0,A.query)(n,"getTransactionReceipt",[i]),a=await(0,A.query)(n,"getTransactionByHash",[i]),o=null==a?void 0:a.maxFeePerGas,f=null==a?void 0:a.maxPriorityFeePerGas;if(null==r?void 0:r.blockNumber){const a=await(0,A.query)(n,"getBlockByNumber",[null==r?void 0:r.blockNumber,!1]),c=null==a?void 0:a.baseFeePerGas,u=Object.assign(Object.assign({},e.txParams),{maxFeePerGas:o,maxPriorityFeePerGas:f}),p=Object.assign(Object.assign({},e),{id:e.uuid,status:N.TransactionStatus.confirmed,hash:i,txParams:u}),h=(0,D.snapshotFromTxMeta)(p),m=(0,D.replayHistory)(p.history),b=(0,D.generateHistoryEntry)(m,h,"txStateManager: setting status to confirmed"),y=b.length>0?Object.assign(Object.assign({},p),{history:p.history.concat(b)}):p;P(this,s,"m",w).call(this,i)&&P(this,l,"f").call(this,y,r,c),P(this,d,"f").call(this,{event:B.MetaMetricsEventName.StxConfirmed,category:B.MetaMetricsEventCategory.Transactions,properties:(0,D.getSmartTransactionMetricsProperties)(e),sensitiveProperties:(0,D.getSmartTransactionMetricsSensitiveProperties)(e)}),P(this,s,"m",g).call(this,Object.assign(Object.assign({},e),{confirmed:!0}),{chainId:t})}}catch(e){P(this,d,"f").call(this,{event:B.MetaMetricsEventName.StxConfirmationFailed,category:B.MetaMetricsEventCategory.Transactions}),console.error("confirm error",e)}finally{this.messagingSystem.publish("SmartTransactionsController:smartTransactionConfirmationDone",e)}},S=function({networkClientId:e}={}){return e?this.messagingSystem.call("NetworkController:getNetworkClientById",e).configuration.chainId:P(this,a,"f")},k=function({networkClientId:e}={}){if(e){const{provider:t}=this.messagingSystem.call("NetworkController:getNetworkClientById",e);return new x.default(t)}if(P(this,c,"f")===undefined)throw new Error(F);return P(this,c,"f")},_=function(){const{smartTransactionsState:{smartTransactions:e}}=this.state,t=null==e?void 0:e[P(this,a,"f")];return t&&0!==t.length?t:[]},E=function({chainId:e,addressLowerCase:t}){const{smartTransactionsState:{smartTransactions:n}}=this.state,s=null==n?void 0:n[e];if(!s||0===s.length)return;const r=s.filter((e=>{var n;return(null===(n=e.txParams)||void 0===n?void 0:n.from)!==t}));this.update((t=>{t.smartTransactionsState.smartTransactions[e]=r}))}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/SmartTransactionsController.js"}],[2314,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsEventCategory=n.MetaMetricsEventName=n.SENTINEL_API_BASE_URL_MAP=n.API_BASE_URL=void 0,n.API_BASE_URL="https://transaction.api.cx.metamask.io",n.SENTINEL_API_BASE_URL_MAP={1:"https://tx-sentinel-ethereum-mainnet.api.cx.metamask.io",11155111:"https://tx-sentinel-ethereum-sepolia.api.cx.metamask.io"},function(e){e.StxStatusUpdated="STX Status Updated",e.StxConfirmed="STX Confirmed",e.StxConfirmationFailed="STX Confirmation Failed",e.ReceiveRequest="Receive Request"}(n.MetaMetricsEventName||(n.MetaMetricsEventName={})),function(e){e.Transactions="Transactions",e.Navigation="Navigation"}(n.MetaMetricsEventCategory||(n.MetaMetricsEventCategory={}))}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/constants.js"}],[2315,{"./SmartTransactionsController":2313},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./SmartTransactionsController");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return s(r).default}})}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/index.js"}],[2317,{"../package.json":2361,"./constants":2314,"./types":2316,"@ethereumjs/tx":2330,"@ethereumjs/util":2344,"@ethersproject/bytes":487,"bignumber.js":2360,buffer:3537,"fast-json-patch":3857,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getReturnTxHashAsap=n.getSmartTransactionMetricsSensitiveProperties=n.getSmartTransactionMetricsProperties=n.getTxHash=n.incrementNonceInHex=n.isSmartTransactionCancellable=n.handleFetch=n.mapKeysToCamel=n.getStxProcessingTime=n.snapshotFromTxMeta=n.replayHistory=n.generateHistoryEntry=n.calculateStatus=n.getAPIRequestURL=n.isSmartTransactionStatusResolved=n.isSmartTransactionPending=void 0;const r=e("@ethereumjs/tx"),i=e("@ethereumjs/util"),a=e("@ethersproject/bytes"),o=e("bignumber.js"),f=s(e("fast-json-patch")),c=s(e("lodash")),l=s(e("../package.json")),u=e("./constants"),d=e("./types");n.isSmartTransactionPending=function(e){return e.status===d.SmartTransactionStatuses.PENDING};n.isSmartTransactionStatusResolved=e=>"uuid_not_found"===e,n.getAPIRequestURL=function(e,t){const n=parseInt(t,16);switch(e){case d.APIType.GET_FEES:return`${u.API_BASE_URL}/networks/${n}/getFees`;case d.APIType.ESTIMATE_GAS:return`${u.API_BASE_URL}/networks/${n}/estimateGas`;case d.APIType.SUBMIT_TRANSACTIONS:return`${u.API_BASE_URL}/networks/${n}/submitTransactions?stxControllerVersion=${l.default.version}`;case d.APIType.CANCEL:return`${u.API_BASE_URL}/networks/${n}/cancel`;case d.APIType.BATCH_STATUS:return`${u.API_BASE_URL}/networks/${n}/batchStatus`;case d.APIType.LIVENESS:return`${u.SENTINEL_API_BASE_URL_MAP[n]}/network`;default:throw new Error("Invalid APIType")}};n.calculateStatus=e=>{if((0,n.isSmartTransactionStatusResolved)(e))return d.SmartTransactionStatuses.RESOLVED;const t=[d.SmartTransactionCancellationReason.WOULD_REVERT,d.SmartTransactionCancellationReason.TOO_CHEAP,d.SmartTransactionCancellationReason.DEADLINE_MISSED,d.SmartTransactionCancellationReason.INVALID_NONCE,d.SmartTransactionCancellationReason.USER_CANCELLED,d.SmartTransactionCancellationReason.PREVIOUS_TX_CANCELLED];if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.NOT_MINED){if(e.cancellationReason===d.SmartTransactionCancellationReason.NOT_CANCELLED)return d.SmartTransactionStatuses.PENDING;const n=t.findIndex((t=>t===e.cancellationReason))>-1;if(e.cancellationReason&&n)return e.isSettled?d.cancellationReasonToStatusMap[e.cancellationReason]:d.SmartTransactionStatuses.PENDING}else{if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.SUCCESS)return d.SmartTransactionStatuses.SUCCESS;if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.CANCELLED)return d.SmartTransactionStatuses.CANCELLED;if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.REVERTED)return d.SmartTransactionStatuses.REVERTED;if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.UNKNOWN)return d.SmartTransactionStatuses.UNKNOWN}return d.SmartTransactionStatuses.UNKNOWN},n.generateHistoryEntry=function(e,t,n){const s=f.default.compare(e,t);return s[0]&&(n&&(s[0].note=n),s[0].timestamp=Date.now()),s},n.replayHistory=function(e){return c.default.cloneDeep(e).reduce(((e,t)=>f.default.applyPatch(e,t).newDocument))},n.snapshotFromTxMeta=function(e){const t=Object.assign({},e);return delete t.history,c.default.cloneDeep(t)};n.getStxProcessingTime=e=>e?Math.round((Date.now()-e)/1e3):undefined;n.mapKeysToCamel=e=>{if(!c.default.isObject(e))return e;const t=c.default.mapValues(e,(e=>c.default.isArray(e)?e.map(n.mapKeysToCamel):c.default.isObject(e)?(0,n.mapKeysToCamel)(e):e));return c.default.mapKeys(t,((e,t)=>c.default.camelCase(t)))},n.handleFetch=async function(e,t){const s=await fetch(e,t),r=await s.json();if(!s.ok)throw console.log("response",s),new Error(`Fetch error:${JSON.stringify(Object.assign({status:s.status},(0,n.mapKeysToCamel)(r)))}`);return r};n.isSmartTransactionCancellable=e=>e.minedTx===d.SmartTransactionMinedTx.NOT_MINED&&(!e.cancellationReason||e.cancellationReason===d.SmartTransactionCancellationReason.NOT_CANCELLED);n.incrementNonceInHex=e=>{const t=new o.BigNumber(e,16).toString(10);return(0,a.hexlify)(Number(t)+1)};n.getTxHash=e=>{if(!e)return"";const n=r.TransactionFactory.fromSerializedData(t.from(e.slice(2),"hex")).hash();return(0,i.bytesToHex)(n)};n.getSmartTransactionMetricsProperties=e=>{if(!e)return{};const t=e.statusMetadata;return{stx_status:e.status,type:e.type,processing_time:(0,n.getStxProcessingTime)(e.time),is_smart_transaction:!0,stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:!0,stx_duplicated:null==t?void 0:t.duplicated,stx_timed_out:null==t?void 0:t.timedOut,stx_proxied:null==t?void 0:t.proxied}};n.getSmartTransactionMetricsSensitiveProperties=e=>e?{token_from_symbol:e.sourceTokenSymbol,token_to_symbol:e.destinationTokenSymbol,account_hardware_type:e.accountHardwareType,account_type:e.accountType,device_model:e.deviceModel}:{};n.getReturnTxHashAsap=(e,t)=>e===d.ClientId.Extension?null==t?void 0:t.extensionReturnTxHashAsap:null==t?void 0:t.mobileReturnTxHashAsap}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/utils.js"}],[2318,{"./types.js":2333,"./util.js":2334,"@ethereumjs/common":350,"@ethereumjs/util":2344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseTransaction=void 0;const s=e("@ethereumjs/common"),r=e("@ethereumjs/util"),i=e("./types.js"),a=e("./util.js");n.BaseTransaction=class{constructor(e,t){this.cache={hash:undefined,dataFee:undefined,senderPubKey:undefined},this.activeCapabilities=[],this.DEFAULT_CHAIN=s.Chain.Mainnet;const{nonce:n,gasLimit:i,to:o,value:f,data:c,v:l,r:u,s:d,type:p}=e;this._type=Number((0,r.bytesToBigInt)((0,r.toBytes)(p))),this.txOptions=t;const h=(0,r.toBytes)(""===o?"0x":o),m=(0,r.toBytes)(l),b=(0,r.toBytes)(u),g=(0,r.toBytes)(d);this.nonce=(0,r.bytesToBigInt)((0,r.toBytes)(n)),this.gasLimit=(0,r.bytesToBigInt)((0,r.toBytes)(i)),this.to=h.length>0?new r.Address(h):undefined,this.value=(0,r.bytesToBigInt)((0,r.toBytes)(f)),this.data=(0,r.toBytes)(""===c?"0x":c),this.v=m.length>0?(0,r.bytesToBigInt)(m):undefined,this.r=b.length>0?(0,r.bytesToBigInt)(b):undefined,this.s=g.length>0?(0,r.bytesToBigInt)(g):undefined,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const y=this.to===undefined||null===this.to,v=t.allowUnlimitedInitCodeSize??!1,w=t.common??this._getCommon();y&&w.isActivatedEIP(3860)&&!1===v&&(0,a.checkMaxInitCodeSize)(w,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}getValidationErrors(){const e=[];return this.isSigned()&&!this.verifySignature()&&e.push("Invalid Signature"),this.getBaseFee()>this.gasLimit&&e.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),e}isValid(){return 0===this.getValidationErrors().length}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let n=r.BIGINT_0;for(let s=0;s<this.data.length;s++)0===this.data[s]?n+=e:n+=t;if((this.to===undefined||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));n+=this.common.param("gasPrices","initCodeWordCost")*e}return n}toCreationAddress(){return this.to===undefined||0===this.to.bytes.length}isSigned(){const{v:e,r:t,s:n}=this;return e!==undefined&&t!==undefined&&n!==undefined}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,r.unpadBytes)(e).length}catch(e){return!1}}getSenderAddress(){return new r.Address((0,r.publicToAddress)(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;this.type===i.TransactionType.Legacy&&this.common.gteHardfork("spuriousDragon")&&!this.supports(i.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(i.Capability.EIP155ReplayProtection),t=!0);const n=this.getHashedMessageToSign(),s=this.common.customCrypto?.ecsign??r.ecsign,{v:a,r:o,s:f}=s(n,e),c=this.addSignature(a,o,f,!0);if(t){const e=this.activeCapabilities.indexOf(i.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return c}toJSON(){return{type:(0,r.bigIntToHex)(BigInt(this.type)),nonce:(0,r.bigIntToHex)(this.nonce),gasLimit:(0,r.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,r.bigIntToHex)(this.value),data:(0,r.bytesToHex)(this.data),v:this.v!==undefined?(0,r.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,r.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,r.bigIntToHex)(this.s):undefined}}_getCommon(e,t){if(t!==undefined){const n=(0,r.bytesToBigInt)((0,r.toBytes)(t));if(e){if(e.chainId()!==n){const t=this._errorMsg(`The chain ID does not match the chain ID of Common. Got: ${n}, expected: ${e.chainId()}`);throw new Error(t)}return e.copy()}return s.Common.isSupportedChainId(n)?new s.Common({chain:n}):s.Common.custom({name:"custom-chain",networkId:n,chainId:n},{baseChain:this.DEFAULT_CHAIN})}return e?.copy()??new s.Common({chain:this.DEFAULT_CHAIN})}_validateCannotExceedMaxInteger(e,t=256,n=!1){for(const[s,i]of Object.entries(e))switch(t){case 64:if(n){if(i!==undefined&&i>=r.MAX_UINT64){const e=this._errorMsg(`${s} cannot equal or exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>r.MAX_UINT64){const e=this._errorMsg(`${s} cannot exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}break;case 256:if(n){if(i!==undefined&&i>=r.MAX_INTEGER){const e=this._errorMsg(`${s} cannot equal or exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>r.MAX_INTEGER){const e=this._errorMsg(`${s} cannot exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[n,s]of Object.entries(e))if(t.includes(n)&&Array.isArray(s))throw new Error(`${n} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,r.bytesToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let n="";try{n=this.common.hardfork()}catch(e){n="error"}let s=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return s+=`signed=${t} hf=${n}`,s}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/baseTransaction.js"}],[2319,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getEffectivePriorityFee=n.getUpfrontCost=void 0,n.getUpfrontCost=function(e,t){const n=e.maxPriorityFeePerGas,s=e.maxFeePerGas-t,r=(n<s?n:s)+t;return e.gasLimit*r+e.value},n.getEffectivePriorityFee=function(e,t){if(t===undefined||t>e.maxFeePerGas)throw new Error("Tx cannot pay baseFee");const n=e.maxFeePerGas-t;return e.maxPriorityFeePerGas<n?e.maxPriorityFeePerGas:n}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip1559.js"}],[232,{"@metamask/utils":2765,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,function(e){!function(e){if((0,r.isNullOrUndefined)(e.PreferencesController))return void a.default.warn(`Migration #${o}: preferences controller null or undefined, skipping migration`);if((0,r.hasProperty)(e,"AppStateController")&&(0,r.isObject)(e.AppStateController)&&(0,r.hasProperty)(e,"PreferencesController")&&(0,r.isObject)(e.PreferencesController)){var t;const n=null===(t=e.PreferencesController)||void 0===t?void 0:t.advancedGasFee,s=(0,r.isObject)(n)&&f(n);e.AppStateController.hadAdvancedGasFeesSetPriorToMigration92_3=s,(null===e.PreferencesController.advancedGasFee||(0,r.isObject)(e.PreferencesController.advancedGasFee)&&f(e.PreferencesController.advancedGasFee))&&(e.PreferencesController.advancedGasFee={})}else if(!1===(0,r.isObject)(e.AppStateController)){var n,s;null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof state.AppStateController is "+typeof e.AppStateController))}else if(!1===(0,r.isObject)(e.PreferencesController)){var i,c;null===(i=global.sentry)||void 0===i||null===(c=i.captureException)||void 0===c||c.call(i,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController))}}(e)}(t.data),t},n.version=void 0;var s,r=e("@metamask/utils"),i=e("lodash"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=n.version=92.3;function f(e){const t=Object.keys(e);return!(!t.includes("maxBaseFee")&&!t.includes("priorityFee"))}}}},{package:"$root$",file:"app/scripts/migrations/092.3.ts"}],[2320,{"../util.js":2334,"./legacy.js":2323,"@ethereumjs/rlp":375,"@ethereumjs/util":2344,"ethereum-cryptography/keccak.js":3734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateYParity=n.serialize=n.getHashedMessageToSign=void 0;const s=e("@ethereumjs/rlp"),r=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak.js"),a=e("../util.js"),o=e("./legacy.js");n.getHashedMessageToSign=function(e){return(e.common.customCrypto.keccak256??i.keccak256)(e.getMessageToSign())},n.serialize=function(e,t){return(0,r.concatBytes)((0,a.txTypeBytes)(e.type),s.RLP.encode(t??e.raw()))},n.validateYParity=function(e){const{v:t}=e;if(t!==undefined&&t!==r.BIGINT_0&&t!==r.BIGINT_1){const t=(0,o.errorMsg)(e,"The y-parity of the transaction should either be 0 or 1");throw new Error(t)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2718.js"}],[2321,{"../util.js":2334,"./legacy.js":2323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDataFee=void 0;const s=e("../util.js"),r=e("./legacy.js");n.getDataFee=function(e){return r.getDataFee(e,BigInt(s.AccessLists.getDataFeeEIP2930(e.accessList,e.common)))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2930.js"}],[2322,{"../util.js":2334,"./legacy.js":2323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDataFee=void 0;const s=e("../util.js"),r=e("./legacy.js");n.getDataFee=function(e){const t=BigInt(s.AccessLists.getDataFeeEIP2930(e.accessList,e.common)),n=BigInt(e.authorizationList.length*Number(e.common.param("gasPrices","perAuthBaseCost")));return r.getDataFee(e,t+n)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip7702.js"}],[2323,{"../baseTransaction.js":2318,"../types.js":2333,"@ethereumjs/util":2344,"ethereum-cryptography/keccak.js":3734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getEffectivePriorityFee=n.getSenderPublicKey=n.validateHighS=n.hash=n.getDataFee=n.isSigned=n.errorMsg=void 0;const s=e("@ethereumjs/util"),r=e("ethereum-cryptography/keccak.js"),i=e("../baseTransaction.js"),a=e("../types.js");function o(e,t){return`${t} (${e.errorStr()})`}function f(e){const{s:t}=e;if(e.common.gteHardfork("homestead")&&t!==undefined&&t>s.SECP256K1_ORDER_DIV_2){const t=o(e,"Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(t)}}n.errorMsg=o,n.isSigned=function(e){const{v:t,r:n,s:s}=e;return t!==undefined&&n!==undefined&&s!==undefined},n.getDataFee=function(e,t){if(e.cache.dataFee&&e.cache.dataFee.hardfork===e.common.hardfork())return e.cache.dataFee.value;const n=i.BaseTransaction.prototype.getDataFee.bind(e)()+(t??0n);return Object.isFrozen(e)&&(e.cache.dataFee={value:n,hardfork:e.common.hardfork()}),n},n.hash=function(e){if(!e.isSigned()){const t=o(e,"Cannot call hash method if transaction is not signed");throw new Error(t)}const t=e.common.customCrypto.keccak256??r.keccak256;return Object.isFrozen(e)?(e.cache.hash||(e.cache.hash=t(e.serialize())),e.cache.hash):t(e.serialize())},n.validateHighS=f,n.getSenderPublicKey=function(e){if(e.cache.senderPubKey!==undefined)return e.cache.senderPubKey;const t=e.getMessageToVerifySignature(),{v:n,r:r,s:i}=e;f(e);try{const o=(e.common.customCrypto.ecrecover??s.ecrecover)(t,n,(0,s.bigIntToUnpaddedBytes)(r),(0,s.bigIntToUnpaddedBytes)(i),e.supports(a.Capability.EIP155ReplayProtection)?e.common.chainId():undefined);return Object.isFrozen(e)&&(e.cache.senderPubKey=o),o}catch(t){const n=o(e,"Invalid Signature");throw new Error(n)}},n.getEffectivePriorityFee=function(e,t){if(t!==undefined&&t>e)throw new Error("Tx cannot pay baseFee");return t===undefined?e:e-t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/legacy.js"}],[2324,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BYTES_PER_FIELD_ELEMENT=n.FIELD_ELEMENTS_PER_BLOB=n.MAX_TX_WRAP_KZG_COMMITMENTS=n.LIMIT_BLOBS_PER_TX=n.MAX_VERSIONED_HASHES_LIST_SIZE=n.MAX_ACCESS_LIST_SIZE=n.MAX_CALLDATA_SIZE=void 0,n.MAX_CALLDATA_SIZE=16777216,n.MAX_ACCESS_LIST_SIZE=16777216,n.MAX_VERSIONED_HASHES_LIST_SIZE=16777216,n.LIMIT_BLOBS_PER_TX=6,n.MAX_TX_WRAP_KZG_COMMITMENTS=16777216,n.FIELD_ELEMENTS_PER_BLOB=4096,n.BYTES_PER_FIELD_ELEMENT=32}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/constants.js"}],[2325,{"./baseTransaction.js":2318,"./capabilities/eip1559.js":2319,"./capabilities/eip2718.js":2320,"./capabilities/eip2930.js":2321,"./capabilities/legacy.js":2323,"./types.js":2333,"./util.js":2334,"@ethereumjs/rlp":375,"@ethereumjs/util":2344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FeeMarketEIP1559Transaction=void 0;const s=e("@ethereumjs/rlp"),r=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),f=e("./capabilities/eip2930.js"),c=e("./capabilities/legacy.js"),l=e("./types.js"),u=e("./util.js");class d extends i.BaseTransaction{constructor(e,t={}){super({...e,type:l.TransactionType.FeeMarketEIP1559},t);const{chainId:n,accessList:s,maxFeePerGas:a,maxPriorityFeePerGas:f}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const d=u.AccessLists.getAccessListData(s??[]);if(this.accessList=d.accessList,this.AccessListJSON=d.AccessListJSON,u.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,r.bytesToBigInt)((0,r.toBytes)(a)),this.maxPriorityFeePerGas=(0,r.bytesToBigInt)((0,r.toBytes)(f)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>r.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}o.validateYParity(this),c.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new d(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,r.equalsBytes)(e.subarray(0,1),(0,u.txTypeBytes)(l.TransactionType.FeeMarketEIP1559)))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${l.TransactionType.FeeMarketEIP1559}, received: ${(0,r.bytesToHex)(e.subarray(0,1))}`);const n=s.RLP.decode(e.subarray(1));if(!Array.isArray(n))throw new Error("Invalid serialized tx input: must be array");return d.fromValuesArray(n,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[n,s,i,a,o,f,c,l,u,p,h,m]=e;return this._validateNotArray({chainId:n,v:p}),(0,r.validateNoLeadingZeroes)({nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:c,v:p,r:h,s:m}),new d({chainId:(0,r.bytesToBigInt)(n),nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:f,value:c,data:l,accessList:u??[],v:p!==undefined?(0,r.bytesToBigInt)(p):undefined,r:h,s:m},t)}getDataFee(){return f.getDataFee(this)}getEffectivePriorityFee(e){return a.getEffectivePriorityFee(this,e)}getUpfrontCost(e=r.BIGINT_0){return a.getUpfrontCost(this,e)}raw(){return[(0,r.bigIntToUnpaddedBytes)(this.chainId),(0,r.bigIntToUnpaddedBytes)(this.nonce),(0,r.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,r.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,r.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,r.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.v!==undefined?(0,r.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,r.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,r.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}getMessageToSign(){return o.serialize(this,this.raw().slice(0,9))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return c.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return c.getSenderPublicKey(this)}addSignature(e,t,n,s=!1){t=(0,r.toBytes)(t),n=(0,r.toBytes)(n);const i={...this.txOptions,common:this.common};return d.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:s?e-r.BIGINT_27:e,r:(0,r.bytesToBigInt)(t),s:(0,r.bytesToBigInt)(n)},i)}toJSON(){const e=u.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,r.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,r.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,r.bigIntToHex)(this.maxFeePerGas),accessList:e}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return c.errorMsg(this,e)}}n.FeeMarketEIP1559Transaction=d}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip1559Transaction.js"}],[2326,{"./baseTransaction.js":2318,"./capabilities/eip2718.js":2320,"./capabilities/eip2930.js":2321,"./capabilities/legacy.js":2323,"./types.js":2333,"./util.js":2334,"@ethereumjs/rlp":375,"@ethereumjs/util":2344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccessListEIP2930Transaction=void 0;const s=e("@ethereumjs/rlp"),r=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip2718.js"),o=e("./capabilities/eip2930.js"),f=e("./capabilities/legacy.js"),c=e("./types.js"),l=e("./util.js");class u extends i.BaseTransaction{constructor(e,t={}){super({...e,type:c.TransactionType.AccessListEIP2930},t);const{chainId:n,accessList:s,gasPrice:o}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const u=l.AccessLists.getAccessListData(s??[]);if(this.accessList=u.accessList,this.AccessListJSON=u.AccessListJSON,l.AccessLists.verifyAccessList(this.accessList),this.gasPrice=(0,r.bytesToBigInt)((0,r.toBytes)(o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),i.BaseTransaction._validateNotArray(e),this.gasPrice*this.gasLimit>r.MAX_INTEGER){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}a.validateYParity(this),f.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new u(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,r.equalsBytes)(e.subarray(0,1),(0,l.txTypeBytes)(c.TransactionType.AccessListEIP2930)))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${c.TransactionType.AccessListEIP2930}, received: ${(0,r.bytesToHex)(e.subarray(0,1))}`);const n=s.RLP.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(n))throw new Error("Invalid serialized tx input: must be array");return u.fromValuesArray(n,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[n,s,i,a,o,f,c,l,d,p,h]=e;this._validateNotArray({chainId:n,v:d}),(0,r.validateNoLeadingZeroes)({nonce:s,gasPrice:i,gasLimit:a,value:f,v:d,r:p,s:h});return new u({chainId:(0,r.bytesToBigInt)(n),nonce:s,gasPrice:i,gasLimit:a,to:o,value:f,data:c,accessList:l??[],v:d!==undefined?(0,r.bytesToBigInt)(d):undefined,r:p,s:h},t)}getEffectivePriorityFee(e){return f.getEffectivePriorityFee(this.gasPrice,e)}getDataFee(){return o.getDataFee(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[(0,r.bigIntToUnpaddedBytes)(this.chainId),(0,r.bigIntToUnpaddedBytes)(this.nonce),(0,r.bigIntToUnpaddedBytes)(this.gasPrice),(0,r.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,r.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.v!==undefined?(0,r.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,r.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,r.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return a.serialize(this)}getMessageToSign(){return a.serialize(this,this.raw().slice(0,8))}getHashedMessageToSign(){return a.getHashedMessageToSign(this)}hash(){return f.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return f.getSenderPublicKey(this)}addSignature(e,t,n,s=!1){t=(0,r.toBytes)(t),n=(0,r.toBytes)(n);const i={...this.txOptions,common:this.common};return u.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:s?e-r.BIGINT_27:e,r:(0,r.bytesToBigInt)(t),s:(0,r.bytesToBigInt)(n)},i)}toJSON(){const e=l.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,r.bigIntToHex)(this.chainId),gasPrice:(0,r.bigIntToHex)(this.gasPrice),accessList:e}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,e}_errorMsg(e){return f.errorMsg(this,e)}}n.AccessListEIP2930Transaction=u}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip2930Transaction.js"}],[2327,{"./baseTransaction.js":2318,"./capabilities/eip1559.js":2319,"./capabilities/eip2718.js":2320,"./capabilities/eip2930.js":2321,"./capabilities/legacy.js":2323,"./constants.js":2324,"./types.js":2333,"./util.js":2334,"@ethereumjs/rlp":375,"@ethereumjs/util":2344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BlobEIP4844Transaction=void 0;const s=e("@ethereumjs/rlp"),r=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),f=e("./capabilities/eip2930.js"),c=e("./capabilities/legacy.js"),l=e("./constants.js"),u=e("./types.js"),d=e("./util.js");class p extends i.BaseTransaction{constructor(e,t={}){super({...e,type:u.TransactionType.BlobEIP4844},t);const{chainId:n,accessList:s,maxFeePerGas:a,maxPriorityFeePerGas:f,maxFeePerBlobGas:p}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");if(!this.common.isActivatedEIP(4844))throw new Error("EIP-4844 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const h=d.AccessLists.getAccessListData(s??[]);if(this.accessList=h.accessList,this.AccessListJSON=h.AccessListJSON,d.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,r.bytesToBigInt)((0,r.toBytes)(a)),this.maxPriorityFeePerGas=(0,r.bytesToBigInt)((0,r.toBytes)(f)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>r.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this.maxFeePerBlobGas=(0,r.bytesToBigInt)((0,r.toBytes)(""===(p??"")?"0x":p)),this.blobVersionedHashes=(e.blobVersionedHashes??[]).map((e=>(0,r.toBytes)(e))),o.validateYParity(this),c.validateHighS(this);for(const e of this.blobVersionedHashes){if(32!==e.length){const e=this._errorMsg("versioned hash is invalid length");throw new Error(e)}if(BigInt(e[0])!==this.common.param("sharding","blobCommitmentVersionKzg")){const e=this._errorMsg("versioned hash does not start with KZG commitment version");throw new Error(e)}}if(this.blobVersionedHashes.length>l.LIMIT_BLOBS_PER_TX){const e=this._errorMsg(`tx can contain at most ${l.LIMIT_BLOBS_PER_TX} blobs`);throw new Error(e)}if(0===this.blobVersionedHashes.length){const e=this._errorMsg("tx should contain at least one blob");throw new Error(e)}if(this.to===undefined){const e=this._errorMsg('tx should have a "to" field and cannot be used to create contracts');throw new Error(e)}this.blobs=e.blobs?.map((e=>(0,r.toBytes)(e))),this.kzgCommitments=e.kzgCommitments?.map((e=>(0,r.toBytes)(e))),this.kzgProofs=e.kzgProofs?.map((e=>(0,r.toBytes)(e)));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t){if(t?.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");const n=t.common.customCrypto.kzg;if(e.blobsData!==undefined){if(e.blobs!==undefined)throw new Error("cannot have both raw blobs data and encoded blobs in constructor");if(e.kzgCommitments!==undefined)throw new Error("cannot have both raw blobs data and KZG commitments in constructor");if(e.blobVersionedHashes!==undefined)throw new Error("cannot have both raw blobs data and versioned hashes in constructor");if(e.kzgProofs!==undefined)throw new Error("cannot have both raw blobs data and KZG proofs in constructor");e.blobs=(0,r.getBlobs)(e.blobsData.reduce(((e,t)=>e+t))),e.kzgCommitments=(0,r.blobsToCommitments)(n,e.blobs),e.blobVersionedHashes=(0,r.commitmentsToVersionedHashes)(e.kzgCommitments),e.kzgProofs=(0,r.blobsToProofs)(n,e.blobs,e.kzgCommitments)}return new p(e,t)}getEffectivePriorityFee(e){return a.getEffectivePriorityFee(this,e)}static minimalFromNetworkWrapper(e,t){if(t?.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");return p.fromTxData({...e,blobs:undefined,kzgCommitments:undefined,kzgProofs:undefined},t)}static fromSerializedTx(e,t={}){if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(!1===(0,r.equalsBytes)(e.subarray(0,1),(0,d.txTypeBytes)(u.TransactionType.BlobEIP4844)))throw new Error(`Invalid serialized tx input: not an EIP-4844 transaction (wrong tx type, expected: ${u.TransactionType.BlobEIP4844}, received: ${(0,r.bytesToHex)(e.subarray(0,1))}`);const n=s.RLP.decode(e.subarray(1));if(!Array.isArray(n))throw new Error("Invalid serialized tx input: must be array");return p.fromValuesArray(n,t)}static fromValuesArray(e,t={}){if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(11!==e.length&&14!==e.length)throw new Error("Invalid EIP-4844 transaction. Only expecting 11 values (for unsigned tx) or 14 values (for signed tx).");const[n,s,i,a,o,f,c,l,u,d,h,m,b,g]=e;return this._validateNotArray({chainId:n,v:m}),(0,r.validateNoLeadingZeroes)({nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:c,maxFeePerBlobGas:d,v:m,r:b,s:g}),new p({chainId:(0,r.bytesToBigInt)(n),nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:f,value:c,data:l,accessList:u??[],maxFeePerBlobGas:d,blobVersionedHashes:h,v:m!==undefined?(0,r.bytesToBigInt)(m):undefined,r:b,s:g},t)}static fromSerializedBlobTxNetworkWrapper(e,t){if(!t||!t.common)throw new Error("common instance required to validate versioned hashes");if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(!1===(0,r.equalsBytes)(e.subarray(0,1),(0,d.txTypeBytes)(u.TransactionType.BlobEIP4844)))throw new Error(`Invalid serialized tx input: not an EIP-4844 transaction (wrong tx type, expected: ${u.TransactionType.BlobEIP4844}, received: ${(0,r.bytesToHex)(e.subarray(0,1))}`);const n=s.RLP.decode(e.subarray(1));if(4!==n.length)throw Error("Expected 4 values in the deserialized network transaction");const[i,a,o,f]=n,c=p.fromValuesArray(i,{...t,freeze:!1});if(c.to===undefined)throw Error("BlobEIP4844Transaction can not be send without a valid `to`");const l=Number(t.common.param("sharding","blobCommitmentVersionKzg"));((e,t,n,s,i,a)=>{if(e.length!==t.length||t.length!==n.length)throw new Error("Number of blobVersionedHashes, blobs, and commitments not all equal");if(0===e.length)throw new Error("Invalid transaction with empty blobs");let o;try{o=a.verifyBlobKzgProofBatch(t,n,s)}catch(e){throw new Error(`KZG verification of blobs fail with error=${e}`)}if(!o)throw new Error("KZG proof cannot be verified from blobs/commitments");for(let t=0;t<e.length;t++){const s=(0,r.computeVersionedHash)(n[t],i);if(!(0,r.equalsBytes)(s,e[t]))throw new Error(`commitment for blob at index ${t} does not match versionedHash`)}})(c.blobVersionedHashes,a,o,f,l,t.common.customCrypto.kzg),c.blobs=a,c.kzgCommitments=o,c.kzgProofs=f;return(t?.freeze??!0)&&Object.freeze(c),c}getDataFee(){return f.getDataFee(this)}getUpfrontCost(e=r.BIGINT_0){return a.getUpfrontCost(this,e)}raw(){return[(0,r.bigIntToUnpaddedBytes)(this.chainId),(0,r.bigIntToUnpaddedBytes)(this.nonce),(0,r.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,r.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,r.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,r.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,(0,r.bigIntToUnpaddedBytes)(this.maxFeePerBlobGas),this.blobVersionedHashes,this.v!==undefined?(0,r.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,r.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,r.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}serializeNetworkWrapper(){if(this.blobs===undefined||this.kzgCommitments===undefined||this.kzgProofs===undefined)throw new Error("cannot serialize network wrapper without blobs, KZG commitments and KZG proofs provided");return o.serialize(this,[this.raw(),this.blobs,this.kzgCommitments,this.kzgProofs])}getMessageToSign(){return o.serialize(this,this.raw().slice(0,11))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return c.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return c.getSenderPublicKey(this)}static networkWrapperToJson(e,t){const n=this.fromSerializedBlobTxNetworkWrapper(e,t),s=d.AccessLists.getAccessListJSON(n.accessList);return{...n.toJSON(),chainId:(0,r.bigIntToHex)(n.chainId),maxPriorityFeePerGas:(0,r.bigIntToHex)(n.maxPriorityFeePerGas),maxFeePerGas:(0,r.bigIntToHex)(n.maxFeePerGas),accessList:s,maxFeePerBlobGas:(0,r.bigIntToHex)(n.maxFeePerBlobGas),blobVersionedHashes:n.blobVersionedHashes.map((e=>(0,r.bytesToHex)(e))),blobs:n.blobs.map((e=>(0,r.bytesToHex)(e))),kzgCommitments:n.kzgCommitments.map((e=>(0,r.bytesToHex)(e))),kzgProofs:n.kzgProofs.map((e=>(0,r.bytesToHex)(e)))}}toJSON(){const e=d.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,r.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,r.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,r.bigIntToHex)(this.maxFeePerGas),accessList:e,maxFeePerBlobGas:(0,r.bigIntToHex)(this.maxFeePerBlobGas),blobVersionedHashes:this.blobVersionedHashes.map((e=>(0,r.bytesToHex)(e)))}}addSignature(e,t,n,s=!1){t=(0,r.toBytes)(t),n=(0,r.toBytes)(n);const i={...this.txOptions,common:this.common};return p.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:s?e-r.BIGINT_27:e,r:(0,r.bytesToBigInt)(t),s:(0,r.bytesToBigInt)(n),maxFeePerBlobGas:this.maxFeePerBlobGas,blobVersionedHashes:this.blobVersionedHashes,blobs:this.blobs,kzgCommitments:this.kzgCommitments,kzgProofs:this.kzgProofs},i)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return c.errorMsg(this,e)}numBlobs(){return this.blobVersionedHashes.length}}n.BlobEIP4844Transaction=p}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip4844Transaction.js"}],[2328,{"./baseTransaction.js":2318,"./capabilities/eip1559.js":2319,"./capabilities/eip2718.js":2320,"./capabilities/eip7702.js":2322,"./capabilities/legacy.js":2323,"./types.js":2333,"./util.js":2334,"@ethereumjs/rlp":375,"@ethereumjs/util":2344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.EOACodeEIP7702Transaction=void 0;const s=e("@ethereumjs/rlp"),r=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),f=e("./capabilities/eip7702.js"),c=e("./capabilities/legacy.js"),l=e("./types.js"),u=e("./util.js");class d extends i.BaseTransaction{constructor(e,t={}){super({...e,type:l.TransactionType.EOACodeEIP7702},t);const{chainId:n,accessList:s,authorizationList:a,maxFeePerGas:f,maxPriorityFeePerGas:d}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(7702))throw new Error("EIP-7702 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930,7702]);const p=u.AccessLists.getAccessListData(s??[]);this.accessList=p.accessList,this.AccessListJSON=p.AccessListJSON,u.AccessLists.verifyAccessList(this.accessList);const h=u.AuthorizationLists.getAuthorizationListData(a??[]);if(this.authorizationList=h.authorizationList,this.AuthorizationListJSON=h.AuthorizationListJSON,u.AuthorizationLists.verifyAuthorizationList(this.authorizationList),this.maxFeePerGas=(0,r.bytesToBigInt)((0,r.toBytes)(f)),this.maxPriorityFeePerGas=(0,r.bytesToBigInt)((0,r.toBytes)(d)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>r.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}o.validateYParity(this),c.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new d(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,r.equalsBytes)(e.subarray(0,1),(0,u.txTypeBytes)(l.TransactionType.EOACodeEIP7702)))throw new Error(`Invalid serialized tx input: not an EIP-7702 transaction (wrong tx type, expected: ${l.TransactionType.EOACodeEIP7702}, received: ${(0,r.bytesToHex)(e.subarray(0,1))}`);const n=s.RLP.decode(e.subarray(1));if(!Array.isArray(n))throw new Error("Invalid serialized tx input: must be array");return d.fromValuesArray(n,t)}static fromValuesArray(e,t={}){if(10!==e.length&&13!==e.length)throw new Error("Invalid EIP-7702 transaction. Only expecting 10 values (for unsigned tx) or 13 values (for signed tx).");const[n,s,i,a,o,f,c,l,u,p,h,m,b]=e;return this._validateNotArray({chainId:n,v:h}),(0,r.validateNoLeadingZeroes)({nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:c,v:h,r:m,s:b}),new d({chainId:(0,r.bytesToBigInt)(n),nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:f,value:c,data:l,accessList:u??[],authorizationList:p??[],v:h!==undefined?(0,r.bytesToBigInt)(h):undefined,r:m,s:b},t)}getDataFee(){return f.getDataFee(this)}getEffectivePriorityFee(e){return a.getEffectivePriorityFee(this,e)}getUpfrontCost(e=r.BIGINT_0){return a.getUpfrontCost(this,e)}raw(){return[(0,r.bigIntToUnpaddedBytes)(this.chainId),(0,r.bigIntToUnpaddedBytes)(this.nonce),(0,r.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,r.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,r.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,r.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.authorizationList,this.v!==undefined?(0,r.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,r.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,r.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}getMessageToSign(){return o.serialize(this,this.raw().slice(0,10))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return c.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return c.getSenderPublicKey(this)}addSignature(e,t,n,s=!1){t=(0,r.toBytes)(t),n=(0,r.toBytes)(n);const i={...this.txOptions,common:this.common};return d.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,authorizationList:this.authorizationList,v:s?e-r.BIGINT_27:e,r:(0,r.bytesToBigInt)(t),s:(0,r.bytesToBigInt)(n)},i)}toJSON(){const e=u.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,r.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,r.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,r.bigIntToHex)(this.maxFeePerGas),accessList:e,authorizationList:this.AuthorizationListJSON}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return c.errorMsg(this,e)}}n.EOACodeEIP7702Transaction=d}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip7702Transaction.js"}],[2329,{"@ethereumjs/util":2344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeTxParams=void 0;const s=e("@ethereumjs/util");n.normalizeTxParams=e=>{const t=Object.assign({},e);return t.gasLimit=(0,s.toType)(t.gasLimit??t.gas,s.TypeOutput.BigInt),t.data=t.data===undefined?t.input:t.data,t.gasPrice=t.gasPrice!==undefined?BigInt(t.gasPrice):undefined,t.value=t.value!==undefined?BigInt(t.value):undefined,t.to=null!==t.to&&t.to!==undefined?(0,s.setLengthLeft)((0,s.toBytes)(t.to),20):null,t.v="0x0"===t.v?"0x":t.v,t.r="0x0"===t.r?"0x":t.r,t.s="0x0"===t.s?"0x":t.s,"0x"===t.v&&"0x"===t.r&&"0x"===t.s||(t.v=(0,s.toType)(t.v,s.TypeOutput.BigInt)),t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/fromRpc.js"}],[233,{"@metamask/utils":2765,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,i.hasProperty)(e,"PhishingController")&&(0,i.isObject)(e.PhishingController))delete e.PhishingController.stalelistLastFetched,delete e.PhishingController.hotlistLastFetched;else if((0,i.hasProperty)(e,"PhishingController")){var t,n;null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController))}else a.default.warn("typeof state.PhishingController is undefined");return e}(t.data),t},n.version=void 0;var s,r=e("lodash"),i=e("@metamask/utils"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=n.version=92}}},{package:"$root$",file:"app/scripts/migrations/092.ts"}],[2330,{"./eip1559Transaction.js":2325,"./eip2930Transaction.js":2326,"./eip4844Transaction.js":2327,"./eip7702Transaction.js":2328,"./legacyTransaction.js":2331,"./transactionFactory.js":2332,"./types.js":2333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionFactory=n.LegacyTransaction=n.EOACodeEIP7702Transaction=n.BlobEIP4844Transaction=n.AccessListEIP2930Transaction=n.FeeMarketEIP1559Transaction=void 0;var i=e("./eip1559Transaction.js");Object.defineProperty(n,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return i.FeeMarketEIP1559Transaction}});var a=e("./eip2930Transaction.js");Object.defineProperty(n,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return a.AccessListEIP2930Transaction}});var o=e("./eip4844Transaction.js");Object.defineProperty(n,"BlobEIP4844Transaction",{enumerable:!0,get:function(){return o.BlobEIP4844Transaction}});var f=e("./eip7702Transaction.js");Object.defineProperty(n,"EOACodeEIP7702Transaction",{enumerable:!0,get:function(){return f.EOACodeEIP7702Transaction}});var c=e("./legacyTransaction.js");Object.defineProperty(n,"LegacyTransaction",{enumerable:!0,get:function(){return c.LegacyTransaction}});var l=e("./transactionFactory.js");Object.defineProperty(n,"TransactionFactory",{enumerable:!0,get:function(){return l.TransactionFactory}}),r(e("./types.js"),n)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/index.js"}],[2331,{"./baseTransaction.js":2318,"./capabilities/legacy.js":2323,"./types.js":2333,"@ethereumjs/rlp":375,"@ethereumjs/util":2344,"ethereum-cryptography/keccak.js":3734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LegacyTransaction=void 0;const s=e("@ethereumjs/rlp"),r=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak.js"),a=e("./baseTransaction.js"),o=e("./capabilities/legacy.js"),f=e("./types.js");function c(e,t){const n=Number(e),s=2*Number(t);return n===s+35||n===s+36}class l extends a.BaseTransaction{constructor(e,t={}){if(super({...e,type:f.TransactionType.Legacy},t),this.common=this._validateTxV(this.v,t.common),this.keccakFunction=this.common.customCrypto.keccak256??i.keccak256,this.gasPrice=(0,r.bytesToBigInt)((0,r.toBytes)(e.gasPrice)),this.gasPrice*this.gasLimit>r.MAX_INTEGER){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),a.BaseTransaction._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?c(this.v,this.common.chainId())&&this.activeCapabilities.push(f.Capability.EIP155ReplayProtection):this.activeCapabilities.push(f.Capability.EIP155ReplayProtection));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){const n=s.RLP.decode(e);if(!Array.isArray(n))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(n,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[n,s,i,a,o,f,c,u,d]=e;return(0,r.validateNoLeadingZeroes)({nonce:n,gasPrice:s,gasLimit:i,value:o,v:c,r:u,s:d}),new l({nonce:n,gasPrice:s,gasLimit:i,to:a,value:o,data:f,v:c,r:u,s:d},t)}getEffectivePriorityFee(e){return o.getEffectivePriorityFee(this.gasPrice,e)}raw(){return[(0,r.bigIntToUnpaddedBytes)(this.nonce),(0,r.bigIntToUnpaddedBytes)(this.gasPrice),(0,r.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,r.bigIntToUnpaddedBytes)(this.value),this.data,this.v!==undefined?(0,r.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,r.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,r.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return s.RLP.encode(this.raw())}getMessageToSign(){const e=[(0,r.bigIntToUnpaddedBytes)(this.nonce),(0,r.bigIntToUnpaddedBytes)(this.gasPrice),(0,r.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,r.bigIntToUnpaddedBytes)(this.value),this.data];return this.supports(f.Capability.EIP155ReplayProtection)&&(e.push((0,r.bigIntToUnpaddedBytes)(this.common.chainId())),e.push((0,r.unpadBytes)((0,r.toBytes)(0))),e.push((0,r.unpadBytes)((0,r.toBytes)(0)))),e}getHashedMessageToSign(){const e=this.getMessageToSign();return this.keccakFunction(s.RLP.encode(e))}getDataFee(){return o.getDataFee(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){return o.hash(this)}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}return this.getHashedMessageToSign()}getSenderPublicKey(){return o.getSenderPublicKey(this)}addSignature(e,t,n,s=!1){t=(0,r.toBytes)(t),n=(0,r.toBytes)(n),s&&this.supports(f.Capability.EIP155ReplayProtection)&&(e+=this.common.chainId()*r.BIGINT_2+r.BIGINT_8);const i={...this.txOptions,common:this.common};return l.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:e,r:(0,r.bytesToBigInt)(t),s:(0,r.bytesToBigInt)(n)},i)}toJSON(){return{...super.toJSON(),gasPrice:(0,r.bigIntToHex)(this.gasPrice)}}_validateTxV(e,t){let n;const s=e!==undefined?Number(e):undefined;if(s!==undefined&&s<37&&27!==s&&28!==s)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${s}`);if(s!==undefined&&0!==s&&(!t||t.gteHardfork("spuriousDragon"))&&27!==s&&28!==s)if(t){if(!c(BigInt(s),t.chainId()))throw new Error(`Incompatible EIP155-based V ${s} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(s-35)%2==0?35:36,n=BigInt(s-e)/r.BIGINT_2}return this._getCommon(t,n)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return o.errorMsg(this,e)}}n.LegacyTransaction=l}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/legacyTransaction.js"}],[2332,{"./eip1559Transaction.js":2325,"./eip2930Transaction.js":2326,"./eip4844Transaction.js":2327,"./eip7702Transaction.js":2328,"./fromRpc.js":2329,"./legacyTransaction.js":2331,"./types.js":2333,"@ethereumjs/util":2344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionFactory=void 0;const s=e("@ethereumjs/util"),r=e("./eip1559Transaction.js"),i=e("./eip2930Transaction.js"),a=e("./eip4844Transaction.js"),o=e("./eip7702Transaction.js"),f=e("./fromRpc.js"),c=e("./legacyTransaction.js"),l=e("./types.js");class u{constructor(){}static fromTxData(e,t={}){if("type"in e&&e.type!==undefined){if((0,l.isLegacyTxData)(e))return c.LegacyTransaction.fromTxData(e,t);if((0,l.isAccessListEIP2930TxData)(e))return i.AccessListEIP2930Transaction.fromTxData(e,t);if((0,l.isFeeMarketEIP1559TxData)(e))return r.FeeMarketEIP1559Transaction.fromTxData(e,t);if((0,l.isBlobEIP4844TxData)(e))return a.BlobEIP4844Transaction.fromTxData(e,t);if((0,l.isEOACodeEIP7702TxData)(e))return o.EOACodeEIP7702Transaction.fromTxData(e,t);throw new Error(`Tx instantiation with type ${e?.type} not supported`)}return c.LegacyTransaction.fromTxData(e,t)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return c.LegacyTransaction.fromSerializedTx(e,t);switch(e[0]){case l.TransactionType.AccessListEIP2930:return i.AccessListEIP2930Transaction.fromSerializedTx(e,t);case l.TransactionType.FeeMarketEIP1559:return r.FeeMarketEIP1559Transaction.fromSerializedTx(e,t);case l.TransactionType.BlobEIP4844:return a.BlobEIP4844Transaction.fromSerializedTx(e,t);case l.TransactionType.EOACodeEIP7702:return o.EOACodeEIP7702Transaction.fromSerializedTx(e,t);default:throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}static fromBlockBodyData(e,t={}){if(e instanceof Uint8Array)return this.fromSerializedData(e,t);if(Array.isArray(e))return c.LegacyTransaction.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}static async fromJsonRpcProvider(e,t,n){const r=(0,s.getProvider)(e),i=await(0,s.fetchFromProvider)(r,{method:"eth_getTransactionByHash",params:[t]});if(null===i)throw new Error("No data returned from provider");return u.fromRPC(i,n)}static async fromRPC(e,t={}){return u.fromTxData((0,f.normalizeTxParams)(e),t)}}n.TransactionFactory=u}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/transactionFactory.js"}],[2333,{"@ethereumjs/util":2344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEOACodeEIP7702TxData=n.isBlobEIP4844TxData=n.isFeeMarketEIP1559TxData=n.isAccessListEIP2930TxData=n.isLegacyTxData=n.isEOACodeEIP7702Tx=n.isBlobEIP4844Tx=n.isFeeMarketEIP1559Tx=n.isAccessListEIP2930Tx=n.isLegacyTx=n.TransactionType=n.isAuthorizationList=n.isAuthorizationListBytes=n.isAccessList=n.isAccessListBytes=n.Capability=void 0;const s=e("@ethereumjs/util");var r;function i(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}function a(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}!function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists",e[e.EIP7702EOACode=7702]="EIP7702EOACode"}(n.Capability||(n.Capability={})),n.isAccessListBytes=i,n.isAccessList=function(e){return!i(e)},n.isAuthorizationListBytes=a,n.isAuthorizationList=function(e){return!a(e)},function(e){e[e.Legacy=0]="Legacy",e[e.AccessListEIP2930=1]="AccessListEIP2930",e[e.FeeMarketEIP1559=2]="FeeMarketEIP1559",e[e.BlobEIP4844=3]="BlobEIP4844",e[e.EOACodeEIP7702=4]="EOACodeEIP7702"}(r=n.TransactionType||(n.TransactionType={})),n.isLegacyTx=function(e){return e.type===r.Legacy},n.isAccessListEIP2930Tx=function(e){return e.type===r.AccessListEIP2930},n.isFeeMarketEIP1559Tx=function(e){return e.type===r.FeeMarketEIP1559},n.isBlobEIP4844Tx=function(e){return e.type===r.BlobEIP4844},n.isEOACodeEIP7702Tx=function(e){return e.type===r.EOACodeEIP7702},n.isLegacyTxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===r.Legacy},n.isAccessListEIP2930TxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===r.AccessListEIP2930},n.isFeeMarketEIP1559TxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===r.FeeMarketEIP1559},n.isBlobEIP4844TxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===r.BlobEIP4844},n.isEOACodeEIP7702TxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===r.EOACodeEIP7702}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/types.js"}],[2334,{"./types.js":2333,"@ethereumjs/util":2344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.txTypeBytes=n.AuthorizationLists=n.AccessLists=n.checkMaxInitCodeSize=void 0;const s=e("@ethereumjs/util"),r=e("./types.js");n.checkMaxInitCodeSize=function(e,t){const n=e.param("vm","maxInitCodeSize");if(n&&BigInt(t)>n)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)};n.AccessLists=class{static getAccessListData(e){let t,n;if((0,r.isAccessList)(e)){t=e;const r=[];for(let t=0;t<e.length;t++){const n=e[t],i=(0,s.hexToBytes)(n.address),a=[];for(let e=0;e<n.storageKeys.length;e++)a.push((0,s.hexToBytes)(n.storageKeys[e]));r.push([i,a])}n=r}else{n=e??[];const r=[];for(let e=0;e<n.length;e++){const t=n[e],i=(0,s.bytesToHex)(t[0]),a=[];for(let e=0;e<t[1].length;e++)a.push((0,s.bytesToHex)(t[1][e]));const o={address:i,storageKeys:a};r.push(o)}t=r}return{AccessListJSON:t,accessList:n}}static verifyAccessList(e){for(let t=0;t<e.length;t++){const n=e[t],s=n[0],r=n[1];if(n[2]!==undefined)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==s.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<r.length;e++)if(32!==r[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],i={address:(0,s.bytesToHex)((0,s.setLengthLeft)(r[0],20)),storageKeys:[]},a=r[1];for(let e=0;e<a.length;e++){const t=a[e];i.storageKeys.push((0,s.bytesToHex)((0,s.setLengthLeft)(t,32)))}t.push(i)}return t}static getDataFeeEIP2930(e,t){const n=t.param("gasPrices","accessListStorageKeyCost"),s=t.param("gasPrices","accessListAddressCost");let r=0;for(let t=0;t<e.length;t++){r+=e[t][1].length}return e.length*Number(s)+r*Number(n)}};n.AuthorizationLists=class{static getAuthorizationListData(e){let t,n;if((0,r.isAuthorizationList)(e)){t=e;const r=[],i=["chainId","address","nonce","yParity","r","s"];for(let t=0;t<e.length;t++){const n=e[t];for(const e of i)if(n[e]===undefined)throw new Error(`EIP-7702 authorization list invalid: ${e} is not defined`);const a=(0,s.hexToBytes)(n.chainId),o=(0,s.hexToBytes)(n.address),f=[];for(let e=0;e<n.nonce.length;e++)f.push((0,s.hexToBytes)(n.nonce[e]));const c=(0,s.hexToBytes)(n.yParity),l=(0,s.hexToBytes)(n.r),u=(0,s.hexToBytes)(n.s);r.push([a,o,f,c,l,u])}n=r}else{n=e??[];const r=[];for(let e=0;e<n.length;e++){const t=n[e],i=(0,s.bytesToHex)(t[0]),a=(0,s.bytesToHex)(t[1]),o=t[2],f=[];for(let e=0;e<o.length;e++)f.push((0,s.bytesToHex)(o[e]));const c={chainId:i,address:a,nonce:f,yParity:(0,s.bytesToHex)(t[3]),r:(0,s.bytesToHex)(t[4]),s:(0,s.bytesToHex)(t[5])};r.push(c)}t=r}return{AuthorizationListJSON:t,authorizationList:n}}static verifyAuthorizationList(e){for(let t=0;t<e.length;t++){const n=e[t],r=n[1],i=n[2],a=n[3],o=n[4],f=n[5];if((0,s.validateNoLeadingZeroes)({yParity:a,r:o,s:f}),20!==r.length)throw new Error("Invalid EIP-7702 transaction: address length should be 20 bytes");if(i.length>1)throw new Error("Invalid EIP-7702 transaction: nonce list should consist of at most 1 item");1===i.length&&(0,s.validateNoLeadingZeroes)({nonce:i[0]})}}static getDataFeeEIP7702(e,t){const n=t.param("gasPrices","perAuthBaseCost");return e.length*Number(n)}},n.txTypeBytes=function(e){return(0,s.hexToBytes)(`0x${e.toString(16).padStart(2,"0")}`)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/util.js"}],[2335,{"./bytes.js":2339,"./constants.js":2340,"./helpers.js":2343,"./internal.js":2345,"@ethereumjs/rlp":375,"ethereum-cryptography/keccak.js":3734,"ethereum-cryptography/secp256k1.js":3743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountBodyToRLP=n.accountBodyToSlim=n.accountBodyFromSlim=n.isZeroAddress=n.zeroAddress=n.importPublic=n.privateToAddress=n.privateToPublic=n.publicToAddress=n.pubToAddress=n.isValidPublic=n.isValidPrivate=n.generateAddress2=n.generateAddress=n.isValidChecksumAddress=n.toChecksumAddress=n.isValidAddress=n.Account=void 0;const s=e("@ethereumjs/rlp"),r=e("ethereum-cryptography/keccak.js"),i=e("ethereum-cryptography/secp256k1.js"),a=e("./bytes.js"),o=e("./constants.js"),f=e("./helpers.js"),c=e("./internal.js");class l{constructor(e=o.BIGINT_0,t=o.BIGINT_0,n=o.KECCAK256_RLP,s=o.KECCAK256_NULL,r=null,i=0){this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=e,this._balance=t,this._storageRoot=n,this._codeHash=s,null!==r||null===s||this.isContract()||(r=0),this._codeSize=r,this._version=i,this._validate()}get version(){if(null!==this._version)return this._version;throw Error(`version=${this._version} not loaded`)}set version(e){this._version=e}get nonce(){if(null!==this._nonce)return this._nonce;throw Error(`nonce=${this._nonce} not loaded`)}set nonce(e){this._nonce=e}get balance(){if(null!==this._balance)return this._balance;throw Error(`balance=${this._balance} not loaded`)}set balance(e){this._balance=e}get storageRoot(){if(null!==this._storageRoot)return this._storageRoot;throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot(e){this._storageRoot=e}get codeHash(){if(null!==this._codeHash)return this._codeHash;throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash(e){this._codeHash=e}get codeSize(){if(null!==this._codeSize)return this._codeSize;throw Error(`codeHash=${this._codeSize} not loaded`)}set codeSize(e){this._codeSize=e}static fromAccountData(e){const{nonce:t,balance:n,storageRoot:s,codeHash:r}=e;if(null===t||null===n||null===s||null===r)throw Error("Partial fields not supported in fromAccountData");return new l(t!==undefined?(0,a.bytesToBigInt)((0,a.toBytes)(t)):undefined,n!==undefined?(0,a.bytesToBigInt)((0,a.toBytes)(n)):undefined,s!==undefined?(0,a.toBytes)(s):undefined,r!==undefined?(0,a.toBytes)(r):undefined)}static fromPartialAccountData(e){const{nonce:t,balance:n,storageRoot:s,codeHash:r,codeSize:i,version:o}=e;if(null===t&&null===n&&null===s&&null===r&&null===i&&null===o)throw Error("All partial fields null");return new l(t!==undefined&&null!==t?(0,a.bytesToBigInt)((0,a.toBytes)(t)):t,n!==undefined&&null!==n?(0,a.bytesToBigInt)((0,a.toBytes)(n)):n,s!==undefined&&null!==s?(0,a.toBytes)(s):s,r!==undefined&&null!==r?(0,a.toBytes)(r):r,i!==undefined&&null!==i?(0,a.bytesToInt)((0,a.toBytes)(i)):i,o!==undefined&&null!==o?(0,a.bytesToInt)((0,a.toBytes)(o)):o)}static fromRlpSerializedAccount(e){const t=s.RLP.decode(e);if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromRlpSerializedPartialAccount(e){const t=s.RLP.decode(e);if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");let n=null;if(!Array.isArray(t[0]))throw new Error("Invalid partial nonce encoding. Must be array");{const e=(0,a.bytesToInt)(t[0][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for nonce`);1===e&&(n=(0,a.bytesToBigInt)(t[0][1]))}let r=null;if(!Array.isArray(t[1]))throw new Error("Invalid partial balance encoding. Must be array");{const e=(0,a.bytesToInt)(t[1][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for balance`);1===e&&(r=(0,a.bytesToBigInt)(t[1][1]))}let i=null;if(!Array.isArray(t[2]))throw new Error("Invalid partial storageRoot encoding. Must be array");{const e=(0,a.bytesToInt)(t[2][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for storageRoot`);1===e&&(i=t[2][1])}let o=null;if(!Array.isArray(t[3]))throw new Error("Invalid partial codeHash encoding. Must be array");{const e=(0,a.bytesToInt)(t[3][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for codeHash`);1===e&&(o=t[3][1])}let f=null;if(!Array.isArray(t[4]))throw new Error("Invalid partial codeSize encoding. Must be array");{const e=(0,a.bytesToInt)(t[4][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for codeSize`);1===e&&(f=(0,a.bytesToInt)(t[4][1]))}let c=null;if(!Array.isArray(t[5]))throw new Error("Invalid partial version encoding. Must be array");{const e=(0,a.bytesToInt)(t[5][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for version`);1===e&&(c=(0,a.bytesToInt)(t[5][1]))}return this.fromPartialAccountData({balance:r,nonce:n,storageRoot:i,codeHash:o,codeSize:f,version:c})}static fromValuesArray(e){const[t,n,s,r]=e;return new l((0,a.bytesToBigInt)(t),(0,a.bytesToBigInt)(n),s,r)}_validate(){if(null!==this._nonce&&this._nonce<o.BIGINT_0)throw new Error("nonce must be greater than zero");if(null!==this._balance&&this._balance<o.BIGINT_0)throw new Error("balance must be greater than zero");if(null!==this._storageRoot&&32!==this._storageRoot.length)throw new Error("storageRoot must have a length of 32");if(null!==this._codeHash&&32!==this._codeHash.length)throw new Error("codeHash must have a length of 32");if(null!==this._codeSize&&this._codeSize<o.BIGINT_0)throw new Error("codeSize must be greater than zero")}raw(){return[(0,a.bigIntToUnpaddedBytes)(this.nonce),(0,a.bigIntToUnpaddedBytes)(this.balance),this.storageRoot,this.codeHash]}serialize(){return s.RLP.encode(this.raw())}serializeWithPartialInfo(){const e=[],t=(0,a.intToUnpaddedBytes)(0),n=(0,a.intToUnpaddedBytes)(1);return null!==this._nonce?e.push([n,(0,a.bigIntToUnpaddedBytes)(this._nonce)]):e.push([t]),null!==this._balance?e.push([n,(0,a.bigIntToUnpaddedBytes)(this._balance)]):e.push([t]),null!==this._storageRoot?e.push([n,this._storageRoot]):e.push([t]),null!==this._codeHash?e.push([n,this._codeHash]):e.push([t]),null!==this._codeSize?e.push([n,(0,a.intToUnpaddedBytes)(this._codeSize)]):e.push([t]),null!==this._version?e.push([n,(0,a.intToUnpaddedBytes)(this._version)]):e.push([t]),s.RLP.encode(e)}isContract(){if(null===this._codeHash&&null===this._codeSize)throw Error("Insufficient data as codeHash=null and codeSize=null");return null!==this._codeHash&&!(0,a.equalsBytes)(this._codeHash,o.KECCAK256_NULL)||null!==this._codeSize&&0!==this._codeSize}isEmpty(){return!(null!==this._balance&&this.balance!==o.BIGINT_0||null===this._nonce&&this.nonce!==o.BIGINT_0||null!==this._codeHash&&!(0,a.equalsBytes)(this.codeHash,o.KECCAK256_NULL))&&(this.balance===o.BIGINT_0&&this.nonce===o.BIGINT_0&&(0,a.equalsBytes)(this.codeHash,o.KECCAK256_NULL))}}n.Account=l;n.isValidAddress=function(e){try{(0,f.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};n.toChecksumAddress=function(e,t){(0,f.assertIsHexString)(e);const n=(0,c.stripHexPrefix)(e).toLowerCase();let s="";if(t!==undefined){s=(0,a.bytesToBigInt)((0,a.toBytes)(t)).toString()+"0x"}const i=(0,a.utf8ToBytes)(s+n),o=(0,a.bytesToHex)((0,r.keccak256)(i)).slice(2);let l="";for(let e=0;e<n.length;e++)parseInt(o[e],16)>=8?l+=n[e].toUpperCase():l+=n[e];return`0x${l}`};n.isValidChecksumAddress=function(e,t){return(0,n.isValidAddress)(e)&&(0,n.toChecksumAddress)(e,t)===e};n.generateAddress=function(e,t){return(0,f.assertIsBytes)(e),(0,f.assertIsBytes)(t),(0,a.bytesToBigInt)(t)===o.BIGINT_0?(0,r.keccak256)(s.RLP.encode([e,Uint8Array.from([])])).subarray(-20):(0,r.keccak256)(s.RLP.encode([e,t])).subarray(-20)};n.generateAddress2=function(e,t,n){if((0,f.assertIsBytes)(e),(0,f.assertIsBytes)(t),(0,f.assertIsBytes)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==t.length)throw new Error("Expected salt to be of length 32");return(0,r.keccak256)((0,a.concatBytes)((0,a.hexToBytes)("0xff"),e,t,(0,r.keccak256)(n))).subarray(-20)};n.isValidPrivate=function(e){return i.secp256k1.utils.isValidPrivateKey(e)};n.isValidPublic=function(e,t=!1){if((0,f.assertIsBytes)(e),64===e.length)try{return i.secp256k1.ProjectivePoint.fromHex((0,a.concatBytes)(Uint8Array.from([4]),e)),!0}catch(e){return!1}if(!t)return!1;try{return i.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};n.pubToAddress=function(e,t=!1){if((0,f.assertIsBytes)(e),t&&64!==e.length&&(e=i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),64!==e.length)throw new Error("Expected pubKey to be of length 64");return(0,r.keccak256)(e).subarray(-20)},n.publicToAddress=n.pubToAddress;n.privateToPublic=function(e){return(0,f.assertIsBytes)(e),i.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1)};n.privateToAddress=function(e){return(0,n.publicToAddress)((0,n.privateToPublic)(e))};n.importPublic=function(e){return(0,f.assertIsBytes)(e),64!==e.length&&(e=i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),e};n.zeroAddress=function(){const e=(0,a.zeros)(20);return(0,a.bytesToHex)(e)};function u(e){const[t,n,s,r]=e;return[t,n,0===s.length?o.KECCAK256_RLP:s,0===r.length?o.KECCAK256_NULL:r]}n.isZeroAddress=function(e){try{(0,f.assertIsString)(e)}catch(e){return!1}return(0,n.zeroAddress)()===e},n.accountBodyFromSlim=u;const d=new Uint8Array(0);n.accountBodyToSlim=function(e){const[t,n,s,r]=e;return[t,n,(0,a.equalsBytes)(s,o.KECCAK256_RLP)?d:s,(0,a.equalsBytes)(r,o.KECCAK256_NULL)?d:r]},n.accountBodyToRLP=function(e,t=!0){const n=t?u(e):e;return s.RLP.encode(n)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/account.js"}],[2336,{"./account.js":2335,"./bytes.js":2339,"./constants.js":2340},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Address=void 0;const s=e("./account.js"),r=e("./bytes.js"),i=e("./constants.js");class a{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.bytes=e}static zero(){return new a((0,r.zeros)(20))}static fromString(e){if(!(0,s.isValidAddress)(e))throw new Error(`Invalid address input=${e}`);return new a((0,r.hexToBytes)(e))}static fromPublicKey(e){if(!(e instanceof Uint8Array))throw new Error("Public key should be Uint8Array");const t=(0,s.pubToAddress)(e);return new a(t)}static fromPrivateKey(e){if(!(e instanceof Uint8Array))throw new Error("Private key should be Uint8Array");const t=(0,s.privateToAddress)(e);return new a(t)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new a((0,s.generateAddress)(e.bytes,(0,r.bigIntToBytes)(t)))}static generate2(e,t,n){if(!(t instanceof Uint8Array))throw new Error("Expected salt to be a Uint8Array");if(!(n instanceof Uint8Array))throw new Error("Expected initCode to be a Uint8Array");return new a((0,s.generateAddress2)(e.bytes,t,n))}equals(e){return(0,r.equalsBytes)(this.bytes,e.bytes)}isZero(){return this.equals(a.zero())}isPrecompileOrSystemAddress(){const e=(0,r.bytesToBigInt)(this.bytes),t=i.BIGINT_0,n=BigInt("0xffff");return e>=t&&e<=n}toString(){return(0,r.bytesToHex)(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}n.Address=a}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/address.js"}],[2337,{events:3823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AsyncEventEmitter=void 0;const s=e("events");class r extends s.EventEmitter{emit(e,...t){let[n,s]=t;const r=this;let i=r._events[e]??[];return s===undefined&&"function"==typeof n&&(s=n,n=undefined),"newListener"!==e&&"removeListener"!==e||(n={event:n,fn:s},s=undefined),i=Array.isArray(i)?i:[i],async function(e,t,n){let s;for await(const r of t)try{r.length<2?r.call(e,n):await new Promise(((t,s)=>{r.call(e,n,(e=>{e?s(e):t()}))}))}catch(e){s=e}if(s)throw s}(r,i.slice(),n).then(s).catch(s),r.listenerCount(e)>0}once(e,t){const n=this;let s;if("function"!=typeof t)throw new TypeError("listener must be a function");return s=t.length>=2?function(r,i){n.removeListener(e,s),t(r,i)}:function(r){n.removeListener(e,s),t(r,s)},n.on(e,s),n}first(e,t){let n=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(n)||(this._events[e]=n=[n]),n.unshift(t),this}before(e,t,n){return this.beforeOrAfter(e,t,n)}after(e,t,n){return this.beforeOrAfter(e,t,n,"after")}beforeOrAfter(e,t,n,s){let r,i,a=this._events[e]??[];const o="after"===s?1:0;if("function"!=typeof n)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),i=a.length,r=a.length;r--;)if(a[r]===t){i=r+o;break}return a.splice(i,0,n),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}n.AsyncEventEmitter=r}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/asyncEventEmitter.js"}],[2338,{"./bytes.js":2339,"ethereum-cryptography/sha256.js":3744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.commitmentsToVersionedHashes=n.computeVersionedHash=n.blobsToProofs=n.blobsToCommitments=n.getBlobs=void 0;const s=e("ethereum-cryptography/sha256.js"),r=e("./bytes.js"),i=4096,a=131072;function o(e){const t=new Uint8Array(131072);for(let n=0;n<i;n++){const s=new Uint8Array(32);s.set(e.subarray(31*n,31*(n+1)),0),t.set(s,32*n)}return t}n.getBlobs=e=>{const t=(0,r.utf8ToBytes)(e),n=t.byteLength;if(0===n)throw Error("invalid blob data");if(n>262143)throw Error("blob data is too large");const s=Math.ceil(n/a),i=function(e,t){const n=new Uint8Array(t*a).fill(0);return n.set(e),n[e.byteLength]=128,n}(t,s),f=[];for(let e=0;e<s;e++){const t=o(i.subarray(e*a,(e+1)*a));f.push(t)}return f};n.blobsToCommitments=(e,t)=>{const n=[];for(const s of t)n.push(e.blobToKzgCommitment(s));return n};n.blobsToProofs=(e,t,n)=>t.map(((t,s)=>e.computeBlobKzgProof(t,n[s])));n.computeVersionedHash=(e,t)=>{const n=new Uint8Array(32);return n.set([t],0),n.set((0,s.sha256)(e).subarray(1),1),n};n.commitmentsToVersionedHashes=e=>{const t=[];for(const s of e)t.push((0,n.computeVersionedHash)(s,1));return t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/blobs.js"}],[2339,{"./helpers.js":2343,"./internal.js":2345,"ethereum-cryptography/random.js":3742,"ethereum-cryptography/utils.js":3745},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hexToBigInt=n.utf8ToBytes=n.equalsBytes=n.bytesToUtf8=n.bigInt64ToBytes=n.int32ToBytes=n.bytesToBigInt64=n.bytesToInt32=n.concatBytes=n.randomBytes=n.compareBytes=n.intToUnpaddedBytes=n.bigIntToAddressBytes=n.bigIntToUnpaddedBytes=n.bigIntMin=n.bigIntMax=n.bigIntToHex=n.validateNoLeadingZeroes=n.short=n.addHexPrefix=n.toUnsigned=n.fromSigned=n.toBytes=n.unpadHex=n.unpadArray=n.unpadBytes=n.setLengthRight=n.setLengthLeft=n.zeros=n.bigIntToBytes=n.intToBytes=n.intToHex=n.hexToBytes=n.bytesToInt=n.bytesToBigInt=n.bytesToHex=n.unprefixedHexToBytes=n.bytesToUnprefixedHex=void 0;const s=e("ethereum-cryptography/random.js"),r=e("ethereum-cryptography/utils.js"),i=e("./helpers.js"),a=e("./internal.js"),o=BigInt(0);n.bytesToUnprefixedHex=r.bytesToHex;const f={},c={};for(let e=0;e<16;e++){const t=e,n=16*e,s=e.toString(16).toLowerCase();c[s]=t,c[s.toUpperCase()]=t,f[s]=n,f[s.toUpperCase()]=n}function l(e){const t=e.length,n=new Uint8Array(t/2);for(let s=0;s<t;s+=2)n[s/2]=f[e[s]]+c[e[s+1]];return n}n.unprefixedHexToBytes=e=>{if("0x"===e.slice(0,2))throw new Error("hex string is prefixed with 0x, should be unprefixed");return l((0,a.padToEven)(e))};const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));n.bytesToHex=e=>{let t="0x";if(e===undefined||0===e.length)return t;for(const n of e)t=`${t}${u[n]}`;return t};const d=[];for(let e=0;e<=65535;e++)d[e]=BigInt(e);n.bytesToBigInt=(e,t=!1)=>{t&&e.reverse();const s=(0,n.bytesToHex)(e);return"0x"===s?o:4===s.length?d[e[0]]:6===s.length?d[256*e[0]+e[1]]:BigInt(s)};n.bytesToInt=e=>{const t=Number((0,n.bytesToBigInt)(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};n.hexToBytes=e=>{if("string"!=typeof e)throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);const t=e.slice(2);return l(t.length%2==0?t:(0,a.padToEven)(t))};n.intToHex=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};n.intToBytes=e=>{const t=(0,n.intToHex)(e);return(0,n.hexToBytes)(t)};n.bigIntToBytes=(e,t=!1)=>{const s=(0,n.toBytes)(`0x${(0,a.padToEven)(e.toString(16))}`);return t?s.reverse():s};n.zeros=e=>new Uint8Array(e);const p=(e,t,s)=>s?e.length<t?new Uint8Array([...e,...(0,n.zeros)(t-e.length)]):e.subarray(0,t):e.length<t?new Uint8Array([...(0,n.zeros)(t-e.length),...e]):e.subarray(-t);n.setLengthLeft=(e,t)=>((0,i.assertIsBytes)(e),p(e,t,!1));n.setLengthRight=(e,t)=>((0,i.assertIsBytes)(e),p(e,t,!0));const h=e=>{let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};n.unpadBytes=e=>((0,i.assertIsBytes)(e),h(e));n.unpadArray=e=>((0,i.assertIsArray)(e),h(e));n.unpadHex=e=>((0,i.assertIsHexString)(e),`0x${h((0,a.stripHexPrefix)(e))}`);n.toBytes=e=>{if(null===e||e===undefined)return new Uint8Array;if(Array.isArray(e)||e instanceof Uint8Array)return Uint8Array.from(e);if("string"==typeof e){if(!(0,a.isHexString)(e))throw new Error(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${e}`);return(0,n.hexToBytes)(e)}if("number"==typeof e)return(0,n.intToBytes)(e);if("bigint"==typeof e){if(e<o)throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),(0,n.unprefixedHexToBytes)(t)}if(e.toBytes!==undefined)return e.toBytes();throw new Error("invalid type")};n.fromSigned=e=>BigInt.asIntN(256,(0,n.bytesToBigInt)(e));n.toUnsigned=e=>(0,n.bigIntToBytes)(BigInt.asUintN(256,e));n.addHexPrefix=e=>"string"!=typeof e||(0,a.isHexString)(e)?e:`0x${e}`;n.short=(e,t=50)=>{const s=e instanceof Uint8Array?(0,n.bytesToHex)(e):e,r="0x"===s.slice(0,2)?t+2:t;return s.length<=r?s:s.slice(0,r)+""};n.validateNoLeadingZeroes=e=>{for(const[t,s]of Object.entries(e))if(s!==undefined&&s.length>0&&0===s[0])throw new Error(`${t} cannot have leading zeroes, received: ${(0,n.bytesToHex)(s)}`)};n.bigIntToHex=e=>`0x${e.toString(16)}`;n.bigIntMax=(...e)=>e.reduce(((e,t)=>t>e?t:e));n.bigIntMin=(...e)=>e.reduce(((e,t)=>t<e?t:e));n.bigIntToUnpaddedBytes=e=>(0,n.unpadBytes)((0,n.bigIntToBytes)(e));n.bigIntToAddressBytes=(e,t=!0)=>{const s=(0,n.bigIntToBytes)(e);if(t&&s.length>20)throw Error(`Invalid address bytes length=${s.length} strict=${t}`);return(0,n.setLengthLeft)(s,20)};n.intToUnpaddedBytes=e=>(0,n.unpadBytes)((0,n.intToBytes)(e));n.compareBytes=(e,t)=>{const s=(0,n.bytesToBigInt)(e),r=(0,n.bytesToBigInt)(t);return s>r?1:s<r?-1:0};n.randomBytes=e=>(0,s.getRandomBytesSync)(e);n.concatBytes=(...e)=>{if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const r=e[t];n.set(r,s),s+=r.length}return n},n.bytesToInt32=function(e,t=!1){return e.length<4&&(e=p(e,4,t)),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,t)},n.bytesToBigInt64=function(e,t=!1){return e.length<8&&(e=p(e,8,t)),new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0,t)},n.int32ToBytes=function(e,t=!1){const n=new ArrayBuffer(4);return new DataView(n).setUint32(0,e,t),new Uint8Array(n)},n.bigInt64ToBytes=function(e,t=!1){const n=new ArrayBuffer(8);return new DataView(n).setBigUint64(0,e,t),new Uint8Array(n)};var m=e("ethereum-cryptography/utils.js");Object.defineProperty(n,"bytesToUtf8",{enumerable:!0,get:function(){return m.bytesToUtf8}}),Object.defineProperty(n,"equalsBytes",{enumerable:!0,get:function(){return m.equalsBytes}}),Object.defineProperty(n,"utf8ToBytes",{enumerable:!0,get:function(){return m.utf8ToBytes}}),n.hexToBigInt=function(e){return(0,n.bytesToBigInt)((0,n.hexToBytes)((0,a.isHexString)(e)?e:`0x${e}`))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/bytes.js"}],[234,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if((0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"providerConfig")&&(0,r.isObject)(e.NetworkController.providerConfig)){const{providerConfig:t}=e.NetworkController;return t.ticker?e:(e.NetworkController.providerConfig={ticker:"ETH",...t},{...e,NetworkController:e.NetworkController})}var t,n;if((0,r.isObject)(e.NetworkController)){if((0,r.isObject)(e.NetworkController)&&!(0,r.isObject)(e.NetworkController.providerConfig)){var s,i;null===(s=global.sentry)||void 0===s||null===(i=s.captureException)||void 0===i||i.call(s,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=93}}},{package:"$root$",file:"app/scripts/migrations/093.ts"}],[2340,{"./bytes.js":2339,"ethereum-cryptography/secp256k1.js":3743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BIGINT_2EXP256=n.BIGINT_2EXP224=n.BIGINT_2EXP160=n.BIGINT_2EXP96=n.BIGINT_224=n.BIGINT_160=n.BIGINT_100=n.BIGINT_96=n.BIGINT_256=n.BIGINT_255=n.BIGINT_128=n.BIGINT_64=n.BIGINT_32=n.BIGINT_31=n.BIGINT_28=n.BIGINT_27=n.BIGINT_8=n.BIGINT_7=n.BIGINT_3=n.BIGINT_2=n.BIGINT_1=n.BIGINT_0=n.BIGINT_NEG1=n.RIPEMD160_ADDRESS_STRING=n.MAX_WITHDRAWALS_PER_PAYLOAD=n.RLP_EMPTY_STRING=n.KECCAK256_RLP=n.KECCAK256_RLP_S=n.KECCAK256_RLP_ARRAY=n.KECCAK256_RLP_ARRAY_S=n.KECCAK256_NULL=n.KECCAK256_NULL_S=n.TWO_POW256=n.SECP256K1_ORDER_DIV_2=n.SECP256K1_ORDER=n.MAX_INTEGER_BIGINT=n.MAX_INTEGER=n.MAX_UINT64=void 0;const s=e("ethereum-cryptography/secp256k1.js"),r=e("./bytes.js");n.MAX_UINT64=BigInt("0xffffffffffffffff"),n.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),n.SECP256K1_ORDER=s.secp256k1.CURVE.n,n.SECP256K1_ORDER_DIV_2=s.secp256k1.CURVE.n/BigInt(2),n.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),n.KECCAK256_NULL_S="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",n.KECCAK256_NULL=(0,r.hexToBytes)(n.KECCAK256_NULL_S),n.KECCAK256_RLP_ARRAY_S="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",n.KECCAK256_RLP_ARRAY=(0,r.hexToBytes)(n.KECCAK256_RLP_ARRAY_S),n.KECCAK256_RLP_S="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",n.KECCAK256_RLP=(0,r.hexToBytes)(n.KECCAK256_RLP_S),n.RLP_EMPTY_STRING=Uint8Array.from([128]),n.MAX_WITHDRAWALS_PER_PAYLOAD=16,n.RIPEMD160_ADDRESS_STRING="0000000000000000000000000000000000000003",n.BIGINT_NEG1=BigInt(-1),n.BIGINT_0=BigInt(0),n.BIGINT_1=BigInt(1),n.BIGINT_2=BigInt(2),n.BIGINT_3=BigInt(3),n.BIGINT_7=BigInt(7),n.BIGINT_8=BigInt(8),n.BIGINT_27=BigInt(27),n.BIGINT_28=BigInt(28),n.BIGINT_31=BigInt(31),n.BIGINT_32=BigInt(32),n.BIGINT_64=BigInt(64),n.BIGINT_128=BigInt(128),n.BIGINT_255=BigInt(255),n.BIGINT_256=BigInt(256),n.BIGINT_96=BigInt(96),n.BIGINT_100=BigInt(100),n.BIGINT_160=BigInt(160),n.BIGINT_224=BigInt(224),n.BIGINT_2EXP96=BigInt(7922816251426434e13),n.BIGINT_2EXP160=BigInt(1461501637330903e33),n.BIGINT_2EXP224=BigInt(2695994666715064e52),n.BIGINT_2EXP256=n.BIGINT_2**n.BIGINT_256}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/constants.js"}],[2341,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ValueEncoding=n.KeyEncoding=void 0,function(e){e.String="string",e.Bytes="view",e.Number="number"}(n.KeyEncoding||(n.KeyEncoding={})),function(e){e.String="string",e.Bytes="view",e.JSON="json"}(n.ValueEncoding||(n.ValueEncoding={}))}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/db.js"}],[2342,{"./bytes.js":2339,"./internal.js":2345},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseGethGenesisState=void 0;const s=e("./bytes.js"),r=e("./internal.js");n.parseGethGenesisState=function(e){const t={};for(const n of Object.keys(e.alloc)){let{balance:i,code:a,storage:o,nonce:f}=e.alloc[n];const c=(0,s.addHexPrefix)(n.toLowerCase());i=(0,r.isHexString)(i)?i:(0,s.bigIntToHex)(BigInt(i)),a=a!==undefined?(0,s.addHexPrefix)(a):undefined,o=o!==undefined?Object.entries(o):undefined,f=f!==undefined?(0,s.addHexPrefix)(f):undefined,t[c]=[i,a,o,f]}return t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/genesis.js"}],[2343,{"./internal.js":2345},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assertIsString=n.assertIsArray=n.assertIsBytes=n.assertIsHexString=void 0;const s=e("./internal.js");n.assertIsHexString=function(e){if(!(0,s.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};n.assertIsBytes=function(e){if(!(e instanceof Uint8Array)){throw new Error(`This method only supports Uint8Array but input was: ${e}`)}};n.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};n.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/helpers.js"}],[2344,{"./account.js":2335,"./address.js":2336,"./asyncEventEmitter.js":2337,"./blobs.js":2338,"./bytes.js":2339,"./constants.js":2340,"./db.js":2341,"./genesis.js":2342,"./internal.js":2345,"./kzg.js":2346,"./lock.js":2347,"./mapDB.js":2348,"./provider.js":2349,"./requests.js":2350,"./signature.js":2351,"./types.js":2352,"./units.js":2353,"./verkle.js":2354,"./withdrawal.js":2355},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.toAscii=n.stripHexPrefix=n.padToEven=n.isHexString=n.getKeys=n.getBinarySize=n.fromUtf8=n.fromAscii=n.arrayContainsArray=void 0,r(e("./constants.js"),n),r(e("./units.js"),n),r(e("./account.js"),n),r(e("./address.js"),n),r(e("./db.js"),n),r(e("./withdrawal.js"),n),r(e("./signature.js"),n),r(e("./bytes.js"),n),r(e("./types.js"),n),r(e("./asyncEventEmitter.js"),n),r(e("./blobs.js"),n),r(e("./genesis.js"),n);var i=e("./internal.js");Object.defineProperty(n,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(n,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(n,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(n,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(n,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(n,"isHexString",{enumerable:!0,get:function(){return i.isHexString}}),Object.defineProperty(n,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(n,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(n,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),r(e("./kzg.js"),n),r(e("./lock.js"),n),r(e("./mapDB.js"),n),r(e("./provider.js"),n),r(e("./requests.js"),n),r(e("./verkle.js"),n)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/index.js"}],[2345,{"./bytes.js":2339},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getKeys=n.fromAscii=n.fromUtf8=n.toAscii=n.arrayContainsArray=n.getBinarySize=n.padToEven=n.stripHexPrefix=n.isHexString=void 0;const s=e("./bytes.js");function r(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}n.isHexString=r;function i(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}n.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return r(e)?e.slice(2):e},n.padToEven=i,n.getBinarySize=function(e){if("string"!=typeof e)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof e);return(0,s.utf8ToBytes)(e).byteLength},n.arrayContainsArray=function(e,t,n){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===n?"some":"every"]((t=>e.indexOf(t)>=0))},n.toAscii=function(e){let t="",n=0;const s=e.length;for("0x"===e.substring(0,2)&&(n=2);n<s;n+=2){const s=parseInt(e.substr(n,2),16);t+=String.fromCharCode(s)}return t},n.fromUtf8=function(e){const t=(0,s.utf8ToBytes)(e);return`0x${i((0,s.bytesToUnprefixedHex)(t)).replace(/^0+|0+$/g,"")}`},n.fromAscii=function(e){let t="";for(let n=0;n<e.length;n++){const s=e.charCodeAt(n).toString(16);t+=s.length<2?`0${s}`:s}return`0x${t}`},n.getKeys=function(e,t,n){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const s=[];for(let r=0;r<e.length;r++){let i=e[r][t];if(!0!==n||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";s.push(i)}return s}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/internal.js"}],[2346,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.initKZG=void 0,n.initKZG=function(e,t){e.loadTrustedSetup()}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/kzg.js"}],[2347,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Lock=void 0;n.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/lock.js"}],[2348,{"./bytes.js":2339},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MapDB=void 0;const s=e("./bytes.js");class r{constructor(e){this._database=e??new Map}async get(e){const t=e instanceof Uint8Array?(0,s.bytesToUnprefixedHex)(e):e.toString();return this._database.get(t)}async put(e,t){const n=e instanceof Uint8Array?(0,s.bytesToUnprefixedHex)(e):e.toString();this._database.set(n,t)}async del(e){const t=e instanceof Uint8Array?(0,s.bytesToUnprefixedHex)(e):e.toString();this._database.delete(t)}async batch(e){for(const t of e)"del"===t.type&&await this.del(t.key),"put"===t.type&&await this.put(t.key,t.value)}shallowCopy(){return new r(this._database)}open(){return Promise.resolve()}}n.MapDB=r}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/mapDB.js"}],[2349,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getProvider=n.fetchFromProvider=void 0;n.fetchFromProvider=async(e,t)=>{const n=JSON.stringify({method:t.method,params:t.params,jsonrpc:"2.0",id:1}),s=await fetch(e,{headers:{"content-type":"application/json"},method:"POST",body:n});if(!s.ok)throw new Error(`JSONRpcError: ${JSON.stringify({method:t.method,status:s.status,message:await s.text().catch((()=>"Could not parse error message likely because of a network error"))},null,2)}`);return(await s.json()).result};n.getProvider=e=>{if("string"==typeof e)return e;if("object"==typeof e&&e._getConnection!==undefined)return e._getConnection().url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/provider.js"}],[235,{"@metamask/controller-utils":1379,"@metamask/network-controller":1946,"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"providerConfig")&&(0,r.isObject)(e.NetworkController.providerConfig)&&((0,r.hasProperty)(e.NetworkController.providerConfig,"id")||(0,r.hasProperty)(e.NetworkController.providerConfig,"type")&&e.NetworkController.providerConfig.type!==a.NetworkType.rpc)){const t=e.NetworkController.providerConfig.id||e.NetworkController.providerConfig.type;if(!t||"string"!=typeof t)return e;const n={[t]:{EIPS:{},status:i.NetworkStatus.Unknown}};if((0,r.hasProperty)(e.NetworkController,"networkDetails")&&(0,r.isObject)(e.NetworkController.networkDetails)){const{networkDetails:s}=e.NetworkController;s.EIPS&&(0,r.isObject)(s.EIPS)&&(n[t].EIPS={...s.EIPS}),delete e.NetworkController.networkDetails}return(0,r.hasProperty)(e.NetworkController,"networkStatus")&&"string"==typeof e.NetworkController.networkStatus&&(n[t].status=e.NetworkController.networkStatus,delete e.NetworkController.networkStatus),{...e,NetworkController:{...e.NetworkController,networksMetadata:n,selectedNetworkClientId:t}}}var t,n;if((0,r.isObject)(e.NetworkController)){if((0,r.isObject)(e.NetworkController)&&!(0,r.isObject)(e.NetworkController.providerConfig)){var s,o;null===(s=global.sentry)||void 0===s||null===(o=s.captureException)||void 0===o||o.call(s,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}else if((0,r.isObject)(e.NetworkController)&&(0,r.isObject)(e.NetworkController.providerConfig)){var f,c;null===(f=global.sentry)||void 0===f||null===(c=f.captureException)||void 0===c||c.call(f,new Error(`typeof state.NetworkController.providerConfig.id is ${typeof e.NetworkController.providerConfig.id} and state.NetworkController.providerConfig.type is ${e.NetworkController.providerConfig.type}`))}}else null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils"),i=e("@metamask/network-controller"),a=e("@metamask/controller-utils");const o=n.version=94}}},{package:"$root$",file:"app/scripts/migrations/094.ts"}],[2350,{"./bytes.js":2339,"./constants.js":2340,"@ethereumjs/rlp":375,"ethereum-cryptography/utils":3745},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CLRequestFactory=n.ConsolidationRequest=n.WithdrawalRequest=n.DepositRequest=n.CLRequest=n.CLRequestType=void 0;const s=e("@ethereumjs/rlp"),r=e("ethereum-cryptography/utils"),i=e("./bytes.js"),a=e("./constants.js");var o;!function(e){e[e.Deposit=0]="Deposit",e[e.Withdrawal=1]="Withdrawal",e[e.Consolidation=2]="Consolidation"}(o=n.CLRequestType||(n.CLRequestType={}));class f{constructor(e){this.type=e}}n.CLRequest=f;class c extends f{constructor(e,t,n,s,r){super(o.Deposit),this.pubkey=e,this.withdrawalCredentials=t,this.amount=n,this.signature=s,this.index=r}static fromRequestData(e){const{pubkey:t,withdrawalCredentials:n,amount:s,signature:r,index:i}=e;return new c(t,n,s,r,i)}static fromJSON(e){const{pubkey:t,withdrawalCredentials:n,amount:s,signature:r,index:a}=e;return this.fromRequestData({pubkey:(0,i.hexToBytes)(t),withdrawalCredentials:(0,i.hexToBytes)(n),amount:(0,i.hexToBigInt)(s),signature:(0,i.hexToBytes)(r),index:(0,i.hexToBigInt)(a)})}serialize(){const e=this.index===a.BIGINT_0?new Uint8Array:(0,i.bigIntToBytes)(this.index),t=this.amount===a.BIGINT_0?new Uint8Array:(0,i.bigIntToBytes)(this.amount);return(0,r.concatBytes)(Uint8Array.from([this.type]),s.RLP.encode([this.pubkey,this.withdrawalCredentials,t,this.signature,e]))}toJSON(){return{pubkey:(0,i.bytesToHex)(this.pubkey),withdrawalCredentials:(0,i.bytesToHex)(this.withdrawalCredentials),amount:(0,i.bigIntToHex)(this.amount),signature:(0,i.bytesToHex)(this.signature),index:(0,i.bigIntToHex)(this.index)}}static deserialize(e){const[t,n,r,a,o]=s.RLP.decode(e.slice(1));return this.fromRequestData({pubkey:t,withdrawalCredentials:n,amount:(0,i.bytesToBigInt)(r),signature:a,index:(0,i.bytesToBigInt)(o)})}}n.DepositRequest=c;class l extends f{constructor(e,t,n){super(o.Withdrawal),this.sourceAddress=e,this.validatorPubkey=t,this.amount=n}static fromRequestData(e){const{sourceAddress:t,validatorPubkey:n,amount:s}=e;return new l(t,n,s)}static fromJSON(e){const{sourceAddress:t,validatorPubkey:n,amount:s}=e;return this.fromRequestData({sourceAddress:(0,i.hexToBytes)(t),validatorPubkey:(0,i.hexToBytes)(n),amount:(0,i.hexToBigInt)(s)})}serialize(){const e=this.amount===a.BIGINT_0?new Uint8Array:(0,i.bigIntToBytes)(this.amount);return(0,r.concatBytes)(Uint8Array.from([this.type]),s.RLP.encode([this.sourceAddress,this.validatorPubkey,e]))}toJSON(){return{sourceAddress:(0,i.bytesToHex)(this.sourceAddress),validatorPubkey:(0,i.bytesToHex)(this.validatorPubkey),amount:(0,i.bigIntToHex)(this.amount)}}static deserialize(e){const[t,n,r]=s.RLP.decode(e.slice(1));return this.fromRequestData({sourceAddress:t,validatorPubkey:n,amount:(0,i.bytesToBigInt)(r)})}}n.WithdrawalRequest=l;class u extends f{constructor(e,t,n){super(o.Consolidation),this.sourceAddress=e,this.sourcePubkey=t,this.targetPubkey=n}static fromRequestData(e){const{sourceAddress:t,sourcePubkey:n,targetPubkey:s}=e;return new u(t,n,s)}static fromJSON(e){const{sourceAddress:t,sourcePubkey:n,targetPubkey:s}=e;return this.fromRequestData({sourceAddress:(0,i.hexToBytes)(t),sourcePubkey:(0,i.hexToBytes)(n),targetPubkey:(0,i.hexToBytes)(s)})}serialize(){return(0,r.concatBytes)(Uint8Array.from([this.type]),s.RLP.encode([this.sourceAddress,this.sourcePubkey,this.targetPubkey]))}toJSON(){return{sourceAddress:(0,i.bytesToHex)(this.sourceAddress),sourcePubkey:(0,i.bytesToHex)(this.sourcePubkey),targetPubkey:(0,i.bytesToHex)(this.targetPubkey)}}static deserialize(e){const[t,n,r]=s.RLP.decode(e.slice(1));return this.fromRequestData({sourceAddress:t,sourcePubkey:n,targetPubkey:r})}}n.ConsolidationRequest=u;n.CLRequestFactory=class{static fromSerializedRequest(e){switch(e[0]){case o.Deposit:return c.deserialize(e);case o.Withdrawal:return l.deserialize(e);case o.Consolidation:return u.deserialize(e);default:throw Error(`Invalid request type=${e[0]}`)}}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/requests.js"}],[2351,{"./bytes.js":2339,"./constants.js":2340,"./helpers.js":2343,"ethereum-cryptography/keccak.js":3734,"ethereum-cryptography/secp256k1.js":3743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hashPersonalMessage=n.isValidSignature=n.fromRpcSig=n.toCompactSig=n.toRpcSig=n.ecrecover=n.calculateSigRecovery=n.ecsign=void 0;const s=e("ethereum-cryptography/keccak.js"),r=e("ethereum-cryptography/secp256k1.js"),i=e("./bytes.js"),a=e("./constants.js"),o=e("./helpers.js");function f(e,t){return e===a.BIGINT_0||e===a.BIGINT_1?e:t===undefined?e-a.BIGINT_27:e-(t*a.BIGINT_2+BigInt(35))}function c(e){return e===a.BIGINT_0||e===a.BIGINT_1}n.ecsign=function(e,t,n){const s=r.secp256k1.sign(e,t),i=s.toCompactRawBytes();return{r:i.slice(0,32),s:i.slice(32,64),v:n===undefined?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(n)*a.BIGINT_2}},n.calculateSigRecovery=f;n.ecrecover=function(e,t,n,s,a){const o=(0,i.concatBytes)((0,i.setLengthLeft)(n,32),(0,i.setLengthLeft)(s,32)),l=f(t,a);if(!c(l))throw new Error("Invalid signature v value");return r.secp256k1.Signature.fromCompact(o).addRecoveryBit(Number(l)).recoverPublicKey(e).toRawBytes(!1).slice(1)};n.toRpcSig=function(e,t,n,s){if(!c(f(e,s)))throw new Error("Invalid signature v value");return(0,i.bytesToHex)((0,i.concatBytes)((0,i.setLengthLeft)(t,32),(0,i.setLengthLeft)(n,32),(0,i.toBytes)(e)))};n.toCompactSig=function(e,t,n,s){if(!c(f(e,s)))throw new Error("Invalid signature v value");const r=Uint8Array.from([...n]);return(e>BigInt(28)&&e%a.BIGINT_2===a.BIGINT_1||e===a.BIGINT_1||e===BigInt(28))&&(r[0]|=128),(0,i.bytesToHex)((0,i.concatBytes)((0,i.setLengthLeft)(t,32),(0,i.setLengthLeft)(r,32)))};n.fromRpcSig=function(e){const t=(0,i.toBytes)(e);let n,s,r;if(t.length>=65)n=t.subarray(0,32),s=t.subarray(32,64),r=(0,i.bytesToBigInt)(t.subarray(64));else{if(64!==t.length)throw new Error("Invalid signature length");n=t.subarray(0,32),s=t.subarray(32,64),r=BigInt((0,i.bytesToInt)(t.subarray(32,33))>>7),s[0]&=127}return r<27&&(r+=a.BIGINT_27),{v:r,r:n,s:s}};n.isValidSignature=function(e,t,n,s=!0,r){if(32!==t.length||32!==n.length)return!1;if(!c(f(e,r)))return!1;const o=(0,i.bytesToBigInt)(t),l=(0,i.bytesToBigInt)(n);return!(o===a.BIGINT_0||o>=a.SECP256K1_ORDER||l===a.BIGINT_0||l>=a.SECP256K1_ORDER)&&!(s&&l>=a.SECP256K1_ORDER_DIV_2)};n.hashPersonalMessage=function(e){(0,o.assertIsBytes)(e);const t=(0,i.utf8ToBytes)(`Ethereum Signed Message:\n${e.length}`);return(0,s.keccak256)((0,i.concatBytes)(t,e))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/signature.js"}],[2352,{"./bytes.js":2339,"./internal.js":2345},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toType=n.TypeOutput=n.isNestedUint8Array=void 0;const s=e("./bytes.js"),r=e("./internal.js");var i;n.isNestedUint8Array=function e(t){if(!Array.isArray(t))return!1;for(const n of t)if(Array.isArray(n)){if(!e(n))return!1}else if(!(n instanceof Uint8Array))return!1;return!0},function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(i=n.TypeOutput||(n.TypeOutput={})),n.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,r.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const n=(0,s.toBytes)(e);switch(t){case i.Uint8Array:return n;case i.BigInt:return(0,s.bytesToBigInt)(n);case i.Number:{const e=(0,s.bytesToBigInt)(n);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case i.PrefixedHexString:return(0,s.bytesToHex)(n);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/types.js"}],[2353,{"./constants.js":2340},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatBigDecimal=n.GWEI_TO_WEI=void 0;const s=e("./constants.js");n.GWEI_TO_WEI=BigInt(1e9),n.formatBigDecimal=function(e,t,n){t===s.BIGINT_0&&(t=s.BIGINT_1);const r=e/t,i=(e-r*t)*n/t,a=String(n).length-1-String(i).length;return`${r}.${"0".repeat(a)}${i}`}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/units.js"}],[2354,{"./bytes.js":2339},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getVerkleTreeKeyForStorageSlot=n.chunkifyCode=n.getVerkleTreeKeyForCodeChunk=n.getVerkleTreeIndicesForCodeChunk=n.getVerkleTreeIndexesForStorageSlot=n.getVerkleKey=n.VERKLE_MAIN_STORAGE_OFFSET=n.VERKLE_NODE_WIDTH=n.VERKLE_CODE_OFFSET=n.VERKLE_HEADER_STORAGE_OFFSET=n.VERKLE_CODE_SIZE_LEAF_KEY=n.VERKLE_CODE_HASH_LEAF_KEY=n.VERKLE_NONCE_LEAF_KEY=n.VERKLE_BALANCE_LEAF_KEY=n.VERKLE_VERSION_LEAF_KEY=n.VerkleLeafType=n.verifyVerkleProof=n.getVerkleStem=void 0;const s=e("./bytes.js");function r(e,t,n=0){const r=(0,s.setLengthLeft)(t.toBytes(),32);let i;i="number"==typeof n?(0,s.setLengthRight)((0,s.int32ToBytes)(Number(n),!0),32):(0,s.setLengthRight)((0,s.bigIntToBytes)(BigInt(n),!0).slice(0,32),32);return e.getTreeKey(r,i,0).slice(0,31)}var i;n.getVerkleStem=r,n.verifyVerkleProof=function(e,t,n){return e.verifyExecutionWitnessPreState((0,s.bytesToHex)(t),JSON.stringify(n))},function(e){e[e.Version=0]="Version",e[e.Balance=1]="Balance",e[e.Nonce=2]="Nonce",e[e.CodeHash=3]="CodeHash",e[e.CodeSize=4]="CodeSize"}(i=n.VerkleLeafType||(n.VerkleLeafType={})),n.VERKLE_VERSION_LEAF_KEY=(0,s.intToBytes)(i.Version),n.VERKLE_BALANCE_LEAF_KEY=(0,s.intToBytes)(i.Balance),n.VERKLE_NONCE_LEAF_KEY=(0,s.intToBytes)(i.Nonce),n.VERKLE_CODE_HASH_LEAF_KEY=(0,s.intToBytes)(i.CodeHash),n.VERKLE_CODE_SIZE_LEAF_KEY=(0,s.intToBytes)(i.CodeSize),n.VERKLE_HEADER_STORAGE_OFFSET=64,n.VERKLE_CODE_OFFSET=128,n.VERKLE_NODE_WIDTH=256,n.VERKLE_MAIN_STORAGE_OFFSET=BigInt(256)**BigInt(31);function a(e){let t;t=e<n.VERKLE_CODE_OFFSET-n.VERKLE_HEADER_STORAGE_OFFSET?BigInt(n.VERKLE_HEADER_STORAGE_OFFSET)+e:n.VERKLE_MAIN_STORAGE_OFFSET+e;return{treeIndex:t/BigInt(n.VERKLE_NODE_WIDTH),subIndex:Number(t%BigInt(n.VERKLE_NODE_WIDTH))}}function o(e){return{treeIndex:Math.floor((n.VERKLE_CODE_OFFSET+e)/n.VERKLE_NODE_WIDTH),subIndex:(n.VERKLE_CODE_OFFSET+e)%n.VERKLE_NODE_WIDTH}}n.getVerkleKey=(e,t)=>{switch(t){case i.Version:return(0,s.concatBytes)(e,n.VERKLE_VERSION_LEAF_KEY);case i.Balance:return(0,s.concatBytes)(e,n.VERKLE_BALANCE_LEAF_KEY);case i.Nonce:return(0,s.concatBytes)(e,n.VERKLE_NONCE_LEAF_KEY);case i.CodeHash:return(0,s.concatBytes)(e,n.VERKLE_CODE_HASH_LEAF_KEY);case i.CodeSize:return(0,s.concatBytes)(e,n.VERKLE_CODE_SIZE_LEAF_KEY);default:return(0,s.concatBytes)(e,t)}},n.getVerkleTreeIndexesForStorageSlot=a,n.getVerkleTreeIndicesForCodeChunk=o;n.getVerkleTreeKeyForCodeChunk=async(e,t,n)=>{const{treeIndex:i,subIndex:a}=o(t);return(0,s.concatBytes)(r(n,e,i),(0,s.toBytes)(a))};n.chunkifyCode=e=>{if(e.length%31!=0){const t=31-e.length%31;e=(0,s.setLengthRight)(e,e.length+t)}throw new Error("Not implemented")};n.getVerkleTreeKeyForStorageSlot=async(e,t,n)=>{const{treeIndex:i,subIndex:o}=a(t);return(0,s.concatBytes)(r(n,e,i),(0,s.toBytes)(o))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/verkle.js"}],[2355,{"./address.js":2336,"./bytes.js":2339,"./constants.js":2340,"./types.js":2352},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Withdrawal=void 0;const s=e("./address.js"),r=e("./bytes.js"),i=e("./constants.js"),a=e("./types.js");class o{constructor(e,t,n,s){this.index=e,this.validatorIndex=t,this.address=n,this.amount=s}static fromWithdrawalData(e){const{index:t,validatorIndex:n,address:i,amount:f}=e,c=(0,a.toType)(t,a.TypeOutput.BigInt),l=(0,a.toType)(n,a.TypeOutput.BigInt),u=i instanceof s.Address?i:new s.Address((0,r.toBytes)(i)),d=(0,a.toType)(f,a.TypeOutput.BigInt);return new o(c,l,u,d)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,n,s,r]=e;return o.fromWithdrawalData({index:t,validatorIndex:n,address:s,amount:r})}static toBytesArray(e){const{index:t,validatorIndex:n,address:r,amount:o}=e;return[(0,a.toType)(t,a.TypeOutput.BigInt)===i.BIGINT_0?new Uint8Array:(0,a.toType)(t,a.TypeOutput.Uint8Array),(0,a.toType)(n,a.TypeOutput.BigInt)===i.BIGINT_0?new Uint8Array:(0,a.toType)(n,a.TypeOutput.Uint8Array),r instanceof s.Address?r.bytes:(0,a.toType)(r,a.TypeOutput.Uint8Array),(0,a.toType)(o,a.TypeOutput.BigInt)===i.BIGINT_0?new Uint8Array:(0,a.toType)(o,a.TypeOutput.Uint8Array)]}raw(){return o.toBytesArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.bytes,amount:this.amount}}toJSON(){return{index:(0,r.bigIntToHex)(this.index),validatorIndex:(0,r.bigIntToHex)(this.validatorIndex),address:(0,r.bytesToHex)(this.address.bytes),amount:(0,r.bigIntToHex)(this.amount)}}}n.Withdrawal=o}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/withdrawal.js"}],[2356,{"fast-json-stable-stringify":3858,uuid:5050},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractPollingControllerBaseMixin=n.getKey=void 0;const i=r(e("fast-json-stable-stringify")),a=e("uuid");n.getKey=e=>(0,i.default)(e),n.AbstractPollingControllerBaseMixin=function(e){var t,r;return t=new WeakMap,r=new WeakMap,class extends e{constructor(){super(...arguments),t.set(this,new Map),r.set(this,new Map)}startPolling(e){const r=(0,a.v4)(),i=(0,n.getKey)(e),o=s(this,t,"f").get(i)??new Set;return o.add(r),s(this,t,"f").set(i,o),1===o.size&&this._startPolling(e),r}stopAllPolling(){s(this,t,"f").forEach(((e,t)=>{e.forEach((e=>{this.stopPollingByPollingToken(e)}))}))}stopPollingByPollingToken(e){if(!e)throw new Error("pollingToken required");let n=null;for(const[r,i]of s(this,t,"f"))if(i.delete(e)){0===i.size&&(n=r);break}if(n){this._stopPollingByPollingTokenSetId(n),s(this,t,"f").delete(n);const e=s(this,r,"f").get(n);if(e){for(const t of e)t(JSON.parse(n));e.clear()}}}onPollingComplete(e,t){const i=(0,n.getKey)(e),a=s(this,r,"f").get(i)??new Set;a.add(t),s(this,r,"f").set(i,a)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/polling-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/polling-controller/dist/AbstractPollingController.cjs"}],[2357,{"./AbstractPollingController.cjs":2356,"@metamask/base-controller":1353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.BlockTrackerPollingControllerV1=n.BlockTrackerPollingController=n.BlockTrackerPollingControllerOnly=void 0;const r=e("@metamask/base-controller"),i=e("./AbstractPollingController.cjs");function a(e){var t;class n extends((0,i.AbstractPollingControllerBaseMixin)(e)){constructor(){super(...arguments),t.set(this,{})}_startPolling(e){const n=(0,i.getKey)(e);if(s(this,t,"f")[n])return;const r=this._getNetworkClientById(e.networkClientId);if(!r)throw new Error(`Unable to retrieve blockTracker for networkClientId ${e.networkClientId}`);{const i=this._executePoll.bind(this,e);r.blockTracker.addListener("latest",i),s(this,t,"f")[n]=i}}_stopPollingByPollingTokenSetId(e){const{networkClientId:n}=JSON.parse(e),r=this._getNetworkClientById(n);if(r&&s(this,t,"f")[e]){const n=s(this,t,"f")[e];n&&(r.blockTracker.removeListener("latest",n),delete s(this,t,"f")[e])}}}return t=new WeakMap,n}class o{}n.BlockTrackerPollingControllerOnly=()=>a(o);n.BlockTrackerPollingController=()=>a(r.BaseController);n.BlockTrackerPollingControllerV1=()=>a(r.BaseControllerV1)}}},{package:"@metamask/smart-transactions-controller>@metamask/polling-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/polling-controller/dist/BlockTrackerPollingController.cjs"}],[2358,{"./AbstractPollingController.cjs":2356,"@metamask/base-controller":1353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},r=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.StaticIntervalPollingControllerV1=n.StaticIntervalPollingController=n.StaticIntervalPollingControllerOnly=void 0;const i=e("@metamask/base-controller"),a=e("./AbstractPollingController.cjs");function o(e){var t,n;class i extends((0,a.AbstractPollingControllerBaseMixin)(e)){constructor(){super(...arguments),t.set(this,{}),n.set(this,1e3)}setIntervalLength(e){s(this,n,e,"f")}getIntervalLength(){return r(this,n,"f")}_startPolling(e){if(!r(this,n,"f"))throw new Error("intervalLength must be defined and greater than 0");const s=(0,a.getKey)(e),i=r(this,t,"f")[s];this._stopPollingByPollingTokenSetId(s);const o=r(this,t,"f")[s]=setTimeout((async()=>{try{await this._executePoll(e)}catch(e){console.error(e)}o===r(this,t,"f")[s]&&this._startPolling(e)}),i?r(this,n,"f"):0)}_stopPollingByPollingTokenSetId(e){const n=r(this,t,"f")[e];n&&(clearTimeout(n),delete r(this,t,"f")[e])}}return t=new WeakMap,n=new WeakMap,i}class f{}n.StaticIntervalPollingControllerOnly=()=>o(f);n.StaticIntervalPollingController=()=>o(i.BaseController);n.StaticIntervalPollingControllerV1=()=>o(i.BaseControllerV1)}}},{package:"@metamask/smart-transactions-controller>@metamask/polling-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/polling-controller/dist/StaticIntervalPollingController.cjs"}],[2359,{"./BlockTrackerPollingController.cjs":2357,"./StaticIntervalPollingController.cjs":2358},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.StaticIntervalPollingControllerV1=n.StaticIntervalPollingController=n.StaticIntervalPollingControllerOnly=n.BlockTrackerPollingControllerV1=n.BlockTrackerPollingController=n.BlockTrackerPollingControllerOnly=void 0;var s=e("./BlockTrackerPollingController.cjs");Object.defineProperty(n,"BlockTrackerPollingControllerOnly",{enumerable:!0,get:function(){return s.BlockTrackerPollingControllerOnly}}),Object.defineProperty(n,"BlockTrackerPollingController",{enumerable:!0,get:function(){return s.BlockTrackerPollingController}}),Object.defineProperty(n,"BlockTrackerPollingControllerV1",{enumerable:!0,get:function(){return s.BlockTrackerPollingControllerV1}});var r=e("./StaticIntervalPollingController.cjs");Object.defineProperty(n,"StaticIntervalPollingControllerOnly",{enumerable:!0,get:function(){return r.StaticIntervalPollingControllerOnly}}),Object.defineProperty(n,"StaticIntervalPollingController",{enumerable:!0,get:function(){return r.StaticIntervalPollingController}}),Object.defineProperty(n,"StaticIntervalPollingControllerV1",{enumerable:!0,get:function(){return r.StaticIntervalPollingControllerV1}})}}},{package:"@metamask/smart-transactions-controller>@metamask/polling-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/polling-controller/dist/index.cjs"}],[236,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=r,function(e){(function(e){var t,n;const s=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(s).length)return;const r=(null===(n=e.TransactionController)||void 0===n?void 0:n.transactions)||{},i=Object.values(s).reduce(((e,t)=>(e[t.id]=t,e)),r);e.TransactionController={...e.TransactionController||{},transactions:i}})(e),function(e){var t;const n=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(n).length)return;const s={};for(const e of Object.values(n)){if(!e.blockNumber||!e.chainId||!e.txParams.to)continue;const t=parseInt(e.blockNumber,10),n=`${e.chainId}#${e.txParams.to.toLowerCase()}`,r=s[n]||-1;s[n]=Math.max(r,t)}e.TransactionController={...e.TransactionController,lastFetchedBlockNumbers:s}}(e),function(e){delete e.IncomingTransactionsController}(e)}(t.data),t},n.version=void 0;var s=e("lodash");const r=n.version=95}}},{package:"$root$",file:"app/scripts/migrations/095.ts"}],[2360,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){!function(e){var n,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,i=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",f=1e14,c=14,l=9007199254740991,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function h(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,n,s=1,r=e.length,i=e[0]+"";s<r;){for(t=e[s++]+"",n=c-t.length;n--;t="0"+t);i+=t}for(r=i.length;48===i.charCodeAt(--r););return i.slice(0,r+1||1)}function b(e,t){var n,s,r=e.c,i=t.c,a=e.s,o=t.s,f=e.e,c=t.e;if(!a||!o)return null;if(n=r&&!r[0],s=i&&!i[0],n||s)return n?s?0:-o:a;if(a!=o)return a;if(n=a<0,s=f==c,!r||!i)return s?0:!r^n?1:-1;if(!s)return f>c^n?1:-1;for(o=(f=r.length)<(c=i.length)?f:c,a=0;a<o;a++)if(r[a]!=i[a])return r[a]>i[a]^n?1:-1;return f==c?0:f>c^n?1:-1}function g(e,t,n,s){if(e<t||e>n||e!==i(e))throw Error(a+(s||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function y(e){var t=e.c.length-1;return h(e.e/c)==t&&e.c[t]%2!=0}function v(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function w(e,t,n){var s,r;if(t<0){for(r=n+".";++t;r+=n);e=r+e}else if(++t>(s=e.length)){for(r=n,t-=s;--t;r+=n);e+=r}else t<s&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,T,S,k,_,E,I,P,C,j,A=V.prototype={constructor:V,toString:null,valueOf:null},x=new V(1),O=20,N=4,M=-7,R=21,B=-1e7,L=1e7,D=!1,F=1,U=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},G="0123456789abcdefghijklmnopqrstuvwxyz",H=!0;function V(e,t){var n,r,a,f,u,d,p,h,m=this;if(!(m instanceof V))return new V(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>L?m.c=m.e=null:e.e<B?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(f=0,u=e;u>=10;u/=10,f++);return void(f>L?m.c=m.e=null:(m.e=f,m.c=[e]))}h=String(e)}else{if(!s.test(h=String(e)))return S(m,h,d);m.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(f=h.indexOf("."))>-1&&(h=h.replace(".","")),(u=h.search(/e/i))>0?(f<0&&(f=u),f+=+h.slice(u+1),h=h.substring(0,u)):f<0&&(f=h.length)}else{if(g(t,2,G.length,"Base"),10==t&&H)return K(m=new V(e),O+m.e+1,N);if(h=String(e),d="number"==typeof e){if(0*e!=0)return S(m,h,d,t);if(m.s=1/e<0?(h=h.slice(1),-1):1,V.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else m.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(n=G.slice(0,t),f=u=0,p=h.length;u<p;u++)if(n.indexOf(r=h.charAt(u))<0){if("."==r){if(u>f){f=p;continue}}else if(!a&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){a=!0,u=-1,f=0;continue}return S(m,String(e),d,t)}d=!1,(f=(h=T(h,t,10,m.s)).indexOf("."))>-1?h=h.replace(".",""):f=h.length}for(u=0;48===h.charCodeAt(u);u++);for(p=h.length;48===h.charCodeAt(--p););if(h=h.slice(u,++p)){if(p-=u,d&&V.DEBUG&&p>15&&(e>l||e!==i(e)))throw Error(o+m.s*e);if((f=f-u-1)>L)m.c=m.e=null;else if(f<B)m.c=[m.e=0];else{if(m.e=f,m.c=[],u=(f+1)%c,f<0&&(u+=c),u<p){for(u&&m.c.push(+h.slice(0,u)),p-=c;u<p;)m.c.push(+h.slice(u,u+=c));u=c-(h=h.slice(u)).length}else u-=p;for(;u--;h+="0");m.c.push(+h)}}else m.c=[m.e=0]}function J(e,t,n,s){var r,i,a,o,f;if(null==n?n=N:g(n,0,8),!e.c)return e.toString();if(r=e.c[0],a=e.e,null==t)f=m(e.c),f=1==s||2==s&&(a<=M||a>=R)?v(f,a):w(f,a,"0");else if(i=(e=K(new V(e),t,n)).e,o=(f=m(e.c)).length,1==s||2==s&&(t<=i||i<=M)){for(;o<t;f+="0",o++);f=v(f,i)}else if(t-=a,f=w(f,i,"0"),i+1>o){if(--t>0)for(f+=".";t--;f+="0");}else if((t+=i-o)>0)for(i+1==o&&(f+=".");t--;f+="0");return e.s<0&&r?"-"+f:f}function z(e,t){for(var n,s,r=1,i=new V(e[0]);r<e.length;r++)(!(s=new V(e[r])).s||(n=b(i,s))===t||0===n&&i.s===t)&&(i=s);return i}function q(e,t,n){for(var s=1,r=t.length;!t[--r];t.pop());for(r=t[0];r>=10;r/=10,s++);return(n=s+n*c-1)>L?e.c=e.e=null:n<B?e.c=[e.e=0]:(e.e=n,e.c=t),e}function K(e,t,n,s){var a,o,l,d,p,h,m,b=e.c,g=u;if(b){e:{for(a=1,d=b[0];d>=10;d/=10,a++);if((o=t-a)<0)o+=c,l=t,p=b[h=0],m=i(p/g[a-l-1]%10);else if((h=r((o+1)/c))>=b.length){if(!s)break e;for(;b.length<=h;b.push(0));p=m=0,a=1,l=(o%=c)-c+1}else{for(p=d=b[h],a=1;d>=10;d/=10,a++);m=(l=(o%=c)-c+a)<0?0:i(p/g[a-l-1]%10)}if(s=s||t<0||null!=b[h+1]||(l<0?p:p%g[a-l-1]),s=n<4?(m||s)&&(0==n||n==(e.s<0?3:2)):m>5||5==m&&(4==n||s||6==n&&(o>0?l>0?p/g[a-l]:0:b[h-1])%10&1||n==(e.s<0?8:7)),t<1||!b[0])return b.length=0,s?(t-=e.e+1,b[0]=g[(c-t%c)%c],e.e=-t||0):b[0]=e.e=0,e;if(0==o?(b.length=h,d=1,h--):(b.length=h+1,d=g[c-o],b[h]=l>0?i(p/g[a-l]%g[l])*d:0),s)for(;;){if(0==h){for(o=1,l=b[0];l>=10;l/=10,o++);for(l=b[0]+=d,d=1;l>=10;l/=10,d++);o!=d&&(e.e++,b[0]==f&&(b[0]=1));break}if(b[h]+=d,b[h]!=f)break;b[h--]=0,d=1}for(o=b.length;0===b[--o];b.pop());}e.e>L?e.c=e.e=null:e.e<B&&(e.c=[e.e=0])}return e}function W(e){var t,n=e.e;return null===n?e.toString():(t=m(e.c),t=n<=M||n>=R?v(t,n):w(t,n,"0"),e.s<0?"-"+t:t)}return V.clone=e,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(g(n=e[t],0,p,t),O=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(g(n=e[t],0,8,t),N=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(g(n[0],-p,0,t),g(n[1],0,p,t),M=n[0],R=n[1]):(g(n,-p,p,t),M=-(R=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)g(n[0],-p,-1,t),g(n[1],1,p,t),B=n[0],L=n[1];else{if(g(n,-p,p,t),!n)throw Error(a+t+" cannot be zero: "+n);B=-(L=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(a+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!n,Error(a+"crypto unavailable");D=n}else D=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(g(n=e[t],0,9,t),F=n),e.hasOwnProperty(t="POW_PRECISION")&&(g(n=e[t],0,p,t),U=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(a+t+" not an object: "+n);$=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(a+t+" invalid: "+n);H="0123456789"==n.slice(0,10),G=n}}return{DECIMAL_PLACES:O,ROUNDING_MODE:N,EXPONENTIAL_AT:[M,R],RANGE:[B,L],CRYPTO:D,MODULO_MODE:F,POW_PRECISION:U,FORMAT:$,ALPHABET:G}},V.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!V.DEBUG)return!0;var t,n,s=e.c,r=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(s)){if((1===o||-1===o)&&r>=-p&&r<=p&&r===i(r)){if(0===s[0]){if(0===r&&1===s.length)return!0;break e}if((t=(r+1)%c)<1&&(t+=c),String(s[0]).length==t){for(t=0;t<s.length;t++)if((n=s[t])<0||n>=f||n!==i(n))break e;if(0!==n)return!0}}}else if(null===s&&null===r&&(null===o||1===o||-1===o))return!0;throw Error(a+"Invalid BigNumber: "+e)},V.maximum=V.max=function(){return z(arguments,-1)},V.minimum=V.min=function(){return z(arguments,1)},V.random=(k=9007199254740992,_=Math.random()*k&2097151?function(){return i(Math.random()*k)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,s,o,f,l=0,d=[],h=new V(x);if(null==e?e=O:g(e,0,p),o=r(e/c),D)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));l<o;)(f=131072*t[l]+(t[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[l]=n[0],t[l+1]=n[1]):(d.push(f%1e14),l+=2);l=o/2}else{if(!crypto.randomBytes)throw D=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(o*=7);l<o;)(f=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(d.push(f%1e14),l+=7);l=o/7}if(!D)for(;l<o;)(f=_())<9e15&&(d[l++]=f%1e14);for(o=d[--l],e%=c,o&&e&&(f=u[c-e],d[l]=i(o/f)*f);0===d[l];d.pop(),l--);if(l<0)d=[s=0];else{for(s=-1;0===d[0];d.splice(0,1),s-=c);for(l=1,f=d[0];f>=10;f/=10,l++);l<c&&(s-=c-l)}return h.e=s,h.c=d,h}),V.sum=function(){for(var e=1,t=arguments,n=new V(t[0]);e<t.length;)n=n.plus(t[e++]);return n},T=function(){var e="0123456789";function t(e,t,n,s){for(var r,i,a=[0],o=0,f=e.length;o<f;){for(i=a.length;i--;a[i]*=t);for(a[0]+=s.indexOf(e.charAt(o++)),r=0;r<a.length;r++)a[r]>n-1&&(null==a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}return function(s,r,i,a,o){var f,c,l,u,d,p,h,b,g=s.indexOf("."),y=O,v=N;for(g>=0&&(u=U,U=0,s=s.replace(".",""),p=(b=new V(r)).pow(s.length-g),U=u,b.c=t(w(m(p.c),p.e,"0"),10,i,e),b.e=b.c.length),l=u=(h=t(s,r,i,o?(f=G,e):(f=e,G))).length;0==h[--u];h.pop());if(!h[0])return f.charAt(0);if(g<0?--l:(p.c=h,p.e=l,p.s=a,h=(p=n(p,b,y,v,i)).c,d=p.r,l=p.e),g=h[c=l+y+1],u=i/2,d=d||c<0||null!=h[c+1],d=v<4?(null!=g||d)&&(0==v||v==(p.s<0?3:2)):g>u||g==u&&(4==v||d||6==v&&1&h[c-1]||v==(p.s<0?8:7)),c<1||!h[0])s=d?w(f.charAt(1),-y,f.charAt(0)):f.charAt(0);else{if(h.length=c,d)for(--i;++h[--c]>i;)h[c]=0,c||(++l,h=[1].concat(h));for(u=h.length;!h[--u];);for(g=0,s="";g<=u;s+=f.charAt(h[g++]));s=w(s,l,f.charAt(0))}return s}}(),n=function(){function e(e,t,n){var s,r,i,a,o=0,f=e.length,c=t%d,l=t/d|0;for(e=e.slice();f--;)o=((r=c*(i=e[f]%d)+(s=l*i+(a=e[f]/d|0)*c)%d*d+o)/n|0)+(s/d|0)+l*a,e[f]=r%n;return o&&(e=[o].concat(e)),e}function t(e,t,n,s){var r,i;if(n!=s)i=n>s?1:-1;else for(r=i=0;r<n;r++)if(e[r]!=t[r]){i=e[r]>t[r]?1:-1;break}return i}function n(e,t,n,s){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*s+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(s,r,a,o,l){var u,d,p,m,b,g,y,v,w,T,S,k,_,E,I,P,C,j=s.s==r.s?1:-1,A=s.c,x=r.c;if(!(A&&A[0]&&x&&x[0]))return new V(s.s&&r.s&&(A?!x||A[0]!=x[0]:x)?A&&0==A[0]||!x?0*j:j/0:NaN);for(w=(v=new V(j)).c=[],j=a+(d=s.e-r.e)+1,l||(l=f,d=h(s.e/c)-h(r.e/c),j=j/c|0),p=0;x[p]==(A[p]||0);p++);if(x[p]>(A[p]||0)&&d--,j<0)w.push(1),m=!0;else{for(E=A.length,P=x.length,p=0,j+=2,(b=i(l/(x[0]+1)))>1&&(x=e(x,b,l),A=e(A,b,l),P=x.length,E=A.length),_=P,S=(T=A.slice(0,P)).length;S<P;T[S++]=0);C=x.slice(),C=[0].concat(C),I=x[0],x[1]>=l/2&&I++;do{if(b=0,(u=t(x,T,P,S))<0){if(k=T[0],P!=S&&(k=k*l+(T[1]||0)),(b=i(k/I))>1)for(b>=l&&(b=l-1),y=(g=e(x,b,l)).length,S=T.length;1==t(g,T,y,S);)b--,n(g,P<y?C:x,y,l),y=g.length,u=1;else 0==b&&(u=b=1),y=(g=x.slice()).length;if(y<S&&(g=[0].concat(g)),n(T,g,S,l),S=T.length,-1==u)for(;t(x,T,P,S)<1;)b++,n(T,P<S?C:x,S,l),S=T.length}else 0===u&&(b++,T=[0]);w[p++]=b,T[0]?T[S++]=A[_]||0:(T=[A[_]],S=1)}while((_++<E||null!=T[0])&&j--);m=null!=T[0],w[0]||w.splice(0,1)}if(l==f){for(p=1,j=w[0];j>=10;j/=10,p++);K(v,a+(v.e=p+d*c-1)+1,o,m)}else v.e=d,v.r=+m;return v}}(),E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,I=/^([^.]+)\.$/,P=/^\.([^.]+)$/,C=/^-?(Infinity|NaN)$/,j=/^\s*\+(?=[\w.])|^\s+|\s+$/g,S=function(e,t,n,s){var r,i=n?t:t.replace(j,"");if(C.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(E,(function(e,t,n){return r="x"==(n=n.toLowerCase())?16:"b"==n?2:8,s&&s!=r?e:t})),s&&(r=s,i=i.replace(I,"$1").replace(P,"0.$1")),t!=i))return new V(i,r);if(V.DEBUG)throw Error(a+"Not a"+(s?" base "+s:"")+" number: "+t);e.s=null}e.c=e.e=null},A.absoluteValue=A.abs=function(){var e=new V(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,t){return b(this,new V(e,t))},A.decimalPlaces=A.dp=function(e,t){var n,s,r,i=this;if(null!=e)return g(e,0,p),null==t?t=N:g(t,0,8),K(new V(i),e+i.e+1,t);if(!(n=i.c))return null;if(s=((r=n.length-1)-h(this.e/c))*c,r=n[r])for(;r%10==0;r/=10,s--);return s<0&&(s=0),s},A.dividedBy=A.div=function(e,t){return n(this,new V(e,t),O,N)},A.dividedToIntegerBy=A.idiv=function(e,t){return n(this,new V(e,t),0,1)},A.exponentiatedBy=A.pow=function(e,t){var n,s,o,f,l,u,d,p,h=this;if((e=new V(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+W(e));if(null!=t&&(t=new V(t)),l=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return p=new V(Math.pow(+W(h),l?e.s*(2-y(e)):+W(e))),t?p.mod(t):p;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new V(NaN);(s=!u&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||l&&h.c[1]>=24e7:h.c[0]<8e13||l&&h.c[0]<=9999975e7)))return f=h.s<0&&y(e)?-0:0,h.e>-1&&(f=1/f),new V(u?1/f:f);U&&(f=r(U/c+2))}for(l?(n=new V(.5),u&&(e.s=1),d=y(e)):d=(o=Math.abs(+W(e)))%2,p=new V(x);;){if(d){if(!(p=p.times(h)).c)break;f?p.c.length>f&&(p.c.length=f):s&&(p=p.mod(t))}if(o){if(0===(o=i(o/2)))break;d=o%2}else if(K(e=e.times(n),e.e+1,1),e.e>14)d=y(e);else{if(0===(o=+W(e)))break;d=o%2}h=h.times(h),f?h.c&&h.c.length>f&&(h.c.length=f):s&&(h=h.mod(t))}return s?p:(u&&(p=x.div(p)),t?p.mod(t):f?K(p,U,N,undefined):p)},A.integerValue=function(e){var t=new V(this);return null==e?e=N:g(e,0,8),K(t,t.e+1,e)},A.isEqualTo=A.eq=function(e,t){return 0===b(this,new V(e,t))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,t){return b(this,new V(e,t))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,t){return 1===(t=b(this,new V(e,t)))||0===t},A.isInteger=function(){return!!this.c&&h(this.e/c)>this.c.length-2},A.isLessThan=A.lt=function(e,t){return b(this,new V(e,t))<0},A.isLessThanOrEqualTo=A.lte=function(e,t){return-1===(t=b(this,new V(e,t)))||0===t},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,t){var n,s,r,i,a=this,o=a.s;if(t=(e=new V(e,t)).s,!o||!t)return new V(NaN);if(o!=t)return e.s=-t,a.plus(e);var l=a.e/c,u=e.e/c,d=a.c,p=e.c;if(!l||!u){if(!d||!p)return d?(e.s=-t,e):new V(p?a:NaN);if(!d[0]||!p[0])return p[0]?(e.s=-t,e):new V(d[0]?a:3==N?-0:0)}if(l=h(l),u=h(u),d=d.slice(),o=l-u){for((i=o<0)?(o=-o,r=d):(u=l,r=p),r.reverse(),t=o;t--;r.push(0));r.reverse()}else for(s=(i=(o=d.length)<(t=p.length))?o:t,o=t=0;t<s;t++)if(d[t]!=p[t]){i=d[t]<p[t];break}if(i&&(r=d,d=p,p=r,e.s=-e.s),(t=(s=p.length)-(n=d.length))>0)for(;t--;d[n++]=0);for(t=f-1;s>o;){if(d[--s]<p[s]){for(n=s;n&&!d[--n];d[n]=t);--d[n],d[s]+=f}d[s]-=p[s]}for(;0==d[0];d.splice(0,1),--u);return d[0]?q(e,d,u):(e.s=3==N?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,t){var s,r,i=this;return e=new V(e,t),!i.c||!e.s||e.c&&!e.c[0]?new V(NaN):!e.c||i.c&&!i.c[0]?new V(i):(9==F?(r=e.s,e.s=1,s=n(i,e,0,3),e.s=r,s.s*=r):s=n(i,e,0,F),(e=i.minus(s.times(e))).c[0]||1!=F||(e.s=i.s),e)},A.multipliedBy=A.times=function(e,t){var n,s,r,i,a,o,l,u,p,m,b,g,y,v,w,T=this,S=T.c,k=(e=new V(e,t)).c;if(!(S&&k&&S[0]&&k[0]))return!T.s||!e.s||S&&!S[0]&&!k||k&&!k[0]&&!S?e.c=e.e=e.s=null:(e.s*=T.s,S&&k?(e.c=[0],e.e=0):e.c=e.e=null),e;for(s=h(T.e/c)+h(e.e/c),e.s*=T.s,(l=S.length)<(m=k.length)&&(y=S,S=k,k=y,r=l,l=m,m=r),r=l+m,y=[];r--;y.push(0));for(v=f,w=d,r=m;--r>=0;){for(n=0,b=k[r]%w,g=k[r]/w|0,i=r+(a=l);i>r;)n=((u=b*(u=S[--a]%w)+(o=g*u+(p=S[a]/w|0)*b)%w*w+y[i]+n)/v|0)+(o/w|0)+g*p,y[i--]=u%v;y[i]=n}return n?++s:y.splice(0,1),q(e,y,s)},A.negated=function(){var e=new V(this);return e.s=-e.s||null,e},A.plus=function(e,t){var n,s=this,r=s.s;if(t=(e=new V(e,t)).s,!r||!t)return new V(NaN);if(r!=t)return e.s=-t,s.minus(e);var i=s.e/c,a=e.e/c,o=s.c,l=e.c;if(!i||!a){if(!o||!l)return new V(r/0);if(!o[0]||!l[0])return l[0]?e:new V(o[0]?s:0*r)}if(i=h(i),a=h(a),o=o.slice(),r=i-a){for(r>0?(a=i,n=l):(r=-r,n=o),n.reverse();r--;n.push(0));n.reverse()}for((r=o.length)-(t=l.length)<0&&(n=l,l=o,o=n,t=r),r=0;t;)r=(o[--t]=o[t]+l[t]+r)/f|0,o[t]=f===o[t]?0:o[t]%f;return r&&(o=[r].concat(o),++a),q(e,o,a)},A.precision=A.sd=function(e,t){var n,s,r,i=this;if(null!=e&&e!==!!e)return g(e,1,p),null==t?t=N:g(t,0,8),K(new V(i),e,t);if(!(n=i.c))return null;if(s=(r=n.length-1)*c+1,r=n[r]){for(;r%10==0;r/=10,s--);for(r=n[0];r>=10;r/=10,s++);}return e&&i.e+1>s&&(s=i.e+1),s},A.shiftedBy=function(e){return g(e,-9007199254740991,l),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,t,s,r,i,a=this,o=a.c,f=a.s,c=a.e,l=O+4,u=new V("0.5");if(1!==f||!o||!o[0])return new V(!f||f<0&&(!o||o[0])?NaN:o?a:1/0);if(0==(f=Math.sqrt(+W(a)))||f==1/0?(((t=m(o)).length+c)%2==0&&(t+="0"),f=Math.sqrt(+t),c=h((c+1)/2)-(c<0||c%2),s=new V(t=f==1/0?"5e"+c:(t=f.toExponential()).slice(0,t.indexOf("e")+1)+c)):s=new V(f+""),s.c[0])for((f=(c=s.e)+l)<3&&(f=0);;)if(i=s,s=u.times(i.plus(n(a,i,l,1))),m(i.c).slice(0,f)===(t=m(s.c)).slice(0,f)){if(s.e<c&&--f,"9999"!=(t=t.slice(f-3,f+1))&&(r||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(K(s,s.e+O+2,1),e=!s.times(s).eq(a));break}if(!r&&(K(i,i.e+O+2,0),i.times(i).eq(a))){s=i;break}l+=4,f+=4,r=1}return K(s,s.e+O+1,N,e)},A.toExponential=function(e,t){return null!=e&&(g(e,0,p),e++),J(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(g(e,0,p),e=e+this.e+1),J(this,e,t)},A.toFormat=function(e,t,n){var s,r=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=$;else if("object"!=typeof n)throw Error(a+"Argument not an object: "+n);if(s=r.toFixed(e,t),r.c){var i,o=s.split("."),f=+n.groupSize,c=+n.secondaryGroupSize,l=n.groupSeparator||"",u=o[0],d=o[1],p=r.s<0,h=p?u.slice(1):u,m=h.length;if(c&&(i=f,f=c,c=i,m-=i),f>0&&m>0){for(i=m%f||f,u=h.substr(0,i);i<m;i+=f)u+=l+h.substr(i,f);c>0&&(u+=l+h.slice(i)),p&&(u="-"+u)}s=d?u+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?d.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):d):u}return(n.prefix||"")+s+(n.suffix||"")},A.toFraction=function(e){var t,s,r,i,o,f,l,d,p,h,b,g,y=this,v=y.c;if(null!=e&&(!(l=new V(e)).isInteger()&&(l.c||1!==l.s)||l.lt(x)))throw Error(a+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+W(l));if(!v)return new V(y);for(t=new V(x),p=s=new V(x),r=d=new V(x),g=m(v),o=t.e=g.length-y.e-1,t.c[0]=u[(f=o%c)<0?c+f:f],e=!e||l.comparedTo(t)>0?o>0?t:p:l,f=L,L=1/0,l=new V(g),d.c[0]=0;h=n(l,t,0,1),1!=(i=s.plus(h.times(r))).comparedTo(e);)s=r,r=i,p=d.plus(h.times(i=p)),d=i,t=l.minus(h.times(i=t)),l=i;return i=n(e.minus(s),r,0,1),d=d.plus(i.times(p)),s=s.plus(i.times(r)),d.s=p.s=y.s,b=n(p,r,o*=2,N).minus(y).abs().comparedTo(n(d,s,o,N).minus(y).abs())<1?[p,r]:[d,s],L=f,b},A.toNumber=function(){return+W(this)},A.toPrecision=function(e,t){return null!=e&&g(e,1,p),J(this,e,t,2)},A.toString=function(e){var t,n=this,s=n.s,r=n.e;return null===r?s?(t="Infinity",s<0&&(t="-"+t)):t="NaN":(null==e?t=r<=M||r>=R?v(m(n.c),r):w(m(n.c),r,"0"):10===e&&H?t=w(m((n=K(new V(n),O+r+1,N)).c),n.e,"0"):(g(e,2,G.length,"Base"),t=T(w(m(n.c),r,"0"),10,e,s,!0)),s<0&&n.c[0]&&(t="-"+t)),t},A.valueOf=A.toJSON=function(){return W(this)},A._isBigNumber=!0,null!=t&&V.set(t),V}(),n.default=n.BigNumber=n,"function"==typeof define&&define.amd?define((function(){return n})):void 0!==t&&t.exports?t.exports=n:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=n)}(this)}}},{package:"@metamask/smart-transactions-controller>bignumber.js",file:"node_modules/@metamask/smart-transactions-controller/node_modules/bignumber.js/bignumber.js"}],[2361,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports={name:"@metamask/smart-transactions-controller",version:"15.0.0",description:"Improves success rates for swaps by trialing transactions privately and finding minimum fees",repository:{type:"git",url:"https://github.com/MetaMask/smart-transactions-controller.git"},license:"SEE LICENSE IN LICENSE",main:"dist/index.js",types:"dist/index.d.ts",files:["dist/"],scripts:{build:"tsc --project tsconfig.build.json","build:clean":"rm -rf dist && yarn build","build:link":"yarn build && cd dist && yarn link && rm -rf node_modules && cd ..",lint:"yarn lint:eslint && yarn lint:misc --check","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' '**/*.yml' '!.yarnrc.yml' --ignore-path .gitignore",prepack:"./scripts/prepack.sh",test:"jest","test:watch":"jest --watchAll"},dependencies:{"@babel/runtime":"^7.24.1","@ethereumjs/tx":"^5.2.1","@ethereumjs/util":"^9.0.2","@ethersproject/bytes":"^5.7.0","@metamask/base-controller":"^7.0.1","@metamask/controller-utils":"^11.0.0","@metamask/eth-json-rpc-provider":"^4.1.6","@metamask/eth-query":"^4.0.0","@metamask/polling-controller":"^12.0.0","bignumber.js":"^9.0.1",events:"^3.3.0","fast-json-patch":"^3.1.0",lodash:"^4.17.21"},devDependencies:{"@lavamoat/allow-scripts":"^3.2.1","@lavamoat/preinstall-always-fail":"^2.1.0","@metamask/auto-changelog":"^3.1.0","@metamask/eslint-config":"^12.2.0","@metamask/eslint-config-jest":"^12.1.0","@metamask/eslint-config-nodejs":"^12.1.0","@metamask/eslint-config-typescript":"^12.1.0","@metamask/gas-fee-controller":"^22.0.0","@metamask/json-rpc-engine":"^10.0.1","@metamask/network-controller":"^22.0.0","@metamask/transaction-controller":"^38.0.0","@types/jest":"^26.0.24","@types/lodash":"^4.14.194","@types/node":"^18.19.17","@types/sinon":"^9.0.10","@typescript-eslint/eslint-plugin":"^5.33.0","@typescript-eslint/parser":"^5.33.0",eslint:"^8.48.0","eslint-config-prettier":"^8.8.0","eslint-plugin-import":"~2.26.0","eslint-plugin-jest":"^27.1.5","eslint-plugin-jsdoc":"^39.2.9","eslint-plugin-n":"^15.7.0","eslint-plugin-prettier":"^4.2.1","eslint-plugin-promise":"^6.1.1","isomorphic-fetch":"^3.0.0",jest:"^29.7.0",nock:"^14.0.0-beta.7",prettier:"^2.8.8","prettier-plugin-packagejson":"^2.4.3",sinon:"^9.2.4","ts-jest":"^29.1.4",typescript:"~4.8.4"},peerDependencies:{"@metamask/network-controller":"^22.0.0","@metamask/transaction-controller":"^38.0.0"},peerDependenciesMeta:{"@metamask/accounts-controller":{optional:!0},"@metamask/approval-controller":{optional:!0}},packageManager:"yarn@3.2.1",engines:{node:"^18.18 || >=20"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>keccak":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>secp256k1":!1,"@metamask/controller-utils>babel-runtime>core-js":!1,"@metamask/transaction-controller>@metamask/accounts-controller>@metamask/keyring-controller>ethereumjs-wallet>ethereum-cryptography>keccak":!1,"@metamask/transaction-controller>@metamask/accounts-controller>@metamask/keyring-controller>ethereumjs-wallet>ethereum-cryptography>secp256k1":!1}}}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/package.json"}],[2362,{"../index.cjs":2365,"../snaps/Timer.cjs":2385,"@metamask/base-controller":1353,"@metamask/snaps-rpc-methods":2428,"@metamask/snaps-utils":2596,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},f=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.CronjobController=n.DAILY_TIMEOUT=void 0;const c=e("@metamask/base-controller"),l=e("@metamask/snaps-rpc-methods"),u=e("@metamask/snaps-utils"),d=e("@metamask/utils"),p=e("../index.cjs"),h=e("../snaps/Timer.cjs");n.DAILY_TIMEOUT=(0,d.inMilliseconds)(24,d.Duration.Hour);class m extends c.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{jobs:{persist:!0,anonymous:!1}},name:"CronjobController",state:{jobs:{},...t}}),s.set(this,void 0),r.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o(this,i,new Map,"f"),o(this,a,new Map,"f"),o(this,s,e,"f"),this._handleSnapRegisterEvent=this._handleSnapRegisterEvent.bind(this),this._handleSnapUnregisterEvent=this._handleSnapUnregisterEvent.bind(this),this._handleEventSnapUpdated=this._handleEventSnapUpdated.bind(this),this.messagingSystem.subscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),this.dailyCheckIn().catch((e=>{(0,u.logError)(e)}))}getAllJobs(){const e=this.messagingSystem.call("SnapController:getAll");return(0,p.getRunnableSnaps)(e).map((e=>this.getSnapJobs(e.id))).flat().filter((e=>e!==undefined))}getSnapJobs(e){const t=f(this,s,"f").call("PermissionController:getPermissions",e),n=t?.[l.SnapEndowments.Cronjob],r=(0,l.getCronjobCaveatJobs)(n);return r?.map(((t,n)=>({...t,id:`${e}-${n}`,snapId:e})))}register(e){const t=this.getSnapJobs(e);t?.forEach((e=>this.schedule(e)))}schedule(e){if(f(this,i,"f").has(e.id))return;const t=(0,u.parseCronExpression)(e.expression).next(),s=new Date,r=t.getTime()-s.getTime();if(r>n.DAILY_TIMEOUT)return;const o=new h.Timer(r);o.start((()=>{this.executeCronjob(e).catch((e=>{(0,u.logError)(e)})),f(this,i,"f").delete(e.id),this.schedule(e)})),this.state.jobs[e.id]?.lastRun||this.updateJobLastRunState(e.id,0),f(this,i,"f").set(e.id,o),f(this,a,"f").set(e.id,e.snapId)}async executeCronjob(e){this.updateJobLastRunState(e.id,Date.now()),await f(this,s,"f").call("SnapController:handleRequest",{snapId:e.snapId,origin:"",handler:u.HandlerType.OnCronjob,request:e.request})}unregister(e){const t=[...f(this,a,"f").entries()].filter((([t,n])=>n===e));t.length&&t.forEach((([e])=>{const t=f(this,i,"f").get(e);t&&(t.cancel(),f(this,i,"f").delete(e),f(this,a,"f").delete(e))}))}updateJobLastRunState(e,t){this.update((n=>{n.jobs[e]={lastRun:t}}))}async dailyCheckIn(){const e=this.getAllJobs();for(const t of e){const e=(0,u.parseCronExpression)(t.expression),n=this.state.jobs[t.id]?.lastRun;n!==undefined&&e.hasPrev()&&e.prev().getTime()>n&&await this.executeCronjob(t),this.schedule(t)}o(this,r,new h.Timer(n.DAILY_TIMEOUT),"f"),f(this,r,"f").start((()=>{this.dailyCheckIn().catch((e=>{(0,u.logError)(e)}))}))}destroy(){super.destroy(),this.messagingSystem.unsubscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),f(this,a,"f").forEach((e=>{this.unregister(e)}))}_handleSnapRegisterEvent(e){this.register(e.id)}_handleSnapUnregisterEvent(e){this.unregister(e.id)}_handleEventSnapUpdated(e){this.unregister(e.id),this.register(e.id)}}n.CronjobController=m,s=new WeakMap,r=new WeakMap,i=new WeakMap,a=new WeakMap}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/cronjob/CronjobController.cjs"}],[2363,{"./CronjobController.cjs":2362},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./CronjobController.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/cronjob/index.cjs"}],[2364,{"@metamask/utils":2765,"@xstate/fsm":3196},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.forceStrict=n.validateMachine=void 0;const s=e("@metamask/utils"),r=e("@xstate/fsm");n.validateMachine=function(e){(0,s.assert)("_options"in e,"The machine is not an @xstate/fsm machine");const t=e,n=new Set,r=e=>{return(t=e,Array.isArray(t)?t:t===undefined||null===t?[]:[t]).flatMap((e=>"string"==typeof e?[e]:((0,s.assert)("function"==typeof e),[]))).forEach(n.add.bind(n));var t};for(const e of Object.values(t.config.states)){r(e.entry),r(e.exit);for(const t of Object.values(e.on??{}))r(t.actions)}n.forEach((e=>(0,s.assert)(t._options.actions!==undefined&&e in t._options.actions,`Action "${e}" doesn't have an implementation`)))},n.forceStrict=function(e){let t=!1;e.subscribe((e=>{(0,s.assert)(!t||e.changed,"Invalid state transition"),t=!0}));const n=e.send.bind(e);e.send=(...t)=>((0,s.assert)(e.status===r.InterpreterStatus.Running,"Interpreter is stopped"),n(...t))}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/fsm.cjs"}],[2365,{"./cronjob/index.cjs":2363,"./insights/index.cjs":2367,"./interface/index.cjs":2369,"./services/index.cjs":2377,"./snaps/index.cjs":2387,"./utils.cjs":2397},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./services/index.cjs"),n),r(e("./snaps/index.cjs"),n),r(e("./utils.cjs"),n),r(e("./cronjob/index.cjs"),n),r(e("./interface/index.cjs"),n),r(e("./insights/index.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/index.cjs"}],[2366,{"../snaps/index.cjs":2387,"@metamask/base-controller":1353,"@metamask/snaps-rpc-methods":2428,"@metamask/snaps-utils":2596,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o,f,c,l,u,d,p=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.SnapInsightsController=void 0;const h=e("@metamask/base-controller"),m=e("@metamask/snaps-rpc-methods"),b=e("@metamask/snaps-utils"),g=e("@metamask/utils"),y=e("../snaps/index.cjs");class v extends h.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{insights:{persist:!1,anonymous:!1}},name:"SnapInsightsController",state:{insights:{},...t}}),s.add(this),this.messagingSystem.subscribe("TransactionController:unapprovedTransactionAdded",p(this,s,"m",a).bind(this)),this.messagingSystem.subscribe("TransactionController:transactionStatusUpdated",p(this,s,"m",c).bind(this)),this.messagingSystem.subscribe("SignatureController:stateChange",p(this,s,"m",o).bind(this))}}n.SnapInsightsController=v,s=new WeakSet,r=function(e){return(0,g.hasProperty)(this.state.insights,e)},i=function(e){const t=this.messagingSystem.call("SnapController:getAll");return(0,y.getRunnableSnaps)(t).reduce(((t,n)=>{const s=this.messagingSystem.call("PermissionController:getPermissions",n.id);return s&&(0,g.hasProperty)(s,e)&&t.push({snapId:n.id,permission:s[e]}),t}),[])},a=function(e){const{id:t,txParams:n,chainId:r,origin:a}=e,o=`eip155:${parseInt(r,16)}`;p(this,s,"m",i).call(this,m.SnapEndowments.TransactionInsight).forEach((({snapId:e,permission:r})=>{const i=(0,m.getTransactionOriginCaveat)(r)&&a?a:null;this.update((n=>{var s;(s=n.insights)[t]??(s[t]={}),n.insights[t][e]={snapId:e,loading:!0}})),p(this,s,"m",u).call(this,{snapId:e,handler:b.HandlerType.OnTransaction,params:{transaction:n,chainId:o,transactionOrigin:i}}).then((n=>p(this,s,"m",d).call(this,{id:t,snapId:e,response:n}))).catch((n=>p(this,s,"m",d).call(this,{id:t,snapId:e,error:n})))}))},o=function(e){for(const t of Object.keys(this.state.insights))(0,g.hasProperty)(e.unapprovedTypedMessages,t)||(0,g.hasProperty)(e.unapprovedPersonalMsgs,t)||p(this,s,"m",l).call(this,t);if(e.unapprovedPersonalMsgCount>0||e.unapprovedTypedMessagesCount>0){const t=p(this,s,"m",i).call(this,m.SnapEndowments.SignatureInsight);for(const n of Object.values(e.unapprovedPersonalMsgs))p(this,s,"m",f).call(this,t,n);for(const n of Object.values(e.unapprovedTypedMessages))p(this,s,"m",f).call(this,t,n)}},f=function(e,t){const{id:n,msgParams:i}=t;if(p(this,s,"m",r).call(this,n))return;const{from:a,data:o,signatureMethod:f,origin:c}=i,l={from:a,data:"eth_signTypedData_v3"===f||"eth_signTypedData_v4"===f?JSON.parse(o):o,signatureMethod:f};e.forEach((({snapId:e,permission:t})=>{const r=(0,m.getSignatureOriginCaveat)(t),i=c&&r?c:null;this.update((t=>{var s;(s=t.insights)[n]??(s[n]={}),t.insights[n][e]={snapId:e,loading:!0}})),p(this,s,"m",u).call(this,{snapId:e,handler:b.HandlerType.OnSignature,params:{signature:l,signatureOrigin:i}}).then((t=>p(this,s,"m",d).call(this,{id:n,snapId:e,response:t}))).catch((t=>p(this,s,"m",d).call(this,{id:n,snapId:e,error:t})))}))},c=function({transactionMeta:e}){"unapproved"!==e.status&&p(this,s,"m",l).call(this,e.id)},l=function(e){p(this,s,"m",r).call(this,e)&&(Object.values(this.state.insights[e]).filter((e=>e.interfaceId)).forEach((e=>{this.messagingSystem.call("SnapInterfaceController:deleteInterface",e.interfaceId)})),this.update((t=>{delete t.insights[e]})))},u=async function({snapId:e,handler:t,params:n}){return this.messagingSystem.call("SnapController:handleRequest",{snapId:e,origin:"",handler:t,request:{method:"",params:n}})},d=function({id:e,snapId:t,response:n,error:i}){p(this,s,"m",r).call(this,e)&&this.update((s=>{s.insights[e][t].loading=!1,s.insights[e][t].interfaceId=n?.id,s.insights[e][t].severity=n?.severity,s.insights[e][t].error=i?.message}))}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/insights/SnapInsightsController.cjs"}],[2367,{"./SnapInsightsController.cjs":2366},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./SnapInsightsController.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/insights/index.cjs"}],[2368,{"./utils.cjs":2370,"@metamask/base-controller":1353,"@metamask/snaps-sdk":2467,"@metamask/snaps-utils":2596,"@metamask/utils":2765,immer:4071,nanoid:2399},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o,f,c,l,u,d,p=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.SnapInterfaceController=void 0;const h=e("@metamask/base-controller"),m=e("@metamask/snaps-sdk"),b=e("@metamask/snaps-utils"),g=e("@metamask/utils"),y=e("immer"),v=e("nanoid"),w=e("./utils.cjs"),T=1e7,S="SnapInterfaceController";class k extends h.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{interfaces:{persist:e=>Object.entries(e).reduce(((e,[t,n])=>n.contentType===m.ContentType.Notification?(e[t]=n,e):e),{}),anonymous:!1}},name:S,state:{interfaces:{},...t}}),s.add(this),this.messagingSystem.subscribe("NotificationServicesController:notificationsListUpdated",p(this,s,"m",d).bind(this)),p(this,s,"m",r).call(this)}async createInterface(e,t,n,r){const i=(0,w.getJsxInterface)(t);await p(this,s,"m",u).call(this,i),(0,w.validateInterfaceContext)(n);const a=(0,v.nanoid)(),o=(0,w.constructState)({},i);return this.update((t=>{t.interfaces[a]={snapId:e,content:(0,y.castDraft)(i),state:o,context:n??null,contentType:r??null}})),a}getInterface(e,t){return p(this,s,"m",i).call(this,e,t),this.state.interfaces[t]}async updateInterface(e,t,n,r){p(this,s,"m",i).call(this,e,t);const a=(0,w.getJsxInterface)(n);await p(this,s,"m",u).call(this,a),(0,w.validateInterfaceContext)(r);const o=this.state.interfaces[t].state,f=(0,w.constructState)(o,a);this.update((e=>{e.interfaces[t].state=f,e.interfaces[t].content=(0,y.castDraft)(a),r&&(e.interfaces[t].context=r)}))}deleteInterface(e){this.update((t=>{delete t.interfaces[e]}))}updateInterfaceState(e,t){this.update((n=>{n.interfaces[e].state=t}))}async resolveInterface(e,t,n){p(this,s,"m",i).call(this,e,t),p(this,s,"m",a).call(this,t),await p(this,s,"m",l).call(this,t,n),this.deleteInterface(t)}}n.SnapInterfaceController=k,s=new WeakSet,r=function(){this.messagingSystem.registerActionHandler(`${S}:createInterface`,this.createInterface.bind(this)),this.messagingSystem.registerActionHandler(`${S}:getInterface`,this.getInterface.bind(this)),this.messagingSystem.registerActionHandler(`${S}:updateInterface`,this.updateInterface.bind(this)),this.messagingSystem.registerActionHandler(`${S}:deleteInterface`,this.deleteInterface.bind(this)),this.messagingSystem.registerActionHandler(`${S}:updateInterfaceState`,this.updateInterfaceState.bind(this)),this.messagingSystem.registerActionHandler(`${S}:resolveInterface`,this.resolveInterface.bind(this))},i=function(e,t){const n=this.state.interfaces[t];(0,g.assert)(n!==undefined,`Interface with id '${t}' not found.`),(0,g.assert)(n.snapId===e,`Interface not created by ${e}.`)},a=function(e){(0,g.assert)(p(this,s,"m",c).call(this,e),`Approval request with id '${e}' not found.`)},o=async function(){await this.messagingSystem.call("PhishingController:maybeUpdateState")},f=function(e){return this.messagingSystem.call("PhishingController:testOrigin",e).result},c=function(e){return this.messagingSystem.call("ApprovalController:hasRequest",{id:e})},l=async function(e,t){await this.messagingSystem.call("ApprovalController:acceptRequest",e,t)},u=async function(e){const t=(0,b.getJsonSizeUnsafe)(e);(0,g.assert)(t<=T,"A Snap UI may not be larger than 10 MB."),await p(this,s,"m",o).call(this),(0,b.validateJsxLinks)(e,p(this,s,"m",f).bind(this),(e=>this.messagingSystem.call("SnapController:get",e)))},d=function(e){const t=e.filter((e=>"snap"===e.type&&(0,g.hasProperty)(e.data,"detailedView"))),n=new Set(t.map((e=>e.data.detailedView.interfaceId)));this.update((e=>{Object.entries(e.interfaces).forEach((([t,s])=>{s.contentType!==m.ContentType.Notification||n.has(t)||delete e.interfaces[t]}))}))}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/interface/SnapInterfaceController.cjs"}],[2369,{"./SnapInterfaceController.cjs":2368},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./SnapInterfaceController.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/interface/index.cjs"}],[237,{"../../../shared/constants/network":5139,"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=a,function(e){if(!((0,r.hasProperty)(e,"PreferencesController")&&(0,r.isObject)(e.PreferencesController)&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.PreferencesController,"featureFlags")&&(0,r.hasProperty)(e.NetworkController,"networkConfigurations")))return e;const{PreferencesController:t,NetworkController:n}=e,{featureFlags:a}=t,{showIncomingTransactions:o}=a,{networkConfigurations:f}=n,c=Object.values(f).map((e=>e.chainId)),l=[i.CHAIN_IDS.MAINNET,i.CHAIN_IDS.LINEA_MAINNET],u=[i.CHAIN_IDS.GOERLI,i.CHAIN_IDS.SEPOLIA,i.CHAIN_IDS.LINEA_GOERLI],d=[...l,...c,...u],p=(0,s.fromPairs)((0,s.map)(d,(e=>[e,o])));(null==a?void 0:a.showIncomingTransactions)!==undefined&&delete a.showIncomingTransactions;e.PreferencesController.incomingTransactionsPreferences=p}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils"),i=e("../../../shared/constants/network");const a=n.version=96}}},{package:"$root$",file:"app/scripts/migrations/096.ts"}],[2370,{"@metamask/snaps-sdk":2467,"@metamask/snaps-sdk/jsx":2576,"@metamask/snaps-utils":2596},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateInterfaceContext=n.constructState=n.assertNameIsUnique=n.getJsxInterface=void 0;const s=e("@metamask/snaps-sdk"),r=e("@metamask/snaps-sdk/jsx"),i=e("@metamask/snaps-utils");function a(e,t){(0,s.assert)(e[t]===undefined,`Duplicate component names are not allowed, found multiple instances of: "${t}".`)}function o(e,t,n){const s=n?e[n]:e,r=s?.[t.props.name];return"FileInput"===t.type?r??null:function(e){return"Checkbox"===e.type?e.props.checked:e.props.value}(t)??r??function(e){switch(e.type){case"Dropdown":{const t=(0,i.getJsxChildren)(e);return t[0]?.props.value}case"RadioGroup":{const t=(0,i.getJsxChildren)(e);return t[0]?.props.value}case"Selector":{const t=(0,i.getJsxChildren)(e);return t[0]?.props.value}case"Checkbox":return!1;default:return null}}(t)??null}n.getJsxInterface=function(e){return(0,r.isJSXElementUnsafe)(e)?e:(0,i.getJsxElementFromComponent)(e)},n.assertNameIsUnique=a,n.constructState=function(e,t){const n={},s=[];return(0,i.walkJsx)(t,((t,r)=>{let i=s[s.length-1];if(i&&r<=i.depth&&(s.pop(),i=s[s.length-1]),"Form"===t.type)return a(n,t.props.name),s.push({name:t.props.name,depth:r}),void(n[t.props.name]={});if(i&&("Input"===t.type||"Dropdown"===t.type||"RadioGroup"===t.type||"FileInput"===t.type||"Checkbox"===t.type||"Selector"===t.type)){const s=n[i.name];return a(s,t.props.name),void(s[t.props.name]=o(e,t,i.name))}"Input"!==t.type&&"Dropdown"!==t.type&&"RadioGroup"!==t.type&&"FileInput"!==t.type&&"Checkbox"!==t.type&&"Selector"!==t.type||(a(n,t.props.name),n[t.props.name]=o(e,t))})),n};const f=1e6;n.validateInterfaceContext=function(e){if(!e)return;const t=(0,i.getJsonSizeUnsafe)(e);(0,s.assert)(t<=f,"A Snap interface context may not be larger than 1 MB.")}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/interface/utils.cjs"}],[2371,{"@metamask/snaps-utils":2596,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.log=void 0;const s=e("@metamask/snaps-utils"),r=e("@metamask/utils");n.log=(0,r.createModuleLogger)(s.snapsLogger,"snaps-controllers")}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/logging.cjs"}],[2372,{"../logging.cjs":2371,"../snaps/Timer.cjs":2385,"../utils.cjs":2397,"@metamask/json-rpc-engine":1736,"@metamask/json-rpc-middleware-stream":1740,"@metamask/object-multiplex":2077,"@metamask/rpc-errors":2262,"@metamask/snaps-utils":2596,"@metamask/utils":2765,nanoid:2399,"readable-stream":4666},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o,f,c,l,u,d,p,h,m,b=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},y=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.setupMultiplex=n.AbstractExecutionService=void 0;const v=e("@metamask/json-rpc-engine"),w=e("@metamask/json-rpc-middleware-stream"),T=y(e("@metamask/object-multiplex")),S=e("@metamask/rpc-errors"),k=e("@metamask/snaps-utils"),_=e("@metamask/utils"),E=e("nanoid"),I=e("readable-stream"),P=e("../logging.cjs"),C=e("../snaps/Timer.cjs"),j=e("../utils.cjs"),A="ExecutionService";function x(e,t){const n=new T.default;return(0,I.pipeline)(e,n,e,(e=>{e&&(t?(0,k.logError)(`"${t}" stream failure.`,e):(0,k.logError)(e))})),n}n.AbstractExecutionService=class{constructor({setupSnapProvider:e,messenger:t,initTimeout:n=(0,_.inMilliseconds)(60,_.Duration.Second),pingTimeout:d=(0,_.inMilliseconds)(2,_.Duration.Second),terminationTimeout:p=(0,_.inMilliseconds)(1,_.Duration.Second),usePing:h=!0}){s.add(this),r.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),f.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),b(this,r,new Map,"f"),this.jobs=new Map,this.setupSnapProvider=e,b(this,i,new Map,"f"),b(this,a,new Map,"f"),b(this,o,t,"f"),b(this,f,n,"f"),b(this,c,d,"f"),b(this,l,p,"f"),b(this,u,h,"f"),this.registerMessageHandlers()}registerMessageHandlers(){g(this,o,"f").registerActionHandler(`${A}:handleRpcRequest`,(async(e,t)=>this.handleRpcRequest(e,t))),g(this,o,"f").registerActionHandler(`${A}:executeSnap`,(async e=>this.executeSnap(e))),g(this,o,"f").registerActionHandler(`${A}:terminateSnap`,(async e=>this.terminateSnap(e))),g(this,o,"f").registerActionHandler(`${A}:terminateAllSnaps`,(async()=>this.terminateAllSnaps()))}async terminate(e){const t=this.jobs.get(e);if(!t)throw new Error(`Job with id "${e}" not found.`);try{const t=await(0,j.withTimeout)(this.command(e,{jsonrpc:"2.0",method:"terminate",params:[],id:(0,E.nanoid)()}),g(this,l,"f"));t!==j.hasTimedOut&&"OK"===t||(0,k.logError)(`Job "${e}" failed to terminate gracefully.`,t)}catch{}Object.values(t.streams).forEach((e=>{try{!e.destroyed&&e.destroy(),e.removeAllListeners()}catch(e){(0,k.logError)("Error while destroying stream",e)}})),this.terminateJob(t),this.jobs.delete(e),g(this,s,"m",m).call(this,e),(0,P.log)(`Job "${e}" terminated.`)}async initJob(e,t){const{streams:n,worker:s}=await this.initStreams(e,t),r=new v.JsonRpcEngine,i=(0,w.createStreamMiddleware)();(0,I.pipeline)(i.stream,n.command,i.stream,(e=>{e&&(0,k.logError)("Command stream failure.",e)})),r.push(i.middleware);const a={id:e,streams:n,rpcEngine:r,worker:s};return this.jobs.set(e,a),a}async initStreams(e,t){const n=await(0,j.withTimeout)(this.initEnvStream(e),t);if(n===j.hasTimedOut)throw this.terminateJob({id:e}),new Error("The Snaps execution environment failed to start.");const{worker:s,stream:r}=n,i=x(r,`Job: "${e}"`),f=i.createStream(k.SNAP_STREAM_NAMES.COMMAND),c=t=>{if(!(0,_.isJsonRpcNotification)(t))return;const n=g(this,a,"f").get(e);"OutboundRequest"===t.method?g(this,o,"f").publish("ExecutionService:outboundRequest",n):"OutboundResponse"===t.method?g(this,o,"f").publish("ExecutionService:outboundResponse",n):"UnhandledError"===t.method?(0,_.isObject)(t.params)&&t.params.error?(g(this,o,"f").publish("ExecutionService:unhandledError",n,t.params.error),f.removeListener("data",c)):(0,k.logError)(new Error(`Received malformed "${t.method}" command stream notification.`)):(0,k.logError)(new Error(`Received unexpected command stream notification "${t.method}".`))};f.on("data",c);const l=i.createStream(k.SNAP_STREAM_NAMES.JSON_RPC);return{streams:{command:f,rpc:l,_connection:r},worker:s}}async terminateSnap(e){const t=g(this,i,"f").get(e);t&&await this.terminate(t)}async terminateAllSnaps(){await Promise.all([...this.jobs.keys()].map((async e=>this.terminate(e)))),g(this,r,"f").clear()}getRpcRequestHandler(e){return g(this,r,"f").get(e)}async executeSnap({snapId:e,sourceCode:t,endowments:n}){if(g(this,i,"f").has(e))throw new Error(`Snap "${e}" is already being executed.`);const r=(0,E.nanoid)(),a=new C.Timer(g(this,f,"f")),o=await this.initJob(r,a);if(g(this,s,"m",h).call(this,e,o.id),g(this,u,"f")){if(await(0,j.withTimeout)(this.command(o.id,{jsonrpc:"2.0",method:"ping",id:(0,E.nanoid)()}),g(this,c,"f"))===j.hasTimedOut)throw new Error("The Snaps execution environment failed to start.")}const l=o.streams.rpc;this.setupSnapProvider(e,l);const d=a.remaining,m={jsonrpc:"2.0",method:"executeSnap",params:{snapId:e,sourceCode:t,endowments:n},id:(0,E.nanoid)()};(0,_.assertIsJsonRpcRequest)(m);const b=await(0,j.withTimeout)(this.command(o.id,m),d);if(b===j.hasTimedOut)throw new Error(`${e} failed to start.`);return g(this,s,"m",p).call(this,e,o.id),b}async command(e,t){const n=this.jobs.get(e);if(!n)throw new Error(`Job with id "${e}" not found.`);(0,P.log)("Parent: Sending Command",t);const s=await n.rpcEngine.handle(t);if((0,_.isJsonRpcFailure)(s))throw new S.JsonRpcError(s.error.code,s.error.message,s.error.data);return s.result}async handleRpcRequest(e,t){const n=this.getRpcRequestHandler(e);if(!n)throw new Error(`Snap execution service returned no RPC handler for running snap "${e}".`);return n(t)}},r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,f=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,s=new WeakSet,d=function(e){g(this,r,"f").delete(e)},p=function(e,t){g(this,r,"f").set(e,(async({origin:n,handler:s,request:r})=>await this.command(t,{id:(0,E.nanoid)(),jsonrpc:"2.0",method:"snapRpc",params:{origin:n,handler:s,request:r,target:e}})))},h=function(e,t){g(this,i,"f").set(e,t),g(this,a,"f").set(t,e)},m=function(e){const t=g(this,a,"f").get(e);if(!t)throw new Error(`job: "${e}" has no mapped snap.`);g(this,a,"f").delete(e),g(this,i,"f").delete(t),g(this,s,"m",d).call(this,t)},n.setupMultiplex=x}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/AbstractExecutionService.cjs"}],[2373,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/ExecutionService.cjs"}],[2374,{"@metamask/post-message-stream":2134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},f=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyPostMessageStream=void 0;const c=e("@metamask/post-message-stream");class l extends c.BasePostMessageStream{constructor({stream:e,jobId:t}){super(),s.add(this),r.set(this,void 0),i.set(this,void 0),o(this,r,e,"f"),o(this,i,t,"f"),f(this,r,"f").on("data",f(this,s,"m",a).bind(this))}_postMessage(e){f(this,r,"f").write({jobId:f(this,i,"f"),data:e})}}n.ProxyPostMessageStream=l,r=new WeakMap,i=new WeakMap,s=new WeakSet,a=function(e){e.jobId===f(this,i,"f")&&this.push(e.data)}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/ProxyPostMessageStream.cjs"}],[2375,{"../AbstractExecutionService.cjs":2372,"@metamask/post-message-stream":2134,"@metamask/snaps-utils":2596},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.IframeExecutionService=void 0;const s=e("@metamask/post-message-stream"),r=e("@metamask/snaps-utils"),i=e("../AbstractExecutionService.cjs");class a extends i.AbstractExecutionService{constructor({iframeUrl:e,messenger:t,setupSnapProvider:n}){super({messenger:t,setupSnapProvider:n}),this.iframeUrl=e}terminateJob(e){document.getElementById(e.id)?.remove()}async initEnvStream(e){const t=await(0,r.createWindow)({uri:this.iframeUrl.toString(),id:e});return{worker:t,stream:new s.WindowPostMessageStream({name:"parent",target:"child",targetWindow:t,targetOrigin:"*"})}}}n.IframeExecutionService=a}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/iframe/IframeExecutionService.cjs"}],[2376,{"./IframeExecutionService.cjs":2375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./IframeExecutionService.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/iframe/index.cjs"}],[2377,{"./AbstractExecutionService.cjs":2372,"./ExecutionService.cjs":2373,"./ProxyPostMessageStream.cjs":2374,"./iframe/index.cjs":2376,"./offscreen/index.cjs":2379,"./webworker/index.cjs":2382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.WebWorkerExecutionService=void 0,r(e("./AbstractExecutionService.cjs"),n),r(e("./ExecutionService.cjs"),n),r(e("./ProxyPostMessageStream.cjs"),n),r(e("./iframe/index.cjs"),n),r(e("./offscreen/index.cjs"),n);var i=e("./webworker/index.cjs");Object.defineProperty(n,"WebWorkerExecutionService",{enumerable:!0,get:function(){return i.WebWorkerExecutionService}})}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/index.cjs"}],[2378,{"../proxy/ProxyExecutionService.cjs":2380,"@metamask/post-message-stream":2134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.OffscreenExecutionService=void 0;const a=e("@metamask/post-message-stream"),o=e("../proxy/ProxyExecutionService.cjs");class f extends o.ProxyExecutionService{constructor({messenger:e,setupSnapProvider:t,offscreenPromise:n}){super({messenger:e,setupSnapProvider:t,stream:new a.BrowserRuntimePostMessageStream({name:"parent",target:"child"})}),s.set(this,void 0),r(this,s,n,"f")}async initEnvStream(e){return await i(this,s,"f"),await super.initEnvStream(e)}}n.OffscreenExecutionService=f,s=new WeakMap}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/offscreen/OffscreenExecutionService.cjs"}],[2379,{"./OffscreenExecutionService.cjs":2378},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./OffscreenExecutionService.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/offscreen/index.cjs"}],[238,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=r,function(e){const t=(null==e?void 0:e.TransactionController)||{},n=(null==t?void 0:t.transactions)||{};if((0,s.isEmpty)(n))return;const r=Object.keys(n).reduce(((e,t)=>{const s=n[t];return null!=s&&s.nonceDetails&&delete s.nonceDetails,{...e,[t]:s}}),{});e.TransactionController={...t,transactions:r}}(t.data),t},n.version=void 0;var s=e("lodash");const r=n.version=97}}},{package:"$root$",file:"app/scripts/migrations/097.ts"}],[2380,{"../AbstractExecutionService.cjs":2372,"../ProxyPostMessageStream.cjs":2374,nanoid:2399},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyExecutionService=void 0;const a=e("nanoid"),o=e("../AbstractExecutionService.cjs"),f=e("../ProxyPostMessageStream.cjs");class c extends o.AbstractExecutionService{constructor({stream:e,messenger:t,setupSnapProvider:n}){super({messenger:t,setupSnapProvider:n,usePing:!1}),s.set(this,void 0),r(this,s,e,"f")}async terminateJob(e){i(this,s,"f").write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:(0,a.nanoid)()}})}async initEnvStream(e){const t=new f.ProxyPostMessageStream({stream:i(this,s,"f"),jobId:e});return await new Promise((e=>{t.once("data",e),t.write({name:"command",data:{jsonrpc:"2.0",method:"ping",id:(0,a.nanoid)()}})})),{worker:e,stream:t}}}n.ProxyExecutionService=c,s=new WeakMap}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/proxy/ProxyExecutionService.cjs"}],[2381,{"../AbstractExecutionService.cjs":2372,"../ProxyPostMessageStream.cjs":2374,"@metamask/post-message-stream":2134,"@metamask/snaps-utils":2596,"@metamask/utils":2765,nanoid:2399},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.WebWorkerExecutionService=n.WORKER_POOL_ID=void 0;const o=e("@metamask/post-message-stream"),f=e("@metamask/snaps-utils"),c=e("@metamask/utils"),l=e("nanoid"),u=e("../AbstractExecutionService.cjs"),d=e("../ProxyPostMessageStream.cjs");n.WORKER_POOL_ID="snaps-worker-pool";class p extends u.AbstractExecutionService{constructor({documentUrl:e,messenger:t,setupSnapProvider:n}){super({messenger:t,setupSnapProvider:n}),s.set(this,void 0),r.set(this,void 0),i(this,s,e,"f")}async terminateJob(e){(0,c.assert)(a(this,r,"f"),"Runtime stream not initialized."),a(this,r,"f").write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:(0,l.nanoid)()}})}async initEnvStream(e){await this.createDocument(),(0,c.assert)(a(this,r,"f"),"Runtime stream not initialized.");return{worker:e,stream:new d.ProxyPostMessageStream({stream:a(this,r,"f"),jobId:e})}}async createDocument(){if(document.getElementById(n.WORKER_POOL_ID))return;const e=await(0,f.createWindow)({uri:a(this,s,"f").href,id:n.WORKER_POOL_ID,sandbox:!1});i(this,r,new o.WindowPostMessageStream({name:"parent",target:"child",targetWindow:e,targetOrigin:"*"}),"f")}}n.WebWorkerExecutionService=p,s=new WeakMap,r=new WeakMap}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/webworker/WebWorkerExecutionService.cjs"}],[2382,{"./WebWorkerExecutionService.cjs":2381},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./WebWorkerExecutionService.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/services/webworker/index.cjs"}],[2383,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RequestQueue=void 0;n.RequestQueue=class{constructor(e){this.maxQueueSize=e,this.queueSizes=new Map}increment(e){const t=this.queueSizes.get(e)??0;if(t>=this.maxQueueSize)throw new Error("Maximum number of requests reached. Try again later.");this.queueSizes.set(e,t+1)}decrement(e){const t=this.queueSizes.get(e)??0;if(0===t)throw new Error(`Cannot decrement, ${e} does not have any outstanding requests.`);this.queueSizes.set(e,t-1)}get(e){return this.queueSizes.get(e)??0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/RequestQueue.cjs"}],[2384,{"../fsm.cjs":2364,"../logging.cjs":2371,"../utils.cjs":2397,"./RequestQueue.cjs":2383,"./Timer.cjs":2385,"./constants.cjs":2386,"./location/index.cjs":2389,"./registry/index.cjs":2393,"@metamask/base-controller":1353,"@metamask/permission-controller":2089,"@metamask/rpc-errors":2262,"@metamask/snaps-rpc-methods":2428,"@metamask/snaps-sdk":2467,"@metamask/snaps-utils":2596,"@metamask/utils":2765,"@xstate/fsm":3196,nanoid:2399,semver:4939},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o,f,c,l,u,d,p,h,m,b,g,y,v,w,T,S,k,_,E,I,P,C,j,A,x,O,N,M,R,B,L,D,F,U,$,G,H,V,J,z,q,K,W,Y,X,Z,Q,ee,te,ne,se,re,ie,ae,oe,fe,ce,le,ue,de,pe,he,me,be,ge=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},ye=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},ve=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.SnapController=n.SNAP_APPROVAL_RESULT=n.SNAP_APPROVAL_UPDATE=n.SNAP_APPROVAL_INSTALL=n.controllerName=void 0;const we=e("@metamask/base-controller"),Te=e("@metamask/permission-controller"),Se=e("@metamask/rpc-errors"),ke=e("@metamask/snaps-rpc-methods"),_e=e("@metamask/snaps-sdk"),Ee=e("@metamask/snaps-utils"),Ie=e("@metamask/utils"),Pe=e("@xstate/fsm"),Ce=e("nanoid"),je=ve(e("semver")),Ae=e("../fsm.cjs"),xe=e("../logging.cjs"),Oe=e("../utils.cjs"),Ne=e("./constants.cjs"),Me=e("./location/index.cjs"),Re=e("./registry/index.cjs"),Be=e("./RequestQueue.cjs"),Le=e("./Timer.cjs");n.controllerName="SnapController",n.SNAP_APPROVAL_INSTALL="wallet_installSnap",n.SNAP_APPROVAL_UPDATE="wallet_updateSnap",n.SNAP_APPROVAL_RESULT="wallet_installSnapResult";const De=new Set(["initialPermissions","id","version","enabled","blocked"]),Fe={snaps:{},snapStates:{},unencryptedSnapStates:{}};function Ue(e){return Object.keys(e).reduce(((t,n)=>(De.has(n)&&(t[n]=e[n]),t)),{})}class $e extends we.BaseController{constructor({closeAllConnections:e,messenger:t,state:n,dynamicPermissions:E=["eth_accounts"],environmentEndowmentPermissions:I=[],excludedPermissions:P={},idleTimeCheckInterval:C=(0,Ie.inMilliseconds)(5,Ie.Duration.Second),maxIdleTime:j=(0,Ie.inMilliseconds)(30,Ie.Duration.Second),maxRequestTime:A=(0,Ie.inMilliseconds)(60,Ie.Duration.Second),fetchFunction:x=globalThis.fetch.bind(undefined),featureFlags:O={},detectSnapLocation:N=Me.detectSnapLocation,preinstalledSnaps:M=null,encryptor:R,getMnemonic:B,getFeatureFlags:L=(()=>({}))}){super({messenger:t,metadata:{snapStates:{persist:!0,anonymous:!1},unencryptedSnapStates:{persist:!0,anonymous:!1},snaps:{persist:e=>Object.values(e).filter((e=>e.status!==Ee.SnapStatus.Installing)).map((e=>({...e,status:Ee.SnapStatus.Stopped}))).reduce(((e,t)=>(e[t.id]=t,e)),{}),anonymous:!1}},name:"SnapController",state:{...Fe,...n}}),s.add(this),r.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),f.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,void 0),p.set(this,void 0),h.set(this,void 0),m.set(this,void 0),b.set(this,void 0),g.set(this,void 0),y.set(this,void 0),v.set(this,void 0),w.set(this,void 0),ge(this,r,e,"f"),ge(this,i,E,"f"),ge(this,a,I,"f"),ge(this,o,P,"f"),ge(this,f,O,"f"),ge(this,c,x,"f"),ge(this,l,C,"f"),ge(this,u,j,"f"),this.maxRequestTime=A,ge(this,m,N,"f"),ge(this,d,R,"f"),ge(this,p,B,"f"),ge(this,h,L,"f"),ge(this,w,M,"f"),this._onUnhandledSnapError=this._onUnhandledSnapError.bind(this),this._onOutboundRequest=this._onOutboundRequest.bind(this),this._onOutboundResponse=this._onOutboundResponse.bind(this),ge(this,g,new Map,"f"),ge(this,b,new Map,"f"),ye(this,s,"m",_).call(this),this.messagingSystem.subscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.subscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.subscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.subscribe("SnapController:snapInstalled",(({id:e},t)=>{ye(this,s,"m",be).call(this,t,e,Ee.HandlerType.OnInstall).catch((t=>{(0,Ee.logError)(`Error when calling \`onInstall\` lifecycle hook for snap "${e}": ${(0,_e.getErrorMessage)(t)}`)}))})),this.messagingSystem.subscribe("SnapController:snapUpdated",(({id:e},t,n)=>{ye(this,s,"m",be).call(this,n,e,Ee.HandlerType.OnUpdate).catch((t=>{(0,Ee.logError)(`Error when calling \`onUpdate\` lifecycle hook for snap "${e}": ${(0,_e.getErrorMessage)(t)}`)}))})),ye(this,s,"m",T).call(this),ye(this,s,"m",S).call(this),ye(this,w,"f")&&ye(this,s,"m",k).call(this,ye(this,w,"f")),Object.values(this.state?.snaps??{}).forEach((e=>ye(this,s,"m",le).call(this,e.id)))}async updateBlockedSnaps(){ye(this,s,"m",j).call(this),await this.messagingSystem.call("SnapsRegistry:update");const e=await this.messagingSystem.call("SnapsRegistry:get",Object.values(this.state.snaps).reduce(((e,t)=>(e[t.id]={version:t.version,checksum:t.manifest.source.shasum},e)),{}));await Promise.all(Object.entries(e).map((async([e,{status:t,reason:n}])=>t===Re.SnapsRegistryStatus.Blocked?ye(this,s,"m",E).call(this,e,n):ye(this,s,"m",I).call(this,e))))}_onUnhandledSnapError(e,t){this.stopSnap(e,Ee.SnapStatusEvents.Crash).catch((e=>{(0,Ee.logError)(e)}))}_onOutboundRequest(e){const t=ye(this,s,"m",ce).call(this,e);t.pendingInboundRequests.filter((e=>"running"===e.timer.status)).forEach((e=>e.timer.pause())),t.pendingOutboundRequests+=1}_onOutboundResponse(e){const t=ye(this,s,"m",ce).call(this,e);t.pendingOutboundRequests-=1,0===t.pendingOutboundRequests&&t.pendingInboundRequests.filter((e=>"paused"===e.timer.status)).forEach((e=>e.timer.resume()))}async startSnap(e){ye(this,s,"m",j).call(this);const t=this.state.snaps[e];if(!1===t.enabled)throw new Error(`Snap "${e}" is disabled.`);await ye(this,s,"m",J).call(this,{snapId:e,sourceCode:t.sourceCode})}enableSnap(e){if(this.getExpect(e),this.state.snaps[e].blocked)throw new Error(`Snap "${e}" is blocked and cannot be enabled.`);this.update((t=>{t.snaps[e].enabled=!0})),this.messagingSystem.publish("SnapController:snapEnabled",this.getTruncatedExpect(e))}async disableSnap(e){if(!this.has(e))throw new Error(`Snap "${e}" not found.`);this.update((t=>{t.snaps[e].enabled=!1})),this.isRunning(e)&&await this.stopSnap(e,Ee.SnapStatusEvents.Stop),this.messagingSystem.publish("SnapController:snapDisabled",this.getTruncatedExpect(e))}async stopSnap(e,t=Ee.SnapStatusEvents.Stop){const n=ye(this,s,"m",fe).call(this,e);if(!n)throw new Error(`The snap "${e}" is not running.`);if(!n.stopping){n.stopping=!0;try{this.isRunning(e)&&(ye(this,r,"f")?.call(this,e),await ye(this,s,"m",O).call(this,e))}finally{n.lastRequest=null,n.pendingInboundRequests=[],n.pendingOutboundRequests=0,n.stopping=!1,this.isRunning(e)&&ye(this,s,"m",x).call(this,e,t)}}}async stopAllSnaps(e=Ee.SnapStatusEvents.Stop){const t=Object.values(this.state.snaps).filter((e=>this.isRunning(e.id))).map((async t=>this.stopSnap(t.id,e)));await Promise.allSettled(t)}isRunning(e){return"running"===this.getExpect(e).status}has(e){return Boolean(this.get(e))}get(e){return this.state.snaps[e]}getExpect(e){const t=this.get(e);return(0,Ie.assert)(t!==undefined,new Error(`Snap "${e}" not found.`)),t}getTruncated(e){const t=this.get(e);return t?Ue(t):null}getTruncatedExpect(e){return Ue(this.getExpect(e))}async updateSnapState(e,t,n){if(n){const n=await ye(this,s,"m",B).call(this,e,t);this.update((t=>{t.snapStates[e]=n}))}else this.update((n=>{n.unencryptedSnapStates[e]=JSON.stringify(t)}))}clearSnapState(e,t){this.update((n=>{t?n.snapStates[e]=null:n.unencryptedSnapStates[e]=null}))}async getSnapState(e,t){const n=t?this.state.snapStates[e]:this.state.unencryptedSnapStates[e];if(null===n||n===undefined)return null;if(!t)return JSON.parse(n);return await ye(this,s,"m",R).call(this,e,n)}async getSnapFile(e,t,n=_e.AuxiliaryFileEncoding.Base64){const s=this.getExpect(e),r=(0,Ee.normalizeRelative)(t),i=s.auxiliaryFiles?.find((e=>e.path===r))?.value;if(!i)return null;const a=await(0,Ee.encodeAuxiliaryFile)(i,n);return(0,Ie.assert)(a.length<Ee.MAX_FILE_SIZE,`Failed to encode static file to "${n}": Static files must be less than 64 MB when encoded.`),a}async clearState(){const e=Object.keys(this.state.snaps);ye(this,r,"f")&&e.forEach((e=>{ye(this,r,"f")?.call(this,e)})),await this.messagingSystem.call("ExecutionService:terminateAllSnaps"),e.forEach((e=>ye(this,s,"m",U).call(this,e))),this.update((e=>{e.snaps={},e.snapStates={}})),ye(this,b,"f").clear(),ye(this,w,"f")&&(ye(this,s,"m",k).call(this,ye(this,w,"f")),Object.values(this.state?.snaps).forEach((e=>ye(this,s,"m",le).call(this,e.id))))}async removeSnap(e){return this.removeSnaps([e])}async removeSnaps(e){if(!Array.isArray(e))throw new Error("Expected array of snap ids.");e.forEach((e=>{const t=this.getExpect(e);(0,Ie.assert)(!1!==t.removable,`${e} is not removable.`)})),await Promise.all(e.map((async e=>{const t=this.getExpect(e),n=this.getTruncatedExpect(e);await this.disableSnap(e),ye(this,s,"m",U).call(this,e),ye(this,s,"m",F).call(this,e),ye(this,b,"f").delete(e),this.update((t=>{delete t.snaps[e],delete t.snapStates[e],delete t.unencryptedSnapStates[e]})),t.status!==Ee.SnapStatus.Installing&&this.messagingSystem.publish("SnapController:snapUninstalled",n)})))}removeSnapFromSubject(e,t){const n=this.messagingSystem.call("PermissionController:getPermissions",e),s=n?.[ke.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===Ee.SnapCaveatType.SnapIds));if(!s)return;if(Boolean(s.value?.[t])){const n={...s.value};delete n[t],Object.keys(n).length>0?this.messagingSystem.call("PermissionController:updateCaveat",e,ke.WALLET_SNAP_PERMISSION_KEY,Ee.SnapCaveatType.SnapIds,n):this.messagingSystem.call("PermissionController:revokePermissions",{[e]:[ke.WALLET_SNAP_PERMISSION_KEY]})}}revokeDynamicSnapPermissions(e,t){(0,Ie.assert)(t.every((e=>ye(this,i,"f").includes(e))),"Non-dynamic permissions cannot be revoked"),this.messagingSystem.call("PermissionController:revokePermissions",{[e]:t})}incrementActiveReferences(e){ye(this,s,"m",ce).call(this,e).activeReferences+=1}decrementActiveReferences(e){const t=ye(this,s,"m",ce).call(this,e);(0,Ie.assert)(t.activeReferences>0,"SnapController reference management is in an invalid state."),t.activeReferences-=1}getAllSnaps(){return Object.values(this.state.snaps).map(Ue)}getPermittedSnaps(e){const t=this.messagingSystem.call("PermissionController:getPermissions",e)??{},n=t[ke.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===Ee.SnapCaveatType.SnapIds))?.value??{};return Object.keys(n).reduce(((e,t)=>{const n=this.get(t),s=this.getTruncated(t);return s&&n?.status!==Ee.SnapStatus.Installing&&(e[t]=s),e}),{})}async installSnaps(e,t){ye(this,s,"m",j).call(this);const n={},r=Object.keys(t),i=[],a=[];try{for(const[r,{version:o}]of Object.entries(t)){(0,Ee.assertIsValidSnapId)(r);const[t,l]=(0,Ee.resolveVersionRange)(o);if(t)throw Se.rpcErrors.invalidParams(`The "version" field must be a valid SemVer version range if specified. Received: "${o}".`);const u=ye(this,m,"f").call(this,r,{versionRange:l,fetch:ye(this,c,"f"),allowLocal:ye(this,f,"f").allowLocalSnaps,resolveVersion:async e=>ye(this,f,"f").requireAllowlist?await ye(this,s,"m",H).call(this,r,e):e}),d=this.has(r)&&!u.shouldAlwaysReload;if(d&&ye(this,s,"m",me).call(this,r,l)){const e=this.getExpect(r);i.push({snapId:r,oldVersion:e.version});let t=ye(this,s,"m",re).call(this,r);if(t!==undefined)throw new Error("This snap is already being updated.");t=ye(this,s,"m",ie).call(this,r),t.newVersion=l}else d||a.push(r);n[r]=await this.processRequestedSnap(e,r,u,l)}a.forEach((t=>this.messagingSystem.publish("SnapController:snapInstalled",this.getTruncatedExpect(t),e,!1))),i.forEach((({snapId:t,oldVersion:n})=>this.messagingSystem.publish("SnapController:snapUpdated",this.getTruncatedExpect(t),n,e,!1))),r.forEach((e=>ye(this,g,"f").delete(e)))}catch(e){const t=a.filter((e=>this.has(e)));await this.removeSnaps(t);const n=[...ye(this,g,"f").keys()],r=i.map((({snapId:e})=>e)).filter((e=>n.includes(e)));throw await ye(this,s,"m",oe).call(this,r),e}return n}async processRequestedSnap(e,t,r,i){const a=this.getTruncated(t);if(a&&!r.shouldAlwaysReload)return(0,Ie.satisfiesVersionRange)(a.version,i)?a:await this.updateSnap(e,t,r,i,!1);ye(this,s,"m",C).call(this);let o=ye(this,s,"m",$).call(this,{origin:e,snapId:t,type:n.SNAP_APPROVAL_INSTALL});this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!1),a&&this.isRunning(t)&&await this.stopSnap(t,Ee.SnapStatusEvents.Stop),a&&r.shouldAlwaysReload&&ye(this,s,"m",U).call(this,t);try{const{sourceCode:a}=await ye(this,s,"m",V).call(this,{origin:e,id:t,location:r,versionRange:i});await this.authorize(t,o),o=ye(this,s,"m",$).call(this,{origin:e,snapId:t,type:n.SNAP_APPROVAL_RESULT}),await ye(this,s,"m",J).call(this,{snapId:t,sourceCode:a});const f=this.getTruncatedExpect(t);return ye(this,s,"m",G).call(this,o.id,{loading:!1,type:n.SNAP_APPROVAL_INSTALL}),f}catch(r){(0,Ee.logError)(`Error when adding ${t}.`,r);const i=r instanceof Error?r.message:r.toString();throw ye(this,s,"m",G).call(this,o.id,{loading:!1,type:n.SNAP_APPROVAL_INSTALL,error:i}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!1,i),r}}async updateSnap(e,t,r,i=Ee.DEFAULT_REQUESTED_SNAP_VERSION,a=!0){ye(this,s,"m",C).call(this),ye(this,s,"m",j).call(this);const o=this.getExpect(t);if(o.preinstalled)throw new Error("Preinstalled Snaps cannot be manually updated.");if(!(0,Ie.isValidSemVerRange)(i))throw new Error(`Received invalid snap version range: "${i}".`);let f=ye(this,s,"m",$).call(this,{origin:e,snapId:t,type:n.SNAP_APPROVAL_UPDATE});try{this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!0);const c=o.manifest,l=await(0,Oe.fetchSnap)(t,r),{sourceCode:u,manifest:d}=l,p=d.result,h=p.version;if(!(0,Ie.gtVersion)(h,o.version))throw Se.rpcErrors.invalidParams(`Snap "${t}@${o.version}" is already installed. Couldn't update to a version inside requested "${i}" range.`);if(!(0,Ie.satisfiesVersionRange)(h,i))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${h}" which doesn't satisfy requested version range "${i}".`);await ye(this,s,"m",P).call(this,t,{version:h,checksum:p.source.shasum,permissions:p.initialPermissions,platformVersion:p.platformVersion});const m=(0,ke.processSnapPermissions)(p.initialPermissions);ye(this,s,"m",K).call(this,m);const{newPermissions:b,unusedPermissions:g,approvedPermissions:y}=ye(this,s,"m",ue).call(this,t,m),{newConnections:v,unusedConnections:w,approvedConnections:T}=ye(this,s,"m",pe).call(this,t,c.initialConnections??{},p.initialConnections??{});ye(this,s,"m",G).call(this,f.id,{permissions:b,newVersion:p.version,newPermissions:b,approvedPermissions:y,unusedPermissions:g,newConnections:v,unusedConnections:w,approvedConnections:T,loading:!1});const{permissions:S,...k}=await f.promise;f=ye(this,s,"m",$).call(this,{origin:e,snapId:t,type:n.SNAP_APPROVAL_RESULT}),this.isRunning(t)&&await this.stopSnap(t,Ee.SnapStatusEvents.Stop),ye(this,s,"m",x).call(this,t,Ee.SnapStatusEvents.Update),ye(this,s,"m",q).call(this,{origin:e,id:t,files:l,isUpdate:!0}),ye(this,s,"m",he).call(this,{snapId:t,unusedPermissions:g,newPermissions:S,requestData:k}),p.initialConnections&&ye(this,s,"m",L).call(this,t,c.initialConnections??null,p.initialConnections);const _=ye(this,s,"m",re).call(this,t);_!==undefined&&(_.permissions.revoked=g,_.permissions.granted=S,_.permissions.requestData=k);const E=u.toString();(0,Ie.assert)("string"==typeof E&&E.length>0,`Invalid source code for snap "${t}".`);try{await ye(this,s,"m",J).call(this,{snapId:t,sourceCode:E})}catch{throw new Error(`Snap ${t} crashed with updated source code.`)}const I=this.getTruncatedExpect(t);return a&&this.messagingSystem.publish("SnapController:snapUpdated",I,o.version,e,!1),ye(this,s,"m",G).call(this,f.id,{loading:!1,type:n.SNAP_APPROVAL_UPDATE}),I}catch(r){(0,Ee.logError)(`Error when updating ${t},`,r);const i=r instanceof Error?r.message:r.toString();throw ye(this,s,"m",G).call(this,f.id,{loading:!1,error:i,type:n.SNAP_APPROVAL_UPDATE}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!0,i),r}}async getRegistryMetadata(e){return ye(this,s,"m",j).call(this),await this.messagingSystem.call("SnapsRegistry:getMetadata",e)}async authorize(e,t){(0,xe.log)(`Authorizing snap: ${e}`);const n=this.state.snaps[e],{initialPermissions:r,initialConnections:i}=n;try{const a=(0,ke.processSnapPermissions)(r);ye(this,s,"m",K).call(this,a),ye(this,s,"m",G).call(this,t.id,{loading:!1,connections:i??{},permissions:a});const{permissions:o,...f}=await t.promise;ye(this,s,"m",he).call(this,{snapId:e,newPermissions:o,requestData:f}),n.manifest.initialConnections&&ye(this,s,"m",L).call(this,e,null,n.manifest.initialConnections)}finally{ye(this,s,"m",ce).call(this,e).installPromise=null}}destroy(){super.destroy(),ye(this,y,"f")&&clearTimeout(ye(this,y,"f")),this.messagingSystem.unsubscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.unsubscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.unsubscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.clearEventSubscriptions("SnapController:snapInstalled"),this.messagingSystem.clearEventSubscriptions("SnapController:snapUpdated")}async handleRequest({snapId:e,origin:t,handler:n,request:r}){ye(this,s,"m",j).call(this);const i={jsonrpc:"2.0",id:(0,Ce.nanoid)(),...r};(0,Ie.assertIsJsonRpcRequest)(i);const a=ke.handlerEndowments[n];(0,Ie.assert)("string"==typeof a||null===a,"'permissionName' must be either a string or null.");const o=this.messagingSystem.call("PermissionController:getPermissions",e);if(!(null===a||o&&(0,Ie.hasProperty)(o,a)))throw new Error(`Snap "${e}" is not permitted to use "${a}".`);const f=a?o[a]:undefined;if(a===ke.SnapEndowments.Rpc||a===ke.SnapEndowments.Keyring){(0,Ie.assert)(f);const n=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",t),s=a===ke.SnapEndowments.Rpc?(0,ke.getRpcCaveatOrigins)(f):(0,ke.getKeyringCaveatOrigins)(f);if((0,Ie.assert)(s),!(0,Ee.isOriginAllowed)(s,n?.subjectType??Te.SubjectType.Website,t))throw new Error(`Snap "${e}" is not permitted to handle requests from "${t}".`)}const c=ye(this,s,"m",X).call(this,e);if(!c)throw new Error(`Snap RPC message handler not found for snap "${e}".`);return c({origin:t,handler:n,request:i,timeout:ye(this,s,"m",Y).call(this,f)})}}n.SnapController=$e,r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,f=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,b=new WeakMap,g=new WeakMap,y=new WeakMap,v=new WeakMap,w=new WeakMap,s=new WeakSet,T=function(){const e=({snapId:e})=>this.getExpect(e).enabled,t={initial:Ee.SnapStatus.Installing,states:{[Ee.SnapStatus.Installing]:{on:{[Ee.SnapStatusEvents.Start]:{target:Ee.SnapStatus.Running,cond:e}}},[Ee.SnapStatus.Updating]:{on:{[Ee.SnapStatusEvents.Start]:{target:Ee.SnapStatus.Running,cond:e},[Ee.SnapStatusEvents.Stop]:Ee.SnapStatus.Stopped}},[Ee.SnapStatus.Running]:{on:{[Ee.SnapStatusEvents.Stop]:Ee.SnapStatus.Stopped,[Ee.SnapStatusEvents.Crash]:Ee.SnapStatus.Crashed}},[Ee.SnapStatus.Stopped]:{on:{[Ee.SnapStatusEvents.Start]:{target:Ee.SnapStatus.Running,cond:e},[Ee.SnapStatusEvents.Update]:Ee.SnapStatus.Updating}},[Ee.SnapStatus.Crashed]:{on:{[Ee.SnapStatusEvents.Start]:{target:Ee.SnapStatus.Running,cond:e},[Ee.SnapStatusEvents.Update]:Ee.SnapStatus.Updating}}}};ge(this,v,(0,Pe.createMachine)(t),"f"),(0,Ae.validateMachine)(ye(this,v,"f"))},S=function(){this.messagingSystem.registerActionHandler(`${n.controllerName}:clearSnapState`,((...e)=>this.clearSnapState(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:get`,((...e)=>this.get(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:getSnapState`,(async(...e)=>this.getSnapState(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:handleRequest`,(async(...e)=>this.handleRequest(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:has`,((...e)=>this.has(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:updateBlockedSnaps`,(async()=>this.updateBlockedSnaps())),this.messagingSystem.registerActionHandler(`${n.controllerName}:updateSnapState`,(async(...e)=>this.updateSnapState(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:enable`,((...e)=>this.enableSnap(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:disable`,(async(...e)=>this.disableSnap(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:remove`,(async(...e)=>this.removeSnap(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:getPermitted`,((...e)=>this.getPermittedSnaps(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:install`,(async(...e)=>this.installSnaps(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:getAll`,((...e)=>this.getAllSnaps(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:incrementActiveReferences`,((...e)=>this.incrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:decrementActiveReferences`,((...e)=>this.decrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:getRegistryMetadata`,(async(...e)=>this.getRegistryMetadata(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:disconnectOrigin`,((...e)=>this.removeSnapFromSubject(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:revokeDynamicPermissions`,((...e)=>this.revokeDynamicSnapPermissions(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:getFile`,(async(...e)=>this.getSnapFile(...e))),this.messagingSystem.registerActionHandler(`${n.controllerName}:stopAllSnaps`,(async(...e)=>this.stopAllSnaps(...e)))},k=function(e){for(const{snapId:t,manifest:n,files:r,removable:i,hidden:a,hideSnapBranding:o}of e){const e=this.get(t),f=e!==undefined,c=f&&(0,Ie.gtVersion)(n.version,e.version);if(f&&(!c||!0!==e.preinstalled))continue;const l=new Ee.VirtualFile({path:Ee.NpmSnapFileNames.Manifest,value:JSON.stringify(n),result:n}),u=r.map((({path:e,value:t})=>new Ee.VirtualFile({value:t,path:e}))),{filePath:d,iconPath:p}=n.source.location.npm,h=u.find((e=>e.path===d)),m=p?u.find((e=>e.path===p)):undefined;(0,Ie.assert)(h,"Source code not provided for preinstalled snap."),(0,Ie.assert)(!p||p&&m,"Icon not provided for preinstalled snap."),(0,Ie.assert)(n.source.files===undefined,"Auxiliary files are not currently supported for preinstalled snaps.");const b=n.source.locales?.map((e=>u.find((t=>t.path===e))))??[],g=(0,Ee.getValidatedLocalizationFiles)(b.filter(Boolean));(0,Ie.assert)(b.length===g.length,"Missing localization files for preinstalled snap.");const y={manifest:l,sourceCode:h,svgIcon:m,auxiliaryFiles:[],localizationFiles:g};ye(this,s,"m",q).call(this,{id:t,origin:"metamask",files:y,removable:i,hidden:a,hideSnapBranding:o,preinstalled:!0});const v=(0,ke.processSnapPermissions)(n.initialPermissions);ye(this,s,"m",K).call(this,v);const{newPermissions:w,unusedPermissions:T}=ye(this,s,"m",ue).call(this,t,v);ye(this,s,"m",he).call(this,{snapId:t,newPermissions:w,unusedPermissions:T}),n.initialConnections&&ye(this,s,"m",L).call(this,t,e?.initialConnections??null,n.initialConnections),this.update((e=>{e.snaps[t].status=Ee.SnapStatus.Stopped})),c?this.messagingSystem.publish("SnapController:snapUpdated",this.getTruncatedExpect(t),e.version,"metamask",!0):this.messagingSystem.publish("SnapController:snapInstalled",this.getTruncatedExpect(t),"metamask",!0)}},_=function e(){ge(this,y,setTimeout((()=>{ye(this,s,"m",A).call(this).catch((e=>{(0,Ee.logError)(e)})),ye(this,s,"m",e).call(this)}),ye(this,l,"f")),"f")},E=async function(e,t){if(this.has(e)){try{this.update((n=>{n.snaps[e].blocked=!0,n.snaps[e].blockInformation=t})),await this.disableSnap(e)}catch(t){(0,Ee.logError)(`Encountered error when stopping blocked snap "${e}".`,t)}this.messagingSystem.publish(`${n.controllerName}:snapBlocked`,e,t)}},I=function(e){this.has(e)&&this.state.snaps[e].blocked&&(this.update((t=>{t.snaps[e].blocked=!1,delete t.snaps[e].blockInformation})),this.messagingSystem.publish(`${n.controllerName}:snapUnblocked`,e))},P=async function(e,{platformVersion:t,...n}){const r=(await this.messagingSystem.call("SnapsRegistry:get",{[e]:n}))[e];if(r.status===Re.SnapsRegistryStatus.Blocked)throw new Error(`Cannot install version "${n.version}" of snap "${e}": The version is blocked. ${r.reason?.explanation??""}`);const i=Object.keys(n.permissions).some((e=>!Ne.ALLOWED_PERMISSIONS.includes(e)));if(ye(this,f,"f").requireAllowlist&&i&&r.status!==Re.SnapsRegistryStatus.Verified)throw new Error(`Cannot install version "${n.version}" of snap "${e}": ${r.status===Re.SnapsRegistryStatus.Unavailable?"The registry is temporarily unavailable.":"The snap is not on the allowlist."}`);ye(this,s,"m",W).call(this,e,t)},C=function(){(0,Ie.assert)(!0!==ye(this,f,"f").disableSnapInstallation,"Installing Snaps is currently disabled in this version of MetaMask.")},j=function(){const e=ye(this,h,"f").call(this);(0,Ie.assert)(!0!==e.disableSnaps,"The Snaps platform requires basic functionality to be used. Enable basic functionality in the settings to use the Snaps platform.")},A=async function(){const e=[...ye(this,b,"f").entries()];return Promise.all(e.filter((([e,t])=>0===t.activeReferences&&0===t.pendingInboundRequests.length&&t.lastRequest&&ye(this,u,"f")&&(0,Ie.timeSince)(t.lastRequest)>ye(this,u,"f"))).map((async([e])=>this.stopSnap(e,Ee.SnapStatusEvents.Stop))))},x=function(e,t){const{interpreter:n}=ye(this,s,"m",ce).call(this,e);n.send(t),this.update((t=>{t.snaps[e].status=n.state.value}))},O=async function(e){await this.messagingSystem.call("ExecutionService:terminateSnap",e),await new Promise((e=>setTimeout(e,1)));ye(this,s,"m",ce).call(this,e).pendingInboundRequests.filter((e=>"finished"!==e.timer.status)).forEach((e=>e.timer.finish())),await new Promise((e=>setTimeout(e,1))),this.messagingSystem.publish("SnapController:snapTerminated",this.getTruncatedExpect(e))},N=async function({snapId:e,salt:t,useCache:n,keyMetadata:r}){const i=ye(this,s,"m",ce).call(this,e);if(i.encryptionKey&&i.encryptionSalt&&n)return{key:await ye(this,d,"f").importKey(i.encryptionKey),salt:i.encryptionSalt};const a=t??ye(this,d,"f").generateSalt(),o=await ye(this,p,"f").call(this),f=await(0,ke.getEncryptionEntropy)({snapId:e,mnemonicPhrase:o}),c=await ye(this,d,"f").keyFromPassword(f,a,!0,r),l=await ye(this,d,"f").exportKey(c);return n&&(i.encryptionKey=l,i.encryptionSalt=a),{key:c,salt:a}},M=function(e){const t=ye(this,s,"m",ce).call(this,e);return null!==t.encryptionKey&&null!==t.encryptionSalt},R=async function(e,t){try{const n=JSON.parse(t),{salt:r,keyMetadata:i}=n,a=ye(this,s,"m",M).call(this,e)||ye(this,d,"f").isVaultUpdated(t),{key:o}=await ye(this,s,"m",N).call(this,{snapId:e,salt:r,useCache:a,keyMetadata:i??Ne.LEGACY_ENCRYPTION_KEY_DERIVATION_OPTIONS});return await ye(this,d,"f").decryptWithKey(o,n)}catch{throw Se.rpcErrors.internal({message:"Failed to decrypt snap state, the state must be corrupted."})}},B=async function(e,t){const{key:n,salt:r}=await ye(this,s,"m",N).call(this,{snapId:e,useCache:!0}),i=await ye(this,d,"f").encryptWithKey(n,t);return i.salt=r,JSON.stringify(i)},L=function(e,t,n){if(t){const s=(0,Oe.setDiff)(t,n);for(const t of Object.keys(s))this.removeSnapFromSubject(t,e)}for(const t of Object.keys(n))ye(this,s,"m",D).call(this,t,e)},D=function(e,t){const n=this.messagingSystem.call("PermissionController:getPermissions",e),s=n?.[ke.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===Ee.SnapCaveatType.SnapIds));if(Boolean(s?.value?.[t]))return;if(s)return void this.messagingSystem.call("PermissionController:updateCaveat",e,ke.WALLET_SNAP_PERMISSION_KEY,Ee.SnapCaveatType.SnapIds,{...s.value,[t]:{}});const r={[ke.WALLET_SNAP_PERMISSION_KEY]:{caveats:[{type:Ee.SnapCaveatType.SnapIds,value:{[t]:{}}}]}};this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:r,subject:{origin:e}})},F=function(e){const t=this.messagingSystem.call("PermissionController:getSubjectNames");for(const n of t)this.removeSnapFromSubject(n,e)},U=function(e){this.messagingSystem.call("PermissionController:hasPermissions",e)&&this.messagingSystem.call("PermissionController:revokeAllPermissions",e)},$=function({origin:e,snapId:t,type:n}){const s=(0,Ce.nanoid)();return{id:s,promise:this.messagingSystem.call("ApprovalController:addRequest",{origin:e,id:s,type:n,requestData:{metadata:{id:s,origin:t,dappOrigin:e},snapId:t},requestState:{loading:!0}},!0)}},G=function(e,t){try{this.messagingSystem.call("ApprovalController:updateRequestState",{id:e,requestState:t})}catch{}},H=async function(e,t){return await this.messagingSystem.call("SnapsRegistry:resolveVersion",e,t)},V=async function(e){const{id:t,location:n,versionRange:r}=e;ye(this,s,"m",le).call(this,t);const i=ye(this,s,"m",ce).call(this,t);i.installPromise||((0,xe.log)(`Adding snap: ${t}`),i.installPromise=(async()=>{const i=await(0,Oe.fetchSnap)(t,n),a=i.manifest.result;if(!(0,Ie.satisfiesVersionRange)(a.version,r))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${a.version}" which doesn't satisfy requested version range "${r}".`);return await ye(this,s,"m",P).call(this,t,{version:a.version,checksum:a.source.shasum,permissions:a.initialPermissions,platformVersion:a.platformVersion}),ye(this,s,"m",q).call(this,{...e,files:i,id:t})})());try{return await i.installPromise}catch(e){throw i.installPromise=null,e}},J=async function(e){const{snapId:t}=e;if(this.isRunning(t))throw new Error(`Snap "${t}" is already started.`);try{const n=ye(this,s,"m",ce).call(this,t),r=await this.messagingSystem.call("ExecutionService:executeSnap",{...e,endowments:await ye(this,s,"m",z).call(this,t)});return ye(this,s,"m",x).call(this,t,Ee.SnapStatusEvents.Start),n.lastRequest=Date.now(),r}catch(e){throw await ye(this,s,"m",O).call(this,t),e}},z=async function(e){let t=[];for(const n of ye(this,a,"f"))if(this.messagingSystem.call("PermissionController:hasPermission",e,n)){const s=await this.messagingSystem.call("PermissionController:getEndowments",e,n);if(s){if(!Array.isArray(s)||s.some((e=>"string"!=typeof e)))throw new Error("Expected an array of string endowment names.");t=t.concat(s)}}const n=[...new Set([...Ee.DEFAULT_ENDOWMENTS,...t])];return n.length<Ee.DEFAULT_ENDOWMENTS.length+t.length&&(0,Ee.logError)(`Duplicate endowments found for ${e}. Default endowments should not be requested.`,t),n},q=function(e){const{id:t,origin:n,files:r,isUpdate:i=!1,removable:a,preinstalled:o,hidden:f,hideSnapBranding:c}=e,{manifest:l,sourceCode:u,svgIcon:d,auxiliaryFiles:p,localizationFiles:h}=r;(0,Ee.assertIsSnapManifest)(l.result);const{version:m}=l.result,b=u.toString();(0,Ie.assert)("string"==typeof b&&b.length>0,`Invalid source code for snap "${t}".`);const g=p.map((e=>((0,Ie.assert)("string"==typeof e.data.base64),{path:e.path,value:e.data.base64}))),y=this.state.snaps[t],w=[...y?.versionHistory??[],{version:m,date:Date.now(),origin:n}],T=h.map((e=>e.result)),S={...y,blocked:!1,enabled:!0,removable:a,preinstalled:o,hidden:f,hideSnapBranding:c,id:t,initialConnections:l.result.initialConnections,initialPermissions:l.result.initialPermissions,manifest:l.result,status:ye(this,v,"f").config.initial,sourceCode:b,version:m,versionHistory:w,auxiliaryFiles:g,localizationFiles:T};delete S.blockInformation;const{inversePatches:k}=this.update((e=>{e.snaps[t]=S}));if(i){const e=ye(this,s,"m",re).call(this,t);e!==undefined&&(e.statePatches=k)}const{proposedName:_}=(0,Ee.getLocalizedSnapManifest)(l.result,"en",T);return this.messagingSystem.call("SubjectMetadataController:addSubjectMetadata",{subjectType:Te.SubjectType.Snap,name:_,origin:S.id,version:m,svgIcon:d?.toString()??null}),{...S,sourceCode:b}},K=function(e){const t=Object.keys(e),n=Array.from(new Set(Object.values(ke.handlerEndowments)));(0,Ie.assert)(t.some((e=>n.includes(e))),`A snap must request at least one of the following permissions: ${n.filter((e=>null!==e)).join(", ")}.`);const s=t.reduce(((e,t)=>((0,Ie.hasProperty)(ye(this,o,"f"),t)&&e.push(ye(this,o,"f")[t]),e)),[]);(0,Ie.assert)(0===s.length,`One or more permissions are not allowed:\n${s.join("\n")}`)},W=function(e,t){if(t!==undefined&&je.default.gt(t,(0,Ee.getPlatformVersion)())){const n=`The Snap "${e}" requires platform version "${t}" which is greater than the current platform version "${(0,Ee.getPlatformVersion)()}".`;if(ye(this,f,"f").rejectInvalidPlatformVersion)throw new Error(n);(0,Ee.logWarning)(n)}},Y=function(e){return(0,ke.getMaxRequestTimeCaveat)(e)??this.maxRequestTime},X=function(e){const t=ye(this,s,"m",ce).call(this,e),n=t.rpcHandler;if(n)return n;const r=new Be.RequestQueue(5),i=new Map,a=async({origin:t,handler:n,request:a,timeout:o})=>{if(!1===this.state.snaps[e].enabled)throw new Error(`Snap "${e}" is disabled.`);if(this.state.snaps[e].status===Ee.SnapStatus.Installing)throw new Error(`Snap "${e}" is currently being installed. Please try again later.`);if(!this.isRunning(e)){let n=i.get(e);if(n){if(r.get(t)>=r.maxQueueSize)throw new Error("Exceeds maximum number of requests waiting to be resolved, please try again.")}else n=this.startSnap(e),i.set(e,n);r.increment(t);try{await n}finally{r.decrement(t),i.get(e)===n&&i.delete(e)}}const f=new Le.Timer(o);ye(this,s,"m",ne).call(this,e,a.id,f);const c=this.messagingSystem.call("ExecutionService:handleRpcRequest",e,{origin:t,handler:n,request:a});try{const t=await(0,Oe.withTimeout)(c,f);if(t===Oe.hasTimedOut)throw new Error(`${e} failed to respond to the request in time.`);await ye(this,s,"m",te).call(this,e,n,t);const r=await ye(this,s,"m",ee).call(this,e,n,t);return ye(this,s,"m",se).call(this,e,a.id),r}catch(t){ye(this,s,"m",se).call(this,e,a.id);const[n,r]=(0,Ee.unwrapError)(t);throw r||await this.stopSnap(e,Ee.SnapStatusEvents.Crash),n}};return t.rpcHandler=a,a},Z=async function(e,t,n){return this.messagingSystem.call("SnapInterfaceController:createInterface",e,t,undefined,n)},Q=function(e,t){(0,Ie.assert)(this.messagingSystem.call("SnapInterfaceController:getInterface",e,t))},ee=async function(e,t,n){switch(t){case Ee.HandlerType.OnTransaction:case Ee.HandlerType.OnSignature:case Ee.HandlerType.OnHomePage:{const t=n;if(t&&(0,Ie.hasProperty)(t,"content")){const{content:n,...r}=t;return{...r,id:await ye(this,s,"m",Z).call(this,e,n)}}return n}default:return n}},te=async function(e,t,n){switch(t){case Ee.HandlerType.OnTransaction:(0,Ie.assertStruct)(n,Ee.OnTransactionResponseStruct),n&&(0,Ie.hasProperty)(n,"id")&&ye(this,s,"m",Q).call(this,e,n.id);break;case Ee.HandlerType.OnSignature:(0,Ie.assertStruct)(n,Ee.OnSignatureResponseStruct),n&&(0,Ie.hasProperty)(n,"id")&&ye(this,s,"m",Q).call(this,e,n.id);break;case Ee.HandlerType.OnHomePage:(0,Ie.assertStruct)(n,Ee.OnHomePageResponseStruct),n&&(0,Ie.hasProperty)(n,"id")&&ye(this,s,"m",Q).call(this,e,n.id);break;case Ee.HandlerType.OnNameLookup:(0,Ie.assertStruct)(n,Ee.OnNameLookupResponseStruct)}},ne=function(e,t,n){const r=ye(this,s,"m",ce).call(this,e);r.pendingInboundRequests.push({requestId:t,timer:n}),r.lastRequest=null},se=function(e,t){const n=ye(this,s,"m",ce).call(this,e);n.pendingInboundRequests=n.pendingInboundRequests.filter((e=>e.requestId!==t)),0===n.pendingInboundRequests.length&&(n.lastRequest=Date.now())},re=function(e){return ye(this,g,"f").get(e)},ie=function(e){(0,Ie.assert)(ye(this,g,"f").get(e)===undefined,new Error(`Snap "${e}" rollback snapshot already exists.`)),ye(this,g,"f").set(e,{statePatches:[],permissions:{},newVersion:""});const t=ye(this,g,"f").get(e);return(0,Ie.assert)(t!==undefined,new Error(`Snapshot creation failed for ${e}.`)),t},ae=async function(e){const t=ye(this,s,"m",re).call(this,e);if(!t)throw new Error("A snapshot does not exist for this snap.");await this.stopSnap(e,Ee.SnapStatusEvents.Stop),this.get(e)?.status!==Ee.SnapStatus.Stopped&&ye(this,s,"m",x).call(this,e,Ee.SnapStatusEvents.Stop);const{statePatches:n,permissions:r}=t;n?.length&&this.applyPatches(n),this.get(e)?.status!==Ee.SnapStatus.Stopped&&this.update((t=>{t.snaps[e].status=Ee.SnapStatus.Stopped})),ye(this,s,"m",he).call(this,{snapId:e,unusedPermissions:r.granted,newPermissions:r.revoked,requestData:r.requestData});const i=this.getTruncatedExpect(e);this.messagingSystem.publish("SnapController:snapRolledback",i,t.newVersion),ye(this,g,"f").delete(e)},oe=async function(e){for(const t of e)await ye(this,s,"m",ae).call(this,t)},fe=function(e){return ye(this,b,"f").get(e)},ce=function(e){const t=ye(this,s,"m",fe).call(this,e);return(0,Ie.assert)(t!==undefined,new Error(`Snap "${e}" runtime data not found`)),t},le=function(e){if(ye(this,b,"f").has(e))return;const t=this.get(e),n=(0,Pe.interpret)(ye(this,v,"f"));n.start({context:{snapId:e},value:t?.status??ye(this,v,"f").config.initial}),(0,Ae.forceStrict)(n),ye(this,b,"f").set(e,{lastRequest:null,rpcHandler:null,installPromise:null,encryptionKey:null,encryptionSalt:null,activeReferences:0,pendingInboundRequests:[],pendingOutboundRequests:0,interpreter:n,stopping:!1})},ue=function(e,t){const n=this.messagingSystem.call("PermissionController:getPermissions",e)??{},s=(0,Oe.permissionsDiff)(t,n),r=(0,Oe.permissionsDiff)(n,t);return{newPermissions:s,unusedPermissions:r,approvedPermissions:(0,Oe.permissionsDiff)(n,r)}},de=function(e,t){const n=this.messagingSystem.call("PermissionController:getPermissions",t),s=n?.[ke.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===Ee.SnapCaveatType.SnapIds));return Boolean(s?.value?.[e])},pe=function(e,t,n){const r=Object.keys(t).filter((t=>ye(this,s,"m",de).call(this,e,t))).reduce(((e,n)=>(e[n]=t[n],e)),{}),i=(0,Oe.setDiff)(n,r),a=(0,Oe.setDiff)(r,n);return{newConnections:i,unusedConnections:a,approvedConnections:(0,Oe.setDiff)(r,a)}},he=function({snapId:e,unusedPermissions:t={},newPermissions:n={},requestData:s}){const r=Object.keys(t);(0,Ie.isNonEmptyArray)(r)&&this.messagingSystem.call("PermissionController:revokePermissions",{[e]:r}),(0,Ie.isNonEmptyArray)(Object.keys(n))&&this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:n,subject:{origin:e},requestData:s})},me=function(e,t){const n=this.getExpect(e);return!(0,Ie.satisfiesVersionRange)(n.version,t)&&!(0,Ie.gtRange)(n.version,t)},be=async function(e,t,n){const s=ke.handlerEndowments[n];(0,Ie.assert)(s,"Lifecycle hook must have an endowment.");this.messagingSystem.call("PermissionController:hasPermission",t,s)&&await this.handleRequest({snapId:t,handler:n,origin:e,request:{jsonrpc:"2.0",method:n}})}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/SnapController.cjs"}],[2385,{"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Timer=void 0;const s=e("@metamask/utils");n.Timer=class{constructor(e){(0,s.assert)(!Number.isNaN(e),new TypeError("Can't start a timer with NaN time")),(0,s.assert)(e>=0,new TypeError("Can't start a timer with negative time")),this.state={value:"stopped",remaining:e}}get status(){return this.state.value}get remaining(){return this.state.remaining}cancel(){(0,s.assert)("paused"===this.status||"running"===this.status,new Error("Tried to cancel a not running Timer")),this.onFinish(!1)}finish(){(0,s.assert)("finished"!==this.status,new Error("Tried to finish a finished Timer.")),this.onFinish(!0)}pause(){(0,s.assert)("running"===this.state.value,new Error("Tried to pause a not running Timer"));const{callback:e,start:t,timeout:n,remaining:r}=this.state;n!==undefined&&clearTimeout(n),this.state={value:"paused",callback:e,remaining:r-(Date.now()-t)}}start(e){(0,s.assert)("stopped"===this.state.value,new Error("Tried to start an already running Timer"));const{remaining:t}=this.state;this.state={value:"paused",remaining:t,callback:e},this.resume()}resume(){(0,s.assert)("paused"===this.state.value,new Error("Tried to resume not paused Timer"));const{remaining:e,callback:t}=this.state,n=Date.now();let r;e!==Number.POSITIVE_INFINITY&&(r=setTimeout((()=>this.onFinish(!0)),e)),this.state={value:"running",callback:t,remaining:e,start:n,timeout:r}}onFinish(e){(0,s.assert)("running"===this.state.value||"paused"===this.state.value),"running"===this.state.value&&this.state.timeout!==undefined&&clearTimeout(this.state.timeout);const{callback:t,remaining:n}=this.state;this.state={value:"finished",remaining:"running"===this.state.value?n-(Date.now()-this.state.start):n},e&&t()}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/Timer.cjs"}],[2386,{"@metamask/snaps-rpc-methods":2428},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LEGACY_ENCRYPTION_KEY_DERIVATION_OPTIONS=n.ALLOWED_PERMISSIONS=void 0;const s=e("@metamask/snaps-rpc-methods");n.ALLOWED_PERMISSIONS=Object.freeze(["snap_dialog","snap_manageState","snap_notify","snap_getLocale",s.SnapEndowments.Cronjob,s.SnapEndowments.HomePage,s.SnapEndowments.LifecycleHooks,s.SnapEndowments.EthereumProvider,s.SnapEndowments.TransactionInsight,s.SnapEndowments.SignatureInsight]),n.LEGACY_ENCRYPTION_KEY_DERIVATION_OPTIONS={algorithm:"PBKDF2",params:{iterations:1e4}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/constants.cjs"}],[2387,{"./SnapController.cjs":2384,"./location/index.cjs":2389,"./registry/index.cjs":2393,"./selectors.cjs":2396},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./location/index.cjs"),n),r(e("./SnapController.cjs"),n),r(e("./selectors.cjs"),n),r(e("./registry/index.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/index.cjs"}],[2388,{"@metamask/snaps-utils":2596,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.HttpLocation=void 0;const s=e("@metamask/snaps-utils"),r=e("@metamask/utils");n.HttpLocation=class{constructor(e,t={}){this.cache=new Map,(0,r.assertStruct)(e.toString(),s.HttpSnapIdStruct,"Invalid Snap Id: "),this.fetchFn=t.fetch??globalThis.fetch.bind(undefined),this.fetchOptions=t.fetchOptions,this.url=e}async manifest(){if(this.validatedManifest)return this.validatedManifest.clone();const e=new URL(s.NpmSnapFileNames.Manifest,this.url).toString(),t=await this.fetchFn(e,this.fetchOptions);if(!t.ok)throw new Error(`Failed to fetch "${e}". Status code: ${t.status}.`);const n=await t.text(),r=(0,s.parseJson)(n),i=new s.VirtualFile({value:n,result:(0,s.createSnapManifest)(r),path:s.NpmSnapFileNames.Manifest,data:{canonicalPath:e}});return this.validatedManifest=i,this.manifest()}async fetch(e){const t=(0,s.normalizeRelative)(e),n=this.cache.get(t);if(n!==undefined)return n.clone();const i=this.toCanonical(t).toString(),a=await this.fetchFn(i,this.fetchOptions);if(!a.ok)throw new Error(`Failed to fetch "${i}". Status code: ${a.status}.`);const o=await a.arrayBuffer(),f=new s.VirtualFile({value:new Uint8Array(o),path:t,data:{canonicalPath:i}});return(0,r.assert)(!this.cache.has(t),"Corrupted cache, multiple files with same path."),this.cache.set(t,f),this.fetch(t)}get root(){return new URL(this.url)}toCanonical(e){return(0,r.assert)(!e.startsWith("/"),"Tried to parse absolute path."),new URL(e,this.url)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/location/http.cjs"}],[2389,{"./http.cjs":2388,"./local.cjs":2390,"./location.cjs":2391,"./npm.cjs":2392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./location.cjs"),n),r(e("./npm.cjs"),n),r(e("./local.cjs"),n),r(e("./http.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/location/index.cjs"}],[239,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=r,function(e){const t=(null==e?void 0:e.TransactionController)||{},n=(null==t?void 0:t.transactions)||{};if((0,s.isEmpty)(n))return;const r=Object.keys(n).reduce(((e,t)=>{const s=n[t];return s.verifiedOnBlockchain=Boolean(s.txReceipt),{...e,[t]:s}}),{});e.TransactionController={...t,transactions:r}}(t.data),t},n.version=void 0;var s=e("lodash");const r=n.version=98}}},{package:"$root$",file:"app/scripts/migrations/098.ts"}],[2390,{"./http.cjs":2388,"@metamask/snaps-utils":2596,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LocalLocation=void 0;const a=e("@metamask/snaps-utils"),o=e("@metamask/utils"),f=e("./http.cjs");function c(e){return(0,o.assert)(e.data.canonicalPath!==undefined),e.data.canonicalPath=`local:${e.data.canonicalPath}`,e}n.LocalLocation=class{constructor(e,t={}){s.set(this,void 0),(0,o.assertStruct)(e.toString(),a.LocalSnapIdStruct,"Invalid Snap Id"),(0,o.assert)(t.fetchOptions===undefined,"Currently adding fetch options to local: is unsupported."),r(this,s,new f.HttpLocation(new URL(e.toString().slice(a.SnapIdPrefixes.local.length)),{...t,fetchOptions:{cache:"no-cache"}}),"f")}async manifest(){return c(await i(this,s,"f").manifest())}async fetch(e){return c(await i(this,s,"f").fetch(e))}get shouldAlwaysReload(){return!0}},s=new WeakMap}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/location/local.cjs"}],[2391,{"./http.cjs":2388,"./local.cjs":2390,"./npm.cjs":2392,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.detectSnapLocation=void 0;const s=e("@metamask/utils"),r=e("./http.cjs"),i=e("./local.cjs"),a=e("./npm.cjs");n.detectSnapLocation=function(e,t){const n=t?.allowHttp??!1,o=t?.allowLocal??!1,f=new URL(e);switch(f.protocol){case"npm:":return new a.NpmLocation(f,t);case"local:":return(0,s.assert)(o,new TypeError("Fetching local snaps is disabled.")),new i.LocalLocation(f,t);case"http:":case"https:":return(0,s.assert)(n,new TypeError("Fetching snaps through http/https is disabled.")),new r.HttpLocation(f,t);default:throw new TypeError(`Unrecognized "${f.protocol}" snap location protocol.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/location/location.cjs"}],[2392,{"@metamask/snaps-utils":2596,"@metamask/utils":2765,"browserify-zlib":3531,"concat-stream":2398,"get-npm-tarball-url":3905,"readable-stream":4666,"readable-web-to-node-stream":4667,"tar-stream":2404},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},f=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getNpmCanonicalBasePath=n.fetchNpmMetadata=n.NpmLocation=n.TARBALL_SIZE_SAFETY_LIMIT=n.BaseNpmLocation=n.DEFAULT_NPM_REGISTRY=void 0;const l=e("@metamask/snaps-utils"),u=e("@metamask/utils"),d=e("browserify-zlib"),p=c(e("concat-stream")),h=c(e("get-npm-tarball-url")),m=e("readable-stream"),b=e("readable-web-to-node-stream"),g=e("tar-stream");n.DEFAULT_NPM_REGISTRY=new URL("https://registry.npmjs.org");class y{constructor(e,t={}){s.add(this),r.set(this,void 0),i.set(this,void 0);const a=t.allowCustomRegistries??!1,o=t.fetch??globalThis.fetch.bind(undefined),f=t.versionRange??l.DEFAULT_REQUESTED_SNAP_VERSION,c=t.resolveVersion??(async e=>e);let d;(0,u.assertStruct)(e.toString(),l.NpmSnapIdStruct,"Invalid Snap Id: "),""===e.host&&""===e.port&&""===e.username&&""===e.password?d=n.DEFAULT_NPM_REGISTRY:(d="https://",e.username&&(d+=e.username,e.password&&(d+=`:${e.password}`),d+="@"),d+=e.host,d=new URL(d),(0,u.assert)(a,new TypeError(`Custom NPM registries are disabled, tried to use "${d.toString()}".`))),(0,u.assert)("/"===d.pathname&&""===d.search&&""===d.hash),(0,u.assert)(""!==e.pathname&&"/"!==e.pathname,new TypeError("The package name in NPM location is empty."));let p=e.pathname;p.startsWith("/")&&(p=p.slice(1)),this.meta={requestedRange:f,registry:d,packageName:p,fetch:o,resolveVersion:c}}async manifest(){if(o(this,r,"f"))return o(this,r,"f").clone();const e=await this.fetch("snap.manifest.json"),t=(0,l.parseJson)(e.toString());return e.result=(0,l.createSnapManifest)(t),f(this,r,e,"f"),this.manifest()}async fetch(e){const t=(0,l.normalizeRelative)(e);o(this,i,"f")||(await o(this,s,"m",a).call(this),(0,u.assert)(o(this,i,"f")!==undefined));const n=o(this,i,"f").get(t);return(0,u.assert)(n!==undefined,new TypeError(`File "${e}" not found in package.`)),n.clone()}get packageName(){return this.meta.packageName}get version(){return(0,u.assert)(this.meta.version!==undefined,"Tried to access version without first fetching NPM package."),this.meta.version}get registry(){return this.meta.registry}get versionRange(){return this.meta.requestedRange}}n.BaseNpmLocation=y,r=new WeakMap,i=new WeakMap,s=new WeakSet,a=async function(){(0,u.assert)(o(this,i,"f")===undefined);const e=await this.meta.resolveVersion(this.meta.requestedRange),{tarballURL:t,targetVersion:n}=await async function(e,t,n,s){if(T(n)&&(0,u.isValidSemVerVersion)(t))return{tarballURL:(0,h.default)(e,t),targetVersion:t};const r=await v(e,n,s),i=Object.keys(r?.versions??{}).map((e=>((0,u.assertIsSemVerVersion)(e),e))),a=(0,l.getTargetVersion)(i,t);if(null===a)throw new Error(`Failed to find a matching version in npm metadata for package "${e}" and requested semver range "${t}".`);const o=r?.versions?.[a]?.dist?.tarball;return{tarballURL:o,targetVersion:a}}(this.meta.packageName,e,this.meta.registry,this.meta.fetch);if(!(0,l.isValidUrl)(t)||!t.toString().endsWith(".tgz"))throw new Error(`Failed to find valid tarball URL in NPM metadata for package "${this.meta.packageName}".`);const s=new URL(t);s.hostname=this.meta.registry.hostname,s.protocol=this.meta.registry.protocol;const r=await this.fetchNpmTarball(s);f(this,i,r,"f"),this.meta.version=n},n.TARBALL_SIZE_SAFETY_LIMIT=262144e3;async function v(e,t,n){const s=await n(new URL(e,t).toString(),{headers:{accept:T(t)?"application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*":"application/json"}});if(!s.ok)throw new Error(`Failed to fetch NPM registry entry. Status code: ${s.status}.`);const r=await s.json();if(!(0,u.isObject)(r))throw new Error(`Failed to fetch package "${e}" metadata from npm.`);return r}function w(e,t){let n="npm://";return""!==e.username&&(n+=e.username,""!==e.password&&(n+=`:${e.password}`),n+="@"),`${n}${e.host}/${t}/`}function T(e){return e.toString()===n.DEFAULT_NPM_REGISTRY.toString()}n.NpmLocation=class extends y{async fetchNpmTarball(e){const t=await this.meta.fetch(e.toString());if(!t.ok||!t.body)throw new Error(`Failed to fetch tarball for package "${this.meta.packageName}".`);const s=t.headers.get("content-length");(0,u.assert)(s,"Snap tarball has invalid content-length");const r=parseInt(s,10);return(0,u.assert)(r<=n.TARBALL_SIZE_SAFETY_LIMIT,"Snap tarball exceeds size limit"),new Promise(((e,s)=>{const r=new Map,i=function(e,t){(0,u.assert)(e.endsWith("/"),"Base needs to end with '/' for relative paths to be added as children instead of siblings."),(0,u.assert)(e.startsWith("npm:"),'Protocol mismatch, expected "npm:".');const s=(0,g.extract)();let r=0;return s.on("entry",((i,a,o)=>{const{name:f,type:c}=i;if("file"===c){const i=f.replace(S,"");return a.pipe((0,p.default)({encoding:"uint8array"},(a=>{try{r+=a.byteLength,(0,u.assert)(r<n.TARBALL_SIZE_SAFETY_LIMIT,`Snap tarball exceeds limit of ${n.TARBALL_SIZE_SAFETY_LIMIT} bytes.`);const s=new l.VirtualFile({value:a,path:i,data:{canonicalPath:new URL(i,e).toString()}});return(0,u.assert)(!t.has(i),"Malformed tarball, multiple files with the same path."),t.set(i,s),o()}catch(e){return s.destroy(e)}})))}return a.on("end",(()=>o())),a.resume()})),s}(w(this.meta.registry,this.meta.packageName),r),a=t.body;if("pipeThrough"in a&&"DecompressionStream"in globalThis){const t=new DecompressionStream("gzip"),n=a.pipeThrough(t);(0,m.pipeline)(k(n),i,(t=>{t?s(t):e(r)}))}else(0,m.pipeline)(k(a),(0,d.createGunzip)(),i,(t=>{t?s(t):e(r)}))}))}},n.fetchNpmMetadata=v,n.getNpmCanonicalBasePath=w;const S=/^package\//u;function k(e){return"function"!=typeof e.getReader?e:new b.ReadableWebToNodeStream(e)}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/location/npm.cjs"}],[2393,{"./json.cjs":2394,"./registry.cjs":2395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./registry.cjs"),n),r(e("./json.cjs"),n)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/registry/index.cjs"}],[2394,{"./registry.cjs":2395,"@metamask/base-controller":1353,"@metamask/snaps-registry":2410,"@metamask/snaps-utils":2596,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o,f,c,l,u,d,p,h,m,b,g,y,v,w=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},T=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.JsonSnapsRegistry=void 0;const S=e("@metamask/base-controller"),k=e("@metamask/snaps-registry"),_=e("@metamask/snaps-utils"),E=e("@metamask/utils"),I=e("./registry.cjs"),P={database:null,lastUpdated:null,databaseUnavailable:!1};class C extends S.BaseController{constructor({messenger:e,state:t,url:n={registry:"https://acl.execution.metamask.io/latest/registry.json",signature:"https://acl.execution.metamask.io/latest/signature.json"},publicKey:l="0x025b65308f0f0fb8bc7f7ff87bfc296e0330eee5d3c1d1ee4a048b2fd6a86fa0a6",fetchFunction:d=globalThis.fetch.bind(undefined),recentFetchThreshold:p=(0,E.inMilliseconds)(5,E.Duration.Minute),refetchOnAllowlistMiss:h=!0}){super({messenger:e,metadata:{database:{persist:!0,anonymous:!1},lastUpdated:{persist:!0,anonymous:!1},databaseUnavailable:{persist:!0,anonymous:!1}},name:"SnapsRegistry",state:{...P,...t}}),s.add(this),r.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),f.set(this,void 0),c.set(this,void 0),w(this,r,n,"f"),w(this,i,l,"f"),w(this,a,d,"f"),w(this,o,p,"f"),w(this,f,h,"f"),w(this,c,null,"f"),this.messagingSystem.registerActionHandler("SnapsRegistry:get",(async(...e)=>T(this,s,"m",m).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:getMetadata",(async(...e)=>T(this,s,"m",g).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:resolveVersion",(async(...e)=>T(this,s,"m",b).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:update",(async()=>T(this,s,"m",u).call(this)))}}n.JsonSnapsRegistry=C,r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,f=new WeakMap,c=new WeakMap,s=new WeakSet,l=function(){return this.state.lastUpdated&&Date.now()-this.state.lastUpdated<T(this,o,"f")},u=async function(){T(this,c,"f")?await T(this,c,"f"):(null===T(this,c,"f")&&w(this,c,T(this,s,"m",d).call(this),"f"),await T(this,c,"f"),w(this,c,null,"f"))},d=async function(){if(!T(this,s,"m",l).call(this))try{const e=await T(this,s,"m",v).call(this,T(this,r,"f").registry),t=await T(this,s,"m",v).call(this,T(this,r,"f").signature);T(this,s,"m",y).call(this,e,t),this.update((t=>{t.database=JSON.parse(e),t.lastUpdated=Date.now(),t.databaseUnavailable=!1}))}catch{this.update((e=>{e.databaseUnavailable=!0}))}},p=async function(){return null===this.state.database&&await T(this,s,"m",u).call(this),this.state.database},h=async function e(t,n,r=!1){const i=await T(this,s,"m",p).call(this),a=i?.blockedSnaps.find((e=>"id"in e?e.id===t&&(0,E.satisfiesVersionRange)(n.version,e.versionRange):e.checksum===n.checksum));if(a)return{status:I.SnapsRegistryStatus.Blocked,reason:a.reason};const o=i?.verifiedSnaps[t],c=o?.versions?.[n.version];return c&&c.checksum===n.checksum?{status:I.SnapsRegistryStatus.Verified}:T(this,f,"f")&&!r?(await T(this,s,"m",u).call(this),T(this,s,"m",e).call(this,t,n,!0)):{status:this.state.databaseUnavailable?I.SnapsRegistryStatus.Unavailable:I.SnapsRegistryStatus.Unverified}},m=async function(e){return Object.entries(e).reduce((async(e,[t,n])=>{const r=await T(this,s,"m",h).call(this,t,n),i=await e;return i[t]=r,i}),Promise.resolve({}))},b=async function e(t,n,r=!1){const i=await T(this,s,"m",p).call(this),a=i?.verifiedSnaps[t]?.versions??null;if(!a&&T(this,f,"f")&&!r)return await T(this,s,"m",u).call(this),T(this,s,"m",e).call(this,t,n,!0);if(!a)return n;const o=(0,_.getTargetVersion)(Object.keys(a),n);return o||!T(this,f,"f")||r?o?((0,E.assertIsSemVerRange)(o),o):n:(await T(this,s,"m",u).call(this),T(this,s,"m",e).call(this,t,n,!0))},g=async function(e){const t=await T(this,s,"m",p).call(this);return t?.verifiedSnaps[e]?.metadata??null},y=function(e,t){(0,E.assert)(T(this,i,"f"),"No public key provided.");const n=(0,k.verify)({registry:e,signature:JSON.parse(t),publicKey:T(this,i,"f")});(0,E.assert)(n,"Invalid registry signature.")},v=async function(e){const t=await T(this,a,"f").call(this,e);if(!t.ok)throw new Error(`Failed to fetch ${e}.`);return await t.text()}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/registry/json.cjs"}],[2395,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s;Object.defineProperty(n,"__esModule",{value:!0}),n.SnapsRegistryStatus=void 0,function(e){e[e.Unverified=0]="Unverified",e[e.Blocked=1]="Blocked",e[e.Verified=2]="Verified",e[e.Unavailable=3]="Unavailable"}(s||(n.SnapsRegistryStatus=s={}))}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/registry/registry.cjs"}],[2396,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRunnableSnaps=void 0;n.getRunnableSnaps=e=>e.filter((e=>e.enabled&&!e.blocked))}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/snaps/selectors.cjs"}],[2397,{"./snaps/Timer.cjs":2385,"@metamask/snaps-sdk":2467,"@metamask/snaps-utils":2596,"fast-deep-equal":3851},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.fetchSnap=n.getSnapFiles=n.withTimeout=n.hasTimedOut=n.delayWithTimer=n.delay=n.permissionsDiff=n.setDiff=void 0;const r=e("@metamask/snaps-sdk"),i=e("@metamask/snaps-utils"),a=s(e("fast-deep-equal")),o=e("./snaps/Timer.cjs");function f(e,t){let n;const s=new Promise(((s,r)=>{e.start((()=>{t===undefined?s():s(t)})),n=r}));return s.cancel=()=>{"finished"!==e.status&&(e.cancel(),n(new Error("The delay has been canceled.")))},s}async function c(e,t){return t&&0!==t.length?await Promise.all(t.map((async t=>e.fetch(t)))):[]}n.setDiff=function(e,t){return Object.entries(e).reduce(((e,[n,s])=>(n in t||(e[n]=s),e)),{})},n.permissionsDiff=function(e,t){return Object.entries(e).reduce(((e,[n,s])=>{const r=n in t;return(!r||r&&!(0,a.default)(s.caveats??[],t[n].caveats??[]))&&(e[n]=s),e}),{})},n.delay=function(e,t){return f(new o.Timer(e),t)},n.delayWithTimer=f,n.hasTimedOut=Symbol("Used to check if the requested promise has timeout (see withTimeout)"),n.withTimeout=async function(e,t){const s=f("number"==typeof t?new o.Timer(t):t,n.hasTimedOut);try{return await Promise.race([e,s])}finally{s.cancel()}},n.getSnapFiles=c,n.fetchSnap=async function(e,t){try{const e=await t.manifest(),n=await t.fetch(e.result.source.location.npm.filePath);(0,r.assert)(n.size<i.MAX_FILE_SIZE,"Snap source code must be smaller than 64 MB.");const{iconPath:s}=e.result.source.location.npm,a=s?await t.fetch(s):undefined,o=await c(t,e.result.source.files);(0,i.validateAuxiliaryFiles)(o),await Promise.all(o.map((async e=>{e.data.base64=await(0,i.encodeBase64)(e)})));const f=await c(t,e.result.source.locales),l={manifest:e,sourceCode:n,svgIcon:a,auxiliaryFiles:o,localizationFiles:(0,i.getValidatedLocalizationFiles)(f)};return await(0,i.validateFetchedSnap)(l),l}catch(t){throw new Error(`Failed to fetch snap "${e}": ${(0,r.getErrorMessage)(t)}.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/utils.cjs"}],[2398,{buffer:3537,"buffer-from":3542,inherits:4072,"readable-stream":4666,typedarray:5006},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var s=e("readable-stream").Writable,r=e("inherits"),i=e("buffer-from");if("undefined"==typeof Uint8Array)var a=e("typedarray").Uint8Array;else a=Uint8Array;function o(e,t){if(!(this instanceof o))return new o(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var n=e.encoding,r=!1;n?"u8"!==(n=String(n).toLowerCase())&&"uint8"!==n||(n="uint8array"):r=!0,s.call(this,{objectMode:!0}),this.encoding=n,this.shouldInferEncoding=r,t&&this.on("finish",(function(){t(this.getBody())})),this.body=[]}t.exports=o,r(o,s),o.prototype._write=function(e,t,n){this.body.push(e),n()},o.prototype.inferEncoding=function(e){var t=e===undefined?this.body[0]:e;return n.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},o.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(e){for(var t=[],n=0;n<e.length;n++)t.push.apply(t,e[n]);return t}(this.body):"string"===this.encoding?function(e){for(var t=[],s=0;s<e.length;s++){var r=e[s];"string"==typeof r||n.isBuffer(r)?t.push(r):f(r)?t.push(i(r)):t.push(i(String(r)))}t=n.isBuffer(e[0])?(t=n.concat(t)).toString("utf8"):t.join("");return t}(this.body):"buffer"===this.encoding?function(e){for(var t=[],s=0;s<e.length;s++){var r=e[s];n.isBuffer(r)?t.push(r):f(r)?t.push(i(r)):t.push(i(String(r)))}return n.concat(t)}(this.body):"uint8array"===this.encoding?function(e){for(var t=0,n=0;n<e.length;n++)"string"==typeof e[n]&&(e[n]=i(e[n])),t+=e[n].length;for(var s=new a(t),r=(n=0,0);n<e.length;n++)for(var o=e[n],f=0;f<o.length;f++)s[r++]=o[f];return s}(this.body):this.body):[]};Array.isArray;function f(e){return"string"==typeof e||(t=e,/Array\]$/.test(Object.prototype.toString.call(t)))||e&&"function"==typeof e.subarray;var t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>concat-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/concat-stream/index.js"}],[2399,{"./url-alphabet/index.cjs":2400},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){let{urlAlphabet:s}=e("./url-alphabet/index.cjs"),r=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,n)=>{let s=(2<<Math.log(e.length-1)/Math.LN2)-1,r=-~(1.6*s*t/e.length);return(i=t)=>{let a="";for(;;){let t=n(r),o=r;for(;o--;)if(a+=e[t[o]&s]||"",a.length===i)return a}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,r),customRandom:i,urlAlphabet:s,random:r}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.cjs"}],[24,{"@metamask/base-controller":1353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsDataDeletionController=void 0;var s=e("@metamask/base-controller");function r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(e,t){return e.get(a(e,t))}function a(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const o="MetaMetricsDataDeletionController",f={metaMetricsDataDeletionId:{persist:!0,anonymous:!0},metaMetricsDataDeletionTimestamp:{persist:!0,anonymous:!0},metaMetricsDataDeletionStatus:{persist:!0,anonymous:!0}};var c=new WeakMap,l=new WeakSet;class u extends s.BaseController{constructor({dataDeletionService:e,messenger:t,state:n}){var s,i;super({messenger:t,metadata:f,name:o,state:{metaMetricsDataDeletionId:null,metaMetricsDataDeletionTimestamp:0,...n}}),r(s=this,i=l),i.add(s),function(e,t,n){r(e,t),t.set(e,n)}(this,c,void 0),function(e,t,n){e.set(a(e,t),n)}(c,this,e),a(l,this,d).call(this)}async createMetaMetricsDataDeletionTask(){const{metaMetricsId:e}=this.messagingSystem.call("MetaMetricsController:getState");if(!e)throw new Error("MetaMetrics ID not found");const t=await i(c,this).createDataDeletionRegulationTask(e);this.update((e=>{e.metaMetricsDataDeletionId=t??null,e.metaMetricsDataDeletionTimestamp=Date.now()})),await this.updateDataDeletionTaskStatus()}async updateDataDeletionTaskStatus(){const e=this.state.metaMetricsDataDeletionId;if(!e)throw new Error("Delete Regulation id not found");const t=await i(c,this).fetchDeletionRegulationStatus(e);this.update((e=>{e.metaMetricsDataDeletionStatus=t??undefined}))}}function d(){this.messagingSystem.registerActionHandler(`${o}:createMetaMetricsDataDeletionTask`,this.createMetaMetricsDataDeletionTask.bind(this)),this.messagingSystem.registerActionHandler(`${o}:updateDataDeletionTaskStatus`,this.updateDataDeletionTaskStatus.bind(this))}n.MetaMetricsDataDeletionController=u}}},{package:"$root$",file:"app/scripts/controllers/metametrics-data-deletion/metametrics-data-deletion.ts"}],[240,{lodash:4256,uuid:5050},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.TransactionController)||{},n=(null==t?void 0:t.transactions)||{};if((0,s.isEmpty)(n))return;const i=Object.keys(n).reduce(((e,t)=>{const i=(0,s.cloneDeep)(n[t]),a=(0,r.v1)();return i.id=a,{...e,[a]:i}}),{});e.TransactionController={...t,transactions:i}}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("uuid");const i=n.version=99}}},{package:"$root$",file:"app/scripts/migrations/099.ts"}],[2400,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/url-alphabet/index.cjs"}],[2401,{fs:3502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const s={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{t.exports=e("fs").constants||s}catch{t.exports=s}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/tar-stream/constants.js"}],[2402,{"./headers":2403,b4a:3476,"fast-fifo":3853,streamx:4985},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Writable:s,Readable:r,getStreamError:i}=e("streamx"),a=e("fast-fifo"),o=e("b4a"),f=e("./headers"),c=o.alloc(0);class l{constructor(){this.buffered=0,this.shifted=0,this.queue=new a,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return 0===this._buffered?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(0===e)return c;let t=this._next(e);if(e===t.byteLength)return t;const n=[t];for(;(e-=t.byteLength)>0;)t=this._next(e),n.push(t);return o.concat(n)}_next(e){const t=this.queue.peek(),n=t.byteLength-this._offset;if(e>=n){const e=this._offset?t.subarray(this._offset,t.byteLength):t;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,e}return this.buffered-=e,this.shifted+=e,t.subarray(this._offset,this._offset+=e)}}class u extends r{constructor(e,t,n){super(),this.header=t,this.offset=n,this._parent=e}_read(e){0===this.header.size&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(i(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=h(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}}class d extends s{constructor(e){super(e),e||(e={}),this._buffer=new l,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=p,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e)return this.destroy(e),void this._continueWrite(e);this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=f.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),0===this._header.size||"directory"===this._header.type?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=f.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=f.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=f.decodePax(e);break;case"pax-header":this._pax=null===this._paxGlobal?f.decodePax(e):Object.assign({},this._paxGlobal,f.decodePax(e))}}_consumeLongHeader(){this._longHeader=!1,this._missing=h(this._header.size);const e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(e){return this._continueWrite(e),!1}return!0}_consumeStream(){const e=this._buffer.shiftFirst(this._missing);if(null===e)return!1;this._missing-=e.byteLength;const t=this._stream.push(e);return 0===this._missing?(this._stream.push(null),t&&this._stream._detach(),t&&!1===this._locked):t}_createStream(){return new u(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;)if(this._missing>0){if(null!==this._stream){if(!1===this._consumeStream())return;continue}if(!0===this._longHeader){if(this._missing>this._buffer.buffered)break;if(!1===this._consumeLongHeader())return!1;continue}const e=this._buffer.shiftFirst(this._missing);null!==e&&(this._missing-=e.byteLength)}else{if(this._buffer.buffered<512)break;if(null!==this._stream||!1===this._consumeHeader())return}this._continueWrite(null)}_continueWrite(e){const t=this._callback;this._callback=p,t(e)}_write(e,t){this._callback=t,this._buffer.push(e),this._update()}_final(e){this._finished=0===this._missing&&0===this._buffer.buffered,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(i(this)),e(null)}[Symbol.asyncIterator](){let e=null,t=null,n=null,s=null,r=null;const i=this;return this.on("entry",(function(e,i,a){r=a,i.on("error",p),t?(t({value:i,done:!1}),t=n=null):s=i})),this.on("error",(t=>{e=t})),this.on("close",(function(){if(a(e),!t)return;e?n(e):t({value:undefined,done:!0});t=n=null})),{[Symbol.asyncIterator](){return this},next:()=>new Promise(o),return:()=>f(null),throw:e=>f(e)};function a(e){if(!r)return;const t=r;r=null,t(e)}function o(r,o){return e?o(e):s?(r({value:s,done:!1}),void(s=null)):(t=r,n=o,a(null),void(i._finished&&t&&(t({value:undefined,done:!0}),t=n=null)))}function f(e){return i.destroy(e),a(e),new Promise(((t,n)=>{if(i.destroyed)return t({value:undefined,done:!0});i.once("close",(function(){e?n(e):t({value:undefined,done:!0})}))}))}}}function p(){}function h(e){return(e&=511)&&512-e}t.exports=function(e){return new d(e)}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/tar-stream/extract.js"}],[2403,{b4a:3476},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const s=e("b4a"),r="0000000000000000000",i="7777777777777777777",a="0".charCodeAt(0),o=s.from([117,115,116,97,114,0]),f=s.from([a,a]),c=s.from([117,115,116,97,114,32]),l=s.from([32,0]),u=257,d=263;function p(e,t,n,s){for(;n<s;n++)if(e[n]===t)return n;return s}function h(e){let t=256;for(let n=0;n<148;n++)t+=e[n];for(let n=156;n<512;n++)t+=e[n];return t}function m(e,t){return(e=e.toString(8)).length>t?i.slice(0,t)+" ":r.slice(0,t-e.length)+e+" "}function b(e,t,n){if(128&(e=e.subarray(t,t+n))[t=0])return function(e){let t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}const n=[];let s;for(s=e.length-1;s>0;s--){const r=e[s];t?n.push(r):n.push(255-r)}let r=0;const i=n.length;for(s=0;s<i;s++)r+=n[s]*Math.pow(256,s);return t?r:-1*r}(e);{for(;t<e.length&&32===e[t];)t++;const n=(r=p(e,32,t,e.length),i=e.length,a=e.length,"number"!=typeof r?a:(r=~~r)>=i?i:r>=0||(r+=i)>=0?r:0);for(;t<n&&0===e[t];)t++;return n===t?0:parseInt(s.toString(e.subarray(t,n)),8)}var r,i,a}function g(e,t,n,r){return s.toString(e.subarray(t,p(e,0,t,t+n)),r)}function y(e){const t=s.byteLength(e);let n=Math.floor(Math.log(t)/Math.log(10))+1;return t+n>=Math.pow(10,n)&&n++,t+n+e}n.decodeLongPath=function(e,t){return g(e,0,e.length,t)},n.encodePax=function(e){let t="";e.name&&(t+=y(" path="+e.name+"\n")),e.linkname&&(t+=y(" linkpath="+e.linkname+"\n"));const n=e.pax;if(n)for(const e in n)t+=y(" "+e+"="+n[e]+"\n");return s.from(t)},n.decodePax=function(e){const t={};for(;e.length;){let n=0;for(;n<e.length&&32!==e[n];)n++;const r=parseInt(s.toString(e.subarray(0,n)),10);if(!r)return t;const i=s.toString(e.subarray(n+1,r-1)),a=i.indexOf("=");if(-1===a)return t;t[i.slice(0,a)]=i.slice(a+1),e=e.subarray(r)}return t},n.encode=function(e){const t=s.alloc(512);let n=e.name,r="";if(5===e.typeflag&&"/"!==n[n.length-1]&&(n+="/"),s.byteLength(n)!==n.length)return null;for(;s.byteLength(n)>100;){const e=n.indexOf("/");if(-1===e)return null;r+=r?"/"+n.slice(0,e):n.slice(0,e),n=n.slice(e+1)}return s.byteLength(n)>100||s.byteLength(r)>155||e.linkname&&s.byteLength(e.linkname)>100?null:(s.write(t,n),s.write(t,m(4095&e.mode,6),100),s.write(t,m(e.uid,6),108),s.write(t,m(e.gid,6),116),function(e,t,n){e.toString(8).length>11?function(e,t,n){t[n]=128;for(let s=11;s>0;s--)t[n+s]=255&e,e=Math.floor(e/256)}(e,t,n):s.write(t,m(e,11),n)}(e.size,t,124),s.write(t,m(e.mtime.getTime()/1e3|0,11),136),t[156]=a+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(e.type),e.linkname&&s.write(t,e.linkname,157),s.copy(o,t,u),s.copy(f,t,263),e.uname&&s.write(t,e.uname,265),e.gname&&s.write(t,e.gname,297),s.write(t,m(e.devmajor||0,6),329),s.write(t,m(e.devminor||0,6),337),r&&s.write(t,r,345),s.write(t,m(h(t),6),148),t)},n.decode=function(e,t,n){let r=0===e[156]?0:e[156]-a,i=g(e,0,100,t);const f=b(e,100,8),p=b(e,108,8),m=b(e,116,8),y=b(e,124,12),v=b(e,136,12),w=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(r),T=0===e[157]?null:g(e,157,100,t),S=g(e,265,32),k=g(e,297,32),_=b(e,329,8),E=b(e,337,8),I=h(e);if(256===I)return null;if(I!==b(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(function(e){return s.equals(o,e.subarray(u,263))}(e))e[345]&&(i=g(e,345,155,t)+"/"+i);else if(function(e){return s.equals(c,e.subarray(u,263))&&s.equals(l,e.subarray(d,265))}(e));else if(!n)throw new Error("Invalid tar header: unknown format.");return 0===r&&i&&"/"===i[i.length-1]&&(r=5),{name:i,mode:f,uid:p,gid:m,size:y,mtime:new Date(1e3*v),type:w,linkname:T,uname:S,gname:k,devmajor:_,devminor:E,pax:null}}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/tar-stream/headers.js"}],[2404,{"./extract":2402,"./pack":2405},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){n.extract=e("./extract"),n.pack=e("./pack")}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/tar-stream/index.js"}],[2405,{"./constants":2401,"./headers":2403,b4a:3476,streamx:4985},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Readable:s,Writable:r,getStreamError:i}=e("streamx"),a=e("b4a"),o=e("./constants"),f=e("./headers"),c=a.alloc(1024);class l extends r{constructor(e,t,n){super({mapWritable:h,eagerOpen:!0}),this.written=0,this.header=t,this._callback=n,this._linkname=null,this._isLinkname="symlink"===t.type&&!t.linkname,this._isVoid="file"!==t.type&&"contiguous-file"!==t.type,this._finished=!1,this._pack=e,this._openCallback=null,null===this._pack._stream?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(null===this._callback)return;const t=this._callback;this._callback=null,t(e)}_continueOpen(){null===this._pack._stream&&(this._pack._stream=this);const e=this._openCallback;if(this._openCallback=null,null!==e){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,t){return this._isLinkname?(this._linkname=this._linkname?a.concat([this._linkname,e]):e,t(null)):this._isVoid?e.byteLength>0?t(new Error("No body allowed for this entry")):t():(this.written+=e.byteLength,this._pack.push(e)?t():void(this._pack._drain=t))}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?a.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),p(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return i(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}}class u extends s{constructor(e){super(e),this._drain=d,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,t,n){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");"function"==typeof t&&(n=t,t=null),n||(n=d),e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&o.S_IFMT){case o.S_IFBLK:return"block-device";case o.S_IFCHR:return"character-device";case o.S_IFDIR:return"directory";case o.S_IFIFO:return"fifo";case o.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?493:420),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=a.from(t));const s=new l(this,e,n);return a.isBuffer(t)?(e.size=t.byteLength,s.write(t),s.end(),s):(s._isVoid,s)}finalize(){this._stream||this._pending.length>0?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(c),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){const t=f.encode(e);if(t)return void this.push(t)}this._encodePax(e)}_encodePax(e){const t=f.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(f.encode(n)),this.push(t),p(this,t.byteLength),n.size=e.size,n.type=e.type,this.push(f.encode(n))}_doDrain(){const e=this._drain;this._drain=d,e()}_predestroy(){const e=i(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){const t=this._pending.shift();t.destroy(e),t._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}}function d(){}function p(e,t){(t&=511)&&e.push(c.subarray(0,512-t))}function h(e){return a.isBuffer(e)?e:a.from(e)}t.exports=function(e){return new u(e)}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/tar-stream/pack.js"}],[241,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=r,function(e){var t,n;const r=(null==e||null===(t=e.AddressBookController)||void 0===t?void 0:t.addressBook)??{},i=(null==e||null===(n=e.NameController)||void 0===n||null===(n=n.names)||void 0===n?void 0:n.ethereumAddress)??{};if((0,s.isEmpty)(Object.keys(r)))return;for(const e of Object.keys(r)){const t=r[e];for(const n of Object.keys(t)){var a,o;const s=t[n],r=n.toLowerCase(),f=i[r]??{};null!==(a=(f[e]??{}).name)&&void 0!==a&&a.length||null===(o=s.name)||void 0===o||!o.length||null==r||!r.length||(i[r]=f,f[e]={name:s.name,sourceId:s.isEns?"ens":null,proposedNames:{}})}}e.NameController={...e.NameController,names:{ethereumAddress:i}}}(t.data),t},n.version=void 0;var s=e("lodash");const r=n.version=100}}},{package:"$root$",file:"app/scripts/migrations/100.ts"}],[2410,{"./verify":2411,"@metamask/superstruct":2619,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.SnapsRegistryDatabaseStruct=n.BlockedSnapStruct=n.BlockReasonStruct=n.VerifiedSnapStruct=n.ImagePathStruct=n.AdditionalSourceCodeStruct=n.SupportStruct=n.AuditStruct=n.AuthorStruct=void 0;const i=e("@metamask/superstruct"),a=e("@metamask/utils"),o=(0,i.refine)((0,i.string)(),"Npm ID",(e=>e.startsWith("npm:"))),f=(0,i.object)({checksum:a.ChecksumStruct});n.AuthorStruct=(0,i.object)({name:(0,i.string)(),website:(0,i.string)()}),n.AuditStruct=(0,i.object)({auditor:(0,i.string)(),report:(0,i.string)()}),n.SupportStruct=(0,i.object)({knowledgeBase:(0,i.optional)((0,i.string)()),faq:(0,i.optional)((0,i.string)()),contact:(0,i.optional)((0,i.string)()),keyRecovery:(0,i.optional)((0,i.string)())}),n.AdditionalSourceCodeStruct=(0,i.object)({name:(0,i.string)(),url:(0,i.string)()}),n.ImagePathStruct=(0,i.pattern)((0,i.string)(),/\.\/images\/.*\/\d+\.(?:png|jpe?g)$/u),n.VerifiedSnapStruct=(0,i.object)({id:o,metadata:(0,i.object)({name:(0,i.string)(),type:(0,i.optional)((0,i.enums)(["account"])),author:(0,i.optional)(n.AuthorStruct),website:(0,i.optional)((0,i.string)()),onboard:(0,i.optional)((0,i.boolean)()),summary:(0,i.optional)((0,i.string)()),description:(0,i.optional)((0,i.string)()),audits:(0,i.optional)((0,i.array)(n.AuditStruct)),category:(0,i.optional)((0,i.enums)(["interoperability","notifications","transaction insights","account management","name resolution"])),tags:(0,i.optional)((0,i.array)((0,i.string)())),support:(0,i.optional)(n.SupportStruct),sourceCode:(0,i.optional)((0,i.string)()),hidden:(0,i.optional)((0,i.boolean)()),privateCode:(0,i.optional)((0,i.boolean)()),privacyPolicy:(0,i.optional)((0,i.string)()),termsOfUse:(0,i.optional)((0,i.string)()),additionalSourceCode:(0,i.optional)((0,i.array)(n.AdditionalSourceCodeStruct)),screenshots:(0,i.optional)((0,i.size)((0,i.array)(n.ImagePathStruct),3,3))}),versions:(0,i.record)(a.VersionStruct,f)}),n.BlockReasonStruct=(0,i.object)({explanation:(0,i.optional)((0,i.string)()),url:(0,i.optional)((0,i.string)())}),n.BlockedSnapStruct=(0,i.union)([(0,i.object)({id:o,versionRange:a.VersionRangeStruct,reason:(0,i.optional)(n.BlockReasonStruct)}),(0,i.object)({checksum:a.ChecksumStruct,reason:(0,i.optional)(n.BlockReasonStruct)})]),n.SnapsRegistryDatabaseStruct=(0,i.object)({verifiedSnaps:(0,i.record)(o,n.VerifiedSnapStruct),blockedSnaps:(0,i.array)(n.BlockedSnapStruct)}),r(e("./verify"),n)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/index.js"}],[2411,{"@metamask/superstruct":2619,"@metamask/utils":2765,"@noble/curves/secp256k1":2813,"@noble/hashes/sha256":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.verify=n.SignatureStruct=void 0;const s=e("@metamask/superstruct"),r=e("@metamask/utils"),i=e("@noble/curves/secp256k1"),a=e("@noble/hashes/sha256");n.SignatureStruct=(0,s.object)({signature:r.StrictHexStruct,curve:(0,s.literal)("secp256k1"),format:(0,s.literal)("DER")}),n.verify=function({registry:e,signature:t,publicKey:s}){(0,r.assertStruct)(t,n.SignatureStruct,"Invalid signature object");const o=(0,r.hexToBytes)(s);return i.secp256k1.verify((0,r.remove0x)(t.signature),(0,a.sha256)((0,r.stringToBytes)(e)),o)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/verify.js"}],[242,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"networkId")){const t=e.NetworkController;return delete t.networkId,{...e,NetworkController:t}}var t,n;(0,s.isObject)(e.NetworkController)||null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController))}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=101}}},{package:"$root$",file:"app/scripts/migrations/101.ts"}],[243,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=r,function(e){const t=(null==e?void 0:e.TransactionController)||{},n=(null==t?void 0:t.transactions)||{};if((0,s.isEmpty)(n))return;const r=Object.keys(n).reduce(((e,t)=>{const r=(0,s.cloneDeep)(n[t]);return null!=r&&r.err&&(r.error=r.err,delete r.err),{...e,[t]:r}}),{});e.TransactionController={...t,transactions:r}}(t.data),t},n.version=void 0;var s=e("lodash");const r=n.version=102}}},{package:"$root$",file:"app/scripts/migrations/102.ts"}],[244,{"../../../shared/constants/hardware-wallets":5131,"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,s.hasProperty)(e,"PreferencesController")&&(0,s.isObject)(e.PreferencesController)&&window.navigator.userAgent.includes("Chrome")){const t=e.PreferencesController;return t.ledgerTransportType=i.LedgerTransportTypes.webhid,{...e,PreferencesController:t}}return e}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash"),i=e("../../../shared/constants/hardware-wallets");const a=n.version=103}}},{package:"$root$",file:"app/scripts/migrations/103.ts"}],[245,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=r,function(e){const t=null==e?void 0:e.TransactionController;if(!t)return;const n=(null==t?void 0:t.transactions)||{},s=Object.values(n).sort(((e,t)=>e.time>t.time?-1:1));e.TransactionController={...t,transactions:s}}(t.data),t},n.version=void 0;var s=e("lodash");const r=n.version=104}}},{package:"$root$",file:"app/scripts/migrations/104.ts"}],[246,{"../../../shared/constants/eth-methods":5128,"@metamask/keyring-api":1799,"ethereumjs-util":3753,lodash:4256,uuid:5050},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=f,function(e){(function(e){e.AccountsController={internalAccounts:{accounts:{},selectedAccount:""}}})(e),function(e){var t;const n=(null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)||{};if(0===Object.keys(n).length)return;const a={};Object.values(n).forEach((e=>{const t=(0,i.v4)({random:(0,r.sha256FromString)(e.address).slice(0,16)});a[t]={address:e.address,id:t,options:{},metadata:{name:e.name,lastSelected:e.lastSelected??undefined,importTime:0,keyring:{type:"HD Key Tree"}},methods:o.ETH_EOA_METHODS,type:s.EthAccountType.Eoa}})),e.AccountsController.internalAccounts.accounts=a}(e),function(e){var t;let n=null===(t=e.PreferencesController)||void 0===t?void 0:t.selectedAddress;if("string"!=typeof n){var s,r;null===(s=global.sentry)||void 0===s||null===(r=s.captureException)||void 0===r||r.call(s,new Error(`state.PreferencesController?.selectedAddress is ${n}`)),n=function(e){var t;const[n]=Object.keys((null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)||{});return n}(e)}const i=function(e,t){return Object.values(e.AccountsController.internalAccounts.accounts).find((e=>e.address.toLowerCase()===t.toLowerCase()))}(e,n);i&&(e.PreferencesController.selectedAddress=i.address,e.AccountsController.internalAccounts={...e.AccountsController.internalAccounts,selectedAccount:i.id})}(e)}(t.data),t},n.version=void 0;var s=e("@metamask/keyring-api"),r=e("ethereumjs-util"),i=e("uuid"),a=e("lodash"),o=e("../../../shared/constants/eth-methods");const f=n.version=105}}},{package:"$root$",file:"app/scripts/migrations/105.ts"}],[247,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);t.meta.version=r;const n=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,securityAlertsEnabled:!0!==t.transactionSecurityCheckEnabled}}}(t.data);return t.data=n,t},n.version=void 0;var s=e("lodash");const r=n.version=106}}},{package:"$root$",file:"app/scripts/migrations/106.js"}],[248,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!((0,r.hasProperty)(e,"CachedBalancesController")&&(0,r.isObject)(e.CachedBalancesController)&&(0,r.hasProperty)(e.CachedBalancesController,"cachedBalances")&&(0,r.isObject)(e.CachedBalancesController.cachedBalances)&&(0,r.hasProperty)(e,"AccountTracker")&&(0,r.isObject)(e.AccountTracker)))return e;e.AccountTracker.accountsByChainId||(e.AccountTracker.accountsByChainId={});const t=e.AccountTracker,n=e.CachedBalancesController.cachedBalances;return Object.keys(n).forEach((e=>{t.accountsByChainId[e]||(t.accountsByChainId[e]={}),Object.keys(n[e]).forEach((s=>{if(t.accountsByChainId[e][s]===undefined){const r=n[e][s];t.accountsByChainId[e][s]={address:s,balance:r}}}))})),delete e.CachedBalancesController,e.AccountTracker=t,e}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=107}}},{package:"$root$",file:"app/scripts/migrations/107.ts"}],[249,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=r,function(e){var t,n;const r=(null==e||null===(t=e.AddressBookController)||void 0===t?void 0:t.addressBook)??{},i=(null==e||null===(n=e.NameController)||void 0===n||null===(n=n.names)||void 0===n?void 0:n.ethereumAddress)??{};if((0,s.isEmpty)(Object.keys(r)))return;for(const e of Object.keys(r)){const t=r[e];for(const n of Object.keys(t)){var a,o;const s=t[n],r=n.toLowerCase(),f=i[r]??{};null!==(a=(f[e]??{}).name)&&void 0!==a&&a.length||null===(o=s.name)||void 0===o||!o.length||null==r||!r.length||(i[r]=f,f[e]={name:s.name,sourceId:s.isEns?"ens":null,proposedNames:{}})}}e.NameController={...e.NameController,names:{ethereumAddress:i}}}(t.data),t},n.version=void 0;var s=e("lodash");const r=n.version=108}}},{package:"$root$",file:"app/scripts/migrations/108.ts"}],[25,{"../../../shared/constants/network":5139,"@metamask/base-controller":1353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkOrderController=void 0;var s=e("@metamask/base-controller"),r=e("../../../shared/constants/network");const i={orderedNetworkList:[]},a={orderedNetworkList:{persist:!0,anonymous:!0}};class o extends s.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:a,name:"NetworkOrderController",state:{...i,...t}}),this.messagingSystem.subscribe("NetworkController:stateChange",(e=>{this.onNetworkControllerStateChange(e)}))}onNetworkControllerStateChange({networkConfigurationsByChainId:e}){this.update((t=>{const n=Object.keys(e).filter((e=>!r.TEST_CHAINS.includes(e))),s=n.filter((e=>!t.orderedNetworkList.some((({networkId:t})=>t===e)))).map((e=>({networkId:e})));t.orderedNetworkList=t.orderedNetworkList.filter((({networkId:e})=>n.includes(e))).concat(s)}))}updateNetworksList(e){this.update((t=>{t.orderedNetworkList=e.map((e=>({networkId:e})))}))}}n.NetworkOrderController=o}}},{package:"$root$",file:"app/scripts/controllers/network-order.ts"}],[250,{"@metamask/name-controller":1911,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){var t,n;const i=(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)??{},a=(null==e||null===(n=e.NameController)||void 0===n||null===(n=n.names)||void 0===n?void 0:n.ethereumAddress)??{};if((0,s.isEmpty)(Object.keys(i)))return;let o=!1;for(const e of Object.keys(i)){var f,c,l;const t=i[e],n=e.toLowerCase(),s=a[n]??{};!Boolean(null===(f=s[r.FALLBACK_VARIATION])||void 0===f?void 0:f.name)&&null!==(c=t.name)&&void 0!==c&&c.length&&null!==(l=t.address)&&void 0!==l&&l.length&&null!=n&&n.length&&(a[n]=s,s[r.FALLBACK_VARIATION]={name:t.name,sourceId:null,proposedNames:{},origin:r.NameOrigin.ACCOUNT_IDENTITY},o=!0)}o&&(e.NameController={...e.NameController,names:{ethereumAddress:a}})}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/name-controller");const i=n.version=109}}},{package:"$root$",file:"app/scripts/migrations/109.ts"}],[251,{"../../../shared/constants/network":5139,"@metamask/controller-utils":1379,"@metamask/network-controller":1946,"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=f,function(e){const t=(null==e?void 0:e.NetworkController)||{},n=(null==t?void 0:t.providerConfig)||{};if((null==n?void 0:n.chainId)!==o.CHAIN_IDS.GOERLI)return e;const f=e.NetworkController;(0,i.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&(0,s.isObject)(e.NetworkController.providerConfig)&&(0,i.hasProperty)(e.NetworkController.providerConfig,"chainId")&&e.NetworkController.providerConfig.chainId===o.CHAIN_IDS.GOERLI&&(f.providerConfig={type:r.NetworkType.sepolia,rpcPrefs:{},chainId:o.CHAIN_IDS.SEPOLIA,nickname:o.SEPOLIA_DISPLAY_NAME,rpcUrl:o.CHAIN_ID_TO_RPC_URL_MAP[o.CHAIN_IDS.SEPOLIA],providerType:o.NETWORK_TYPES.SEPOLIA,ticker:o.TEST_NETWORK_TICKER_MAP[o.NETWORK_TYPES.SEPOLIA],id:o.NETWORK_TYPES.SEPOLIA,removable:!1},f.selectedNetworkClientId=o.NETWORK_TYPES.SEPOLIA,f.networksMetadata={...f.networksMetadata,sepolia:{EIPS:{1559:!0},status:a.NetworkStatus.Available}})}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/controller-utils"),i=e("@metamask/utils"),a=e("@metamask/network-controller"),o=e("../../../shared/constants/network");const f=n.version=110}}},{package:"$root$",file:"app/scripts/migrations/110.ts"}],[252,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){if(!(0,r.hasProperty)(e,"SelectedNetworkController"))return e;if((0,r.isObject)(e.SelectedNetworkController))if((0,r.hasProperty)(e.SelectedNetworkController,"domains")){if(!(0,r.isObject)(e.SelectedNetworkController.domains)){var t,n;null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("state.SelectedNetworkController.domains is type: "+typeof e.SelectedNetworkController.domains))}}else{var s,i;null===(s=global.sentry)||void 0===s||null===(i=s.captureException)||void 0===i||i.call(s,new Error("state.SelectedNetworkController.domains is missing from SelectedNetworkController state"))}else{var a,o;null===(a=global.sentry)||void 0===a||null===(o=a.captureException)||void 0===o||o.call(a,new Error("state.SelectedNetworkController is type: "+typeof e.SelectedNetworkController)),e.SelectedNetworkController={}}e.SelectedNetworkController.domains={}}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=111}}},{package:"$root$",file:"app/scripts/migrations/111.ts"}],[253,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){if(!(0,r.hasProperty)(e,"SelectedNetworkController"))return e;if((0,r.isObject)(e.SelectedNetworkController))if((0,r.hasProperty)(e.SelectedNetworkController,"perDomainNetwork")){if("boolean"!=typeof e.SelectedNetworkController.perDomainNetwork){var t,n;null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("state.SelectedNetworkController.perDomainNetwork is type: "+typeof e.SelectedNetworkController.perDomainNetwork))}}else{var s,i;null===(s=global.sentry)||void 0===s||null===(i=s.captureException)||void 0===i||i.call(s,new Error("state.SelectedNetworkController.perDomainNetwork is missing from SelectedNetworkController state"))}else{var a,o;null===(a=global.sentry)||void 0===a||null===(o=a.captureException)||void 0===o||o.call(a,new Error("state.SelectedNetworkController is type: "+typeof e.SelectedNetworkController)),e.SelectedNetworkController={}}delete e.SelectedNetworkController.perDomainNetwork}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=112}}},{package:"$root$",file:"app/scripts/migrations/112.ts"}],[254,{"@metamask/utils":2765,"@sentry/browser":2892,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,function(e){if(!(0,s.hasProperty)(e,"PreferencesController")||!(0,s.isObject)(e.PreferencesController))return(0,r.captureException)(`Migration ${a}: Invalid PreferencesController state: ${typeof e.PreferencesController}`),e;(0,s.hasProperty)(e.PreferencesController,"isLineaMainnetReleased")&&delete e.PreferencesController.isLineaMainnetReleased}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("@sentry/browser"),i=e("lodash");const a=n.version=113}}},{package:"$root$",file:"app/scripts/migrations/113.ts"}],[255,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){if(!(0,r.hasProperty)(e,"PreferencesController"))return e;if((0,r.isObject)(e.PreferencesController))(0,r.hasProperty)(e.PreferencesController,"transactionSecurityCheckEnabled")&&(e.PreferencesController.transactionSecurityCheckEnabled&&(e.PreferencesController.securityAlertsEnabled=!0,e.PreferencesController.hasMigratedFromOpenSeaToBlockaid=!0),delete e.PreferencesController.transactionSecurityCheckEnabled);else{var t,n;null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("state.PreferencesController is type: "+typeof e.PreferencesController)),e.PreferencesController={}}}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=114}}},{package:"$root$",file:"app/scripts/migrations/114.ts"}],[256,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.AppStateController)||{};(0,r.hasProperty)(e,"AppStateController")&&(0,s.isObject)(e.AppStateController)&&(0,r.hasProperty)(e.AppStateController,"showProductTour")&&e.AppStateController.showProductTour!==undefined&&delete t.showProductTour}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=115}}},{package:"$root$",file:"app/scripts/migrations/115.ts"}],[257,{"@metamask/transaction-controller":2647,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TARGET_DATE=n.StuckTransactionError=void 0,n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){var t;const n=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)??[];for(const e of n)if(e.time<a&&o.includes(e.status)){e.status=r.TransactionStatus.failed;e.error=f}}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/transaction-controller");const i=n.version=116,a=n.TARGET_DATE=new Date("2023-12-08T00:00:00Z").getTime(),o=[r.TransactionStatus.approved,r.TransactionStatus.signed],f=n.StuckTransactionError={name:"StuckTransactionDueToStatus",message:"Transaction is stuck due to status - migration 115"}}}},{package:"$root$",file:"app/scripts/migrations/116.ts"}],[258,{"@metamask/utils":2765,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=o,function(e){const t=e.SelectedNetworkController;if(!t)return void i.default.warn("Skipping migration. SelectedNetworkController state not found.");if(!(0,a.isObject)(t)){var n,s;return void(null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("SelectedNetworkController is not an object.")))}if(!(0,a.hasProperty)(t,"domains")){var r,o;return void(null===(r=global.sentry)||void 0===r||null===(o=r.captureException)||void 0===o||o.call(r,new Error("Domains key is missing in SelectedNetworkController state.")))}if(!(0,a.isObject)(t.domains)){var f,c;return void(null===(f=global.sentry)||void 0===f||null===(c=f.captureException)||void 0===c||c.call(f,new Error("Domains state is not an object.")))}const{domains:l}=t,u=Object.keys(l).reduce(((e,t)=>(t.startsWith("npm:")||t.startsWith("local:")||(e[t]=l[t]),e)),{});t.domains=u}(t.data),t},n.version=void 0;var s,r=e("lodash"),i=(s=e("loglevel"))&&s.__esModule?s:{default:s},a=e("@metamask/utils");const o=n.version=117}}},{package:"$root$",file:"app/scripts/migrations/117.ts"}],[259,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){if(!(0,r.hasProperty)(e,"PreferencesController"))return e;if(!(0,r.isObject)(e.PreferencesController)){var t,n;const s=typeof e.PreferencesController;null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error(`state.PreferencesController is type: ${s}`)),e.PreferencesController={}}!1!==e.PreferencesController.useRequestQueue&&e.PreferencesController.useRequestQueue!==undefined||(e.PreferencesController.useRequestQueue=!0)}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=118}}},{package:"$root$",file:"app/scripts/migrations/118.ts"}],[26,{"@metamask/base-controller":1353,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultOnboardingControllerState=n.default=void 0;var s,r=e("@metamask/base-controller"),i=(s=e("loglevel"))&&s.__esModule?s:{default:s};function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=()=>({seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1});n.getDefaultOnboardingControllerState=o;const f={onboardingTabs:{}},c={seedPhraseBackedUp:{persist:!0,anonymous:!0},firstTimeFlowType:{persist:!0,anonymous:!0},completedOnboarding:{persist:!0,anonymous:!0},onboardingTabs:{persist:!1,anonymous:!1}};class l extends r.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:c,name:"OnboardingController",state:{seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1,...t,...f}}),a(this,"registerOnboarding",(async(e,t)=>{if(this.state.completedOnboarding)return void i.default.debug("Ignoring registerOnboarding; user already onboarded");const{onboardingTabs:n}={...this.state??{}};n&&(n[e]&&n[e]===t||(i.default.debug(`Registering onboarding tab at location '${e}' with tabId '${t}'`),this.update((s=>{s.onboardingTabs={...n,[e]:t}}))))}))}setSeedPhraseBackedUp(e){this.update((t=>{t.seedPhraseBackedUp=e}))}completeOnboarding(){return this.update((e=>{e.completedOnboarding=!0})),!0}setFirstTimeFlowType(e){this.update((t=>{t.firstTimeFlowType=e}))}}n.default=l}}},{package:"$root$",file:"app/scripts/controllers/onboarding.ts"}],[260,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.AccountsController)||{};(0,s.isObject)(e.AccountsController)&&(0,r.hasProperty)(e.AccountsController,"internalAccounts")&&(0,r.hasProperty)(e.AccountsController.internalAccounts,"accounts")&&Array.isArray(Object.values(e.AccountsController.internalAccounts.accounts))&&Object.values(e.AccountsController.internalAccounts.accounts).length>0&&Object.values(t.internalAccounts.accounts).forEach((e=>{var t;null!==(t=e.metadata)&&void 0!==t&&t.importTime||(e.metadata.importTime=Date.now())}))}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=119}}},{package:"$root$",file:"app/scripts/migrations/119.ts"}],[261,{"@metamask/utils":2765,"@sentry/browser":2892,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=a,function(e){if(!(0,r.hasProperty)(e,"UserStorageController"))return e.UserStorageController={isProfileSyncingEnabled:null},e;if(!(0,s.isObject)(e.UserStorageController)||!(0,r.hasProperty)(e.UserStorageController,"isProfileSyncingEnabled"))return(0,i.captureException)(`Migration ${a}: Invalid UserStorageController state: ${typeof e.UserStorageController}`),e;e.UserStorageController.isProfileSyncingEnabled=null}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils"),i=e("@sentry/browser");const a=n.version=120.1}}},{package:"$root$",file:"app/scripts/migrations/120.1.ts"}],[262,{"@metamask/utils":2765,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=o,function(e){(function(e){if(!(0,i.hasProperty)(e,"SnapController"))return;var t,n;if(!(0,i.isObject)(e.SnapController))return void(null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error(`Migration ${o}: Invalid SnapController state of type '${typeof e.SnapController}'`)));delete e.SnapController.snapErrors})(e),function(e){if(!(0,i.hasProperty)(e,"SelectedNetworkController"))return;(0,i.isObject)(e.SelectedNetworkController)?(0,i.hasProperty)(e.SelectedNetworkController,"perDomainNetwork")&&delete e.SelectedNetworkController:(console.error(`Migration ${o}: Invalid SelectedNetworkController state of type '${typeof e.SelectedNetworkController}'`),delete e.SelectedNetworkController)}(e),function(e){if(!(0,i.hasProperty)(e,"NetworkController"))return;var t,n;if(!(0,i.isObject)(e.NetworkController))return void(null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error(`Migration ${o}: Invalid NetworkController state of type '${typeof e.NetworkController}'`)));const s=e.NetworkController;if((0,i.hasProperty)(s,"providerConfig")&&s.providerConfig!==undefined){var r,f;if(!(0,i.isObject)(s.providerConfig))return void(null===(r=global.sentry)||void 0===r||null===(f=r.captureException)||void 0===f||f.call(r,new Error(`Migration ${o}: Invalid NetworkController providerConfig state of type '${typeof e.NetworkController.providerConfig}'`)));const{providerConfig:t}=s,n=[];if((0,i.hasProperty)(s,"networkConfigurations")){var c,l;if(!(0,i.isObject)(s.networkConfigurations))return void(null===(c=global.sentry)||void 0===c||null===(l=c.captureException)||void 0===l||l.call(c,new Error(`Migration ${o}: Invalid NetworkController networkConfigurations state of type '${typeof s.networkConfigurations}'`)));n.push(...Object.keys(s.networkConfigurations))}(0,i.hasProperty)(t,"id")&&("string"==typeof t.id&&n.includes(t.id)||(a.default.warn(`Migration ${o}: Removing invalid provider id ${t.id}`),delete t.id))}delete s.networkDetails,delete s.networkId,delete s.networkStatus,delete s.previousProviderStore,delete s.provider}(e),function(e){if(!(0,i.hasProperty)(e,"PhishingController"))return;if(!(0,i.isObject)(e.PhishingController))return void global.sentry.captureException(new Error(`Migration ${o}: Invalid PhishingController state of type '${typeof e.PhishingController}'`));(0,i.hasProperty)(e.PhishingController,"listState")&&delete e.PhishingController.listState}(e)}(t.data),t},n.version=void 0;var s,r=e("lodash"),i=e("@metamask/utils"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=n.version=120.2}}},{package:"$root$",file:"app/scripts/migrations/120.2.ts"}],[263,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){(function(e){if(!(0,s.hasProperty)(e,"CurrencyController"))return;var t,n;if(!(0,s.isObject)(e.CurrencyController))return void(null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error(`Migration ${i}: Invalid CurrencyController state of type '${typeof e.CurrencyController}'`)));delete e.CurrencyController.conversionDate,delete e.CurrencyController.conversionRate,delete e.CurrencyController.nativeCurrency,delete e.CurrencyController.pendingCurrentCurrency,delete e.CurrencyController.pendingNativeCurrency,delete e.CurrencyController.usdConversionRate})(e),function(e){if(!(0,s.hasProperty)(e,"PhishingController"))return;var t,n;if(!(0,s.isObject)(e.PhishingController))return void(null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error(`Migration ${i}: Invalid PhishingController state of type '${typeof e.PhishingController}'`)));delete e.PhishingController.phishing,delete e.PhishingController.lastFetched}(e),function(e){if(!(0,s.hasProperty)(e,"NetworkController"))return;var t,n;if(!(0,s.isObject)(e.NetworkController))return void(null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error(`Migration ${i}: Invalid NetworkController state of type '${typeof e.NetworkController}'`)));delete e.NetworkController.network}(e)}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=120.4}}},{package:"$root$",file:"app/scripts/migrations/120.4.ts"}],[2630,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports={hstBytecode:"0x6101406040523480156200001257600080fd5b506040516200323e3803806200323e83398181016040528101906200003891906200065b565b82806040518060400160405280600181526020017f310000000000000000000000000000000000000000000000000000000000000081525085848682600390816200008491906200094c565b5081600490816200009691906200094c565b5080600560006101000a81548160ff021916908360ff160217905550505050620000d5620000c9620001ce60201b60201c565b620001d660201b60201c565b60008280519060200120905060008280519060200120905060007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f90508260e081815250508161010081815250504660a081815250506200013e8184846200029c60201b60201c565b608081815250503073ffffffffffffffffffffffffffffffffffffffff1660c08173ffffffffffffffffffffffffffffffffffffffff1681525050806101208181525050505050505050620001c433600560009054906101000a900460ff16600a620001ab919062000bb6565b86620001b8919062000c07565b620002d860201b60201c565b5050505062000dfb565b600033905090565b6000600560019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60008383834630604051602001620002b995949392919062000cc3565b6040516020818303038152906040528051906020012090509392505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036200034a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620003419062000d81565b60405180910390fd5b6200035e600083836200044560201b60201c565b806002600082825462000372919062000da3565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405162000425919062000dde565b60405180910390a362000441600083836200044a60201b60201c565b5050565b505050565b505050565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b620004788162000463565b81146200048457600080fd5b50565b60008151905062000498816200046d565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b620004f382620004a8565b810181811067ffffffffffffffff82111715620005155762000514620004b9565b5b80604052505050565b60006200052a6200044f565b9050620005388282620004e8565b919050565b600067ffffffffffffffff8211156200055b576200055a620004b9565b5b6200056682620004a8565b9050602081019050919050565b60005b838110156200059357808201518184015260208101905062000576565b60008484015250505050565b6000620005b6620005b0846200053d565b6200051e565b905082815260208101848484011115620005d557620005d4620004a3565b5b620005e284828562000573565b509392505050565b600082601f8301126200060257620006016200049e565b5b8151620006148482602086016200059f565b91505092915050565b600060ff82169050919050565b62000635816200061d565b81146200064157600080fd5b50565b60008151905062000655816200062a565b92915050565b6000806000806080858703121562000678576200067762000459565b5b6000620006888782880162000487565b945050602085015167ffffffffffffffff811115620006ac57620006ab6200045e565b5b620006ba87828801620005ea565b9350506040620006cd8782880162000644565b925050606085015167ffffffffffffffff811115620006f157620006f06200045e565b5b620006ff87828801620005ea565b91505092959194509250565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200075e57607f821691505b60208210810362000774576200077362000716565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620007de7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200079f565b620007ea86836200079f565b95508019841693508086168417925050509392505050565b6000819050919050565b60006200082d62000827620008218462000463565b62000802565b62000463565b9050919050565b6000819050919050565b62000849836200080c565b62000861620008588262000834565b848454620007ac565b825550505050565b600090565b6200087862000869565b620008858184846200083e565b505050565b5b81811015620008ad57620008a16000826200086e565b6001810190506200088b565b5050565b601f821115620008fc57620008c6816200077a565b620008d1846200078f565b81016020851015620008e1578190505b620008f9620008f0856200078f565b8301826200088a565b50505b505050565b600082821c905092915050565b6000620009216000198460080262000901565b1980831691505092915050565b60006200093c83836200090e565b9150826002028217905092915050565b62000957826200070b565b67ffffffffffffffff811115620009735762000972620004b9565b5b6200097f825462000745565b6200098c828285620008b1565b600060209050601f831160018114620009c45760008415620009af578287015190505b620009bb85826200092e565b86555062000a2b565b601f198416620009d4866200077a565b60005b82811015620009fe57848901518255600182019150602085019450602081019050620009d7565b8683101562000a1e578489015162000a1a601f8916826200090e565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008160011c9050919050565b6000808291508390505b600185111562000ac15780860481111562000a995762000a9862000a33565b5b600185161562000aa95780820291505b808102905062000ab98562000a62565b945062000a79565b94509492505050565b60008262000adc576001905062000baf565b8162000aec576000905062000baf565b816001811462000b05576002811462000b105762000b46565b600191505062000baf565b60ff84111562000b255762000b2462000a33565b5b8360020a91508482111562000b3f5762000b3e62000a33565b5b5062000baf565b5060208310610133831016604e8410600b841016171562000b805782820a90508381111562000b7a5762000b7962000a33565b5b62000baf565b62000b8f848484600162000a6f565b9250905081840481111562000ba95762000ba862000a33565b5b81810290505b9392505050565b600062000bc38262000463565b915062000bd0836200061d565b925062000bff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff848462000aca565b905092915050565b600062000c148262000463565b915062000c218362000463565b925082820262000c318162000463565b9150828204841483151762000c4b5762000c4a62000a33565b5b5092915050565b6000819050919050565b62000c678162000c52565b82525050565b62000c788162000463565b82525050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600062000cab8262000c7e565b9050919050565b62000cbd8162000c9e565b82525050565b600060a08201905062000cda600083018862000c5c565b62000ce9602083018762000c5c565b62000cf8604083018662000c5c565b62000d07606083018562000c6d565b62000d16608083018462000cb2565b9695505050505050565b600082825260208201905092915050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b600062000d69601f8362000d20565b915062000d768262000d31565b602082019050919050565b6000602082019050818103600083015262000d9c8162000d5a565b9050919050565b600062000db08262000463565b915062000dbd8362000463565b925082820190508082111562000dd85762000dd762000a33565b5b92915050565b600060208201905062000df5600083018462000c6d565b92915050565b60805160a05160c05160e05161010051610120516123f362000e4b6000396000610ed901526000610f1b01526000610efa01526000610e2f01526000610e8501526000610eae01526123f36000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c8063715018a6116100a2578063a457c2d711610071578063a457c2d7146102e5578063a9059cbb14610315578063d505accf14610345578063dd62ed3e14610361578063f2fde38b1461039157610116565b8063715018a61461026f5780637ecebe00146102795780638da5cb5b146102a957806395d89b41146102c757610116565b8063313ce567116100e9578063313ce567146101b75780633644e515146101d557806339509351146101f357806340c10f191461022357806370a082311461023f57610116565b806306fdde031461011b578063095ea7b31461013957806318160ddd1461016957806323b872dd14610187575b600080fd5b6101236103ad565b60405161013091906115f5565b60405180910390f35b610153600480360381019061014e91906116b0565b61043f565b604051610160919061170b565b60405180910390f35b610171610462565b60405161017e9190611735565b60405180910390f35b6101a1600480360381019061019c9190611750565b61046c565b6040516101ae919061170b565b60405180910390f35b6101bf61049b565b6040516101cc91906117bf565b60405180910390f35b6101dd6104ae565b6040516101ea91906117f3565b60405180910390f35b61020d600480360381019061020891906116b0565b6104bd565b60405161021a919061170b565b60405180910390f35b61023d600480360381019061023891906116b0565b6104f4565b005b6102596004803603810190610254919061180e565b61050a565b6040516102669190611735565b60405180910390f35b610277610552565b005b610293600480360381019061028e919061180e565b610566565b6040516102a09190611735565b60405180910390f35b6102b16105b6565b6040516102be919061184a565b60405180910390f35b6102cf6105e0565b6040516102dc91906115f5565b60405180910390f35b6102ff60048036038101906102fa91906116b0565b610672565b60405161030c919061170b565b60405180910390f35b61032f600480360381019061032a91906116b0565b6106e9565b60405161033c919061170b565b60405180910390f35b61035f600480360381019061035a91906118bd565b61070c565b005b61037b6004803603810190610376919061195f565b61084e565b6040516103889190611735565b60405180910390f35b6103ab60048036038101906103a6919061180e565b6108d5565b005b6060600380546103bc906119ce565b80601f01602080910402602001604051908101604052809291908181526020018280546103e8906119ce565b80156104355780601f1061040a57610100808354040283529160200191610435565b820191906000526020600020905b81548152906001019060200180831161041857829003601f168201915b5050505050905090565b60008061044a610958565b9050610457818585610960565b600191505092915050565b6000600254905090565b600080610477610958565b9050610484858285610b29565b61048f858585610bb5565b60019150509392505050565b600560009054906101000a900460ff1681565b60006104b8610e2b565b905090565b6000806104c8610958565b90506104e98185856104da858961084e565b6104e49190611a2e565b610960565b600191505092915050565b6104fc610f45565b6105068282610fc3565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b61055a610f45565b6105646000611119565b565b60006105af600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206111df565b9050919050565b6000600560019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6060600480546105ef906119ce565b80601f016020809104026020016040519081016040528092919081815260200182805461061b906119ce565b80156106685780601f1061063d57610100808354040283529160200191610668565b820191906000526020600020905b81548152906001019060200180831161064b57829003601f168201915b5050505050905090565b60008061067d610958565b9050600061068b828661084e565b9050838110156106d0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c790611ad4565b60405180910390fd5b6106dd8286868403610960565b60019250505092915050565b6000806106f4610958565b9050610701818585610bb5565b600191505092915050565b8342111561074f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161074690611b40565b60405180910390fd5b60007f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c988888861077e8c6111ed565b8960405160200161079496959493929190611b60565b60405160208183030381529060405280519060200120905060006107b78261124b565b905060006107c782878787611265565b90508973ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610837576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082e90611c0d565b60405180910390fd5b6108428a8a8a610960565b50505050505050505050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b6108dd610f45565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160361094c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161094390611c9f565b60405180910390fd5b61095581611119565b50565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036109cf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109c690611d31565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610a3e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a3590611dc3565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92583604051610b1c9190611735565b60405180910390a3505050565b6000610b35848461084e565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8114610baf5781811015610ba1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b9890611e2f565b60405180910390fd5b610bae8484848403610960565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610c24576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c1b90611ec1565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610c93576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c8a90611f53565b60405180910390fd5b610c9e838383611290565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610d24576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d1b90611fe5565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610e129190611735565b60405180910390a3610e25848484611295565b50505050565b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff16148015610ea757507f000000000000000000000000000000000000000000000000000000000000000046145b15610ed4577f00000000000000000000000000000000000000000000000000000000000000009050610f42565b610f3f7f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000000061129a565b90505b90565b610f4d610958565b73ffffffffffffffffffffffffffffffffffffffff16610f6b6105b6565b73ffffffffffffffffffffffffffffffffffffffff1614610fc1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fb890612051565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603611032576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611029906120bd565b60405180910390fd5b61103e60008383611290565b80600260008282546110509190611a2e565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516111019190611735565b60405180910390a361111560008383611295565b5050565b6000600560019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600081600001549050919050565b600080600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905061123a816111df565b9150611245816112d4565b50919050565b600061125e611258610e2b565b836112ea565b9050919050565b60008060006112768787878761131d565b91509150611283816113ff565b8192505050949350505050565b505050565b505050565b600083838346306040516020016112b59594939291906120dd565b6040516020818303038152906040528051906020012090509392505050565b6001816000016000828254019250508190555050565b600082826040516020016112ff9291906121a8565b60405160208183030381529060405280519060200120905092915050565b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08360001c11156113585760006003915091506113f6565b60006001878787876040516000815260200160405260405161137d94939291906121df565b6020604051602081039080840390855afa15801561139f573d6000803e3d6000fd5b505050602060405103519050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036113ed576000600192509250506113f6565b80600092509250505b94509492505050565b6000600481111561141357611412612224565b5b81600481111561142657611425612224565b5b031561156257600160048111156114405761143f612224565b5b81600481111561145357611452612224565b5b03611493576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161148a9061229f565b60405180910390fd5b600260048111156114a7576114a6612224565b5b8160048111156114ba576114b9612224565b5b036114fa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114f19061230b565b60405180910390fd5b6003600481111561150e5761150d612224565b5b81600481111561152157611520612224565b5b03611561576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115589061239d565b60405180910390fd5b5b50565b600081519050919050565b600082825260208201905092915050565b60005b8381101561159f578082015181840152602081019050611584565b60008484015250505050565b6000601f19601f8301169050919050565b60006115c782611565565b6115d18185611570565b93506115e1818560208601611581565b6115ea816115ab565b840191505092915050565b6000602082019050818103600083015261160f81846115bc565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006116478261161c565b9050919050565b6116578161163c565b811461166257600080fd5b50565b6000813590506116748161164e565b92915050565b6000819050919050565b61168d8161167a565b811461169857600080fd5b50565b6000813590506116aa81611684565b92915050565b600080604083850312156116c7576116c6611617565b5b60006116d585828601611665565b92505060206116e68582860161169b565b9150509250929050565b60008115159050919050565b611705816116f0565b82525050565b600060208201905061172060008301846116fc565b92915050565b61172f8161167a565b82525050565b600060208201905061174a6000830184611726565b92915050565b60008060006060848603121561176957611768611617565b5b600061177786828701611665565b935050602061178886828701611665565b92505060406117998682870161169b565b9150509250925092565b600060ff82169050919050565b6117b9816117a3565b82525050565b60006020820190506117d460008301846117b0565b92915050565b6000819050919050565b6117ed816117da565b82525050565b600060208201905061180860008301846117e4565b92915050565b60006020828403121561182457611823611617565b5b600061183284828501611665565b91505092915050565b6118448161163c565b82525050565b600060208201905061185f600083018461183b565b92915050565b61186e816117a3565b811461187957600080fd5b50565b60008135905061188b81611865565b92915050565b61189a816117da565b81146118a557600080fd5b50565b6000813590506118b781611891565b92915050565b600080600080600080600060e0888a0312156118dc576118db611617565b5b60006118ea8a828b01611665565b97505060206118fb8a828b01611665565b965050604061190c8a828b0161169b565b955050606061191d8a828b0161169b565b945050608061192e8a828b0161187c565b93505060a061193f8a828b016118a8565b92505060c06119508a828b016118a8565b91505092959891949750929550565b6000806040838503121561197657611975611617565b5b600061198485828601611665565b925050602061199585828601611665565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806119e657607f821691505b6020821081036119f9576119f861199f565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611a398261167a565b9150611a448361167a565b9250828201905080821115611a5c57611a5b6119ff565b5b92915050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760008201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b6000611abe602583611570565b9150611ac982611a62565b604082019050919050565b60006020820190508181036000830152611aed81611ab1565b9050919050565b7f45524332305065726d69743a206578706972656420646561646c696e65000000600082015250565b6000611b2a601d83611570565b9150611b3582611af4565b602082019050919050565b60006020820190508181036000830152611b5981611b1d565b9050919050565b600060c082019050611b7560008301896117e4565b611b82602083018861183b565b611b8f604083018761183b565b611b9c6060830186611726565b611ba96080830185611726565b611bb660a0830184611726565b979650505050505050565b7f45524332305065726d69743a20696e76616c6964207369676e61747572650000600082015250565b6000611bf7601e83611570565b9150611c0282611bc1565b602082019050919050565b60006020820190508181036000830152611c2681611bea565b9050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b6000611c89602683611570565b9150611c9482611c2d565b604082019050919050565b60006020820190508181036000830152611cb881611c7c565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b6000611d1b602483611570565b9150611d2682611cbf565b604082019050919050565b60006020820190508181036000830152611d4a81611d0e565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f20616464726560008201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b6000611dad602283611570565b9150611db882611d51565b604082019050919050565b60006020820190508181036000830152611ddc81611da0565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000600082015250565b6000611e19601d83611570565b9150611e2482611de3565b602082019050919050565b60006020820190508181036000830152611e4881611e0c565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000611eab602583611570565b9150611eb682611e4f565b604082019050919050565b60006020820190508181036000830152611eda81611e9e565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f206164647260008201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b6000611f3d602383611570565b9150611f4882611ee1565b604082019050919050565b60006020820190508181036000830152611f6c81611f30565b9050919050565b7f45524332303a207472616e7366657220616d6f756e742065786365656473206260008201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b6000611fcf602683611570565b9150611fda82611f73565b604082019050919050565b60006020820190508181036000830152611ffe81611fc2565b9050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b600061203b602083611570565b915061204682612005565b602082019050919050565b6000602082019050818103600083015261206a8161202e565b9050919050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b60006120a7601f83611570565b91506120b282612071565b602082019050919050565b600060208201905081810360008301526120d68161209a565b9050919050565b600060a0820190506120f260008301886117e4565b6120ff60208301876117e4565b61210c60408301866117e4565b6121196060830185611726565b612126608083018461183b565b9695505050505050565b600081905092915050565b7f1901000000000000000000000000000000000000000000000000000000000000600082015250565b6000612171600283612130565b915061217c8261213b565b600282019050919050565b6000819050919050565b6121a261219d826117da565b612187565b82525050565b60006121b382612164565b91506121bf8285612191565b6020820191506121cf8284612191565b6020820191508190509392505050565b60006080820190506121f460008301876117e4565b61220160208301866117b0565b61220e60408301856117e4565b61221b60608301846117e4565b95945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b7f45434453413a20696e76616c6964207369676e61747572650000000000000000600082015250565b6000612289601883611570565b915061229482612253565b602082019050919050565b600060208201905081810360008301526122b88161227c565b9050919050565b7f45434453413a20696e76616c6964207369676e6174757265206c656e67746800600082015250565b60006122f5601f83611570565b9150612300826122bf565b602082019050919050565b60006020820190508181036000830152612324816122e8565b9050919050565b7f45434453413a20696e76616c6964207369676e6174757265202773272076616c60008201527f7565000000000000000000000000000000000000000000000000000000000000602082015250565b6000612387602283611570565b91506123928261232b565b604082019050919050565b600060208201905081810360008301526123b68161237a565b905091905056fea26469706673582212205e8d7bb733a28b307c6266e71d7fce8f78067e564cdf5e388464ca543c2ea25b64736f6c63430008120033",hstAbi:[{inputs:[{internalType:"uint256",name:"initialAmount",type:"uint256"},{internalType:"string",name:"tokenName",type:"string"},{internalType:"uint8",name:"decimalUnits",type:"uint8"},{internalType:"string",name:"tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],piggybankBytecode:"0x608060405234801561001057600080fd5b5033600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000808190555061023b806100686000396000f300608060405260043610610057576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680632e1a7d4d1461005c5780638da5cb5b1461009d578063d0e30db0146100f4575b600080fd5b34801561006857600080fd5b5061008760048036038101908080359060200190929190505050610112565b6040518082815260200191505060405180910390f35b3480156100a957600080fd5b506100b26101d0565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6100fc6101f6565b6040518082815260200191505060405180910390f35b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561017057600080fd5b8160008082825403925050819055503373ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f193505050501580156101c5573d6000803e3d6000fd5b506000549050919050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60003460008082825401925050819055506000549050905600a165627a7a72305820f237db3ec816a52589d82512117bc85bc08d3537683ffeff9059108caf3e5d400029",piggybankAbi:[{constant:!1,inputs:[{name:"withdrawAmount",type:"uint256"}],name:"withdraw",outputs:[{name:"remainingBal",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"deposit",outputs:[{name:"",type:"uint256"}],payable:!0,stateMutability:"payable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"}],nftsAbi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTokens",type:"uint256"}],name:"mintNFTs",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],nftsBytecode:"0x60806040523480156200001157600080fd5b506040518060400160405280600c81526020017f54657374446170704e46547300000000000000000000000000000000000000008152506040518060400160405280600381526020017f54444e000000000000000000000000000000000000000000000000000000000081525081600090816200008f919062000324565b508060019081620000a1919062000324565b5050506200040b565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200012c57607f821691505b602082108103620001425762000141620000e4565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620001ac7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200016d565b620001b886836200016d565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b600062000205620001ff620001f984620001d0565b620001da565b620001d0565b9050919050565b6000819050919050565b6200022183620001e4565b6200023962000230826200020c565b8484546200017a565b825550505050565b600090565b6200025062000241565b6200025d81848462000216565b505050565b5b8181101562000285576200027960008262000246565b60018101905062000263565b5050565b601f821115620002d4576200029e8162000148565b620002a9846200015d565b81016020851015620002b9578190505b620002d1620002c8856200015d565b83018262000262565b50505b505050565b600082821c905092915050565b6000620002f960001984600802620002d9565b1980831691505092915050565b6000620003148383620002e6565b9150826002028217905092915050565b6200032f82620000aa565b67ffffffffffffffff8111156200034b576200034a620000b5565b5b62000357825462000113565b6200036482828562000289565b600060209050601f8311600181146200039c576000841562000387578287015190505b62000393858262000306565b86555062000403565b601f198416620003ac8662000148565b60005b82811015620003d657848901518255600182019150602085019450602081019050620003af565b86831015620003f65784890151620003f2601f891682620002e6565b8355505b6001600288020188555050505b505050505050565b612be6806200041b6000396000f3fe608060405234801561001057600080fd5b50600436106100f45760003560e01c806342842e0e11610097578063a22cb46511610066578063a22cb46514610283578063b88d4fde1461029f578063c87b56dd146102bb578063e985e9c5146102eb576100f4565b806342842e0e146101e95780636352211e1461020557806370a082311461023557806395d89b4114610265576100f4565b8063081812fc116100d3578063081812fc14610165578063095ea7b31461019557806323b872dd146101b15780633b4b1381146101cd576100f4565b80629a9b7b146100f957806301ffc9a71461011757806306fdde0314610147575b600080fd5b61010161031b565b60405161010e91906119ac565b60405180910390f35b610131600480360381019061012c9190611a33565b61032c565b60405161013e9190611a7b565b60405180910390f35b61014f61040e565b60405161015c9190611b26565b60405180910390f35b61017f600480360381019061017a9190611b74565b6104a0565b60405161018c9190611be2565b60405180910390f35b6101af60048036038101906101aa9190611c29565b6104e6565b005b6101cb60048036038101906101c69190611c69565b6105fd565b005b6101e760048036038101906101e29190611b74565b61065d565b005b61020360048036038101906101fe9190611c69565b6106ac565b005b61021f600480360381019061021a9190611b74565b6106cc565b60405161022c9190611be2565b60405180910390f35b61024f600480360381019061024a9190611cbc565b610752565b60405161025c91906119ac565b60405180910390f35b61026d610809565b60405161027a9190611b26565b60405180910390f35b61029d60048036038101906102989190611d15565b61089b565b005b6102b960048036038101906102b49190611e8a565b6108b1565b005b6102d560048036038101906102d09190611b74565b610913565b6040516102e29190611b26565b60405180910390f35b61030560048036038101906103009190611f0d565b6109ac565b6040516103129190611a7b565b60405180910390f35b60006103276006610a40565b905090565b60007f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806103f757507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b80610407575061040682610a4e565b5b9050919050565b60606000805461041d90611f7c565b80601f016020809104026020016040519081016040528092919081815260200182805461044990611f7c565b80156104965780601f1061046b57610100808354040283529160200191610496565b820191906000526020600020905b81548152906001019060200180831161047957829003601f168201915b5050505050905090565b60006104ab82610ab8565b6004600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b60006104f1826106cc565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610561576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105589061201f565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16610580610b03565b73ffffffffffffffffffffffffffffffffffffffff1614806105af57506105ae816105a9610b03565b6109ac565b5b6105ee576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e5906120b1565b60405180910390fd5b6105f88383610b0b565b505050565b61060e610608610b03565b82610bc4565b61064d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161064490612143565b60405180910390fd5b610658838383610c59565b505050565b6000600190505b8181116106a8576106756006610f52565b60006106816006610a40565b905061069461068e610b03565b82610f68565b5080806106a090612192565b915050610664565b5050565b6106c7838383604051806020016040528060008152506108b1565b505050565b6000806106d883610f86565b9050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610749576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161074090612226565b60405180910390fd5b80915050919050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107b9906122b8565b60405180910390fd5b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60606001805461081890611f7c565b80601f016020809104026020016040519081016040528092919081815260200182805461084490611f7c565b80156108915780601f1061086657610100808354040283529160200191610891565b820191906000526020600020905b81548152906001019060200180831161087457829003601f168201915b5050505050905090565b6108ad6108a6610b03565b8383610fc3565b5050565b6108c26108bc610b03565b83610bc4565b610901576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108f890612143565b60405180910390fd5b61090d8484848461112f565b50505050565b6060600060405180610160016040528061013c8152602001612a7561013c9139905060006109408461118b565b61094983611259565b6109528661118b565b604051602001610964939291906124b6565b6040516020818303038152906040529050600061098082611259565b604051602001610990919061255f565b6040516020818303038152906040529050809350505050919050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b600081600001549050919050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b610ac1816113d1565b610b00576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610af790612226565b60405180910390fd5b50565b600033905090565b816004600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16610b7e836106cc565b73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b600080610bd0836106cc565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480610c125750610c1181856109ac565b5b80610c5057508373ffffffffffffffffffffffffffffffffffffffff16610c38846104a0565b73ffffffffffffffffffffffffffffffffffffffff16145b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff16610c79826106cc565b73ffffffffffffffffffffffffffffffffffffffff1614610ccf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cc6906125f3565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610d3e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3590612685565b60405180910390fd5b610d4b8383836001611412565b8273ffffffffffffffffffffffffffffffffffffffff16610d6b826106cc565b73ffffffffffffffffffffffffffffffffffffffff1614610dc1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610db8906125f3565b60405180910390fd5b6004600082815260200190815260200160002060006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055506001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4610f4d8383836001611418565b505050565b6001816000016000828254019250508190555050565b610f8282826040518060200160405280600081525061141e565b5050565b60006002600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603611031576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611028906126f1565b60405180910390fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516111229190611a7b565b60405180910390a3505050565b61113a848484610c59565b61114684848484611479565b611185576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161117c90612783565b60405180910390fd5b50505050565b60606000600161119a84611600565b01905060008167ffffffffffffffff8111156111b9576111b8611d5f565b5b6040519080825280601f01601f1916602001820160405280156111eb5781602001600182028036833780820191505090505b509050600082602001820190505b60011561124e578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a8581611242576112416127a3565b5b049450600085036111f9575b819350505050919050565b6060600082510361127b576040518060200160405280600081525090506113cc565b6000604051806060016040528060408152602001612a3560409139905060006003600285516112aa91906127d2565b6112b49190612806565b60046112c09190612837565b905060006020826112d191906127d2565b67ffffffffffffffff8111156112ea576112e9611d5f565b5b6040519080825280601f01601f19166020018201604052801561131c5781602001600182028036833780820191505090505b509050818152600183018586518101602084015b8183101561138b576003830192508251603f8160121c168501518253600182019150603f81600c1c168501518253600182019150603f8160061c168501518253600182019150603f8116850151825360018201915050611330565b6003895106600181146113a557600281146113b5576113c0565b613d3d60f01b60028303526113c0565b603d60f81b60018303525b50505050508093505050505b919050565b60008073ffffffffffffffffffffffffffffffffffffffff166113f383610f86565b73ffffffffffffffffffffffffffffffffffffffff1614159050919050565b50505050565b50505050565b6114288383611753565b6114356000848484611479565b611474576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161146b90612783565b60405180910390fd5b505050565b600061149a8473ffffffffffffffffffffffffffffffffffffffff16611970565b156115f3578373ffffffffffffffffffffffffffffffffffffffff1663150b7a026114c3610b03565b8786866040518563ffffffff1660e01b81526004016114e594939291906128ce565b6020604051808303816000875af192505050801561152157506040513d601f19601f8201168201806040525081019061151e919061292f565b60015b6115a3573d8060008114611551576040519150601f19603f3d011682016040523d82523d6000602084013e611556565b606091505b50600081510361159b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161159290612783565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149150506115f8565b600190505b949350505050565b600080600090507a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000831061165e577a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008381611654576116536127a3565b5b0492506040810190505b6d04ee2d6d415b85acef8100000000831061169b576d04ee2d6d415b85acef81000000008381611691576116906127a3565b5b0492506020810190505b662386f26fc1000083106116ca57662386f26fc1000083816116c0576116bf6127a3565b5b0492506010810190505b6305f5e10083106116f3576305f5e10083816116e9576116e86127a3565b5b0492506008810190505b612710831061171857612710838161170e5761170d6127a3565b5b0492506004810190505b6064831061173b5760648381611731576117306127a3565b5b0492506002810190505b600a831061174a576001810190505b80915050919050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036117c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117b9906129a8565b60405180910390fd5b6117cb816113d1565b1561180b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161180290612a14565b60405180910390fd5b611819600083836001611412565b611822816113d1565b15611862576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161185990612a14565b60405180910390fd5b6001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a461196c600083836001611418565b5050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b6000819050919050565b6119a681611993565b82525050565b60006020820190506119c1600083018461199d565b92915050565b6000604051905090565b600080fd5b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b611a10816119db565b8114611a1b57600080fd5b50565b600081359050611a2d81611a07565b92915050565b600060208284031215611a4957611a486119d1565b5b6000611a5784828501611a1e565b91505092915050565b60008115159050919050565b611a7581611a60565b82525050565b6000602082019050611a906000830184611a6c565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611ad0578082015181840152602081019050611ab5565b60008484015250505050565b6000601f19601f8301169050919050565b6000611af882611a96565b611b028185611aa1565b9350611b12818560208601611ab2565b611b1b81611adc565b840191505092915050565b60006020820190508181036000830152611b408184611aed565b905092915050565b611b5181611993565b8114611b5c57600080fd5b50565b600081359050611b6e81611b48565b92915050565b600060208284031215611b8a57611b896119d1565b5b6000611b9884828501611b5f565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611bcc82611ba1565b9050919050565b611bdc81611bc1565b82525050565b6000602082019050611bf76000830184611bd3565b92915050565b611c0681611bc1565b8114611c1157600080fd5b50565b600081359050611c2381611bfd565b92915050565b60008060408385031215611c4057611c3f6119d1565b5b6000611c4e85828601611c14565b9250506020611c5f85828601611b5f565b9150509250929050565b600080600060608486031215611c8257611c816119d1565b5b6000611c9086828701611c14565b9350506020611ca186828701611c14565b9250506040611cb286828701611b5f565b9150509250925092565b600060208284031215611cd257611cd16119d1565b5b6000611ce084828501611c14565b91505092915050565b611cf281611a60565b8114611cfd57600080fd5b50565b600081359050611d0f81611ce9565b92915050565b60008060408385031215611d2c57611d2b6119d1565b5b6000611d3a85828601611c14565b9250506020611d4b85828601611d00565b9150509250929050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611d9782611adc565b810181811067ffffffffffffffff82111715611db657611db5611d5f565b5b80604052505050565b6000611dc96119c7565b9050611dd58282611d8e565b919050565b600067ffffffffffffffff821115611df557611df4611d5f565b5b611dfe82611adc565b9050602081019050919050565b82818337600083830152505050565b6000611e2d611e2884611dda565b611dbf565b905082815260208101848484011115611e4957611e48611d5a565b5b611e54848285611e0b565b509392505050565b600082601f830112611e7157611e70611d55565b5b8135611e81848260208601611e1a565b91505092915050565b60008060008060808587031215611ea457611ea36119d1565b5b6000611eb287828801611c14565b9450506020611ec387828801611c14565b9350506040611ed487828801611b5f565b925050606085013567ffffffffffffffff811115611ef557611ef46119d6565b5b611f0187828801611e5c565b91505092959194509250565b60008060408385031215611f2457611f236119d1565b5b6000611f3285828601611c14565b9250506020611f4385828601611c14565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680611f9457607f821691505b602082108103611fa757611fa6611f4d565b5b50919050565b7f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560008201527f7200000000000000000000000000000000000000000000000000000000000000602082015250565b6000612009602183611aa1565b915061201482611fad565b604082019050919050565b6000602082019050818103600083015261203881611ffc565b9050919050565b7f4552433732313a20617070726f76652063616c6c6572206973206e6f7420746f60008201527f6b656e206f776e6572206f7220617070726f76656420666f7220616c6c000000602082015250565b600061209b603d83611aa1565b91506120a68261203f565b604082019050919050565b600060208201905081810360008301526120ca8161208e565b9050919050565b7f4552433732313a2063616c6c6572206973206e6f7420746f6b656e206f776e6560008201527f72206f7220617070726f76656400000000000000000000000000000000000000602082015250565b600061212d602d83611aa1565b9150612138826120d1565b604082019050919050565b6000602082019050818103600083015261215c81612120565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061219d82611993565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036121cf576121ce612163565b5b600182019050919050565b7f4552433732313a20696e76616c696420746f6b656e2049440000000000000000600082015250565b6000612210601883611aa1565b915061221b826121da565b602082019050919050565b6000602082019050818103600083015261223f81612203565b9050919050565b7f4552433732313a2061646472657373207a65726f206973206e6f74206120766160008201527f6c6964206f776e65720000000000000000000000000000000000000000000000602082015250565b60006122a2602983611aa1565b91506122ad82612246565b604082019050919050565b600060208201905081810360008301526122d181612295565b9050919050565b600081905092915050565b7f7b226e616d65223a2022546573742044617070204e4654732023000000000000600082015250565b6000612319601a836122d8565b9150612324826122e3565b601a82019050919050565b600061233a82611a96565b61234481856122d8565b9350612354818560208601611ab2565b80840191505092915050565b7f222c20226465736372697074696f6e223a2022546573742044617070204e465460008201527f7320666f722074657374696e672e222c2022696d616765223a2022646174613a60208201527f696d6167652f7376672b786d6c3b6261736536342c0000000000000000000000604082015250565b60006123e26055836122d8565b91506123ed82612360565b605582019050919050565b7f222c202261747472696275746573223a205b7b2274726169745f74797065223a60008201527f2022546f6b656e204964222c202276616c7565223a2022000000000000000000602082015250565b60006124546037836122d8565b915061245f826123f8565b603782019050919050565b7f227d5d7d00000000000000000000000000000000000000000000000000000000600082015250565b60006124a06004836122d8565b91506124ab8261246a565b600482019050919050565b60006124c18261230c565b91506124cd828661232f565b91506124d8826123d5565b91506124e4828561232f565b91506124ef82612447565b91506124fb828461232f565b915061250682612493565b9150819050949350505050565b7f646174613a6170706c69636174696f6e2f6a736f6e3b6261736536342c000000600082015250565b6000612549601d836122d8565b915061255482612513565b601d82019050919050565b600061256a8261253c565b9150612576828461232f565b915081905092915050565b7f4552433732313a207472616e736665722066726f6d20696e636f72726563742060008201527f6f776e6572000000000000000000000000000000000000000000000000000000602082015250565b60006125dd602583611aa1565b91506125e882612581565b604082019050919050565b6000602082019050818103600083015261260c816125d0565b9050919050565b7f4552433732313a207472616e7366657220746f20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b600061266f602483611aa1565b915061267a82612613565b604082019050919050565b6000602082019050818103600083015261269e81612662565b9050919050565b7f4552433732313a20617070726f766520746f2063616c6c657200000000000000600082015250565b60006126db601983611aa1565b91506126e6826126a5565b602082019050919050565b6000602082019050818103600083015261270a816126ce565b9050919050565b7f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560008201527f63656976657220696d706c656d656e7465720000000000000000000000000000602082015250565b600061276d603283611aa1565b915061277882612711565b604082019050919050565b6000602082019050818103600083015261279c81612760565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b60006127dd82611993565b91506127e883611993565b9250828201905080821115612800576127ff612163565b5b92915050565b600061281182611993565b915061281c83611993565b92508261282c5761282b6127a3565b5b828204905092915050565b600061284282611993565b915061284d83611993565b925082820261285b81611993565b9150828204841483151761287257612871612163565b5b5092915050565b600081519050919050565b600082825260208201905092915050565b60006128a082612879565b6128aa8185612884565b93506128ba818560208601611ab2565b6128c381611adc565b840191505092915050565b60006080820190506128e36000830187611bd3565b6128f06020830186611bd3565b6128fd604083018561199d565b818103606083015261290f8184612895565b905095945050505050565b60008151905061292981611a07565b92915050565b600060208284031215612945576129446119d1565b5b60006129538482850161291a565b91505092915050565b7f4552433732313a206d696e7420746f20746865207a65726f2061646472657373600082015250565b6000612992602083611aa1565b915061299d8261295c565b602082019050919050565b600060208201905081810360008301526129c181612985565b9050919050565b7f4552433732313a20746f6b656e20616c7265616479206d696e74656400000000600082015250565b60006129fe601c83611aa1565b9150612a09826129c8565b602082019050919050565b60006020820190508181036000830152612a2d816129f1565b905091905056fe4142434445464748494a4b4c4d4e4f505152535455565758595a6162636465666768696a6b6c6d6e6f707172737475767778797a303132333435363738392b2f3c737667206865696768743d22333530222077696474683d22333530222076696577426f783d2230203020313030203130302220786d6c6e733d22687474703a2f2f7777772e77332e6f72672f323030302f737667223e3c646566733e3c706174682069643d224d7950617468222066696c6c3d226e6f6e6522207374726f6b653d227265642220643d224d31302c3930205139302c39302039302c3435205139302c31302035302c3130205131302c31302031302c3430205131302c37302034352c3730205137302c37302037352c353022202f3e3c2f646566733e3c746578743e3c746578745061746820687265663d22234d7950617468223e517569636b2062726f776e20666f78206a756d7073206f76657220746865206c617a7920646f672e3c2f74657874506174683e3c2f746578743e3c2f7376673ea2646970667358221220922487cf7bfec55ad9cf0c646397333bb79204b1a8ef63134f78b23d697570ef64736f6c63430008120033",failingContractAbi:[{payable:!0,stateMutability:"payable",type:"fallback"}],failingContractBytecode:"0x6080604052348015600f57600080fd5b50608b8061001e6000396000f3fe6080604052610fff3411600e57fe5b3373ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f193505050501580156053573d6000803e3d6000fd5b5000fea265627a7a72315820631b0dbb6b871cdbfdec2773af15ebfb8e52c794cf836fe27ec21f1aed17180f64736f6c634300050c0032",multisigBytecode:"0x60806040523480156200001157600080fd5b50600060405180606001604052807307be9763a718c0539017e2ab6fc42853b4aeeb6b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001731c53dc20d1e36ed8359250de626acae36bd28a2973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001733ebf9d63c3ae5d70b252a885d65168960102e7f873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815250905060006001905060005b6003811015620002f65760008382600381106200011c576200011b62000306565b5b60200201519050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160362000195576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200018c9062000396565b60405180910390fd5b600160008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161562000225576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200021c9062000408565b60405180910390fd5b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055506000819080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550508080620002ed9062000463565b915050620000fa565b50806002819055505050620004b0565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082825260208201905092915050565b7f696e76616c6964206f776e657200000000000000000000000000000000000000600082015250565b60006200037e600d8362000335565b91506200038b8262000346565b602082019050919050565b60006020820190508181036000830152620003b1816200036f565b9050919050565b7f6f776e6572206e6f7420756e6971756500000000000000000000000000000000600082015250565b6000620003f060108362000335565b9150620003fd82620003b8565b602082019050919050565b600060208201905081810360008301526200042381620003e1565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000819050919050565b6000620004708262000459565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203620004a557620004a46200042a565b5b600182019050919050565b611e6b80620004c06000396000f3fe6080604052600436106100ab5760003560e01c80639ace38c2116100645780639ace38c214610253578063a0e67e2b14610294578063c01a8c84146102bf578063c6427474146102e8578063d0549b8514610311578063ee22610b1461033c57610102565b8063025e7c271461010757806320ea8d86146101445780632e7700f01461016d5780632f54bf6e1461019857806333ea3dc8146101d557806380f59a651461021657610102565b36610102573373ffffffffffffffffffffffffffffffffffffffff167f90890809c654f11d6e72a28fa60149770a0d11ec6c92319d6ceb2bb0a4ea1a1534476040516100f892919061116d565b60405180910390a2005b600080fd5b34801561011357600080fd5b5061012e600480360381019061012991906111d6565b610365565b60405161013b9190611244565b60405180910390f35b34801561015057600080fd5b5061016b600480360381019061016691906111d6565b6103a4565b005b34801561017957600080fd5b5061018261067e565b60405161018f919061125f565b60405180910390f35b3480156101a457600080fd5b506101bf60048036038101906101ba91906112a6565b61068b565b6040516101cc91906112ee565b60405180910390f35b3480156101e157600080fd5b506101fc60048036038101906101f791906111d6565b6106ab565b60405161020d959493929190611399565b60405180910390f35b34801561022257600080fd5b5061023d600480360381019061023891906113f3565b6107be565b60405161024a91906112ee565b60405180910390f35b34801561025f57600080fd5b5061027a600480360381019061027591906111d6565b6107ed565b60405161028b959493929190611399565b60405180910390f35b3480156102a057600080fd5b506102a96108e8565b6040516102b691906114f1565b60405180910390f35b3480156102cb57600080fd5b506102e660048036038101906102e191906111d6565b610976565b005b3480156102f457600080fd5b5061030f600480360381019061030a9190611648565b610c53565b005b34801561031d57600080fd5b50610326610e56565b604051610333919061125f565b60405180910390f35b34801561034857600080fd5b50610363600480360381019061035e91906111d6565b610e5c565b005b6000818154811061037557600080fd5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610430576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161042790611714565b60405180910390fd5b806004805490508110610478576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161046f90611780565b60405180910390fd5b816004818154811061048d5761048c6117a0565b5b906000526020600020906005020160030160009054906101000a900460ff16156104ec576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104e39061181b565b60405180910390fd5b600060048481548110610502576105016117a0565b5b906000526020600020906005020190506003600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff166105af576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105a690611887565b60405180910390fd5b60018160040160008282546105c491906118d6565b9250508190555060006003600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550833373ffffffffffffffffffffffffffffffffffffffff167ff0dca620e2e81f7841d07bcc105e1704fb01475b278a9d4c236e1c62945edd5560405160405180910390a350505050565b6000600480549050905090565b60016020528060005260406000206000915054906101000a900460ff1681565b60008060606000806000600487815481106106c9576106c86117a0565b5b906000526020600020906005020190508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168160010154826002018360030160009054906101000a900460ff16846004015482805461072a90611939565b80601f016020809104026020016040519081016040528092919081815260200182805461075690611939565b80156107a35780601f10610778576101008083540402835291602001916107a3565b820191906000526020600020905b81548152906001019060200180831161078657829003601f168201915b50505050509250955095509550955095505091939590929450565b60036020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600481815481106107fd57600080fd5b90600052602060002090600502016000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169080600101549080600201805461084c90611939565b80601f016020809104026020016040519081016040528092919081815260200182805461087890611939565b80156108c55780601f1061089a576101008083540402835291602001916108c5565b820191906000526020600020905b8154815290600101906020018083116108a857829003601f168201915b5050505050908060030160009054906101000a900460ff16908060040154905085565b6060600080548060200260200160405190810160405280929190818152602001828054801561096c57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311610922575b5050505050905090565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610a02576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109f990611714565b60405180910390fd5b806004805490508110610a4a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4190611780565b60405180910390fd5b8160048181548110610a5f57610a5e6117a0565b5b906000526020600020906005020160030160009054906101000a900460ff1615610abe576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ab59061181b565b60405180910390fd5b826003600082815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615610b5d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b54906119b6565b60405180910390fd5b600060048581548110610b7357610b726117a0565b5b906000526020600020906005020190506001816004016000828254610b9891906119d6565b9250508190555060016003600087815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550843373ffffffffffffffffffffffffffffffffffffffff167f5cbe105e36805f7820e291f799d5794ff948af2a5f664e580382defb6339004160405160405180910390a35050505050565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610cdf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd690611714565b60405180910390fd5b6000600480549050905060046040518060a001604052808673ffffffffffffffffffffffffffffffffffffffff1681526020018581526020018481526020016000151581526020016000815250908060018154018082558091505060019003906000526020600020906005020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550602082015181600101556040820151816002019081610dbb9190611bb6565b5060608201518160030160006101000a81548160ff0219169083151502179055506080820151816004015550508373ffffffffffffffffffffffffffffffffffffffff16813373ffffffffffffffffffffffffffffffffffffffff167fd5a05bf70715ad82a09a756320284a1b54c9ff74cd0f8cce6219e79b563fe59d8686604051610e48929190611c88565b60405180910390a450505050565b60025481565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610ee8576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610edf90611714565b60405180910390fd5b806004805490508110610f30576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f2790611780565b60405180910390fd5b8160048181548110610f4557610f446117a0565b5b906000526020600020906005020160030160009054906101000a900460ff1615610fa4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f9b9061181b565b60405180910390fd5b600060048481548110610fba57610fb96117a0565b5b9060005260206000209060050201905060025481600401541015611013576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161100a90611d04565b60405180910390fd5b60018160030160006101000a81548160ff02191690831515021790555060008160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168260010154836002016040516110839190611db2565b60006040518083038185875af1925050503d80600081146110c0576040519150601f19603f3d011682016040523d82523d6000602084013e6110c5565b606091505b5050905080611109576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161110090611e15565b60405180910390fd5b843373ffffffffffffffffffffffffffffffffffffffff167f5445f318f4f5fcfb66592e68e0cc5822aa15664039bd5f0ffde24c5a8142b1ac60405160405180910390a35050505050565b6000819050919050565b61116781611154565b82525050565b6000604082019050611182600083018561115e565b61118f602083018461115e565b9392505050565b6000604051905090565b600080fd5b600080fd5b6111b381611154565b81146111be57600080fd5b50565b6000813590506111d0816111aa565b92915050565b6000602082840312156111ec576111eb6111a0565b5b60006111fa848285016111c1565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061122e82611203565b9050919050565b61123e81611223565b82525050565b60006020820190506112596000830184611235565b92915050565b6000602082019050611274600083018461115e565b92915050565b61128381611223565b811461128e57600080fd5b50565b6000813590506112a08161127a565b92915050565b6000602082840312156112bc576112bb6111a0565b5b60006112ca84828501611291565b91505092915050565b60008115159050919050565b6112e8816112d3565b82525050565b600060208201905061130360008301846112df565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611343578082015181840152602081019050611328565b60008484015250505050565b6000601f19601f8301169050919050565b600061136b82611309565b6113758185611314565b9350611385818560208601611325565b61138e8161134f565b840191505092915050565b600060a0820190506113ae6000830188611235565b6113bb602083018761115e565b81810360408301526113cd8186611360565b90506113dc60608301856112df565b6113e9608083018461115e565b9695505050505050565b6000806040838503121561140a576114096111a0565b5b6000611418858286016111c1565b925050602061142985828601611291565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b61146881611223565b82525050565b600061147a838361145f565b60208301905092915050565b6000602082019050919050565b600061149e82611433565b6114a8818561143e565b93506114b38361144f565b8060005b838110156114e45781516114cb888261146e565b97506114d683611486565b9250506001810190506114b7565b5085935050505092915050565b6000602082019050818103600083015261150b8184611493565b905092915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6115558261134f565b810181811067ffffffffffffffff821117156115745761157361151d565b5b80604052505050565b6000611587611196565b9050611593828261154c565b919050565b600067ffffffffffffffff8211156115b3576115b261151d565b5b6115bc8261134f565b9050602081019050919050565b82818337600083830152505050565b60006115eb6115e684611598565b61157d565b90508281526020810184848401111561160757611606611518565b5b6116128482856115c9565b509392505050565b600082601f83011261162f5761162e611513565b5b813561163f8482602086016115d8565b91505092915050565b600080600060608486031215611661576116606111a0565b5b600061166f86828701611291565b9350506020611680868287016111c1565b925050604084013567ffffffffffffffff8111156116a1576116a06111a5565b5b6116ad8682870161161a565b9150509250925092565b600082825260208201905092915050565b7f6e6f74206f776e65720000000000000000000000000000000000000000000000600082015250565b60006116fe6009836116b7565b9150611709826116c8565b602082019050919050565b6000602082019050818103600083015261172d816116f1565b9050919050565b7f747820646f6573206e6f74206578697374000000000000000000000000000000600082015250565b600061176a6011836116b7565b915061177582611734565b602082019050919050565b600060208201905081810360008301526117998161175d565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f747820616c726561647920657865637574656400000000000000000000000000600082015250565b60006118056013836116b7565b9150611810826117cf565b602082019050919050565b60006020820190508181036000830152611834816117f8565b9050919050565b7f7478206e6f7420636f6e6669726d656400000000000000000000000000000000600082015250565b60006118716010836116b7565b915061187c8261183b565b602082019050919050565b600060208201905081810360008301526118a081611864565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006118e182611154565b91506118ec83611154565b9250828203905081811115611904576119036118a7565b5b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061195157607f821691505b6020821081036119645761196361190a565b5b50919050565b7f747820616c726561647920636f6e6669726d6564000000000000000000000000600082015250565b60006119a06014836116b7565b91506119ab8261196a565b602082019050919050565b600060208201905081810360008301526119cf81611993565b9050919050565b60006119e182611154565b91506119ec83611154565b9250828201905080821115611a0457611a036118a7565b5b92915050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302611a6c7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82611a2f565b611a768683611a2f565b95508019841693508086168417925050509392505050565b6000819050919050565b6000611ab3611aae611aa984611154565b611a8e565b611154565b9050919050565b6000819050919050565b611acd83611a98565b611ae1611ad982611aba565b848454611a3c565b825550505050565b600090565b611af6611ae9565b611b01818484611ac4565b505050565b5b81811015611b2557611b1a600082611aee565b600181019050611b07565b5050565b601f821115611b6a57611b3b81611a0a565b611b4484611a1f565b81016020851015611b53578190505b611b67611b5f85611a1f565b830182611b06565b50505b505050565b600082821c905092915050565b6000611b8d60001984600802611b6f565b1980831691505092915050565b6000611ba68383611b7c565b9150826002028217905092915050565b611bbf82611309565b67ffffffffffffffff811115611bd857611bd761151d565b5b611be28254611939565b611bed828285611b29565b600060209050601f831160018114611c205760008415611c0e578287015190505b611c188582611b9a565b865550611c80565b601f198416611c2e86611a0a565b60005b82811015611c5657848901518255600182019150602085019450602081019050611c31565b86831015611c735784890151611c6f601f891682611b7c565b8355505b6001600288020188555050505b505050505050565b6000604082019050611c9d600083018561115e565b8181036020830152611caf8184611360565b90509392505050565b7f63616e6e6f742065786563757465207478000000000000000000000000000000600082015250565b6000611cee6011836116b7565b9150611cf982611cb8565b602082019050919050565b60006020820190508181036000830152611d1d81611ce1565b9050919050565b600081905092915050565b60008154611d3c81611939565b611d468186611d24565b94506001821660008114611d615760018114611d7657611da9565b60ff1983168652811515820286019350611da9565b611d7f85611a0a565b60005b83811015611da157815481890152600182019150602081019050611d82565b838801955050505b50505092915050565b6000611dbe8284611d2f565b915081905092915050565b7f7478206661696c65640000000000000000000000000000000000000000000000600082015250565b6000611dff6009836116b7565b9150611e0a82611dc9565b602082019050919050565b60006020820190508181036000830152611e2e81611df2565b905091905056fea2646970667358221220e80b06134352e414f93f26d7441824c8082a405d8e55c88888f0cb1868b6c4bf64736f6c63430008110033",multisigAbi:[{inputs:[{internalType:"uint256",name:"_txIndex",type:"uint256"}],name:"confirmTransaction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"txIndex",type:"uint256"}],name:"ConfirmTransaction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"balance",type:"uint256"}],name:"Deposit",type:"event"},{inputs:[{internalType:"uint256",name:"_txIndex",type:"uint256"}],name:"executeTransaction",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"txIndex",type:"uint256"}],name:"ExecuteTransaction",type:"event"},{inputs:[{internalType:"uint256",name:"_txIndex",type:"uint256"}],name:"revokeConfirmation",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"txIndex",type:"uint256"}],name:"RevokeConfirmation",type:"event"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"submitTransaction",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"txIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"},{indexed:!1,internalType:"bytes",name:"data",type:"bytes"}],name:"SubmitTransaction",type:"event"},{stateMutability:"payable",type:"receive"},{inputs:[],name:"getOwners",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_txIndex",type:"uint256"}],name:"getTransaction",outputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"uint256",name:"numConfirmations",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTransactionCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"isConfirmed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"numConfirmationsRequired",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"owners",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"transactions",outputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"uint256",name:"numConfirmations",type:"uint256"}],stateMutability:"view",type:"function"}],erc1155Abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newuri",type:"string"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenid",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],erc1155Bytecode:"0x60806040523480156200001157600080fd5b5060405180608001604052806043815260200162003893604391396200003d816200006460201b60201c565b506200005e620000526200007960201b60201c565b6200008160201b60201c565b620004a8565b8060029081620000759190620003c1565b5050565b600033905090565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620001c957607f821691505b602082108103620001df57620001de62000181565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620002497fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200020a565b6200025586836200020a565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620002a26200029c62000296846200026d565b62000277565b6200026d565b9050919050565b6000819050919050565b620002be8362000281565b620002d6620002cd82620002a9565b84845462000217565b825550505050565b600090565b620002ed620002de565b620002fa818484620002b3565b505050565b5b81811015620003225762000316600082620002e3565b60018101905062000300565b5050565b601f82111562000371576200033b81620001e5565b6200034684620001fa565b8101602085101562000356578190505b6200036e6200036585620001fa565b830182620002ff565b50505b505050565b600082821c905092915050565b6000620003966000198460080262000376565b1980831691505092915050565b6000620003b1838362000383565b9150826002028217905092915050565b620003cc8262000147565b67ffffffffffffffff811115620003e857620003e762000152565b5b620003f48254620001b0565b6200040182828562000326565b600060209050601f83116001811462000439576000841562000424578287015190505b620004308582620003a3565b865550620004a0565b601f1984166200044986620001e5565b60005b8281101562000473578489015182556001820191506020850194506020810190506200044c565b868310156200049357848901516200048f601f89168262000383565b8355505b6001600288020188555050505b505050505050565b6133db80620004b86000396000f3fe608060405234801561001057600080fd5b50600436106100e95760003560e01c80634e1273f41161008c578063a22cb46511610066578063a22cb46514610248578063e985e9c514610264578063f242432a14610294578063f2fde38b146102b0576100e9565b80634e1273f4146101f0578063715018a6146102205780638da5cb5b1461022a576100e9565b806306fdde03116100c857806306fdde031461016a5780630e89341c146101885780631f7fdffa146101b85780632eb2c2d6146101d4576100e9565b8062fdd58e146100ee57806301ffc9a71461011e57806302fe53051461014e575b600080fd5b61010860048036038101906101039190611bb3565b6102cc565b6040516101159190611c02565b60405180910390f35b61013860048036038101906101339190611c75565b610394565b6040516101459190611cbd565b60405180910390f35b61016860048036038101906101639190611e1e565b610476565b005b61017261048a565b60405161017f9190611ee6565b60405180910390f35b6101a2600480360381019061019d9190611f08565b6104c3565b6040516101af9190611ee6565b60405180910390f35b6101d260048036038101906101cd919061209e565b6104fe565b005b6101ee60048036038101906101e99190612159565b610518565b005b61020a600480360381019061020591906122eb565b6105b9565b6040516102179190612421565b60405180910390f35b6102286106d2565b005b6102326106e6565b60405161023f9190612452565b60405180910390f35b610262600480360381019061025d9190612499565b610710565b005b61027e600480360381019061027991906124d9565b610726565b60405161028b9190611cbd565b60405180910390f35b6102ae60048036038101906102a99190612519565b6107ba565b005b6102ca60048036038101906102c591906125b0565b61085b565b005b60008073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361033c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103339061264f565b60405180910390fd5b60008083815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b60007fd9b67a26000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061045f57507f0e89341c000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b8061046f575061046e826108de565b5b9050919050565b61047e610948565b610487816109c6565b50565b6040518060400160405280600781526020017f455243313135350000000000000000000000000000000000000000000000000081525081565b60606104ce826109d9565b6104d783610a6d565b6040516020016104e89291906126f7565b6040516020818303038152906040529050919050565b610506610948565b61051284848484610b3b565b50505050565b610520610d67565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161480610566575061056585610560610d67565b610726565b5b6105a5576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161059c90612798565b60405180910390fd5b6105b28585858585610d6f565b5050505050565b606081518351146105ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105f69061282a565b60405180910390fd5b6000835167ffffffffffffffff81111561061c5761061b611cf3565b5b60405190808252806020026020018201604052801561064a5781602001602082028036833780820191505090505b50905060005b84518110156106c75761069785828151811061066f5761066e61284a565b5b602002602001015185838151811061068a5761068961284a565b5b60200260200101516102cc565b8282815181106106aa576106a961284a565b5b602002602001018181525050806106c0906128a8565b9050610650565b508091505092915050565b6106da610948565b6106e46000611090565b565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b61072261071b610d67565b8383611156565b5050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b6107c2610d67565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161480610808575061080785610802610d67565b610726565b5b610847576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161083e90612798565b60405180910390fd5b61085485858585856112c2565b5050505050565b610863610948565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036108d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108c990612962565b60405180910390fd5b6108db81611090565b50565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b610950610d67565b73ffffffffffffffffffffffffffffffffffffffff1661096e6106e6565b73ffffffffffffffffffffffffffffffffffffffff16146109c4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109bb906129ce565b60405180910390fd5b565b80600290816109d59190612bfa565b5050565b6060600280546109e890612a1d565b80601f0160208091040260200160405190810160405280929190818152602001828054610a1490612a1d565b8015610a615780601f10610a3657610100808354040283529160200191610a61565b820191906000526020600020905b815481529060010190602001808311610a4457829003601f168201915b50505050509050919050565b606060006001610a7c8461155d565b01905060008167ffffffffffffffff811115610a9b57610a9a611cf3565b5b6040519080825280601f01601f191660200182016040528015610acd5781602001600182028036833780820191505090505b509050600082602001820190505b600115610b30578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a8581610b2457610b23612ccc565b5b04945060008503610adb575b819350505050919050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610baa576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ba190612d6d565b60405180910390fd5b8151835114610bee576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610be590612dff565b60405180910390fd5b6000610bf8610d67565b9050610c09816000878787876116b0565b60005b8451811015610cc257838181518110610c2857610c2761284a565b5b6020026020010151600080878481518110610c4657610c4561284a565b5b6020026020010151815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610ca89190612e1f565b925050819055508080610cba906128a8565b915050610c0c565b508473ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051610d3a929190612e53565b60405180910390a4610d51816000878787876116b8565b610d60816000878787876116c0565b5050505050565b600033905090565b8151835114610db3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610daa90612dff565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610e22576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e1990612efc565b60405180910390fd5b6000610e2c610d67565b9050610e3c8187878787876116b0565b60005b8451811015610fed576000858281518110610e5d57610e5c61284a565b5b602002602001015190506000858381518110610e7c57610e7b61284a565b5b60200260200101519050600080600084815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610f1d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f1490612f8e565b60405180910390fd5b81810360008085815260200190815260200160002060008c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508160008085815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610fd29190612e1f565b9250508190555050505080610fe6906128a8565b9050610e3f565b508473ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051611064929190612e53565b60405180910390a461107a8187878787876116b8565b6110888187878787876116c0565b505050505050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036111c4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111bb90613020565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516112b59190611cbd565b60405180910390a3505050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603611331576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161132890612efc565b60405180910390fd5b600061133b610d67565b9050600061134885611897565b9050600061135585611897565b90506113658389898585896116b0565b600080600088815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050858110156113fc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113f390612f8e565b60405180910390fd5b85810360008089815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508560008089815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546114b19190612e1f565b925050819055508773ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f628a8a60405161152e929190613040565b60405180910390a4611544848a8a86868a6116b8565b611552848a8a8a8a8a611911565b505050505050505050565b600080600090507a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106115bb577a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083816115b1576115b0612ccc565b5b0492506040810190505b6d04ee2d6d415b85acef810000000083106115f8576d04ee2d6d415b85acef810000000083816115ee576115ed612ccc565b5b0492506020810190505b662386f26fc10000831061162757662386f26fc10000838161161d5761161c612ccc565b5b0492506010810190505b6305f5e1008310611650576305f5e100838161164657611645612ccc565b5b0492506008810190505b612710831061167557612710838161166b5761166a612ccc565b5b0492506004810190505b60648310611698576064838161168e5761168d612ccc565b5b0492506002810190505b600a83106116a7576001810190505b80915050919050565b505050505050565b505050505050565b6116df8473ffffffffffffffffffffffffffffffffffffffff16611ae8565b1561188f578373ffffffffffffffffffffffffffffffffffffffff1663bc197c8187878686866040518663ffffffff1660e01b81526004016117259594939291906130be565b6020604051808303816000875af192505050801561176157506040513d601f19601f8201168201806040525081019061175e919061313b565b60015b6118065761176d613175565b806308c379a0036117c95750611781613197565b8061178c57506117cb565b806040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117c09190611ee6565b60405180910390fd5b505b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117fd90613299565b60405180910390fd5b63bc197c8160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161461188d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118849061332b565b60405180910390fd5b505b505050505050565b60606000600167ffffffffffffffff8111156118b6576118b5611cf3565b5b6040519080825280602002602001820160405280156118e45781602001602082028036833780820191505090505b50905082816000815181106118fc576118fb61284a565b5b60200260200101818152505080915050919050565b6119308473ffffffffffffffffffffffffffffffffffffffff16611ae8565b15611ae0578373ffffffffffffffffffffffffffffffffffffffff1663f23a6e6187878686866040518663ffffffff1660e01b815260040161197695949392919061334b565b6020604051808303816000875af19250505080156119b257506040513d601f19601f820116820180604052508101906119af919061313b565b60015b611a57576119be613175565b806308c379a003611a1a57506119d2613197565b806119dd5750611a1c565b806040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a119190611ee6565b60405180910390fd5b505b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a4e90613299565b60405180910390fd5b63f23a6e6160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614611ade576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611ad59061332b565b60405180910390fd5b505b505050505050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611b4a82611b1f565b9050919050565b611b5a81611b3f565b8114611b6557600080fd5b50565b600081359050611b7781611b51565b92915050565b6000819050919050565b611b9081611b7d565b8114611b9b57600080fd5b50565b600081359050611bad81611b87565b92915050565b60008060408385031215611bca57611bc9611b15565b5b6000611bd885828601611b68565b9250506020611be985828601611b9e565b9150509250929050565b611bfc81611b7d565b82525050565b6000602082019050611c176000830184611bf3565b92915050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b611c5281611c1d565b8114611c5d57600080fd5b50565b600081359050611c6f81611c49565b92915050565b600060208284031215611c8b57611c8a611b15565b5b6000611c9984828501611c60565b91505092915050565b60008115159050919050565b611cb781611ca2565b82525050565b6000602082019050611cd26000830184611cae565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611d2b82611ce2565b810181811067ffffffffffffffff82111715611d4a57611d49611cf3565b5b80604052505050565b6000611d5d611b0b565b9050611d698282611d22565b919050565b600067ffffffffffffffff821115611d8957611d88611cf3565b5b611d9282611ce2565b9050602081019050919050565b82818337600083830152505050565b6000611dc1611dbc84611d6e565b611d53565b905082815260208101848484011115611ddd57611ddc611cdd565b5b611de8848285611d9f565b509392505050565b600082601f830112611e0557611e04611cd8565b5b8135611e15848260208601611dae565b91505092915050565b600060208284031215611e3457611e33611b15565b5b600082013567ffffffffffffffff811115611e5257611e51611b1a565b5b611e5e84828501611df0565b91505092915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611ea1578082015181840152602081019050611e86565b60008484015250505050565b6000611eb882611e67565b611ec28185611e72565b9350611ed2818560208601611e83565b611edb81611ce2565b840191505092915050565b60006020820190508181036000830152611f008184611ead565b905092915050565b600060208284031215611f1e57611f1d611b15565b5b6000611f2c84828501611b9e565b91505092915050565b600067ffffffffffffffff821115611f5057611f4f611cf3565b5b602082029050602081019050919050565b600080fd5b6000611f79611f7484611f35565b611d53565b90508083825260208201905060208402830185811115611f9c57611f9b611f61565b5b835b81811015611fc55780611fb18882611b9e565b845260208401935050602081019050611f9e565b5050509392505050565b600082601f830112611fe457611fe3611cd8565b5b8135611ff4848260208601611f66565b91505092915050565b600067ffffffffffffffff82111561201857612017611cf3565b5b61202182611ce2565b9050602081019050919050565b600061204161203c84611ffd565b611d53565b90508281526020810184848401111561205d5761205c611cdd565b5b612068848285611d9f565b509392505050565b600082601f83011261208557612084611cd8565b5b813561209584826020860161202e565b91505092915050565b600080600080608085870312156120b8576120b7611b15565b5b60006120c687828801611b68565b945050602085013567ffffffffffffffff8111156120e7576120e6611b1a565b5b6120f387828801611fcf565b935050604085013567ffffffffffffffff81111561211457612113611b1a565b5b61212087828801611fcf565b925050606085013567ffffffffffffffff81111561214157612140611b1a565b5b61214d87828801612070565b91505092959194509250565b600080600080600060a0868803121561217557612174611b15565b5b600061218388828901611b68565b955050602061219488828901611b68565b945050604086013567ffffffffffffffff8111156121b5576121b4611b1a565b5b6121c188828901611fcf565b935050606086013567ffffffffffffffff8111156121e2576121e1611b1a565b5b6121ee88828901611fcf565b925050608086013567ffffffffffffffff81111561220f5761220e611b1a565b5b61221b88828901612070565b9150509295509295909350565b600067ffffffffffffffff82111561224357612242611cf3565b5b602082029050602081019050919050565b600061226761226284612228565b611d53565b9050808382526020820190506020840283018581111561228a57612289611f61565b5b835b818110156122b3578061229f8882611b68565b84526020840193505060208101905061228c565b5050509392505050565b600082601f8301126122d2576122d1611cd8565b5b81356122e2848260208601612254565b91505092915050565b6000806040838503121561230257612301611b15565b5b600083013567ffffffffffffffff8111156123205761231f611b1a565b5b61232c858286016122bd565b925050602083013567ffffffffffffffff81111561234d5761234c611b1a565b5b61235985828601611fcf565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b61239881611b7d565b82525050565b60006123aa838361238f565b60208301905092915050565b6000602082019050919050565b60006123ce82612363565b6123d8818561236e565b93506123e38361237f565b8060005b838110156124145781516123fb888261239e565b9750612406836123b6565b9250506001810190506123e7565b5085935050505092915050565b6000602082019050818103600083015261243b81846123c3565b905092915050565b61244c81611b3f565b82525050565b60006020820190506124676000830184612443565b92915050565b61247681611ca2565b811461248157600080fd5b50565b6000813590506124938161246d565b92915050565b600080604083850312156124b0576124af611b15565b5b60006124be85828601611b68565b92505060206124cf85828601612484565b9150509250929050565b600080604083850312156124f0576124ef611b15565b5b60006124fe85828601611b68565b925050602061250f85828601611b68565b9150509250929050565b600080600080600060a0868803121561253557612534611b15565b5b600061254388828901611b68565b955050602061255488828901611b68565b945050604061256588828901611b9e565b935050606061257688828901611b9e565b925050608086013567ffffffffffffffff81111561259757612596611b1a565b5b6125a388828901612070565b9150509295509295909350565b6000602082840312156125c6576125c5611b15565b5b60006125d484828501611b68565b91505092915050565b7f455243313135353a2061646472657373207a65726f206973206e6f742061207660008201527f616c6964206f776e657200000000000000000000000000000000000000000000602082015250565b6000612639602a83611e72565b9150612644826125dd565b604082019050919050565b600060208201905081810360008301526126688161262c565b9050919050565b600081905092915050565b600061268582611e67565b61268f818561266f565b935061269f818560208601611e83565b80840191505092915050565b7f2e6a736f6e000000000000000000000000000000000000000000000000000000600082015250565b60006126e160058361266f565b91506126ec826126ab565b600582019050919050565b6000612703828561267a565b915061270f828461267a565b915061271a826126d4565b91508190509392505050565b7f455243313135353a2063616c6c6572206973206e6f7420746f6b656e206f776e60008201527f6572206f7220617070726f766564000000000000000000000000000000000000602082015250565b6000612782602e83611e72565b915061278d82612726565b604082019050919050565b600060208201905081810360008301526127b181612775565b9050919050565b7f455243313135353a206163636f756e747320616e6420696473206c656e67746860008201527f206d69736d617463680000000000000000000000000000000000000000000000602082015250565b6000612814602983611e72565b915061281f826127b8565b604082019050919050565b6000602082019050818103600083015261284381612807565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006128b382611b7d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036128e5576128e4612879565b5b600182019050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b600061294c602683611e72565b9150612957826128f0565b604082019050919050565b6000602082019050818103600083015261297b8161293f565b9050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b60006129b8602083611e72565b91506129c382612982565b602082019050919050565b600060208201905081810360008301526129e7816129ab565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680612a3557607f821691505b602082108103612a4857612a476129ee565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302612ab07fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82612a73565b612aba8683612a73565b95508019841693508086168417925050509392505050565b6000819050919050565b6000612af7612af2612aed84611b7d565b612ad2565b611b7d565b9050919050565b6000819050919050565b612b1183612adc565b612b25612b1d82612afe565b848454612a80565b825550505050565b600090565b612b3a612b2d565b612b45818484612b08565b505050565b5b81811015612b6957612b5e600082612b32565b600181019050612b4b565b5050565b601f821115612bae57612b7f81612a4e565b612b8884612a63565b81016020851015612b97578190505b612bab612ba385612a63565b830182612b4a565b50505b505050565b600082821c905092915050565b6000612bd160001984600802612bb3565b1980831691505092915050565b6000612bea8383612bc0565b9150826002028217905092915050565b612c0382611e67565b67ffffffffffffffff811115612c1c57612c1b611cf3565b5b612c268254612a1d565b612c31828285612b6d565b600060209050601f831160018114612c645760008415612c52578287015190505b612c5c8582612bde565b865550612cc4565b601f198416612c7286612a4e565b60005b82811015612c9a57848901518255600182019150602085019450602081019050612c75565b86831015612cb75784890151612cb3601f891682612bc0565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f455243313135353a206d696e7420746f20746865207a65726f2061646472657360008201527f7300000000000000000000000000000000000000000000000000000000000000602082015250565b6000612d57602183611e72565b9150612d6282612cfb565b604082019050919050565b60006020820190508181036000830152612d8681612d4a565b9050919050565b7f455243313135353a2069647320616e6420616d6f756e7473206c656e6774682060008201527f6d69736d61746368000000000000000000000000000000000000000000000000602082015250565b6000612de9602883611e72565b9150612df482612d8d565b604082019050919050565b60006020820190508181036000830152612e1881612ddc565b9050919050565b6000612e2a82611b7d565b9150612e3583611b7d565b9250828201905080821115612e4d57612e4c612879565b5b92915050565b60006040820190508181036000830152612e6d81856123c3565b90508181036020830152612e8181846123c3565b90509392505050565b7f455243313135353a207472616e7366657220746f20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000612ee6602583611e72565b9150612ef182612e8a565b604082019050919050565b60006020820190508181036000830152612f1581612ed9565b9050919050565b7f455243313135353a20696e73756666696369656e742062616c616e636520666f60008201527f72207472616e7366657200000000000000000000000000000000000000000000602082015250565b6000612f78602a83611e72565b9150612f8382612f1c565b604082019050919050565b60006020820190508181036000830152612fa781612f6b565b9050919050565b7f455243313135353a2073657474696e6720617070726f76616c2073746174757360008201527f20666f722073656c660000000000000000000000000000000000000000000000602082015250565b600061300a602983611e72565b915061301582612fae565b604082019050919050565b6000602082019050818103600083015261303981612ffd565b9050919050565b60006040820190506130556000830185611bf3565b6130626020830184611bf3565b9392505050565b600081519050919050565b600082825260208201905092915050565b600061309082613069565b61309a8185613074565b93506130aa818560208601611e83565b6130b381611ce2565b840191505092915050565b600060a0820190506130d36000830188612443565b6130e06020830187612443565b81810360408301526130f281866123c3565b9050818103606083015261310681856123c3565b9050818103608083015261311a8184613085565b90509695505050505050565b60008151905061313581611c49565b92915050565b60006020828403121561315157613150611b15565b5b600061315f84828501613126565b91505092915050565b60008160e01c9050919050565b600060033d11156131945760046000803e613191600051613168565b90505b90565b600060443d10613224576131a9611b0b565b60043d036004823e80513d602482011167ffffffffffffffff821117156131d1575050613224565b808201805167ffffffffffffffff8111156131ef5750505050613224565b80602083010160043d03850181111561320c575050505050613224565b61321b82602001850186611d22565b82955050505050505b90565b7f455243313135353a207472616e7366657220746f206e6f6e2d4552433131353560008201527f526563656976657220696d706c656d656e746572000000000000000000000000602082015250565b6000613283603483611e72565b915061328e82613227565b604082019050919050565b600060208201905081810360008301526132b281613276565b9050919050565b7f455243313135353a204552433131353552656365697665722072656a6563746560008201527f6420746f6b656e73000000000000000000000000000000000000000000000000602082015250565b6000613315602883611e72565b9150613320826132b9565b604082019050919050565b6000602082019050818103600083015261334481613308565b9050919050565b600060a0820190506133606000830188612443565b61336d6020830187612443565b61337a6040830186611bf3565b6133876060830185611bf3565b81810360808301526133998184613085565b9050969550505050505056fea2646970667358221220de231ea0ba52331673a6ab1f561443459e5e047d956a2026f062e8977c23fe6d64736f6c63430008110033697066733a2f2f626166796265696478666d777963677a6370347632746f67666c70716832676e69627565786a79346d347171777870376e68336a78357a6c6834792f"}}}},{package:"@metamask/test-dapp",file:"node_modules/@metamask/test-dapp/dist/constants.json"}],[264,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){if(!(0,s.hasProperty)(e,"SelectedNetworkController"))return;if(!(0,s.isObject)(e.SelectedNetworkController))return console.error(`Migration ${i}: Invalid SelectedNetworkController state of type '${typeof e.SelectedNetworkController}'`),void delete e.SelectedNetworkController;if(!(0,s.hasProperty)(e.SelectedNetworkController,"domains"))return console.error(`Migration ${i}: Missing SelectedNetworkController domains state`),void delete e.SelectedNetworkController;if(!(0,s.isObject)(e.SelectedNetworkController.domains))return console.error(`Migration ${i}: Invalid SelectedNetworkController domains state of type '${typeof e.SelectedNetworkController.domains}'`),void delete e.SelectedNetworkController;if(!(0,s.hasProperty)(e,"NetworkController"))return void delete e.SelectedNetworkController;if(!(0,s.isObject)(e.NetworkController))return console.error(new Error(`Migration ${i}: Invalid NetworkController state of type '${typeof e.NetworkController}'`)),void delete e.SelectedNetworkController;if(!(0,s.hasProperty)(e.NetworkController,"networkConfigurations"))return void delete e.SelectedNetworkController;if(!(0,s.isObject)(e.NetworkController.networkConfigurations))return console.error(new Error(`Migration ${i}: Invalid NetworkController networkConfigurations state of type '${typeof e.NetworkController}'`)),void delete e.SelectedNetworkController;const t=[...a,...Object.keys(e.NetworkController.networkConfigurations)],n=Object.values(e.SelectedNetworkController.domains);for(const s of n)if("string"!=typeof s||!t.includes(s))return console.error(new Error(`Migration ${i}: Invalid networkConfigurationId found in SelectedNetworkController state: '${s}'`)),void delete e.SelectedNetworkController}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=120.5;const a=["mainnet","goerli","sepolia","linea-goerli","linea-sepolia","linea-mainnet"]}}},{package:"$root$",file:"app/scripts/migrations/120.5.ts"}],[265,{"@metamask/utils":2765,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,function(e){if(!(0,r.hasProperty)(e,"TransactionController"))return void a.default.warn(`Migration ${o}: Missing TransactionController state`);var t;if(!(0,r.isObject)(e.TransactionController))return void(null===(t=global.sentry)||void 0===t||t.captureException(`Migration ${o}: Invalid TransactionController state of type '${typeof e.TransactionController}'`));const n=e.TransactionController;if(!(0,r.hasProperty)(n,"transactions"))return void a.default.warn(`Migration ${o}: Missing TransactionController transactions`);if(!Array.isArray(n.transactions))return a.default.error(new Error(`Migration ${o}: Invalid TransactionController transactions state of type '${typeof n.transactions}'`)),void delete n.transactions;const{transactions:s}=n,i=s.filter(r.isObject);if(s.length!==i.length){var l;const e=s.find((e=>!(0,r.isObject)(e)));return void(null===(l=global.sentry)||void 0===l||l.captureException(`Migration ${o}: Invalid transaction of type '${typeof e}'`))}const u=i.filter(c);if(u.length!==i.length){var d;const e=i.find((e=>!c(e)));return void(null===(d=global.sentry)||void 0===d||d.captureException(`Migration ${o}: Invalid transaction history of type '${typeof(null==e?void 0:e.history)}'`))}for(const e of u)e.history&&e.history.length>f&&(e.history=e.history.slice(0,f))}(t.data),t},n.version=void 0;var s,r=e("@metamask/utils"),i=e("lodash"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=n.version=120.6,f=100;function c(e){return!(0,r.hasProperty)(e,"history")||Array.isArray(e.history)}}}},{package:"$root$",file:"app/scripts/migrations/120.6.ts"}],[266,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){(0,r.hasProperty)(e,"TokenRatesController")&&(delete e.TokenRatesController.contractExchangeRates,delete e.TokenRatesController.contractExchangeRatesByChainId)}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=120}}},{package:"$root$",file:"app/scripts/migrations/120.ts"}],[267,{"@metamask/utils":2765,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,function(e){if(!(0,r.hasProperty)(e,"AccountsController"))return;const t=e.AccountsController;var n,s,f,c,l,u,d;if(!(0,i.isObject)(t))return void(null===(n=global.sentry)||void 0===n||n.captureException(new Error(`Migration ${o}: Invalid AccountsController state of type '${typeof t}'`)));if(!(0,r.hasProperty)(t,"internalAccounts"))return void(null===(s=global.sentry)||void 0===s||s.captureException(new Error(`Migration ${o}: Invalid AccountsController state, missing internalAccounts`)));if(!(0,i.isObject)(t.internalAccounts))return void(null===(f=global.sentry)||void 0===f||f.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts state of type '${typeof t.internalAccounts}'`)));if(!(0,r.hasProperty)(t.internalAccounts,"selectedAccount"))return void(null===(c=global.sentry)||void 0===c||c.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts state, missing selectedAccount`)));if("string"!=typeof t.internalAccounts.selectedAccount)return void(null===(l=global.sentry)||void 0===l||l.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.selectedAccount state of type '${typeof t.internalAccounts.selectedAccount}'`)));if(!(0,r.hasProperty)(t.internalAccounts,"accounts"))return void(null===(u=global.sentry)||void 0===u||u.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts state, missing accounts`)));if(!(0,i.isObject)(t.internalAccounts.accounts))return void(null===(d=global.sentry)||void 0===d||d.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.accounts state of type '${typeof t.internalAccounts.accounts}'`)));if(0===Object.keys(t.internalAccounts.accounts).length)return void a.default.warn(`Migration ${o}: Skipping, no accounts found`);if(""===t.internalAccounts.selectedAccount)return void a.default.warn(`Migration ${o}: Skipping, no selected account set`);const p=Object.values(t.internalAccounts.accounts)[0];var h,m,b;if(!(0,i.isObject)(p))return void(null===(h=global.sentry)||void 0===h||h.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.accounts state, entry found of type '${typeof p}'`)));if(!(0,r.hasProperty)(p,"id"))return void(null===(m=global.sentry)||void 0===m||m.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.accounts state, entry found that is missing an id`)));if("string"!=typeof p.id)return void(null===(b=global.sentry)||void 0===b||b.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.accounts state, entry found with an id of type '${typeof p.id}'`)));(0,r.hasProperty)(t.internalAccounts.accounts,t.internalAccounts.selectedAccount)||(t.internalAccounts.selectedAccount=p.id)}(t.data),t},n.version=void 0;var s,r=e("@metamask/utils"),i=e("lodash"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=n.version=121.1}}},{package:"$root$",file:"app/scripts/migrations/121.1.ts"}],[268,{"../../../shared/constants/network":5139,"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=a,function(e){const t=e.NetworkController;if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(t)&&(0,s.hasProperty)(t,"networkConfigurations")&&(0,s.isObject)(t.networkConfigurations))for(const e of Object.values(t.networkConfigurations))(0,s.isObject)(e)&&e.chainId===i.CHAIN_IDS.POLYGON&&((0,s.hasProperty)(e,"rpcPrefs")&&(0,s.isObject)(e.rpcPrefs)&&(0,s.hasProperty)(e.rpcPrefs,"imageUrl")&&"./images/matic-token.svg"===e.rpcPrefs.imageUrl&&(e.rpcPrefs.imageUrl="./images/pol-token.svg"),(0,s.hasProperty)(e,"ticker")&&"MATIC"===e.ticker&&(e.ticker="POL"));(0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(t)&&(0,s.hasProperty)(t,"providerConfig")&&(0,s.isObject)(t.providerConfig)&&(0,s.hasProperty)(t.providerConfig,"chainId")&&t.providerConfig.chainId===i.CHAIN_IDS.POLYGON&&((0,s.hasProperty)(t.providerConfig,"rpcPrefs")&&(0,s.isObject)(t.providerConfig.rpcPrefs)&&(0,s.hasProperty)(t.providerConfig.rpcPrefs,"imageUrl")&&"./images/matic-token.svg"===t.providerConfig.rpcPrefs.imageUrl&&(t.providerConfig.rpcPrefs.imageUrl="./images/pol-token.svg"),(0,s.hasProperty)(t.providerConfig,"ticker")&&"MATIC"===t.providerConfig.ticker&&(t.providerConfig.ticker="POL"))}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash"),i=e("../../../shared/constants/network");const a=n.version=121.2}}},{package:"$root$",file:"app/scripts/migrations/121.2.ts"}],[269,{"../../../shared/constants/network":5139,"@metamask/controller-utils":1379,"@metamask/network-controller":1946,"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=f,function(e){const t=(null==e?void 0:e.NetworkController)||{},n=(null==t?void 0:t.providerConfig)||{};if((null==n?void 0:n.chainId)!==o.CHAIN_IDS.LINEA_GOERLI)return e;const f=e.NetworkController;(0,i.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&(0,s.isObject)(e.NetworkController.providerConfig)&&(0,i.hasProperty)(e.NetworkController.providerConfig,"chainId")&&e.NetworkController.providerConfig.chainId===o.CHAIN_IDS.LINEA_GOERLI&&(f.providerConfig={type:r.NetworkType["linea-sepolia"],rpcPrefs:{},chainId:o.CHAIN_IDS.LINEA_SEPOLIA,nickname:o.LINEA_SEPOLIA_DISPLAY_NAME,rpcUrl:o.CHAIN_ID_TO_RPC_URL_MAP[o.CHAIN_IDS.LINEA_SEPOLIA],providerType:o.NETWORK_TYPES.LINEA_SEPOLIA,ticker:o.TEST_NETWORK_TICKER_MAP[o.NETWORK_TYPES.LINEA_SEPOLIA],id:o.NETWORK_TYPES.LINEA_SEPOLIA},f.selectedNetworkClientId=o.NETWORK_TYPES.LINEA_SEPOLIA,f.networksMetadata={...f.networksMetadata,"linea-sepolia":{EIPS:{1559:!0},status:a.NetworkStatus.Available}})}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/controller-utils"),i=e("@metamask/utils"),a=e("@metamask/network-controller"),o=e("../../../shared/constants/network");const f=n.version=121}}},{package:"$root$",file:"app/scripts/migrations/121.ts"}],[270,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,function(e){var t;if(!(0,r.hasProperty)(e,"PreferencesController"))return;if(!(0,r.isObject)(e.PreferencesController)){var n,s;const t=typeof e.PreferencesController;null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error(`state.PreferencesController is type: ${t}`))}(0,r.isObject)(null===(t=e.PreferencesController)||void 0===t?void 0:t.preferences)||(e.PreferencesController={preferences:{}});e.PreferencesController.preferences.redesignedConfirmationsEnabled=!0}(t.data),t},n.version=void 0;var s=e("lodash"),r=e("@metamask/utils");const i=n.version=122}}},{package:"$root$",file:"app/scripts/migrations/122.ts"}],[271,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=r,function(e){const t=null==e?void 0:e.PreferencesController;if(null!=t&&t.preferences){var n;const e=null==t?void 0:t.useNonceField,s=null==t||null===(n=t.featureFlags)||void 0===n?void 0:n.sendHexData;t.preferences.showConfirmationAdvancedDetails=e||s}}(t.data),t},n.version=void 0;var s=e("lodash");const r=n.version=123}}},{package:"$root$",file:"app/scripts/migrations/123.ts"}],[272,{lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=r,function(e){const t=null==e?void 0:e.PreferencesController,n=null==t?void 0:t.preferences;n&&(n.redesignedTransactionsEnabled=!1)}(t.data),t},n.version=void 0;var s=e("lodash");const r=n.version=124}}},{package:"$root$",file:"app/scripts/migrations/124.ts"}],[2721,{"./constants.cjs":2722,"./helpers/Bundler.cjs":2723,"./helpers/PendingUserOperationTracker.cjs":2724,"./helpers/SnapSmartContractAccount.cjs":2725,"./logger.cjs":2727,"./types.cjs":2728,"./utils/gas-fees.cjs":2730,"./utils/gas.cjs":2731,"./utils/transaction.cjs":2732,"./utils/validation.cjs":2733,"@metamask/base-controller":1353,"@metamask/controller-utils":1379,"@metamask/eth-query":1596,"@metamask/rpc-errors":2262,"@metamask/transaction-controller":2647,"@metamask/utils":2744,events:3823,lodash:4256,uuid:5050},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o,f,c,l,u,d,p,h,m,b,g,y,v,w,T,S,k,_,E,I,P=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},C=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},j=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.UserOperationController=void 0;const A=e("@metamask/base-controller"),x=e("@metamask/controller-utils"),O=j(e("@metamask/eth-query")),N=e("@metamask/rpc-errors"),M=e("@metamask/transaction-controller"),R=e("@metamask/utils"),B=j(e("events")),L=e("lodash"),D=e("uuid"),F=e("./constants.cjs"),U=e("./helpers/Bundler.cjs"),$=e("./helpers/PendingUserOperationTracker.cjs"),G=e("./helpers/SnapSmartContractAccount.cjs"),H=e("./logger.cjs"),V=e("./types.cjs"),J=e("./utils/gas.cjs"),z=e("./utils/gas-fees.cjs"),q=e("./utils/transaction.cjs"),K=e("./utils/validation.cjs"),W={userOperations:{persist:!0,anonymous:!1}};class Y extends A.BaseController{constructor({entrypoint:e,getGasFeeEstimates:t,messenger:n,state:o}){super({name:"UserOperationController",metadata:W,messenger:n,state:{userOperations:{},...o}}),s.add(this),r.set(this,void 0),i.set(this,void 0),a.set(this,void 0),this.hub=new B.default,P(this,r,e,"f"),P(this,i,t,"f"),P(this,a,new $.PendingUserOperationTracker({getUserOperations:()=>(0,L.cloneDeep)(Object.values(this.state.userOperations)),messenger:n}),"f"),C(this,s,"m",T).call(this)}async addUserOperation(e,t){return(0,K.validateAddUserOperationRequest)(e),(0,K.validateAddUserOperationOptions)(t),await C(this,s,"m",o).call(this,e,t)}async addUserOperationFromTransaction(e,t){(0,K.validateAddUserOperationOptions)(t);const{data:n,from:r,maxFeePerGas:i,maxPriorityFeePerGas:a,to:f,value:c}=e,l={data:""===n?undefined:n,from:r,maxFeePerGas:i,maxPriorityFeePerGas:a,to:f,value:c};return(0,K.validateAddUserOperationRequest)(l),await C(this,s,"m",o).call(this,l,{...t,transaction:e})}startPollingByNetworkClientId(e){return C(this,a,"f").startPolling({networkClientId:e})}}n.UserOperationController=Y,r=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakSet,o=async function(e,t){(0,H.projectLogger)("Adding user operation",{request:e,options:t});const{networkClientId:n,origin:r,smartContractAccount:i,swaps:a,transaction:o}=t,{chainId:u,provider:d}=await C(this,s,"m",_).call(this,n),p=await C(this,s,"m",l).call(this,u,r,o,a),h=i??new G.SnapSmartContractAccount(this.messagingSystem),m={chainId:u,metadata:p,options:{...t,smartContractAccount:h},provider:d,request:e,transaction:o},{id:g}=p;let y=!1;const v=(async()=>{try{return await C(this,s,"m",f).call(this,m)}catch(e){if(C(this,s,"m",b).call(this,p,e),y)throw e;return undefined}})(),w=async()=>(y=!0,await v);return{id:g,hash:w,transactionHash:async()=>{await w();const{transactionHash:e}=await C(this,s,"m",c).call(this,p);return e}}},f=async function(e){const{metadata:t,options:n}=e,{requireApproval:r,smartContractAccount:i}=n;let a;try{return await C(this,s,"m",u).call(this,e),await C(this,s,"m",d).call(this,t,i),this.hub.emit("user-operation-added",t),!1!==r&&(a=await C(this,s,"m",p).call(this,e)),await C(this,s,"m",h).call(this,t,i),await C(this,s,"m",m).call(this,t),a?.success(),t.hash}catch(e){throw a?.error(e),e}},c=async function(e){const{id:t,hash:n}=e;return(0,H.projectLogger)("Waiting for confirmation",t,n),new Promise(((e,n)=>{this.hub.once(`${t}:confirmed`,(t=>{e(t)})),this.hub.once(`${t}:failed`,((e,t)=>{n(t)}))}))},l=async function(e,t,n,r){const i={actualGasCost:null,actualGasUsed:null,baseFeePerGas:null,bundlerUrl:null,chainId:e,error:null,hash:null,id:(0,D.v1)(),origin:t,status:V.UserOperationStatus.Unapproved,swapsMetadata:r?{approvalTxId:r.approvalTxId??null,destinationTokenAddress:r.destinationTokenAddress??null,destinationTokenAmount:r.destinationTokenAmount??null,destinationTokenDecimals:r.destinationTokenDecimals??null,destinationTokenSymbol:r.destinationTokenSymbol??null,estimatedBaseFee:r.estimatedBaseFee??null,sourceTokenAddress:r.sourceTokenAddress??null,sourceTokenAmount:r.sourceTokenAmount??null,sourceTokenDecimals:r.sourceTokenDecimals??null,sourceTokenSymbol:r.sourceTokenSymbol??null,swapAndSendRecipient:r.swapAndSendRecipient??null,swapMetaData:r.swapMetaData??null,swapTokenValue:r.swapTokenValue??null}:null,time:Date.now(),transactionHash:null,transactionParams:n??null,transactionType:null,userFeeLevel:null,userOperation:C(this,s,"m",g).call(this,n)};return C(this,s,"m",y).call(this,i),(0,H.projectLogger)("Added user operation",i.id),i},u=async function(e){const{chainId:t,metadata:n,options:a,provider:o,request:f,transaction:c}=e,{data:l,from:u,to:d,value:p}=f,{id:h,transactionParams:m,userOperation:b}=n,{smartContractAccount:g}=a;(0,H.projectLogger)("Preparing user operation",{id:h});const v=await C(this,s,"m",k).call(this,c,o,a);n.transactionType=v??null,(0,H.projectLogger)("Determined transaction type",v),await(0,z.updateGasFees)({getGasFeeEstimates:C(this,i,"f"),metadata:n,originalRequest:f,provider:o,transaction:m??undefined});const w=await g.prepareUserOperation({chainId:t,data:l,from:u,to:d,value:p});(0,K.validatePrepareUserOperationResponse)(w);const{bundler:T,callData:S,dummyPaymasterAndData:_,dummySignature:E,initCode:I,nonce:P,sender:j}=w;b.callData=S,b.initCode=I??F.EMPTY_BYTES,b.nonce=P,b.paymasterAndData=_??F.EMPTY_BYTES,b.sender=j,b.signature=E??F.EMPTY_BYTES,n.bundlerUrl=T,await(0,J.updateGas)(n,w,C(this,r,"f")),C(this,s,"m",y).call(this,n)},d=async function(e,t){const{id:n,userOperation:r,chainId:i}=e;(0,H.projectLogger)("Requesting paymaster data",{id:n});const a=await t.updateUserOperation({userOperation:r,chainId:i});(0,K.validateUpdateUserOperationResponse)(a),r.paymasterAndData=a.paymasterAndData??F.EMPTY_BYTES,a.callGasLimit&&(r.callGasLimit=a.callGasLimit),a.preVerificationGas&&(r.preVerificationGas=a.preVerificationGas),a.verificationGasLimit&&(r.verificationGasLimit=a.verificationGasLimit),C(this,s,"m",y).call(this,e)},p=async function(e){(0,H.projectLogger)("Requesting approval");const{metadata:t}=e,{resultCallbacks:n,value:r}=await C(this,s,"m",S).call(this,t),i=r?.txMeta;return i&&await C(this,s,"m",E).call(this,e,i),t.status=V.UserOperationStatus.Approved,C(this,s,"m",y).call(this,t),n},h=async function(e,t){const{id:n,chainId:r,userOperation:i}=e;(0,H.projectLogger)("Signing user operation",n,i);const a=await t.signUserOperation({userOperation:i,chainId:r});(0,K.validateSignUserOperationResponse)(a);const{signature:o}=a;i.signature=o,(0,H.projectLogger)("Signed user operation",o),e.status=V.UserOperationStatus.Signed,C(this,s,"m",y).call(this,e)},m=async function(e){const{userOperation:t}=e;(0,H.projectLogger)("Submitting user operation",t);const n=new U.Bundler(e.bundlerUrl),i=await n.sendUserOperation(t,C(this,r,"f"));e.hash=i,e.status=V.UserOperationStatus.Submitted,C(this,s,"m",y).call(this,e)},b=function(e,t){const{id:n}=e,r=t;(0,H.projectLogger)("User operation failed",n,t),e.error={name:r.name,message:r.message,stack:r.stack,code:r.code,rpc:r.value},e.status=V.UserOperationStatus.Failed,C(this,s,"m",y).call(this,e),String(r.code)===String(N.errorCodes.provider.userRejectedRequest)&&C(this,s,"m",v).call(this,n)},g=function(e){return{callData:F.EMPTY_BYTES,callGasLimit:F.EMPTY_BYTES,initCode:F.EMPTY_BYTES,maxFeePerGas:e?.maxFeePerGas??F.EMPTY_BYTES,maxPriorityFeePerGas:e?.maxPriorityFeePerGas??F.EMPTY_BYTES,nonce:F.EMPTY_BYTES,paymasterAndData:F.EMPTY_BYTES,preVerificationGas:F.EMPTY_BYTES,sender:F.ADDRESS_ZERO,signature:F.EMPTY_BYTES,verificationGasLimit:F.EMPTY_BYTES}},y=function(e){const{id:t}=e;this.update((n=>{n.userOperations[t]=(0,L.cloneDeep)(e)})),C(this,s,"m",w).call(this,e)},v=function(e){this.update((t=>{delete t.userOperations[e]}))},w=function(e){if(!e.transactionParams)return;const t=(0,q.getTransactionMetadata)(e);this.hub.emit("transaction-updated",t)},T=function(){C(this,a,"f").hub.on("user-operation-confirmed",(e=>{(0,H.projectLogger)("In listener..."),this.hub.emit("user-operation-confirmed",e),this.hub.emit(`${e.id}:confirmed`,e)})),C(this,a,"f").hub.on("user-operation-failed",((e,t)=>{this.hub.emit("user-operation-failed",e,t),this.hub.emit(`${e.id}:failed`,e,t)})),C(this,a,"f").hub.on("user-operation-updated",(e=>{C(this,s,"m",y).call(this,e)}))},S=async function(e){const{id:t,origin:n}=e,s=x.ApprovalType.Transaction,r={txId:t};return await this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:n,type:s,requestData:r,expectsResult:!0},!0)},k=async function(e,t,n){if(!e)return undefined;if(n.type)return n.type;const s=new O.default(t),r=(0,M.determineTransactionType)(e,s);return(await r).type},_=async function(e){const{provider:t,configuration:n}=this.messagingSystem.call("NetworkController:getNetworkClientById",e),{chainId:s}=n;return{provider:t,chainId:s}},E=async function(e,t){(0,H.projectLogger)("Found updated transaction in approval",{updatedTransaction:t});const{metadata:n,request:r}=e,{userOperation:i}=n,a=i.paymasterAndData!==F.EMPTY_BYTES,o=(0,R.add0x)(t.txParams.maxFeePerGas),f=(0,R.add0x)(t.txParams.maxPriorityFeePerGas);let c=!1;const l=i.maxFeePerGas,u=i.maxPriorityFeePerGas,d=l!==o||u!==f,p=a&&o===F.VALUE_ZERO&&f===F.VALUE_ZERO;d&&!p&&((0,H.projectLogger)("Gas fees updated during approval",{previousMaxFeePerGas:l,previousMaxPriorityFeePerGas:u,updatedMaxFeePerGas:o,updatedMaxPriorityFeePerGas:f}),i.maxFeePerGas=o,i.maxPriorityFeePerGas=f,c=a);const h=r.data??F.EMPTY_BYTES,m=t.txParams.data??F.EMPTY_BYTES;h!==m&&((0,H.projectLogger)("Data updated during approval",{previousData:h,updatedData:m}),c=!0);const b=r.value??F.VALUE_ZERO,g=t.txParams.value??F.VALUE_ZERO;if(b!==g&&((0,H.projectLogger)("Value updated during approval",{previousValue:b,updatedValue:g}),c=!0),c){const t={...r,data:m,maxFeePerGas:o,maxPriorityFeePerGas:f,value:g};await C(this,s,"m",I).call(this,{...e,request:t})}},I=async function(e){(0,H.projectLogger)("Regenerating user operation as parameters were updated during approval");const{options:{smartContractAccount:t},metadata:n}=e;await C(this,s,"m",u).call(this,e),await C(this,s,"m",d).call(this,n,t),(0,H.projectLogger)("Regenerated user operation",n.userOperation)}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/UserOperationController.cjs"}],[2722,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.VALUE_ZERO=n.ADDRESS_ZERO=n.EMPTY_BYTES=void 0,n.EMPTY_BYTES="0x",n.ADDRESS_ZERO="0x0000000000000000000000000000000000000000",n.VALUE_ZERO="0x0"}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/constants.cjs"}],[2723,{"../logger.cjs":2727},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.Bundler=void 0;const f=e("../logger.cjs"),c=(0,f.createModuleLogger)(f.projectLogger,"bundler");n.Bundler=class{constructor(e){s.add(this),r.set(this,void 0),a(this,r,e,"f")}async estimateUserOperationGas(e,t){c("Estimating gas",{url:o(this,r,"f"),userOperation:e,entrypoint:t});const n=await o(this,s,"m",i).call(this,"eth_estimateUserOperationGas",[e,t]);return c("Estimated gas",{response:n}),n}async getUserOperationReceipt(e){return c("Getting user operation receipt",{url:o(this,r,"f"),hash:e}),await o(this,s,"m",i).call(this,"eth_getUserOperationReceipt",[e])}async sendUserOperation(e,t){c("Sending user operation",{url:o(this,r,"f"),userOperation:e,entrypoint:t});const n=await o(this,s,"m",i).call(this,"eth_sendUserOperation",[e,t]);return c("Sent user operation",n),n}},r=new WeakMap,s=new WeakSet,i=async function(e,t){const n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:e,params:t})},s=await fetch(o(this,r,"f"),n),i=await s.json();if(i.error){const e=new Error(i.error.message||i.error);throw e.code=i.error.code,e}return i.result}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/helpers/Bundler.cjs"}],[2724,{"../logger.cjs":2727,"../types.cjs":2728,"./Bundler.cjs":2723,"@metamask/controller-utils":1379,"@metamask/eth-query":1596,"@metamask/polling-controller":2130,"@metamask/utils":2744,events:3823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i,a,o,f,c,l,u,d,p,h=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},m=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PendingUserOperationTracker=void 0;const g=e("@metamask/controller-utils"),y=b(e("@metamask/eth-query")),v=e("@metamask/polling-controller"),w=e("@metamask/utils"),T=b(e("events")),S=e("../logger.cjs"),k=e("../types.cjs"),_=e("./Bundler.cjs"),E=(0,w.createModuleLogger)(S.projectLogger,"pending-user-operations");class I extends((0,v.BlockTrackerPollingControllerOnly)()){constructor({getUserOperations:e,messenger:t}){super(),s.add(this),r.set(this,void 0),i.set(this,void 0),this.hub=new T.default,h(this,r,e,"f"),h(this,i,t,"f")}async _executePoll({networkClientId:e}){try{const{blockTracker:t,configuration:n,provider:r}=this._getNetworkClientById(e);E("Polling",{blockNumber:t.getCurrentBlock(),chainId:n.chainId}),await m(this,s,"m",a).call(this,n.chainId,r)}catch(e){E("Failed to check user operations",e)}}_getNetworkClientById(e){return m(this,i,"f").call("NetworkController:getNetworkClientById",e)}}n.PendingUserOperationTracker=I,r=new WeakMap,i=new WeakMap,s=new WeakSet,a=async function(e,t){const n=m(this,s,"m",l).call(this).filter((t=>t.chainId===e));n.length?(E("Found pending user operations to check",{count:n.length,ids:n.map((e=>e.id))}),await Promise.all(n.map((e=>m(this,s,"m",o).call(this,e,t))))):E("No pending user operations to check")},o=async function(e,t){const{bundlerUrl:n,hash:r,id:i}=e;if(r&&n)try{const a=await m(this,s,"m",d).call(this,r,n),o=a?.success;if(a&&!o)return void m(this,s,"m",c).call(this,e,a);if(o)return void await m(this,s,"m",f).call(this,e,a,t);E("No receipt found for user operation",{id:i,hash:r})}catch(e){E("Failed to check user operation",i,e)}else E("Skipping user operation as missing hash or bundler",i)},f=async function(e,t,n){const{id:r}=e,{actualGasCost:i,actualGasUsed:a,receipt:{blockHash:o,transactionHash:f}}=t;E("User operation confirmed",r,f);const{baseFeePerGas:c}=await(0,g.query)(new y.default(n),"getBlockByHash",[o,!1]);e.actualGasCost=m(this,s,"m",p).call(this,i),e.actualGasUsed=m(this,s,"m",p).call(this,a),e.baseFeePerGas=c,e.status=k.UserOperationStatus.Confirmed,e.transactionHash=f,m(this,s,"m",u).call(this,e),this.hub.emit("user-operation-confirmed",e)},c=function(e,t){const{id:n}=e;E("User operation failed",n),e.status=k.UserOperationStatus.Failed,m(this,s,"m",u).call(this,e),this.hub.emit("user-operation-failed",e,new Error("User operation receipt has failed status"))},l=function(){return m(this,r,"f").call(this).filter((e=>e.status===k.UserOperationStatus.Submitted))},u=function(e){this.hub.emit("user-operation-updated",e)},d=async function(e,t){return new _.Bundler(t).getUserOperationReceipt(e)},p=function(e){return"number"==typeof e?(0,g.toHex)(e):e}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/helpers/PendingUserOperationTracker.cjs"}],[2725,{"../constants.cjs":2722,"../utils/chain-id.cjs":2729},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.SnapSmartContractAccount=void 0;const a=e("../constants.cjs"),o=e("../utils/chain-id.cjs");n.SnapSmartContractAccount=class{constructor(e){s.set(this,void 0),r(this,s,e,"f")}async prepareUserOperation(e){const{chainId:t,data:n,from:r,to:f,value:c}=e,l=n??a.EMPTY_BYTES,u=f??a.ADDRESS_ZERO,d=c??a.VALUE_ZERO,p=await i(this,s,"f").call("KeyringController:prepareUserOperation",r,[{data:l,to:u,value:d}],{chainId:(0,o.toEip155ChainId)(t)}),{bundlerUrl:h,callData:m,dummyPaymasterAndData:b,dummySignature:g,gasLimits:y,initCode:v,nonce:w}=p;return{bundler:h,callData:m,dummyPaymasterAndData:b,dummySignature:g,gas:y,initCode:v,nonce:w,sender:r}}async updateUserOperation(e){const{userOperation:t,chainId:n}=e,{sender:r}=t,{paymasterAndData:f,verificationGasLimit:c,preVerificationGas:l,callGasLimit:u}=await i(this,s,"f").call("KeyringController:patchUserOperation",r,t,{chainId:(0,o.toEip155ChainId)(n)});return{paymasterAndData:f===a.EMPTY_BYTES?undefined:f,verificationGasLimit:c,preVerificationGas:l,callGasLimit:u}}async signUserOperation(e){const{userOperation:t,chainId:n}=e,{sender:r}=t;return{signature:await i(this,s,"f").call("KeyringController:signUserOperation",r,t,{chainId:(0,o.toEip155ChainId)(n)})}}},s=new WeakMap}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/helpers/SnapSmartContractAccount.cjs"}],[2726,{"./UserOperationController.cjs":2721,"./types.cjs":2728},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./UserOperationController.cjs"),n),r(e("./types.cjs"),n)}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/index.cjs"}],[2727,{"@metamask/utils":2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.projectLogger=void 0;const s=e("@metamask/utils");Object.defineProperty(n,"createModuleLogger",{enumerable:!0,get:function(){return s.createModuleLogger}}),n.projectLogger=(0,s.createProjectLogger)("user-operation-controller")}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/logger.cjs"}],[2728,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s;Object.defineProperty(n,"__esModule",{value:!0}),n.UserOperationStatus=void 0,function(e){e.Unapproved="unapproved",e.Approved="approved",e.Signed="signed",e.Submitted="submitted",e.Failed="failed",e.Confirmed="confirmed"}(s||(n.UserOperationStatus=s={}))}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/types.cjs"}],[2729,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toEip155ChainId=void 0,n.toEip155ChainId=function(e){const t=Number(e);return Number.isInteger(t)?t.toString():e}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/utils/chain-id.cjs"}],[273,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){(0,s.hasProperty)(e,"PreferencesController")&&(0,s.isObject)(e.PreferencesController)&&!0===e.PreferencesController.useExternalServices&&(e.PreferencesController.useTokenDetection=!0);(0,s.hasProperty)(e,"AppMetadataController")&&(0,s.isObject)(e.AppMetadataController)&&delete e.AppMetadataController.showTokenAutodetectModalOnUpgrade}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=125.1}}},{package:"$root$",file:"app/scripts/migrations/125.1.ts"}],[2730,{"../constants.cjs":2722,"../logger.cjs":2727,"@metamask/controller-utils":1379,"@metamask/eth-query":1596,"@metamask/gas-fee-controller":1727,"@metamask/transaction-controller":2647,"@metamask/utils":2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.updateGasFees=void 0;const r=e("@metamask/controller-utils"),i=s(e("@metamask/eth-query")),a=e("@metamask/gas-fee-controller"),o=e("@metamask/transaction-controller"),f=e("@metamask/utils"),c=e("../constants.cjs"),l=e("../logger.cjs"),u=(0,l.createModuleLogger)(l.projectLogger,"gas-fees");function d(e){return(0,r.toHex)((0,r.gweiDecToWEIBN)(e))}function p(e){return!e||e===c.EMPTY_BYTES}n.updateGasFees=async function(e){const{metadata:t,originalRequest:n,transaction:s}=e,{userOperation:c}=t;let l;const h=async()=>(l||(l=await async function(e){const{getGasFeeEstimates:t,provider:n}=e;try{const{gasFeeEstimates:e,gasEstimateType:n}=await t();if(n===a.GAS_ESTIMATE_TYPES.FEE_MARKET){const{medium:{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:n}={}}=e;if(t&&n){const e={maxFeePerGas:d(n),maxPriorityFeePerGas:d(t)};return u("Using medium values from fee market estimate",e),e}}if(n===a.GAS_ESTIMATE_TYPES.LEGACY){const t=d(e.medium);return u("Using medium value from legacy estimate",t),{maxFeePerGas:t}}if(n===a.GAS_ESTIMATE_TYPES.ETH_GASPRICE){const t=d(e.gasPrice);return u("Using gasPrice from estimate",t),{maxFeePerGas:t}}}catch(e){u("Failed to get estimate",e)}const s=await(0,r.query)(new i.default(n),"gasPrice");if(!s)return{};const o=(0,f.add0x)(s.toString(16));return u("Using gasPrice from network as fallback",o),{maxFeePerGas:o}}(e)),l);c.maxFeePerGas=await async function(e,t,n){const{maxFeePerGas:s,maxPriorityFeePerGas:r}=e,{gasPrice:i}=n??{};if(!p(s))return u("Using maxFeePerGas from request",s),s;if(p(r)&&i)return u("Setting maxFeePerGas to transaction gasPrice",i),i;const{maxFeePerGas:a}=await t();if(!a)throw new Error("Failed to get gas fee estimate for maxFeePerGas");return u("Using maxFeePerGas from estimate",a),a}(n,h,s),c.maxPriorityFeePerGas=await async function(e,t,n,s){const{maxFeePerGas:r,maxPriorityFeePerGas:i}=e,{gasPrice:a}=s??{},{maxFeePerGas:o}=n;if(!p(i))return u("Using maxPriorityFeePerGas from request",i),i;if(p(r)&&a)return u("Setting maxPriorityFeePerGas to transaction gasPrice",a),a;const{maxPriorityFeePerGas:f}=await t();if(f)return u("Using maxPriorityFeePerGas from estimate",f),f;return u("Setting maxPriorityFeePerGas to maxFeePerGas",o),o}(n,h,c,s),t.userFeeLevel=function(e,t,n,s){const{origin:i}=e,{maxFeePerGas:a,maxPriorityFeePerGas:f}=t,{maxFeePerGas:c,maxPriorityFeePerGas:l}=n||{};if(p(a)&&p(f)&&s?.gasPrice)return i===r.ORIGIN_METAMASK?o.UserFeeLevel.CUSTOM:o.UserFeeLevel.DAPP_SUGGESTED;if(p(a)&&p(f)&&c&&l)return o.UserFeeLevel.MEDIUM;if(i===r.ORIGIN_METAMASK)return o.UserFeeLevel.CUSTOM;return o.UserFeeLevel.DAPP_SUGGESTED}(t,n,l,s)}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/utils/gas-fees.cjs"}],[2731,{"../constants.cjs":2722,"../helpers/Bundler.cjs":2723,"../logger.cjs":2727,"@metamask/controller-utils":1379,"@metamask/utils":2744,"bn.js":3489},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.updateGas=void 0;const r=e("@metamask/controller-utils"),i=e("@metamask/utils"),a=s(e("bn.js")),o=e("../constants.cjs"),f=e("../helpers/Bundler.cjs"),c=e("../logger.cjs"),l=(0,c.createModuleLogger)(c.projectLogger,"gas"),u=1.5;function d(e){const t=("string"==typeof e?(0,r.hexToBN)(e):new a.default(e)).muln(u);return(0,i.add0x)(t.toString(16))}n.updateGas=async function(e,t,n){const{userOperation:s}=e;if(t.gas)return s.callGasLimit=t.gas.callGasLimit,s.preVerificationGas=t.gas.preVerificationGas,s.verificationGasLimit=t.gas.verificationGasLimit,void l("Using gas values from smart contract account",{callGasLimit:s.callGasLimit,preVerificationGas:s.preVerificationGas,verificationGasLimit:s.verificationGasLimit});const r={...s,maxFeePerGas:o.VALUE_ZERO,maxPriorityFeePerGas:o.VALUE_ZERO,callGasLimit:o.VALUE_ZERO,preVerificationGas:o.VALUE_ZERO,verificationGasLimit:"0xF4240"},i=new f.Bundler(e.bundlerUrl),a=await i.estimateUserOperationGas(r,n);s.callGasLimit=d(a.callGasLimit),s.preVerificationGas=d(a.preVerificationGas),s.verificationGasLimit=d(a.verificationGasLimit??a.verificationGas),l("Using buffered gas values from bundler estimate",{callGasLimit:s.callGasLimit,preVerificationGas:s.preVerificationGas,verificationGasLimit:s.verificationGasLimit,multiplier:u,estimate:a})}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/utils/gas.cjs"}],[2732,{"../constants.cjs":2722,"../types.cjs":2728,"@metamask/transaction-controller":2647,"@metamask/utils":2744,"bn.js":3489},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionMetadata=void 0;const r=e("@metamask/transaction-controller"),i=e("@metamask/utils"),a=s(e("bn.js")),o=e("../constants.cjs"),f=e("../types.cjs");n.getTransactionMetadata=function(e){const{actualGasCost:t,actualGasUsed:n,baseFeePerGas:s,chainId:c,error:l,origin:u,transactionHash:d,id:p,swapsMetadata:h,time:m,transactionParams:b,transactionType:g,userFeeLevel:y,userOperation:v}=e;if(!b)return undefined;const w=t&&n?(0,i.add0x)(new a.default((0,i.remove0x)(t),16).div(new a.default((0,i.remove0x)(n),16)).toString(16)):undefined,T=l?{name:l.name,message:l.message,stack:l.stack,code:l.code,rpc:l.rpc}:undefined,S={[f.UserOperationStatus.Unapproved]:r.TransactionStatus.unapproved,[f.UserOperationStatus.Approved]:r.TransactionStatus.approved,[f.UserOperationStatus.Signed]:r.TransactionStatus.signed,[f.UserOperationStatus.Submitted]:r.TransactionStatus.submitted,[f.UserOperationStatus.Confirmed]:r.TransactionStatus.confirmed,[f.UserOperationStatus.Failed]:r.TransactionStatus.failed}[e.status],k=function(...e){const t=new a.default(0);for(const n of e)n&&t.iadd(new a.default((0,i.remove0x)(n),16));return(0,i.add0x)(t.toString(16))}(v.preVerificationGas,v.verificationGasLimit,v.callGasLimit),_=v.paymasterAndData!==o.EMPTY_BYTES,E=_?o.VALUE_ZERO:v.maxFeePerGas,I=_?o.VALUE_ZERO:v.maxPriorityFeePerGas,P=v.nonce===o.EMPTY_BYTES?undefined:v.nonce,C={...b,from:v.sender,gas:k,nonce:P,maxFeePerGas:E,maxPriorityFeePerGas:I};delete C.gasPrice;const j={approvalTxId:h?.approvalTxId??undefined,destinationTokenAddress:h?.destinationTokenAddress??undefined,destinationTokenAmount:h?.destinationTokenAmount??undefined,destinationTokenDecimals:h?.destinationTokenDecimals??undefined,destinationTokenSymbol:h?.destinationTokenSymbol??undefined,estimatedBaseFee:h?.estimatedBaseFee??undefined,sourceTokenAddress:h?.sourceTokenAddress??undefined,sourceTokenAmount:h?.sourceTokenAmount??undefined,sourceTokenDecimals:h?.sourceTokenDecimals??undefined,sourceTokenSymbol:h?.sourceTokenSymbol??undefined,swapAndSendRecipient:h?.swapAndSendRecipient??undefined,swapMetaData:h?.swapMetaData??undefined,swapTokenValue:h?.swapTokenValue??undefined},A=_?r.UserFeeLevel.CUSTOM:y;return{baseFeePerGas:s??undefined,chainId:c,error:T,hash:d??undefined,id:p,isUserOperation:!0,origin:u,status:S,time:m,txParams:C,txReceipt:{effectiveGasPrice:w??undefined,gasUsed:n??undefined},type:g??undefined,userFeeLevel:A,...j}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/utils/transaction.cjs"}],[2733,{"../constants.cjs":2722,"@metamask/superstruct":2619,"@metamask/transaction-controller":2647,"@metamask/utils":2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSignUserOperationResponse=n.validateUpdateUserOperationResponse=n.validatePrepareUserOperationResponse=n.validateAddUserOperationOptions=n.validateAddUserOperationRequest=void 0;const s=e("@metamask/superstruct"),r=e("@metamask/transaction-controller"),i=e("@metamask/utils"),a=e("../constants.cjs");function o(e,t,n){try{(0,s.assert)(e,t,n)}catch(e){const t=e.failures().map((e=>e.path.length?`${e.path.join(".")} - ${e.message}`:e.message)).join("\n");throw new Error(`${n}\n${t}`)}}function f(){return(0,s.define)("Hexadecimal String",(e=>(0,i.isStrictHexString)(e)))}function c(){return(0,s.define)("Hexadecimal String or 0x",(e=>(0,i.isStrictHexString)(e)||e===a.EMPTY_BYTES))}n.validateAddUserOperationRequest=function(e){const t=f(),n=c();o(e,(0,s.object)({data:(0,s.optional)(n),from:t,maxFeePerGas:(0,s.optional)(t),maxPriorityFeePerGas:(0,s.optional)(t),to:(0,s.optional)(t),value:(0,s.optional)(t)}),"Invalid request to add user operation")},n.validateAddUserOperationOptions=function(e){o(e,(0,s.object)({networkClientId:(0,s.string)(),origin:(0,s.string)(),requireApproval:(0,s.optional)((0,s.boolean)()),smartContractAccount:(0,s.optional)((0,s.object)({prepareUserOperation:(0,s.func)(),updateUserOperation:(0,s.func)(),signUserOperation:(0,s.func)()})),swaps:(0,s.optional)((0,s.object)({approvalTxId:(0,s.optional)((0,s.string)()),destinationTokenAddress:(0,s.optional)((0,s.string)()),destinationTokenDecimals:(0,s.optional)((0,s.number)()),destinationTokenSymbol:(0,s.optional)((0,s.string)()),estimatedBaseFee:(0,s.optional)((0,s.string)()),sourceTokenSymbol:(0,s.optional)((0,s.string)()),swapMetaData:(0,s.optional)((0,s.object)()),swapTokenValue:(0,s.optional)((0,s.string)()),destinationTokenAmount:(0,s.optional)((0,s.string)()),sourceTokenAddress:(0,s.optional)((0,s.string)()),sourceTokenAmount:(0,s.optional)((0,s.string)()),sourceTokenDecimals:(0,s.optional)((0,s.number)()),swapAndSendRecipient:(0,s.optional)((0,s.string)())})),type:(0,s.optional)((0,s.enums)(Object.values(r.TransactionType)))}),"Invalid options to add user operation")},n.validatePrepareUserOperationResponse=function(e){const t=f(),n=c();o(e,(0,s.refine)((0,s.object)({bundler:(0,s.string)(),callData:t,dummyPaymasterAndData:(0,s.optional)(n),dummySignature:(0,s.optional)(n),gas:(0,s.optional)((0,s.object)({callGasLimit:t,preVerificationGas:t,verificationGasLimit:t})),initCode:(0,s.optional)(n),nonce:t,sender:t}),"ValidPrepareUserOperationResponse",(({gas:e,dummySignature:t})=>!!(e||t&&t!==a.EMPTY_BYTES)||"Must specify dummySignature if not specifying gas")),"Invalid response when preparing user operation")},n.validateUpdateUserOperationResponse=function(e){o(e,(0,s.optional)((0,s.object)({paymasterAndData:(0,s.optional)(c()),callGasLimit:(0,s.optional)(c()),preVerificationGas:(0,s.optional)(c()),verificationGasLimit:(0,s.optional)(c())})),"Invalid response when updating user operation")},n.validateSignUserOperationResponse=function(e){const t=f();o(e,(0,s.object)({signature:t}),"Invalid response when signing user operation")}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/utils/validation.cjs"}],[2734,{"./errors.cjs":2742,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assertExhaustive=n.assertStruct=n.assert=n.AssertionError=void 0;const s=e("@metamask/superstruct"),r=e("./errors.cjs");function i(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}n.AssertionError=a,n.assert=function(e,t="Assertion failed.",n=a){if(!e){if(t instanceof Error)throw t;throw i(n,t)}},n.assertStruct=function(e,t,n="Assertion failed",o=a){try{(0,s.assert)(e,t)}catch(e){throw i(o,`${n}: ${function(e){return(0,r.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},n.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[2735,{"./assert.cjs":2734,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.base64=void 0;const s=e("@metamask/superstruct"),r=e("./assert.cjs");n.base64=(e,t={})=>{const n=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,r.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=n?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,s.pattern)(e,o)}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[2736,{"./assert.cjs":2734,"./hex.cjs":2743,"@scure/base":2842,buffer:3537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.createDataView=n.concatBytes=n.valueToBytes=n.base64ToBytes=n.stringToBytes=n.numberToBytes=n.signedBigIntToBytes=n.bigIntToBytes=n.hexToBytes=n.bytesToBase64=n.bytesToString=n.bytesToNumber=n.bytesToSignedBigInt=n.bytesToBigInt=n.bytesToHex=n.assertIsBytes=n.isBytes=void 0;const s=e("@scure/base"),r=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,f=87;const c=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function u(e){(0,r.assert)(l(e),"Value must be a Uint8Array.")}function d(e){if(u(e),0===e.length)return"0x";const t=c(),n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=t[e[s]];return(0,i.add0x)(n.join(""))}function p(e){u(e);const t=d(e);return BigInt(t)}function h(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),n=t.length%2==0?t:`0${t}`,s=new Uint8Array(n.length/2);for(let e=0;e<s.length;e++){const t=n.charCodeAt(2*e),r=n.charCodeAt(2*e+1),i=t-(t<o?a:f),c=r-(r<o?a:f);s[e]=16*i+c}return s}function m(e){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return h(e.toString(16))}function b(e){(0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return h(e.toString(16))}function g(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function y(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return b(e);if("string"==typeof e)return e.startsWith("0x")?h(e):g(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}n.isBytes=l,n.assertIsBytes=u,n.bytesToHex=d,n.bytesToBigInt=p,n.bytesToSignedBigInt=function(e){u(e);let t=BigInt(0);for(const n of e)t=(t<<BigInt(8))+BigInt(n);return BigInt.asIntN(8*e.length,t)},n.bytesToNumber=function(e){u(e);const t=p(e);return(0,r.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},n.bytesToString=function(e){return u(e),(new TextDecoder).decode(e)},n.bytesToBase64=function(e){return u(e),s.base64.encode(e)},n.hexToBytes=h,n.bigIntToBytes=m,n.signedBigIntToBytes=function(e,t){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)("number"==typeof t,"Byte length must be a number."),(0,r.assert)(t>0,"Byte length must be greater than 0."),(0,r.assert)(function(e,t){(0,r.assert)(t>0);const n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let n=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return s.reverse()},n.numberToBytes=b,n.stringToBytes=g,n.base64ToBytes=function(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),s.base64.decode(e)},n.valueToBytes=y,n.concatBytes=function(e){const t=new Array(e.length);let n=0;for(let s=0;s<e.length;s++){const r=y(e[s]);t[s]=r,n+=r.length}const s=new Uint8Array(n);for(let e=0,n=0;e<t.length;e++)s.set(t[e],n),n+=t[e].length;return s},n.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[2737,{"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toCaipChainId=n.parseCaipAccountId=n.parseCaipChainId=n.isCaipAssetId=n.isCaipAssetType=n.isCaipAccountAddress=n.isCaipAccountId=n.isCaipReference=n.isCaipNamespace=n.isCaipChainId=n.KnownCaipNamespace=n.CaipAssetIdStruct=n.CaipAssetTypeStruct=n.CaipAccountAddressStruct=n.CaipAccountIdStruct=n.CaipReferenceStruct=n.CaipNamespaceStruct=n.CaipChainIdStruct=n.CAIP_ASSET_ID_REGEX=n.CAIP_ASSET_TYPE_REGEX=n.CAIP_ACCOUNT_ADDRESS_REGEX=n.CAIP_ACCOUNT_ID_REGEX=n.CAIP_REFERENCE_REGEX=n.CAIP_NAMESPACE_REGEX=n.CAIP_CHAIN_ID_REGEX=void 0;const s=e("@metamask/superstruct");function r(e){return(0,s.is)(e,n.CaipNamespaceStruct)}function i(e){return(0,s.is)(e,n.CaipReferenceStruct)}n.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,n.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,n.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,n.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,n.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,n.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,n.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,n.CaipChainIdStruct=(0,s.pattern)((0,s.string)(),n.CAIP_CHAIN_ID_REGEX),n.CaipNamespaceStruct=(0,s.pattern)((0,s.string)(),n.CAIP_NAMESPACE_REGEX),n.CaipReferenceStruct=(0,s.pattern)((0,s.string)(),n.CAIP_REFERENCE_REGEX),n.CaipAccountIdStruct=(0,s.pattern)((0,s.string)(),n.CAIP_ACCOUNT_ID_REGEX),n.CaipAccountAddressStruct=(0,s.pattern)((0,s.string)(),n.CAIP_ACCOUNT_ADDRESS_REGEX),n.CaipAssetTypeStruct=(0,s.pattern)((0,s.string)(),n.CAIP_ASSET_TYPE_REGEX),n.CaipAssetIdStruct=(0,s.pattern)((0,s.string)(),n.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(n.KnownCaipNamespace||(n.KnownCaipNamespace={})),n.isCaipChainId=function(e){return(0,s.is)(e,n.CaipChainIdStruct)},n.isCaipNamespace=r,n.isCaipReference=i,n.isCaipAccountId=function(e){return(0,s.is)(e,n.CaipAccountIdStruct)},n.isCaipAccountAddress=function(e){return(0,s.is)(e,n.CaipAccountAddressStruct)},n.isCaipAssetType=function(e){return(0,s.is)(e,n.CaipAssetTypeStruct)},n.isCaipAssetId=function(e){return(0,s.is)(e,n.CaipAssetIdStruct)},n.parseCaipChainId=function(e){const t=n.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},n.parseCaipAccountId=function(e){const t=n.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.toCaipChainId=function(e,t){if(!r(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2738,{"./base64.cjs":2735,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ChecksumStruct=void 0;const s=e("@metamask/superstruct"),r=e("./base64.cjs");n.ChecksumStruct=(0,s.size)((0,r.base64)((0,s.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[2739,{"./assert.cjs":2734,"./bytes.cjs":2736,"./hex.cjs":2743,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createHex=n.createBytes=n.createBigInt=n.createNumber=void 0;const s=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,s.union)([(0,s.number)(),(0,s.bigint)(),(0,s.string)(),a.StrictHexStruct]),f=(0,s.coerce)((0,s.number)(),o,Number),c=(0,s.coerce)((0,s.bigint)(),o,BigInt),l=((0,s.union)([a.StrictHexStruct,(0,s.instance)(Uint8Array)]),(0,s.coerce)((0,s.instance)(Uint8Array),(0,s.union)([a.StrictHexStruct]),i.hexToBytes)),u=(0,s.coerce)(a.StrictHexStruct,(0,s.instance)(Uint8Array),i.bytesToHex);n.createNumber=function(e){try{const t=(0,s.create)(e,f);return(0,r.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof s.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},n.createBigInt=function(e){try{return(0,s.create)(e,c)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},n.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,s.create)(e,l)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},n.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,s.create)(e,u)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[274,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){(0,s.hasProperty)(e,"TxController")&&delete e.TxController}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=125}}},{package:"$root$",file:"app/scripts/migrations/125.ts"}],[2740,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s,r,i=this&&this.__classPrivateFieldGet||function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.FrozenSet=n.FrozenMap=void 0;class o{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((n,s,r)=>e.call(t,n,s,this)))}get(e){return i(this,s,"f").get(e)}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}n.FrozenMap=o;class f{get size(){return i(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return i(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),a(this,r,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,r,"f").entries()}forEach(e,t){return i(this,r,"f").forEach(((n,s,r)=>e.call(t,n,s,this)))}has(e){return i(this,r,"f").has(e)}keys(){return i(this,r,"f").keys()}values(){return i(this,r,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}n.FrozenSet=f,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(f),Object.freeze(f.prototype)}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[2741,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2742,{"./misc.cjs":2748,"pony-cause":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapError=n.getErrorMessage=n.isErrorWithStack=n.isErrorWithMessage=n.isErrorWithCode=void 0;const s=e("pony-cause"),r=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}n.isErrorWithCode=i,n.isErrorWithMessage=a,n.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},n.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,r.isNullOrUndefined)(e)?"":String(e)},n.wrapError=function(e,t){if((n=e)instanceof Error||(0,r.isObject)(n)&&"Error"===n.constructor.name){let n;return n=2===Error.length?new Error(t,{cause:e}):new s.ErrorWithCause(t,{cause:e}),i(e)&&(n.code=e.code),n}var n;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[2743,{"./assert.cjs":2734,"./bytes.cjs":2736,"@metamask/superstruct":2619,"@noble/hashes/sha3":2823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.remove0x=n.add0x=n.isValidChecksumAddress=n.getChecksumAddress=n.isValidHexAddress=n.assertIsStrictHexString=n.assertIsHexString=n.isStrictHexString=n.isHexString=n.HexChecksumAddressStruct=n.HexAddressStruct=n.StrictHexStruct=n.HexStruct=void 0;const s=e("@metamask/superstruct"),r=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,s.is)(e,n.HexStruct)}function f(e){return(0,s.is)(e,n.StrictHexStruct)}function c(e){(0,i.assert)((0,s.is)(e,n.HexChecksumAddressStruct),"Invalid hex address.");const t=u(e.toLowerCase()),o=u((0,a.bytesToHex)((0,r.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const n=o[t];return(0,i.assert)((0,s.is)(n,(0,s.string)()),"Hash shorter than address."),parseInt(n,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,s.is)(e,n.HexChecksumAddressStruct)&&c(e)===e}function u(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}n.HexStruct=(0,s.pattern)((0,s.string)(),/^(?:0x)?[0-9a-f]+$/iu),n.StrictHexStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]+$/iu),n.HexAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]{40}$/u),n.HexChecksumAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-fA-F]{40}$/u),n.isHexString=o,n.isStrictHexString=f,n.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},n.assertIsStrictHexString=function(e){(0,i.assert)(f(e),'Value must be a hexadecimal string, starting with "0x".')},n.isValidHexAddress=function(e){return(0,s.is)(e,n.HexAddressStruct)||l(e)},n.getChecksumAddress=c,n.isValidChecksumAddress=l,n.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},n.remove0x=u}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[2744,{"./assert.cjs":2734,"./base64.cjs":2735,"./bytes.cjs":2736,"./caip-types.cjs":2737,"./checksum.cjs":2738,"./coercers.cjs":2739,"./collections.cjs":2740,"./encryption-types.cjs":2741,"./errors.cjs":2742,"./hex.cjs":2743,"./json.cjs":2745,"./keyring.cjs":2746,"./logging.cjs":2747,"./misc.cjs":2748,"./number.cjs":2749,"./opaque.cjs":2750,"./promise.cjs":2751,"./time.cjs":2752,"./transaction-types.cjs":2753,"./versions.cjs":2754},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){s===undefined&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){s===undefined&&(s=n),e[s]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),r(e("./assert.cjs"),n),r(e("./base64.cjs"),n),r(e("./bytes.cjs"),n),r(e("./caip-types.cjs"),n),r(e("./checksum.cjs"),n),r(e("./coercers.cjs"),n),r(e("./collections.cjs"),n),r(e("./encryption-types.cjs"),n),r(e("./errors.cjs"),n),r(e("./hex.cjs"),n),r(e("./json.cjs"),n),r(e("./keyring.cjs"),n),r(e("./logging.cjs"),n),r(e("./misc.cjs"),n),r(e("./number.cjs"),n),r(e("./opaque.cjs"),n),r(e("./promise.cjs"),n),r(e("./time.cjs"),n),r(e("./transaction-types.cjs"),n),r(e("./versions.cjs"),n)}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/index.cjs"}],[2745,{"./assert.cjs":2734,"./misc.cjs":2748,"@metamask/superstruct":2619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonRpcIdValidator=n.assertIsJsonRpcError=n.isJsonRpcError=n.assertIsJsonRpcFailure=n.isJsonRpcFailure=n.assertIsJsonRpcSuccess=n.isJsonRpcSuccess=n.assertIsJsonRpcResponse=n.isJsonRpcResponse=n.assertIsPendingJsonRpcResponse=n.isPendingJsonRpcResponse=n.JsonRpcResponseStruct=n.JsonRpcFailureStruct=n.JsonRpcSuccessStruct=n.PendingJsonRpcResponseStruct=n.assertIsJsonRpcRequest=n.isJsonRpcRequest=n.assertIsJsonRpcNotification=n.isJsonRpcNotification=n.JsonRpcNotificationStruct=n.JsonRpcRequestStruct=n.JsonRpcParamsStruct=n.JsonRpcErrorStruct=n.JsonRpcIdStruct=n.JsonRpcVersionStruct=n.jsonrpc2=n.getJsonSize=n.getSafeJson=n.isValidJson=n.JsonStruct=n.UnsafeJsonStruct=n.exactOptional=n.object=void 0;const s=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const n=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],n)}function o(e){return new s.Struct({...e,type:`optional ${e.type}`,validator:(t,n)=>!a(n)||e.validator(t,n),refiner:(t,n)=>!a(n)||e.refiner(t,n)})}n.object=e=>(0,s.object)(e),n.exactOptional=o;function f(e){return(0,s.create)(e,n.JsonStruct)}n.UnsafeJsonStruct=(0,s.union)([(0,s.literal)(null),(0,s.boolean)(),(0,s.define)("finite number",(e=>(0,s.is)(e,(0,s.number)())&&Number.isFinite(e))),(0,s.string)(),(0,s.array)((0,s.lazy)((()=>n.UnsafeJsonStruct))),(0,s.record)((0,s.string)(),(0,s.lazy)((()=>n.UnsafeJsonStruct)))]),n.JsonStruct=(0,s.coerce)(n.UnsafeJsonStruct,(0,s.any)(),(e=>((0,r.assertStruct)(e,n.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),n.isValidJson=function(e){try{return f(e),!0}catch{return!1}},n.getSafeJson=f,n.getJsonSize=function(e){(0,r.assertStruct)(e,n.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},n.jsonrpc2="2.0",n.JsonRpcVersionStruct=(0,s.literal)(n.jsonrpc2),n.JsonRpcIdStruct=(0,s.nullable)((0,s.union)([(0,s.number)(),(0,s.string)()])),n.JsonRpcErrorStruct=(0,n.object)({code:(0,s.integer)(),message:(0,s.string)(),data:o(n.JsonStruct),stack:o((0,s.string)())}),n.JsonRpcParamsStruct=(0,s.union)([(0,s.record)((0,s.string)(),n.JsonStruct),(0,s.array)(n.JsonStruct)]),n.JsonRpcRequestStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,method:(0,s.string)(),params:o(n.JsonRpcParamsStruct)}),n.JsonRpcNotificationStruct=(0,n.object)({jsonrpc:n.JsonRpcVersionStruct,method:(0,s.string)(),params:o(n.JsonRpcParamsStruct)}),n.isJsonRpcNotification=function(e){return(0,s.is)(e,n.JsonRpcNotificationStruct)},n.assertIsJsonRpcNotification=function(e,t){(0,r.assertStruct)(e,n.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},n.isJsonRpcRequest=function(e){return(0,s.is)(e,n.JsonRpcRequestStruct)},n.assertIsJsonRpcRequest=function(e,t){(0,r.assertStruct)(e,n.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},n.PendingJsonRpcResponseStruct=(0,s.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:(0,s.optional)((0,s.unknown)()),error:(0,s.optional)(n.JsonRpcErrorStruct)}),n.JsonRpcSuccessStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:n.JsonStruct}),n.JsonRpcFailureStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,error:n.JsonRpcErrorStruct}),n.JsonRpcResponseStruct=(0,s.union)([n.JsonRpcSuccessStruct,n.JsonRpcFailureStruct]),n.isPendingJsonRpcResponse=function(e){return(0,s.is)(e,n.PendingJsonRpcResponseStruct)},n.assertIsPendingJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,n.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},n.isJsonRpcResponse=function(e){return(0,s.is)(e,n.JsonRpcResponseStruct)},n.assertIsJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,n.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},n.isJsonRpcSuccess=function(e){return(0,s.is)(e,n.JsonRpcSuccessStruct)},n.assertIsJsonRpcSuccess=function(e,t){(0,r.assertStruct)(e,n.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},n.isJsonRpcFailure=function(e){return(0,s.is)(e,n.JsonRpcFailureStruct)},n.assertIsJsonRpcFailure=function(e,t){(0,r.assertStruct)(e,n.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},n.isJsonRpcError=function(e){return(0,s.is)(e,n.JsonRpcErrorStruct)},n.assertIsJsonRpcError=function(e,t){(0,r.assertStruct)(e,n.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},n.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:n,permitNull:s}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(n||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||s&&null===e)}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/json.cjs"}],[2746,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[2747,{debug:3680},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.createProjectLogger=void 0;const r=(0,s(e("debug")).default)("metamask");n.createProjectLogger=function(e){return r.extend(e)},n.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[2748,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateNumberSize=n.calculateStringSize=n.isASCII=n.isPlainObject=n.ESCAPE_CHARACTERS_REGEXP=n.JsonSize=n.getKnownPropertyNames=n.hasProperty=n.isObject=n.isNullOrUndefined=n.isNonEmptyArray=void 0,n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isNullOrUndefined=function(e){return null===e||e===undefined},n.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function s(e){return e.charCodeAt(0)<=127}n.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),n.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(n.JsonSize||(n.JsonSize={})),n.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,n.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},n.isASCII=s,n.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>s(t)?e+1:e+2),0)+(e.match(n.ESCAPE_CHARACTERS_REGEXP)??[]).length},n.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[2749,{"./assert.cjs":2734,"./hex.cjs":2743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hexToBigInt=n.hexToNumber=n.bigIntToHex=n.numberToHex=void 0;const s=e("./assert.cjs"),r=e("./hex.cjs");n.numberToHex=e=>((0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,r.add0x)(e.toString(16)));n.bigIntToHex=e=>((0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=0,"Value must be a non-negative bigint."),(0,r.add0x)(e.toString(16)));n.hexToNumber=e=>{(0,r.assertIsHexString)(e);const t=parseInt(e,16);return(0,s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};n.hexToBigInt=e=>((0,r.assertIsHexString)(e),BigInt((0,r.add0x)(e)))}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/number.cjs"}],[275,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){if((0,s.hasProperty)(e,"PhishingController")&&(0,s.isObject)(e.PhishingController)&&(0,s.hasProperty)(e.PhishingController,"phishingLists")){const t=e.PhishingController;if(!Array.isArray(t.phishingLists))return console.error(`Migration ${i}: Invalid PhishingController.phishingLists state`),e;t.phishingLists=t.phishingLists.filter((e=>"MetaMask"===e.name)),e.PhishingController=t}}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=126.1}}},{package:"$root$",file:"app/scripts/migrations/126.1.ts"}],[2750,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[2751,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createDeferredPromise=void 0,n.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,n;const s=new Promise(((e,s)=>{t=e,n=s}));return e&&s.catch((e=>{})),{promise:s,resolve:t,reject:n}}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[2752,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.timeSince=n.inMilliseconds=n.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(n.Duration||(n.Duration={}));const s=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};n.inMilliseconds=function(e,t){return s(e,"count"),e*t},n.timeSince=function(e){return s(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/time.cjs"}],[2753,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2754,{"./assert.cjs":2734,"@metamask/superstruct":2619,semver:4939},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.satisfiesVersionRange=n.gtRange=n.gtVersion=n.assertIsSemVerRange=n.assertIsSemVerVersion=n.isValidSemVerRange=n.isValidSemVerVersion=n.VersionRangeStruct=n.VersionStruct=void 0;const s=e("@metamask/superstruct"),r=e("semver"),i=e("./assert.cjs");n.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`)),n.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`)),n.isValidSemVerVersion=function(e){return(0,s.is)(e,n.VersionStruct)},n.isValidSemVerRange=function(e){return(0,s.is)(e,n.VersionRangeStruct)},n.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,n.VersionStruct)},n.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,n.VersionRangeStruct)},n.gtVersion=function(e,t){return(0,r.gt)(e,t)},n.gtRange=function(e,t){return(0,r.gtr)(e,t)},n.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/user-operation-controller>@metamask/utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[276,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){(0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&delete e.NetworkController.providerConfig}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=126}}},{package:"$root$",file:"app/scripts/migrations/126.ts"}],[277,{"../../../shared/constants/network":5139,"@metamask/utils":2765,lodash:4256,"uri-js":5025},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=f,function(e){var t;var n,r,o,f,c,l,u,d;if(!(0,s.hasProperty)(e,"NetworkController"))return null===(n=global.sentry)||void 0===n||null===(r=n.captureException)||void 0===r||r.call(n,new Error("state.NetworkController is not defined")),e;if(!(0,s.isObject)(e.NetworkController))return null===(o=global.sentry)||void 0===o||null===(f=o.captureException)||void 0===f||f.call(o,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e;if(!(0,s.hasProperty)(e,"TransactionController"))return null===(c=global.sentry)||void 0===c||null===(l=c.captureException)||void 0===l||l.call(c,new Error("state.TransactionController is not defined")),e;if(!(0,s.isObject)(e.TransactionController))return null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error("typeof state.TransactionController is "+typeof e.TransactionController)),e;const p=e.NetworkController;let h=(0,s.isObject)(p.networkConfigurations)?Object.values(p.networkConfigurations):[];h=[{type:"infura",id:"mainnet",chainId:"0x1",ticker:"ETH",nickname:a.MAINNET_DISPLAY_NAME,rpcUrl:"https://mainnet.infura.io/v3/{infuraProjectId}",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},{type:"infura",id:"sepolia",chainId:"0xaa36a7",ticker:"SepoliaETH",nickname:a.SEPOLIA_DISPLAY_NAME,rpcUrl:"https://sepolia.infura.io/v3/{infuraProjectId}",rpcPrefs:{blockExplorerUrl:"https://sepolia.etherscan.io"}},{type:"infura",id:"linea-sepolia",chainId:"0xe705",ticker:"LineaETH",nickname:a.LINEA_SEPOLIA_DISPLAY_NAME,rpcUrl:"https://linea-sepolia.infura.io/v3/{infuraProjectId}",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},{type:"infura",id:"linea-mainnet",chainId:"0xe708",ticker:"ETH",nickname:a.LINEA_MAINNET_DISPLAY_NAME,rpcUrl:"https://linea-mainnet.infura.io/v3/{infuraProjectId}",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},...h];const m=h.reduce(((e,t)=>{var n;(0,s.isObject)(t)&&"string"==typeof t.chainId&&(e[n=t.chainId]??(e[n]=[])).push(t);return e}),{}),b=Array.isArray(e.TransactionController.transactions)?e.TransactionController.transactions.filter((e=>(0,s.isObject)(e)&&"number"==typeof e.time&&"string"==typeof e.networkClientId)).sort(((e,t)=>t.time-e.time)):[],g=Object.entries(m).reduce(((e,[t,n])=>{var r,o,f,c;let l;l=n.find((e=>e.id===p.selectedNetworkClientId)),l||b.filter((e=>e.chainId===t)).some((e=>l=n.find((t=>t.id===e.networkClientId)))),l||(l=n.find((e=>"infura"!==e.type)));const u=n.reduce(((t,n)=>{if(n.id&&n.rpcUrl&&"string"==typeof n.rpcUrl&&function(e){const t=i.parse(e);return t.error===undefined&&("http"===t.scheme||"https"===t.scheme)}(n.rpcUrl)){const r=h.some((e=>(0,s.isObject)(e)&&"string"==typeof e.rpcUrl&&"string"==typeof n.rpcUrl&&e.id!==n.id&&i.equal(e.rpcUrl,n.rpcUrl)&&e.id===p.selectedNetworkClientId)),a=[...Object.values(e).flatMap((e=>(0,s.isObject)(e)?e.rpcEndpoints:[])),...t].some((e=>(0,s.isObject)(e)&&"string"==typeof e.url&&"string"==typeof n.rpcUrl&&i.equal(e.url,n.rpcUrl)));r||a||t.push({networkClientId:n.id,url:n.rpcUrl,type:"infura"===n.type?"infura":"custom",..."infura"!==n.type&&"string"==typeof n.nickname&&n.nickname&&{name:n.nickname}})}return t}),[]);if(0===u.length)return e;const d=Math.max(u.findIndex((e=>{var t;return e.networkClientId===(null===(t=l)||void 0===t?void 0:t.id)})),0),m=[...n.reduce(((e,t)=>((0,s.isObject)(t.rpcPrefs)&&"string"==typeof t.rpcPrefs.blockExplorerUrl&&t.rpcPrefs.blockExplorerUrl&&e.add(t.rpcPrefs.blockExplorerUrl),e)),new Set)],g=0===m.length?undefined:Math.max(m.findIndex((e=>{var t;return(0,s.isObject)(null===(t=l)||void 0===t?void 0:t.rpcPrefs)&&e===l.rpcPrefs.blockExplorerUrl})),0),y=a.NETWORK_TO_NAME_MAP[t]??(null===(r=l)||void 0===r?void 0:r.nickname)??(null===(o=n.find((e=>e.nickname)))||void 0===o?void 0:o.nickname),v=a.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[t]??(null===(f=l)||void 0===f?void 0:f.ticker)??(null===(c=n.find((e=>e.ticker)))||void 0===c?void 0:c.ticker);return e[t]={chainId:t,rpcEndpoints:u,defaultRpcEndpointIndex:d,blockExplorerUrls:m,...g!==undefined&&{defaultBlockExplorerUrlIndex:g},name:y,nativeCurrency:v},e}),{}),y=e=>{const t=h.find((t=>(0,s.isObject)(t)&&t.id===e));return(0,s.isObject)(t)&&"string"==typeof(null==t?void 0:t.chainId)?null==t?void 0:t.chainId:undefined};let v=null===(t=Object.values(g).flatMap((e=>(0,s.isObject)(e)&&Array.isArray(e.rpcEndpoints)?e.rpcEndpoints:[])).find((e=>e.networkClientId===p.selectedNetworkClientId)))||void 0===t?void 0:t.networkClientId;if(!v){const e=g[y(p.selectedNetworkClientId)??"0x1"];v=(0,s.isObject)(e)&&Array.isArray(e.rpcEndpoints)&&"number"==typeof e.defaultRpcEndpointIndex?e.rpcEndpoints[e.defaultRpcEndpointIndex].networkClientId:"mainnet"}if((0,s.hasProperty)(e,"SelectedNetworkController")&&(0,s.isObject)(e.SelectedNetworkController)&&(0,s.hasProperty)(e.SelectedNetworkController,"domains")&&(0,s.isObject)(e.SelectedNetworkController.domains))for(const[t,n]of Object.entries(e.SelectedNetworkController.domains)){let r;const i=y(n);if(i){const e=g[i];(0,s.isObject)(e)&&Array.isArray(e.rpcEndpoints)&&"number"==typeof e.defaultRpcEndpointIndex&&(r=e.rpcEndpoints[e.defaultRpcEndpointIndex].networkClientId)}r?e.SelectedNetworkController.domains[t]=r:delete e.SelectedNetworkController.domains[t]}e.NetworkController={selectedNetworkClientId:v,networkConfigurationsByChainId:g,networksMetadata:p.networksMetadata??{}},(0,s.hasProperty)(e,"PreferencesController")&&(0,s.isObject)(e.PreferencesController)&&(0,s.hasProperty)(e.PreferencesController,"preferences")&&(0,s.isObject)(e.PreferencesController.preferences)&&(e.PreferencesController.preferences.showMultiRpcModal=Object.values(g).some((e=>(0,s.isObject)(e)&&Array.isArray(e.rpcEndpoints)&&e.rpcEndpoints.length>1)));(0,s.hasProperty)(e,"NetworkOrderController")&&(0,s.isObject)(e.NetworkOrderController)&&Array.isArray(e.NetworkOrderController.orderedNetworkList)&&(e.NetworkOrderController.orderedNetworkList=[...new Set(e.NetworkOrderController.orderedNetworkList.map((e=>e.networkId)))].map((e=>({networkId:e}))))}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(s,i,a):s[i]=e[i]}return s.default=e,n&&n.set(e,s),s}(e("uri-js")),a=e("../../../shared/constants/network");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}const f=n.version=127}}},{package:"$root$",file:"app/scripts/migrations/127.ts"}],[2776,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<e.length;s++){var r=e.charAt(s),i=r.charCodeAt(0);if(255!==t[i])throw new TypeError(r+" is ambiguous");t[i]=s}var a=e.length,o=e.charAt(0),f=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var n=0;if(" "!==e[n]){for(var s=0,r=0;e[n]===o;)s++,n++;for(var i=(e.length-n)*f+1>>>0,c=new Uint8Array(i);e[n];){var l=t[e.charCodeAt(n)];if(255===l)return;for(var u=0,d=i-1;(0!==l||u<r)&&-1!==d;d--,u++)l+=a*c[d]>>>0,c[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");r=u,n++}if(" "!==e[n]){for(var p=i-r;p!==i&&0===c[p];)p++;for(var h=new Uint8Array(s+(i-p)),m=s;p!==i;)h[m++]=c[p++];return h}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,s=0,r=0,i=t.length;r!==i&&0===t[r];)r++,n++;for(var f=(i-r)*c+1>>>0,l=new Uint8Array(f);r!==i;){for(var u=t[r],d=0,p=f-1;(0!==u||d<s)&&-1!==p;p--,d++)u+=256*l[p]>>>0,l[p]=u%a>>>0,u=u/a>>>0;if(0!==u)throw new Error("Non-zero carry");s=d,r++}for(var h=f-s;h!==f&&0===l[h];)h++;for(var m=o.repeat(n);h<f;++h)m+=e.charAt(l[h]);return m},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}}}},{package:"@ensdomains/content-hash>cids>multibase>@multiformats/base-x",file:"node_modules/@multiformats/base-x/src/index.js"}],[278,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){(0,s.hasProperty)(e,"PreferencesController")&&(0,s.isObject)(e.PreferencesController)&&(0,s.isObject)(e.PreferencesController.preferences)&&delete e.PreferencesController.preferences.useNativeCurrencyAsPrimaryCurrency}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=128}}},{package:"$root$",file:"app/scripts/migrations/128.ts"}],[279,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){(0,s.hasProperty)(e,"PreferencesController")&&(0,s.isObject)(e.PreferencesController)&&(0,s.isObject)(e.PreferencesController.preferences)&&e.PreferencesController.preferences.shouldShowAggregatedBalancePopover===undefined&&(e.PreferencesController.preferences.shouldShowAggregatedBalancePopover=!0)}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=129}}},{package:"$root$",file:"app/scripts/migrations/129.ts"}],[280,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){(0,s.hasProperty)(e,"PreferencesController")&&(0,s.isObject)(e.PreferencesController)&&(0,s.hasProperty)(e.PreferencesController,"preferences")&&(0,s.isObject)(e.PreferencesController.preferences)&&!e.PreferencesController.preferences.tokenSortConfig&&(e.PreferencesController.preferences.tokenSortConfig={key:"tokenFiatAmount",order:"dsc",sortCallback:"stringNumeric"})}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=130}}},{package:"$root$",file:"app/scripts/migrations/130.ts"}],[281,{"../../../shared/constants/network":5139,"@metamask/network-controller":1946,"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"networkConfigurationsByChainId")&&(0,s.isObject)(e.NetworkController.networkConfigurationsByChainId)){const{networkConfigurationsByChainId:t}=e.NetworkController;if(!Object.entries(t).filter((([e])=>![...a.infuraChainIdsTestNets,a.CHAIN_IDS.LINEA_MAINNET].includes(e))).some((([,e])=>{var t;if(!(0,s.isObject)(e)||!Array.isArray(e.rpcEndpoints)||"number"!=typeof e.defaultRpcEndpointIndex)return!1;const n=null==e||null===(t=e.rpcEndpoints)||void 0===t?void 0:t[null==e?void 0:e.defaultRpcEndpointIndex];if(!(0,s.isObject)(n)||"string"!=typeof n.url)return!1;try{const e=new URL(n.url).host;return n.type===r.RpcEndpointType.Infura||a.allowedInfuraHosts.includes(e)}catch{return!1}})))return e;const n=t[f];if((0,s.isObject)(n)){const{rpcEndpoints:r}=n;if(Array.isArray(r)){const i=r.findIndex((e=>(0,s.isObject)(e)&&"https://mainnet.base.org"===e.url));if(-1!==i)return r[i]={...r[i],url:`https://base-mainnet.infura.io/v3/${a.infuraProjectId}`},t[f]={...n,rpcEndpoints:r},{...e,NetworkController:{...e.NetworkController,networkConfigurationsByChainId:t}}}}}return e}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("@metamask/network-controller"),i=e("lodash"),a=e("../../../shared/constants/network");const o=n.version=131.1,f="0x2105"}}},{package:"$root$",file:"app/scripts/migrations/131.1.ts"}],[282,{"@metamask/utils":2765,lodash:4256,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,function(e){if(!(0,r.hasProperty)(e,"AccountsController"))return;const t=e.AccountsController;var n,s,f,c,l,u,d;if(!(0,i.isObject)(t))return void(null===(n=global.sentry)||void 0===n||n.captureException(new Error(`Migration ${o}: Invalid AccountsController state of type '${typeof t}'`)));if(!(0,r.hasProperty)(t,"internalAccounts"))return void(null===(s=global.sentry)||void 0===s||s.captureException(new Error(`Migration ${o}: Invalid AccountsController state, missing internalAccounts`)));if(!(0,i.isObject)(t.internalAccounts))return void(null===(f=global.sentry)||void 0===f||f.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts state of type '${typeof t.internalAccounts}'`)));if(!(0,r.hasProperty)(t.internalAccounts,"selectedAccount"))return void(null===(c=global.sentry)||void 0===c||c.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts state, missing selectedAccount`)));if("string"!=typeof t.internalAccounts.selectedAccount)return void(null===(l=global.sentry)||void 0===l||l.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.selectedAccount state of type '${typeof t.internalAccounts.selectedAccount}'`)));if(!(0,r.hasProperty)(t.internalAccounts,"accounts"))return void(null===(u=global.sentry)||void 0===u||u.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts state, missing accounts`)));if(!(0,i.isObject)(t.internalAccounts.accounts))return void(null===(d=global.sentry)||void 0===d||d.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.accounts state of type '${typeof t.internalAccounts.accounts}'`)));if(0===Object.keys(t.internalAccounts.accounts).length)return void(t.internalAccounts.selectedAccount="");if(""===t.internalAccounts.selectedAccount)return void a.default.warn(`Migration ${o}: Skipping, no selected account set`);const p=Object.values(t.internalAccounts.accounts)[0];var h,m,b;if(!(0,i.isObject)(p))return void(null===(h=global.sentry)||void 0===h||h.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.accounts state, entry found of type '${typeof p}'`)));if(!(0,r.hasProperty)(p,"id"))return void(null===(m=global.sentry)||void 0===m||m.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.accounts state, entry found that is missing an id`)));if("string"!=typeof p.id)return void(null===(b=global.sentry)||void 0===b||b.captureException(new Error(`Migration ${o}: Invalid AccountsController internalAccounts.accounts state, entry found with an id of type '${typeof p.id}'`)));(0,r.hasProperty)(t.internalAccounts.accounts,t.internalAccounts.selectedAccount)||(t.internalAccounts.selectedAccount=p.id)}(t.data),t},n.version=void 0;var s,r=e("@metamask/utils"),i=e("lodash"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s};const o=n.version=131}}},{package:"$root$",file:"app/scripts/migrations/131.ts"}],[283,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){var t;if(!(0,s.isObject)(null==e?void 0:e.PreferencesController))return e;(0,s.isObject)(null===(t=e.PreferencesController)||void 0===t?void 0:t.preferences)||(e.PreferencesController={...e.PreferencesController,preferences:{}});const n=e.PreferencesController;n.preferences.redesignedTransactionsEnabled=!0}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=132}}},{package:"$root$",file:"app/scripts/migrations/132.ts"}],[284,{"@metamask/utils":2765,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){(0,s.hasProperty)(e,"NotificationController")&&delete e.NotificationController}(t.data),t},n.version=void 0;var s=e("@metamask/utils"),r=e("lodash");const i=n.version=133}}},{package:"$root$",file:"app/scripts/migrations/133.ts"}],[285,{"@metamask/transaction-controller":2647,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return function(i){const a=(0,s.cloneDeep)(i);a.meta.version=e;try{const e=function(e,t,n){const s=e,{TransactionController:i}=s;if(i&&i.transactions){const{transactions:e}=i;s.TransactionController.transactions=e.map((e=>t(e)?(e.status=r.TransactionStatus.failed,e.err={message:n,note:`Tx automatically failed by migration because ${n}`},e):e))}return s}(a.data,n,t);a.data=e}catch(t){console.warn(`MetaMask Migration #${e}${t.stack}`)}return Promise.resolve(a)}};var s=e("lodash"),r=e("@metamask/transaction-controller")}}},{package:"$root$",file:"app/scripts/migrations/fail-tx.js"}],[2853,{assert:3533,buffer:3537,"component-type":3596,"join-component":4102},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var s=e("component-type"),r=e("join-component"),i=e("assert"),a=32768;t.exports=function(e,t){switch(f(e),t=t||e.type,i(t,"You must pass an event type."),t){case"track":return function(e){i(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),i(e.event,'You must pass an "event".')}(e);case"group":return function(e){i(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),i(e.groupId,'You must pass a "groupId".')}(e);case"identify":case"page":case"screen":return function(e){i(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".')}(e);case"alias":return function(e){i(e.userId,'You must pass a "userId".'),i(e.previousId,'You must pass a "previousId".')}(e);default:i(0,'Invalid event type: "'+t+'"')}};var o={anonymousId:["string","number"],category:"string",context:"object",event:"string",groupId:["string","number"],integrations:"object",name:"string",previousId:["string","number"],timestamp:"date",userId:["string","number"],type:"string"};function f(e){i("object"===s(e),"You must pass a message object.");var t=JSON.stringify(e);for(var f in i(n.byteLength(t,"utf8")<a,"Your message must be < 32kb."),o){var c=e[f];if(c){var l=o[f];"array"!==s(l)&&(l=[l]);var u="object"===l[0]?"an":"a";i(l.some((function(e){return s(c)===e})),'"'+f+'" must be '+u+" "+r(l,"or")+".")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@segment/loosely-validate-event",file:"node_modules/@segment/loosely-validate-event/index.js"}]],[],{});