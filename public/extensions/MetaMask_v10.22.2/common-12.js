LavaPack.loadBundle([[7e3,{"../../app/scripts/lib/util":135,"../../shared/constants/app":5248,"../../shared/constants/hardware-wallets":5256,"../../shared/constants/metametrics":5260,"../../shared/constants/permissions":5268,"../../shared/lib/four-byte":5284,"../../shared/lib/switch-direction":5289,"../../shared/modules/conversion.utils":5301,"../../shared/modules/error":5303,"../../shared/modules/hexstring-utils":5307,"../../shared/modules/i18n":5308,"../../shared/modules/selectors":5319,"../../shared/modules/selectors/networks":5320,"../../shared/modules/string-utils":5324,"../ducks/alerts/unconnected-account":6222,"../ducks/metamask/metamask":6236,"../ducks/send":6241,"../helpers/constants/notifications":6252,"../pages/swaps/swaps.util":6970,"../selectors":6985,"./actionConstants":6999,"./background-connection":7001,"@metamask/keyring-controller":1896,"@metamask/profile-sync-controller/sdk":2232,"@metamask/rpc-errors":2304,"@metamask/snaps-utils":2647,"@sentry/browser":2871,buffer:3561,lodash:4380,loglevel:4386},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(t,e,n){(function(e){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.abortTransactionSigning=function(t){return async e=>{try{await(0,_.submitRequestToBackground)("abortTransactionSigning",[t])}catch(t){e(st(t))}}},n.accountTrackerStartPolling=async function(t){const e=await(0,_.submitRequestToBackground)("accountTrackerStartPolling",[t]);return await yt(e),e},n.accountTrackerStopPollingByPollingToken=async function(t){await(0,_.submitRequestToBackground)("accountTrackerStopPollingByPollingToken",[t]),await kt(t)},n.addImportedTokens=function(t,e){return async n=>{try{await(0,_.submitRequestToBackground)("addImportedTokens",[t,e])}catch(t){(0,A.logErrorWithMessage)(t)}finally{await dt(n)}}},n.addNetwork=function(t){return async e=>{a.default.debug("background.addNetwork",t);try{return await(0,_.submitRequestToBackground)("addNetwork",[t])}catch(t){(0,A.logErrorWithMessage)(t),e(st("Had a problem adding networks!"))}return undefined}},n.addNewAccount=function(){return a.default.debug("background.addNewAccount"),async(t,e)=>{const n=(0,f.getInternalAccounts)(e()).filter((t=>t.metadata.keyring.type===i.KeyringTypes.hd));let a;t(nt());try{a=await(0,_.submitRequestToBackground)("addNewAccount",[Object.keys(n).length])}catch(e){throw t(st(e)),e}finally{t(rt())}return await dt(t),a}},n.addNft=function(t,e,n){return async a=>{if(!t)throw new Error("MetaMask - Cannot add NFT without address");if(!e)throw new Error("MetaMask - Cannot add NFT without tokenID");n||a(nt());try{await(0,_.submitRequestToBackground)("addNft",[t,e])}catch(t){(0,A.logErrorWithMessage)(t),a(st(t))}finally{await dt(a),a(rt())}}},n.addNftVerifyOwnership=function(t,e,n){return async a=>{if(!t)throw new Error("MetaMask - Cannot add NFT without address");if(!e)throw new Error("MetaMask - Cannot add NFT without tokenID");n||a(nt());try{await(0,_.submitRequestToBackground)("addNftVerifyOwnership",[t,e])}catch(t){if((0,A.isErrorWithMessage)(t)){const e=(0,A.getErrorMessage)(t);if(e.includes("This NFT is not owned by the user")||e.includes("Unable to verify ownership"))throw t;(0,A.logErrorWithMessage)(t),a(st(t))}}finally{await dt(a),a(rt())}}},n.addPermittedAccount=function(t,e){return async n=>{await new Promise(((n,a)=>{(0,_.callBackgroundMethod)("addPermittedAccount",[t,e],(t=>{t?a(t):n()}))})),await dt(n)}},n.addPermittedAccounts=function(t,e){return async n=>{await new Promise(((n,a)=>{(0,_.callBackgroundMethod)("addPermittedAccounts",[t,e],(t=>{t?a(t):n()}))})),await dt(n)}},n.addPermittedChain=function(t,e){return async n=>{await new Promise(((n,a)=>{(0,_.callBackgroundMethod)("addPermittedChain",[t,e],(t=>{t?a(t):n()}))})),await dt(n)}},n.addPermittedChains=function(t,e){return async n=>{await new Promise(((n,a)=>{(0,_.callBackgroundMethod)("addPermittedChains",[t,e],(t=>{t?a(t):n()}))})),await dt(n)}},n.addPollingTokenToAppState=yt,n.addToAddressBook=function(t,e="",n=""){return a.default.debug("background.addToAddressBook"),async(a,r)=>{const{chainId:o}=(0,w.getProviderConfig)(r());let s;try{s=await(0,_.submitRequestToBackground)("setAddressBook",[(0,k.toChecksumHexAddress)(t),e,o,n]),await dt(a)}catch(t){throw(0,A.logErrorWithMessage)(t),a(st("Address book failed to update")),t}s||a(st("Address book failed to update"))}},n.addToken=function({address:t,symbol:e,decimals:n,image:a,networkClientId:r},o){return async s=>{if(!t)throw new Error("MetaMask - Cannot add token without address");o||s(nt());try{await(0,_.submitRequestToBackground)("addToken",[{address:t,symbol:e,decimals:n,image:a,networkClientId:r}])}catch(t){(0,A.logErrorWithMessage)(t),s(st(t))}finally{await dt(s),s(rt())}}},n.addTransactionAndRouteToConfirmationPage=function(t,e){return async n=>{const r=(0,_.generateActionId)();try{a.default.debug("background.addTransaction");const o=await(0,_.submitRequestToBackground)("addTransaction",[t,{...e,actionId:r,origin:l.ORIGIN_METAMASK}]);return n(X()),o}catch(t){throw n(rt()),n(st(t)),t}}},n.addTransactionAndWaitForPublish=async function(t,e){a.default.debug("background.addTransactionAndWaitForPublish");const n=(0,_.generateActionId)();return await(0,_.submitRequestToBackground)("addTransactionAndWaitForPublish",[t,{...e,origin:l.ORIGIN_METAMASK,actionId:n}])},n.approvePermissionsRequest=function(t){return e=>{(0,_.callBackgroundMethod)("approvePermissionsRequest",[t],(t=>{t&&e(st(t)),dt(e)}))}},n.attemptLedgerTransportCreation=async function(){return await(0,_.submitRequestToBackground)("attemptLedgerTransportCreation")},n.automaticallySwitchNetwork=function(t,e){return async n=>{await J(t),await n(Z({networkClientId:t,origin:e})),await dt(n)}},n.backupUserData=async function(){let t;try{t=await(0,_.submitRequestToBackground)("backupUserData")}catch(t){throw(0,A.logErrorWithMessage)(t),t}return t},n.cancelDecryptMsg=function(t){return async e=>{e(nt());try{await(0,_.submitRequestToBackground)("cancelDecryptMessage",[t.id])}finally{e(rt())}return await dt(e),e(U(t.id)),e(et()),t}},n.cancelEncryptionPublicKeyMsg=function(t){return async e=>{e(nt());try{await(0,_.submitRequestToBackground)("cancelEncryptionPublicKey",[t.id])}finally{e(rt())}return await dt(e),e(U(t.id)),e(et()),t}},n.cancelQRHardwareSignRequest=function(){return async t=>{t(rt()),await(0,_.submitRequestToBackground)("cancelQRHardwareSignRequest")}},n.cancelSmartTransaction=function(t){return async e=>{try{await(0,_.submitRequestToBackground)("cancelSmartTransaction",[t])}catch(t){if((0,A.logErrorWithMessage)(t),(0,A.isErrorWithMessage)(t)){const n=(0,A.getErrorMessage)(t);if(n.startsWith("Fetch error:")){const t=(0,b.parseSmartTransactionsError)(n);e({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}}throw t}}},n.cancelSyncQRHardware=function(){return async t=>{t(rt()),await(0,_.submitRequestToBackground)("cancelSyncQRHardware")}},n.cancelTx=function(t,e=!0){return n=>(e&&n(nt()),new Promise(((e,n)=>{(0,_.callBackgroundMethod)("rejectPendingApproval",[String(t.id),s.providerErrors.userRejectedRequest().serialize()],(t=>{t?n(t):e()}))})).then((()=>dt(n))).then((()=>(n((0,m.resetSendState)()),n(U(t.id)),n(rt()),n(et()),t))).catch((t=>{throw n(rt()),t})))},n.cancelTxs=function(t){return async e=>{e(nt());try{const n=t.map((({id:t})=>t)),a=n.map((t=>new Promise(((e,n)=>{(0,_.callBackgroundMethod)("rejectPendingApproval",[String(t),s.providerErrors.userRejectedRequest().serialize()],(t=>{t?n(t):e()}))}))));await Promise.all(a),await dt(e),e((0,m.resetSendState)()),n.forEach((t=>{e(U(t))}))}finally{(0,g.getEnvironmentType)()===l.ENVIRONMENT_TYPE_NOTIFICATION?pt():e(rt())}}},n.captureSingleException=function(t){return async(e,n)=>{const{singleExceptions:a}=n().appState;t in a||(e({type:v.CAPTURE_SINGLE_EXCEPTION,value:t}),(0,r.captureException)(Error(t)))}},n.checkAccountsPresence=function(t){return async()=>{try{return await(0,_.submitRequestToBackground)("checkAccountsPresence",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.checkAndUpdateAllNftsOwnershipStatus=async function(){await(0,_.submitRequestToBackground)("checkAndUpdateAllNftsOwnershipStatus")},n.checkAndUpdateSingleNftOwnershipStatus=async function(t){await(0,_.submitRequestToBackground)("checkAndUpdateSingleNftOwnershipStatus",[t,!1])},n.checkHardwareStatus=function(t,e){return a.default.debug("background.checkHardwareStatus",t,e),async n=>{n(nt());let a=!1;try{a=await(0,_.submitRequestToBackground)("checkHardwareStatus",[t,e])}catch(t){throw(0,A.logErrorWithMessage)(t),n(st(t)),t}finally{n(rt())}return await dt(n),a}},n.clearAccountDetails=function(){return{type:v.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:v.CLEAR_PENDING_TOKENS}},n.clearSmartTransactionFees=function(){(0,_.submitRequestToBackground)("clearSmartTransactionFees")},n.clearSwapsQuotes=function(){return async t=>{await(0,_.submitRequestToBackground)("clearSwapsQuotes"),await dt(t)}},n.clearSwitchedNetworkDetails=function(){return async t=>{await(0,_.submitRequestToBackground)("clearSwitchedNetworkDetails",[]),await dt(t)}},n.closeCurrentNotificationWindow=et,n.closeNotificationPopup=pt,n.closeWelcomeScreen=function(){return{type:v.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=ut,n.completedTx=U,n.connectHardware=function(t,e,n,r){return a.default.debug("background.connectHardware",t,e,n),async(a,s)=>{const{ledgerTransportType:i}=s().metamask;let u;a(nt(`Looking for your ${(0,o.capitalize)(t)}...`));try{if(t===p.HardwareDeviceNames.ledger&&i===p.LedgerTransportTypes.webhid){const t=await window.navigator.hid.requestDevice({filters:[{vendorId:p.LEDGER_USB_VENDOR_ID}]});if(!t.some((t=>t.vendorId===Number(p.LEDGER_USB_VENDOR_ID))))throw new Error(r("ledgerWebHIDNotConnectedErrorMessage"))}u=await(0,_.submitRequestToBackground)("connectHardware",[t,e,n])}catch(e){(0,A.logErrorWithMessage)(e);const n=(0,A.getErrorMessage)(e);throw t===p.HardwareDeviceNames.ledger&&i===p.LedgerTransportTypes.webhid&&(0,A.isErrorWithMessage)(e)&&n.match("Failed to open the device")?(a(st(r("ledgerDeviceOpenFailureMessage"))),new Error(r("ledgerDeviceOpenFailureMessage"))):(t!==p.HardwareDeviceNames.qr&&a(st(e)),e)}finally{a(rt())}return await dt(a),u}},n.createCancelTransaction=function(t,e,n={}){let r;return a.default.debug("background.createCancelTransaction"),a=>{const o=(0,_.generateActionId)();return new Promise(((s,i)=>{(0,_.callBackgroundMethod)("createCancelTransaction",[t,e,{...n,actionId:o}],((e,n)=>{var o;if(e)return null!=e&&null!==(o=e.message)&&void 0!==o&&o.includes("Previous transaction is already confirmed")&&a(tt({name:"TRANSACTION_ALREADY_CONFIRMED",originalTransactionId:t})),a(st(e)),void i(e);if(n){const t=(0,f.getCurrentNetworkTransactions)({metamask:n}),{id:e}=t[t.length-1];r=e,s()}}))})).then((()=>dt(a))).then((()=>r))}},n.createEventFragment=function(t){const e=(0,_.generateActionId)();return(0,_.submitRequestToBackground)("createEventFragment",[{...t,actionId:e}])},n.createMetaMetricsDataDeletionTask=async function(){return await(0,_.submitRequestToBackground)("createMetaMetricsDataDeletionTask")},n.createNewVault=D,n.createNewVaultAndGetSeedPhrase=function(t){return async e=>{e(nt());try{await D(t);return await W(t)}catch(t){throw e(st(t)),(0,A.isErrorWithMessage)(t)?new Error((0,A.getErrorMessage)(t)):t}finally{e(rt())}}},n.createNewVaultAndRestore=function(t,n){return r=>{r(nt()),a.default.debug("background.createNewVaultAndRestore");const o=Array.from(e.from(n,"utf8").values());return new Promise(((e,n)=>{(0,_.callBackgroundMethod)("createNewVaultAndRestore",[t,o],(t=>{t?n(t):e()}))})).then((()=>r(G()))).then((()=>{r(Y()),r(rt())})).catch((t=>(r(st(t)),r(rt()),Promise.reject(t))))}},n.createOnChainTriggers=function(){return async()=>{try{await(0,_.submitRequestToBackground)("createOnChainTriggers")}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.createRetryTransaction=function(t,e){let n;return a=>new Promise(((r,o)=>{const s=(0,_.generateActionId)();(0,_.callBackgroundMethod)("createSpeedUpTransaction",[t,e,{actionId:s}],((t,e)=>{if(t)return a(st(t)),void o(t);if(e){const t=(0,f.getCurrentNetworkTransactions)(e);n=t[t.length-1],r()}}))})).then((()=>dt(a))).then((()=>n))},n.createSpeedUpTransaction=function(t,e,n={}){let r;return a.default.debug("background.createSpeedUpTransaction"),a=>{const o=(0,_.generateActionId)();return new Promise(((s,i)=>{(0,_.callBackgroundMethod)("createSpeedUpTransaction",[t,e,{...n,actionId:o}],((t,e)=>{if(t)return a(st(t)),void i(t);if(e){const t=(0,f.getCurrentNetworkTransactions)(e);r=t[t.length-1],s()}}))})).then((()=>dt(a))).then((()=>r))}},n.createTransactionEventFragment=function(t){const e=(0,_.generateActionId)();return(0,_.submitRequestToBackground)("createTransactionEventFragment",[{transactionId:t,actionId:e}])},n.currencyRateStartPolling=async function(t){const e=await(0,_.submitRequestToBackground)("currencyRateStartPolling",[{nativeCurrencies:t}]);return await yt(e),e},n.currencyRateStopPollingByPollingToken=async function(t){await(0,_.submitRequestToBackground)("currencyRateStopPollingByPollingToken",[t]),await kt(t)},n.decodeTransactionData=async function({transactionData:t,contractAddress:e,chainId:n}){return await(0,_.submitRequestToBackground)("decodeTransactionData",[{transactionData:t,contractAddress:e,chainId:n}])},n.decryptMsg=function(t){return a.default.debug("action - decryptMsg"),async e=>{e(nt()),a.default.debug("actions calling background.decryptMessage");try{await(0,_.submitRequestToBackground)("decryptMessage",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),e(st(t)),t}finally{e(rt())}return await dt(e),e(U(t.metamaskId)),e(et()),t}},n.decryptMsgInline=function(t){return a.default.debug("action - decryptMsgInline"),async e=>{a.default.debug("actions calling background.decryptMessageInline");try{await(0,_.submitRequestToBackground)("decryptMessageInline",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),e(st(t)),t}return(await dt(e)).unapprovedDecryptMsgs[t.metamaskId]}},n.deleteAccountSyncingDataFromUserStorage=function(){return async()=>{try{return await(0,_.submitRequestToBackground)("deleteAccountSyncingDataFromUserStorage",[u.USER_STORAGE_FEATURE_NAMES.accounts])}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.deleteExpiredNotifications=function(){return async(t,e)=>{const n=e().metamask.metamaskNotificationsList.filter((t=>{const e=new Date(Date.now()-N.NOTIFICATIONS_EXPIRATION_DELAY);return Boolean(t.readDate&&new Date(t.readDate)<e)})).map((({id:t})=>t));n.length&&(await(0,_.submitRequestToBackground)("deleteNotificationsById",[n]),await dt(t))}},n.deleteInterface=function(t){return async e=>{await(0,_.submitRequestToBackground)("deleteInterface",[t]),await dt(e)}},n.deleteNotificationsById=function(t){return async()=>{try{return await(0,_.submitRequestToBackground)("deleteNotificationsById",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.deleteOnChainTriggersByAccount=function(t){return async()=>{try{await(0,_.submitRequestToBackground)("deleteOnChainTriggersByAccount",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.detectNfts=function(){return async t=>{t(at()),a.default.debug("background.detectNfts");try{await(0,_.submitRequestToBackground)("detectNfts")}finally{t(ot())}await dt(t)}},n.detectTokens=function(){return async t=>{t(nt()),a.default.debug("background.detectTokens"),await(0,_.submitRequestToBackground)("detectTokens"),t(rt()),await dt(t)}},n.disableMetamaskNotifications=function(){return async()=>{try{await(0,_.submitRequestToBackground)("disableMetamaskNotifications")}catch(t){throw a.default.error(t),t}}},n.disableProfileSyncing=function(){return async()=>{try{await(0,_.submitRequestToBackground)("disableProfileSyncing")}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.disableSnap=function(t){return async e=>{await(0,_.submitRequestToBackground)("disableSnap",[t]),await dt(e)}},n.disconnectOriginFromSnap=function(t,e){return async n=>{await(0,_.submitRequestToBackground)("disconnectOriginFromSnap",[t,e]),await dt(n)}},n.dismissSmartTransactionsErrorMessage=function(){return{type:v.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=st,n.enableMetamaskNotifications=function(){return async()=>{try{await(0,_.submitRequestToBackground)("enableMetamaskNotifications")}catch(t){throw a.default.error(t),t}}},n.enableProfileSyncing=function(){return async()=>{try{await(0,_.submitRequestToBackground)("enableProfileSyncing")}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.enableSnap=function(t){return async e=>{await(0,_.submitRequestToBackground)("enableSnap",[t]),await dt(e)}},n.encryptionPublicKeyMsg=function(t){return a.default.debug("action - encryptionPublicKeyMsg"),async e=>{e(nt()),a.default.debug("actions calling background.encryptionPublicKey");try{await(0,_.submitRequestToBackground)("encryptionPublicKey",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),e(st(t)),t}finally{e(rt())}return await dt(e),e(U(t.metamaskId)),e(et()),t}},n.endBackgroundTrace=async function(t){const e=t.timestamp||performance.timeOrigin+performance.now();await(0,_.submitRequestToBackground)("endTrace",[{...t,timestamp:e}])},n.estimateGas=function(t){return(0,_.submitRequestToBackground)("estimateGas",[t])},n.estimateGasFee=function(t){return(0,_.submitRequestToBackground)("estimateGasFee",[t])},n.exportAccount=function(t,e,n,r){return function(o){return o(nt()),a.default.debug("background.verifyPassword"),new Promise(((s,i)=>{(0,_.callBackgroundMethod)("verifyPassword",[t],(function(u){if(u)return a.default.error("Error in verifying password."),o(rt()),o(st("Incorrect Password.")),void i(u);a.default.debug("background.exportAccount"),(0,_.callBackgroundMethod)("exportAccount",[e,t],(function(t,e){if(o(rt()),t)return(0,A.logErrorWithMessage)(t),o(st("Had a problem exporting the account.")),void i(t);n(e),r(!0),s(e)}))}))}))}},n.exportAccounts=function(t,e){return function(n){return a.default.debug("background.verifyPassword"),new Promise(((r,o)=>{(0,_.callBackgroundMethod)("verifyPassword",[t],(function(s){if(s)return a.default.error("Error in submitting password."),void o(s);a.default.debug("background.exportAccounts");const i=e.map((e=>new Promise(((a,r)=>(0,_.callBackgroundMethod)("exportAccount",[e,t],(function(t,e){if(t)return(0,A.logErrorWithMessage)(t),n(st("Had a problem exporting the account.")),void r(t);a(e)}))))));r(Promise.all(i))}))}))}},n.fetchAndSetQuotes=function(t,e){return async n=>{const[a,r]=await(0,_.submitRequestToBackground)("fetchAndSetQuotes",[t,e]);return await dt(n),[a,r]}},n.fetchAndUpdateMetamaskNotifications=function(t){return async()=>{try{return await(0,_.submitRequestToBackground)("fetchAndUpdateMetamaskNotifications",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.fetchSmartTransactionFees=function(t,e){return async n=>{e&&(e.value="0x0");try{const a=await await(0,_.submitRequestToBackground)("fetchSmartTransactionFees",[t,e]);return n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:null}),a}catch(t){if((0,A.logErrorWithMessage)(t),(0,A.isErrorWithMessage)(t)){const e=(0,A.getErrorMessage)(t);if(e.startsWith("Fetch error:")){const t=(0,b.parseSmartTransactionsError)(e);n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}}throw t}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,_.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(t){(0,A.logErrorWithMessage)(t)}}},n.finalizeEventFragment=function(t,e){return(0,_.submitRequestToBackground)("finalizeEventFragment",[t,e])},n.forceUpdateMetamaskState=dt,n.forgetDevice=function(t){return a.default.debug("background.forgetDevice",t),async e=>{e(nt());try{await(0,_.submitRequestToBackground)("forgetDevice",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),e(st(t)),t}finally{e(rt())}await dt(e)}},n.gasFeeStartPollingByNetworkClientId=async function(t){const e=await(0,_.submitRequestToBackground)("gasFeeStartPolling",[{networkClientId:t}]);return await yt(e),e},n.gasFeeStopPollingByPollingToken=async function(t){await(0,_.submitRequestToBackground)("gasFeeStopPollingByPollingToken",[t]),await kt(t)},n.getBalancesInSingleCall=async function(t,e,n){return await(0,_.submitRequestToBackground)("getBalancesInSingleCall",[t,e,n])},n.getContractMethodData=function(t=""){return async(e,n)=>{const r=(0,g.addHexPrefix)(t).slice(0,10);if(r.length<10)return{};const{knownMethodData:o,use4ByteResolution:s}=n().metamask;if(null!=o&&o[r]&&0!==Object.keys(o[r]).length)return o[r];a.default.debug("loadingMethodData");const{name:i,params:u}=await(0,M.getMethodDataAsync)(r,s);return(0,_.callBackgroundMethod)("addKnownMethodData",[r,{name:i,params:u}],(t=>{t&&e(st(t))})),{name:i,params:u}}},n.getCurrentNetworkEIP1559Compatibility=async function(){let t;try{t=await(0,_.submitRequestToBackground)("getCurrentNetworkEIP1559Compatibility")}catch(t){console.error(t)}return t},n.getDeviceNameForMetric=function(t,e){return a.default.debug("background.getDeviceNameForMetric",t,e),async n=>{let a;n(nt());try{a=await(0,_.submitRequestToBackground)("getDeviceNameForMetric",[t,e])}catch(t){throw(0,A.logErrorWithMessage)(t),n(st(t)),t}finally{n(rt())}return await dt(n),a}},n.getGasFeeTimeEstimate=function(t,e){return(0,_.submitRequestToBackground)("getGasFeeTimeEstimate",[t,e])},n.getLastInteractedConfirmationInfo=async function(){return await(0,_.submitRequestToBackground)("getLastInteractedConfirmationInfo")},n.getLayer1GasFee=function({chainId:t,networkClientId:e,transactionParams:n}){return async()=>await(0,_.submitRequestToBackground)("getLayer1GasFee",[{chainId:t,networkClientId:e,transactionParams:n}])},n.getNFTContractInfo=async function(t,e){return await(0,_.submitRequestToBackground)("getNFTContractInfo",[t,e])},n.getNetworkConfigurationByNetworkClientId=async function(t){let e;try{e=await(0,_.submitRequestToBackground)("getNetworkConfigurationByNetworkClientId",[t])}catch(t){console.error(t)}return e},n.getNextAvailableAccountName=async function(t){return await(0,_.submitRequestToBackground)("getNextAvailableAccountName",[t])},n.getNextNonce=function(t){return async(e,n)=>{const a=(0,w.getSelectedNetworkClientId)(n());let r;try{r=await(0,_.submitRequestToBackground)("getNextNonce",[t,a])}catch(t){throw e(st(t)),t}return e(wt(r)),r}},n.getOpenMetamaskTabsIds=function(){return async t=>{t(ht(await(0,_.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},n.getPhishingResult=async function(t){return await(0,_.submitRequestToBackground)("getPhishingResult",[t])},n.getRequestAccountTabIds=function(){return async t=>{t(mt(await(0,_.submitRequestToBackground)("getRequestAccountTabIds")))}},n.getRpcMethodPreferences=function(){return async t=>{t(nt()),await(0,_.submitRequestToBackground)("getRpcMethodPreferences",[]),t(rt())}},n.getSeedPhrase=W,n.getSnapAccountsById=async function(t){return await(0,_.submitRequestToBackground)("getAccountsBySnapId",[t])},n.getTokenStandardAndDetails=async function(t,e,n){return await(0,_.submitRequestToBackground)("getTokenStandardAndDetails",[t,e,n])},n.getTokenSymbol=async function(t){return await(0,_.submitRequestToBackground)("getTokenSymbol",[t])},n.getTransactions=async function(t={}){return await(0,_.submitRequestToBackground)("getTransactions",[t])},n.goHome=C,n.grantPermittedChain=async function(t,e){return await(0,_.submitRequestToBackground)("grantPermissionsIncremental",[{subject:{origin:t},approvedPermissions:{[P.EndowmentTypes.permittedChains]:{caveats:[{type:P.CaveatTypes.restrictNetworkSwitching,value:[e]}]}}}])},n.grantPermittedChains=async function(t,e){return await(0,_.submitRequestToBackground)("grantPermissions",[{subject:{origin:t},approvedPermissions:{[P.EndowmentTypes.permittedChains]:{caveats:[{type:P.CaveatTypes.restrictNetworkSwitching,value:e}]}}}])},n.handleSnapRequest=x,n.hideAccountBanner=function(){return(0,_.submitRequestToBackground)("setShowAccountBanner",[!1])},n.hideAlert=function(){return{type:v.ALERT_CLOSE}},n.hideBetaHeader=function(){return(0,_.submitRequestToBackground)("setShowBetaHeader",[!1])},n.hideDeprecatedNetworkModal=function(){return{type:v.DEPRECATED_NETWORK_POPOVER_CLOSE}},n.hideImportNftsModal=function(){return{type:v.IMPORT_NFTS_MODAL_CLOSE}},n.hideImportTokensModal=function(){return{type:v.IMPORT_TOKENS_POPOVER_CLOSE}},n.hideIpfsModal=function(){return{type:v.SHOW_IPFS_MODAL_CLOSE}},n.hideKeyringRemovalResultModal=function(){return{type:v.HIDE_KEYRING_SNAP_REMOVAL_RESULT}},n.hideLoadingIndication=rt,n.hideModal=function(){return{type:v.MODAL_CLOSE}},n.hideNetworkBanner=function(){return(0,_.submitRequestToBackground)("setShowNetworkBanner",[!1])},n.hideNetworkDropdown=function(){return{type:v.NETWORK_DROPDOWN_CLOSE}},n.hideNftStillFetchingIndication=ot,n.hidePermissionsTour=function(){return(0,_.submitRequestToBackground)("setShowPermissionsTour",[!1])},n.hidePermittedNetworkToast=function(){return{type:v.SHOW_PERMITTED_NETWORK_TOAST_CLOSE}},n.hideTestNetMessage=function(){return(0,_.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},n.hideWarning=function(){return{type:v.HIDE_WARNING}},n.ignoreTokens=function({tokensToIgnore:t,dontShowLoadingIndicator:e=!1,networkClientId:n=null}){const a=Array.isArray(t)?t:[t];return async t=>{e||t(nt());try{await(0,_.submitRequestToBackground)("ignoreTokens",[a,n])}catch(e){(0,A.logErrorWithMessage)(e),t(st(e))}finally{await dt(t),t(rt())}}},n.importNewAccount=function(t,e,n){return async r=>{r(nt(n));try{a.default.debug("background.importAccountWithStrategy"),await(0,_.submitRequestToBackground)("importAccountWithStrategy",[t,e])}finally{r(rt())}return await dt(r)}},n.isNftOwner=async function(t,e,n){return await(0,_.submitRequestToBackground)("isNftOwner",[t,e,n])},n.lockMetamask=function(){return a.default.debug("background.setLocked"),t=>(t(nt()),$().then((()=>dt(t))).catch((e=>(t(st((0,A.getErrorMessage)(e))),Promise.reject(e)))).then((()=>{t(rt()),t({type:v.LOCK_METAMASK})})).catch((()=>{t(rt()),t({type:v.LOCK_METAMASK})})))},n.markMetamaskNotificationsAsRead=function(t){return async()=>{try{await(0,_.submitRequestToBackground)("markMetamaskNotificationsAsRead",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.markPasswordForgotten=function(){return async t=>{try{await new Promise(((t,e)=>{(0,_.callBackgroundMethod)("markPasswordForgotten",[],(n=>{n?e(n):t()}))}))}finally{t(rt()),await dt(t)}}},n.multichainUpdateBalance=async function(t){return await(0,_.submitRequestToBackground)("multichainUpdateBalance",[t])},n.multichainUpdateBalances=async function(){return await(0,_.submitRequestToBackground)("multichainUpdateBalances",[])},n.performSignIn=function(){return async()=>{try{await(0,_.submitRequestToBackground)("performSignIn")}catch(t){const e=t instanceof Error?t.message:"Unknown error occurred during sign-in.";throw(0,A.logErrorWithMessage)(e),t}}},n.performSignOut=function(){return async()=>{try{await(0,_.submitRequestToBackground)("performSignOut")}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.qrCodeDetected=function(t){return async e=>{await e({type:v.QR_CODE_DETECTED,value:t}),e((0,m.computeEstimatedGasLimit)())}},n.rejectAllMessages=function(t){return async e=>{const n=(0,s.serializeError)(s.providerErrors.userRejectedRequest());await Promise.all(t.map((async({id:t})=>await(0,_.submitRequestToBackground)("rejectPendingApproval",[t,n]))));const{pendingApprovals:a}=await dt(e);0===Object.values(a).length&&e(et())}},n.rejectPendingApproval=function(t,e){return async n=>{await(0,_.submitRequestToBackground)("rejectPendingApproval",[t,e]);const{pendingApprovals:a}=await dt(n);0===Object.values(a).length&&n(et())}},n.rejectPermissionsRequest=function(t){return e=>new Promise(((n,a)=>{(0,_.callBackgroundMethod)("rejectPermissionsRequest",[t],(t=>{if(t)return e(st(t)),void a(t);dt(e).then(n).catch(a)}))}))},n.removeAccount=function(t){return async e=>{e(nt());try{await new Promise(((e,n)=>{(0,_.callBackgroundMethod)("removeAccount",[t],((t,a)=>{t?n(t):e(a)}))})),await dt(e)}catch(t){throw e(st(t)),t}finally{e(rt())}a.default.info(`Account removed: ${t}`),e(Y())}},n.removeAndIgnoreNft=function(t,e,n){return async a=>{if(!t)throw new Error("MetaMask - Cannot ignore NFT without address");if(!e)throw new Error("MetaMask - Cannot ignore NFT without tokenID");n||a(nt());try{await(0,_.submitRequestToBackground)("removeAndIgnoreNft",[t,e])}catch(t){throw(0,A.logErrorWithMessage)(t),a(st(t)),t}finally{await dt(a),a(rt())}}},n.removeFromAddressBook=function(t,e){return a.default.debug("background.removeFromAddressBook"),async n=>{await(0,_.submitRequestToBackground)("removeFromAddressBook",[t,(0,k.toChecksumHexAddress)(e)]),await dt(n)}},n.removeNetwork=function(t){return async()=>{try{await(0,_.submitRequestToBackground)("removeNetwork",[t])}catch(t){(0,A.logErrorWithMessage)(t)}}},n.removeNft=function(t,e,n){return async a=>{if(!t)throw new Error("MetaMask - Cannot remove NFT without address");if(!e)throw new Error("MetaMask - Cannot remove NFT without tokenID");n||a(nt());try{await(0,_.submitRequestToBackground)("removeNft",[t,e])}catch(t){(0,A.logErrorWithMessage)(t),a(st(t))}finally{await dt(a),a(rt())}}},n.removePermissionsFor=function(t){return e=>{(0,_.callBackgroundMethod)("removePermissionsFor",[t],(t=>{t&&e(st(t))}))}},n.removePermittedAccount=function(t,e){return async n=>{await new Promise(((n,a)=>{(0,_.callBackgroundMethod)("removePermittedAccount",[t,e],(t=>{t?a(t):n()}))})),await dt(n)}},n.removePermittedChain=function(t,e){return async n=>{await new Promise(((n,a)=>{(0,_.callBackgroundMethod)("removePermittedChain",[t,e],(t=>{t?a(t):n()}))})),await dt(n)}},n.removePollingTokenFromAppState=kt,n.removeSnap=function(t){return async(e,n)=>{var a;e(nt());const r=(null===(a=(0,f.getPermissionSubjects)(n())[t])||void 0===a||null===(a=a.permissions)||void 0===a?void 0:a.snap_manageAccounts)!==undefined;try{if(r){const e=await(0,_.submitRequestToBackground)("getAccountsBySnapId",[t]);for(const t of e)await(0,_.submitRequestToBackground)("removeAccount",[t])}await(0,_.submitRequestToBackground)("removeSnap",[t]),await dt(e)}catch(t){throw e(st(t)),t}finally{e(rt())}}},n.requestAccountsAndChainPermissionsWithId=function(t){return async e=>{const n=await(0,_.submitRequestToBackground)("requestAccountsAndChainPermissionsWithId",[t]);return await dt(e),n}},n.requestAccountsPermissionWithId=function(t){return async e=>{const n=await(0,_.submitRequestToBackground)("requestAccountsPermissionWithId",[t]);return await dt(e),n}},n.requestRevealSeedWords=function(t){return async e=>{e(nt()),a.default.debug("background.verifyPassword");try{await F(t);return await W(t)}finally{e(rt())}}},n.requestUserApproval=function({origin:t,type:e,requestData:n}){return async a=>{try{await(0,_.submitRequestToBackground)("requestUserApproval",[{origin:t,type:e,requestData:n}])}catch(t){(0,A.logErrorWithMessage)(t),a(st("Had trouble requesting user approval"))}}},n.resetAccount=function(){return t=>(t(nt()),new Promise(((e,n)=>{(0,_.callBackgroundMethod)("resetAccount",[],((r,o)=>{if(t(rt()),r)return(0,A.isErrorWithMessage)(r)&&t(st(r)),void n(r);a.default.info(`Transaction history reset for ${o}`),t(Y()),e(o)}))})))},n.resetBackgroundSwapsState=function(){return async t=>{await(0,_.submitRequestToBackground)("resetSwapsState"),await dt(t)}},n.resetOnboarding=function(){return async t=>{try{await t(ft(!1)),t(ct())}catch(t){console.error(t)}}},n.resetOnboardingAction=ct,n.resetSwapsPostFetchState=function(){return async t=>{await(0,_.submitRequestToBackground)("resetPostFetchState"),await dt(t)}},n.resetViewedNotifications=function(){return(0,_.submitRequestToBackground)("resetViewedNotifications")},n.resolvePendingApproval=function(t,e){return async n=>{await(0,_.submitRequestToBackground)("resolvePendingApproval",[t,e]);const{pendingApprovals:a}=await dt(n);0===Object.values(a).length&&n(et())}},n.restoreUserData=async function(t){try{await(0,_.submitRequestToBackground)("restoreUserData",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),t}return!0},n.revokeDynamicSnapPermissions=function(t,e){return async n=>{await(0,_.submitRequestToBackground)("revokeDynamicSnapPermissions",[t,e]),await dt(n)}},n.rollbackToPreviousProvider=function(){return async t=>{try{await(0,_.submitRequestToBackground)("rollbackToPreviousProvider")}catch(e){(0,A.logErrorWithMessage)(e),t(st("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async t=>{await(0,_.submitRequestToBackground)("safeRefetchQuotes"),await dt(t)}},n.sendMultichainTransaction=async function(t,{account:e,scope:n}){await x({snapId:t,origin:"metamask",handler:c.HandlerType.OnRpcRequest,request:{method:"startSendTransactionFlow",params:{account:e,scope:n}}})},n.setAccountDetailsAddress=function(t){return{type:v.SET_ACCOUNT_DETAILS_ADDRESS,payload:t}},n.setAccountLabel=function(t,e){return n=>(n(nt()),a.default.debug("background.setAccountLabel"),new Promise(((a,r)=>{(0,_.callBackgroundMethod)("setAccountLabel",[t,e],(o=>{if(n(rt()),o)return n(st(o)),void r(o);n({type:v.SET_ACCOUNT_LABEL,value:{account:t,label:e}}),a(t)}))})))},n.setActiveNetwork=function(t){return async e=>{a.default.debug(`background.setActiveNetwork: ${t}`);try{await(0,_.submitRequestToBackground)("setActiveNetwork",[t])}catch(t){(0,A.logErrorWithMessage)(t),e(st("Had a problem changing networks!"))}}},n.setActiveNetworkConfigurationId=J,n.setActiveNetworkWithError=function(t){return async e=>{a.default.debug(`background.setActiveNetwork: ${t}`);try{await(0,_.submitRequestToBackground)("setActiveNetwork",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),e(st("Had a problem changing networks!")),new Error("Had a problem changing networks!")}}},n.setAddSnapAccountEnabled=async function(t){try{await(0,_.submitRequestToBackground)("setAddSnapAccountEnabled",[t])}catch(t){(0,A.logErrorWithMessage)(t)}},n.setAdvancedGasFee=function(t){return e=>{e(nt()),a.default.debug("background.setAdvancedGasFee"),(0,_.callBackgroundMethod)("setAdvancedGasFee",[t],(t=>{e(rt()),t&&e(st(t))}))}},n.setAggregatedBalancePopoverShown=function(){return it("shouldShowAggregatedBalancePopover",!1)},n.setAlertEnabledness=async function(t,e){await(0,_.submitRequestToBackground)("setAlertEnabledness",[t,e])},n.setAutoLockTimeLimit=function(t){return it("autoLockTimeLimit",t)},n.setBackgroundSwapRouteState=function(t){return async e=>{await(0,_.submitRequestToBackground)("setBackgroundSwapRouteState",[t]),await dt(e)}},n.setBitcoinSupportEnabled=async function(t){try{await(0,_.submitRequestToBackground)("setBitcoinSupportEnabled",[t])}catch(t){(0,A.logErrorWithMessage)(t)}},n.setBitcoinTestnetSupportEnabled=async function(t){try{await(0,_.submitRequestToBackground)("setBitcoinTestnetSupportEnabled",[t])}catch(t){(0,A.logErrorWithMessage)(t)}},n.setCompletedOnboarding=function(){return async t=>{t(nt());try{await(0,_.submitRequestToBackground)("completeOnboarding"),t(ut())}catch(e){throw t(st(e)),e}finally{t(rt())}}},n.setConfirmationAdvancedDetailsOpen=function(t){return it("showConfirmationAdvancedDetails",t)},n.setConfirmationExchangeRates=function(t){return{type:v.SET_CONFIRMATION_EXCHANGE_RATES,value:t}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,_.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(t=>{if((0,A.isErrorWithMessage)(t))throw new Error((0,A.getErrorMessage)(t))}))}},n.setCurrentCurrency=function(t){return async e=>{e(nt()),a.default.debug("background.setCurrentCurrency");try{await(0,_.submitRequestToBackground)("setCurrentCurrency",[t]),await dt(e)}catch(t){return(0,A.logErrorWithMessage)(t),void e(st(t))}finally{e(rt())}}},n.setCurrentExtensionPopupId=function(t){return async e=>{await(0,_.submitRequestToBackground)("setCurrentExtensionPopupId",[t]),await dt(e)}},n.setCurrentLocale=gt,n.setCustomApproveTxData=function(t){return async e=>{await(0,_.submitRequestToBackground)("setCustomApproveTxData",[t]),await dt(e)}},n.setDataCollectionForMarketing=function(t){return async e=>{a.default.debug("background.setDataCollectionForMarketing"),await(0,_.submitRequestToBackground)("setDataCollectionForMarketing",[t]),e({type:v.SET_DATA_COLLECTION_FOR_MARKETING,value:t})}},n.setDefaultHomeActiveTabName=function(t){return async e=>{await(0,_.submitRequestToBackground)("setDefaultHomeActiveTabName",[t]),await dt(e)}},n.setDismissSeedBackUpReminder=function(t){return async e=>{e(nt()),await(0,_.submitRequestToBackground)("setDismissSeedBackUpReminder",[t]),e(rt())}},n.setEditedNetwork=function(t=undefined){return{type:v.SET_EDIT_NETWORK,payload:t}},n.setFeatureAnnouncementsEnabled=function(t){return async()=>{try{await(0,_.submitRequestToBackground)("setFeatureAnnouncementsEnabled",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.setFeatureFlag=function(t,e,n){return a=>(a(nt()),new Promise(((r,o)=>{(0,_.callBackgroundMethod)("setFeatureFlag",[t,e],((t,e)=>{if(a(rt()),t)return a(st(t)),void o(t);n&&a(tt({name:n})),r(e)}))})))},n.setFeatureNotificationsEnabled=function(t){return it("featureNotificationsEnabled",t)},n.setFirstTimeFlowType=function(t){return async e=>{try{a.default.debug("background.setFirstTimeFlowType"),await(0,_.submitRequestToBackground)("setFirstTimeFlowType",[t]),e({type:v.SET_FIRST_TIME_FLOW_TYPE,value:t})}catch(t){e(st(t))}}},n.setFirstTimeUsedNetwork=function(t){return(0,_.submitRequestToBackground)("setFirstTimeUsedNetwork",[t])},n.setHardwareWalletDefaultHdPath=function({device:t,path:e}){return{type:v.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,payload:{device:t,path:e}}},n.setHideZeroBalanceTokens=function(t){return it("hideZeroBalanceTokens",t)},n.setIncomingTransactionsPreferences=function(t,e){return async n=>{n(nt()),a.default.debug("background.setIncomingTransactionsPreferences"),await(0,_.submitRequestToBackground)("setIncomingTransactionsPreferences",[t,e]),n(rt())}},n.setInitialGasEstimate=function(t){return async e=>{await(0,_.submitRequestToBackground)("setInitialGasEstimate",[t]),await dt(e)}},n.setIpfsGateway=function(t){return e=>{a.default.debug("background.setIpfsGateway"),(0,_.callBackgroundMethod)("setIpfsGateway",[t],(t=>{t&&e(st(t))}))}},n.setIsIpfsGatewayEnabled=function(t){return e=>{a.default.debug("background.setIsIpfsGatewayEnabled"),(0,_.callBackgroundMethod)("setIsIpfsGatewayEnabled",[t],(t=>{t&&e(st(t))}))}},n.setIsProfileSyncingEnabled=function(t){return async e=>{try{e(nt()),await(0,_.submitRequestToBackground)("setIsProfileSyncingEnabled",[t]),e(rt())}catch(t){throw(0,A.logErrorWithMessage)(t),t}finally{e(rt())}}},n.setLastActiveTime=function(){return t=>{(0,_.callBackgroundMethod)("setLastActiveTime",[],(e=>{e&&t(st(e))}))}},n.setLastInteractedConfirmationInfo=async function(t){return await(0,_.submitRequestToBackground)("setLastInteractedConfirmationInfo",[t])},n.setLastViewedUserSurvey=function(t){return async()=>{await(0,_.submitRequestToBackground)("setLastViewedUserSurvey",[t])}},n.setName=function(t){return async()=>{await(0,_.submitRequestToBackground)("setName",[t])}},n.setNetworkClientIdForDomain=function(t,e){return(0,_.submitRequestToBackground)("setNetworkClientIdForDomain",[t,e])},n.setNewNetworkAdded=function({networkConfigurationId:t,nickname:e}){return{type:v.SET_NEW_NETWORK_ADDED,payload:{networkConfigurationId:t,nickname:e}}},n.setNewNftAddedMessage=function(t){return{type:v.SET_NEW_NFT_ADDED_MESSAGE,payload:t}},n.setNewTokensImported=function(t){return{type:v.SET_NEW_TOKENS_IMPORTED,payload:t}},n.setNewTokensImportedError=function(t){return{type:v.SET_NEW_TOKENS_IMPORTED_ERROR,payload:t}},n.setNextNonce=wt,n.setOpenMetamaskTabsIDs=ht,n.setOpenSeaEnabled=function(t){return async e=>{e(nt()),a.default.debug("background.setOpenSeaEnabled");try{await(0,_.submitRequestToBackground)("setOpenSeaEnabled",[t])}finally{e(rt())}}},n.setOutdatedBrowserWarningLastShown=function(t){return async()=>{await(0,_.submitRequestToBackground)("setOutdatedBrowserWarningLastShown",[t])}},n.setOverrideContentSecurityPolicyHeader=function(t){return async e=>{e(nt()),await(0,_.submitRequestToBackground)("setOverrideContentSecurityPolicyHeader",[t]),e(rt())}},n.setParticipateInMetaMetrics=function(t){return e=>(a.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,r)=>{(0,_.callBackgroundMethod)("setParticipateInMetaMetrics",[t],((o,s)=>{if(a.default.debug(o),o)return e(st(o)),void r(o);e({type:v.SET_PARTICIPATE_IN_METAMETRICS,value:t}),n([t,s])}))})))},n.setPendingTokens=function(t){const{customToken:e,selectedTokens:n={},tokenAddressList:a=[]}=t,r=null!=e&&e.address&&null!=e&&e.symbol&&Boolean((null==e?void 0:e.decimals)>=0&&(null==e?void 0:e.decimals)<=36)?{...n,[e.address]:{...e,isCustom:!0}}:n;return Object.keys(r).forEach((t=>{const e=a.find((e=>(0,E.isEqualCaseInsensitive)(e,t)));r[t]={...r[t],unlisted:!e}})),{type:v.SET_PENDING_TOKENS,payload:r}},n.setPetnamesEnabled=function(t){return it("petnamesEnabled",t)},n.setPreference=it,n.setPrivacyMode=function(t){return it("privacyMode",t,!1)},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,_.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(t=>{if((0,A.isErrorWithMessage)(t))throw new Error((0,A.getErrorMessage)(t))}))}},n.setRecoveryPhraseReminderLastShown=function(t){return()=>{(0,_.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[t],(t=>{if((0,A.isErrorWithMessage)(t))throw new Error((0,A.getErrorMessage)(t))}))}},n.setRedesignedConfirmationsDeveloperEnabled=function(t){return it("isRedesignedConfirmationsDeveloperEnabled",t)},n.setRedesignedConfirmationsEnabled=function(t){return it("redesignedConfirmationsEnabled",t)},n.setRedesignedTransactionsEnabled=function(t){return it("redesignedTransactionsEnabled",t)},n.setRemoveNftMessage=function(t){return{type:v.SET_REMOVE_NFT_MESSAGE,payload:t}},n.setRequestAccountTabIds=mt,n.setSecurityAlertsEnabled=function(t){try{(0,_.submitRequestToBackground)("setSecurityAlertsEnabled",[t])}catch(t){(0,A.logErrorWithMessage)(t)}},n.setSeedPhraseBackedUp=ft,n.setSelectedAccount=function(t){return async(e,n)=>{e(nt()),a.default.debug("background.setSelectedAccount");const r=n(),o=(0,y.getUnconnectedAccountAlertEnabledness)(r),s=r.activeTab.origin,i=(0,f.getInternalAccountByAddress)(r,t),u=(0,f.getPermittedAccountsForCurrentTab)(r),c=Boolean(s)&&u.includes(i.address),d=Boolean(s)&&u.includes(t),l=c&&!d;try{await z(i.id),await dt(e)}catch(t){return void e(st(t))}finally{e(rt())}o&&l&&(e((0,h.switchedToUnconnectedAccount)()),await bt(s))}},n.setSelectedInternalAccount=function(t){return async e=>{e(nt()),a.default.debug("background.setSelectedInternalAccount");try{await z(t)}catch(t){return void e(st(t))}finally{e(rt())}}},n.setSelectedNetworkConfigurationId=function(t){return{type:v.SET_SELECTED_NETWORK_CONFIGURATION_ID,payload:t}},n.setSelectedQuoteAggId=function(t){return async e=>{await(0,_.submitRequestToBackground)("setSelectedQuoteAggId",[t]),await dt(e)}},n.setServiceWorkerKeepAlivePreference=function(t){return async e=>{e(nt()),a.default.debug("background.setServiceWorkerKeepAlivePreference");try{await(0,_.submitRequestToBackground)("setServiceWorkerKeepAlivePreference",[t])}catch(t){e(st(t))}finally{e(rt())}}},n.setShowExtensionInFullSizeView=function(t){return it("showExtensionInFullSizeView",t)},n.setShowFiatConversionOnTestnetsPreference=function(t){return it("showFiatInTestnets",t)},n.setShowMultiRpcModal=function(t){return it("showMultiRpcModal",t)},n.setShowNativeTokenAsMainBalancePreference=function(t){return it("showNativeTokenAsMainBalance",t)},n.setShowTestNetworks=function(t){return it("showTestNetworks",t)},n.setSmartTransactionsPreferenceEnabled=function(t){return async(e,n)=>{const a=(0,R.getSmartTransactionsOptInStatusInternal)(n());Tt({category:T.MetaMetricsEventCategory.Settings,event:T.MetaMetricsEventName.SettingsUpdated,properties:{stx_opt_in:t,prev_stx_opt_in:a}}),await e(it("smartTransactionsOptInStatus",t)),await dt(e)}},n.setSmartTransactionsRefreshInterval=function(t){return async()=>{try{await(0,_.submitRequestToBackground)("setStatusRefreshInterval",[t])}catch(t){(0,A.logErrorWithMessage)(t)}}},n.setSnapsAddSnapAccountModalDismissed=async function(){await(0,_.submitRequestToBackground)("setSnapsAddSnapAccountModalDismissed",[!0])},n.setSnapsInstallPrivacyWarningShownStatus=function(t){return async()=>{await(0,_.submitRequestToBackground)("setSnapsInstallPrivacyWarningShownStatus",[t])}},n.setSwapsErrorKey=function(t){return async e=>{await(0,_.submitRequestToBackground)("setSwapsErrorKey",[t]),await dt(e)}},n.setSwapsFeatureFlags=function(t){return async e=>{await(0,_.submitRequestToBackground)("setSwapsFeatureFlags",[t]),await dt(e)}},n.setSwapsLiveness=function(t){return async e=>{await(0,_.submitRequestToBackground)("setSwapsLiveness",[t]),await dt(e)}},n.setSwapsQuotesPollingLimitEnabled=function(t){return async e=>{await(0,_.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[t]),await dt(e)}},n.setSwapsTokens=function(t){return async e=>{await(0,_.submitRequestToBackground)("setSwapsTokens",[t]),await dt(e)}},n.setSwapsTxGasLimit=function(t){return async e=>{await(0,_.submitRequestToBackground)("setSwapsTxGasLimit",[t,!0]),await dt(e)}},n.setSwapsTxGasPrice=function(t){return async e=>{await(0,_.submitRequestToBackground)("setSwapsTxGasPrice",[t]),await dt(e)}},n.setSwitchedNetworkDetails=Z,n.setTermsOfUseLastAgreed=function(t){return async()=>{await(0,_.submitRequestToBackground)("setTermsOfUseLastAgreed",[t])}},n.setTheme=function(t){return async e=>{e(nt()),a.default.debug("background.setTheme");try{await(0,_.submitRequestToBackground)("setTheme",[t])}finally{e(rt())}}},n.setTokenNetworkFilter=function(t){return it("tokenNetworkFilter",t,!1)},n.setTokenSortConfig=function(t){return it("tokenSortConfig",t,!1)},n.setUnconnectedAccountAlertShown=bt,n.setUse4ByteResolution=function(t){return async e=>{e(nt()),a.default.debug("background.setUse4ByteResolution");try{await(0,_.submitRequestToBackground)("setUse4ByteResolution",[t])}catch(t){e(st(t))}finally{e(rt())}}},n.setUseAddressBarEnsResolution=function(t){return e=>{a.default.debug("background.setUseAddressBarEnsResolution"),(0,_.callBackgroundMethod)("setUseAddressBarEnsResolution",[t],(t=>{t&&e(st(t))}))}},n.setUseBlockie=function(t){return e=>{e(nt()),a.default.debug("background.setUseBlockie"),(0,_.callBackgroundMethod)("setUseBlockie",[t],(t=>{e(rt()),t&&e(st(t))}))}},n.setUseCurrencyRateCheck=function(t){return e=>{e(nt()),a.default.debug("background.setUseCurrencyRateCheck"),(0,_.callBackgroundMethod)("setUseCurrencyRateCheck",[t],(t=>{e(rt()),t&&e(st(t))}))}},n.setUseExternalNameSources=function(t){try{(0,_.submitRequestToBackground)("setUseExternalNameSources",[t])}catch(t){(0,A.logErrorWithMessage)(t)}},n.setUseMultiAccountBalanceChecker=function(t){return e=>{e(nt()),a.default.debug("background.setUseMultiAccountBalanceChecker"),(0,_.callBackgroundMethod)("setUseMultiAccountBalanceChecker",[t],(t=>{e(rt()),t&&e(st(t))}))}},n.setUseNftDetection=function(t){return async e=>{e(nt()),a.default.debug("background.setUseNftDetection");try{await(0,_.submitRequestToBackground)("setUseNftDetection",[t])}finally{e(rt())}}},n.setUseNonceField=function(t){return async e=>{e(nt()),a.default.debug("background.setUseNonceField");try{await(0,_.submitRequestToBackground)("setUseNonceField",[t])}catch(t){e(st(t))}e(rt())}},n.setUsePhishDetect=function(t){return e=>{e(nt()),a.default.debug("background.setUsePhishDetect"),(0,_.callBackgroundMethod)("setUsePhishDetect",[t],(t=>{e(rt()),t&&e(st(t))}))}},n.setUseRequestQueue=function(t){try{(0,_.submitRequestToBackground)("setUseRequestQueue",[t])}catch(t){(0,A.logErrorWithMessage)(t)}},n.setUseSafeChainsListValidation=function(t){return e=>{e(nt()),a.default.debug("background.setUseSafeChainsListValidation"),(0,_.callBackgroundMethod)("setUseSafeChainsListValidation",[t],(t=>{e(rt()),t&&e(st(t))}))}},n.setUseTokenDetection=function(t){return e=>{e(nt()),a.default.debug("background.setUseTokenDetection"),(0,_.callBackgroundMethod)("setUseTokenDetection",[t],(t=>{e(rt()),t&&e(st(t))}))}},n.setUseTransactionSimulations=function(t){try{(0,_.submitRequestToBackground)("setUseTransactionSimulations",[t])}catch(t){(0,A.logErrorWithMessage)(t)}},n.setWatchEthereumAccountEnabled=async function(t){try{await(0,_.submitRequestToBackground)("setWatchEthereumAccountEnabled",[t])}catch(t){(0,A.logErrorWithMessage)(t)}},n.setWeb3ShimUsageAlertDismissed=async function(t){await(0,_.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[t])},n.showAccountsPage=Y,n.showAlert=function(t){return{type:v.ALERT_OPEN,payload:t}},n.showConfTxPage=X,n.showConfirmTurnOffProfileSyncing=function(){return t=>{t(tt({name:"CONFIRM_TURN_OFF_PROFILE_SYNCING"}))}},n.showConfirmTurnOnMetamaskNotifications=function(){return t=>{t(tt({name:"TURN_ON_METAMASK_NOTIFICATIONS"}))}},n.showDeprecatedNetworkModal=function(){return{type:v.DEPRECATED_NETWORK_POPOVER_OPEN}},n.showImportNftsModal=function(t){return{type:v.IMPORT_NFTS_MODAL_OPEN,payload:t}},n.showImportTokensModal=function(){return{type:v.IMPORT_TOKENS_POPOVER_OPEN}},n.showIpfsModal=function(){return{type:v.SHOW_IPFS_MODAL_OPEN}},n.showKeyringSnapRemovalModal=function(t){return{type:v.SHOW_KEYRING_SNAP_REMOVAL_RESULT,payload:t}},n.showLoadingIndication=nt,n.showModal=tt,n.showNetworkDropdown=function(){return{type:v.NETWORK_DROPDOWN_OPEN}},n.showNftStillFetchingIndication=at,n.showPermittedNetworkToast=function(){return{type:v.SHOW_PERMITTED_NETWORK_TOAST_OPEN}},n.showPrivateKey=function(t){return{type:v.SHOW_PRIVATE_KEY,payload:t}},n.showQrScanner=function(){return t=>{t(tt({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:v.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:t,smartTransactionFees:e}){return async n=>{const a=await Et(t,e.fees);try{return(await(0,_.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:a,signedCanceledTransactions:[],txParams:t}])).uuid}catch(t){if((0,A.logErrorWithMessage)(t),(0,A.isErrorWithMessage)(t)){const e=(0,A.getErrorMessage)(t);if(e.startsWith("Fetch error:")){const t=(0,b.parseSmartTransactionsError)(e);n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}}throw t}}},n.stopPollingForQuotes=function(){return async t=>{await(0,_.submitRequestToBackground)("stopPollingForQuotes"),await dt(t)}},n.submitPassword=O,n.submitQRHardwareCryptoAccount=async function(t){await(0,_.submitRequestToBackground)("submitQRHardwareCryptoAccount",[t])},n.submitQRHardwareCryptoHDKey=async function(t){await(0,_.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[t])},n.submitQRHardwareSignature=async function(t,e){await(0,_.submitRequestToBackground)("submitQRHardwareSignature",[t,e])},n.syncInternalAccountsWithUserStorage=function(){return async()=>{try{return await(0,_.submitRequestToBackground)("syncInternalAccountsWithUserStorage")}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.throwTestBackgroundError=async function(t){await(0,_.submitRequestToBackground)("throwTestError",[t])},n.toggleAccountMenu=function(){return{type:v.TOGGLE_ACCOUNT_MENU}},n.toggleExternalServices=function(t){return async e=>{a.default.debug("background.toggleExternalServices");try{await(0,_.submitRequestToBackground)("toggleExternalServices",[t]),await dt(e)}catch(t){e(st(t))}}},n.toggleNetworkMenu=function(t){return{type:v.TOGGLE_NETWORK_MENU,payload:t}},n.tokenBalancesStartPolling=async function(t){const e=await(0,_.submitRequestToBackground)("tokenBalancesStartPolling",[{chainId:t}]);return await yt(e),e},n.tokenBalancesStopPollingByPollingToken=async function(t){await(0,_.submitRequestToBackground)("tokenBalancesStopPollingByPollingToken",[t]),await kt(t)},n.tokenDetectionStartPolling=async function(t){const e=await(0,_.submitRequestToBackground)("tokenDetectionStartPolling",[{chainIds:t}]);return await yt(e),e},n.tokenDetectionStopPollingByPollingToken=async function(t){await(0,_.submitRequestToBackground)("tokenDetectionStopPollingByPollingToken",[t]),await kt(t)},n.tokenListStartPolling=async function(t){const e=await(0,_.submitRequestToBackground)("tokenListStartPolling",[{chainId:t}]);return await yt(e),e},n.tokenListStopPollingByPollingToken=async function(t){await(0,_.submitRequestToBackground)("tokenListStopPollingByPollingToken",[t]),await kt(t)},n.tokenRatesStartPolling=async function(t){const e=await(0,_.submitRequestToBackground)("tokenRatesStartPolling",[{chainId:t}]);return await yt(e),e},n.tokenRatesStopPollingByPollingToken=async function(t){await(0,_.submitRequestToBackground)("tokenRatesStopPollingByPollingToken",[t]),await kt(t)},n.trackInsightSnapUsage=function(t){return async()=>{await(0,_.submitRequestToBackground)("trackInsightSnapView",[t])}},n.trackMetaMetricsEvent=Tt,n.trackMetaMetricsPage=function(t,e){return(0,_.submitRequestToBackground)("trackMetaMetricsPage",[{...t,actionId:(0,_.generateActionId)()},e])},n.tryReverseResolveAddress=function(t){return()=>new Promise((e=>{(0,_.callBackgroundMethod)("tryReverseResolveAddress",[t],(t=>{t&&(0,A.logErrorWithMessage)(t),e()}))}))},n.tryUnlockMetamask=function(t){return e=>(e(nt()),e(K()),a.default.debug("background.submitPassword"),new Promise(((e,n)=>{(0,_.callBackgroundMethod)("submitPassword",[t],(t=>{t?n(t):e()}))})).then((()=>(e(V()),dt(e)))).then((()=>{e(rt())})).catch((t=>(e(j((0,A.getErrorMessage)(t))),e(rt()),Promise.reject(t)))))},n.unMarkPasswordForgotten=G,n.unlockAndGetSeedPhrase=function(t){return async e=>{e(nt());try{await O(t);const n=await W(t);return await dt(e),n}catch(t){throw e(st(t)),(0,A.isErrorWithMessage)(t)?new Error((0,A.getErrorMessage)(t)):t}finally{e(rt())}}},n.unlockFailed=j,n.unlockHardwareWalletAccounts=function(t,e,n,r){return a.default.debug("background.unlockHardwareWalletAccount",t,e,n,r),async a=>{a(nt());for(const o of t)try{await(0,_.submitRequestToBackground)("unlockHardwareWalletAccount",[o,e,n,r])}catch(t){throw(0,A.logErrorWithMessage)(t),a(st(t)),a(rt()),t}return a(rt()),undefined}},n.unlockInProgress=K,n.unlockSucceeded=V,n.updateAccountsList=function(t){return async()=>{await(0,_.submitRequestToBackground)("updateAccountsList",[t])}},n.updateAndApproveTx=function(t,e,n){return(a,r)=>{!e&&a(nt(n));const o=()=>Boolean(r().send.stage!==m.SEND_STAGES.INACTIVE);return new Promise(((e,n)=>{const r=(0,_.generateActionId)();(0,_.callBackgroundMethod)("resolvePendingApproval",[String(t.id),{txMeta:t,actionId:r},{waitForResult:!0}],(r=>{if(a(H(t.id,t.txParams)),o()||a((0,m.resetSendState)()),r)return a(C()),(0,A.logErrorWithMessage)(r),void n(r);e(t)}))})).then((()=>dt(a))).then((()=>(o()||a((0,m.resetSendState)()),a(U(t.id)),a(rt()),a(L("")),a(et()),t))).catch((t=>(a(rt()),Promise.reject(t))))}},n.updateCurrentLocale=lt,n.updateCustomNonce=L,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:t,maxFeePerGas:e,maxPriorityFeePerGas:n}){return async a=>{await Promise.all([(0,_.submitRequestToBackground)("setSwapsTxGasLimit",[t]),(0,_.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[e]),(0,_.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[n])]),await dt(a)}},n.updateDataDeletionTaskStatus=async function(){return await(0,_.submitRequestToBackground)("updateDataDeletionTaskStatus")},n.updateEditableParams=function(t,e){return async n=>{let a;try{a=await(0,_.submitRequestToBackground)("updateEditableParams",[t,e])}catch(t){throw(0,A.logErrorWithMessage)(t),t}return await dt(n),a}},n.updateEventFragment=function(t,e){return(0,_.submitRequestToBackground)("updateEventFragment",[t,e])},n.updateHiddenAccountsList=function(t){return async()=>{await(0,_.submitRequestToBackground)("updateHiddenAccountsList",[t])}},n.updateInterfaceState=function(t,e){return async n=>{await(0,_.submitRequestToBackground)("updateInterfaceState",[t,e]),await dt(n)}},n.updateMetamaskState=Q,n.updateNetwork=function(t,e={}){return async n=>{a.default.debug("background.updateNetwork",t);try{return await(0,_.submitRequestToBackground)("updateNetwork",[t.chainId,t,e])}catch(t){(0,A.logErrorWithMessage)(t),n(st("Had a problem updading networks!"))}return undefined}},n.updateNetworksList=function(t){return async()=>{await(0,_.submitRequestToBackground)("updateNetworksList",[t])}},n.updateNftDropDownState=function(t){return async e=>{await(0,_.submitRequestToBackground)("updateNftDropDownState",[t]),await dt(e)}},n.updateOnChainTriggersByAccount=function(t){return async()=>{try{await(0,_.submitRequestToBackground)("updateOnChainTriggersByAccount",[t])}catch(t){throw(0,A.logErrorWithMessage)(t),t}}},n.updatePreviousGasParams=function(t,e){return async()=>{let n;try{n=await(0,_.submitRequestToBackground)("updatePreviousGasParams",[t,e])}catch(t){throw(0,A.logErrorWithMessage)(t),t}return n}},n.updateProposedNames=function(t){return async()=>await(0,_.submitRequestToBackground)("updateProposedNames",[t])},n.updateSmartTransaction=function(t,e){return async n=>{try{await(0,_.submitRequestToBackground)("updateSmartTransaction",[{uuid:t,...e}])}catch(t){if((0,A.logErrorWithMessage)(t),(0,A.isErrorWithMessage)(t)){const e=(0,A.getErrorMessage)(t);if(e.startsWith("Fetch error:")){const t=(0,b.parseSmartTransactionsError)(e);n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}}throw t}}},n.updateSnap=function(t,e){return async(n,a)=>{await(0,_.submitRequestToBackground)("updateSnap",[t,e]),await dt(n);const r=a(),o=(0,f.getFirstSnapInstallOrUpdateRequest)(r);return null==o?void 0:o.metadata.id}},n.updateSwapsUserFeeLevel=function(t){return async e=>{await(0,_.submitRequestToBackground)("setSwapsUserFeeLevel",[t]),await dt(e)}},n.updateTokenType=async function(t){try{return await(0,_.submitRequestToBackground)("updateTokenType",[t])}catch(t){(0,A.logErrorWithMessage)(t)}return undefined},n.updateTransaction=function(t,e){return async n=>{!e&&n(nt());try{await(0,_.submitRequestToBackground)("updateTransaction",[t])}catch(e){throw n(H(t.id,t.txParams)),n(rt()),n(C()),(0,A.logErrorWithMessage)(e),e}try{return n(H(t.id,t.txParams)),await dt(n),n(X({id:t.id})),t}finally{n(rt())}}},n.updateTransactionGasFees=function(t,e){return async()=>{let n;try{n=await(0,_.submitRequestToBackground)("updateTransactionGasFees",[t,e])}catch(t){throw(0,A.logErrorWithMessage)(t),t}return n}},n.updateTransactionParams=H,n.updateTransactionSendFlowHistory=function(t,e,n){return async()=>{let a;try{a=await(0,_.submitRequestToBackground)("updateTransactionSendFlowHistory",[t,e,n])}catch(t){throw(0,A.logErrorWithMessage)(t),t}return a}},n.updateViewedNotifications=function(t){return(0,_.submitRequestToBackground)("updateViewedNotifications",[t])},n.verifyPassword=F;var a=q(t("loglevel")),r=t("@sentry/browser"),o=t("lodash"),s=t("@metamask/rpc-errors"),i=t("@metamask/keyring-controller"),u=t("@metamask/profile-sync-controller/sdk"),c=t("@metamask/snaps-utils"),d=q(t("../../shared/lib/switch-direction")),l=t("../../shared/constants/app"),g=t("../../app/scripts/lib/util"),f=t("../selectors"),w=t("../../shared/modules/selectors/networks"),m=t("../ducks/send"),h=t("../ducks/alerts/unconnected-account"),y=t("../ducks/metamask/metamask"),k=t("../../shared/modules/hexstring-utils"),p=t("../../shared/constants/hardware-wallets"),T=t("../../shared/constants/metametrics"),b=t("../pages/swaps/swaps.util"),E=t("../../shared/modules/string-utils"),R=t("../../shared/modules/selectors"),S=t("../../shared/modules/i18n"),B=t("../../shared/modules/conversion.utils"),A=t("../../shared/modules/error"),M=t("../../shared/lib/four-byte"),P=t("../../shared/constants/permissions"),N=t("../helpers/constants/notifications"),v=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=I(e);if(n&&n.has(t))return n.get(t);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&{}.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=t[o]}return a.default=t,n&&n.set(t,a),a}(t("./actionConstants")),_=t("./background-connection");function I(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(I=function(t){return t?n:e})(t)}function q(t){return t&&t.__esModule?t:{default:t}}function C(){return{type:v.GO_HOME}}function O(t){return new Promise(((e,n)=>{(0,_.callBackgroundMethod)("submitPassword",[t],(t=>{t?n(t):e()}))}))}function D(t){return new Promise(((e,n)=>{(0,_.callBackgroundMethod)("createNewVaultAndKeychain",[t],(t=>{t?n(t):e(!0)}))}))}function F(t){return new Promise(((e,n)=>{(0,_.callBackgroundMethod)("verifyPassword",[t],(t=>{t?n(t):e(!0)}))}))}async function W(t){const n=await(0,_.submitRequestToBackground)("getSeedPhrase",[t]);return e.from(n).toString("utf8")}function L(t){return{type:v.UPDATE_CUSTOM_NONCE,value:t}}function U(t){return e=>{e({type:v.COMPLETED_TX,value:{id:t}})}}function H(t,e){return{type:v.UPDATE_TRANSACTION_PARAMS,id:t,value:e}}async function x(t){return(0,_.submitRequestToBackground)("handleSnapRequest",[t])}function G(){return t=>new Promise((t=>{(0,_.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{t()}))})).then((()=>dt(t)))}function K(){return{type:v.UNLOCK_IN_PROGRESS}}function j(t){return{type:v.UNLOCK_FAILED,value:t}}function V(t){return{type:v.UNLOCK_SUCCEEDED,value:t}}function Q(t){return(e,n)=>{var a,r;const s=n(),i=(0,w.getProviderConfig)(s),{metamask:u}=s;if(null==t||!t.length)return u;const c=function(t,e){const n={...t};for(const t of e){const{op:e,path:a,value:r}=t;if("replace"!==e)throw new Error(`Unsupported patch operation: ${e}`);n[a[0]]=r}return n}(u,t),{currentLocale:d}=u,l=(0,f.getSelectedInternalAccount)(s),g=null==l?void 0:l.address,{currentLocale:h}=c,y=(0,w.getProviderConfig)({metamask:c}),k=(0,f.getSelectedInternalAccount)({metamask:c}),p=null==k?void 0:k.address;d&&h&&d!==h&&e(lt(h)),g!==p&&e({type:v.SELECTED_ADDRESS_CHANGED});const T=(null===(a=c.addressBook)||void 0===a?void 0:a[null==y?void 0:y.chainId])??{},b=(null===(r=u.addressBook)||void 0===r?void 0:r[null==i?void 0:i.chainId])??{},E=(0,f.getMetaMaskAccounts)({metamask:c}),R=(0,f.getMetaMaskAccounts)({metamask:u}),S=E[p],B=E[g];return Object.entries(R).forEach((([t,n])=>{(0,o.isEqual)(n,E[t])||e({type:v.ACCOUNT_CHANGED,payload:{account:E[t]}})})),!1===(0,o.isEqual)(B,S)&&e({type:v.SELECTED_ACCOUNT_CHANGED,payload:{account:S}}),!1===(0,o.isEqual)(b,T)&&e({type:v.ADDRESS_BOOK_UPDATED,payload:{addressBook:T}}),!1===(0,o.isEqual)(u.gasFeeEstimates,c.gasFeeEstimates)&&e({type:v.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:c.gasFeeEstimates,gasEstimateType:c.gasEstimateType}}),e({type:v.UPDATE_METAMASK_STATE,value:c}),i.chainId!==y.chainId&&(e({type:v.CHAIN_CHANGED,payload:y.chainId}),e((0,m.initializeSendState)({chainHasChanged:!0}))),c}}const $=()=>new Promise(((t,e)=>{(0,_.callBackgroundMethod)("setLocked",[],(n=>{n?e(n):t()}))}));async function z(t){a.default.debug("background.setSelectedInternalAccount"),await(0,_.submitRequestToBackground)("setSelectedInternalAccount",[t])}function Y(){return{type:v.SHOW_ACCOUNTS_PAGE}}function X({id:t}={}){return{type:v.SHOW_CONF_TX_PAGE,id:t}}function Z(t){return async e=>{await(0,_.submitRequestToBackground)("setSwitchedNetworkDetails",[t]),await dt(e)}}async function J(t){a.default.debug(`background.setActiveNetworkConfigurationId: ${t}`),await(0,_.submitRequestToBackground)("setActiveNetworkConfigurationId",[t])}function tt(t){return{type:v.MODAL_OPEN,payload:t}}function et(){return(t,e)=>{const n=e(),a=(0,f.getApprovalFlows)(n);(0,g.getEnvironmentType)()!==l.ENVIRONMENT_TYPE_NOTIFICATION||(0,f.hasTransactionPendingApprovals)(n)||(0,f.getIsSigningQRHardwareTransaction)(n)||0!==a.length||pt()}}function nt(t){return{type:v.SHOW_LOADING,payload:t}}function at(){return{type:v.SHOW_NFT_STILL_FETCHING_INDICATION}}function rt(){return{type:v.HIDE_LOADING}}function ot(){return{type:v.HIDE_NFT_STILL_FETCHING_INDICATION}}function st(t){var e;return(0,A.isErrorWithMessage)(t)?{type:v.DISPLAY_WARNING,payload:(null==t||null===(e=t.cause)||void 0===e?void 0:e.message)||t.message}:"string"==typeof t?{type:v.DISPLAY_WARNING,payload:t}:{type:v.DISPLAY_WARNING,payload:`${t}`}}function it(t,e,n=!0){return a=>(n&&a(nt()),new Promise(((r,o)=>{(0,_.callBackgroundMethod)("setPreference",[t,e],((t,e)=>{if(n&&a(rt()),t)return a(st(t)),void o(t);r(e)}))})))}function ut(){return{type:v.COMPLETE_ONBOARDING}}function ct(){return{type:v.RESET_ONBOARDING}}async function dt(t){let e;try{e=await(0,_.submitRequestToBackground)("getStatePatches")}catch(e){throw t(st(e)),e}return t(Q(e))}function lt(t){return async e=>{e(nt());try{await(0,S.loadRelativeTimeFormatLocaleData)(t);const n=await(0,S.fetchLocale)(t),a=await(0,_.submitRequestToBackground)("setCurrentLocale",[t]);(0,d.default)(a),e(gt(t,n))}catch(t){return void e(st(t))}finally{e(rt())}}}function gt(t,e){return{type:v.SET_CURRENT_LOCALE,payload:{locale:t,messages:e}}}function ft(t){return e=>(a.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,a)=>{(0,_.callBackgroundMethod)("setSeedPhraseBackedUp",[t],(t=>{if(t)return e(st(t)),void a(t);dt(e).then(n).catch(a)}))})))}function wt(t){return{type:v.SET_NEXT_NONCE,payload:t}}function mt(t){return{type:v.SET_REQUEST_ACCOUNT_TABS,payload:t}}function ht(t){return{type:v.SET_OPEN_METAMASK_TAB_IDS,payload:t}}async function yt(t){return(0,_.submitRequestToBackground)("addPollingTokenToAppState",[t,l.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,g.getEnvironmentType)()]])}async function kt(t){return(0,_.submitRequestToBackground)("removePollingTokenFromAppState",[t,l.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,g.getEnvironmentType)()]])}async function pt(){await(0,_.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}function Tt(t,e){return(0,_.submitRequestToBackground)("trackMetaMetricsEvent",[{...t,actionId:(0,_.generateActionId)()},e])}async function bt(t){await(0,_.submitRequestToBackground)("setUnconnectedAccountAlertShown",[t])}const Et=async(t,e,n)=>{const a=e.map((e=>{const a={...t,maxFeePerGas:(0,B.decimalToHex)(e.maxFeePerGas),maxPriorityFeePerGas:(0,B.decimalToHex)(e.maxPriorityFeePerGas),gas:n?(0,B.decimalToHex)(21e3):t.gas,value:t.value};return n&&(a.to=a.from,a.data="0x"),a}));return await(0,_.submitRequestToBackground)("approveTransactionsWithSameNonce",[a])}}).call(this)}).call(this,t("buffer").Buffer)}}},{package:"$root$",file:"ui/store/actions.ts"}],[7001,{pify:4517},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.generateActionId=n.callBackgroundMethod=void 0,n.setBackgroundConnection=async function(t){o=t,s=(0,r.default)(o)},n.submitRequestToBackground=function(t,e){var n;return null===(n=s)||void 0===n?void 0:n[t](...e??[])};var a,r=(a=t("pify"))&&a.__esModule?a:{default:a};let o=null,s=null;n.generateActionId=()=>Date.now()+Math.random();n.callBackgroundMethod=(t,e,n)=>{var a;null===(a=o)||void 0===a||a[t](...e,n)}}}},{package:"$root$",file:"ui/store/background-connection.ts"}],[78,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){if(t.includes(a)){const e=t.slice(a.length);return e.slice(e.indexOf(r)+r.length)}return t};const a="Error: [ethjs-rpc] rpc error with payload ",r="Error: "}}},{package:"$root$",file:"app/scripts/lib/extractEthjsErrorMessage.js"}],[79,{"../../_locales/index.json":3,"webextension-polyfill":5225},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(){let t;try{t=await a.default.i18n.getAcceptLanguages()}catch(e){t=[]}t||(t=[]);let e=t.map((t=>t.toLowerCase().replace("_","-"))).find((t=>s[t]!==undefined||s[t.split("-")[0]]!==undefined));e!==undefined&&s[e]===undefined&&(e=e.split("-")[0]);return s[e]||"en"};var a=o(t("webextension-polyfill")),r=o(t("../../_locales/index.json"));function o(t){return t&&t.__esModule?t:{default:t}}const s={zh:"zh_CN"};r.default.forEach((t=>{t&&t.code&&(s[t.code.toLowerCase().replace("_","-")]=t.code)}))}}},{package:"$root$",file:"app/scripts/lib/get-first-preferred-lang-code.js"}],[82,{"../../../shared/modules/browser-runtime.utils":5297,"@sentry/browser":2871,loglevel:4386,"webextension-polyfill":5225},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(t("webextension-polyfill")),r=i(t("loglevel")),o=t("@sentry/browser"),s=t("../../../shared/modules/browser-runtime.utils");function i(t){return t&&t.__esModule?t:{default:t}}n.default=class{constructor(){this.isSupported=Boolean(a.default.storage.local),this.isSupported||r.default.error("Storage local API not available."),this.dataPersistenceFailing=!1,this.mostRecentRetrievedState=null,this.isExtensionInitialized=!1}setMetadata(t){this.metadata=t}async set(t){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!t)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');try{await this._set({data:t,meta:this.metadata}),this.dataPersistenceFailing&&(this.dataPersistenceFailing=!1)}catch(t){this.dataPersistenceFailing||(this.dataPersistenceFailing=!0,(0,o.captureException)(t)),r.default.error("error setting state in local store:",t)}finally{this.isExtensionInitialized=!0}}async get(){if(!this.isSupported)return undefined;const t=await this._get();return e=t,0===Object.keys(e).length?(this.mostRecentRetrievedState=null,undefined):(this.isExtensionInitialized||(this.mostRecentRetrievedState=t),t);var e}_get(){const{local:t}=a.default.storage;return new Promise(((e,n)=>{t.get(null).then((t=>{const a=(0,s.checkForLastError)();a?n(a):e(t)}))}))}_set(t){const{local:e}=a.default.storage;return new Promise(((n,a)=>{e.set(t).then((()=>{const t=(0,s.checkForLastError)();t?a(t):n()}))}))}cleanUpMostRecentRetrievedState(){this.mostRecentRetrievedState&&(this.mostRecentRetrievedState=null)}}}}},{package:"$root$",file:"app/scripts/lib/local-store.js"}],[83,{"webextension-polyfill":5225},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getManifestFlags=function(){if("undefined"===undefined||!r.default.runtime.getManifest)return{};return r.default.runtime.getManifest()._flags||{}};var a,r=(a=t("webextension-polyfill"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"app/scripts/lib/manifestFlags.ts"}],[87,{"../../../../shared/modules/hexstring-utils":5307,"@metamask/eth-sig-util":1642,"@metamask/utils":2761},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEthAddress=s,n.normalizeAddress=function(t){return s(t)?(0,r.normalize)(t):t},n.normalizeSafeAddress=function(t){return s(t)?(0,o.toChecksumHexAddress)(t):t};var a=t("@metamask/utils"),r=t("@metamask/eth-sig-util"),o=t("../../../../shared/modules/hexstring-utils");function s(t){return(0,a.isValidHexAddress)(t)}}}},{package:"$root$",file:"app/scripts/lib/multichain/address.ts"}],[88,{"../../../shared/modules/fetch-with-timeout":5305,loglevel:4386},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(t("loglevel"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const s=(0,r(t("../../../shared/modules/fetch-with-timeout")).default)();n.default=class{constructor(){o(this,"isSupported",!0),this._initialized=!1,this._initializing=this._init(),this._state=undefined,this.mostRecentRetrievedState=null}async _init(){try{const t=await s("http://localhost:12345/state.json");t.ok&&(this._state=await t.json())}catch(t){a.default.debug(`Error loading network state: '${t.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this.mostRecentRetrievedState||(this.mostRecentRetrievedState=this._state),this._state}setMetadata(t){this.metadata=t}async set(t){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!t)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');this._initialized||await this._initializing,this._state={data:t,meta:this._metadata}}cleanUpMostRecentRetrievedState(){this.mostRecentRetrievedState&&(this.mostRecentRetrievedState=null)}}}}},{package:"$root$",file:"app/scripts/lib/network-store.js"}]],[],{});