LavaPack.loadBundle([[1339,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.errorValues=r.errorCodes=void 0,r.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},r.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/rpc-errors/dist/error-constants.cjs"}],[134,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:4,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=4;try{if("rpc"!==t.data.config.provider.type)return Promise.resolve(t);switch(t.data.config.provider.rpcTarget){case"https://testrpc.metamask.io/":t.data.config.provider={type:"testnet"};break;case"https://rpc.metamask.io/":t.data.config.provider={type:"mainnet"}}}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/004.js"}],[1340,{"./classes.cjs":1338,"./error-constants.cjs":1339,"./utils.cjs":1342},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerErrors=r.rpcErrors=void 0;const n=e("./classes.cjs"),s=e("./error-constants.cjs"),i=e("./utils.cjs");function a(e,t){const[r,s]=c(t);return new n.JsonRpcError(e,r??(0,i.getMessageFromCode)(e),s)}function o(e,t){const[r,s]=c(t);return new n.EthereumProviderError(e,r??(0,i.getMessageFromCode)(e),s)}function c(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??undefined,r]}}return[]}r.rpcErrors={parse:e=>a(s.errorCodes.rpc.parse,e),invalidRequest:e=>a(s.errorCodes.rpc.invalidRequest,e),invalidParams:e=>a(s.errorCodes.rpc.invalidParams,e),methodNotFound:e=>a(s.errorCodes.rpc.methodNotFound,e),internal:e=>a(s.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return a(t,e)},invalidInput:e=>a(s.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>a(s.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>a(s.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>a(s.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>a(s.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>a(s.errorCodes.rpc.limitExceeded,e)},r.providerErrors={userRejectedRequest:e=>o(s.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>o(s.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>o(s.errorCodes.provider.unsupportedMethod,e),disconnected:e=>o(s.errorCodes.provider.disconnected,e),chainDisconnected:e=>o(s.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:s}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(t,r,s)}}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/rpc-errors/dist/errors.cjs"}],[1341,{"./classes.cjs":1338,"./error-constants.cjs":1339,"./errors.cjs":1340,"./utils.cjs":1342},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.errorCodes=r.providerErrors=r.rpcErrors=r.getMessageFromCode=r.serializeError=r.serializeCause=r.dataHasCause=r.EthereumProviderError=r.JsonRpcError=void 0;var n=e("./classes.cjs");Object.defineProperty(r,"JsonRpcError",{enumerable:!0,get:function(){return n.JsonRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return n.EthereumProviderError}});var s=e("./utils.cjs");Object.defineProperty(r,"dataHasCause",{enumerable:!0,get:function(){return s.dataHasCause}}),Object.defineProperty(r,"serializeCause",{enumerable:!0,get:function(){return s.serializeCause}}),Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return s.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return s.getMessageFromCode}});var i=e("./errors.cjs");Object.defineProperty(r,"rpcErrors",{enumerable:!0,get:function(){return i.rpcErrors}}),Object.defineProperty(r,"providerErrors",{enumerable:!0,get:function(){return i.providerErrors}});var a=e("./error-constants.cjs");Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return a.errorCodes}})}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/rpc-errors/dist/index.cjs"}],[1342,{"./error-constants.cjs":1339,"@metamask/utils":1353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.dataHasCause=r.serializeCause=r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=e("@metamask/utils"),s=e("./error-constants.cjs"),i=s.errorCodes.rpc.internal,a={code:i,message:o(i)};function o(e,t="Unspecified error message. This is a bug, please report it."){if(c(e)){const t=e.toString();if((0,n.hasProperty)(s.errorValues,t))return s.errorValues[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return t}function c(e){return Number.isInteger(e)}function u(e){return Array.isArray(e)?e.map((e=>(0,n.isValidJson)(e)?e:(0,n.isObject)(e)?l(e):null)):(0,n.isObject)(e)?l(e):(0,n.isValidJson)(e)?e:null}function l(e){return Object.getOwnPropertyNames(e).reduce(((t,r)=>{const s=e[r];return(0,n.isValidJson)(s)&&(t[r]=s),t}),{})}r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",r.getMessageFromCode=o,r.isValidCode=c,r.serializeError=function(e,{fallbackError:t=a,shouldIncludeStack:r=!0}={}){if(!(0,n.isJsonRpcError)(t))throw new Error("Must provide fallback error with integer number code and string message.");const s=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if((0,n.isJsonRpcError)(e))return e;const r=u(e),s={...t,data:{cause:r}};return s}(e,t);return r||delete s.stack,s},r.serializeCause=u,r.dataHasCause=function(e){return(0,n.isObject)(e)&&(0,n.hasProperty)(e,"cause")&&(0,n.isObject)(e.cause)}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/rpc-errors/dist/utils.cjs"}],[1343,{"./errors.cjs":1351,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/assert.cjs"}],[1344,{"./assert.cjs":1343,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/base64.cjs"}],[1345,{"./assert.cjs":1343,"./hex.cjs":1352,"@scure/base":2935,buffer:3661},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function p(e){d(e);const t=h(e);return BigInt(t)}function f(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<o?a:c),u=s-(s<o?a:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?f(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=p,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=p(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=f,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/bytes.cjs"}],[1346,{"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAssetId=r.isCaipAssetType=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAssetIdStruct=r.CaipAssetTypeStruct=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ASSET_ID_REGEX=r.CAIP_ASSET_TYPE_REGEX=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),r.CaipAssetTypeStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_TYPE_REGEX),r.CaipAssetIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.isCaipAssetType=function(e){return(0,n.is)(e,r.CaipAssetTypeStruct)},r.isCaipAssetId=function(e){return(0,n.is)(e,r.CaipAssetIdStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1347,{"./base64.cjs":1344,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/checksum.cjs"}],[1348,{"./assert.cjs":1343,"./bytes.cjs":1345,"./hex.cjs":1352,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),u=(0,n.coerce)((0,n.bigint)(),o,BigInt),l=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/coercers.cjs"}],[1349,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/collections.cjs"}],[135,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:5,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=5;try{const e=function(e){const{config:t}=e,r={...e,KeyringController:{vault:e.vault,selectedAccount:t.selectedAccount,walletNicknames:e.walletNicknames}};return delete r.vault,delete r.walletNicknames,delete r.config.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #5${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/005.js"}],[1350,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1351,{"./misc.cjs":1357,"pony-cause":4620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/errors.cjs"}],[1352,{"./assert.cjs":1343,"./bytes.cjs":1345,"@metamask/superstruct":2715,"@noble/hashes/sha3":2916},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/hex.cjs"}],[1353,{"./assert.cjs":1343,"./base64.cjs":1344,"./bytes.cjs":1345,"./caip-types.cjs":1346,"./checksum.cjs":1347,"./coercers.cjs":1348,"./collections.cjs":1349,"./encryption-types.cjs":1350,"./errors.cjs":1351,"./hex.cjs":1352,"./json.cjs":1354,"./keyring.cjs":1355,"./logging.cjs":1356,"./misc.cjs":1357,"./number.cjs":1358,"./opaque.cjs":1359,"./promise.cjs":1360,"./time.cjs":1361,"./transaction-types.cjs":1362,"./versions.cjs":1363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/index.cjs"}],[1354,{"./assert.cjs":1343,"./misc.cjs":1357,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=o;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(r.JsonStruct),stack:o((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/json.cjs"}],[1355,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/keyring.cjs"}],[1356,{debug:3806},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/logging.cjs"}],[1357,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/misc.cjs"}],[1358,{"./assert.cjs":1343,"./hex.cjs":1352},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/number.cjs"}],[1359,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/opaque.cjs"}],[136,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:6,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=6;try{const e=function(e){const t=e.KeyringController,r={...e,PreferencesController:{selectedAddress:t.selectedAccount}};return delete r.KeyringController.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #6${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/006.js"}],[1360,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/promise.cjs"}],[1361,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/time.cjs"}],[1362,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1363,{"./assert.cjs":1343,"@metamask/superstruct":2715,semver:4949},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/eth-json-rpc-filters>@metamask/json-rpc-engine>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/@metamask/utils/dist/versions.cjs"}],[1364,{"./Semaphore":1365,tslib:5020},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("tslib"),s=e("./Semaphore"),i=function(){function e(){this._semaphore=new s.default(1)}return e.prototype.acquire=function(){return n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(t){switch(t.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=t.sent(),[2,e[1]]}}))}))},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive((function(){return e()}))},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e}();r.default=i}}},{package:"@metamask/eth-json-rpc-filters>async-mutex",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/async-mutex/lib/Mutex.js"}],[1365,{tslib:5020},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("tslib"),s=function(){function e(e){if(this._maxConcurrency=e,this._queue=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return e.prototype.acquire=function(){var e=this,t=this.isLocked(),r=new Promise((function(t){return e._queue.push(t)}));return t||this._dispatch(),r},e.prototype.runExclusive=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r,s;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,this.acquire()];case 1:t=n.sent(),r=t[0],s=t[1],n.label=2;case 2:return n.trys.push([2,,4,5]),[4,e(r)];case 3:return[2,n.sent()];case 4:return s(),[7];case 5:return[2]}}))}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=undefined,e()}},e.prototype._dispatch=function(){var e=this,t=this._queue.shift();if(t){var r=!1;this._currentReleaser=function(){r||(r=!0,e._value++,e._dispatch())},t([this._value--,this._currentReleaser])}},e}();r.default=s}}},{package:"@metamask/eth-json-rpc-filters>async-mutex",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/async-mutex/lib/Semaphore.js"}],[1366,{"./Mutex":1364,"./Semaphore":1365,"./withTimeout":1367},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withTimeout=r.Semaphore=r.Mutex=void 0;var n=e("./Mutex");Object.defineProperty(r,"Mutex",{enumerable:!0,get:function(){return n.default}});var s=e("./Semaphore");Object.defineProperty(r,"Semaphore",{enumerable:!0,get:function(){return s.default}});var i=e("./withTimeout");Object.defineProperty(r,"withTimeout",{enumerable:!0,get:function(){return i.withTimeout}})}}},{package:"@metamask/eth-json-rpc-filters>async-mutex",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/async-mutex/lib/index.js"}],[1367,{tslib:5020},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withTimeout=void 0;var n=e("tslib");r.withTimeout=function(e,t,r){var s=this;return void 0===r&&(r=new Error("timeout")),{acquire:function(){return new Promise((function(i,a){return n.__awaiter(s,void 0,void 0,(function(){var s,o;return n.__generator(this,(function(n){switch(n.label){case 0:return s=!1,setTimeout((function(){s=!0,a(r)}),t),[4,e.acquire()];case 1:return o=n.sent(),s?(Array.isArray(o)?o[1]:o)():i(o),[2]}}))}))}))},runExclusive:function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r;return n.__generator(this,(function(n){switch(n.label){case 0:t=function(){return undefined},n.label=1;case 1:return n.trys.push([1,,7,8]),[4,this.acquire()];case 2:return r=n.sent(),Array.isArray(r)?(t=r[1],[4,e(r[0])]):[3,4];case 3:return[2,n.sent()];case 4:return t=r,[4,e()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:return t(),[7];case 8:return[2]}}))}))},release:function(){e.release()},isLocked:function(){return e.isLocked()}}}}}},{package:"@metamask/eth-json-rpc-filters>async-mutex",file:"node_modules/@metamask/eth-json-rpc-filters/node_modules/async-mutex/lib/withTimeout.js"}],[1368,{"./getBlocksForRange.js":1305,"./hexUtils.js":1306,"./index.js":1307,"@metamask/json-rpc-engine":1315,"@metamask/safe-event-emitter":2182},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/safe-event-emitter").default,{createAsyncMiddleware:s,createScaffoldMiddleware:i}=e("@metamask/json-rpc-engine"),a=e("./index.js"),{unsafeRandomBytes:o,incrementHexInt:c}=e("./hexUtils.js"),u=e("./getBlocksForRange.js");function l(e){return null===e||e===undefined?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}t.exports=function({blockTracker:e,provider:t}){const r={},d=a({blockTracker:e,provider:t});let h=!1;const p=new n,f=i({eth_subscribe:s((async function(n,s){if(h)throw new Error("SubscriptionManager - attempting to use after destroying");const i=n.params[0],a=o(16);let p;switch(i){case"newHeads":p=f({subId:a});break;case"logs":const e=n.params[1];p=g({subId:a,filter:await d.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${i}"`)}return r[a]=p,void(s.result=a);function f({subId:r}){const n={type:i,destroy:async()=>{e.removeListener("sync",n.update)},update:async({oldBlock:e,newBlock:n})=>{const s=n,i=c(e);(await u({provider:t,fromBlock:i,toBlock:s})).map(l).filter((e=>null!==e)).forEach((e=>{m(r,e)}))}};return e.on("sync",n.update),n}function g({subId:e,filter:t}){t.on("update",(t=>m(e,t)));return{type:i,destroy:async()=>await d.uninstallFilter(t.idHex)}}})),eth_unsubscribe:s((async function(e,t){if(h)throw new Error("SubscriptionManager - attempting to use after destroying");const n=e.params[0],s=r[n];if(!s)return void(t.result=!1);delete r[n],await s.destroy(),t.result=!0}))});return f.destroy=function(){p.removeAllListeners();for(const e in r)r[e].destroy(),delete r[e];h=!0},{events:p,middleware:f};function m(e,t){p.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/subscriptionManager.js"}],[1369,{"./base-filter":1303,"./getBlocksForRange":1305,"./hexUtils":1306},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:i}=e("./hexUtils");t.exports=class extends n{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,r=i(e),n=await s({provider:this.provider,fromBlock:r,toBlock:t}),a=[];for(const e of n)a.push(...e.transactions);this.addResults(a)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/tx-filter.js"}],[137,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:7,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=7;try{const e=function(e){const t={...e,TransactionManager:{transactions:e.transactions||[],gasMultiplier:e.gasMultiplier||1}};return delete t.transactions,delete t.gasMultiplier,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #7${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/007.js"}],[138,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:8,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=8;try{const e=function(e){const t={...e,NoticeController:{noticesList:e.noticesList||[]}};return delete t.noticesList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #8${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/008.js"}],[139,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:9,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=9;try{const e=function(e){const t=(0,n.merge)({},e,{CurrencyController:{currentCurrency:e.currentFiat||e.fiatCurrency||"USD",conversionRate:e.conversionRate,conversionDate:e.conversionDate}});return delete t.currentFiat,delete t.fiatCurrency,delete t.conversionRate,delete t.conversionDate,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #9${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/009.js"}],[14,{"../../../../ui/pages/bridge/bridge.util":6245,"../../../../ui/pages/swaps/swaps.util":6805,"./constants":15,"@metamask/base-controller":1192},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/base-controller"),s=e("../../../../ui/pages/bridge/bridge.util"),i=e("../../../../ui/pages/swaps/swaps.util"),a=e("./constants");function o(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,r)}const l={bridgeState:{persist:!1,anonymous:!1}};var d=new WeakMap,h=new WeakMap;class p extends n.BaseController{constructor({messenger:e}){super({name:a.BRIDGE_CONTROLLER_NAME,metadata:l,messenger:e,state:{bridgeState:a.DEFAULT_BRIDGE_CONTROLLER_STATE}}),c(this,"resetState",(()=>{this.update((e=>{e.bridgeState={...a.DEFAULT_BRIDGE_CONTROLLER_STATE}}))})),c(this,"setBridgeFeatureFlags",(async()=>{const{bridgeState:e}=this.state,t=await(0,s.fetchBridgeFeatureFlags)();this.update((r=>{r.bridgeState={...e,bridgeFeatureFlags:t}}))})),c(this,"selectSrcNetwork",(async e=>{await u(this,d).call(this,e,"srcTopAssets"),await u(this,h).call(this,e,"srcTokens")})),c(this,"selectDestNetwork",(async e=>{await u(this,d).call(this,e,"destTopAssets"),await u(this,h).call(this,e,"destTokens")})),o(this,d,{writable:!0,value:async(e,t)=>{const{bridgeState:r}=this.state,n=await(0,i.fetchTopAssetsList)(e);this.update((e=>{e.bridgeState={...r,[t]:n}}))}}),o(this,h,{writable:!0,value:async(e,t)=>{const{bridgeState:r}=this.state,n=await(0,s.fetchBridgeTokens)(e);this.update((e=>{e.bridgeState={...r,[t]:n}}))}}),this.messagingSystem.registerActionHandler(`${a.BRIDGE_CONTROLLER_NAME}:setBridgeFeatureFlags`,this.setBridgeFeatureFlags.bind(this)),this.messagingSystem.registerActionHandler(`${a.BRIDGE_CONTROLLER_NAME}:selectSrcNetwork`,this.selectSrcNetwork.bind(this)),this.messagingSystem.registerActionHandler(`${a.BRIDGE_CONTROLLER_NAME}:selectDestNetwork`,this.selectDestNetwork.bind(this))}}r.default=p}}},{package:"$root$",file:"app/scripts/controllers/bridge/bridge-controller.ts"}],[140,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:10,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=10;try{const e=function(e){const t=(0,n.merge)({},e,{ShapeShiftController:{shapeShiftTxList:e.shapeShiftTxList||[]}});return delete t.shapeShiftTxList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #10${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/010.js"}],[141,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:11,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=11;try{const e=function(e){const t=e;return delete t.TOSHash,delete t.isDisclaimerConfirmed,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #11${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/011.js"}],[142,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:12,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=12;try{const e=function(e){const t=e;return t.NoticeController.noticesList.forEach((e=>{e.read&&(e.body="")})),t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #12${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/012.js"}],[143,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:13,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=13;try{const e=function(e){const t=e,{config:r}=t;r&&r.provider&&"testnet"===r.provider.type&&(t.config.provider.type="ropsten");return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #13${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/013.js"}],[1433,{"./logging-utils":1440,"./utils/cache":1443,"@metamask/json-rpc-engine":1453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./logging-utils"),i=e("./utils/cache"),a=(0,s.createModuleLogger)(s.projectLogger,"block-cache"),o=[undefined,null,"<nil>"];class c{constructor(){this.cache={}}getBlockCache(e){const t=Number.parseInt(e,16);let r=this.cache[t];if(!r){const e={};this.cache[t]=e,r=e}return r}async get(e,t){const r=this.getBlockCache(t),n=(0,i.cacheIdentifierForRequest)(e,!0);return n?r[n]:undefined}async set(e,t,r){if(!this.canCacheResult(e,r))return;const n=(0,i.cacheIdentifierForRequest)(e,!0);if(!n)return;this.getBlockCache(t)[n]=r}canCacheRequest(e){if(!(0,i.canCache)(e.method))return!1;return"pending"!==(0,i.blockTagForRequest)(e)}canCacheResult(e,t){return!o.includes(t)&&!(e.method&&["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(e.method)&&(!t||!t.blockHash||"0x0000000000000000000000000000000000000000000000000000000000000000"===t.blockHash))}clearBefore(e){const t=Number.parseInt(e,16);Object.keys(this.cache).map(Number).filter((e=>e<t)).forEach((e=>delete this.cache[e]))}}r.createBlockCacheMiddleware=function({blockTracker:e}={}){if(!e)throw new Error("createBlockCacheMiddleware - No PollingBlockTracker specified");const t=new c,r={[i.CacheStrategy.Permanent]:t,[i.CacheStrategy.Block]:t,[i.CacheStrategy.Fork]:t,[i.CacheStrategy.Never]:undefined};return(0,n.createAsyncMiddleware)((async(n,s,o)=>{if(n.skipCache)return o();const c=(0,i.cacheTypeForMethod)(n.method),u=r[c];if(!u)return o();if(!u.canCacheRequest(n))return o();const l=(0,i.blockTagForRequest)(n),d=l&&"string"==typeof l?l:"latest";let h;if(a("blockTag = %o, req = %o",d,n),"earliest"===d)h="0x00";else if("latest"===d){a("Fetching latest block number to determine cache key");const r=await e.getLatestBlock();a("Clearing values stored under block numbers before %o",r),t.clearBefore(r),h=r}else h=d;const p=await u.get(n,h);return p===undefined?(a("No cache stored under block number %o, carrying request forward",h),await o(),a("Populating cache with",s),await u.set(n,h,s.result)):(a("Cache hit, reusing cache result stored under block number %o",h),s.result=p),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-cache.js"}],[1434,{"./utils/cache":1443,"@metamask/json-rpc-engine":1453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefRewriteMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./utils/cache");r.createBlockRefRewriteMiddleware=function({blockTracker:e}={}){if(!e)throw Error('BlockRefRewriteMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const i=(0,s.blockTagParamIndex)(t.method);if(i===undefined)return n();if("latest"!==(Array.isArray(t.params)&&t.params[i]?t.params[i]:"latest"))return n();const a=await e.getLatestBlock();return Array.isArray(t.params)&&(t.params[i]=a),n()}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref-rewrite.js"}],[1435,{"./logging-utils":1440,"./utils/cache":1443,"@metamask/json-rpc-engine":1453,"klona/full":4353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("klona/full"),i=e("./logging-utils"),a=e("./utils/cache"),o=(0,i.createModuleLogger)(i.projectLogger,"block-ref");r.createBlockRefMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('BlockRefMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('BlockRefMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(r,n,i)=>{var c;const u=(0,a.blockTagParamIndex)(r.method);if(u===undefined)return i();if("latest"!==(Array.isArray(r.params)&&null!==(c=r.params[u])&&void 0!==c?c:"latest"))return o('blockRef is not "latest", carrying request forward'),i();const l=await t.getLatestBlock();o(`blockRef is "latest", setting param ${u} to latest block ${l}`);const d=(0,s.klona)(r);return Array.isArray(d.params)&&(d.params[u]=l),o("Performing another request %o",d),n.result=await e.request(d),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref.js"}],[1436,{"./logging-utils":1440,"@metamask/json-rpc-engine":1453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockTrackerInspectorMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./logging-utils"),i=(0,s.createModuleLogger)(s.projectLogger,"block-tracker-inspector"),a=["eth_getTransactionByHash","eth_getTransactionReceipt"];function o(e){const{result:t}=e;return t&&"object"==typeof t&&(r=t,n="blockNumber",Object.hasOwnProperty.call(r,n))&&"string"==typeof t.blockNumber?t.blockNumber:undefined;var r,n}r.createBlockTrackerInspectorMiddleware=function({blockTracker:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(!a.includes(t.method))return n();await n();const s=o(r);if(!s)return undefined;i("res.result.blockNumber exists, proceeding. res = %o",r);return Number.parseInt(s,16)>Number.parseInt(e.getCurrentBlock(),16)&&(i("blockNumber from response is greater than current block number, refreshing current block number"),await e.checkForLatestBlock()),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-tracker-inspector.js"}],[1437,{"./utils/timeout":1446,"@metamask/json-rpc-engine":1453,"@metamask/rpc-errors":1458},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createFetchConfigFromReq=r.createFetchMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("@metamask/rpc-errors"),i=e("./utils/timeout"),a=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function o(e){switch(e.status){case 405:throw s.rpcErrors.methodNotFound();case 418:throw s.rpcErrors.internal({message:"Request is being rate limited."});case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",s.rpcErrors.internal({message:e})}()}}function c(e,t){if(200!==e.status)throw s.rpcErrors.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw s.rpcErrors.internal({data:t.error});return t.result}function u({btoa:e,req:t,rpcUrl:r,originHttpHeaderKey:n}){const s=new URL(r),i=function(e){let t="";t+=e.protocol,t+=`//${e.hostname}`,e.port&&(t+=`:${e.port}`);return t+=`${e.pathname}`,t+=`${e.search}`,t}(s),a={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},o=t.origin,c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)};if(s.username&&s.password){const t=e(`${s.username}:${s.password}`);c.headers.Authorization=`Basic ${t}`}return n&&o&&(c.headers[n]=o),{fetchUrl:i,fetchParams:c}}r.createFetchMiddleware=function({btoa:e,fetch:t,rpcUrl:r,originHttpHeaderKey:s}){return(0,n.createAsyncMiddleware)((async(n,l,d)=>{const{fetchUrl:h,fetchParams:p}=u({btoa:e,req:n,rpcUrl:r,originHttpHeaderKey:s});for(let e=0;e<5;e++){try{const e=await t(h,p);o(e);const r=await e.text();let n;try{n=JSON.parse(r)}catch(e){throw new Error(`FetchMiddleware - failed to parse response body: "${r}"`)}const s=c(e,n);return void(l.result=s)}catch(e){const t=e.toString();if(!a.some((e=>t.includes(e))))throw e}await(0,i.timeout)(1e3)}}))},r.createFetchConfigFromReq=u}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/fetch.js"}],[1438,{"./block-cache":1433,"./block-ref":1435,"./block-ref-rewrite":1434,"./block-tracker-inspector":1436,"./fetch":1437,"./inflight-cache":1439,"./providerAsMiddleware":1441,"./retryOnEmpty":1442,"./wallet":1447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./block-cache"),r),s(e("./block-ref-rewrite"),r),s(e("./block-ref"),r),s(e("./block-tracker-inspector"),r),s(e("./fetch"),r),s(e("./inflight-cache"),r),s(e("./providerAsMiddleware"),r),s(e("./retryOnEmpty"),r),s(e("./wallet"),r)}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/index.js"}],[1439,{"./logging-utils":1440,"./utils/cache":1443,"@metamask/json-rpc-engine":1453,"klona/full":4353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createInflightCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("klona/full"),i=e("./logging-utils"),a=e("./utils/cache"),o=(0,i.createModuleLogger)(i.projectLogger,"inflight-cache");r.createInflightCacheMiddleware=function(){const e={};return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(t.skipCache)return n();const i=(0,a.cacheIdentifierForRequest)(t);if(!i)return o("Request is not cacheable, proceeding. req = %o",t),n();let c=e[i];return c?(o("Running %i handler(s) for request %o",c.length,t),await async function(e,t){const{resolve:r,promise:n}=function(){let e;const t=new Promise((t=>{e=t}));return{resolve:e,promise:t}}();return t.push((t=>{e.result=(0,s.klona)(t.result),e.error=(0,s.klona)(t.error),r()})),n}(r,c),undefined):(c=[],e[i]=c,o("Carrying original request forward %o",t),await n(),delete e[i],o("Running %i collected handler(s) for request %o",c.length,t),function(e,t){setTimeout((()=>{t.forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}))}(r,c),undefined)}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/inflight-cache.js"}],[144,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:14,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=14;try{const e=function(e){const t=e;return t.NetworkController={},t.NetworkController.provider=t.config.provider,delete t.config.provider,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #14${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/014.js"}],[1440,{"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-json-rpc-middleware")}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/logging-utils.js"}],[1441,{"@metamask/json-rpc-engine":1453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ethersProviderAsMiddleware=r.providerAsMiddleware=void 0;const n=e("@metamask/json-rpc-engine");r.providerAsMiddleware=function(e){return(0,n.createAsyncMiddleware)((async(t,r)=>{r.result=await e.request(t)}))},r.ethersProviderAsMiddleware=function(e){return(t,r,n,s)=>{e.send(t,((e,t)=>e?s(e):(Object.assign(r,t),s())))}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/providerAsMiddleware.js"}],[1442,{"./logging-utils":1440,"./utils/cache":1443,"./utils/error":1444,"./utils/timeout":1446,"@metamask/json-rpc-engine":1453,"klona/full":4353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createRetryOnEmptyMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("klona/full"),i=e("./logging-utils"),a=e("./utils/cache"),o=e("./utils/error"),c=e("./utils/timeout"),u=(0,i.createModuleLogger)(i.projectLogger,"retry-on-empty"),l=[undefined,null,"<nil>"];r.createRetryOnEmptyMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('RetryOnEmptyMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('RetryOnEmptyMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(r,n,i)=>{const d=(0,a.blockTagParamIndex)(r.method);if(d===undefined)return i();let h=Array.isArray(r.params)&&r.params[d]?r.params[d]:undefined;if(h===undefined&&(h="latest"),["latest","pending"].includes(h))return i();const p=Number.parseInt(h.slice(2),16);if(Number.isNaN(p))return i();const f=await t.getLatestBlock(),m=Number.parseInt(f.slice(2),16);if(p>m)return u("Requested block number %o is higher than latest block number %o, falling through to original request",p,m),i();u("Requested block number %o is not higher than latest block number %o, trying request until non-empty response is received",p,m);const g=(0,s.klona)(r),y=await async function(e,t){for(let r=0;r<e;r++)try{return await t()}catch(e){if((0,o.isExecutionRevertedError)(e))throw e;u("(call %i) Request failed, waiting 1s to retry again...",r+1),await(0,c.timeout)(1e3)}throw u("Retries exhausted"),new Error("RetryOnEmptyMiddleware - retries exhausted")}(10,(async()=>{u("Performing request %o",g);const t=await e.request(g);u("Result is %o",t);if(l.includes(t))throw new Error(`RetryOnEmptyMiddleware - empty result "${JSON.stringify(t)}" for request "${JSON.stringify(g)}"`);return t}));return u("Copying result %o",y),n.result=y,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/retryOnEmpty.js"}],[1443,{"safe-stable-stringify":4917},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.cacheTypeForMethod=r.blockTagParamIndex=r.blockTagForRequest=r.canCache=r.cacheIdentifierForRequest=r.CacheStrategy=void 0;const n=(0,e("safe-stable-stringify").configure)({bigint:!1,circularValue:Error});var s;function i(e){return o(e)!==s.Never}function a(e){switch(e){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return undefined}}function o(e){switch(e){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return s.Permanent;case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return s.Fork;case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return s.Block;default:return s.Never}}!function(e){e.Block="block",e.Fork="fork",e.Never="never",e.Permanent="perma"}(s=r.CacheStrategy||(r.CacheStrategy={})),r.cacheIdentifierForRequest=function(e,t){var r;const s=t?function(e){if(!e.params)return[];const t=a(e.method);if(t===undefined||!Array.isArray(e.params)||t>=e.params.length)return e.params;if("eth_getBlockByNumber"===e.method)return e.params.slice(1);return e.params.slice(0,t)}(e):null!==(r=e.params)&&void 0!==r?r:[];return i(e.method)?`${e.method}:${n(s)}`:null},r.canCache=i,r.blockTagForRequest=function(e){if(!e.params)return undefined;const t=a(e.method);return t===undefined||!Array.isArray(e.params)||t>=e.params.length?undefined:e.params[t]},r.blockTagParamIndex=a,r.cacheTypeForMethod=o}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/cache.js"}],[1444,{"@metamask/rpc-errors":1458,"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isExecutionRevertedError=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/utils");r.isExecutionRevertedError=function(e){return(0,s.isJsonRpcError)(e)&&e.code===n.errorCodes.rpc.invalidInput&&"execution reverted"===e.message}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/error.js"}],[1445,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return"string"!=typeof e?e:JSON.parse(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.parseTypedMessage=r.normalizeTypedMessage=void 0,r.normalizeTypedMessage=function(e){var t;let r;try{r=n(e)}catch(t){return e}const{verifyingContract:s}=null!==(t=r.domain)&&void 0!==t?t:{};return s?(r.domain.verifyingContract=function(e){if(e.startsWith("0X"))return`0x${e.slice(2)}`;return e}(s),JSON.stringify(r)):e},r.parseTypedMessage=n}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/normalize.js"}],[1446,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeout=void 0,r.timeout=async function(e){return new Promise((t=>setTimeout(t,e)))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/timeout.js"}],[1447,{"./utils/normalize":1445,"@metamask/eth-sig-util":1482,"@metamask/json-rpc-engine":1453,"@metamask/rpc-errors":1458,"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.createWalletMiddleware=void 0;const a=i(e("@metamask/eth-sig-util")),o=e("@metamask/json-rpc-engine"),c=e("@metamask/rpc-errors"),u=e("@metamask/utils"),l=e("./utils/normalize");function d(e){const{domain:{verifyingContract:t}={}}=(0,l.parseTypedMessage)(e);if(t&&"cosmos"!==t&&!(0,u.isValidHexAddress)(t))throw c.rpcErrors.invalidInput()}function h(e){return 42===e.length}r.createWalletMiddleware=function({getAccounts:e,processDecryptMessage:t,processEncryptionPublicKey:r,processEthSignMessage:n,processPersonalMessage:s,processTransaction:i,processSignTransaction:u,processTypedMessage:p,processTypedMessageV3:f,processTypedMessageV4:m}){if(!e)throw new Error("opts.getAccounts is required");return(0,o.createScaffoldMiddleware)({eth_accounts:(0,o.createAsyncMiddleware)((async function(t,r){r.result=await e(t)})),eth_coinbase:(0,o.createAsyncMiddleware)((async function(t,r){const n=await e(t);r.result=n[0]||null})),eth_sendTransaction:(0,o.createAsyncMiddleware)((async function(e,t){if(!i)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await g((null==r?void 0:r.from)||"",e)});t.result=await i(n,e)})),eth_signTransaction:(0,o.createAsyncMiddleware)((async function(e,t){if(!u)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await g((null==r?void 0:r.from)||"",e)});t.result=await u(n,e)})),eth_sign:(0,o.createAsyncMiddleware)((async function(e,t){if(!n)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,s=await g(r[0],e),i=r[1],a=r[2]||{},o=Object.assign(Object.assign({},a),{from:s,data:i,signatureMethod:"eth_sign"});t.result=await n(o,e)})),eth_signTypedData:(0,o.createAsyncMiddleware)((async function(e,t){if(!p)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],s=await g(r[1],e),i=r[2]||{},a=Object.assign(Object.assign({},i),{from:s,data:n,signatureMethod:"eth_signTypedData",version:"V1"});t.result=await p(a,e,"V1")})),eth_signTypedData_v3:(0,o.createAsyncMiddleware)((async function(e,t){if(!f)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await g(r[0],e),s=(0,l.normalizeTypedMessage)(r[1]);d(s);const i={data:s,from:n,version:"V3",signatureMethod:"eth_signTypedData_v3"};t.result=await f(i,e,"V3")})),eth_signTypedData_v4:(0,o.createAsyncMiddleware)((async function(e,t){if(!m)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await g(r[0],e),s=(0,l.normalizeTypedMessage)(r[1]);d(s);const i={data:s,from:n,version:"V4",signatureMethod:"eth_signTypedData_v4"};t.result=await m(i,e,"V4")})),personal_sign:(0,o.createAsyncMiddleware)((async function(e,t){if(!s)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],i=r[1],a=r[2]||{};let o,u;if(h(n)&&!h(i)){let e="The eth_personalSign method requires params ordered ";e+="[message, address]. This was previously handled incorrectly, ",e+="and has been corrected automatically. ",e+="Please switch this param order for smooth behavior in the future.",t.warning=e,o=n,u=i}else u=n,o=i;o=await g(o,e);const l=Object.assign(Object.assign({},a),{from:o,data:u,signatureMethod:"personal_sign"});t.result=await s(l,e)})),eth_getEncryptionPublicKey:(0,o.createAsyncMiddleware)((async function(e,t){if(!r)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const n=e.params,s=await g(n[0],e);t.result=await r(s,e)})),eth_decrypt:(0,o.createAsyncMiddleware)((async function(e,r){if(!t)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const n=e.params,s=n[0],i=await g(n[1],e),a=n[2]||{},o=Object.assign(Object.assign({},a),{from:i,data:s});r.result=await t(o,e)})),personal_ecRecover:(0,o.createAsyncMiddleware)((async function(e,t){if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],s=r[1],i=a.recoverPersonalSignature({data:n,signature:s});t.result=i}))});async function g(t,r){if("string"==typeof t&&t.length>0&&h(t)){const n=(await e(r)).map((e=>e.toLowerCase())),s=t.toLowerCase();if(n.includes(s))return s;throw c.providerErrors.unauthorized()}throw c.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/wallet.js"}],[1448,{"@metamask/rpc-errors":1458,"@metamask/safe-event-emitter":2182,"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,p,f,m,g=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},v=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcEngine=void 0;const w=e("@metamask/rpc-errors"),_=v(e("@metamask/safe-event-emitter")),b=e("@metamask/utils");class k extends _.default{constructor({notificationHandler:e}={}){super(),n.add(this),i.set(this,!1),a.set(this,void 0),o.set(this,void 0),g(this,a,[],"f"),g(this,o,e,"f")}destroy(){y(this,a,"f").forEach((e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()})),g(this,a,[],"f"),g(this,i,!0,"f")}push(e){y(this,n,"m",c).call(this),y(this,a,"f").push(e)}handle(e,t){if(y(this,n,"m",c).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?y(this,n,"m",u).call(this,e,t):y(this,n,"m",u).call(this,e):t?y(this,n,"m",l).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return y(this,n,"m",c).call(this),async(e,t,r,n)=>{try{const[i,o,c]=await y(s,s,"m",h).call(s,e,t,y(this,a,"f"));return o?(await y(s,s,"m",f).call(s,c),n(i)):r((async e=>{try{await y(s,s,"m",f).call(s,c)}catch(t){return e(t)}return e()}))}catch(e){return n(e)}}}async _promiseHandle(e){return new Promise(((t,r)=>{y(this,n,"m",l).call(this,e,((e,n)=>{e&&n===undefined?r(e):t(n)})).catch(r)}))}}function S(e){return JSON.stringify(e,null,2)}r.JsonRpcEngine=k,s=k,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(){if(y(this,i,"f"))throw new Error("This engine is destroyed and can no longer be used.")},u=async function(e,t){try{if(0===e.length){const e=[{id:null,jsonrpc:"2.0",error:new w.JsonRpcError(w.errorCodes.rpc.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}const r=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter((e=>e!==undefined));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}},l=async function(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const r=new w.JsonRpcError(w.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:null,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new w.JsonRpcError(w.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return y(this,o,"f")&&!(0,b.isJsonRpcRequest)(e)?t(null):t(r,{id:e.id??null,jsonrpc:"2.0",error:r})}if(y(this,o,"f")&&(0,b.isJsonRpcNotification)(e)&&!(0,b.isJsonRpcRequest)(e)){try{await y(this,o,"f").call(this,e)}catch(r){return t(r)}return t(null)}let r=null;const n={...e},i={id:n.id,jsonrpc:n.jsonrpc};try{await y(s,s,"m",d).call(s,n,i,y(this,a,"f"))}catch(e){r=e}return r&&(delete i.result,i.error||(i.error=(0,w.serializeError)(r))),t(r,i)},d=async function(e,t,r){const[n,i,a]=await y(s,s,"m",h).call(s,e,t,r);if(y(s,s,"m",m).call(s,e,t,i),await y(s,s,"m",f).call(s,a),n)throw n},h=async function(e,t,r){const n=[];let i=null,a=!1;for(const o of r)if([i,a]=await y(s,s,"m",p).call(s,e,t,o,n),a)break;return[i,a,n.reverse()]},p=async function(e,t,r,n){return new Promise((s=>{const i=e=>{const r=e||t.error;r&&(t.error=(0,w.serializeError)(r)),s([r,!0])},a=r=>{t.error?i(t.error):(r&&("function"!=typeof r&&i(new w.JsonRpcError(w.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${S(e)}`,{request:e})),n.push(r)),s([null,!1]))};try{r(e,t,a,i)}catch(e){i(e)}}))},f=async function(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))},m=function(e,t,r){if(!(0,b.hasProperty)(t,"result")&&!(0,b.hasProperty)(t,"error"))throw new w.JsonRpcError(w.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${S(e)}`,{request:e});if(!r)throw new w.JsonRpcError(w.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${S(e)}`,{request:e})}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/json-rpc-engine",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/json-rpc-engine/dist/JsonRpcEngine.cjs"}],[1449,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAsyncMiddleware=void 0,r.createAsyncMiddleware=function(e){return async(t,r,n,s)=>{let i;const a=new Promise((e=>{i=e}));let o=null,c=!1;const u=async()=>(c=!0,n((e=>{o=e,i()})),a);try{await e(t,r,u),c?(await a,o(null)):s(null)}catch(e){o?o(e):s(e)}}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/json-rpc-engine",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/json-rpc-engine/dist/createAsyncMiddleware.cjs"}],[145,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:15,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=r;t.TransactionController.transactions=e.map((e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=n.TransactionStatus.failed),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/015.js"}],[1450,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createScaffoldMiddleware=void 0,r.createScaffoldMiddleware=function(e){return(t,r,n,s)=>{const i=e[t.method];return i===undefined?n():"function"==typeof i?i(t,r,n,s):(r.result=i,s())}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/json-rpc-engine",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/json-rpc-engine/dist/createScaffoldMiddleware.cjs"}],[1451,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getUniqueId=void 0;const n=4294967295;let s=Math.floor(Math.random()*n);r.getUniqueId=function(){return s=(s+1)%n,s}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/json-rpc-engine",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/json-rpc-engine/dist/getUniqueId.cjs"}],[1452,{"./getUniqueId.cjs":1451},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createIdRemapMiddleware=void 0;const n=e("./getUniqueId.cjs");r.createIdRemapMiddleware=function(){return(e,t,r,s)=>{const i=e.id,a=(0,n.getUniqueId)();e.id=a,t.id=a,r((r=>{e.id=i,t.id=i,r()}))}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/json-rpc-engine",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/json-rpc-engine/dist/idRemapMiddleware.cjs"}],[1453,{"./JsonRpcEngine.cjs":1448,"./createAsyncMiddleware.cjs":1449,"./createScaffoldMiddleware.cjs":1450,"./getUniqueId.cjs":1451,"./idRemapMiddleware.cjs":1452,"./mergeMiddleware.cjs":1454},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mergeMiddleware=r.JsonRpcEngine=r.createIdRemapMiddleware=r.getUniqueId=r.createScaffoldMiddleware=r.createAsyncMiddleware=void 0;var n=e("./createAsyncMiddleware.cjs");Object.defineProperty(r,"createAsyncMiddleware",{enumerable:!0,get:function(){return n.createAsyncMiddleware}});var s=e("./createScaffoldMiddleware.cjs");Object.defineProperty(r,"createScaffoldMiddleware",{enumerable:!0,get:function(){return s.createScaffoldMiddleware}});var i=e("./getUniqueId.cjs");Object.defineProperty(r,"getUniqueId",{enumerable:!0,get:function(){return i.getUniqueId}});var a=e("./idRemapMiddleware.cjs");Object.defineProperty(r,"createIdRemapMiddleware",{enumerable:!0,get:function(){return a.createIdRemapMiddleware}});var o=e("./JsonRpcEngine.cjs");Object.defineProperty(r,"JsonRpcEngine",{enumerable:!0,get:function(){return o.JsonRpcEngine}});var c=e("./mergeMiddleware.cjs");Object.defineProperty(r,"mergeMiddleware",{enumerable:!0,get:function(){return c.mergeMiddleware}})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/json-rpc-engine",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/json-rpc-engine/dist/index.cjs"}],[1454,{"./JsonRpcEngine.cjs":1448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mergeMiddleware=void 0;const n=e("./JsonRpcEngine.cjs");r.mergeMiddleware=function(e){const t=new n.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/json-rpc-engine",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/json-rpc-engine/dist/mergeMiddleware.cjs"}],[1455,{"./utils.cjs":1459,"@metamask/utils":2866,"fast-safe-stringify":4004},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.EthereumProviderError=r.JsonRpcError=void 0;const s=e("@metamask/utils"),i=n(e("fast-safe-stringify")),a=e("./utils.cjs");class o extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a non-empty string.');(0,a.dataHasCause)(r)?(super(t,{cause:r.cause}),(0,s.hasProperty)(this,"cause")||Object.assign(this,{cause:r.cause})):super(t),r!==undefined&&(this.data=r),this.code=e}serialize(){const e={code:this.code,message:this.message};return this.data!==undefined&&(e.data=this.data,(0,s.isPlainObject)(this.data)&&(e.data.cause=(0,a.serializeCause)(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return(0,i.default)(this.serialize(),c,2)}}r.JsonRpcError=o;function c(e,t){return"[Circular]"===t?undefined:t}r.EthereumProviderError=class extends o{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/rpc-errors",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/rpc-errors/dist/classes.cjs"}],[1456,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.errorValues=r.errorCodes=void 0,r.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},r.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/rpc-errors",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/rpc-errors/dist/error-constants.cjs"}],[1457,{"./classes.cjs":1455,"./error-constants.cjs":1456,"./utils.cjs":1459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerErrors=r.rpcErrors=void 0;const n=e("./classes.cjs"),s=e("./error-constants.cjs"),i=e("./utils.cjs");function a(e,t){const[r,s]=c(t);return new n.JsonRpcError(e,r??(0,i.getMessageFromCode)(e),s)}function o(e,t){const[r,s]=c(t);return new n.EthereumProviderError(e,r??(0,i.getMessageFromCode)(e),s)}function c(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??undefined,r]}}return[]}r.rpcErrors={parse:e=>a(s.errorCodes.rpc.parse,e),invalidRequest:e=>a(s.errorCodes.rpc.invalidRequest,e),invalidParams:e=>a(s.errorCodes.rpc.invalidParams,e),methodNotFound:e=>a(s.errorCodes.rpc.methodNotFound,e),internal:e=>a(s.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return a(t,e)},invalidInput:e=>a(s.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>a(s.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>a(s.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>a(s.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>a(s.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>a(s.errorCodes.rpc.limitExceeded,e)},r.providerErrors={userRejectedRequest:e=>o(s.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>o(s.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>o(s.errorCodes.provider.unsupportedMethod,e),disconnected:e=>o(s.errorCodes.provider.disconnected,e),chainDisconnected:e=>o(s.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:s}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(t,r,s)}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/rpc-errors",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/rpc-errors/dist/errors.cjs"}],[1458,{"./classes.cjs":1455,"./error-constants.cjs":1456,"./errors.cjs":1457,"./utils.cjs":1459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.errorCodes=r.providerErrors=r.rpcErrors=r.getMessageFromCode=r.serializeError=r.serializeCause=r.dataHasCause=r.EthereumProviderError=r.JsonRpcError=void 0;var n=e("./classes.cjs");Object.defineProperty(r,"JsonRpcError",{enumerable:!0,get:function(){return n.JsonRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return n.EthereumProviderError}});var s=e("./utils.cjs");Object.defineProperty(r,"dataHasCause",{enumerable:!0,get:function(){return s.dataHasCause}}),Object.defineProperty(r,"serializeCause",{enumerable:!0,get:function(){return s.serializeCause}}),Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return s.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return s.getMessageFromCode}});var i=e("./errors.cjs");Object.defineProperty(r,"rpcErrors",{enumerable:!0,get:function(){return i.rpcErrors}}),Object.defineProperty(r,"providerErrors",{enumerable:!0,get:function(){return i.providerErrors}});var a=e("./error-constants.cjs");Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return a.errorCodes}})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/rpc-errors",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/rpc-errors/dist/index.cjs"}],[1459,{"./error-constants.cjs":1456,"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.dataHasCause=r.serializeCause=r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=e("@metamask/utils"),s=e("./error-constants.cjs"),i=s.errorCodes.rpc.internal,a={code:i,message:o(i)};function o(e,t="Unspecified error message. This is a bug, please report it."){if(c(e)){const t=e.toString();if((0,n.hasProperty)(s.errorValues,t))return s.errorValues[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return t}function c(e){return Number.isInteger(e)}function u(e){return Array.isArray(e)?e.map((e=>(0,n.isValidJson)(e)?e:(0,n.isObject)(e)?l(e):null)):(0,n.isObject)(e)?l(e):(0,n.isValidJson)(e)?e:null}function l(e){return Object.getOwnPropertyNames(e).reduce(((t,r)=>{const s=e[r];return(0,n.isValidJson)(s)&&(t[r]=s),t}),{})}r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",r.getMessageFromCode=o,r.isValidCode=c,r.serializeError=function(e,{fallbackError:t=a,shouldIncludeStack:r=!0}={}){if(!(0,n.isJsonRpcError)(t))throw new Error("Must provide fallback error with integer number code and string message.");const s=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if((0,n.isJsonRpcError)(e))return e;const r=u(e),s={...t,data:{cause:r}};return s}(e,t);return r||delete s.stack,s},r.serializeCause=u,r.dataHasCause=function(e){return(0,n.isObject)(e)&&(0,n.hasProperty)(e,"cause")&&(0,n.isObject)(e.cause)}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/rpc-errors",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/rpc-errors/dist/utils.cjs"}],[146,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:16,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=n.TransactionStatus.submitted,delete e.err),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/016.js"}],[147,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:17,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(!e.status===n.TransactionStatus.failed||e.retryCount>0&&e.retryCount<2&&(e.status=n.TransactionStatus.submitted,delete e.err),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/017.js"}],[1476,{"./ledger-bridge":1477,"./ledger-iframe-bridge":1478,"./ledger-keyring":1479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./ledger-keyring"),r),s(e("./ledger-iframe-bridge"),r),s(e("./ledger-bridge"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.js"}],[1477,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-bridge.js"}],[1478,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},h=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerIframeBridge=r.IFrameMessageAction=void 0;var p;!function(e){e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(p=r.IFrameMessageAction||(r.IFrameMessageAction={}));r.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){n.add(this),this.iframeLoaded=!1,s.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,this.messageCallbacks={},d(this,n,"m",l).call(this,e),h(this,s,{bridgeUrl:null==e?void 0:e.bridgeUrl},"f")}async init(){await d(this,n,"m",a).call(this,d(this,s,"f").bridgeUrl),this.eventListener=d(this,n,"m",c).bind(this,d(this,s,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return d(this,s,"f")}async setOptions(e){var t;d(this,n,"m",l).call(this,e),(null===(t=d(this,s,"f"))||void 0===t?void 0:t.bridgeUrl)!==e.bridgeUrl&&(d(this,s,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){return new Promise(((e,t)=>{d(this,n,"m",u).call(this,{action:p.LedgerMakeApp},(r=>{"success"in r&&r.success?e(!0):t("error"in r?r.error:new Error("Unknown error occurred"))}))}))}async updateTransportMethod(e){return new Promise(((t,r)=>{if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");d(this,n,"m",u).call(this,{action:p.LedgerUpdateTransport,params:{transportType:e}},(e=>"success"in e&&e.success?t(!0):r(new Error("Ledger transport could not be updated"))))}))}async getPublicKey(e){return d(this,n,"m",i).call(this,p.LedgerUnlock,e)}async deviceSignTransaction(e){return d(this,n,"m",i).call(this,p.LedgerSignTransaction,e)}async deviceSignMessage(e){return d(this,n,"m",i).call(this,p.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return d(this,n,"m",i).call(this,p.LedgerSignTypedData,e)}},s=new WeakMap,n=new WeakSet,i=async function(...[e,t]){return new Promise(((r,s)=>{d(this,n,"m",u).call(this,{action:e,params:t},(e=>{if("payload"in e&&e.payload){if("success"in e&&e.success)return r(e.payload);if("error"in e.payload)return s(e.payload.error)}return s(new Error("Unknown error occurred"))}))}))},a=async function(e){return new Promise((t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)}))},o=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},c=function(e,t){if(t.origin===d(this,n,"m",o).call(this,e)&&t.data){const e=this.messageCallbacks[t.data.messageId];e?e(t.data):t.data.action===p.LedgerConnectionChange&&(this.isDeviceConnected=t.data.payload.connected)}},u=function(e,t){this.currentMessageId+=1;const r=Object.assign(Object.assign({},e),{messageId:this.currentMessageId,target:"LEDGER-IFRAME"});if(this.messageCallbacks[this.currentMessageId]=t,!this.iframeLoaded||!this.iframe||!this.iframe.contentWindow)throw new Error("The iframe is not loaded yet");this.iframe.contentWindow.postMessage(r,"*")},l=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.js"}],[1479,{"@ethereumjs/rlp":451,"@ethereumjs/tx":456,"@ethereumjs/util":468,"@metamask/eth-sig-util":1482,buffer:3661,events:3968,hdkey:4278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,p,f,m,g=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),y=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),v=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return y(t,e),t},w=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},_=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerKeyring=void 0;const b=e("@ethereumjs/rlp"),k=e("@ethereumjs/tx"),S=v(e("@ethereumjs/util")),E=e("@metamask/eth-sig-util"),j=e("buffer"),T=e("events"),C=_(e("hdkey")),I="m",P=`${I}/44'/60'/0'`,M="Ledger Hardware";var A;!function(e){e.Ropsten="http://api-ropsten.etherscan.io",e.Kovan="http://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(A||(A={}));class R extends T.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=M,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new C.default,this.hdPath=P,this.paths={},this.network=A.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e={}){var t,r,i,a;this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:P,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.accountDetails=null!==(i=e.accountDetails)&&void 0!==i?i:{},e.accountDetails||w(this,n,"m",s).call(this,e),this.implementFullBIP44=null!==(a=e.implementFullBIP44)&&void 0!==a&&a;const o=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter((e=>o.has(S.toChecksumAddress(e)))),Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount="number"==typeof e?e:parseInt(e,10)}setHdPath(e){this.hdPath!==e&&(this.hdk=new C.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return"already unlocked";const r=e?w(this,n,"m",p).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:r})}catch(e){throw e instanceof Error?e:new Error("Unknown error")}return t&&s.chainCode&&(this.hdk.publicKey=j.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=j.Buffer.from(s.chainCode,"hex")),s.address}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((async r=>{const s=this.unlockedAccount,i=s+e;for(let e=s;e<i;e++){const t=w(this,n,"m",d).call(this,e);let r;r=w(this,n,"m",h).call(this)?await this.unlock(t):w(this,n,"m",u).call(this,I,e),this.accountDetails[S.toChecksumAddress(r)]={bip44:w(this,n,"m",h).call(this),hdPath:t},this.accounts.includes(r)||(this.accounts=[...this.accounts,r]),this.page=0}t(this.accounts.slice())})).catch(r)}))}async getFirstPage(){return this.page=0,w(this,n,"m",a).call(this,1)}async getNextPage(){return w(this,n,"m",a).call(this,1)}async getPreviousPage(){return w(this,n,"m",a).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()));if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[S.toChecksumAddress(e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let r;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=S.bufferToHex(t.getChainId()),t.r="0x00",t.s="0x00",r=t.serialize().toString("hex"),w(this,n,"m",i).call(this,e,r,(e=>(t.v=j.Buffer.from(e.v,"hex"),t.r=j.Buffer.from(e.r,"hex"),t.s=j.Buffer.from(e.s,"hex"),t)));const s=t.getMessageToSign(!1);return r=j.Buffer.isBuffer(s)?s.toString("hex"):j.Buffer.from(b.RLP.encode(s)).toString("hex"),w(this,n,"m",i).call(this,e,r,(e=>{const r=t.toJSON();return r.type=t.type,r.v=S.addHexPrefix(e.v),r.r=S.addHexPrefix(e.r),r.s=S.addHexPrefix(e.s),k.TransactionFactory.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: Unknown error while signing message");let n;try{n=await this.bridge.deviceSignMessage({hdPath:r,message:S.stripHexPrefix(t)})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let s=parseInt(String(n.v),10).toString(16);s.length<2&&(s=`0${s}`);const i=`0x${n.r}${n.s}${s}`,a=(0,E.recoverPersonalSignature)({data:t,signature:i});if(S.toChecksumAddress(a)!==S.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=S.toChecksumAddress(e),r=this.accountDetails[t];if(!r)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:n}=r;if((await this.unlock(n,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return n}async signTypedData(e,t,r={}){if(!("V4"===r.version))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:n,types:s,primaryType:i,message:a}=E.TypedDataUtils.sanitizeData(t),o=E.TypedDataUtils.hashStruct("EIP712Domain",n,s,E.SignTypedDataVersion.V4).toString("hex"),c=E.TypedDataUtils.hashStruct(i.toString(),a,s,E.SignTypedDataVersion.V4).toString("hex"),u=await this.unlockAccountByAddress(e);if(!u)throw new Error("Ledger: Unknown error while signing message");let l;try{l=await this.bridge.deviceSignTypedData({hdPath:u,domainSeparatorHex:o,hashStructMessageHex:c})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let d=parseInt(String(l.v),10).toString(16);d.length<2&&(d=`0${d}`);const h=`0x${l.r}${l.s}${d}`,p=(0,E.recoverTypedSignature)({data:t,signature:h,version:E.SignTypedDataVersion.V4});if(S.toChecksumAddress(p)!==S.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return h}exportAccount(){throw new Error("Not supported on this device")}forgetDevice(){this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new C.default}}r.LedgerKeyring=R,n=new WeakSet,s=function(e){if(w(this,n,"m",h).call(this)&&e.accountIndexes)for(const[t,r]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:w(this,n,"m",d).call(this,r)};const t=new Set(Object.keys(this.accountDetails));w(this,n,"m",h).call(this)||this.accounts.forEach((e=>{try{const r=S.toChecksumAddress(e);t.has(r)||(this.accountDetails[r]={bip44:!1,hdPath:w(this,n,"m",l).call(this,e)})}catch(t){console.log(`failed to migrate account ${e}`)}}))},i=async function(e,t,r){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: Unknown error while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:t,hdPath:n})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing transaction")}const i=r(s);if(i.verifySignature())return i;throw new Error("Ledger: The transaction signature is not valid")},a=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let s;return await this.unlock(),s=w(this,n,"m",h).call(this)?await w(this,n,"m",o).call(this,t,r):w(this,n,"m",c).call(this,t,r),s},o=async function(e,t){const r=[];for(let s=e;s<t;s++){const e=w(this,n,"m",d).call(this,s),t=await this.unlock(e),i=!this.implementFullBIP44||await w(this,n,"m",f).call(this,t);if(r.push({address:t,balance:null,index:s}),!i)break}return r},c=function(e,t){const r=[];for(let s=e;s<t;s++){const e=w(this,n,"m",u).call(this,I,s);r.push({address:e,balance:null,index:s}),this.paths[S.toChecksumAddress(e)]=s}return r},u=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=S.publicToAddress(r.publicKey,!0).toString("hex");return S.toChecksumAddress(`0x${n}`)},l=function(e){const t=S.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===w(this,n,"m",u).call(this,I,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return w(this,n,"m",d).call(this,r)},d=function(e){return w(this,n,"m",h).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},h=function(){return"m/44'/60'/0'/0/0"===this.hdPath},p=function(e){return e.toString().replace("m/","")},f=async function(e){const t=w(this,n,"m",m).call(this),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await r.json();return"0"!==s.status&&s.result.length>0},m=function(){return this.network},R.type=M}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.js"}],[148,{"fast-json-patch":4002,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("fast-json-patch"))&&n.__esModule?n:{default:n},i=e("lodash");r.default={version:18,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=function(e){const t={...e};return delete t.history,(0,i.cloneDeep)(t)}(e);return e.history=[t],e}const t=(r=e.history,r.map(((e,t)=>0===t?e:function(e,t,r){const n=s.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n}(r[t-1],e)))).filter((e=>!Array.isArray(e)||e.length>0));var r;return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[1488,{"./util":1496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaseInsensitiveMap=void 0;const n=e("./util");class s extends Map{static fromObject(e){return new s(Object.entries(e))}toObject(){return Object.fromEntries(this.entries())}get(e){return super.get(e.toLowerCase())}getOrThrow(e,t="Key"){return this.get(e)??(0,n.throwError)(`${t} '${e}' not found`)}has(e){return super.has(e.toLowerCase())}set(e,t){return super.set(e.toLowerCase(),t)}delete(e){return super.delete(e.toLowerCase())}}r.CaseInsensitiveMap=s}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/CaseInsensitiveMap.js"}],[1489,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeferredPromise=void 0;r.DeferredPromise=class{constructor(){if(this.resolve=undefined,this.reject=undefined,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),!this.resolve||!this.reject)throw new Error("Promise constructor failed")}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/DeferredPromise.js"}],[149,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:19,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(((e,t,r)=>{if(e.status!==n.TransactionStatus.submitted)return e;const s=function(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)}));return Math.max.apply(null,t)}(r.filter((e=>e.status===n.TransactionStatus.confirmed)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from))),i=function(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return n}(r.filter((e=>e.status===n.TransactionStatus.submitted)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),s),a=Math.max(i,s);return parseInt(e.txParams.nonce,16)>a+1&&(e.status=n.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[1490,{"@metamask/keyring-api":1642},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapControllerClient=void 0;const l=e("@metamask/keyring-api");class d{constructor(e,t,r,o){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c(this,i,e,"f"),c(this,n,t,"f"),c(this,s,r,"f"),c(this,a,o,"f")}async send(e){return u(this,i,"f").handleRequest({snapId:u(this,n,"f"),origin:u(this,s,"f"),handler:u(this,a,"f"),request:e})}}n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap;class h extends l.KeyringClient{constructor({controller:e,snapId:t="undefined",origin:r="metamask",handler:n="onKeyringRequest"}){super(new d(e,t,r,n)),o.set(this,void 0),c(this,o,e,"f")}withSnapId(e){return new h({controller:u(this,o,"f"),snapId:e})}getController(){return u(this,o,"f")}}r.KeyringSnapControllerClient=h,o=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/KeyringSnapControllerClient.js"}],[1491,{"./CaseInsensitiveMap":1488},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapIdMap=r.InvalidSnapIdError=void 0;const a=e("./CaseInsensitiveMap");class o extends Error{constructor(e,t){super(`Snap "${e}" is not allowed to set "${t}"`),this.name="InvalidSnapIdError",this.snapId=e,this.key=t}}r.InvalidSnapIdError=o;class c{constructor(e){n.set(this,void 0),s(this,n,new a.CaseInsensitiveMap(e),"f")}toObject(){return i(this,n,"f").toObject()}static fromObject(e){return new c(Object.entries(e))}get(e,t){const r=i(this,n,"f").get(t);return r?.snapId===e?r:undefined}has(e,t){return this.get(e,t)!==undefined}delete(e,t){return this.has(e,t)&&i(this,n,"f").delete(t)}set(e,t){if(i(this,n,"f").has(e)&&!this.has(t.snapId,e))throw new o(t.snapId,e);return i(this,n,"f").set(e,t),this}values(){return i(this,n,"f").values()}get size(){return i(this,n,"f").size}}r.SnapIdMap=c,n=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapIdMap.js"}],[1492,{"./DeferredPromise":1489,"./KeyringSnapControllerClient":1490,"./SnapIdMap":1491,"./logger":1494,"./types":1495,"./util":1496,"@ethereumjs/tx":456,"@metamask/eth-sig-util":1482,"@metamask/keyring-api":1642,"@metamask/superstruct":2715,"@metamask/utils":2866,events:3968,uuid:1497},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,p,f,m,g,y,v,w,_,b,k,S,E=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},j=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapKeyring=r.SNAP_KEYRING_TYPE=void 0;const T=e("@ethereumjs/tx"),C=e("@metamask/eth-sig-util"),I=e("@metamask/keyring-api"),P=e("@metamask/superstruct"),M=e("@metamask/utils"),A=e("events"),R=e("uuid"),O=e("./DeferredPromise"),x=e("./KeyringSnapControllerClient"),N=e("./logger"),D=e("./SnapIdMap"),L=e("./types"),B=e("./util");r.SNAP_KEYRING_TYPE="Snap Keyring";class $ extends A.EventEmitter{constructor(e,t){super(),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),this.type=$.type,E(this,s,new x.KeyringSnapControllerClient({controller:e}),"f"),E(this,a,new D.SnapIdMap,"f"),E(this,i,new D.SnapIdMap,"f"),E(this,o,t,"f")}async handleKeyringSnapMessage(e,t){switch((0,P.assert)(t,L.SnapMessageStruct),t.method){case`${I.KeyringEvent.AccountCreated}`:return j(this,n,"m",c).call(this,e,t);case`${I.KeyringEvent.AccountUpdated}`:return j(this,n,"m",u).call(this,e,t);case`${I.KeyringEvent.AccountDeleted}`:return j(this,n,"m",l).call(this,e,t);case`${I.KeyringEvent.RequestApproved}`:return j(this,n,"m",d).call(this,e,t);case`${I.KeyringEvent.RequestRejected}`:return j(this,n,"m",h).call(this,e,t);default:throw new Error(`Method not supported: ${t.method}`)}}async serialize(){return{accounts:j(this,i,"f").toObject()}}async deserialize(e){e!==undefined&&E(this,i,D.SnapIdMap.fromObject(e.accounts),"f")}async getAccounts(){return(0,B.unique)([...j(this,i,"f").values()].map((({account:e})=>e.address.toLowerCase())))}async getAccountsBySnapId(e){return(0,B.unique)([...j(this,i,"f").values()].filter((({snapId:t})=>t===e)).map((({account:e})=>e.address.toLowerCase())))}async signTransaction(e,t,r={}){const s=t.common.chainId(),i=(0,B.toJson)({...t.toJSON(),from:e,type:`0x${t.type.toString(16)}`,chainId:(0,M.bigIntToHex)(s)}),a=await j(this,n,"m",p).call(this,{address:e,method:I.EthMethod.SignTransaction,params:[i],chainId:(0,M.toCaipChainId)(M.KnownCaipNamespace.Eip155,`${s}`)}),o=(0,P.mask)(a,(0,P.object)({r:(0,P.string)(),s:(0,P.string)(),v:(0,P.string)()}));return T.TransactionFactory.fromTxData({...i,r:o.r,s:o.s,v:o.v})}async signTypedData(e,t,r={version:C.SignTypedDataVersion.V1}){const s={[C.SignTypedDataVersion.V1]:I.EthMethod.SignTypedDataV1,[C.SignTypedDataVersion.V3]:I.EthMethod.SignTypedDataV3,[C.SignTypedDataVersion.V4]:I.EthMethod.SignTypedDataV4}[r.version]||I.EthMethod.SignTypedDataV1,i=t.domain?.chainId;return(0,B.strictMask)(await j(this,n,"m",p).call(this,{address:e,method:s,params:(0,B.toJson)([e,t]),...i===undefined?{}:{chainId:(0,M.toCaipChainId)(M.KnownCaipNamespace.Eip155,`${i}`)}}),I.EthBytesStruct)}async signMessage(e,t){return(0,B.strictMask)(await j(this,n,"m",p).call(this,{address:e,method:I.EthMethod.Sign,params:(0,B.toJson)([e,t])}),I.EthBytesStruct)}async signPersonalMessage(e,t){return(0,B.strictMask)(await j(this,n,"m",p).call(this,{address:e,method:I.EthMethod.PersonalSign,params:(0,B.toJson)([t,e])}),I.EthBytesStruct)}async prepareUserOperation(e,t,r){return(0,B.strictMask)(await j(this,n,"m",p).call(this,{address:e,method:I.EthMethod.PrepareUserOperation,params:(0,B.toJson)(t),noPending:!0,chainId:(0,M.toCaipChainId)(M.KnownCaipNamespace.Eip155,r.chainId)}),I.EthBaseUserOperationStruct)}async patchUserOperation(e,t,r){return(0,B.strictMask)(await j(this,n,"m",p).call(this,{address:e,method:I.EthMethod.PatchUserOperation,params:(0,B.toJson)([t]),noPending:!0,chainId:(0,M.toCaipChainId)(M.KnownCaipNamespace.Eip155,r.chainId)}),I.EthUserOperationPatchStruct)}async signUserOperation(e,t,r){return(0,B.strictMask)(await j(this,n,"m",p).call(this,{address:e,method:I.EthMethod.SignUserOperation,params:(0,B.toJson)([t]),chainId:(0,M.toCaipChainId)(M.KnownCaipNamespace.Eip155,r.chainId)}),I.EthBytesStruct)}exportAccount(e){throw new Error("Exporting accounts from snaps is not supported.")}async removeAccount(e){const{account:t,snapId:r}=j(this,n,"m",b).call(this,e);j(this,i,"f").delete(r,t.id);try{await j(this,s,"f").withSnapId(r).deleteAccount(t.id)}catch(t){console.error(`Account '${e}' may not have been removed from snap '${r}':`,t)}}getAccountByAddress(e){return this.listAccounts().find((({address:t})=>(0,B.equalsIgnoreCase)(t,e)))}listAccounts(){return[...j(this,i,"f").values()].map((({account:e,snapId:t})=>{const r=j(this,n,"m",k).call(this,t);return{...e,address:e.address.toLowerCase(),metadata:{name:"",importTime:0,keyring:{type:this.type},...r!==undefined&&{snap:r}}}}))}}r.SnapKeyring=$,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=async function(e,t){(0,P.assert)(t,I.AccountCreatedEventStruct);const{account:r,accountNameSuggestion:n,displayConfirmation:s}=t.params;if(await j(this,o,"f").addressExists(r.address.toLowerCase()))throw new Error(`Account address '${r.address}' already exists`);if(j(this,i,"f").has(e,r.id))throw new Error(`Account '${r.id}' already exists`);return await j(this,o,"f").addAccount(r.address.toLowerCase(),e,(async t=>{t&&(j(this,i,"f").set(r.id,{account:r,snapId:e}),await j(this,o,"f").saveState())}),n,s),null},u=async function(e,t){(0,P.assert)(t,I.AccountUpdatedEventStruct);const{account:r}=t.params,{account:n}=j(this,i,"f").get(e,r.id)??(0,B.throwError)(`Account '${r.id}' not found`);if(!(0,B.equalsIgnoreCase)(n.address,r.address))throw new Error(`Cannot change address of account '${r.id}'`);return j(this,i,"f").set(r.id,{account:r,snapId:e}),await j(this,o,"f").saveState(),null},l=async function(e,t){(0,P.assert)(t,I.AccountDeletedEventStruct);const{id:r}=t.params,n=j(this,i,"f").get(e,r);if(n===undefined)return null;const{account:{address:s}}=n;return await j(this,o,"f").removeAccount(s.toLowerCase(),e,(async e=>{e&&await j(this,o,"f").saveState()})),null},d=async function(e,t){(0,P.assert)(t,I.RequestApprovedEventStruct);const{id:r,result:n}=t.params,{promise:s}=j(this,a,"f").get(e,r)??(0,B.throwError)(`Request '${r}' not found`);return j(this,a,"f").delete(e,r),s.resolve(n),null},h=async function(e,t){(0,P.assert)(t,I.RequestRejectedEventStruct);const{id:r}=t.params,{promise:n}=j(this,a,"f").get(e,r)??(0,B.throwError)(`Request '${r}' not found`);return j(this,a,"f").delete(e,r),n.reject(new Error("Request rejected by user or snap.")),null},p=async function({address:e,method:t,params:r,chainId:s="",noPending:i=!1}){const{account:a,snapId:o}=j(this,n,"m",b).call(this,e);if(!j(this,n,"m",f).call(this,a,t))throw new Error(`Method '${t}' not supported for account ${a.address}`);const c=(0,R.v4)(),u=j(this,n,"m",m).call(this,c,o),l=await j(this,n,"m",g).call(this,{snapId:o,requestId:c,account:a,method:t,params:r,chainId:s});if(i&&l.pending)throw new Error(`Request '${c}' to snap '${o}' is pending and noPending is true.`);return l.pending?((l.redirect?.message||l.redirect?.url)&&await j(this,n,"m",v).call(this,l.redirect,o),u.promise):j(this,n,"m",y).call(this,l,c,o)},f=function(e,t){return e.methods.includes(t)},m=function(e,t){const r=new O.DeferredPromise;return j(this,a,"f").set(e,{promise:r,snapId:t}),r},g=async function({snapId:e,requestId:t,account:r,method:n,params:i,chainId:o}){try{const a={id:t,scope:o,account:r.id,request:{method:n,...i!==undefined&&{params:i}}};return(0,N.projectLogger)("Submit Snap request: ",a),await j(this,s,"f").withSnapId(e).submitRequest(a)}catch(r){throw(0,N.projectLogger)("Snap Request failed: ",{requestId:t}),j(this,a,"f").delete(e,t),r}},y=function(e,t,r){return j(this,a,"f").delete(r,t),e.result},v=async function(e,t){const{message:r="",url:s=""}=e,i=j(this,n,"m",w).call(this,s);i&&j(this,n,"m",_).call(this,i,t),await j(this,o,"f").redirectUser(t,i,r)},w=function(e){return e?(0,B.sanitizeUrl)(e):e},_=function(e,t){const{origin:r}=new URL(e),i=j(this,s,"f").getController().get(t);if(!i)throw new Error(`Snap '${t}' not found.`);if(!j(this,n,"m",S).call(this,i).includes(r))throw new Error(`Redirect URL domain '${r}' is not an allowed origin by snap '${t}'`)},b=function(e){return[...j(this,i,"f").values()].find((({account:t})=>(0,B.equalsIgnoreCase)(t.address,e)))??(0,B.throwError)(`Account '${e}' not found`)},k=function(e){const t=j(this,s,"f").getController().get(e);return t?{id:e,name:t.manifest.proposedName,enabled:t.enabled}:undefined},S=function(e){return e.manifest.initialPermissions["endowment:keyring"]?.allowedOrigins??[]},$.type=r.SNAP_KEYRING_TYPE}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapKeyring.js"}],[1493,{"./KeyringSnapControllerClient":1490,"./SnapKeyring":1492,"./types":1495},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./types"),r),s(e("./SnapKeyring"),r),s(e("./KeyringSnapControllerClient"),r)}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/index.js"}],[1494,{"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-snap-keyring")}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/logger.js"}],[1495,{"@metamask/superstruct":2715,"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapMessageStruct=void 0;const n=e("@metamask/superstruct"),s=e("@metamask/utils");r.SnapMessageStruct=(0,n.object)({method:(0,n.string)(),params:(0,n.optional)((0,n.union)([(0,n.array)(s.JsonStruct),(0,n.record)((0,n.string)(),s.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/types.js"}],[1496,{"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitizeUrl=r.equalsIgnoreCase=r.throwError=r.ensureDefined=r.toJson=r.unique=r.strictMask=void 0;const n=e("@metamask/superstruct");r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e},r.unique=function(e){return[...new Set(e)]},r.toJson=function(e){return JSON.parse(JSON.stringify(e))},r.ensureDefined=function(e){if(e===undefined)throw new Error("Argument is undefined")},r.throwError=function(e){throw new Error(e)},r.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()},r.sanitizeUrl=function(e){return new URL(e).toString()}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/util.js"}],[1497,{"./nil.js":1500,"./parse.js":1501,"./stringify.js":1505,"./v1.js":1506,"./v3.js":1507,"./v4.js":1509,"./v5.js":1510,"./validate.js":1511,"./version.js":1512},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=h(e("./v1.js")),s=h(e("./v3.js")),i=h(e("./v4.js")),a=h(e("./v5.js")),o=h(e("./nil.js")),c=h(e("./version.js")),u=h(e("./validate.js")),l=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/index.js"}],[1498,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function s(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,n,i,a){return s((o=s(s(t,e),s(n,a)))<<(c=i)|o>>>32-c,r);var o,c}function a(e,t,r,n,s,a,o){return i(t&r|~t&n,e,t,s,a,o)}function o(e,t,r,n,s,a,o){return i(t&n|r&~n,e,t,s,a,o)}function c(e,t,r,n,s,a,o){return i(t^r^n,e,t,s,a,o)}function u(e,t,r,n,s,a,o){return i(r^(t|~n),e,t,s,a,o)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let s=0;s<r;s+=8){const r=e[s>>5]>>>s%32&255,i=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,i=-271733879,l=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=r,h=i,p=l,f=d;r=a(r,i,l,d,e[t],7,-680876936),d=a(d,r,i,l,e[t+1],12,-389564586),l=a(l,d,r,i,e[t+2],17,606105819),i=a(i,l,d,r,e[t+3],22,-1044525330),r=a(r,i,l,d,e[t+4],7,-176418897),d=a(d,r,i,l,e[t+5],12,1200080426),l=a(l,d,r,i,e[t+6],17,-1473231341),i=a(i,l,d,r,e[t+7],22,-45705983),r=a(r,i,l,d,e[t+8],7,1770035416),d=a(d,r,i,l,e[t+9],12,-1958414417),l=a(l,d,r,i,e[t+10],17,-42063),i=a(i,l,d,r,e[t+11],22,-1990404162),r=a(r,i,l,d,e[t+12],7,1804603682),d=a(d,r,i,l,e[t+13],12,-40341101),l=a(l,d,r,i,e[t+14],17,-1502002290),i=a(i,l,d,r,e[t+15],22,1236535329),r=o(r,i,l,d,e[t+1],5,-165796510),d=o(d,r,i,l,e[t+6],9,-1069501632),l=o(l,d,r,i,e[t+11],14,643717713),i=o(i,l,d,r,e[t],20,-373897302),r=o(r,i,l,d,e[t+5],5,-701558691),d=o(d,r,i,l,e[t+10],9,38016083),l=o(l,d,r,i,e[t+15],14,-660478335),i=o(i,l,d,r,e[t+4],20,-405537848),r=o(r,i,l,d,e[t+9],5,568446438),d=o(d,r,i,l,e[t+14],9,-1019803690),l=o(l,d,r,i,e[t+3],14,-187363961),i=o(i,l,d,r,e[t+8],20,1163531501),r=o(r,i,l,d,e[t+13],5,-1444681467),d=o(d,r,i,l,e[t+2],9,-51403784),l=o(l,d,r,i,e[t+7],14,1735328473),i=o(i,l,d,r,e[t+12],20,-1926607734),r=c(r,i,l,d,e[t+5],4,-378558),d=c(d,r,i,l,e[t+8],11,-2022574463),l=c(l,d,r,i,e[t+11],16,1839030562),i=c(i,l,d,r,e[t+14],23,-35309556),r=c(r,i,l,d,e[t+1],4,-1530992060),d=c(d,r,i,l,e[t+4],11,1272893353),l=c(l,d,r,i,e[t+7],16,-155497632),i=c(i,l,d,r,e[t+10],23,-1094730640),r=c(r,i,l,d,e[t+13],4,681279174),d=c(d,r,i,l,e[t],11,-358537222),l=c(l,d,r,i,e[t+3],16,-722521979),i=c(i,l,d,r,e[t+6],23,76029189),r=c(r,i,l,d,e[t+9],4,-640364487),d=c(d,r,i,l,e[t+12],11,-421815835),l=c(l,d,r,i,e[t+15],16,530742520),i=c(i,l,d,r,e[t+2],23,-995338651),r=u(r,i,l,d,e[t],6,-198630844),d=u(d,r,i,l,e[t+7],10,1126891415),l=u(l,d,r,i,e[t+14],15,-1416354905),i=u(i,l,d,r,e[t+5],21,-57434055),r=u(r,i,l,d,e[t+12],6,1700485571),d=u(d,r,i,l,e[t+3],10,-1894986606),l=u(l,d,r,i,e[t+10],15,-1051523),i=u(i,l,d,r,e[t+1],21,-2054922799),r=u(r,i,l,d,e[t+8],6,1873313359),d=u(d,r,i,l,e[t+15],10,-30611744),l=u(l,d,r,i,e[t+6],15,-1560198380),i=u(i,l,d,r,e[t+13],21,1309151649),r=u(r,i,l,d,e[t+4],6,-145523070),d=u(d,r,i,l,e[t+11],10,-1120210379),l=u(l,d,r,i,e[t+2],15,718787259),i=u(i,l,d,r,e[t+9],21,-343485551),r=s(r,n),i=s(i,h),l=s(l,p),d=s(d,f)}return[r,i,l,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/md5-browser.js"}],[1499,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/native-browser.js"}],[15,{"./types":16},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_BRIDGE_CONTROLLER_STATE=r.BRIDGE_CONTROLLER_NAME=void 0;var n=e("./types");r.BRIDGE_CONTROLLER_NAME="BridgeController",r.DEFAULT_BRIDGE_CONTROLLER_STATE={bridgeFeatureFlags:{[n.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]:!1,[n.BridgeFeatureFlagsKey.NETWORK_SRC_ALLOWLIST]:[],[n.BridgeFeatureFlagsKey.NETWORK_DEST_ALLOWLIST]:[]},srcTokens:{},srcTopAssets:[],destTokens:{},destTopAssets:[]}}}},{package:"$root$",file:"app/scripts/controllers/bridge/constants.ts"}],[150,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:20,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[1500,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/nil.js"}],[1501,{"./validate.js":1511},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/parse.js"}],[1502,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/regex.js"}],[1503,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)};const s=new Uint8Array(16)}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/rng-browser.js"}],[1504,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function s(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),o=new Array(a);for(let t=0;t<a;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];o[t]=r}o[a-1][14]=8*(e.length-1)/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=o[e][t];for(let e=16;e<80;++e)i[e]=s(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let a=r[0],c=r[1],u=r[2],l=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=s(a,5)+n(r,c,u,l)+d+t[r]+i[e]>>>0;d=l,l=u,u=s(c,30)>>>0,c=a,a=o}r[0]=r[0]+a>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/sha1-browser.js"}],[1505,{"./validate.js":1511},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=a;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function a(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}var o=function(e,t=0){const r=a(e,t);if(!(0,s.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/stringify.js"}],[1506,{"./rng.js":1503,"./stringify.js":1505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./rng.js"))&&n.__esModule?n:{default:n},i=e("./stringify.js");let a,o,c=0,u=0;var l=function(e,t,r){let n=t&&r||0;const l=t||new Array(16);let d=(e=e||{}).node||a,h=e.clockseq!==undefined?e.clockseq:o;if(null==d||null==h){const t=e.random||(e.rng||s.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=o=16383&(t[6]<<8|t[7]))}let p=e.msecs!==undefined?e.msecs:Date.now(),f=e.nsecs!==undefined?e.nsecs:u+1;const m=p-c+(f-u)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||p>c)&&e.nsecs===undefined&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,u=f,o=h,p+=122192928e5;const g=(1e4*(268435455&p)+f)%4294967296;l[n++]=g>>>24&255,l[n++]=g>>>16&255,l[n++]=g>>>8&255,l[n++]=255&g;const y=p/4294967296*1e4&268435455;l[n++]=y>>>8&255,l[n++]=255&y,l[n++]=y>>>24&15|16,l[n++]=y>>>16&255,l[n++]=h>>>8|128,l[n++]=255&h;for(let e=0;e<6;++e)l[n+e]=d[e];return t||(0,i.unsafeStringify)(l)};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v1.js"}],[1507,{"./md5.js":1498,"./v35.js":1508},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,s.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v3.js"}],[1508,{"./parse.js":1501,"./stringify.js":1505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,a,o){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,i.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,a){o=o||0;for(let e=0;e<16;++e)a[o+e]=u[e];return a}return(0,s.unsafeStringify)(u)}try{n.name=e}catch(e){}return n.DNS=a,n.URL=o,n};var n,s=e("./stringify.js"),i=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v35.js"}],[1509,{"./native.js":1499,"./rng.js":1503,"./stringify.js":1505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./native.js")),s=a(e("./rng.js")),i=e("./stringify.js");function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const a=(e=e||{}).random||(e.rng||s.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return(0,i.unsafeStringify)(a)};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v4.js"}],[151,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:21,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[1510,{"./sha1.js":1504,"./v35.js":1508},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,s.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v5.js"}],[1511,{"./regex.js":1502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var i=function(e){return"string"==typeof e&&s.default.test(e)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/validate.js"}],[1512,{"./validate.js":1511},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/version.js"}],[152,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:22,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==n.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[153,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:23,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let n=!0;for(;r.length>40&&n;){const e=r.findIndex((e=>e.status===s.TransactionStatus.failed||e.status===s.TransactionStatus.rejected||e.status===s.TransactionStatus.confirmed||e.status===s.TransactionStatus.dropped));e<0?n=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[154,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map(((e,t)=>(e.status===s.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e))),t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[1543,{"./trezor-bridge":1544,"./trezor-connect-bridge":1545,"./trezor-keyring":1546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./trezor-keyring"),r),s(e("./trezor-bridge"),r),s(e("./trezor-connect-bridge"),r)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.js"}],[1544,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-bridge.js"}],[1545,{"@trezor/connect-web":3152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorConnectBridge=void 0;const a=i(e("@trezor/connect-web"));r.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){a.default.on(a.DEVICE_EVENT,(e=>{var t;e.type===a.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)})),this.trezorConnectInitiated||(await a.default.init(e),this.trezorConnectInitiated=!0)}dispose(){return a.default.dispose(),Promise.resolve()}getPublicKey(e){return a.default.getPublicKey(e)}ethereumSignTransaction(e){return a.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return a.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return a.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.js"}],[1546,{"@ethereumjs/tx":456,"@ethereumjs/util":468,"@trezor/connect-plugin-ethereum":3144,buffer:3661,events:3968,hdkey:4278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,s,i,a,o,c,u=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&u(t,e,r);return l(t,e),t},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorKeyring=r.TREZOR_CONNECT_MANIFEST=void 0;const f=e("events"),m=d(e("@ethereumjs/util")),g=p(e("hdkey")),y=e("@ethereumjs/tx"),v=e("@trezor/connect-plugin-ethereum"),w="m/44'/60'/0'/0",_={[w]:!0,"m/44'/60'/0'":!0,"m/44'/1'/0'/0":!0},b="Trezor Hardware",k=1e3;async function S(e){return new Promise((t=>setTimeout(t,e)))}function E(e){return"function"==typeof e.getChainId}r.TREZOR_CONNECT_MANIFEST={email:"support@metamask.io",appUrl:"https://metamask.io"};class j extends f.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=b,this.accounts=[],this.hdk=new g.default,this.hdPath=w,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}init(){return this.bridge.init({manifest:r.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e={}){var t,r,n,s;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:w,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.page=null!==(n=e.page)&&void 0!==n?n:0,this.perPage=null!==(s=e.perPage)&&void 0!==s?s:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise(((e,r)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then((n=>{var s;n.success?(this.hdk.publicKey=t.from(n.payload.publicKey,"hex"),this.hdk.chainCode=t.from(n.payload.chainCode,"hex"),e("just unlocked")):r(new Error((null===(s=n.payload)||void 0===s?void 0:s.error)||"Unknown error"))})).catch((e=>{r(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((r=>{const s=this.unlockedAccount,i=s+e;for(let e=s;e<i;e++){const t=h(this,n,"m",o).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t]),this.page=0}t(this.accounts)})).catch((e=>{r(e)}))}))}async getFirstPage(){return this.page=0,h(this,n,"m",s).call(this,1)}async getNextPage(){return h(this,n,"m",s).call(this,1)}async getPreviousPage(){return h(this,n,"m",s).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){return E(r)?h(this,n,"m",i).call(this,e,r.getChainId(),r,(e=>(r.v=t.from(e.v,"hex"),r.r=t.from(e.r,"hex"),r.s=t.from(e.s,"hex"),r))):h(this,n,"m",i).call(this,e,Number(r.common.chainId()),r,(e=>{const t=r.toJSON();return t.type=r.type,t.v=m.addHexPrefix(e.v),t.r=m.addHexPrefix(e.r),t.s=m.addHexPrefix(e.s),y.TransactionFactory.fromTxData(t,{common:r.common,freeze:Object.isFrozen(r)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise(((r,s)=>{this.unlock().then((i=>{setTimeout((()=>{this.bridge.ethereumSignMessage({path:h(this,n,"m",c).call(this,e),message:m.stripHexPrefix(t),hex:!0}).then((t=>{var n;if(t.success){t.payload.address!==m.toChecksumAddress(e)&&s(new Error("signature doesnt match the right address"));const n=`0x${t.payload.signature}`;r(n)}else s(new Error((null===(n=t.payload)||void 0===n?void 0:n.error)||"Unknown error"))})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}),"just unlocked"===i?k:0)})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}async signTypedData(e,t,{version:r}){var s,i;const a=(0,v.transformTypedData)(t,"V4"===r),{types:o,message:u={},domain:l={},primaryType:d,domain_separator_hash:p,message_hash:f}=a,g=await this.unlock();await S("just unlocked"===g?k:0);const y=await this.bridge.ethereumSignTypedData({path:h(this,n,"m",c).call(this,e),data:{types:Object.assign(Object.assign({},o),{EIP712Domain:null!==(s=o.EIP712Domain)&&void 0!==s?s:[]}),message:u,domain:l,primaryType:d},metamask_v4_compat:!0,domain_separator_hash:p,message_hash:null!=f?f:""});if(y.success){if(m.toChecksumAddress(e)!==y.payload.address)throw new Error("signature doesnt match the right address");return y.payload.signature}throw new Error((null===(i=y.payload)||void 0===i?void 0:i.error)||"Unknown error")}async exportAccount(){return Promise.reject(new Error("Not supported on this device"))}forgetDevice(){this.accounts=[],this.hdk=new g.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!_[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new g.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}r.TrezorKeyring=j,n=new WeakSet,s=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise(((e,t)=>{this.unlock().then((t=>{const r=(this.page-1)*this.perPage,s=r+this.perPage,i=[];for(let e=r;e<s;e++){const t=h(this,n,"m",o).call(this,"m",e);i.push({address:t,balance:null,index:e}),this.paths[m.toChecksumAddress(t)]=e}e(i)})).catch((e=>{t(e)}))}))},i=async function(e,t,r,s){var i,o;let u;u=E(r)?{to:h(this,n,"m",a).call(this,r.to),value:h(this,n,"m",a).call(this,r.value),data:h(this,n,"m",a).call(this,r.data),chainId:t,nonce:h(this,n,"m",a).call(this,r.nonce),gasLimit:h(this,n,"m",a).call(this,r.gasLimit),gasPrice:h(this,n,"m",a).call(this,r.gasPrice)}:Object.assign(Object.assign({},r.toJSON()),{chainId:t,to:h(this,n,"m",a).call(this,m.toBuffer(r.to))});try{const t=await this.unlock();await S("just unlocked"===t?k:0);const r=await this.bridge.ethereumSignTransaction({path:h(this,n,"m",c).call(this,e),transaction:u});if(r.success){const t=s(r.payload),n=m.toChecksumAddress(m.addHexPrefix(t.getSenderAddress().toString("hex")));if(n!==m.toChecksumAddress(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(i=r.payload)||void 0===i?void 0:i.error)||"Unknown error")}catch(e){throw new Error(null!==(o=null==e?void 0:e.toString())&&void 0!==o?o:"Unknown error")}},a=function(e){return m.bufferToHex(e).toString()},o=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=m.publicToAddress(r.publicKey,!0).toString("hex");return m.toChecksumAddress(`0x${n}`)},c=function(e){const t=m.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===h(this,n,"m",o).call(this,"m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`},j.type=b}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.js"}],[155,{"../lib/util":130,"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller"),i=e("../lib/util");r.default={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==s.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,i.addHexPrefix)(e).toLowerCase(),to:()=>(0,i.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,i.addHexPrefix)(e),value:e=>(0,i.addHexPrefix)(e),data:e=>(0,i.addHexPrefix)(e),gas:e=>(0,i.addHexPrefix)(e),gasPrice:e=>(0,i.addHexPrefix)(e)},r={};return Object.keys(t).forEach((n=>{e[n]&&(r[n]=t[n](e[n]))})),r}(e.txParams)),e)))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[156,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce(((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t)),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[157,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter((e=>e.status!==s.TransactionStatus.rejected))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[1572,{"@metamask/rpc-errors":2159,"@metamask/safe-event-emitter":2182,"@metamask/utils":1589},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,p,f,m,g=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},v=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcEngine=void 0;const w=e("@metamask/rpc-errors"),_=v(e("@metamask/safe-event-emitter")),b=e("@metamask/utils");class k extends _.default{constructor({notificationHandler:e}={}){super(),n.add(this),i.set(this,!1),a.set(this,void 0),o.set(this,void 0),g(this,a,[],"f"),g(this,o,e,"f")}destroy(){y(this,a,"f").forEach((e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()})),g(this,a,[],"f"),g(this,i,!0,"f")}push(e){y(this,n,"m",c).call(this),y(this,a,"f").push(e)}handle(e,t){if(y(this,n,"m",c).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?y(this,n,"m",u).call(this,e,t):y(this,n,"m",u).call(this,e):t?y(this,n,"m",l).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return y(this,n,"m",c).call(this),async(e,t,r,n)=>{try{const[i,o,c]=await y(s,s,"m",h).call(s,e,t,y(this,a,"f"));return o?(await y(s,s,"m",f).call(s,c),n(i)):r((async e=>{try{await y(s,s,"m",f).call(s,c)}catch(t){return e(t)}return e()}))}catch(e){return n(e)}}}async _promiseHandle(e){return new Promise(((t,r)=>{y(this,n,"m",l).call(this,e,((e,n)=>{e&&n===undefined?r(e):t(n)})).catch(r)}))}}function S(e){return JSON.stringify(e,null,2)}r.JsonRpcEngine=k,s=k,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(){if(y(this,i,"f"))throw new Error("This engine is destroyed and can no longer be used.")},u=async function(e,t){try{if(0===e.length){const e=[{id:null,jsonrpc:"2.0",error:new w.JsonRpcError(w.errorCodes.rpc.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}const r=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter((e=>e!==undefined));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}},l=async function(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const r=new w.JsonRpcError(w.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:null,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new w.JsonRpcError(w.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return y(this,o,"f")&&!(0,b.isJsonRpcRequest)(e)?t(null):t(r,{id:e.id??null,jsonrpc:"2.0",error:r})}if(y(this,o,"f")&&(0,b.isJsonRpcNotification)(e)&&!(0,b.isJsonRpcRequest)(e)){try{await y(this,o,"f").call(this,e)}catch(r){return t(r)}return t(null)}let r=null;const n={...e},i={id:n.id,jsonrpc:n.jsonrpc};try{await y(s,s,"m",d).call(s,n,i,y(this,a,"f"))}catch(e){r=e}return r&&(delete i.result,i.error||(i.error=(0,w.serializeError)(r))),t(r,i)},d=async function(e,t,r){const[n,i,a]=await y(s,s,"m",h).call(s,e,t,r);if(y(s,s,"m",m).call(s,e,t,i),await y(s,s,"m",f).call(s,a),n)throw n},h=async function(e,t,r){const n=[];let i=null,a=!1;for(const o of r)if([i,a]=await y(s,s,"m",p).call(s,e,t,o,n),a)break;return[i,a,n.reverse()]},p=async function(e,t,r,n){return new Promise((s=>{const i=e=>{const r=e||t.error;r&&(t.error=(0,w.serializeError)(r)),s([r,!0])},a=r=>{t.error?i(t.error):(r&&("function"!=typeof r&&i(new w.JsonRpcError(w.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${S(e)}`,{request:e})),n.push(r)),s([null,!1]))};try{r(e,t,a,i)}catch(e){i(e)}}))},f=async function(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))},m=function(e,t,r){if(!(0,b.hasProperty)(t,"result")&&!(0,b.hasProperty)(t,"error"))throw new w.JsonRpcError(w.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${S(e)}`,{request:e});if(!r)throw new w.JsonRpcError(w.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${S(e)}`,{request:e})}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/JsonRpcEngine.cjs"}],[1573,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAsyncMiddleware=void 0,r.createAsyncMiddleware=function(e){return async(t,r,n,s)=>{let i;const a=new Promise((e=>{i=e}));let o=null,c=!1;const u=async()=>(c=!0,n((e=>{o=e,i()})),a);try{await e(t,r,u),c?(await a,o(null)):s(null)}catch(e){o?o(e):s(e)}}}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/createAsyncMiddleware.cjs"}],[1574,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createScaffoldMiddleware=void 0,r.createScaffoldMiddleware=function(e){return(t,r,n,s)=>{const i=e[t.method];return i===undefined?n():"function"==typeof i?i(t,r,n,s):(r.result=i,s())}}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/createScaffoldMiddleware.cjs"}],[1575,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getUniqueId=void 0;const n=4294967295;let s=Math.floor(Math.random()*n);r.getUniqueId=function(){return s=(s+1)%n,s}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/getUniqueId.cjs"}],[1576,{"./getUniqueId.cjs":1575},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createIdRemapMiddleware=void 0;const n=e("./getUniqueId.cjs");r.createIdRemapMiddleware=function(){return(e,t,r,s)=>{const i=e.id,a=(0,n.getUniqueId)();e.id=a,t.id=a,r((r=>{e.id=i,t.id=i,r()}))}}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/idRemapMiddleware.cjs"}],[1577,{"./JsonRpcEngine.cjs":1572,"./createAsyncMiddleware.cjs":1573,"./createScaffoldMiddleware.cjs":1574,"./getUniqueId.cjs":1575,"./idRemapMiddleware.cjs":1576,"./mergeMiddleware.cjs":1578},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mergeMiddleware=r.JsonRpcEngine=r.createIdRemapMiddleware=r.getUniqueId=r.createScaffoldMiddleware=r.createAsyncMiddleware=void 0;var n=e("./createAsyncMiddleware.cjs");Object.defineProperty(r,"createAsyncMiddleware",{enumerable:!0,get:function(){return n.createAsyncMiddleware}});var s=e("./createScaffoldMiddleware.cjs");Object.defineProperty(r,"createScaffoldMiddleware",{enumerable:!0,get:function(){return s.createScaffoldMiddleware}});var i=e("./getUniqueId.cjs");Object.defineProperty(r,"getUniqueId",{enumerable:!0,get:function(){return i.getUniqueId}});var a=e("./idRemapMiddleware.cjs");Object.defineProperty(r,"createIdRemapMiddleware",{enumerable:!0,get:function(){return a.createIdRemapMiddleware}});var o=e("./JsonRpcEngine.cjs");Object.defineProperty(r,"JsonRpcEngine",{enumerable:!0,get:function(){return o.JsonRpcEngine}});var c=e("./mergeMiddleware.cjs");Object.defineProperty(r,"mergeMiddleware",{enumerable:!0,get:function(){return c.mergeMiddleware}})}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/index.cjs"}],[1578,{"./JsonRpcEngine.cjs":1572},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mergeMiddleware=void 0;const n=e("./JsonRpcEngine.cjs");r.mergeMiddleware=function(e){const t=new n.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/mergeMiddleware.cjs"}],[1579,{"./errors.cjs":1587,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/assert.cjs"}],[158,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach((e=>{t.PreferencesController.accountTokens[e]={mainnet:r}})),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[1580,{"./assert.cjs":1579,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/base64.cjs"}],[1581,{"./assert.cjs":1579,"./hex.cjs":1588,"@scure/base":2935,buffer:3661},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function p(e){d(e);const t=h(e);return BigInt(t)}function f(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<o?a:c),u=s-(s<o?a:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?f(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=p,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=p(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=f,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/bytes.cjs"}],[1582,{"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAssetId=r.isCaipAssetType=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAssetIdStruct=r.CaipAssetTypeStruct=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ASSET_ID_REGEX=r.CAIP_ASSET_TYPE_REGEX=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),r.CaipAssetTypeStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_TYPE_REGEX),r.CaipAssetIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.isCaipAssetType=function(e){return(0,n.is)(e,r.CaipAssetTypeStruct)},r.isCaipAssetId=function(e){return(0,n.is)(e,r.CaipAssetIdStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1583,{"./base64.cjs":1580,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/checksum.cjs"}],[1584,{"./assert.cjs":1579,"./bytes.cjs":1581,"./hex.cjs":1588,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),u=(0,n.coerce)((0,n.bigint)(),o,BigInt),l=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/coercers.cjs"}],[1585,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/collections.cjs"}],[1586,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1587,{"./misc.cjs":1593,"pony-cause":4620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/errors.cjs"}],[1588,{"./assert.cjs":1579,"./bytes.cjs":1581,"@metamask/superstruct":2715,"@noble/hashes/sha3":2916},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/hex.cjs"}],[1589,{"./assert.cjs":1579,"./base64.cjs":1580,"./bytes.cjs":1581,"./caip-types.cjs":1582,"./checksum.cjs":1583,"./coercers.cjs":1584,"./collections.cjs":1585,"./encryption-types.cjs":1586,"./errors.cjs":1587,"./hex.cjs":1588,"./json.cjs":1590,"./keyring.cjs":1591,"./logging.cjs":1592,"./misc.cjs":1593,"./number.cjs":1594,"./opaque.cjs":1595,"./promise.cjs":1596,"./time.cjs":1597,"./transaction-types.cjs":1598,"./versions.cjs":1599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/index.cjs"}],[159,{"./fail-tx":278,"@metamask/transaction-controller":2741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@metamask/transaction-controller"),i=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};r.default={version:29,migrate:(0,i.default)(29,"Stuck in approved state for too long.",(e=>{const t=e.status===s.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5}))}}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[1590,{"./assert.cjs":1579,"./misc.cjs":1593,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}function c(e){if(null===e||"boolean"==typeof e||"string"==typeof e)return!0;if("number"==typeof e&&Number.isFinite(e))return!0;if("object"==typeof e){let t=!0;if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(!c(e[r])){t=!1;break}return t}const r=Object.entries(e);for(let e=0;e<r.length;e++)if("string"!=typeof r[e][0]||!c(r[e][1])){t=!1;break}return t}return!1}function u(e){return(0,n.create)(e,r.JsonStruct)}r.object=e=>(0,n.object)(e),r.exactOptional=o,r.UnsafeJsonStruct=(0,n.define)("JSON",(e=>c(e))),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return u(e),!0}catch{return!1}},r.getSafeJson=u,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(r.JsonStruct),stack:o((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/json.cjs"}],[1591,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/keyring.cjs"}],[1592,{debug:3806},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/logging.cjs"}],[1593,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/misc.cjs"}],[1594,{"./assert.cjs":1579,"./hex.cjs":1588},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/number.cjs"}],[1595,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/opaque.cjs"}],[1596,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/promise.cjs"}],[1597,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/time.cjs"}],[1598,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1599,{"./assert.cjs":1579,"@metamask/superstruct":2715,semver:4949},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/versions.cjs"}],[160,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach(((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId})),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[1600,{"@metamask/safe-event-emitter":2182,"@metamask/utils":2866,"readable-stream":4899},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@metamask/safe-event-emitter"),i=(n=s)&&n.__esModule?n:{default:n},a=e("@metamask/utils"),o=e("readable-stream");r.createStreamMiddleware=function(e={}){const t={},r=new(0,o.Duplex)({objectMode:!0,read:()=>{},write:function(r,i,o){let c=null;try{!a.hasProperty.call(void 0,r,"id")?function(r){e?.retryOnMessage&&r.method===e.retryOnMessage&&Object.values(t).forEach((({req:e,retryCount:r=0})=>{if(!e.id)return;if(r>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);const n=t[e.id];n&&(n.retryCount=r+1),s(e)}));n.emit("notification",r)}(r):function(e){const{id:r}=e;if(null===r)return;const n=t[r];if(!n)return void console.warn(`StreamMiddleware - Unknown response id "${r}"`);delete t[r],Object.assign(n.res,e),setTimeout(n.end)}(r)}catch(e){c=e}o(c)}}),n=new(0,i.default);return{events:n,middleware:(e,r,n,i)=>{t[e.id]={req:e,res:r,next:n,end:i},s(e)},stream:r};function s(e){r.push(e)}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-CUV6EOT3.js"}],[1601,{"readable-stream":4899},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("readable-stream");r.createEngineStream=function(e){if(!e?.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,r=new(0,n.Duplex)({objectMode:!0,read:()=>{},write:function(e,n,s){t.handle(e,((e,t)=>{r.push(t)})),s()}});return t.on&&t.on("notification",(e=>{r.push(e)})),r}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-IDTAZSDC.js"}],[1602,{"./chunk-CUV6EOT3.js":1600,"./chunk-IDTAZSDC.js":1601},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-IDTAZSDC.js"),s=e("./chunk-CUV6EOT3.js");r.createEngineStream=n.createEngineStream,r.createStreamMiddleware=s.createStreamMiddleware}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/index.js"}],[161,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[162,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[163,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[164,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[165,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}}}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[166,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[167,{"@metamask/controller-utils":1218,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/controller-utils");r.default={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach((e=>{r.add(e.chainId)}));for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,s.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[1675,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.GenericLog="GenericLog",e.EthSignLog="EthSignLog",e))(n||{});r.LogType=n}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-B6ES7RHK.js"}],[1676,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-JUURNM6C.js"}],[1677,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.PersonalSign="personal_sign",e.EthSignTypedData="eth_signTypedData",e.EthSignTypedDataV3="eth_signTypedData_v3",e.EthSignTypedDataV4="eth_signTypedData_v4",e))(n||{}),s=(e=>(e.Proposed="proposed",e.Rejected="rejected",e.Signed="signed",e))(s||{});r.SigningMethod=n,r.SigningStage=s}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-OL334B2K.js"}],[1678,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-PMCRFQY3.js"}],[1679,{"./chunk-UJIPPGP6.js":1680,"@metamask/base-controller":1192,uuid:5066},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i=e("./chunk-UJIPPGP6.js"),a=e("@metamask/base-controller"),o=e("uuid"),c="LoggingController",u={logs:{persist:!0,anonymous:!1}},l={logs:{}},d=class extends a.BaseController{constructor({messenger:e,state:t}){super({name:c,metadata:u,messenger:e,state:{...l,...t}}),i.__privateAdd.call(void 0,this,n),this.messagingSystem.registerActionHandler(`${c}:add`,(e=>this.add(e)))}add(e){const t={id:i.__privateMethod.call(void 0,this,n,s).call(this),timestamp:Date.now(),log:e};this.update((e=>{e.logs[t.id]=t}))}clear(){this.update((e=>{e.logs={}}))}};n=new WeakSet,s=function(){let e=o.v1.call(void 0);for(;e in this.state.logs;)e=o.v1.call(void 0);return e},r.LoggingController=d}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-PUAQGX73.js"}],[168,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[1680,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateMethod=(e,t,r)=>(((e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)})(e,t,"access private method"),r)}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-UJIPPGP6.js"}],[1681,{"./chunk-B6ES7RHK.js":1675,"./chunk-JUURNM6C.js":1676,"./chunk-OL334B2K.js":1677,"./chunk-PMCRFQY3.js":1678,"./chunk-PUAQGX73.js":1679,"./chunk-UJIPPGP6.js":1680},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-PUAQGX73.js");e("./chunk-PMCRFQY3.js");var s=e("./chunk-OL334B2K.js");e("./chunk-JUURNM6C.js");var i=e("./chunk-B6ES7RHK.js");e("./chunk-UJIPPGP6.js"),r.LogType=i.LogType,r.LoggingController=n.LoggingController,r.SigningMethod=s.SigningMethod,r.SigningStage=s.SigningStage}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/index.js"}],[1685,{"./chunk-4R6XDQI5.js":1686,"./chunk-E3LTYZLZ.js":1687,"@metamask/controller-utils":1218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4R6XDQI5.js"),s=e("./chunk-E3LTYZLZ.js"),i=e("@metamask/controller-utils"),a=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}async addUnapprovedMessage(e,t){s.validateSignMessageData.call(void 0,e);const r=i.detectSIWE.call(void 0,e),n=this.addRequestToMessageParams(e,t);n.data=s.normalizeMessageData.call(void 0,e.data),n.siwe=r;const a=this.createUnapprovedMessage(n,i.ApprovalType.PersonalSign,t),o=a.id;return await this.addMessage(a),this.hub.emit("unapprovedMessage",{...n,metamaskId:o}),o}prepMessageForSigning(e){const{metamaskId:t,...r}=e;return Promise.resolve(r)}},o=a;r.PersonalMessageManager=a,r.PersonalMessageManager_default=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-4JJ4OG3I.js"}],[1686,{"@metamask/base-controller":1192,events:3968,uuid:5066},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("events"),i=e("uuid"),a=class extends n.BaseControllerV1{constructor(e,t,r,n,i){super(e,t),this.hub=new(0,s.EventEmitter),this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=n??[],this.getCurrentChainId=i,this.initialize()}addRequestToMessageParams(e,t){const r={...e};return t&&(r.requestId=t.id,r.origin=t.origin),r}createUnapprovedMessage(e,t,r){return{id:i.v1.call(void 0),messageParams:e,securityAlertResponse:r?.securityAlertResponse,status:"unapproved",time:Date.now(),type:t}}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}async securityCheck(e){if(this.securityProviderRequest){const t=await this.securityProviderRequest(e,e.type);return{...e,securityProviderResponse:t}}return e}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addMessage(e){const t=await this.securityCheck(e);this.messages.push(t),this.saveMessageList()}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}async waitForFinishStatus(e,t){const{metamaskId:r,...n}=e;return new Promise(((e,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}))}},o=a;r.AbstractMessageManager=a,r.AbstractMessageManager_default=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-4R6XDQI5.js"}],[1687,{"@metamask/controller-utils":1218,"@metamask/eth-sig-util":1482,"@metamask/utils":2866,buffer:3661,jsonschema:4336},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/controller-utils"),s=e("@metamask/eth-sig-util"),i=e("@metamask/utils"),a=e("jsonschema"),o=/^[0-9A-Fa-f]+$/gu;function c(e,t){if(!e||"string"!=typeof e||!n.isValidHexAddress.call(void 0,e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=i.remove0x.call(void 0,e);if(t.match(o))return i.add0x.call(void 0,t)}catch(e){}return i.bytesToHex.call(void 0,t.from(e,"utf8"))},r.validateSignMessageData=function(e){const{from:t,data:r}=e;if(c(t,"from"),!r||"string"!=typeof r)throw new Error(`Invalid message "data": ${r} must be a valid string.`)},r.validateTypedSignMessageDataV1=function(e){if(c(e.from,"from"),!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{s.typedSignatureHash.call(void 0,e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},r.validateTypedSignMessageDataV3V4=function(e,t){if(c(e.from,"from"),!e.data||Array.isArray(e.data)||"object"!=typeof e.data&&"string"!=typeof e.data)throw new Error('Invalid message "data": Must be a valid string or object.');let r;if("object"==typeof e.data)r=e.data;else try{r=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if(a.validate.call(void 0,r,s.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.");if(!t)throw new Error("Current chainId cannot be null or undefined.");let{chainId:n}=r.domain;if(n){"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10));const e=parseInt(t,16);if(Number.isNaN(e))throw new Error(`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`);if(n!==e)throw new Error(`Provided chainId "${n}" must match the active chainId "${e}"`)}},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;c(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;c(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-E3LTYZLZ.js"}],[1688,{"./chunk-4R6XDQI5.js":1686,"./chunk-E3LTYZLZ.js":1687,"@metamask/controller-utils":1218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4R6XDQI5.js"),s=e("./chunk-E3LTYZLZ.js"),i=e("@metamask/controller-utils"),a=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}async addUnapprovedMessage(e,t,r){if("V1"===r&&s.validateTypedSignMessageDataV1.call(void 0,e),"V3"===r||"V4"===r){const t=this.getCurrentChainId?.();s.validateTypedSignMessageDataV3V4.call(void 0,e,t)}"string"==typeof e.data||"V3"!==r&&"V4"!==r||(e.data=JSON.stringify(e.data));const n=this.addRequestToMessageParams(e,t),a=this.createUnapprovedMessage(n,i.ApprovalType.EthSignTypedData,t),o=a.id;return await this.addMessage(a),this.hub.emit("unapprovedMessage",{...e,metamaskId:o,version:r}),o}setMessageStatusErrored(e,t){const r=this.getMessage(e);r&&(r.error=t,this.updateMessage(r),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){const{metamaskId:t,version:r,...n}=e;return Promise.resolve(n)}},o=a;r.TypedMessageManager=a,r.TypedMessageManager_default=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-OPSXL77K.js"}],[1689,{"./chunk-4R6XDQI5.js":1686,"./chunk-E3LTYZLZ.js":1687,"@metamask/controller-utils":1218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4R6XDQI5.js"),s=e("./chunk-E3LTYZLZ.js"),i=e("@metamask/controller-utils"),a=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}async addUnapprovedMessageAsync(e,t){s.validateEncryptionPublicKeyMessageData.call(void 0,e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return n(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){const r=this.addRequestToMessageParams(e,t),n=this.createUnapprovedMessage(r,i.ApprovalType.EthGetEncryptionPublicKey,t),s=n.id;return await this.addMessage(n),this.hub.emit("unapprovedMessage",{...r,metamaskId:s}),s}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}},o=a;r.EncryptionPublicKeyManager=a,r.EncryptionPublicKeyManager_default=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-SNLKWYZE.js"}],[169,{"../../../shared/modules/hexstring-utils":5194,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/modules/hexstring-utils");const i="0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",a="DAI",o="SAI";function c(e={}){return e&&"object"==typeof e&&e.symbol===a&&(0,s.toChecksumHexAddress)(e.address)===i}r.default={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)c(t)&&(t.symbol=o);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)c(e)&&(e.symbol=o)}}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[1690,{"./chunk-4R6XDQI5.js":1686,"./chunk-E3LTYZLZ.js":1687,"@metamask/controller-utils":1218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4R6XDQI5.js"),s=e("./chunk-E3LTYZLZ.js"),i=e("@metamask/controller-utils"),a=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}async addUnapprovedMessageAsync(e,t){s.validateDecryptedMessageData.call(void 0,e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return n(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return n(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return n(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){const r=this.addRequestToMessageParams(e,t);e.data=s.normalizeMessageData.call(void 0,e.data);const n=this.createUnapprovedMessage(r,i.ApprovalType.EthDecrypt,t),a=n.id;return await this.addMessage(n),this.hub.emit("unapprovedMessage",{...r,metamaskId:a}),a}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}};r.DecryptMessageManager=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-VU4XI5EX.js"}],[1691,{"./chunk-4JJ4OG3I.js":1685,"./chunk-4R6XDQI5.js":1686,"./chunk-E3LTYZLZ.js":1687,"./chunk-OPSXL77K.js":1688,"./chunk-SNLKWYZE.js":1689,"./chunk-VU4XI5EX.js":1690},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-VU4XI5EX.js"),s=e("./chunk-SNLKWYZE.js"),i=e("./chunk-4JJ4OG3I.js"),a=e("./chunk-OPSXL77K.js"),o=e("./chunk-4R6XDQI5.js");e("./chunk-E3LTYZLZ.js"),r.AbstractMessageManager=o.AbstractMessageManager,r.DecryptMessageManager=n.DecryptMessageManager,r.EncryptionPublicKeyManager=s.EncryptionPublicKeyManager,r.PersonalMessageManager=i.PersonalMessageManager,r.TypedMessageManager=a.TypedMessageManager}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.js"}],[1692,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={snapId:"npm:@metamask/message-signing-snap",manifest:{version:"0.4.0",description:"Automatic message signing of MetaMask tagged messages",proposedName:"MetaMask Message Signing Snap",repository:{type:"git",url:"https://github.com/MetaMask/message-signing-snap.git"},source:{shasum:"LAgptN++khoaukUy3XKLBOO+KSU41rPiLsLFk1Uwuws=",location:{npm:{filePath:"dist/bundle.js",iconPath:"images/icon.svg",packageName:"@metamask/message-signing-snap",registry:"https://registry.npmjs.org/"}}},initialConnections:{"https://portfolio.metamask.io":{},"https://portfolio-builds.metafi-dev.codefi.network":{}},initialPermissions:{snap_getEntropy:{},"endowment:rpc":{dapps:!0,snaps:!1}},manifestVersion:"0.1"},files:[{path:"images/icon.svg",value:'<svg width="500" height="500" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="500" height="500" fill="black"/>\n<g filter="url(#filter0_f_8_91)">\n<path d="M249.444 373.519C249.444 373.519 364.118 343.192 364.118 257.188L378.333 248.251L364.118 239.314L378.333 230.378L364.118 221.441V203.568V185.695V149.948V114.202L301.639 132.596C267.566 142.628 231.323 142.628 197.25 132.596L134.771 114.202V149.948V167.821V185.695V203.568V221.441L120.556 230.378L134.771 239.314L120.556 248.251L134.771 257.188C134.771 343.192 249.444 373.519 249.444 373.519Z" fill="#F1CA77"/>\n</g>\n<path d="M249.445 406.215C249.445 406.215 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 406.215 249.445 406.215Z" fill="#233447"/>\n<path d="M249.445 399.107C249.445 399.107 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 399.107 249.445 399.107Z" fill="#123AF0"/>\n<path d="M249.445 392C249.445 392 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 392 249.445 392Z" fill="#CD6116"/>\n<path d="M249.445 382.049C249.445 382.049 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 382.049 249.445 382.049Z" fill="#E4751F"/>\n<path d="M249.445 370.676C249.445 370.676 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 370.676 249.445 370.676Z" fill="#F6851B"/>\n<path d="M249.445 352.196C249.445 352.196 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888C290.105 147.184 208.784 147.184 134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 352.196 249.445 352.196Z" fill="url(#paint0_linear_8_91)"/>\n<defs>\n<filter id="filter0_f_8_91" x="94.9674" y="88.6133" width="308.954" height="310.494" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n<feGaussianBlur stdDeviation="12.7941" result="effect1_foregroundBlur_8_91"/>\n</filter>\n<linearGradient id="paint0_linear_8_91" x1="144.012" y1="132.09" x2="425.482" y2="446.967" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F1CA77"/>\n<stop offset="1" stop-color="#F6851B"/>\n</linearGradient>\n</defs>\n</svg>\n'},{path:"dist/bundle.js",value:'(()=>{var e={463:e=>{e.exports=a,a.default=a,a.stable=u,a.stableStringify=u;var t="[...]",n="[Circular]",r=[],s=[];function i(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function a(e,t,n,a){var o;void 0===a&&(a=i()),c(e,"",0,[],void 0,0,a);try{o=0===s.length?JSON.stringify(e,t,n):JSON.stringify(e,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var d=r.pop();4===d.length?Object.defineProperty(d[0],d[1],d[3]):d[0][d[1]]=d[2]}}return o}function o(e,t,n,i){var a=Object.getOwnPropertyDescriptor(i,n);void 0!==a.get?a.configurable?(Object.defineProperty(i,n,{value:e}),r.push([i,n,t,a])):s.push([t,n,e]):(i[n]=e,r.push([i,n,t]))}function c(e,r,s,i,a,d,u){var l;if(d+=1,"object"==typeof e&&null!==e){for(l=0;l<i.length;l++)if(i[l]===e)return void o(n,e,r,a);if(void 0!==u.depthLimit&&d>u.depthLimit)return void o(t,e,r,a);if(void 0!==u.edgesLimit&&s+1>u.edgesLimit)return void o(t,e,r,a);if(i.push(e),Array.isArray(e))for(l=0;l<e.length;l++)c(e[l],l,l,i,e,d,u);else{var h=Object.keys(e);for(l=0;l<h.length;l++){var f=h[l];c(e[f],f,l,i,e,d,u)}}i.pop()}}function d(e,t){return e<t?-1:e>t?1:0}function u(e,t,n,a){void 0===a&&(a=i());var o,c=l(e,"",0,[],void 0,0,a)||e;try{o=0===s.length?JSON.stringify(c,t,n):JSON.stringify(c,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var d=r.pop();4===d.length?Object.defineProperty(d[0],d[1],d[3]):d[0][d[1]]=d[2]}}return o}function l(e,s,i,a,c,u,h){var f;if(u+=1,"object"==typeof e&&null!==e){for(f=0;f<a.length;f++)if(a[f]===e)return void o(n,e,s,c);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==h.depthLimit&&u>h.depthLimit)return void o(t,e,s,c);if(void 0!==h.edgesLimit&&i+1>h.edgesLimit)return void o(t,e,s,c);if(a.push(e),Array.isArray(e))for(f=0;f<e.length;f++)l(e[f],f,f,a,e,u,h);else{var p={},m=Object.keys(e).sort(d);for(f=0;f<m.length;f++){var g=m[f];l(e[g],g,f,a,e,u,h),p[g]=e[g]}if(void 0===c)return p;r.push([c,s,e]),c[s]=p}a.pop()}}function h(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(s.length>0)for(var r=0;r<s.length;r++){var i=s[r];if(i[1]===t&&i[0]===n){n=i[2],s.splice(r,1);break}}return e.call(this,t,n)}}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{onRpcRequest:()=>xs});var e={};n.r(e),n.d(e,{aK:()=>ur,e8:()=>Wn,DO:()=>Kn,dJ:()=>lr,OG:()=>hr,My:()=>Yn,Ph:()=>nr,lX:()=>rr,Id:()=>or,fg:()=>mr,qj:()=>ar,aT:()=>tr,r4:()=>dr,aY:()=>Hn,x:()=>vr,lq:()=>sr,z:()=>ir,zW:()=>Gn,Q5:()=>yr});var t={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},s={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function i(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}const a=(e,t)=>Object.hasOwnProperty.call(e,t);var o;!function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(o=o||(o={}));class c extends TypeError{constructor(e,t){let n;const{message:r,explanation:s,...i}=e,{path:a}=e,o=0===a.length?r:`At path: ${a.join(".")} -- ${r}`;super(s??o),null!=s&&(this.cause=o),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function d(e){return"object"==typeof e&&null!==e}function u(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function l(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:s,branch:i}=t,{type:a}=n,{refinement:o,message:c=`Expected a value of type \\`${a}\\`${o?` with refinement \\`${o}\\``:""}, but received: \\`${u(r)}\\``}=e;return{value:r,type:a,refinement:o,key:s[s.length-1],path:s,branch:i,...e,message:c}}function*h(e,t,n,r){(function(e){return d(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const s of e){const e=l(s,t,n,r);e&&(yield e)}}function*f(e,t,n={}){const{path:r=[],branch:s=[e],coerce:i=!1,mask:a=!1}=n,o={path:r,branch:s};if(i&&(e=t.coercer(e,o),a&&"type"!==t.type&&d(t.schema)&&d(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let c="valid";for(const r of t.validator(e,o))r.explanation=n.message,c="not_valid",yield[r,void 0];for(let[u,l,h]of t.entries(e,o)){const t=f(l,h,{path:void 0===u?r:[...r,u],branch:void 0===u?s:[...s,l],coerce:i,mask:a,message:n.message});for(const n of t)n[0]?(c=null===n[0].refinement||void 0===n[0].refinement?"not_valid":"not_refined",yield[n[0],void 0]):i&&(l=n[1],void 0===u?e=l:e instanceof Map?e.set(u,l):e instanceof Set?e.add(l):d(e)&&(void 0!==l||u in e)&&(e[u]=l))}if("not_valid"!==c)for(const r of t.refiner(e,o))r.explanation=n.message,c="not_refined",yield[r,void 0];"valid"===c&&(yield[void 0,e])}class p{constructor(e){const{type:t,schema:n,validator:r,refiner:s,coercer:i=e=>e,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=i,this.validator=r?(e,t)=>h(r(e,t),t,this,e):()=>[],this.refiner=s?(e,t)=>h(s(e,t),t,this,e):()=>[]}assert(e,t){return m(e,this,t)}create(e,t){return g(e,this,t)}is(e){return y(e,this)}mask(e,t){return function(e,t,n){const r=v(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}(e,this,t)}validate(e,t={}){return v(e,this,t)}}function m(e,t,n){const r=v(e,t,{message:n});if(r[0])throw r[0]}function g(e,t,n){const r=v(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function y(e,t){return!v(e,t)[0]}function v(e,t,n={}){const r=f(e,t,n),s=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(r);if(s[0]){return[new c(s[0],(function*(){for(const e of r)e[0]&&(yield e[0])})),void 0]}return[void 0,s[1]]}function _(e,t){return new p({type:e,schema:null,validator:t})}function w(e){let t;return new p({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})}function b(e){return new p({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${u(e)}`})}function x(e){const t=u(e),n=typeof e;return new p({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \\`${t}\\`, but received: ${u(n)}`})}function E(){return _("never",(()=>!1))}function k(){return _("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${u(e)}`))}function O(e){const t=e?Object.keys(e):[],n=E();return new p({type:"object",schema:e??null,*entries(r){if(e&&d(r)){const s=new Set(Object.keys(r));for(const n of t)s.delete(n),yield[n,r[n],e[n]];for(const e of s)yield[e,r[e],n]}},validator:e=>d(e)||`Expected an object, but received: ${u(e)}`,coercer:e=>d(e)?{...e}:e})}function S(e){return new p({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function Z(e,t){return new p({type:"record",schema:null,*entries(n){if(d(n))for(const r in n){const s=n[r];yield[r,r,e],yield[r,s,t]}},validator:e=>d(e)||`Expected an object, but received: ${u(e)}`})}function N(){return _("string",(e=>"string"==typeof e||`Expected a string, but received: ${u(e)}`))}function T(e){const t=e.map((e=>e.type)).join(" | ");return new p({type:"union",schema:null,coercer(t){for(const n of e){const[e,r]=n.validate(t,{coerce:!0});if(!e)return r}return t},validator(n,r){const s=[];for(const t of e){const[...e]=f(n,t,r),[i]=e;if(!i?.[0])return[];for(const[t]of e)t&&s.push(t)}return[`Expected the value to satisfy a union of \\`${t}\\`, but received: ${u(n)}`,...s]}})}function A(e,t,n){return new p({...e,coercer:(r,s)=>y(r,t)?e.coercer(n(r,s),s):e.coercer(r,s)})}Error;function I(e){return function(e){return function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)&&"string"==typeof e.message?e.message:null==e?"":String(e)}(e).replace(/\\.$/u,"")}function j(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}class C extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}const B=e=>O(e);function R({path:e,branch:t}){const n=e[e.length-1];return a(t[t.length-2],n)}function P(e){return new p({...e,type:`optional ${e.type}`,validator:(t,n)=>!R(n)||e.validator(t,n),refiner:(t,n)=>!R(n)||e.refiner(t,n)})}const $=T([x(null),_("boolean",(e=>"boolean"==typeof e)),_("finite number",(e=>y(e,k())&&Number.isFinite(e))),N(),b(w((()=>$))),Z(N(),w((()=>$)))]),L=A($,_("any",(()=>!0)),(e=>(function(e,t,n="Assertion failed",r=C){try{m(e,t)}catch(e){throw j(r,`${n}: ${I(e)}.`)}}(e,$),JSON.parse(JSON.stringify(e,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))))));function U(e){try{return function(e){g(e,L)}(e),!0}catch{return!1}}const M=x("2.0"),z=(q=T([k(),N()]),new p({...q,validator:(e,t)=>null===e||q.validator(e,t),refiner:(e,t)=>null===e||q.refiner(e,t)}));var q;const D=B({code:_("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${u(e)}`)),message:N(),data:P(L),stack:P(N())}),F=T([Z(N(),L),b(L)]);B({id:z,jsonrpc:M,method:N(),params:P(F)}),B({jsonrpc:M,method:N(),params:P(F)});O({id:z,jsonrpc:M,result:S(_("unknown",(()=>!0))),error:S(D)});const V=B({id:z,jsonrpc:M,result:L}),H=B({id:z,jsonrpc:M,error:D});T([V,H]);var K=t.internal,W=(J(K),"Unspecified server error.");function J(e,t="Unspecified error message. This is a bug, please report it."){if(function(e){return Number.isInteger(e)}(e)){const t=e.toString();if(a(s,t))return s[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return W}return t}function Y(e){return Array.isArray(e)?e.map((e=>U(e)?e:i(e)?G(e):null)):i(e)?G(e):U(e)?e:null}function G(e){return Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return U(r)&&(t[n]=r),t}),{})}var X=n(463),Q=class extends Error{constructor(e,t,n){var r=(...e)=>{super(...e)};if(!Number.isInteger(e))throw new Error(\'"code" must be an integer.\');if(!t||"string"!=typeof t)throw new Error(\'"message" must be a non-empty string.\');!function(e){return i(e)&&a(e,"cause")&&i(e.cause)}(n)?r(t):(r(t,{cause:n.cause}),a(this,"cause")||Object.assign(this,{cause:n.cause})),void 0!==n&&(this.data=n),this.code=e}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}(this.data)&&(e.data.cause=Y(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return X(this.serialize(),ee,2)}};function ee(e,t){if("[Circular]"!==t)return t}var te,ne,re=e=>ie(t.invalidParams,e),se=e=>ie(t.methodNotFound,e);function ie(e,t){const[n,r]=ae(t);return new Q(e,n??J(e),r)}function ae(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??void 0,n]}}return[]}!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`\'${e}\'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(te||(te={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(ne||(ne={}));const oe=te.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ce=e=>{switch(typeof e){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return isNaN(e)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(e)?oe.array:null===e?oe.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?oe.promise:"undefined"!=typeof Map&&e instanceof Map?oe.map:"undefined"!=typeof Set&&e instanceof Set?oe.set:"undefined"!=typeof Date&&e instanceof Date?oe.date:oe.object;default:return oe.unknown}},de=te.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ue extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const s of e.issues)if("invalid_union"===s.code)s.unionErrors.map(r);else if("invalid_return_type"===s.code)r(s.returnTypeError);else if("invalid_arguments"===s.code)r(s.argumentsError);else if(0===s.path.length)n._errors.push(t(s));else{let e=n,r=0;for(;r<s.path.length;){const n=s.path[r];r===s.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(s))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof ue))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,te.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ue.create=e=>new ue(e);const le=(e,t)=>{let n;switch(e.code){case de.invalid_type:n=e.received===oe.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,te.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${te.joinValues(e.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${te.joinValues(e.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${te.joinValues(e.options)}, received \'${e.received}\'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:te.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case de.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case de.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=t.defaultError,te.assertNever(e)}return{message:n}};let he=le;function fe(){return he}const pe=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],a={...s,path:i};if(void 0!==s.message)return{...s,path:i,message:s.message};let o="";const c=r.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(a,{data:t,defaultError:o}).message;return{...s,path:i,message:o}};function me(e,t){const n=fe(),r=pe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===le?void 0:le].filter((e=>!!e))});e.common.issues.push(r)}class ge{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return ye;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,r=await e.value;n.push({key:t,value:r})}return ge.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:s}=r;if("aborted"===t.status)return ye;if("aborted"===s.status)return ye;"dirty"===t.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"===t.value||void 0===s.value&&!r.alwaysSet||(n[t.value]=s.value)}return{status:e.value,value:n}}}const ye=Object.freeze({status:"aborted"}),ve=e=>({status:"dirty",value:e}),_e=e=>({status:"valid",value:e}),we=e=>"aborted"===e.status,be=e=>"dirty"===e.status,xe=e=>"valid"===e.status,Ee=e=>"undefined"!=typeof Promise&&e instanceof Promise;function ke(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function Oe(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}var Se,Ze,Ne;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Se||(Se={}));class Te{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ae=(e,t)=>{if(xe(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ue(e.common.issues);return this._error=t,this._error}}};function Ie(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(\'Can\\\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.\');if(t)return{errorMap:t,description:s};return{errorMap:(t,s)=>{var i,a;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:s.defaultError}:void 0===s.data?{message:null!==(i=null!=o?o:r)&&void 0!==i?i:s.defaultError}:"invalid_type"!==t.code?{message:s.defaultError}:{message:null!==(a=null!=o?o:n)&&void 0!==a?a:s.defaultError}},description:s}}class je{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ce(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ce(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ge,ctx:{common:e.parent.common,data:e.data,parsedType:ce(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ee(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ce(e)},s=this._parseSync({data:e,path:r.path,parent:r});return Ae(r,s)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ce(e)},r=this._parse({data:e,path:n.path,parent:n}),s=await(Ee(r)?r:Promise.resolve(r));return Ae(n,s)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const s=e(t),i=()=>r.addIssue({code:de.custom,...n(t)});return"undefined"!=typeof Promise&&s instanceof Promise?s.then((e=>!!e||(i(),!1))):!!s||(i(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new St({schema:this,typeName:Lt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Zt.create(this,this._def)}nullable(){return Nt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ot.create(this,this._def)}promise(){return Ot.create(this,this._def)}or(e){return ut.create([this,e],this._def)}and(e){return pt.create(this,e,this._def)}transform(e){return new St({...Ie(this._def),schema:this,typeName:Lt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Tt({...Ie(this._def),innerType:this,defaultValue:t,typeName:Lt.ZodDefault})}brand(){return new Ct({typeName:Lt.ZodBranded,type:this,...Ie(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new At({...Ie(this._def),innerType:this,catchValue:t,typeName:Lt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Bt.create(this,e)}readonly(){return Rt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ce=/^c[^\\s-]{8,}$/i,Be=/^[0-9a-z]+$/,Re=/^[0-9A-HJKMNP-TV-Z]{26}$/,Pe=/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i,$e=/^[a-z0-9_-]{21}$/i,Le=/^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/,Ue=/^(?!\\.)(?!.*\\.\\.)([A-Z0-9_\'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;let Me;const ze=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,De=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Fe="((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))",Ve=new RegExp(`^${Fe}$`);function He(e){let t="([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d";return e.precision?t=`${t}\\\\.\\\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\\\.\\\\d+)?`),t}function Ke(e){let t=`${Fe}T${He(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\\\d{2}:?\\\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}class We extends je{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==oe.string){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.string,received:t.parsedType}),ye}const t=new ge;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const r=e.data.length>i.value,s=e.data.length<i.value;(r||s)&&(n=this._getOrReturnCtx(e,n),r?me(n,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&me(n,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)Ue.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"email",code:de.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)Me||(Me=new RegExp("^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$","u")),Me.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"emoji",code:de.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)Pe.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"uuid",code:de.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)$e.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"nanoid",code:de.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)Ce.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"cuid",code:de.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)Be.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"cuid2",code:de.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)Re.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"ulid",code:de.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),me(n,{validation:"url",code:de.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"regex",code:de.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){Ke(i).test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else if("date"===i.kind){Ve.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:"date",message:i.message}),t.dirty())}else if("time"===i.kind){new RegExp(`^${He(i)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:"time",message:i.message}),t.dirty())}else"duration"===i.kind?Le.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"duration",code:de.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?(r=e.data,("v4"!==(s=i.version)&&s||!ze.test(r))&&("v6"!==s&&s||!qe.test(r))&&(n=this._getOrReturnCtx(e,n),me(n,{validation:"ip",code:de.invalid_string,message:i.message}),t.dirty())):"base64"===i.kind?De.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"base64",code:de.invalid_string,message:i.message}),t.dirty()):te.assertNever(i);var r,s;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:de.invalid_string,...Se.errToObj(n)})}_addCheck(e){return new We({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Se.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...Se.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...Se.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Se.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Se.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Se.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Se.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Se.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Se.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Se.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Se.errToObj(t)})}nonempty(e){return this.min(1,Se.errToObj(e))}trim(){return new We({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new We({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new We({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Je(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r;return parseInt(e.toFixed(s).replace(".",""))%parseInt(t.toFixed(s).replace(".",""))/Math.pow(10,s)}We.create=e=>{var t;return new We({checks:[],typeName:Lt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ie(e)})};class Ye extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==oe.number){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.number,received:t.parsedType}),ye}let t;const n=new ge;for(const r of this._def.checks)if("int"===r.kind)te.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:de.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Je(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:de.not_finite,message:r.message}),n.dirty()):te.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Se.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Se.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Se.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Se.toString(t))}setLimit(e,t,n,r){return new Ye({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Se.toString(r)}]})}_addCheck(e){return new Ye({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Se.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Se.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&te.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ye.create=e=>new Ye({checks:[],typeName:Lt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Ie(e)});class Ge extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==oe.bigint){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.bigint,received:t.parsedType}),ye}let t;const n=new ge;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):te.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Se.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Se.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Se.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Se.toString(t))}setLimit(e,t,n,r){return new Ge({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Se.toString(r)}]})}_addCheck(e){return new Ge({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Ge.create=e=>{var t;return new Ge({checks:[],typeName:Lt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ie(e)})};class Xe extends je{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==oe.boolean){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.boolean,received:t.parsedType}),ye}return _e(e.data)}}Xe.create=e=>new Xe({typeName:Lt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Ie(e)});class Qe extends je{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==oe.date){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.date,received:t.parsedType}),ye}if(isNaN(e.data.getTime())){return me(this._getOrReturnCtx(e),{code:de.invalid_date}),ye}const t=new ge;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):te.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Se.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Se.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Qe.create=e=>new Qe({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Lt.ZodDate,...Ie(e)});class et extends je{_parse(e){if(this._getType(e)!==oe.symbol){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.symbol,received:t.parsedType}),ye}return _e(e.data)}}et.create=e=>new et({typeName:Lt.ZodSymbol,...Ie(e)});class tt extends je{_parse(e){if(this._getType(e)!==oe.undefined){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.undefined,received:t.parsedType}),ye}return _e(e.data)}}tt.create=e=>new tt({typeName:Lt.ZodUndefined,...Ie(e)});class nt extends je{_parse(e){if(this._getType(e)!==oe.null){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.null,received:t.parsedType}),ye}return _e(e.data)}}nt.create=e=>new nt({typeName:Lt.ZodNull,...Ie(e)});class rt extends je{constructor(){super(...arguments),this._any=!0}_parse(e){return _e(e.data)}}rt.create=e=>new rt({typeName:Lt.ZodAny,...Ie(e)});class st extends je{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _e(e.data)}}st.create=e=>new st({typeName:Lt.ZodUnknown,...Ie(e)});class it extends je{_parse(e){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.never,received:t.parsedType}),ye}}it.create=e=>new it({typeName:Lt.ZodNever,...Ie(e)});class at extends je{_parse(e){if(this._getType(e)!==oe.undefined){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.void,received:t.parsedType}),ye}return _e(e.data)}}at.create=e=>new at({typeName:Lt.ZodVoid,...Ie(e)});class ot extends je{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==oe.array)return me(t,{code:de.invalid_type,expected:oe.array,received:t.parsedType}),ye;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,s=t.data.length<r.exactLength.value;(e||s)&&(me(t,{code:e?de.too_big:de.too_small,minimum:s?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(me(t,{code:de.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(me(t,{code:de.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new Te(t,e,t.path,n))))).then((e=>ge.mergeArray(n,e)));const s=[...t.data].map(((e,n)=>r.type._parseSync(new Te(t,e,t.path,n))));return ge.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new ot({...this._def,minLength:{value:e,message:Se.toString(t)}})}max(e,t){return new ot({...this._def,maxLength:{value:e,message:Se.toString(t)}})}length(e,t){return new ot({...this._def,exactLength:{value:e,message:Se.toString(t)}})}nonempty(e){return this.min(1,e)}}function ct(e){if(e instanceof dt){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Zt.create(ct(r))}return new dt({...e._def,shape:()=>t})}return e instanceof ot?new ot({...e._def,type:ct(e.element)}):e instanceof Zt?Zt.create(ct(e.unwrap())):e instanceof Nt?Nt.create(ct(e.unwrap())):e instanceof mt?mt.create(e.items.map((e=>ct(e)))):e}ot.create=(e,t)=>new ot({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Lt.ZodArray,...Ie(t)});class dt extends je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=te.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==oe.object){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.object,received:t.parsedType}),ye}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:s}=this._getCached(),i=[];if(!(this._def.catchall instanceof it&&"strip"===this._def.unknownKeys))for(const e in n.data)s.includes(e)||i.push(e);const a=[];for(const e of s){const t=r[e],s=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new Te(n,s,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof it){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(me(n,{code:de.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new Te(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>ge.mergeObjectSync(t,e))):ge.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return Se.errToObj,new dt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,s,i,a;const o=null!==(i=null===(s=(r=this._def).errorMap)||void 0===s?void 0:s.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=Se.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new dt({...this._def,unknownKeys:"strip"})}passthrough(){return new dt({...this._def,unknownKeys:"passthrough"})}extend(e){return new dt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Lt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new dt({...this._def,catchall:e})}pick(e){const t={};return te.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new dt({...this._def,shape:()=>t})}omit(e){const t={};return te.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new dt({...this._def,shape:()=>t})}deepPartial(){return ct(this)}partial(e){const t={};return te.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new dt({...this._def,shape:()=>t})}required(e){const t={};return te.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Zt;)e=e._def.innerType;t[n]=e}})),new dt({...this._def,shape:()=>t})}keyof(){return xt(te.objectKeys(this.shape))}}dt.create=(e,t)=>new dt({shape:()=>e,unknownKeys:"strip",catchall:it.create(),typeName:Lt.ZodObject,...Ie(t)}),dt.strictCreate=(e,t)=>new dt({shape:()=>e,unknownKeys:"strict",catchall:it.create(),typeName:Lt.ZodObject,...Ie(t)}),dt.lazycreate=(e,t)=>new dt({shape:e,unknownKeys:"strip",catchall:it.create(),typeName:Lt.ZodObject,...Ie(t)});class ut extends je{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new ue(e.ctx.common.issues)));return me(t,{code:de.invalid_union,unionErrors:n}),ye}));{let e;const r=[];for(const s of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const s=r.map((e=>new ue(e)));return me(t,{code:de.invalid_union,unionErrors:s}),ye}}get options(){return this._def.options}}ut.create=(e,t)=>new ut({options:e,typeName:Lt.ZodUnion,...Ie(t)});const lt=e=>e instanceof wt?lt(e.schema):e instanceof St?lt(e.innerType()):e instanceof bt?[e.value]:e instanceof Et?e.options:e instanceof kt?te.objectValues(e.enum):e instanceof Tt?lt(e._def.innerType):e instanceof tt?[void 0]:e instanceof nt?[null]:e instanceof Zt?[void 0,...lt(e.unwrap())]:e instanceof Nt?[null,...lt(e.unwrap())]:e instanceof Ct||e instanceof Rt?lt(e.unwrap()):e instanceof At?lt(e._def.innerType):[];class ht extends je{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.object)return me(t,{code:de.invalid_type,expected:oe.object,received:t.parsedType}),ye;const n=this.discriminator,r=t.data[n],s=this.optionsMap.get(r);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(me(t,{code:de.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=lt(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \\`${e}\\` could not be extracted from all schema options`);for(const s of t){if(r.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);r.set(s,n)}}return new ht({typeName:Lt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Ie(n)})}}function ft(e,t){const n=ce(e),r=ce(t);if(e===t)return{valid:!0,data:e};if(n===oe.object&&r===oe.object){const n=te.objectKeys(t),r=te.objectKeys(e).filter((e=>-1!==n.indexOf(e))),s={...e,...t};for(const n of r){const r=ft(e[n],t[n]);if(!r.valid)return{valid:!1};s[n]=r.data}return{valid:!0,data:s}}if(n===oe.array&&r===oe.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const s=ft(e[r],t[r]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===oe.date&&r===oe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class pt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(we(e)||we(r))return ye;const s=ft(e.value,r.value);return s.valid?((be(e)||be(r))&&t.dirty(),{status:t.value,value:s.data}):(me(n,{code:de.invalid_intersection_types}),ye)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}pt.create=(e,t,n)=>new pt({left:e,right:t,typeName:Lt.ZodIntersection,...Ie(n)});class mt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.array)return me(n,{code:de.invalid_type,expected:oe.array,received:n.parsedType}),ye;if(n.data.length<this._def.items.length)return me(n,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&n.data.length>this._def.items.length&&(me(n,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Te(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>ge.mergeArray(t,e))):ge.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new mt({...this._def,rest:e})}}mt.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mt({items:e,typeName:Lt.ZodTuple,rest:null,...Ie(t)})};class gt extends je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.object)return me(n,{code:de.invalid_type,expected:oe.object,received:n.parsedType}),ye;const r=[],s=this._def.keyType,i=this._def.valueType;for(const e in n.data)r.push({key:s._parse(new Te(n,e,n.path,e)),value:i._parse(new Te(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?ge.mergeObjectAsync(t,r):ge.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new gt(t instanceof je?{keyType:e,valueType:t,typeName:Lt.ZodRecord,...Ie(n)}:{keyType:We.create(),valueType:e,typeName:Lt.ZodRecord,...Ie(t)})}}class yt extends je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.map)return me(n,{code:de.invalid_type,expected:oe.map,received:n.parsedType}),ye;const r=this._def.keyType,s=this._def.valueType,i=[...n.data.entries()].map((([e,t],i)=>({key:r._parse(new Te(n,e,n.path,[i,"key"])),value:s._parse(new Te(n,t,n.path,[i,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of i){const r=await n.key,s=await n.value;if("aborted"===r.status||"aborted"===s.status)return ye;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of i){const r=n.key,s=n.value;if("aborted"===r.status||"aborted"===s.status)return ye;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}}}yt.create=(e,t,n)=>new yt({valueType:t,keyType:e,typeName:Lt.ZodMap,...Ie(n)});class vt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.set)return me(n,{code:de.invalid_type,expected:oe.set,received:n.parsedType}),ye;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(me(n,{code:de.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(me(n,{code:de.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const s=this._def.valueType;function i(e){const n=new Set;for(const r of e){if("aborted"===r.status)return ye;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map(((e,t)=>s._parse(new Te(n,e,n.path,t))));return n.common.async?Promise.all(a).then((e=>i(e))):i(a)}min(e,t){return new vt({...this._def,minSize:{value:e,message:Se.toString(t)}})}max(e,t){return new vt({...this._def,maxSize:{value:e,message:Se.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}vt.create=(e,t)=>new vt({valueType:e,minSize:null,maxSize:null,typeName:Lt.ZodSet,...Ie(t)});class _t extends je{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.function)return me(t,{code:de.invalid_type,expected:oe.function,received:t.parsedType}),ye;function n(e,n){return pe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,fe(),le].filter((e=>!!e)),issueData:{code:de.invalid_arguments,argumentsError:n}})}function r(e,n){return pe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,fe(),le].filter((e=>!!e)),issueData:{code:de.invalid_return_type,returnTypeError:n}})}const s={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof Ot){const e=this;return _e((async function(...t){const a=new ue([]),o=await e._def.args.parseAsync(t,s).catch((e=>{throw a.addIssue(n(t,e)),a})),c=await Reflect.apply(i,this,o);return await e._def.returns._def.type.parseAsync(c,s).catch((e=>{throw a.addIssue(r(c,e)),a}))}))}{const e=this;return _e((function(...t){const a=e._def.args.safeParse(t,s);if(!a.success)throw new ue([n(t,a.error)]);const o=Reflect.apply(i,this,a.data),c=e._def.returns.safeParse(o,s);if(!c.success)throw new ue([r(o,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new _t({...this._def,args:mt.create(e).rest(st.create())})}returns(e){return new _t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new _t({args:e||mt.create([]).rest(st.create()),returns:t||st.create(),typeName:Lt.ZodFunction,...Ie(n)})}}class wt extends je{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}wt.create=(e,t)=>new wt({getter:e,typeName:Lt.ZodLazy,...Ie(t)});class bt extends je{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return me(t,{received:t.data,code:de.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}function xt(e,t){return new Et({values:e,typeName:Lt.ZodEnum,...Ie(t)})}bt.create=(e,t)=>new bt({value:e,typeName:Lt.ZodLiteral,...Ie(t)});class Et extends je{constructor(){super(...arguments),Ze.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return me(t,{expected:te.joinValues(n),received:t.parsedType,code:de.invalid_type}),ye}if(ke(this,Ze,"f")||Oe(this,Ze,new Set(this._def.values),"f"),!ke(this,Ze,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return me(t,{received:t.data,code:de.invalid_enum_value,options:n}),ye}return _e(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Et.create(e,{...this._def,...t})}exclude(e,t=this._def){return Et.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Ze=new WeakMap,Et.create=xt;class kt extends je{constructor(){super(...arguments),Ne.set(this,void 0)}_parse(e){const t=te.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==oe.string&&n.parsedType!==oe.number){const e=te.objectValues(t);return me(n,{expected:te.joinValues(e),received:n.parsedType,code:de.invalid_type}),ye}if(ke(this,Ne,"f")||Oe(this,Ne,new Set(te.getValidEnumValues(this._def.values)),"f"),!ke(this,Ne,"f").has(e.data)){const e=te.objectValues(t);return me(n,{received:n.data,code:de.invalid_enum_value,options:e}),ye}return _e(e.data)}get enum(){return this._def.values}}Ne=new WeakMap,kt.create=(e,t)=>new kt({values:e,typeName:Lt.ZodNativeEnum,...Ie(t)});class Ot extends je{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.promise&&!1===t.common.async)return me(t,{code:de.invalid_type,expected:oe.promise,received:t.parsedType}),ye;const n=t.parsedType===oe.promise?t.data:Promise.resolve(t.data);return _e(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Ot.create=(e,t)=>new Ot({type:e,typeName:Lt.ZodPromise,...Ie(t)});class St extends je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Lt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:e=>{me(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===r.type){const e=r.transform(n.data,s);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return ye;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?ye:"dirty"===r.status||"dirty"===t.value?ve(r.value):r}));{if("aborted"===t.value)return ye;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?ye:"dirty"===r.status||"dirty"===t.value?ve(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,s);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?ye:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?ye:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!xe(e))return e;const i=r.transform(e.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>xe(e)?Promise.resolve(r.transform(e.value,s)).then((e=>({status:t.value,value:e}))):e))}te.assertNever(r)}}St.create=(e,t,n)=>new St({schema:e,typeName:Lt.ZodEffects,effect:t,...Ie(n)}),St.createWithPreprocess=(e,t,n)=>new St({schema:t,effect:{type:"preprocess",transform:e},typeName:Lt.ZodEffects,...Ie(n)});class Zt extends je{_parse(e){return this._getType(e)===oe.undefined?_e(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zt.create=(e,t)=>new Zt({innerType:e,typeName:Lt.ZodOptional,...Ie(t)});class Nt extends je{_parse(e){return this._getType(e)===oe.null?_e(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Nt.create=(e,t)=>new Nt({innerType:e,typeName:Lt.ZodNullable,...Ie(t)});class Tt extends je{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===oe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Tt.create=(e,t)=>new Tt({innerType:e,typeName:Lt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Ie(t)});class At extends je{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ee(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}At.create=(e,t)=>new At({innerType:e,typeName:Lt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Ie(t)});class It extends je{_parse(e){if(this._getType(e)!==oe.nan){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.nan,received:t.parsedType}),ye}return{status:"valid",value:e.data}}}It.create=e=>new It({typeName:Lt.ZodNaN,...Ie(e)});const jt=Symbol("zod_brand");class Ct extends je{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Bt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ye:"dirty"===e.status?(t.dirty(),ve(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ye:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Bt({in:e,out:t,typeName:Lt.ZodPipeline})}}class Rt extends je{_parse(e){const t=this._def.innerType._parse(e),n=e=>(xe(e)&&(e.value=Object.freeze(e.value)),e);return Ee(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function Pt(e,t={},n){return e?rt.create().superRefine(((r,s)=>{var i,a;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,o=null===(a=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===a||a,c="string"==typeof e?{message:e}:e;s.addIssue({code:"custom",...c,fatal:o})}})):rt.create()}Rt.create=(e,t)=>new Rt({innerType:e,typeName:Lt.ZodReadonly,...Ie(t)});const $t={object:dt.lazycreate};var Lt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Lt||(Lt={}));const Ut=We.create,Mt=Ye.create,zt=It.create,qt=Ge.create,Dt=Xe.create,Ft=Qe.create,Vt=et.create,Ht=tt.create,Kt=nt.create,Wt=rt.create,Jt=st.create,Yt=it.create,Gt=at.create,Xt=ot.create,Qt=dt.create,en=dt.strictCreate,tn=ut.create,nn=ht.create,rn=pt.create,sn=mt.create,an=gt.create,on=yt.create,cn=vt.create,dn=_t.create,un=wt.create,ln=bt.create,hn=Et.create,fn=kt.create,pn=Ot.create,mn=St.create,gn=Zt.create,yn=Nt.create,vn=St.createWithPreprocess,_n=Bt.create,wn={string:e=>We.create({...e,coerce:!0}),number:e=>Ye.create({...e,coerce:!0}),boolean:e=>Xe.create({...e,coerce:!0}),bigint:e=>Ge.create({...e,coerce:!0}),date:e=>Qe.create({...e,coerce:!0})},bn=ye;var xn=Object.freeze({__proto__:null,defaultErrorMap:le,setErrorMap:function(e){he=e},getErrorMap:fe,makeIssue:pe,EMPTY_PATH:[],addIssueToContext:me,ParseStatus:ge,INVALID:ye,DIRTY:ve,OK:_e,isAborted:we,isDirty:be,isValid:xe,isAsync:Ee,get util(){return te},get objectUtil(){return ne},ZodParsedType:oe,getParsedType:ce,ZodType:je,datetimeRegex:Ke,ZodString:We,ZodNumber:Ye,ZodBigInt:Ge,ZodBoolean:Xe,ZodDate:Qe,ZodSymbol:et,ZodUndefined:tt,ZodNull:nt,ZodAny:rt,ZodUnknown:st,ZodNever:it,ZodVoid:at,ZodArray:ot,ZodObject:dt,ZodUnion:ut,ZodDiscriminatedUnion:ht,ZodIntersection:pt,ZodTuple:mt,ZodRecord:gt,ZodMap:yt,ZodSet:vt,ZodFunction:_t,ZodLazy:wt,ZodLiteral:bt,ZodEnum:Et,ZodNativeEnum:kt,ZodPromise:Ot,ZodEffects:St,ZodTransformer:St,ZodOptional:Zt,ZodNullable:Nt,ZodDefault:Tt,ZodCatch:At,ZodNaN:It,BRAND:jt,ZodBranded:Ct,ZodPipeline:Bt,ZodReadonly:Rt,custom:Pt,Schema:je,ZodSchema:je,late:$t,get ZodFirstPartyTypeKind(){return Lt},coerce:wn,any:Wt,array:Xt,bigint:qt,boolean:Dt,date:Ft,discriminatedUnion:nn,effect:mn,enum:hn,function:dn,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Pt((t=>t instanceof e),t),intersection:rn,lazy:un,literal:ln,map:on,nan:zt,nativeEnum:fn,never:Yt,null:Kt,nullable:yn,number:Mt,object:Qt,oboolean:()=>Dt().optional(),onumber:()=>Mt().optional(),optional:gn,ostring:()=>Ut().optional(),pipeline:_n,preprocess:vn,promise:pn,record:an,set:cn,strictObject:en,string:Ut,symbol:Vt,transformer:mn,tuple:sn,undefined:Ht,union:tn,unknown:Jt,void:Gt,NEVER:bn,ZodIssueCode:de,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:ue});function En(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function kn(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function On(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");En(e.outputLen),En(e.blockLen)}function Sn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Zn(e,t){kn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Nn="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const Tn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),An=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function In(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),kn(e),e}class jn{clone(){return this._cloneInto()}}function Cn(e=32){if(Nn&&"function"==typeof Nn.getRandomValues)return Nn.getRandomValues(new Uint8Array(e));if(Nn&&"function"==typeof Nn.randomBytes)return Nn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Bn=(e,t,n)=>e&t^e&n^t&n;class Rn extends jn{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Tn(this.buffer)}update(e){Sn(this);const{view:t,buffer:n,blockLen:r}=this,s=(e=In(e)).length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=Tn(e);for(;r<=s-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sn(this),Zn(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,d=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+d,o,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const a=Tn(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)a.setUint32(4*e,d[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}}const Pn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$n=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ln=new Uint32Array(64);class Un extends Rn{constructor(){super(64,32,8,!1),this.A=0|$n[0],this.B=0|$n[1],this.C=0|$n[2],this.D=0|$n[3],this.E=0|$n[4],this.F=0|$n[5],this.G=0|$n[6],this.H=0|$n[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:a,H:o}=this;return[e,t,n,r,s,i,a,o]}set(e,t,n,r,s,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)Ln[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Ln[e-15],n=Ln[e-2],r=An(t,7)^An(t,18)^t>>>3,s=An(n,17)^An(n,19)^n>>>10;Ln[e]=s+Ln[e-7]+r+Ln[e-16]|0}let{A:n,B:r,C:s,D:i,E:a,F:o,G:c,H:d}=this;for(let e=0;e<64;e++){const t=d+(An(a,6)^An(a,11)^An(a,25))+((u=a)&o^~u&c)+Pn[e]+Ln[e]|0,l=(An(n,2)^An(n,13)^An(n,22))+Bn(n,r,s)|0;d=c,c=o,o=a,a=i+t|0,i=s,s=r,r=n,n=t+l|0}var u;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(n,r,s,i,a,o,c,d)}roundClean(){Ln.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Mn=function(e){const t=t=>e().update(In(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}((()=>new Un));class zn extends jn{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,On(e);const n=In(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return Sn(this),this.iHash.update(e),this}digestInto(e){Sn(this),kn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qn=(e,t,n)=>new zn(e,t).update(n).digest();qn.create=(e,t)=>new zn(e,t);const Dn=BigInt(0),Fn=BigInt(1),Vn=BigInt(2);function Hn(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Kn(e){if(!Hn(e))throw new Error("Uint8Array expected")}function Wn(e,t){if("boolean"!=typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const Jn=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Yn(e){Kn(e);let t="";for(let n=0;n<e.length;n++)t+=Jn[e[n]];return t}function Gn(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Xn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Qn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function er(e){return e>=Qn._0&&e<=Qn._9?e-Qn._0:e>=Qn._A&&e<=Qn._F?e-(Qn._A-10):e>=Qn._a&&e<=Qn._f?e-(Qn._a-10):void 0}function tr(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=er(e.charCodeAt(s)),i=er(e.charCodeAt(s+1));if(void 0===n||void 0===i){const t=e[s]+e[s+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+s)}r[t]=16*n+i}return r}function nr(e){return Xn(Yn(e))}function rr(e){return Kn(e),Xn(Yn(Uint8Array.from(e).reverse()))}function sr(e,t){return tr(e.toString(16).padStart(2*t,"0"))}function ir(e,t){return sr(e,t).reverse()}function ar(e,t,n){let r;if("string"==typeof t)try{r=tr(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!Hn(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return r}function or(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];Kn(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}const cr=e=>"bigint"==typeof e&&Dn<=e;function dr(e,t,n){return cr(e)&&cr(t)&&cr(n)&&t<=e&&e<n}function ur(e,t,n,r){if(!dr(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)}function lr(e){let t;for(t=0;e>Dn;e>>=Fn,t+=1);return t}const hr=e=>(Vn<<BigInt(e-1))-Fn,fr=e=>new Uint8Array(e),pr=e=>Uint8Array.from(e);function mr(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=fr(e),s=fr(e),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...e)=>n(s,r,...e),c=(e=fr())=>{s=o(pr([0]),e),r=o(),0!==e.length&&(s=o(pr([1]),e),r=o())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=o();const t=r.slice();n.push(t),e+=r.length}return or(...n)};return(e,t)=>{let n;for(a(),c(e);!(n=t(d()));)c();return a(),n}}const gr={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Hn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function yr(e,t,n={}){const r=(t,n,r)=>{const s=gr[n];if("function"!=typeof s)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if(!(r&&void 0===i||s(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}function vr(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(void 0!==s)return s;const i=e(n,...r);return t.set(n,i),i}}const _r=BigInt(0),wr=BigInt(1),br=BigInt(2),xr=BigInt(3),Er=BigInt(4),kr=BigInt(5),Or=BigInt(8);BigInt(9),BigInt(16);function Sr(e,t){const n=e%t;return n>=_r?n:t+n}function Zr(e,t,n){if(n<=_r||t<_r)throw new Error("Expected power/modulo > 0");if(n===wr)return _r;let r=wr;for(;t>_r;)t&wr&&(r=r*e%n),e=e*e%n,t>>=wr;return r}function Nr(e,t,n){let r=e;for(;t-- >_r;)r*=r,r%=n;return r}function Tr(e,t){if(e===_r||t<=_r)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Sr(e,t),r=t,s=_r,i=wr,a=wr,o=_r;for(;n!==_r;){const e=r/n,t=r%n,c=s-a*e,d=i-o*e;r=n,n=t,s=a,i=o,a=c,o=d}if(r!==wr)throw new Error("invert: does not exist");return Sr(s,t)}function Ar(e){if(e%Er===xr){const t=(e+wr)/Er;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Or===kr){const t=(e-kr)/Or;return function(e,n){const r=e.mul(n,br),s=e.pow(r,t),i=e.mul(n,s),a=e.mul(e.mul(i,br),s),o=e.mul(i,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),n))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-wr)/br;let n,r,s;for(n=e-wr,r=0;n%br===_r;n/=br,r++);for(s=br;s<e&&Zr(s,t,e)!==e-wr;s++);if(1===r){const t=(e+wr)/Er;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+wr)/br;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=r,c=e.pow(e.mul(e.ONE,s),n),d=e.pow(a,i),u=e.pow(a,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,wr<<BigInt(o-t-1));c=e.sqr(n),d=e.mul(d,n),u=e.mul(u,c),o=t}return d}}(e)}const Ir=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jr(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Cr(e,t,n=!1,r={}){if(e<=_r)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:i}=jr(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Ar(e),o=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:hr(s),ZERO:_r,ONE:wr,create:t=>Sr(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return _r<=t&&t<e},is0:e=>e===_r,isOdd:e=>(e&wr)===wr,neg:t=>Sr(-t,e),eql:(e,t)=>e===t,sqr:t=>Sr(t*t,e),add:(t,n)=>Sr(t+n,e),sub:(t,n)=>Sr(t-n,e),mul:(t,n)=>Sr(t*n,e),pow:(e,t)=>function(e,t,n){if(n<_r)throw new Error("Expected power > 0");if(n===_r)return e.ONE;if(n===wr)return t;let r=e.ONE,s=t;for(;n>_r;)n&wr&&(r=e.mul(r,s)),s=e.sqr(s),n>>=wr;return r}(o,e,t),div:(t,n)=>Sr(t*Tr(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Tr(t,e),sqrt:r.sqrt||(e=>a(o,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,s)=>e.is0(r)?t:(n[s]=t,e.mul(t,r))),e.ONE),s=e.inv(r);return t.reduceRight(((t,r,s)=>e.is0(r)?t:(n[s]=e.mul(t,n[s]),e.mul(t,r))),s),n}(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?ir(e,i):sr(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return n?rr(e):nr(e)}});return Object.freeze(o)}function Br(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Rr(e){const t=Br(e);return t+Math.ceil(t/2)}const Pr=BigInt(0),$r=BigInt(1),Lr=new WeakMap,Ur=new WeakMap;function Mr(e){return function(e){const t=Ir.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});yr(e,t)}(e.Fp),yr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jr(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function zr(e){void 0!==e.lowS&&Wn("lowS",e.lowS),void 0!==e.prehash&&Wn("prehash",e.prehash)}const{Ph:qr,aT:Dr}=e,Fr={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:n}=Fr;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Gn(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Gn(s.length/2|128):"";return`${Gn(e)}${i}${s}${t}`},decode(e,t){const{Err:n}=Fr;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++];let i=0;if(!!(128&s)){const e=127&s;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const a=t.subarray(r,r+e);if(a.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===a[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of a)i=i<<8|e;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=s;const a=t.subarray(r,r+i);if(a.length!==i)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=Fr;if(e<Vr)throw new t("integer: negative integers are not allowed");let n=Gn(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected assertion");return n},decode(e){const{Err:t}=Fr;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return qr(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Fr,s="string"==typeof e?Dr(e):e;Kn(s);const{v:i,l:a}=r.decode(48,s);if(a.length)throw new t("Invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:d,l:u}=r.decode(2,c);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(d)}},hexFromSig(e){const{_tlv:t,_int:n}=Fr,r=`${t.encode(2,n.encode(e.r))}${t.encode(2,n.encode(e.s))}`;return t.encode(48,r)}},Vr=BigInt(0),Hr=BigInt(1),Kr=(BigInt(2),BigInt(3));BigInt(4);function Wr(e){const t=function(e){const t=Mr(e);yr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=Cr(t.n,t.nBitLength),s=t.toBytes||((e,t,r)=>{const s=t.toAffine();return or(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function a(e){const{a:r,b:s}=t,i=n.sqr(e),a=n.mul(i,e);return n.add(n.add(a,n.mul(e,r)),s)}if(!n.eql(n.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:s,n:i}=t;if(n&&"bigint"!=typeof e){if(Hn(e)&&(e=Yn(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let a;try{a="bigint"==typeof e?e:nr(ar("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return s&&(a=Sr(a,i)),ur("private key",a,Hr,i),a}function c(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const d=vr(((e,t)=>{const{px:r,py:s,pz:i}=e;if(n.eql(i,n.ONE))return{x:r,y:s};const a=e.is0();null==t&&(t=a?n.ONE:n.inv(i));const o=n.mul(r,t),c=n.mul(s,t),d=n.mul(i,t);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(d,n.ONE))throw new Error("invZ was invalid");return{x:o,y:c}})),u=vr((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:s}=e.toAffine();if(!n.isValid(r)||!n.isValid(s))throw new Error("bad point: x or y not FE");const i=n.sqr(s),o=a(r);if(!n.eql(i,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(r)?l.ZERO:new l(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(i(ar("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(o(e))}static msm(e,t){return function(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((e,n)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${n}`)})),n.forEach(((t,n)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${n}`)}));const s=lr(BigInt(n.length)),i=s>12?s-3:s>4?s-2:s?2:1,a=(1<<i)-1,o=new Array(a+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/i)*i;let d=e.ZERO;for(let t=c;t>=0;t-=i){o.fill(e.ZERO);for(let e=0;e<r.length;e++){const s=r[e],i=Number(s>>BigInt(t)&BigInt(a));o[i]=o[i].add(n[e])}let s=e.ZERO;for(let t=o.length-1,n=e.ZERO;t>0;t--)n=n.add(o[t]),s=s.add(n);if(d=d.add(s),0!==t)for(let e=0;e<i;e++)d=d.double()}return d}(l,r,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){u(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn\'t support isOdd")}equals(e){c(e);const{px:t,py:r,pz:s}=this,{px:i,py:a,pz:o}=e,d=n.eql(n.mul(t,o),n.mul(i,s)),u=n.eql(n.mul(r,o),n.mul(a,s));return d&&u}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,s=n.mul(r,Kr),{px:i,py:a,pz:o}=this;let c=n.ZERO,d=n.ZERO,u=n.ZERO,h=n.mul(i,i),f=n.mul(a,a),p=n.mul(o,o),m=n.mul(i,a);return m=n.add(m,m),u=n.mul(i,o),u=n.add(u,u),c=n.mul(e,u),d=n.mul(s,p),d=n.add(c,d),c=n.sub(f,d),d=n.add(f,d),d=n.mul(c,d),c=n.mul(m,c),u=n.mul(s,u),p=n.mul(e,p),m=n.sub(h,p),m=n.mul(e,m),m=n.add(m,u),u=n.add(h,h),h=n.add(u,h),h=n.add(h,p),h=n.mul(h,m),d=n.add(d,h),p=n.mul(a,o),p=n.add(p,p),h=n.mul(p,m),c=n.sub(c,h),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new l(c,d,u)}add(e){c(e);const{px:r,py:s,pz:i}=this,{px:a,py:o,pz:d}=e;let u=n.ZERO,h=n.ZERO,f=n.ZERO;const p=t.a,m=n.mul(t.b,Kr);let g=n.mul(r,a),y=n.mul(s,o),v=n.mul(i,d),_=n.add(r,s),w=n.add(a,o);_=n.mul(_,w),w=n.add(g,y),_=n.sub(_,w),w=n.add(r,i);let b=n.add(a,d);return w=n.mul(w,b),b=n.add(g,v),w=n.sub(w,b),b=n.add(s,i),u=n.add(o,d),b=n.mul(b,u),u=n.add(y,v),b=n.sub(b,u),f=n.mul(p,w),u=n.mul(m,v),f=n.add(u,f),u=n.sub(y,f),f=n.add(y,f),h=n.mul(u,f),y=n.add(g,g),y=n.add(y,g),v=n.mul(p,v),w=n.mul(m,w),y=n.add(y,v),v=n.sub(g,v),v=n.mul(p,v),w=n.add(w,v),g=n.mul(y,w),h=n.add(h,g),g=n.mul(b,w),u=n.mul(_,u),u=n.sub(u,g),g=n.mul(_,y),f=n.mul(b,f),f=n.add(f,g),new l(u,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return f.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){ur("scalar",e,Vr,t.n);const r=l.ZERO;if(e===Vr)return r;if(e===Hr)return this;const{endo:s}=t;if(!s)return f.unsafeLadder(this,e);let{k1neg:i,k1:a,k2neg:o,k2:c}=s.splitScalar(e),d=r,u=r,h=this;for(;a>Vr||c>Vr;)a&Hr&&(d=d.add(h)),c&Hr&&(u=u.add(h)),h=h.double(),a>>=Hr,c>>=Hr;return i&&(d=d.negate()),o&&(u=u.negate()),u=new l(n.mul(u.px,s.beta),u.py,u.pz),d.add(u)}multiply(e){const{endo:r,n:s}=t;let i,a;if(ur("scalar",e,Hr,s),r){const{k1neg:t,k1:s,k2neg:o,k2:c}=r.splitScalar(e);let{p:d,f:u}=this.wNAF(s),{p:h,f:p}=this.wNAF(c);d=f.constTimeNegate(t,d),h=f.constTimeNegate(o,h),h=new l(n.mul(h.px,r.beta),h.py,h.pz),i=d.add(h),a=u.add(p)}else{const{p:t,f:n}=this.wNAF(e);i=t,a=n}return l.normalizeZ([i,a])[0]}multiplyAndAddUnsafe(e,t,n){const r=l.BASE,s=(e,t)=>t!==Vr&&t!==Hr&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=s(this,t).add(s(e,n));return i.is0()?void 0:i}toAffine(e){return d(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Hr)return!0;if(n)return n(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Hr?this:n?n(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return Wn("isCompressed",e),this.assertValidity(),s(l,this,e)}toHex(e=!0){return Wn("isCompressed",e),Yn(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,f=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},s=e=>(r(e),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,s=t;for(;n>Pr;)n&$r&&(r=r.add(s)),s=s.double(),n>>=$r;return r},precomputeWindow(e,t){const{windows:n,windowSize:r}=s(t),i=[];let a=e,o=a;for(let e=0;e<n;e++){o=a,i.push(o);for(let e=1;e<r;e++)o=o.add(a),i.push(o);a=o.double()}return i},wNAF(t,r,i){const{windows:a,windowSize:o}=s(t);let c=e.ZERO,d=e.BASE;const u=BigInt(2**t-1),l=2**t,h=BigInt(t);for(let e=0;e<a;e++){const t=e*o;let s=Number(i&u);i>>=h,s>o&&(s-=l,i+=$r);const a=t,f=t+Math.abs(s)-1,p=e%2!=0,m=s<0;0===s?d=d.add(n(p,r[a])):c=c.add(n(m,r[f]))}return{p:c,f:d}},wNAFCached(e,t,n){const r=Ur.get(e)||1;let s=Lr.get(e);return s||(s=this.precomputeWindow(e,r),1!==r&&Lr.set(e,n(s))),this.wNAF(r,s,t)},setWindowSize(e,t){r(t),Ur.set(e,t),Lr.delete(e)}}}(l,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:o,weierstrassEquation:a,isWithinCurveOrder:function(e){return dr(e,Hr,t.n)}}}function Jr(e){const t=function(e){const t=Mr(e);return yr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,s=n.BYTES+1,i=2*n.BYTES+1;function a(e){return Sr(e,r)}function o(e){return Tr(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:u,isWithinCurveOrder:l}=Wr({...t,toBytes(e,t,r){const s=t.toAffine(),i=n.toBytes(s.x),a=or;return Wn("isCompressed",r),r?a(Uint8Array.from([t.hasEvenY()?2:3]),i):a(Uint8Array.from([4]),i,n.toBytes(s.y))},fromBytes(e){const t=e.length,r=e[0],a=e.subarray(1);if(t!==s||2!==r&&3!==r){if(t===i&&4===r){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}{const e=nr(a);if(!dr(e,Hr,n.ORDER))throw new Error("Point is not on curve");const t=u(e);let s;try{s=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~r)!==((s&Hr)===Hr)&&(s=n.neg(s)),{x:e,y:s}}}}),h=e=>Yn(sr(e,t.nByteLength));function f(e){return e>r>>Hr}const p=(e,t,n)=>nr(e.slice(t,n));class m{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=ar("compactSignature",e,2*n),new m(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Fr.toSig(ar("DER",e));return new m(t,n)}assertValidity(){ur("r",this.r,Hr,r),ur("s",this.s,Hr,r)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r,s,recovery:i}=this,d=_(ar("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&i?"03":"02",f=c.fromHex(l+h(u)),p=o(u),m=a(-d*p),g=a(s*p),y=c.BASE.multiplyAndAddUnsafe(f,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return tr(this.toDERHex())}toDERHex(){return Fr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return tr(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const g={isValidPrivateKey(e){try{return d(e),!0}catch(e){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const e=Rr(t.n);return function(e,t,n=!1){const r=e.length,s=Br(t),i=Rr(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const a=Sr(n?nr(e):rr(e),t-wr)+wr;return n?ir(a,s):sr(a,s)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=Hn(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===s||r===i:n?r===2*s||r===2*i:e instanceof c}const v=t.bits2int||function(e){const n=nr(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},_=t.bits2int_modN||function(e){return a(v(e))},w=hr(t.nBitLength);function b(e){return ur(`num < 2^${t.nBitLength}`,e,Vr,w),sr(e,t.nByteLength)}function x(e,r,s=E){if(["recovered","canonical"].some((e=>e in s)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=t;let{lowS:h,prehash:p,extraEntropy:g}=s;null==h&&(h=!0),e=ar("msgHash",e),zr(s),p&&(e=ar("prehashed msgHash",i(e)));const y=_(e),w=d(r),x=[b(w),b(y)];if(null!=g&&!1!==g){const e=!0===g?u(n.BYTES):g;x.push(ar("extraEntropy",e))}const k=or(...x),O=y;return{seed:k,k2sig:function(e){const t=v(e);if(!l(t))return;const n=o(t),r=c.BASE.multiply(t).toAffine(),s=a(r.x);if(s===Vr)return;const i=a(n*a(O+s*w));if(i===Vr)return;let d=(r.x===s?0:2)|Number(r.y&Hr),u=i;return h&&f(i)&&(u=function(e){return f(e)?a(-e):e}(i),d^=1),new m(s,u,d)}}}const E={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(d(e)).toRawBytes(n)},sign:function(e,n,r=E){const{seed:s,k2sig:i}=x(e,n,r),a=t;return mr(a.hash.outputLen,a.nByteLength,a.hmac)(s,i)},verify:function(e,n,r,s=k){const i=e;if(n=ar("msgHash",n),r=ar("publicKey",r),"strict"in s)throw new Error("options.strict was renamed to lowS");zr(s);const{lowS:d,prehash:u}=s;let l,h;try{if("string"==typeof i||Hn(i))try{l=m.fromDER(i)}catch(e){if(!(e instanceof Fr.Err))throw e;l=m.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:e,s:t}=i;l=new m(e,t)}}h=c.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(d&&l.hasHighS())return!1;u&&(n=t.hash(n));const{r:f,s:p}=l,g=_(n),y=o(p),v=a(g*y),w=a(f*y),b=c.BASE.multiplyAndAddUnsafe(h,v,w)?.toAffine();return!!b&&a(b.x)===f},ProjectivePoint:c,Signature:m,utils:g}}function Yr(e){return{hash:e,hmac:(t,...n)=>qn(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];kn(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}(...n)),randomBytes:Cn}}const Gr=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Xr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Qr=BigInt(1),es=BigInt(2),ts=(e,t)=>(e+t/es)/t;function ns(e){const t=Gr,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),d=e*e*e%t,u=d*d*e%t,l=Nr(u,n,t)*u%t,h=Nr(l,n,t)*u%t,f=Nr(h,es,t)*d%t,p=Nr(f,s,t)*f%t,m=Nr(p,i,t)*p%t,g=Nr(m,o,t)*m%t,y=Nr(g,c,t)*g%t,v=Nr(y,o,t)*m%t,_=Nr(v,n,t)*u%t,w=Nr(_,a,t)*p%t,b=Nr(w,r,t)*d%t,x=Nr(b,es,t);if(!rs.eql(rs.sqr(x),e))throw new Error("Cannot find square root");return x}const rs=Cr(Gr,void 0,void 0,{sqrt:ns}),ss=function(e,t){const n=t=>Jr({...e,...Yr(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:rs,n:Xr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Xr,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Qr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=ts(i*e,t),c=ts(-r*e,t);let d=Sr(e-o*n-c*s,t),u=Sr(-o*r-c*i,t);const l=d>a,h=u>a;if(l&&(d=t-d),h&&(u=t-u),d>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:d,k2neg:h,k2:u}}}},Mn);BigInt(0);ss.ProjectivePoint;function is(e,t){return as(e,"pattern",(n=>t.test(n)||`Expected a ${e.type} matching \\`/${t.source}/\\` but received "${n}"`))}function as(e,t,n){return new p({...e,*refiner(r,s){yield*e.refiner(r,s);const i=h(n(r,s),s,e,r);for(const e of i)yield{...e,refinement:t}}})}is(N(),/^(?:0x)?[0-9a-f]+$/iu),is(N(),/^0x[0-9a-f]+$/iu),is(N(),/^0x[0-9a-f]{40}$/u),is(N(),/^0x[0-9a-fA-F]{40}$/u);function os(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}function cs(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const ds=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function us(e){cs(e);let t="";for(let n=0;n<e.length;n++)t+=ds[e[n]];return t}const ls=48,hs=57,fs=65,ps=70,ms=97,gs=102;function ys(e){return e>=ls&&e<=hs?e-ls:e>=fs&&e<=ps?e-(fs-10):e>=ms&&e<=gs?e-(ms-10):void 0}function vs(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=ys(e.charCodeAt(s)),i=ys(e.charCodeAt(s+1));if(void 0===n||void 0===i){const t=e[s]+e[s+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+s)}r[t]=16*n+i}return r}async function _s(){const e=await async function(){return await snap.request({method:"snap_getEntropy",params:{version:1}})}();return vs(os(e))}async function ws(){const e=await _s();return function(e){return`0x${us(e)}`}(ss.getPublicKey(e))}const bs=xn.object({message:xn.string().startsWith("metamask:")});const xs=async({request:e})=>{switch(e.method){case"getPublicKey":return ws();case"signMessage":{const{params:t}=e;!function(e){try{bs.parse(e)}catch{throw re({message:"`signMessage`, must take a `message` parameter that must begin with `metamask:`"})}}(t);const{message:n}=t;return await async function(e){const t=await _s(),n=Mn(e);return`0x${ss.sign(n,t).toCompactHex()}`}(n)}default:throw se({data:{method:e.method}})}}})();var s=exports;for(var i in r)s[i]=r[i];r.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();'}],removable:!1}}}},{package:"@metamask/message-signing-snap",file:"node_modules/@metamask/message-signing-snap/dist/preinstalled-snap.json"}],[17,{"../../../shared/constants/metametrics":5150,"../../../shared/modules/hexstring-utils":5194,"@metamask/base-controller":1192,"@metamask/controller-utils":1218,"@metamask/message-manager":1691,"@metamask/utils":2866,buffer:3661,events:3968,loglevel:4489},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isEIP1024EncryptedMessage=r.getDefaultState=r.default=void 0;var n=d(e("events")),s=d(e("loglevel")),i=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("@metamask/controller-utils"),c=e("@metamask/utils"),u=e("../../../shared/constants/metametrics"),l=e("../../../shared/modules/hexstring-utils");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p={unapprovedDecryptMsgs:{persist:!1,anonymous:!1},unapprovedDecryptMsgCount:{persist:!1,anonymous:!1}},f=e=>!!((0,c.isObject)(e.data)&&(0,c.hasProperty)(e.data,"version")&&(0,c.hasProperty)(e.data,"nonce")&&(0,c.hasProperty)(e.data,"ephemPublicKey")&&(0,c.hasProperty)(e.data,"ciphertext"));r.isEIP1024EncryptedMessage=f;const m=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=m;class g extends a.BaseController{constructor({getState:e,metricsEvent:t,messenger:r}){super({metadata:p,messenger:r,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),h(this,"hub",void 0),h(this,"_getState",void 0),h(this,"_metricsEvent",void 0),h(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this.hub=new n.default,this._decryptMessageManager=new i.DecryptMessageManager(undefined,undefined,undefined,["decrypted"]),this._decryptMessageManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._decryptMessageManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e)})),this._subscribeToMessageState(this._decryptMessageManager,((e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r}))}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})))}clearUnapproved(){this._decryptMessageManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);if(r.data=this._parseMessageData(r.data),!f(r))throw new Error("Invalid encrypted data.");const n=await this.messagingSystem.call("KeyringController:decryptMessage",r);this._decryptMessageManager.setMessageStatusAndResult(t,n,"decrypted"),this._acceptApproval(t)}catch(e){throw s.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!f(e))throw new Error("Invalid encrypted data.");const r=await this.messagingSystem.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:u.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||o.ORIGIN_METAMASK;try{this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:o.ApprovalType.EthDecrypt},!0)}catch(e){s.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,l.stripHexPrefix)(e),n=t.from(r,"hex");return JSON.parse(n.toString("utf8"))}_rejectApproval(e){try{this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){s.default.info("Error rejecting request to approval controller",e)}}}r.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[170,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[171,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[172,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[173,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[174,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[175,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;s.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};const s=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[176,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[177,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach((e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())}));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[178,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:48,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,n,a,o,c,u,l;null===(t=e.NetworkController)||void 0===t||delete t.settings;const d=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==d.type||"string"==typeof d.chainId&&i.test(d.chainId))&&"localhost"!==d.type){if(null!==(n=e.NetworkController)&&void 0!==n&&n.provider){var h;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(h=e.NetworkController)||void 0===h||null===(h=h.provider)||void 0===h||delete h.rpcTarget}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(a=e.CachedBalancesController)||void 0===a||delete a.cachedBalances;const p=null===(o=e.TransactionController)||void 0===o?void 0:o.transactions;Array.isArray(p)&&p.forEach((e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&s.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))}));const f=(null===(c=e.AddressBookController)||void 0===c?void 0:c.addressBook)||{};Object.keys(f).forEach((e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach((e=>{e&&"object"==typeof e&&(e.chainId=t)}))}(f[e],t),f[t]?function(e,t,r){const n=e[t]||{},s={...e[r]};Object.keys(n).forEach((e=>{if(s[e]&&"object"==typeof s[e]){const t={};new Set([...Object.keys(s[e]),...Object.keys(n[e]||{})]).forEach((r=>{var i;t[r]=s[e][r]||(null===(i=n[e])||void 0===i?void 0:i[r])||""})),s[e]=t}else n[e]&&"object"==typeof n[e]&&(s[e]=n[e])})),e[r]=s}(f,e,t):f[t]=f[e],delete f[e]}})),null===(u=e.IncomingTransactionsController)||void 0===u||null===(u=u.incomingTxLastFetchedBlocksByNetwork)||void 0===u||delete u.localhost;const m=null===(l=e.PreferencesController)||void 0===l?void 0:l.accountTokens;m&&Object.keys(m).forEach((e=>{var t,r;const n=(null===(t=m[e])||void 0===t?void 0:t.localhost)||[];if(n.length>0){const t=m[e].rpc||[];t.length>0?m[e].rpc=function(e,t){const r=i(e),n=i(t),s=[];return new Set([...Object.keys(r),...Object.keys(n)]).forEach((e=>{s.push({...r[e],...n[e]})})),s;function i(e){return e.reduce(((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e)),{})}}(n,t):m[e].rpc=n}null===(r=m[e])||void 0===r||delete r.localhost}));return e}(r),t}};const s=/^0x[0-9a-f]+$/iu,i=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[179,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:49,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:n}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),n!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=n,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[1793,{"@ethersproject/providers":551,assert:3657,"async-mutex":1798},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.NonceTracker=void 0;const s=n(e("assert")),i=e("async-mutex"),{Web3Provider:a}=e("@ethersproject/providers");r.NonceTracker=class{constructor(e){this.provider=e.provider,this.blockTracker=e.blockTracker,this.getPendingTransactions=e.getPendingTransactions,this.getConfirmedTransactions=e.getConfirmedTransactions,this.lockMap={}}async getGlobalLock(){const e=this._lookupMutex("global");return{releaseLock:await e.acquire()}}async getNonceLock(e){await this._globalMutexFree();const t=await this._takeMutex(e);try{const r=await this._getNetworkNextNonce(e),n=this._getHighestLocallyConfirmed(e),i=r.nonce,a=Math.max(i,n),o=this.getPendingTransactions(e),c=this._getHighestContinuousFrom(o,a),u={params:{highestLocallyConfirmed:n,nextNetworkNonce:i,highestSuggested:a},local:c,network:r},l=Math.max(r.nonce,c.nonce);return s.default(Number.isInteger(l),`nonce-tracker - nextNonce is not an integer - got: (${typeof l}) "${l}"`),{nextNonce:l,nonceDetails:u,releaseLock:t}}catch(e){throw t(),e}}async _globalMutexFree(){const e=this._lookupMutex("global");(await e.acquire())()}async _takeMutex(e){const t=this._lookupMutex(e);return await t.acquire()}_lookupMutex(e){let t=this.lockMap[e];return t||(t=new i.Mutex,this.lockMap[e]=t),t}async _getNetworkNextNonce(e){const t=await this.blockTracker.getLatestBlock(),r=await new a(this.provider).getTransactionCount(e,t);return s.default(Number.isInteger(r),`nonce-tracker - baseCount is not an integer - got: (${typeof r}) "${r}"`),{name:"network",nonce:r,details:{blockNumber:t,baseCount:r}}}_getHighestLocallyConfirmed(e){const t=this.getConfirmedTransactions(e),r=this._getHighestNonce(t);return Number.isInteger(r)?r+1:0}_getHighestNonce(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return s.default("string"==typeof t,"nonces should be hex strings"),parseInt(t,16)}));return Math.max.apply(null,t)}_getHighestContinuousFrom(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return s.default("string"==typeof t,"nonces should be hex strings"),parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return{name:"local",nonce:n,details:{startPoint:t,highest:n}}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker",file:"node_modules/@metamask/nonce-tracker/dist/NonceTracker.js"}],[1794,{"./NonceTracker":1793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NonceTracker=void 0;var n=e("./NonceTracker");Object.defineProperty(r,"NonceTracker",{enumerable:!0,get:function(){return n.NonceTracker}})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker",file:"node_modules/@metamask/nonce-tracker/dist/index.js"}],[1795,{"./Semaphore":1796,tslib:5020},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("tslib"),s=e("./Semaphore"),i=function(){function e(e){this._semaphore=new s.default(1,e)}return e.prototype.acquire=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e;return(0,n.__generator)(this,(function(t){switch(t.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=t.sent(),[2,e[1]]}}))}))},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive((function(){return e()}))},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.waitForUnlock=function(){return this._semaphore.waitForUnlock()},e.prototype.release=function(){this._semaphore.release()},e.prototype.cancel=function(){return this._semaphore.cancel()},e}();r.default=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/Mutex.js"}],[1796,{"./errors":1797,tslib:5020},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("tslib"),s=e("./errors"),i=function(){function e(e,t){if(void 0===t&&(t=s.E_CANCELED),this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return e.prototype.acquire=function(){var e=this,t=this.isLocked(),r=new Promise((function(t,r){return e._queue.push({resolve:t,reject:r})}));return t||this._dispatch(),r},e.prototype.runExclusive=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,r,s;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.acquire()];case 1:t=n.sent(),r=t[0],s=t[1],n.label=2;case 2:return n.trys.push([2,,4,5]),[4,e(r)];case 3:return[2,n.sent()];case 4:return s(),[7];case 5:return[2]}}))}))},e.prototype.waitForUnlock=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e=this;return(0,n.__generator)(this,(function(t){return this.isLocked()?[2,new Promise((function(t){return e._waiters.push({resolve:t})}))]:[2,Promise.resolve()]}))}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=undefined,e()}},e.prototype.cancel=function(){var e=this;this._queue.forEach((function(t){return t.reject(e._cancelError)})),this._queue=[]},e.prototype._dispatch=function(){var e=this,t=this._queue.shift();if(t){var r=!1;this._currentReleaser=function(){r||(r=!0,e._value++,e._resolveWaiters(),e._dispatch())},t.resolve([this._value--,this._currentReleaser])}},e.prototype._resolveWaiters=function(){this._waiters.forEach((function(e){return e.resolve()})),this._waiters=[]},e}();r.default=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/Semaphore.js"}],[1797,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.E_CANCELED=r.E_ALREADY_LOCKED=r.E_TIMEOUT=void 0,r.E_TIMEOUT=new Error("timeout while waiting for mutex to become available"),r.E_ALREADY_LOCKED=new Error("mutex already locked"),r.E_CANCELED=new Error("request for lock canceled")}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/errors.js"}],[1798,{"./Mutex":1795,"./Semaphore":1796,"./errors":1797,"./tryAcquire":1799,"./withTimeout":1800,tslib:5020},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tryAcquire=r.withTimeout=r.Semaphore=r.Mutex=void 0;var n=e("tslib"),s=e("./Mutex");Object.defineProperty(r,"Mutex",{enumerable:!0,get:function(){return s.default}});var i=e("./Semaphore");Object.defineProperty(r,"Semaphore",{enumerable:!0,get:function(){return i.default}});var a=e("./withTimeout");Object.defineProperty(r,"withTimeout",{enumerable:!0,get:function(){return a.withTimeout}});var o=e("./tryAcquire");Object.defineProperty(r,"tryAcquire",{enumerable:!0,get:function(){return o.tryAcquire}}),(0,n.__exportStar)(e("./errors"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/index.js"}],[1799,{"./errors":1797,"./withTimeout":1800},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tryAcquire=void 0;var n=e("./errors"),s=e("./withTimeout");r.tryAcquire=function(e,t){return void 0===t&&(t=n.E_ALREADY_LOCKED),(0,s.withTimeout)(e,0,t)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/tryAcquire.js"}],[18,{"../../../shared/constants/app":5138,"../../../shared/constants/keyring":5147,"../../../shared/constants/metametrics":5150,"@metamask/base-controller":1192,"@metamask/message-manager":1691,events:3968,loglevel:4489},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("events")),s=l(e("loglevel")),i=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/app");function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={unapprovedEncryptionPublicKeyMsgs:{persist:!1,anonymous:!1},unapprovedEncryptionPublicKeyMsgCount:{persist:!1,anonymous:!1}};class p extends a.BaseController{constructor({messenger:e,getEncryptionPublicKey:t,getAccountKeyringType:r,getState:s,metricsEvent:a}){super({name:"EncryptionPublicKeyController",metadata:h,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),d(this,"hub",void 0),d(this,"_getEncryptionPublicKey",void 0),d(this,"_getAccountKeyringType",void 0),d(this,"_getState",void 0),d(this,"_encryptionPublicKeyManager",void 0),d(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=t,this._getAccountKeyringType=r,this._getState=s,this._metricsEvent=a,this.hub=new n.default,this._encryptionPublicKeyManager=new i.EncryptionPublicKeyManager(undefined,undefined,undefined,["received"]),this._encryptionPublicKeyManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._encryptionPublicKeyManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e,"eth_getEncryptionPublicKey")})),this._subscribeToMessageState(this._encryptionPublicKeyManager,((e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r}))}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case c.KeyringType.ledger:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.trezor:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.lattice:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){s.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),n=await this._getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,n,"received"),this._acceptApproval(t),this._getState()}catch(e){throw s.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)}))}clearUnapproved(){this._encryptionPublicKeyManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:o.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e,t){const r=e.metamaskId,n=e.origin||u.ORIGIN_METAMASK;this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t},!0).catch((()=>{}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=p}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[180,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];r.default={version:50,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=50,s.forEach((e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)})),t}}}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[1800,{"./errors":1797,tslib:5020},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withTimeout=void 0;var n=e("tslib"),s=e("./errors");r.withTimeout=function(e,t,r){var i=this;return void 0===r&&(r=s.E_TIMEOUT),{acquire:function(){return new Promise((function(s,a){return(0,n.__awaiter)(i,void 0,void 0,(function(){var i,o,c,u;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:i=!1,o=setTimeout((function(){i=!0,a(r)}),t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.acquire()];case 2:return c=n.sent(),i?(Array.isArray(c)?c[1]:c)():(clearTimeout(o),s(c)),[3,4];case 3:return u=n.sent(),i||(clearTimeout(o),a(u)),[3,4];case 4:return[2]}}))}))}))},runExclusive:function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,r;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:t=function(){return undefined},n.label=1;case 1:return n.trys.push([1,,7,8]),[4,this.acquire()];case 2:return r=n.sent(),Array.isArray(r)?(t=r[1],[4,e(r[0])]):[3,4];case 3:return[2,n.sent()];case 4:return t=r,[4,e()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:return t(),[7];case 8:return[2]}}))}))},release:function(){e.release()},cancel:function(){return e.cancel()},waitForUnlock:function(){return e.waitForUnlock()},isLocked:function(){return e.isLocked()}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/withTimeout.js"}],[1801,{"@metamask/base-controller":1808,"@metamask/utils":1819,nanoid:1830},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("@metamask/utils"),i=e("nanoid"),a="NotificationController",o={notifications:{persist:!0,anonymous:!1}},c={notifications:{}},u=class extends n.BaseController{constructor({messenger:e,state:t}){super({name:a,metadata:o,messenger:e,state:{...c,...t}}),this.messagingSystem.registerActionHandler(`${a}:show`,((e,t)=>this.show(e,t))),this.messagingSystem.registerActionHandler(`${a}:dismiss`,(e=>this.dismiss(e))),this.messagingSystem.registerActionHandler(`${a}:markRead`,(e=>this.markRead(e))),this.messagingSystem.registerActionHandler(`${a}:clear`,(()=>this.clear()))}show(e,t){const r=i.nanoid.call(void 0),n={id:r,origin:e,createdDate:Date.now(),readDate:null,message:t};this.update((e=>{e.notifications[r]=n}))}dismiss(e){this.update((t=>{for(const r of e)s.hasProperty.call(void 0,t.notifications,r)&&delete t.notifications[r]}))}markRead(e){this.update((t=>{for(const r of e)s.hasProperty.call(void 0,t.notifications,r)&&(t.notifications[r].readDate=Date.now())}))}clear(){this.update((()=>({...c})))}};r.NotificationController=u}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/chunk-DR374FE2.js"}],[1802,{"./chunk-DR374FE2.js":1801},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-DR374FE2.js");r.NotificationController=n.NotificationController}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/index.js"}],[1803,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[1804,{"./chunk-UJFCPTF3.js":1806,"./chunk-Z4BLTVTB.js":1807},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1805,{"./chunk-Z4BLTVTB.js":1807,immer:4295},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[1806,{"./chunk-Z4BLTVTB.js":1807},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,u,l,d,h,p=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=p.__privateGet.call(void 0,this,a);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,i);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,u),p.__privateAdd.call(void 0,this,d),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateSet.call(void 0,this,n,e),p.__privateSet.call(void 0,this,s,t),p.__privateSet.call(void 0,this,i,r),p.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,u,l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!p.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?p.__privateGet.call(void 0,this,n).subscribe(e,t,r):p.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1807,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1808,{"./chunk-FTHCJ6HY.js":1803,"./chunk-G42723LG.js":1804,"./chunk-IURK6TKD.js":1805,"./chunk-UJFCPTF3.js":1806,"./chunk-Z4BLTVTB.js":1807},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1809,{"./errors.cjs":1817,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[181,{"../../../shared/constants/network":5154,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:51,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:n,type:i}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},a=null===(r=s.BUILT_IN_NETWORKS[i])||void 0===r?void 0:r.chainId;a&&n!==a&&(e.NetworkController.provider.chainId=a);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[1810,{"./assert.cjs":1809,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[1811,{"./assert.cjs":1809,"./hex.cjs":1818,"@scure/base":2935,buffer:3661},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function p(e){d(e);const t=h(e);return BigInt(t)}function f(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<o?a:c),u=s-(s<o?a:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?f(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=p,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=p(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=f,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[1812,{"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1813,{"./base64.cjs":1810,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[1814,{"./assert.cjs":1809,"./bytes.cjs":1811,"./hex.cjs":1818,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),u=(0,n.coerce)((0,n.bigint)(),o,BigInt),l=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[1815,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[1816,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1817,{"./misc.cjs":1823,"pony-cause":4620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[1818,{"./assert.cjs":1809,"./bytes.cjs":1811,"@metamask/superstruct":2715,"@noble/hashes/sha3":2916},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[1819,{"./assert.cjs":1809,"./base64.cjs":1810,"./bytes.cjs":1811,"./caip-types.cjs":1812,"./checksum.cjs":1813,"./coercers.cjs":1814,"./collections.cjs":1815,"./encryption-types.cjs":1816,"./errors.cjs":1817,"./hex.cjs":1818,"./json.cjs":1820,"./keyring.cjs":1821,"./logging.cjs":1822,"./misc.cjs":1823,"./number.cjs":1824,"./opaque.cjs":1825,"./promise.cjs":1826,"./time.cjs":1827,"./transaction-types.cjs":1828,"./versions.cjs":1829},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/index.cjs"}],[182,{"../../../shared/constants/network":5154,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:52,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:n}=e.PreferencesController,i={},a={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){i[e]={},t[e][s.NETWORK_TYPES.RPC]&&n.forEach((r=>{i[e][r.chainId]=t[e][s.NETWORK_TYPES.RPC]}));for(const r of Object.keys(t[e]))switch(r){case s.NETWORK_TYPES.MAINNET:i[e][s.CHAIN_IDS.MAINNET]=t[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":i[e]["0x3"]=t[e].ropsten;break;case"rinkeby":i[e]["0x4"]=t[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:i[e][s.CHAIN_IDS.GOERLI]=t[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":i[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=i}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){a[e]={},r[e][s.NETWORK_TYPES.RPC]&&n.forEach((t=>{a[e][t.chainId]=r[e][s.NETWORK_TYPES.RPC]}));for(const t of Object.keys(r[e]))switch(t){case s.NETWORK_TYPES.MAINNET:a[e][s.CHAIN_IDS.MAINNET]=r[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":a[e]["0x3"]=r[e].ropsten;break;case"rinkeby":a[e]["0x4"]=r[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:a[e][s.CHAIN_IDS.GOERLI]=r[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":a[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=a}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[1820,{"./assert.cjs":1809,"./misc.cjs":1823,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=o;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(r.JsonStruct),stack:o((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/json.cjs"}],[1821,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[1822,{debug:3806},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[1823,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[1824,{"./assert.cjs":1809,"./hex.cjs":1818},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/number.cjs"}],[1825,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[1826,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[1827,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/time.cjs"}],[1828,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1829,{"./assert.cjs":1809,"@metamask/superstruct":2715,semver:4949},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[183,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:53,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const n=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,i=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(n)&&n.forEach((e=>{e&&(e.type!==s.TransactionType.retry&&e.type!==s.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)}));if(i){Object.entries(i).forEach((([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:s.TransactionType.incoming})}))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[1830,{"./url-alphabet/index.cjs":1831},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let a="";for(;;){let t=r(s),o=s;for(;o--;)if(a+=e[t[o]&n]||"",a.length===i)return a}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,s),customRandom:i,urlAlphabet:n,random:s}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/index.browser.cjs"}],[1831,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[184,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");function s(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}r.default={version:54,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=t.PreferencesController.tokens||[],n=r.filter((({decimals:e})=>s(e)));for(const e of n)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=n;const{accountTokens:i}=t.PreferencesController;if(i&&"object"==typeof i)for(const e of Object.keys(i)){const t=i[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter((({decimals:e})=>s(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=i,t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[185,{"../../../shared/constants/network":5154,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:55,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,n.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,((e,t)=>{var r;return(null===(r=s.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??i})),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId[i],delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};const i="UNKNOWN";s.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},s.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},s.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}],[186,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:56,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=56;const{PreferencesController:r}=t.data;return Array.isArray(null==r?void 0:r.tokens)&&(r.tokens=r.tokens.filter((({address:e})=>e))),null!=r&&r.accountTokens&&"object"==typeof r.accountTokens&&Object.keys(r.accountTokens).forEach((e=>{Object.keys(r.accountTokens[e]).forEach((t=>{r.accountTokens[e][t]=r.accountTokens[e][t].filter((({address:e})=>e))}))})),null!=r&&r.assetImages&&"undefined"in r.assetImages&&delete r.assetImages.undefined,t}}}}},{package:"$root$",file:"app/scripts/migrations/056.js"}],[187,{"../../../shared/modules/random-id":5200,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("../../../shared/modules/random-id"))&&n.__esModule?n:{default:n};r.default={version:57,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=57;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.TransactionController)&&void 0!==t&&t.transactions&&Array.isArray(e.TransactionController.transactions)&&!e.TransactionController.transactions.some((e=>"object"!=typeof e||void 0===e.txParams))&&(e.TransactionController.transactions=(0,s.keyBy)(e.TransactionController.transactions,(e=>(void 0!==e.id&&null!==e.id||(e.id=(0,i.default)()),e.id))));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/057.js"}],[188,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:58,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[1881,{"./ObservableStore":1883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1882,{"./ObservableStore":1883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/MergedStore.js"}],[1883,{"@metamask/safe-event-emitter":2182},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),e===undefined?this._state={}:this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[1884,{"readable-stream":4899},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("readable-stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/asStream.js"}],[1885,{"./ComposedStore":1881,"./MergedStore":1882,"./ObservableStore":1883,"./asStream":1884,"./transform":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/index.js"}],[1886,{"readable-stream":4899},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("readable-stream");r.storeTransformStream=function(e){return new n.Transform({objectMode:!0,transform:(t,r,n)=>{try{const r=e(t);return n(undefined,r),undefined}catch(e){return n(e),undefined}}})}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/transform.js"}],[189,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:59,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=59;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r)){const t=(0,n.groupBy)(Object.values(r),(e=>{var t;return`${null===(t=e.txParams)||void 0===t?void 0:t.nonce}-${e.chainId??e.metamaskNetworkId}`})),i=(0,n.pickBy)(t,(e=>e.some((e=>e.type!==s.TransactionType.cancel&&e.type!==s.TransactionType.retry))));e.TransactionController.transactions=(0,n.keyBy)((0,n.concat)(...Object.values(i)),(e=>e.id))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/059.js"}],[19,{"@metamask/base-controller":1192},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsDataDeletionController=void 0;var n=e("@metamask/base-controller");function s(e,t,r){i(e,t),t.set(e,r)}function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,c(e,t,"get"))}function o(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,c(e,t,"set"),r),r}function c(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const u="MetaMetricsDataDeletionController",l={metaMetricsDataDeletionId:{persist:!0,anonymous:!0},metaMetricsDataDeletionTimestamp:{persist:!0,anonymous:!0},metaMetricsDataDeletionStatus:{persist:!0,anonymous:!0}};var d=new WeakMap,h=new WeakMap,p=new WeakSet;class f extends n.BaseController{constructor({dataDeletionService:e,messenger:t,state:r,getMetaMetricsId:n}){var a,c;super({messenger:t,metadata:l,name:u,state:{metaMetricsDataDeletionId:null,metaMetricsDataDeletionTimestamp:0,...r}}),i(a=this,c=p),c.add(a),s(this,d,{writable:!0,value:void 0}),s(this,h,{writable:!0,value:void 0}),o(this,h,n),o(this,d,e),function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(this,p,m).call(this)}async createMetaMetricsDataDeletionTask(){const e=a(this,h).call(this);if(!e)throw new Error("MetaMetrics ID not found");const t=await a(this,d).createDataDeletionRegulationTask(e);this.update((e=>{e.metaMetricsDataDeletionId=t??null,e.metaMetricsDataDeletionTimestamp=Date.now()})),await this.updateDataDeletionTaskStatus()}async updateDataDeletionTaskStatus(){const e=this.state.metaMetricsDataDeletionId;if(!e)throw new Error("Delete Regulation id not found");const t=await a(this,d).fetchDeletionRegulationStatus(e);this.update((e=>{e.metaMetricsDataDeletionStatus=t??undefined}))}}function m(){this.messagingSystem.registerActionHandler(`${u}:createMetaMetricsDataDeletionTask`,this.createMetaMetricsDataDeletionTask.bind(this)),this.messagingSystem.registerActionHandler(`${u}:updateDataDeletionTaskStatus`,this.updateDataDeletionTaskStatus.bind(this))}r.MetaMetricsDataDeletionController=f}}},{package:"$root$",file:"app/scripts/controllers/metametrics-data-deletion/metametrics-data-deletion.ts"}],[190,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s="2020-08-31";r.default={version:60,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=60;const r=function(e){var t;const r=null==e||null===(t=e.NotificationController)||void 0===t?void 0:t.notifications;var i;(0,n.isPlainObject)(r)&&(null===(i=r[2])||void 0===i?void 0:i.date)===s&&delete e.NotificationController.notifications[2];return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/060.js"}],[191,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:61,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[192,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:62,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[193,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:63,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,n,s,i,a,o,c;const u=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,l=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,d={};u&&Object.keys(u).forEach((e=>{Object.keys(u[e]).forEach((t=>{const r=u[e][t];d[t]===undefined?d[t]={[e]:r}:d[t]={...d[t],[e]:r}}))}));const h={};l&&Object.keys(l).forEach((e=>{Object.keys(l[e]).forEach((t=>{const r=l[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=d,e.TokensController.allIgnoredTokens=h):e.TokensController={allTokens:d,allIgnoredTokens:h};return null==e||null===(n=e.PreferencesController)||void 0===n||delete n.accountHiddenTokens,null==e||null===(s=e.PreferencesController)||void 0===s||delete s.accountTokens,null==e||null===(i=e.PreferencesController)||void 0===i||delete i.assetImages,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.hiddenTokens,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.tokens,null==e||null===(c=e.PreferencesController)||void 0===c||delete c.suggestedTokens,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[194,{"@metamask/transaction-controller":2741,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");const i="sentEther";r.default={version:64,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r))for(const e of Object.values(r))e.type===i&&(e.type=s.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===i&&(e.type=s.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[195,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:65,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[196,{"../../../shared/constants/hardware-wallets":5146,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/hardware-wallets");r.default={version:66,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?s.LedgerTransportTypes.webhid:s.LedgerTransportTypes.u2f,n=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),i={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:n?s.LedgerTransportTypes.live:r}};return delete i.PreferencesController.useLedgerLive,i}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[197,{"../../../shared/constants/network":5154,"bignumber.js":3565,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/network");const o=e=>new i.default(e||"0x0",16).gt(0);r.default={version:67,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,n;const s=(null==e?void 0:e.PreferencesController)||{},i=s.preferences||{};if(i.showTestNetworks)return e;const c=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},u=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},l=(null===(n=e.CachedBalancesController)||void 0===n?void 0:n.cachedBalances)||{},d=a.TEST_CHAINS.includes(null==u?void 0:u.chainId),h=Object.values(c).some((({chainId:e})=>a.TEST_CHAINS.includes(e))),p=a.TEST_CHAINS.some((e=>Object.values(l[e]||{}).some(o))),f=d||h||p,m={...e,PreferencesController:{...s,preferences:{...i,showTestNetworks:f}}};return m}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[198,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:68,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=68;const r=function(e){const{PermissionsController:t={},PermissionsMetadata:r={},...n}=e,{domainMetadata:a={},permissionsHistory:o={},permissionsLog:c=[]}=r;return{...n,PermissionController:s(t),PermissionLogController:{permissionActivityLog:c,permissionHistory:o},SubjectMetadataController:i(a)}}(t.data);return t.data=r,t}};function s(e){const{domains:t={}}=e;return{subjects:Object.entries(t).reduce(((e,[t,r])=>{const{permissions:[n]}=r,s=n.caveats.find((e=>"exposedAccounts"===e.name)),i={...n,caveats:[{type:"restrictReturnedAccounts",value:s.value}]};return delete i["@context"],e[t]={origin:t,permissions:{eth_accounts:i}},e}),{})}}function i(e){return{subjectMetadata:Object.entries(e).reduce(((e,[t,r])=>{const{name:n=null,icon:s=null,extensionId:i=null,...a}=r;return delete a.lastUpdated,delete a.host,t&&(e[t]={name:n,iconUrl:s,extensionId:i,...a,origin:t}),e}),{})}}}}},{package:"$root$",file:"app/scripts/migrations/068.js"}],[1983,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},s=Object.freeze({restrictReturnedAccounts:"restrictReturnedAccounts"}),i=(e=>(e.restricted="restricted",e.internal="internal",e))(i||{});r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r),r.WALLET_PREFIX="wallet_",r.CAVEAT_TYPES=s,r.LOG_IGNORE_METHODS=["wallet_registerOnboarding","wallet_watchAsset"],r.LOG_METHOD_TYPES=i,r.LOG_LIMIT=100}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/chunk-7KORYHSJ.js"}],[1984,{"./chunk-7KORYHSJ.js":1983,"@metamask/base-controller":1991,"@metamask/utils":2002},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,u,l,d,h,p,f,m,g,y,v=e("./chunk-7KORYHSJ.js"),w=e("@metamask/base-controller"),_=e("@metamask/utils"),b={permissionHistory:{},permissionActivityLog:[]},k=class extends w.BaseController{constructor({messenger:e,restrictedMethods:t,state:r}){super({messenger:e,name:"PermissionLogController",metadata:{permissionHistory:{persist:!0,anonymous:!1},permissionActivityLog:{persist:!0,anonymous:!1}},state:{...b,...r}}),v.__privateAdd.call(void 0,this,s),v.__privateAdd.call(void 0,this,a),v.__privateAdd.call(void 0,this,c),v.__privateAdd.call(void 0,this,l),v.__privateAdd.call(void 0,this,h),v.__privateAdd.call(void 0,this,f),v.__privateAdd.call(void 0,this,g),v.__privateAdd.call(void 0,this,n,void 0),v.__privateSet.call(void 0,this,n,t)}updateAccountsHistory(e,t){if(0===t.length)return;const r={eth_accounts:{accounts:v.__privateMethod.call(void 0,this,s,i).call(this,t,Date.now())}};v.__privateMethod.call(void 0,this,h,p).call(this,e,r)}createMiddleware(){return(e,t,r)=>{const{origin:s,method:i}=e,h=i.startsWith(v.WALLET_PREFIX),p="eth_requestAccounts"===i;if(!v.LOG_IGNORE_METHODS.includes(i)&&(h||v.__privateGet.call(void 0,this,n).has(i))||p){const n=v.__privateMethod.call(void 0,this,a,o).call(this,e,h),i=v.__privateMethod.call(void 0,this,f,m).call(this,e);r((e=>{const r=Date.now();v.__privateMethod.call(void 0,this,c,u).call(this,n,t,r),i&&!t.error&&t.result&&s&&v.__privateMethod.call(void 0,this,l,d).call(this,i,s,t.result,r,p),e()}))}else r()}}};n=new WeakMap,s=new WeakSet,i=function(e,t){return e.reduce(((e,r)=>({...e,[r]:t})),{})},a=new WeakSet,o=function(e,t){const r={id:e.id,method:e.method,methodType:t?"internal":"restricted",origin:e.origin,requestTime:Date.now(),responseTime:null,success:null};return this.update((e=>{const t=[...e.permissionActivityLog,r];e.permissionActivityLog=t.length>v.LOG_LIMIT?t.slice(1):t})),r},c=new WeakSet,u=function(e,t,r){e&&t&&this.update((n=>{n.permissionActivityLog=n.permissionActivityLog.map((n=>n.id===e.id?{...n,success:_.hasProperty.call(void 0,t,"result"),responseTime:r}:n))}))},l=new WeakSet,d=function(e,t,r,n,a){let o;if(a){const e=r;o={eth_accounts:{accounts:v.__privateMethod.call(void 0,this,s,i).call(this,e,n),lastApproved:n}}}else{o=r.reduce(((t,r)=>{const a=r.parentCapability;if(!e.includes(a))return t;if("eth_accounts"===a){const e=v.__privateMethod.call(void 0,this,g,y).call(this,r);return{...t,[a]:{lastApproved:n,accounts:v.__privateMethod.call(void 0,this,s,i).call(this,e,n)}}}return{...t,[a]:{lastApproved:n}}}),{})}Object.keys(o).length>0&&v.__privateMethod.call(void 0,this,h,p).call(this,t,o)},h=new WeakSet,p=function(e,t){const{permissionHistory:r}=this.state,n=r[e]??{},s={...n,...t},i=n.eth_accounts,a=t.eth_accounts;if(i&&a){const e=a.lastApproved??i.lastApproved;s.eth_accounts={lastApproved:e,accounts:{...i.accounts,...a.accounts}}}this.update((t=>{t.permissionHistory={...r,[e]:s}}))},f=new WeakSet,m=function(e){const{method:t,params:r}=e;return"eth_requestAccounts"===t?["eth_accounts"]:t===`${v.WALLET_PREFIX}requestPermissions`&&r&&Array.isArray(r)&&r[0]&&"object"==typeof r[0]&&!Array.isArray(r[0])?Object.keys(r[0]):null},g=new WeakSet,y=function(e){if("eth_accounts"!==e.parentCapability||!e.caveats)return[];const t=new Set;for(const r of e.caveats)if(r.type===v.CAVEAT_TYPES.restrictReturnedAccounts&&Array.isArray(r.value))for(const e of r.value)t.add(e);return[...t]},r.PermissionLogController=k}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/chunk-WGNFIOME.js"}],[1985,{"./chunk-7KORYHSJ.js":1983,"./chunk-WGNFIOME.js":1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-WGNFIOME.js");e("./chunk-7KORYHSJ.js"),r.PermissionLogController=n.PermissionLogController}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/index.js"}],[1986,{"./chunk-UJFCPTF3.js":1988,"./chunk-Z4BLTVTB.js":1989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1987,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[1988,{"./chunk-Z4BLTVTB.js":1989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,u,l,d,h,p=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=p.__privateGet.call(void 0,this,a);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,i);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,u),p.__privateAdd.call(void 0,this,d),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateSet.call(void 0,this,n,e),p.__privateSet.call(void 0,this,s,t),p.__privateSet.call(void 0,this,i,r),p.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,u,l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!p.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?p.__privateGet.call(void 0,this,n).subscribe(e,t,r):p.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1989,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[199,{"@metamask/permission-controller":1899,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/permission-controller"),s=e("lodash");r.default={version:69,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=69;const r=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?n.SubjectType.Extension:n.SubjectType.Website)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[1990,{"./chunk-Z4BLTVTB.js":1989,immer:4295},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-ZNOPSWMU.js"}],[1991,{"./chunk-G42723LG.js":1986,"./chunk-NINOM2XQ.js":1987,"./chunk-UJFCPTF3.js":1988,"./chunk-Z4BLTVTB.js":1989,"./chunk-ZNOPSWMU.js":1990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-NINOM2XQ.js"),s=e("./chunk-ZNOPSWMU.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1992,{"./errors.cjs":2e3,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[1993,{"./assert.cjs":1992,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[1994,{"./assert.cjs":1992,"./hex.cjs":2001,"@scure/base":2935,buffer:3661},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function p(e){d(e);const t=h(e);return BigInt(t)}function f(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<o?a:c),u=s-(s<o?a:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?f(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=p,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=p(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=f,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[1995,{"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1996,{"./base64.cjs":1993,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[1997,{"./assert.cjs":1992,"./bytes.cjs":1994,"./hex.cjs":2001,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),u=(0,n.coerce)((0,n.bigint)(),o,BigInt),l=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[1998,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[1999,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[20,{"../../../development/build/constants":287,"../../../shared/constants/alarms":5136,"../../../shared/constants/app":5138,"../../../shared/constants/metametrics":5150,"../../../shared/constants/time":5166,"../../../shared/constants/transaction":5168,"../../../shared/modules/mv3.utils":5197,"../lib/util":130,"@metamask/name-controller":1708,"@metamask/obs-store":1885,buffer:3661,"ethereumjs-util":3898,lodash:4483,uuid:5066},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.overrideAnonymousEventNames=r.default=void 0;var n=e("lodash"),s=e("@metamask/obs-store"),i=e("ethereumjs-util"),a=e("uuid"),o=e("@metamask/name-controller"),c=e("../../../shared/constants/app"),u=e("../../../shared/constants/metametrics"),l=e("../../../shared/constants/time"),d=e("../../../shared/modules/mv3.utils"),h=e("../../../shared/constants/alarms"),p=e("../lib/util"),f=e("../../../shared/constants/transaction"),m=e("../../../development/build/constants");function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=r.overrideAnonymousEventNames={[f.TransactionMetaMetricsEvent.added]:f.AnonymousTransactionMetaMetricsEvent.added,[f.TransactionMetaMetricsEvent.approved]:f.AnonymousTransactionMetaMetricsEvent.approved,[f.TransactionMetaMetricsEvent.finalized]:f.AnonymousTransactionMetaMetricsEvent.finalized,[f.TransactionMetaMetricsEvent.rejected]:f.AnonymousTransactionMetaMetricsEvent.rejected,[f.TransactionMetaMetricsEvent.submitted]:f.AnonymousTransactionMetaMetricsEvent.submitted,[u.MetaMetricsEventName.SignatureRequested]:u.MetaMetricsEventName.SignatureRequestedAnon,[u.MetaMetricsEventName.SignatureApproved]:u.MetaMetricsEventName.SignatureApprovedAnon,[u.MetaMetricsEventName.SignatureRejected]:u.MetaMetricsEventName.SignatureRejectedAnon},v=e=>{setTimeout((()=>{throw e}))},w=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,p.generateRandomId)()},_={'You must pass either an "anonymousId" or a "userId".':!0};r.default=class{constructor({segment:e,preferencesControllerState:t,onPreferencesStateChange:r,onNetworkDidChange:i,getCurrentChainId:a,version:o,environment:c,initState:u,extension:f,captureException:m=v}){g(this,"_getAllNFTsFlattened",(0,n.memoize)(((e={})=>Object.values(e).reduce(((e,t)=>e.concat(...Object.values(t))),[])))),g(this,"_isValidTraitArray",(e=>Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"boolean"==typeof e))||e.every((e=>"number"==typeof e))))),g(this,"_isValidTraitDate",(e=>"[object Date]"===Object.prototype.toString.call(e))),this._captureException=e=>{_[e.message]||m(e)},this.chainId=a(),this.locale=t.currentLocale.replace("_","-"),this.version="production"===c?o:`${o}-${c}`,this.extension=f,this.environment=c;const y=(0,n.omitBy)(null==u?void 0:u.fragments,"persist"),w=(null==u?void 0:u.segmentApiCalls)||{};this.store=new s.ObservableStore({participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],traits:{},previousUserTraits:{},...u,fragments:{...null==u?void 0:u.fragments},segmentApiCalls:{...w}}),r((({currentLocale:e})=>{this.locale=null==e?void 0:e.replace("_","-")})),i((()=>{this.chainId=a()})),this.segment=e,Object.values(y).forEach((e=>{this.finalizeEventFragment(e.id,{abandoned:!0})})),d.isManifestV3&&Object.values(w).forEach((({eventType:e,payload:t})=>{try{this._submitSegmentAPICall(e,t)}catch(e){this._captureException(e)}})),d.isManifestV3?(this.extension.alarms.getAll().then((e=>{(0,p.checkAlarmExists)(e,h.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||this.extension.alarms.create(h.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})})),this.extension.alarms.onAlarm.addListener((e=>{e.name===h.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()}))):setInterval((()=>{this.finalizeAbandonedFragments()}),30*l.SECOND)}finalizeAbandonedFragments(){Object.values(this.store.getState().fragments).forEach((e=>{e.timeout&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.finalizeEventFragment(e.id,{abandoned:!0})}))}generateMetaMetricsId(){return(0,i.bufferToHex)((0,i.keccak)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent||!e.category)throw new Error(`Must specify success event and category. Success event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.store.getState(),r=e.uniqueIdentifier??(0,a.v4)(),n={id:r,...e,lastUpdated:Date.now()};return this.store.updateState({fragments:{...t,[r]:n}}),e.initialEvent&&this.trackEvent({event:n.initialEvent,category:n.category,properties:n.properties,sensitiveProperties:n.sensitiveProperties,page:n.page,referrer:n.referrer,revenue:n.revenue,value:n.value,currency:n.currency,environmentType:n.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),n}getEventFragmentById(e){const{fragments:t}=this.store.getState();return t[e]}updateEventFragment(e,t){const{fragments:r}=this.store.getState();if(!r[e])throw new Error(`Event fragment with id ${e} does not exist.`);this.store.updateState({fragments:{...r,[e]:(0,n.merge)(r[e],{...t,lastUpdated:Date.now()})}})}finalizeEventFragment(e,{abandoned:t=!1,page:r,referrer:n}={}){const s=this.store.getState().fragments[e];if(!s)throw new Error(`Funnel with id ${e} does not exist.`);const i=t?s.failureEvent:s.successEvent;this.trackEvent({event:i,category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:r??s.page,referrer:s.referrer??n,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:s.actionId,uniqueIdentifier:s.uniqueIdentifier?`${s.uniqueIdentifier}-${t?"failure":"success"}`:undefined});const{fragments:a}=this.store.getState();delete a[e],this.store.updateState({fragments:a})}identify(e){const{metaMetricsId:t,participateInMetaMetrics:r}=this.state;if(!r||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const n=this._buildValidTraits(e);this._identify(n)}updateExtensionUninstallUrl(e,r){const n={};e&&(n.mmi=t.from(r).toString("base64"),n.env=this.environment,n.av=this.version);const s=new URLSearchParams(n);this.extension&&this.extension.runtime&&this.extension.runtime.setUninstallURL(`https://metamask.io/uninstalled?${s}`)}async setParticipateInMetaMetrics(e){const{metaMetricsId:t}=this.state,r=e&&!t?this.generateMetaMetricsId():t;return this.store.updateState({participateInMetaMetrics:e,metaMetricsId:r}),e?(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn()):this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),this.environment!==m.ENVIRONMENT.DEVELOPMENT&&this.updateExtensionUninstallUrl(e,r),r}setDataCollectionForMarketing(e){const{metaMetricsId:t}=this.state;return this.store.updateState({dataCollectionForMarketing:e}),!e&&this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),t}setMarketingCampaignCookieId(e){this.store.updateState({marketingCampaignCookieId:e})}get state(){return this.store.getState()}trackPage({name:e,params:t,environmentType:r,page:n,referrer:s,actionId:i},a){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==a||!a.isOptInPath))return;const{metaMetricsId:o}=this.state,c=o?"userId":"anonymousId",l=o??u.METAMETRICS_ANONYMOUS_ID;this._submitSegmentAPICall("page",{messageId:w({actionId:i}),[c]:l,name:e,properties:{params:t,locale:this.locale,chain_id:this.chainId,environment_type:r},context:this._buildContext(s,n)})}catch(e){this._captureException(e)}}trackEvent(e,t){this.validatePayload(e),this.submitEvent(e,t).catch((e=>this._captureException(e)))}async submitEvent(e,t){if(this.validatePayload(e),!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const r=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const s=y[`${e.event}`],i={...e,event:s??e.event},a=(0,n.merge)(i.sensitiveProperties,i.properties);r.push(this._track(this._buildEventPayload({...i,properties:a,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}r.push(this._track(this._buildEventPayload(e),t)),await Promise.all(r)}validatePayload(e){if(!e.event||!e.category)throw new Error(`Must specify event and category. Event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.store.getState();e.forEach((e=>{this.trackEvent(e)}))}clearEventsAfterMetricsOptIn(){this.store.updateState({eventsBeforeMetricsOptIn:[]})}addEventBeforeMetricsOptIn(e){const t=this.store.getState().eventsBeforeMetricsOptIn;this.store.updateState({eventsBeforeMetricsOptIn:[...t,e]})}updateTraits(e){const{traits:t}=this.store.getState();this.store.updateState({traits:{...t,...e}})}getMetaMetricsId(){let{metaMetricsId:e}=this.state;return e||(e=this.generateMetaMetricsId(),this.store.updateState({metaMetricsId:e})),e}_buildContext(e,t=u.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e,marketingCampaignCookieId:this.state.marketingCampaignCookieId}}_buildEventPayload(e){const{event:t,properties:r,revenue:s,value:i,currency:a,category:o,page:u,referrer:l,environmentType:d=c.ENVIRONMENT_TYPE_BACKGROUND}=e;return{event:t,messageId:w(e),properties:{...(0,n.omit)(r,["revenue","locale","currency","value"]),revenue:s,value:i,currency:a,category:o,locale:this.locale,chain_id:(null==r?void 0:r.chain_id)??this.chainId,environment_type:d},context:this._buildContext(l,u)}}_buildUserTraitsObject(e){var t;const{traits:r,previousUserTraits:s}=this.store.getState(),i={[u.MetaMetricsUserTrait.AddressBookEntries]:(0,n.sum)(Object.values(e.addressBook).map(n.size)),[u.MetaMetricsUserTrait.InstallDateExt]:r[u.MetaMetricsUserTrait.InstallDateExt]||"",[u.MetaMetricsUserTrait.LedgerConnectionType]:e.ledgerTransportType,[u.MetaMetricsUserTrait.NetworksAdded]:Object.values(e.networkConfigurationsByChainId).map((e=>e.chainId)),[u.MetaMetricsUserTrait.NetworksWithoutTicker]:Object.values(e.networkConfigurationsByChainId).filter((({nativeCurrency:e})=>!e)).map((({chainId:e})=>e)),[u.MetaMetricsUserTrait.NftAutodetectionEnabled]:e.useNftDetection,[u.MetaMetricsUserTrait.NumberOfAccounts]:Object.values(e.internalAccounts.accounts).length,[u.MetaMetricsUserTrait.NumberOfNftCollections]:this._getAllUniqueNFTAddressesLength(e.allNfts),[u.MetaMetricsUserTrait.NumberOfNfts]:this._getAllNFTsFlattened(e.allNfts).length,[u.MetaMetricsUserTrait.NumberOfTokens]:this._getNumberOfTokens(e),[u.MetaMetricsUserTrait.OpenseaApiEnabled]:e.openSeaEnabled,[u.MetaMetricsUserTrait.ThreeBoxEnabled]:!1,[u.MetaMetricsUserTrait.Theme]:e.theme||"default",[u.MetaMetricsUserTrait.TokenDetectionEnabled]:e.useTokenDetection,[u.MetaMetricsUserTrait.ShowNativeTokenAsMainBalance]:e.showNativeTokenAsMainBalance,[u.MetaMetricsUserTrait.CurrentCurrency]:e.currentCurrency,[u.MetaMetricsUserTrait.SecurityProviders]:e.securityAlertsEnabled?["blockaid"]:[],[u.MetaMetricsUserTrait.PetnameAddressCount]:this._getPetnameAddressCount(e),[u.MetaMetricsUserTrait.IsMetricsOptedIn]:e.participateInMetaMetrics,[u.MetaMetricsUserTrait.HasMarketingConsent]:e.dataCollectionForMarketing,[u.MetaMetricsUserTrait.TokenSortPreference]:(null===(t=e.tokenSortConfig)||void 0===t?void 0:t.key)||""};if(!s)return this.store.updateState({previousUserTraits:i}),i;if(s&&!(0,n.isEqual)(s,i)){const e=(0,n.pickBy)(i,((e,t)=>!(0,n.isEqual)(s[t],e)));return this.store.updateState({previousUserTraits:i}),e}return null}_buildValidTraits(e){return Object.entries(e).reduce(((e,[t,r])=>(this._isValidTraitDate(r)?e[t]=r.toISOString():this._isValidTrait(r)?e[t]=r:console.warn(`MetaMetricsController: "${t}" value is not a valid trait type`),e)),{})}_getAllUniqueNFTAddressesLength(e={}){const t=this._getAllNFTsFlattened(e).map((e=>e.address));return new Set(t).size}_getNumberOfTokens(e){return Object.values(e.allTokens).reduce(((e,t)=>e+(0,n.sum)(Object.values(t).map(n.size))),0)}_identify(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{this._submitSegmentAPICall("identify",{userId:t,traits:e})}catch(e){this._captureException(e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}_isValidTrait(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||this._isValidTraitArray(e)||this._isValidTraitDate(e)}_track(e,t){const{isOptIn:r,metaMetricsId:n,matomoEvent:s,flushImmediately:i}=t||{};let a="userId",o=this.state.metaMetricsId,c=(null==t?void 0:t.excludeMetaMetricsId)??!1;const l=Boolean(e.event.match(/^send|^confirm/iu));return!1!==(null==t?void 0:t.excludeMetaMetricsId)&&l&&(c=!0),c||r&&!n?(a="anonymousId",o=u.METAMETRICS_ANONYMOUS_ID):r&&n&&(o=n),e[a]=o,!0===s&&(e.properties.legacy_event=!0),new Promise(((t,r)=>{this._submitSegmentAPICall("track",e,(e=>{if(e){const t=new Error(e.message);return t.stack=e.stack,r(t)}return t()})),i&&this.segment.flush()}))}_submitSegmentAPICall(e,t,r){const{metaMetricsId:n,participateInMetaMetrics:s,latestNonAnonymousEventTimestamp:i}=this.state;if(!s||!n)return;const a=t.messageId||(0,p.generateRandomId)();let o=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,p.isValidDate)(e)&&(o=e)}const c={...t,messageId:a,timestamp:o};this.store.updateState({...this.store.getState(),latestNonAnonymousEventTimestamp:c.anonymousId===u.METAMETRICS_ANONYMOUS_ID?i:o.valueOf(),segmentApiCalls:{...this.store.getState().segmentApiCalls,[a]:{eventType:e,payload:{...c,timestamp:c.timestamp.toString()}}}});this.segment[e](c,(e=>{const{segmentApiCalls:t}=this.store.getState();return delete t[a],this.store.updateState({segmentApiCalls:t}),null==r?void 0:r(e)}))}_getPetnameAddressCount(e){var t;const r=(null===(t=e.names)||void 0===t?void 0:t[o.NameType.ETHEREUM_ADDRESS])??{};return Object.keys(r).reduce(((e,t)=>{const n=r[t];return e+Object.keys(n).reduce(((e,t)=>{var r;return e+(Boolean(null===(r=n[t].name)||void 0===r?void 0:r.length)?1:0)}),0)}),0)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics.js"}],[200,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:70,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=70;const r=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[2e3,{"./misc.cjs":2006,"pony-cause":4620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[2001,{"./assert.cjs":1992,"./bytes.cjs":1994,"@metamask/superstruct":2715,"@noble/hashes/sha3":2916},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[2002,{"./assert.cjs":1992,"./base64.cjs":1993,"./bytes.cjs":1994,"./caip-types.cjs":1995,"./checksum.cjs":1996,"./coercers.cjs":1997,"./collections.cjs":1998,"./encryption-types.cjs":1999,"./errors.cjs":2e3,"./hex.cjs":2001,"./json.cjs":2003,"./keyring.cjs":2004,"./logging.cjs":2005,"./misc.cjs":2006,"./number.cjs":2007,"./opaque.cjs":2008,"./promise.cjs":2009,"./time.cjs":2010,"./transaction-types.cjs":2011,"./versions.cjs":2012},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/index.cjs"}],[2003,{"./assert.cjs":1992,"./misc.cjs":2006,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=o;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(r.JsonStruct),stack:o((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/json.cjs"}],[2004,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[2005,{debug:3806},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[2006,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[2007,{"./assert.cjs":1992,"./hex.cjs":2001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/number.cjs"}],[2008,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[2009,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[201,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:71,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=71;const r=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[2010,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/time.cjs"}],[2011,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2012,{"./assert.cjs":1992,"@metamask/superstruct":2715,semver:4949},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[2013,{"./PhishingDetector.cjs":2014,"./types.cjs":2016,"./utils.cjs":2017,"@metamask/base-controller":1192,"@metamask/controller-utils":1218,"punycode/punycode.js":4689},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,p,f,m,g=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingController=r.phishingListKeyNameMap=r.ListNames=r.ListKeys=r.C2_DOMAIN_BLOCKLIST_URL=r.METAMASK_HOTLIST_DIFF_URL=r.METAMASK_STALELIST_URL=r.STALELIST_REFRESH_INTERVAL=r.HOTLIST_REFRESH_INTERVAL=r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=r.C2_DOMAIN_BLOCKLIST_ENDPOINT=r.CLIENT_SIDE_DETECION_BASE_URL=r.METAMASK_HOTLIST_DIFF_FILE=r.METAMASK_STALELIST_FILE=r.PHISHING_CONFIG_BASE_URL=void 0;const v=e("@metamask/base-controller"),w=e("@metamask/controller-utils"),_=e("punycode/punycode.js"),b=e("./PhishingDetector.cjs"),k=e("./types.cjs"),S=e("./utils.cjs");var E,j;r.PHISHING_CONFIG_BASE_URL="https://phishing-detection.api.cx.metamask.io",r.METAMASK_STALELIST_FILE="/v1/stalelist",r.METAMASK_HOTLIST_DIFF_FILE="/v1/diffsSince",r.CLIENT_SIDE_DETECION_BASE_URL="https://client-side-detection.api.cx.metamask.io",r.C2_DOMAIN_BLOCKLIST_ENDPOINT="/v1/request-blocklist",r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=300,r.HOTLIST_REFRESH_INTERVAL=300,r.STALELIST_REFRESH_INTERVAL=2592e3,r.METAMASK_STALELIST_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_STALELIST_FILE}`,r.METAMASK_HOTLIST_DIFF_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_HOTLIST_DIFF_FILE}`,r.C2_DOMAIN_BLOCKLIST_URL=`${r.CLIENT_SIDE_DETECION_BASE_URL}${r.C2_DOMAIN_BLOCKLIST_ENDPOINT}`,function(e){e.EthPhishingDetectConfig="eth_phishing_detect_config"}(E||(r.ListKeys=E={})),function(e){e.MetaMask="MetaMask"}(j||(r.ListNames=j={}));const T={[j.MetaMask]:E.EthPhishingDetectConfig};r.phishingListKeyNameMap={[E.EthPhishingDetectConfig]:j.MetaMask};const C="PhishingController",I={phishingLists:{persist:!0,anonymous:!1},whitelist:{persist:!0,anonymous:!1},hotlistLastFetched:{persist:!0,anonymous:!1},stalelistLastFetched:{persist:!0,anonymous:!1},c2DomainBlocklistLastFetched:{persist:!0,anonymous:!1}};class P extends v.BaseController{constructor({stalelistRefreshInterval:e=r.STALELIST_REFRESH_INTERVAL,hotlistRefreshInterval:t=r.HOTLIST_REFRESH_INTERVAL,c2DomainBlocklistRefreshInterval:h=r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL,messenger:p,state:f={}}){super({name:C,metadata:I,messenger:p,state:{phishingLists:[],whitelist:[],hotlistLastFetched:0,stalelistLastFetched:0,c2DomainBlocklistLastFetched:0,...f}}),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),g(this,i,e,"f"),g(this,a,t,"f"),g(this,o,h,"f"),y(this,n,"m",d).call(this),this.updatePhishingDetector()}updatePhishingDetector(){g(this,s,new b.PhishingDetector(this.state.phishingLists),"f")}setStalelistRefreshInterval(e){g(this,i,e,"f")}setHotlistRefreshInterval(e){g(this,a,e,"f")}setC2DomainBlocklistRefreshInterval(e){g(this,o,e,"f")}isStalelistOutOfDate(){return(0,S.fetchTimeNow)()-this.state.stalelistLastFetched>=y(this,i,"f")}isHotlistOutOfDate(){return(0,S.fetchTimeNow)()-this.state.hotlistLastFetched>=y(this,a,"f")}isC2DomainBlocklistOutOfDate(){return(0,S.fetchTimeNow)()-this.state.c2DomainBlocklistLastFetched>=y(this,o,"f")}async maybeUpdateState(){if(this.isStalelistOutOfDate())return void await this.updateStalelist();this.isHotlistOutOfDate()&&await this.updateHotlist();this.isC2DomainBlocklistOutOfDate()&&await this.updateC2DomainBlocklist()}test(e){const t=(0,_.toASCII)(e),r=(0,S.getHostnameFromUrl)(t);return this.state.whitelist.includes(r||t)?{result:!1,type:k.PhishingDetectorResultType.All}:y(this,s,"f").check(t)}isBlockedRequest(e){const t=(0,_.toASCII)(e),r=(0,S.getHostnameFromUrl)(t);return this.state.whitelist.includes(r||t)?{result:!1,type:k.PhishingDetectorResultType.All}:y(this,s,"f").isMaliciousC2Domain(t)}bypass(e){const t=(0,_.toASCII)(e),r=(0,S.getHostnameFromUrl)(t),{whitelist:n}=this.state;n.includes(r||t)||this.update((e=>{e.whitelist.push(r||t)}))}async updateC2DomainBlocklist(){if(y(this,l,"f"))await y(this,l,"f");else try{g(this,l,y(this,n,"m",f).call(this),"f"),await y(this,l,"f")}finally{g(this,l,undefined,"f")}}async updateHotlist(){if(y(this,c,"f"))await y(this,c,"f");else try{g(this,c,y(this,n,"m",p).call(this),"f"),await y(this,c,"f")}finally{g(this,c,undefined,"f")}}async updateStalelist(){if(y(this,u,"f"))await y(this,u,"f");else try{g(this,u,y(this,n,"m",h).call(this),"f"),await y(this,u,"f")}finally{g(this,u,undefined,"f")}}}r.PhishingController=P,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,n=new WeakSet,d=function(){this.messagingSystem.registerActionHandler(`${C}:maybeUpdateState`,this.maybeUpdateState.bind(this)),this.messagingSystem.registerActionHandler(`${C}:testOrigin`,this.test.bind(this))},h=async function(){let e=null,t=null,s=null;try{const i=y(this,n,"m",m).call(this,r.METAMASK_STALELIST_URL),a=y(this,n,"m",m).call(this,r.C2_DOMAIN_BLOCKLIST_URL);[e,s]=await Promise.all([i,a]),e?.data&&e.data.lastUpdated>0&&(t=await y(this,n,"m",m).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e.data.lastUpdated}`))}finally{const e=(0,S.fetchTimeNow)();this.update((t=>{t.stalelistLastFetched=e,t.hotlistLastFetched=e,t.c2DomainBlocklistLastFetched=e}))}if(!e||!t)return;const{eth_phishing_detect_config:i,...a}=e.data,o={...i,...a,c2DomainBlocklist:s?s.recentlyAdded:[],name:r.phishingListKeyNameMap.eth_phishing_detect_config},c=(0,S.applyDiffs)(o,t.data,E.EthPhishingDetectConfig);this.update((e=>{e.phishingLists=[c]})),this.updatePhishingDetector()},p=async function(){const e=Math.max(...this.state.phishingLists.map((({lastUpdated:e})=>e)));let t;try{t=await y(this,n,"m",m).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e}`)}finally{this.update((e=>{e.hotlistLastFetched=(0,S.fetchTimeNow)()}))}if(!t?.data)return;const s=t.data,i=this.state.phishingLists.map((e=>(0,S.applyDiffs)(e,s,T[e.name],[],[])));this.update((e=>{e.phishingLists=i})),this.updatePhishingDetector()},f=async function(){let e=null;try{e=await y(this,n,"m",m).call(this,`${r.C2_DOMAIN_BLOCKLIST_URL}?timestamp=${(0,S.roundToNearestMinute)(this.state.c2DomainBlocklistLastFetched)}`)}finally{this.update((e=>{e.c2DomainBlocklistLastFetched=(0,S.fetchTimeNow)()}))}if(!e)return;const t=e.recentlyAdded,s=e.recentlyRemoved,i=this.state.phishingLists.map((e=>(0,S.applyDiffs)(e,[],T[e.name],t,s)));this.update((e=>{e.phishingLists=i})),this.updatePhishingDetector()},m=async function(e){const t=await(0,w.safelyExecute)((()=>fetch(e,{cache:"no-cache"})),!0);return 200===t?.status?await t.json():null},r.default=P}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingController.cjs"}],[2014,{"./types.cjs":2016,"./utils.cjs":2017,"fastest-levenshtein":4016},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetector=void 0;const u=e("fastest-levenshtein"),l=e("./types.cjs"),d=e("./utils.cjs");r.PhishingDetector=class{constructor(e){n.add(this),s.set(this,void 0),i.set(this,void 0),Array.isArray(e)?(o(this,s,(0,d.processConfigs)(e),"f"),o(this,i,!1,"f")):(o(this,s,[(0,d.getDefaultPhishingDetectorConfig)({allowlist:e.whitelist,blocklist:e.blacklist,c2DomainBlocklist:e.c2DomainBlocklist,fuzzylist:e.fuzzylist,tolerance:e.tolerance})],"f"),o(this,i,!0,"f"))}check(e){const t=c(this,n,"m",a).call(this,e);if(c(this,i,"f")){let e=t.type;return e===l.PhishingDetectorResultType.Allowlist?e=l.PhishingDetectorResultType.Whitelist:e===l.PhishingDetectorResultType.Blocklist&&(e=l.PhishingDetectorResultType.Blacklist),{match:t.match,result:t.result,type:e}}return t}isMaliciousC2Domain(e){const t=(0,d.getHostnameFromUrl)(e);if(!t)return{result:!1,type:l.PhishingDetectorResultType.C2DomainBlocklist};const r=t.endsWith(".")?t.slice(0,-1):t,n=(0,d.domainToParts)(r);for(const{allowlist:e,name:t,version:r}of c(this,s,"f")){const s=(0,d.matchPartsAgainstList)(n,e);if(s){return{match:(0,d.domainPartsToDomain)(s),name:t,result:!1,type:l.PhishingDetectorResultType.Allowlist,version:r===undefined?r:String(r)}}}const i=(0,d.sha256Hash)(t.toLowerCase()),a=(0,d.generateParentDomains)(n.reverse(),5);for(const{c2DomainBlocklist:e,name:t,version:r}of c(this,s,"f"))if(e&&0!==e.length){if(e.includes(i))return{name:t,result:!0,type:l.PhishingDetectorResultType.C2DomainBlocklist,version:r===undefined?r:String(r)};for(const n of a){const s=(0,d.sha256Hash)(n);if(e.includes(s))return{name:t,result:!0,type:l.PhishingDetectorResultType.C2DomainBlocklist,version:r===undefined?r:String(r)}}}return{result:!1,type:l.PhishingDetectorResultType.C2DomainBlocklist}}},s=new WeakMap,i=new WeakMap,n=new WeakSet,a=function(e){const t=e.match(new RegExp("Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,}","u"));if(null!==t){const e=t[0];for(const{blocklist:t,name:r,version:n}of c(this,s,"f")){if(t.filter((e=>1===e.length)).find((t=>t[0]===e)))return{name:r,match:e,result:!0,type:l.PhishingDetectorResultType.Blocklist,version:n===undefined?n:String(n)}}}let r;try{r=new URL(e).hostname}catch(e){return{result:!1,type:l.PhishingDetectorResultType.All}}const n=r.endsWith(".")?r.slice(0,-1):r,i=(0,d.domainToParts)(n);for(const{allowlist:e,name:t,version:r}of c(this,s,"f")){const n=(0,d.matchPartsAgainstList)(i,e);if(n){return{match:(0,d.domainPartsToDomain)(n),name:t,result:!1,type:l.PhishingDetectorResultType.Allowlist,version:r===undefined?r:String(r)}}}for(const{blocklist:e,fuzzylist:t,name:r,tolerance:n,version:a}of c(this,s,"f")){const s=(0,d.matchPartsAgainstList)(i,e);if(s){return{match:(0,d.domainPartsToDomain)(s),name:r,result:!0,type:l.PhishingDetectorResultType.Blocklist,version:a===undefined?a:String(a)}}if(n>0){let e=(0,d.domainPartsToFuzzyForm)(i);e=e.replace(/^www\./u,"");const s=t.find((t=>{const r=(0,d.domainPartsToFuzzyForm)(t);return(0,u.distance)(e,r)<=n}));if(s){return{name:r,match:(0,d.domainPartsToDomain)(s),result:!0,type:l.PhishingDetectorResultType.Fuzzy,version:a===undefined?a:String(a)}}}}return{result:!1,type:l.PhishingDetectorResultType.All}}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingDetector.cjs"}],[2015,{"./PhishingController.cjs":2013,"./PhishingDetector.cjs":2014,"./types.cjs":2016},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetectorResultType=r.PhishingDetector=void 0,s(e("./PhishingController.cjs"),r);var i=e("./PhishingDetector.cjs");Object.defineProperty(r,"PhishingDetector",{enumerable:!0,get:function(){return i.PhishingDetector}});var a=e("./types.cjs");Object.defineProperty(r,"PhishingDetectorResultType",{enumerable:!0,get:function(){return a.PhishingDetectorResultType}})}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/index.cjs"}],[2016,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetectorResultType=void 0,function(e){e.All="all",e.Fuzzy="fuzzy",e.Blocklist="blocklist",e.Allowlist="allowlist",e.Blacklist="blacklist",e.Whitelist="whitelist",e.C2DomainBlocklist="c2DomainBlocklist"}(n||(r.PhishingDetectorResultType=n={}))}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/types.cjs"}],[2017,{"./PhishingController.cjs":2013,"@noble/hashes/utils":2918,"ethereum-cryptography/sha256":3889},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.generateParentDomains=r.getHostnameFromUrl=r.sha256Hash=r.matchPartsAgainstList=r.domainPartsToFuzzyForm=r.domainPartsToDomain=r.processConfigs=r.getDefaultPhishingDetectorConfig=r.processDomainList=r.domainToParts=r.validateConfig=r.applyDiffs=r.roundToNearestMinute=r.fetchTimeNow=void 0;const n=e("@noble/hashes/utils"),s=e("ethereum-cryptography/sha256"),i=e("./PhishingController.cjs");r.fetchTimeNow=()=>Math.round(Date.now()/1e3),r.roundToNearestMinute=function(e){return 60*Math.floor(e/60)};const a=e=>{const t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]};function o(e){if(null===e||"object"!=typeof e)throw new Error("Invalid config");if("tolerance"in e&&!("fuzzylist"in e))throw new Error("Fuzzylist tolerance provided without fuzzylist");if("name"in e&&("string"!=typeof e.name||""===e.name))throw new Error("Invalid config parameter: 'name'");if("version"in e&&(!["number","string"].includes(typeof e.version)||""===e.version))throw new Error("Invalid config parameter: 'version'")}r.applyDiffs=(e,t,r,n=[],s=[])=>{const o=t.filter((({timestamp:t,targetList:n})=>t>e.lastUpdated&&a(n)[0]===r));let c=e.lastUpdated;const u={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist),c2DomainBlocklist:new Set(e.c2DomainBlocklist)};for(const{isRemoval:e,targetList:t,url:r,timestamp:n}of o){const s=a(t)[1];n>c&&(c=n),e?u[s].delete(r):u[s].add(r)}if(r===i.ListKeys.EthPhishingDetectConfig){for(const e of n)u.c2DomainBlocklist.add(e);for(const e of s)u.c2DomainBlocklist.delete(e)}return{c2DomainBlocklist:Array.from(u.c2DomainBlocklist),allowlist:Array.from(u.allowlist),blocklist:Array.from(u.blocklist),fuzzylist:Array.from(u.fuzzylist),version:e.version,name:i.phishingListKeyNameMap[r],tolerance:e.tolerance,lastUpdated:c}},r.validateConfig=o;r.domainToParts=e=>{try{return e.split(".").reverse()}catch(t){throw new Error(JSON.stringify(e))}};r.processDomainList=e=>e.map(r.domainToParts);r.getDefaultPhishingDetectorConfig=({allowlist:e=[],blocklist:t=[],fuzzylist:n=[],tolerance:s=3})=>({allowlist:(0,r.processDomainList)(e),blocklist:(0,r.processDomainList)(t),fuzzylist:(0,r.processDomainList)(n),tolerance:s});r.processConfigs=(e=[])=>e.filter((e=>{try{return o(e),!0}catch(e){return console.error(e),!1}})).map((e=>({...e,...(0,r.getDefaultPhishingDetectorConfig)(e)})));r.domainPartsToDomain=e=>e.slice().reverse().join(".");r.domainPartsToFuzzyForm=e=>e.slice(1).reverse().join(".");r.matchPartsAgainstList=(e,t)=>t.find((t=>!(t.length>e.length)&&t.every(((t,r)=>e[r]===t))));r.sha256Hash=e=>{const t=(0,s.sha256)((new TextEncoder).encode(e.toLowerCase()));return(0,n.bytesToHex)(t)};r.getHostnameFromUrl=e=>{let t;try{t=new URL(e).hostname}catch(e){return null}return t};r.generateParentDomains=(e,t=5)=>{const r=[];if(0===e.length)return r;if(1===e.length)r.push(e[0].toLowerCase());else{const n=e.slice(-2).join(".");r.push(n.toLowerCase());for(let n=e.length-3;n>=0&&r.length<t;n--){const t=e.slice(n).join(".");r.push(t.toLowerCase())}}return r}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/utils.cjs"}],[202,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:72,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=72;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[203,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:73,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=73;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[2035,{"./ppom-controller":2036},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;var n=e("./ppom-controller");Object.defineProperty(r,"NETWORK_CACHE_DURATION",{enumerable:!0,get:function(){return n.NETWORK_CACHE_DURATION}}),Object.defineProperty(r,"PPOMController",{enumerable:!0,get:function(){return n.PPOMController}})}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/index.js"}],[2036,{"./ppom-storage":2037,"./util":2038,"@metamask/base-controller":1192,"@metamask/controller-utils":1218,"await-semaphore":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,p,f,m,g,y,v,w,_,b,k,S,E,j,T,C,I,P,M,A,R,O,x,N=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},D=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;const L=e("@metamask/base-controller"),B=e("@metamask/controller-utils"),$=e("await-semaphore"),J=e("./ppom-storage"),U=e("./util");r.NETWORK_CACHE_DURATION=6048e5;const H=["eth_call","eth_blockNumber","eth_createAccessList","eth_getLogs","eth_getFilterLogs","eth_getTransactionByHash","eth_chainId","eth_getBlockByHash","eth_getBlockByNumber","eth_getCode","eth_getStorageAt","eth_getBalance","eth_getTransactionCount","trace_call","trace_callMany","debug_traceCall","trace_filter"],V={versionInfo:{persist:!0,anonymous:!1},storageMetadata:{persist:!0,anonymous:!1}},q="PPOMController",F={headers:{"Content-Type":"application/json"}};class z extends L.BaseController{constructor({chainId:e,messenger:t,provider:r,storageBackend:v,securityAlertsEnabled:w,onPreferencesChange:_,ppomProvider:E,cdnBaseUrl:j,providerRequestLimit:T,state:C,blockaidPublicKey:I,nativeCrypto:P}){super({name:q,metadata:V,messenger:t,state:{versionInfo:C?.versionInfo??[],storageMetadata:C?.storageMetadata??[]}}),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,0),h.set(this,void 0),p.set(this,void 0),f.set(this,{}),m.set(this,void 0),g.set(this,!1),y.set(this,undefined),N(this,h,(0,U.addHexPrefix)(e),"f"),N(this,i,r,"f"),N(this,c,E,"f"),N(this,a,new J.PPOMStorage({storageBackend:v,readMetadata:()=>[...this.state.storageMetadata],writeMetadata:e=>{this.update((t=>{t.storageMetadata=e}))}}),"f"),N(this,o,new $.Mutex,"f"),N(this,u,j,"f"),N(this,l,T??300,"f"),N(this,p,w,"f"),N(this,m,I,"f"),N(this,y,P,"f"),_(D(this,n,"m",b).bind(this)),D(this,n,"m",k).call(this),D(this,n,"m",S).call(this)}async usePPOM(e,t){const r=t??D(this,h,"f");if(!D(this,p,"f"))throw Error("User has securityAlertsEnabled set to false");if(!(0,U.blockaidValidationSupportedForNetwork)(r))throw Error(`Blockaid validation not available on network with chainId: ${r}`);return await D(this,o,"f").use((async()=>{const t=await D(this,n,"m",j).call(this,r);N(this,d,0,"f"),N(this,f,{},"f");return{...await e(t),providerRequestsCount:{...D(this,f,"f")}}}))}}r.PPOMController=z,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,n=new WeakSet,v=async function(){if(D(this,p,"f")&&!D(this,g,"f")){const{ppomInit:e}=D(this,c,"f");await e("./ppom_bg.wasm"),N(this,g,!0,"f")}},w=function(){D(this,n,"m",E).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)}));const{storageMetadata:e}=this.state;this.update((e=>{e.versionInfo=[],e.storageMetadata=[]})),D(this,a,"f").deleteAllFiles(e).catch((e=>{console.error(`Error in deleting files: ${e.message}`)}))},_=function(e){const t=this.messagingSystem.call("NetworkController:getNetworkClientById",e.selectedNetworkClientId),{chainId:r}=t.configuration,s=(0,U.addHexPrefix)(r);s!==D(this,h,"f")&&(N(this,h,s,"f"),D(this,n,"m",E).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)})))},b=function(e){const t=e.securityAlertsEnabled;t!==D(this,p,"f")&&(N(this,p,t,"f"),t||D(this,n,"m",w).call(this))},k=function(){this.messagingSystem.registerActionHandler(`${q}:usePPOM`,this.usePPOM.bind(this))},S=function(){const e=D(this,n,"m",_).bind(this);this.messagingSystem.subscribe("NetworkController:networkDidChange",e)},E=async function(){await D(this,o,"f").use((async()=>{D(this,s,"f")&&(D(this,s,"f").free(),N(this,s,undefined,"f"))}))},j=async function(e){const t=await D(this,n,"m",T).call(this);let r;return(D(this,s,"f")===undefined||t)&&(r=await D(this,n,"m",x).call(this,e),D(this,h,"f")===e&&(D(this,s,"f")&&D(this,s,"f").free(),N(this,s,r,"f")),D(this,a,"f").syncMetadata(this.state.versionInfo).catch((e=>{console.error(`Error while trying to sync metadata: ${e.message}`)}))),r},T=async function(){const e=await D(this,n,"m",A).call(this);return!!e&&(this.update((t=>{t.versionInfo=e})),!0)},C=function(e,t){return e.find((e=>e.name===t.name&&e.chainId===t.chainId&&e.version===t.version&&e.checksum===t.checksum))},I=async function(e){const t=await Promise.all(e.map((async e=>{let t;try{t=await D(this,n,"m",P).call(this,e)}catch(t){console.error(`Error in getting file ${e.filePath}: ${t.message}`)}return t?[e.name,new Uint8Array(t)]:undefined})));return t?.filter((e=>e?.[1]!==undefined))},P=async function(e){const{storageMetadata:t}=this.state;if(D(this,n,"m",C).call(this,t,e))try{return await D(this,a,"f").readFile(e.name,e.chainId)}catch(e){console.error(`Error in reading file: ${e.message}`)}(0,U.checkFilePath)(e.filePath);const r=(0,U.constructURLHref)(D(this,u,"f"),e.filePath),s=await D(this,n,"m",R).call(this,r);return await(0,U.validateSignature)(s,e.hashSignature,D(this,m,"f"),e.filePath,D(this,y,"f")),await D(this,a,"f").writeFile({data:s,...e}).catch((e=>{console.error(`Error in writing file: ${e.message}`)})),s},M=async function(e,t={},r="GET"){const n=await(0,B.safelyExecute)((async()=>(0,B.timeoutFetch)(e,{method:r,cache:"no-cache",redirect:"error",...t},1e4)),!0),s=304===n?.status;if(!n?.status||n?.status<200||n?.status>399)throw new Error(`Failed to fetch file with url: ${e}`);return{cached:s,response:n}},A=async function(){const e=(0,U.constructURLHref)(D(this,u,"f"),"ppom_version.json"),{cached:t,response:r}=await D(this,n,"m",M).call(this,e,{headers:F});return t&&this.state.versionInfo?.length?undefined:r.json()},R=async function(e){const{response:t}=await D(this,n,"m",M).call(this,e);return await t.arrayBuffer()},O=async function(e,t){if(D(this,d,"f")>D(this,l,"f"))return U.PROVIDER_ERRORS.limitExceeded();if(N(this,d,D(this,d,"f")+1,"f"),!H.includes(e))return U.PROVIDER_ERRORS.methodNotSupported();D(this,f,"f")[e]=D(this,f,"f")[e]?Number(D(this,f,"f")[e])+1:1;const r=(0,U.createPayload)(e,t);try{const e=await D(this,i,"f").request(r);return{jsonrpc:"2.0",id:r.id,result:e}}catch(e){return{jsonrpc:"2.0",id:r.id,error:e}}},x=async function(e){await D(this,n,"m",v).call(this);const t=this.state.versionInfo.filter((({chainId:t})=>t===e));if(t?.length===undefined||0===t?.length)throw new Error(`Aborting initialising PPOM as no files are found for the network with chainId: ${e}`);const r=await D(this,n,"m",I).call(this,t);if(r?.length!==t?.length)throw new Error(`Aborting initialising PPOM as not all files could not be downloaded for the network with chainId: ${e}`);const{PPOM:s}=D(this,c,"f");return s.new(D(this,n,"m",O).bind(this),r)}}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-controller.js"}],[2037,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMStorage=void 0;r.PPOMStorage=class{constructor({storageBackend:e,readMetadata:t,writeMetadata:r}){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),a(this,n,e,"f"),a(this,s,t,"f"),a(this,i,r,"f")}async syncMetadata(e){const t=o(this,s,"f").call(this),r=[];for(const n of t){try{await this.readFile(n.name,n.chainId)}catch(e){console.error("Error: ",e);continue}e.find((e=>e.name===n.name&&e.chainId===n.chainId&&e.version===n.version&&e.checksum===n.checksum))&&r.push(n)}const a=await o(this,n,"f").dir();for(const{name:e,chainId:t}of a)r.find((r=>r.name===e&&r.chainId===t))||await o(this,n,"f").delete({name:e,chainId:t});return o(this,i,"f").call(this,r),r}async deleteAllFiles(e){for(const t of e){const{name:e,chainId:r}=t;try{await o(this,n,"f").delete({name:e,chainId:r})}catch(t){console.error(`Error in deleting file: ${e}, ${r}`,t)}}}async readFile(e,t){const r=o(this,s,"f").call(this).find((r=>r.name===e&&r.chainId===t));if(!r)throw new Error(`File metadata (${e}, ${t}) not found`);const i=await o(this,n,"f").read({name:e,chainId:t},r.checksum);if(!i)throw new Error(`Storage File (${e}, ${t}) not found`);return i}async writeFile({data:e,name:t,chainId:r,version:a,checksum:c}){await o(this,n,"f").write({name:t,chainId:r},e,c);const u=o(this,s,"f").call(this),l=u.find((e=>e.name===t&&e.chainId===r));l?(l.version=a,l.checksum=c):u.push({name:t,chainId:r,version:a,checksum:c}),o(this,i,"f").call(this,u)}},n=new WeakMap,s=new WeakMap,i=new WeakMap}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-storage.js"}],[2038,{buffer:3661,"crypto-js":3771,elliptic:3826,"json-rpc-random-id":4333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkFilePath=r.addHexPrefix=r.constructURLHref=r.validateSignature=r.PROVIDER_ERRORS=r.createPayload=r.IdGenerator=r.blockaidValidationSupportedForNetwork=r.SUPPORTED_NETWORK_CHAINIDS=void 0;const o=i(e("crypto-js")),c=a(e("elliptic")),u=a(e("json-rpc-random-id")),l=c.default.eddsa;r.SUPPORTED_NETWORK_CHAINIDS={MAINNET:"0x1",BSC:"0x38",OPTIMISM:"0xa",POLYGON:"0x89",AVALANCHE:"0xa86a",ARBITRUM:"0xa4b1",LINEA_MAINNET:"0xe708",BASE:"0x2105",SEPOLIA:"0xaa36a7",OPBNB:"0xcc",ZKSYNC:"0x144",SCROLL:"0x82750",BERACHAIN:"0x138d4",METACHAIN_ONE:"0x1b6e6"};r.blockaidValidationSupportedForNetwork=e=>Object.values(r.SUPPORTED_NETWORK_CHAINIDS).some((t=>t===e)),r.IdGenerator=(0,u.default)();r.createPayload=(e,t)=>({id:(0,r.IdGenerator)(),jsonrpc:"2.0",method:e,params:t??[]}),r.PROVIDER_ERRORS={limitExceeded:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32005,message:"Limit exceeded"}}),methodNotSupported:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32601,message:"Method not supported"}})};r.validateSignature=async(e,r,n,s,i,a)=>{const c=await(async(e,t,r=!0)=>{if(t)return t.createHash("sha256").update(e).digest("hex");if("crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest&&r){const t=await globalThis.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return(0,o.SHA256)(o.default.lib.WordArray.create(e)).toString()})(e,i,a);if(!new l("ed25519").keyFromPublic(n).verify(t.from(c),r))throw Error(`Signature verification failed for file path: ${s}`)};r.constructURLHref=(e,t)=>new URL(`https://${e}/${t}`.replace(/https:\/\/https:\/\//gu,"https://").replace(/\/\//gu,"/")).href;r.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):`0x${parseInt(e,10).toString(16)}`;r.checkFilePath=e=>{if(!e.match(/^[\w./]+$/u))throw new Error(`Invalid file path for data file: ${e}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/util.js"}],[2039,{"./constants.cjs":2040,"@metamask/base-controller":1192,"@metamask/controller-utils":1218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PreferencesController=r.getDefaultPreferencesState=void 0;const a=e("@metamask/base-controller"),o=e("@metamask/controller-utils"),c=e("./constants.cjs"),u={featureFlags:{persist:!0,anonymous:!0},identities:{persist:!0,anonymous:!1},ipfsGateway:{persist:!0,anonymous:!1},isIpfsGatewayEnabled:{persist:!0,anonymous:!0},isMultiAccountBalancesEnabled:{persist:!0,anonymous:!0},lostIdentities:{persist:!0,anonymous:!1},openSeaEnabled:{persist:!0,anonymous:!0},securityAlertsEnabled:{persist:!0,anonymous:!0},selectedAddress:{persist:!0,anonymous:!1},showTestNetworks:{persist:!0,anonymous:!0},showIncomingTransactions:{persist:!0,anonymous:!0},useNftDetection:{persist:!0,anonymous:!0},useTokenDetection:{persist:!0,anonymous:!0},smartTransactionsOptInStatus:{persist:!0,anonymous:!1},useTransactionSimulations:{persist:!0,anonymous:!0}};function l(){return{featureFlags:{},identities:{},ipfsGateway:"https://ipfs.io/ipfs/",isIpfsGatewayEnabled:!0,isMultiAccountBalancesEnabled:!0,lostIdentities:{},openSeaEnabled:!1,securityAlertsEnabled:!1,selectedAddress:"",showIncomingTransactions:{[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MAINNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.GOERLI]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.BSC]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.BSC_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.OPTIMISM]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.OPTIMISM_SEPOLIA]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.POLYGON]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.POLYGON_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.AVALANCHE]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.AVALANCHE_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.FANTOM]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.FANTOM_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.SEPOLIA]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_GOERLI]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_SEPOLIA]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_MAINNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONBEAM]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONBEAM_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONRIVER]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.GNOSIS]:!0},showTestNetworks:!1,useNftDetection:!1,useTokenDetection:!0,smartTransactionsOptInStatus:!1,useTransactionSimulations:!0}}r.getDefaultPreferencesState=l;class d extends a.BaseController{constructor({messenger:e,state:t}){super({name:"PreferencesController",metadata:u,messenger:e,state:{...l(),...t}}),n.add(this),e.subscribe("KeyringController:stateChange",(e=>{const t=new Set;for(const r of e.keyrings)for(const e of r.accounts)t.add(e);t.size>0&&i(this,n,"m",s).call(this,Array.from(t))}))}addIdentities(e){const t=e.map((e=>(0,o.toChecksumHexAddress)(e)));this.update((e=>{const{identities:r}=e;for(const e of t){if(r[e])continue;const t=Object.keys(r).length;r[e]={name:`Account ${t+1}`,address:e,importTime:Date.now()}}}))}removeIdentity(e){e=(0,o.toChecksumHexAddress)(e);const{identities:t}=this.state;t[e]&&this.update((t=>{delete t.identities[e],e===t.selectedAddress&&(t.selectedAddress=Object.keys(t.identities)[0])}))}setAccountLabel(e,t){e=(0,o.toChecksumHexAddress)(e),this.update((r=>{const n=r.identities[e]||{};n.name=t,r.identities[e]=n}))}setFeatureFlag(e,t){this.update((r=>{r.featureFlags[e]=t}))}setSelectedAddress(e){this.update((t=>{t.selectedAddress=(0,o.toChecksumHexAddress)(e)}))}setIpfsGateway(e){this.update((t=>{t.ipfsGateway=e}))}setUseTokenDetection(e){this.update((t=>{t.useTokenDetection=e}))}setUseNftDetection(e){if(e&&!this.state.openSeaEnabled)throw new Error("useNftDetection cannot be enabled if openSeaEnabled is false");this.update((t=>{t.useNftDetection=e}))}setOpenSeaEnabled(e){this.update((t=>{t.openSeaEnabled=e,e||(t.useNftDetection=!1)}))}setSecurityAlertsEnabled(e){this.update((t=>{t.securityAlertsEnabled=e}))}setIsMultiAccountBalancesEnabled(e){this.update((t=>{t.isMultiAccountBalancesEnabled=e}))}setShowTestNetworks(e){this.update((t=>{t.showTestNetworks=e}))}setIsIpfsGatewayEnabled(e){this.update((t=>{t.isIpfsGatewayEnabled=e}))}setEnableNetworkIncomingTransactions(e,t){Object.values(c.ETHERSCAN_SUPPORTED_CHAIN_IDS).includes(e)&&this.update((r=>{r.showIncomingTransactions={...this.state.showIncomingTransactions,[e]:t}}))}setSmartTransactionsOptInStatus(e){this.update((t=>{t.smartTransactionsOptInStatus=e}))}setUseTransactionSimulations(e){this.update((t=>{t.useTransactionSimulations=e}))}}r.PreferencesController=d,n=new WeakSet,s=function(e){e=e.map((e=>(0,o.toChecksumHexAddress)(e))),this.update((t=>{const{identities:r}=t,n={};for(const[t,s]of Object.entries(r))e.includes(t)||(n[t]=s,delete r[t]);for(const[e,r]of Object.entries(n))t.lostIdentities[e]=r})),this.addIdentities(e),e.includes(this.state.selectedAddress)||this.update((t=>{t.selectedAddress=e[0]}))},r.default=d}}},{package:"@metamask/preferences-controller",file:"node_modules/@metamask/preferences-controller/dist/PreferencesController.cjs"}],[204,{"../../../shared/constants/network":5154,"bignumber.js":3565,lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/network");const o=e=>new i.default(e||"0x0",16).gt(0),c=["0x3","0x2a","0x4"],u={"0x3":{rpcUrl:(0,a.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,a.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,a.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};r.default={version:74,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=74;const r=function(e){var t,r;const n=(null==e?void 0:e.PreferencesController)||{},i=n.preferences||{},a=(null==e?void 0:e.NetworkController)||{},l=(null==a?void 0:a.provider)||{},d=c.filter((e=>e===(null==l?void 0:l.chainId)));if(!i.showTestNetworks&&0===d.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},p=(null===(r=e.CachedBalancesController)||void 0===r?void 0:r.cachedBalances)||{},f=Object.values(h).filter((({chainId:e})=>c.includes(e))).map((({chainId:e})=>e)),m=c.filter((e=>Object.values(p[e]||{}).some(o))),g=(0,s.uniq)([...m,...f,...d]),y=n.frequentRpcListDetail??[];g.forEach((e=>{y.find((t=>t.chainId===e))||y.unshift({rpcUrl:u[e].rpcUrl,chainId:e,ticker:u[e].ticker,nickname:u[e].nickname,rpcPrefs:{}})})),y.length&&(n.frequentRpcListDetail=y);if(d.length){const e=d[0];a.provider={...a.provider,type:"rpc",rpcUrl:u[e].rpcUrl,chainId:e,nickname:u[e].nickname,ticker:u[e].ticker}}return{...e,PreferencesController:{...n},NetworkController:{...a}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[2040,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ETHERSCAN_SUPPORTED_CHAIN_IDS=void 0,r.ETHERSCAN_SUPPORTED_CHAIN_IDS={MAINNET:"0x1",GOERLI:"0x5",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",GNOSIS:"0x64"}}}},{package:"@metamask/preferences-controller",file:"node_modules/@metamask/preferences-controller/dist/constants.cjs"}],[2041,{"./PreferencesController.cjs":2039,"./constants.cjs":2040},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.ETHERSCAN_SUPPORTED_CHAIN_IDS=void 0,s(e("./PreferencesController.cjs"),r);var i=e("./constants.cjs");Object.defineProperty(r,"ETHERSCAN_SUPPORTED_CHAIN_IDS",{enumerable:!0,get:function(){return i.ETHERSCAN_SUPPORTED_CHAIN_IDS}})}}},{package:"@metamask/preferences-controller",file:"node_modules/@metamask/preferences-controller/dist/index.cjs"}],[205,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:75,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=75;const r=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[206,{lodash:4483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:76,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=76;const r=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:r,ignoredCollectibles:n,...s}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...r?{allNfts:r}:{},...n?{ignoredNfts:n}:{},...s},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[207,{"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)&&(0,n.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")&&delete e.PreferencesController.frequentRpcListDetail;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-082.ts"}],[2077,{"@metamask/base-controller":1192,"@metamask/selected-network-controller":2196,"@metamask/utils":2090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,p,f,m,g,y,v,w=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},_=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=r.controllerName=void 0;const b=e("@metamask/base-controller"),k=e("@metamask/selected-network-controller"),S=e("@metamask/utils");r.controllerName="QueuedRequestController",r.QueuedRequestControllerActionTypes={enqueueRequest:`${r.controllerName}:enqueueRequest`,getState:`${r.controllerName}:getState`},r.QueuedRequestControllerEventTypes={networkSwitched:`${r.controllerName}:networkSwitched`,stateChange:`${r.controllerName}:stateChange`};class E extends b.BaseController{constructor({messenger:e,shouldRequestSwitchNetwork:t,canRequestSwitchNetworkWithoutApproval:p,clearPendingConfirmations:f,showApprovalRequest:m}){super({name:r.controllerName,metadata:{queuedRequestCount:{anonymous:!0,persist:!1}},messenger:e,state:{queuedRequestCount:0}}),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,[]),o.set(this,0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),w(this,c,t,"f"),w(this,u,p,"f"),w(this,l,f,"f"),w(this,d,m,"f"),_(this,n,"m",h).call(this)}async enqueueRequest(e,t){if(e.networkClientId===undefined)throw new Error("Error while attempting to enqueue request: networkClientId is required.");_(this,s,"f")===undefined&&w(this,s,e.origin,"f"),_(this,i,"f")===undefined&&w(this,i,e.networkClientId,"f");try{let r;const a=_(this,o,"f")>0&&_(this,u,"f").call(this,e);if(this.state.queuedRequestCount>0||_(this,s,"f")!==e.origin||_(this,i,"f")!==e.networkClientId||a){_(this,d,"f").call(this);const t=_(this,n,"m",y).call(this,e);r=t.requestHasEnded,await t.dequeuedPromise}else _(this,c,"f").call(this,e)&&await _(this,n,"m",m).call(this,e.networkClientId);w(this,o,_(this,o,"f")+1,"f");try{await t()}finally{r?.(),w(this,o,_(this,o,"f")-1,"f")}return undefined}finally{_(this,n,"m",v).call(this)}}}r.QueuedRequestController=E,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,n=new WeakSet,h=function(){this.messagingSystem.registerActionHandler(`${r.controllerName}:enqueueRequest`,this.enqueueRequest.bind(this)),this.messagingSystem.subscribe(k.SelectedNetworkControllerEventTypes.stateChange,((e,t)=>{t.forEach((({op:e,path:t})=>{if(2===t.length&&"domains"===t[0]&&"string"==typeof t[1]){const r=t[1];_(this,n,"m",p).call(this,r),"remove"===e&&r===_(this,s,"f")&&_(this,l,"f").call(this)}}))}))},p=function(e){_(this,a,"f").filter((({request:t})=>t.origin===e)).forEach((({processRequest:e})=>{e(new Error("The request has been rejected due to a change in selected network. Please verify the selected network and retry the request."))})),w(this,a,_(this,a,"f").filter((({request:t})=>t.origin!==e)),"f")},f=async function(){const e=_(this,a,"f").shift();w(this,s,e.request.origin,"f"),w(this,i,e.request.networkClientId,"f");const t=[e];let r;try{await _(this,n,"m",m).call(this,e.request.networkClientId)}catch(e){r=e}if(_(this,u,"f").call(this,e.request)){w(this,o,_(this,o,"f")+1,"f");try{e.processRequest(r),_(this,n,"m",g).call(this),await e.requestHasBeenProcessed}finally{w(this,o,_(this,o,"f")-1,"f")}const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");return _(this,i,"f")!==t&&_(this,n,"m",p).call(this,_(this,s,"f")),void _(this,n,"m",v).call(this)}for(;_(this,a,"f")[0]?.request.networkClientId===_(this,i,"f")&&_(this,a,"f")[0]?.request.origin===_(this,s,"f")&&!_(this,u,"f").call(this,_(this,a,"f")[0]?.request);){const e=_(this,a,"f").shift();t.push(e)}for(const{processRequest:e}of t)e(r);_(this,n,"m",g).call(this)},m=async function(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");e!==t&&(await this.messagingSystem.call("NetworkController:setActiveNetwork",e),this.messagingSystem.publish("QueuedRequestController:networkSwitched",e))},g=function(){this.update((e=>{e.queuedRequestCount=_(this,a,"f").length}))},y=function(e){const{promise:t,reject:r,resolve:s}=(0,S.createDeferredPromise)({suppressUnhandledRejection:!0}),{promise:i,resolve:o}=(0,S.createDeferredPromise)({suppressUnhandledRejection:!0});return _(this,a,"f").push({request:e,processRequest:e=>{e?r(e):s()},requestHasBeenProcessed:i}),_(this,n,"m",g).call(this),{dequeuedPromise:t,requestHasEnded:o}},v=function(){0===_(this,o,"f")&&(w(this,s,undefined,"f"),w(this,i,undefined,"f"),_(this,a,"f").length>0&&_(this,n,"m",f).call(this))}}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestController.cjs"}],[2078,{"@metamask/json-rpc-engine":1577,"@metamask/rpc-errors":2159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("@metamask/rpc-errors");r.createQueuedRequestMiddleware=({enqueueRequest:e,useRequestQueue:t,shouldEnqueueRequest:r})=>(0,n.createAsyncMiddleware)((async(n,i,a)=>{if(function(e){if(!e.origin)throw new Error("Request object is lacking an 'origin'");if("string"!=typeof e.origin)throw new Error(`Request object has an invalid origin of type '${typeof e.origin}'`);if(!e.networkClientId)throw new Error("Request object is lacking a 'networkClientId'");if("string"!=typeof e.networkClientId)throw new Error(`Request object has an invalid networkClientId of type '${typeof e.networkClientId}'`)}(n),!t()||!r(n))return await a();try{await e(n,a)}catch(e){i.error=(0,s.serializeError)(e)}return undefined}))}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestMiddleware.cjs"}],[2079,{"./QueuedRequestController.cjs":2077,"./QueuedRequestMiddleware.cjs":2078},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=void 0;var n=e("./QueuedRequestController.cjs");Object.defineProperty(r,"QueuedRequestControllerActionTypes",{enumerable:!0,get:function(){return n.QueuedRequestControllerActionTypes}}),Object.defineProperty(r,"QueuedRequestControllerEventTypes",{enumerable:!0,get:function(){return n.QueuedRequestControllerEventTypes}}),Object.defineProperty(r,"QueuedRequestController",{enumerable:!0,get:function(){return n.QueuedRequestController}});var s=e("./QueuedRequestMiddleware.cjs");Object.defineProperty(r,"createQueuedRequestMiddleware",{enumerable:!0,get:function(){return s.createQueuedRequestMiddleware}})}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/index.cjs"}],[208,{"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"network")&&(0,n.hasProperty)(e.NetworkController,"networkId")&&delete e.NetworkController.network;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-084.ts"}],[2080,{"./errors.cjs":2088,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[2081,{"./assert.cjs":2080,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[2082,{"./assert.cjs":2080,"./hex.cjs":2089,"@scure/base":2935,buffer:3661},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function p(e){d(e);const t=h(e);return BigInt(t)}function f(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<o?a:c),u=s-(s<o?a:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?f(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=p,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=p(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=f,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[2083,{"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAssetId=r.isCaipAssetType=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAssetIdStruct=r.CaipAssetTypeStruct=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ASSET_ID_REGEX=r.CAIP_ASSET_TYPE_REGEX=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),r.CaipAssetTypeStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_TYPE_REGEX),r.CaipAssetIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.isCaipAssetType=function(e){return(0,n.is)(e,r.CaipAssetTypeStruct)},r.isCaipAssetId=function(e){return(0,n.is)(e,r.CaipAssetIdStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2084,{"./base64.cjs":2081,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[2085,{"./assert.cjs":2080,"./bytes.cjs":2082,"./hex.cjs":2089,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),u=(0,n.coerce)((0,n.bigint)(),o,BigInt),l=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[2086,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[2087,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2088,{"./misc.cjs":2094,"pony-cause":4620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[2089,{"./assert.cjs":2080,"./bytes.cjs":2082,"@metamask/superstruct":2715,"@noble/hashes/sha3":2916},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[209,{"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"provider")&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&delete e.NetworkController.provider;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-086.ts"}],[2090,{"./assert.cjs":2080,"./base64.cjs":2081,"./bytes.cjs":2082,"./caip-types.cjs":2083,"./checksum.cjs":2084,"./coercers.cjs":2085,"./collections.cjs":2086,"./encryption-types.cjs":2087,"./errors.cjs":2088,"./hex.cjs":2089,"./json.cjs":2091,"./keyring.cjs":2092,"./logging.cjs":2093,"./misc.cjs":2094,"./number.cjs":2095,"./opaque.cjs":2096,"./promise.cjs":2097,"./time.cjs":2098,"./transaction-types.cjs":2099,"./versions.cjs":2100},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/index.cjs"}],[2091,{"./assert.cjs":2080,"./misc.cjs":2094,"@metamask/superstruct":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}function c(e){if(null===e||"boolean"==typeof e||"string"==typeof e)return!0;if("number"==typeof e&&Number.isFinite(e))return!0;if("object"==typeof e){let t=!0;if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(!c(e[r])){t=!1;break}return t}const r=Object.entries(e);for(let e=0;e<r.length;e++)if("string"!=typeof r[e][0]||!c(r[e][1])){t=!1;break}return t}return!1}function u(e){return(0,n.create)(e,r.JsonStruct)}r.object=e=>(0,n.object)(e),r.exactOptional=o,r.UnsafeJsonStruct=(0,n.define)("JSON",(e=>c(e))),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return u(e),!0}catch{return!1}},r.getSafeJson=u,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(r.JsonStruct),stack:o((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/json.cjs"}],[2092,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[2093,{debug:3806},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[2094,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[2095,{"./assert.cjs":2080,"./hex.cjs":2089},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/number.cjs"}],[2096,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[2097,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[2098,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/time.cjs"}],[2099,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[21,{"../../../shared/constants/network":5154,"@metamask/base-controller":1192},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkOrderController=void 0;var n=e("@metamask/base-controller"),s=e("../../../shared/constants/network");const i={orderedNetworkList:[]},a={orderedNetworkList:{persist:!0,anonymous:!0}};class o extends n.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:a,name:"NetworkOrderController",state:{...i,...t}}),this.messagingSystem.subscribe("NetworkController:stateChange",(e=>{this.onNetworkControllerStateChange(e)}))}onNetworkControllerStateChange({networkConfigurationsByChainId:e}){this.update((t=>{const r=Object.keys(e).filter((e=>!s.TEST_CHAINS.includes(e))),n=r.filter((e=>!t.orderedNetworkList.some((({networkId:t})=>t===e)))).map((e=>({networkId:e})));t.orderedNetworkList=t.orderedNetworkList.filter((({networkId:e})=>r.includes(e))).concat(n)}))}updateNetworksList(e){this.update((t=>{t.orderedNetworkList=e.map((e=>({networkId:e})))}))}}r.NetworkOrderController=o}}},{package:"$root$",file:"app/scripts/controllers/network-order.ts"}],[210,{"@metamask/utils":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,n.hasProperty)(e,"NftController")&&(0,n.isObject)(e.NftController)){const t=e.NftController;if((0,n.hasProperty)(t,"allNftContracts")&&(0,n.isObject)(t.allNftContracts)){const{allNftContracts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&s(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}if((0,n.hasProperty)(t,"allNfts")&&(0,n.isObject)(t.allNfts)){const{allNfts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&s(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}e.NftController=t}if((0,n.hasProperty)(e,"TokenListController")&&(0,n.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,n.hasProperty)(t,"tokensChainsCache")&&(0,n.isObject)(t.tokensChainsCache)&&s(t.tokensChainsCache))for(const e of Object.keys(t.tokensChainsCache))(0,n.isStrictHexString)(e)||delete t.tokensChainsCache[e]}if((0,n.hasProperty)(e,"TokensController")&&(0,n.isObject)(e.TokensController)){const t=e.TokensController;if((0,n.hasProperty)(t,"allTokens")&&(0,n.isObject)(t.allTokens)&&s(t.allTokens)){const{allTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allTokens[r]}if((0,n.hasProperty)(t,"allIgnoredTokens")&&(0,n.isObject)(t.allIgnoredTokens)&&s(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allIgnoredTokens[r]}if((0,n.hasProperty)(t,"allDetectedTokens")&&(0,n.isObject)(t.allDetectedTokens)&&s(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allDetectedTokens[r]}e.TokensController=t}return e};var n=e("@metamask/utils");function s(e){return Object.keys(e).some((e=>(0,n.isStrictHexString)(e)))}}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-088.ts"}],[2100,{"./assert.cjs":2080,"@metamask/superstruct":2715,semver:4949},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[2101,{"@metamask/base-controller":2108,"@metamask/rpc-errors":2112,"@metamask/utils":2145},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("@metamask/rpc-errors"),i=e("@metamask/utils"),a="RateLimitController",o={requests:{persist:!1,anonymous:!1}},c=class extends n.BaseController{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:r,state:n,implementations:s}){const c={requests:i.getKnownPropertyNames.call(void 0,s).reduce(((e,t)=>({...e,[t]:{}})),{})};super({name:a,metadata:o,messenger:r,state:{...c,...n}}),this.implementations=s,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${a}:call`,((e,t,...r)=>this.call(e,t,...r)))}async call(e,t,...r){if(this.isRateLimited(t,e))throw s.rpcErrors.limitExceeded({message:`"${t.toString()}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const n=this.implementations[t].method;if(!n)throw new Error("Invalid api type");return n(...r)}isRateLimited(e,t){const r=this.implementations[e].rateLimitCount??this.rateLimitCount;return this.state.requests[e][t]>=r}recordRequest(e,t){const r=this.implementations[e].rateLimitTimeout??this.rateLimitTimeout,n=this.state.requests[e][t]??0;this.update((s=>{0===n&&setTimeout((()=>this.resetRequestCount(e,t)),r),Object.assign(s,{requests:{...s.requests,[e]:{[t]:n+1}}})}))}resetRequestCount(e,t){this.update((r=>{Object.assign(r,{requests:{...r.requests,[e]:{[t]:0}}})}))}};r.RateLimitController=c}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/chunk-37GF32BR.js"}],[2102,{"./chunk-37GF32BR.js":2101},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-37GF32BR.js");r.RateLimitController=n.RateLimitController}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/index.js"}],[2103,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[2104,{"./chunk-UJFCPTF3.js":2106,"./chunk-Z4BLTVTB.js":2107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[2105,{"./chunk-Z4BLTVTB.js":2107,immer:4295},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[2106,{"./chunk-Z4BLTVTB.js":2107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,u,l,d,h,p=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=p.__privateGet.call(void 0,this,a);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,i);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,u),p.__privateAdd.call(void 0,this,d),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateSet.call(void 0,this,n,e),p.__privateSet.call(void 0,this,s,t),p.__privateSet.call(void 0,this,i,r),p.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,u,l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!p.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?p.__privateGet.call(void 0,this,n).subscribe(e,t,r):p.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,s)}:'`);p.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2107,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2108,{"./chunk-FTHCJ6HY.js":2103,"./chunk-G42723LG.js":2104,"./chunk-IURK6TKD.js":2105,"./chunk-UJFCPTF3.js":2106,"./chunk-Z4BLTVTB.js":2107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/index.js"}]],[],{});