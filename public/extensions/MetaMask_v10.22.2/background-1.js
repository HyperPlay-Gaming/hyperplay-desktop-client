LavaPack.loadBundle([[1386,{"./assert.cjs":1366,"@metamask/superstruct":2643,semver:4845},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/versions.cjs"}],[139,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:11,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=11;try{const e=function(e){const t=e;return delete t.TOSHash,delete t.isDisclaimerConfirmed,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #11${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/011.js"}],[1391,{"./ledger-bridge":1392,"./ledger-iframe-bridge":1393,"./ledger-keyring":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./ledger-keyring"),r),s(e("./ledger-iframe-bridge"),r),s(e("./ledger-bridge"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.js"}],[1392,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-bridge.js"}],[1393,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerIframeBridge=r.IFrameMessageAction=void 0;var u;!function(e){e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(u=r.IFrameMessageAction||(r.IFrameMessageAction={}));r.LedgerIframeBridge=class{constructor(){n.add(this),this.iframeLoaded=!1,this.isDeviceConnected=!1,this.currentMessageId=0,this.messageCallbacks={}}async init(e){l(this,n,"m",i).call(this,e),this.eventListener=l(this,n,"m",o).bind(this,e),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async attemptMakeApp(){return new Promise(((e,t)=>{l(this,n,"m",c).call(this,{action:u.LedgerMakeApp},(r=>{r.success?e(!0):t(r.error)}))}))}async updateTransportMethod(e){return new Promise(((t,r)=>{this.iframeLoaded?l(this,n,"m",c).call(this,{action:u.LedgerUpdateTransport,params:{transportType:e}},(({success:e})=>e?t(!0):r(new Error("Ledger transport could not be updated")))):this.delayedPromise={resolve:t,reject:r,transportType:e}}))}async getPublicKey(e){return l(this,n,"m",s).call(this,u.LedgerUnlock,e)}async deviceSignTransaction(e){return l(this,n,"m",s).call(this,u.LedgerSignTransaction,e)}async deviceSignMessage(e){return l(this,n,"m",s).call(this,u.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return l(this,n,"m",s).call(this,u.LedgerSignTypedData,e)}},n=new WeakSet,s=async function(...[e,t]){return new Promise(((r,s)=>{l(this,n,"m",c).call(this,{action:e,params:t},(({success:e,payload:t})=>e?r(t):s(t.error)))}))},i=function(e){this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{if(this.iframeLoaded=!0,this.delayedPromise)try{const e=await this.updateTransportMethod(this.delayedPromise.transportType);this.delayedPromise.resolve(e)}catch(e){this.delayedPromise.reject(e)}finally{delete this.delayedPromise}},document.head.appendChild(this.iframe)},a=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},o=function(e,t){if(t.origin===l(this,n,"m",a).call(this,e)&&t.data){const e=this.messageCallbacks[t.data.messageId];e?e(t.data):t.data.action===u.LedgerConnectionChange&&(this.isDeviceConnected=t.data.payload.connected)}},c=function(e,t){this.currentMessageId+=1;const r=Object.assign(Object.assign({},e),{messageId:this.currentMessageId,target:"LEDGER-IFRAME"});if(this.messageCallbacks[this.currentMessageId]=t,!this.iframeLoaded||!this.iframe||!this.iframe.contentWindow)throw new Error("The iframe is not loaded yet");this.iframe.contentWindow.postMessage(r,"*")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.js"}],[1394,{"@ethereumjs/rlp":442,"@ethereumjs/tx":447,"@ethereumjs/util":459,"@metamask/eth-sig-util":1397,buffer:3576,events:3874,hdkey:4172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d,h,f,p,m,g=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),v=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),y=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return v(t,e),t},b=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},w=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerKeyring=void 0;const _=e("@ethereumjs/rlp"),k=e("@ethereumjs/tx"),T=y(e("@ethereumjs/util")),S=e("@metamask/eth-sig-util"),E=e("buffer"),P=e("events"),M=w(e("hdkey")),I="m",C=`${I}/44'/60'/0'`,j="Ledger Hardware",A="https://metamask.github.io/eth-ledger-bridge-keyring";var x;!function(e){e.Ropsten="http://api-ropsten.etherscan.io",e.Kovan="http://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(x||(x={}));class O extends P.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=j,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new M.default,this.hdPath=C,this.paths={},this.network=x.Mainnet,this.implementFullBIP44=!1,this.bridgeUrl=A,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init(this.bridgeUrl)}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts,accountDetails:this.accountDetails,bridgeUrl:this.bridgeUrl,implementFullBIP44:!1}}async deserialize(e={}){var t,r,i,a,o;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:C,this.bridgeUrl=null!==(r=e.bridgeUrl)&&void 0!==r?r:A,this.accounts=null!==(i=e.accounts)&&void 0!==i?i:[],this.accountDetails=null!==(a=e.accountDetails)&&void 0!==a?a:{},e.accountDetails||b(this,n,"m",s).call(this,e),this.implementFullBIP44=null!==(o=e.implementFullBIP44)&&void 0!==o&&o,this.accounts=this.accounts.filter((e=>Object.keys(this.accountDetails).includes(T.toChecksumAddress(e)))),Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount="number"==typeof e?e:parseInt(e,10)}setHdPath(e){this.hdPath!==e&&(this.hdk=new M.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return"already unlocked";const r=e?b(this,n,"m",f).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:r})}catch(e){throw e instanceof Error?e:new Error("Unlock your Ledger device and open the ETH app")}return t&&s.chainCode&&(this.hdk.publicKey=E.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=E.Buffer.from(s.chainCode,"hex")),s.address}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((async r=>{const s=this.unlockedAccount,i=s+e;for(let e=s;e<i;e++){const t=b(this,n,"m",d).call(this,e);let r;r=b(this,n,"m",h).call(this)?await this.unlock(t):b(this,n,"m",l).call(this,I,e),this.accountDetails[T.toChecksumAddress(r)]={bip44:b(this,n,"m",h).call(this),hdPath:t},this.accounts.includes(r)||(this.accounts=[...this.accounts,r]),this.page=0}t(this.accounts.slice())})).catch(r)}))}async getFirstPage(){return this.page=0,b(this,n,"m",a).call(this,1)}async getNextPage(){return b(this,n,"m",a).call(this,1)}async getPreviousPage(){return b(this,n,"m",a).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase())),delete this.accountDetails[T.toChecksumAddress(e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let r;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=T.bufferToHex(t.getChainId()),t.r="0x00",t.s="0x00",r=t.serialize().toString("hex"),b(this,n,"m",i).call(this,e,r,(e=>(t.v=E.Buffer.from(e.v,"hex"),t.r=E.Buffer.from(e.r,"hex"),t.s=E.Buffer.from(e.s,"hex"),t)));const s=t.getMessageToSign(!1);return r=E.Buffer.isBuffer(s)?s.toString("hex"):E.Buffer.from(_.RLP.encode(s)).toString("hex"),b(this,n,"m",i).call(this,e,r,(e=>{const r=t.toJSON();return r.type=t.type,r.v=T.addHexPrefix(e.v),r.r=T.addHexPrefix(e.r),r.s=T.addHexPrefix(e.s),k.TransactionFactory.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: Unknown error while signing message");let n;try{n=await this.bridge.deviceSignMessage({hdPath:r,message:T.stripHexPrefix(t)})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let s=parseInt(String(n.v),10).toString(16);s.length<2&&(s=`0${s}`);const i=`0x${n.r}${n.s}${s}`,a=(0,S.recoverPersonalSignature)({data:t,signature:i});if(T.toChecksumAddress(a)!==T.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=T.toChecksumAddress(e),r=this.accountDetails[t];if(!r)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:n}=r;if((await this.unlock(n,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return n}async signTypedData(e,t,r={}){if(!("V4"===r.version))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:n,types:s,primaryType:i,message:a}=S.TypedDataUtils.sanitizeData(t),o=S.TypedDataUtils.hashStruct("EIP712Domain",n,s,S.SignTypedDataVersion.V4).toString("hex"),c=S.TypedDataUtils.hashStruct(i.toString(),a,s,S.SignTypedDataVersion.V4).toString("hex"),l=await this.unlockAccountByAddress(e);if(!l)throw new Error("Ledger: Unknown error while signing message");let u;try{u=await this.bridge.deviceSignTypedData({hdPath:l,domainSeparatorHex:o,hashStructMessageHex:c})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let d=parseInt(String(u.v),10).toString(16);d.length<2&&(d=`0${d}`);const h=`0x${u.r}${u.s}${d}`,f=(0,S.recoverTypedSignature)({data:t,signature:h,version:S.SignTypedDataVersion.V4});if(T.toChecksumAddress(f)!==T.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return h}exportAccount(){throw new Error("Not supported on this device")}forgetDevice(){this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new M.default}}r.LedgerKeyring=O,n=new WeakSet,s=function(e){if(b(this,n,"m",h).call(this)&&e.accountIndexes)for(const[t,r]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:b(this,n,"m",d).call(this,r)};b(this,n,"m",h).call(this)||this.accounts.filter((e=>!Object.keys(this.accountDetails).includes(T.toChecksumAddress(e)))).forEach((e=>{try{this.accountDetails[T.toChecksumAddress(e)]={bip44:!1,hdPath:b(this,n,"m",u).call(this,e)}}catch(t){console.log(`failed to migrate account ${e}`)}}))},i=async function(e,t,r){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: Unknown error while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:t,hdPath:n})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing transaction")}const i=r(s);if(i.verifySignature())return i;throw new Error("Ledger: The transaction signature is not valid")},a=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let s;return await this.unlock(),s=b(this,n,"m",h).call(this)?await b(this,n,"m",o).call(this,t,r):b(this,n,"m",c).call(this,t,r),s},o=async function(e,t){const r=[];for(let s=e;s<t;s++){const e=b(this,n,"m",d).call(this,s),t=await this.unlock(e),i=!this.implementFullBIP44||await b(this,n,"m",p).call(this,t);if(r.push({address:t,balance:null,index:s}),!i)break}return r},c=function(e,t){const r=[];for(let s=e;s<t;s++){const e=b(this,n,"m",l).call(this,I,s);r.push({address:e,balance:null,index:s}),this.paths[T.toChecksumAddress(e)]=s}return r},l=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=T.publicToAddress(r.publicKey,!0).toString("hex");return T.toChecksumAddress(`0x${n}`)},u=function(e){const t=T.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===b(this,n,"m",l).call(this,I,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return b(this,n,"m",d).call(this,r)},d=function(e){return b(this,n,"m",h).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},h=function(){return"m/44'/60'/0'/0/0"===this.hdPath},f=function(e){return e.toString().replace("m/","")},p=async function(e){const t=b(this,n,"m",m).call(this),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await r.json();return"0"!==s.status&&s.result.length>0},m=function(){return this.network},O.type=j}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.js"}],[14,{"./types":15},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_BRIDGE_CONTROLLER_STATE=r.BRIDGE_CONTROLLER_NAME=void 0;var n=e("./types");r.BRIDGE_CONTROLLER_NAME="BridgeController",r.DEFAULT_BRIDGE_CONTROLLER_STATE={bridgeFeatureFlags:{[n.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]:!1}}}}},{package:"$root$",file:"app/scripts/controllers/bridge/constants.ts"}],[140,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:12,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=12;try{const e=function(e){const t=e;return t.NoticeController.noticesList.forEach((e=>{e.read&&(e.body="")})),t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #12${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/012.js"}],[141,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:13,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=13;try{const e=function(e){const t=e,{config:r}=t;r&&r.provider&&"testnet"===r.provider.type&&(t.config.provider.type="ropsten");return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #13${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/013.js"}],[142,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:14,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=14;try{const e=function(e){const t=e;return t.NetworkController={},t.NetworkController.provider=t.config.provider,delete t.config.provider,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #14${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/014.js"}],[1424,{"./util":1432},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaseInsensitiveMap=void 0;const n=e("./util");class s extends Map{static fromObject(e){return new s(Object.entries(e))}toObject(){return Object.fromEntries(this.entries())}get(e){return super.get(e.toLowerCase())}getOrThrow(e,t="Key"){return this.get(e)??(0,n.throwError)(`${t} '${e}' not found`)}has(e){return super.has(e.toLowerCase())}set(e,t){return super.set(e.toLowerCase(),t)}delete(e){return super.delete(e.toLowerCase())}}r.CaseInsensitiveMap=s}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/CaseInsensitiveMap.js"}],[1425,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeferredPromise=void 0;r.DeferredPromise=class{constructor(){if(this.resolve=undefined,this.reject=undefined,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),!this.resolve||!this.reject)throw new Error("Promise constructor failed")}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/DeferredPromise.js"}],[1426,{"@metamask/keyring-api":1622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},l=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapControllerClient=void 0;const u=e("@metamask/keyring-api");class d{constructor(e,t,r,o){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c(this,i,e,"f"),c(this,n,t,"f"),c(this,s,r,"f"),c(this,a,o,"f")}async send(e){return l(this,i,"f").handleRequest({snapId:l(this,n,"f"),origin:l(this,s,"f"),handler:l(this,a,"f"),request:e})}}n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap;class h extends u.KeyringClient{constructor({controller:e,snapId:t="undefined",origin:r="metamask",handler:n="onKeyringRequest"}){super(new d(e,t,r,n)),o.set(this,void 0),c(this,o,e,"f")}withSnapId(e){return new h({controller:l(this,o,"f"),snapId:e})}getController(){return l(this,o,"f")}}r.KeyringSnapControllerClient=h,o=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/KeyringSnapControllerClient.js"}],[1427,{"./CaseInsensitiveMap":1424},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapIdMap=r.InvalidSnapIdError=void 0;const a=e("./CaseInsensitiveMap");class o extends Error{constructor(e,t){super(`Snap "${e}" is not allowed to set "${t}"`),this.name="InvalidSnapIdError",this.snapId=e,this.key=t}}r.InvalidSnapIdError=o;class c{constructor(e){n.set(this,void 0),s(this,n,new a.CaseInsensitiveMap(e),"f")}toObject(){return i(this,n,"f").toObject()}static fromObject(e){return new c(Object.entries(e))}get(e,t){const r=i(this,n,"f").get(t);return r?.snapId===e?r:undefined}has(e,t){return this.get(e,t)!==undefined}delete(e,t){return this.has(e,t)&&i(this,n,"f").delete(t)}set(e,t){if(i(this,n,"f").has(e)&&!this.has(t.snapId,e))throw new o(t.snapId,e);return i(this,n,"f").set(e,t),this}values(){return i(this,n,"f").values()}get size(){return i(this,n,"f").size}}r.SnapIdMap=c,n=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapIdMap.js"}],[1428,{"./DeferredPromise":1425,"./KeyringSnapControllerClient":1426,"./SnapIdMap":1427,"./logger":1430,"./types":1431,"./util":1432,"@ethereumjs/tx":447,"@metamask/eth-sig-util":1397,"@metamask/keyring-api":1622,"@metamask/utils":2787,events:3874,superstruct:4896,uuid:1433},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d,h,f,p,m,g,v,y,b,w,_,k,T=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},S=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapKeyring=r.SNAP_KEYRING_TYPE=void 0;const E=e("@ethereumjs/tx"),P=e("@metamask/eth-sig-util"),M=e("@metamask/keyring-api"),I=e("@metamask/utils"),C=e("events"),j=e("superstruct"),A=e("uuid"),x=e("./DeferredPromise"),O=e("./KeyringSnapControllerClient"),N=e("./logger"),B=e("./SnapIdMap"),R=e("./types"),L=e("./util");r.SNAP_KEYRING_TYPE="Snap Keyring";class D extends C.EventEmitter{constructor(e,t){super(),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),this.type=D.type,T(this,s,new O.KeyringSnapControllerClient({controller:e}),"f"),T(this,a,new B.SnapIdMap,"f"),T(this,i,new B.SnapIdMap,"f"),T(this,o,t,"f")}async handleKeyringSnapMessage(e,t){switch((0,j.assert)(t,R.SnapMessageStruct),t.method){case M.KeyringEvent.AccountCreated:return S(this,n,"m",c).call(this,e,t);case M.KeyringEvent.AccountUpdated:return S(this,n,"m",l).call(this,e,t);case M.KeyringEvent.AccountDeleted:return S(this,n,"m",u).call(this,e,t);case M.KeyringEvent.RequestApproved:return S(this,n,"m",d).call(this,e,t);case M.KeyringEvent.RequestRejected:return S(this,n,"m",h).call(this,e,t);default:throw new Error(`Method not supported: ${t.method}`)}}async serialize(){return{accounts:S(this,i,"f").toObject()}}async deserialize(e){e!==undefined&&T(this,i,B.SnapIdMap.fromObject(e.accounts),"f")}async getAccounts(){return(0,L.unique)([...S(this,i,"f").values()].map((({account:e})=>e.address.toLowerCase())))}async getAccountsBySnapId(e){return(0,L.unique)([...S(this,i,"f").values()].filter((({snapId:t})=>t===e)).map((({account:e})=>e.address.toLowerCase())))}async signTransaction(e,t,r={}){const s=t.common.chainId(),i=(0,L.toJson)({...t.toJSON(),from:e,type:`0x${t.type.toString(16)}`,chainId:(0,I.bigIntToHex)(s)}),a=await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.SignTransaction,params:[i],chainId:(0,I.toCaipChainId)(I.KnownCaipNamespace.Eip155,`${s}`)}),o=(0,j.mask)(a,(0,j.object)({r:(0,j.string)(),s:(0,j.string)(),v:(0,j.string)()}));return E.TransactionFactory.fromTxData({...i,r:o.r,s:o.s,v:o.v})}async signTypedData(e,t,r={version:P.SignTypedDataVersion.V1}){const s={[P.SignTypedDataVersion.V1]:M.EthMethod.SignTypedDataV1,[P.SignTypedDataVersion.V3]:M.EthMethod.SignTypedDataV3,[P.SignTypedDataVersion.V4]:M.EthMethod.SignTypedDataV4}[r.version]||M.EthMethod.SignTypedDataV1,i=t.domain?.chainId;return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:s,params:(0,L.toJson)([e,t]),...i===undefined?{}:{chainId:(0,I.toCaipChainId)(I.KnownCaipNamespace.Eip155,`${i}`)}}),M.EthBytesStruct)}async signMessage(e,t){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.Sign,params:(0,L.toJson)([e,t])}),M.EthBytesStruct)}async signPersonalMessage(e,t){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.PersonalSign,params:(0,L.toJson)([t,e])}),M.EthBytesStruct)}async prepareUserOperation(e,t,r){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.PrepareUserOperation,params:(0,L.toJson)(t),expectSync:!0,chainId:(0,I.toCaipChainId)(I.KnownCaipNamespace.Eip155,r.chainId)}),M.EthBaseUserOperationStruct)}async patchUserOperation(e,t,r){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.PatchUserOperation,params:(0,L.toJson)([t]),expectSync:!0,chainId:(0,I.toCaipChainId)(I.KnownCaipNamespace.Eip155,r.chainId)}),M.EthUserOperationPatchStruct)}async signUserOperation(e,t,r){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.SignUserOperation,params:(0,L.toJson)([t]),chainId:(0,I.toCaipChainId)(I.KnownCaipNamespace.Eip155,r.chainId)}),M.EthBytesStruct)}exportAccount(e){throw new Error("Exporting accounts from snaps is not supported.")}async removeAccount(e){const{account:t,snapId:r}=S(this,n,"m",w).call(this,e);S(this,i,"f").delete(r,t.id);try{await S(this,s,"f").withSnapId(r).deleteAccount(t.id)}catch(t){console.error(`Account '${e}' may not have been removed from snap '${r}':`,t)}}getAccountByAddress(e){return this.listAccounts().find((({address:t})=>(0,L.equalsIgnoreCase)(t,e)))}listAccounts(){return[...S(this,i,"f").values()].map((({account:e,snapId:t})=>{const r=S(this,n,"m",_).call(this,t);return{...e,address:e.address.toLowerCase(),metadata:{name:"",importTime:0,keyring:{type:this.type},...r!==undefined&&{snap:r}}}}))}}r.SnapKeyring=D,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=async function(e,t){(0,j.assert)(t,M.AccountCreatedEventStruct);const{account:r,accountNameSuggestion:n,displayConfirmation:s}=t.params;if(await S(this,o,"f").addressExists(r.address.toLowerCase()))throw new Error(`Account address '${r.address}' already exists`);if(S(this,i,"f").has(e,r.id))throw new Error(`Account '${r.id}' already exists`);return await S(this,o,"f").addAccount(r.address.toLowerCase(),e,(async t=>{t&&(S(this,i,"f").set(r.id,{account:r,snapId:e}),await S(this,o,"f").saveState())}),n,s),null},l=async function(e,t){(0,j.assert)(t,M.AccountUpdatedEventStruct);const{account:r}=t.params,{account:n}=S(this,i,"f").get(e,r.id)??(0,L.throwError)(`Account '${r.id}' not found`);if(!(0,L.equalsIgnoreCase)(n.address,r.address))throw new Error(`Cannot change address of account '${r.id}'`);return S(this,i,"f").set(r.id,{account:r,snapId:e}),await S(this,o,"f").saveState(),null},u=async function(e,t){(0,j.assert)(t,M.AccountDeletedEventStruct);const{id:r}=t.params,n=S(this,i,"f").get(e,r);if(n===undefined)return null;const{account:{address:s}}=n;return await S(this,o,"f").removeAccount(s.toLowerCase(),e,(async e=>{e&&await S(this,o,"f").saveState()})),null},d=async function(e,t){(0,j.assert)(t,M.RequestApprovedEventStruct);const{id:r,result:n}=t.params,{promise:s}=S(this,a,"f").get(e,r)??(0,L.throwError)(`Request '${r}' not found`);return S(this,a,"f").delete(e,r),s.resolve(n),null},h=async function(e,t){(0,j.assert)(t,M.RequestRejectedEventStruct);const{id:r}=t.params,{promise:n}=S(this,a,"f").get(e,r)??(0,L.throwError)(`Request '${r}' not found`);return S(this,a,"f").delete(e,r),n.reject(new Error("Request rejected by user or snap.")),null},f=async function({address:e,method:t,params:r,chainId:s="",expectSync:i=!1}){const{account:a,snapId:o}=S(this,n,"m",w).call(this,e);if(!S(this,n,"m",p).call(this,a,t))throw new Error(`Method '${t}' not supported for account ${a.address}`);const c=(0,A.v4)(),l=S(this,n,"m",m).call(this,c,o),u=await S(this,n,"m",g).call(this,{snapId:o,requestId:c,account:a,method:t,params:r,chainId:s});if(i&&u.pending)throw new Error(`Request '${c}' to snap '${o}' is pending and expectSync is true.`);return u.pending?((u.redirect?.message||u.redirect?.url)&&await S(this,n,"m",y).call(this,u.redirect,o),l.promise):S(this,n,"m",v).call(this,u,c,o)},p=function(e,t){return e.methods.includes(t)},m=function(e,t){const r=new x.DeferredPromise;return S(this,a,"f").set(e,{promise:r,snapId:t}),r},g=async function({snapId:e,requestId:t,account:r,method:n,params:i,chainId:o}){try{const a={id:t,scope:o,account:r.id,request:{method:n,...i!==undefined&&{params:i}}};return(0,N.projectLogger)("Submit Snap request: ",a),await S(this,s,"f").withSnapId(e).submitRequest(a)}catch(r){throw(0,N.projectLogger)("Snap Request failed: ",{requestId:t}),S(this,a,"f").delete(e,t),r}},v=function(e,t,r){return S(this,a,"f").delete(r,t),e.result},y=async function(e,t){const{message:r="",url:s=""}=e;s&&S(this,n,"m",b).call(this,s,t),await S(this,o,"f").redirectUser(t,s,r)},b=function(e,t){const{origin:r}=new URL(e),i=S(this,s,"f").getController().get(t);if(!i)throw new Error(`Snap '${t}' not found.`);if(!S(this,n,"m",k).call(this,i).includes(r))throw new Error(`Redirect URL domain '${r}' is not an allowed origin by snap '${t}'`)},w=function(e){return[...S(this,i,"f").values()].find((({account:t})=>(0,L.equalsIgnoreCase)(t.address,e)))??(0,L.throwError)(`Account '${e}' not found`)},_=function(e){const t=S(this,s,"f").getController().get(e);return t?{id:e,name:t.manifest.proposedName,enabled:t.enabled}:undefined},k=function(e){return e.manifest.initialPermissions["endowment:keyring"]?.allowedOrigins??[]},D.type=r.SNAP_KEYRING_TYPE}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapKeyring.js"}],[1429,{"./KeyringSnapControllerClient":1426,"./SnapKeyring":1428,"./types":1431},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./types"),r),s(e("./SnapKeyring"),r),s(e("./KeyringSnapControllerClient"),r)}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/index.js"}],[143,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:15,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=r;t.TransactionController.transactions=e.map((e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=n.TransactionStatus.failed),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/015.js"}],[1430,{"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-snap-keyring")}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/logger.js"}],[1431,{"@metamask/utils":2787,superstruct:4896},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapMessageStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct");r.SnapMessageStruct=(0,s.object)({method:(0,s.string)(),params:(0,s.optional)((0,s.union)([(0,s.array)(n.JsonStruct),(0,s.record)((0,s.string)(),n.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/types.js"}],[1432,{superstruct:4896},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.equalsIgnoreCase=r.throwError=r.ensureDefined=r.toJson=r.unique=r.strictMask=void 0;const n=e("superstruct");r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e},r.unique=function(e){return[...new Set(e)]},r.toJson=function(e){return JSON.parse(JSON.stringify(e))},r.ensureDefined=function(e){if(e===undefined)throw new Error("Argument is undefined")},r.throwError=function(e){throw new Error(e)},r.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/util.js"}],[1433,{"./nil.js":1436,"./parse.js":1437,"./stringify.js":1441,"./v1.js":1442,"./v3.js":1443,"./v4.js":1445,"./v5.js":1446,"./validate.js":1447,"./version.js":1448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=h(e("./v1.js")),s=h(e("./v3.js")),i=h(e("./v4.js")),a=h(e("./v5.js")),o=h(e("./nil.js")),c=h(e("./version.js")),l=h(e("./validate.js")),u=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/index.js"}],[1434,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function s(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,n,i,a){return s((o=s(s(t,e),s(n,a)))<<(c=i)|o>>>32-c,r);var o,c}function a(e,t,r,n,s,a,o){return i(t&r|~t&n,e,t,s,a,o)}function o(e,t,r,n,s,a,o){return i(t&n|r&~n,e,t,s,a,o)}function c(e,t,r,n,s,a,o){return i(t^r^n,e,t,s,a,o)}function l(e,t,r,n,s,a,o){return i(r^(t|~n),e,t,s,a,o)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let s=0;s<r;s+=8){const r=e[s>>5]>>>s%32&255,i=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,i=-271733879,u=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=r,h=i,f=u,p=d;r=a(r,i,u,d,e[t],7,-680876936),d=a(d,r,i,u,e[t+1],12,-389564586),u=a(u,d,r,i,e[t+2],17,606105819),i=a(i,u,d,r,e[t+3],22,-1044525330),r=a(r,i,u,d,e[t+4],7,-176418897),d=a(d,r,i,u,e[t+5],12,1200080426),u=a(u,d,r,i,e[t+6],17,-1473231341),i=a(i,u,d,r,e[t+7],22,-45705983),r=a(r,i,u,d,e[t+8],7,1770035416),d=a(d,r,i,u,e[t+9],12,-1958414417),u=a(u,d,r,i,e[t+10],17,-42063),i=a(i,u,d,r,e[t+11],22,-1990404162),r=a(r,i,u,d,e[t+12],7,1804603682),d=a(d,r,i,u,e[t+13],12,-40341101),u=a(u,d,r,i,e[t+14],17,-1502002290),i=a(i,u,d,r,e[t+15],22,1236535329),r=o(r,i,u,d,e[t+1],5,-165796510),d=o(d,r,i,u,e[t+6],9,-1069501632),u=o(u,d,r,i,e[t+11],14,643717713),i=o(i,u,d,r,e[t],20,-373897302),r=o(r,i,u,d,e[t+5],5,-701558691),d=o(d,r,i,u,e[t+10],9,38016083),u=o(u,d,r,i,e[t+15],14,-660478335),i=o(i,u,d,r,e[t+4],20,-405537848),r=o(r,i,u,d,e[t+9],5,568446438),d=o(d,r,i,u,e[t+14],9,-1019803690),u=o(u,d,r,i,e[t+3],14,-187363961),i=o(i,u,d,r,e[t+8],20,1163531501),r=o(r,i,u,d,e[t+13],5,-1444681467),d=o(d,r,i,u,e[t+2],9,-51403784),u=o(u,d,r,i,e[t+7],14,1735328473),i=o(i,u,d,r,e[t+12],20,-1926607734),r=c(r,i,u,d,e[t+5],4,-378558),d=c(d,r,i,u,e[t+8],11,-2022574463),u=c(u,d,r,i,e[t+11],16,1839030562),i=c(i,u,d,r,e[t+14],23,-35309556),r=c(r,i,u,d,e[t+1],4,-1530992060),d=c(d,r,i,u,e[t+4],11,1272893353),u=c(u,d,r,i,e[t+7],16,-155497632),i=c(i,u,d,r,e[t+10],23,-1094730640),r=c(r,i,u,d,e[t+13],4,681279174),d=c(d,r,i,u,e[t],11,-358537222),u=c(u,d,r,i,e[t+3],16,-722521979),i=c(i,u,d,r,e[t+6],23,76029189),r=c(r,i,u,d,e[t+9],4,-640364487),d=c(d,r,i,u,e[t+12],11,-421815835),u=c(u,d,r,i,e[t+15],16,530742520),i=c(i,u,d,r,e[t+2],23,-995338651),r=l(r,i,u,d,e[t],6,-198630844),d=l(d,r,i,u,e[t+7],10,1126891415),u=l(u,d,r,i,e[t+14],15,-1416354905),i=l(i,u,d,r,e[t+5],21,-57434055),r=l(r,i,u,d,e[t+12],6,1700485571),d=l(d,r,i,u,e[t+3],10,-1894986606),u=l(u,d,r,i,e[t+10],15,-1051523),i=l(i,u,d,r,e[t+1],21,-2054922799),r=l(r,i,u,d,e[t+8],6,1873313359),d=l(d,r,i,u,e[t+15],10,-30611744),u=l(u,d,r,i,e[t+6],15,-1560198380),i=l(i,u,d,r,e[t+13],21,1309151649),r=l(r,i,u,d,e[t+4],6,-145523070),d=l(d,r,i,u,e[t+11],10,-1120210379),u=l(u,d,r,i,e[t+2],15,718787259),i=l(i,u,d,r,e[t+9],21,-343485551),r=s(r,n),i=s(i,h),u=s(u,f),d=s(d,p)}return[r,i,u,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=u}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/md5-browser.js"}],[1435,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/native-browser.js"}],[1436,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/nil.js"}],[1437,{"./validate.js":1447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/parse.js"}],[1438,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/regex.js"}],[1439,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)};const s=new Uint8Array(16)}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/rng-browser.js"}],[144,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:16,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=n.TransactionStatus.submitted,delete e.err),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/016.js"}],[1440,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function s(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),o=new Array(a);for(let t=0;t<a;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];o[t]=r}o[a-1][14]=8*(e.length-1)/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=o[e][t];for(let e=16;e<80;++e)i[e]=s(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let a=r[0],c=r[1],l=r[2],u=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=s(a,5)+n(r,c,l,u)+d+t[r]+i[e]>>>0;d=u,u=l,l=s(c,30)>>>0,c=a,a=o}r[0]=r[0]+a>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+u>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/sha1-browser.js"}],[1441,{"./validate.js":1447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=a;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function a(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}var o=function(e,t=0){const r=a(e,t);if(!(0,s.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/stringify.js"}],[1442,{"./rng.js":1439,"./stringify.js":1441},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./rng.js"))&&n.__esModule?n:{default:n},i=e("./stringify.js");let a,o,c=0,l=0;var u=function(e,t,r){let n=t&&r||0;const u=t||new Array(16);let d=(e=e||{}).node||a,h=e.clockseq!==undefined?e.clockseq:o;if(null==d||null==h){const t=e.random||(e.rng||s.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=o=16383&(t[6]<<8|t[7]))}let f=e.msecs!==undefined?e.msecs:Date.now(),p=e.nsecs!==undefined?e.nsecs:l+1;const m=f-c+(p-l)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||f>c)&&e.nsecs===undefined&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=p,o=h,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;u[n++]=g>>>24&255,u[n++]=g>>>16&255,u[n++]=g>>>8&255,u[n++]=255&g;const v=f/4294967296*1e4&268435455;u[n++]=v>>>8&255,u[n++]=255&v,u[n++]=v>>>24&15|16,u[n++]=v>>>16&255,u[n++]=h>>>8|128,u[n++]=255&h;for(let e=0;e<6;++e)u[n+e]=d[e];return t||(0,i.unsafeStringify)(u)};r.default=u}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v1.js"}],[1443,{"./md5.js":1434,"./v35.js":1444},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,s.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v3.js"}],[1444,{"./parse.js":1437,"./stringify.js":1441},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,a,o){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,i.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(n),l.set(e,n.length),l=r(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,a){o=o||0;for(let e=0;e<16;++e)a[o+e]=l[e];return a}return(0,s.unsafeStringify)(l)}try{n.name=e}catch(e){}return n.DNS=a,n.URL=o,n};var n,s=e("./stringify.js"),i=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v35.js"}],[1445,{"./native.js":1435,"./rng.js":1439,"./stringify.js":1441},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./native.js")),s=a(e("./rng.js")),i=e("./stringify.js");function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const a=(e=e||{}).random||(e.rng||s.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return(0,i.unsafeStringify)(a)};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v4.js"}],[1446,{"./sha1.js":1440,"./v35.js":1444},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,s.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v5.js"}],[1447,{"./regex.js":1438},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var i=function(e){return"string"==typeof e&&s.default.test(e)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/validate.js"}],[1448,{"./validate.js":1447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/version.js"}],[145,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:17,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(!e.status===n.TransactionStatus.failed||e.retryCount>0&&e.retryCount<2&&(e.status=n.TransactionStatus.submitted,delete e.err),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/017.js"}],[1453,{"./trezor-bridge":1454,"./trezor-connect-bridge":1455,"./trezor-keyring":1456},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./trezor-keyring"),r),s(e("./trezor-bridge"),r),s(e("./trezor-connect-bridge"),r)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.js"}],[1454,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-bridge.js"}],[1455,{"@trezor/connect-web":3079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorConnectBridge=void 0;const a=i(e("@trezor/connect-web"));r.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){a.default.on(a.DEVICE_EVENT,(e=>{var t;e.type===a.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)})),this.trezorConnectInitiated||(await a.default.init(e),this.trezorConnectInitiated=!0)}dispose(){return a.default.dispose(),Promise.resolve()}getPublicKey(e){return a.default.getPublicKey(e)}ethereumSignTransaction(e){return a.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return a.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return a.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.js"}],[1456,{"@ethereumjs/tx":447,"@ethereumjs/util":459,"@trezor/connect-plugin-ethereum":3071,buffer:3576,events:3874,hdkey:4172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,s,i,a,o,c,l=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&l(t,e,r);return u(t,e),t},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorKeyring=r.TREZOR_CONNECT_MANIFEST=void 0;const p=e("events"),m=d(e("@ethereumjs/util")),g=f(e("hdkey")),v=e("@ethereumjs/tx"),y=e("@trezor/connect-plugin-ethereum"),b="m/44'/60'/0'/0",w={[b]:!0,"m/44'/60'/0'":!0,"m/44'/1'/0'/0":!0},_="Trezor Hardware",k=1e3;async function T(e){return new Promise((t=>setTimeout(t,e)))}function S(e){return"function"==typeof e.getChainId}r.TREZOR_CONNECT_MANIFEST={email:"support@metamask.io",appUrl:"https://metamask.io"};class E extends p.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=_,this.accounts=[],this.hdk=new g.default,this.hdPath=b,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}init(){return this.bridge.init({manifest:r.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e={}){var t,r,n,s;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:b,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.page=null!==(n=e.page)&&void 0!==n?n:0,this.perPage=null!==(s=e.perPage)&&void 0!==s?s:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise(((e,r)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then((n=>{var s;n.success?(this.hdk.publicKey=t.from(n.payload.publicKey,"hex"),this.hdk.chainCode=t.from(n.payload.chainCode,"hex"),e("just unlocked")):r(new Error((null===(s=n.payload)||void 0===s?void 0:s.error)||"Unknown error"))})).catch((e=>{r(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((r=>{const s=this.unlockedAccount,i=s+e;for(let e=s;e<i;e++){const t=h(this,n,"m",o).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t]),this.page=0}t(this.accounts)})).catch((e=>{r(e)}))}))}async getFirstPage(){return this.page=0,h(this,n,"m",s).call(this,1)}async getNextPage(){return h(this,n,"m",s).call(this,1)}async getPreviousPage(){return h(this,n,"m",s).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){return S(r)?h(this,n,"m",i).call(this,e,r.getChainId(),r,(e=>(r.v=t.from(e.v,"hex"),r.r=t.from(e.r,"hex"),r.s=t.from(e.s,"hex"),r))):h(this,n,"m",i).call(this,e,Number(r.common.chainId()),r,(e=>{const t=r.toJSON();return t.type=r.type,t.v=m.addHexPrefix(e.v),t.r=m.addHexPrefix(e.r),t.s=m.addHexPrefix(e.s),v.TransactionFactory.fromTxData(t,{common:r.common,freeze:Object.isFrozen(r)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise(((r,s)=>{this.unlock().then((i=>{setTimeout((()=>{this.bridge.ethereumSignMessage({path:h(this,n,"m",c).call(this,e),message:m.stripHexPrefix(t),hex:!0}).then((t=>{var n;if(t.success){t.payload.address!==m.toChecksumAddress(e)&&s(new Error("signature doesnt match the right address"));const n=`0x${t.payload.signature}`;r(n)}else s(new Error((null===(n=t.payload)||void 0===n?void 0:n.error)||"Unknown error"))})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}),"just unlocked"===i?k:0)})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}async signTypedData(e,t,{version:r}){var s,i;const a=(0,y.transformTypedData)(t,"V4"===r),{types:o,message:l={},domain:u={},primaryType:d,domain_separator_hash:f,message_hash:p}=a,g=await this.unlock();await T("just unlocked"===g?k:0);const v=await this.bridge.ethereumSignTypedData({path:h(this,n,"m",c).call(this,e),data:{types:Object.assign(Object.assign({},o),{EIP712Domain:null!==(s=o.EIP712Domain)&&void 0!==s?s:[]}),message:l,domain:u,primaryType:d},metamask_v4_compat:!0,domain_separator_hash:f,message_hash:null!=p?p:""});if(v.success){if(m.toChecksumAddress(e)!==v.payload.address)throw new Error("signature doesnt match the right address");return v.payload.signature}throw new Error((null===(i=v.payload)||void 0===i?void 0:i.error)||"Unknown error")}async exportAccount(){return Promise.reject(new Error("Not supported on this device"))}forgetDevice(){this.accounts=[],this.hdk=new g.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!w[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new g.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}r.TrezorKeyring=E,n=new WeakSet,s=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise(((e,t)=>{this.unlock().then((t=>{const r=(this.page-1)*this.perPage,s=r+this.perPage,i=[];for(let e=r;e<s;e++){const t=h(this,n,"m",o).call(this,"m",e);i.push({address:t,balance:null,index:e}),this.paths[m.toChecksumAddress(t)]=e}e(i)})).catch((e=>{t(e)}))}))},i=async function(e,t,r,s){var i,o;let l;l=S(r)?{to:h(this,n,"m",a).call(this,r.to),value:h(this,n,"m",a).call(this,r.value),data:h(this,n,"m",a).call(this,r.data),chainId:t,nonce:h(this,n,"m",a).call(this,r.nonce),gasLimit:h(this,n,"m",a).call(this,r.gasLimit),gasPrice:h(this,n,"m",a).call(this,r.gasPrice)}:Object.assign(Object.assign({},r.toJSON()),{chainId:t,to:h(this,n,"m",a).call(this,m.toBuffer(r.to))});try{const t=await this.unlock();await T("just unlocked"===t?k:0);const r=await this.bridge.ethereumSignTransaction({path:h(this,n,"m",c).call(this,e),transaction:l});if(r.success){const t=s(r.payload),n=m.toChecksumAddress(m.addHexPrefix(t.getSenderAddress().toString("hex")));if(n!==m.toChecksumAddress(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(i=r.payload)||void 0===i?void 0:i.error)||"Unknown error")}catch(e){throw new Error(null!==(o=null==e?void 0:e.toString())&&void 0!==o?o:"Unknown error")}},a=function(e){return m.bufferToHex(e).toString()},o=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=m.publicToAddress(r.publicKey,!0).toString("hex");return m.toChecksumAddress(`0x${n}`)},c=function(e){const t=m.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===h(this,n,"m",o).call(this,"m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`},E.type=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.js"}],[146,{"fast-json-patch":3908,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("fast-json-patch"))&&n.__esModule?n:{default:n},i=e("lodash");r.default={version:18,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=function(e){const t={...e};return delete t.history,(0,i.cloneDeep)(t)}(e);return e.history=[t],e}const t=(r=e.history,r.map(((e,t)=>0===t?e:function(e,t,r){const n=s.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n}(r[t-1],e)))).filter((e=>!Array.isArray(e)||e.length>0));var r;return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[147,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:19,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(((e,t,r)=>{if(e.status!==n.TransactionStatus.submitted)return e;const s=function(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)}));return Math.max.apply(null,t)}(r.filter((e=>e.status===n.TransactionStatus.confirmed)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from))),i=function(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return n}(r.filter((e=>e.status===n.TransactionStatus.submitted)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),s),a=Math.max(i,s);return parseInt(e.txParams.nonce,16)>a+1&&(e.status=n.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[148,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:20,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[149,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:21,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[150,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:22,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==n.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[151,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:23,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let n=!0;for(;r.length>40&&n;){const e=r.findIndex((e=>e.status===s.TransactionStatus.failed||e.status===s.TransactionStatus.rejected||e.status===s.TransactionStatus.confirmed||e.status===s.TransactionStatus.dropped));e<0?n=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[152,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map(((e,t)=>(e.status===s.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e))),t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[153,{"../lib/util":128,"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller"),i=e("../lib/util");r.default={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==s.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,i.addHexPrefix)(e).toLowerCase(),to:()=>(0,i.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,i.addHexPrefix)(e),value:e=>(0,i.addHexPrefix)(e),data:e=>(0,i.addHexPrefix)(e),gas:e=>(0,i.addHexPrefix)(e),gasPrice:e=>(0,i.addHexPrefix)(e)},r={};return Object.keys(t).forEach((n=>{e[n]&&(r[n]=t[n](e[n]))})),r}(e.txParams)),e)))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[1538,{"@metamask/safe-event-emitter":2028,"@metamask/utils":1551,"readable-stream":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@metamask/safe-event-emitter"),i=(n=s)&&n.__esModule?n:{default:n},a=e("@metamask/utils"),o=e("readable-stream");r.createStreamMiddleware=function(e={}){const t={},r=new(0,o.Duplex)({objectMode:!0,read:()=>{},write:function(r,i,o){let c=null;try{!a.hasProperty.call(void 0,r,"id")?function(r){e?.retryOnMessage&&r.method===e.retryOnMessage&&Object.values(t).forEach((({req:e,retryCount:r=0})=>{if(!e.id)return;if(r>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);const n=t[e.id];n&&(n.retryCount=r+1),s(e)}));n.emit("notification",r)}(r):function(e){const{id:r}=e;if(null===r)return;const n=t[r];if(!n)return void console.warn(`StreamMiddleware - Unknown response id "${r}"`);delete t[r],Object.assign(n.res,e),setTimeout(n.end)}(r)}catch(e){c=e}o(c)}}),n=new(0,i.default);return{events:n,middleware:(e,r,n,i)=>{t[e.id]={req:e,res:r,next:n,end:i},s(e)},stream:r};function s(e){r.push(e)}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-CUV6EOT3.js"}],[1539,{"readable-stream":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("readable-stream");r.createEngineStream=function(e){if(!e?.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,r=new(0,n.Duplex)({objectMode:!0,read:()=>{},write:function(e,n,s){t.handle(e,((e,t)=>{r.push(t)})),s()}});return t.on&&t.on("notification",(e=>{r.push(e)})),r}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-IDTAZSDC.js"}],[154,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce(((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t)),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[1540,{"./chunk-CUV6EOT3.js":1538,"./chunk-IDTAZSDC.js":1539},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-IDTAZSDC.js"),s=e("./chunk-CUV6EOT3.js");r.createEngineStream=n.createEngineStream,r.createStreamMiddleware=s.createStreamMiddleware}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/index.js"}],[1541,{"./errors.cjs":1549,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/assert.cjs"}],[1542,{"./assert.cjs":1541,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/base64.cjs"}],[1543,{"./assert.cjs":1541,"./hex.cjs":1550,"@scure/base":2845,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=l(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<o?a:c),l=s-(s<o?a:c);n[e]=16*i+l}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function v(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function y(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):v(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=v,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=y,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=y(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/bytes.cjs"}],[1544,{"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1545,{"./base64.cjs":1542,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/checksum.cjs"}],[1546,{"./assert.cjs":1541,"./bytes.cjs":1543,"./hex.cjs":1550,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),l=(0,n.coerce)((0,n.bigint)(),o,BigInt),u=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/coercers.cjs"}],[1547,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/collections.cjs"}],[1548,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1549,{"./misc.cjs":1555,"pony-cause":4519},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/errors.cjs"}],[155,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter((e=>e.status!==s.TransactionStatus.rejected))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[1550,{"./assert.cjs":1541,"./bytes.cjs":1543,"@metamask/superstruct":2643,"@noble/hashes/sha3":2827},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function l(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function u(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||u(e)},r.getChecksumAddress=l,r.isValidChecksumAddress=u,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/hex.cjs"}],[1551,{"./assert.cjs":1541,"./base64.cjs":1542,"./bytes.cjs":1543,"./caip-types.cjs":1544,"./checksum.cjs":1545,"./coercers.cjs":1546,"./collections.cjs":1547,"./encryption-types.cjs":1548,"./errors.cjs":1549,"./hex.cjs":1550,"./json.cjs":1552,"./keyring.cjs":1553,"./logging.cjs":1554,"./misc.cjs":1555,"./number.cjs":1556,"./opaque.cjs":1557,"./promise.cjs":1558,"./time.cjs":1559,"./transaction-types.cjs":1560,"./versions.cjs":1561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/index.cjs"}],[1552,{"./assert.cjs":1541,"./misc.cjs":1555,"@metamask/superstruct":2643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=o;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(r.JsonStruct),stack:o((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/json.cjs"}],[1553,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/keyring.cjs"}],[1554,{debug:3721},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/logging.cjs"}],[1555,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/misc.cjs"}],[1556,{"./assert.cjs":1541,"./hex.cjs":1550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/number.cjs"}],[1557,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/opaque.cjs"}],[1558,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/promise.cjs"}],[1559,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/time.cjs"}],[156,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach((e=>{t.PreferencesController.accountTokens[e]={mainnet:r}})),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[1560,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1561,{"./assert.cjs":1541,"@metamask/superstruct":2643,semver:4845},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/versions.cjs"}],[157,{"./fail-tx":269,"@metamask/transaction-controller":2685},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@metamask/transaction-controller"),i=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};r.default={version:29,migrate:(0,i.default)(29,"Stuck in approved state for too long.",(e=>{const t=e.status===s.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5}))}}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[158,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach(((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId})),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[159,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[16,{"../../../shared/constants/metametrics":5043,"../../../shared/modules/hexstring-utils":5089,"@metamask/base-controller":1241,"@metamask/controller-utils":1250,"@metamask/message-manager":1725,"@metamask/utils":2787,buffer:3576,events:3874,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isEIP1024EncryptedMessage=r.getDefaultState=r.default=void 0;var n=d(e("events")),s=d(e("loglevel")),i=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("@metamask/controller-utils"),c=e("@metamask/utils"),l=e("../../../shared/constants/metametrics"),u=e("../../../shared/modules/hexstring-utils");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f={unapprovedDecryptMsgs:{persist:!1,anonymous:!1},unapprovedDecryptMsgCount:{persist:!1,anonymous:!1}},p=e=>!!((0,c.isObject)(e.data)&&(0,c.hasProperty)(e.data,"version")&&(0,c.hasProperty)(e.data,"nonce")&&(0,c.hasProperty)(e.data,"ephemPublicKey")&&(0,c.hasProperty)(e.data,"ciphertext"));r.isEIP1024EncryptedMessage=p;const m=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=m;class g extends a.BaseController{constructor({getState:e,metricsEvent:t,messenger:r}){super({metadata:f,messenger:r,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),h(this,"hub",void 0),h(this,"_getState",void 0),h(this,"_metricsEvent",void 0),h(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this.hub=new n.default,this._decryptMessageManager=new i.DecryptMessageManager(undefined,undefined,undefined,["decrypted"]),this._decryptMessageManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._decryptMessageManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e)})),this._subscribeToMessageState(this._decryptMessageManager,((e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r}))}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})))}clearUnapproved(){this._decryptMessageManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);if(r.data=this._parseMessageData(r.data),!p(r))throw new Error("Invalid encrypted data.");const n=await this.messagingSystem.call("KeyringController:decryptMessage",r);this._decryptMessageManager.setMessageStatusAndResult(t,n,"decrypted"),this._acceptApproval(t)}catch(e){throw s.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!p(e))throw new Error("Invalid encrypted data.");const r=await this.messagingSystem.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:l.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||o.ORIGIN_METAMASK;try{this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:o.ApprovalType.EthDecrypt},!0)}catch(e){s.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,u.stripHexPrefix)(e),n=t.from(r,"hex");return JSON.parse(n.toString("utf8"))}_rejectApproval(e){try{this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){s.default.info("Error rejecting request to approval controller",e)}}}r.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[160,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[161,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[162,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[163,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}}}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[164,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[165,{"@metamask/controller-utils":1250,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/controller-utils");r.default={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach((e=>{r.add(e.chainId)}));for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,s.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[166,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[167,{"../../../shared/modules/hexstring-utils":5089,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/modules/hexstring-utils");const i="0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",a="DAI",o="SAI";function c(e={}){return e&&"object"==typeof e&&e.symbol===a&&(0,s.toChecksumHexAddress)(e.address)===i}r.default={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)c(t)&&(t.symbol=o);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)c(e)&&(e.symbol=o)}}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[168,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[169,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[17,{"../../../shared/constants/app":5031,"../../../shared/constants/keyring":5040,"../../../shared/constants/metametrics":5043,"@metamask/base-controller":1241,"@metamask/message-manager":1725,events:3874,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(e("events")),s=u(e("loglevel")),i=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/keyring"),l=e("../../../shared/constants/app");function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={unapprovedEncryptionPublicKeyMsgs:{persist:!1,anonymous:!1},unapprovedEncryptionPublicKeyMsgCount:{persist:!1,anonymous:!1}};class f extends a.BaseController{constructor({messenger:e,getEncryptionPublicKey:t,getAccountKeyringType:r,getState:s,metricsEvent:a}){super({name:"EncryptionPublicKeyController",metadata:h,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),d(this,"hub",void 0),d(this,"_getEncryptionPublicKey",void 0),d(this,"_getAccountKeyringType",void 0),d(this,"_getState",void 0),d(this,"_encryptionPublicKeyManager",void 0),d(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=t,this._getAccountKeyringType=r,this._getState=s,this._metricsEvent=a,this.hub=new n.default,this._encryptionPublicKeyManager=new i.EncryptionPublicKeyManager(undefined,undefined,undefined,["received"]),this._encryptionPublicKeyManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._encryptionPublicKeyManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e,"eth_getEncryptionPublicKey")})),this._subscribeToMessageState(this._encryptionPublicKeyManager,((e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r}))}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case c.KeyringType.ledger:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.trezor:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.lattice:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){s.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),n=await this._getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,n,"received"),this._acceptApproval(t),this._getState()}catch(e){throw s.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)}))}clearUnapproved(){this._encryptionPublicKeyManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:o.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e,t){const r=e.metamaskId,n=e.origin||l.ORIGIN_METAMASK;this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t},!0).catch((()=>{}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=f}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[170,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[1703,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.GenericLog="GenericLog",e.EthSignLog="EthSignLog",e))(n||{});r.LogType=n}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-B6ES7RHK.js"}],[1704,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-JUURNM6C.js"}],[1705,{"./chunk-UJIPPGP6.js":1708,"@metamask/base-controller":1715,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i=e("./chunk-UJIPPGP6.js"),a=e("@metamask/base-controller"),o=e("uuid"),c="LoggingController",l={logs:{persist:!0,anonymous:!1}},u={logs:{}},d=class extends a.BaseController{constructor({messenger:e,state:t}){super({name:c,metadata:l,messenger:e,state:{...u,...t}}),i.__privateAdd.call(void 0,this,n),this.messagingSystem.registerActionHandler(`${c}:add`,(e=>this.add(e)))}add(e){const t={id:i.__privateMethod.call(void 0,this,n,s).call(this),timestamp:Date.now(),log:e};this.update((e=>{e.logs[t.id]=t}))}clear(){this.update((e=>{e.logs={}}))}};n=new WeakSet,s=function(){let e=o.v1.call(void 0);for(;e in this.state.logs;)e=o.v1.call(void 0);return e},r.LoggingController=d}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-LZJQW27Y.js"}],[1706,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.PersonalSign="personal_sign",e.EthSignTypedData="eth_signTypedData",e.EthSignTypedDataV3="eth_signTypedData_v3",e.EthSignTypedDataV4="eth_signTypedData_v4",e))(n||{}),s=(e=>(e.Proposed="proposed",e.Rejected="rejected",e.Signed="signed",e))(s||{});r.SigningMethod=n,r.SigningStage=s}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-OL334B2K.js"}],[1707,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-PMCRFQY3.js"}],[1708,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateMethod=(e,t,r)=>(((e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)})(e,t,"access private method"),r)}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-UJIPPGP6.js"}],[1709,{"./chunk-B6ES7RHK.js":1703,"./chunk-JUURNM6C.js":1704,"./chunk-LZJQW27Y.js":1705,"./chunk-OL334B2K.js":1706,"./chunk-PMCRFQY3.js":1707,"./chunk-UJIPPGP6.js":1708},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-LZJQW27Y.js");e("./chunk-PMCRFQY3.js");var s=e("./chunk-OL334B2K.js");e("./chunk-JUURNM6C.js");var i=e("./chunk-B6ES7RHK.js");e("./chunk-UJIPPGP6.js"),r.LogType=i.LogType,r.LoggingController=n.LoggingController,r.SigningMethod=s.SigningMethod,r.SigningStage=s.SigningStage}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/index.js"}],[171,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[1710,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[1711,{"./chunk-UJFCPTF3.js":1713,"./chunk-Z4BLTVTB.js":1714},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1712,{"./chunk-Z4BLTVTB.js":1714,immer:4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[1713,{"./chunk-Z4BLTVTB.js":1714},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1714,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1715,{"./chunk-FTHCJ6HY.js":1710,"./chunk-G42723LG.js":1711,"./chunk-IURK6TKD.js":1712,"./chunk-UJFCPTF3.js":1713,"./chunk-Z4BLTVTB.js":1714},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1719,{"@metamask/base-controller":1731,events:3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractMessageManager=void 0;const i=e("@metamask/base-controller"),a=e("events");class o extends i.BaseControllerV1{constructor(e,t,r,n,s){super(e,t),this.hub=new a.EventEmitter,this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=null!=n?n:[],this.getCurrentChainId=s,this.initialize()}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}securityCheck(e){return n(this,void 0,void 0,(function*(){if(this.securityProviderRequest){const t=yield this.securityProviderRequest(e,e.type);return Object.assign(Object.assign({},e),{securityProviderResponse:t})}return e}))}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addMessage(e){return n(this,void 0,void 0,(function*(){const t=yield this.securityCheck(e);this.messages.push(t),this.saveMessageList()}))}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}waitForFinishStatus(e,t){return n(this,void 0,void 0,(function*(){const{metamaskId:r}=e,n=s(e,["metamaskId"]);return new Promise(((e,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}))}))}}r.AbstractMessageManager=o,r.default=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/AbstractMessageManager.js"}],[172,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[1720,{"./AbstractMessageManager":1719,"./utils":1726,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageManager=void 0;const s=e("uuid"),i=e("./AbstractMessageManager"),a=e("./utils");class o extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,a.validateDecryptedMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return n(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return n(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return n(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin),e.data=(0,a.normalizeMessageData)(e.data);const r=(0,s.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_decrypt"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}r.DecryptMessageManager=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/DecryptMessageManager.js"}],[1721,{"./AbstractMessageManager":1719,"./utils":1726,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyManager=void 0;const s=e("uuid"),i=e("./AbstractMessageManager"),a=e("./utils");class o extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,a.validateEncryptionPublicKeyMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return n(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin);const r=(0,s.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_getEncryptionPublicKey"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}}r.EncryptionPublicKeyManager=o,r.default=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/EncryptionPublicKeyManager.js"}],[1722,{"./AbstractMessageManager":1719,"./utils":1726,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.MessageManager=void 0;const i=e("uuid"),a=e("./AbstractMessageManager"),o=e("./utils");class c extends a.AbstractMessageManager{constructor(){super(...arguments),this.name="MessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,o.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,o.normalizeMessageData)(e.data);const r=(0,i.v1)(),n={id:r,messageParams:e,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"eth_sign"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){const{metamaskId:t}=e,r=s(e,["metamaskId"]);return Promise.resolve(r)}}r.MessageManager=c,r.default=c}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/MessageManager.js"}],[1723,{"./AbstractMessageManager":1719,"./utils":1726,"@metamask/controller-utils":1733,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.PersonalMessageManager=void 0;const i=e("@metamask/controller-utils"),a=e("uuid"),o=e("./AbstractMessageManager"),c=e("./utils");class l extends o.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,c.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,c.normalizeMessageData)(e.data);const r=(0,i.detectSIWE)(e),n=Object.assign(Object.assign({},e),{siwe:r}),s=(0,a.v1)(),o={id:s,messageParams:n,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"personal_sign"};return yield this.addMessage(o),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},n),{metamaskId:s})),s}))}prepMessageForSigning(e){const{metamaskId:t}=e,r=s(e,["metamaskId"]);return Promise.resolve(r)}}r.PersonalMessageManager=l,r.default=l}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/PersonalMessageManager.js"}],[1724,{"./AbstractMessageManager":1719,"./utils":1726,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedMessageManager=void 0;const i=e("uuid"),a=e("./AbstractMessageManager"),o=e("./utils");class c extends a.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}addUnapprovedMessage(e,t,r){var s;return n(this,void 0,void 0,(function*(){if("V1"===r&&(0,o.validateTypedSignMessageDataV1)(e),"V3"===r||"V4"===r){const t=null===(s=this.getCurrentChainId)||void 0===s?void 0:s.call(this);(0,o.validateTypedSignMessageDataV3V4)(e,t)}"string"==typeof e.data||"V3"!==r&&"V4"!==r||(e.data=JSON.stringify(e.data));const n=(0,i.v1)(),a=Object.assign(Object.assign({},e),{metamaskId:n,version:r});t&&(e.origin=t.origin);const c={id:n,messageParams:e,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"eth_signTypedData"};return yield this.addMessage(c),this.hub.emit("unapprovedMessage",a),n}))}setMessageStatusErrored(e,t){const r=this.getMessage(e);r&&(r.error=t,this.updateMessage(r),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){const{metamaskId:t,version:r}=e,n=s(e,["metamaskId","version"]);return Promise.resolve(n)}}r.TypedMessageManager=c,r.default=c}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/TypedMessageManager.js"}],[1725,{"./AbstractMessageManager":1719,"./DecryptMessageManager":1720,"./EncryptionPublicKeyManager":1721,"./MessageManager":1722,"./PersonalMessageManager":1723,"./TypedMessageManager":1724},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AbstractMessageManager"),r),s(e("./MessageManager"),r),s(e("./PersonalMessageManager"),r),s(e("./TypedMessageManager"),r),s(e("./EncryptionPublicKeyManager"),r),s(e("./DecryptMessageManager"),r)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.js"}],[1726,{"@metamask/controller-utils":1733,"@metamask/eth-sig-util":1397,"@metamask/utils":2787,buffer:3576,jsonschema:4235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.validateDecryptedMessageData=r.validateEncryptionPublicKeyMessageData=r.validateTypedSignMessageDataV3V4=r.validateTypedSignMessageDataV1=r.validateSignMessageData=r.normalizeMessageData=void 0;const n=e("@metamask/controller-utils"),s=e("@metamask/eth-sig-util"),i=e("@metamask/utils"),a=e("jsonschema"),o=/^[0-9A-Fa-f]+$/gu;function c(e,t){if(!e||"string"!=typeof e||!(0,n.isValidHexAddress)(e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=(0,i.remove0x)(e);if(t.match(o))return(0,i.add0x)(t)}catch(e){}return(0,i.bytesToHex)(t.from(e,"utf8"))},r.validateSignMessageData=function(e){const{from:t,data:r}=e;if(c(t,"from"),!r||"string"!=typeof r)throw new Error(`Invalid message "data": ${r} must be a valid string.`)},r.validateTypedSignMessageDataV1=function(e){if(c(e.from,"from"),!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{(0,s.typedSignatureHash)(e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},r.validateTypedSignMessageDataV3V4=function(e,t){if(c(e.from,"from"),!e.data||Array.isArray(e.data)||"object"!=typeof e.data&&"string"!=typeof e.data)throw new Error('Invalid message "data": Must be a valid string or object.');let r;if("object"==typeof e.data)r=e.data;else try{r=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if((0,a.validate)(r,s.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.");if(!t)throw new Error("Current chainId cannot be null or undefined.");let{chainId:n}=r.domain;if(n){"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10));const e=parseInt(t,16);if(Number.isNaN(e))throw new Error(`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`);if(n!==e)throw new Error(`Provided chainId "${n}" must match the active chainId "${e}"`)}},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;c(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;c(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/utils.js"}],[1727,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseControllerV1=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const[e,t]of Object.entries(this.internalConfig))t!==undefined&&(this[e]=t)}else for(const t of Object.keys(e))void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseControllerV1=n,r.default=n}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/BaseControllerV1.js"}],[1728,{immer:4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const a=e("immer");(0,a.enablePatches)();function o(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:i}){n.set(this,void 0),this.messagingSystem=e,this.name=r,s(this,n,i,"f"),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i(this,n,"f")}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,o]=a.produceWithPatches(i(this,n,"f"),e);return s(this,n,t,"f"),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:o}}applyPatches(e){const t=(0,a.applyPatches)(i(this,n,"f"),e);s(this,n,t,"f"),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},n=new WeakMap,r.getAnonymizedState=function(e,t){return o(e,t,"anonymous")},r.getPersistentState=function(e,t){return o(e,t,"persist")}}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1729,{"./RestrictedControllerMessenger":1730},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=void 0;const c=e("./RestrictedControllerMessenger");r.ControllerMessenger=class{constructor(){n.set(this,new Map),s.set(this,new Map),i.set(this,new Map),a.set(this,new Map)}registerActionHandler(e,t){if(o(this,n,"f").has(e))throw new Error(`A handler for ${e} has already been registered`);o(this,n,"f").set(e,t)}unregisterActionHandler(e){o(this,n,"f").delete(e)}clearActions(){o(this,n,"f").clear()}call(e,...t){const r=o(this,n,"f").get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){o(this,i,"f").set(e,t)}publish(e,...t){const r=o(this,s,"f").get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=o(this,a,"f").get(e),s=n(...t);s!==r&&(o(this,a,"f").set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=o(this,s,"f").get(e);if(n||(n=new Map,o(this,s,"f").set(e,n)),n.set(t,r),r){const n=o(this,i,"f").get(e);if(n){const e=r(...n());o(this,a,"f").set(t,e)}}}unsubscribe(e,t){const r=o(this,s,"f").get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&o(this,a,"f").delete(t),r.delete(t)}clearEventSubscriptions(e){o(this,s,"f").delete(e)}clearSubscriptions(){o(this,s,"f").clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new c.RestrictedControllerMessenger({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}},n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[173,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;s.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};const s=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[1730,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.RestrictedControllerMessenger=void 0;r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),d(this,s,e,"f"),d(this,i,t,"f"),d(this,a,null!=r?r:null,"f"),d(this,o,null!=c?c:null,"f")}registerActionHandler(e,t){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").registerActionHandler(e,t)}unregisterActionHandler(e){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").unregisterActionHandler(e)}call(e,...t){if(!h(this,n,"m",l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return h(this,s,"f").call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").publish(e,...t)}subscribe(e,t,r){if(!h(this,n,"m",c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?h(this,s,"f").subscribe(e,t,r):h(this,s,"f").subscribe(e,t)}unsubscribe(e,t){if(!h(this,n,"m",c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);h(this,s,"f").unsubscribe(e,t)}clearEventSubscriptions(e){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").clearEventSubscriptions(e)}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(e){const t=h(this,o,"f");return h(this,n,"m",u).call(this,e)||null!==t&&t.includes(e)},l=function(e){const t=h(this,a,"f");return h(this,n,"m",u).call(this,e)||null!==t&&t.includes(e)},u=function(e){return e.startsWith(`${h(this,i,"f")}:`)}}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/RestrictedControllerMessenger.js"}],[1731,{"./BaseControllerV1":1727,"./BaseControllerV2":1728,"./ControllerMessenger":1729,"./RestrictedControllerMessenger":1730},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=r.BaseControllerV1=void 0;var i=e("./BaseControllerV1");Object.defineProperty(r,"BaseControllerV1",{enumerable:!0,get:function(){return i.BaseControllerV1}});var a=e("./BaseControllerV2");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return a.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return a.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return a.getPersistentState}}),s(e("./ControllerMessenger"),r),s(e("./RestrictedControllerMessenger"),r)}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/index.js"}],[1732,{"./types":1736},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/constants.js"}],[1733,{"./constants":1732,"./siwe":1735,"./types":1736,"./util":1737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./constants"),r),s(e("./util"),r),s(e("./types"),r),s(e("./siwe"),r)}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/index.js"}],[1734,{"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/logger.js"}],[1735,{"./logger":1734,"@metamask/utils":2787,"@spruceid/siwe-parser":3058,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),s=e("@spruceid/siwe-parser"),i=e("./logger"),a=(0,i.createModuleLogger)(i.projectLogger,"detect-siwe");function o(e){try{const s="string"!=typeof(r=e)?r:(0,n.remove0x)(r),i=t.from(s,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return a(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:s}=e;if(!n||!(null===(t=null==s?void 0:s.parsedMessage)||void 0===t?void 0:t.domain))return!1;const i=new URL(n),a=(0,r.parseDomainParts)(s.parsedMessage.domain,i.protocol);return 0===a.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==a.port&&a.port!==i.port?""===i.port&&a.port===c[i.protocol]:""===a.username||a.username===i.username)}catch(e){return a(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new s.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1736,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/types.js"}],[1737,{"./constants":1732,"@ethereumjs/util":459,"@metamask/ethjs-unit":1472,"@metamask/utils":2787,"bn.js":3528,buffer:3576,"eth-ens-namehash":3768,"fast-deep-equal":3902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const i=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=s(e("bn.js")),l=s(e("eth-ens-namehash")),u=s(e("fast-deep-equal")),d=e("./constants"),h=new Error("timeout");function f(e){return e?new c.default((0,o.remove0x)(e),16):new c.default(0)}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield p(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=d.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.default(t),s=new c.default(r);return e.mul(n).div(s)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,a.toWei)(r,"gwei");if(n.length<=9)return(0,a.toWei)(`${r}.${n}`,"gwei");const s=n.slice(9)[0];n=n.slice(0,9);let i=(0,a.toWei)(`${r}.${n}`,"gwei");return Number(s)>=5&&(i=i.add(new c.default(1))),i},r.weiHexToGweiDec=function(e){const t=new c.default((0,o.remove0x)(e),16);return(0,a.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new c.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.default.isBN(e)?e.toString(16):new c.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,i.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,i.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=m,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:s}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield m(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,s)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,s)=>{const i=(e,t)=>{e?s(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/util.js"}],[1738,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={snapId:"npm:@metamask/message-signing-snap",manifest:{version:"0.3.3",description:"Automatic message signing of MetaMask tagged messages",proposedName:"MetaMask Message Signing Snap",repository:{type:"git",url:"https://github.com/MetaMask/message-signing-snap.git"},source:{shasum:"ol44wik35znt/n3Z7GGyXjh+J0M00yDM7YZOYQegA7I=",location:{npm:{filePath:"dist/bundle.js",iconPath:"images/icon.svg",packageName:"@metamask/message-signing-snap",registry:"https://registry.npmjs.org/"}}},initialPermissions:{snap_getEntropy:{},"endowment:rpc":{dapps:!0,snaps:!1}},manifestVersion:"0.1"},files:[{path:"images/icon.svg",value:'<svg width="500" height="500" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="500" height="500" fill="black"/>\n<g filter="url(#filter0_f_8_91)">\n<path d="M249.444 373.519C249.444 373.519 364.118 343.192 364.118 257.188L378.333 248.251L364.118 239.314L378.333 230.378L364.118 221.441V203.568V185.695V149.948V114.202L301.639 132.596C267.566 142.628 231.323 142.628 197.25 132.596L134.771 114.202V149.948V167.821V185.695V203.568V221.441L120.556 230.378L134.771 239.314L120.556 248.251L134.771 257.188C134.771 343.192 249.444 373.519 249.444 373.519Z" fill="#F1CA77"/>\n</g>\n<path d="M249.445 406.215C249.445 406.215 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 406.215 249.445 406.215Z" fill="#233447"/>\n<path d="M249.445 399.107C249.445 399.107 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 399.107 249.445 399.107Z" fill="#123AF0"/>\n<path d="M249.445 392C249.445 392 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 392 249.445 392Z" fill="#CD6116"/>\n<path d="M249.445 382.049C249.445 382.049 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 382.049 249.445 382.049Z" fill="#E4751F"/>\n<path d="M249.445 370.676C249.445 370.676 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 370.676 249.445 370.676Z" fill="#F6851B"/>\n<path d="M249.445 352.196C249.445 352.196 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888C290.105 147.184 208.784 147.184 134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 352.196 249.445 352.196Z" fill="url(#paint0_linear_8_91)"/>\n<defs>\n<filter id="filter0_f_8_91" x="94.9674" y="88.6133" width="308.954" height="310.494" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n<feGaussianBlur stdDeviation="12.7941" result="effect1_foregroundBlur_8_91"/>\n</filter>\n<linearGradient id="paint0_linear_8_91" x1="144.012" y1="132.09" x2="425.482" y2="446.967" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F1CA77"/>\n<stop offset="1" stop-color="#F6851B"/>\n</linearGradient>\n</defs>\n</svg>\n'},{path:"dist/bundle.js",value:'(()=>{var e={526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=a(e),o=s[0],u=s[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,u)),d=0,f=u>0?o-4:o;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[d++]=255&t);1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,c=n-i;a<c;a+=o)s.push(u(e,a,a+o>c?c:a+o));1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},287:(e,t,r)=>{"use strict";const n=r(526),i=r(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=u,t.IS=50;const o=2147483647;function a(e){if(e>o)throw new RangeError(\'The value "\'+e+\'" is invalid for option "size"\');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError(\'The "string" argument must be of type string. Received type number\');return f(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|y(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError(\'The "value" argument must not be of type number. Received type number\');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||G(e.length)?a(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError(\'"size" argument must be of type number\');if(e<0)throw new RangeError(\'The value "\'+e+\'" is invalid for option "size"\')}function f(e){return d(e),a(e<0?0:0|p(e))}function l(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError(\'"offset" is outside of buffer bounds\');if(e.byteLength<t+(r||0))throw new RangeError(\'"length" is outside of buffer bounds\');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function y(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError(\'The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type \'+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(i)return n?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return S(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),G(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){let s,o=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===u)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){let r=!0;for(let n=0;n<u;n++)if(c(e,s+n)!==c(t,n)){r=!1;break}if(r)return s}return-1}function b(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(G(n))return o;e[r+o]=n}return o}function _(e,t,r,n){return W(H(t,e.length-r),e,r,n)}function E(e,t,r,n){return W(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return W(K(t),e,r,n)}function k(e,t,r,n){return W(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,u;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(s=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(s=u))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=O));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return d(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError(\'The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array\');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError(\'"list" argument must be an Array of Buffers\');t.copy(n,i)}i+=t.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.IS;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError(\'The "target" argument must be one of type Buffer or Uint8Array. Received type \'+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(s,o),c=this.slice(n,i),d=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==d[e]){s=c[e],o=d[e];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function S(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=Y[e[n]];return i}function N(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Z(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(t>i||t<s)throw new RangeError(\'"value" argument is out of bounds\');if(r+n>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n,i){F(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function j(e,t,r,n,i){F(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function U(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,n,s){return t=+t,r>>>=0,s||U(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,s){return t=+t,r>>>=0,s||U(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||D(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||D(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||D(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||D(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){Z(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){Z(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X((function(e,t=0){return C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=X((function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);Z(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);Z(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X((function(e,t=0){return C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=X((function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=u.isBuffer(e)?e:u.from(e,n),o=s.length;if(0===o)throw new TypeError(\'The value "\'+e+\'" is invalid for argument "value"\');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const $={};function M(e,t,r){$[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function F(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new $.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||D(t,e.length-(r+1))}(n,i,s)}function q(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function D(e,t,r){if(Math.floor(e)!==e)throw q(e,r),new $.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=z(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function H(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function K(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},463:e=>{e.exports=o,o.default=o,o.stable=d,o.stableStringify=d;var t="[...]",r="[Circular]",n=[],i=[];function s(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function o(e,t,r,o){var a;void 0===o&&(o=s()),u(e,"",0,[],void 0,0,o);try{a=0===i.length?JSON.stringify(e,t,r):JSON.stringify(e,l(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var c=n.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return a}function a(e,t,r,s){var o=Object.getOwnPropertyDescriptor(s,r);void 0!==o.get?o.configurable?(Object.defineProperty(s,r,{value:e}),n.push([s,r,t,o])):i.push([t,r,e]):(s[r]=e,n.push([s,r,t]))}function u(e,n,i,s,o,c,d){var f;if(c+=1,"object"==typeof e&&null!==e){for(f=0;f<s.length;f++)if(s[f]===e)return void a(r,e,n,o);if(void 0!==d.depthLimit&&c>d.depthLimit)return void a(t,e,n,o);if(void 0!==d.edgesLimit&&i+1>d.edgesLimit)return void a(t,e,n,o);if(s.push(e),Array.isArray(e))for(f=0;f<e.length;f++)u(e[f],f,f,s,e,c,d);else{var l=Object.keys(e);for(f=0;f<l.length;f++){var h=l[f];u(e[h],h,f,s,e,c,d)}}s.pop()}}function c(e,t){return e<t?-1:e>t?1:0}function d(e,t,r,o){void 0===o&&(o=s());var a,u=f(e,"",0,[],void 0,0,o)||e;try{a=0===i.length?JSON.stringify(u,t,r):JSON.stringify(u,l(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var c=n.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return a}function f(e,i,s,o,u,d,l){var h;if(d+=1,"object"==typeof e&&null!==e){for(h=0;h<o.length;h++)if(o[h]===e)return void a(r,e,i,u);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==l.depthLimit&&d>l.depthLimit)return void a(t,e,i,u);if(void 0!==l.edgesLimit&&s+1>l.edgesLimit)return void a(t,e,i,u);if(o.push(e),Array.isArray(e))for(h=0;h<e.length;h++)f(e[h],h,h,o,e,d,l);else{var p={},y=Object.keys(e).sort(c);for(h=0;h<y.length;h++){var m=y[h];f(e[m],m,h,o,e,d,l),p[m]=e[m]}if(void 0===u)return p;n.push([u,i,e]),u[i]=p}o.pop()}}function l(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(i.length>0)for(var n=0;n<i.length;n++){var s=i[n];if(s[1]===t&&s[0]===r){r=s[2],i.splice(n,1);break}}return e.call(this,t,r)}}},251:(e,t)=>{t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,u=(1<<a)-1,c=u>>1,d=-7,f=r?i-1:0,l=r?-1:1,h=e[t+f];for(f+=l,s=h&(1<<-d)-1,h>>=-d,d+=a;d>0;s=256*s+e[t+f],f+=l,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=n;d>0;o=256*o+e[t+f],f+=l,d-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),s-=c}return(h?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,u,c=8*s-i-1,d=(1<<c)-1,f=d>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?l/u:l*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=d?(a=0,o=d):o+f>=1?(a=(t*u-1)*Math.pow(2,i),o+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+h]=255&a,h+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[r+h]=255&o,h+=p,o/=256,c-=8);e[r+h-p]|=128*y}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{onRpcRequest:()=>Gn});var e={};r.r(e),r.d(e,{DO:()=>Ur,OG:()=>Jr,My:()=>Lr,bytesToNumberBE:()=>qr,lX:()=>Dr,Id:()=>Wr,fg:()=>Xr,qj:()=>Kr,hexToBytes:()=>Fr,aY:()=>jr,lq:()=>Vr,z:()=>Hr,Q5:()=>en});var t={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},i={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function s(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}var o=(e,t)=>Object.hasOwnProperty.call(e,t);var a,u=((a=u||{})[a.Null=4]="Null",a[a.Comma=1]="Comma",a[a.Wrapper=1]="Wrapper",a[a.True=4]="True",a[a.False=5]="False",a[a.Quote=1]="Quote",a[a.Colon=1]="Colon",a[a.Date=24]="Date",a);Error;class c extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...s}=e,{path:o}=e,a=0===o.length?n:`At path: ${o.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function d(e){return"object"==typeof e&&null!=e}function f(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function l(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:o}=r,{refinement:a,message:u=`Expected a value of type \\`${o}\\`${a?` with refinement \\`${a}\\``:""}, but received: \\`${f(n)}\\``}=e;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:u}}function*h(e,t,r,n){var i;d(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]);for(const i of e){const e=l(i,t,r,n);e&&(yield e)}}function*p(e,t,r={}){const{path:n=[],branch:i=[e],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i};if(s&&(e=t.coercer(e,a),o&&"type"!==t.type&&d(t.schema)&&d(e)&&!Array.isArray(e)))for(const r in e)void 0===t.schema[r]&&delete e[r];let u="valid";for(const n of t.validator(e,a))n.explanation=r.message,u="not_valid",yield[n,void 0];for(let[c,f,l]of t.entries(e,a)){const t=p(f,l,{path:void 0===c?n:[...n,c],branch:void 0===c?i:[...i,f],coerce:s,mask:o,message:r.message});for(const r of t)r[0]?(u=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):s&&(f=r[1],void 0===c?e=f:e instanceof Map?e.set(c,f):e instanceof Set?e.add(f):d(e)&&(void 0!==f||c in e)&&(e[c]=f))}if("not_valid"!==u)for(const n of t.refiner(e,a))n.explanation=r.message,u="not_refined",yield[n,void 0];"valid"===u&&(yield[void 0,e])}class y{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:s=(e=>e),entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(e,t)=>h(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>h(i(e,t),t,this,e):()=>[]}assert(e,t){return m(e,this,t)}create(e,t){return g(e,this,t)}is(e){return v(e,this)}mask(e,t){return function(e,t,r){const n=w(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return w(e,this,t)}}function m(e,t,r){const n=w(e,t,{message:r});if(n[0])throw n[0]}function g(e,t,r){const n=w(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function v(e,t){return!w(e,t)[0]}function w(e,t,r={}){const n=p(e,t,r),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);if(i[0]){return[new c(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,i[1]]}function b(e,t){return new y({type:e,schema:null,validator:t})}function _(e){let t;return new y({type:"lazy",schema:null,*entries(r,n){t??(t=e()),yield*t.entries(r,n)},validator:(r,n)=>(t??(t=e()),t.validator(r,n)),coercer:(r,n)=>(t??(t=e()),t.coercer(r,n)),refiner:(r,n)=>(t??(t=e()),t.refiner(r,n))})}function E(e){return new y({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${f(e)}`})}function x(e){const t=f(e),r=typeof e;return new y({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \\`${t}\\`, but received: ${f(r)}`})}function k(){return b("never",(()=>!1))}function I(){return b("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${f(e)}`))}function A(e){const t=e?Object.keys(e):[],r=k();return new y({type:"object",schema:e||null,*entries(n){if(e&&d(n)){const i=new Set(Object.keys(n));for(const r of t)i.delete(r),yield[r,n[r],e[r]];for(const e of i)yield[e,n[e],r]}},validator:e=>d(e)||`Expected an object, but received: ${f(e)}`,coercer:e=>d(e)?{...e}:e})}function O(e){return new y({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function B(e,t){return new y({type:"record",schema:null,*entries(r){if(d(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>d(e)||`Expected an object, but received: ${f(e)}`})}function S(){return b("string",(e=>"string"==typeof e||`Expected a string, but received: ${f(e)}`))}function T(e){const t=e.map((e=>e.type)).join(" | ");return new y({type:"union",schema:null,coercer(t){for(const r of e){const[e,n]=r.validate(t,{coerce:!0});if(!e)return n}return t},validator(r,n){const i=[];for(const t of e){const[...e]=p(r,t,n),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \\`${t}\\`, but received: ${f(r)}`,...i]}})}function N(){return b("unknown",(()=>!0))}function R(e,t,r){return new y({...e,coercer:(n,i)=>v(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function Z(e,t){return C(e,"pattern",(r=>t.test(r)||`Expected a ${e.type} matching \\`/${t.source}/\\` but received "${r}"`))}function C(e,t,r){return new y({...e,*refiner(n,i){yield*e.refiner(n,i);const s=h(r(n,i),i,e,n);for(const e of s)yield{...e,refinement:t}}})}function j(e){return function(e){return function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)&&"string"==typeof e.message?e.message:null==e?"":String(e)}(e).replace(/\\.$/u,"")}function U(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}var P=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};var L=e=>A(e);function $({path:e,branch:t}){const r=e[e.length-1];return o(t[t.length-2],r)}function M(e){return new y({...e,type:`optional ${e.type}`,validator:(t,r)=>!$(r)||e.validator(t,r),refiner:(t,r)=>!$(r)||e.refiner(t,r)})}var z=T([x(null),b("boolean",(e=>"boolean"==typeof e)),b("finite number",(e=>v(e,I())&&Number.isFinite(e))),S(),E(_((()=>z))),B(S(),_((()=>z)))]),F=R(z,b("any",(()=>!0)),(e=>(function(e,t,r="Assertion failed",n=P){try{m(e,t)}catch(e){throw U(n,`${r}: ${j(e)}.`)}}(e,z),JSON.parse(JSON.stringify(e,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))))));function q(e){try{return function(e){g(e,F)}(e),!0}catch{return!1}}var D=x("2.0"),V=function(e){return new y({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}(T([I(),S()])),H=L({code:b("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${f(e)}`)),message:S(),data:M(F),stack:M(S())}),K=T([B(S(),F),E(F)]);L({id:V,jsonrpc:D,method:S(),params:M(K)}),L({jsonrpc:D,method:S(),params:M(K)});A({id:V,jsonrpc:D,result:O(N()),error:O(H)});var W=L({id:V,jsonrpc:D,result:F}),J=L({id:V,jsonrpc:D,error:H});T([W,J]);var G=t.internal,Y="Unspecified error message. This is a bug, please report it.",X=(Q(G),"Unspecified server error.");function Q(e,t=Y){if(function(e){return Number.isInteger(e)}(e)){const t=e.toString();if(o(i,t))return i[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return X}return t}function ee(e){return Array.isArray(e)?e.map((e=>q(e)?e:s(e)?te(e):null)):s(e)?te(e):q(e)?e:null}function te(e){return Object.getOwnPropertyNames(e).reduce(((t,r)=>{const n=e[r];return q(n)&&(t[r]=n),t}),{})}var re=r(463),ne=class extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error(\'"code" must be an integer.\');if(!t||"string"!=typeof t)throw new Error(\'"message" must be a non-empty string.\');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}(this.data)&&(e.data.cause=ee(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return re(this.serialize(),ie,2)}};function ie(e,t){if("[Circular]"!==t)return t}var se,oe,ae=e=>ce(t.invalidParams,e),ue=e=>ce(t.methodNotFound,e);function ce(e,t){const[r,n]=de(t);return new ne(e,r??Q(e),n)}function de(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??void 0,r]}}return[]}!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`\'${e}\'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(se||(se={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(oe||(oe={}));const fe=se.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),le=e=>{switch(typeof e){case"undefined":return fe.undefined;case"string":return fe.string;case"number":return isNaN(e)?fe.nan:fe.number;case"boolean":return fe.boolean;case"function":return fe.function;case"bigint":return fe.bigint;case"symbol":return fe.symbol;case"object":return Array.isArray(e)?fe.array:null===e?fe.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?fe.promise:"undefined"!=typeof Map&&e instanceof Map?fe.map:"undefined"!=typeof Set&&e instanceof Set?fe.set:"undefined"!=typeof Date&&e instanceof Date?fe.date:fe.object;default:return fe.unknown}},he=se.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class pe extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,se.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}pe.create=e=>new pe(e);const ye=(e,t)=>{let r;switch(e.code){case he.invalid_type:r=e.received===fe.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case he.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,se.jsonStringifyReplacer)}`;break;case he.unrecognized_keys:r=`Unrecognized key(s) in object: ${se.joinValues(e.keys,", ")}`;break;case he.invalid_union:r="Invalid input";break;case he.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${se.joinValues(e.options)}`;break;case he.invalid_enum_value:r=`Invalid enum value. Expected ${se.joinValues(e.options)}, received \'${e.received}\'`;break;case he.invalid_arguments:r="Invalid function arguments";break;case he.invalid_return_type:r="Invalid function return type";break;case he.invalid_date:r="Invalid date";break;case he.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:se.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case he.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case he.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case he.custom:r="Invalid input";break;case he.invalid_intersection_types:r="Intersection results could not be merged";break;case he.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case he.not_finite:r="Number must be finite";break;default:r=t.defaultError,se.assertNever(e)}return{message:r}};let me=ye;function ge(){return me}const ve=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};let a="";const u=n.filter((e=>!!e)).slice().reverse();for(const e of u)a=e(o,{data:t,defaultError:a}).message;return{...i,path:s,message:i.message||a}};function we(e,t){const r=ve({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,ge(),ye].filter((e=>!!e))});e.common.issues.push(r)}class be{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return _e;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return be.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return _e;if("aborted"===i.status)return _e;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const _e=Object.freeze({status:"aborted"}),Ee=e=>({status:"dirty",value:e}),xe=e=>({status:"valid",value:e}),ke=e=>"aborted"===e.status,Ie=e=>"dirty"===e.status,Ae=e=>"valid"===e.status,Oe=e=>"undefined"!=typeof Promise&&e instanceof Promise;var Be;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Be||(Be={}));class Se{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Te=(e,t)=>{if(Ae(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new pe(e.common.issues);return this._error=t,this._error}}};function Ne(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(\'Can\\\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.\');if(t)return{errorMap:t,description:i};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:i}}class Re{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return le(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new be,ctx:{common:e.parent.common,data:e.data,parsedType:le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Oe(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:le(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Te(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:le(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(Oe(n)?n:Promise.resolve(n));return Te(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:he.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new wt({schema:this,typeName:Nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return bt.create(this,this._def)}nullable(){return _t.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return et.create(this,this._def)}promise(){return vt.create(this,this._def)}or(e){return nt.create([this,e],this._def)}and(e){return at.create(this,e,this._def)}transform(e){return new wt({...Ne(this._def),schema:this,typeName:Nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Et({...Ne(this._def),innerType:this,defaultValue:t,typeName:Nt.ZodDefault})}brand(){return new At({typeName:Nt.ZodBranded,type:this,...Ne(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new xt({...Ne(this._def),innerType:this,catchValue:t,typeName:Nt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Ot.create(this,e)}readonly(){return Bt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ze=/^c[^\\s-]{8,}$/i,Ce=/^[a-z][a-z0-9]*$/,je=/^[0-9A-HJKMNP-TV-Z]{26}$/,Ue=/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i,Pe=/^(?!\\.)(?!.*\\.\\.)([A-Z0-9_+-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;let Le;const $e=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Me=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class ze extends Re{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==fe.string){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.string,received:t.parsedType}),_e}const t=new be;let r;for(const o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("max"===o.kind)e.data.length>o.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("length"===o.kind){const n=e.data.length>o.value,i=e.data.length<o.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?we(r,{code:he.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&we(r,{code:he.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if("email"===o.kind)Pe.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"email",code:he.invalid_string,message:o.message}),t.dirty());else if("emoji"===o.kind)Le||(Le=new RegExp("^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$","u")),Le.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"emoji",code:he.invalid_string,message:o.message}),t.dirty());else if("uuid"===o.kind)Ue.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"uuid",code:he.invalid_string,message:o.message}),t.dirty());else if("cuid"===o.kind)Ze.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid",code:he.invalid_string,message:o.message}),t.dirty());else if("cuid2"===o.kind)Ce.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid2",code:he.invalid_string,message:o.message}),t.dirty());else if("ulid"===o.kind)je.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ulid",code:he.invalid_string,message:o.message}),t.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(n){r=this._getOrReturnCtx(e,r),we(r,{validation:"url",code:he.invalid_string,message:o.message}),t.dirty()}else if("regex"===o.kind){o.regex.lastIndex=0;o.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"regex",code:he.invalid_string,message:o.message}),t.dirty())}else if("trim"===o.kind)e.data=e.data.trim();else if("includes"===o.kind)e.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty());else if("toLowerCase"===o.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===o.kind)e.data=e.data.toUpperCase();else if("startsWith"===o.kind)e.data.startsWith(o.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty());else if("endsWith"===o.kind)e.data.endsWith(o.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty());else if("datetime"===o.kind){((s=o).precision?s.offset?new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${s.precision}}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`):new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${s.precision}}Z$`):0===s.precision?s.offset?new RegExp("^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$"):new RegExp("^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}Z$"):s.offset?new RegExp("^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$"):new RegExp("^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.invalid_string,validation:"datetime",message:o.message}),t.dirty())}else"ip"===o.kind?(n=e.data,("v4"!==(i=o.version)&&i||!$e.test(n))&&("v6"!==i&&i||!Me.test(n))&&(r=this._getOrReturnCtx(e,r),we(r,{validation:"ip",code:he.invalid_string,message:o.message}),t.dirty())):se.assertNever(o);var n,i,s;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:he.invalid_string,...Be.errToObj(r)})}_addCheck(e){return new ze({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Be.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...Be.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Be.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Be.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Be.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Be.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Be.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Be.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Be.errToObj(t)})}nonempty(e){return this.min(1,Be.errToObj(e))}trim(){return new ze({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ze({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ze({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Fe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}ze.create=e=>{var t;return new ze({checks:[],typeName:Nt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ne(e)})};class qe extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==fe.number){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.number,received:t.parsedType}),_e}let t;const r=new be;for(const n of this._def.checks)if("int"===n.kind)se.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),we(t,{code:he.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==Fe(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),we(t,{code:he.not_finite,message:n.message}),r.dirty()):se.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Be.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Be.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Be.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Be.toString(t))}setLimit(e,t,r,n){return new qe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Be.toString(n)}]})}_addCheck(e){return new qe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Be.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Be.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Be.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&se.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}qe.create=e=>new qe({checks:[],typeName:Nt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Ne(e)});class De extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==fe.bigint){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.bigint,received:t.parsedType}),_e}let t;const r=new be;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):se.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Be.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Be.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Be.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Be.toString(t))}setLimit(e,t,r,n){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Be.toString(n)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Be.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Be.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}De.create=e=>{var t;return new De({checks:[],typeName:Nt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ne(e)})};class Ve extends Re{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==fe.boolean){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.boolean,received:t.parsedType}),_e}return xe(e.data)}}Ve.create=e=>new Ve({typeName:Nt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Ne(e)});class He extends Re{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==fe.date){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.date,received:t.parsedType}),_e}if(isNaN(e.data.getTime())){return we(this._getOrReturnCtx(e),{code:he.invalid_date}),_e}const t=new be;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):se.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new He({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Be.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Be.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}He.create=e=>new He({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Nt.ZodDate,...Ne(e)});class Ke extends Re{_parse(e){if(this._getType(e)!==fe.symbol){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.symbol,received:t.parsedType}),_e}return xe(e.data)}}Ke.create=e=>new Ke({typeName:Nt.ZodSymbol,...Ne(e)});class We extends Re{_parse(e){if(this._getType(e)!==fe.undefined){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.undefined,received:t.parsedType}),_e}return xe(e.data)}}We.create=e=>new We({typeName:Nt.ZodUndefined,...Ne(e)});class Je extends Re{_parse(e){if(this._getType(e)!==fe.null){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.null,received:t.parsedType}),_e}return xe(e.data)}}Je.create=e=>new Je({typeName:Nt.ZodNull,...Ne(e)});class Ge extends Re{constructor(){super(...arguments),this._any=!0}_parse(e){return xe(e.data)}}Ge.create=e=>new Ge({typeName:Nt.ZodAny,...Ne(e)});class Ye extends Re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xe(e.data)}}Ye.create=e=>new Ye({typeName:Nt.ZodUnknown,...Ne(e)});class Xe extends Re{_parse(e){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.never,received:t.parsedType}),_e}}Xe.create=e=>new Xe({typeName:Nt.ZodNever,...Ne(e)});class Qe extends Re{_parse(e){if(this._getType(e)!==fe.undefined){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.void,received:t.parsedType}),_e}return xe(e.data)}}Qe.create=e=>new Qe({typeName:Nt.ZodVoid,...Ne(e)});class et extends Re{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==fe.array)return we(t,{code:he.invalid_type,expected:fe.array,received:t.parsedType}),_e;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(we(t,{code:e?he.too_big:he.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(we(t,{code:he.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(we(t,{code:he.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new Se(t,e,t.path,r))))).then((e=>be.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new Se(t,e,t.path,r))));return be.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new et({...this._def,minLength:{value:e,message:Be.toString(t)}})}max(e,t){return new et({...this._def,maxLength:{value:e,message:Be.toString(t)}})}length(e,t){return new et({...this._def,exactLength:{value:e,message:Be.toString(t)}})}nonempty(e){return this.min(1,e)}}function tt(e){if(e instanceof rt){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=bt.create(tt(n))}return new rt({...e._def,shape:()=>t})}return e instanceof et?new et({...e._def,type:tt(e.element)}):e instanceof bt?bt.create(tt(e.unwrap())):e instanceof _t?_t.create(tt(e.unwrap())):e instanceof ut?ut.create(e.items.map((e=>tt(e)))):e}et.create=(e,t)=>new et({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Nt.ZodArray,...Ne(t)});class rt extends Re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=se.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==fe.object){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.object,received:t.parsedType}),_e}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof Xe&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||s.push(e);const o=[];for(const e of i){const t=n[e],i=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new Se(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof Xe){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(we(r,{code:he.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new Se(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>be.mergeObjectSync(t,e))):be.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return Be.errToObj,new rt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,o;const a=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=Be.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new rt({...this._def,unknownKeys:"strip"})}passthrough(){return new rt({...this._def,unknownKeys:"passthrough"})}extend(e){return new rt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new rt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Nt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new rt({...this._def,catchall:e})}pick(e){const t={};return se.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new rt({...this._def,shape:()=>t})}omit(e){const t={};return se.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new rt({...this._def,shape:()=>t})}deepPartial(){return tt(this)}partial(e){const t={};return se.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new rt({...this._def,shape:()=>t})}required(e){const t={};return se.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof bt;)e=e._def.innerType;t[r]=e}})),new rt({...this._def,shape:()=>t})}keyof(){return yt(se.objectKeys(this.shape))}}rt.create=(e,t)=>new rt({shape:()=>e,unknownKeys:"strip",catchall:Xe.create(),typeName:Nt.ZodObject,...Ne(t)}),rt.strictCreate=(e,t)=>new rt({shape:()=>e,unknownKeys:"strict",catchall:Xe.create(),typeName:Nt.ZodObject,...Ne(t)}),rt.lazycreate=(e,t)=>new rt({shape:e,unknownKeys:"strip",catchall:Xe.create(),typeName:Nt.ZodObject,...Ne(t)});class nt extends Re{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new pe(e.ctx.common.issues)));return we(t,{code:he.invalid_union,unionErrors:r}),_e}));{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new pe(e)));return we(t,{code:he.invalid_union,unionErrors:i}),_e}}get options(){return this._def.options}}nt.create=(e,t)=>new nt({options:e,typeName:Nt.ZodUnion,...Ne(t)});const it=e=>e instanceof ht?it(e.schema):e instanceof wt?it(e.innerType()):e instanceof pt?[e.value]:e instanceof mt?e.options:e instanceof gt?Object.keys(e.enum):e instanceof Et?it(e._def.innerType):e instanceof We?[void 0]:e instanceof Je?[null]:null;class st extends Re{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fe.object)return we(t,{code:he.invalid_type,expected:fe.object,received:t.parsedType}),_e;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(we(t,{code:he.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),_e)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=it(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \\`${e}\\` could not be extracted from all schema options`);for(const i of t){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new st({typeName:Nt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...Ne(r)})}}function ot(e,t){const r=le(e),n=le(t);if(e===t)return{valid:!0,data:e};if(r===fe.object&&n===fe.object){const r=se.objectKeys(t),n=se.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const n=ot(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===fe.array&&n===fe.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=ot(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===fe.date&&n===fe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class at extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(ke(e)||ke(n))return _e;const i=ot(e.value,n.value);return i.valid?((Ie(e)||Ie(n))&&t.dirty(),{status:t.value,value:i.data}):(we(r,{code:he.invalid_intersection_types}),_e)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}at.create=(e,t,r)=>new at({left:e,right:t,typeName:Nt.ZodIntersection,...Ne(r)});class ut extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==fe.array)return we(r,{code:he.invalid_type,expected:fe.array,received:r.parsedType}),_e;if(r.data.length<this._def.items.length)return we(r,{code:he.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_e;!this._def.rest&&r.data.length>this._def.items.length&&(we(r,{code:he.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new Se(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>be.mergeArray(t,e))):be.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ut({...this._def,rest:e})}}ut.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ut({items:e,typeName:Nt.ZodTuple,rest:null,...Ne(t)})};class ct extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==fe.object)return we(r,{code:he.invalid_type,expected:fe.object,received:r.parsedType}),_e;const n=[],i=this._def.keyType,s=this._def.valueType;for(const e in r.data)n.push({key:i._parse(new Se(r,e,r.path,e)),value:s._parse(new Se(r,r.data[e],r.path,e))});return r.common.async?be.mergeObjectAsync(t,n):be.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ct(t instanceof Re?{keyType:e,valueType:t,typeName:Nt.ZodRecord,...Ne(r)}:{keyType:ze.create(),valueType:e,typeName:Nt.ZodRecord,...Ne(t)})}}class dt extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==fe.map)return we(r,{code:he.invalid_type,expected:fe.map,received:r.parsedType}),_e;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map((([e,t],s)=>({key:n._parse(new Se(r,e,r.path,[s,"key"])),value:i._parse(new Se(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return _e;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return _e;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}dt.create=(e,t,r)=>new dt({valueType:t,keyType:e,typeName:Nt.ZodMap,...Ne(r)});class ft extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==fe.set)return we(r,{code:he.invalid_type,expected:fe.set,received:r.parsedType}),_e;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(we(r,{code:he.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(we(r,{code:he.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return _e;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map(((e,t)=>i._parse(new Se(r,e,r.path,t))));return r.common.async?Promise.all(o).then((e=>s(e))):s(o)}min(e,t){return new ft({...this._def,minSize:{value:e,message:Be.toString(t)}})}max(e,t){return new ft({...this._def,maxSize:{value:e,message:Be.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ft.create=(e,t)=>new ft({valueType:e,minSize:null,maxSize:null,typeName:Nt.ZodSet,...Ne(t)});class lt extends Re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fe.function)return we(t,{code:he.invalid_type,expected:fe.function,received:t.parsedType}),_e;function r(e,r){return ve({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ge(),ye].filter((e=>!!e)),issueData:{code:he.invalid_arguments,argumentsError:r}})}function n(e,r){return ve({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ge(),ye].filter((e=>!!e)),issueData:{code:he.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof vt){const e=this;return xe((async function(...t){const o=new pe([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw o.addIssue(r(t,e)),o})),u=await Reflect.apply(s,this,a);return await e._def.returns._def.type.parseAsync(u,i).catch((e=>{throw o.addIssue(n(u,e)),o}))}))}{const e=this;return xe((function(...t){const o=e._def.args.safeParse(t,i);if(!o.success)throw new pe([r(t,o.error)]);const a=Reflect.apply(s,this,o.data),u=e._def.returns.safeParse(a,i);if(!u.success)throw new pe([n(a,u.error)]);return u.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new lt({...this._def,args:ut.create(e).rest(Ye.create())})}returns(e){return new lt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new lt({args:e||ut.create([]).rest(Ye.create()),returns:t||Ye.create(),typeName:Nt.ZodFunction,...Ne(r)})}}class ht extends Re{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ht.create=(e,t)=>new ht({getter:e,typeName:Nt.ZodLazy,...Ne(t)});class pt extends Re{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return we(t,{received:t.data,code:he.invalid_literal,expected:this._def.value}),_e}return{status:"valid",value:e.data}}get value(){return this._def.value}}function yt(e,t){return new mt({values:e,typeName:Nt.ZodEnum,...Ne(t)})}pt.create=(e,t)=>new pt({value:e,typeName:Nt.ZodLiteral,...Ne(t)});class mt extends Re{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return we(t,{expected:se.joinValues(r),received:t.parsedType,code:he.invalid_type}),_e}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return we(t,{received:t.data,code:he.invalid_enum_value,options:r}),_e}return xe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return mt.create(e)}exclude(e){return mt.create(this.options.filter((t=>!e.includes(t))))}}mt.create=yt;class gt extends Re{_parse(e){const t=se.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==fe.string&&r.parsedType!==fe.number){const e=se.objectValues(t);return we(r,{expected:se.joinValues(e),received:r.parsedType,code:he.invalid_type}),_e}if(-1===t.indexOf(e.data)){const e=se.objectValues(t);return we(r,{received:r.data,code:he.invalid_enum_value,options:e}),_e}return xe(e.data)}get enum(){return this._def.values}}gt.create=(e,t)=>new gt({values:e,typeName:Nt.ZodNativeEnum,...Ne(t)});class vt extends Re{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fe.promise&&!1===t.common.async)return we(t,{code:he.invalid_type,expected:fe.promise,received:t.parsedType}),_e;const r=t.parsedType===fe.promise?t.data:Promise.resolve(t.data);return xe(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}vt.create=(e,t)=>new vt({type:e,typeName:Nt.ZodPromise,...Ne(t)});class wt extends Re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{we(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?_e:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?_e:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ae(e))return e;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>Ae(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}se.assertNever(n)}}wt.create=(e,t,r)=>new wt({schema:e,typeName:Nt.ZodEffects,effect:t,...Ne(r)}),wt.createWithPreprocess=(e,t,r)=>new wt({schema:t,effect:{type:"preprocess",transform:e},typeName:Nt.ZodEffects,...Ne(r)});class bt extends Re{_parse(e){return this._getType(e)===fe.undefined?xe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bt.create=(e,t)=>new bt({innerType:e,typeName:Nt.ZodOptional,...Ne(t)});class _t extends Re{_parse(e){return this._getType(e)===fe.null?xe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_t.create=(e,t)=>new _t({innerType:e,typeName:Nt.ZodNullable,...Ne(t)});class Et extends Re{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===fe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Et.create=(e,t)=>new Et({innerType:e,typeName:Nt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Ne(t)});class xt extends Re{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Oe(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new pe(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new pe(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}xt.create=(e,t)=>new xt({innerType:e,typeName:Nt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Ne(t)});class kt extends Re{_parse(e){if(this._getType(e)!==fe.nan){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.nan,received:t.parsedType}),_e}return{status:"valid",value:e.data}}}kt.create=e=>new kt({typeName:Nt.ZodNaN,...Ne(e)});const It=Symbol("zod_brand");class At extends Re{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ot extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?_e:"dirty"===e.status?(t.dirty(),Ee(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?_e:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Ot({in:e,out:t,typeName:Nt.ZodPipeline})}}class Bt extends Re{_parse(e){const t=this._def.innerType._parse(e);return Ae(t)&&(t.value=Object.freeze(t.value)),t}}Bt.create=(e,t)=>new Bt({innerType:e,typeName:Nt.ZodReadonly,...Ne(t)});const St=(e,t={},r)=>e?Ge.create().superRefine(((n,i)=>{var s,o;if(!e(n)){const e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===o||o,u="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...u,fatal:a})}})):Ge.create(),Tt={object:rt.lazycreate};var Nt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Nt||(Nt={}));const Rt=ze.create,Zt=qe.create,Ct=kt.create,jt=De.create,Ut=Ve.create,Pt=He.create,Lt=Ke.create,$t=We.create,Mt=Je.create,zt=Ge.create,Ft=Ye.create,qt=Xe.create,Dt=Qe.create,Vt=et.create,Ht=rt.create,Kt=rt.strictCreate,Wt=nt.create,Jt=st.create,Gt=at.create,Yt=ut.create,Xt=ct.create,Qt=dt.create,er=ft.create,tr=lt.create,rr=ht.create,nr=pt.create,ir=mt.create,sr=gt.create,or=vt.create,ar=wt.create,ur=bt.create,cr=_t.create,dr=wt.createWithPreprocess,fr=Ot.create,lr={string:e=>ze.create({...e,coerce:!0}),number:e=>qe.create({...e,coerce:!0}),boolean:e=>Ve.create({...e,coerce:!0}),bigint:e=>De.create({...e,coerce:!0}),date:e=>He.create({...e,coerce:!0})},hr=_e;var pr=Object.freeze({__proto__:null,defaultErrorMap:ye,setErrorMap:function(e){me=e},getErrorMap:ge,makeIssue:ve,EMPTY_PATH:[],addIssueToContext:we,ParseStatus:be,INVALID:_e,DIRTY:Ee,OK:xe,isAborted:ke,isDirty:Ie,isValid:Ae,isAsync:Oe,get util(){return se},get objectUtil(){return oe},ZodParsedType:fe,getParsedType:le,ZodType:Re,ZodString:ze,ZodNumber:qe,ZodBigInt:De,ZodBoolean:Ve,ZodDate:He,ZodSymbol:Ke,ZodUndefined:We,ZodNull:Je,ZodAny:Ge,ZodUnknown:Ye,ZodNever:Xe,ZodVoid:Qe,ZodArray:et,ZodObject:rt,ZodUnion:nt,ZodDiscriminatedUnion:st,ZodIntersection:at,ZodTuple:ut,ZodRecord:ct,ZodMap:dt,ZodSet:ft,ZodFunction:lt,ZodLazy:ht,ZodLiteral:pt,ZodEnum:mt,ZodNativeEnum:gt,ZodPromise:vt,ZodEffects:wt,ZodTransformer:wt,ZodOptional:bt,ZodNullable:_t,ZodDefault:Et,ZodCatch:xt,ZodNaN:kt,BRAND:It,ZodBranded:At,ZodPipeline:Ot,ZodReadonly:Bt,custom:St,Schema:Re,ZodSchema:Re,late:Tt,get ZodFirstPartyTypeKind(){return Nt},coerce:lr,any:zt,array:Vt,bigint:jt,boolean:Ut,date:Pt,discriminatedUnion:Jt,effect:ar,enum:ir,function:tr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>St((t=>t instanceof e),t),intersection:Gt,lazy:rr,literal:nr,map:Qt,nan:Ct,nativeEnum:sr,never:qt,null:Mt,nullable:cr,number:Zt,object:Ht,oboolean:()=>Ut().optional(),onumber:()=>Zt().optional(),optional:ur,ostring:()=>Rt().optional(),pipeline:fr,preprocess:dr,promise:or,record:Xt,set:er,strictObject:Kt,string:Rt,symbol:Lt,transformer:ar,tuple:Yt,undefined:$t,union:Wt,unknown:Ft,void:Dt,NEVER:hr,ZodIssueCode:he,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:pe});function yr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function mr(e,...t){if(!((r=e)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function gr(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");yr(e.outputLen),yr(e.blockLen)}function vr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function wr(e,t){mr(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const br="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const _r=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Er=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function xr(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),mr(e),e}class kr{clone(){return this._cloneInto()}}function Ir(e=32){if(br&&"function"==typeof br.getRandomValues)return br.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Ar=(e,t,r)=>e&t^e&r^t&r;class Or extends kr{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_r(this.buffer)}update(e){vr(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=xr(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=_r(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){vr(this),wr(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=_r(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const Br=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Tr=new Uint32Array(64);class Nr extends Or{constructor(){super(64,32,8,!1),this.A=0|Sr[0],this.B=0|Sr[1],this.C=0|Sr[2],this.D=0|Sr[3],this.E=0|Sr[4],this.F=0|Sr[5],this.G=0|Sr[6],this.H=0|Sr[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)Tr[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Tr[e-15],r=Tr[e-2],n=Er(t,7)^Er(t,18)^t>>>3,i=Er(r,17)^Er(r,19)^r>>>10;Tr[e]=i+Tr[e-7]+n+Tr[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:u,H:c}=this;for(let e=0;e<64;e++){const t=c+(Er(o,6)^Er(o,11)^Er(o,25))+((d=o)&a^~d&u)+Br[e]+Tr[e]|0,f=(Er(r,2)^Er(r,13)^Er(r,22))+Ar(r,n,i)|0;c=u,u=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+f|0}var d;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,s,o,a,u,c)}roundClean(){Tr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Rr=function(e){const t=t=>e().update(xr(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}((()=>new Nr)),Zr=(BigInt(0),BigInt(1)),Cr=BigInt(2);function jr(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Ur(e){if(!jr(e))throw new Error("Uint8Array expected")}const Pr=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Lr(e){Ur(e);let t="";for(let r=0;r<e.length;r++)t+=Pr[e[r]];return t}function $r(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Mr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function zr(e){return e>=Mr._0&&e<=Mr._9?e-Mr._0:e>=Mr._A&&e<=Mr._F?e-(Mr._A-10):e>=Mr._a&&e<=Mr._f?e-(Mr._a-10):void 0}function Fr(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=zr(e.charCodeAt(i)),s=zr(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+i)}n[t]=16*r+s}return n}function qr(e){return $r(Lr(e))}function Dr(e){return Ur(e),$r(Lr(Uint8Array.from(e).reverse()))}function Vr(e,t){return Fr(e.toString(16).padStart(2*t,"0"))}function Hr(e,t){return Vr(e,t).reverse()}function Kr(e,t,r){let n;if("string"==typeof t)try{n=Fr(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!jr(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Wr(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];Ur(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const Jr=e=>(Cr<<BigInt(e-1))-Zr,Gr=e=>new Uint8Array(e),Yr=e=>Uint8Array.from(e);function Xr(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=Gr(e),i=Gr(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),u=(e=Gr())=>{i=a(Yr([0]),e),n=a(),0!==e.length&&(i=a(Yr([1]),e),n=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return Wr(...r)};return(e,t)=>{let r;for(o(),u(e);!(r=t(c()));)u();return o(),r}}const Qr={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||jr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function en(e,t,r={}){const n=(t,r,n)=>{const i=Qr[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}const tn=BigInt(0),rn=BigInt(1),nn=BigInt(2),sn=BigInt(3),on=BigInt(4),an=BigInt(5),un=BigInt(8);BigInt(9),BigInt(16);function cn(e,t){const r=e%t;return r>=tn?r:t+r}function dn(e,t,r){if(r<=tn||t<tn)throw new Error("Expected power/modulo > 0");if(r===rn)return tn;let n=rn;for(;t>tn;)t&rn&&(n=n*e%r),e=e*e%r,t>>=rn;return n}function fn(e,t,r){let n=e;for(;t-- >tn;)n*=n,n%=r;return n}function ln(e,t){if(e===tn||t<=tn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=cn(e,t),n=t,i=tn,s=rn,o=rn,a=tn;for(;r!==tn;){const e=n/r,t=n%r,u=i-o*e,c=s-a*e;n=r,r=t,i=o,s=a,o=u,a=c}if(n!==rn)throw new Error("invert: does not exist");return cn(i,t)}function hn(e){if(e%on===sn){const t=(e+rn)/on;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%un===an){const t=(e-an)/un;return function(e,r){const n=e.mul(r,nn),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,nn),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-rn)/nn;let r,n,i;for(r=e-rn,n=0;r%nn===tn;r/=nn,n++);for(i=nn;i<e&&dn(i,t,e)!==e-rn;i++);if(1===n){const t=(e+rn)/on;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+rn)/nn;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,u=e.pow(e.mul(e.ONE,i),r),c=e.pow(o,s),d=e.pow(o,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(u,rn<<BigInt(a-t-1));u=e.sqr(r),c=e.mul(c,r),d=e.mul(d,u),a=t}return c}}(e)}const pn=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yn(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function mn(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function gn(e){const t=mn(e);return t+Math.ceil(t/2)}class vn extends kr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,gr(e);const r=xr(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return vr(this),this.iHash.update(e),this}digestInto(e){vr(this),mr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const wn=(e,t,r)=>new vn(e,t).update(r).digest();wn.create=(e,t)=>new vn(e,t);const bn=BigInt(0),_n=BigInt(1);function En(e){return function(e){const t=pn.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});en(e,t)}(e.Fp),en(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yn(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:xn,hexToBytes:kn}=e,In={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=In;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:xn(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=In,r="string"==typeof e?kn(e):e;Ur(r);let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=In._parseInt(r.subarray(2)),{d:o,l:a}=In._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,o=i.length/2,a=r(s),u=r(o);return`30${r(o+s+4)}02${u}${i}02${a}${n}`}},An=BigInt(0),On=BigInt(1),Bn=(BigInt(2),BigInt(3));BigInt(4);function Sn(e){const t=function(e){const t=En(e);en(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{const i=t.toAffine();return Wr(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&An<e&&e<t.n}function a(e){if(!o(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(jr(e)&&(e=Lr(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:qr(Kr("private key",e,n))}catch(t){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(o=cn(o,s)),a(o),o}const c=new Map;function d(e){if(!(e instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof f)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?f.ZERO:new f(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(f.fromAffine)}static fromHex(e){const t=f.fromAffine(i(Kr("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(u(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),o=s(e);if(!r.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn\'t support isOdd")}equals(e){d(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(s,i)),c=r.eql(r.mul(n,a),r.mul(o,i));return u&&c}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,Bn),{px:s,py:o,pz:a}=this;let u=r.ZERO,c=r.ZERO,d=r.ZERO,l=r.mul(s,s),h=r.mul(o,o),p=r.mul(a,a),y=r.mul(s,o);return y=r.add(y,y),d=r.mul(s,a),d=r.add(d,d),u=r.mul(e,d),c=r.mul(i,p),c=r.add(u,c),u=r.sub(h,c),c=r.add(h,c),c=r.mul(u,c),u=r.mul(y,u),d=r.mul(i,d),p=r.mul(e,p),y=r.sub(l,p),y=r.mul(e,y),y=r.add(y,d),d=r.add(l,l),l=r.add(d,l),l=r.add(l,p),l=r.mul(l,y),c=r.add(c,l),p=r.mul(o,a),p=r.add(p,p),l=r.mul(p,y),u=r.sub(u,l),d=r.mul(p,h),d=r.add(d,d),d=r.add(d,d),new f(u,c,d)}add(e){d(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:u}=e;let c=r.ZERO,l=r.ZERO,h=r.ZERO;const p=t.a,y=r.mul(t.b,Bn);let m=r.mul(n,o),g=r.mul(i,a),v=r.mul(s,u),w=r.add(n,i),b=r.add(o,a);w=r.mul(w,b),b=r.add(m,g),w=r.sub(w,b),b=r.add(n,s);let _=r.add(o,u);return b=r.mul(b,_),_=r.add(m,v),b=r.sub(b,_),_=r.add(i,s),c=r.add(a,u),_=r.mul(_,c),c=r.add(g,v),_=r.sub(_,c),h=r.mul(p,b),c=r.mul(y,v),h=r.add(c,h),c=r.sub(g,h),h=r.add(g,h),l=r.mul(c,h),g=r.add(m,m),g=r.add(g,m),v=r.mul(p,v),b=r.mul(y,b),g=r.add(g,v),v=r.sub(m,v),v=r.mul(p,v),b=r.add(b,v),m=r.mul(g,b),l=r.add(l,m),m=r.mul(_,b),c=r.mul(w,c),c=r.sub(c,m),m=r.mul(w,g),h=r.mul(_,h),h=r.add(h,m),new f(c,l,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return h.wNAFCached(this,c,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(f.fromAffine)}))}multiplyUnsafe(e){const n=f.ZERO;if(e===An)return n;if(a(e),e===On)return this;const{endo:i}=t;if(!i)return h.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:u,k2:c}=i.splitScalar(e),d=n,l=n,p=this;for(;o>An||c>An;)o&On&&(d=d.add(p)),c&On&&(l=l.add(p)),p=p.double(),o>>=On,c>>=On;return s&&(d=d.negate()),u&&(l=l.negate()),l=new f(r.mul(l.px,i.beta),l.py,l.pz),d.add(l)}multiply(e){a(e);let n,i,s=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:u}=o.splitScalar(s);let{p:c,f:d}=this.wNAF(t),{p:l,f:p}=this.wNAF(u);c=h.constTimeNegate(e,c),l=h.constTimeNegate(a,l),l=new f(r.mul(l.px,o.beta),l.py,l.pz),n=c.add(l),i=d.add(p)}else{const{p:e,f:t}=this.wNAF(s);n=e,i=t}return f.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=f.BASE,i=(e,t)=>t!==An&&t!==On&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){const{px:t,py:n,pz:i}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(i));const o=r.mul(t,e),a=r.mul(n,e),u=r.mul(i,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===On)return!0;if(r)return r(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===On?this:r?r(f,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(f,this,e)}toHex(e=!0){return Lr(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);const l=t.nBitLength,h=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>bn;)r&_n&&(n=n.add(i)),i=i.double(),r>>=_n;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),s=[];let o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){const{windows:o,windowSize:a}=n(t);let u=e.ZERO,c=e.BASE;const d=BigInt(2**t-1),f=2**t,l=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let n=Number(s&d);s>>=l,n>a&&(n-=f,s+=_n);const o=t,h=t+Math.abs(n)-1,p=e%2!=0,y=n<0;0===n?c=c.add(r(p,i[o])):u=u.add(r(y,i[h]))}return{p:u,f:c}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}}(f,t.endo?Math.ceil(l/2):l);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:o}}function Tn(e){const t=function(e){const t=En(e);return en(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return cn(e,n)}function a(e){return ln(e,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:f}=Sn({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=Wr;return n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n){return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const e=qr(o);if(!(An<(a=e)&&a<r.ORDER))throw new Error("Point is not on curve");const t=d(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!==((i&On)===On)&&(i=r.neg(i)),{x:e,y:i}}var a}}),l=e=>Lr(Vr(e,t.nByteLength));function h(e){return e>n>>On}const p=(e,t,r)=>qr(e.slice(t,r));class y{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=Kr("compactSignature",e,2*r),new y(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=In.toSig(Kr("DER",e));return new y(t,r)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,c=w(Kr("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const d=2===s||3===s?n+t.n:n;if(d>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=1&s?"03":"02",h=u.fromHex(f+l(d)),p=a(d),y=o(-c*p),m=o(i*p),g=u.BASE.multiplyAndAddUnsafe(h,y,m);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Fr(this.toDERHex())}toDERHex(){return In.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Fr(this.toCompactHex())}toCompactHex(){return l(this.r)+l(this.s)}}const m={isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=gn(t.n);return function(e,t,r=!1){const n=e.length,i=mn(t),s=gn(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=cn(r?qr(e):Dr(e),t-rn)+rn;return r?Hr(o,i):Vr(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function g(e){const t=jr(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof u}const v=t.bits2int||function(e){const r=qr(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},w=t.bits2int_modN||function(e){return o(v(e))},b=Jr(t.nBitLength);function _(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(An<=e&&e<b))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Vr(e,t.nByteLength)}function E(e,n,i=x){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:d}=t;let{lowS:l,prehash:p,extraEntropy:m}=i;null==l&&(l=!0),e=Kr("msgHash",e),p&&(e=Kr("prehashed msgHash",s(e)));const g=w(e),b=c(n),E=[_(b),_(g)];if(null!=m&&!1!==m){const e=!0===m?d(r.BYTES):m;E.push(Kr("extraEntropy",e))}const k=Wr(...E),I=g;return{seed:k,k2sig:function(e){const t=v(e);if(!f(t))return;const r=a(t),n=u.BASE.multiply(t).toAffine(),i=o(n.x);if(i===An)return;const s=o(r*o(I+i*b));if(s===An)return;let c=(n.x===i?0:2)|Number(n.y&On),d=s;return l&&h(s)&&(d=function(e){return h(e)?o(-e):e}(s),c^=1),new y(i,d,c)}}}const x={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(g(e))throw new Error("first arg must be private key");if(!g(t))throw new Error("second arg must be public key");return u.fromHex(t).multiply(c(e)).toRawBytes(r)},sign:function(e,r,n=x){const{seed:i,k2sig:s}=E(e,r,n),o=t;return Xr(o.hash.outputLen,o.nByteLength,o.hmac)(i,s)},verify:function(e,r,n,i=k){const s=e;if(r=Kr("msgHash",r),n=Kr("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:d}=i;let f,l;try{if("string"==typeof s||jr(s))try{f=y.fromDER(s)}catch(e){if(!(e instanceof In.Err))throw e;f=y.fromCompact(s)}else{if("object"!=typeof s||"bigint"!=typeof s.r||"bigint"!=typeof s.s)throw new Error("PARSE");{const{r:e,s:t}=s;f=new y(e,t)}}l=u.fromHex(n)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&f.hasHighS())return!1;d&&(r=t.hash(r));const{r:h,s:p}=f,m=w(r),g=a(p),v=o(m*g),b=o(h*g),_=u.BASE.multiplyAndAddUnsafe(l,v,b)?.toAffine();return!!_&&o(_.x)===h},ProjectivePoint:u,Signature:y,utils:m}}function Nn(e){return{hash:e,hmac:(t,...r)=>wn(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];mr(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:Ir}}const Rn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Zn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Cn=BigInt(1),jn=BigInt(2),Un=(e,t)=>(e+t/jn)/t;function Pn(e){const t=Rn,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=e*e*e%t,d=c*c*e%t,f=fn(d,r,t)*d%t,l=fn(f,r,t)*d%t,h=fn(l,jn,t)*c%t,p=fn(h,i,t)*h%t,y=fn(p,s,t)*p%t,m=fn(y,a,t)*y%t,g=fn(m,u,t)*m%t,v=fn(g,a,t)*y%t,w=fn(v,r,t)*d%t,b=fn(w,o,t)*p%t,_=fn(b,n,t)*c%t,E=fn(_,jn,t);if(!Ln.eql(Ln.sqr(E),e))throw new Error("Cannot find square root");return E}const Ln=function(e,t,r=!1,n={}){if(e<=tn)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=yn(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=hn(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:Jr(i),ZERO:tn,ONE:rn,create:t=>cn(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return tn<=t&&t<e},is0:e=>e===tn,isOdd:e=>(e&rn)===rn,neg:t=>cn(-t,e),eql:(e,t)=>e===t,sqr:t=>cn(t*t,e),add:(t,r)=>cn(t+r,e),sub:(t,r)=>cn(t-r,e),mul:(t,r)=>cn(t*r,e),pow:(e,t)=>function(e,t,r){if(r<tn)throw new Error("Expected power > 0");if(r===tn)return e.ONE;if(r===rn)return t;let n=e.ONE,i=t;for(;r>tn;)r&rn&&(n=e.mul(n,i)),i=e.sqr(i),r>>=rn;return n}(a,e,t),div:(t,r)=>cn(t*ln(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ln(t,e),sqrt:n.sqrt||(e=>o(a,e)),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?Hr(e,s):Vr(e,s),fromBytes:e=>{if(e.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?Dr(e):qr(e)}});return Object.freeze(a)}(Rn,void 0,void 0,{sqrt:Pn}),$n=function(e,t){const r=t=>Tn({...e,...Nn(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:Ln,n:Zn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Zn,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Cn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Un(s*e,t),u=Un(-n*e,t);let c=cn(e-a*r-u*i,t),d=cn(-a*n-u*s,t);const f=c>o,l=d>o;if(f&&(c=t-c),l&&(d=t-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:c,k2neg:l,k2:d}}}},Rr);BigInt(0);$n.ProjectivePoint;r(287).hp;!function(){const e=[]}();Z(S(),/^(?:0x)?[0-9a-f]+$/iu),Z(S(),/^0x[0-9a-f]+$/iu),Z(S(),/^0x[0-9a-f]{40}$/u),Z(S(),/^0x[0-9a-fA-F]{40}$/u);function Mn(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}function zn(e,...t){if(!((r=e)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const Fn=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function qn(e){zn(e);let t="";for(let r=0;r<e.length;r++)t+=Fn[e[r]];return t}const Dn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Vn(e){return e>=Dn._0&&e<=Dn._9?e-Dn._0:e>=Dn._A&&e<=Dn._F?e-(Dn._A-10):e>=Dn._a&&e<=Dn._f?e-(Dn._a-10):void 0}function Hn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=Vn(e.charCodeAt(i)),s=Vn(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+i)}n[t]=16*r+s}return n}async function Kn(){const e=await async function(){return await snap.request({method:"snap_getEntropy",params:{version:1}})}();return Hn(Mn(e))}async function Wn(){const e=await Kn();return function(e){return`0x${qn(e)}`}($n.getPublicKey(e))}const Jn=pr.object({message:pr.string().startsWith("metamask:")});const Gn=async({request:e})=>{switch(e.method){case"getPublicKey":return Wn();case"signMessage":{const{params:t}=e;!function(e){try{Jn.parse(e)}catch{throw ae({message:"`signMessage`, must take a `message` parameter that must begin with `metamask:`"})}}(t);const{message:r}=t;return await async function(e){const t=await Kn(),r=Rr(e);return`0x${$n.sign(r,t).toCompactHex()}`}(r)}default:throw ue({data:{method:e.method}})}}})();var i=exports;for(var s in n)i[s]=n[s];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();'}],removable:!1}}}},{package:"@metamask/message-signing-snap",file:"node_modules/@metamask/message-signing-snap/dist/preinstalled-snap.json"}],[174,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[175,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach((e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())}));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[176,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:48,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,n,a,o,c,l,u;null===(t=e.NetworkController)||void 0===t||delete t.settings;const d=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==d.type||"string"==typeof d.chainId&&i.test(d.chainId))&&"localhost"!==d.type){if(null!==(n=e.NetworkController)&&void 0!==n&&n.provider){var h;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(h=e.NetworkController)||void 0===h||null===(h=h.provider)||void 0===h||delete h.rpcTarget}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(a=e.CachedBalancesController)||void 0===a||delete a.cachedBalances;const f=null===(o=e.TransactionController)||void 0===o?void 0:o.transactions;Array.isArray(f)&&f.forEach((e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&s.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))}));const p=(null===(c=e.AddressBookController)||void 0===c?void 0:c.addressBook)||{};Object.keys(p).forEach((e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach((e=>{e&&"object"==typeof e&&(e.chainId=t)}))}(p[e],t),p[t]?function(e,t,r){const n=e[t]||{},s={...e[r]};Object.keys(n).forEach((e=>{if(s[e]&&"object"==typeof s[e]){const t={};new Set([...Object.keys(s[e]),...Object.keys(n[e]||{})]).forEach((r=>{var i;t[r]=s[e][r]||(null===(i=n[e])||void 0===i?void 0:i[r])||""})),s[e]=t}else n[e]&&"object"==typeof n[e]&&(s[e]=n[e])})),e[r]=s}(p,e,t):p[t]=p[e],delete p[e]}})),null===(l=e.IncomingTransactionsController)||void 0===l||null===(l=l.incomingTxLastFetchedBlocksByNetwork)||void 0===l||delete l.localhost;const m=null===(u=e.PreferencesController)||void 0===u?void 0:u.accountTokens;m&&Object.keys(m).forEach((e=>{var t,r;const n=(null===(t=m[e])||void 0===t?void 0:t.localhost)||[];if(n.length>0){const t=m[e].rpc||[];t.length>0?m[e].rpc=function(e,t){const r=i(e),n=i(t),s=[];return new Set([...Object.keys(r),...Object.keys(n)]).forEach((e=>{s.push({...r[e],...n[e]})})),s;function i(e){return e.reduce(((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e)),{})}}(n,t):m[e].rpc=n}null===(r=m[e])||void 0===r||delete r.localhost}));return e}(r),t}};const s=/^0x[0-9a-f]+$/iu,i=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[177,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:49,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:n}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),n!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=n,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[178,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];r.default={version:50,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=50,s.forEach((e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)})),t}}}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[179,{"../../../shared/constants/network":5047,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:51,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:n,type:i}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},a=null===(r=s.BUILT_IN_NETWORKS[i])||void 0===r?void 0:r.chainId;a&&n!==a&&(e.NetworkController.provider.chainId=a);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[18,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.USER_STORAGE_VERSION_KEY=r.USER_STORAGE_VERSION=void 0;r.USER_STORAGE_VERSION="1",r.USER_STORAGE_VERSION_KEY="v"}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/constants/constants.ts"}],[180,{"../../../shared/constants/network":5047,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:52,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:n}=e.PreferencesController,i={},a={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){i[e]={},t[e][s.NETWORK_TYPES.RPC]&&n.forEach((r=>{i[e][r.chainId]=t[e][s.NETWORK_TYPES.RPC]}));for(const r of Object.keys(t[e]))switch(r){case s.NETWORK_TYPES.MAINNET:i[e][s.CHAIN_IDS.MAINNET]=t[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":i[e]["0x3"]=t[e].ropsten;break;case"rinkeby":i[e]["0x4"]=t[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:i[e][s.CHAIN_IDS.GOERLI]=t[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":i[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=i}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){a[e]={},r[e][s.NETWORK_TYPES.RPC]&&n.forEach((t=>{a[e][t.chainId]=r[e][s.NETWORK_TYPES.RPC]}));for(const t of Object.keys(r[e]))switch(t){case s.NETWORK_TYPES.MAINNET:a[e][s.CHAIN_IDS.MAINNET]=r[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":a[e]["0x3"]=r[e].ropsten;break;case"rinkeby":a[e]["0x4"]=r[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:a[e][s.CHAIN_IDS.GOERLI]=r[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":a[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=a}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[181,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:53,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const n=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,i=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(n)&&n.forEach((e=>{e&&(e.type!==s.TransactionType.retry&&e.type!==s.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)}));if(i){Object.entries(i).forEach((([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:s.TransactionType.incoming})}))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[182,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");function s(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}r.default={version:54,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=t.PreferencesController.tokens||[],n=r.filter((({decimals:e})=>s(e)));for(const e of n)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=n;const{accountTokens:i}=t.PreferencesController;if(i&&"object"==typeof i)for(const e of Object.keys(i)){const t=i[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter((({decimals:e})=>s(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=i,t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[183,{"../../../shared/constants/network":5047,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:55,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,n.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,((e,t)=>{var r;return(null===(r=s.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??i})),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId[i],delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};const i="UNKNOWN";s.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},s.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},s.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}],[184,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:56,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=56;const{PreferencesController:r}=t.data;return Array.isArray(null==r?void 0:r.tokens)&&(r.tokens=r.tokens.filter((({address:e})=>e))),null!=r&&r.accountTokens&&"object"==typeof r.accountTokens&&Object.keys(r.accountTokens).forEach((e=>{Object.keys(r.accountTokens[e]).forEach((t=>{r.accountTokens[e][t]=r.accountTokens[e][t].filter((({address:e})=>e))}))})),null!=r&&r.assetImages&&"undefined"in r.assetImages&&delete r.assetImages.undefined,t}}}}},{package:"$root$",file:"app/scripts/migrations/056.js"}],[185,{"../../../shared/modules/random-id":5095,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("../../../shared/modules/random-id"))&&n.__esModule?n:{default:n};r.default={version:57,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=57;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.TransactionController)&&void 0!==t&&t.transactions&&Array.isArray(e.TransactionController.transactions)&&!e.TransactionController.transactions.some((e=>"object"!=typeof e||void 0===e.txParams))&&(e.TransactionController.transactions=(0,s.keyBy)(e.TransactionController.transactions,(e=>(void 0!==e.id&&null!==e.id||(e.id=(0,i.default)()),e.id))));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/057.js"}],[1859,{"@metamask/base-controller":1241,"@metamask/utils":2787,nanoid:1861},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("@metamask/utils"),i=e("nanoid"),a="NotificationController",o={notifications:{persist:!0,anonymous:!1}},c={notifications:{}},l=class extends n.BaseController{constructor({messenger:e,state:t}){super({name:a,metadata:o,messenger:e,state:{...c,...t}}),this.messagingSystem.registerActionHandler(`${a}:show`,((e,t)=>this.show(e,t))),this.messagingSystem.registerActionHandler(`${a}:dismiss`,(e=>this.dismiss(e))),this.messagingSystem.registerActionHandler(`${a}:markRead`,(e=>this.markRead(e))),this.messagingSystem.registerActionHandler(`${a}:clear`,(()=>this.clear()))}show(e,t){const r=i.nanoid.call(void 0),n={id:r,origin:e,createdDate:Date.now(),readDate:null,message:t};this.update((e=>{e.notifications[r]=n}))}dismiss(e){this.update((t=>{for(const r of e)s.hasProperty.call(void 0,t.notifications,r)&&delete t.notifications[r]}))}markRead(e){this.update((t=>{for(const r of e)s.hasProperty.call(void 0,t.notifications,r)&&(t.notifications[r].readDate=Date.now())}))}clear(){this.update((()=>({...c})))}};r.NotificationController=l}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/chunk-DR374FE2.js"}],[186,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:58,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[1860,{"./chunk-DR374FE2.js":1859},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-DR374FE2.js");r.NotificationController=n.NotificationController}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/index.js"}],[1861,{"./url-alphabet/index.cjs":1862},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let a="";for(;;){let t=r(s),o=s;for(;o--;)if(a+=e[t[o]&n]||"",a.length===i)return a}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,s),customRandom:i,urlAlphabet:n,random:s}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/index.browser.cjs"}],[1862,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[1867,{"./ObservableStore":1869},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1868,{"./ObservableStore":1869},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/MergedStore.js"}],[1869,{"@metamask/safe-event-emitter":2028},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),e===undefined?this._state={}:this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[187,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:59,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=59;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r)){const t=(0,n.groupBy)(Object.values(r),(e=>{var t;return`${null===(t=e.txParams)||void 0===t?void 0:t.nonce}-${e.chainId??e.metamaskNetworkId}`})),i=(0,n.pickBy)(t,(e=>e.some((e=>e.type!==s.TransactionType.cancel&&e.type!==s.TransactionType.retry))));e.TransactionController.transactions=(0,n.keyBy)((0,n.concat)(...Object.values(i)),(e=>e.id))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/059.js"}],[1870,{"readable-stream":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("readable-stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/asStream.js"}],[1871,{"./ComposedStore":1867,"./MergedStore":1868,"./ObservableStore":1869,"./asStream":1870,"./transform":1872},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/index.js"}],[1872,{"readable-stream":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("readable-stream");r.storeTransformStream=function(e){return new n.Transform({objectMode:!0,transform:(t,r,n)=>{try{const r=e(t);return n(undefined,r),undefined}catch(e){return n(e),undefined}}})}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/transform.js"}],[188,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s="2020-08-31";r.default={version:60,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=60;const r=function(e){var t;const r=null==e||null===(t=e.NotificationController)||void 0===t?void 0:t.notifications;var i;(0,n.isPlainObject)(r)&&(null===(i=r[2])||void 0===i?void 0:i.date)===s&&delete e.NotificationController.notifications[2];return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/060.js"}],[189,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:61,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[190,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:62,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[191,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:63,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,n,s,i,a,o,c;const l=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,u=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,d={};l&&Object.keys(l).forEach((e=>{Object.keys(l[e]).forEach((t=>{const r=l[e][t];d[t]===undefined?d[t]={[e]:r}:d[t]={...d[t],[e]:r}}))}));const h={};u&&Object.keys(u).forEach((e=>{Object.keys(u[e]).forEach((t=>{const r=u[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=d,e.TokensController.allIgnoredTokens=h):e.TokensController={allTokens:d,allIgnoredTokens:h};return null==e||null===(n=e.PreferencesController)||void 0===n||delete n.accountHiddenTokens,null==e||null===(s=e.PreferencesController)||void 0===s||delete s.accountTokens,null==e||null===(i=e.PreferencesController)||void 0===i||delete i.assetImages,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.hiddenTokens,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.tokens,null==e||null===(c=e.PreferencesController)||void 0===c||delete c.suggestedTokens,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[192,{"@metamask/transaction-controller":2685,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");const i="sentEther";r.default={version:64,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r))for(const e of Object.values(r))e.type===i&&(e.type=s.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===i&&(e.type=s.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[1921,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},s=Object.freeze({restrictReturnedAccounts:"restrictReturnedAccounts"}),i=(e=>(e.restricted="restricted",e.internal="internal",e))(i||{});r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r),r.WALLET_PREFIX="wallet_",r.CAVEAT_TYPES=s,r.LOG_IGNORE_METHODS=["wallet_registerOnboarding","wallet_watchAsset"],r.LOG_METHOD_TYPES=i,r.LOG_LIMIT=100}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/chunk-7KORYHSJ.js"}],[1922,{"./chunk-7KORYHSJ.js":1921,"@metamask/base-controller":1241,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m,g,v,y=e("./chunk-7KORYHSJ.js"),b=e("@metamask/base-controller"),w=e("@metamask/utils"),_={permissionHistory:{},permissionActivityLog:[]},k=class extends b.BaseController{constructor({messenger:e,restrictedMethods:t,state:r}){super({messenger:e,name:"PermissionLogController",metadata:{permissionHistory:{persist:!0,anonymous:!1},permissionActivityLog:{persist:!0,anonymous:!1}},state:{..._,...r}}),y.__privateAdd.call(void 0,this,s),y.__privateAdd.call(void 0,this,a),y.__privateAdd.call(void 0,this,c),y.__privateAdd.call(void 0,this,u),y.__privateAdd.call(void 0,this,h),y.__privateAdd.call(void 0,this,p),y.__privateAdd.call(void 0,this,g),y.__privateAdd.call(void 0,this,n,void 0),y.__privateSet.call(void 0,this,n,t)}updateAccountsHistory(e,t){if(0===t.length)return;const r={eth_accounts:{accounts:y.__privateMethod.call(void 0,this,s,i).call(this,t,Date.now())}};y.__privateMethod.call(void 0,this,h,f).call(this,e,r)}createMiddleware(){return(e,t,r)=>{const{origin:s,method:i}=e,h=i.startsWith(y.WALLET_PREFIX),f="eth_requestAccounts"===i;if(!y.LOG_IGNORE_METHODS.includes(i)&&(h||y.__privateGet.call(void 0,this,n).has(i))||f){const n=y.__privateMethod.call(void 0,this,a,o).call(this,e,h),i=y.__privateMethod.call(void 0,this,p,m).call(this,e);r((e=>{const r=Date.now();y.__privateMethod.call(void 0,this,c,l).call(this,n,t,r),i&&!t.error&&t.result&&s&&y.__privateMethod.call(void 0,this,u,d).call(this,i,s,t.result,r,f),e()}))}else r()}}};n=new WeakMap,s=new WeakSet,i=function(e,t){return e.reduce(((e,r)=>({...e,[r]:t})),{})},a=new WeakSet,o=function(e,t){const r={id:e.id,method:e.method,methodType:t?"internal":"restricted",origin:e.origin,requestTime:Date.now(),responseTime:null,success:null};return this.update((e=>{const t=[...e.permissionActivityLog,r];e.permissionActivityLog=t.length>y.LOG_LIMIT?t.slice(1):t})),r},c=new WeakSet,l=function(e,t,r){e&&t&&this.update((n=>{n.permissionActivityLog=n.permissionActivityLog.map((n=>n.id===e.id?{...n,success:w.hasProperty.call(void 0,t,"result"),responseTime:r}:n))}))},u=new WeakSet,d=function(e,t,r,n,a){let o;if(a){const e=r;o={eth_accounts:{accounts:y.__privateMethod.call(void 0,this,s,i).call(this,e,n),lastApproved:n}}}else{o=r.reduce(((t,r)=>{const a=r.parentCapability;if(!e.includes(a))return t;if("eth_accounts"===a){const e=y.__privateMethod.call(void 0,this,g,v).call(this,r);return{...t,[a]:{lastApproved:n,accounts:y.__privateMethod.call(void 0,this,s,i).call(this,e,n)}}}return{...t,[a]:{lastApproved:n}}}),{})}Object.keys(o).length>0&&y.__privateMethod.call(void 0,this,h,f).call(this,t,o)},h=new WeakSet,f=function(e,t){const{permissionHistory:r}=this.state,n=r[e]??{},s={...n,...t},i=n.eth_accounts,a=t.eth_accounts;if(i&&a){const e=a.lastApproved??i.lastApproved;s.eth_accounts={lastApproved:e,accounts:{...i.accounts,...a.accounts}}}this.update((t=>{t.permissionHistory={...r,[e]:s}}))},p=new WeakSet,m=function(e){const{method:t,params:r}=e;return"eth_requestAccounts"===t?["eth_accounts"]:t===`${y.WALLET_PREFIX}requestPermissions`&&r&&Array.isArray(r)&&r[0]&&"object"==typeof r[0]&&!Array.isArray(r[0])?Object.keys(r[0]):null},g=new WeakSet,v=function(e){if("eth_accounts"!==e.parentCapability||!e.caveats)return[];const t=new Set;for(const r of e.caveats)if(r.type===y.CAVEAT_TYPES.restrictReturnedAccounts&&Array.isArray(r.value))for(const e of r.value)t.add(e);return[...t]},r.PermissionLogController=k}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/chunk-WGNFIOME.js"}],[1923,{"./chunk-7KORYHSJ.js":1921,"./chunk-WGNFIOME.js":1922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-WGNFIOME.js");e("./chunk-7KORYHSJ.js"),r.PermissionLogController=n.PermissionLogController}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/index.js"}],[1924,{"@metamask/base-controller":1241,"@metamask/controller-utils":1250,"eth-phishing-detect/src/detector":3797,"punycode/":4587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m,g,v=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},y=(e,t,r)=>(v(e,t,"read from private field"),r?r.call(e):t.get(e)),b=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},w=(e,t,r,n)=>(v(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),_=(e,t,r)=>(v(e,t,"access private method"),r),k=e("@metamask/base-controller"),T=e("@metamask/controller-utils"),S=e("eth-phishing-detect/src/detector"),E=(n=S)&&n.__esModule?n:{default:n},P=e("punycode/"),M="https://phishing-detection.api.cx.metamask.io",I="/v1/stalelist",C="/v1/diffsSince",j=2592e3,A=`${M}${I}`,x=`${M}${C}`,O=(e=>(e.PhishfortHotlist="phishfort_hotlist",e.EthPhishingDetectConfig="eth_phishing_detect_config",e))(O||{}),N=(e=>(e.MetaMask="MetaMask",e.Phishfort="Phishfort",e))(N||{}),B={Phishfort:"phishfort_hotlist",MetaMask:"eth_phishing_detect_config"},R={eth_phishing_detect_config:"MetaMask",phishfort_hotlist:"Phishfort"},L="PhishingController",D={phishingLists:{persist:!0,anonymous:!1},whitelist:{persist:!0,anonymous:!1},hotlistLastFetched:{persist:!0,anonymous:!1},stalelistLastFetched:{persist:!0,anonymous:!1}},U=class extends k.BaseController{constructor({stalelistRefreshInterval:e=2592e3,hotlistRefreshInterval:t=300,messenger:r,state:n={}}){super({name:L,metadata:D,messenger:r,state:{phishingLists:[],whitelist:[],hotlistLastFetched:0,stalelistLastFetched:0,...n}}),b(this,l),b(this,d),b(this,f),b(this,m),b(this,s,void 0),b(this,i,void 0),b(this,a,void 0),b(this,o,void 0),b(this,c,void 0),w(this,i,e),w(this,a,t),_(this,l,u).call(this),this.updatePhishingDetector()}updatePhishingDetector(){w(this,s,new(0,E.default)(this.state.phishingLists))}setStalelistRefreshInterval(e){w(this,i,e)}setHotlistRefreshInterval(e){w(this,a,e)}isStalelistOutOfDate(){return $()-this.state.stalelistLastFetched>=y(this,i)}isHotlistOutOfDate(){return $()-this.state.hotlistLastFetched>=y(this,a)}async maybeUpdateState(){if(this.isStalelistOutOfDate())return void await this.updateStalelist();this.isHotlistOutOfDate()&&await this.updateHotlist()}test(e){const t=P.toASCII.call(void 0,e);return this.state.whitelist.includes(t)?{result:!1,type:"all"}:y(this,s).check(t)}bypass(e){const t=P.toASCII.call(void 0,e),{whitelist:r}=this.state;r.includes(t)||this.update((e=>{e.whitelist.push(t)}))}async updateHotlist(){if(y(this,o))await y(this,o);else try{w(this,o,_(this,f,p).call(this)),await y(this,o)}finally{w(this,o,void 0)}}async updateStalelist(){if(y(this,c))await y(this,c);else try{w(this,c,_(this,d,h).call(this)),await y(this,c)}finally{w(this,c,void 0)}}};s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakSet,u=function(){this.messagingSystem.registerActionHandler(`${L}:maybeUpdateState`,this.maybeUpdateState.bind(this)),this.messagingSystem.registerActionHandler(`${L}:testOrigin`,this.test.bind(this))},d=new WeakSet,h=async function(){let e,t;try{e=await _(this,m,g).call(this,A).then((e=>e)),e?.data&&e.data.lastUpdated>0&&(t=await _(this,m,g).call(this,`${x}/${e.data.lastUpdated}`))}finally{const e=$();this.update((t=>{t.stalelistLastFetched=e,t.hotlistLastFetched=e}))}if(!e||!t)return;const{phishfort_hotlist:r,eth_phishing_detect_config:n,...s}=e.data,i={...r,...s,fuzzylist:[],allowlist:[],name:R.phishfort_hotlist},a={...n,...s,name:R.eth_phishing_detect_config},o=F(i,t.data,"phishfort_hotlist"),c=F(a,t.data,"eth_phishing_detect_config");this.update((e=>{e.phishingLists=[c,o]})),this.updatePhishingDetector()},f=new WeakSet,p=async function(){const e=Math.max(...this.state.phishingLists.map((({lastUpdated:e})=>e)));let t;try{t=await _(this,m,g).call(this,`${x}/${e}`)}finally{this.update((e=>{e.hotlistLastFetched=$()}))}if(!t?.data)return;const r=t.data,n=this.state.phishingLists.map((e=>F(e,r,B[e.name])));this.update((e=>{e.phishingLists=n})),this.updatePhishingDetector()},m=new WeakSet,g=async function(e){const t=await T.safelyExecute.call(void 0,(()=>fetch(e,{cache:"no-cache"})),!0);return 200===t?.status?await t.json():null};var H=U,$=()=>Math.round(Date.now()/1e3),G=e=>{const t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]},F=(e,t,r)=>{const n=t.filter((({timestamp:t,targetList:n})=>t>e.lastUpdated&&G(n)[0]===r));let s=e.lastUpdated;const i={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist)};for(const{isRemoval:e,targetList:t,url:r,timestamp:a}of n){const n=G(t)[1];a>s&&(s=a),e?i[n].delete(r):i[n].add(r)}return{allowlist:Array.from(i.allowlist),blocklist:Array.from(i.blocklist),fuzzylist:Array.from(i.fuzzylist),version:e.version,name:R[r],tolerance:e.tolerance,lastUpdated:s}};r.fetchTimeNow=$,r.applyDiffs=F,r.PHISHING_CONFIG_BASE_URL=M,r.METAMASK_STALELIST_FILE=I,r.METAMASK_HOTLIST_DIFF_FILE=C,r.HOTLIST_REFRESH_INTERVAL=300,r.STALELIST_REFRESH_INTERVAL=j,r.METAMASK_STALELIST_URL=A,r.METAMASK_HOTLIST_DIFF_URL=x,r.ListKeys=O,r.ListNames=N,r.phishingListKeyNameMap=R,r.PhishingController=U,r.PhishingController_default=H}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/chunk-HXFUSDYH.js"}],[1925,{"./chunk-HXFUSDYH.js":1924},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-HXFUSDYH.js");r.HOTLIST_REFRESH_INTERVAL=n.HOTLIST_REFRESH_INTERVAL,r.ListKeys=n.ListKeys,r.ListNames=n.ListNames,r.METAMASK_HOTLIST_DIFF_FILE=n.METAMASK_HOTLIST_DIFF_FILE,r.METAMASK_HOTLIST_DIFF_URL=n.METAMASK_HOTLIST_DIFF_URL,r.METAMASK_STALELIST_FILE=n.METAMASK_STALELIST_FILE,r.METAMASK_STALELIST_URL=n.METAMASK_STALELIST_URL,r.PHISHING_CONFIG_BASE_URL=n.PHISHING_CONFIG_BASE_URL,r.PhishingController=n.PhishingController,r.STALELIST_REFRESH_INTERVAL=n.STALELIST_REFRESH_INTERVAL,r.phishingListKeyNameMap=n.phishingListKeyNameMap}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/index.js"}],[193,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:65,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[194,{"../../../shared/constants/hardware-wallets":5039,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/hardware-wallets");r.default={version:66,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?s.LedgerTransportTypes.webhid:s.LedgerTransportTypes.u2f,n=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),i={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:n?s.LedgerTransportTypes.live:r}};return delete i.PreferencesController.useLedgerLive,i}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[1943,{"./ppom-controller":1944},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;var n=e("./ppom-controller");Object.defineProperty(r,"NETWORK_CACHE_DURATION",{enumerable:!0,get:function(){return n.NETWORK_CACHE_DURATION}}),Object.defineProperty(r,"PPOMController",{enumerable:!0,get:function(){return n.PPOMController}})}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/index.js"}],[1944,{"./ppom-storage":1945,"./util":1946,"@metamask/base-controller":1950,"@metamask/controller-utils":1952,"await-semaphore":3470},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d,h,f,p,m,g,v,y,b,w,_,k,T,S,E,P,M,I,C,j,A,x,O,N,B=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},R=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;const L=e("@metamask/base-controller"),D=e("@metamask/controller-utils"),U=e("await-semaphore"),H=e("./ppom-storage"),$=e("./util");r.NETWORK_CACHE_DURATION=6048e5;const G=["eth_call","eth_blockNumber","eth_createAccessList","eth_getLogs","eth_getFilterLogs","eth_getTransactionByHash","eth_chainId","eth_getBlockByHash","eth_getBlockByNumber","eth_getCode","eth_getStorageAt","eth_getBalance","eth_getTransactionCount","trace_call","trace_callMany","debug_traceCall","trace_filter"],F={versionInfo:{persist:!0,anonymous:!1},storageMetadata:{persist:!0,anonymous:!1}},V="PPOMController",K={headers:{"Content-Type":"application/json"}};class W extends L.BaseControllerV2{constructor({chainId:e,messenger:t,provider:r,storageBackend:y,securityAlertsEnabled:b,onPreferencesChange:w,ppomProvider:S,cdnBaseUrl:E,providerRequestLimit:P,state:M,blockaidPublicKey:I,nativeCrypto:C}){super({name:V,metadata:F,messenger:t,state:{versionInfo:M?.versionInfo??[],storageMetadata:M?.storageMetadata??[]}}),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,0),h.set(this,void 0),f.set(this,void 0),p.set(this,{}),m.set(this,void 0),g.set(this,!1),v.set(this,undefined),B(this,h,(0,$.addHexPrefix)(e),"f"),B(this,i,r,"f"),B(this,c,S,"f"),B(this,a,new H.PPOMStorage({storageBackend:y,readMetadata:()=>[...this.state.storageMetadata],writeMetadata:e=>{this.update((t=>{t.storageMetadata=e}))}}),"f"),B(this,o,new U.Mutex,"f"),B(this,l,E,"f"),B(this,u,P??300,"f"),B(this,f,b,"f"),B(this,m,I,"f"),B(this,v,C,"f"),w(R(this,n,"m",_).bind(this)),R(this,n,"m",k).call(this),R(this,n,"m",T).call(this)}async usePPOM(e){if(!R(this,f,"f"))throw Error("User has securityAlertsEnabled set to false");if(!(0,$.blockaidValidationSupportedForNetwork)(R(this,h,"f")))throw Error(`Blockaid validation not available on network with chainId: ${R(this,h,"f")}`);return await R(this,o,"f").use((async()=>{await R(this,n,"m",E).call(this),B(this,d,0,"f"),B(this,p,{},"f");return{...await e(R(this,s,"f")),providerRequestsCount:{...R(this,p,"f")}}}))}}r.PPOMController=W,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,n=new WeakSet,y=async function(){if(R(this,f,"f")&&!R(this,g,"f")){const{ppomInit:e}=R(this,c,"f");await e("./ppom_bg.wasm"),B(this,g,!0,"f")}},b=function(){R(this,n,"m",S).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)}));const{storageMetadata:e}=this.state;this.update((e=>{e.versionInfo=[],e.storageMetadata=[]})),R(this,a,"f").deleteAllFiles(e).catch((e=>{console.error(`Error in deleting files: ${e.message}`)}))},w=function(e){const t=(0,$.addHexPrefix)(e.providerConfig.chainId);t!==R(this,h,"f")&&(B(this,h,t,"f"),R(this,n,"m",S).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)})))},_=function(e){const t=e.securityAlertsEnabled;t!==R(this,f,"f")&&(B(this,f,t,"f"),t||R(this,n,"m",b).call(this))},k=function(){this.messagingSystem.registerActionHandler(`${V}:usePPOM`,this.usePPOM.bind(this))},T=function(){const e=R(this,n,"m",w).bind(this);this.messagingSystem.subscribe("NetworkController:stateChange",e)},S=async function(){await R(this,o,"f").use((async()=>{R(this,s,"f")&&(R(this,s,"f").free(),B(this,s,undefined,"f"))}))},E=async function(){const e=await R(this,n,"m",P).call(this);(R(this,s,"f")===undefined||e)&&(B(this,s,await R(this,n,"m",N).call(this),"f"),R(this,a,"f").syncMetadata(this.state.versionInfo).catch((e=>{console.error(`Error while trying to sync metadata: ${e.message}`)})))},P=async function(){const e=await R(this,n,"m",A).call(this);return!!e&&(this.update((t=>{t.versionInfo=e})),!0)},M=function(e,t){return e.find((e=>e.name===t.name&&e.chainId===t.chainId&&e.version===t.version&&e.checksum===t.checksum))},I=async function(e){const t=await Promise.all(e.map((async e=>{let t;try{t=await R(this,n,"m",C).call(this,e)}catch(t){console.error(`Error in getting file ${e.filePath}: ${t.message}`)}return t?[e.name,new Uint8Array(t)]:undefined})));return t?.filter((e=>e?.[1]!==undefined))},C=async function(e){const{storageMetadata:t}=this.state;if(R(this,n,"m",M).call(this,t,e))try{return await R(this,a,"f").readFile(e.name,e.chainId)}catch(e){console.error(`Error in reading file: ${e.message}`)}(0,$.checkFilePath)(e.filePath);const r=(0,$.constructURLHref)(R(this,l,"f"),e.filePath),s=await R(this,n,"m",x).call(this,r);return await(0,$.validateSignature)(s,e.hashSignature,R(this,m,"f"),e.filePath,R(this,v,"f")),await R(this,a,"f").writeFile({data:s,...e}).catch((e=>{console.error(`Error in writing file: ${e.message}`)})),s},j=async function(e,t={},r="GET"){const n=await(0,D.safelyExecute)((async()=>(0,D.timeoutFetch)(e,{method:r,cache:"no-cache",redirect:"error",...t},1e4)),!0),s=304===n?.status;if(!n?.status||n?.status<200||n?.status>399)throw new Error(`Failed to fetch file with url: ${e}`);return{cached:s,response:n}},A=async function(){const e=(0,$.constructURLHref)(R(this,l,"f"),"ppom_version.json"),{cached:t,response:r}=await R(this,n,"m",j).call(this,e,{headers:K});return t&&this.state.versionInfo?.length?undefined:r.json()},x=async function(e){const{response:t}=await R(this,n,"m",j).call(this,e);return await t.arrayBuffer()},O=async function(e,t){return new Promise((r=>{R(this,d,"f")>R(this,u,"f")?r($.PROVIDER_ERRORS.limitExceeded()):(B(this,d,R(this,d,"f")+1,"f"),G.includes(e)?(R(this,p,"f")[e]=R(this,p,"f")[e]?Number(R(this,p,"f")[e])+1:1,R(this,i,"f").sendAsync((0,$.createPayload)(e,t),((e,t)=>{r(e?{jsonrpc:"2.0",id:(0,$.IdGenerator)(),error:e}:t)}))):r($.PROVIDER_ERRORS.methodNotSupported()))}))},N=async function(){await R(this,n,"m",y).call(this);const e=this.state.versionInfo.filter((({chainId:e})=>e===R(this,h,"f")));if(e?.length===undefined||0===e?.length)throw new Error(`Aborting initialising PPOM as no files are found for the network with chainId: ${R(this,h,"f")}`);const t=await R(this,n,"m",I).call(this,e);if(t?.length!==e?.length)throw new Error(`Aborting initialising PPOM as not all files could not be downloaded for the network with chainId: ${R(this,h,"f")}`);R(this,s,"f")&&R(this,s,"f").free();const{PPOM:r}=R(this,c,"f");return r.new(R(this,n,"m",O).bind(this),t)}}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-controller.js"}],[1945,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMStorage=void 0;r.PPOMStorage=class{constructor({storageBackend:e,readMetadata:t,writeMetadata:r}){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),a(this,n,e,"f"),a(this,s,t,"f"),a(this,i,r,"f")}async syncMetadata(e){const t=o(this,s,"f").call(this),r=[];for(const n of t){try{await this.readFile(n.name,n.chainId)}catch(e){console.error("Error: ",e);continue}e.find((e=>e.name===n.name&&e.chainId===n.chainId&&e.version===n.version&&e.checksum===n.checksum))&&r.push(n)}const a=await o(this,n,"f").dir();for(const{name:e,chainId:t}of a)r.find((r=>r.name===e&&r.chainId===t))||await o(this,n,"f").delete({name:e,chainId:t});return o(this,i,"f").call(this,r),r}async deleteAllFiles(e){for(const t of e){const{name:e,chainId:r}=t;try{await o(this,n,"f").delete({name:e,chainId:r})}catch(t){console.error(`Error in deleting file: ${e}, ${r}`,t)}}}async readFile(e,t){const r=o(this,s,"f").call(this).find((r=>r.name===e&&r.chainId===t));if(!r)throw new Error(`File metadata (${e}, ${t}) not found`);const i=await o(this,n,"f").read({name:e,chainId:t},r.checksum);if(!i)throw new Error(`Storage File (${e}, ${t}) not found`);return i}async writeFile({data:e,name:t,chainId:r,version:a,checksum:c}){await o(this,n,"f").write({name:t,chainId:r},e,c);const l=o(this,s,"f").call(this),u=l.find((e=>e.name===t&&e.chainId===r));u?(u.version=a,u.checksum=c):l.push({name:t,chainId:r,version:a,checksum:c}),o(this,i,"f").call(this,l)}},n=new WeakMap,s=new WeakMap,i=new WeakMap}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-storage.js"}],[1946,{buffer:3576,"crypto-js":3686,elliptic:3741,"json-rpc-random-id":4232},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkFilePath=r.addHexPrefix=r.constructURLHref=r.validateSignature=r.PROVIDER_ERRORS=r.createPayload=r.IdGenerator=r.blockaidValidationSupportedForNetwork=r.SUPPORTED_NETWORK_CHAINIDS=void 0;const o=i(e("crypto-js")),c=a(e("elliptic")),l=a(e("json-rpc-random-id")),u=c.default.eddsa;r.SUPPORTED_NETWORK_CHAINIDS={MAINNET:"0x1",BSC:"0x38",OPTIMISM:"0xa",POLYGON:"0x89",AVALANCHE:"0xa86a",ARBITRUM:"0xa4b1",LINEA_MAINNET:"0xe708",BASE:"0x2105",SEPOLIA:"0xaa36a7",OPBNB:"0xcc",ZKSYNC:"0x144",SCROLL:"0x82750",BERACHAIN:"0x138d5",METACHAIN_ONE:"0x1b6e6"};r.blockaidValidationSupportedForNetwork=e=>Object.values(r.SUPPORTED_NETWORK_CHAINIDS).some((t=>t===e)),r.IdGenerator=(0,l.default)();r.createPayload=(e,t)=>({id:(0,r.IdGenerator)(),jsonrpc:"2.0",method:e,params:t??[]}),r.PROVIDER_ERRORS={limitExceeded:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32005,message:"Limit exceeded"}}),methodNotSupported:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32601,message:"Method not supported"}})};r.validateSignature=async(e,r,n,s,i,a)=>{const c=await(async(e,t,r=!0)=>{if(t)return t.createHash("sha256").update(e).digest("hex");if("crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest&&r){const t=await globalThis.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return(0,o.SHA256)(o.default.lib.WordArray.create(e)).toString()})(e,i,a);if(!new u("ed25519").keyFromPublic(n).verify(t.from(c),r))throw Error(`Signature verification failed for file path: ${s}`)};r.constructURLHref=(e,t)=>new URL(`https://${e}/${t}`.replace(/https:\/\/https:\/\//gu,"https://").replace(/\/\//gu,"/")).href;r.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):`0x${parseInt(e,10).toString(16)}`;r.checkFilePath=e=>{if(!e.match(/^[\w./]+$/u))throw new Error(`Invalid file path for data file: ${e}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/util.js"}],[1947,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1948,{immer:4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${s}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1949,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[195,{"../../../shared/constants/network":5047,"bignumber.js":3481,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/network");const o=e=>new i.default(e||"0x0",16).gt(0);r.default={version:67,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,n;const s=(null==e?void 0:e.PreferencesController)||{},i=s.preferences||{};if(i.showTestNetworks)return e;const c=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},l=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},u=(null===(n=e.CachedBalancesController)||void 0===n?void 0:n.cachedBalances)||{},d=a.TEST_CHAINS.includes(null==l?void 0:l.chainId),h=Object.values(c).some((({chainId:e})=>a.TEST_CHAINS.includes(e))),f=a.TEST_CHAINS.some((e=>Object.values(u[e]||{}).some(o))),p=d||h||f,m={...e,PreferencesController:{...s,preferences:{...i,showTestNetworks:p}}};return m}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[1950,{"./BaseController":1947,"./BaseControllerV2":1948,"./ControllerMessenger":1949},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var a=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return a.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return a.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return a.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/index.js"}],[1951,{"./types":1955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/constants.js"}],[1952,{"./constants":1951,"./siwe":1954,"./types":1955,"./util":1956},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./constants"),r),s(e("./util"),r),s(e("./types"),r),s(e("./siwe"),r)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/index.js"}],[1953,{"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/logger.js"}],[1954,{"./logger":1953,"@metamask/utils":2787,"@spruceid/siwe-parser":3058,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),s=e("@spruceid/siwe-parser"),i=e("./logger"),a=(0,i.createModuleLogger)(i.projectLogger,"detect-siwe");function o(e){try{const s="string"!=typeof(r=e)?r:(0,n.remove0x)(r),i=t.from(s,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return a(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:s}=e;if(!n||!(null===(t=null==s?void 0:s.parsedMessage)||void 0===t?void 0:t.domain))return!1;const i=new URL(n),a=(0,r.parseDomainParts)(s.parsedMessage.domain,i.protocol);return 0===a.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==a.port&&a.port!==i.port?""===i.port&&a.port===c[i.protocol]:""===a.username||a.username===i.username)}catch(e){return a(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new s.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1955,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/types.js"}],[1956,{"./constants":1951,"@ethereumjs/util":459,"@metamask/ethjs-unit":1472,"@metamask/utils":2787,"bn.js":3528,buffer:3576,"eth-ens-namehash":3768,"fast-deep-equal":3902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const i=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=s(e("bn.js")),l=s(e("eth-ens-namehash")),u=s(e("fast-deep-equal")),d=e("./constants"),h=new Error("timeout");function f(e){return e?new c.default((0,o.remove0x)(e),16):new c.default(0)}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield p(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=d.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.default(t),s=new c.default(r);return e.mul(n).div(s)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,a.toWei)(r,"gwei");if(n.length<=9)return(0,a.toWei)(`${r}.${n}`,"gwei");const s=n.slice(9)[0];n=n.slice(0,9);let i=(0,a.toWei)(`${r}.${n}`,"gwei");return Number(s)>=5&&(i=i.add(new c.default(1))),i},r.weiHexToGweiDec=function(e){const t=new c.default((0,o.remove0x)(e),16);return(0,a.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new c.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.default.isBN(e)?e.toString(16):new c.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,i.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,i.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=m,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:s}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield m(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,s)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,s)=>{const i=(e,t)=>{e?s(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/util.js"}],[1957,{"./chunk-AK7OTIWA.js":1960,"./chunk-SLHAVOTE.js":1976,"./chunk-SMKTWM6I.js":1977,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-SLHAVOTE.js"),i=e("./chunk-AK7OTIWA.js"),a=e("./chunk-SMKTWM6I.js"),o=e("loglevel"),c=(n=o)&&n.__esModule?n:{default:n},l=a.getEnvUrls.call(void 0,"prd").userStorageApiUrl,u=`${l}/api/v1/userstorage`;r.USER_STORAGE_API=l,r.USER_STORAGE_ENDPOINT=u,r.getUserStorage=async function(e){try{const{bearerToken:t,path:r,storageKey:n}=e,a=s.createEntryPath.call(void 0,r,n),o=new URL(`${u}${a}`),c=await fetch(o.toString(),{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(404===c.status)return null;if(200!==c.status)throw new Error("Unable to get User Storage");const l=await c.json(),d=l?.Data??null;if(!d)return null;return i.encryption_default.decryptString(d,e.storageKey)}catch(e){return c.default.error("Failed to get user storage",e),null}},r.upsertUserStorage=async function(e,t){const{bearerToken:r,path:n,storageKey:a}=t,o=i.encryption_default.encryptString(e,t.storageKey),c=s.createEntryPath.call(void 0,n,a),l=new URL(`${u}${c}`);if(!(await fetch(l.toString(),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({data:o})})).ok)throw new Error("user-storage - unable to upsert data")}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-3TE6M5TV.js"}],[1958,{"./chunk-SMKTWM6I.js":1977},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-SMKTWM6I.js"),s=n.getEnvUrls.call(void 0,"prd"),i=s.authApiUrl,a=`${i}/api/v2/nonce`,o=`${i}/api/v2/srp/login`,c=`${s.oidcApiUrl||""}/oauth2/token`;r.AUTH_NONCE_ENDPOINT=a,r.AUTH_LOGIN_ENDPOINT=o,r.OIDC_TOKENS_ENDPOINT=c,r.getNonce=async function(e){const t=new URL(a);t.searchParams.set("identifier",e);try{const e=await fetch(t.toString());if(!e.ok)return null;const r=await e.json();return r?.nonce??null}catch(e){return console.error("authentication-controller/services: unable to get nonce",e),null}},r.login=async function(e,t,r){try{const n=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signature:t,raw_message:e,metametrics:{metametrics_id:r.metametricsId,agent:r.agent}})});if(!n.ok)return null;return await n.json()??null}catch(e){return console.error("authentication-controller/services: unable to login",e),null}},r.getAccessToken=async function(e,t){const r=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),s=new URLSearchParams;s.append("grant_type","urn:ietf:params:oauth:grant-type:jwt-bearer"),s.append("client_id",(e=>{if("extension"===e)return n.getOidcClientId.call(void 0,"prd","extension");if("mobile"===e)return n.getOidcClientId.call(void 0,"prd","mobile");throw new Error(`Unsupported platform - ${e}`)})(t)),s.append("assertion",e);try{const e=await fetch(c,{method:"POST",headers:r,body:s.toString()});if(!e.ok)return null;const t=await e.json();return t?.access_token??null}catch(e){return console.error("authentication-controller/services: unable to get access token",e),null}},r.createLoginRawMessage=function(e,t){return`metamask:${e}:${t}`}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-5C53GKTU.js"}],[1959,{"./chunk-3TE6M5TV.js":1957,"./chunk-AK7OTIWA.js":1960,"./chunk-IGY2S5BC.js":1967,"./chunk-R2S3HIDN.js":1974,"./chunk-SLHAVOTE.js":1976,"./chunk-T3FNDVE3.js":1978},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-R2S3HIDN.js"),s=e("./chunk-3TE6M5TV.js"),i=e("./chunk-SLHAVOTE.js"),a=e("./chunk-AK7OTIWA.js"),o=e("./chunk-T3FNDVE3.js"),c=e("./chunk-IGY2S5BC.js"),l={};c.__export.call(void 0,l,{Controller:()=>n.UserStorageController,Encryption:()=>o.encryption_default,Mocks:()=>u,createSHA256Hash:()=>o.createSHA256Hash,defaultState:()=>n.defaultState});var u={};c.__export.call(void 0,u,{MOCK_ENCRYPTED_STORAGE_DATA:()=>p,MOCK_STORAGE_DATA:()=>f,MOCK_STORAGE_KEY:()=>h,MOCK_STORAGE_KEY_SIGNATURE:()=>d,MOCK_USER_STORAGE_NOTIFICATIONS_ENDPOINT:()=>m,getMockUserStorageGetResponse:()=>v,getMockUserStoragePutResponse:()=>y});var d="mockStorageKey",h=o.createSHA256Hash.call(void 0,d),f=JSON.stringify({hello:"world"}),p=a.encryption_default.encryptString(f,h),m=`${s.USER_STORAGE_ENDPOINT}${i.createEntryPath.call(void 0,"notifications.notification_settings",h)}`,g={HashedKey:"HASHED_KEY",Data:p},v=()=>({url:m,requestMethod:"GET",response:g}),y=()=>({url:m,requestMethod:"PUT",response:null});r.fixtures_exports=u,r.user_storage_exports=l}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-77LSWSGB.js"}],[196,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:68,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=68;const r=function(e){const{PermissionsController:t={},PermissionsMetadata:r={},...n}=e,{domainMetadata:a={},permissionsHistory:o={},permissionsLog:c=[]}=r;return{...n,PermissionController:s(t),PermissionLogController:{permissionActivityLog:c,permissionHistory:o},SubjectMetadataController:i(a)}}(t.data);return t.data=r,t}};function s(e){const{domains:t={}}=e;return{subjects:Object.entries(t).reduce(((e,[t,r])=>{const{permissions:[n]}=r,s=n.caveats.find((e=>"exposedAccounts"===e.name)),i={...n,caveats:[{type:"restrictReturnedAccounts",value:s.value}]};return delete i["@context"],e[t]={origin:t,permissions:{eth_accounts:i}},e}),{})}}function i(e){return{subjectMetadata:Object.entries(e).reduce(((e,[t,r])=>{const{name:n=null,icon:s=null,extensionId:i=null,...a}=r;return delete a.lastUpdated,delete a.host,t&&(e[t]={name:n,iconUrl:s,extensionId:i,...a,origin:t}),e}),{})}}}}},{package:"$root$",file:"app/scripts/migrations/068.js"}],[1960,{"./chunk-T3FNDVE3.js":1978},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-T3FNDVE3.js").encryption_default;r.encryption_default=n}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-AK7OTIWA.js"}],[1961,{"./chunk-MBTBE4P5.js":1968,"./chunk-SMKTWM6I.js":1977},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-SMKTWM6I.js"),s=e("./chunk-MBTBE4P5.js"),i=e=>`${n.getEnvUrls.call(void 0,e).authApiUrl}/api/v2/nonce`,a=e=>`${n.getEnvUrls.call(void 0,e).authApiUrl}/api/v2/identifiers/pair`,o=e=>`${n.getEnvUrls.call(void 0,e).oidcApiUrl}/oauth2/token`,c=e=>`${n.getEnvUrls.call(void 0,e).authApiUrl}/api/v2/srp/login`,l=e=>`${n.getEnvUrls.call(void 0,e).authApiUrl}/api/v2/siwe/login`;r.NONCE_URL=i,r.PAIR_IDENTIFIERS=a,r.OIDC_TOKEN_URL=o,r.SRP_LOGIN_URL=c,r.SIWE_LOGIN_URL=l,r.pairIdentifiers=async function(e,t,r,n){const i=new URL(a(n));try{const n=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({nonce:e,logins:t})});if(!n.ok){const e=await n.json();throw new Error(`HTTP error message: ${e.message}, error: ${e.error}`)}}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");throw new(0,s.PairError)(`unable to pair identifiers: ${t}`)}},r.getNonce=async function(e,t){const r=new URL(i(t));r.searchParams.set("identifier",e);try{const e=await fetch(r.toString());if(!e.ok){const t=await e.json();throw new Error(`HTTP error message: ${t.message}, error: ${t.error}`)}const t=await e.json();return{nonce:t.nonce,identifier:t.identifier,expiresIn:t.expires_in}}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");throw new(0,s.NonceRetrievalError)(`failed to generate nonce: ${t}`)}},r.authorizeOIDC=async function(e,t,r){const i=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),a=new URLSearchParams;a.append("grant_type","urn:ietf:params:oauth:grant-type:jwt-bearer"),a.append("client_id",n.getOidcClientId.call(void 0,t,r)),a.append("assertion",e);try{const e=await fetch(o(t),{method:"POST",headers:i,body:a.toString()});if(!e.ok){const t=await e.json();throw new Error(`HTTP error: ${t.error_description}, error code: ${t.error}`)}const r=await e.json();return{accessToken:r.access_token,expiresIn:r.expires_in,obtainedAt:Date.now()}}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");throw new(0,s.SignInError)(`unable to get access token: ${t}`)}},r.authenticate=async function(e,t,r,n){const i=((e,t)=>{switch(e){case"SRP":return c(t);case"SiWE":return l(t);default:throw new(0,s.ValidationError)(`Invalid AuthType: ${e} - unable to create Auth URL`)}})(r,n);try{const n=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signature:t,raw_message:e})});if(!n.ok){const e=await n.json();throw new Error(`${r} login HTTP error: ${e.message}, error code: ${e.error}`)}const s=await n.json();return{token:s.token,expiresIn:s.expires_in,profile:{identifierId:s.profile.identifier_id,metaMetricsId:s.profile.metametrics_id,profileId:s.profile.profile_id}}}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");throw new(0,s.SignInError)(`unable to perform SRP login: ${t}`)}}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-BOET676P.js"}],[1962,{"./chunk-5C53GKTU.js":1958,"./chunk-DHKZ2NEF.js":1963,"./chunk-IGY2S5BC.js":1967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-DHKZ2NEF.js"),s=e("./chunk-5C53GKTU.js"),i=e("./chunk-IGY2S5BC.js"),a={};i.__export.call(void 0,a,{Controller:()=>n.AuthenticationController,Mocks:()=>o,defaultState:()=>n.defaultState});var o={};i.__export.call(void 0,o,{MOCK_ACCESS_TOKEN:()=>p,MOCK_JWT:()=>d,MOCK_LOGIN_RESPONSE:()=>h,MOCK_NONCE:()=>c,MOCK_NONCE_RESPONSE:()=>l,MOCK_OATH_TOKEN_RESPONSE:()=>m,getMockAuthAccessTokenResponse:()=>g,getMockAuthLoginResponse:()=>f,getMockAuthNonceResponse:()=>u});var c="4cbfqzoQpcNxVImGv",l={nonce:c},u=()=>({url:s.AUTH_NONCE_ENDPOINT,requestMethod:"GET",response:l}),d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",h={token:d,expires_in:(new Date).toString(),profile:{identifier_id:"MOCK_IDENTIFIER",profile_id:"MOCK_PROFILE_ID"}},f=()=>({url:s.AUTH_LOGIN_ENDPOINT,requestMethod:"POST",response:h}),p=`MOCK_ACCESS_TOKEN-${d}`,m={access_token:p,expires_in:(new Date).getTime()},g=()=>({url:s.OIDC_TOKENS_ENDPOINT,requestMethod:"POST",response:m});r.fixtures_exports=o,r.authentication_exports=a}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-BXPL7ZFX.js"}],[1963,{"./chunk-5C53GKTU.js":1958,"./chunk-IGY2S5BC.js":1967,"./chunk-YHGWG3EQ.js":1982,"@metamask/base-controller":1989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m,g,v,y=e("./chunk-5C53GKTU.js"),b=e("./chunk-YHGWG3EQ.js"),w=e("./chunk-IGY2S5BC.js"),_=e("@metamask/base-controller"),k=18e5,T="AuthenticationController",S={isSignedIn:!1},E={isSignedIn:{persist:!0,anonymous:!0},sessionData:{persist:!0,anonymous:!1}},P=class extends _.BaseController{constructor({messenger:e,state:t,metametrics:r}){if(super({messenger:e,metadata:E,name:T,state:{...S,...t}}),w.__privateAdd.call(void 0,this,s),w.__privateAdd.call(void 0,this,a),w.__privateAdd.call(void 0,this,c),w.__privateAdd.call(void 0,this,u),w.__privateAdd.call(void 0,this,f),w.__privateAdd.call(void 0,this,g),w.__privateAdd.call(void 0,this,n,void 0),w.__privateAdd.call(void 0,this,h,void 0),w.__privateAdd.call(void 0,this,m,{}),!r)throw new Error("`metametrics` field is required");w.__privateSet.call(void 0,this,n,r),w.__privateMethod.call(void 0,this,s,i).call(this)}async performSignIn(){const{accessToken:e}=await w.__privateMethod.call(void 0,this,c,l).call(this);return e}performSignOut(){w.__privateMethod.call(void 0,this,a,o).call(this),this.update((e=>{e.isSignedIn=!1,e.sessionData=void 0}))}async getBearerToken(){if(w.__privateMethod.call(void 0,this,a,o).call(this),w.__privateMethod.call(void 0,this,u,d).call(this,this.state.sessionData))return this.state.sessionData.accessToken;const{accessToken:e}=await w.__privateMethod.call(void 0,this,c,l).call(this);return e}async getSessionProfile(){if(w.__privateMethod.call(void 0,this,a,o).call(this),w.__privateMethod.call(void 0,this,u,d).call(this,this.state.sessionData))return this.state.sessionData.profile;const{profile:e}=await w.__privateMethod.call(void 0,this,c,l).call(this);return e}isSignedIn(){return this.state.isSignedIn}};n=new WeakMap,s=new WeakSet,i=function(){this.messagingSystem.registerActionHandler("AuthenticationController:getBearerToken",this.getBearerToken.bind(this)),this.messagingSystem.registerActionHandler("AuthenticationController:getSessionProfile",this.getSessionProfile.bind(this)),this.messagingSystem.registerActionHandler("AuthenticationController:isSignedIn",this.isSignedIn.bind(this)),this.messagingSystem.registerActionHandler("AuthenticationController:performSignIn",this.performSignIn.bind(this)),this.messagingSystem.registerActionHandler("AuthenticationController:performSignOut",this.performSignOut.bind(this))},a=new WeakSet,o=function(){if(!this.state.isSignedIn)throw new Error(`${T}: Unable to call method, user is not authenticated`)},c=new WeakSet,l=async function(){try{const e=await w.__privateMethod.call(void 0,this,f,p).call(this),t=await y.getNonce.call(void 0,e);if(!t)throw new Error("Unable to get nonce");const r=y.createLoginRawMessage.call(void 0,t,e),s=await w.__privateMethod.call(void 0,this,g,v).call(this,r),i=await y.login.call(void 0,r,s,{metametricsId:await w.__privateGet.call(void 0,this,n).getMetaMetricsId(),agent:w.__privateGet.call(void 0,this,n).agent});if(!i?.token)throw new Error("Unable to login");const a={identifierId:i.profile.identifier_id,profileId:i.profile.profile_id},o=await y.getAccessToken.call(void 0,i.token,w.__privateGet.call(void 0,this,n).agent);if(!o)throw new Error("Unable to get Access Token");return this.update((e=>{e.isSignedIn=!0;const t=new Date;t.setTime(t.getTime()+k),e.sessionData={profile:a,accessToken:o,expiresIn:t.toString()}})),{profile:a,accessToken:o}}catch(e){console.error("Failed to authenticate",e);const t=e instanceof Error?e.message:JSON.stringify(e??"");throw new Error(`${T}: Failed to authenticate - ${t}`)}},u=new WeakSet,d=function(e){if(!e)return!1;const t=Date.parse(e.expiresIn);if(isNaN(t))return!1;const r=new Date,n=Math.abs(r.getTime()-t);return k>n},h=new WeakMap,f=new WeakSet,p=async function(){if(w.__privateGet.call(void 0,this,h))return w.__privateGet.call(void 0,this,h);const e=await this.messagingSystem.call("SnapController:handleRequest",b.createSnapPublicKeyRequest.call(void 0));return w.__privateSet.call(void 0,this,h,e),e},m=new WeakMap,g=new WeakSet,v=async function(e){if(w.__privateGet.call(void 0,this,m)[e])return w.__privateGet.call(void 0,this,m)[e];const t=await this.messagingSystem.call("SnapController:handleRequest",b.createSnapSignMessageRequest.call(void 0,e));return w.__privateGet.call(void 0,this,m)[e]=t,t},r.defaultState=S,r.AuthenticationController=P}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-DHKZ2NEF.js"}],[1964,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateLoginResponse=function(e){const t=e;return!!t&&!(!t?.token||!t?.profile)}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-DRB2MN4T.js"}],[1965,{"./chunk-IGY2S5BC.js":1967,"./chunk-MBTBE4P5.js":1968,"./chunk-P4DUDLMY.js":1969,"./chunk-SLHAVOTE.js":1976,"./chunk-SMKTWM6I.js":1977},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u=e("./chunk-SLHAVOTE.js"),d=e("./chunk-P4DUDLMY.js"),h=e("./chunk-SMKTWM6I.js"),f=e("./chunk-MBTBE4P5.js"),p=e("./chunk-IGY2S5BC.js"),m=(e,t)=>`${h.getEnvUrls.call(void 0,e).userStorageApiUrl}/api/v1/userstorage/${t}`;n=new WeakSet,s=async function(e,t){try{const r=await p.__privateMethod.call(void 0,this,c,l).call(this),n=await this.getStorageKey(),s=d.encryption_default.encryptString(t,n),i=u.createEntryPath.call(void 0,e,n),a=new URL(m(this.env,i)),o=await fetch(a.toString(),{method:"PUT",headers:{"Content-Type":"application/json",...r},body:JSON.stringify({data:s})});if(!o.ok){const e=await o.json().catch((()=>({message:"unknown",error:"unknown"})));throw new Error(`HTTP error message: ${e.message}, error: ${e.error}`)}}catch(t){const r=t instanceof Error?t.message:JSON.stringify(t??"");throw new(0,f.UserStorageError)(`failed to upsert user storage for path '${e}'. ${r}`)}},i=new WeakSet,a=async function(e){try{const t=await p.__privateMethod.call(void 0,this,c,l).call(this),r=await this.getStorageKey(),n=u.createEntryPath.call(void 0,e,r),s=new URL(m(this.env,n)),i=await fetch(s.toString(),{headers:{"Content-Type":"application/json",...t}});if(404===i.status)throw new(0,f.NotFoundError)(`feature/key set not found for path '${e}'.`);if(!i.ok){const e=await i.json();throw new Error(`HTTP error message: ${e.message}, error: ${e.error}`)}const{Data:a}=await i.json();return d.encryption_default.decryptString(a,r)}catch(t){if(t instanceof f.NotFoundError)throw t;const r=t instanceof Error?t.message:JSON.stringify(t??"");throw new(0,f.UserStorageError)(`failed to get user storage for path '${e}'. ${r}`)}},o=new WeakSet,c=new WeakSet,l=async function(){return{Authorization:`Bearer ${await this.config.auth.getAccessToken()}`}},r.STORAGE_URL=m,r.UserStorage=class{constructor(e,t){p.__privateAdd.call(void 0,this,n),p.__privateAdd.call(void 0,this,i),p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,c),this.env=e.env,this.config=e,this.options=t}async setItem(e,t){await p.__privateMethod.call(void 0,this,n,s).call(this,e,t)}async getItem(e){return p.__privateMethod.call(void 0,this,i,a).call(this,e)}async getStorageKey(){const e=await(this.options.storage?.getStorageKey());if(e)return e;const t=await this.config.auth.getUserProfile(),r=await this.config.auth.signMessage(`metamask:${t.profileId}`),n=d.createSHA256Hash.call(void 0,r);return await(this.options.storage?.setStorageKey(n)),n}}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-FUPEFLXB.js"}],[1966,{"./chunk-BOET676P.js":1961,"./chunk-DRB2MN4T.js":1964,"./chunk-IGY2S5BC.js":1967,"./chunk-MBTBE4P5.js":1968,siwe:4878},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p=e("./chunk-BOET676P.js"),m=e("./chunk-DRB2MN4T.js"),g=e("./chunk-MBTBE4P5.js"),v=e("./chunk-IGY2S5BC.js"),y=e("siwe");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakSet,o=async function(){const e=await v.__privateGet.call(void 0,this,s).storage.getLoginResponse();if(!m.validateLoginResponse.call(void 0,e))return null;return Date.now()-e.token.obtainedAt<1e3*e.token.expiresIn*.9?e:null},c=new WeakSet,l=async function(){v.__privateMethod.call(void 0,this,h,f).call(this,v.__privateGet.call(void 0,this,i));const e=await this.getIdentifier(),t=await p.getNonce.call(void 0,e,v.__privateGet.call(void 0,this,n).env),r=v.__privateMethod.call(void 0,this,u,d).call(this,t.nonce),a=await this.signMessage(r),o=await p.authenticate.call(void 0,r,a,v.__privateGet.call(void 0,this,n).type,v.__privateGet.call(void 0,this,n).env),c=await p.authorizeOIDC.call(void 0,o.token,v.__privateGet.call(void 0,this,n).env,v.__privateGet.call(void 0,this,n).platform),l={profile:o.profile,token:c};return await v.__privateGet.call(void 0,this,s).storage.setLoginResponse(l),l},u=new WeakSet,d=function(e){return v.__privateMethod.call(void 0,this,h,f).call(this,v.__privateGet.call(void 0,this,i)),new(0,y.SiweMessage)({domain:v.__privateGet.call(void 0,this,i)?.domain,address:v.__privateGet.call(void 0,this,i)?.address,uri:p.SIWE_LOGIN_URL.call(void 0,v.__privateGet.call(void 0,this,n).env),version:"1",chainId:v.__privateGet.call(void 0,this,i)?.chainId,nonce:e,issuedAt:(new Date).toISOString()}).prepareMessage()},h=new WeakSet,f=function(e){if(!e)throw new(0,g.ValidationError)("you must call 'prepare()' before logging in")},r.SIWEJwtBearerAuth=class{constructor(e,t){v.__privateAdd.call(void 0,this,a),v.__privateAdd.call(void 0,this,c),v.__privateAdd.call(void 0,this,u),v.__privateAdd.call(void 0,this,h),v.__privateAdd.call(void 0,this,n,void 0),v.__privateAdd.call(void 0,this,s,void 0),v.__privateAdd.call(void 0,this,i,void 0),v.__privateSet.call(void 0,this,n,e),v.__privateSet.call(void 0,this,s,t)}async getAccessToken(){const e=await v.__privateMethod.call(void 0,this,a,o).call(this);if(e)return e.token.accessToken;return(await v.__privateMethod.call(void 0,this,c,l).call(this)).token.accessToken}async getUserProfile(){const e=await v.__privateMethod.call(void 0,this,a,o).call(this);if(e)return e.profile;return(await v.__privateMethod.call(void 0,this,c,l).call(this)).profile}async getIdentifier(){return v.__privateMethod.call(void 0,this,h,f).call(this,v.__privateGet.call(void 0,this,i)),v.__privateGet.call(void 0,this,i).address}async signMessage(e){return v.__privateMethod.call(void 0,this,h,f).call(this,v.__privateGet.call(void 0,this,i)),await v.__privateGet.call(void 0,this,i).signMessage(e)}prepare(e){v.__privateSet.call(void 0,this,i,e)}}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-G4NU4KP7.js"}],[1967,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=Object.defineProperty,s=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__export=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},r.__privateGet=(e,t,r)=>(s(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,n)=>(s(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(s(e,t,"access private method"),r)}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-IGY2S5BC.js"}],[1968,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class extends Error{constructor(e){super(e),this.name="NonceRetrievalError"}},s=class extends Error{constructor(e){super(e),this.name="SignInError"}},i=class extends Error{constructor(e){super(e),this.name="PairError"}},a=class extends Error{constructor(e){super(e),this.name="UserStorageError"}},o=class extends Error{constructor(e){super(e),this.name="ValidationError"}},c=class extends Error{constructor(e){super(e),this.name="UnsupportedAuthTypeError"}},l=class extends Error{constructor(e){super(e),this.name="NotFoundError"}};r.NonceRetrievalError=n,r.SignInError=s,r.PairError=i,r.UserStorageError=a,r.ValidationError=o,r.UnsupportedAuthTypeError=c,r.NotFoundError=l}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-MBTBE4P5.js"}],[1969,{"./chunk-IGY2S5BC.js":1967,"@noble/ciphers/aes":2804,"@noble/ciphers/webcrypto":2807,"@noble/hashes/pbkdf2":2823,"@noble/hashes/sha256":2826,"@noble/hashes/utils":2829,buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m=e("./chunk-IGY2S5BC.js"),g=e("@noble/ciphers/aes"),v=e("@noble/ciphers/webcrypto"),y=e("@noble/hashes/pbkdf2"),b=e("@noble/hashes/sha256"),w=e("@noble/hashes/utils");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e,r){const n=v.randomBytes.call(void 0,m.__privateGet.call(void 0,this,i)),o=y.pbkdf2.call(void 0,b.sha256,r,n,{c:m.__privateGet.call(void 0,this,a),dkLen:m.__privateGet.call(void 0,this,s)}),c=w.utf8ToBytes.call(void 0,e),l=w.concatBytes.call(void 0,n,m.__privateMethod.call(void 0,this,d,h).call(this,c,o));var u;const f={v:"1",d:(u=l,t.from(u).toString("base64")),iterations:m.__privateGet.call(void 0,this,a)};return JSON.stringify(f)},l=new WeakSet,u=function(e,r){const{iterations:n,d:a}=e,o=(c=a,new Uint8Array(t.from(c,"base64")));var c;const l=o.slice(0,m.__privateGet.call(void 0,this,i)),u=o.slice(m.__privateGet.call(void 0,this,i),o.length),d=y.pbkdf2.call(void 0,b.sha256,r,l,{c:n,dkLen:m.__privateGet.call(void 0,this,s)});return h=m.__privateMethod.call(void 0,this,f,p).call(this,u,d),new TextDecoder("utf-8").decode(h);var h},d=new WeakSet,h=function(e,t){const r=v.randomBytes.call(void 0,m.__privateGet.call(void 0,this,n)),s=g.gcm.call(void 0,t,r).encrypt(e);return w.concatBytes.call(void 0,r,s)},f=new WeakSet,p=function(e,t){const r=e.slice(0,m.__privateGet.call(void 0,this,n)),s=e.slice(m.__privateGet.call(void 0,this,n),e.length);return g.gcm.call(void 0,t,r).decrypt(s)};var _=new class{constructor(){m.__privateAdd.call(void 0,this,o),m.__privateAdd.call(void 0,this,l),m.__privateAdd.call(void 0,this,d),m.__privateAdd.call(void 0,this,f),m.__privateAdd.call(void 0,this,n,12),m.__privateAdd.call(void 0,this,s,16),m.__privateAdd.call(void 0,this,i,16),m.__privateAdd.call(void 0,this,a,9e5)}encryptString(e,t){try{if(0===e.trim().length)throw new Error("No plain text provided");return m.__privateMethod.call(void 0,this,o,c).call(this,e,t)}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`Unable to encrypt string - ${t}`)}}decryptString(e,t){try{const r=JSON.parse(e);if("1"===r.v)return m.__privateMethod.call(void 0,this,l,u).call(this,r,t);throw new Error(`Unsupported encrypted data payload - ${JSON.stringify(r)}`)}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`Unable to decrypt string - ${t}`)}}},k=_;r.Encryption=_,r.encryption_default=k,r.createSHA256Hash=function(e){const t=b.sha256.call(void 0,e);return w.bytesToHex.call(void 0,t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-P4DUDLMY.js"}],[197,{"@metamask/permission-controller":1885,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/permission-controller"),s=e("lodash");r.default={version:69,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=69;const r=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?n.SubjectType.Extension:n.SubjectType.Website)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[1970,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.SRP="SRP",e.SiWE="SiWE",e))(n||{});r.AuthType=n}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-PBRUOBEQ.js"}],[1971,{buffer:3576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0});r.byteArrayToBase64=t=>e.from(t).toString("base64"),r.base64ToByteArray=t=>new Uint8Array(e.from(t,"base64")),r.bytesToUtf8=e=>new TextDecoder("utf-8").decode(e)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-PCOIRDTO.js"}],[1972,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n="npm:@metamask/message-signing-snap";async function s(e){return await e.request({method:"wallet_getSnaps"})}var i={getPublicKey:async e=>await e.request({method:"wallet_invokeSnap",params:{snapId:n,request:{method:"getPublicKey"}}}),signMessage:async(e,t)=>await(e?.request({method:"wallet_invokeSnap",params:{snapId:n,request:{method:"signMessage",params:{message:t}}}}))};r.SNAP_ORIGIN=n,r.connectSnap=async function(e){return await e.request({method:"wallet_requestSnaps",params:{[n]:{}}})},r.getSnaps=s,r.getSnap=async function(e){try{const t=await s(e);return Object.values(t??{}).find((e=>(e=>e.id===n)(e)))}catch(e){return void console.error("Failed to obtain installed snap",e)}},r.MESSAGE_SIGNING_SNAP=i}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-PQ5T4GHY.js"}],[1973,{"./chunk-FUPEFLXB.js":1965,"./chunk-G4NU4KP7.js":1966,"./chunk-IGY2S5BC.js":1967,"./chunk-MBTBE4P5.js":1968,"./chunk-P4DUDLMY.js":1969,"./chunk-PBRUOBEQ.js":1970,"./chunk-PQ5T4GHY.js":1972,"./chunk-SMKTWM6I.js":1977,"./chunk-VD2IGTS3.js":1980,"./chunk-XSSIP3PJ.js":1981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-XSSIP3PJ.js"),s=e("./chunk-G4NU4KP7.js"),i=e("./chunk-VD2IGTS3.js"),a=e("./chunk-PBRUOBEQ.js"),o=e("./chunk-PQ5T4GHY.js"),c=e("./chunk-FUPEFLXB.js"),l=e("./chunk-P4DUDLMY.js"),u=e("./chunk-SMKTWM6I.js"),d=e("./chunk-MBTBE4P5.js"),h={};e("./chunk-IGY2S5BC.js").__export.call(void 0,h,{AuthType:()=>a.AuthType,Encryption:()=>l.Encryption,Env:()=>u.Env,JwtBearerAuth:()=>n.JwtBearerAuth,MESSAGE_SIGNING_SNAP:()=>o.MESSAGE_SIGNING_SNAP,NonceRetrievalError:()=>d.NonceRetrievalError,NotFoundError:()=>d.NotFoundError,PairError:()=>d.PairError,Platform:()=>u.Platform,SIWEJwtBearerAuth:()=>s.SIWEJwtBearerAuth,SNAP_ORIGIN:()=>o.SNAP_ORIGIN,SRPJwtBearerAuth:()=>i.SRPJwtBearerAuth,STORAGE_URL:()=>c.STORAGE_URL,SignInError:()=>d.SignInError,UnsupportedAuthTypeError:()=>d.UnsupportedAuthTypeError,UserStorage:()=>c.UserStorage,UserStorageError:()=>d.UserStorageError,ValidationError:()=>d.ValidationError,connectSnap:()=>o.connectSnap,createSHA256Hash:()=>l.createSHA256Hash,getEnvUrls:()=>u.getEnvUrls,getOidcClientId:()=>u.getOidcClientId,getSnap:()=>o.getSnap,getSnaps:()=>o.getSnaps}),r.sdk_exports=h}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-PSR2V3R4.js"}],[1974,{"./chunk-3TE6M5TV.js":1957,"./chunk-IGY2S5BC.js":1967,"./chunk-T3FNDVE3.js":1978,"./chunk-YHGWG3EQ.js":1982,"@metamask/base-controller":1989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m,g,v,y=e("./chunk-YHGWG3EQ.js"),b=e("./chunk-3TE6M5TV.js"),w=e("./chunk-T3FNDVE3.js"),_=e("./chunk-IGY2S5BC.js"),k=e("@metamask/base-controller"),T="UserStorageController",S={isProfileSyncingEnabled:!0,isProfileSyncingUpdateLoading:!1},E={isProfileSyncingEnabled:{persist:!0,anonymous:!0},isProfileSyncingUpdateLoading:{persist:!1,anonymous:!1}},P=class extends k.BaseController{constructor(e){super({messenger:e.messenger,metadata:E,name:T,state:{...S,...e.state}}),_.__privateAdd.call(void 0,this,i),_.__privateAdd.call(void 0,this,o),_.__privateAdd.call(void 0,this,l),_.__privateAdd.call(void 0,this,d),_.__privateAdd.call(void 0,this,p),_.__privateAdd.call(void 0,this,g),_.__privateAdd.call(void 0,this,n,{getBearerToken:async()=>await this.messagingSystem.call("AuthenticationController:getBearerToken"),getProfileId:async()=>{const e=await this.messagingSystem.call("AuthenticationController:getSessionProfile");return e?.profileId},isAuthEnabled:()=>this.messagingSystem.call("AuthenticationController:isSignedIn"),signIn:async()=>await this.messagingSystem.call("AuthenticationController:performSignIn"),signOut:async()=>this.messagingSystem.call("AuthenticationController:performSignOut")}),_.__privateAdd.call(void 0,this,s,{disableNotificationServices:async()=>await this.messagingSystem.call("NotificationServicesController:disableNotificationServices"),selectIsNotificationServicesEnabled:async()=>this.messagingSystem.call("NotificationServicesController:selectIsNotificationServicesEnabled")}),_.__privateAdd.call(void 0,this,f,{}),this.getMetaMetricsState=e.getMetaMetricsState,_.__privateMethod.call(void 0,this,i,a).call(this)}async enableProfileSyncing(){try{_.__privateMethod.call(void 0,this,g,v).call(this,!0);_.__privateGet.call(void 0,this,n).isAuthEnabled()||await _.__privateGet.call(void 0,this,n).signIn(),this.update((e=>{e.isProfileSyncingEnabled=!0})),_.__privateMethod.call(void 0,this,g,v).call(this,!1)}catch(e){_.__privateMethod.call(void 0,this,g,v).call(this,!1);const t=e instanceof Error?e.message:JSON.stringify(e);throw new Error(`${T} - failed to enable profile syncing - ${t}`)}}async setIsProfileSyncingEnabled(e){this.update((t=>{t.isProfileSyncingEnabled=e}))}async disableProfileSyncing(){if(!!this.state.isProfileSyncingEnabled)try{_.__privateMethod.call(void 0,this,g,v).call(this,!0);await _.__privateGet.call(void 0,this,s).selectIsNotificationServicesEnabled()&&await _.__privateGet.call(void 0,this,s).disableNotificationServices();this.getMetaMetricsState()||this.messagingSystem.call("AuthenticationController:performSignOut"),_.__privateMethod.call(void 0,this,g,v).call(this,!1),this.update((e=>{e.isProfileSyncingEnabled=!1}))}catch(e){_.__privateMethod.call(void 0,this,g,v).call(this,!1);const t=e instanceof Error?e.message:JSON.stringify(e);throw new Error(`${T} - failed to disable profile syncing - ${t}`)}}async performGetStorage(e){_.__privateMethod.call(void 0,this,o,c).call(this);const{bearerToken:t,storageKey:r}=await _.__privateMethod.call(void 0,this,l,u).call(this);return await b.getUserStorage.call(void 0,{path:e,bearerToken:t,storageKey:r})}async performSetStorage(e,t){_.__privateMethod.call(void 0,this,o,c).call(this);const{bearerToken:r,storageKey:n}=await _.__privateMethod.call(void 0,this,l,u).call(this);await b.upsertUserStorage.call(void 0,t,{path:e,bearerToken:r,storageKey:n})}async getStorageKey(){_.__privateMethod.call(void 0,this,o,c).call(this);return await _.__privateMethod.call(void 0,this,d,h).call(this)}};n=new WeakMap,s=new WeakMap,i=new WeakSet,a=function(){this.messagingSystem.registerActionHandler("UserStorageController:performGetStorage",this.performGetStorage.bind(this)),this.messagingSystem.registerActionHandler("UserStorageController:performSetStorage",this.performSetStorage.bind(this)),this.messagingSystem.registerActionHandler("UserStorageController:getStorageKey",this.getStorageKey.bind(this)),this.messagingSystem.registerActionHandler("UserStorageController:enableProfileSyncing",this.enableProfileSyncing.bind(this)),this.messagingSystem.registerActionHandler("UserStorageController:disableProfileSyncing",this.disableProfileSyncing.bind(this))},o=new WeakSet,c=function(){if(!this.state.isProfileSyncingEnabled)throw new Error(`${T}: Unable to call method, user is not authenticated`)},l=new WeakSet,u=async function(){const e=await _.__privateGet.call(void 0,this,n).getBearerToken();if(!e)throw new Error("UserStorageController - unable to get bearer token");return{bearerToken:e,storageKey:await _.__privateMethod.call(void 0,this,d,h).call(this)}},d=new WeakSet,h=async function(){const e=await _.__privateGet.call(void 0,this,n).getProfileId();if(!e)throw new Error("UserStorageController - unable to create storage key");const t=await _.__privateMethod.call(void 0,this,p,m).call(this,`metamask:${e}`);return w.createSHA256Hash.call(void 0,t)},f=new WeakMap,p=new WeakSet,m=async function(e){if(_.__privateGet.call(void 0,this,f)[e])return _.__privateGet.call(void 0,this,f)[e];const t=await this.messagingSystem.call("SnapController:handleRequest",y.createSnapSignMessageRequest.call(void 0,e));return _.__privateGet.call(void 0,this,f)[e]=t,t},g=new WeakSet,v=function(e){this.update((t=>{t.isProfileSyncingUpdateLoading=e}))},r.defaultState=S,r.UserStorageController=P}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-R2S3HIDN.js"}],[1975,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n={main:"io.metamask",flask:"io.metamask.flask",institutional:"io.metamask.mmi"},s={};r.metamaskClientsRdns=n,r.getMetaMaskProviderEIP6963=function(e="any"){return new Promise((t=>{if("any"!==e&&void 0===n[e])return void t(null);const r=s[e];if(r)return void t(r);const i=[],a=e=>{const t=e,r=t?.detail;r?.provider&&r?.info?.rdns&&i.push({rdns:r?.info?.rdns,provider:r?.provider})};window.addEventListener("eip6963:announceProvider",a),window.dispatchEvent(new Event("eip6963:requestProvider")),setTimeout((()=>{let r;if(window.removeEventListener("eip6963:announceProvider",a),"any"===e){const e=Object.values(n);r=i.find((t=>e.includes(t.rdns)))?.provider??null}else{const t=n[e];r=i.find((e=>e.rdns===t))?.provider??null}return r&&(s[e]=r),t(r)}),100)}))}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-RG4II6WH.js"}],[1976,{"./chunk-T3FNDVE3.js":1978},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-T3FNDVE3.js"),s={notifications:["notification_settings"]},i=e=>{if(!/^\w+\.\w+$/u.test(e))throw new Error("user-storage - path is not in the correct format. Correct format: 'feature.key'");const[t,r]=e.split(".");if(!(t in s))throw new Error(`user-storage - invalid feature provided: ${t}`);if(!s[t].includes(r)){const e=s[t].join(", ");throw new Error(`user-storage - invalid key provided for this feature: ${r}. Valid keys: ${e}`)}return{feature:t,key:r}};r.USER_STORAGE_SCHEMA=s,r.getFeatureAndKeyFromPath=i,r.createEntryPath=function(e,t){const{feature:r,key:s}=i(e);return`/${r}/${n.createSHA256Hash.call(void 0,s+t)}`}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-SLHAVOTE.js"}],[1977,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.DEV="dev",e.UAT="uat",e.PRD="prd",e))(n||{}),s=(e=>(e.MOBILE="mobile",e.EXTENSION="extension",e.PORTFOLIO="portfolio",e.INFURA="infura",e))(s||{}),i={dev:{authApiUrl:"https://authentication.dev-api.cx.metamask.io",oidcApiUrl:"https://oidc.dev-api.cx.metamask.io",userStorageApiUrl:"https://user-storage.dev-api.cx.metamask.io"},uat:{authApiUrl:"https://authentication.uat-api.cx.metamask.io",oidcApiUrl:"https://oidc.uat-api.cx.metamask.io",userStorageApiUrl:"https://user-storage.uat-api.cx.metamask.io"},prd:{authApiUrl:"https://authentication.api.cx.metamask.io",oidcApiUrl:"https://oidc.api.cx.metamask.io",userStorageApiUrl:"https://user-storage.api.cx.metamask.io"}};r.Env=n,r.Platform=s,r.getEnvUrls=function(e){if(!i[e])throw new Error("invalid environment configuration");return i[e]},r.getOidcClientId=function(e,t){const r={dev:{portfolio:"c7ca94a0-5d52-4635-9502-1a50a9c410cc",mobile:"e83c7cc9-267d-4fb4-8fec-f0e3bbe5ae8e",extension:"f1a963d7-50dc-4cb5-8d81-f1f3654f0df3",infura:"bd887006-0d55-481a-a395-5ff9a0dc52c9"},uat:{portfolio:"8f2dd4ac-db07-4819-9ba5-1ee0ec1b56d1",mobile:"c3cfdcd2-51d6-4fae-ad2c-ff238c8fef53",extension:"a9de167c-c9a6-43d8-af39-d301fd44c485",infura:"01929890-7002-4c97-9913-8f6c09a6d674"},prd:{portfolio:"35e1cd62-49c5-4be8-8b6e-a5212f2d2cfb",mobile:"75fa62a3-9ca0-4b91-9fe5-76bec86b0257",extension:"1132f10a-b4e5-4390-a5f2-d9c6022db564",infura:""}};if(!r[e])throw new Error(`invalid env ${e}: cannot determine oidc client id`);if(!r[e][t])throw new Error(`invalid env ${e} and platform ${t} combination: cannot determine oidc client id`);return r[e][t]}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-SMKTWM6I.js"}],[1978,{"./chunk-IGY2S5BC.js":1967,"./chunk-PCOIRDTO.js":1971,"./chunk-UAXWZN5J.js":1979,"@noble/ciphers/aes":2804,"@noble/ciphers/webcrypto":2807,"@noble/hashes/scrypt":2825,"@noble/hashes/sha256":2826,"@noble/hashes/utils":2829},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f=e("./chunk-UAXWZN5J.js"),p=e("./chunk-PCOIRDTO.js"),m=e("./chunk-IGY2S5BC.js"),g=e("@noble/ciphers/aes"),v=e("@noble/ciphers/webcrypto"),y=e("@noble/hashes/scrypt"),b=e("@noble/hashes/sha256"),w=e("@noble/hashes/utils"),_=2**17;n=new WeakSet,s=function(e,t){const{key:r,salt:n}=m.__privateMethod.call(void 0,this,d,h).call(this,t,{N:_,r:8,p:1,dkLen:16}),s=w.utf8ToBytes.call(void 0,e),i=w.concatBytes.call(void 0,n,m.__privateMethod.call(void 0,this,o,c).call(this,s,r)),a={v:"1",t:"scrypt",d:p.byteArrayToBase64.call(void 0,i),o:{N:_,r:8,p:1,dkLen:16},saltLen:16};return JSON.stringify(a)},i=new WeakSet,a=function(e,t){const{o:r,d:n,saltLen:s}=e,i=p.base64ToByteArray.call(void 0,n),a=i.slice(0,s),o=i.slice(s,i.length),{key:c}=m.__privateMethod.call(void 0,this,d,h).call(this,t,{N:r.N,r:r.r,p:r.p,dkLen:r.dkLen},a);return p.bytesToUtf8.call(void 0,m.__privateMethod.call(void 0,this,l,u).call(this,o,c))},o=new WeakSet,c=function(e,t){const r=v.randomBytes.call(void 0,12),n=g.gcm.call(void 0,t,r).encrypt(e);return w.concatBytes.call(void 0,r,n)},l=new WeakSet,u=function(e,t){const r=e.slice(0,12),n=e.slice(12,e.length);return g.gcm.call(void 0,t,r).decrypt(n)},d=new WeakSet,h=function(e,t,r){const n=T(e),s=r?f.getCachedKeyBySalt.call(void 0,n,r):f.getAnyCachedKey.call(void 0,n);if(s)return{key:s.key,salt:s.salt};const i=r??v.randomBytes.call(void 0,16),a=y.scrypt.call(void 0,e,i,{N:t.N,r:t.r,p:t.p,dkLen:t.dkLen});return f.setCachedKey.call(void 0,n,i,a),{key:a,salt:i}};var k=new class{constructor(){m.__privateAdd.call(void 0,this,n),m.__privateAdd.call(void 0,this,i),m.__privateAdd.call(void 0,this,o),m.__privateAdd.call(void 0,this,l),m.__privateAdd.call(void 0,this,d)}encryptString(e,t){try{return m.__privateMethod.call(void 0,this,n,s).call(this,e,t)}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e);throw new Error(`Unable to encrypt string - ${t}`)}}decryptString(e,t){try{const r=JSON.parse(e);if("1"===r.v&&"scrypt"===r.t)return m.__privateMethod.call(void 0,this,i,a).call(this,r,t);throw new Error(`Unsupported encrypted data payload - ${e}`)}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e);throw new Error(`Unable to decrypt string - ${t}`)}}};function T(e){const t=b.sha256.call(void 0,e);return w.bytesToHex.call(void 0,t)}r.encryption_default=k,r.createSHA256Hash=T}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-T3FNDVE3.js"}],[1979,{"./chunk-PCOIRDTO.js":1971},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-PCOIRDTO.js"),s={},i=e=>(s[e]??(s[e]=new Map),s[e]);r.getCachedKeyBySalt=function(e,t){const r=i(e),s=n.byteArrayToBase64.call(void 0,t),a=r.get(s);if(a)return{salt:t,base64Salt:s,key:a}},r.getAnyCachedKey=function(e){const t=i(e).entries().next().value;if(!t)return;const r=t[0];return{salt:n.base64ToByteArray.call(void 0,r),base64Salt:r,key:t[1]}},r.setCachedKey=function(e,t,r){Object.keys(s).length>3&&(s={});const a=i(e),o=n.byteArrayToBase64.call(void 0,t);a.size>10&&a.clear(),a.set(o,r)}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-UAXWZN5J.js"}],[198,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:70,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=70;const r=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[1980,{"./chunk-BOET676P.js":1961,"./chunk-DRB2MN4T.js":1964,"./chunk-IGY2S5BC.js":1967,"./chunk-MBTBE4P5.js":1968,"./chunk-PQ5T4GHY.js":1972,"./chunk-RG4II6WH.js":1975},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d=e("./chunk-BOET676P.js"),h=e("./chunk-RG4II6WH.js"),f=e("./chunk-PQ5T4GHY.js"),p=e("./chunk-DRB2MN4T.js"),m=e("./chunk-MBTBE4P5.js"),g=e("./chunk-IGY2S5BC.js"),v={getIdentifier:async()=>{const e=await h.getMetaMaskProviderEIP6963.call(void 0);if(!e)throw new(0,m.ValidationError)("No MetaMask wallet connected");return await f.MESSAGE_SIGNING_SNAP.getPublicKey(e)},signMessage:async e=>{const t=await h.getMetaMaskProviderEIP6963.call(void 0);if(!t)throw new(0,m.ValidationError)("No MetaMask wallet connected");if(!e.startsWith("metamask:"))throw new(0,m.ValidationError)('message must start with "metamask:"');const r=e;return await f.MESSAGE_SIGNING_SNAP.signMessage(t,r)}};n=new WeakMap,s=new WeakMap,i=new WeakSet,a=async function(){const e=await g.__privateGet.call(void 0,this,s).storage.getLoginResponse();if(!p.validateLoginResponse.call(void 0,e))return null;return Date.now()-e.token.obtainedAt<1e3*e.token.expiresIn*.9?e:null},o=new WeakSet,c=async function(){const e=await this.getIdentifier(),t=await d.getNonce.call(void 0,e,g.__privateGet.call(void 0,this,n).env),r=await g.__privateGet.call(void 0,this,s).signing.getIdentifier(),i=g.__privateMethod.call(void 0,this,l,u).call(this,t.nonce,r),a=await this.signMessage(i),o=await d.authenticate.call(void 0,i,a,g.__privateGet.call(void 0,this,n).type,g.__privateGet.call(void 0,this,n).env),c=await d.authorizeOIDC.call(void 0,o.token,g.__privateGet.call(void 0,this,n).env,g.__privateGet.call(void 0,this,n).platform),h={profile:o.profile,token:c};return await g.__privateGet.call(void 0,this,s).storage.setLoginResponse(h),h},l=new WeakSet,u=function(e,t){return`metamask:${e}:${t}`},r.SRPJwtBearerAuth=class{constructor(e,t){g.__privateAdd.call(void 0,this,i),g.__privateAdd.call(void 0,this,o),g.__privateAdd.call(void 0,this,l),g.__privateAdd.call(void 0,this,n,void 0),g.__privateAdd.call(void 0,this,s,void 0),g.__privateSet.call(void 0,this,n,e),g.__privateSet.call(void 0,this,s,{storage:t.storage,signing:t.signing??v})}async getAccessToken(){const e=await g.__privateMethod.call(void 0,this,i,a).call(this);if(e)return e.token.accessToken;return(await g.__privateMethod.call(void 0,this,o,c).call(this)).token.accessToken}async getUserProfile(){const e=await g.__privateMethod.call(void 0,this,i,a).call(this);if(e)return e.profile;return(await g.__privateMethod.call(void 0,this,o,c).call(this)).profile}async getIdentifier(){return await g.__privateGet.call(void 0,this,s).signing.getIdentifier()}async signMessage(e){return await g.__privateGet.call(void 0,this,s).signing.signMessage(e)}}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-VD2IGTS3.js"}],[1981,{"./chunk-BOET676P.js":1961,"./chunk-G4NU4KP7.js":1966,"./chunk-IGY2S5BC.js":1967,"./chunk-MBTBE4P5.js":1968,"./chunk-PQ5T4GHY.js":1972,"./chunk-RG4II6WH.js":1975,"./chunk-VD2IGTS3.js":1980},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c=e("./chunk-G4NU4KP7.js"),l=e("./chunk-VD2IGTS3.js"),u=e("./chunk-BOET676P.js"),d=e("./chunk-RG4II6WH.js"),h=e("./chunk-PQ5T4GHY.js"),f=e("./chunk-MBTBE4P5.js"),p=e("./chunk-IGY2S5BC.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakSet,o=function(e,t){if("SiWE"!==e)throw new(0,f.UnsupportedAuthTypeError)("This method is only available via SIWE auth type")},r.JwtBearerAuth=class{constructor(...e){if(p.__privateAdd.call(void 0,this,a),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateAdd.call(void 0,this,i,void 0),p.__privateSet.call(void 0,this,n,e[0].type),p.__privateSet.call(void 0,this,s,e[0].env),"SRP"!==e[0].type){if("SiWE"!==e[0].type)throw new(0,f.UnsupportedAuthTypeError)("unsupported auth type");p.__privateSet.call(void 0,this,i,new(0,c.SIWEJwtBearerAuth)(e[0],e[1]))}else p.__privateSet.call(void 0,this,i,new(0,l.SRPJwtBearerAuth)(e[0],e[1]))}async getAccessToken(){return await p.__privateGet.call(void 0,this,i).getAccessToken()}async connectSnap(){const e=await d.getMetaMaskProviderEIP6963.call(void 0);if(!e)throw new Error("failed to get MetaMaskProviderEIP6963 provider");return await h.connectSnap.call(void 0,e)}async getUserProfile(){return await p.__privateGet.call(void 0,this,i).getUserProfile()}async getIdentifier(){return await p.__privateGet.call(void 0,this,i).getIdentifier()}async signMessage(e){return await p.__privateGet.call(void 0,this,i).signMessage(e)}async pairIdentifiers(e){const t=await this.getUserProfile(),r=await u.getNonce.call(void 0,t.profileId,p.__privateGet.call(void 0,this,s)),n=await Promise.all(e.map((async e=>{try{const t=`metamask:${r.nonce}:${e.identifier}`;return{signature:await e.signMessage(t),raw_message:t,encrypted_storage_key:e.encryptedStorageKey,identifier_type:e.identifierType}}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");throw new(0,f.PairError)(`failed to sign pairing message: ${t}`)}}))),i=await this.getAccessToken();await u.pairIdentifiers.call(void 0,r.nonce,n,i,p.__privateGet.call(void 0,this,s))}prepare(e){p.__privateMethod.call(void 0,this,a,o).call(this,p.__privateGet.call(void 0,this,n),p.__privateGet.call(void 0,this,i)),p.__privateGet.call(void 0,this,i).prepare(e)}}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-XSSIP3PJ.js"}],[1982,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n="npm:@metamask/message-signing-snap";r.createSnapPublicKeyRequest=function(){return{snapId:n,origin:"",handler:"onRpcRequest",request:{method:"getPublicKey"}}},r.createSnapSignMessageRequest=function(e){return{snapId:n,origin:"",handler:"onRpcRequest",request:{method:"signMessage",params:{message:e}}}}}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/chunk-YHGWG3EQ.js"}],[1983,{"./chunk-3TE6M5TV.js":1957,"./chunk-5C53GKTU.js":1958,"./chunk-77LSWSGB.js":1959,"./chunk-AK7OTIWA.js":1960,"./chunk-BOET676P.js":1961,"./chunk-BXPL7ZFX.js":1962,"./chunk-DHKZ2NEF.js":1963,"./chunk-DRB2MN4T.js":1964,"./chunk-FUPEFLXB.js":1965,"./chunk-G4NU4KP7.js":1966,"./chunk-IGY2S5BC.js":1967,"./chunk-MBTBE4P5.js":1968,"./chunk-P4DUDLMY.js":1969,"./chunk-PBRUOBEQ.js":1970,"./chunk-PCOIRDTO.js":1971,"./chunk-PQ5T4GHY.js":1972,"./chunk-PSR2V3R4.js":1973,"./chunk-R2S3HIDN.js":1974,"./chunk-RG4II6WH.js":1975,"./chunk-SLHAVOTE.js":1976,"./chunk-SMKTWM6I.js":1977,"./chunk-T3FNDVE3.js":1978,"./chunk-UAXWZN5J.js":1979,"./chunk-VD2IGTS3.js":1980,"./chunk-XSSIP3PJ.js":1981,"./chunk-YHGWG3EQ.js":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-BXPL7ZFX.js");e("./chunk-DHKZ2NEF.js"),e("./chunk-5C53GKTU.js");var s=e("./chunk-77LSWSGB.js");e("./chunk-R2S3HIDN.js"),e("./chunk-YHGWG3EQ.js"),e("./chunk-3TE6M5TV.js");var i=e("./chunk-PSR2V3R4.js");e("./chunk-XSSIP3PJ.js"),e("./chunk-G4NU4KP7.js"),e("./chunk-VD2IGTS3.js"),e("./chunk-BOET676P.js"),e("./chunk-PBRUOBEQ.js"),e("./chunk-RG4II6WH.js"),e("./chunk-PQ5T4GHY.js"),e("./chunk-DRB2MN4T.js"),e("./chunk-FUPEFLXB.js"),e("./chunk-SLHAVOTE.js"),e("./chunk-AK7OTIWA.js"),e("./chunk-T3FNDVE3.js"),e("./chunk-UAXWZN5J.js"),e("./chunk-PCOIRDTO.js"),e("./chunk-P4DUDLMY.js"),e("./chunk-SMKTWM6I.js"),e("./chunk-MBTBE4P5.js"),e("./chunk-IGY2S5BC.js"),r.AuthenticationController=n.authentication_exports,r.SDK=i.sdk_exports,r.UserStorageController=s.user_storage_exports}}},{package:"@metamask/profile-sync-controller",file:"node_modules/@metamask/profile-sync-controller/dist/index.js"}],[1984,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/profile-sync-controller>@metamask/base-controller",file:"node_modules/@metamask/profile-sync-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[1985,{"./chunk-UJFCPTF3.js":1987,"./chunk-Z4BLTVTB.js":1988},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/profile-sync-controller>@metamask/base-controller",file:"node_modules/@metamask/profile-sync-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1986,{"./chunk-Z4BLTVTB.js":1988,immer:4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/profile-sync-controller>@metamask/base-controller",file:"node_modules/@metamask/profile-sync-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[1987,{"./chunk-Z4BLTVTB.js":1988},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/profile-sync-controller>@metamask/base-controller",file:"node_modules/@metamask/profile-sync-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1988,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/profile-sync-controller>@metamask/base-controller",file:"node_modules/@metamask/profile-sync-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1989,{"./chunk-FTHCJ6HY.js":1984,"./chunk-G42723LG.js":1985,"./chunk-IURK6TKD.js":1986,"./chunk-UJFCPTF3.js":1987,"./chunk-Z4BLTVTB.js":1988},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/profile-sync-controller>@metamask/base-controller",file:"node_modules/@metamask/profile-sync-controller/node_modules/@metamask/base-controller/dist/index.js"}],[199,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:71,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=71;const r=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[1990,{"./chunk-Z4BLTVTB.js":1992,"@metamask/base-controller":1999,"@metamask/selected-network-controller":2042,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m,g,v,y,b,w,_=e("./chunk-Z4BLTVTB.js"),k=e("@metamask/base-controller"),T=e("@metamask/selected-network-controller"),S=e("@metamask/utils"),E="QueuedRequestController",P={enqueueRequest:`${E}:enqueueRequest`,getState:`${E}:getState`},M={networkSwitched:`${E}:networkSwitched`,stateChange:`${E}:stateChange`},I=class extends k.BaseController{constructor({messenger:e,shouldRequestSwitchNetwork:t,clearPendingConfirmations:r,showApprovalRequest:h}){super({name:E,metadata:{queuedRequestCount:{anonymous:!0,persist:!1}},messenger:e,state:{queuedRequestCount:0}}),_.__privateAdd.call(void 0,this,l),_.__privateAdd.call(void 0,this,d),_.__privateAdd.call(void 0,this,f),_.__privateAdd.call(void 0,this,m),_.__privateAdd.call(void 0,this,v),_.__privateAdd.call(void 0,this,b),_.__privateAdd.call(void 0,this,n,void 0),_.__privateAdd.call(void 0,this,s,[]),_.__privateAdd.call(void 0,this,i,0),_.__privateAdd.call(void 0,this,a,void 0),_.__privateAdd.call(void 0,this,o,void 0),_.__privateAdd.call(void 0,this,c,void 0),_.__privateSet.call(void 0,this,a,t),_.__privateSet.call(void 0,this,o,r),_.__privateSet.call(void 0,this,c,h),_.__privateMethod.call(void 0,this,l,u).call(this)}async enqueueRequest(e,t){void 0===_.__privateGet.call(void 0,this,n)&&_.__privateSet.call(void 0,this,n,e.origin);try{this.state.queuedRequestCount>0||_.__privateGet.call(void 0,this,n)!==e.origin?(_.__privateGet.call(void 0,this,c).call(this),await _.__privateMethod.call(void 0,this,b,w).call(this,e.origin)):_.__privateGet.call(void 0,this,a).call(this,e)&&await _.__privateMethod.call(void 0,this,m,g).call(this),_.__privateSet.call(void 0,this,i,_.__privateGet.call(void 0,this,i)+1);try{await t()}finally{_.__privateSet.call(void 0,this,i,_.__privateGet.call(void 0,this,i)-1)}return}finally{0===_.__privateGet.call(void 0,this,i)&&(_.__privateSet.call(void 0,this,n,void 0),_.__privateGet.call(void 0,this,s).length>0&&_.__privateMethod.call(void 0,this,f,p).call(this))}}};n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakSet,u=function(){this.messagingSystem.registerActionHandler(`${E}:enqueueRequest`,this.enqueueRequest.bind(this)),this.messagingSystem.subscribe(T.SelectedNetworkControllerEventTypes.stateChange,((e,t)=>{t.forEach((({op:e,path:t})=>{if(2===t.length&&"domains"===t[0]&&"string"==typeof t[1]){const r=t[1];_.__privateMethod.call(void 0,this,d,h).call(this,r),"remove"===e&&r===_.__privateGet.call(void 0,this,n)&&_.__privateGet.call(void 0,this,o).call(this)}}))}))},d=new WeakSet,h=function(e){_.__privateGet.call(void 0,this,s).filter((({origin:t})=>t===e)).forEach((({processRequest:e})=>{e(new Error("The request has been rejected due to a change in selected network. Please verify the selected network and retry the request."))})),_.__privateSet.call(void 0,this,s,_.__privateGet.call(void 0,this,s).filter((({origin:t})=>t!==e)))},f=new WeakSet,p=async function(){const e=_.__privateGet.call(void 0,this,s).shift();_.__privateSet.call(void 0,this,n,e.origin);const t=[e.processRequest];for(;_.__privateGet.call(void 0,this,s)[0]?.origin===_.__privateGet.call(void 0,this,n);){const e=_.__privateGet.call(void 0,this,s).shift();t.push(e.processRequest)}let r;try{await _.__privateMethod.call(void 0,this,m,g).call(this)}catch(e){r=e}for(const e of t)e(r);_.__privateMethod.call(void 0,this,v,y).call(this)},m=new WeakSet,g=async function(){if(!_.__privateGet.call(void 0,this,n))throw new Error("Current batch origin must be initialized first");const e=this.messagingSystem.call("SelectedNetworkController:getNetworkClientIdForDomain",_.__privateGet.call(void 0,this,n)),{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");e!==t&&(await this.messagingSystem.call("NetworkController:setActiveNetwork",e),this.messagingSystem.publish("QueuedRequestController:networkSwitched",e))},v=new WeakSet,y=function(){this.update((e=>{e.queuedRequestCount=_.__privateGet.call(void 0,this,s).length}))},b=new WeakSet,w=async function(e){const{promise:t,reject:r,resolve:n}=S.createDeferredPromise.call(void 0,{suppressUnhandledRejection:!0});return _.__privateGet.call(void 0,this,s).push({origin:e,processRequest:e=>{e?r(e):n()}}),_.__privateMethod.call(void 0,this,v,y).call(this),t},r.controllerName=E,r.QueuedRequestControllerActionTypes=P,r.QueuedRequestControllerEventTypes=M,r.QueuedRequestController=I}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-5GMDEBVM.js"}],[1991,{"@metamask/json-rpc-engine":1516,"@metamask/rpc-errors":2006},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/json-rpc-engine"),s=e("@metamask/rpc-errors");r.createQueuedRequestMiddleware=({enqueueRequest:e,useRequestQueue:t,shouldEnqueueRequest:r})=>n.createAsyncMiddleware.call(void 0,(async(n,i,a)=>{if(function(e){if(!e.origin)throw new Error("Request object is lacking an 'origin'");if("string"!=typeof e.origin)throw new Error(`Request object has an invalid origin of type '${typeof e.origin}'`);if(!e.networkClientId)throw new Error("Request object is lacking a 'networkClientId'");if("string"!=typeof e.networkClientId)throw new Error(`Request object has an invalid networkClientId of type '${typeof e.networkClientId}'`)}(n),!t()||!r(n))return await a();try{await e(n,a)}catch(e){i.error=s.serializeError.call(void 0,e)}}))}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-VLAKOB6V.js"}],[1992,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-Z4BLTVTB.js"}],[1993,{"./chunk-5GMDEBVM.js":1990,"./chunk-VLAKOB6V.js":1991,"./chunk-Z4BLTVTB.js":1992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-5GMDEBVM.js"),s=e("./chunk-VLAKOB6V.js");e("./chunk-Z4BLTVTB.js"),r.QueuedRequestController=n.QueuedRequestController,r.QueuedRequestControllerActionTypes=n.QueuedRequestControllerActionTypes,r.QueuedRequestControllerEventTypes=n.QueuedRequestControllerEventTypes,r.createQueuedRequestMiddleware=s.createQueuedRequestMiddleware}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/index.js"}],[1994,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[1995,{"./chunk-UJFCPTF3.js":1997,"./chunk-Z4BLTVTB.js":1998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1996,{"./chunk-Z4BLTVTB.js":1998,immer:4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[1997,{"./chunk-Z4BLTVTB.js":1998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1998,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1999,{"./chunk-FTHCJ6HY.js":1994,"./chunk-G42723LG.js":1995,"./chunk-IURK6TKD.js":1996,"./chunk-UJFCPTF3.js":1997,"./chunk-Z4BLTVTB.js":1998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/index.js"}],[20,{"./constants/constants":18,"./constants/notification-schema":19,"./processors/process-notifications":22,"./services/feature-announcements":24,"./services/onchain-notifications":25,"./utils/utils":26,"@metamask/base-controller":1241,"@metamask/controller-utils":1250,loglevel:4388},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.defaultState=r.MetamaskNotificationsController=void 0;var n,s=e("@metamask/base-controller"),i=(n=e("loglevel"))&&n.__esModule?n:{default:n},a=e("@metamask/controller-utils"),o=e("./constants/notification-schema"),c=e("./constants/constants"),l=p(e("./services/feature-announcements")),u=p(e("./services/onchain-notifications")),d=e("./processors/process-notifications"),h=p(e("./utils/utils"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=s?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function m(e,t){v(e,t),t.add(e)}function g(e,t,r){v(e,t),t.set(e,r)}function v(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function b(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,_(e,t,"get"))}function w(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,_(e,t,"set"),r),r}function _(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const k="MetamaskNotificationsController",T={subscriptionAccountsSeen:{persist:!0,anonymous:!0},isMetamaskNotificationsFeatureSeen:{persist:!0,anonymous:!1},isMetamaskNotificationsEnabled:{persist:!0,anonymous:!1},isFeatureAnnouncementsEnabled:{persist:!0,anonymous:!1},metamaskNotificationsList:{persist:!0,anonymous:!0},metamaskNotificationsReadList:{persist:!0,anonymous:!0},isUpdatingMetamaskNotifications:{persist:!1,anonymous:!1},isFetchingMetamaskNotifications:{persist:!1,anonymous:!1},isUpdatingMetamaskNotificationsAccount:{persist:!1,anonymous:!1},isCheckingAccountsPresence:{persist:!1,anonymous:!1}},S=r.defaultState={subscriptionAccountsSeen:[],isMetamaskNotificationsFeatureSeen:!1,isMetamaskNotificationsEnabled:!1,isFeatureAnnouncementsEnabled:!1,metamaskNotificationsList:[],metamaskNotificationsReadList:[],isUpdatingMetamaskNotifications:!1,isFetchingMetamaskNotifications:!1,isUpdatingMetamaskNotificationsAccount:[],isCheckingAccountsPresence:!1};var E=new WeakMap,P=new WeakMap,M=new WeakMap,I=new WeakMap,C=new WeakMap,j=new WeakMap,A=new WeakMap,x=new WeakSet,O=new WeakSet,N=new WeakSet,B=new WeakSet,R=new WeakMap,L=new WeakSet,D=new WeakSet,U=new WeakSet,H=new WeakSet,$=new WeakSet,G=new WeakSet,F=new WeakSet;class V extends s.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:T,name:k,state:{...S,...t}}),m(this,F),m(this,G),m(this,$),m(this,H),m(this,U),m(this,D),m(this,L),m(this,B),m(this,N),m(this,O),m(this,x),g(this,E,{writable:!0,value:!1}),g(this,P,{writable:!0,value:!1}),g(this,M,{writable:!0,value:{setupLockedStateSubscriptions:e=>{const{isUnlocked:t}=this.messagingSystem.call("KeyringController:getState");w(this,P,t),this.messagingSystem.subscribe("KeyringController:unlock",(()=>{w(this,P,!0),e()})),this.messagingSystem.subscribe("KeyringController:lock",(()=>{w(this,P,!1)}))}}}),g(this,I,{writable:!0,value:{getBearerToken:async()=>await this.messagingSystem.call("AuthenticationController:getBearerToken"),isSignedIn:()=>this.messagingSystem.call("AuthenticationController:isSignedIn")}}),g(this,C,{writable:!0,value:{enableProfileSyncing:async()=>await this.messagingSystem.call("UserStorageController:enableProfileSyncing"),getStorageKey:()=>this.messagingSystem.call("UserStorageController:getStorageKey"),getNotificationStorage:async()=>await this.messagingSystem.call("UserStorageController:performGetStorage","notifications.notification_settings"),setNotificationStorage:async e=>await this.messagingSystem.call("UserStorageController:performSetStorage","notifications.notification_settings",e)}}),g(this,j,{writable:!0,value:{enablePushNotifications:async e=>{try{await this.messagingSystem.call("PushPlatformNotificationsController:enablePushNotifications",e)}catch(e){i.default.error("Silently failed to enable push notifications",e)}},disablePushNotifications:async e=>{try{await this.messagingSystem.call("PushPlatformNotificationsController:disablePushNotifications",e)}catch(e){i.default.error("Silently failed to disable push notifications",e)}},updatePushNotifications:async e=>{try{await this.messagingSystem.call("PushPlatformNotificationsController:updateTriggerPushNotifications",e)}catch(e){i.default.error("Silently failed to update push notifications",e)}},subscribe:()=>{this.messagingSystem.subscribe("PushPlatformNotificationsController:onNewNotifications",(e=>{this.updateMetamaskNotificationsList(e)}))},initializePushNotifications:async()=>{if(!this.state.isMetamaskNotificationsEnabled)return;if(b(this,E))return;if(!b(this,P))return;const e=await y(this,D,Z).call(this);if(!e)return;const t=h.getAllUUIDs(e);await b(this,j).enablePushNotifications(t),w(this,E,!0)}}}),g(this,A,{writable:!0,value:{listAccounts:async()=>{const e=(await this.messagingSystem.call("KeyringController:getAccounts")).map((e=>(0,a.toChecksumHexAddress)(e))),t=new Set(e),r=new Set(this.state.subscriptionAccountsSeen);if(0===e.length)return{accountsAdded:[],accountsRemoved:[],accounts:[]};const n=e.filter((e=>!r.has(e))),s=[...r.values()].filter((e=>!t.has(e)));return this.update((e=>{e.subscriptionAccountsSeen=[...r,...n]})),{accountsAdded:n,accountsRemoved:s,accounts:e}},initialize:()=>b(this,A).listAccounts(),subscribe:()=>{this.messagingSystem.subscribe("KeyringController:stateChange",(async()=>{if(!this.state.isMetamaskNotificationsEnabled)return;const{accountsAdded:e,accountsRemoved:t}=await b(this,A).listAccounts(),r=[];e.length>0&&r.push(this.updateOnChainTriggersByAccount(e)),t.length>0&&r.push(this.deleteOnChainTriggersByAccount(t)),await Promise.all(r)}))}}}),g(this,R,{writable:!0,value:async()=>{try{await b(this,C).enableProfileSyncing()}catch(e){throw i.default.error("Failed to enable profile syncing",e),new Error("Failed to enable profile syncing")}}}),y(this,x,K).call(this),y(this,O,W).call(this),b(this,M).setupLockedStateSubscriptions(b(this,j).initializePushNotifications),b(this,A).initialize(),b(this,j).initializePushNotifications(),b(this,A).subscribe(),b(this,j).subscribe()}async checkTriggersPresenceByGroup(){const e=await y(this,D,Z).call(this);return y(this,L,J).call(this,e),h.checkTriggersPresenceByGroup(e)}selectIsMetamaskNotificationsEnabled(){return this.state.isMetamaskNotificationsEnabled}async checkAccountsPresence(e){try{y(this,$,Q).call(this,!0);const t=await y(this,D,Z).call(this);y(this,L,J).call(this,t);return h.checkAccountsPresence(t,e)}catch(e){throw i.default.error("Failed to check accounts presence",e),e}finally{y(this,$,Q).call(this,!1)}}async setFeatureAnnouncementsEnabled(e){try{this.update((t=>{t.isFeatureAnnouncementsEnabled=e}))}catch(e){throw i.default.error("Unable to toggle feature announcements",e),new Error("Unable to toggle feature announcements")}}async createOnChainTriggers(){try{var e;y(this,U,Y).call(this,!0),await b(this,R).call(this);const{bearerToken:t,storageKey:r}=await y(this,B,q).call(this),{accounts:n}=await b(this,A).listAccounts();let s=await y(this,D,Z).call(this);(null===(e=s)||void 0===e?void 0:e[c.USER_STORAGE_VERSION_KEY])===undefined&&(s=h.initializeUserStorage(n.map((e=>({address:e}))),!1),await b(this,C).setNotificationStorage(JSON.stringify(s)));const i=h.traverseUserStorageTriggers(s);await u.createOnChainTriggers(s,r,t,i);const a=h.getAllUUIDs(s);return await b(this,j).enablePushNotifications(a),await b(this,C).setNotificationStorage(JSON.stringify(s)),this.update((e=>{e.isMetamaskNotificationsEnabled=!0,e.isFeatureAnnouncementsEnabled=!0,e.isMetamaskNotificationsFeatureSeen=!0})),s}catch(e){throw i.default.error("Failed to create On Chain triggers",e),new Error("Failed to create On Chain triggers")}finally{y(this,U,Y).call(this,!1)}}async enableMetamaskNotifications(){try{y(this,U,Y).call(this,!0),await this.createOnChainTriggers()}catch(e){throw i.default.error("Unable to enable notifications",e),new Error("Unable to enable notifications")}finally{y(this,U,Y).call(this,!1)}}async disableMetamaskNotifications(){try{y(this,U,Y).call(this,!0);const e=await y(this,D,Z).call(this);y(this,L,J).call(this,e);const t=h.getAllUUIDs(e);await b(this,j).disablePushNotifications(t),this.update((e=>{e.isMetamaskNotificationsEnabled=!1,e.isFeatureAnnouncementsEnabled=!1,e.metamaskNotificationsList=[]}))}catch(e){throw i.default.error("Unable to disable notifications",e),new Error("Unable to disable notifications")}finally{y(this,U,Y).call(this,!1)}}async deleteOnChainTriggersByAccount(e){try{y(this,G,ee).call(this,e);const{bearerToken:t,storageKey:r}=await y(this,B,q).call(this),n=await y(this,D,Z).call(this);y(this,L,J).call(this,n);const s=e.map((e=>h.getUUIDsForAccount(n,e.toLowerCase()))).flat();return 0===s.length||(await u.deleteOnChainTriggers(n,r,t,s),await b(this,j).disablePushNotifications(s),await b(this,C).setNotificationStorage(JSON.stringify(n))),n}catch(e){throw i.default.error("Failed to delete OnChain triggers",e),new Error("Failed to delete OnChain triggers")}finally{y(this,F,te).call(this,e)}}async updateOnChainTriggersByAccount(e){try{y(this,G,ee).call(this,e);const{bearerToken:t,storageKey:r}=await y(this,B,q).call(this),n=await y(this,D,Z).call(this);y(this,L,J).call(this,n),e.forEach((e=>h.upsertAddressTriggers(e,n)));if(h.traverseUserStorageTriggers(n,{mapTrigger:e=>!1===e.enabled?e:undefined}).length>0){await b(this,C).setNotificationStorage(JSON.stringify(n));const s=h.traverseUserStorageTriggers(n,{mapTrigger:t=>e.some((e=>e.toLowerCase()===t.address.toLowerCase()))?t:undefined});await u.createOnChainTriggers(n,r,t,s)}const s=h.getAllUUIDs(n);return await b(this,j).updatePushNotifications(s),await b(this,C).setNotificationStorage(JSON.stringify(n)),n}catch(e){throw i.default.error("Failed to update OnChain triggers",e),new Error("Failed to update OnChain triggers")}finally{y(this,F,te).call(this,e)}}async fetchAndUpdateMetamaskNotifications(){try{y(this,H,X).call(this,!0);const e=this.state.isFeatureAnnouncementsEnabled?await l.getFeatureAnnouncementNotifications().catch((()=>[])):[],t=[],r=await b(this,C).getNotificationStorage().then((e=>e&&JSON.parse(e))).catch((()=>null)),n=await b(this,I).getBearerToken().catch((()=>null));if(r&&n){const e=await u.getOnChainNotifications(r,n).catch((()=>[]));t.push(...e)}const s=this.state.metamaskNotificationsReadList,i=e=>Boolean(e),a=e=>e.map((e=>{try{return(0,d.processNotification)(e,s)}catch{return undefined}})).filter(i),o=a(e),c=a(t),h=[...o,...c];return h.sort(((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),this.update((e=>{e.metamaskNotificationsList=h})),this.messagingSystem.publish(`${k}:notificationsListUpdated`,this.state.metamaskNotificationsList),y(this,H,X).call(this,!1),h}catch(e){throw y(this,H,X).call(this,!1),i.default.error("Failed to fetch notifications",e),new Error("Failed to fetch notifications")}}async markMetamaskNotificationsAsRead(e){let t=[],r=[];try{const n=e.filter((e=>e.type!==o.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT&&!e.isRead)),s=e.filter((e=>e.type===o.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT&&!e.isRead));if(n.length>0){const e=await b(this,I).getBearerToken();e&&(t=n.map((e=>e.id)),await u.markNotificationsAsRead(e,t).catch((()=>{t=[],i.default.warn("Unable to mark onchain notifications as read")})))}s.length>0&&(r=s.map((e=>e.id)))}catch(e){i.default.warn("Something failed when marking notifications as read",e)}this.update((e=>{const n=e.metamaskNotificationsReadList,s=[...r];e.metamaskNotificationsReadList=[...new Set([...n,...s])],e.metamaskNotificationsList=e.metamaskNotificationsList.map((e=>s.includes(e.id)||t.includes(e.id)?{...e,isRead:!0}:e))})),this.messagingSystem.publish(`${k}:markNotificationsAsRead`,this.state.metamaskNotificationsList)}async updateMetamaskNotificationsList(e){if(this.state.metamaskNotificationsList.some((t=>t.id===e.id)))return;(function(e){try{const t=(0,d.processNotification)(e);if(re(t))return t}catch{return undefined}return undefined})(e)&&this.update((t=>{new Set(t.metamaskNotificationsList.map((e=>e.id))).has(e.id)||(t.metamaskNotificationsList=[e,...t.metamaskNotificationsList],this.messagingSystem.publish(`${k}:notificationsListUpdated`,t.metamaskNotificationsList))}))}}function K(){this.messagingSystem.registerActionHandler(`${k}:updateMetamaskNotificationsList`,this.updateMetamaskNotificationsList.bind(this)),this.messagingSystem.registerActionHandler(`${k}:disableMetamaskNotifications`,this.disableMetamaskNotifications.bind(this)),this.messagingSystem.registerActionHandler(`${k}:selectIsMetamaskNotificationsEnabled`,this.selectIsMetamaskNotificationsEnabled.bind(this))}function W(){this.update((e=>{e.isUpdatingMetamaskNotifications=!1,e.isCheckingAccountsPresence=!1,e.isFetchingMetamaskNotifications=!1,e.isUpdatingMetamaskNotificationsAccount=[]}))}function z(){if(!b(this,I).isSignedIn())throw this.update((e=>{e.isMetamaskNotificationsEnabled=!1})),new Error("User is not signed in.")}async function q(){y(this,N,z).call(this);const e=await b(this,I).getBearerToken(),t=await b(this,C).getStorageKey();if(!e||!t)throw new Error("Missing BearerToken or storage key");return{bearerToken:e,storageKey:t}}function J(e){if(!e)throw new Error("User Storage does not exist")}async function Z(){const e=await b(this,C).getNotificationStorage();if(!e)return null;try{return JSON.parse(e)}catch(e){return i.default.error("Unable to parse User Storage"),null}}function Y(e){this.update((t=>{t.isUpdatingMetamaskNotifications=e}))}function X(e){this.update((t=>{t.isFetchingMetamaskNotifications=e}))}function Q(e){this.update((t=>{t.isCheckingAccountsPresence=e}))}function ee(e){this.update((t=>{const r=new Set([...t.isUpdatingMetamaskNotificationsAccount,...e]);t.isUpdatingMetamaskNotificationsAccount=Array.from(r)}))}function te(e){this.update((t=>{t.isUpdatingMetamaskNotificationsAccount=t.isUpdatingMetamaskNotificationsAccount.filter((t=>!e.includes(t)))}))}r.MetamaskNotificationsController=V;const re=e=>Boolean(e)}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/metamask-notifications.ts"}],[200,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:72,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=72;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[2e3,{"@metamask/base-controller":1241,"@metamask/rpc-errors":2006,"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("@metamask/rpc-errors"),i=e("@metamask/utils"),a="RateLimitController",o={requests:{persist:!1,anonymous:!1}},c=class extends n.BaseController{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:r,state:n,implementations:s}){const c={requests:i.getKnownPropertyNames.call(void 0,s).reduce(((e,t)=>({...e,[t]:{}})),{})};super({name:a,metadata:o,messenger:r,state:{...c,...n}}),this.implementations=s,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${a}:call`,((e,t,...r)=>this.call(e,t,...r)))}async call(e,t,...r){if(this.isRateLimited(t,e))throw s.rpcErrors.limitExceeded({message:`"${t.toString()}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const n=this.implementations[t].method;if(!n)throw new Error("Invalid api type");return n(...r)}isRateLimited(e,t){const r=this.implementations[e].rateLimitCount??this.rateLimitCount;return this.state.requests[e][t]>=r}recordRequest(e,t){const r=this.implementations[e].rateLimitTimeout??this.rateLimitTimeout,n=this.state.requests[e][t]??0;this.update((s=>{0===n&&setTimeout((()=>this.resetRequestCount(e,t)),r),Object.assign(s,{requests:{...s.requests,[e]:{[t]:n+1}}})}))}resetRequestCount(e,t){this.update((r=>{Object.assign(r,{requests:{...r.requests,[e]:{[t]:0}}})}))}};r.RateLimitController=c}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/chunk-37GF32BR.js"}],[2001,{"./chunk-37GF32BR.js":2e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-37GF32BR.js");r.RateLimitController=n.RateLimitController}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/index.js"}],[201,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:73,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=73;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[202,{"../../../shared/constants/network":5047,"bignumber.js":3481,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/network");const o=e=>new i.default(e||"0x0",16).gt(0),c=["0x3","0x2a","0x4"],l={"0x3":{rpcUrl:(0,a.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,a.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,a.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};r.default={version:74,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=74;const r=function(e){var t,r;const n=(null==e?void 0:e.PreferencesController)||{},i=n.preferences||{},a=(null==e?void 0:e.NetworkController)||{},u=(null==a?void 0:a.provider)||{},d=c.filter((e=>e===(null==u?void 0:u.chainId)));if(!i.showTestNetworks&&0===d.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},f=(null===(r=e.CachedBalancesController)||void 0===r?void 0:r.cachedBalances)||{},p=Object.values(h).filter((({chainId:e})=>c.includes(e))).map((({chainId:e})=>e)),m=c.filter((e=>Object.values(f[e]||{}).some(o))),g=(0,s.uniq)([...m,...p,...d]),v=n.frequentRpcListDetail??[];g.forEach((e=>{v.find((t=>t.chainId===e))||v.unshift({rpcUrl:l[e].rpcUrl,chainId:e,ticker:l[e].ticker,nickname:l[e].nickname,rpcPrefs:{}})})),v.length&&(n.frequentRpcListDetail=v);if(d.length){const e=d[0];a.provider={...a.provider,type:"rpc",rpcUrl:l[e].rpcUrl,chainId:e,nickname:l[e].nickname,ticker:l[e].ticker}}return{...e,PreferencesController:{...n},NetworkController:{...a}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[203,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:75,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=75;const r=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[204,{lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:76,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=76;const r=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:r,ignoredCollectibles:n,...s}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...r?{allNfts:r}:{},...n?{ignoredNfts:n}:{},...s},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[2040,{"./chunk-MQYWK4KP.js":2041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-MQYWK4KP.js");r.createSelectedNetworkMiddleware=e=>(t,r,s)=>{if(!t.origin)throw new Error("Request object is lacking an 'origin'");var i;return t.networkClientId=(i=t.origin,e.call(n.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,i)),s()}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/chunk-4FNZCOPF.js"}],[2041,{"@metamask/base-controller":2048,"@metamask/swappable-obj-proxy":2652},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},g=(e,t,r)=>(m(e,t,"read from private field"),r?r.call(e):t.get(e)),v=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},y=(e,t,r,n)=>(m(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),b=(e,t,r)=>(m(e,t,"access private method"),r),w=e("@metamask/base-controller"),_=e("@metamask/swappable-obj-proxy"),k="SelectedNetworkController",T={domains:{persist:!0,anonymous:!1}},S=["npm:","local:"],E="metamask",P={getState:`${k}:getState`,getNetworkClientIdForDomain:`${k}:getNetworkClientIdForDomain`,setNetworkClientIdForDomain:`${k}:setNetworkClientIdForDomain`},M={stateChange:`${k}:stateChange`},I=class extends w.BaseController{constructor({messenger:e,state:t={domains:{}},useRequestQueuePreference:r,onPreferencesStateChange:c,domainProxyMap:h}){super({name:k,metadata:T,messenger:e,state:t}),v(this,i),v(this,o),v(this,l),v(this,d),v(this,f),v(this,n,void 0),v(this,s,void 0),y(this,s,r),y(this,n,h),b(this,i,a).call(this),this.messagingSystem.call("PermissionController:getSubjectNames").filter((e=>void 0===this.state.domains[e])).forEach((e=>this.setNetworkClientIdForDomain(e,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId))),this.messagingSystem.subscribe("PermissionController:stateChange",((e,t)=>{t.forEach((({op:e,path:t})=>{if("subjects"===t[0]&&void 0!==t[1]&&"string"==typeof t[1]){const r=t[1];"add"===e&&void 0===this.state.domains[r]?this.setNetworkClientIdForDomain(r,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId):"remove"===e&&void 0!==this.state.domains[r]&&b(this,l,u).call(this,r)}}))})),this.messagingSystem.subscribe("NetworkController:stateChange",(({selectedNetworkClientId:e},t)=>{t.forEach((({op:t,path:r})=>{if("remove"===t&&"networkConfigurations"===r[0]){const t=r[1];Object.entries(this.state.domains).forEach((([r,n])=>{n===t&&this.setNetworkClientIdForDomain(r,e)}))}}))})),c((({useRequestQueue:e})=>{g(this,s)!==e&&(e?b(this,f,p).call(this):Object.keys(this.state.domains).forEach((e=>{b(this,l,u).call(this,e)})),y(this,s,e))}))}setNetworkClientIdForDomain(e,t){if(g(this,s)){if(e===E)throw new Error(`NetworkClientId for domain "${E}" cannot be set on the SelectedNetworkController`);if(!S.some((t=>e.startsWith(t)))){if(!b(this,d,h).call(this,e))throw new Error("NetworkClientId for domain cannot be called with a domain that has not yet been granted permissions");b(this,o,c).call(this,e,t)}}}getNetworkClientIdForDomain(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");return g(this,s)?this.state.domains[e]??t:t}getProviderAndBlockTracker(e){if(e===E||S.some((t=>e.startsWith(t)))){const e=this.messagingSystem.call("NetworkController:getSelectedNetworkClient");if(void 0===e)throw new Error("Selected network not initialized");return e}let t=g(this,n).get(e);if(void 0===t){let r;if(g(this,s)&&b(this,d,h).call(this,e)){const t=this.getNetworkClientIdForDomain(e);r=this.messagingSystem.call("NetworkController:getNetworkClientById",t)}else if(r=this.messagingSystem.call("NetworkController:getSelectedNetworkClient"),void 0===r)throw new Error("Selected network not initialized");t={provider:_.createEventEmitterProxy.call(void 0,r.provider),blockTracker:_.createEventEmitterProxy.call(void 0,r.blockTracker,{eventFilter:"skipInternal"})},g(this,n).set(e,t)}return t}};n=new WeakMap,s=new WeakMap,i=new WeakSet,a=function(){this.messagingSystem.registerActionHandler(P.getNetworkClientIdForDomain,this.getNetworkClientIdForDomain.bind(this)),this.messagingSystem.registerActionHandler(P.setNetworkClientIdForDomain,this.setNetworkClientIdForDomain.bind(this))},o=new WeakSet,c=function(e,t){const r=this.messagingSystem.call("NetworkController:getNetworkClientById",t),n=this.getProviderAndBlockTracker(e);n.provider.setTarget(r.provider),n.blockTracker.setTarget(r.blockTracker),this.update((r=>{r.domains[e]=t}))},l=new WeakSet,u=function(e){const t=this.messagingSystem.call("NetworkController:getSelectedNetworkClient"),r=g(this,n).get(e);r&&t?(r.provider.setTarget(t.provider),r.blockTracker.setTarget(t.blockTracker)):r&&g(this,n).delete(e),this.update((t=>{delete t.domains[e]}))},d=new WeakSet,h=function(e){return this.messagingSystem.call("PermissionController:hasPermissions",e)},f=new WeakSet,p=function(){g(this,n).forEach(((e,t)=>{const{selectedNetworkClientId:r}=this.messagingSystem.call("NetworkController:getState");b(this,d,h).call(this,t)&&b(this,o,c).call(this,t,r)}))},r.controllerName=k,r.METAMASK_DOMAIN=E,r.SelectedNetworkControllerActionTypes=P,r.SelectedNetworkControllerEventTypes=M,r.SelectedNetworkController=I}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/chunk-MQYWK4KP.js"}],[2042,{"./chunk-4FNZCOPF.js":2040,"./chunk-MQYWK4KP.js":2041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4FNZCOPF.js"),s=e("./chunk-MQYWK4KP.js");r.METAMASK_DOMAIN=s.METAMASK_DOMAIN,r.SelectedNetworkController=s.SelectedNetworkController,r.SelectedNetworkControllerActionTypes=s.SelectedNetworkControllerActionTypes,r.SelectedNetworkControllerEventTypes=s.SelectedNetworkControllerEventTypes,r.createSelectedNetworkMiddleware=n.createSelectedNetworkMiddleware}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/index.js"}],[2043,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[2044,{"./chunk-UJFCPTF3.js":2046,"./chunk-Z4BLTVTB.js":2047},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[2045,{"./chunk-Z4BLTVTB.js":2047,immer:4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[2046,{"./chunk-Z4BLTVTB.js":2047},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2047,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2048,{"./chunk-FTHCJ6HY.js":2043,"./chunk-G42723LG.js":2044,"./chunk-IURK6TKD.js":2045,"./chunk-UJFCPTF3.js":2046,"./chunk-Z4BLTVTB.js":2047},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/index.js"}],[2049,{"@metamask/base-controller":1241,"@metamask/controller-utils":1250,"@metamask/logging-controller":1709,"@metamask/message-manager":2057,"@metamask/rpc-errors":2006,events:3874,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m,g,v,y,b,w,_,k,T,S,E,P,M,I,C,j,A,x,O,N,B,R,L,D,U,H,$,G,F,V,K,W,z,q,J=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Z=(e,t,r)=>(J(e,t,"read from private field"),r?r.call(e):t.get(e)),Y=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},X=(e,t,r,n)=>(J(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Q=(e,t,r)=>(J(e,t,"access private method"),r),ee=e("@metamask/base-controller"),te=e("@metamask/controller-utils"),re=e("@metamask/logging-controller"),ne=e("@metamask/message-manager"),se=e("@metamask/rpc-errors"),ie=e("events"),ae=(n=ie)&&n.__esModule?n:{default:n},oe=e("lodash"),ce={unapprovedPersonalMsgs:{persist:!1,anonymous:!1},unapprovedTypedMessages:{persist:!1,anonymous:!1},unapprovedPersonalMsgCount:{persist:!1,anonymous:!1},unapprovedTypedMessagesCount:{persist:!1,anonymous:!1}},le=class extends ee.BaseController{constructor({messenger:e,getAllState:t,securityProviderRequest:r,getCurrentChainId:n}){super({name:"SignatureController",metadata:ce,messenger:e,state:{unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0}}),Y(this,o),Y(this,l),Y(this,d),Y(this,f),Y(this,m),Y(this,v),Y(this,b),Y(this,_),Y(this,T),Y(this,E),Y(this,M),Y(this,C),Y(this,A),Y(this,O),Y(this,B),Y(this,L),Y(this,U),Y(this,$),Y(this,F),Y(this,K),Y(this,z),Y(this,s,void 0),Y(this,i,void 0),Y(this,a,void 0),X(this,s,t),this.hub=new(0,ae.default),X(this,i,new(0,ne.PersonalMessageManager)(void 0,void 0,r)),X(this,a,new(0,ne.TypedMessageManager)(void 0,void 0,r,void 0,n)),Q(this,A,x).call(this,Z(this,i),"unapprovedPersonalMessage"),Q(this,A,x).call(this,Z(this,a),"unapprovedTypedMessage"),Q(this,O,N).call(this,Z(this,i),((e,t,r)=>{e.unapprovedPersonalMsgs=t,e.unapprovedPersonalMsgCount=r})),Q(this,O,N).call(this,Z(this,a),((e,t,r)=>{e.unapprovedTypedMessages=t,e.unapprovedTypedMessagesCount=r}))}get unapprovedPersonalMessagesCount(){return Z(this,i).getUnapprovedMessagesCount()}get unapprovedTypedMessagesCount(){return Z(this,a).getUnapprovedMessagesCount()}get messages(){return[...Z(this,a).getAllMessages(),...Z(this,i).getAllMessages()].reduce(((e,t)=>(e[t.id]=t,e)),{})}resetState(){this.update((()=>({unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0})))}rejectUnapproved(e){Q(this,_,k).call(this,Z(this,i),e),Q(this,_,k).call(this,Z(this,a),e)}clearUnapproved(){Q(this,T,S).call(this,Z(this,i)),Q(this,T,S).call(this,Z(this,a))}async newUnsignedPersonalMessage(e,t){return Q(this,o,c).call(this,Z(this,i),te.ApprovalType.PersonalSign,re.SigningMethod.PersonalSign,"Personal Message",Q(this,l,u).bind(this),e,t)}async newUnsignedTypedMessage(e,t,r,n){const s=Q(this,z,q).call(this,r);return Q(this,o,c).call(this,Z(this,a),te.ApprovalType.EthSignTypedData,s,"Typed Message",Q(this,d,h).bind(this),e,t,r,n)}setDeferredSignSuccess(e,t){Q(this,f,p).call(this,Q(this,m,g),e,t)}setMessageMetadata(e,t){Q(this,f,p).call(this,Q(this,v,y),e,t)}setDeferredSignError(e){Q(this,f,p).call(this,Q(this,b,w),e)}setTypedMessageInProgress(e){Z(this,a).setMessageStatusInProgress(e)}setPersonalMessageInProgress(e){Z(this,i).setMessageStatusInProgress(e)}};s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=async function(e,t,r,n,s,i,a,o,c){let l;try{const u=await e.addUnapprovedMessage(i,a,o),d={...i,metamaskId:u,...o&&{version:o}},h=e.waitForFinishStatus(d,n);try{Q(this,K,W).call(this,r,re.SigningStage.Proposed,d);l=(await Q(this,$,G).call(this,d,t)).resultCallbacks}catch{throw Q(this,K,W).call(this,r,re.SigningStage.Rejected,d),Q(this,C,j).call(this,e,u),se.providerErrors.userRejectedRequest("User rejected the request.")}await s(d,c);const f=await h;return Q(this,K,W).call(this,r,re.SigningStage.Signed,d),l?.success(f),f}catch(e){throw l?.error(e),e}},l=new WeakSet,u=async function(e){return await Q(this,E,P).call(this,Z(this,i),te.ApprovalType.PersonalSign,e,(async e=>await this.messagingSystem.call("KeyringController:signPersonalMessage",e)))},d=new WeakSet,h=async function(e,t={parseJsonData:!0}){const{version:r}=e;return await Q(this,E,P).call(this,Z(this,a),te.ApprovalType.EthSignTypedData,e,(async e=>{const n=t.parseJsonData?Q(this,F,V).call(this,e,r):e;return await this.messagingSystem.call("KeyringController:signTypedMessage",n,r)}))},f=new WeakSet,p=function(e,...t){const r=[Z(this,i),Z(this,a)];for(const n of r)if(e(n,...t))return!0;throw new Error("Message not found")},m=new WeakSet,g=function(e,t,r){try{return e.setMessageStatusSigned(t,r),!0}catch(e){return!1}},v=new WeakSet,y=function(e,t,r){try{return e.setMetadata(t,r),!0}catch(e){return!1}},b=new WeakSet,w=function(e,t){try{return e.rejectMessage(t),!0}catch(e){return!1}},_=new WeakSet,k=function(e,t){Object.keys(e.getUnapprovedMessages()).forEach((r=>{Q(this,C,j).call(this,e,r,t)}))},T=new WeakSet,S=function(e){e.update({unapprovedMessages:{},unapprovedMessagesCount:0})},E=new WeakSet,P=async function(e,t,r,n){console.info(`MetaMaskController - ${t}`);const s=r.metamaskId;try{const i=await e.approveMessage(r);try{const r=await n(i);return this.hub.emit(`${t}:signed`,{signature:r,messageId:s}),i.deferSetAsSigned||e.setMessageStatusSigned(s,r),r}catch(e){throw this.hub.emit(`${s}:signError`,{error:e}),e}}catch(r){throw console.info(`MetaMaskController - ${t} failed.`,r),Q(this,M,I).call(this,e,s,r.message),r}},M=new WeakSet,I=function(e,t,r){e instanceof ne.TypedMessageManager?e.setMessageStatusErrored(t,r):Q(this,C,j).call(this,e,t)},C=new WeakSet,j=function(e,t,r){if(r){const e=Q(this,U,H).call(this,t);this.hub.emit("cancelWithReason",{message:e,reason:r})}e.rejectMessage(t)},A=new WeakSet,x=function(e,t){e.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),e.hub.on("unapprovedMessage",(e=>{this.hub.emit(t,e)}))},O=new WeakSet,N=function(e,t){e.subscribe((e=>{const r=Q(this,B,R).call(this,e.unapprovedMessages);this.update((()=>{const n={...this.state};return t(n,r,e.unapprovedMessagesCount),n}))}))},B=new WeakSet,R=function(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=Q(this,L,D).call(this,n);t[r]=s}return t},L=new WeakSet,D=function(e){const{messageParams:t,...r}=e;return{...r,msgParams:t}},U=new WeakSet,H=function(e){return{...this.state.unapprovedPersonalMsgs,...this.state.unapprovedTypedMessages}[e]},$=new WeakSet,G=async function(e,t){const r=e.metamaskId,n=e.origin||te.ORIGIN_METAMASK,s=oe.cloneDeep.call(void 0,e);return await this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t,requestData:s,expectsResult:!0},!0)},F=new WeakSet,V=function(e,t){return"V1"===t||"string"!=typeof e.data?e:{...e,data:JSON.parse(e.data)}},K=new WeakSet,W=function(e,t,r){this.messagingSystem.call("LoggingController:add",{type:re.LogType.EthSignLog,data:{signingMethod:e,stage:t,signingData:r}})},z=new WeakSet,q=function(e){let t=re.SigningMethod.EthSignTypedData;return"V3"===e?t=re.SigningMethod.EthSignTypedDataV3:"V4"===e&&(t=re.SigningMethod.EthSignTypedDataV4),t},r.SignatureController=le}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/chunk-BQZTUY4G.js"}],[205,{"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)&&(0,n.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")&&delete e.PreferencesController.frequentRpcListDetail;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-082.ts"}],[2050,{"./chunk-BQZTUY4G.js":2049},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-BQZTUY4G.js");r.SignatureController=n.SignatureController}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/index.js"}],[2051,{"@metamask/controller-utils":1250,"@metamask/eth-sig-util":1397,"@metamask/utils":2787,buffer:3576,jsonschema:4235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/controller-utils"),s=e("@metamask/eth-sig-util"),i=e("@metamask/utils"),a=e("jsonschema"),o=/^[0-9A-Fa-f]+$/gu;function c(e,t){if(!e||"string"!=typeof e||!n.isValidHexAddress.call(void 0,e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=i.remove0x.call(void 0,e);if(t.match(o))return i.add0x.call(void 0,t)}catch(e){}return i.bytesToHex.call(void 0,t.from(e,"utf8"))},r.validateSignMessageData=function(e){const{from:t,data:r}=e;if(c(t,"from"),!r||"string"!=typeof r)throw new Error(`Invalid message "data": ${r} must be a valid string.`)},r.validateTypedSignMessageDataV1=function(e){if(c(e.from,"from"),!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{s.typedSignatureHash.call(void 0,e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},r.validateTypedSignMessageDataV3V4=function(e,t){if(c(e.from,"from"),!e.data||Array.isArray(e.data)||"object"!=typeof e.data&&"string"!=typeof e.data)throw new Error('Invalid message "data": Must be a valid string or object.');let r;if("object"==typeof e.data)r=e.data;else try{r=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if(a.validate.call(void 0,r,s.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.");if(!t)throw new Error("Current chainId cannot be null or undefined.");let{chainId:n}=r.domain;if(n){"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10));const e=parseInt(t,16);if(Number.isNaN(e))throw new Error(`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`);if(n!==e)throw new Error(`Provided chainId "${n}" must match the active chainId "${e}"`)}},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;c(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;c(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/chunk-2AFDP6MS.js"}],[2052,{"./chunk-2AFDP6MS.js":2051,"./chunk-LYUOJCKO.js":2054,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-LYUOJCKO.js"),s=e("./chunk-2AFDP6MS.js"),i=e("uuid"),a=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}async addUnapprovedMessageAsync(e,t){s.validateEncryptionPublicKeyMessageData.call(void 0,e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return n(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){t&&(e.origin=t.origin);const r=i.v1.call(void 0),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_getEncryptionPublicKey"};return await this.addMessage(n),this.hub.emit("unapprovedMessage",{...e,metamaskId:r}),r}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}},o=a;r.EncryptionPublicKeyManager=a,r.EncryptionPublicKeyManager_default=o}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/chunk-EY2U5VUP.js"}],[2053,{"./chunk-2AFDP6MS.js":2051,"./chunk-LYUOJCKO.js":2054,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-LYUOJCKO.js"),s=e("./chunk-2AFDP6MS.js"),i=e("uuid"),a=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}async addUnapprovedMessageAsync(e,t){s.validateDecryptedMessageData.call(void 0,e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return n(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return n(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return n(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=s.normalizeMessageData.call(void 0,e.data);const r=i.v1.call(void 0),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_decrypt"};return await this.addMessage(n),this.hub.emit("unapprovedMessage",{...e,metamaskId:r}),r}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}};r.DecryptMessageManager=a}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/chunk-KB2DH75H.js"}],[2054,{"@metamask/base-controller":1241,events:3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("events"),i=class extends n.BaseControllerV1{constructor(e,t,r,n,i){super(e,t),this.hub=new(0,s.EventEmitter),this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=n??[],this.getCurrentChainId=i,this.initialize()}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}async securityCheck(e){if(this.securityProviderRequest){const t=await this.securityProviderRequest(e,e.type);return{...e,securityProviderResponse:t}}return e}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addMessage(e){const t=await this.securityCheck(e);this.messages.push(t),this.saveMessageList()}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}async waitForFinishStatus(e,t){const{metamaskId:r,...n}=e;return new Promise(((e,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}))}},a=i;r.AbstractMessageManager=i,r.AbstractMessageManager_default=a}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/chunk-LYUOJCKO.js"}],[2055,{"./chunk-2AFDP6MS.js":2051,"./chunk-LYUOJCKO.js":2054,"@metamask/controller-utils":1250,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-LYUOJCKO.js"),s=e("./chunk-2AFDP6MS.js"),i=e("@metamask/controller-utils"),a=e("uuid"),o=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}async addUnapprovedMessage(e,t){s.validateSignMessageData.call(void 0,e),t&&(e.origin=t.origin),e.data=s.normalizeMessageData.call(void 0,e.data);const r=i.detectSIWE.call(void 0,e),n={...e,siwe:r},o=a.v1.call(void 0),c={id:o,messageParams:n,securityAlertResponse:t?.securityAlertResponse,status:"unapproved",time:Date.now(),type:"personal_sign"};return await this.addMessage(c),this.hub.emit("unapprovedMessage",{...n,metamaskId:o}),o}prepMessageForSigning(e){const{metamaskId:t,...r}=e;return Promise.resolve(r)}},c=o;r.PersonalMessageManager=o,r.PersonalMessageManager_default=c}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/chunk-MWCEXHYT.js"}],[2056,{"./chunk-2AFDP6MS.js":2051,"./chunk-LYUOJCKO.js":2054,uuid:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-LYUOJCKO.js"),s=e("./chunk-2AFDP6MS.js"),i=e("uuid"),a=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}async addUnapprovedMessage(e,t,r){if("V1"===r&&s.validateTypedSignMessageDataV1.call(void 0,e),"V3"===r||"V4"===r){const t=this.getCurrentChainId?.();s.validateTypedSignMessageDataV3V4.call(void 0,e,t)}"string"==typeof e.data||"V3"!==r&&"V4"!==r||(e.data=JSON.stringify(e.data));const n=i.v1.call(void 0),a={...e,metamaskId:n,version:r};t&&(e.origin=t.origin);const o={id:n,messageParams:e,securityAlertResponse:t?.securityAlertResponse,status:"unapproved",time:Date.now(),type:"eth_signTypedData"};return await this.addMessage(o),this.hub.emit("unapprovedMessage",a),n}setMessageStatusErrored(e,t){const r=this.getMessage(e);r&&(r.error=t,this.updateMessage(r),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){const{metamaskId:t,version:r,...n}=e;return Promise.resolve(n)}},o=a;r.TypedMessageManager=a,r.TypedMessageManager_default=o}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/chunk-SMQI2S5X.js"}],[2057,{"./chunk-2AFDP6MS.js":2051,"./chunk-EY2U5VUP.js":2052,"./chunk-KB2DH75H.js":2053,"./chunk-LYUOJCKO.js":2054,"./chunk-MWCEXHYT.js":2055,"./chunk-SMQI2S5X.js":2056},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-KB2DH75H.js"),s=e("./chunk-EY2U5VUP.js"),i=e("./chunk-MWCEXHYT.js"),a=e("./chunk-SMQI2S5X.js"),o=e("./chunk-LYUOJCKO.js");e("./chunk-2AFDP6MS.js"),r.AbstractMessageManager=o.AbstractMessageManager,r.DecryptMessageManager=n.DecryptMessageManager,r.EncryptionPublicKeyManager=s.EncryptionPublicKeyManager,r.PersonalMessageManager=i.PersonalMessageManager,r.TypedMessageManager=a.TypedMessageManager}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/index.js"}],[2059,{"./constants":2060,"./types":2062,"./utils":2063,"@ethersproject/bytes":497,"@metamask/controller-utils":2126,"@metamask/eth-query":1395,"@metamask/polling-controller":1929,"@metamask/transaction-controller":2202,"bignumber.js":2227,events:3874,"lodash/cloneDeep":4362},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d,h,f,p=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_INTERVAL=void 0;const g=e("@ethersproject/bytes"),v=e("@metamask/controller-utils"),y=m(e("@metamask/eth-query")),b=e("@metamask/polling-controller"),w=e("@metamask/transaction-controller"),_=e("bignumber.js"),k=m(e("events")),T=m(e("lodash/cloneDeep")),S=e("./constants"),E=e("./types"),P=e("./utils");r.DEFAULT_INTERVAL=5e3;const M="`ethQuery` is not defined on SmartTransactionsController";class I extends b.StaticIntervalPollingControllerV1{constructor({onNetworkStateChange:e,getNonceLock:t,provider:i,confirmExternalTransaction:a,getTransactions:o,trackMetaMetricsEvent:c,getNetworkClientById:l,getMetaMetricsProps:u},d,h){super(d,h),n.add(this),this.name="SmartTransactionsController",this.defaultConfig={interval:r.DEFAULT_INTERVAL,chainId:v.ChainId.mainnet,clientId:"default",supportedChainIds:[v.ChainId.mainnet,v.ChainId.sepolia]},this.defaultState={smartTransactionsState:{smartTransactions:{},userOptIn:undefined,userOptInV2:undefined,fees:{approvalTxFees:undefined,tradeTxFees:undefined},liveness:!0,livenessByChainId:{[v.ChainId.mainnet]:!0,[v.ChainId.sepolia]:!0},feesByChainId:{[v.ChainId.mainnet]:{approvalTxFees:undefined,tradeTxFees:undefined},[v.ChainId.sepolia]:{approvalTxFees:undefined,tradeTxFees:undefined}}}},this.initialize(),this.setIntervalLength(this.config.interval),this.getNonceLock=t,this.ethQuery=undefined,this.confirmExternalTransaction=a,this.getRegularTransactions=o,this.trackMetaMetricsEvent=c,this.getNetworkClientById=l,this.getMetaMetricsProps=u,this.initializeSmartTransactionsForChainId(),p(this,n,"m",s).call(this),e((({providerConfig:e})=>{const{chainId:t}=e,r=t!==this.config.chainId;this.configure({chainId:t}),this.initializeSmartTransactionsForChainId(),r&&p(this,n,"m",s).call(this),this.checkPoll(this.state),this.ethQuery=new y.default(i)})),this.subscribe((e=>this.checkPoll(e))),this.eventEmitter=new k.default}async fetch(e,t){const{clientId:r}=this.config,n=Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json"},r&&{"X-Client-Id":r})});return(0,P.handleFetch)(e,n)}async _executePoll(e){const t=p(this,n,"m",u).call(this,{networkClientId:e});return this.config.supportedChainIds.includes(t)?this.updateSmartTransactions({networkClientId:e}):Promise.resolve()}checkPoll(e){const{smartTransactions:t}=e.smartTransactionsState,r=t[this.config.chainId],n=null==r?void 0:r.filter(P.isSmartTransactionPending);!this.timeoutHandle&&(null==n?void 0:n.length)>0?this.poll():this.timeoutHandle&&0===(null==n?void 0:n.length)&&this.stop()}initializeSmartTransactionsForChainId(){var e;if(this.config.supportedChainIds.includes(this.config.chainId)){const{smartTransactionsState:t}=this.state;this.update({smartTransactionsState:Object.assign(Object.assign({},t),{smartTransactions:Object.assign(Object.assign({},t.smartTransactions),{[this.config.chainId]:null!==(e=t.smartTransactions[this.config.chainId])&&void 0!==e?e:[]})})})}}async poll(e){const{chainId:t,supportedChainIds:r}=this.config;e&&this.configure({interval:e},!1,!1),this.timeoutHandle&&clearInterval(this.timeoutHandle),r.includes(t)&&(this.timeoutHandle=setInterval((()=>{(0,v.safelyExecute)((async()=>this.updateSmartTransactions()))}),this.config.interval),await(0,v.safelyExecute)((async()=>this.updateSmartTransactions())))}async stop(){this.timeoutHandle&&clearInterval(this.timeoutHandle),this.timeoutHandle=undefined}setOptInState(e){this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{userOptInV2:e})})}trackStxStatusChange(e,t){let r=(0,T.default)(e);r=Object.assign(Object.assign({},(0,T.default)(t)),r),r.status!==(null==t?void 0:t.status)&&this.trackMetaMetricsEvent({event:S.MetaMetricsEventName.StxStatusUpdated,category:S.MetaMetricsEventCategory.Transactions,properties:(0,P.getSmartTransactionMetricsProperties)(r),sensitiveProperties:(0,P.getSmartTransactionMetricsSensitiveProperties)(r)})}isNewSmartTransaction(e){const{chainId:t}=this.config,{smartTransactionsState:r}=this.state,{smartTransactions:n}=r,s=n[t],i=null==s?void 0:s.findIndex((t=>t.uuid===e));return-1===i||i===undefined}updateSmartTransaction(e,{networkClientId:t}={}){let{ethQuery:r,config:{chainId:s}}=this;if(t){const e=this.getNetworkClientById(t);s=e.configuration.chainId,r=new y.default(e.provider)}p(this,n,"m",o).call(this,e,{chainId:s,ethQuery:r})}async updateSmartTransactions({networkClientId:e}={}){const{smartTransactions:t}=this.state.smartTransactionsState,r=t[p(this,n,"m",u).call(this,{networkClientId:e})].filter(P.isSmartTransactionPending).map((e=>e.uuid));r.length>0&&this.fetchSmartTransactionsStatus(r,{networkClientId:e})}async fetchSmartTransactionsStatus(e,{networkClientId:t}={}){const r=new URLSearchParams({uuids:e.join(",")}),s=p(this,n,"m",u).call(this,{networkClientId:t}),i=p(this,n,"m",d).call(this,{networkClientId:t}),a=`${(0,P.getAPIRequestURL)(E.APIType.BATCH_STATUS,s)}?${r.toString()}`,c=await this.fetch(a);for(const[e,t]of Object.entries(c)){const r={statusMetadata:t,status:(0,P.calculateStatus)(t),cancellable:(0,P.isSmartTransactionCancellable)(t),uuid:e};await p(this,n,"m",o).call(this,r,{chainId:s,ethQuery:i})}return c}async addNonceToTransaction(e){const t=await this.getNonceLock(e.from),r=t.nextNonce;return t.releaseLock(),Object.assign(Object.assign({},e),{nonce:`0x${r.toString(16)}`})}clearFees(){const e={approvalTxFees:undefined,tradeTxFees:undefined};return this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{fees:e})}),e}async getFees(e,t,{networkClientId:r}={}){const s=p(this,n,"m",u).call(this,{networkClientId:r}),i=[];let a;if(t){const r=await this.addNonceToTransaction(t);i.push(r),a=Object.assign(Object.assign({},e),{nonce:(0,P.incrementNonceInHex)(r.nonce)})}else a=e.nonce?e:await this.addNonceToTransaction(e);i.push(a);const o=await this.fetch((0,P.getAPIRequestURL)(E.APIType.GET_FEES,s),{method:"POST",body:JSON.stringify({txs:i})});let c,l;return t?(c=null==o?void 0:o.txs[0],l=null==o?void 0:o.txs[1]):l=null==o?void 0:o.txs[0],this.update({smartTransactionsState:Object.assign(Object.assign(Object.assign({},this.state.smartTransactionsState),s===this.config.chainId&&{fees:{approvalTxFees:c,tradeTxFees:l}}),{feesByChainId:Object.assign(Object.assign({},this.state.smartTransactionsState.feesByChainId),{[s]:{approvalTxFees:c,tradeTxFees:l}})})}),{approvalTxFees:c,tradeTxFees:l}}async submitSignedTransactions({transactionMeta:e,txParams:t,signedTransactions:r,signedCanceledTransactions:s,networkClientId:i}){var a;const c=p(this,n,"m",u).call(this,{networkClientId:i}),l=p(this,n,"m",d).call(this,{networkClientId:i}),h=await this.fetch((0,P.getAPIRequestURL)(E.APIType.SUBMIT_TRANSACTIONS,c),{method:"POST",body:JSON.stringify({rawTxs:r,rawCancelTxs:s})}),f=Date.now();let m;try{const e=await(0,v.query)(l,"getBalance",[null==t?void 0:t.from]);m=new _.BigNumber(e).toString(16)}catch(e){console.error("provider error",e)}let y,b,w={};!t.nonce&&(b=await this.getNonceLock(null==t?void 0:t.from),y=(0,g.hexlify)(b.nextNonce),w=b.nonceDetails,t&&(null!==(a=t.nonce)&&void 0!==a||(t.nonce=y)));const k=Object.assign(Object.assign({},h),{txHash:(0,P.getTxHash)(r[0])});try{await p(this,n,"m",o).call(this,{chainId:c,nonceDetails:w,preTxBalance:m,status:E.SmartTransactionStatuses.PENDING,time:f,txParams:t,uuid:k.uuid,txHash:k.txHash,cancellable:!0,type:(null==e?void 0:e.type)||"swap"},{chainId:c,ethQuery:l})}finally{null==b||b.releaseLock()}return k}async cancelSmartTransaction(e,{networkClientId:t}={}){const r=p(this,n,"m",u).call(this,{networkClientId:t});await this.fetch((0,P.getAPIRequestURL)(E.APIType.CANCEL,r),{method:"POST",body:JSON.stringify({uuid:e})})}async fetchLiveness({networkClientId:e}={}){const t=p(this,n,"m",u).call(this,{networkClientId:e});let r=!1;try{const e=await this.fetch((0,P.getAPIRequestURL)(E.APIType.LIVENESS,t));r=Boolean(e.lastBlock)}catch(e){console.log('"fetchLiveness" API call failed')}return this.update({smartTransactionsState:Object.assign(Object.assign(Object.assign({},this.state.smartTransactionsState),t===this.config.chainId&&{liveness:r}),{livenessByChainId:Object.assign(Object.assign({},this.state.smartTransactionsState.livenessByChainId),{[t]:r})})}),r}async setStatusRefreshInterval(e){e!==this.config.interval&&this.configure({interval:e},!1,!1)}getTransactions({addressFrom:e,status:t}){return p(this,n,"m",h).call(this).filter((r=>{var n;return r.status===t&&(null===(n=r.txParams)||void 0===n?void 0:n.from)===e}))}getSmartTransactionByMinedTxHash(e){if(!e)return undefined;return p(this,n,"m",h).call(this).find((t=>{var r,n;return(null===(n=null===(r=t.statusMetadata)||void 0===r?void 0:r.minedHash)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()}))}wipeSmartTransactions({address:e,ignoreNetwork:t}){if(!e)return;const r=e.toLowerCase();if(t){const{smartTransactions:e}=this.state.smartTransactionsState;Object.keys(e).forEach((e=>{const t=e;p(this,n,"m",f).call(this,{chainId:t,addressLowerCase:r})}))}else p(this,n,"m",f).call(this,{chainId:this.config.chainId,addressLowerCase:r})}}r.default=I,n=new WeakSet,s=function(){const{smartTransactions:e}=this.state.smartTransactionsState,t=v.ChainId.mainnet,r=e[t];if(!r)return;const n=new Set,s=[];for(const e of r)n.has(e.uuid)||(n.add(e.uuid),s.push(e));this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{smartTransactions:Object.assign(Object.assign({},e),{[t]:s})})})},i=function(e,{chainId:t=this.config.chainId}){var r;const{smartTransactionsState:n}=this.state,{smartTransactions:s}=n,i=null!==(r=s[t])&&void 0!==r?r:[],a=null==i?void 0:i.findIndex((t=>t.uuid===e.uuid));-1!==a&&this.update({smartTransactionsState:Object.assign(Object.assign({},n),{smartTransactions:Object.assign(Object.assign({},n.smartTransactions),{[t]:n.smartTransactions[t].map(((t,r)=>r===a?Object.assign(Object.assign({},t),e):t))})})})},a=async function(e){const t=await this.getMetaMetricsProps();e.accountHardwareType=null==t?void 0:t.accountHardwareType,e.accountType=null==t?void 0:t.accountType,e.deviceModel=null==t?void 0:t.deviceModel},o=async function(e,{chainId:t=this.config.chainId,ethQuery:r=this.ethQuery}){var s;const{smartTransactionsState:o}=this.state,{smartTransactions:c}=o,u=null!==(s=c[t])&&void 0!==s?s:[],d=null==u?void 0:u.findIndex((t=>t.uuid===e.uuid)),h=this.isNewSmartTransaction(e.uuid);if(this.ethQuery===undefined)throw new Error(M);if(h&&await p(this,n,"m",a).call(this,e),this.trackStxStatusChange(e,h?undefined:u[d]),h){const r=null==u?void 0:u.findIndex((t=>{var r,n,s;return(null===(r=t.txParams)||void 0===r?void 0:r.nonce)===(null===(n=e.txParams)||void 0===n?void 0:n.nonce)&&(null===(s=t.status)||void 0===s?void 0:s.startsWith("cancelled"))})),n=[(0,T.default)(e)],s=Object.assign(Object.assign({},e),{history:n}),i=r>-1?u.slice(0,r).concat(u.slice(r+1)).concat(s):u.concat(s);this.update({smartTransactionsState:Object.assign(Object.assign({},o),{smartTransactions:Object.assign(Object.assign({},o.smartTransactions),{[t]:i})})})}else if(this.eventEmitter.emit(`${e.uuid}:smartTransaction`,e),e.status!==E.SmartTransactionStatuses.SUCCESS&&e.status!==E.SmartTransactionStatuses.REVERTED||e.confirmed)p(this,n,"m",i).call(this,e,{chainId:t});else{const s=u[d],i=Object.assign(Object.assign({},s),e);await p(this,n,"m",l).call(this,i,{chainId:t,ethQuery:r})}},c=function(e){if(!e)return!0;const t=this.getRegularTransactions(),r=null==t?void 0:t.find((t=>{var r;return(null===(r=t.hash)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()}));return!r||![w.TransactionStatus.confirmed,w.TransactionStatus.submitted].includes(r.status)},l=async function(e,{chainId:t=this.config.chainId,ethQuery:r=this.ethQuery}){var s;if(r===undefined)throw new Error(M);const a=null===(s=e.statusMetadata)||void 0===s?void 0:s.minedHash;try{const s=await(0,v.query)(r,"getTransactionReceipt",[a]),o=await(0,v.query)(r,"getTransactionByHash",[a]),l=null==o?void 0:o.maxFeePerGas,u=null==o?void 0:o.maxPriorityFeePerGas;if(null==s?void 0:s.blockNumber){const o=await(0,v.query)(r,"getBlockByNumber",[null==s?void 0:s.blockNumber,!1]),d=null==o?void 0:o.baseFeePerGas,h=Object.assign(Object.assign({},e.txParams),{maxFeePerGas:l,maxPriorityFeePerGas:u}),f=Object.assign(Object.assign({},e),{id:e.uuid,status:w.TransactionStatus.confirmed,hash:a,txParams:h}),m=(0,P.snapshotFromTxMeta)(f),g=(0,P.replayHistory)(f.history),y=(0,P.generateHistoryEntry)(g,m,"txStateManager: setting status to confirmed"),b=y.length>0?Object.assign(Object.assign({},f),{history:f.history.concat(y)}):f;p(this,n,"m",c).call(this,a)&&this.confirmExternalTransaction(b,s,d),this.trackMetaMetricsEvent({event:S.MetaMetricsEventName.StxConfirmed,category:S.MetaMetricsEventCategory.Transactions,properties:(0,P.getSmartTransactionMetricsProperties)(e),sensitiveProperties:(0,P.getSmartTransactionMetricsSensitiveProperties)(e)}),p(this,n,"m",i).call(this,Object.assign(Object.assign({},e),{confirmed:!0}),{chainId:t})}}catch(e){this.trackMetaMetricsEvent({event:S.MetaMetricsEventName.StxConfirmationFailed,category:S.MetaMetricsEventCategory.Transactions}),console.error("confirm error",e)}},u=function({networkClientId:e}={}){return e?this.getNetworkClientById(e).configuration.chainId:this.config.chainId},d=function({networkClientId:e}={}){if(e)return new y.default(this.getNetworkClientById(e).provider);if(this.ethQuery===undefined)throw new Error(M);return this.ethQuery},h=function(){const{smartTransactions:e}=this.state.smartTransactionsState,{chainId:t}=this.config,r=null==e?void 0:e[t];return r&&0!==r.length?r:[]},f=function({chainId:e,addressLowerCase:t}){const{smartTransactions:r}=this.state.smartTransactionsState,n=null==r?void 0:r[e];if(!n||0===n.length)return;const s=n.filter((e=>{var r;return(null===(r=e.txParams)||void 0===r?void 0:r.from)!==t}));this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{smartTransactions:Object.assign(Object.assign({},r),{[e]:s})})})}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/SmartTransactionsController.js"}],[206,{"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"network")&&(0,n.hasProperty)(e.NetworkController,"networkId")&&delete e.NetworkController.network;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-084.ts"}],[2060,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsEventCategory=r.MetaMetricsEventName=r.API_BASE_URL=void 0,r.API_BASE_URL="https://transaction.api.cx.metamask.io",function(e){e.StxStatusUpdated="STX Status Updated",e.StxConfirmed="STX Confirmed",e.StxConfirmationFailed="STX Confirmation Failed"}(r.MetaMetricsEventName||(r.MetaMetricsEventName={})),function(e){e.Transactions="Transactions"}(r.MetaMetricsEventCategory||(r.MetaMetricsEventCategory={}))}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/constants.js"}],[2061,{"./SmartTransactionsController":2059},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const s=n(e("./SmartTransactionsController"));r.default=s.default}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/index.js"}],[2063,{"../package.json":2231,"./constants":2060,"./types":2062,"@ethereumjs/tx":2079,"@ethereumjs/util":2104,"@ethersproject/bytes":497,"bignumber.js":2227,buffer:3576,"fast-json-patch":3908,lodash:4382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getSmartTransactionMetricsSensitiveProperties=r.getSmartTransactionMetricsProperties=r.getTxHash=r.incrementNonceInHex=r.isSmartTransactionCancellable=r.handleFetch=r.mapKeysToCamel=r.getStxProcessingTime=r.snapshotFromTxMeta=r.replayHistory=r.generateHistoryEntry=r.calculateStatus=r.getAPIRequestURL=r.isSmartTransactionStatusResolved=r.isSmartTransactionPending=void 0;const s=e("@ethereumjs/tx"),i=e("@ethereumjs/util"),a=e("@ethersproject/bytes"),o=e("bignumber.js"),c=n(e("fast-json-patch")),l=n(e("lodash")),u=e("./constants"),d=e("./types"),h=n(e("../package.json"));r.isSmartTransactionPending=function(e){return e.status===d.SmartTransactionStatuses.PENDING};r.isSmartTransactionStatusResolved=e=>"uuid_not_found"===e,r.getAPIRequestURL=function(e,t){const r=parseInt(t,16);switch(e){case d.APIType.GET_FEES:return`${u.API_BASE_URL}/networks/${r}/getFees`;case d.APIType.ESTIMATE_GAS:return`${u.API_BASE_URL}/networks/${r}/estimateGas`;case d.APIType.SUBMIT_TRANSACTIONS:return`${u.API_BASE_URL}/networks/${r}/submitTransactions?stxControllerVersion=${h.default.version}`;case d.APIType.CANCEL:return`${u.API_BASE_URL}/networks/${r}/cancel`;case d.APIType.BATCH_STATUS:return`${u.API_BASE_URL}/networks/${r}/batchStatus`;case d.APIType.LIVENESS:return`${u.API_BASE_URL}/networks/${r}/health`;default:throw new Error("Invalid APIType")}};r.calculateStatus=e=>{if((0,r.isSmartTransactionStatusResolved)(e))return d.SmartTransactionStatuses.RESOLVED;const t=[d.SmartTransactionCancellationReason.WOULD_REVERT,d.SmartTransactionCancellationReason.TOO_CHEAP,d.SmartTransactionCancellationReason.DEADLINE_MISSED,d.SmartTransactionCancellationReason.INVALID_NONCE,d.SmartTransactionCancellationReason.USER_CANCELLED,d.SmartTransactionCancellationReason.PREVIOUS_TX_CANCELLED];if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.NOT_MINED){if(e.cancellationReason===d.SmartTransactionCancellationReason.NOT_CANCELLED)return d.SmartTransactionStatuses.PENDING;const r=t.findIndex((t=>t===e.cancellationReason))>-1;if(e.cancellationReason&&r)return e.isSettled?d.cancellationReasonToStatusMap[e.cancellationReason]:d.SmartTransactionStatuses.PENDING}else{if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.SUCCESS)return d.SmartTransactionStatuses.SUCCESS;if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.CANCELLED)return d.SmartTransactionStatuses.CANCELLED;if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.REVERTED)return d.SmartTransactionStatuses.REVERTED;if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.UNKNOWN)return d.SmartTransactionStatuses.UNKNOWN}return d.SmartTransactionStatuses.UNKNOWN},r.generateHistoryEntry=function(e,t,r){const n=c.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n},r.replayHistory=function(e){return l.default.cloneDeep(e).reduce(((e,t)=>c.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t=Object.assign({},e);return delete t.history,l.default.cloneDeep(t)};r.getStxProcessingTime=e=>e?Math.round((Date.now()-e)/1e3):undefined;r.mapKeysToCamel=e=>{if(!l.default.isObject(e))return e;const t=l.default.mapValues(e,(e=>l.default.isArray(e)?e.map(r.mapKeysToCamel):l.default.isObject(e)?(0,r.mapKeysToCamel)(e):e));return l.default.mapKeys(t,((e,t)=>l.default.camelCase(t)))},r.handleFetch=async function(e,t){const n=await fetch(e,t),s=await n.json();if(!n.ok)throw console.log("response",n),new Error(`Fetch error:${JSON.stringify(Object.assign({status:n.status},(0,r.mapKeysToCamel)(s)))}`);return s};r.isSmartTransactionCancellable=e=>e.minedTx===d.SmartTransactionMinedTx.NOT_MINED&&(!e.cancellationReason||e.cancellationReason===d.SmartTransactionCancellationReason.NOT_CANCELLED);r.incrementNonceInHex=e=>{const t=new o.BigNumber(e,16).toString(10);return(0,a.hexlify)(Number(t)+1)};r.getTxHash=e=>{if(!e)return"";const r=s.TransactionFactory.fromSerializedData(t.from(e.slice(2),"hex")).hash();return(0,i.bytesToHex)(r)};r.getSmartTransactionMetricsProperties=e=>{if(!e)return{};const t=e.statusMetadata;return{stx_status:e.status,type:e.type,processing_time:(0,r.getStxProcessingTime)(e.time),is_smart_transaction:!0,stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:!0,stx_duplicated:null==t?void 0:t.duplicated,stx_timed_out:null==t?void 0:t.timedOut,stx_proxied:null==t?void 0:t.proxied}};r.getSmartTransactionMetricsSensitiveProperties=e=>e?{token_from_symbol:e.sourceTokenSymbol,token_to_symbol:e.destinationTokenSymbol,account_hardware_type:e.accountHardwareType,account_type:e.accountType,device_model:e.deviceModel}:{}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/utils.js"}],[2064,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n,s,i,a){try{var o=e[i](a),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,s)}t.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(s,i){var a=e.apply(t,r);function o(e){n(a,s,i,o,c,"next",e)}function c(e){n(a,s,i,o,c,"throw",e)}o(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/asyncToGenerator.js"}],[2065,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/interopRequireDefault.js"}],[2066,{"./typeof.js":2067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./typeof.js").default;function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t.exports=s=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var e,r={},i=Object.prototype,a=i.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var s=t&&t.prototype instanceof w?t:w,i=Object.create(s.prototype),a=new O(n||[]);return o(i,"_invoke",{value:C(e,r,a)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var m="suspendedStart",g="suspendedYield",v="executing",y="completed",b={};function w(){}function _(){}function k(){}var T={};h(T,l,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==i&&a.call(E,l)&&(T=E);var P=k.prototype=w.prototype=Object.create(T);function M(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function r(s,i,o,c){var l=p(e[s],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,c)}),(function(e){r("throw",e,o,c)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,c)}))}c(l.arg)}var s;o(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,s){r(e,n,t,s)}))}return s=s?s.then(i,i):i()}})}function C(t,r,n){var s=m;return function(i,a){if(s===v)throw Error("Generator is already running");if(s===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var c=j(o,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===m)throw s=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=v;var l=p(t,r,n);if("normal"===l.type){if(s=n.done?y:g,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(s=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,s=t.iterator[n];if(s===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=p(s,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,i=function r(){for(;++s<t.length;)if(a.call(t,s))return r.value=t[s],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return _.prototype=k,o(P,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:_,configurable:!0}),_.displayName=h(k,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,h(e,d,"GeneratorFunction")),e.prototype=Object.create(P),e},r.awrap=function(e){return{__await:e}},M(I.prototype),h(I.prototype,u,(function(){return this})),r.AsyncIterator=I,r.async=function(e,t,n,s,i){void 0===i&&(i=Promise);var a=new I(f(e,t,n,s),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},M(P),h(P,d,"Generator"),h(P,l,(function(){return this})),h(P,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=N,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,s){return o.type="throw",o.arg=t,r.next=n,s&&(r.method="next",r.arg=e),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;x(r)}return s}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},r}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/regeneratorRuntime.js"}],[2067,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/typeof.js"}],[2068,{"../helpers/regeneratorRuntime":2066},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../helpers/regeneratorRuntime")();t.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/regenerator/index.js"}],[2069,{"./types.js":2082,"./util.js":2083,"@ethereumjs/common":2090,"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseTransaction=void 0;const n=e("@ethereumjs/common"),s=e("@ethereumjs/util"),i=e("./types.js"),a=e("./util.js");r.BaseTransaction=class{constructor(e,t){this.cache={hash:undefined,dataFee:undefined,senderPubKey:undefined},this.activeCapabilities=[],this.DEFAULT_CHAIN=n.Chain.Mainnet;const{nonce:r,gasLimit:i,to:o,value:c,data:l,v:u,r:d,s:h,type:f}=e;this._type=Number((0,s.bytesToBigInt)((0,s.toBytes)(f))),this.txOptions=t;const p=(0,s.toBytes)(""===o?"0x":o),m=(0,s.toBytes)(""===u?"0x":u),g=(0,s.toBytes)(""===d?"0x":d),v=(0,s.toBytes)(""===h?"0x":h);this.nonce=(0,s.bytesToBigInt)((0,s.toBytes)(""===r?"0x":r)),this.gasLimit=(0,s.bytesToBigInt)((0,s.toBytes)(""===i?"0x":i)),this.to=p.length>0?new s.Address(p):undefined,this.value=(0,s.bytesToBigInt)((0,s.toBytes)(""===c?"0x":c)),this.data=(0,s.toBytes)(""===l?"0x":l),this.v=m.length>0?(0,s.bytesToBigInt)(m):undefined,this.r=g.length>0?(0,s.bytesToBigInt)(g):undefined,this.s=v.length>0?(0,s.bytesToBigInt)(v):undefined,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const y=this.to===undefined||null===this.to,b=t.allowUnlimitedInitCodeSize??!1,w=t.common??this._getCommon();y&&w.isActivatedEIP(3860)&&!1===b&&(0,a.checkMaxInitCodeSize)(w,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}getValidationErrors(){const e=[];return this.isSigned()&&!this.verifySignature()&&e.push("Invalid Signature"),this.getBaseFee()>this.gasLimit&&e.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),e}isValid(){return 0===this.getValidationErrors().length}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=s.BIGINT_0;for(let n=0;n<this.data.length;n++)0===this.data[n]?r+=e:r+=t;if((this.to===undefined||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return this.to===undefined||0===this.to.bytes.length}isSigned(){const{v:e,r:t,s:r}=this;return e!==undefined&&t!==undefined&&r!==undefined}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,s.unpadBytes)(e).length}catch(e){return!1}}getSenderAddress(){return new s.Address((0,s.publicToAddress)(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;this.type===i.TransactionType.Legacy&&this.common.gteHardfork("spuriousDragon")&&!this.supports(i.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(i.Capability.EIP155ReplayProtection),t=!0);const r=this.getHashedMessageToSign(),n=this.common.customCrypto?.ecsign??s.ecsign,{v:a,r:o,s:c}=n(r,e),l=this.addSignature(a,o,c,!0);if(t){const e=this.activeCapabilities.indexOf(i.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return l}toJSON(){return{type:(0,s.bigIntToHex)(BigInt(this.type)),nonce:(0,s.bigIntToHex)(this.nonce),gasLimit:(0,s.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,s.bigIntToHex)(this.value),data:(0,s.bytesToHex)(this.data),v:this.v!==undefined?(0,s.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,s.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,s.bigIntToHex)(this.s):undefined}}_getCommon(e,t){if(t!==undefined){const r=(0,s.bytesToBigInt)((0,s.toBytes)(t));if(e){if(e.chainId()!==r){const t=this._errorMsg(`The chain ID does not match the chain ID of Common. Got: ${r}, expected: ${e.chainId}`);throw new Error(t)}return e.copy()}return n.Common.isSupportedChainId(r)?new n.Common({chain:r}):n.Common.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN})}return e?.copy()??new n.Common({chain:this.DEFAULT_CHAIN})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[n,i]of Object.entries(e))switch(t){case 64:if(r){if(i!==undefined&&i>=s.MAX_UINT64){const e=this._errorMsg(`${n} cannot equal or exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>s.MAX_UINT64){const e=this._errorMsg(`${n} cannot exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}break;case 256:if(r){if(i!==undefined&&i>=s.MAX_INTEGER){const e=this._errorMsg(`${n} cannot equal or exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>s.MAX_INTEGER){const e=this._errorMsg(`${n} cannot exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,n]of Object.entries(e))if(t.includes(r)&&Array.isArray(n))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,s.bytesToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let n=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return n+=`signed=${t} hf=${r}`,n}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/baseTransaction.js"}],[207,{"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"provider")&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&delete e.NetworkController.provider;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-086.ts"}],[2070,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEffectivePriorityFee=r.getUpfrontCost=void 0,r.getUpfrontCost=function(e,t){const r=e.maxPriorityFeePerGas,n=e.maxFeePerGas-t,s=(r<n?r:n)+t;return e.gasLimit*s+e.value},r.getEffectivePriorityFee=function(e,t){if(t===undefined||t>e.maxFeePerGas)throw new Error("Tx cannot pay baseFee");const r=e.maxFeePerGas-t;return e.maxPriorityFeePerGas<r?e.maxPriorityFeePerGas:r}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip1559.js"}],[2071,{"../util.js":2083,"./legacy.js":2073,"@ethereumjs/rlp":2094,"@ethereumjs/util":2104,"ethereum-cryptography/keccak.js":3804},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateYParity=r.serialize=r.getHashedMessageToSign=void 0;const n=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak.js"),a=e("../util.js"),o=e("./legacy.js");r.getHashedMessageToSign=function(e){return(e.common.customCrypto.keccak256??i.keccak256)(e.getMessageToSign())},r.serialize=function(e,t){return(0,s.concatBytes)((0,a.txTypeBytes)(e.type),n.RLP.encode(t??e.raw()))},r.validateYParity=function(e){const{v:t}=e;if(t!==undefined&&t!==s.BIGINT_0&&t!==s.BIGINT_1){const t=(0,o.errorMsg)(e,"The y-parity of the transaction should either be 0 or 1");throw new Error(t)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2718.js"}],[2072,{"../util.js":2083,"./legacy.js":2073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDataFee=void 0;const n=e("../util.js"),s=e("./legacy.js");r.getDataFee=function(e){return s.getDataFee(e,BigInt(n.AccessLists.getDataFeeEIP2930(e.accessList,e.common)))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2930.js"}],[2073,{"../baseTransaction.js":2069,"../types.js":2082,"@ethereumjs/util":2104,"ethereum-cryptography/keccak.js":3804},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEffectivePriorityFee=r.getSenderPublicKey=r.validateHighS=r.hash=r.getDataFee=r.isSigned=r.errorMsg=void 0;const n=e("@ethereumjs/util"),s=e("ethereum-cryptography/keccak.js"),i=e("../baseTransaction.js"),a=e("../types.js");function o(e,t){return`${t} (${e.errorStr()})`}function c(e){const{s:t}=e;if(e.common.gteHardfork("homestead")&&t!==undefined&&t>n.SECP256K1_ORDER_DIV_2){const t=o(e,"Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(t)}}r.errorMsg=o,r.isSigned=function(e){const{v:t,r:r,s:n}=e;return t!==undefined&&r!==undefined&&n!==undefined},r.getDataFee=function(e,t){if(e.cache.dataFee&&e.cache.dataFee.hardfork===e.common.hardfork())return e.cache.dataFee.value;const r=i.BaseTransaction.prototype.getDataFee.bind(e)()+(t??0n);return Object.isFrozen(e)&&(e.cache.dataFee={value:r,hardfork:e.common.hardfork()}),r},r.hash=function(e){if(!e.isSigned()){const t=o(e,"Cannot call hash method if transaction is not signed");throw new Error(t)}const t=e.common.customCrypto.keccak256??s.keccak256;return Object.isFrozen(e)?(e.cache.hash||(e.cache.hash=t(e.serialize())),e.cache.hash):t(e.serialize())},r.validateHighS=c,r.getSenderPublicKey=function(e){if(e.cache.senderPubKey!==undefined)return e.cache.senderPubKey;const t=e.getMessageToVerifySignature(),{v:r,r:s,s:i}=e;c(e);try{const o=(e.common.customCrypto.ecrecover??n.ecrecover)(t,r,(0,n.bigIntToUnpaddedBytes)(s),(0,n.bigIntToUnpaddedBytes)(i),e.supports(a.Capability.EIP155ReplayProtection)?e.common.chainId():undefined);return Object.isFrozen(e)&&(e.cache.senderPubKey=o),o}catch(t){const r=o(e,"Invalid Signature");throw new Error(r)}},r.getEffectivePriorityFee=function(e,t){if(t!==undefined&&t>e)throw new Error("Tx cannot pay baseFee");return t===undefined?e:e-t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/legacy.js"}],[2074,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BYTES_PER_FIELD_ELEMENT=r.FIELD_ELEMENTS_PER_BLOB=r.MAX_TX_WRAP_KZG_COMMITMENTS=r.LIMIT_BLOBS_PER_TX=r.MAX_VERSIONED_HASHES_LIST_SIZE=r.MAX_ACCESS_LIST_SIZE=r.MAX_CALLDATA_SIZE=void 0,r.MAX_CALLDATA_SIZE=16777216,r.MAX_ACCESS_LIST_SIZE=16777216,r.MAX_VERSIONED_HASHES_LIST_SIZE=16777216,r.LIMIT_BLOBS_PER_TX=6,r.MAX_TX_WRAP_KZG_COMMITMENTS=16777216,r.FIELD_ELEMENTS_PER_BLOB=4096,r.BYTES_PER_FIELD_ELEMENT=32}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/constants.js"}],[2075,{"./baseTransaction.js":2069,"./capabilities/eip1559.js":2070,"./capabilities/eip2718.js":2071,"./capabilities/eip2930.js":2072,"./capabilities/legacy.js":2073,"./types.js":2082,"./util.js":2083,"@ethereumjs/rlp":2094,"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FeeMarketEIP1559Transaction=void 0;const n=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),c=e("./capabilities/eip2930.js"),l=e("./capabilities/legacy.js"),u=e("./types.js"),d=e("./util.js");class h extends i.BaseTransaction{constructor(e,t={}){super({...e,type:u.TransactionType.FeeMarketEIP1559},t);const{chainId:r,accessList:n,maxFeePerGas:a,maxPriorityFeePerGas:c}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!1===this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const h=d.AccessLists.getAccessListData(n??[]);if(this.accessList=h.accessList,this.AccessListJSON=h.AccessListJSON,d.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,s.bytesToBigInt)((0,s.toBytes)(""===a?"0x":a)),this.maxPriorityFeePerGas=(0,s.bytesToBigInt)((0,s.toBytes)(""===c?"0x":c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>s.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}o.validateYParity(this),l.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new h(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,s.equalsBytes)(e.subarray(0,1),(0,d.txTypeBytes)(u.TransactionType.FeeMarketEIP1559)))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${u.TransactionType.FeeMarketEIP1559}, received: ${(0,s.bytesToHex)(e.subarray(0,1))}`);const r=n.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return h.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,n,i,a,o,c,l,u,d,f,p,m]=e;return this._validateNotArray({chainId:r,v:f}),(0,s.validateNoLeadingZeroes)({nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:l,v:f,r:p,s:m}),new h({chainId:(0,s.bytesToBigInt)(r),nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:c,value:l,data:u,accessList:d??[],v:f!==undefined?(0,s.bytesToBigInt)(f):undefined,r:p,s:m},t)}getDataFee(){return c.getDataFee(this)}getEffectivePriorityFee(e){return a.getEffectivePriorityFee(this,e)}getUpfrontCost(e=s.BIGINT_0){return a.getUpfrontCost(this,e)}raw(){return[(0,s.bigIntToUnpaddedBytes)(this.chainId),(0,s.bigIntToUnpaddedBytes)(this.nonce),(0,s.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,s.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,s.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,s.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.v!==undefined?(0,s.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,s.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,s.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}getMessageToSign(){return o.serialize(this,this.raw().slice(0,9))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return l.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return l.getSenderPublicKey(this)}addSignature(e,t,r,n=!1){t=(0,s.toBytes)(t),r=(0,s.toBytes)(r);const i={...this.txOptions,common:this.common};return h.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:n?e-s.BIGINT_27:e,r:(0,s.bytesToBigInt)(t),s:(0,s.bytesToBigInt)(r)},i)}toJSON(){const e=d.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,s.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,s.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,s.bigIntToHex)(this.maxFeePerGas),accessList:e}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return l.errorMsg(this,e)}}r.FeeMarketEIP1559Transaction=h}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip1559Transaction.js"}],[2076,{"./baseTransaction.js":2069,"./capabilities/eip2718.js":2071,"./capabilities/eip2930.js":2072,"./capabilities/legacy.js":2073,"./types.js":2082,"./util.js":2083,"@ethereumjs/rlp":2094,"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessListEIP2930Transaction=void 0;const n=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip2718.js"),o=e("./capabilities/eip2930.js"),c=e("./capabilities/legacy.js"),l=e("./types.js"),u=e("./util.js");class d extends i.BaseTransaction{constructor(e,t={}){super({...e,type:l.TransactionType.AccessListEIP2930},t);const{chainId:r,accessList:n,gasPrice:o}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const d=u.AccessLists.getAccessListData(n??[]);if(this.accessList=d.accessList,this.AccessListJSON=d.AccessListJSON,u.AccessLists.verifyAccessList(this.accessList),this.gasPrice=(0,s.bytesToBigInt)((0,s.toBytes)(""===o?"0x":o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),i.BaseTransaction._validateNotArray(e),this.gasPrice*this.gasLimit>s.MAX_INTEGER){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}a.validateYParity(this),c.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new d(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,s.equalsBytes)(e.subarray(0,1),(0,u.txTypeBytes)(l.TransactionType.AccessListEIP2930)))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${l.TransactionType.AccessListEIP2930}, received: ${(0,s.bytesToHex)(e.subarray(0,1))}`);const r=n.RLP.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return d.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,n,i,a,o,c,l,u,h,f,p]=e;this._validateNotArray({chainId:r,v:h}),(0,s.validateNoLeadingZeroes)({nonce:n,gasPrice:i,gasLimit:a,value:c,v:h,r:f,s:p});return new d({chainId:(0,s.bytesToBigInt)(r),nonce:n,gasPrice:i,gasLimit:a,to:o,value:c,data:l,accessList:u??[],v:h!==undefined?(0,s.bytesToBigInt)(h):undefined,r:f,s:p},t)}getEffectivePriorityFee(e){return c.getEffectivePriorityFee(this.gasPrice,e)}getDataFee(){return o.getDataFee(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[(0,s.bigIntToUnpaddedBytes)(this.chainId),(0,s.bigIntToUnpaddedBytes)(this.nonce),(0,s.bigIntToUnpaddedBytes)(this.gasPrice),(0,s.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,s.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.v!==undefined?(0,s.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,s.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,s.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return a.serialize(this)}getMessageToSign(){return a.serialize(this,this.raw().slice(0,8))}getHashedMessageToSign(){return a.getHashedMessageToSign(this)}hash(){return c.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return c.getSenderPublicKey(this)}addSignature(e,t,r,n=!1){t=(0,s.toBytes)(t),r=(0,s.toBytes)(r);const i={...this.txOptions,common:this.common};return d.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:n?e-s.BIGINT_27:e,r:(0,s.bytesToBigInt)(t),s:(0,s.bytesToBigInt)(r)},i)}toJSON(){const e=u.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,s.bigIntToHex)(this.chainId),gasPrice:(0,s.bigIntToHex)(this.gasPrice),accessList:e}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,e}_errorMsg(e){return c.errorMsg(this,e)}}r.AccessListEIP2930Transaction=d}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip2930Transaction.js"}],[2077,{"./baseTransaction.js":2069,"./capabilities/eip1559.js":2070,"./capabilities/eip2718.js":2071,"./capabilities/eip2930.js":2072,"./capabilities/legacy.js":2073,"./constants.js":2074,"./types.js":2082,"./util.js":2083,"@ethereumjs/rlp":2094,"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BlobEIP4844Transaction=void 0;const n=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),c=e("./capabilities/eip2930.js"),l=e("./capabilities/legacy.js"),u=e("./constants.js"),d=e("./types.js"),h=e("./util.js");class f extends i.BaseTransaction{constructor(e,t={}){super({...e,type:d.TransactionType.BlobEIP4844},t);const{chainId:r,accessList:n,maxFeePerGas:a,maxPriorityFeePerGas:c,maxFeePerBlobGas:f}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!1===this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");if(!1===this.common.isActivatedEIP(4844))throw new Error("EIP-4844 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const p=h.AccessLists.getAccessListData(n??[]);if(this.accessList=p.accessList,this.AccessListJSON=p.AccessListJSON,h.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,s.bytesToBigInt)((0,s.toBytes)(""===a?"0x":a)),this.maxPriorityFeePerGas=(0,s.bytesToBigInt)((0,s.toBytes)(""===c?"0x":c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>s.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this.maxFeePerBlobGas=(0,s.bytesToBigInt)((0,s.toBytes)(""===(f??"")?"0x":f)),this.blobVersionedHashes=(e.blobVersionedHashes??[]).map((e=>(0,s.toBytes)(e))),o.validateYParity(this),l.validateHighS(this);for(const e of this.blobVersionedHashes){if(32!==e.length){const e=this._errorMsg("versioned hash is invalid length");throw new Error(e)}if(BigInt(e[0])!==this.common.param("sharding","blobCommitmentVersionKzg")){const e=this._errorMsg("versioned hash does not start with KZG commitment version");throw new Error(e)}}if(this.blobVersionedHashes.length>u.LIMIT_BLOBS_PER_TX){const e=this._errorMsg(`tx can contain at most ${u.LIMIT_BLOBS_PER_TX} blobs`);throw new Error(e)}if(0===this.blobVersionedHashes.length){const e=this._errorMsg("tx should contain at least one blob");throw new Error(e)}if(this.to===undefined){const e=this._errorMsg('tx should have a "to" field and cannot be used to create contracts');throw new Error(e)}this.blobs=e.blobs?.map((e=>(0,s.toBytes)(e))),this.kzgCommitments=e.kzgCommitments?.map((e=>(0,s.toBytes)(e))),this.kzgProofs=e.kzgProofs?.map((e=>(0,s.toBytes)(e)));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t){if(t?.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");const r=t.common.customCrypto.kzg;if(e.blobsData!==undefined){if(e.blobs!==undefined)throw new Error("cannot have both raw blobs data and encoded blobs in constructor");if(e.kzgCommitments!==undefined)throw new Error("cannot have both raw blobs data and KZG commitments in constructor");if(e.blobVersionedHashes!==undefined)throw new Error("cannot have both raw blobs data and versioned hashes in constructor");if(e.kzgProofs!==undefined)throw new Error("cannot have both raw blobs data and KZG proofs in constructor");e.blobs=(0,s.getBlobs)(e.blobsData.reduce(((e,t)=>e+t))),e.kzgCommitments=(0,s.blobsToCommitments)(r,e.blobs),e.blobVersionedHashes=(0,s.commitmentsToVersionedHashes)(e.kzgCommitments),e.kzgProofs=(0,s.blobsToProofs)(r,e.blobs,e.kzgCommitments)}return new f(e,t)}getEffectivePriorityFee(e){return a.getEffectivePriorityFee(this,e)}static minimalFromNetworkWrapper(e,t){if(t?.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");return f.fromTxData({...e,blobs:undefined,kzgCommitments:undefined,kzgProofs:undefined},t)}static fromSerializedTx(e,t={}){if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(!1===(0,s.equalsBytes)(e.subarray(0,1),(0,h.txTypeBytes)(d.TransactionType.BlobEIP4844)))throw new Error(`Invalid serialized tx input: not an EIP-4844 transaction (wrong tx type, expected: ${d.TransactionType.BlobEIP4844}, received: ${(0,s.bytesToHex)(e.subarray(0,1))}`);const r=n.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return f.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(11!==e.length&&14!==e.length)throw new Error("Invalid EIP-4844 transaction. Only expecting 11 values (for unsigned tx) or 14 values (for signed tx).");const[r,n,i,a,o,c,l,u,d,h,p,m,g,v]=e;return this._validateNotArray({chainId:r,v:m}),(0,s.validateNoLeadingZeroes)({nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:l,maxFeePerBlobGas:h,v:m,r:g,s:v}),new f({chainId:(0,s.bytesToBigInt)(r),nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:c,value:l,data:u,accessList:d??[],maxFeePerBlobGas:h,blobVersionedHashes:p,v:m!==undefined?(0,s.bytesToBigInt)(m):undefined,r:g,s:v},t)}static fromSerializedBlobTxNetworkWrapper(e,t){if(!t||!t.common)throw new Error("common instance required to validate versioned hashes");if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(!1===(0,s.equalsBytes)(e.subarray(0,1),(0,h.txTypeBytes)(d.TransactionType.BlobEIP4844)))throw new Error(`Invalid serialized tx input: not an EIP-4844 transaction (wrong tx type, expected: ${d.TransactionType.BlobEIP4844}, received: ${(0,s.bytesToHex)(e.subarray(0,1))}`);const r=n.RLP.decode(e.subarray(1));if(4!==r.length)throw Error("Expected 4 values in the deserialized network transaction");const[i,a,o,c]=r,l=f.fromValuesArray(i,{...t,freeze:!1});if(l.to===undefined)throw Error("BlobEIP4844Transaction can not be send without a valid `to`");const u=Number(t.common.param("sharding","blobCommitmentVersionKzg"));((e,t,r,n,i,a)=>{if(e.length!==t.length||t.length!==r.length)throw new Error("Number of blobVersionedHashes, blobs, and commitments not all equal");if(0===e.length)throw new Error("Invalid transaction with empty blobs");let o;try{o=a.verifyBlobKzgProofBatch(t,r,n)}catch(e){throw new Error(`KZG verification of blobs fail with error=${e}`)}if(!o)throw new Error("KZG proof cannot be verified from blobs/commitments");for(let t=0;t<e.length;t++){const n=(0,s.computeVersionedHash)(r[t],i);if(!(0,s.equalsBytes)(n,e[t]))throw new Error(`commitment for blob at index ${t} does not match versionedHash`)}})(l.blobVersionedHashes,a,o,c,u,t.common.customCrypto.kzg),l.blobs=a,l.kzgCommitments=o,l.kzgProofs=c;return(t?.freeze??!0)&&Object.freeze(l),l}getDataFee(){return c.getDataFee(this)}getUpfrontCost(e=s.BIGINT_0){return a.getUpfrontCost(this,e)}raw(){return[(0,s.bigIntToUnpaddedBytes)(this.chainId),(0,s.bigIntToUnpaddedBytes)(this.nonce),(0,s.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,s.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,s.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,s.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,(0,s.bigIntToUnpaddedBytes)(this.maxFeePerBlobGas),this.blobVersionedHashes,this.v!==undefined?(0,s.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,s.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,s.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}serializeNetworkWrapper(){if(this.blobs===undefined||this.kzgCommitments===undefined||this.kzgProofs===undefined)throw new Error("cannot serialize network wrapper without blobs, KZG commitments and KZG proofs provided");return o.serialize(this,[this.raw(),this.blobs,this.kzgCommitments,this.kzgProofs])}getMessageToSign(){return o.serialize(this,this.raw().slice(0,11))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return l.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return l.getSenderPublicKey(this)}toJSON(){const e=h.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,s.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,s.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,s.bigIntToHex)(this.maxFeePerGas),accessList:e,maxFeePerBlobGas:(0,s.bigIntToHex)(this.maxFeePerBlobGas),blobVersionedHashes:this.blobVersionedHashes.map((e=>(0,s.bytesToHex)(e)))}}addSignature(e,t,r,n=!1){t=(0,s.toBytes)(t),r=(0,s.toBytes)(r);const i={...this.txOptions,common:this.common};return f.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:n?e-s.BIGINT_27:e,r:(0,s.bytesToBigInt)(t),s:(0,s.bytesToBigInt)(r),maxFeePerBlobGas:this.maxFeePerBlobGas,blobVersionedHashes:this.blobVersionedHashes,blobs:this.blobs,kzgCommitments:this.kzgCommitments,kzgProofs:this.kzgProofs},i)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return l.errorMsg(this,e)}numBlobs(){return this.blobVersionedHashes.length}}r.BlobEIP4844Transaction=f}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip4844Transaction.js"}],[2078,{"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeTxParams=void 0;const n=e("@ethereumjs/util");r.normalizeTxParams=e=>{const t=Object.assign({},e);return t.gasLimit=(0,n.toType)(t.gasLimit??t.gas,n.TypeOutput.BigInt),t.data=t.data===undefined?t.input:t.data,t.gasPrice=t.gasPrice!==undefined?BigInt(t.gasPrice):undefined,t.value=t.value!==undefined?BigInt(t.value):undefined,t.to=null!==t.to&&t.to!==undefined?(0,n.setLengthLeft)((0,n.toBytes)(t.to),20):null,t.v="0x0"===t.v?"0x":t.v,t.r="0x0"===t.r?"0x":t.r,t.s="0x0"===t.s?"0x":t.s,"0x"===t.v&&"0x"===t.r&&"0x"===t.s||(t.v=(0,n.toType)(t.v,n.TypeOutput.BigInt)),t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/fromRpc.js"}],[2079,{"./eip1559Transaction.js":2075,"./eip2930Transaction.js":2076,"./eip4844Transaction.js":2077,"./legacyTransaction.js":2080,"./transactionFactory.js":2081,"./types.js":2082},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=r.LegacyTransaction=r.BlobEIP4844Transaction=r.AccessListEIP2930Transaction=r.FeeMarketEIP1559Transaction=void 0;var i=e("./eip1559Transaction.js");Object.defineProperty(r,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return i.FeeMarketEIP1559Transaction}});var a=e("./eip2930Transaction.js");Object.defineProperty(r,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return a.AccessListEIP2930Transaction}});var o=e("./eip4844Transaction.js");Object.defineProperty(r,"BlobEIP4844Transaction",{enumerable:!0,get:function(){return o.BlobEIP4844Transaction}});var c=e("./legacyTransaction.js");Object.defineProperty(r,"LegacyTransaction",{enumerable:!0,get:function(){return c.LegacyTransaction}});var l=e("./transactionFactory.js");Object.defineProperty(r,"TransactionFactory",{enumerable:!0,get:function(){return l.TransactionFactory}}),s(e("./types.js"),r)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/index.js"}],[208,{"@metamask/utils":2787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,n.hasProperty)(e,"NftController")&&(0,n.isObject)(e.NftController)){const t=e.NftController;if((0,n.hasProperty)(t,"allNftContracts")&&(0,n.isObject)(t.allNftContracts)){const{allNftContracts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&s(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}if((0,n.hasProperty)(t,"allNfts")&&(0,n.isObject)(t.allNfts)){const{allNfts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&s(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}e.NftController=t}if((0,n.hasProperty)(e,"TokenListController")&&(0,n.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,n.hasProperty)(t,"tokensChainsCache")&&(0,n.isObject)(t.tokensChainsCache)&&s(t.tokensChainsCache))for(const e of Object.keys(t.tokensChainsCache))(0,n.isStrictHexString)(e)||delete t.tokensChainsCache[e]}if((0,n.hasProperty)(e,"TokensController")&&(0,n.isObject)(e.TokensController)){const t=e.TokensController;if((0,n.hasProperty)(t,"allTokens")&&(0,n.isObject)(t.allTokens)&&s(t.allTokens)){const{allTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allTokens[r]}if((0,n.hasProperty)(t,"allIgnoredTokens")&&(0,n.isObject)(t.allIgnoredTokens)&&s(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allIgnoredTokens[r]}if((0,n.hasProperty)(t,"allDetectedTokens")&&(0,n.isObject)(t.allDetectedTokens)&&s(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allDetectedTokens[r]}e.TokensController=t}return e};var n=e("@metamask/utils");function s(e){return Object.keys(e).some((e=>(0,n.isStrictHexString)(e)))}}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-088.ts"}],[2080,{"./baseTransaction.js":2069,"./capabilities/legacy.js":2073,"./types.js":2082,"@ethereumjs/rlp":2094,"@ethereumjs/util":2104,"ethereum-cryptography/keccak.js":3804},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LegacyTransaction=void 0;const n=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak.js"),a=e("./baseTransaction.js"),o=e("./capabilities/legacy.js"),c=e("./types.js");function l(e,t){const r=Number(e),n=2*Number(t);return r===n+35||r===n+36}class u extends a.BaseTransaction{constructor(e,t={}){if(super({...e,type:c.TransactionType.Legacy},t),this.common=this._validateTxV(this.v,t.common),this.keccakFunction=this.common.customCrypto.keccak256??i.keccak256,this.gasPrice=(0,s.bytesToBigInt)((0,s.toBytes)(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>s.MAX_INTEGER){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),a.BaseTransaction._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?l(this.v,this.common.chainId())&&this.activeCapabilities.push(c.Capability.EIP155ReplayProtection):this.activeCapabilities.push(c.Capability.EIP155ReplayProtection));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new u(e,t)}static fromSerializedTx(e,t={}){const r=n.RLP.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,n,i,a,o,c,l,d,h]=e;return(0,s.validateNoLeadingZeroes)({nonce:r,gasPrice:n,gasLimit:i,value:o,v:l,r:d,s:h}),new u({nonce:r,gasPrice:n,gasLimit:i,to:a,value:o,data:c,v:l,r:d,s:h},t)}getEffectivePriorityFee(e){return o.getEffectivePriorityFee(this.gasPrice,e)}raw(){return[(0,s.bigIntToUnpaddedBytes)(this.nonce),(0,s.bigIntToUnpaddedBytes)(this.gasPrice),(0,s.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,s.bigIntToUnpaddedBytes)(this.value),this.data,this.v!==undefined?(0,s.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,s.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,s.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return n.RLP.encode(this.raw())}getMessageToSign(){const e=[(0,s.bigIntToUnpaddedBytes)(this.nonce),(0,s.bigIntToUnpaddedBytes)(this.gasPrice),(0,s.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,s.bigIntToUnpaddedBytes)(this.value),this.data];return this.supports(c.Capability.EIP155ReplayProtection)&&(e.push((0,s.bigIntToUnpaddedBytes)(this.common.chainId())),e.push((0,s.unpadBytes)((0,s.toBytes)(0))),e.push((0,s.unpadBytes)((0,s.toBytes)(0)))),e}getHashedMessageToSign(){const e=this.getMessageToSign();return this.keccakFunction(n.RLP.encode(e))}getDataFee(){return o.getDataFee(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){return o.hash(this)}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}return this.getHashedMessageToSign()}getSenderPublicKey(){return o.getSenderPublicKey(this)}addSignature(e,t,r,n=!1){t=(0,s.toBytes)(t),r=(0,s.toBytes)(r),n&&this.supports(c.Capability.EIP155ReplayProtection)&&(e+=this.common.chainId()*s.BIGINT_2+s.BIGINT_8);const i={...this.txOptions,common:this.common};return u.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:e,r:(0,s.bytesToBigInt)(t),s:(0,s.bytesToBigInt)(r)},i)}toJSON(){return{...super.toJSON(),gasPrice:(0,s.bigIntToHex)(this.gasPrice)}}_validateTxV(e,t){let r;const n=e!==undefined?Number(e):undefined;if(n!==undefined&&n<37&&27!==n&&28!==n)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${n}`);if(n!==undefined&&0!==n&&(!t||t.gteHardfork("spuriousDragon"))&&27!==n&&28!==n)if(t){if(!l(BigInt(n),t.chainId()))throw new Error(`Incompatible EIP155-based V ${n} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(n-35)%2==0?35:36,r=BigInt(n-e)/s.BIGINT_2}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return o.errorMsg(this,e)}}r.LegacyTransaction=u}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/legacyTransaction.js"}],[2081,{"./eip1559Transaction.js":2075,"./eip2930Transaction.js":2076,"./eip4844Transaction.js":2077,"./fromRpc.js":2078,"./legacyTransaction.js":2080,"./types.js":2082,"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=void 0;const n=e("@ethereumjs/util"),s=e("./eip1559Transaction.js"),i=e("./eip2930Transaction.js"),a=e("./eip4844Transaction.js"),o=e("./fromRpc.js"),c=e("./legacyTransaction.js"),l=e("./types.js");class u{constructor(){}static fromTxData(e,t={}){if("type"in e&&e.type!==undefined){if((0,l.isLegacyTxData)(e))return c.LegacyTransaction.fromTxData(e,t);if((0,l.isAccessListEIP2930TxData)(e))return i.AccessListEIP2930Transaction.fromTxData(e,t);if((0,l.isFeeMarketEIP1559TxData)(e))return s.FeeMarketEIP1559Transaction.fromTxData(e,t);if((0,l.isBlobEIP4844TxData)(e))return a.BlobEIP4844Transaction.fromTxData(e,t);throw new Error(`Tx instantiation with type ${e?.type} not supported`)}return c.LegacyTransaction.fromTxData(e,t)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return c.LegacyTransaction.fromSerializedTx(e,t);switch(e[0]){case l.TransactionType.AccessListEIP2930:return i.AccessListEIP2930Transaction.fromSerializedTx(e,t);case l.TransactionType.FeeMarketEIP1559:return s.FeeMarketEIP1559Transaction.fromSerializedTx(e,t);case l.TransactionType.BlobEIP4844:return a.BlobEIP4844Transaction.fromSerializedTx(e,t);default:throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}static fromBlockBodyData(e,t={}){if(e instanceof Uint8Array)return this.fromSerializedData(e,t);if(Array.isArray(e))return c.LegacyTransaction.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}static async fromJsonRpcProvider(e,t,r){const s=(0,n.getProvider)(e),i=await(0,n.fetchFromProvider)(s,{method:"eth_getTransactionByHash",params:[t]});if(null===i)throw new Error("No data returned from provider");return u.fromRPC(i,r)}static async fromRPC(e,t={}){return u.fromTxData((0,o.normalizeTxParams)(e),t)}}r.TransactionFactory=u}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/transactionFactory.js"}],[2082,{"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isBlobEIP4844TxData=r.isFeeMarketEIP1559TxData=r.isAccessListEIP2930TxData=r.isLegacyTxData=r.isBlobEIP4844Tx=r.isFeeMarketEIP1559Tx=r.isAccessListEIP2930Tx=r.isLegacyTx=r.TransactionType=r.isAccessList=r.isAccessListBytes=r.Capability=void 0;const n=e("@ethereumjs/util");var s;function i(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}!function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(r.Capability||(r.Capability={})),r.isAccessListBytes=i,r.isAccessList=function(e){return!i(e)},function(e){e[e.Legacy=0]="Legacy",e[e.AccessListEIP2930=1]="AccessListEIP2930",e[e.FeeMarketEIP1559=2]="FeeMarketEIP1559",e[e.BlobEIP4844=3]="BlobEIP4844"}(s=r.TransactionType||(r.TransactionType={})),r.isLegacyTx=function(e){return e.type===s.Legacy},r.isAccessListEIP2930Tx=function(e){return e.type===s.AccessListEIP2930},r.isFeeMarketEIP1559Tx=function(e){return e.type===s.FeeMarketEIP1559},r.isBlobEIP4844Tx=function(e){return e.type===s.BlobEIP4844},r.isLegacyTxData=function(e){return Number((0,n.bytesToBigInt)((0,n.toBytes)(e.type)))===s.Legacy},r.isAccessListEIP2930TxData=function(e){return Number((0,n.bytesToBigInt)((0,n.toBytes)(e.type)))===s.AccessListEIP2930},r.isFeeMarketEIP1559TxData=function(e){return Number((0,n.bytesToBigInt)((0,n.toBytes)(e.type)))===s.FeeMarketEIP1559},r.isBlobEIP4844TxData=function(e){return Number((0,n.bytesToBigInt)((0,n.toBytes)(e.type)))===s.BlobEIP4844}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/types.js"}],[2083,{"./types.js":2082,"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.txTypeBytes=r.AccessLists=r.checkMaxInitCodeSize=void 0;const n=e("@ethereumjs/util"),s=e("./types.js");r.checkMaxInitCodeSize=function(e,t){const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)};r.AccessLists=class{static getAccessListData(e){let t,r;if((0,s.isAccessList)(e)){t=e;const s=[];for(let t=0;t<e.length;t++){const r=e[t],i=(0,n.hexToBytes)(r.address),a=[];for(let e=0;e<r.storageKeys.length;e++)a.push((0,n.hexToBytes)(r.storageKeys[e]));s.push([i,a])}r=s}else{r=e??[];const s=[];for(let e=0;e<r.length;e++){const t=r[e],i=(0,n.bytesToHex)(t[0]),a=[];for(let e=0;e<t[1].length;e++)a.push((0,n.bytesToHex)(t[1][e]));const o={address:i,storageKeys:a};s.push(o)}t=s}return{AccessListJSON:t,accessList:r}}static verifyAccessList(e){for(let t=0;t<e.length;t++){const r=e[t],n=r[0],s=r[1];if(r[2]!==undefined)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==n.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<s.length;e++)if(32!==s[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(e){const t=[];for(let r=0;r<e.length;r++){const s=e[r],i={address:(0,n.bytesToHex)((0,n.setLengthLeft)(s[0],20)),storageKeys:[]},a=s[1];for(let e=0;e<a.length;e++){const t=a[e];i.storageKeys.push((0,n.bytesToHex)((0,n.setLengthLeft)(t,32)))}t.push(i)}return t}static getDataFeeEIP2930(e,t){const r=t.param("gasPrices","accessListStorageKeyCost"),n=t.param("gasPrices","accessListAddressCost");let s=0;for(let t=0;t<e.length;t++){s+=e[t][1].length}return e.length*Number(n)+s*Number(r)}},r.txTypeBytes=function(e){return(0,n.hexToBytes)("0x"+e.toString(16).padStart(2,"0"))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/util.js"}],[2084,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.chains=void 0,r.chains={mainnet:{name:"mainnet",chainId:1,networkId:1,defaultHardfork:"shanghai",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{name:"paris",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,timestamp:"1681338455",forkHash:"0xdce96c2d"},{name:"cancun",block:null,timestamp:"1710338135",forkHash:"0x9f3d2254"}],bootstrapNodes:[{ip:"18.138.108.67",port:30303,id:"d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666",location:"ap-southeast-1-001",comment:"bootnode-aws-ap-southeast-1-001"},{ip:"3.209.45.79",port:30303,id:"22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de",location:"us-east-1-001",comment:"bootnode-aws-us-east-1-001"},{ip:"65.108.70.101",port:30303,id:"2b252ab6a1d0f971d9722cb839a42cb81db019ba44c08754628ab4a823487071b5695317c8ccd085219c3a03af063495b2f1da8d18218da2d6a82981b45e6ffc",location:"eu-west-1-001",comment:"bootnode-hetzner-hel"},{ip:"157.90.35.166",port:30303,id:"4aeb4ab6c14b23e2c4cfdce879c04b0748a20d8e9b59e25ded2a08143e265c6c25936e74cbc8e641e3312ca288673d91f2f93f8e277de3cfa444ecdaaf982052",location:"eu-central-1-001",comment:"bootnode-hetzner-fsn"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},goerli:{name:"goerli",chainId:5,networkId:5,defaultHardfork:"shanghai",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{name:"paris",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,timestamp:"1678832736",forkHash:"0xf9843abf"},{name:"cancun",block:null,timestamp:"1705473120",forkHash:"0x70cc14e2"}],bootstrapNodes:[{ip:"51.141.78.53",port:30303,id:"011f758e6552d105183b1761c5e2dea0111bc20fd5f6422bc7f91e0fabbec9a6595caf6239b37feb773dddd3f87240d99d859431891e4a642cf2a0a9e6cbb98a",location:"",comment:"Upstream bootnode 1"},{ip:"13.93.54.137",port:30303,id:"176b9417f511d05b6b2cf3e34b756cf0a7096b3094572a8f6ef4cdcb9d1f9d00683bf0f83347eebdf3b81c3521c2332086d9592802230bf528eaf606a1d9677b",location:"",comment:"Upstream bootnode 2"},{ip:"94.237.54.114",port:30313,id:"46add44b9f13965f7b9875ac6b85f016f341012d84f975377573800a863526f4da19ae2c620ec73d11591fa9510e992ecc03ad0751f53cc02f7c7ed6d55c7291",location:"",comment:"Upstream bootnode 3"},{ip:"18.218.250.66",port:30313,id:"b5948a2d3e9d486c4d75bf32713221c2bd6cf86463302339299bd227dc2e276cd5a1c7ca4f43a0e9122fe9af884efed563bd2a1fd28661f3b5f5ad7bf1de5949",location:"",comment:"Upstream bootnode 4"},{ip:"3.11.147.67",port:30303,id:"a61215641fb8714a373c80edbfa0ea8878243193f57c96eeb44d0bc019ef295abd4e044fd619bfc4c59731a73fb79afe84e9ab6da0c743ceb479cbb6d263fa91",location:"",comment:"Ethereum Foundation bootnode"},{ip:"51.15.116.226",port:30303,id:"a869b02cec167211fb4815a82941db2e7ed2936fd90e78619c53eb17753fcf0207463e3419c264e2a1dd8786de0df7e68cf99571ab8aeb7c4e51367ef186b1dd",location:"",comment:"Goerli Initiative bootnode"},{ip:"51.15.119.157",port:30303,id:"807b37ee4816ecf407e9112224494b74dd5933625f655962d892f2f0f02d7fbbb3e2a94cf87a96609526f30c998fd71e93e2f53015c558ffc8b03eceaf30ee33",location:"",comment:"Goerli Initiative bootnode"},{ip:"51.15.119.157",port:40303,id:"a59e33ccd2b3e52d578f1fbd70c6f9babda2650f0760d6ff3b37742fdcdfdb3defba5d56d315b40c46b70198c7621e63ffa3f987389c7118634b0fefbbdfa7fd",location:"",comment:"Goerli Initiative bootnode"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},sepolia:{name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"shanghai",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{name:"paris",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"},{name:"cancun",block:null,timestamp:"1706655072",forkHash:"0x88cf81d9"}],bootstrapNodes:[{ip:"18.168.182.86",port:30303,id:"9246d00bc8fd1742e5ad2428b80fc4dc45d786283e05ef6edbd9002cbc335d40998444732fbe921cb88e1d2c73d1b1de53bae6a2237996e9bfe14f871baf7066",location:"",comment:"geth"},{ip:"52.14.151.177",port:30303,id:"ec66ddcf1a974950bd4c782789a7e04f8aa7110a72569b6e65fcd51e937e74eed303b1ea734e4d19cfaec9fbff9b6ee65bf31dcb50ba79acce9dd63a6aca61c7",location:"",comment:"besu"},{ip:"165.22.196.173",port:30303,id:"ce970ad2e9daa9e14593de84a8b49da3d54ccfdf83cbc4fe519cb8b36b5918ed4eab087dedd4a62479b8d50756b492d5f762367c8d20329a7854ec01547568a6",location:"",comment:"EF"},{ip:"65.108.95.67",port:30303,id:"075503b13ed736244896efcde2a992ec0b451357d46cb7a8132c0384721742597fc8f0d91bbb40bb52e7d6e66728d36a1fda09176294e4a30cfac55dcce26bc6",location:"",comment:"lodestar"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},holesky:{name:"holesky",chainId:17e3,networkId:17e3,defaultHardfork:"paris",consensus:{type:"pos",algorithm:"casper"},comment:"PoS test network to replace Goerli",url:"https://github.com/eth-clients/holesky/",genesis:{baseFeePerGas:"0x3B9ACA00",difficulty:"0x01",extraData:"0x",gasLimit:"0x17D7840",nonce:"0x0000000000001234",timestamp:"0x65156994"},hardforks:[{name:"chainstart",block:0,forkHash:"0xc61a6098"},{name:"homestead",block:0,forkHash:"0xc61a6098"},{name:"tangerineWhistle",block:0,forkHash:"0xc61a6098"},{name:"spuriousDragon",block:0,forkHash:"0xc61a6098"},{name:"byzantium",block:0,forkHash:"0xc61a6098"},{name:"constantinople",block:0,forkHash:"0xc61a6098"},{name:"petersburg",block:0,forkHash:"0xc61a6098"},{name:"istanbul",block:0,forkHash:"0xc61a6098"},{name:"muirGlacier",block:0,forkHash:"0xc61a6098"},{name:"berlin",block:0,forkHash:"0xc61a6098"},{name:"london",block:0,forkHash:"0xc61a6098"},{name:"paris",ttd:"0",block:0,forkHash:"0xc61a6098"},{name:"mergeForkIdTransition",block:0,forkHash:"0xc61a6098"},{name:"shanghai",block:null,timestamp:"1696000704",forkHash:"0xfd4f016b"},{name:"cancun",block:null,timestamp:"1707305664",forkHash:"0x9b192ad0"}],bootstrapNodes:[{ip:"146.190.13.128",port:30303,id:"ac906289e4b7f12df423d654c5a962b6ebe5b3a74cc9e06292a85221f9a64a6f1cfdd6b714ed6dacef51578f92b34c60ee91e9ede9c7f8fadc4d347326d95e2b",location:"",comment:"bootnode 1"},{ip:"178.128.136.233",port:30303,id:"a3435a0155a3e837c02f5e7f5662a2f1fbc25b48e4dc232016e1c51b544cb5b4510ef633ea3278c0e970fa8ad8141e2d4d0f9f95456c537ff05fdf9b31c15072",location:"",comment:"bootnode 2"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.holesky.ethdisco.net"]},kaustinen:{name:"kaustinen",chainId:69420,networkId:69420,defaultHardfork:"prague",consensus:{type:"pos",algorithm:"casper"},comment:"Verkle kaustinen testnet 2 (likely temporary, do not hard-wire into production code)",url:"https://github.com/eth-clients/kaustinen/",genesis:{difficulty:"0x01",extraData:"0x",gasLimit:"0x17D7840",nonce:"0x0000000000001234",timestamp:"0x65608a64"},hardforks:[{name:"chainstart",block:0},{name:"homestead",block:0},{name:"tangerineWhistle",block:0},{name:"spuriousDragon",block:0},{name:"byzantium",block:0},{name:"constantinople",block:0},{name:"petersburg",block:0},{name:"istanbul",block:0},{name:"berlin",block:0},{name:"london",block:0},{name:"paris",ttd:"0",block:0},{name:"mergeForkIdTransition",block:0},{name:"shanghai",block:null,timestamp:"0"},{name:"prague",block:null,timestamp:"1700825700"}],bootstrapNodes:[],dnsNetworks:[]}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/chains.js"}],[2085,{"./chains.js":2084,"./crc.js":2086,"./eips.js":2087,"./enums.js":2088,"./hardforks.js":2089,"./utils.js":2093,"@ethereumjs/util":2104,events:3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Common=void 0;const n=e("@ethereumjs/util"),s=e("events"),i=e("./chains.js"),a=e("./crc.js"),o=e("./eips.js"),c=e("./enums.js"),l=e("./hardforks.js"),u=e("./utils.js");class d{constructor(e){this._eips=[],this._paramsCache={},this._activatedEIPsCache=[],this.events=new s.EventEmitter,this._customChains=e.customChains??[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=this._chainParams.defaultHardfork??c.Hardfork.Shanghai,this.HARDFORK_CHANGES=this.hardforks().map((e=>[e.name,l.hardforks[e.name]??(this._chainParams.customHardforks&&this._chainParams.customHardforks[e.name])])),this._hardfork=this.DEFAULT_HARDFORK,e.hardfork!==undefined&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips),this.customCrypto=e.customCrypto??{},0===Object.keys(this._paramsCache).length&&(this._buildParamsCache(),this._buildActivatedEIPsCache())}static custom(e,t={}){const r=t.baseChain??"mainnet",n={...d._getChainParams(r)};if(n.name="custom-chain","string"!=typeof e)return new d({chain:{...n,...e},...t});if(e===c.CustomChain.PolygonMainnet)return d.custom({name:c.CustomChain.PolygonMainnet,chainId:137,networkId:137},t);if(e===c.CustomChain.PolygonMumbai)return d.custom({name:c.CustomChain.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===c.CustomChain.ArbitrumOne)return d.custom({name:c.CustomChain.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===c.CustomChain.xDaiChain)return d.custom({name:c.CustomChain.xDaiChain,chainId:100,networkId:100},t);if(e===c.CustomChain.OptimisticKovan)return d.custom({name:c.CustomChain.OptimisticKovan,chainId:69,networkId:69},{hardfork:c.Hardfork.Berlin,...t});if(e===c.CustomChain.OptimisticEthereum)return d.custom({name:c.CustomChain.OptimisticEthereum,chainId:10,networkId:10},{hardfork:c.Hardfork.Berlin,...t});throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:t,eips:r,genesisHash:n,hardfork:s,mergeForkIdPostMerge:i,customCrypto:a}){const o=(0,u.parseGethGenesis)(e,t,i),c=new d({chain:o.name??"custom",customChains:[o],eips:r,hardfork:s??o.hardfork,customCrypto:a});return n!==undefined&&c.setForkHashes(n),c}static isSupportedChainId(e){const t=this.getInitializedChains();return Boolean(t.names[e.toString()])}static _getChainParams(e,t){const r=this.getInitializedChains(t);if("number"==typeof e||"bigint"==typeof e){if(e=e.toString(),r.names[e]){return r[r.names[e]]}throw new Error(`Chain with ID ${e} not supported`)}if(r[e]!==undefined)return r[e];throw new Error(`Chain with name ${e} not supported`)}setChain(e){if("number"==typeof e||"bigint"==typeof e||"string"==typeof e)this._chainParams=d._getChainParams(e,this._customChains);else{if("object"!=typeof e)throw new Error("Wrong input format");{if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of t)if(!(r in e))throw new Error(`Missing required chain parameter: ${r}`);this._chainParams=e}}for(const e of this.hardforks())if(e.block===undefined)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this._buildParamsCache(),this._buildActivatedEIPsCache(),this.events.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkBy(e){const t=(0,n.toType)(e.blockNumber,n.TypeOutput.BigInt),r=(0,n.toType)(e.td,n.TypeOutput.BigInt),s=(0,n.toType)(e.timestamp,n.TypeOutput.BigInt),i=this.hardforks().filter((e=>null!==e.block||null!==e.ttd&&e.ttd!==undefined||e.timestamp!==undefined)),a=i.findIndex((e=>null!==e.ttd&&e.ttd!==undefined));if(i.slice(a+1).findIndex((e=>null!==e.ttd&&e.ttd!==undefined))>=0)throw Error("More than one merge hardforks found with ttd specified");let o=i.findIndex((e=>t!==undefined&&null!==e.block&&BigInt(e.block)>t||s!==undefined&&e.timestamp!==undefined&&BigInt(e.timestamp)>s));if(-1===o)o=i.length;else if(0===o)throw Error("Must have at least one hardfork at block 0");if(s===undefined){o-=i.slice(0,o).reverse().findIndex((e=>null!==e.block||e.ttd!==undefined))}if(o-=1,null===i[o].block&&i[o].timestamp===undefined)(r===undefined||null===r||BigInt(i[o].ttd)>r)&&(o-=1);else if(a>=0&&r!==undefined&&null!==r){if(o>=a&&BigInt(i[a].ttd)>r)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(o<a&&BigInt(i[a].ttd)<r)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const c=o;for(;o<i.length-1&&(i[o].block===i[o+1].block&&i[o].timestamp===i[o+1].timestamp);o++);if(s!==undefined){if(i.slice(0,c).reduce(((e,t)=>Math.max(Number(t.timestamp??"0"),e)),0)>s)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");if(i.slice(o+1).reduce(((e,t)=>Math.min(Number(t.timestamp??s),e)),Number(s))<s)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return i[o].name}setHardforkBy(e){const t=this.getHardforkBy(e);return this.setHardfork(t),t}_getHardfork(e){const t=this.hardforks();for(const r of t)if(r.name===e)return r;return null}setEIPs(e=[]){for(const t of e){if(!(t in o.EIPs))throw new Error(`${t} not supported`);const e=this.gteHardfork(o.EIPs[t].minimumHardfork);if(!e)throw new Error(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${e}`)}this._eips=e,this._buildParamsCache(),this._buildActivatedEIPsCache();for(const t of e)if(o.EIPs[t].requiredEIPs!==undefined)for(const r of o.EIPs[t].requiredEIPs)if(!e.includes(r)&&!this.isActivatedEIP(r))throw new Error(`${t} requires EIP ${r}, but is not included in the EIP list`)}_mergeWithParamsCache(e){this._paramsCache.gasConfig={...this._paramsCache.gasConfig,...e.gasConfig},this._paramsCache.gasPrices={...this._paramsCache.gasPrices,...e.gasPrices},this._paramsCache.pow={...this._paramsCache.pow,...e.pow},this._paramsCache.sharding={...this._paramsCache.sharding,...e.sharding},this._paramsCache.vm={...this._paramsCache.vm,...e.vm}}_buildParamsCache(){this._paramsCache={};const e=this.hardfork();for(const t of this.HARDFORK_CHANGES){if("eips"in t[1]){const e=t[1].eips;for(const t of e){if(!(t in o.EIPs))throw new Error(`${t} not supported`);this._mergeWithParamsCache(o.EIPs[t])}}else this._mergeWithParamsCache(t[1]);if(t[0]===e)break}for(const e of this._eips){if(!(e in o.EIPs))throw new Error(`${e} not supported`);this._mergeWithParamsCache(o.EIPs[e])}}_buildActivatedEIPsCache(){this._activatedEIPsCache=[];for(const e of this.HARDFORK_CHANGES){const t=e[1];this.gteHardfork(t.name)&&"eips"in t&&(this._activatedEIPsCache=this._activatedEIPsCache.concat(t.eips))}this._activatedEIPsCache=this._activatedEIPsCache.concat(this._eips)}param(e,t){let r=null;return this._paramsCache[e]!==undefined&&this._paramsCache[e][t]!==undefined&&(r=this._paramsCache[e][t].v),BigInt(r??0)}paramByHardfork(e,t,r){let n=null;for(const s of this.HARDFORK_CHANGES){if("eips"in s[1]){const r=s[1].eips;for(const s of r){const r=this.paramByEIP(e,t,s);n="bigint"==typeof r?r:n}}else s[1][e]!==undefined&&s[1][e][t]!==undefined&&(n=s[1][e][t].v);if(s[0]===r)break}return BigInt(n??0)}paramByEIP(e,t,r){if(!(r in o.EIPs))throw new Error(`${r} not supported`);const n=o.EIPs[r];if(!(e in n))return undefined;if(n[e][t]===undefined)return undefined;const s=n[e][t].v;return BigInt(s)}paramByBlock(e,t,r,n,s){const i=this.getHardforkBy({blockNumber:r,td:n,timestamp:s});return this.paramByHardfork(e,t,i)}isActivatedEIP(e){return!!this._activatedEIPsCache.includes(e)}hardforkIsActiveOnBlock(e,t){t=(0,n.toType)(t,n.TypeOutput.BigInt),e=e??this._hardfork;const r=this.hardforkBlock(e);return"bigint"==typeof r&&r!==n.BIGINT_0&&t>=r}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){e=e??this._hardfork;const r=this.hardforks();let n=-1,s=-1,i=0;for(const a of r)a.name===e&&(n=i),a.name===t&&(s=i),i+=1;return n>=s&&-1!==s}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){e=e??this._hardfork;const t=this._getHardfork(e)?.block;return t===undefined||null===t?null:BigInt(t)}hardforkTimestamp(e){e=e??this._hardfork;const t=this._getHardfork(e)?.timestamp;return t===undefined||null===t?null:BigInt(t)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock(t[0])}return null}eipTimestamp(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkTimestamp(t[0])}return null}hardforkTTD(e){e=e??this._hardfork;const t=this._getHardfork(e)?.ttd;return t===undefined||null===t?null:BigInt(t)}nextHardforkBlockOrTimestamp(e){e=e??this._hardfork;const t=this.hardforks();let r=t.findIndex((t=>t.name===e));if(e===c.Hardfork.Paris&&(r-=1),r<0)return null;let n=t[r].timestamp??t[r].block;n=null!==n&&n!==undefined?Number(n):null;const s=t.slice(r+1).find((e=>{let t=e.timestamp??e.block;return t=null!==t&&t!==undefined?Number(t):null,e.name!==c.Hardfork.Paris&&null!==t&&t!==undefined&&t!==n}));if(s===undefined)return null;const i=s.timestamp??s.block;return null===i||i===undefined?null:BigInt(i)}_calcForkHash(e,t){let r=new Uint8Array(0),s=0;for(const t of this.hardforks()){const{block:i,timestamp:a,name:o}=t;let l=a??i;if(l=null!==l?Number(l):null,"number"==typeof l&&0!==l&&l!==s&&o!==c.Hardfork.Paris){const e=(0,n.hexToBytes)("0x"+l.toString(16).padStart(16,"0"));r=(0,n.concatBytes)(r,e),s=l}if(t.name===e)break}const i=(0,n.concatBytes)(t,r);return(0,n.bytesToHex)((0,n.intToBytes)((0,a.crc32)(i)>>>0))}forkHash(e,t){e=e??this._hardfork;const r=this._getHardfork(e);if(null===r||null===r?.block&&r?.timestamp===undefined&&r?.ttd===undefined){throw new Error("No fork hash calculation possible for future hardfork")}if(null!==r?.forkHash&&r?.forkHash!==undefined)return r.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(e,t)}hardforkForForkHash(e){const t=this.hardforks().filter((t=>t.forkHash===e));return t.length>=1?t[t.length-1]:null}setForkHashes(e){for(const t of this.hardforks()){const r=t.timestamp??t.block;null!==t.forkHash&&t.forkHash!==undefined||(null===r||r===undefined)&&void 0===t.ttd||(t.forkHash=this.forkHash(t.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){const e=this._chainParams.hardforks;return this._chainParams.customHardforks!==undefined&&this._chainParams.customHardforks,e}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.type),r[0]===e)break;return t??this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.algorithm),r[0]===e)break;return t??this._chainParams.consensus.algorithm}consensusConfig(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES){if("consensus"in r[1]){const e=r[1],n=e.consensus.algorithm;t=e.consensus[n]}if(r[0]===e)break}return t??this._chainParams.consensus[this.consensusAlgorithm()]??{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.events=new s.EventEmitter,e}static getInitializedChains(e){const t={};for(const[e,r]of Object.entries(c.Chain))t[r]=e.toLowerCase();const r={...i.chains};if(e)for(const n of e){const{name:e}=n;t[n.chainId.toString()]=e,r[e]=n}return r.names=t,r}}r.Common=d}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/common.js"}],[2086,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crc32=void 0;let n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(n=new Int32Array(n));r.crc32=(e,t)=>((e,t)=>{let r=0===t?0:~t;for(let t=0;t<e.length;t++)r=n[255&(r^e[t])]^r>>>8;return~r})(e,t)>>>0}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/crc.js"}],[2087,{"./enums.js":2088},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EIPs=void 0;const n=e("./enums.js");var s;!function(e){e.Stagnant="stagnant",e.Draft="draft",e.Review="review",e.Final="final"}(s||(s={})),r.EIPs={1153:{comment:"Transient storage opcodes",url:"https://eips.ethereum.org/EIPS/eip-1153",status:s.Review,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[],gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}}},1559:{comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:s.Final,minimumHardfork:n.Hardfork.Berlin,requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}}},2315:{comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:s.Draft,minimumHardfork:n.Hardfork.Istanbul,requiredEIPs:[],gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}}},2565:{comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:s.Final,minimumHardfork:n.Hardfork.Byzantium,requiredEIPs:[],gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}}},2718:{comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:s.Final,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[]},2929:{comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:s.Final,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[],gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}}},2930:{comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:s.Final,minimumHardfork:n.Hardfork.Istanbul,requiredEIPs:[2718,2929],gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}}},2935:{comment:"Save historical block hashes in state (Verkle related usage, UNSTABLE)",url:"https://github.com/gballet/EIPs/pull/3/commits/2e9ac09a142b0d9fb4db0b8d4609f92e5d9990c5",status:s.Draft,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[],vm:{historyStorageAddress:{v:BigInt("0xfffffffffffffffffffffffffffffffffffffffe"),d:"The address where the historical blockhashes are stored"},historyServeWindow:{v:BigInt(256),d:"The amount of blocks to be served by the historical blockhash contract"}}},3074:{comment:"AUTH and AUTHCALL opcodes",url:"https://eips.ethereum.org/EIPS/eip-3074",status:s.Review,minimumHardfork:n.Hardfork.London,requiredEIPs:[],gasPrices:{auth:{v:3100,d:"Gas cost of the AUTH opcode"},authcall:{v:0,d:"Gas cost of the AUTHCALL opcode"},authcallValueTransfer:{v:6700,d:"Paid for CALL when the value transfer is non-zero"}}},3198:{comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:s.Final,minimumHardfork:n.Hardfork.London,requiredEIPs:[],gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}}},3529:{comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:s.Final,minimumHardfork:n.Hardfork.Berlin,requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}}},3540:{comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:s.Review,minimumHardfork:n.Hardfork.London,requiredEIPs:[3541]},3541:{comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:s.Final,minimumHardfork:n.Hardfork.Berlin,requiredEIPs:[]},3554:{comment:"Difficulty Bomb Delay to December 1st 2021",url:"https://eips.ethereum.org/EIPS/eip-3554",status:s.Final,minimumHardfork:n.Hardfork.MuirGlacier,requiredEIPs:[],pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},3607:{comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:s.Final,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[]},3651:{comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:s.Review,minimumHardfork:n.Hardfork.London,requiredEIPs:[2929]},3670:{comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:n.Hardfork.London,requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},3675:{comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:s.Final,minimumHardfork:n.Hardfork.London,requiredEIPs:[]},3855:{comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:s.Review,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[],gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}}},3860:{comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:s.Review,minimumHardfork:n.Hardfork.SpuriousDragon,requiredEIPs:[],gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}}},4345:{comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:s.Final,minimumHardfork:n.Hardfork.London,requiredEIPs:[],pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},4399:{comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:s.Review,minimumHardfork:n.Hardfork.London,requiredEIPs:[],gasPrices:{prevrandao:{v:2,d:"Base fee of the PREVRANDAO opcode (previously DIFFICULTY)"}}},4788:{comment:"Beacon block root in the EVM",url:"https://eips.ethereum.org/EIPS/eip-4788",status:s.Draft,minimumHardfork:n.Hardfork.Cancun,requiredEIPs:[],gasPrices:{},vm:{historicalRootsLength:{v:8191,d:"The modulo parameter of the beaconroot ring buffer in the beaconroot statefull precompile"}}},4844:{comment:"Shard Blob Transactions",url:"https://eips.ethereum.org/EIPS/eip-4844",status:s.Draft,minimumHardfork:n.Hardfork.Paris,requiredEIPs:[1559,2718,2930,4895],gasConfig:{blobGasPerBlob:{v:131072,d:"The base fee for blob gas per blob"},targetBlobGasPerBlock:{v:393216,d:"The target blob gas consumed per block"},maxblobGasPerBlock:{v:786432,d:"The max blob gas allowable per block"},blobGasPriceUpdateFraction:{v:3338477,d:"The denominator used in the exponential when calculating a blob gas price"}},gasPrices:{simpleGasPerBlob:{v:12e3,d:"The basic gas fee for each blob"},minBlobGasPrice:{v:1,d:"The minimum fee per blob gas"},kzgPointEvaluationGasPrecompilePrice:{v:5e4,d:"The fee associated with the point evaluation precompile"},blobhash:{v:3,d:"Base fee of the BLOBHASH opcode"}},sharding:{blobCommitmentVersionKzg:{v:1,d:"The number indicated a versioned hash is a KZG commitment"},fieldElementsPerBlob:{v:4096,d:"The number of field elements allowed per blob"}}},4895:{comment:"Beacon chain push withdrawals as operations",url:"https://eips.ethereum.org/EIPS/eip-4895",status:s.Review,minimumHardfork:n.Hardfork.Paris,requiredEIPs:[]},5133:{comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:s.Draft,minimumHardfork:n.Hardfork.GrayGlacier,requiredEIPs:[],pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}},5656:{comment:"MCOPY - Memory copying instruction",url:"https://eips.ethereum.org/EIPS/eip-5656",status:s.Draft,minimumHardfork:n.Hardfork.Shanghai,requiredEIPs:[],gasPrices:{mcopy:{v:3,d:"Base fee of the MCOPY opcode"}}},6780:{comment:"SELFDESTRUCT only in same transaction",url:"https://eips.ethereum.org/EIPS/eip-6780",status:s.Draft,minimumHardfork:n.Hardfork.London,requiredEIPs:[]},6800:{comment:"Ethereum state using a unified verkle tree (experimental)",url:"https://github.com/ethereum/EIPs/pull/6800",status:s.Draft,minimumHardfork:n.Hardfork.London,requiredEIPs:[]},7516:{comment:"BLOBBASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-7516",status:s.Draft,minimumHardfork:n.Hardfork.Paris,requiredEIPs:[4844],gasPrices:{blobbasefee:{v:2,d:"Gas cost of the BLOBBASEFEE opcode"}}}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/eips.js"}],[2088,{"@ethereumjs/util":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CustomChain=r.ConsensusAlgorithm=r.ConsensusType=r.Hardfork=r.ChainGenesis=r.Chain=void 0;const n=e("@ethereumjs/util");var s;!function(e){e[e.Mainnet=1]="Mainnet",e[e.Goerli=5]="Goerli",e[e.Sepolia=11155111]="Sepolia",e[e.Holesky=17e3]="Holesky",e[e.Kaustinen=69420]="Kaustinen"}(s=r.Chain||(r.Chain={})),r.ChainGenesis={[s.Mainnet]:{name:"mainnet",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544")},[s.Goerli]:{name:"goerli",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0x5d6cded585e73c4e322c30c2f782a336316f17dd85a4863b9d838d2d4b8b3008")},[s.Sepolia]:{name:"sepolia",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0x5eb6e371a698b8d68f665192350ffcecbbbf322916f4b51bd79bb6887da3f494")},[s.Holesky]:{name:"holesky",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0x69d8c9d72f6fa4ad42d4702b433707212f90db395eb54dc20bc85de253788783")},[s.Kaustinen]:{name:"kaustinen",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0x5e8519756841faf0b2c28951c451b61a4b407b70a5ce5b57992f4bec973173ff")}},function(e){e.Chainstart="chainstart",e.Homestead="homestead",e.Dao="dao",e.TangerineWhistle="tangerineWhistle",e.SpuriousDragon="spuriousDragon",e.Byzantium="byzantium",e.Constantinople="constantinople",e.Petersburg="petersburg",e.Istanbul="istanbul",e.MuirGlacier="muirGlacier",e.Berlin="berlin",e.London="london",e.ArrowGlacier="arrowGlacier",e.GrayGlacier="grayGlacier",e.MergeForkIdTransition="mergeForkIdTransition",e.Paris="paris",e.Shanghai="shanghai",e.Cancun="cancun",e.Prague="prague"}(r.Hardfork||(r.Hardfork={})),function(e){e.ProofOfStake="pos",e.ProofOfWork="pow",e.ProofOfAuthority="poa"}(r.ConsensusType||(r.ConsensusType={})),function(e){e.Ethash="ethash",e.Clique="clique",e.Casper="casper"}(r.ConsensusAlgorithm||(r.ConsensusAlgorithm={})),function(e){e.PolygonMainnet="polygon-mainnet",e.PolygonMumbai="polygon-mumbai",e.ArbitrumOne="arbitrum-one",e.xDaiChain="x-dai-chain",e.OptimisticKovan="optimistic-kovan",e.OptimisticEthereum="optimistic-ethereum"}(r.CustomChain||(r.CustomChain={}))}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/enums.js"}],[2089,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.hardforks=r.Status=void 0,function(e){e.Draft="draft",e.Review="review",e.Final="final"}(n=r.Status||(r.Status={})),r.hardforks={chainstart:{name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:n.Final,gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},keccak256:{v:30,d:"Base fee of the SHA3 opcode"},keccak256Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:BigInt("5000000000000000000"),d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},homestead:{name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:n.Final,gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}}},dao:{name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:n.Final},tangerineWhistle:{name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:n.Final,gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}}},spuriousDragon:{name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:n.Final,gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}}},byzantium:{name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:n.Final,gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},pow:{minerReward:{v:BigInt("3000000000000000000"),d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},constantinople:{name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:n.Final,gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},pow:{minerReward:{v:BigInt("2000000000000000000"),d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},petersburg:{name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:n.Final,gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}}},istanbul:{name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:n.Final,gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}}},muirGlacier:{name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:n.Final,pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},berlin:{name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:n.Final,eips:[2565,2929,2718,2930]},london:{name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:n.Final,eips:[1559,3198,3529,3541]},arrowGlacier:{name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:n.Final,eips:[4345]},grayGlacier:{name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:n.Final,eips:[5133]},paris:{name:"paris",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:n.Final,consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},mergeForkIdTransition:{name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:n.Final,eips:[]},shanghai:{name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:n.Final,eips:[3651,3855,3860,4895]},cancun:{name:"cancun",comment:"Next feature hardfork after shanghai, includes proto-danksharding EIP 4844 blobs (still WIP hence not for production use), transient storage opcodes, parent beacon block root availability in EVM, selfdestruct only in same transaction, and blob base fee opcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/cancun.md",status:n.Final,eips:[1153,4844,4788,5656,6780,7516]},prague:{name:"prague",comment:"Next feature hardfork after cancun, internally used for verkle testing/implementation (incomplete/experimental)",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/prague.md",status:n.Draft,eips:[6800]}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/hardforks.js"}]],[],{});