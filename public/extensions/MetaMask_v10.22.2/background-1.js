LavaPack.loadBundle([[1846,{"./account.cjs":1845,"@metamask/keyring-api":2046,"@metamask/keyring-utils":2126,"@metamask/superstruct":2947},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RequestRejectedEventStruct=r.RequestApprovedEventStruct=r.AccountDeletedEventStruct=r.AccountUpdatedEventStruct=r.AccountCreatedEventStruct=void 0;const n=e("@metamask/keyring-api");Object.defineProperty(r,"AccountDeletedEventStruct",{enumerable:!0,get:function(){return n.AccountDeletedEventStruct}}),Object.defineProperty(r,"RequestApprovedEventStruct",{enumerable:!0,get:function(){return n.RequestApprovedEventStruct}}),Object.defineProperty(r,"RequestRejectedEventStruct",{enumerable:!0,get:function(){return n.RequestRejectedEventStruct}});const i=e("@metamask/keyring-utils"),s=e("@metamask/superstruct"),a=e("./account.cjs");r.AccountCreatedEventStruct=(0,i.object)({...n.AccountCreatedEventStruct.schema,params:(0,i.object)({...n.AccountCreatedEventStruct.schema.params.schema,account:(0,s.union)([a.KeyringAccountV1Struct,n.KeyringAccountStruct])})}),r.AccountUpdatedEventStruct=(0,i.object)({...n.AccountUpdatedEventStruct.schema,params:(0,i.object)({...n.AccountUpdatedEventStruct.schema.params.schema,account:(0,s.union)([a.KeyringAccountV1Struct,n.KeyringAccountStruct])})})}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/events.cjs"}],[1847,{"./SnapKeyring.cjs":1844,"./options.cjs":1851,"./types.cjs":1852},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./options.cjs"),r),i(e("./types.cjs"),r),i(e("./SnapKeyring.cjs"),r)}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/index.cjs"}],[1848,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-snap-keyring")}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/logger.cjs"}],[1849,{"./v1.cjs":1850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./v1.cjs"),r)}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/migrations/index.cjs"}],[1850,{"../account.cjs":1845,"@metamask/keyring-api":2046,"@metamask/keyring-utils":2126,"@metamask/superstruct":2947},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isAccountV1=o,r.getScopesForAccountV1=u,r.transformAccountV1=function(e){const{type:t}=e;if(t===n.EthAccountType.Eoa)return{...e,scopes:u(e)};return(0,a.assertKeyringAccount)(e)},r.migrateAccountV1=function(e){if(!o(e))return e;return{...e,scopes:u(e)}};const n=e("@metamask/keyring-api"),i=e("@metamask/keyring-utils"),s=e("@metamask/superstruct"),a=e("../account.cjs");function o(e){return(0,s.is)(e,a.KeyringAccountV1Struct)}function u(e){switch(e.type){case n.EthAccountType.Eoa:return[n.EthScope.Eoa];case n.EthAccountType.Erc4337:return[n.EthScope.Testnet];case n.BtcAccountType.P2pkh:case n.BtcAccountType.P2sh:case n.BtcAccountType.P2wpkh:case n.BtcAccountType.P2tr:return[(0,i.isBtcMainnetAddress)(e.address)?n.BtcScope.Mainnet:n.BtcScope.Testnet];case n.SolAccountType.DataAccount:return[n.SolScope.Mainnet,n.SolScope.Testnet,n.SolScope.Devnet];default:return[n.EthScope.Eoa]}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/migrations/v1.cjs"}],[1851,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(){return{displayAccountNameSuggestion:!0,displayConfirmation:!0,setSelectedAccount:!0}}Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultInternalOptions=n,r.getInternalOptionsOf=function(e){const t={},r={displayAccountNameSuggestion:!0,displayConfirmation:!0,setSelectedAccount:!0},n=Object.keys(r);for(const i of n){t[i]=undefined;for(const n of[...e,r])n[i]!==undefined&&t[i]===undefined&&(t[i]=n[i])}return t}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/options.cjs"}],[1852,{"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapMessageStruct=void 0;const n=e("@metamask/superstruct"),i=e("@metamask/utils");r.SnapMessageStruct=(0,n.object)({method:(0,n.string)(),params:(0,n.optional)((0,n.union)([(0,n.array)(i.JsonStruct),(0,n.record)((0,n.string)(),i.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/types.cjs"}],[1853,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unique=function(e){return[...new Set(e)]},r.toJson=function(e){return JSON.parse(JSON.stringify(e))},r.ensureDefined=function(e){if(e===undefined)throw new Error("Argument is undefined")},r.throwError=function(e){throw new Error(e)},r.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()},r.sanitizeUrl=function(e){return new URL(e).toString()}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/util.cjs"}],[1854,{"@metamask/keyring-internal-api":2098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PLATFORM_VERSION_TO_KEYRING_VERSION=void 0,r.getKeyringVersionFromPlatform=function(e){for(const[t,n]of r.PLATFORM_VERSION_TO_KEYRING_VERSION)if(e(t))return n;return n.KeyringVersion.V1};const n=e("@metamask/keyring-internal-api");r.PLATFORM_VERSION_TO_KEYRING_VERSION=[["7.0.0",n.KeyringVersion.V2]]}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/versions.cjs"}],[1855,{"./bytes":1858,"./constants":1859,"./helpers":1861,"./internal":1863,"@ethereumjs/rlp":462,buffer:4138,"ethereum-cryptography/keccak":4372,"ethereum-cryptography/secp256k1":4393,"ethereum-cryptography/utils":4395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const n=e("@ethereumjs/rlp"),i=e("ethereum-cryptography/keccak"),s=e("ethereum-cryptography/secp256k1"),a=e("ethereum-cryptography/utils"),o=e("./bytes"),u=e("./constants"),c=e("./helpers"),d=e("./internal"),l=BigInt(0);class f{constructor(e=l,t=l,r=u.KECCAK256_RLP,n=u.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:i}=e;return new f(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,r!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):undefined,n!==undefined?(0,o.toBuffer)(n):undefined,i!==undefined?(0,o.toBuffer)(i):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,i]=e;return new f((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),n,i)}_validate(){if(this.nonce<l)throw new Error("nonce must be greater than zero");if(this.balance<l)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(n.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(u.KECCAK256_NULL)}isEmpty(){return this.balance===l&&this.nonce===l&&this.codeHash.equals(u.KECCAK256_NULL)}}r.Account=f;r.isValidAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,c.assertIsHexString)(e);const n=(0,d.stripHexPrefix)(e).toLowerCase();let s="";if(r!==undefined){s=(0,o.bufferToBigInt)((0,o.toBuffer)(r)).toString()+"0x"}const u=t.from(s+n,"utf8"),l=(0,a.bytesToHex)((0,i.keccak256)(u));let f="0x";for(let e=0;e<n.length;e++)parseInt(l[e],16)>=8?f+=n[e].toUpperCase():f+=n[e];return f};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,c.assertIsBuffer)(e),(0,c.assertIsBuffer)(r),(0,o.bufferToBigInt)(r)===BigInt(0)?t.from((0,i.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,i.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,n){if((0,c.assertIsBuffer)(e),(0,c.assertIsBuffer)(r),(0,c.assertIsBuffer)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const s=(0,i.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,i.keccak256)(n)]));return(0,o.toBuffer)(s).slice(-20)};r.isValidPrivate=function(e){return s.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,c.assertIsBuffer)(e),64===e.length)try{return s.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return s.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,c.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,i.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,c.assertIsBuffer)(e),t.from(s.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,c.assertIsBuffer)(e),64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function p(e){const[t,r,n,i]=e;return[t,r,0===(0,o.arrToBufArr)(n).length?u.KECCAK256_RLP:n,0===(0,o.arrToBufArr)(i).length?u.KECCAK256_NULL:i]}r.isZeroAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=p;const h=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,n,i]=e;return[t,r,(0,o.arrToBufArr)(n).equals(u.KECCAK256_RLP)?h:n,(0,o.arrToBufArr)(i).equals(u.KECCAK256_NULL)?h:i]},r.accountBodyToRLP=function(e,t=!0){const r=t?p(e):e;return(0,o.arrToBufArr)(n.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/account.js"}],[1856,{"./account":1855,"./bytes":1858,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const n=e("./account"),i=e("./bytes");class s{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new s((0,i.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new s((0,i.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,n.pubToAddress)(e);return new s(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,n.privateToAddress)(e);return new s(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new s((0,n.generateAddress)(e.buf,(0,i.bigIntToBuffer)(t)))}static generate2(e,r,i){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(i))throw new Error("Expected initCode to be a Buffer");return new s((0,n.generateAddress2)(e.buf,r,i))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(s.zero())}isPrecompileOrSystemAddress(){const e=(0,i.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=s}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/address.js"}],[1857,{events:4475},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const n=e("events");class i extends n.EventEmitter{emit(e,...t){let[r,n]=t;const i=this;let s=i._events[e]??[];return n===undefined&&"function"==typeof r&&(n=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=undefined),s=Array.isArray(s)?s:[s],async function(e,t,r){let n;for await(const i of t)try{i.length<2?i.call(e,r):await new Promise(((t,n)=>{i.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(i,s.slice(),r).then(n).catch(n),i.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(i,s){r.removeListener(e,n),t(i,s)}:function(i){r.removeListener(e,n),t(i,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let i,s,a=this._events[e]??[];const o="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),s=a.length,i=a.length;i--;)if(a[i]===t){s=i+o;break}return a.splice(s,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=i}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[1858,{"./helpers":1861,"./internal":1863,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const n=e("./helpers"),i=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const n=(0,r.intToHex)(e);return t.from((0,i.padToEven)(n.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const s=function(e,t,n){const i=(0,r.zeros)(t);return n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!1)};r.setLengthRight=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!0)};const a=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,n.assertIsBuffer)(e),a(e)};r.unpadArray=function(e){return(0,n.assertIsArray)(e),a(e)};r.unpadHexString=function(e){return(0,n.assertIsHexString)(e),e=(0,i.stripHexPrefix)(e),"0x"+a(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,i.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,i.padToEven)((0,i.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function u(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=o,r.bigIntToBuffer=u;r.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,o(e))};r.toUnsigned=function(e){return u(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,i.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const n=t.isBuffer(e)?e.toString("hex"):e;return n.length<=r?n:n.slice(0,r)+"â€¦"};r.toUtf8=function(e){if((e=(0,i.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,r.baToJSON)(e[n]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(u(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/bytes.js"}],[1859,{buffer:4138,"ethereum-cryptography/secp256k1":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("buffer"),i=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=i.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=i.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=n.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/constants.js"}],[186,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitizeUIState=function(e){const t={...e};for(const e of n)delete t[e];return function(e){const t=e.snaps;if(!t)return;e.snaps=Object.values(t).reduce(((e,t)=>(e[t.id]=function(e){const t={...e};return delete t.sourceCode,delete t.auxiliaryFiles,t}(t),e)),{})}(t),t};const n=["snapStates","unencryptedSnapStates","vault"]}}},{package:"$root$",file:"app/scripts/lib/state-utils.ts"}],[1860,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=t<<5,1&~e.length||(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,n.subarray(1)),n};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const n=2-(1&t[0]);return t.subarray(n)}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/encoding.js"}],[1861,{"../../../../../../is-buffer/index.js":4736,"./internal":1863},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const n=e("./internal");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../is-buffer/index.js")})}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/helpers.js"}],[1862,{"./account":1855,"./address":1856,"./asyncEventEmitter":1857,"./bytes":1858,"./constants":1859,"./encoding":1860,"./internal":1863,"./lock":1864,"./provider":1865,"./signature":1866,"./types":1867,"./units":1868,"./withdrawal":1869},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,i(e("./constants"),r),i(e("./units"),r),i(e("./account"),r),i(e("./address"),r),i(e("./withdrawal"),r),i(e("./signature"),r),i(e("./bytes"),r),i(e("./types"),r),i(e("./encoding"),r),i(e("./asyncEventEmitter"),r);var s=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return s.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return s.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return s.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return s.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return s.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return s.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return s.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return s.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return s.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return s.toAscii}}),i(e("./lock"),r),i(e("./provider"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/index.js"}],[1863,{buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function n(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=n,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(t){return`0x${n(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let i=0;i<e.length;i++){let s=e[i][t];if(!0!==r||s){if("string"!=typeof s)throw new Error("invalid abi - expected type 'string', received "+typeof s)}else s="";n.push(s)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/internal.js"}],[1864,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/lock.js"}],[1865,{"micro-ftch":4990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const n=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/provider.js"}],[1866,{"./bytes":1858,"./constants":1859,"./helpers":1861,buffer:4138,"ethereum-cryptography/keccak":4372,"ethereum-cryptography/secp256k1":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),s=e("./bytes"),a=e("./constants"),o=e("./helpers");function u(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function c(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,n){const s=i.secp256k1.sign(e,r),a=s.toCompactRawBytes();return{r:t.from(a.slice(0,32)),s:t.from(a.slice(32,64)),v:n===undefined?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(n)*BigInt(2)}};r.ecrecover=function(e,r,n,a,o){const d=t.concat([(0,s.setLengthLeft)(n,32),(0,s.setLengthLeft)(a,32)],64),l=u(r,o);if(!c(l))throw new Error("Invalid signature v value");const f=i.secp256k1.Signature.fromCompact(d).addRecoveryBit(Number(l)).recoverPublicKey(e);return t.from(f.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,n,i){if(!c(u(e,i)))throw new Error("Invalid signature v value");return(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(n,32),(0,s.toBuffer)(e)]))};r.toCompactSig=function(e,r,n,i){if(!c(u(e,i)))throw new Error("Invalid signature v value");let a=n;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(a=t.from(n),a[0]|=128),(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(a,32)]))};r.fromRpcSig=function(e){const t=(0,s.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,s.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,s.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return i<27&&(i+=BigInt(27)),{v:i,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,i){if(32!==t.length||32!==r.length)return!1;if(!c(u(e,i)))return!1;const o=(0,s.bufferToBigInt)(t),d=(0,s.bufferToBigInt)(r);return!(o===BigInt(0)||o>=a.SECP256K1_ORDER||d===BigInt(0)||d>=a.SECP256K1_ORDER)&&!(n&&d>=a.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,n.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/signature.js"}],[1867,{"./bytes":1858,"./internal":1863},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes"),i=e("./internal");var s;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(s=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,i.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case s.Buffer:return r;case s.BigInt:return(0,n.bufferToBigInt)(r);case s.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case s.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/types.js"}],[1868,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/units.js"}],[1869,{"./address":1856,"./bytes":1858,"./types":1867,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address"),i=e("./bytes"),s=e("./types");class a{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:o}=e,u=(0,s.toType)(t,s.TypeOutput.BigInt),c=(0,s.toType)(r,s.TypeOutput.BigInt),d=new n.Address((0,s.toType)(i,s.TypeOutput.Buffer)),l=(0,s.toType)(o,s.TypeOutput.BigInt);return new a(u,c,d,l)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,i]=e;return a.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBufferArray(e){const{index:r,validatorIndex:i,address:a,amount:o}=e,u=(0,s.toType)(r,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(r,s.TypeOutput.Buffer),c=(0,s.toType)(i,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(i,s.TypeOutput.Buffer);let d;d=a instanceof n.Address?a.buf:(0,s.toType)(a,s.TypeOutput.Buffer);return[u,c,d,(0,s.toType)(o,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(o,s.TypeOutput.Buffer)]}raw(){return a.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,i.bigIntToHex)(this.index),validatorIndex:(0,i.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,i.bigIntToHex)(this.amount)}}}r.Withdrawal=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[1870,{"./errors":1871,"./packer":1874,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeSingle=r.decode=r.encodePacked=r.encodeSingle=r.encode=void 0;const n=e("@metamask/utils"),i=e("./errors"),s=e("./packer");r.encode=(e,t,r,n)=>{try{return(0,s.pack)({types:e,values:t,packed:r,tight:n})}catch(e){if(e instanceof i.ParserError)throw new i.ParserError(`Unable to encode value: ${e.message}`,e);throw new i.ParserError(`An unexpected error occurred: ${(0,i.getErrorMessage)(e)}`,e)}};r.encodeSingle=(e,t)=>(0,r.encode)([e],[t]);r.encodePacked=(e,t,n)=>(0,r.encode)(e,t,!0,n);r.decode=(e,t)=>{const r=(0,n.createBytes)(t);try{return(0,s.unpack)(e,r)}catch(e){if(e instanceof i.ParserError)throw new i.ParserError(`Unable to decode value: ${e.message}`,e);throw new i.ParserError(`An unexpected error occurred: ${(0,i.getErrorMessage)(e)}`,e)}};r.decodeSingle=(e,t)=>{const s=(0,r.decode)([e],t);return(0,n.assert)(1===s.length,new i.ParserError("Decoded value array has unexpected length.")),s[0]}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/abi.js"}],[1871,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParserError=r.getErrorStack=r.getErrorMessage=void 0;const n=e("@metamask/utils");r.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,n.isObject)(e)&&(0,n.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";r.getErrorStack=e=>e instanceof Error?e.stack:undefined;class i extends Error{constructor(e,t){super(e),this.name="ParserError";const n=(0,r.getErrorStack)(t);n&&(this.stack=n)}}r.ParserError=i}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/errors.js"}],[1872,{"./abi":1870,"./errors":1871,"./types":1887},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./abi"),r),i(e("./errors"),r),i(e("./types"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/index.js"}],[1873,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.iterate=void 0;const n=e("@metamask/utils");r.iterate=function*(e,t=32){for(let r=0;r<e.length;r+=t){const i=e=>{(0,n.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,n.assert)(e%t==0,"Length must be a multiple of the size."),r+=e},s=e.subarray(r);yield{skip:i,value:s}}return{skip:()=>undefined,value:new Uint8Array}}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/iterator.js"}],[1874,{"./errors":1871,"./iterator":1873,"./parsers":1881,"./utils":1889,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unpack=r.pack=r.isDynamicParser=r.getParser=void 0;const n=e("@metamask/utils"),i=e("./errors"),s=e("./iterator"),a=e("./parsers"),o=e("./utils");r.getParser=e=>{const t={address:a.address,array:a.array,bool:a.bool,bytes:a.bytes,fixedBytes:a.fixedBytes,function:a.fn,number:a.number,string:a.string,tuple:a.tuple},r=t[e];if(r)return r;const n=Object.values(t).find((t=>t.isType(e)));if(n)return n;throw new i.ParserError(`The type "${e}" is not supported.`)};r.isDynamicParser=(e,t)=>{const{isDynamic:r}=e;return"function"==typeof r?r(t):r};r.pack=({types:e,values:t,packed:s=!1,tight:a=!1,arrayPacked:u=!1,byteArray:c=new Uint8Array})=>{(0,n.assert)(e.length===t.length,new i.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));const{staticBuffer:d,dynamicBuffer:l,pointers:f}=e.reduce((({staticBuffer:e,dynamicBuffer:i,pointers:o},c,d)=>{const l=(0,r.getParser)(c),f=t[d];if(s||u||!(0,r.isDynamicParser)(l,c))return{staticBuffer:l.encode({buffer:e,value:f,type:c,packed:s,tight:a}),dynamicBuffer:i,pointers:o};return{staticBuffer:(0,n.concatBytes)([e,new Uint8Array(32)]),dynamicBuffer:l.encode({buffer:i,value:f,type:c,packed:s,tight:a}),pointers:[...o,{position:e.length,pointer:i.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,n.assert)(!s&&!u||0===l.length,new i.ParserError("Invalid pack state."));const p=d.length,h=f.reduce(((e,{pointer:t,position:r})=>{const i=(0,o.padStart)((0,n.numberToBytes)(p+t));return(0,o.set)(e,i,r)}),d);return(0,n.concatBytes)([c,h,l])};r.unpack=(e,t)=>{const a=(0,s.iterate)(t);return e.map((e=>{const{value:{value:s,skip:o},done:u}=a.next();(0,n.assert)(!u,new i.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${e}".`));const c=(0,r.getParser)(e);if((0,r.isDynamicParser)(c,e)){const r=(0,n.bytesToNumber)(s.subarray(0,32)),i=t.subarray(r);return c.decode({type:e,value:i,skip:o})}return c.decode({type:e,value:s,skip:o})}))}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/packer.js"}],[1875,{"../errors":1871,"../utils":1889,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.address=r.getAddress=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils");r.getAddress=e=>{const t=(0,n.createBytes)(e);return(0,n.assert)(t.length<=20,new i.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,s.padStart)(t,20)},r.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:i}){const a=(0,r.getAddress)(t);if(i)return(0,n.concatBytes)([e,a]);const o=(0,s.padStart)(a);return(0,n.concatBytes)([e,o])},decode:({value:e})=>(0,n.add0x)((0,n.bytesToHex)(e.slice(12,32)))}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/address.js"}],[1876,{"../errors":1871,"../packer":1874,"../utils":1889,"./fixed-bytes":1879,"./tuple":1885,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.array=r.getTupleType=r.getArrayType=r.isArrayType=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../packer"),a=e("../utils"),o=e("./fixed-bytes"),u=e("./tuple"),c=/^(?<type>.*)\[(?<length>\d*?)\]$/u;r.isArrayType=e=>c.test(e);r.getArrayType=e=>{const t=e.match(c);return(0,n.assert)(t?.groups?.type,new i.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):undefined]};r.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,r.array={isDynamic(e){const[t,n]=(0,r.getArrayType)(e);return n===undefined||(0,s.isDynamicParser)((0,s.getParser)(t),t)},isType:e=>(0,r.isArrayType)(e),getByteLength(e){(0,n.assert)((0,r.isArrayType)(e),new i.ParserError(`Expected an array type, but received "${e}".`));const[t,a]=(0,r.getArrayType)(e);return(0,s.isDynamicParser)(this,e)||a===undefined?32:u.tuple.getByteLength((0,r.getTupleType)(t,a))},encode({type:e,buffer:t,value:c,packed:d,tight:l}){const[f,p]=(0,r.getArrayType)(e);if((0,n.assert)(!d||!(0,r.isArrayType)(f),new i.ParserError("Cannot pack nested arrays.")),d&&(0,s.isDynamicParser)((0,s.getParser)(f),f))return(0,s.pack)({types:new Array(c.length).fill(f),values:c,byteArray:t,packed:d,arrayPacked:!0,tight:l});if(p)return(0,n.assert)(p===c.length,new i.ParserError(`Array length does not match type length. Expected a length of ${p}, but received ${c.length}.`)),u.tuple.encode({type:(0,r.getTupleType)(f,p),buffer:t,value:c,packed:o.fixedBytes.isType(f)&&l,tight:l});if(d)return(0,s.pack)({types:new Array(c.length).fill(f),values:c,byteArray:t,packed:o.fixedBytes.isType(f)&&l,arrayPacked:!0,tight:l});const h=(0,a.padStart)((0,n.numberToBytes)(c.length));return(0,s.pack)({types:new Array(c.length).fill(f),values:c,byteArray:(0,n.concatBytes)([t,h]),packed:d,tight:l})},decode({type:e,value:t,...a}){const[o,c]=(0,r.getArrayType)(e);if(c){const e=u.tuple.decode({type:(0,r.getTupleType)(o,c),value:t,...a});return(0,n.assert)(e.length===c,new i.ParserError(`Array length does not match type length. Expected a length of ${c}, but received ${e.length}.`)),e}const d=(0,n.bytesToNumber)(t.subarray(0,32));return(0,s.unpack)(new Array(d).fill(o),t.subarray(32))}}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/array.js"}],[1877,{"../errors":1871,"./number":1882,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bool=r.getBooleanValue=void 0;const n=e("@metamask/superstruct"),i=e("@metamask/utils"),s=e("../errors"),a=e("./number"),o=(0,n.coerce)((0,n.boolean)(),(0,n.union)([(0,n.literal)("true"),(0,n.literal)("false")]),(e=>"true"===e));r.getBooleanValue=e=>{try{return(0,n.create)(e,o)?BigInt(1):BigInt(0)}catch{throw new s.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},r.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:s}){const o=(0,r.getBooleanValue)(t);return n?(0,i.concatBytes)([e,(0,i.bigIntToBytes)(o)]):a.number.encode({type:"uint256",buffer:e,value:o,packed:n,tight:s})},decode:e=>a.number.decode({...e,type:"uint256"})===BigInt(1)}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/bool.js"}],[1878,{"../utils":1889,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=void 0;const n=e("@metamask/utils"),i=e("../utils");r.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r}){const s=(0,n.createBytes)(t);if(r)return(0,n.concatBytes)([e,s]);const a=32*Math.ceil(s.byteLength/32);return(0,n.concatBytes)([e,(0,i.padStart)((0,n.numberToBytes)(s.byteLength)),(0,i.padEnd)(s,a)])},decode({value:e}){const t=e.subarray(0,32),r=(0,n.bytesToNumber)(t);return e.slice(32,32+r)}}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/bytes.js"}],[1879,{"../errors":1871,"../utils":1889,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fixedBytes=r.getByteLength=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils"),a=/^bytes([0-9]{1,2})$/u;r.getByteLength=e=>{const t=e.match(a)?.[1];(0,n.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const r=Number(t);return(0,n.assert)(r>0&&r<=32,new i.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),r},r.fixedBytes={isDynamic:!1,isType:e=>a.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:a,packed:o}){const u=(0,r.getByteLength)(e),c=(0,n.createBytes)(a);return(0,n.assert)(c.length<=u,new i.ParserError(`Expected a value of length ${u}, but received a value of length ${c.length}.`)),o?(0,n.concatBytes)([t,(0,s.padEnd)(c,u)]):(0,n.concatBytes)([t,(0,s.padEnd)(c)])},decode({type:e,value:t}){const n=(0,r.getByteLength)(e);return t.slice(0,n)}}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/fixed-bytes.js"}],[1880,{"../errors":1871,"./fixed-bytes":1879,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fn=r.getFunction=void 0;const n=e("@metamask/superstruct"),i=e("@metamask/utils"),s=e("../errors"),a=e("./fixed-bytes"),o=(0,n.coerce)((0,n.object)({address:i.StrictHexStruct,selector:i.StrictHexStruct}),(0,n.union)([i.StrictHexStruct,(0,n.instance)(Uint8Array)]),(e=>{const t=(0,i.createBytes)(e);return(0,i.assert)(24===t.length,new s.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,i.bytesToHex)(t.subarray(0,20)),selector:(0,i.bytesToHex)(t.subarray(20,24))}}));r.getFunction=e=>{const t=(0,n.create)(e,o);return(0,i.concatBytes)([(0,i.hexToBytes)(t.address),(0,i.hexToBytes)(t.selector)])},r.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:i}){const s=(0,r.getFunction)(t);return a.fixedBytes.encode({type:"bytes24",buffer:e,value:s,packed:n,tight:i})},decode:({value:e})=>({address:(0,i.bytesToHex)(e.slice(0,20)),selector:(0,i.bytesToHex)(e.slice(20,24))})}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/function.js"}],[1881,{"./address":1875,"./array":1876,"./bool":1877,"./bytes":1878,"./fixed-bytes":1879,"./function":1880,"./number":1882,"./parser":1883,"./string":1884,"./tuple":1885},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./address"),r),i(e("./array"),r),i(e("./bool"),r),i(e("./bytes"),r),i(e("./fixed-bytes"),r),i(e("./function"),r),i(e("./number"),r),i(e("./parser"),r),i(e("./string"),r),i(e("./tuple"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/index.js"}],[1882,{"../errors":1871,"../utils":1889,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.number=r.getBigInt=r.assertNumberLength=r.getLength=r.isSigned=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils"),a=/^u?int(?<length>[0-9]*)?$/u;r.isSigned=e=>!e.startsWith("u");r.getLength=e=>{if("int"===e||"uint"===e)return 256;const t=e.match(a);(0,n.assert)(t?.groups?.length,new i.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));const r=parseInt(t.groups.length,10);return(0,n.assert)(r>=8&&r<=256,new i.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,n.assert)(r%8==0,new i.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),r};r.assertNumberLength=(e,t)=>{const s=(0,r.getLength)(t),a=BigInt(2)**BigInt(s-((0,r.isSigned)(t)?1:0))-BigInt(1);(0,r.isSigned)(t)?(0,n.assert)(e>=-(a+BigInt(1))&&e<=a,new i.ParserError(`Number "${e}" is out of range for type "${t}".`)):(0,n.assert)(e<=a,new i.ParserError(`Number "${e}" is out of range for type "${t}".`))};r.getBigInt=e=>{try{return(0,n.createBigInt)(e)}catch{throw new i.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}},r.number={isDynamic:!1,isType:e=>a.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:i,packed:a}){const o=(0,r.getBigInt)(i);if((0,r.assertNumberLength)(o,e),(0,r.isSigned)(e)){if(a){const i=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,n.signedBigIntToBytes)(o,i)])}return(0,n.concatBytes)([t,(0,s.padStart)((0,n.signedBigIntToBytes)(o,32))])}if(a){const i=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,s.padStart)((0,n.bigIntToBytes)(o),i)])}return(0,n.concatBytes)([t,(0,s.padStart)((0,n.bigIntToBytes)(o))])},decode({type:e,value:t}){const i=t.subarray(0,32);if((0,r.isSigned)(e)){const t=(0,n.bytesToSignedBigInt)(i);return(0,r.assertNumberLength)(t,e),t}const s=(0,n.bytesToBigInt)(i);return(0,r.assertNumberLength)(s,e),s}}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/number.js"}],[1883,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/parser.js"}],[1884,{"./bytes":1878,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.string=void 0;const n=e("@metamask/utils"),i=e("./bytes");r.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode:({buffer:e,value:t,packed:r,tight:s})=>i.bytes.encode({type:"bytes",buffer:e,value:(0,n.stringToBytes)(t),packed:r,tight:s}),decode:e=>(0,n.bytesToString)(i.bytes.decode(e))}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/string.js"}],[1885,{"../errors":1871,"../packer":1874,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tuple=r.getTupleElements=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../packer"),a=/^\((.+)\)$/u;r.getTupleElements=e=>{(0,n.assert)(e.startsWith("(")&&e.endsWith(")"),new i.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));const t=[];let r="",s=0;for(let n=1;n<e.length-1;n++){const i=e[n];","===i&&0===s?(t.push(r.trim()),r=""):(r+=i,"("===i?s+=1:")"===i&&(s-=1))}return r.trim()&&t.push(r.trim()),t},r.tuple={isDynamic:e=>(0,r.getTupleElements)(e).some((e=>{const t=(0,s.getParser)(e);return(0,s.isDynamicParser)(t,e)})),isType:e=>(e=>a.test(e))(e),getByteLength(e){if((0,s.isDynamicParser)(this,e))return 32;return(0,r.getTupleElements)(e).reduce(((e,t)=>e+(0,s.getParser)(t).getByteLength(t)),0)},encode({type:e,buffer:t,value:n,packed:i,tight:a}){const o=(0,r.getTupleElements)(e);return(0,s.pack)({types:o,values:n,byteArray:t,packed:i,tight:a})},decode({type:e,value:t,skip:n}){const i=(0,r.getTupleElements)(e);return n(this.getByteLength(e)-32),(0,s.unpack)(i,t)}}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/parsers/tuple.js"}],[1886,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/types/abi.js"}],[1887,{"./abi":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./abi"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/types/index.js"}],[1888,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.padEnd=r.padStart=r.set=void 0;const n=e("@metamask/utils");r.set=(e,t,r)=>(0,n.concatBytes)([e.subarray(0,r),t,e.subarray(r+t.length)]);r.padStart=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([r,e])};r.padEnd=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([e,r])}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/utils/buffer.js"}],[1889,{"./buffer":1888},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./buffer"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/abi-utils/dist/utils/index.js"}],[1890,{"./utils":1895,"@scure/base":1896,buffer:4138,tweetnacl:5723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const a=e("@scure/base"),o=s(e("tweetnacl")),u=e("./utils");function c({publicKey:e,data:t,version:r}){if((0,u.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,u.isNullish)(t))throw new Error("Missing data parameter");if((0,u.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.base64.decode(e)}catch(e){throw new Error("Bad public key")}const i=a.utf8.decode(t),s=o.randomBytes(o.box.nonceLength),u=o.box(i,s,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.base64.encode(s),ephemPublicKey:a.base64.encode(r.publicKey),ciphertext:a.base64.encode(u)}}throw new Error("Encryption type/version not supported")}function d({encryptedData:e,privateKey:r}){if((0,u.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,u.isNullish)(r))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const n=t.from(r,"hex"),i=o.box.keyPair.fromSecretKey(n).secretKey,s=a.base64.decode(e.nonce),u=a.base64.decode(e.ciphertext),c=a.base64.decode(e.ephemPublicKey),d=o.box.open(u,s,c,i);try{if(!d)throw new Error;const e=a.utf8.encode(d);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}r.encrypt=c,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,u.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,u.isNullish)(r))throw new Error("Missing data parameter");if((0,u.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:r,padding:""},s=t.byteLength(JSON.stringify(i),"utf-8")%2048;let a=0;return s>0&&(a=2048-s-16),i.padding="0".repeat(a),c({publicKey:e,data:JSON.stringify(i),version:n})},r.decrypt=d,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,u.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,u.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(d({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const r=t.from(e,"hex"),n=o.box.keyPair.fromSecretKey(r).publicKey;return a.base64.encode(n)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1891,{"./encryption":1890,"./personal-sign":1892,"./sign-eip7702-authorization":1893,"./sign-typed-data":1894,"./utils":1895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,i(e("./personal-sign"),r),i(e("./sign-typed-data"),r),i(e("./encryption"),r),i(e("./sign-eip7702-authorization"),r);var s=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return s.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return s.normalize}})}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/index.js"}],[1892,{"./utils":1895,"@ethereumjs/util":1862},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),i=e("./utils");function s(e,t){const r=(0,n.hashPersonalMessage)((0,i.legacyToBuffer)(e));return(0,i.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,i.isNullish)(t))throw new Error("Missing data parameter");if((0,i.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,i.legacyToBuffer)(t),s=(0,n.hashPersonalMessage)(r),a=(0,n.ecsign)(s,e);return(0,i.concatSig)((0,n.toBuffer)(a.v),a.r,a.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");const r=s(e,t),a=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(a)},r.extractPublicKey=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");return`0x${s(e,t).toString("hex")}`}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1893,{"./utils":1895,"@ethereumjs/rlp":462,"@ethereumjs/util":1862,"@metamask/utils":3026,buffer:4138,"ethereum-cryptography/keccak":4372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashEIP7702Authorization=r.recoverEIP7702Authorization=r.signEIP7702Authorization=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),s=e("@metamask/utils"),a=e("ethereum-cryptography/keccak"),o=e("./utils");function u(e){c(e);const r=(0,n.encode)(e),i=t.concat([t.from("05","hex"),r]);return t.from((0,a.keccak256)(i))}function c(e){if((0,o.isNullish)(e))throw new Error("Missing authorization parameter");const[t,r,n]=e;if((0,o.isNullish)(t))throw new Error("Missing chainId parameter");if((0,o.isNullish)(r))throw new Error("Missing contractAddress parameter");if((0,o.isNullish)(n))throw new Error("Missing nonce parameter")}r.signEIP7702Authorization=function({privateKey:e,authorization:t}){if(c(t),(0,o.isNullish)(e))throw new Error("Missing privateKey parameter");const r=u(t),{r:n,s:s,v:a}=(0,i.ecsign)(r,e),d=(0,i.toBuffer)(a);return(0,o.concatSig)(d,n,s)},r.recoverEIP7702Authorization=function({signature:e,authorization:t}){if(c(t),(0,o.isNullish)(e))throw new Error("Missing signature parameter");const r=u(t),n=(0,o.recoverPublicKey)(r,e),a=(0,i.publicToAddress)(n);return(0,s.bytesToHex)(a)},r.hashEIP7702Authorization=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/sign-eip7702-authorization.js"}],[1894,{"./utils":1895,"@ethereumjs/util":1862,"@metamask/abi-utils":1872,"@metamask/abi-utils/dist/parsers":1881,"@metamask/abi-utils/dist/utils":1889,"@metamask/utils":3026,"ethereum-cryptography/keccak":4372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/abi-utils"),s=e("@metamask/abi-utils/dist/parsers"),a=e("@metamask/abi-utils/dist/utils"),o=e("@metamask/utils"),u=e("ethereum-cryptography/keccak"),c=e("./utils");var d;function l(e,t){if(!Object.keys(d).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function f(e,t){(0,o.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),n=(0,s.getLength)(e),i=BigInt(2)**BigInt(n)-BigInt(1);return(0,o.assert)(r>=-i&&r<=i,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function p(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,a.padStart)((0,o.bigIntToBytes)(t),20)}function h(e,t,r,s,c){if(l(c,[d.V3,d.V4]),e[r]!==undefined)return["bytes32",c===d.V4&&null==s?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,u.keccak256)(m(r,s,e,c)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(s===undefined)throw new Error(`missing value for field ${t} of type ${r}`);if("address"===r){if("number"==typeof s)return["address",(0,a.padStart)((0,o.numberToBytes)(s),20)];if((0,o.isStrictHexString)(s))return["address",(0,o.add0x)(s)];if("string"==typeof s)return["address",p(s).subarray(0,20)]}if("bool"===r)return["bool",Boolean(s)];if("bytes"===r)return"number"==typeof s?s=(0,o.numberToBytes)(s):(0,o.isStrictHexString)(s)||"0x"===s?s=(0,o.hexToBytes)(s):"string"==typeof s&&(s=(0,o.stringToBytes)(s)),["bytes32",(0,n.arrToBufArr)((0,u.keccak256)(s))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"==typeof s?s<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,o.bigIntToBytes)(BigInt(s))]:(0,o.isStrictHexString)(s)?["bytes32",(0,o.hexToBytes)(s)]:["bytes32",s];if(r.startsWith("int")&&!r.includes("[")){const e=f(r,s);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return s="number"==typeof s?(0,o.numberToBytes)(s):(0,o.stringToBytes)(null!=s?s:""),["bytes32",(0,n.arrToBufArr)((0,u.keccak256)(s))];if(r.endsWith("]")){if(c===d.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const a=r.slice(0,r.lastIndexOf("[")),o=s.map((r=>h(e,t,a,r,c)));return["bytes32",(0,n.arrToBufArr)((0,u.keccak256)((0,i.encode)(o.map((([e])=>e)),o.map((([,e])=>e)))))]}return[r,s]}function m(e,t,r,s){l(s,[d.V3,d.V4]);const a=["bytes32"],o=[w(e,r)];for(const n of r[e]){if(s===d.V3&&t[n.name]===undefined)continue;const[e,i]=h(r,n.name,n.type,t[n.name],s);a.push(e),o.push(i)}return(0,n.arrToBufArr)((0,i.encode)(a,o))}function g(e,t){let r="";const n=y(e,t);n.delete(e);const i=[e,...Array.from(n).sort()];for(const e of i){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function y(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])y(n.type,t,r);return r}function b(e,t,r,i){l(i,[d.V3,d.V4]);const s=m(e,t,r,i),a=(0,u.keccak256)(s);return(0,n.arrToBufArr)(a)}function w(e,t){const r=(0,o.stringToBytes)(g(e,t));return(0,n.arrToBufArr)((0,u.keccak256)(r))}function k(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function v(e,t){l(t,[d.V3,d.V4]);const r=k(e),{domain:n}=r;return b("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function T(e,t){if((0,s.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,s.getArrayType)(e);return t.map((e=>T(r,e)))}if("address"===e){if((0,o.isStrictHexString)(t))return(0,a.padStart)((0,o.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,a.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,s.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,o.numberToBytes)(t).subarray(0,r);if((0,o.isStrictHexString)(t))return(0,o.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,s.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function E(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=f(e,t);if(r>=BigInt(0))return(0,a.padStart)((0,o.bigIntToBytes)(r),32);const n=(0,s.getLength)(e),i=BigInt.asIntN(n,r);return(0,o.signedBigIntToBytes)(i,32)}return t}))}function _(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(n=r,n.map((e=>"number"==typeof e?(0,a.padStart)((0,o.numberToBytes)(e),32):(0,o.isStrictHexString)(e)?(0,a.padStart)((0,o.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,a.padStart)(e.subarray(0,32),32):e)))};var n;if(t.startsWith("int")&&(0,s.isArrayType)(t)){const[n,i]=(0,s.getArrayType)(t);return{name:e,type:`bytes32[${null!=i?i:""}]`,value:E(n,r)}}return{name:e,type:t,value:T(t,r)}})),d=r.map((e=>"bytes"!==e.type?e.value:(0,c.legacyToBuffer)(e.value))),l=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),f=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,n.arrToBufArr)((0,u.keccak256)((0,i.encodePacked)(["bytes32","bytes32"],[(0,u.keccak256)((0,i.encodePacked)(["string[]"],[f],!0)),(0,u.keccak256)((0,i.encodePacked)(l,d,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(d=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:m,encodeType:g,findTypeDependencies:y,hashStruct:b,hashType:w,sanitizeData:k,eip712Hash:function(e,t){l(t,[d.V3,d.V4]);const r=k(e),i=[(0,o.hexToBytes)("1901")];return i.push(v(e,t)),"EIP712Domain"!==r.primaryType&&i.push(b(r.primaryType,r.message,r.types,t)),(0,n.arrToBufArr)((0,u.keccak256)((0,o.concatBytes)(i)))},eip712DomainHash:v},r.typedSignatureHash=function(e){const t=_(e);return(0,o.bytesToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:i}){if(l(i),(0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(e))throw new Error("Missing private key parameter");const s=i===d.V1?_(t):r.TypedDataUtils.eip712Hash(t,i),a=(0,n.ecsign)(s,e);return(0,c.concatSig)((0,n.arrToBufArr)((0,o.bigIntToBytes)(a.v)),a.r,a.s)},r.recoverTypedSignature=function({data:e,signature:t,version:i}){if(l(i),(0,c.isNullish)(e))throw new Error("Missing data parameter");if((0,c.isNullish)(t))throw new Error("Missing signature parameter");const s=i===d.V1?_(e):r.TypedDataUtils.eip712Hash(e,i),a=(0,c.recoverPublicKey)(s,t),u=(0,n.publicToAddress)(a);return(0,o.bytesToHex)(u)}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1895,{"@ethereumjs/util":1862,"@metamask/utils":3026,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/utils");function s(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function a(e){return null===e||e===undefined}r.padWithZeroes=s,r.isNullish=a,r.legacyToBuffer=function(e){return"string"!=typeof e||(0,n.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const a=(0,n.fromSigned)(t),o=(0,n.fromSigned)(r),u=(0,n.bufferToInt)(e),c=s((0,n.toUnsigned)(a).toString("hex"),64),d=s((0,n.toUnsigned)(o).toString("hex"),64),l=(0,i.remove0x)((0,i.numberToHex)(u));return(0,i.add0x)(c.concat(d,l))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(a(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,i.numberToBytes)(e);e=(0,i.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,i.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1896,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function s(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function a(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function u(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function c(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function d(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const s=[],a=Array.from(e);for(a.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let s=i;s<a.length;s++){const o=a[s],u=t*e+o;if(!Number.isSafeInteger(u)||t*e/t!==e||u-o!=t*e)throw new Error("convertRadix: carry overflow");e=u%r;const c=Math.floor(u/r);if(a[s]=c,!Number.isSafeInteger(c)||c*r+e!==u)throw new Error("convertRadix: carry overflow");n&&(c?n=!1:i=s)}if(s.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)s.push(0);return s.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=void 0,r.assertNumber=n;const l=(e,t)=>t?l(t,e%t):e,f=(e,t)=>e+(t-l(e,t));function p(e,t,r,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(f(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${f(t,r)}`);let s=0,a=0;const o=2**r-1,u=[];for(const i of e){if(n(i),i>=2**t)throw new Error(`convertRadix2: invalid data word=${i} from=${t}`);if(s=s<<t|i,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=r;a-=r)u.push((s>>a-r&o)>>>0);s&=2**a-1}if(s=s<<r-a&o,!i&&a>=t)throw new Error("Excess padding");if(!i&&s)throw new Error(`Non-zero padding: ${s}`);return i&&a>0&&u.push(s>>>0),u}function h(e){return n(e),{encode:t=>{if(!i(t))throw new Error("radix.encode input should be Uint8Array");return d(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(d(t,e,256))}}}function m(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(f(8,e)>32||f(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!i(r))throw new Error("radix2.encode input should be Uint8Array");return p(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(p(r,e,8,t))}}}function g(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!i(r))throw new Error("checksum.encode: input should be Uint8Array");const n=t(r).slice(0,e),s=new Uint8Array(r.length+e);return s.set(r),s.set(n,r.length),s},decode(r){if(!i(r))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-e),s=t(n).slice(0,e),a=r.slice(-e);for(let t=0;t<e;t++)if(s[t]!==a[t])throw new Error("Invalid checksum");return n}}}r.utils={alphabet:a,chain:s,checksum:y,convertRadix:d,convertRadix2:p,radix:h,radix2:m,join:o,padding:u},r.base16=s(m(4),a("0123456789ABCDEF"),o("")),r.base32=s(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),u(5),o("")),r.base32nopad=s(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o("")),r.base32hex=s(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),u(5),o("")),r.base32hexnopad=s(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o("")),r.base32crockford=s(m(5),a("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),c((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),r.base64=s(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),u(6),o("")),r.base64nopad=s(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o("")),r.base64url=s(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),u(6),o("")),r.base64urlnopad=s(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(""));const b=e=>s(h(58),a(e),o(""));r.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){const i=e.subarray(n,n+8);t+=r.base58.encode(i).padStart(w[i.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const i=e.slice(n,n+11),s=w.indexOf(i.length),a=r.base58.decode(i);for(let e=0;e<a.length-s;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-s)))}return Uint8Array.from(t)}};r.createBase58check=e=>s(y(4,(t=>e(e(t)))),r.base58),r.base58check=r.createBase58check;const k=s(a("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),v=[996825010,642813549,513874426,1027748829,705979059];function T(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<v.length;e++)1==(t>>e&1)&&(r^=v[e]);return r}function E(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=T(i)^r>>5}i=T(i);for(let t=0;t<n;t++)i=T(i)^31&e.charCodeAt(t);for(let e of t)i=T(i)^e;for(let e=0;e<6;e++)i=T(i);return i^=r,k.encode(p([i%2**30],30,5,!1))}function _(e){const t="bech32"===e?1:734539939,r=m(5),n=r.decode,i=r.encode,s=g(n);function a(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(r instanceof Uint8Array&&(r=Array.from(r)),!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);if(0===e.length)throw new TypeError(`Invalid prefix length ${e.length}`);const i=e.length+7+r.length;if(!1!==n&&i>n)throw new TypeError(`Length ${i} exceeds limit ${n}`);const s=e.toLowerCase(),a=E(s,r,t);return`${s}1${k.encode(r)}${a}`}function o(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=n.lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const s=n.slice(0,i),a=n.slice(i+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const o=k.decode(a).slice(0,-6),u=E(s,o,t);if(!a.endsWith(u))throw new Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:s,words:o}}return{encode:a,decode:o,encodeFromBytes:function(e,t){return a(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:r}=o(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:g(o),fromWords:n,fromWordsUnsafe:s,toWords:i}}r.bech32=_("bech32"),r.bech32m=_("bech32m"),r.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},r.hex=s(m(4),a("0123456789abcdef"),o(""),c((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const A={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},P="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!A.hasOwnProperty(e))throw new TypeError(P);if(!i(t))throw new TypeError("bytesToString() expects Uint8Array");return A[e].encode(t)},r.str=r.bytesToString;r.stringToBytes=(e,t)=>{if(!A.hasOwnProperty(e))throw new TypeError(P);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return A[e].decode(t)},r.bytes=r.stringToBytes}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>@scure/base",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@scure/base/lib/index.js"}],[1897,{"./nil.js":1900,"./parse.js":1901,"./stringify.js":1905,"./v1.js":1906,"./v3.js":1907,"./v4.js":1909,"./v5.js":1910,"./validate.js":1911,"./version.js":1912},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return u.default}});var n=f(e("./v1.js")),i=f(e("./v3.js")),s=f(e("./v4.js")),a=f(e("./v5.js")),o=f(e("./nil.js")),u=f(e("./version.js")),c=f(e("./validate.js")),d=f(e("./stringify.js")),l=f(e("./parse.js"));function f(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/index.js"}],[1898,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function i(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function s(e,t,r,n,s,a){return i((o=i(i(t,e),i(n,a)))<<(u=s)|o>>>32-u,r);var o,u}function a(e,t,r,n,i,a,o){return s(t&r|~t&n,e,t,i,a,o)}function o(e,t,r,n,i,a,o){return s(t&n|r&~n,e,t,i,a,o)}function u(e,t,r,n,i,a,o){return s(t^r^n,e,t,i,a,o)}function c(e,t,r,n,i,a,o){return s(r^(t|~n),e,t,i,a,o)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){const r=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,s=-271733879,d=-1732584194,l=271733878;for(let t=0;t<e.length;t+=16){const n=r,f=s,p=d,h=l;r=a(r,s,d,l,e[t],7,-680876936),l=a(l,r,s,d,e[t+1],12,-389564586),d=a(d,l,r,s,e[t+2],17,606105819),s=a(s,d,l,r,e[t+3],22,-1044525330),r=a(r,s,d,l,e[t+4],7,-176418897),l=a(l,r,s,d,e[t+5],12,1200080426),d=a(d,l,r,s,e[t+6],17,-1473231341),s=a(s,d,l,r,e[t+7],22,-45705983),r=a(r,s,d,l,e[t+8],7,1770035416),l=a(l,r,s,d,e[t+9],12,-1958414417),d=a(d,l,r,s,e[t+10],17,-42063),s=a(s,d,l,r,e[t+11],22,-1990404162),r=a(r,s,d,l,e[t+12],7,1804603682),l=a(l,r,s,d,e[t+13],12,-40341101),d=a(d,l,r,s,e[t+14],17,-1502002290),s=a(s,d,l,r,e[t+15],22,1236535329),r=o(r,s,d,l,e[t+1],5,-165796510),l=o(l,r,s,d,e[t+6],9,-1069501632),d=o(d,l,r,s,e[t+11],14,643717713),s=o(s,d,l,r,e[t],20,-373897302),r=o(r,s,d,l,e[t+5],5,-701558691),l=o(l,r,s,d,e[t+10],9,38016083),d=o(d,l,r,s,e[t+15],14,-660478335),s=o(s,d,l,r,e[t+4],20,-405537848),r=o(r,s,d,l,e[t+9],5,568446438),l=o(l,r,s,d,e[t+14],9,-1019803690),d=o(d,l,r,s,e[t+3],14,-187363961),s=o(s,d,l,r,e[t+8],20,1163531501),r=o(r,s,d,l,e[t+13],5,-1444681467),l=o(l,r,s,d,e[t+2],9,-51403784),d=o(d,l,r,s,e[t+7],14,1735328473),s=o(s,d,l,r,e[t+12],20,-1926607734),r=u(r,s,d,l,e[t+5],4,-378558),l=u(l,r,s,d,e[t+8],11,-2022574463),d=u(d,l,r,s,e[t+11],16,1839030562),s=u(s,d,l,r,e[t+14],23,-35309556),r=u(r,s,d,l,e[t+1],4,-1530992060),l=u(l,r,s,d,e[t+4],11,1272893353),d=u(d,l,r,s,e[t+7],16,-155497632),s=u(s,d,l,r,e[t+10],23,-1094730640),r=u(r,s,d,l,e[t+13],4,681279174),l=u(l,r,s,d,e[t],11,-358537222),d=u(d,l,r,s,e[t+3],16,-722521979),s=u(s,d,l,r,e[t+6],23,76029189),r=u(r,s,d,l,e[t+9],4,-640364487),l=u(l,r,s,d,e[t+12],11,-421815835),d=u(d,l,r,s,e[t+15],16,530742520),s=u(s,d,l,r,e[t+2],23,-995338651),r=c(r,s,d,l,e[t],6,-198630844),l=c(l,r,s,d,e[t+7],10,1126891415),d=c(d,l,r,s,e[t+14],15,-1416354905),s=c(s,d,l,r,e[t+5],21,-57434055),r=c(r,s,d,l,e[t+12],6,1700485571),l=c(l,r,s,d,e[t+3],10,-1894986606),d=c(d,l,r,s,e[t+10],15,-1051523),s=c(s,d,l,r,e[t+1],21,-2054922799),r=c(r,s,d,l,e[t+8],6,1873313359),l=c(l,r,s,d,e[t+15],10,-30611744),d=c(d,l,r,s,e[t+6],15,-1560198380),s=c(s,d,l,r,e[t+13],21,1309151649),r=c(r,s,d,l,e[t+4],6,-145523070),l=c(l,r,s,d,e[t+11],10,-1120210379),d=c(d,l,r,s,e[t+2],15,718787259),s=c(s,d,l,r,e[t+9],21,-343485551),r=i(r,n),s=i(s,f),d=i(d,p),l=i(l,h)}return[r,s,d,l]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=d}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/md5-browser.js"}],[1899,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/native-browser.js"}],[19,{"@metamask/profile-sync-controller/auth":2493,"@metamask/profile-sync-controller/sdk":2522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AuthenticationControllerInit=void 0;var n=e("@metamask/profile-sync-controller/auth"),i=e("@metamask/profile-sync-controller/sdk");r.AuthenticationControllerInit=({controllerMessenger:e,persistedState:t,getMetaMetricsId:r})=>({controller:new n.Controller({messenger:e,state:t.AuthenticationController,metametrics:{getMetaMetricsId:r,agent:i.Platform.EXTENSION}})})}}},{package:"$root$",file:"app/scripts/controller-init/identity/authentication-controller-init.ts"}],[1900,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/nil.js"}],[1901,{"./validate.js":1911},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=s}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/parse.js"}],[1902,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/regex.js"}],[1903,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};const i=new Uint8Array(16)}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/rng-browser.js"}],[1904,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const s=e.length/4+2,a=Math.ceil(s/16),o=new Array(a);for(let t=0;t<a;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];o[t]=r}o[a-1][14]=8*(e.length-1)/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const s=new Uint32Array(80);for(let t=0;t<16;++t)s[t]=o[e][t];for(let e=16;e<80;++e)s[e]=i(s[e-3]^s[e-8]^s[e-14]^s[e-16],1);let a=r[0],u=r[1],c=r[2],d=r[3],l=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=i(a,5)+n(r,u,c,d)+l+t[r]+s[e]>>>0;l=d,d=c,c=i(u,30)>>>0,u=a,a=o}r[0]=r[0]+a>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+c>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+l>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=s}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/sha1-browser.js"}],[1905,{"./validate.js":1911},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=a;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function a(e,t=0){return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}var o=function(e,t=0){const r=a(e,t);if(!(0,i.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/stringify.js"}],[1906,{"./rng.js":1903,"./stringify.js":1905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./rng.js"))&&n.__esModule?n:{default:n},s=e("./stringify.js");let a,o,u=0,c=0;var d=function(e,t,r){let n=t&&r||0;const d=t||new Array(16);let l=(e=e||{}).node||a,f=e.clockseq!==undefined?e.clockseq:o;if(null==l||null==f){const t=e.random||(e.rng||i.default)();null==l&&(l=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==f&&(f=o=16383&(t[6]<<8|t[7]))}let p=e.msecs!==undefined?e.msecs:Date.now(),h=e.nsecs!==undefined?e.nsecs:c+1;const m=p-u+(h-c)/1e4;if(m<0&&e.clockseq===undefined&&(f=f+1&16383),(m<0||p>u)&&e.nsecs===undefined&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,c=h,o=f,p+=122192928e5;const g=(1e4*(268435455&p)+h)%4294967296;d[n++]=g>>>24&255,d[n++]=g>>>16&255,d[n++]=g>>>8&255,d[n++]=255&g;const y=p/4294967296*1e4&268435455;d[n++]=y>>>8&255,d[n++]=255&y,d[n++]=y>>>24&15|16,d[n++]=y>>>16&255,d[n++]=f>>>8|128,d[n++]=255&f;for(let e=0;e<6;++e)d[n+e]=l[e];return t||(0,s.unsafeStringify)(d)};r.default=d}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v1.js"}],[1907,{"./md5.js":1898,"./v35.js":1908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./v35.js")),i=s(e("./md5.js"));function s(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,i.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v3.js"}],[1908,{"./parse.js":1901,"./stringify.js":1905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,a,o){var u;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,s.default)(n)),16!==(null===(u=n)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(n),c.set(e,n.length),c=r(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,a){o=o||0;for(let e=0;e<16;++e)a[o+e]=c[e];return a}return(0,i.unsafeStringify)(c)}try{n.name=e}catch(e){}return n.DNS=a,n.URL=o,n};var n,i=e("./stringify.js"),s=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v35.js"}],[1909,{"./native.js":1899,"./rng.js":1903,"./stringify.js":1905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./native.js")),i=a(e("./rng.js")),s=e("./stringify.js");function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const a=(e=e||{}).random||(e.rng||i.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return(0,s.unsafeStringify)(a)};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v4.js"}],[1910,{"./sha1.js":1904,"./v35.js":1908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./v35.js")),i=s(e("./sha1.js"));function s(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,i.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v5.js"}],[1911,{"./regex.js":1902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var s=function(e){return"string"==typeof e&&i.default.test(e)};r.default=s}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/validate.js"}],[1912,{"./validate.js":1911},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=s}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/version.js"}],[192,{"../../../../../shared/lib/four-byte":5882,"@ethersproject/abi":517,"@metamask/utils":3026,"ethereumjs-util":4403},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeTransactionDataWithFourByte=async function(e){const t=e.slice(0,10),r=await(0,a.getMethodFrom4Byte)(t);if(!r)return undefined;const s=r.split("(")[0],l=function(e){let t=e.slice(e.indexOf("(")+1,-1);const r=[];for(;t.includes("(");){const e=d(t);if(!e)break;r.push(e.value),t=`${t.slice(0,e.start)}${r.length-1}#${t.slice(e.end+1)}`}return c(t,r)}(r);o("Generated inputs",l);const f=(0,n.addHexPrefix)(e.slice(10)),p=i.Interface.getAbiCoder().decode(l,f),h=l.map(((e,t)=>u(e,t,p)));return{name:s,params:h}};var n=e("ethereumjs-util"),i=e("@ethersproject/abi"),s=e("@metamask/utils"),a=e("../../../../../shared/lib/four-byte");const o=(0,s.createProjectLogger)("four-byte");function u(e,t,r){var n;const i=r[t],{type:s,name:a}=e;let o=null===(n=e.components)||void 0===n?void 0:n.map(((e,t)=>u(e,t,i)));if(s.endsWith("[]")){const t=s.slice(0,-2);o=i.map(((r,n)=>{const s=`Item ${n+1}`;return u({...e,name:s,type:t},n,i)}))}return{name:a,type:s,value:i,children:o}}function c(e,t){return e.split(",").map((e=>{const r=e.split("#"),n=r.length>1?parseInt(r[0],10):undefined;return{type:n===undefined?e:`tuple${r[1]??""}`,components:n===undefined?undefined:c(t[n],t)}}))}function d(e){let t=-1;for(let r=0;r<e.length;r++)if("("===e[r])t=r;else if(")"===e[r]&&-1!==t)return{start:t,end:r,value:e.slice(t+1,r)};return undefined}}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/four-byte.ts"}],[1921,{"./onekey-keyring.cjs":1922,"./trezor-connect-bridge.cjs":1923,"./trezor-keyring.cjs":1924},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./trezor-keyring.cjs"),r),i(e("./onekey-keyring.cjs"),r),i(e("./trezor-connect-bridge.cjs"),r)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.cjs"}],[1922,{"./trezor-keyring.cjs":1924},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.OneKeyKeyring=void 0;const n=e("./trezor-keyring.cjs"),i="OneKey Hardware";class s extends n.TrezorKeyring{constructor(){super(...arguments),this.type=i}}r.OneKeyKeyring=s,s.type=i}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/onekey-keyring.cjs"}],[1923,{"@trezor/connect-web":3320},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorConnectBridge=void 0;const a=s(e("@trezor/connect-web"));r.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){a.default.on(a.DEVICE_EVENT,(e=>{var t;e.type===a.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)})),this.trezorConnectInitiated||(await a.default.init(e),this.trezorConnectInitiated=!0)}async dispose(){return a.default.dispose(),Promise.resolve()}getPublicKey(e){return a.default.getPublicKey(e)}ethereumSignTransaction(e){return a.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return a.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return a.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.cjs"}],[1924,{"@ethereumjs/tx":475,"@ethereumjs/util":490,"@metamask/eth-sig-util":1946,"@metamask/utils":3026,"@trezor/connect-plugin-ethereum":1967,buffer:4138,hdkey:4708},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,i,s,a,o,u,c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorKeyring=r.TREZOR_CONNECT_MANIFEST=void 0;const l=e("@ethereumjs/tx"),f=e("@ethereumjs/util"),p=e("@metamask/eth-sig-util"),h=e("@metamask/utils"),m=e("@trezor/connect-plugin-ethereum"),g=d(e("hdkey")),y="m/44'/60'/0'/0",b={[y]:!0,"m/44'/60'/0'":!0,"m/44'/1'/0'/0":!0},w="Trezor Hardware",k=1e3;async function v(e){return new Promise((t=>setTimeout(t,e)))}function T(e){return"function"==typeof e.getChainId}r.TREZOR_CONNECT_MANIFEST={email:"support@metamask.io",appUrl:"https://metamask.io"};class E{constructor({bridge:e}){if(n.add(this),this.type=w,this.accounts=[],this.hdk=new g.default,this.hdPath=y,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}async init(){return this.bridge.init({manifest:r.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts.slice(),page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e){var t,r,n,i;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:y,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.page=null!==(n=e.page)&&void 0!==n?n:0,this.perPage=null!==(i=e.perPage)&&void 0!==i?i:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise(((e,r)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then((n=>{var i;n.success?(this.hdk.publicKey=t.from(n.payload.publicKey,"hex"),this.hdk.chainCode=t.from(n.payload.chainCode,"hex"),e("just unlocked")):r(new Error((null===(i=n.payload)||void 0===i?void 0:i.error)||"Unknown error"))})).catch((e=>{r(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e){return new Promise(((t,r)=>{this.unlock().then((r=>{const i=this.unlockedAccount,s=i+e,a=[];for(let e=i;e<s;e++){const t=c(this,n,"m",o).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t],a.push(t)),this.page=0}t(a)})).catch((e=>{r(e)}))}))}async getFirstPage(){return this.page=0,c(this,n,"m",i).call(this,1)}async getNextPage(){return c(this,n,"m",i).call(this,1)}async getPreviousPage(){return c(this,n,"m",i).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){return T(r)?c(this,n,"m",s).call(this,e,r.getChainId(),r,(e=>(r.v=t.from(e.v,"hex"),r.r=t.from(e.r,"hex"),r.s=t.from(e.s,"hex"),r))):c(this,n,"m",s).call(this,e,Number(r.common.chainId()),r,(e=>{const t=r.toJSON();return t.type=r.type,t.v=(0,h.add0x)(e.v),t.r=(0,h.add0x)(e.r),t.s=(0,h.add0x)(e.s),l.TransactionFactory.fromTxData(t,{common:r.common,freeze:Object.isFrozen(r)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise(((r,i)=>{this.unlock().then((s=>{setTimeout((()=>{this.bridge.ethereumSignMessage({path:c(this,n,"m",u).call(this,e),message:(0,h.remove0x)(t),hex:!0}).then((t=>{var n;if(t.success){t.payload.address!==(0,h.getChecksumAddress)(e)&&i(new Error("signature doesnt match the right address"));const n=`0x${t.payload.signature}`;r(n)}else i(new Error((null===(n=t.payload)||void 0===n?void 0:n.error)||"Unknown error"))})).catch((e=>{i(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}),"just unlocked"===s?k:0)})).catch((e=>{i(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}async signTypedData(e,t,{version:r}){var i,s;const a=(0,m.transformTypedData)(t,r===p.SignTypedDataVersion.V4),{types:o,message:d={},domain:l={},primaryType:f,domain_separator_hash:g,message_hash:y}=a,b=await this.unlock();await v("just unlocked"===b?k:0);const w=await this.bridge.ethereumSignTypedData({path:c(this,n,"m",u).call(this,e),data:{types:Object.assign(Object.assign({},o),{EIP712Domain:null!==(i=o.EIP712Domain)&&void 0!==i?i:[]}),message:d,domain:l,primaryType:f},metamask_v4_compat:!0,domain_separator_hash:g,message_hash:null!=y?y:""});if(w.success){if((0,h.getChecksumAddress)(e)!==w.payload.address)throw new Error("signature doesnt match the right address");return w.payload.signature}throw new Error((null===(s=w.payload)||void 0===s?void 0:s.error)||"Unknown error")}forgetDevice(){this.accounts=[],this.hdk=new g.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!b[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new g.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}r.TrezorKeyring=E,n=new WeakSet,i=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise(((e,t)=>{this.unlock().then((t=>{const r=(this.page-1)*this.perPage,i=r+this.perPage,s=[];for(let e=r;e<i;e++){const t=c(this,n,"m",o).call(this,"m",e);s.push({address:t,balance:null,index:e}),this.paths[(0,h.getChecksumAddress)(t)]=e}e(s)})).catch((e=>{t(e)}))}))},s=async function(e,r,i,s){var o,d,l,f;let p;p=T(i)?{to:c(this,n,"m",a).call(this,i.to),value:c(this,n,"m",a).call(this,i.value),data:c(this,n,"m",a).call(this,i.data),chainId:r,nonce:c(this,n,"m",a).call(this,i.nonce),gasLimit:c(this,n,"m",a).call(this,i.gasLimit),gasPrice:c(this,n,"m",a).call(this,i.gasPrice)}:Object.assign(Object.assign({},i.toJSON()),{chainId:r,to:c(this,n,"m",a).call(this,t.from(null!==(d=null===(o=i.to)||void 0===o?void 0:o.bytes)&&void 0!==d?d:[]))});try{const t=await this.unlock();await v("just unlocked"===t?k:0);const r=await this.bridge.ethereumSignTransaction({path:c(this,n,"m",u).call(this,e),transaction:p});if(r.success){const t=s(r.payload),n=(0,h.getChecksumAddress)((0,h.add0x)(t.getSenderAddress().toString("hex")));if(n!==(0,h.getChecksumAddress)(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(l=r.payload)||void 0===l?void 0:l.error)||"Unknown error")}catch(e){throw new Error(null!==(f=null==e?void 0:e.toString())&&void 0!==f?f:"Unknown error")}},a=function(e){return(0,h.bytesToHex)(e)},o=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=(0,h.bytesToHex)((0,f.publicToAddress)(r.publicKey,!0));return(0,f.toChecksumAddress)(n)},u=function(e){const t=(0,h.getChecksumAddress)(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===c(this,n,"m",o).call(this,"m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`},E.type=w}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.cjs"}],[1925,{"./errors":1926,"./packer":1929,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeSingle=r.decode=r.encodePacked=r.encodeSingle=r.encode=void 0;const n=e("@metamask/utils"),i=e("./errors"),s=e("./packer");r.encode=(e,t,r,n)=>{try{return(0,s.pack)({types:e,values:t,packed:r,tight:n})}catch(e){if(e instanceof i.ParserError)throw new i.ParserError(`Unable to encode value: ${e.message}`,e);throw new i.ParserError(`An unexpected error occurred: ${(0,i.getErrorMessage)(e)}`,e)}};r.encodeSingle=(e,t)=>(0,r.encode)([e],[t]);r.encodePacked=(e,t,n)=>(0,r.encode)(e,t,!0,n);r.decode=(e,t)=>{const r=(0,n.createBytes)(t);try{return(0,s.unpack)(e,r)}catch(e){if(e instanceof i.ParserError)throw new i.ParserError(`Unable to decode value: ${e.message}`,e);throw new i.ParserError(`An unexpected error occurred: ${(0,i.getErrorMessage)(e)}`,e)}};r.decodeSingle=(e,t)=>{const s=(0,r.decode)([e],t);return(0,n.assert)(1===s.length,new i.ParserError("Decoded value array has unexpected length.")),s[0]}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/abi.js"}],[1926,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParserError=r.getErrorStack=r.getErrorMessage=void 0;const n=e("@metamask/utils");r.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,n.isObject)(e)&&(0,n.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";r.getErrorStack=e=>e instanceof Error?e.stack:undefined;class i extends Error{constructor(e,t){super(e),this.name="ParserError";const n=(0,r.getErrorStack)(t);n&&(this.stack=n)}}r.ParserError=i}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/errors.js"}],[1927,{"./abi":1925,"./errors":1926,"./types":1942},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./abi"),r),i(e("./errors"),r),i(e("./types"),r)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/index.js"}],[1928,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.iterate=void 0;const n=e("@metamask/utils");r.iterate=function*(e,t=32){for(let r=0;r<e.length;r+=t){const i=e=>{(0,n.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,n.assert)(e%t==0,"Length must be a multiple of the size."),r+=e},s=e.subarray(r);yield{skip:i,value:s}}return{skip:()=>undefined,value:new Uint8Array}}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/iterator.js"}],[1929,{"./errors":1926,"./iterator":1928,"./parsers":1936,"./utils":1944,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unpack=r.pack=r.isDynamicParser=r.getParser=void 0;const n=e("@metamask/utils"),i=e("./errors"),s=e("./iterator"),a=e("./parsers"),o=e("./utils");r.getParser=e=>{const t={address:a.address,array:a.array,bool:a.bool,bytes:a.bytes,fixedBytes:a.fixedBytes,function:a.fn,number:a.number,string:a.string,tuple:a.tuple},r=t[e];if(r)return r;const n=Object.values(t).find((t=>t.isType(e)));if(n)return n;throw new i.ParserError(`The type "${e}" is not supported.`)};r.isDynamicParser=(e,t)=>{const{isDynamic:r}=e;return"function"==typeof r?r(t):r};r.pack=({types:e,values:t,packed:s=!1,tight:a=!1,arrayPacked:u=!1,byteArray:c=new Uint8Array})=>{(0,n.assert)(e.length===t.length,new i.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));const{staticBuffer:d,dynamicBuffer:l,pointers:f}=e.reduce((({staticBuffer:e,dynamicBuffer:i,pointers:o},c,d)=>{const l=(0,r.getParser)(c),f=t[d];if(s||u||!(0,r.isDynamicParser)(l,c))return{staticBuffer:l.encode({buffer:e,value:f,type:c,packed:s,tight:a}),dynamicBuffer:i,pointers:o};return{staticBuffer:(0,n.concatBytes)([e,new Uint8Array(32)]),dynamicBuffer:l.encode({buffer:i,value:f,type:c,packed:s,tight:a}),pointers:[...o,{position:e.length,pointer:i.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,n.assert)(!s&&!u||0===l.length,new i.ParserError("Invalid pack state."));const p=d.length,h=f.reduce(((e,{pointer:t,position:r})=>{const i=(0,o.padStart)((0,n.numberToBytes)(p+t));return(0,o.set)(e,i,r)}),d);return(0,n.concatBytes)([c,h,l])};r.unpack=(e,t)=>{const a=(0,s.iterate)(t);return e.map((e=>{const{value:{value:s,skip:o},done:u}=a.next();(0,n.assert)(!u,new i.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${e}".`));const c=(0,r.getParser)(e);if((0,r.isDynamicParser)(c,e)){const r=(0,n.bytesToNumber)(s.subarray(0,32)),i=t.subarray(r);return c.decode({type:e,value:i,skip:o})}return c.decode({type:e,value:s,skip:o})}))}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/packer.js"}],[193,{"ethereumjs-util":4403},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getContractProxyAddress=async function(e,t){const r=(await Promise.all(i.map((r=>t.request({method:"eth_getStorageAt",params:[e,r,"latest"]}))))).find((e=>(0,n.stripHexPrefix)(e)!==s));return r&&(0,n.addHexPrefix)(r.slice(26))};var n=e("ethereumjs-util");const i=["0x7050c9e0f4ca769c69bd3a8ef740bc37934f8e2c036e5a723fd8ee048ed3f8c3","0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc"],s="0".padEnd(64,"0")}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/proxy.ts"}],[1930,{"../errors":1926,"../utils":1944,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.address=r.getAddress=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils");r.getAddress=e=>{const t=(0,n.createBytes)(e);return(0,n.assert)(t.length<=20,new i.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,s.padStart)(t,20)},r.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:i}){const a=(0,r.getAddress)(t);if(i)return(0,n.concatBytes)([e,a]);const o=(0,s.padStart)(a);return(0,n.concatBytes)([e,o])},decode:({value:e})=>(0,n.add0x)((0,n.bytesToHex)(e.slice(12,32)))}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/address.js"}],[1931,{"../errors":1926,"../packer":1929,"../utils":1944,"./fixed-bytes":1934,"./tuple":1940,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.array=r.getTupleType=r.getArrayType=r.isArrayType=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../packer"),a=e("../utils"),o=e("./fixed-bytes"),u=e("./tuple"),c=/^(?<type>.*)\[(?<length>\d*?)\]$/u;r.isArrayType=e=>c.test(e);r.getArrayType=e=>{const t=e.match(c);return(0,n.assert)(t?.groups?.type,new i.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):undefined]};r.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,r.array={isDynamic(e){const[t,n]=(0,r.getArrayType)(e);return n===undefined||(0,s.isDynamicParser)((0,s.getParser)(t),t)},isType:e=>(0,r.isArrayType)(e),getByteLength(e){(0,n.assert)((0,r.isArrayType)(e),new i.ParserError(`Expected an array type, but received "${e}".`));const[t,a]=(0,r.getArrayType)(e);return(0,s.isDynamicParser)(this,e)||a===undefined?32:u.tuple.getByteLength((0,r.getTupleType)(t,a))},encode({type:e,buffer:t,value:c,packed:d,tight:l}){const[f,p]=(0,r.getArrayType)(e);if((0,n.assert)(!d||!(0,r.isArrayType)(f),new i.ParserError("Cannot pack nested arrays.")),d&&(0,s.isDynamicParser)((0,s.getParser)(f),f))return(0,s.pack)({types:new Array(c.length).fill(f),values:c,byteArray:t,packed:d,arrayPacked:!0,tight:l});if(p)return(0,n.assert)(p===c.length,new i.ParserError(`Array length does not match type length. Expected a length of ${p}, but received ${c.length}.`)),u.tuple.encode({type:(0,r.getTupleType)(f,p),buffer:t,value:c,packed:o.fixedBytes.isType(f)&&l,tight:l});if(d)return(0,s.pack)({types:new Array(c.length).fill(f),values:c,byteArray:t,packed:o.fixedBytes.isType(f)&&l,arrayPacked:!0,tight:l});const h=(0,a.padStart)((0,n.numberToBytes)(c.length));return(0,s.pack)({types:new Array(c.length).fill(f),values:c,byteArray:(0,n.concatBytes)([t,h]),packed:d,tight:l})},decode({type:e,value:t,...a}){const[o,c]=(0,r.getArrayType)(e);if(c){const e=u.tuple.decode({type:(0,r.getTupleType)(o,c),value:t,...a});return(0,n.assert)(e.length===c,new i.ParserError(`Array length does not match type length. Expected a length of ${c}, but received ${e.length}.`)),e}const d=(0,n.bytesToNumber)(t.subarray(0,32));return(0,s.unpack)(new Array(d).fill(o),t.subarray(32))}}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/array.js"}],[1932,{"../errors":1926,"./number":1937,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bool=r.getBooleanValue=void 0;const n=e("@metamask/superstruct"),i=e("@metamask/utils"),s=e("../errors"),a=e("./number"),o=(0,n.coerce)((0,n.boolean)(),(0,n.union)([(0,n.literal)("true"),(0,n.literal)("false")]),(e=>"true"===e));r.getBooleanValue=e=>{try{return(0,n.create)(e,o)?BigInt(1):BigInt(0)}catch{throw new s.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},r.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:s}){const o=(0,r.getBooleanValue)(t);return n?(0,i.concatBytes)([e,(0,i.bigIntToBytes)(o)]):a.number.encode({type:"uint256",buffer:e,value:o,packed:n,tight:s})},decode:e=>a.number.decode({...e,type:"uint256"})===BigInt(1)}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/bool.js"}],[1933,{"../utils":1944,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=void 0;const n=e("@metamask/utils"),i=e("../utils");r.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r}){const s=(0,n.createBytes)(t);if(r)return(0,n.concatBytes)([e,s]);const a=32*Math.ceil(s.byteLength/32);return(0,n.concatBytes)([e,(0,i.padStart)((0,n.numberToBytes)(s.byteLength)),(0,i.padEnd)(s,a)])},decode({value:e}){const t=e.subarray(0,32),r=(0,n.bytesToNumber)(t);return e.slice(32,32+r)}}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/bytes.js"}],[1934,{"../errors":1926,"../utils":1944,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fixedBytes=r.getByteLength=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils"),a=/^bytes([0-9]{1,2})$/u;r.getByteLength=e=>{const t=e.match(a)?.[1];(0,n.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const r=Number(t);return(0,n.assert)(r>0&&r<=32,new i.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),r},r.fixedBytes={isDynamic:!1,isType:e=>a.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:a,packed:o}){const u=(0,r.getByteLength)(e),c=(0,n.createBytes)(a);return(0,n.assert)(c.length<=u,new i.ParserError(`Expected a value of length ${u}, but received a value of length ${c.length}.`)),o?(0,n.concatBytes)([t,(0,s.padEnd)(c,u)]):(0,n.concatBytes)([t,(0,s.padEnd)(c)])},decode({type:e,value:t}){const n=(0,r.getByteLength)(e);return t.slice(0,n)}}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/fixed-bytes.js"}],[1935,{"../errors":1926,"./fixed-bytes":1934,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fn=r.getFunction=void 0;const n=e("@metamask/superstruct"),i=e("@metamask/utils"),s=e("../errors"),a=e("./fixed-bytes"),o=(0,n.coerce)((0,n.object)({address:i.StrictHexStruct,selector:i.StrictHexStruct}),(0,n.union)([i.StrictHexStruct,(0,n.instance)(Uint8Array)]),(e=>{const t=(0,i.createBytes)(e);return(0,i.assert)(24===t.length,new s.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,i.bytesToHex)(t.subarray(0,20)),selector:(0,i.bytesToHex)(t.subarray(20,24))}}));r.getFunction=e=>{const t=(0,n.create)(e,o);return(0,i.concatBytes)([(0,i.hexToBytes)(t.address),(0,i.hexToBytes)(t.selector)])},r.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:i}){const s=(0,r.getFunction)(t);return a.fixedBytes.encode({type:"bytes24",buffer:e,value:s,packed:n,tight:i})},decode:({value:e})=>({address:(0,i.bytesToHex)(e.slice(0,20)),selector:(0,i.bytesToHex)(e.slice(20,24))})}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/function.js"}],[1936,{"./address":1930,"./array":1931,"./bool":1932,"./bytes":1933,"./fixed-bytes":1934,"./function":1935,"./number":1937,"./parser":1938,"./string":1939,"./tuple":1940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./address"),r),i(e("./array"),r),i(e("./bool"),r),i(e("./bytes"),r),i(e("./fixed-bytes"),r),i(e("./function"),r),i(e("./number"),r),i(e("./parser"),r),i(e("./string"),r),i(e("./tuple"),r)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/index.js"}],[1937,{"../errors":1926,"../utils":1944,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.number=r.getBigInt=r.assertNumberLength=r.getLength=r.isSigned=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils"),a=/^u?int(?<length>[0-9]*)?$/u;r.isSigned=e=>!e.startsWith("u");r.getLength=e=>{if("int"===e||"uint"===e)return 256;const t=e.match(a);(0,n.assert)(t?.groups?.length,new i.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));const r=parseInt(t.groups.length,10);return(0,n.assert)(r>=8&&r<=256,new i.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,n.assert)(r%8==0,new i.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),r};r.assertNumberLength=(e,t)=>{const s=(0,r.getLength)(t),a=BigInt(2)**BigInt(s-((0,r.isSigned)(t)?1:0))-BigInt(1);(0,r.isSigned)(t)?(0,n.assert)(e>=-(a+BigInt(1))&&e<=a,new i.ParserError(`Number "${e}" is out of range for type "${t}".`)):(0,n.assert)(e<=a,new i.ParserError(`Number "${e}" is out of range for type "${t}".`))};r.getBigInt=e=>{try{return(0,n.createBigInt)(e)}catch{throw new i.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}},r.number={isDynamic:!1,isType:e=>a.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:i,packed:a}){const o=(0,r.getBigInt)(i);if((0,r.assertNumberLength)(o,e),(0,r.isSigned)(e)){if(a){const i=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,n.signedBigIntToBytes)(o,i)])}return(0,n.concatBytes)([t,(0,s.padStart)((0,n.signedBigIntToBytes)(o,32))])}if(a){const i=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,s.padStart)((0,n.bigIntToBytes)(o),i)])}return(0,n.concatBytes)([t,(0,s.padStart)((0,n.bigIntToBytes)(o))])},decode({type:e,value:t}){const i=t.subarray(0,32);if((0,r.isSigned)(e)){const t=(0,n.bytesToSignedBigInt)(i);return(0,r.assertNumberLength)(t,e),t}const s=(0,n.bytesToBigInt)(i);return(0,r.assertNumberLength)(s,e),s}}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/number.js"}],[1938,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/parser.js"}],[1939,{"./bytes":1933,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.string=void 0;const n=e("@metamask/utils"),i=e("./bytes");r.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode:({buffer:e,value:t,packed:r,tight:s})=>i.bytes.encode({type:"bytes",buffer:e,value:(0,n.stringToBytes)(t),packed:r,tight:s}),decode:e=>(0,n.bytesToString)(i.bytes.decode(e))}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/string.js"}],[194,{"@ethersproject/abi":517,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeTransactionDataWithSourcify=async function(e,t,r){var o,u;const c=await async function(e,t){var r;const n=await async function(e,t){const r=parseInt(t,16),n=await fetch(`https://sourcify.dev/server/files/any/${r}/${e}`);if(!n.ok)throw new Error("Failed to fetch Sourcify files");return n.json()}(e,t),i=null===(r=n.files)||void 0===r?void 0:r.find((e=>e.name.includes("metadata.json")));if(!i)throw new Error("Metadata not found");return JSON.parse(i.content)}(t,r);i("Retrieved Sourcify metadata",{contractAddress:t,chainId:r,metadata:c});const{abi:d}=c.output,l=new n.Interface(d),f=e.slice(0,10);let p;try{p=l.getFunction(f)}catch(e){}if(!p)return i("Failed to find function in ABI",f,d),undefined;const{name:h,inputs:m}=p,g=a(h,m),y=null===(o=c.output.userdoc)||void 0===o?void 0:o.methods[g],b=null===(u=c.output.devdoc)||void 0===u?void 0:u.methods[g],w=(null==y?void 0:y.notice)??(null==b?void 0:b.details);i("Extracted NatSpec",{signature:g,userDoc:y,devDoc:b});const k=l.decodeFunctionData(f,e),v=m.map(((e,t)=>s(e,t,k,y,b)));return{name:h,description:w,params:v}};var n=e("@ethersproject/abi");const i=(0,e("@metamask/utils").createProjectLogger)("sourcify");function s(e,t,r,n,i){var a,o;const{name:u,type:c,components:d}=e,l=(null==n||null===(a=n.params)||void 0===a?void 0:a[u])??(null==i||null===(o=i.params)||void 0===o?void 0:o[u]),f=r[t];let p=null==d?void 0:d.map(((e,t)=>s(e,t,f,{},{})));if(c.endsWith("[]")){const t=c.slice(0,-2);p=f.map(((r,n)=>{const i=`Item ${n+1}`;return s({...e,name:i,type:t},n,f,{},{})}))}return{name:u,description:l,type:c,value:f,children:p}}function a(e,t){return`${e??""}(${t.map((e=>{var t;return null!==(t=e.components)&&void 0!==t&&t.length?`${a(undefined,e.components)}${e.type.endsWith("[]")?"[]":""}`:e.type})).join(",")})`}}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/sourcify.ts"}],[1940,{"../errors":1926,"../packer":1929,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tuple=r.getTupleElements=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../packer"),a=/^\((.+)\)$/u;r.getTupleElements=e=>{(0,n.assert)(e.startsWith("(")&&e.endsWith(")"),new i.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));const t=[];let r="",s=0;for(let n=1;n<e.length-1;n++){const i=e[n];","===i&&0===s?(t.push(r.trim()),r=""):(r+=i,"("===i?s+=1:")"===i&&(s-=1))}return r.trim()&&t.push(r.trim()),t},r.tuple={isDynamic:e=>(0,r.getTupleElements)(e).some((e=>{const t=(0,s.getParser)(e);return(0,s.isDynamicParser)(t,e)})),isType:e=>(e=>a.test(e))(e),getByteLength(e){if((0,s.isDynamicParser)(this,e))return 32;return(0,r.getTupleElements)(e).reduce(((e,t)=>e+(0,s.getParser)(t).getByteLength(t)),0)},encode({type:e,buffer:t,value:n,packed:i,tight:a}){const o=(0,r.getTupleElements)(e);return(0,s.pack)({types:o,values:n,byteArray:t,packed:i,tight:a})},decode({type:e,value:t,skip:n}){const i=(0,r.getTupleElements)(e);return n(this.getByteLength(e)-32),(0,s.unpack)(i,t)}}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/parsers/tuple.js"}],[1941,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/types/abi.js"}],[1942,{"./abi":1941},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./abi"),r)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/types/index.js"}],[1943,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.padEnd=r.padStart=r.set=void 0;const n=e("@metamask/utils");r.set=(e,t,r)=>(0,n.concatBytes)([e.subarray(0,r),t,e.subarray(r+t.length)]);r.padStart=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([r,e])};r.padEnd=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([e,r])}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/utils/buffer.js"}],[1944,{"./buffer":1943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./buffer"),r)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/abi-utils/dist/utils/index.js"}],[1945,{"./utils":1950,"@scure/base":1966,buffer:4138,tweetnacl:5723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const a=e("@scure/base"),o=s(e("tweetnacl")),u=e("./utils");function c({publicKey:e,data:t,version:r}){if((0,u.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,u.isNullish)(t))throw new Error("Missing data parameter");if((0,u.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.base64.decode(e)}catch(e){throw new Error("Bad public key")}const i=a.utf8.decode(t),s=o.randomBytes(o.box.nonceLength),u=o.box(i,s,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.base64.encode(s),ephemPublicKey:a.base64.encode(r.publicKey),ciphertext:a.base64.encode(u)}}throw new Error("Encryption type/version not supported")}function d({encryptedData:e,privateKey:r}){if((0,u.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,u.isNullish)(r))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const n=t.from(r,"hex"),i=o.box.keyPair.fromSecretKey(n).secretKey,s=a.base64.decode(e.nonce),u=a.base64.decode(e.ciphertext),c=a.base64.decode(e.ephemPublicKey),d=o.box.open(u,s,c,i);try{if(!d)throw new Error;const e=a.utf8.encode(d);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}r.encrypt=c,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,u.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,u.isNullish)(r))throw new Error("Missing data parameter");if((0,u.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:r,padding:""},s=t.byteLength(JSON.stringify(i),"utf-8")%2048;let a=0;return s>0&&(a=2048-s-16),i.padding="0".repeat(a),c({publicKey:e,data:JSON.stringify(i),version:n})},r.decrypt=d,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,u.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,u.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(d({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const r=t.from(e,"hex"),n=o.box.keyPair.fromSecretKey(r).publicKey;return a.base64.encode(n)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1946,{"./encryption":1945,"./personal-sign":1947,"./sign-eip7702-authorization":1948,"./sign-typed-data":1949,"./utils":1950},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,i(e("./personal-sign"),r),i(e("./sign-typed-data"),r),i(e("./encryption"),r),i(e("./sign-eip7702-authorization"),r);var s=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return s.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return s.normalize}})}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/dist/index.js"}],[1947,{"./utils":1950,"@ethereumjs/util":1958},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),i=e("./utils");function s(e,t){const r=(0,n.hashPersonalMessage)((0,i.legacyToBuffer)(e));return(0,i.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,i.isNullish)(t))throw new Error("Missing data parameter");if((0,i.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,i.legacyToBuffer)(t),s=(0,n.hashPersonalMessage)(r),a=(0,n.ecsign)(s,e);return(0,i.concatSig)((0,n.toBuffer)(a.v),a.r,a.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");const r=s(e,t),a=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(a)},r.extractPublicKey=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");return`0x${s(e,t).toString("hex")}`}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1948,{"./utils":1950,"@ethereumjs/rlp":462,"@ethereumjs/util":1958,"@metamask/utils":3026,buffer:4138,"ethereum-cryptography/keccak":4372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashEIP7702Authorization=r.recoverEIP7702Authorization=r.signEIP7702Authorization=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),s=e("@metamask/utils"),a=e("ethereum-cryptography/keccak"),o=e("./utils");function u(e){c(e);const r=(0,n.encode)(e),i=t.concat([t.from("05","hex"),r]);return t.from((0,a.keccak256)(i))}function c(e){if((0,o.isNullish)(e))throw new Error("Missing authorization parameter");const[t,r,n]=e;if((0,o.isNullish)(t))throw new Error("Missing chainId parameter");if((0,o.isNullish)(r))throw new Error("Missing contractAddress parameter");if((0,o.isNullish)(n))throw new Error("Missing nonce parameter")}r.signEIP7702Authorization=function({privateKey:e,authorization:t}){if(c(t),(0,o.isNullish)(e))throw new Error("Missing privateKey parameter");const r=u(t),{r:n,s:s,v:a}=(0,i.ecsign)(r,e),d=(0,i.toBuffer)(a);return(0,o.concatSig)(d,n,s)},r.recoverEIP7702Authorization=function({signature:e,authorization:t}){if(c(t),(0,o.isNullish)(e))throw new Error("Missing signature parameter");const r=u(t),n=(0,o.recoverPublicKey)(r,e),a=(0,i.publicToAddress)(n);return(0,s.bytesToHex)(a)},r.hashEIP7702Authorization=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/dist/sign-eip7702-authorization.js"}],[1949,{"./utils":1950,"@ethereumjs/util":1958,"@metamask/abi-utils":1927,"@metamask/abi-utils/dist/parsers":1936,"@metamask/abi-utils/dist/utils":1944,"@metamask/utils":3026,"ethereum-cryptography/keccak":4372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/abi-utils"),s=e("@metamask/abi-utils/dist/parsers"),a=e("@metamask/abi-utils/dist/utils"),o=e("@metamask/utils"),u=e("ethereum-cryptography/keccak"),c=e("./utils");var d;function l(e,t){if(!Object.keys(d).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function f(e,t){(0,o.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),n=(0,s.getLength)(e),i=BigInt(2)**BigInt(n)-BigInt(1);return(0,o.assert)(r>=-i&&r<=i,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function p(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,a.padStart)((0,o.bigIntToBytes)(t),20)}function h(e,t,r,s,c){if(l(c,[d.V3,d.V4]),e[r]!==undefined)return["bytes32",c===d.V4&&null==s?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,u.keccak256)(m(r,s,e,c)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(s===undefined)throw new Error(`missing value for field ${t} of type ${r}`);if("address"===r){if("number"==typeof s)return["address",(0,a.padStart)((0,o.numberToBytes)(s),20)];if((0,o.isStrictHexString)(s))return["address",(0,o.add0x)(s)];if("string"==typeof s)return["address",p(s).subarray(0,20)]}if("bool"===r)return["bool",Boolean(s)];if("bytes"===r)return"number"==typeof s?s=(0,o.numberToBytes)(s):(0,o.isStrictHexString)(s)||"0x"===s?s=(0,o.hexToBytes)(s):"string"==typeof s&&(s=(0,o.stringToBytes)(s)),["bytes32",(0,n.arrToBufArr)((0,u.keccak256)(s))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"==typeof s?s<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,o.bigIntToBytes)(BigInt(s))]:(0,o.isStrictHexString)(s)?["bytes32",(0,o.hexToBytes)(s)]:["bytes32",s];if(r.startsWith("int")&&!r.includes("[")){const e=f(r,s);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return s="number"==typeof s?(0,o.numberToBytes)(s):(0,o.stringToBytes)(null!=s?s:""),["bytes32",(0,n.arrToBufArr)((0,u.keccak256)(s))];if(r.endsWith("]")){if(c===d.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const a=r.slice(0,r.lastIndexOf("[")),o=s.map((r=>h(e,t,a,r,c)));return["bytes32",(0,n.arrToBufArr)((0,u.keccak256)((0,i.encode)(o.map((([e])=>e)),o.map((([,e])=>e)))))]}return[r,s]}function m(e,t,r,s){l(s,[d.V3,d.V4]);const a=["bytes32"],o=[w(e,r)];for(const n of r[e]){if(s===d.V3&&t[n.name]===undefined)continue;const[e,i]=h(r,n.name,n.type,t[n.name],s);a.push(e),o.push(i)}return(0,n.arrToBufArr)((0,i.encode)(a,o))}function g(e,t){let r="";const n=y(e,t);n.delete(e);const i=[e,...Array.from(n).sort()];for(const e of i){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function y(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])y(n.type,t,r);return r}function b(e,t,r,i){l(i,[d.V3,d.V4]);const s=m(e,t,r,i),a=(0,u.keccak256)(s);return(0,n.arrToBufArr)(a)}function w(e,t){const r=(0,o.stringToBytes)(g(e,t));return(0,n.arrToBufArr)((0,u.keccak256)(r))}function k(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function v(e,t){l(t,[d.V3,d.V4]);const r=k(e),{domain:n}=r;return b("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function T(e,t){if((0,s.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,s.getArrayType)(e);return t.map((e=>T(r,e)))}if("address"===e){if((0,o.isStrictHexString)(t))return(0,a.padStart)((0,o.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,a.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,s.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,o.numberToBytes)(t).subarray(0,r);if((0,o.isStrictHexString)(t))return(0,o.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,s.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function E(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=f(e,t);if(r>=BigInt(0))return(0,a.padStart)((0,o.bigIntToBytes)(r),32);const n=(0,s.getLength)(e),i=BigInt.asIntN(n,r);return(0,o.signedBigIntToBytes)(i,32)}return t}))}function _(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(n=r,n.map((e=>"number"==typeof e?(0,a.padStart)((0,o.numberToBytes)(e),32):(0,o.isStrictHexString)(e)?(0,a.padStart)((0,o.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,a.padStart)(e.subarray(0,32),32):e)))};var n;if(t.startsWith("int")&&(0,s.isArrayType)(t)){const[n,i]=(0,s.getArrayType)(t);return{name:e,type:`bytes32[${null!=i?i:""}]`,value:E(n,r)}}return{name:e,type:t,value:T(t,r)}})),d=r.map((e=>"bytes"!==e.type?e.value:(0,c.legacyToBuffer)(e.value))),l=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),f=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,n.arrToBufArr)((0,u.keccak256)((0,i.encodePacked)(["bytes32","bytes32"],[(0,u.keccak256)((0,i.encodePacked)(["string[]"],[f],!0)),(0,u.keccak256)((0,i.encodePacked)(l,d,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(d=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:m,encodeType:g,findTypeDependencies:y,hashStruct:b,hashType:w,sanitizeData:k,eip712Hash:function(e,t){l(t,[d.V3,d.V4]);const r=k(e),i=[(0,o.hexToBytes)("1901")];return i.push(v(e,t)),"EIP712Domain"!==r.primaryType&&i.push(b(r.primaryType,r.message,r.types,t)),(0,n.arrToBufArr)((0,u.keccak256)((0,o.concatBytes)(i)))},eip712DomainHash:v},r.typedSignatureHash=function(e){const t=_(e);return(0,o.bytesToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:i}){if(l(i),(0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(e))throw new Error("Missing private key parameter");const s=i===d.V1?_(t):r.TypedDataUtils.eip712Hash(t,i),a=(0,n.ecsign)(s,e);return(0,c.concatSig)((0,n.arrToBufArr)((0,o.bigIntToBytes)(a.v)),a.r,a.s)},r.recoverTypedSignature=function({data:e,signature:t,version:i}){if(l(i),(0,c.isNullish)(e))throw new Error("Missing data parameter");if((0,c.isNullish)(t))throw new Error("Missing signature parameter");const s=i===d.V1?_(e):r.TypedDataUtils.eip712Hash(e,i),a=(0,c.recoverPublicKey)(s,t),u=(0,n.publicToAddress)(a);return(0,o.bytesToHex)(u)}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[195,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.UNISWAP_ROUTER_COMMANDS=void 0;r.UNISWAP_ROUTER_COMMANDS={0:{name:"V3_SWAP_EXACT_IN",params:[{type:"address",description:"The recipient of the output of the trade",name:"recipient"},{type:"uint256",description:"The amount of input tokens for the trade",name:"amountIn"},{type:"uint256",description:"The minimum amount of output tokens the user wants",name:"amountOutMin"},{type:"bytes",description:"The UniswapV3 encoded path to trade along",name:"path"},{type:"bool",description:"A flag for whether the input tokens should come from the msg.sender (through Permit2) or whether the funds are already in the UniversalRouter",name:"payerIsUser"}]},1:{name:"V3_SWAP_EXACT_OUT",params:[{type:"address",description:"The recipient of the output of the trade",name:"recipient"},{type:"uint256",description:"The amount of output tokens to receive",name:"amountOut"},{type:"uint256",description:"The maximum number of input tokens that should be spent",name:"amountInMax"},{type:"bytes",description:"The UniswapV3 encoded path to trade along",name:"path"},{type:"bool",description:"A flag for whether the input tokens should come from the msg.sender (through Permit2) or whether the funds are already in the UniversalRouter",name:"payerIsUser"}]},2:{name:"PERMIT2_TRANSFER_FROM",params:[{type:"address",description:"The token to fetch from Permit2",name:"token"},{type:"address",description:"The recipient of the tokens fetched",name:"recipient"},{type:"uint256",description:"The amount of token to fetch",name:"amount"}]},3:{name:"PERMIT2_PERMIT_BATCH",params:[{type:"bytes",description:"A PermitBatch struct outlining all of the Permit2 permits to execute.",name:"batch"},{type:"bytes",description:"The signature to provide to Permit2",name:"data"}]},4:{name:"SWEEP",params:[{type:"address",description:"The ERC20 token to sweep (or Constants.ETH for ETH)",name:"token"},{type:"address",description:"The recipient of the sweep",name:"recipient"},{type:"uint256",description:"The minimum required tokens to receive from the sweep",name:"amountMin"}]},5:{name:"TRANSFER",params:[{type:"address",description:"The ERC20 token to transfer (or Constants.ETH for ETH)",name:"token"},{type:"address",description:"The recipient of the transfer",name:"recipient"},{type:"uint256",description:"The amount to transfer",name:"value"}]},6:{name:"PAY_PORTION",params:[{type:"address",description:"The ERC20 token to transfer (or Constants.ETH for ETH)",name:"token"},{type:"address",description:"The recipient of the transfer",name:"recipient"},{type:"uint256",description:"In basis points, the percentage of the contractâ€™s balance to transfer",name:"bips"}]},8:{name:"V2_SWAP_EXACT_IN",params:[{type:"address",description:"The recipient of the output of the trade",name:"recipient"},{type:"uint256",description:"The amount of input tokens for the trade",name:"amountIn"},{type:"uint256",description:"The minimum amount of output tokens the user wants",name:"amountOutMin"},{type:"address[]",description:"The UniswapV2 token path to trade along",name:"path"},{type:"bool",description:"A flag for whether the input tokens should come from the msg.sender (through Permit2) or whether the funds are already in the UniversalRouter",name:"payerIsUser"}]},9:{name:"V2_SWAP_EXACT_OUT",params:[{type:"address",description:"The recipient of the output of the trade",name:"recipient"},{type:"uint256",description:"The amount of output tokens to receive",name:"amountOut"},{type:"uint256",description:"The maximum number of input tokens that should be spent",name:"amountInMax"},{type:"address[]",description:"The UniswapV2 token path to trade along",name:"path"},{type:"bool",description:"A flag for whether the input tokens should come from the msg.sender (through Permit2) or whether the funds are already in the UniversalRouter",name:"payerIsUser"}]},10:{name:"PERMIT2_PERMIT",params:[{type:"bytes",description:"A PermitSingle struct outlining the Permit2 permit to execute",name:"permitSingle"},{type:"bytes",description:"The signature to provide to Permit2",name:"signature"}]},11:{name:"WRAP_ETH",params:[{type:"address",description:"The recipient of the WETH",name:"recipient"},{type:"uint256",description:"The amount of ETH to wrap",name:"amountMin"}]},12:{name:"UNWRAP_WETH",params:[{type:"address",description:"The recipient of the ETH",name:"recipient"},{type:"uint256",description:"The minimum required ETH to receive from the unwrapping",name:"amountMin"}]},13:{name:"PERMIT2_TRANSFER_FROM_BATCH",params:[{type:"bytes",description:"An array of AllowanceTransferDetails structs that each describe a Permit2 transfer to perform",name:"batchDetails"}]},16:{name:"SEAPORT",params:[{type:"uint256",description:"The ETH value to forward to the Seaport contract",name:"value"},{type:"bytes",description:"The calldata to use to call the Seaport contract",name:"data"}]},17:{name:"LOOKS_RARE_721",params:[{type:"uint256",description:"The ETH value to forward to the LooksRare contract",name:"value"},{type:"bytes",description:"The calldata to use to call the LooksRare contract",name:"data"},{type:"address",description:"The recipient of the ERC721",name:"recipient"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC721",name:"id"}]},18:{name:"NFTX",params:[{type:"uint256",description:"The ETH value to forward to the NFTX contract",name:"value"},{type:"bytes",description:"The calldata to use to call the NFTX contract",name:"data"}]},19:{name:"CRYPTOPUNKS",params:[{type:"uint256",description:"The PunkID to purchase",name:"punkId"},{type:"address",description:"The recipient for the cryptopunk",name:"recipient"},{type:"uint256",description:"The ETH value to forward to the Cryptopunks contract",name:"value"}]},20:{name:"LOOKS_RARE_1155",params:[{type:"uint256",description:"The ETH value to forward to the LooksRare contract",name:"value"},{type:"bytes",description:"The calldata to use to call the LooksRare contract",name:"data"},{type:"address",description:"The recipient of the ERC1155",name:"recipient"},{type:"address",description:"The ERC1155 token address",name:"token"},{type:"uint256",description:"The ID of the ERC1155",name:"id"},{type:"uint256",description:"The amount of the ERC1155 to transfer",name:"amount"}]},21:{name:"OWNER_CHECK_721",params:[{type:"address",description:"The required owner of the ERC721",name:"owner"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC721",name:"id"}]},22:{name:"OWNER_CHECK_1155",params:[{type:"address",description:"The required owner of the ERC1155",name:"owner"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC1155",name:"id"},{type:"uint256",description:"The minimum required amount of the ERC1155",name:"minBalance"}]},23:{name:"SWEEP_ERC721",params:[{type:"address",description:"The ERC721 token address to transfer",name:"token"},{type:"address",description:"The recipient of the transfer",name:"recipient"},{type:"uint256",description:"The token ID to transfer",name:"id"}]},24:{name:"X2Y2_721",params:[{type:"uint256",description:"The ETH value to forward to the X2Y2 contract",name:"value"},{type:"bytes",description:"The calldata to use to call the X2Y2 contract",name:"data"},{type:"address",description:"The recipient of the ERC721",name:"recipient"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC721",name:"id"}]},25:{name:"SUDOSWAP",params:[{type:"uint256",description:"The ETH value to forward to the Sudoswap contract",name:"value"},{type:"bytes",description:"The calldata to use to call the Sudoswap contract",name:"data"}]},26:{name:"NFT20",params:[{type:"uint256",description:"The ETH value to forward to the NFT20 contract",name:"value"},{type:"bytes",description:"The calldata to use to call the NFT20 contract",name:"data"}]},27:{name:"X2Y2_1155",params:[{type:"uint256",description:"The ETH value to forward to the X2Y2 contract",name:"value"},{type:"bytes",description:"The calldata to use to call the X2Y2 contract",name:"data"},{type:"address",description:"The recipient of the ERC1155",name:"recipient"},{type:"address",description:"The ERC1155 token address",name:"token"},{type:"uint256",description:"The ID of the ERC1155",name:"id"},{type:"uint256",description:"The amount of the ERC1155 to transfer",name:"amount"}]},28:{name:"FOUNDATION",params:[{type:"uint256",description:"The ETH value to forward to the Foundation contract",name:"value"},{type:"bytes",description:"The calldata to use to call the Foundation contract",name:"data"},{type:"address",description:"The recipient of the ERC721",name:"recipient"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC721",name:"id"}]},29:{name:"SWEEP_ERC1155",params:[{type:"address",description:"The ERC1155 token address to sweep",name:"token"},{type:"address",description:"The recipient of the sweep",name:"recipient"},{type:"uint256",description:"The token ID to sweep",name:"id"},{type:"uint256",description:"The minimum required tokens to receive from the sweep",name:"amount"}]}}}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/uniswap-commands.ts"}],[1950,{"@ethereumjs/util":1958,"@metamask/utils":3026,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/utils");function s(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function a(e){return null===e||e===undefined}r.padWithZeroes=s,r.isNullish=a,r.legacyToBuffer=function(e){return"string"!=typeof e||(0,n.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const a=(0,n.fromSigned)(t),o=(0,n.fromSigned)(r),u=(0,n.bufferToInt)(e),c=s((0,n.toUnsigned)(a).toString("hex"),64),d=s((0,n.toUnsigned)(o).toString("hex"),64),l=(0,i.remove0x)((0,i.numberToHex)(u));return(0,i.add0x)(c.concat(d,l))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(a(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,i.numberToBytes)(e);e=(0,i.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,i.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1951,{"./bytes":1954,"./constants":1955,"./helpers":1957,"./internal":1959,"@ethereumjs/rlp":462,buffer:4138,"ethereum-cryptography/keccak":4372,"ethereum-cryptography/secp256k1":4393,"ethereum-cryptography/utils":4395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const n=e("@ethereumjs/rlp"),i=e("ethereum-cryptography/keccak"),s=e("ethereum-cryptography/secp256k1"),a=e("ethereum-cryptography/utils"),o=e("./bytes"),u=e("./constants"),c=e("./helpers"),d=e("./internal"),l=BigInt(0);class f{constructor(e=l,t=l,r=u.KECCAK256_RLP,n=u.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:i}=e;return new f(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,r!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):undefined,n!==undefined?(0,o.toBuffer)(n):undefined,i!==undefined?(0,o.toBuffer)(i):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,i]=e;return new f((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),n,i)}_validate(){if(this.nonce<l)throw new Error("nonce must be greater than zero");if(this.balance<l)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(n.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(u.KECCAK256_NULL)}isEmpty(){return this.balance===l&&this.nonce===l&&this.codeHash.equals(u.KECCAK256_NULL)}}r.Account=f;r.isValidAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,c.assertIsHexString)(e);const n=(0,d.stripHexPrefix)(e).toLowerCase();let s="";if(r!==undefined){s=(0,o.bufferToBigInt)((0,o.toBuffer)(r)).toString()+"0x"}const u=t.from(s+n,"utf8"),l=(0,a.bytesToHex)((0,i.keccak256)(u));let f="0x";for(let e=0;e<n.length;e++)parseInt(l[e],16)>=8?f+=n[e].toUpperCase():f+=n[e];return f};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,c.assertIsBuffer)(e),(0,c.assertIsBuffer)(r),(0,o.bufferToBigInt)(r)===BigInt(0)?t.from((0,i.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,i.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,n){if((0,c.assertIsBuffer)(e),(0,c.assertIsBuffer)(r),(0,c.assertIsBuffer)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const s=(0,i.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,i.keccak256)(n)]));return(0,o.toBuffer)(s).slice(-20)};r.isValidPrivate=function(e){return s.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,c.assertIsBuffer)(e),64===e.length)try{return s.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return s.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,c.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,i.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,c.assertIsBuffer)(e),t.from(s.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,c.assertIsBuffer)(e),64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function p(e){const[t,r,n,i]=e;return[t,r,0===(0,o.arrToBufArr)(n).length?u.KECCAK256_RLP:n,0===(0,o.arrToBufArr)(i).length?u.KECCAK256_NULL:i]}r.isZeroAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=p;const h=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,n,i]=e;return[t,r,(0,o.arrToBufArr)(n).equals(u.KECCAK256_RLP)?h:n,(0,o.arrToBufArr)(i).equals(u.KECCAK256_NULL)?h:i]},r.accountBodyToRLP=function(e,t=!0){const r=t?p(e):e;return(0,o.arrToBufArr)(n.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/account.js"}],[1952,{"./account":1951,"./bytes":1954,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const n=e("./account"),i=e("./bytes");class s{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new s((0,i.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new s((0,i.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,n.pubToAddress)(e);return new s(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,n.privateToAddress)(e);return new s(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new s((0,n.generateAddress)(e.buf,(0,i.bigIntToBuffer)(t)))}static generate2(e,r,i){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(i))throw new Error("Expected initCode to be a Buffer");return new s((0,n.generateAddress2)(e.buf,r,i))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(s.zero())}isPrecompileOrSystemAddress(){const e=(0,i.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=s}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/address.js"}],[1953,{events:4475},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const n=e("events");class i extends n.EventEmitter{emit(e,...t){let[r,n]=t;const i=this;let s=i._events[e]??[];return n===undefined&&"function"==typeof r&&(n=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=undefined),s=Array.isArray(s)?s:[s],async function(e,t,r){let n;for await(const i of t)try{i.length<2?i.call(e,r):await new Promise(((t,n)=>{i.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(i,s.slice(),r).then(n).catch(n),i.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(i,s){r.removeListener(e,n),t(i,s)}:function(i){r.removeListener(e,n),t(i,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let i,s,a=this._events[e]??[];const o="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),s=a.length,i=a.length;i--;)if(a[i]===t){s=i+o;break}return a.splice(s,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=i}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[1954,{"./helpers":1957,"./internal":1959,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const n=e("./helpers"),i=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const n=(0,r.intToHex)(e);return t.from((0,i.padToEven)(n.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const s=function(e,t,n){const i=(0,r.zeros)(t);return n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!1)};r.setLengthRight=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!0)};const a=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,n.assertIsBuffer)(e),a(e)};r.unpadArray=function(e){return(0,n.assertIsArray)(e),a(e)};r.unpadHexString=function(e){return(0,n.assertIsHexString)(e),e=(0,i.stripHexPrefix)(e),"0x"+a(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,i.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,i.padToEven)((0,i.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function u(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=o,r.bigIntToBuffer=u;r.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,o(e))};r.toUnsigned=function(e){return u(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,i.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const n=t.isBuffer(e)?e.toString("hex"):e;return n.length<=r?n:n.slice(0,r)+"â€¦"};r.toUtf8=function(e){if((e=(0,i.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,r.baToJSON)(e[n]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(u(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/bytes.js"}],[1955,{buffer:4138,"ethereum-cryptography/secp256k1":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("buffer"),i=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=i.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=i.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=n.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/constants.js"}],[1956,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=t<<5,1&~e.length||(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,n.subarray(1)),n};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const n=2-(1&t[0]);return t.subarray(n)}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/encoding.js"}],[1957,{"../../../../../../../../../is-buffer/index.js":4736,"./internal":1959},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const n=e("./internal");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/helpers.js"}],[1958,{"./account":1951,"./address":1952,"./asyncEventEmitter":1953,"./bytes":1954,"./constants":1955,"./encoding":1956,"./internal":1959,"./lock":1960,"./provider":1961,"./signature":1962,"./types":1963,"./units":1964,"./withdrawal":1965},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,i(e("./constants"),r),i(e("./units"),r),i(e("./account"),r),i(e("./address"),r),i(e("./withdrawal"),r),i(e("./signature"),r),i(e("./bytes"),r),i(e("./types"),r),i(e("./encoding"),r),i(e("./asyncEventEmitter"),r);var s=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return s.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return s.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return s.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return s.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return s.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return s.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return s.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return s.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return s.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return s.toAscii}}),i(e("./lock"),r),i(e("./provider"),r)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/index.js"}],[1959,{buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function n(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=n,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(t){return`0x${n(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let i=0;i<e.length;i++){let s=e[i][t];if(!0!==r||s){if("string"!=typeof s)throw new Error("invalid abi - expected type 'string', received "+typeof s)}else s="";n.push(s)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/internal.js"}],[196,{"../../../../../shared/constants/network":5839,"./uniswap-commands":195,"@ethersproject/abi":517,"ethereumjs-util":4403},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.UNISWAP_UNIVERSAL_ROUTER_ADDRESSES=void 0,r.decodeUniswapRouterTransactionData=function({transactionData:e,contractAddress:t,chainId:r}){const s=c[r];if(null==s||!s.map((e=>e.toLowerCase())).includes(t.toLowerCase()))return undefined;const l=new n.Interface(d);let f;try{f=l.parseTransaction({data:e})}catch(e){return undefined}const p=f.args.commands,h=f.args.inputs;return p.slice(2).match(/.{1,2}/gu).map(((e,t)=>function(e,t){const r=parseInt(e,16),s=31&r,c=a.UNISWAP_ROUTER_COMMANDS[String(s)];if(!c)return undefined;const d=c.params.map((e=>e.type)),l=n.Interface.getAbiCoder().decode(d,t),{name:f}=c,p=c.params.map(((e,t)=>{const{name:r,type:n,description:s}=e,a=l[t];return{name:r,type:n,value:"path"===r?function(e){const t=[];let r=(0,i.stripHexPrefix)(e),n={},s=!0;for(;r.length;){if(s){const e=(0,i.addHexPrefix)(r.slice(0,o));n.firstAddress?(n.secondAddress=e,t.push(n),n={firstAddress:e}):n.firstAddress=e,r=r.slice(o)}else n.tickSpacing=parseInt(r.slice(0,u),16),r=r.slice(u);s=!s}return t}(a):a,description:s}}));return{name:f,params:p}}(e,h[t]))).filter((e=>e!==undefined))};var n=e("@ethersproject/abi"),i=e("ethereumjs-util"),s=e("../../../../../shared/constants/network"),a=e("./uniswap-commands");const o=40,u=6,c=r.UNISWAP_UNIVERSAL_ROUTER_ADDRESSES={[s.CHAIN_IDS.ARBITRUM]:["0x4C60051384bd2d3C01bfc845Cf5F4b44bcbE9de5","0xeC8B0F7Ffe3ae75d7FfAb09429e3675bb63503e4","0x5E325eDA8064b456f4781070C0738d849c824258"],[s.CHAIN_IDS.AVALANCHE]:["0x82635AF6146972cD6601161c4472ffe97237D292","0x4Dae2f939ACf50408e13d58534Ff8c2776d45265"],[s.CHAIN_IDS.BASE]:["0xeC8B0F7Ffe3ae75d7FfAb09429e3675bb63503e4","0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD"],[s.CHAIN_IDS.BSC]:["0x5Dc88340E1c5c6366864Ee415d6034cadd1A9897","0xeC8B0F7Ffe3ae75d7FfAb09429e3675bb63503e4","0x4Dae2f939ACf50408e13d58534Ff8c2776d45265"],[s.CHAIN_IDS.MAINNET]:["0xEf1c6E67703c7BD7107eed8303Fbe6EC2554BF6B","0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD"],[s.CHAIN_IDS.OPTIMISM]:["0xb555edF5dcF85f42cEeF1f3630a52A108E55A654","0xeC8B0F7Ffe3ae75d7FfAb09429e3675bb63503e4","0xCb1355ff08Ab38bBCE60111F1bb2B784bE25D7e8"],[s.CHAIN_IDS.POLYGON]:["0x4C60051384bd2d3C01bfc845Cf5F4b44bcbE9de5","0x643770E279d5D0733F21d6DC03A8efbABf3255B4","0xec7BE89e9d109e7e3Fec59c222CF297125FEFda2"],[s.CHAIN_IDS.SEPOLIA]:["0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD"]},d=[{constant:!0,inputs:[{name:"commands",type:"bytes"},{name:"inputs",type:"bytes[]"},{name:"deadline",type:"uint256"}],name:"execute",type:"function"},{constant:!0,inputs:[{name:"commands",type:"bytes"},{name:"inputs",type:"bytes[]"}],name:"execute",type:"function"}]}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/uniswap.ts"}],[1960,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/lock.js"}],[1961,{"micro-ftch":4990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const n=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/provider.js"}],[1962,{"./bytes":1954,"./constants":1955,"./helpers":1957,buffer:4138,"ethereum-cryptography/keccak":4372,"ethereum-cryptography/secp256k1":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),s=e("./bytes"),a=e("./constants"),o=e("./helpers");function u(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function c(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,n){const s=i.secp256k1.sign(e,r),a=s.toCompactRawBytes();return{r:t.from(a.slice(0,32)),s:t.from(a.slice(32,64)),v:n===undefined?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(n)*BigInt(2)}};r.ecrecover=function(e,r,n,a,o){const d=t.concat([(0,s.setLengthLeft)(n,32),(0,s.setLengthLeft)(a,32)],64),l=u(r,o);if(!c(l))throw new Error("Invalid signature v value");const f=i.secp256k1.Signature.fromCompact(d).addRecoveryBit(Number(l)).recoverPublicKey(e);return t.from(f.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,n,i){if(!c(u(e,i)))throw new Error("Invalid signature v value");return(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(n,32),(0,s.toBuffer)(e)]))};r.toCompactSig=function(e,r,n,i){if(!c(u(e,i)))throw new Error("Invalid signature v value");let a=n;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(a=t.from(n),a[0]|=128),(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(a,32)]))};r.fromRpcSig=function(e){const t=(0,s.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,s.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,s.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return i<27&&(i+=BigInt(27)),{v:i,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,i){if(32!==t.length||32!==r.length)return!1;if(!c(u(e,i)))return!1;const o=(0,s.bufferToBigInt)(t),d=(0,s.bufferToBigInt)(r);return!(o===BigInt(0)||o>=a.SECP256K1_ORDER||d===BigInt(0)||d>=a.SECP256K1_ORDER)&&!(n&&d>=a.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,n.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/signature.js"}],[1963,{"./bytes":1954,"./internal":1959},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes"),i=e("./internal");var s;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(s=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,i.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case s.Buffer:return r;case s.BigInt:return(0,n.bufferToBigInt)(r);case s.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case s.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/types.js"}],[1964,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/units.js"}],[1965,{"./address":1952,"./bytes":1954,"./types":1963,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address"),i=e("./bytes"),s=e("./types");class a{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:o}=e,u=(0,s.toType)(t,s.TypeOutput.BigInt),c=(0,s.toType)(r,s.TypeOutput.BigInt),d=new n.Address((0,s.toType)(i,s.TypeOutput.Buffer)),l=(0,s.toType)(o,s.TypeOutput.BigInt);return new a(u,c,d,l)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,i]=e;return a.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBufferArray(e){const{index:r,validatorIndex:i,address:a,amount:o}=e,u=(0,s.toType)(r,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(r,s.TypeOutput.Buffer),c=(0,s.toType)(i,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(i,s.TypeOutput.Buffer);let d;d=a instanceof n.Address?a.buf:(0,s.toType)(a,s.TypeOutput.Buffer);return[u,c,d,(0,s.toType)(o,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(o,s.TypeOutput.Buffer)]}raw(){return a.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,i.bigIntToHex)(this.index),validatorIndex:(0,i.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,i.bigIntToHex)(this.amount)}}}r.Withdrawal=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[1966,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function s(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function a(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function u(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function c(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function d(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const s=[],a=Array.from(e);for(a.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let s=i;s<a.length;s++){const o=a[s],u=t*e+o;if(!Number.isSafeInteger(u)||t*e/t!==e||u-o!=t*e)throw new Error("convertRadix: carry overflow");e=u%r;const c=Math.floor(u/r);if(a[s]=c,!Number.isSafeInteger(c)||c*r+e!==u)throw new Error("convertRadix: carry overflow");n&&(c?n=!1:i=s)}if(s.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)s.push(0);return s.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=void 0,r.assertNumber=n;const l=(e,t)=>t?l(t,e%t):e,f=(e,t)=>e+(t-l(e,t));function p(e,t,r,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(f(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${f(t,r)}`);let s=0,a=0;const o=2**r-1,u=[];for(const i of e){if(n(i),i>=2**t)throw new Error(`convertRadix2: invalid data word=${i} from=${t}`);if(s=s<<t|i,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=r;a-=r)u.push((s>>a-r&o)>>>0);s&=2**a-1}if(s=s<<r-a&o,!i&&a>=t)throw new Error("Excess padding");if(!i&&s)throw new Error(`Non-zero padding: ${s}`);return i&&a>0&&u.push(s>>>0),u}function h(e){return n(e),{encode:t=>{if(!i(t))throw new Error("radix.encode input should be Uint8Array");return d(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(d(t,e,256))}}}function m(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(f(8,e)>32||f(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!i(r))throw new Error("radix2.encode input should be Uint8Array");return p(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(p(r,e,8,t))}}}function g(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!i(r))throw new Error("checksum.encode: input should be Uint8Array");const n=t(r).slice(0,e),s=new Uint8Array(r.length+e);return s.set(r),s.set(n,r.length),s},decode(r){if(!i(r))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-e),s=t(n).slice(0,e),a=r.slice(-e);for(let t=0;t<e;t++)if(s[t]!==a[t])throw new Error("Invalid checksum");return n}}}r.utils={alphabet:a,chain:s,checksum:y,convertRadix:d,convertRadix2:p,radix:h,radix2:m,join:o,padding:u},r.base16=s(m(4),a("0123456789ABCDEF"),o("")),r.base32=s(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),u(5),o("")),r.base32nopad=s(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o("")),r.base32hex=s(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),u(5),o("")),r.base32hexnopad=s(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o("")),r.base32crockford=s(m(5),a("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),c((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),r.base64=s(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),u(6),o("")),r.base64nopad=s(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o("")),r.base64url=s(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),u(6),o("")),r.base64urlnopad=s(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(""));const b=e=>s(h(58),a(e),o(""));r.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){const i=e.subarray(n,n+8);t+=r.base58.encode(i).padStart(w[i.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const i=e.slice(n,n+11),s=w.indexOf(i.length),a=r.base58.decode(i);for(let e=0;e<a.length-s;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-s)))}return Uint8Array.from(t)}};r.createBase58check=e=>s(y(4,(t=>e(e(t)))),r.base58),r.base58check=r.createBase58check;const k=s(a("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),v=[996825010,642813549,513874426,1027748829,705979059];function T(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<v.length;e++)1==(t>>e&1)&&(r^=v[e]);return r}function E(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=T(i)^r>>5}i=T(i);for(let t=0;t<n;t++)i=T(i)^31&e.charCodeAt(t);for(let e of t)i=T(i)^e;for(let e=0;e<6;e++)i=T(i);return i^=r,k.encode(p([i%2**30],30,5,!1))}function _(e){const t="bech32"===e?1:734539939,r=m(5),n=r.decode,i=r.encode,s=g(n);function a(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(r instanceof Uint8Array&&(r=Array.from(r)),!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);if(0===e.length)throw new TypeError(`Invalid prefix length ${e.length}`);const i=e.length+7+r.length;if(!1!==n&&i>n)throw new TypeError(`Length ${i} exceeds limit ${n}`);const s=e.toLowerCase(),a=E(s,r,t);return`${s}1${k.encode(r)}${a}`}function o(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=n.lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const s=n.slice(0,i),a=n.slice(i+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const o=k.decode(a).slice(0,-6),u=E(s,o,t);if(!a.endsWith(u))throw new Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:s,words:o}}return{encode:a,decode:o,encodeFromBytes:function(e,t){return a(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:r}=o(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:g(o),fromWords:n,fromWordsUnsafe:s,toWords:i}}r.bech32=_("bech32"),r.bech32m=_("bech32m"),r.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},r.hex=s(m(4),a("0123456789abcdef"),o(""),c((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const A={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},P="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!A.hasOwnProperty(e))throw new TypeError(P);if(!i(t))throw new TypeError("bytesToString() expects Uint8Array");return A[e].encode(t)},r.str=r.bytesToString;r.stringToBytes=(e,t)=>{if(!A.hasOwnProperty(e))throw new TypeError(P);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return A[e].decode(t)},r.bytes=r.stringToBytes}}},{package:"@metamask/eth-trezor-keyring>@metamask/eth-sig-util>@scure/base",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@scure/base/lib/index.js"}],[1967,{"@metamask/eth-sig-util":1946,tslib:5722},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.transformTypedData=void 0;const n=e("tslib").__importStar(e("@metamask/eth-sig-util"));function i(e){switch(Object.prototype.toString.call(e)){case"[object Object]":{const t=Object.keys(e).map((t=>[t,i(e[t])]));return Object.fromEntries(t)}case"[object Array]":return e.map((e=>i(e)));case"[object BigInt]":return e.toString();default:return e}}r.transformTypedData=(e,t)=>{if(!t)throw new Error("Trezor: Only version 4 of typed data signing is supported");const r=n.SignTypedDataVersion.V4,{types:s,primaryType:a,domain:o,message:u}=n.TypedDataUtils.sanitizeData(e),c=n.TypedDataUtils.hashStruct("EIP712Domain",i(o),s,r).toString("hex");let d=null;return"EIP712Domain"!==a&&(d=n.TypedDataUtils.hashStruct(a,i(u),s,r).toString("hex")),Object.assign({domain_separator_hash:c,message_hash:d},e)},r.default=r.transformTypedData}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-plugin-ethereum",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/@trezor/connect-plugin-ethereum/lib/index.js"}],[197,{"../../../../../shared/types/transaction-decode":5932,"./four-byte":192,"./proxy":193,"./sourcify":194,"./uniswap":196,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeTransactionData=async function({transactionData:e,contractAddress:t,chainId:r,provider:n}){c("Decoding transaction data",{transactionData:e,contractAddress:t,chainId:r});const l=(0,s.decodeUniswapRouterTransactionData)({transactionData:e,contractAddress:t,chainId:r});if(l)return c("Decoded with Uniswap commands",l),{data:d(l),source:i.DecodedTransactionDataSource.Uniswap};const f=await(0,o.getContractProxyAddress)(t,n);f&&c("Retrieved proxy implementation address",f);const p=f??t,h=(0,a.decodeTransactionDataWithSourcify)(e,p,r),m=(0,u.decodeTransactionDataWithFourByte)(e),[g,y]=await Promise.allSettled([h,m]);if("fulfilled"===g.status&&g.value)return c("Decoded data with Sourcify",g.value),{data:d([g.value]),source:i.DecodedTransactionDataSource.Sourcify};if(c("Failed to decode data with Sourcify",g),"fulfilled"===y.status&&y.value)return c("Decoded data with 4Byte",y.value),{data:d([y.value]),source:i.DecodedTransactionDataSource.FourByte};return c("Failed to decode data with 4Byte",y),undefined};var n=e("@metamask/utils"),i=e("../../../../../shared/types/transaction-decode"),s=e("./uniswap"),a=e("./sourcify"),o=e("./proxy"),u=e("./four-byte");const c=(0,n.createProjectLogger)("transaction-decode");function d(e){return e.map((e=>function(e){return{...e,params:e.params.map((e=>l(e)))}}(e)))}function l(e){var t;return{...e,value:f(e.value),children:null===(t=e.children)||void 0===t?void 0:t.map((e=>l(e)))}}function f(e){const t=e._hex;return t?BigInt(t).toString():e}}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/util.ts"}],[198,{"@ethersproject/abi":517,"@metamask/keyring-controller":2053,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ROOT_AUTHORITY=r.ExecutionMode=r.ANY_BENEFICIARY=void 0,r.encodeRedeemDelegations=function(e,t,r){return new s.Interface(d).encodeFunctionData("redeemDelegations",[f(e),t,(n=r,n.map(p))]);var n},r.signDelegation=async function({chainId:e,delegation:t,from:r,messenger:s}){const u={types:l,primaryType:a,domain:{chainId:String((0,n.hexToNumber)(e)),name:o,version:"1",verifyingContract:"0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3"},message:{...t,chainId:(0,n.hexToNumber)(e)}};return await s.call("KeyringController:signTypedMessage",{from:r,data:u},i.SignTypedDataVersion.V4)};var n=e("@metamask/utils"),i=e("@metamask/keyring-controller"),s=e("@ethersproject/abi");r.ExecutionMode=function(e){return e.BATCH_DEFAULT_MODE="0x0100000000000000000000000000000000000000000000000000000000000000",e}({});r.ROOT_AUTHORITY="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",r.ANY_BENEFICIARY="0x0000000000000000000000000000000000000a11";const a="Delegation",o="DelegationManager",u=[{type:"address",name:"delegate"},{type:"address",name:"delegator"},{type:"bytes32",name:"authority"},{type:"tuple[]",name:"caveats",components:[{type:"address",name:"enforcer"},{type:"bytes",name:"terms"},{type:"bytes",name:"args"}]},{type:"uint256",name:"salt"},{type:"bytes",name:"signature"}],c=[{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"callData"}],d=[{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"}],l={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}],Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}]};function f(e){return e.map((e=>{return t=e,s.defaultAbiCoder.encode([s.ParamType.from({components:u,name:"delegations",type:"tuple[]"})],[t]);var t}))}function p(e){return s.defaultAbiCoder.encode([s.ParamType.from({components:c,name:"executions",type:"tuple[]"})],[e])}}}},{package:"$root$",file:"app/scripts/lib/transaction/delegation.ts"}],[199,{"../../../../shared/constants/transaction":5854,"../ppom/ppom-util":151,"@metamask/eth-json-rpc-middleware":1642,"@metamask/keyring-controller":2053,"@metamask/rpc-errors":2622,"@metamask/transaction-controller":2981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AtomicCapabilityStatus=void 0,r.getCallsStatus=function(e,t){const r=e.call("TransactionController:getState").transactions.filter((e=>e.batchId===t));if(null==r||!r.length)throw new n.JsonRpcError(u.EIP5792ErrorCode.UnknownBundleId,"No matching bundle found");const a=r[0],{chainId:o,txReceipt:c}=a,l=function(e){const{hash:t,status:r}=e;if(r===i.TransactionStatus.confirmed)return s.GetCallsStatusCode.CONFIRMED;if(r===i.TransactionStatus.failed)return t?s.GetCallsStatusCode.REVERTED:s.GetCallsStatusCode.FAILED_OFFCHAIN;if(r===i.TransactionStatus.dropped)return s.GetCallsStatusCode.REVERTED;return s.GetCallsStatusCode.PENDING}(a),f=c,p=(null==f?void 0:f.logs)??[],h=f&&[{blockHash:f.blockHash,blockNumber:f.blockNumber,gasUsed:f.gasUsed,logs:p.map((e=>({address:e.address,data:e.data,topics:e.topics}))),status:f.status,transactionHash:f.transactionHash}];return{version:d,id:t,chainId:o,atomic:!0,status:l,receipts:h}},r.getCapabilities=async function(e,t,r,n){const{getDismissSmartAccountSuggestionEnabled:i,isAtomicBatchSupported:s}=e,a=null==n?void 0:n.map((e=>e.toLowerCase()));return(await s({address:r,chainIds:a})).reduce(((e,n)=>{const{chainId:s}=n,{delegationAddress:a,isSupported:o,upgradeContractAddress:u}=n,d=i();let p=!1;try{const e=f(r,t);p=l.includes(e)}catch(e){}if(!o&&!(!d&&u&&!a&&p))return e;const h=o?c.Supported:c.Ready;return e[s]={atomic:{status:h}},e}),{})},r.processSendCalls=async function(e,t,r,i){const{addTransactionBatch:s,getDismissSmartAccountSuggestionEnabled:a,isAtomicBatchSupported:c,validateSecurity:p}=e,{calls:h,from:m}=r,{networkClientId:g,origin:y}=i,b=h.map((e=>({params:e}))),w=t.call("NetworkController:getNetworkClientById",g).configuration.chainId,k=m??t.call("AccountsController:getSelectedAccount").address,v=a(),T=await c({address:k,chainIds:[w]}),E=null==T?void 0:T[0],_=f(k,t);!function(e,t,r,i,s){(function(e){const{version:t}=e;if(t!==d)throw n.rpcErrors.invalidInput(`Version not supported: Got ${t}, expected ${d}`)})(e),function(e,t,r){const{chainId:i}=e;if(i&&i.toLowerCase()!==t.toLowerCase())throw n.rpcErrors.invalidParams(`Chain ID must match the dApp selected network: Got ${i}, expected ${t}`);if(!r)throw new n.JsonRpcError(u.EIP5792ErrorCode.UnsupportedChainId,`EIP-7702 not supported on chain: ${t}`)}(e,t,i),function(e){const{calls:t,capabilities:r}=e,i=Object.keys(r??{}).filter((e=>!0!==(null==r?void 0:r[e].optional))),s=t.flatMap((e=>Object.keys(e.capabilities??{}).filter((t=>{var r;return!0!==(null===(r=e.capabilities)||void 0===r?void 0:r[t].optional)})))),a=[...i,...s];if(null!=a&&a.length)throw new n.JsonRpcError(u.EIP5792ErrorCode.UnsupportedNonOptionalCapability,`Unsupported non-optional capabilities: ${a.join(", ")}`)}(e),function(e,t,r){if(null!=t&&t.delegationAddress)return;if(e)throw new n.JsonRpcError(u.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade disabled by the user");if(!l.includes(r))throw new n.JsonRpcError(u.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported on account")}(r,i,s)}(r,w,v,E,_);const A=(0,o.generateSecurityAlertId)(),P=p.bind(null,A),{batchId:x}=await s({from:k,networkClientId:g,origin:y,securityAlertId:A,transactions:b,validateSecurity:P});return{id:x}};var n=e("@metamask/rpc-errors"),i=e("@metamask/transaction-controller"),s=e("@metamask/eth-json-rpc-middleware"),a=e("@metamask/keyring-controller"),o=e("../ppom/ppom-util"),u=e("../../../../shared/constants/transaction");let c=r.AtomicCapabilityStatus=function(e){return e.Supported="supported",e.Ready="ready",e.Unsupported="unsupported",e}({});const d="2.0.0",l=[a.KeyringTypes.hd,a.KeyringTypes.simple];function f(e,t){var r;const{accounts:i}=t.call("AccountsController:getState").internalAccounts,s=Object.values(i).find((t=>t.address.toLowerCase()===e.toLowerCase())),a=null==s||null===(r=s.metadata)||void 0===r||null===(r=r.keyring)||void 0===r?void 0:r.type;if(!a)throw new n.JsonRpcError(u.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported as account type is unknown");return a}}}},{package:"$root$",file:"app/scripts/lib/transaction/eip5792.ts"}],[20,{"../../../../shared/constants/metametrics":5836,"../../../../shared/modules/environment":5907,"@metamask/profile-sync-controller/user-storage":2503,"@sentry/browser":3135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.UserStorageControllerInit=void 0;var n=e("@metamask/profile-sync-controller/user-storage"),i=e("@sentry/browser"),s=e("../../../../shared/modules/environment"),a=e("../../../../shared/constants/metametrics");r.UserStorageControllerInit=e=>{const{controllerMessenger:t,persistedState:r,trackEvent:o}=e;return{controller:new n.Controller({messenger:t,state:r.UserStorageController,config:{accountSyncing:{maxNumberOfAccountsToAdd:(0,s.isProduction)()?undefined:100,onAccountAdded:e=>{o({category:a.MetaMetricsEventCategory.BackupAndSync,event:a.MetaMetricsEventName.AccountsSyncAdded,properties:{profile_id:e}})},onAccountNameUpdated:e=>{o({category:a.MetaMetricsEventCategory.BackupAndSync,event:a.MetaMetricsEventName.AccountsSyncNameUpdated,properties:{profile_id:e}})},onAccountSyncErroneousSituation:(e,t,r)=>{(0,i.captureException)(new Error(`Account sync - ${t}`),r),o({category:a.MetaMetricsEventCategory.BackupAndSync,event:a.MetaMetricsEventName.AccountsSyncErroneousSituation,properties:{profile_id:e,situation_message:t}})}}}})}}}}},{package:"$root$",file:"app/scripts/controller-init/identity/user-storage-controller-init.ts"}],[200,{"../delegation":198,"../transaction-relay":203,"@ethersproject/abi":517,"@metamask/metamask-eth-abis":2150,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Delegation7702PublishHook=void 0;var n=e("@metamask/utils"),i=e("@metamask/metamask-eth-abis"),s=e("@ethersproject/abi"),a=e("../delegation"),o=e("../transaction-relay");function u(e,t,r){c(e,t),t.set(e,r)}function c(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(e,t){return e.get(f(e,t))}function l(e,t,r){return e.set(f(e,t),r),r}function f(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const p="0x",h=1e3,m={transactionHash:undefined},g=(0,n.createProjectLogger)("delegation-7702-publish-hook");var y=new WeakMap,b=new WeakMap,w=new WeakSet;async function k(e,t){try{return await f(w,this,v).call(this,e,t)}catch(e){throw g("Error",e),e}}async function v(e,t){const{chainId:r,gasFeeTokens:n,selectedGasFeeToken:i,txParams:s}=e,{from:u}=s,c=(await d(y,this).call(this,{address:u,chainIds:[r]})).find((e=>e.chainId.toLowerCase()===r.toLowerCase()));if(!(c&&(!c.delegationAddress||c.isSupported)))return g("Skipping as EIP-7702 is not supported",{from:u,chainId:r}),m;const{delegationAddress:l,upgradeContractAddress:p}=c;if(!i||null==n||!n.length)return g("Skipping as no selected gas fee token"),m;const b=n.find((e=>e.tokenAddress.toLowerCase()===i.toLowerCase()));if(!b)throw new Error("Selected gas fee token not found");const k=await f(w,this,E).call(this,e,b),v=f(w,this,T).call(this,e,b),_=(0,a.encodeRedeemDelegations)([[k]],[a.ExecutionMode.BATCH_DEFAULT_MODE],[v]),P={chainId:r,data:_,to:"0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3"};l||(P.authorizationList=await f(w,this,A).call(this,e,p)),g("Relay request",P);const{uuid:x}=await(0,o.submitRelayTransaction)(P),{transactionHash:B,status:I}=await(0,o.waitForRelayResult)({chainId:r,uuid:x,interval:h});if(I!==o.RelayStatus.Success)throw new Error(`Transaction relay error - ${I}`);return{transactionHash:B}}function T(e,t){const{txParams:r}=e,{data:n,to:i,value:s}=r;return[{target:i,value:s??"0x0",callData:n??p},{target:t.tokenAddress,value:"0x0",callData:f(w,this,P).call(this,t.recipient,t.amount)}]}async function E(e,t){const{chainId:r,txParams:n}=e,{from:i}=n,s=f(w,this,_).call(this,n,t);g("Caveats",s);const o={authority:a.ROOT_AUTHORITY,caveats:s,delegate:a.ANY_BENEFICIARY,delegator:i,salt:(new Date).getTime()};g("Unsigned delegation",o);const u=await(0,a.signDelegation)({chainId:r,delegation:o,from:i,messenger:d(b,this)});return g("Delegation signature",u),{...o,signature:u}}function _(e,t){const{amount:r,recipient:i,tokenAddress:s}=t,{data:a,to:o}=e,u=(0,n.add0x)((0,n.remove0x)(r).padStart(64,"0"));return[{enforcer:"0x00e0251aaA263dfE3B3541B758A82D1CBA1c3B6D",terms:(0,n.add0x)([s,i,u,o,a??p].map(n.remove0x).join("")),args:p}]}async function A(e,t){const{chainId:r,txParams:n}=e,{from:i,nonce:s}=n;if(g("Including authorization as not upgraded"),!t)throw new Error("Upgrade contract address not found");const a=await d(b,this).call("KeyringController:signEip7702Authorization",{chainId:parseInt(r,16),contractAddress:t,from:i,nonce:parseInt(s,16)}),{r:o,s:u,yParity:c}=f(w,this,x).call(this,a);return g("Authorization signature",{authorizationSignature:a,r:o,s:u,yParity:c}),[{address:t,chainId:r,nonce:s,r:o,s:u,yParity:c}]}function P(e,t){return new s.Interface(i.abiERC20).encodeFunctionData("transfer",[e,t])}function x(e){return{r:e.slice(0,66),s:`0x${e.slice(66,130)}`,yParity:parseInt(e.slice(130,132),16)-27==0?"0x":"0x1"}}r.Delegation7702PublishHook=class{constructor({isAtomicBatchSupported:e,messenger:t}){var r,n;c(r=this,n=w),n.add(r),u(this,y,void 0),u(this,b,void 0),l(y,this,e),l(b,this,t)}getHook(){return f(w,this,k).bind(this)}}}}},{package:"$root$",file:"app/scripts/lib/transaction/hooks/delegation-7702-publish.ts"}],[201,{"../../../../shared/constants/app":5824,"../../../../shared/constants/gas":5831,"../../../../shared/constants/metametrics":5836,"../../../../shared/constants/transaction":5854,"../../../../shared/lib/confirmation.utils":5866,"../../../../shared/lib/transactions-controller-utils":5897,"../../../../shared/modules/Numeric":5901,"../../../../shared/modules/conversion.utils":5906,"../../../../shared/modules/gas.utils":5911,"../../../../shared/modules/metametrics":5914,"../../../../shared/modules/transaction.utils":5928,"../../../../ui/helpers/utils/metrics":6970,"../snap-keyring/metrics":180,"../util":206,"@metamask/transaction-controller":2981,"@metamask/utils":3026,"bignumber.js":4029,"ethereumjs-util":4403},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handleTransactionSubmitted=r.handleTransactionRejected=r.handleTransactionFailed=r.handleTransactionDropped=r.handleTransactionConfirmed=r.handleTransactionApproved=r.handleTransactionAdded=r.handlePostTransactionBalanceUpdate=r.createTransactionEventFragmentWithTxId=r.METRICS_STATUS_FAILED=void 0;var n=e("bignumber.js"),i=e("ethereumjs-util"),s=e("@metamask/transaction-controller"),a=e("@metamask/utils"),o=e("../../../../shared/constants/app"),u=e("../../../../shared/constants/gas"),c=e("../../../../shared/constants/metametrics"),d=e("../../../../shared/constants/transaction"),l=e("../../../../shared/lib/transactions-controller-utils"),f=e("../../../../shared/modules/conversion.utils"),p=e("../../../../shared/modules/metametrics"),h=e("../../../../shared/modules/transaction.utils"),m=e("../../../../ui/helpers/utils/metrics"),g=e("../snap-keyring/metrics"),y=e("../../../../shared/lib/confirmation.utils"),b=e("../../../../shared/modules/gas.utils"),w=e("../../../../shared/modules/Numeric"),k=e("../util");const v=r.METRICS_STATUS_FAILED="failed on-chain",T=[s.TransactionType.contractInteraction,s.TransactionType.tokenMethodApprove,s.TransactionType.tokenMethodIncreaseAllowance,s.TransactionType.tokenMethodSafeTransferFrom,s.TransactionType.tokenMethodSetApprovalForAll,s.TransactionType.tokenMethodTransfer,s.TransactionType.tokenMethodTransferFrom,s.TransactionType.swap,s.TransactionType.swapAndSend,s.TransactionType.swapApproval];r.handleTransactionAdded=async(e,t)=>{if(!t.transactionMeta)return;const{properties:r,sensitiveProperties:n}=await P({transactionEventPayload:t,transactionMetricsRequest:e});E({eventName:d.TransactionMetaMetricsEvent.added,transactionEventPayload:t,transactionMetricsRequest:e,payload:{properties:r,sensitiveProperties:n}})};r.handleTransactionApproved=async(e,t)=>{t.transactionMeta&&await _({eventName:d.TransactionMetaMetricsEvent.approved,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionFailed=async(e,t)=>{if(!t.transactionMeta)return;const r={};t.error&&(r.error=t.error),await _({eventName:d.TransactionMetaMetricsEvent.finalized,extraParams:r,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionConfirmed=async(e,t)=>{if(0===Object.keys(t).length)return;const r={},n={...t},{txReceipt:i}=n;r.gas_used=null==i?void 0:i.gasUsed,r.block_number=(null==i?void 0:i.blockNumber)&&(0,f.hexToDecimal)(i.blockNumber);const{submittedTime:s,blockTimestamp:a}=n;s&&(r.completion_time=function(e){return Math.round((Date.now()-e)/1e3).toString()}(s)),s&&a&&(r.completion_time_onchain=function(e,t){const r=2,n=Number((0,f.hexToDecimal)(t))-e/1e3;return(Math.round(n*10**r)/10**r).toString()}(s,a)),"0x0"===(null==i?void 0:i.status)&&(r.status=v),await _({eventName:d.TransactionMetaMetricsEvent.finalized,extraParams:r,transactionEventPayload:{actionId:n.actionId,transactionMeta:n},transactionMetricsRequest:e})};r.handleTransactionDropped=async(e,t)=>{if(!t.transactionMeta)return;await _({eventName:d.TransactionMetaMetricsEvent.finalized,extraParams:{dropped:!0},transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionRejected=async(e,t)=>{t.transactionMeta&&await _({eventName:d.TransactionMetaMetricsEvent.rejected,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionSubmitted=async(e,t)=>{if(!t.transactionMeta)return;const{properties:r,sensitiveProperties:n}=await P({transactionEventPayload:t,transactionMetricsRequest:e});E({eventName:d.TransactionMetaMetricsEvent.submitted,transactionEventPayload:t,transactionMetricsRequest:e,payload:{properties:r,sensitiveProperties:n}})};r.createTransactionEventFragmentWithTxId=async(e,{transactionId:t,actionId:r})=>{const n={...e.getTransaction(t),actionId:r},{properties:i,sensitiveProperties:s}=await P({transactionEventPayload:{transactionMeta:n},transactionMetricsRequest:e});E({eventName:d.TransactionMetaMetricsEvent.approved,transactionEventPayload:{actionId:n.actionId,transactionMeta:n},transactionMetricsRequest:e,payload:{properties:i,sensitiveProperties:s}})};function E({eventName:e,transactionEventPayload:{transactionMeta:t,actionId:r},transactionMetricsRequest:n,payload:i}){if(function(e,t,r){const n=A(t,r.id);return void 0!==e(n)}(n.getEventFragmentById,e,t)&&e!==d.TransactionMetaMetricsEvent.submitted)return;const s=A(e,t.id);switch(e){case d.TransactionMetaMetricsEvent.added:n.createEventFragment({category:c.MetaMetricsEventCategory.Transactions,initialEvent:d.TransactionMetaMetricsEvent.added,successEvent:d.TransactionMetaMetricsEvent.approved,failureEvent:d.TransactionMetaMetricsEvent.rejected,properties:i.properties,sensitiveProperties:i.sensitiveProperties,actionId:r,uniqueIdentifier:s,persist:!0});break;case d.TransactionMetaMetricsEvent.approved:case d.TransactionMetaMetricsEvent.rejected:n.createEventFragment({category:c.MetaMetricsEventCategory.Transactions,successEvent:d.TransactionMetaMetricsEvent.approved,failureEvent:d.TransactionMetaMetricsEvent.rejected,properties:i.properties,sensitiveProperties:i.sensitiveProperties,actionId:r,uniqueIdentifier:s,persist:!0});break;case d.TransactionMetaMetricsEvent.submitted:n.createEventFragment({category:c.MetaMetricsEventCategory.Transactions,initialEvent:d.TransactionMetaMetricsEvent.submitted,successEvent:d.TransactionMetaMetricsEvent.finalized,properties:i.properties,sensitiveProperties:i.sensitiveProperties,actionId:r,uniqueIdentifier:s,persist:!0});break;case d.TransactionMetaMetricsEvent.finalized:n.createEventFragment({category:c.MetaMetricsEventCategory.Transactions,successEvent:d.TransactionMetaMetricsEvent.finalized,properties:i.properties,sensitiveProperties:i.sensitiveProperties,actionId:r,uniqueIdentifier:s,persist:!0})}}async function _({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r,extraParams:n={}}){const{properties:i,sensitiveProperties:s}=await P({transactionEventPayload:t,transactionMetricsRequest:r,extraParams:n});E({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r,payload:{properties:i,sensitiveProperties:s}}),function({eventName:e,transactionEventPayload:{transactionMeta:t},transactionMetricsRequest:r,payload:n}){const i=A(e,t.id);switch(e){case d.TransactionMetaMetricsEvent.approved:case d.TransactionMetaMetricsEvent.rejected:case d.TransactionMetaMetricsEvent.finalized:r.updateEventFragment(i,{properties:n.properties,sensitiveProperties:n.sensitiveProperties})}}({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r,payload:{properties:i,sensitiveProperties:s}}),function({eventName:e,transactionMetricsRequest:t,transactionEventPayload:{transactionMeta:r}}){const n=A(e,r.id);switch(e){case d.TransactionMetaMetricsEvent.approved:case d.TransactionMetaMetricsEvent.finalized:t.finalizeEventFragment(n);break;case d.TransactionMetaMetricsEvent.rejected:t.finalizeEventFragment(n,{abandoned:!0})}}({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r})}function A(e,t){return`transaction-${e===d.TransactionMetaMetricsEvent.finalized||e===d.TransactionMetaMetricsEvent.submitted?"submitted":"added"}-${t}`}async function P({transactionEventPayload:{transactionMeta:e},transactionMetricsRequest:t,extraParams:r={}}){var v;const{type:E,time:_,status:A,chainId:P,origin:x,txParams:{gasPrice:B,gas:I,maxFeePerGas:S,maxPriorityFeePerGas:j,estimateSuggested:M,estimateUsed:O},defaultGasEstimates:C,originalType:R,replacedById:N,customTokenAmount:D,dappProposedTokenAmount:L,currentTokenBalance:U,originalApprovalAmount:H,finalApprovalAmount:$,securityProviderResponse:K,simulationFails:z,id:F,userFeeLevel:V}=e,W=x===o.ORIGIN_METAMASK?"user":"dapp",G="dappSuggested"===V?"dapp_proposed":V,{assetType:q,tokenStandard:Y}=await(0,h.determineTransactionAssetType)(e,t.provider,t.getTokenStandardAndDetails);let J;if(e.txParams.data){const r=await t.getMethodData(e.txParams.data);J=null==r?void 0:r.name}const X={};if((0,h.isEIP1559Transaction)(e)?(X.max_fee_per_gas=S,X.max_priority_fee_per_gas=j):(X.gas_price=B,X.default_estimate=c.MetaMetricsEventTransactionEstimateType.DefaultEstimate),C){var Z,Q;const{estimateType:r}=C;if(r){var ee,te;X.default_estimate=r===u.PriorityLevels.dAppSuggested?c.MetaMetricsEventTransactionEstimateType.DappProposed:r;let n=null===(ee=e.defaultGasEstimates)||void 0===ee?void 0:ee.maxFeePerGas,i=null===(te=e.defaultGasEstimates)||void 0===te?void 0:te.maxPriorityFeePerGas;if([u.GasRecommendations.low,u.GasRecommendations.medium,u.GasRecommendations.high].includes(r)){var re,ne;const{gasFeeEstimates:e}=await t.getEIP1559GasFeeEstimates();var ie,se;if(null!=e&&null!==(re=e[r])&&void 0!==re&&re.suggestedMaxFeePerGas)n=null===(ie=e[r])||void 0===ie?void 0:ie.suggestedMaxFeePerGas,X.default_max_fee_per_gas=n;if(null!=e&&null!==(ne=e[r])&&void 0!==ne&&ne.suggestedMaxPriorityFeePerGas)i=null===(se=e[r])||void 0===se?void 0:se.suggestedMaxPriorityFeePerGas,X.default_max_priority_fee_per_gas=i}}null!==(Z=e.defaultGasEstimates)&&void 0!==Z&&Z.gas&&(X.default_gas=e.defaultGasEstimates.gas),null!==(Q=e.defaultGasEstimates)&&void 0!==Q&&Q.gasPrice&&(X.default_gas_price=e.defaultGasEstimates.gasPrice)}M&&(X.estimate_suggested=M),O&&(X.estimate_used=O),null!=r&&r.gas_used&&(X.gas_used=r.gas_used);const ae=function(e){const t={};for(const r in e)(0,i.isHexString)(e[r])?t[r]=(0,f.hexWEIToDecGWEI)(e[r]):t[r]=e[r];return t}(X);let oe="0";e.txParams.maxFeePerGas&&(oe="2");const ue=E&&T.includes(E),ce="Approve";let de,le,fe,pe,he,me,ge=s.TransactionType.simpleSend;if(E===s.TransactionType.swapAndSend)ge=s.TransactionType.swapAndSend;else if(E===s.TransactionType.cancel)ge=s.TransactionType.cancel;else if(E===s.TransactionType.retry&&R)ge=R;else if(E===s.TransactionType.deployContract)ge=s.TransactionType.deployContract;else if(ue){var ye,be;ge=s.TransactionType.contractInteraction,le=J,he=null===(ye=e.txParams)||void 0===ye?void 0:ye.to,me=null===(be=e.txParams)||void 0===be||null===(be=be.data)||void 0===be?void 0:be.slice(0,10),le===ce&&Y===d.TokenStandard.ERC20&&("0"===L||"0"===D?de=d.TransactionApprovalAmountType.revoke:D&&D!==L?de=d.TransactionApprovalAmountType.custom:L&&(de=d.TransactionApprovalAmountType.dappProposed),fe=function(e,t,r){if(e===d.TransactionApprovalAmountType.custom&&t&&r)return`${new n.BigNumber(t,10).div(r,10).times(100).round(2)}`;return null}(de,H,$),pe=function(e,t,r){if((e===d.TransactionApprovalAmountType.custom||e===d.TransactionApprovalAmountType.dappProposed)&&t&&r)return`${new n.BigNumber(t,16).div(r,10).times(100).round(2)}`;return null}(de,L,U))}const we=t.getTransaction(N),ke={RETRY:s.TransactionType.retry,CANCEL:s.TransactionType.cancel,SAME_NONCE:"other"};let ve;null!=r&&r.dropped&&(ve=ke.SAME_NONCE,(null==we?void 0:we.type)===s.TransactionType.cancel?ve=ke.CANCEL:(null==we?void 0:we.type)===s.TransactionType.retry&&(ve=ke.RETRY));const Te=[];let Ee=null;1===(null==K?void 0:K.flagAsDangerous)?Te.push(c.MetaMetricsEventUiCustomization.FlaggedAsMalicious):2===(null==K?void 0:K.flagAsDangerous)&&Te.push(c.MetaMetricsEventUiCustomization.FlaggedAsSafetyUnknown);const _e=(0,m.getBlockaidMetricsProps)(e);(null==_e||null===(v=_e.ui_customizations)||void 0===v?void 0:v.length)>0&&Te.push(..._e.ui_customizations),z&&Te.push(c.MetaMetricsEventUiCustomization.GasEstimationFailed);(0,y.shouldUseRedesignForTransactions)({transactionMetadataType:e.type})&&(Te.push(c.MetaMetricsEventUiCustomization.RedesignedConfirmation),Ee=t.getIsConfirmationAdvancedDetailsOpen());const Ae=(0,p.getSmartTransactionMetricsProperties)(t,e),Pe=(0,m.getSwapAndSendMetricsProps)(e),xe={hd_entropy_index:t.getHDEntropyIndex()};let Be={chain_id:P,referrer:x,source:W,status:A,network:`${parseInt(P,16)}`,eip_1559_version:oe,gas_edit_type:"none",gas_edit_attempted:"none",gas_estimation_failed:Boolean(z),account_type:await t.getAccountType(t.getSelectedAddress()),device_model:await t.getDeviceModel(t.getSelectedAddress()),asset_type:q,token_standard:Y,transaction_type:ge,transaction_speed_up:E===s.TransactionType.retry,transaction_internal_id:F,gas_fee_selected:G,..._e,ui_customizations:Te.length>0?Te:null,transaction_advanced_view:Ee,transaction_contract_method:le?[le]:[],...Ae,...Pe,...xe};const Ie=await(0,g.getSnapAndHardwareInfoForMetrics)(t.getAccountType,t.getDeviceModel,t.getHardwareTypeForMetric,t.snapAndHardwareMessenger);Object.assign(Be,Ie),le===ce&&(Be={...Be,transaction_approval_amount_type:de});let Se={transaction_envelope_type:(0,h.isEIP1559Transaction)(e)?l.TRANSACTION_ENVELOPE_TYPE_NAMES.FEE_MARKET:l.TRANSACTION_ENVELOPE_TYPE_NAMES.LEGACY,first_seen:_,gas_limit:I,transaction_replaced:ve,transaction_contract_address:he?[he]:[],transaction_contract_method_4byte:me,...r,...ae};if(le===ce&&(Se={...Se,transaction_approval_amount_vs_balance_ratio:pe,transaction_approval_amount_vs_proposed_ratio:fe}),await async function(e,t,r,n){const i=origin&&origin!==o.ORIGIN_METAMASK,{delegationAddress:a,nestedTransactions:u,txParams:c}=e,{authorizationList:l}=c,f=Boolean(null==u?void 0:u.length),p=Boolean(null==l?void 0:l.length);i&&(r.api_method=f?o.MESSAGE_TYPE.WALLET_SEND_CALLS:o.MESSAGE_TYPE.ETH_SEND_TRANSACTION);f&&(r.batch_transaction_count=null==u?void 0:u.length,r.batch_transaction_method="eip7702",r.transaction_contract_method=await async function(e,t){const r=e.filter((e=>T.includes(e.type)&&e.data)).map((e=>e.data)),n=await Promise.all(r.map((e=>t(e))));return n.map((e=>null==e?void 0:e.name)).filter((e=>null==e?void 0:e.length))}(u??[],t),n.transaction_contract_address=null==u?void 0:u.filter((e=>{var t;return T.includes(e.type)&&(null===(t=e.to)||void 0===t?void 0:t.length)})).map((e=>e.to)));if(e.status===s.TransactionStatus.rejected){const{error:t}=e;r.eip7702_upgrade_rejection=p&&t.code===d.EIP5792ErrorCode.RejectedUpgrade}r.eip7702_upgrade_transaction=p,n.account_eip7702_upgraded=a}(e,t.getMethodData,Be,Se),function(e,t,r,n){var i;const{batchId:s,batchTransactions:o,gasFeeTokens:u,nestedTransactions:c,selectedGasFeeToken:d}=e;t.gas_payment_tokens_available=null==u?void 0:u.map((e=>e.symbol)),t.gas_paid_with=null==u||null===(i=u.find((e=>e.tokenAddress.toLowerCase()===(null==d?void 0:d.toLowerCase()))))||void 0===i?void 0:i.symbol,t.gas_insufficient_native_asset=function(e,t){const{chainId:r,txParams:n}=e,{from:i,gas:s,gasPrice:o,maxFeePerGas:u,value:c}=n,d=t(i,r),l=(0,b.getMaximumGasTotalInHexWei)({gasLimit:s,gasPrice:o,maxFeePerGas:u}),p=(0,a.add0x)((0,f.addHexes)(l,c??"0x0"));return new w.Numeric(p,16).greaterThan(new w.Numeric(d,16))}(e,n),!s||null!=o&&o.length||null!=c&&c.length||(t.transaction_type="gas_payment")}(e,Be,0,t.getAccountBalance),A===s.TransactionStatus.submitted||A===s.TransactionStatus.confirmed){const r=t.getNetworkRpcUrl(e.chainId),n=(0,k.extractRpcDomain)(r);Be.rpc_domain=n}return{properties:Be,sensitiveProperties:Se}}r.handlePostTransactionBalanceUpdate=async({getParticipateInMetrics:e,trackEvent:t,getHDEntropyIndex:r},{transactionMeta:i,approvalTransactionMeta:s})=>{var a;if(e()&&i.swapMetaData)if("0x0"===(null===(a=i.txReceipt)||void 0===a?void 0:a.status))t({event:c.MetaMetricsEventName.SwapFailed,category:c.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...i.swapMetaData},properties:{hd_entropy_index:r()}});else{var o;const e=(0,l.getSwapsTokensReceivedFromTxMeta)(i.destinationTokenSymbol,i,i.destinationTokenAddress,i.txParams.from,i.destinationTokenDecimals,s,i.chainId),a=e?`${new n.BigNumber(e,10).div(i.swapMetaData.token_to_amount,10).times(100).round(2)}%`:null,u=null!==(o=i.txReceipt)&&void 0!==o&&o.gasUsed&&i.swapMetaData.estimated_gas?`${new n.BigNumber(i.txReceipt.gasUsed,16).div(i.swapMetaData.estimated_gas,10).times(100).round(2)}%`:null,d=function(e,t){var r,i;let s="0x0";null!=t&&t.txReceipt&&(s=(0,l.calcGasTotal)(t.txReceipt.gasUsed,t.txReceipt.effectiveGasPrice));const a=(0,l.calcGasTotal)(null===(r=e.txReceipt)||void 0===r?void 0:r.gasUsed,null===(i=e.txReceipt)||void 0===i?void 0:i.effectiveGasPrice),o=new n.BigNumber(a,16).plus(s,16).toString(16);return{approvalGasCostInEth:Number((0,f.hexWEIToDecETH)(s)),tradeGasCostInEth:Number((0,f.hexWEIToDecETH)(a)),tradeAndApprovalGasCostInEth:Number((0,f.hexWEIToDecETH)(o))}}(i,s);t({event:c.MetaMetricsEventName.SwapCompleted,category:c.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...i.swapMetaData,token_to_amount_received:e,quote_vs_executionRatio:a,estimated_vs_used_gasRatio:u,approval_gas_cost_in_eth:d.approvalGasCostInEth,trade_gas_cost_in_eth:d.tradeGasCostInEth,trade_and_approval_gas_cost_in_eth:d.tradeAndApprovalGasCostInEth,token_to_amount:i.swapMetaData.token_to_amount.toString(10)},properties:{hd_entropy_index:r()}})}}}}},{package:"$root$",file:"app/scripts/lib/transaction/metrics.ts"}],[202,{"../../../../shared/constants/app":5824,"../../../../shared/constants/smartTransactions":5848,"../../../../shared/modules/conversion.utils":5906,"../../../../shared/modules/transaction.utils":5928,"@metamask/smart-transactions-controller/dist/types":2693,"@metamask/transaction-controller":2981,loglevel:4942},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.submitSmartTransactionHook=r.submitBatchSmartTransactionHook=void 0;var n,i=e("@metamask/smart-transactions-controller/dist/types"),s=e("@metamask/transaction-controller"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n},o=e("../../../../shared/modules/conversion.utils"),u=e("../../../../shared/constants/smartTransactions"),c=e("../../../../shared/modules/transaction.utils"),d=e("../../../../shared/constants/app");function l(e,t,r){f(e,t),t.set(e,r)}function f(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(e,t){return e.get(m(e,t))}function h(e,t,r){return e.set(m(e,t),r),r}function m(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var g=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,k=new WeakMap,v=new WeakMap,T=new WeakMap,E=new WeakMap,_=new WeakMap,A=new WeakMap,P=new WeakMap,x=new WeakMap,B=new WeakMap,I=new WeakMap,S=new WeakSet;class j{constructor(e){!function(e,t){f(e,t),t.add(e)}(this,S),l(this,g,void 0),l(this,y,void 0),l(this,b,void 0),l(this,w,void 0),l(this,k,void 0),l(this,v,void 0),l(this,T,void 0),l(this,E,void 0),l(this,_,void 0),l(this,A,void 0),l(this,P,void 0),l(this,x,void 0),l(this,B,void 0),l(this,I,void 0);const{transactionMeta:t,signedTransactionInHex:r,smartTransactionsController:n,transactionController:i,isSmartTransaction:a,controllerMessenger:o,featureFlags:u,transactions:c}=e;h(y,this,""),h(g,this,!1),h(A,this,t),h(P,this,r),h(E,this,n),h(_,this,i),h(T,this,a),h(w,this,o),h(k,this,u),h(v,this,t.origin!==d.ORIGIN_METAMASK),h(b,this,t.chainId),h(B,this,t.txParams),h(x,this,c),h(I,this,Boolean(t.type!==s.TransactionType.bridge||p(x,this)&&p(x,this).length>0))}async submit(){const e=!!p(A,this).type&&[s.TransactionType.swapAndSend,s.TransactionType.swapApproval,s.TransactionType.bridgeApproval].includes(p(A,this).type),t={transactionHash:undefined};if(!p(T,this)||e||(0,c.isLegacyTransaction)(p(A,this)))return t;let r;p(I,this)&&await m(S,this,C).call(this);try{r=await p(E,this).getFees({...p(B,this),chainId:p(b,this)},undefined,{networkClientId:p(A,this).networkClientId})}catch(e){return a.default.error("Error in smart transaction publish hook, falling back to regular transaction submission",e),m(S,this,N).call(this),t}try{var n;const e=await m(S,this,$).call(this,{getFeesResponse:r}),t=null==e?void 0:e.uuid;if(!t)throw new Error("No smart transaction UUID");await m(S,this,R).call(this,t);let i;if(i=(null===(n=p(k,this))||void 0===n||null===(n=n.smartTransactions)||void 0===n?void 0:n.extensionReturnTxHashAsap)&&null!=e&&e.txHash?e.txHash:await m(S,this,H).call(this,{uuid:t}),null===i)throw new Error("Transaction does not have a transaction hash, there was a problem");return{transactionHash:i}}catch(e){throw a.default.error("Error in smart transaction publish hook",e),m(S,this,N).call(this),e}}async submitBatch(){if(!p(T,this))throw new Error("submitBatch: Smart Transaction is required for batch submissions");p(I,this)&&await m(S,this,C).call(this);try{const e=await m(S,this,$).call(this),t=null==e?void 0:e.uuid;if(!t)throw new Error("submitBatch: No smart transaction UUID");await m(S,this,R).call(this,t);if(null===await m(S,this,H).call(this,{uuid:t}))throw new Error("submitBatch: Transaction does not have a transaction hash, there was a problem");let r;return r=null!=e&&e.txHashes?{results:e.txHashes.map((e=>({transactionHash:e})))}:{results:[]},r}catch(e){throw a.default.error("submitBatch: Error in smart transaction publish batch hook",e),m(S,this,N).call(this),e}}}async function M(e){try{await p(w,this).call("ApprovalController:endFlow",{id:e})}catch(e){}}async function O(e){try{await m(S,this,M).call(this,e),await p(w,this).call("ApprovalController:acceptRequest",e),F._=""}catch(e){a.default.error("Error ending existing approval flow",e)}}async function C(){F._&&await m(S,this,O).call(this,F._);const{id:e}=await p(w,this).call("ApprovalController:startFlow");h(y,this,e),F._=e}async function R(e){p(I,this)&&(m(S,this,D).call(this,{uuid:e}),m(S,this,U).call(this,{uuid:e}))}function N(){p(I,this)&&!p(g,this)&&(h(g,this,!0),m(S,this,M).call(this,p(y,this)),F._===p(y,this)&&(F._=""))}function D({uuid:e}){const t=()=>{m(S,this,N).call(this)};p(w,this).call("ApprovalController:addRequest",{id:p(y,this),origin:origin,type:d.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage,requestState:{smartTransaction:{status:i.SmartTransactionStatuses.PENDING,creationTime:Date.now(),uuid:e},isDapp:p(v,this),txId:p(A,this).id}},!0).then(t,t)}async function L({smartTransaction:e}){return await p(w,this).call("ApprovalController:updateRequestState",{id:p(y,this),requestState:{smartTransaction:e,isDapp:p(v,this),txId:p(A,this).id}})}async function U({uuid:e}){p(w,this).subscribe("SmartTransactionsController:smartTransaction",(async t=>{if(t.uuid===e){const{status:e}=t;if(!e||e===i.SmartTransactionStatuses.PENDING)return;p(g,this)||await m(S,this,L).call(this,{smartTransaction:t})}}))}function H({uuid:e}){return new Promise((t=>{p(w,this).subscribe("SmartTransactionsController:smartTransaction",(async r=>{if(r.uuid===e){const{status:e,statusMetadata:n}=r;if(!e||e===i.SmartTransactionStatuses.PENDING)return;a.default.debug("Smart Transaction: ",r),null!=n&&n.minedHash?(a.default.debug("Smart Transaction - Received tx hash: ",null==n?void 0:n.minedHash),t(n.minedHash)):t(null)}}))}))}async function $({getFeesResponse:e}={}){let t=[];if(p(x,this)&&Array.isArray(p(x,this))&&p(x,this).length>0)t=p(x,this).filter((e=>null==e?void 0:e.signedTx)).map((e=>e.signedTx));else if(p(P,this))t=[p(P,this)];else if(e){var r;t=await m(S,this,z).call(this,(null===(r=e.tradeTxFees)||void 0===r?void 0:r.fees)??[],!1)}return await p(E,this).submitSignedTransactions({signedTransactions:t,signedCanceledTransactions:[],txParams:p(B,this),transactionMeta:p(A,this),networkClientId:p(A,this).networkClientId})}function K(e,t){if(!p(B,this))throw new Error("Transaction params are required");const r={...p(B,this),maxFeePerGas:`0x${(0,o.decimalToHex)(e.maxFeePerGas)}`,maxPriorityFeePerGas:`0x${(0,o.decimalToHex)(e.maxPriorityFeePerGas)}`,gas:t?`0x${(0,o.decimalToHex)(u.CANCEL_GAS_LIMIT_DEC)}`:p(B,this).gas};return t&&(r.to=r.from,r.data="0x"),r}async function z(e,t){if(!p(B,this)||!p(b,this))throw new Error("Transaction params and chainId are required");const r=e.map((e=>m(S,this,K).call(this,e,t))).map((e=>({...e,chainId:e.chainId||p(b,this)})));return await p(_,this).approveTransactionsWithSameNonce(r,{hasNonce:!0})}var F={_:""};r.submitSmartTransactionHook=e=>new j(e).submit();r.submitBatchSmartTransactionHook=e=>new j(e).submitBatch()}}},{package:"$root$",file:"app/scripts/lib/transaction/smart-transactions.ts"}],[203,{"../../../../shared/modules/conversion.utils":5906,"../../../../shared/modules/fetch-with-timeout":5910,"../../../../shared/modules/rpc.utils":5919,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RelayStatus=r.RELAY_RPC_METHOD=void 0,r.isRelaySupported=async function(e){return Boolean(await p(e))},r.submitRelayTransaction=async function(e){const{chainId:t}=e,r=await p(t);if(!r)throw new Error(`Chain not supported by transaction relay - ${t}`);u("Request",r,e);const n=await(0,s.jsonRpcRequest)(r,f,[e]);return u("Response",n),n},r.waitForRelayResult=async function(e){const{chainId:t,interval:r,uuid:n}=e,i=await p(t);if(!i)throw new Error(`Chain not supported by transaction relay - ${t}`);const s=`${i}smart-transactions/${n}`;return new Promise(((e,t)=>{const n=setInterval((async()=>{try{const t=await async function(e){u("Polling request",e);const t=await(0,a.default)()(e);if(u("Polling response",t),!t.ok){const e=await t.text();throw new Error(`Failed to fetch relay transaction status: ${t.status} - ${e}`)}const r=await t.json(),n=null==r?void 0:r.transactions[0],{hash:i,status:s}=n||{};return{status:s,transactionHash:i}}(s);t.status!==c.Pending&&(clearInterval(n),e(t))}catch(e){clearInterval(n),t(e)}}),r)}))};var n,i=e("@metamask/utils"),s=e("../../../../shared/modules/rpc.utils"),a=(n=e("../../../../shared/modules/fetch-with-timeout"))&&n.__esModule?n:{default:n},o=e("../../../../shared/modules/conversion.utils");const u=(0,i.createProjectLogger)("transaction-relay");let c=r.RelayStatus=function(e){return e.Pending="PENDING",e.Success="VALIDATED",e}({});const d="https://tx-sentinel-{0}.api.cx.metamask.io/",l="networks",f=r.RELAY_RPC_METHOD="eth_sendRelayTransaction";async function p(e){const t=(await async function(){const e=`${h("ethereum-mainnet")}${l}`;return(await(0,a.default)()(e)).json()}())[(0,o.hexToDecimal)(e)];return null!=t&&t.relayTransactions?h(t.network):(u("Chain is not supported",e),undefined)}function h(e){return d.replace("{0}",e)}}}},{package:"$root$",file:"app/scripts/lib/transaction/transaction-relay.ts"}],[204,{"../../../../shared/constants/security-provider":5846,"../../../../shared/lib/trace":5895,"../ppom/ppom-util":151,"@metamask/keyring-api":2046,"ethereumjs-util":4403},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.addDappTransaction=async function(e){const{dappRequest:t}=e,{id:r,method:n,origin:i}=t,{securityAlertResponse:s,traceContext:a}=t,c={actionId:r,method:n,origin:i,requireApproval:!0,securityAlertResponse:s};(0,o.endTrace)({name:o.TraceName.Middleware,id:r});const{waitForHash:d}=await u({...e,transactionOptions:{...c,traceContext:a}}),l=await d();return(0,o.endTrace)({name:o.TraceName.Transaction,id:r}),l},r.addTransaction=async function(e){await async function(e){const{chainId:t,ppomController:r,securityAlertsEnabled:n,transactionOptions:i,transactionParams:o,updateSecurityAlertResponse:u,internalAccounts:c}=e,{type:d}=i,l=a.SECURITY_PROVIDER_EXCLUDED_TRANSACTION_TYPES.includes(d);if(!n||l)return;if(c.some((({address:e})=>{var t;return e.toLowerCase()===(null===(t=o.to)||void 0===t?void 0:t.toLowerCase())})))return;try{const{from:n,to:c,value:d,data:l}=o,{actionId:f,origin:p}=i,h={method:"eth_sendTransaction",id:f??"",origin:p??"",params:[{from:n,to:c??"",value:d??"",data:l??""}],jsonrpc:"2.0"},m=(0,s.generateSecurityAlertId)();(0,s.validateRequestWithPPOM)({ppomController:r,request:h,securityAlertId:m,chainId:t,updateSecurityAlertResponse:u});const g={...a.LOADING_SECURITY_ALERT_RESPONSE,securityAlertId:m};e.transactionOptions.securityAlertResponse=g}catch(e){(0,s.handlePPOMError)(e,"Error validating JSON RPC using PPOM: ")}}(e);const{transactionMeta:t,waitForHash:r}=await u(e);if(!e.waitForSubmit)return r().catch((()=>{})),t;const n=await r();return function(e,t){return t.state.transactions.find((t=>t.hash===e))}(n,e.transactionController)},r.getTransactionById=c;var n=e("@metamask/keyring-api"),i=e("ethereumjs-util"),s=e("../ppom/ppom-util"),a=e("../../../../shared/constants/security-provider"),o=e("../../../../shared/lib/trace");async function u(e){const{selectedAccount:t}=e;return t.type===n.EthAccountType.Erc4337?async function(e){var t;const{networkClientId:r,transactionController:n,transactionOptions:s,transactionParams:a,userOperationController:o}=e,{maxFeePerGas:u,maxPriorityFeePerGas:d}=a,{origin:l,requireApproval:f,type:p}=s,h={...a,maxFeePerGas:(0,i.addHexPrefix)(u),maxPriorityFeePerGas:(0,i.addHexPrefix)(d)},m=null==s||null===(t=s.swaps)||void 0===t?void 0:t.meta;null!=m&&m.type&&delete m.type;const g={networkClientId:r,origin:l,requireApproval:f,swaps:m,type:p},y=await o.addUserOperationFromTransaction(h,g);o.startPollingByNetworkClientId(r);return{transactionMeta:c(y.id,n),waitForHash:y.transactionHash}}(e):async function(e){const{transactionController:t,transactionOptions:r,transactionParams:n,networkClientId:i}=e,{result:s,transactionMeta:a}=await t.addTransaction(n,{...r,networkClientId:i});return{transactionMeta:a,waitForHash:()=>s}}(e)}function c(e,t){return t.state.transactions.find((t=>t.id===e))}}}},{package:"$root$",file:"app/scripts/lib/transaction/util.ts"}],[205,{"../../../../shared/constants/app":5824,"../../../../shared/constants/verification":5856,"../../../../shared/modules/selectors/networks":5923,"@ethersproject/hash":546,"@ethersproject/wallet":613,"@metamask/rpc-errors":2622,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createTxVerificationMiddleware=function(e,t=o.TRUSTED_SIGNERS){return function(r,d,l,f){if(r.method!==u.MESSAGE_TYPE.ETH_SEND_TRANSACTION||!Array.isArray(r.params)||!function(e){return(0,a.isObject)(e[0])&&"string"==typeof e[0].data&&"string"==typeof e[0].from&&"string"==typeof e[0].to&&"string"==typeof e[0].value&&(!(0,a.hasProperty)(e[0],"chainId")||"string"==typeof e[0].chainId&&e[0].chainId.startsWith("0x"))}(r.params))return l();const p=r.params[0],h="string"==typeof p.chainId?p.chainId.toLowerCase():(0,c.getCurrentChainId)({metamask:e.state}),m=(0,o.getExperience)(p.to.toLowerCase(),h);if(!m||!o.EXPERIENCES_TO_VERIFY.includes(m))return l();const g=`0x${p.data.slice(-o.TX_SIG_LEN)}`,y=(0,i.verifyMessage)(function(e){const t={to:(0,n.hashMessage)(e.to.toLowerCase()),from:(0,n.hashMessage)(e.from.toLowerCase()),data:(0,n.hashMessage)(e.data.toLowerCase().slice(0,e.data.length-o.TX_SIG_LEN)),value:(0,n.hashMessage)(e.value.toLowerCase())};return(0,n.hashMessage)(JSON.stringify(t))}(p),g);return y!==t[m]?f(s.rpcErrors.invalidParams("Invalid transaction signature.")):l()}};var n=e("@ethersproject/hash"),i=e("@ethersproject/wallet"),s=e("@metamask/rpc-errors"),a=e("@metamask/utils"),o=e("../../../../shared/constants/verification"),u=e("../../../../shared/constants/app"),c=e("../../../../shared/modules/selectors/networks")}}},{package:"$root$",file:"app/scripts/lib/tx-verification/tx-verification-middleware.ts"}]],[],{});