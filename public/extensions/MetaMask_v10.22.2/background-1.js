LavaPack.loadBundle([[1492,{"./types":1496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1493,{"./constants":1492,"./siwe":1495,"./types":1496,"./util":1497},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r),i(e("./siwe"),r)}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1494,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/logger.js"}],[1495,{"./logger":1494,"@metamask/utils":1982,"@spruceid/siwe-parser":2189,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),a=e("./logger"),s=(0,a.createModuleLogger)(a.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:(0,n.remove0x)(r),a=t.from(i,"hex");return 32===a.length?e:a.toString("utf8")}catch(t){return s(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:i}=e;if(!n||!(null===(t=null==i?void 0:i.parsedMessage)||void 0===t?void 0:t.domain))return!1;const a=new URL(n),s=(0,r.parseDomainParts)(i.parsedMessage.domain,a.protocol);return 0===s.hostname.localeCompare(a.hostname,undefined,{sensitivity:"accent"})&&(""!==s.port&&s.port!==a.port?""===a.port&&s.port===c[a.protocol]:""===s.username||s.username===a.username)}catch(e){return s(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new i.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1496,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1497,{"./constants":1492,"@ethereumjs/util":400,"@metamask/ethjs-unit":1226,"@metamask/utils":1982,"bn.js":2586,buffer:2634,"eth-ens-namehash":2833,"fast-deep-equal":2964},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const a=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=i(e("bn.js")),l=i(e("eth-ens-namehash")),d=i(e("fast-deep-equal")),u=e("./constants"),h=new Error("timeout");function f(e){return e?new c.default((0,o.remove0x)(e),16):new c.default(0)}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield m(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=u.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.default(t),i=new c.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,s.toWei)(r,"gwei");if(n.length<=9)return(0,s.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let a=(0,s.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(a=a.add(new c.default(1))),a},r.weiHexToGweiDec=function(e){const t=new c.default((0,o.remove0x)(e),16);return(0,s.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new c.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.default.isBN(e)?e.toString(16):new c.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,a.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,a.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=m,r.handleFetch=p,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield p(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const a=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,a):e.sendAsync({method:t,params:r},a)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,d.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[15,{"../../../shared/constants/alarms":4118,"../../../shared/constants/app":4120,"../../../shared/constants/metametrics":4130,"../../../shared/constants/time":4141,"../../../shared/constants/transaction":4143,"../../../shared/modules/mv3.utils":4167,"../lib/util":92,"@metamask/name-controller":1370,"@metamask/obs-store":1453,buffer:2634,"ethereumjs-util":2896,lodash:3477,uuid:4067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.overrideAnonymousEventNames=r.default=void 0;var n=e("lodash"),i=e("@metamask/obs-store"),a=e("ethereumjs-util"),s=e("uuid"),o=e("@metamask/name-controller"),c=e("../../../shared/constants/app"),l=e("../../../shared/constants/metametrics"),d=e("../../../shared/constants/time"),u=e("../../../shared/modules/mv3.utils"),h=e("../../../shared/constants/alarms"),f=e("../lib/util"),m=e("../../../shared/constants/transaction");function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const g=r.overrideAnonymousEventNames={[m.TransactionMetaMetricsEvent.added]:m.AnonymousTransactionMetaMetricsEvent.added,[m.TransactionMetaMetricsEvent.approved]:m.AnonymousTransactionMetaMetricsEvent.approved,[m.TransactionMetaMetricsEvent.finalized]:m.AnonymousTransactionMetaMetricsEvent.finalized,[m.TransactionMetaMetricsEvent.rejected]:m.AnonymousTransactionMetaMetricsEvent.rejected,[m.TransactionMetaMetricsEvent.submitted]:m.AnonymousTransactionMetaMetricsEvent.submitted},v=e=>{setTimeout((()=>{throw e}))},y=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,f.generateRandomId)()},b={'You must pass either an "anonymousId" or a "userId".':!0};r.default=class{constructor({segment:e,preferencesStore:t,onNetworkDidChange:r,getCurrentChainId:a,version:s,environment:o,initState:c,extension:l,captureException:m=v}){p(this,"_getAllNFTsFlattened",(0,n.memoize)(((e={})=>Object.values(e).reduce(((e,t)=>e.concat(...Object.values(t))),[])))),p(this,"_isValidTraitArray",(e=>Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"boolean"==typeof e))||e.every((e=>"number"==typeof e))))),p(this,"_isValidTraitDate",(e=>"[object Date]"===Object.prototype.toString.call(e))),this._captureException=e=>{b[e.message]||m(e)};const g=t.getState();this.chainId=a(),this.locale=g.currentLocale.replace("_","-"),this.version="production"===o?s:`${s}-${o}`,this.extension=l,this.environment=o;const y=(0,n.omitBy)(null==c?void 0:c.fragments,"persist"),_=(null==c?void 0:c.segmentApiCalls)||{};this.store=new i.ObservableStore({participateInMetaMetrics:null,metaMetricsId:null,eventsBeforeMetricsOptIn:[],traits:{},previousUserTraits:{},...c,fragments:{...null==c?void 0:c.fragments},segmentApiCalls:{..._}}),t.subscribe((({currentLocale:e})=>{this.locale=e.replace("_","-")})),r((()=>{this.chainId=a()})),this.segment=e,Object.values(y).forEach((e=>{this.finalizeEventFragment(e.id,{abandoned:!0})})),u.isManifestV3&&Object.values(_).forEach((({eventType:e,payload:t})=>{this._submitSegmentAPICall(e,t)})),u.isManifestV3?(this.extension.alarms.getAll().then((e=>{(0,f.checkAlarmExists)(e,h.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||this.extension.alarms.create(h.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})})),this.extension.alarms.onAlarm.addListener((e=>{e.name===h.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()}))):setInterval((()=>{this.finalizeAbandonedFragments()}),30*d.SECOND)}finalizeAbandonedFragments(){Object.values(this.store.getState().fragments).forEach((e=>{e.timeout&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.finalizeEventFragment(e.id,{abandoned:!0})}))}generateMetaMetricsId(){return(0,a.bufferToHex)((0,a.keccak)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent||!e.category)throw new Error(`Must specify success event and category. Success event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.store.getState(),r=e.uniqueIdentifier??(0,s.v4)(),n={id:r,...e,lastUpdated:Date.now()};return this.store.updateState({fragments:{...t,[r]:n}}),e.initialEvent&&this.trackEvent({event:n.initialEvent,category:n.category,properties:n.properties,sensitiveProperties:n.sensitiveProperties,page:n.page,referrer:n.referrer,revenue:n.revenue,value:n.value,currency:n.currency,environmentType:n.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),n}getEventFragmentById(e){const{fragments:t}=this.store.getState();return t[e]}updateEventFragment(e,t){const{fragments:r}=this.store.getState();if(!r[e])throw new Error(`Event fragment with id ${e} does not exist.`);this.store.updateState({fragments:{...r,[e]:(0,n.merge)(r[e],{...t,lastUpdated:Date.now()})}})}finalizeEventFragment(e,{abandoned:t=!1,page:r,referrer:n}={}){const i=this.store.getState().fragments[e];if(!i)throw new Error(`Funnel with id ${e} does not exist.`);const a=t?i.failureEvent:i.successEvent;this.trackEvent({event:a,category:i.category,properties:i.properties,sensitiveProperties:i.sensitiveProperties,page:r??i.page,referrer:i.referrer??n,revenue:i.revenue,value:i.value,currency:i.currency,environmentType:i.environmentType,actionId:i.actionId,uniqueIdentifier:i.uniqueIdentifier?`${i.uniqueIdentifier}-${t?"failure":"success"}`:undefined});const{fragments:s}=this.store.getState();delete s[e],this.store.updateState({fragments:s})}identify(e){const{metaMetricsId:t,participateInMetaMetrics:r}=this.state;if(!r||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const n=this._buildValidTraits(e);this._identify(n)}updateExtensionUninstallUrl(e,r){const n={};e&&(n.mmi=t.from(r).toString("base64"),n.env=this.environment,n.av=this.version);const i=new URLSearchParams(n);this.extension&&this.extension.runtime&&this.extension.runtime.setUninstallURL(`https://metamask.io/uninstalled?${i}`)}async setParticipateInMetaMetrics(e){let{metaMetricsId:t}=this.state;var r;if(e&&!t)await(null===(r=globalThis.sentry)||void 0===r?void 0:r.startSession()),t=this.generateMetaMetricsId();else if(!1===e){var n;await(null===(n=globalThis.sentry)||void 0===n?void 0:n.endSession())}return this.store.updateState({participateInMetaMetrics:e,metaMetricsId:t}),e&&(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn()),this.updateExtensionUninstallUrl(e,t),t}get state(){return this.store.getState()}trackPage({name:e,params:t,environmentType:r,page:n,referrer:i,actionId:a},s){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==s||!s.isOptInPath))return;const{metaMetricsId:o}=this.state,c=o?"userId":"anonymousId",d=o??l.METAMETRICS_ANONYMOUS_ID;this._submitSegmentAPICall("page",{messageId:y({actionId:a}),[c]:d,name:e,properties:{params:t,locale:this.locale,chain_id:this.chainId,environment_type:r},context:this._buildContext(i,n)})}catch(e){this._captureException(e)}}trackEvent(e,t){this.validatePayload(e),this.submitEvent(e,t).catch((e=>this._captureException(e)))}async submitEvent(e,t){if(this.validatePayload(e),!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const r=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const i=g[`${e.event}`],a={...e,event:i??e.event},s=(0,n.merge)(a.sensitiveProperties,a.properties);r.push(this._track(this._buildEventPayload({...a,properties:s,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}r.push(this._track(this._buildEventPayload(e),t)),await Promise.all(r)}validatePayload(e){if(!e.event||!e.category)throw new Error(`Must specify event and category. Event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.store.getState();e.forEach((e=>{this.trackEvent(e)}))}clearEventsAfterMetricsOptIn(){this.store.updateState({eventsBeforeMetricsOptIn:[]})}addEventBeforeMetricsOptIn(e){const t=this.store.getState().eventsBeforeMetricsOptIn;this.store.updateState({eventsBeforeMetricsOptIn:[...t,e]})}updateTraits(e){const{traits:t}=this.store.getState();this.store.updateState({traits:{...t,...e}})}_buildContext(e,t=l.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e}}_buildEventPayload(e){const{event:t,properties:r,revenue:i,value:a,currency:s,category:o,page:l,referrer:d,environmentType:u=c.ENVIRONMENT_TYPE_BACKGROUND}=e;return{event:t,messageId:y(e),properties:{...(0,n.omit)(r,["revenue","locale","currency","value"]),revenue:i,value:a,currency:s,category:o,locale:this.locale,chain_id:(null==r?void 0:r.chain_id)??this.chainId,environment_type:u},context:this._buildContext(d,l)}}_buildUserTraitsObject(e){const{traits:t,previousUserTraits:r}=this.store.getState(),i={[l.MetaMetricsUserTrait.AddressBookEntries]:(0,n.sum)(Object.values(e.addressBook).map(n.size)),[l.MetaMetricsUserTrait.InstallDateExt]:t[l.MetaMetricsUserTrait.InstallDateExt]||"",[l.MetaMetricsUserTrait.LedgerConnectionType]:e.ledgerTransportType,[l.MetaMetricsUserTrait.NetworksAdded]:Object.values(e.networkConfigurations).map((e=>e.chainId)),[l.MetaMetricsUserTrait.NetworksWithoutTicker]:Object.values(e.networkConfigurations).filter((({ticker:e})=>!e)).map((({chainId:e})=>e)),[l.MetaMetricsUserTrait.NftAutodetectionEnabled]:e.useNftDetection,[l.MetaMetricsUserTrait.NumberOfAccounts]:Object.values(e.internalAccounts.accounts).length,[l.MetaMetricsUserTrait.NumberOfNftCollections]:this._getAllUniqueNFTAddressesLength(e.allNfts),[l.MetaMetricsUserTrait.NumberOfNfts]:this._getAllNFTsFlattened(e.allNfts).length,[l.MetaMetricsUserTrait.NumberOfTokens]:this._getNumberOfTokens(e),[l.MetaMetricsUserTrait.OpenseaApiEnabled]:e.openSeaEnabled,[l.MetaMetricsUserTrait.ThreeBoxEnabled]:!1,[l.MetaMetricsUserTrait.Theme]:e.theme||"default",[l.MetaMetricsUserTrait.TokenDetectionEnabled]:e.useTokenDetection,[l.MetaMetricsUserTrait.UseNativeCurrencyAsPrimaryCurrency]:e.useNativeCurrencyAsPrimaryCurrency,[l.MetaMetricsUserTrait.SecurityProviders]:e.securityAlertsEnabled?["blockaid"]:[],[l.MetaMetricsUserTrait.PetnameAddressCount]:this._getPetnameAddressCount(e)};if(!r)return this.store.updateState({previousUserTraits:i}),i;if(r&&!(0,n.isEqual)(r,i)){const e=(0,n.pickBy)(i,((e,t)=>!(0,n.isEqual)(r[t],e)));return this.store.updateState({previousUserTraits:i}),e}return null}_buildValidTraits(e){return Object.entries(e).reduce(((e,[t,r])=>(this._isValidTraitDate(r)?e[t]=r.toISOString():this._isValidTrait(r)?e[t]=r:console.warn(`MetaMetricsController: "${t}" value is not a valid trait type`),e)),{})}_getAllUniqueNFTAddressesLength(e={}){const t=this._getAllNFTsFlattened(e).map((e=>e.address));return new Set(t).size}_getNumberOfTokens(e){return Object.values(e.allTokens).reduce(((e,t)=>e+(0,n.sum)(Object.values(t).map(n.size))),0)}_identify(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{this._submitSegmentAPICall("identify",{userId:t,traits:e})}catch(e){this._captureException(e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}_isValidTrait(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||this._isValidTraitArray(e)||this._isValidTraitDate(e)}_track(e,t){const{isOptIn:r,metaMetricsId:n,matomoEvent:i,flushImmediately:a}=t||{};let s="userId",o=this.state.metaMetricsId,c=(null==t?void 0:t.excludeMetaMetricsId)??!1;return Boolean(e.event.match(/^send|^confirm/iu))&&(c=!0),c||r&&!n?(s="anonymousId",o=l.METAMETRICS_ANONYMOUS_ID):r&&n&&(o=n),e[s]=o,!0===i&&(e.properties.legacy_event=!0),new Promise(((t,r)=>{this._submitSegmentAPICall("track",e,(e=>{if(e){const t=new Error(e.message);return t.stack=e.stack,r(t)}return t()})),a&&this.segment.flush()}))}_submitSegmentAPICall(e,t,r){const{metaMetricsId:n,participateInMetaMetrics:i}=this.state;if(!i||!n)return;const a=t.messageId||(0,f.generateRandomId)();let s=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,f.isValidDate)(e)&&(s=e)}const o={...t,messageId:a,timestamp:s};this.store.updateState({segmentApiCalls:{...this.store.getState().segmentApiCalls,[a]:{eventType:e,payload:{...o,timestamp:o.timestamp.toString()}}}});this.segment[e](o,(e=>{const{segmentApiCalls:t}=this.store.getState();return delete t[a],this.store.updateState({segmentApiCalls:t}),null==r?void 0:r(e)}))}_getPetnameAddressCount(e){var t;const r=(null===(t=e.names)||void 0===t?void 0:t[o.NameType.ETHEREUM_ADDRESS])??{};return Object.keys(r).reduce(((e,t)=>{const n=r[t];return e+Object.keys(n).reduce(((e,t)=>{var r;return e+(Boolean(null===(r=n[t].name)||void 0===r?void 0:r.length)?1:0)}),0)}),0)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics.js"}],[150,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:58,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[1502,{"readable-stream":1523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BasePostMessageStream=void 0;const n=e("readable-stream"),i=()=>undefined,a="SYN",s="ACK";class o extends n.Duplex{constructor(){super({objectMode:!0}),this._init=!1,this._haveSyn=!1,this._log=()=>null}_handshake(){this._write(a,null,i),this.cork()}_onData(e){if(this._init)try{this.push(e),this._log(e,!1)}catch(e){this.emit("error",e)}else e===a?(this._haveSyn=!0,this._write(s,null,i)):e===s&&(this._init=!0,this._haveSyn||this._write(s,null,i),this.uncork())}_read(){return undefined}_write(e,t,r){e!==s&&e!==a&&this._log(e,!0),this._postMessage(e),r()}_setLogger(e){this._log=e}}r.BasePostMessageStream=o}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/BasePostMessageStream.js"}],[1503,{"../BasePostMessageStream":1502,"../utils":1507},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebWorkerParentPostMessageStream=void 0;const n=e("../BasePostMessageStream"),i=e("../utils");class a extends n.BasePostMessageStream{constructor({worker:e}){super(),this._target=i.DEDICATED_WORKER_NAME,this._worker=e,this._worker.onmessage=this._onMessage.bind(this),this._handshake()}_postMessage(e){this._worker.postMessage({target:this._target,data:e})}_onMessage(e){const t=e.data;(0,i.isValidStreamMessage)(t)&&this._onData(t.data)}_destroy(){this._worker.onmessage=null,this._worker=null}}r.WebWorkerParentPostMessageStream=a}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/WebWorker/WebWorkerParentPostMessageStream.js"}],[1504,{"../BasePostMessageStream":1502,"../utils":1507},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebWorkerPostMessageStream=void 0;const n=e("../BasePostMessageStream"),i=e("../utils");class a extends n.BasePostMessageStream{constructor(){if("undefined"==typeof self||"undefined"==typeof WorkerGlobalScope)throw new Error("WorkerGlobalScope not found. This class should only be instantiated in a WebWorker.");super(),this._name=i.DEDICATED_WORKER_NAME,self.addEventListener("message",this._onMessage.bind(this)),this._handshake()}_postMessage(e){self.postMessage({data:e})}_onMessage(e){const t=e.data;(0,i.isValidStreamMessage)(t)&&t.target===this._name&&this._onData(t.data)}_destroy(){return undefined}}r.WebWorkerPostMessageStream=a}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/WebWorker/WebWorkerPostMessageStream.js"}],[1505,{"./BasePostMessageStream":1502,"./WebWorker/WebWorkerParentPostMessageStream":1503,"./WebWorker/WebWorkerPostMessageStream":1504,"./runtime/BrowserRuntimePostMessageStream":1506,"./window/WindowPostMessageStream":1508},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./window/WindowPostMessageStream"),r),i(e("./WebWorker/WebWorkerPostMessageStream"),r),i(e("./WebWorker/WebWorkerParentPostMessageStream"),r),i(e("./runtime/BrowserRuntimePostMessageStream"),r),i(e("./BasePostMessageStream"),r)}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/browser.js"}],[1506,{"../BasePostMessageStream":1502,"../utils":1507},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.BrowserRuntimePostMessageStream=void 0;const o=e("../BasePostMessageStream"),c=e("../utils");class l extends o.BasePostMessageStream{constructor({name:e,target:t}){super(),n.set(this,void 0),i.set(this,void 0),a(this,n,e,"f"),a(this,i,t,"f"),this._onMessage=this._onMessage.bind(this),this._getRuntime().onMessage.addListener(this._onMessage),this._handshake()}_postMessage(e){this._getRuntime().sendMessage({target:s(this,i,"f"),data:e})}_onMessage(e){(0,c.isValidStreamMessage)(e)&&e.target===s(this,n,"f")&&this._onData(e.data)}_getRuntime(){var e,t;if("chrome"in globalThis&&"function"==typeof(null===(e=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===e?void 0:e.sendMessage))return chrome.runtime;if("browser"in globalThis&&"function"==typeof(null===(t=null===browser||void 0===browser?void 0:browser.runtime)||void 0===t?void 0:t.sendMessage))return browser.runtime;throw new Error("browser.runtime.sendMessage is not a function. This class should only be instantiated in a web extension.")}_destroy(){this._getRuntime().onMessage.removeListener(this._onMessage)}}r.BrowserRuntimePostMessageStream=l,n=new WeakMap,i=new WeakMap}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/runtime/BrowserRuntimePostMessageStream.js"}],[1507,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isValidStreamMessage=r.DEDICATED_WORKER_NAME=void 0;const n=e("@metamask/utils");r.DEDICATED_WORKER_NAME="dedicatedWorker",r.isValidStreamMessage=function(e){return(0,n.isObject)(e)&&Boolean(e.data)&&("number"==typeof e.data||"object"==typeof e.data||"string"==typeof e.data)}}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/utils.js"}],[1508,{"../BasePostMessageStream":1502,"../utils":1507,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.WindowPostMessageStream=void 0;const a=e("@metamask/utils"),s=e("../BasePostMessageStream"),o=e("../utils"),c=null===(n=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"source"))||void 0===n?void 0:n.get;(0,a.assert)(c,"MessageEvent.prototype.source getter is not defined.");const l=null===(i=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"origin"))||void 0===i?void 0:i.get;(0,a.assert)(l,"MessageEvent.prototype.origin getter is not defined.");class d extends s.BasePostMessageStream{constructor({name:e,target:t,targetOrigin:r=location.origin,targetWindow:n=window}){if(super(),"undefined"==typeof window||"function"!=typeof window.postMessage)throw new Error("window.postMessage is not a function. This class should only be instantiated in a Window.");this._name=e,this._target=t,this._targetOrigin=r,this._targetWindow=n,this._onMessage=this._onMessage.bind(this),window.addEventListener("message",this._onMessage,!1),this._handshake()}_postMessage(e){this._targetWindow.postMessage({target:this._target,data:e},this._targetOrigin)}_onMessage(e){const t=e.data;"*"!==this._targetOrigin&&l.call(e)!==this._targetOrigin||c.call(e)!==this._targetWindow||!(0,o.isValidStreamMessage)(t)||t.target!==this._name||this._onData(t.data)}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}r.WindowPostMessageStream=d}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/window/WindowPostMessageStream.js"}],[1509,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function a(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,s,o;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o="The ".concat(e," ").concat(n," ").concat(a(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(a(t,"type"))}return o+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/errors-browser.js"}],[151,{"@metamask/transaction-controller":1931,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");r.default={version:59,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=59;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r)){const t=(0,n.groupBy)(Object.values(r),(e=>{var t;return`${null===(t=e.txParams)||void 0===t?void 0:t.nonce}-${e.chainId??e.metamaskNetworkId}`})),a=(0,n.pickBy)(t,(e=>e.some((e=>e.type!==i.TransactionType.cancel&&e.type!==i.TransactionType.retry))));e.TransactionController.transactions=(0,n.keyBy)((0,n.concat)(...Object.values(a)),(e=>e.id))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/059.js"}],[1510,{"./_stream_readable":1512,"./_stream_writable":1514,_process:3628,inherits:3257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=l;var i=e("./_stream_readable"),a=e("./_stream_writable");e("inherits")(l,i);for(var s=n(a.prototype),o=0;o<s.length;o++){var c=s[o];l.prototype[c]||(l.prototype[c]=a.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||r.nextTick(u,this)}function u(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_duplex.js"}],[1511,{"./_stream_transform":1513,inherits:3257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_passthrough.js"}],[1512,{"../errors":1509,"./_stream_duplex":1510,"./internal/streams/async_iterator":1515,"./internal/streams/buffer_list":1516,"./internal/streams/destroy":1517,"./internal/streams/from":1519,"./internal/streams/state":1521,"./internal/streams/stream":1522,_process:3628,buffer:2634,events:2936,inherits:3257,"string_decoder/":3998,util:2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=E,E.ReadableState=k;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},a=e("./internal/streams/stream"),s=e("buffer").Buffer,o=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,l=e("util");c=l&&l.debuglog?l.debuglog("stream"):function(){};var d,u,h,f=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),p=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,v=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(E,a);var w=m.errorOrDestroy,T=["error","close","destroy","pause","resume"];function k(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=p(this,t,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=e("string_decoder/").StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function E(t){if(n=n||e("./_stream_duplex"),!(this instanceof E))return new E(t);var r=this instanceof n;this._readableState=new k(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function I(e,t,r,n,i){c("readableAddChunk",t);var a,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?A(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,C(e)))}(e,l);else if(i||(a=function(e,t){var r;n=t,s.isBuffer(n)||n instanceof o||"string"==typeof t||t===undefined||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(l,t)),a)w(e,a);else if(l.objectMode||t&&t.length>0)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)l.endEmitted?w(e,new _):P(e,l,t,!0);else if(l.ended)w(e,new y);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(t=l.decoder.write(t),l.objectMode||0!==t.length?P(e,l,t,!1):j(e,l)):P(e,l,t,!1)}else n||(l.reading=!1,j(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function P(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&A(e)),j(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),I(this,e,t,!1,r)},E.prototype.unshift=function(e){return I(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){d||(d=e("string_decoder/").StringDecoder);var r=new d(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var S=1073741824;function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=S?e=S:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(C,e))}function C(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function j(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(M,e,t))}function M(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function B(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){c("readable nexttick read 0"),e.read(0)}function O(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function F(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(G,t,e))}function G(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function H(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}E.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):A(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&F(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(r,t))),null===(n=e>0?R(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){w(this,new b("_read()"))},E.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,c("pipe count=%d opts=%j",a.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?l:g;function o(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",m),e.removeListener("finish",p),e.removeListener("drain",d),e.removeListener("error",f),e.removeListener("unpipe",o),n.removeListener("end",l),n.removeListener("end",g),n.removeListener("data",h),u=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function l(){c("onend"),e.end()}a.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",o);var d=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",d);var u=!1;function h(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==H(a.pipes,e))&&!u&&(c("false write response, pause",a.awaitDrain),a.awaitDrain++),n.pause())}function f(t){c("onerror",t),g(),e.removeListener("error",f),0===i(e,"error")&&w(e,t)}function m(){e.removeListener("finish",p),g()}function p(){c("onfinish"),e.removeListener("close",m),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",f),e.once("close",m),e.once("finish",p),e.emit("pipe",n),a.flowing||(c("pipe resume"),n.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var s=H(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},E.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?A(this):i.reading||r.nextTick(N,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(B,this),n},E.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(B,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(O,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<T.length;a++)e.on(T[a],this.emit.bind(this,T[a]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return u===undefined&&(u=e("./internal/streams/async_iterator")),u(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=R,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(E,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[1513,{"../errors":1509,"./_stream_duplex":1510,inherits:3257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=d;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,a=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=n.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new a);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new o;if(e._transformState.transforming)throw new s;return e.push(null)}e("inherits")(d,c),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,r){r(new i("_transform()"))},d.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[1514,{"../errors":1509,"./_stream_duplex":1510,"./internal/streams/destroy":1517,"./internal/streams/state":1521,"./internal/streams/stream":1522,_process:3628,buffer:2634,inherits:3257,"util-deprecate":4063},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=E,E.WritableState=k;var a={deprecate:e("util-deprecate")},s=e("./internal/streams/stream"),o=e("buffer").Buffer,c=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,d=e("./internal/streams/destroy"),u=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,f=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,p=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,_=h.ERR_UNKNOWN_ENCODING,w=d.errorOrDestroy;function T(){}function k(t,a,s){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=a instanceof i),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=u(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,a=n.writecb;if("function"!=typeof a)throw new p;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,a){--t.pendingcb,n?(r.nextTick(a,i),r.nextTick(C,e,t),e._writableState.errorEmitted=!0,w(e,i)):(a(i),e._writableState.errorEmitted=!0,w(e,i),C(e,t))}(e,n,i,t,a);else{var s=x(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||S(e,n),i?r.nextTick(P,e,n,s,a):P(e,n,s,a)}}(a,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function E(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!l.call(E,this))return new E(t);this._writableState=new k(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function I(e,t,r,n,i,a,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function P(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),C(e,t)}function S(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,a=new Array(i),s=t.corkedRequestsFree;s.entry=r;for(var o=0,c=!0;r;)a[o]=r,r.isBuf||(c=!1),r=r.next,o+=1;a.allBuffers=c,I(e,t,!0,t.length,a,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,d=r.encoding,u=r.callback;if(I(e,t,!1,t.objectMode?1:l.length,l,d,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final((function(r){t.pendingcb--,r&&w(e,r),t.prefinished=!0,e.emit("prefinish"),C(e,t)}))}function C(e,t){var n=x(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(A,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(E,s),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===E&&(e&&e._writableState instanceof k)}})):l=function(e){return e instanceof this},E.prototype.pipe=function(){w(this,new g)},E.prototype.write=function(e,t,n){var i,a=this._writableState,s=!1,l=!a.objectMode&&(i=e,o.isBuffer(i)||i instanceof c);return l&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(n=t,t=null),l?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=T),a.ending?function(e,t){var n=new b;w(e,n),r.nextTick(t,n)}(this,n):(l||function(e,t,n,i){var a;return null===n?a=new y:"string"==typeof n||t.objectMode||(a=new f("chunk",["string","Buffer"],n)),!a||(w(e,a),r.nextTick(i,a),!1)}(this,a,e,n))&&(a.pendingcb++,s=function(e,t,r,n,i,a){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var c=t.objectMode?1:n.length;t.length+=c;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else I(e,t,!1,c,n,i,a);return l}(this,a,l,e,t,n)),s},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||S(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,r){r(new m("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,C(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=d.destroy,E.prototype._undestroy=d.undestroy,E.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[1515,{"./end-of-stream":1518,_process:3628},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=e("./end-of-stream"),s=Symbol("lastResolve"),o=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),d=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function m(e){var t=e[s];if(null!==t){var r=e[h].read();null!==r&&(e[d]=null,e[s]=null,e[o]=null,t(f(r,!1)))}}function p(e){r.nextTick(m,e)}var g=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(f(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[c]?n(e[c]):t(f(undefined,!0))}))}));var n,i=this[d];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(f(undefined,!0)):t[u](r,n)}),n)}}(i,this));else{var a=this[h].read();if(null!==a)return Promise.resolve(f(a,!1));n=new Promise(this[u])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(f(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(v,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,u,{value:function(e,t){var n=r[h].read();n?(r[d]=null,r[s]=null,r[o]=null,e(f(n,!1))):(r[s]=e,r[o]=t)},writable:!0}),t));return r[d]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[o];return null!==t&&(r[d]=null,r[s]=null,r[o]=null,t(e)),void(r[c]=e)}var n=r[s];null!==n&&(r[d]=null,r[s]=null,r[o]=null,n(f(undefined,!0))),r[l]=!0})),e.on("readable",p.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[1516,{buffer:2634,util:2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c=e("buffer").Buffer,l=e("util").inspect,d=l&&l.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,r,n,i=c.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,r=i,n=s,c.prototype.copy.call(t,r,n),s+=a.data.length,a=a.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?n+=i:n+=i.slice(0,e),0==(e-=a)){a===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0==(e-=a)){a===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(a));break}++n}return this.length-=n,t}},{key:d,value:function(e,t){return l(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[1517,{_process:3628},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,a){var s=this,o=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return o||c?(a?a(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!a&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(r,s,t)):e.nextTick(r,s,t):a?(e.nextTick(n,s),a(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[1518,{"../../../errors":1509},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,a){if("function"==typeof r)return e(t,null,r);r||(r={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(a||i);var s=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||d()},l=t._writableState&&t._writableState.finished,d=function(){o=!1,l=!0,s||a.call(t)},u=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,u=!0,o||a.call(t)},f=function(e){a.call(t,e)},m=function(){var e;return s&&!u?(t._readableState&&t._readableState.ended||(e=new n),a.call(t,e)):o&&!l?(t._writableState&&t._writableState.ended||(e=new n),a.call(t,e)):void 0},p=function(){t.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",d),t.on("abort",m),t.req?p():t.on("request",p)),t.on("end",h),t.on("finish",d),!1!==r.error&&t.on("error",f),t.on("close",m),function(){t.removeListener("complete",d),t.removeListener("abort",m),t.removeListener("request",p),t.req&&t.req.removeListener("finish",d),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",d),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",m)}}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[1519,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[152,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const i="2020-08-31";r.default={version:60,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=60;const r=function(e){var t;const r=null==e||null===(t=e.NotificationController)||void 0===t?void 0:t.notifications;var a;(0,n.isPlainObject)(r)&&(null===(a=r[2])||void 0===a?void 0:a.date)===i&&delete e.NotificationController.notifications[2];return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/060.js"}],[1520,{"../../../errors":1509,"./end-of-stream":1518},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,a=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function c(e){e()}function l(e,t){return e.pipe(t)}t.exports=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var d,u=function(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new a("streams");var h=r.map((function(t,i){var a=i<r.length-1;return function(t,r,i,a){a=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(a);var o=!1;t.on("close",(function(){o=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return a(e);o=!0,a()}));var c=!1;return function(e){if(!o&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void a(e||new s("pipe"))}}(t,a,i>0,(function(e){d||(d=e),e&&h.forEach(c),a||(h.forEach(c),u(d))}))}));return r.reduce(l)}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[1521,{"../../../errors":1509},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var a=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new n(i?r:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/state.js"}],[1522,{events:2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[1523,{"./lib/_stream_duplex.js":1510,"./lib/_stream_passthrough.js":1511,"./lib/_stream_readable.js":1512,"./lib/_stream_transform.js":1513,"./lib/_stream_writable.js":1514,"./lib/internal/streams/end-of-stream.js":1518,"./lib/internal/streams/pipeline.js":1520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/readable-browser.js"}],[1524,{"./ppom-controller":1525},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;var n=e("./ppom-controller");Object.defineProperty(r,"NETWORK_CACHE_DURATION",{enumerable:!0,get:function(){return n.NETWORK_CACHE_DURATION}}),Object.defineProperty(r,"PPOMController",{enumerable:!0,get:function(){return n.PPOMController}})}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/index.js"}],[1525,{"./ppom-storage":1526,"./util":1527,"@metamask/base-controller":1531,"@metamask/controller-utils":1533,"await-semaphore":2528},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,a,s,o,c,l,d,u,h,f,m,p,g,v,y,b,_,w,T,k,E,I,P,S,x,A,C,j,M,B,N,O,L=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},R=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;const F=e("@metamask/base-controller"),G=e("@metamask/controller-utils"),H=e("await-semaphore"),D=e("./ppom-storage"),U=e("./util");r.NETWORK_CACHE_DURATION=6048e5;const W=["eth_call","eth_blockNumber","eth_createAccessList","eth_getLogs","eth_getFilterLogs","eth_getTransactionByHash","eth_chainId","eth_getBlockByHash","eth_getBlockByNumber","eth_getCode","eth_getStorageAt","eth_getBalance","eth_getTransactionCount","trace_call","trace_callMany","debug_traceCall","trace_filter"],$={versionInfo:{persist:!0,anonymous:!1},storageMetadata:{persist:!0,anonymous:!1},versionFileETag:{persist:!0,anonymous:!1}},q="PPOMController",V={headers:{"Content-Type":"application/json"}};class K extends F.BaseControllerV2{constructor({chainId:e,messenger:t,provider:r,storageBackend:y,securityAlertsEnabled:b,onPreferencesChange:_,ppomProvider:E,cdnBaseUrl:I,providerRequestLimit:P,state:S,blockaidPublicKey:x,nativeCrypto:A}){super({name:q,metadata:$,messenger:t,state:{versionInfo:S?.versionInfo??[],storageMetadata:S?.storageMetadata??[],versionFileETag:S?.versionFileETag??""}}),n.add(this),i.set(this,void 0),a.set(this,void 0),s.set(this,void 0),o.set(this,void 0),c.set(this,void 0),l.set(this,void 0),d.set(this,void 0),u.set(this,0),h.set(this,void 0),f.set(this,void 0),m.set(this,{}),p.set(this,void 0),g.set(this,!1),v.set(this,undefined),L(this,h,(0,U.addHexPrefix)(e),"f"),L(this,a,r,"f"),L(this,c,E,"f"),L(this,s,new D.PPOMStorage({storageBackend:y,readMetadata:()=>[...this.state.storageMetadata],writeMetadata:e=>{this.update((t=>{t.storageMetadata=e}))}}),"f"),L(this,o,new H.Mutex,"f"),L(this,l,I,"f"),L(this,d,P??300,"f"),L(this,f,b,"f"),L(this,p,x,"f"),L(this,v,A,"f"),_(R(this,n,"m",w).bind(this)),R(this,n,"m",T).call(this),R(this,n,"m",k).call(this)}async usePPOM(e){if(!R(this,f,"f"))throw Error("User has securityAlertsEnabled set to false");if(!(0,U.blockaidValidationSupportedForNetwork)(R(this,h,"f")))throw Error(`Blockaid validation not available on network with chainId: ${R(this,h,"f")}`);return await R(this,o,"f").use((async()=>{await R(this,n,"m",I).call(this),L(this,u,0,"f"),L(this,m,{},"f");return{...await e(R(this,i,"f")),providerRequestsCount:{...R(this,m,"f")}}}))}}r.PPOMController=K,i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakMap,g=new WeakMap,v=new WeakMap,n=new WeakSet,y=async function(){if(R(this,f,"f")&&!R(this,g,"f")){const{ppomInit:e}=R(this,c,"f");await e("./ppom_bg.wasm"),L(this,g,!0,"f")}},b=function(){R(this,n,"m",E).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)}));const{storageMetadata:e}=this.state;this.update((e=>{e.versionInfo=[],e.storageMetadata=[],e.versionFileETag=""})),R(this,s,"f").deleteAllFiles(e).catch((e=>{console.error(`Error in deleting files: ${e.message}`)}))},_=function(e){const t=(0,U.addHexPrefix)(e.providerConfig.chainId);t!==R(this,h,"f")&&(L(this,h,t,"f"),R(this,n,"m",E).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)})))},w=function(e){const t=e.securityAlertsEnabled;t!==R(this,f,"f")&&(L(this,f,t,"f"),t||R(this,n,"m",b).call(this))},T=function(){this.messagingSystem.registerActionHandler(`${q}:usePPOM`,this.usePPOM.bind(this))},k=function(){const e=R(this,n,"m",_).bind(this);this.messagingSystem.subscribe("NetworkController:stateChange",e)},E=async function(){await R(this,o,"f").use((async()=>{R(this,i,"f")&&(R(this,i,"f").free(),L(this,i,undefined,"f"))}))},I=async function(){const e=await R(this,n,"m",P).call(this);(R(this,i,"f")===undefined||e)&&(L(this,i,await R(this,n,"m",O).call(this),"f"),R(this,s,"f").syncMetadata(this.state.versionInfo).catch((e=>{console.error(`Error while trying to sync metadata: ${e.message}`)})))},P=async function(){const e=await R(this,n,"m",M).call(this);return!!e&&(this.update((t=>{t.versionInfo=e})),!0)},S=function(e,t){return e.find((e=>e.name===t.name&&e.chainId===t.chainId&&e.version===t.version&&e.checksum===t.checksum))},x=async function(e){const t=await Promise.all(e.map((async e=>{let t;try{t=await R(this,n,"m",A).call(this,e)}catch(t){console.error(`Error in getting file ${e.filePath}: ${t.message}`)}return t?[e.name,new Uint8Array(t)]:undefined})));return t?.filter((e=>e?.[1]!==undefined))},A=async function(e){const{storageMetadata:t}=this.state;if(R(this,n,"m",S).call(this,t,e))try{return await R(this,s,"f").readFile(e.name,e.chainId)}catch(e){console.error(`Error in reading file: ${e.message}`)}(0,U.checkFilePath)(e.filePath);const r=(0,U.constructURLHref)(R(this,l,"f"),e.filePath),i=await R(this,n,"m",B).call(this,r);return await(0,U.validateSignature)(i,e.hashSignature,R(this,p,"f"),e.filePath,R(this,v,"f")),await R(this,s,"f").writeFile({data:i,...e}).catch((e=>{console.error(`Error in writing file: ${e.message}`)})),i},C=async function(e,t={},r="GET"){const n=await(0,G.safelyExecute)((async()=>(0,G.timeoutFetch)(e,{method:r,cache:"no-cache",redirect:"error",...t},1e4)),!0);if(200!==n?.status)throw new Error(`Failed to fetch file with url: ${e}`);return n},j=async function(e){const t=await R(this,n,"m",C).call(this,e,{headers:V},"HEAD"),{versionFileETag:r}=this.state;return t.headers.get("ETag")!==r&&(this.update((e=>{e.versionFileETag=t.headers.get("ETag")})),!0)},M=async function(){const e=(0,U.constructURLHref)(R(this,l,"f"),"ppom_version.json");if(!await R(this,n,"m",j).call(this,e)&&this.state.versionInfo?.length)return undefined;return(await R(this,n,"m",C).call(this,e,{headers:V})).json()},B=async function(e){const t=await R(this,n,"m",C).call(this,e);return await t.arrayBuffer()},N=async function(e,t){return new Promise((r=>{R(this,u,"f")>R(this,d,"f")?r(U.PROVIDER_ERRORS.limitExceeded()):(L(this,u,R(this,u,"f")+1,"f"),W.includes(e)?(R(this,m,"f")[e]=R(this,m,"f")[e]?Number(R(this,m,"f")[e])+1:1,R(this,a,"f").sendAsync((0,U.createPayload)(e,t),((e,t)=>{r(e?{jsonrpc:"2.0",id:(0,U.IdGenerator)(),error:e}:t)}))):r(U.PROVIDER_ERRORS.methodNotSupported()))}))},O=async function(){await R(this,n,"m",y).call(this);const e=this.state.versionInfo.filter((({chainId:e})=>e===R(this,h,"f")));if(e?.length===undefined||0===e?.length)throw new Error(`Aborting initialising PPOM as no files are found for the network with chainId: ${R(this,h,"f")}`);const t=await R(this,n,"m",x).call(this,e);if(t?.length!==e?.length)throw new Error(`Aborting initialising PPOM as not all files could not be downloaded for the network with chainId: ${R(this,h,"f")}`);R(this,i,"f")&&R(this,i,"f").free();const{PPOM:r}=R(this,c,"f");return r.new(R(this,n,"m",N).bind(this),t)}}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-controller.js"}],[1526,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,a,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMStorage=void 0;r.PPOMStorage=class{constructor({storageBackend:e,readMetadata:t,writeMetadata:r}){n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),s(this,n,e,"f"),s(this,i,t,"f"),s(this,a,r,"f")}async syncMetadata(e){const t=o(this,i,"f").call(this),r=[];for(const n of t){try{await this.readFile(n.name,n.chainId)}catch(e){console.error("Error: ",e);continue}e.find((e=>e.name===n.name&&e.chainId===n.chainId&&e.version===n.version&&e.checksum===n.checksum))&&r.push(n)}const s=await o(this,n,"f").dir();for(const{name:e,chainId:t}of s)r.find((r=>r.name===e&&r.chainId===t))||await o(this,n,"f").delete({name:e,chainId:t});return o(this,a,"f").call(this,r),r}async deleteAllFiles(e){for(const t of e){const{name:e,chainId:r}=t;try{await o(this,n,"f").delete({name:e,chainId:r})}catch(t){console.error(`Error in deleting file: ${e}, ${r}`,t)}}}async readFile(e,t){const r=o(this,i,"f").call(this).find((r=>r.name===e&&r.chainId===t));if(!r)throw new Error(`File metadata (${e}, ${t}) not found`);const a=await o(this,n,"f").read({name:e,chainId:t},r.checksum);if(!a)throw new Error(`Storage File (${e}, ${t}) not found`);return a}async writeFile({data:e,name:t,chainId:r,version:s,checksum:c}){await o(this,n,"f").write({name:t,chainId:r},e,c);const l=o(this,i,"f").call(this),d=l.find((e=>e.name===t&&e.chainId===r));d?(d.version=s,d.checksum=c):l.push({name:t,chainId:r,version:s,checksum:c}),o(this,a,"f").call(this,l)}},n=new WeakMap,i=new WeakMap,a=new WeakMap}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-storage.js"}],[1527,{buffer:2634,"crypto-js":2745,elliptic:2800,"json-rpc-random-id":3317},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkFilePath=r.addHexPrefix=r.constructURLHref=r.validateSignature=r.PROVIDER_ERRORS=r.createPayload=r.IdGenerator=r.blockaidValidationSupportedForNetwork=r.SUPPORTED_NETWORK_CHAINIDS=void 0;const o=a(e("crypto-js")),c=s(e("elliptic")),l=s(e("json-rpc-random-id")),d=c.default.eddsa;r.SUPPORTED_NETWORK_CHAINIDS={MAINNET:"0x1",BSC:"0x38",OPTIMISM:"0xa",POLYGON:"0x89",AVALANCHE:"0xa86a",ARBITRUM:"0xa4b1",LINEA_MAINNET:"0xe708",BASE:"0x2105",SEPOLIA:"0xaa36a7"};r.blockaidValidationSupportedForNetwork=e=>Object.values(r.SUPPORTED_NETWORK_CHAINIDS).some((t=>t===e)),r.IdGenerator=(0,l.default)();r.createPayload=(e,t)=>({id:(0,r.IdGenerator)(),jsonrpc:"2.0",method:e,params:t??[]}),r.PROVIDER_ERRORS={limitExceeded:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32005,message:"Limit exceeded"}}),methodNotSupported:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32601,message:"Method not supported"}})};r.validateSignature=async(e,r,n,i,a,s)=>{const c=await(async(e,t,r=!0)=>{if(t)return t.createHash("sha256").update(e).digest("hex");if("crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest&&r){const t=await globalThis.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return(0,o.SHA256)(o.default.lib.WordArray.create(e)).toString()})(e,a,s);if(!new d("ed25519").keyFromPublic(n).verify(t.from(c),r))throw Error(`Signature verification failed for file path: ${i}`)};r.constructURLHref=(e,t)=>new URL(`https://${e}/${t}`.replace(/https:\/\/https:\/\//gu,"https://").replace(/\/\//gu,"/")).href;r.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):`0x${parseInt(e,10).toString(16)}`;r.checkFilePath=e=>{if(!e.match(/^[\w./]+$/u))throw new Error(`Invalid file path for data file: ${e}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/util.js"}],[1528,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1529,{immer:3256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const a=t[i];if(!a)throw new Error(`No metadata found for '${i}'`);const s=a[r],o=e[i];return"function"==typeof s?n[i]=s(o):s&&(n[i]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[153,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:61,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[1530,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1531,{"./BaseController":1528,"./BaseControllerV2":1529,"./ControllerMessenger":1530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var a=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return a.BaseController}});var s=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return s.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return s.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return s.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/index.js"}],[1532,{"./types":1536},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/constants.js"}],[1533,{"./constants":1532,"./siwe":1535,"./types":1536,"./util":1537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r),i(e("./siwe"),r)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/index.js"}],[1534,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/logger.js"}],[1535,{"./logger":1534,"@metamask/utils":1982,"@spruceid/siwe-parser":2189,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),a=e("./logger"),s=(0,a.createModuleLogger)(a.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:(0,n.remove0x)(r),a=t.from(i,"hex");return 32===a.length?e:a.toString("utf8")}catch(t){return s(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:i}=e;if(!n||!(null===(t=null==i?void 0:i.parsedMessage)||void 0===t?void 0:t.domain))return!1;const a=new URL(n),s=(0,r.parseDomainParts)(i.parsedMessage.domain,a.protocol);return 0===s.hostname.localeCompare(a.hostname,undefined,{sensitivity:"accent"})&&(""!==s.port&&s.port!==a.port?""===a.port&&s.port===c[a.protocol]:""===s.username||s.username===a.username)}catch(e){return s(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new i.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1536,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/types.js"}],[1537,{"./constants":1532,"@ethereumjs/util":400,"@metamask/ethjs-unit":1226,"@metamask/utils":1982,"bn.js":2586,buffer:2634,"eth-ens-namehash":2833,"fast-deep-equal":2964},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const a=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=i(e("bn.js")),l=i(e("eth-ens-namehash")),d=i(e("fast-deep-equal")),u=e("./constants"),h=new Error("timeout");function f(e){return e?new c.default((0,o.remove0x)(e),16):new c.default(0)}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield m(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=u.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.default(t),i=new c.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,s.toWei)(r,"gwei");if(n.length<=9)return(0,s.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let a=(0,s.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(a=a.add(new c.default(1))),a},r.weiHexToGweiDec=function(e){const t=new c.default((0,o.remove0x)(e),16);return(0,s.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new c.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.default.isBN(e)?e.toString(16):new c.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,a.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,a.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=m,r.handleFetch=p,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield p(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const a=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,a):e.sendAsync({method:t,params:r},a)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,d.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/util.js"}],[1538,{"@metamask/json-rpc-engine":1555,"@metamask/rpc-errors":1566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/json-rpc-engine"),i=e("@metamask/rpc-errors");r.createQueuedRequestMiddleware=({enqueueRequest:e,useRequestQueue:t})=>n.createAsyncMiddleware.call(void 0,(async(r,n,a)=>{if(function(e){if(!e.origin)throw new Error("Request object is lacking an 'origin'");if("string"!=typeof e.origin)throw new Error(`Request object has an invalid origin of type '${typeof e.origin}'`);if(!e.networkClientId)throw new Error("Request object is lacking a 'networkClientId'");if("string"!=typeof e.networkClientId)throw new Error(`Request object has an invalid networkClientId of type '${typeof e.networkClientId}'`)}(r),!t()||(s=r.method,!["eth_sendTransaction","wallet_watchAsset","wallet_switchEthereumChain","eth_signTypedData_v4","wallet_addEthereumChain","wallet_requestPermissions","wallet_requestSnaps","personal_sign","eth_sign","eth_requestAccounts"].includes(s)))return await a();var s;try{await e(r,a)}catch(e){n.error=i.serializeError.call(void 0,e)}}))}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-OVWSDI7B.js"}],[1539,{"./chunk-Z4BLTVTB.js":1540,"@metamask/base-controller":1547,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f,m=e("./chunk-Z4BLTVTB.js"),p=e("@metamask/base-controller"),g=e("@metamask/utils"),v="QueuedRequestController",y={enqueueRequest:`${v}:enqueueRequest`,getState:`${v}:getState`},b={networkSwitched:`${v}:networkSwitched`,stateChange:`${v}:stateChange`},_=class extends p.BaseController{constructor({messenger:e}){super({name:v,metadata:{queuedRequestCount:{anonymous:!0,persist:!1}},messenger:e,state:{queuedRequestCount:0}}),m.__privateAdd.call(void 0,this,s),m.__privateAdd.call(void 0,this,c),m.__privateAdd.call(void 0,this,d),m.__privateAdd.call(void 0,this,h),m.__privateAdd.call(void 0,this,n,void 0),m.__privateAdd.call(void 0,this,i,[]),m.__privateAdd.call(void 0,this,a,0),m.__privateMethod.call(void 0,this,s,o).call(this)}async enqueueRequest(e,t){void 0===m.__privateGet.call(void 0,this,n)&&m.__privateSet.call(void 0,this,n,e.origin);try{if(this.state.queuedRequestCount>0||m.__privateGet.call(void 0,this,n)!==e.origin){const{promise:t,reject:r,resolve:n}=g.createDeferredPromise.call(void 0,{suppressUnhandledRejection:!0});m.__privateGet.call(void 0,this,i).push({origin:e.origin,processRequest:e=>{e?r(e):n()}}),m.__privateMethod.call(void 0,this,h,f).call(this),await t}else"eth_requestAccounts"!==e.method&&await m.__privateMethod.call(void 0,this,d,u).call(this);m.__privateSet.call(void 0,this,a,m.__privateGet.call(void 0,this,a)+1);try{await t()}finally{m.__privateSet.call(void 0,this,a,m.__privateGet.call(void 0,this,a)-1)}return}finally{0===m.__privateGet.call(void 0,this,a)&&(m.__privateSet.call(void 0,this,n,void 0),m.__privateGet.call(void 0,this,i).length>0&&m.__privateMethod.call(void 0,this,c,l).call(this))}}};n=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakSet,o=function(){this.messagingSystem.registerActionHandler(`${v}:enqueueRequest`,this.enqueueRequest.bind(this))},c=new WeakSet,l=async function(){const e=m.__privateGet.call(void 0,this,i).shift();m.__privateSet.call(void 0,this,n,e.origin);const t=[e.processRequest];for(;m.__privateGet.call(void 0,this,i)[0]?.origin===m.__privateGet.call(void 0,this,n);){const e=m.__privateGet.call(void 0,this,i).shift();t.push(e.processRequest)}let r;try{await m.__privateMethod.call(void 0,this,d,u).call(this)}catch(e){r=e}for(const e of t)e(r);m.__privateMethod.call(void 0,this,h,f).call(this)},d=new WeakSet,u=async function(){if(!m.__privateGet.call(void 0,this,n))throw new Error("Current batch origin must be initialized first");const e=this.messagingSystem.call("SelectedNetworkController:getNetworkClientIdForDomain",m.__privateGet.call(void 0,this,n)),{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");e!==t&&(await this.messagingSystem.call("NetworkController:setActiveNetwork",e),this.messagingSystem.publish("QueuedRequestController:networkSwitched",e))},h=new WeakSet,f=function(){this.update((e=>{e.queuedRequestCount=m.__privateGet.call(void 0,this,i).length}))},r.controllerName=v,r.QueuedRequestControllerActionTypes=y,r.QueuedRequestControllerEventTypes=b,r.QueuedRequestController=_}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-UKCK5E7S.js"}],[154,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:62,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[1540,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-Z4BLTVTB.js"}],[1541,{"./chunk-OVWSDI7B.js":1538,"./chunk-UKCK5E7S.js":1539,"./chunk-Z4BLTVTB.js":1540},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-UKCK5E7S.js"),i=e("./chunk-OVWSDI7B.js");e("./chunk-Z4BLTVTB.js"),r.QueuedRequestController=n.QueuedRequestController,r.QueuedRequestControllerActionTypes=n.QueuedRequestControllerActionTypes,r.QueuedRequestControllerEventTypes=n.QueuedRequestControllerEventTypes,r.createQueuedRequestMiddleware=i.createQueuedRequestMiddleware}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/index.js"}],[1542,{"./chunk-Z4BLTVTB.js":1546,immer:3256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-Z4BLTVTB.js"),a=e("immer");a.enablePatches.call(void 0);function s(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const a=t[i];if(!a)throw new Error(`No metadata found for '${String(i)}'`);const s=a[r],o=e[i];return"function"==typeof s?n[i]=s(o):s&&(n[i]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:s}){i.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,i.__privateSet.call(void 0,this,n,a.freeze.call(void 0,s,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=a.produceWithPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);return i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=a.applyPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-DV5LNY3P.js"}],[1543,{"./chunk-UJFCPTF3.js":1545,"./chunk-Z4BLTVTB.js":1546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map),c.__privateAdd.call(void 0,this,s,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,a).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,i).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,s).get(e),i=n(...t);i!==r&&(c.__privateGet.call(void 0,this,s).set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,i).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,i).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,a).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,s).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,i).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,s).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,i).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,i).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1544,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},i=n;r.BaseControllerV1=n,r.BaseControllerV1_default=i}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[1545,{"./chunk-Z4BLTVTB.js":1546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,s);return f.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,d=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,i)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,u),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,i,t),f.__privateSet.call(void 0,this,a,r),f.__privateSet.call(void 0,this,s,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,l,d).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1546,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1547,{"./chunk-DV5LNY3P.js":1542,"./chunk-G42723LG.js":1543,"./chunk-NINOM2XQ.js":1544,"./chunk-UJFCPTF3.js":1545,"./chunk-Z4BLTVTB.js":1546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-NINOM2XQ.js"),i=e("./chunk-DV5LNY3P.js"),a=e("./chunk-G42723LG.js"),s=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=i.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=a.ControllerMessenger,r.RestrictedControllerMessenger=s.RestrictedControllerMessenger,r.getAnonymizedState=i.getAnonymizedState,r.getPersistentState=i.getPersistentState}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1548,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createScaffoldMiddleware=function(e){return(t,r,n,i)=>{const a=e[t.method];return void 0===a?n():"function"==typeof a?a(t,r,n,i):(r.result=a,i())}}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-3AC2MIND.js"}],[1549,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAsyncMiddleware=function(e){return async(t,r,n,i)=>{let a;const s=new Promise((e=>{a=e}));let o=null,c=!1;const l=async()=>(c=!0,n((e=>{o=e,a()})),s);try{await e(t,r,l),c?(await s,o(null)):i(null)}catch(e){o?o(e):i(e)}}}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-ENMR2SJC.js"}],[155,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:63,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,n,i,a,s,o,c;const l=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,d=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,u={};l&&Object.keys(l).forEach((e=>{Object.keys(l[e]).forEach((t=>{const r=l[e][t];u[t]===undefined?u[t]={[e]:r}:u[t]={...u[t],[e]:r}}))}));const h={};d&&Object.keys(d).forEach((e=>{Object.keys(d[e]).forEach((t=>{const r=d[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=u,e.TokensController.allIgnoredTokens=h):e.TokensController={allTokens:u,allIgnoredTokens:h};return null==e||null===(n=e.PreferencesController)||void 0===n||delete n.accountHiddenTokens,null==e||null===(i=e.PreferencesController)||void 0===i||delete i.accountTokens,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.assetImages,null==e||null===(s=e.PreferencesController)||void 0===s||delete s.hiddenTokens,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.tokens,null==e||null===(c=e.PreferencesController)||void 0===c||delete c.suggestedTokens,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[1550,{"./chunk-IPW2SZMY.js":1551},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-IPW2SZMY.js");r.mergeMiddleware=function(e){const t=new(0,n.JsonRpcEngine);return e.forEach((e=>t.push(e))),t.asMiddleware()}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-I2BVUFWR.js"}],[1551,{"./chunk-Z4BLTVTB.js":1554,"@metamask/rpc-errors":1566,"@metamask/safe-event-emitter":1567,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f,m,p,g,v,y,b,_,w,T,k=e("./chunk-Z4BLTVTB.js"),E=e("@metamask/rpc-errors"),I=e("@metamask/safe-event-emitter"),P=(n=I)&&n.__esModule?n:{default:n},S=e("@metamask/utils"),x=class e extends P.default{constructor({notificationHandler:e}={}){super(),k.__privateAdd.call(void 0,this,o),k.__privateAdd.call(void 0,this,l),k.__privateAdd.call(void 0,this,u),k.__privateAdd.call(void 0,this,i,!1),k.__privateAdd.call(void 0,this,a,void 0),k.__privateAdd.call(void 0,this,s,void 0),k.__privateSet.call(void 0,this,a,[]),k.__privateSet.call(void 0,this,s,e)}destroy(){k.__privateGet.call(void 0,this,a).forEach((e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()})),k.__privateSet.call(void 0,this,a,[]),k.__privateSet.call(void 0,this,i,!0)}push(e){k.__privateMethod.call(void 0,this,o,c).call(this),k.__privateGet.call(void 0,this,a).push(e)}handle(e,t){if(k.__privateMethod.call(void 0,this,o,c).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?k.__privateMethod.call(void 0,this,l,d).call(this,e,t):k.__privateMethod.call(void 0,this,l,d).call(this,e):t?k.__privateMethod.call(void 0,this,u,h).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return k.__privateMethod.call(void 0,this,o,c).call(this),async(t,r,n,i)=>{var s,o;try{const[c,l,d]=await k.__privateMethod.call(void 0,s=e,p,g).call(s,t,r,k.__privateGet.call(void 0,this,a));return l?(await k.__privateMethod.call(void 0,o=e,b,_).call(o,d),i(c)):n((async t=>{var r;try{await k.__privateMethod.call(void 0,r=e,b,_).call(r,d)}catch(e){return t(e)}return t()}))}catch(e){return i(e)}}}async _promiseHandle(e){return new Promise(((t,r)=>{k.__privateMethod.call(void 0,this,u,h).call(this,e,((e,n)=>{e&&void 0===n?r(e):t(n)})).catch(r)}))}};i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakSet,c=function(){if(k.__privateGet.call(void 0,this,i))throw new Error("This engine is destroyed and can no longer be used.")},l=new WeakSet,d=async function(e,t){try{if(0===e.length){const e=[{id:null,jsonrpc:"2.0",error:new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}const r=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter((e=>void 0!==e));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}},u=new WeakSet,h=async function(e,t){var r;if(!e||Array.isArray(e)||"object"!=typeof e){const r=new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:null,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return k.__privateGet.call(void 0,this,s)&&!S.isJsonRpcRequest.call(void 0,e)?t(null):t(r,{id:e.id??null,jsonrpc:"2.0",error:r})}if(k.__privateGet.call(void 0,this,s)&&!S.isJsonRpcRequest.call(void 0,e)){try{await k.__privateGet.call(void 0,this,s).call(this,e)}catch(e){return t(e)}return t(null)}let n=null;const i={...e},o={id:i.id,jsonrpc:i.jsonrpc};try{await k.__privateMethod.call(void 0,r=x,f,m).call(r,i,o,k.__privateGet.call(void 0,this,a))}catch(e){n=e}return n&&(delete o.result,o.error||(o.error=E.serializeError.call(void 0,n))),t(n,o)},f=new WeakSet,m=async function(e,t,r){var n,i,a;const[s,o,c]=await k.__privateMethod.call(void 0,n=x,p,g).call(n,e,t,r);if(k.__privateMethod.call(void 0,i=x,w,T).call(i,e,t,o),await k.__privateMethod.call(void 0,a=x,b,_).call(a,c),s)throw s},p=new WeakSet,g=async function(e,t,r){var n;const i=[];let a=null,s=!1;for(const o of r)if([a,s]=await k.__privateMethod.call(void 0,n=x,v,y).call(n,e,t,o,i),s)break;return[a,s,i.reverse()]},v=new WeakSet,y=async function(e,t,r,n){return new Promise((i=>{const a=e=>{const r=e||t.error;r&&(t.error=E.serializeError.call(void 0,r)),i([r,!0])},s=r=>{t.error?a(t.error):(r&&("function"!=typeof r&&a(new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${C(e)}`,{request:e})),n.push(r)),i([null,!1]))};try{r(e,t,s,a)}catch(e){a(e)}}))},b=new WeakSet,_=async function(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))},w=new WeakSet,T=function(e,t,r){if(!S.hasProperty.call(void 0,t,"result")&&!S.hasProperty.call(void 0,t,"error"))throw new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${C(e)}`,{request:e});if(!r)throw new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${C(e)}`,{request:e})},k.__privateAdd.call(void 0,x,f),k.__privateAdd.call(void 0,x,p),k.__privateAdd.call(void 0,x,v),k.__privateAdd.call(void 0,x,b),k.__privateAdd.call(void 0,x,w);var A=x;function C(e){return JSON.stringify(e,null,2)}r.JsonRpcEngine=A}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-IPW2SZMY.js"}],[1552,{"./chunk-XDGWQHNY.js":1553},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-XDGWQHNY.js");r.createIdRemapMiddleware=function(){return(e,t,r,i)=>{const a=e.id,s=n.getUniqueId.call(void 0);e.id=s,t.id=s,r((r=>{e.id=a,t.id=a,r()}))}}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-PBQXMZM5.js"}],[1553,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=4294967295,i=Math.floor(Math.random()*n);r.getUniqueId=function(){return i=(i+1)%n}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-XDGWQHNY.js"}],[1554,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-Z4BLTVTB.js"}],[1555,{"./chunk-3AC2MIND.js":1548,"./chunk-ENMR2SJC.js":1549,"./chunk-I2BVUFWR.js":1550,"./chunk-IPW2SZMY.js":1551,"./chunk-PBQXMZM5.js":1552,"./chunk-XDGWQHNY.js":1553,"./chunk-Z4BLTVTB.js":1554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-ENMR2SJC.js"),i=e("./chunk-3AC2MIND.js"),a=e("./chunk-PBQXMZM5.js"),s=e("./chunk-XDGWQHNY.js"),o=e("./chunk-I2BVUFWR.js"),c=e("./chunk-IPW2SZMY.js");e("./chunk-Z4BLTVTB.js"),r.JsonRpcEngine=c.JsonRpcEngine,r.createAsyncMiddleware=n.createAsyncMiddleware,r.createIdRemapMiddleware=a.createIdRemapMiddleware,r.createScaffoldMiddleware=i.createScaffoldMiddleware,r.getUniqueId=s.getUniqueId,r.mergeMiddleware=o.mergeMiddleware}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/index.js"}],[1556,{"@metamask/base-controller":1561,"eth-rpc-errors":2865},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.RateLimitController=void 0;const i=e("eth-rpc-errors"),a=e("@metamask/base-controller"),s="RateLimitController",o={requests:{persist:!1,anonymous:!1}};class c extends a.BaseControllerV2{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:r,state:n,implementations:i}){const a={requests:Object.keys(i).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{}})),{})};super({name:s,metadata:o,messenger:r,state:Object.assign(Object.assign({},a),n)}),this.implementations=i,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${s}:call`,((e,t,...r)=>this.call(e,t,...r)))}call(e,t,...r){return n(this,void 0,void 0,(function*(){if(this.isRateLimited(t,e))throw i.ethErrors.rpc.limitExceeded({message:`"${t.toString()}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const n=this.implementations[t].method;if(!n)throw new Error("Invalid api type");return n(...r)}))}isRateLimited(e,t){var r;const n=null!==(r=this.implementations[e].rateLimitCount)&&void 0!==r?r:this.rateLimitCount;return this.state.requests[e][t]>=n}recordRequest(e,t){var r;const n=null!==(r=this.implementations[e].rateLimitTimeout)&&void 0!==r?r:this.rateLimitTimeout;this.update((r=>{var i;const a=null!==(i=r.requests[e][t])&&void 0!==i?i:0;r.requests[e][t]=a+1,0===a&&setTimeout((()=>this.resetRequestCount(e,t)),n)}))}resetRequestCount(e,t){this.update((r=>{r.requests[e][t]=0}))}}r.RateLimitController=c}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/RateLimitController.js"}],[1557,{"./RateLimitController":1556},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./RateLimitController"),r)}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/index.js"}],[1558,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1559,{immer:3256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const a=t[i];if(!a)throw new Error(`No metadata found for '${i}'`);const s=a[r],o=e[i];return"function"==typeof s?n[i]=s(o):s&&(n[i]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[156,{"@metamask/transaction-controller":1931,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");const a="sentEther";r.default={version:64,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r))for(const e of Object.values(r))e.type===a&&(e.type=i.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===a&&(e.type=i.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[1560,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1561,{"./BaseController":1558,"./BaseControllerV2":1559,"./ControllerMessenger":1560},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var a=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return a.BaseController}});var s=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return s.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return s.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return s.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/index.js"}],[157,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:65,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[1579,{"@metamask/base-controller":1068,"@metamask/swappable-obj-proxy":1901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,a,s,o,c,l=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},d=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectedNetworkController=r.SelectedNetworkControllerEventTypes=r.SelectedNetworkControllerActionTypes=r.METAMASK_DOMAIN=r.controllerName=void 0;const u=e("@metamask/base-controller"),h=e("@metamask/swappable-obj-proxy");r.controllerName="SelectedNetworkController";const f={domains:{persist:!0,anonymous:!1}};r.METAMASK_DOMAIN="metamask",r.SelectedNetworkControllerActionTypes={getState:`${r.controllerName}:getState`,getNetworkClientIdForDomain:`${r.controllerName}:getNetworkClientIdForDomain`,setNetworkClientIdForDomain:`${r.controllerName}:setNetworkClientIdForDomain`},r.SelectedNetworkControllerEventTypes={stateChange:`${r.controllerName}:stateChange`};class m extends u.BaseController{constructor({messenger:e,state:t={domains:{}},getUseRequestQueue:o}){super({name:r.controllerName,metadata:f,messenger:e,state:t}),n.add(this),i.set(this,new Map),a.set(this,void 0),l(this,a,o,"f"),d(this,n,"m",s).call(this),this.messagingSystem.call("PermissionController:getSubjectNames").filter((e=>this.state.domains[e]===undefined)).forEach((e=>this.setNetworkClientIdForDomain(e,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId))),this.messagingSystem.subscribe("PermissionController:stateChange",((e,t)=>{t.forEach((({op:e,path:t})=>{if("subjects"===t[0]&&t[1]!==undefined&&"string"==typeof t[1]){const r=t[1];"add"===e&&this.state.domains[r]===undefined?this.setNetworkClientIdForDomain(r,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId):"remove"===e&&this.state.domains[r]!==undefined&&this.update((({domains:e})=>{delete e[r]}))}}))})),this.messagingSystem.subscribe("NetworkController:stateChange",(({selectedNetworkClientId:e},t)=>{t.forEach((({op:t,path:r})=>{if("remove"===t&&"networkConfigurations"===r[0]){const t=r[1];Object.entries(this.state.domains).forEach((([r,n])=>{n===t&&this.setNetworkClientIdForDomain(r,e)}))}}))}))}setNetworkClientIdForDomain(e,t){if(e===r.METAMASK_DOMAIN)throw new Error(`NetworkClientId for domain "${r.METAMASK_DOMAIN}" cannot be set on the SelectedNetworkController`);if(!d(this,n,"m",c).call(this,e))throw new Error("NetworkClientId for domain cannot be called with a domain that has not yet been granted permissions");d(this,n,"m",o).call(this,e,t)}getNetworkClientIdForDomain(e){var t;const{selectedNetworkClientId:r}=this.messagingSystem.call("NetworkController:getState");return d(this,a,"f").call(this)&&null!==(t=this.state.domains[e])&&void 0!==t?t:r}getProviderAndBlockTracker(e){if(!d(this,a,"f").call(this))throw new Error("Provider and BlockTracker should be fetched from NetworkController when useRequestQueue is false");const t=this.state.domains[e];if(!t)throw new Error("NetworkClientId has not been set for the requested domain");let r=d(this,i,"f").get(e);if(r===undefined){const n=this.messagingSystem.call("NetworkController:getNetworkClientById",t);r={provider:(0,h.createEventEmitterProxy)(n.provider),blockTracker:(0,h.createEventEmitterProxy)(n.blockTracker,{eventFilter:"skipInternal"})},d(this,i,"f").set(e,r)}return r}}r.SelectedNetworkController=m,i=new WeakMap,a=new WeakMap,n=new WeakSet,s=function(){this.messagingSystem.registerActionHandler(r.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,this.getNetworkClientIdForDomain.bind(this)),this.messagingSystem.registerActionHandler(r.SelectedNetworkControllerActionTypes.setNetworkClientIdForDomain,this.setNetworkClientIdForDomain.bind(this))},o=function(e,t){const r=this.messagingSystem.call("NetworkController:getNetworkClientById",t),n=d(this,i,"f").get(e);n===undefined?d(this,i,"f").set(e,{provider:(0,h.createEventEmitterProxy)(r.provider),blockTracker:(0,h.createEventEmitterProxy)(r.blockTracker,{eventFilter:"skipInternal"})}):(n.provider.setTarget(r.provider),n.blockTracker.setTarget(r.blockTracker)),this.update((r=>{r.domains[e]=t}))},c=function(e){return this.messagingSystem.call("PermissionController:hasPermissions",e)}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkController.js"}],[158,{"../../../shared/constants/hardware-wallets":4126,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/hardware-wallets");r.default={version:66,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?i.LedgerTransportTypes.webhid:i.LedgerTransportTypes.u2f,n=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),a={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:n?i.LedgerTransportTypes.live:r}};return delete a.PreferencesController.useLedgerLive,a}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[1580,{"./SelectedNetworkController":1579},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectedNetworkMiddleware=void 0;const n=e("./SelectedNetworkController");r.createSelectedNetworkMiddleware=e=>(t,r,i)=>{if(!t.origin)throw new Error("Request object is lacking an 'origin'");var a;return t.networkClientId=(a=t.origin,e.call(n.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,a)),i()}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkMiddleware.js"}],[1581,{"./SelectedNetworkController":1579,"./SelectedNetworkMiddleware":1580},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectedNetworkMiddleware=r.METAMASK_DOMAIN=r.SelectedNetworkController=r.SelectedNetworkControllerEventTypes=r.SelectedNetworkControllerActionTypes=void 0;var n=e("./SelectedNetworkController");Object.defineProperty(r,"SelectedNetworkControllerActionTypes",{enumerable:!0,get:function(){return n.SelectedNetworkControllerActionTypes}}),Object.defineProperty(r,"SelectedNetworkControllerEventTypes",{enumerable:!0,get:function(){return n.SelectedNetworkControllerEventTypes}}),Object.defineProperty(r,"SelectedNetworkController",{enumerable:!0,get:function(){return n.SelectedNetworkController}}),Object.defineProperty(r,"METAMASK_DOMAIN",{enumerable:!0,get:function(){return n.METAMASK_DOMAIN}});var i=e("./SelectedNetworkMiddleware");Object.defineProperty(r,"createSelectedNetworkMiddleware",{enumerable:!0,get:function(){return i.createSelectedNetworkMiddleware}})}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/index.js"}],[1582,{"@metamask/base-controller":1068,"@metamask/controller-utils":1585,"@metamask/logging-controller":1335,"@metamask/message-manager":1349,"@metamask/rpc-errors":1566,buffer:2634,"ethereumjs-util":2896,events:2936,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,i,a,s,o,c,l,d,u,h,f,m,p,g,v,y,b,_,w,T,k,E,I,P,S,x,A,C,j,M,B=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))},N=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},O=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},L=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},R=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.SignatureController=void 0;const F=e("@metamask/base-controller"),G=e("@metamask/controller-utils"),H=e("@metamask/logging-controller"),D=e("@metamask/message-manager"),U=e("@metamask/rpc-errors"),W=e("ethereumjs-util"),$=R(e("events")),q=e("lodash"),V={unapprovedMsgs:{persist:!1,anonymous:!1},unapprovedPersonalMsgs:{persist:!1,anonymous:!1},unapprovedTypedMessages:{persist:!1,anonymous:!1},unapprovedMsgCount:{persist:!1,anonymous:!1},unapprovedPersonalMsgCount:{persist:!1,anonymous:!1},unapprovedTypedMessagesCount:{persist:!1,anonymous:!1}};class K extends F.BaseController{constructor({messenger:e,isEthSignEnabled:t,getAllState:r,securityProviderRequest:l,getCurrentChainId:d}){super({name:"SignatureController",metadata:V,messenger:e,state:{unapprovedMsgs:{},unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedMsgCount:0,unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0}}),n.add(this),i.set(this,void 0),a.set(this,void 0),s.set(this,void 0),o.set(this,void 0),c.set(this,void 0),N(this,i,t,"f"),N(this,a,r,"f"),this.hub=new $.default,N(this,s,new D.MessageManager(undefined,undefined,l),"f"),N(this,o,new D.PersonalMessageManager(undefined,undefined,l),"f"),N(this,c,new D.TypedMessageManager(undefined,undefined,l,undefined,d),"f"),O(this,n,"m",k).call(this,O(this,s,"f"),"unapprovedMessage"),O(this,n,"m",k).call(this,O(this,o,"f"),"unapprovedPersonalMessage"),O(this,n,"m",k).call(this,O(this,c,"f"),"unapprovedTypedMessage"),O(this,n,"m",E).call(this,O(this,s,"f"),((e,t,r)=>{e.unapprovedMsgs=t,e.unapprovedMsgCount=r})),O(this,n,"m",E).call(this,O(this,o,"f"),((e,t,r)=>{e.unapprovedPersonalMsgs=t,e.unapprovedPersonalMsgCount=r})),O(this,n,"m",E).call(this,O(this,c,"f"),((e,t,r)=>{e.unapprovedTypedMessages=t,e.unapprovedTypedMessagesCount=r}))}get unapprovedMsgCount(){return O(this,s,"f").getUnapprovedMessagesCount()}get unapprovedPersonalMessagesCount(){return O(this,o,"f").getUnapprovedMessagesCount()}get unapprovedTypedMessagesCount(){return O(this,c,"f").getUnapprovedMessagesCount()}get messages(){return[...O(this,c,"f").getAllMessages(),...O(this,o,"f").getAllMessages(),...O(this,s,"f").getAllMessages()].reduce(((e,t)=>(e[t.id]=t,e)),{})}resetState(){this.update((()=>({unapprovedMsgs:{},unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedMsgCount:0,unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0})))}rejectUnapproved(e){O(this,n,"m",y).call(this,O(this,s,"f"),e),O(this,n,"m",y).call(this,O(this,o,"f"),e),O(this,n,"m",y).call(this,O(this,c,"f"),e)}clearUnapproved(){O(this,n,"m",b).call(this,O(this,s,"f")),O(this,n,"m",b).call(this,O(this,o,"f")),O(this,n,"m",b).call(this,O(this,c,"f"))}newUnsignedMessage(e,t){return B(this,void 0,void 0,(function*(){return O(this,n,"m",d).call(this,O(this,s,"f"),G.ApprovalType.EthSign,H.SigningMethod.EthSign,"Message",O(this,n,"m",u).bind(this),e,t,O(this,n,"m",l).bind(this))}))}newUnsignedPersonalMessage(e,t){return B(this,void 0,void 0,(function*(){return O(this,n,"m",d).call(this,O(this,o,"f"),G.ApprovalType.PersonalSign,H.SigningMethod.PersonalSign,"Personal Message",O(this,n,"m",h).bind(this),e,t)}))}newUnsignedTypedMessage(e,t,r,i){return B(this,void 0,void 0,(function*(){const a=O(this,n,"m",M).call(this,r);return O(this,n,"m",d).call(this,O(this,c,"f"),G.ApprovalType.EthSignTypedData,a,"Typed Message",O(this,n,"m",f).bind(this),e,t,undefined,r,i)}))}setDeferredSignSuccess(e,t){O(this,n,"m",m).call(this,O(this,n,"m",p),e,t)}setMessageMetadata(e,t){O(this,n,"m",m).call(this,O(this,n,"m",g),e,t)}setDeferredSignError(e){O(this,n,"m",m).call(this,O(this,n,"m",v),e)}setTypedMessageInProgress(e){O(this,c,"f").setMessageStatusInProgress(e)}setPersonalMessageInProgress(e){O(this,o,"f").setMessageStatusInProgress(e)}}r.SignatureController=K,i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakMap,n=new WeakSet,l=function(e){if(!O(this,i,"f").call(this))throw U.rpcErrors.methodNotFound("eth_sign has been disabled. You must enable it in the advanced settings");const t=O(this,n,"m",S).call(this,e.data);if(66!==t.length&&67!==t.length)throw U.rpcErrors.invalidParams("eth_sign requires 32 byte message hash")},d=function(e,t,r,i,a,s,o,c,l,d){return B(this,void 0,void 0,(function*(){let u;c&&c(s);try{const c=yield e.addUnapprovedMessage(s,o,l),h=Object.assign(Object.assign(Object.assign({},s),{metamaskId:c}),l&&{version:l}),f=e.waitForFinishStatus(h,i);try{O(this,n,"m",j).call(this,r,H.SigningStage.Proposed,h);u=(yield O(this,n,"m",A).call(this,h,t)).resultCallbacks}catch(t){throw O(this,n,"m",j).call(this,r,H.SigningStage.Rejected,h),O(this,n,"m",T).call(this,e,c),U.providerErrors.userRejectedRequest("User rejected the request.")}yield a(h,d);const m=yield f;return O(this,n,"m",j).call(this,r,H.SigningStage.Signed,h),null==u||u.success(m),m}catch(e){throw null==u||u.error(e),e}}))},u=function(e){return B(this,void 0,void 0,(function*(){return yield O(this,n,"m",_).call(this,O(this,s,"f"),G.ApprovalType.EthSign,e,(e=>B(this,void 0,void 0,(function*(){return yield this.messagingSystem.call("KeyringController:signMessage",e)}))))}))},h=function(e){return B(this,void 0,void 0,(function*(){return yield O(this,n,"m",_).call(this,O(this,o,"f"),G.ApprovalType.PersonalSign,e,(e=>B(this,void 0,void 0,(function*(){return yield this.messagingSystem.call("KeyringController:signPersonalMessage",e)}))))}))},f=function(e,t={parseJsonData:!0}){return B(this,void 0,void 0,(function*(){const{version:r}=e;return yield O(this,n,"m",_).call(this,O(this,c,"f"),G.ApprovalType.EthSignTypedData,e,(e=>B(this,void 0,void 0,(function*(){const i=t.parseJsonData?O(this,n,"m",C).call(this,e,r):e;return yield this.messagingSystem.call("KeyringController:signTypedMessage",i,r)}))))}))},m=function(e,...t){const r=[O(this,s,"f"),O(this,o,"f"),O(this,c,"f")];for(const n of r)if(e(n,...t))return!0;throw new Error("Message not found")},p=function(e,t,r){try{return e.setMessageStatusSigned(t,r),!0}catch(e){return!1}},g=function(e,t,r){try{return e.setMetadata(t,r),!0}catch(e){return!1}},v=function(e,t){try{return e.rejectMessage(t),!0}catch(e){return!1}},y=function(e,t){Object.keys(e.getUnapprovedMessages()).forEach((r=>{O(this,n,"m",T).call(this,e,r,t)}))},b=function(e){e.update({unapprovedMessages:{},unapprovedMessagesCount:0})},_=function(e,t,r,i){return B(this,void 0,void 0,(function*(){console.info(`MetaMaskController - ${t}`);const a=r.metamaskId;try{const n=yield e.approveMessage(r);try{const r=yield i(n);return this.hub.emit(`${t}:signed`,{signature:r,messageId:a}),n.deferSetAsSigned||e.setMessageStatusSigned(a,r),r}catch(e){throw this.hub.emit(`${a}:signError`,{error:e}),e}}catch(r){throw console.info(`MetaMaskController - ${t} failed.`,r),O(this,n,"m",w).call(this,e,a,r.message),r}}))},w=function(e,t,r){e instanceof D.TypedMessageManager?e.setMessageStatusErrored(t,r):O(this,n,"m",T).call(this,e,t)},T=function(e,t,r){if(r){const e=O(this,n,"m",x).call(this,t);this.hub.emit("cancelWithReason",{message:e,reason:r})}e.rejectMessage(t)},k=function(e,t){e.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),e.hub.on("unapprovedMessage",(e=>{this.hub.emit(t,e)}))},E=function(e,t){e.subscribe((e=>{const r=O(this,n,"m",I).call(this,e.unapprovedMessages);this.update((()=>{const n=Object.assign({},this.state);return t(n,r,e.unapprovedMessagesCount),n}))}))},I=function(e){const t={};for(const r of Object.keys(e)){const i=e[r],a=O(this,n,"m",P).call(this,i);t[r]=a}return t},P=function(e){const{messageParams:t}=e,r=L(e,["messageParams"]);return Object.assign(Object.assign({},r),{msgParams:t})},S=function(e){return e.startsWith("0x")?e:(0,W.bufferToHex)(t.from(e,"utf8"))},x=function(e){return Object.assign(Object.assign(Object.assign({},this.state.unapprovedMsgs),this.state.unapprovedPersonalMsgs),this.state.unapprovedTypedMessages)[e]},A=function(e,t){return B(this,void 0,void 0,(function*(){const r=e.metamaskId,n=e.origin||G.ORIGIN_METAMASK,i=(0,q.cloneDeep)(e);return yield this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t,requestData:i,expectsResult:!0},!0)}))},C=function(e,t){return"V1"===t||"string"!=typeof e.data?e:Object.assign(Object.assign({},e),{data:JSON.parse(e.data)})},j=function(e,t,r){this.messagingSystem.call("LoggingController:add",{type:H.LogType.EthSignLog,data:{signingMethod:e,stage:t,signingData:r}})},M=function(e){let t=H.SigningMethod.EthSignTypedData;return"V3"===e?t=H.SigningMethod.EthSignTypedDataV3:"V4"===e&&(t=H.SigningMethod.EthSignTypedDataV4),t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/SignatureController.js"}],[1583,{"./SignatureController":1582},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./SignatureController"),r)}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/index.js"}],[1584,{"./types":1588},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1585,{"./constants":1584,"./siwe":1587,"./types":1588,"./util":1589},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r),i(e("./siwe"),r)}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1586,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/logger.js"}],[1587,{"./logger":1586,"@metamask/utils":1982,"@spruceid/siwe-parser":2189,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),a=e("./logger"),s=(0,a.createModuleLogger)(a.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:(0,n.remove0x)(r),a=t.from(i,"hex");return 32===a.length?e:a.toString("utf8")}catch(t){return s(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:i}=e;if(!n||!(null===(t=null==i?void 0:i.parsedMessage)||void 0===t?void 0:t.domain))return!1;const a=new URL(n),s=(0,r.parseDomainParts)(i.parsedMessage.domain,a.protocol);return 0===s.hostname.localeCompare(a.hostname,undefined,{sensitivity:"accent"})&&(""!==s.port&&s.port!==a.port?""===a.port&&s.port===c[a.protocol]:""===s.username||s.username===a.username)}catch(e){return s(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new i.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1588,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1589,{"./constants":1584,"@ethereumjs/util":400,"@metamask/ethjs-unit":1226,"@metamask/utils":1982,"bn.js":2586,buffer:2634,"eth-ens-namehash":2833,"fast-deep-equal":2964},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const a=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=i(e("bn.js")),l=i(e("eth-ens-namehash")),d=i(e("fast-deep-equal")),u=e("./constants"),h=new Error("timeout");function f(e){return e?new c.default((0,o.remove0x)(e),16):new c.default(0)}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield m(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=u.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.default(t),i=new c.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,s.toWei)(r,"gwei");if(n.length<=9)return(0,s.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let a=(0,s.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(a=a.add(new c.default(1))),a},r.weiHexToGweiDec=function(e){const t=new c.default((0,o.remove0x)(e),16);return(0,s.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new c.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.default.isBN(e)?e.toString(16):new c.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,a.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,a.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=m,r.handleFetch=p,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield p(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const a=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,a):e.sendAsync({method:t,params:r},a)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,d.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[159,{"../../../shared/constants/network":4131,"bignumber.js":2539,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("lodash"),a=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},s=e("../../../shared/constants/network");const o=e=>new a.default(e||"0x0",16).gt(0);r.default={version:67,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,n;const i=(null==e?void 0:e.PreferencesController)||{},a=i.preferences||{};if(a.showTestNetworks)return e;const c=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},l=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},d=(null===(n=e.CachedBalancesController)||void 0===n?void 0:n.cachedBalances)||{},u=s.TEST_CHAINS.includes(null==l?void 0:l.chainId),h=Object.values(c).some((({chainId:e})=>s.TEST_CHAINS.includes(e))),f=s.TEST_CHAINS.some((e=>Object.values(d[e]||{}).some(o))),m=u||h||f,p={...e,PreferencesController:{...i,preferences:{...a,showTestNetworks:m}}};return p}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[1591,{"./constants":1592,"./types":1594,"./utils":1595,"@ethersproject/bytes":438,"@metamask/controller-utils":1648,"@metamask/eth-query":1149,"@metamask/polling-controller":1501,"@metamask/transaction-controller":1702,"bignumber.js":1739,events:2936,"lodash/cloneDeep":3457},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,a,s,o,c,l,d=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_INTERVAL=void 0;const h=e("@ethersproject/bytes"),f=e("@metamask/controller-utils"),m=u(e("@metamask/eth-query")),p=e("@metamask/polling-controller"),g=e("@metamask/transaction-controller"),v=e("bignumber.js"),y=u(e("events")),b=u(e("lodash/cloneDeep")),_=e("./constants"),w=e("./types"),T=e("./utils");r.DEFAULT_INTERVAL=5e3;const k="`ethQuery` is not defined on SmartTransactionsController";class E extends p.StaticIntervalPollingControllerV1{constructor({onNetworkStateChange:e,getNonceLock:t,provider:i,confirmExternalTransaction:a,getTransactions:s,trackMetaMetricsEvent:o,getNetworkClientById:c},l,d){super(l,d),n.add(this),this.name="SmartTransactionsController",this.defaultConfig={interval:r.DEFAULT_INTERVAL,chainId:_.CHAIN_IDS.ETHEREUM,clientId:"default",supportedChainIds:[_.CHAIN_IDS.ETHEREUM,_.CHAIN_IDS.GOERLI]},this.defaultState={smartTransactionsState:{smartTransactions:{},userOptIn:undefined,userOptInV2:undefined,fees:{approvalTxFees:undefined,tradeTxFees:undefined},liveness:!0,livenessByChainId:{[_.CHAIN_IDS.ETHEREUM]:!0,[_.CHAIN_IDS.GOERLI]:!0},feesByChainId:{[_.CHAIN_IDS.ETHEREUM]:{approvalTxFees:undefined,tradeTxFees:undefined},[_.CHAIN_IDS.GOERLI]:{approvalTxFees:undefined,tradeTxFees:undefined}}}},this.initialize(),this.setIntervalLength(this.config.interval),this.getNonceLock=t,this.ethQuery=undefined,this.confirmExternalTransaction=a,this.getRegularTransactions=s,this.trackMetaMetricsEvent=o,this.getNetworkClientById=c,this.initializeSmartTransactionsForChainId(),e((({providerConfig:e})=>{const{chainId:t}=e;this.configure({chainId:t}),this.initializeSmartTransactionsForChainId(),this.checkPoll(this.state),this.ethQuery=new m.default(i)})),this.subscribe((e=>this.checkPoll(e))),this.eventEmitter=new y.default}async fetch(e,t){const{clientId:r}=this.config,n=Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json"},r&&{"X-Client-Id":r})});return(0,T.handleFetch)(e,n)}async _executePoll(e){const t=d(this,n,"m",o).call(this,{networkClientId:e});return this.config.supportedChainIds.includes(t)?this.updateSmartTransactions({networkClientId:e}):Promise.resolve()}checkPoll(e){const{smartTransactions:t}=e.smartTransactionsState,r=t[this.config.chainId],n=null==r?void 0:r.filter(T.isSmartTransactionPending);!this.timeoutHandle&&(null==n?void 0:n.length)>0?this.poll():this.timeoutHandle&&0===(null==n?void 0:n.length)&&this.stop()}initializeSmartTransactionsForChainId(){var e;if(this.config.supportedChainIds.includes(this.config.chainId)){const{smartTransactionsState:t}=this.state;this.update({smartTransactionsState:Object.assign(Object.assign({},t),{smartTransactions:Object.assign(Object.assign({},t.smartTransactions),{[this.config.chainId]:null!==(e=t.smartTransactions[this.config.chainId])&&void 0!==e?e:[]})})})}}async poll(e){const{chainId:t,supportedChainIds:r}=this.config;e&&this.configure({interval:e},!1,!1),this.timeoutHandle&&clearInterval(this.timeoutHandle),r.includes(t)&&(await(0,f.safelyExecute)((async()=>this.updateSmartTransactions())),this.timeoutHandle=setInterval((()=>{(0,f.safelyExecute)((async()=>this.updateSmartTransactions()))}),this.config.interval))}async stop(){this.timeoutHandle&&clearInterval(this.timeoutHandle),this.timeoutHandle=undefined}setOptInState(e){this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{userOptInV2:e})})}trackStxStatusChange(e,t){if(!t)return;let r=(0,b.default)(e);if(r=Object.assign(Object.assign({},(0,b.default)(t)),r),!r.swapMetaData||r.status===t.status&&t.swapMetaData)return;const n={stx_status:r.status,token_from_symbol:r.sourceTokenSymbol,token_to_symbol:r.destinationTokenSymbol,processing_time:(0,T.getStxProcessingTime)(r.time),stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:!0};this.trackMetaMetricsEvent({event:_.MetaMetricsEventName.StxStatusUpdated,category:_.MetaMetricsEventCategory.Transactions,sensitiveProperties:n})}isNewSmartTransaction(e){const{chainId:t}=this.config,{smartTransactionsState:r}=this.state,{smartTransactions:n}=r,i=n[t],a=null==i?void 0:i.findIndex((t=>t.uuid===e));return-1===a||a===undefined}updateSmartTransaction(e,{networkClientId:t}={}){let{ethQuery:r,config:{chainId:a}}=this;if(t){const e=this.getNetworkClientById(t);a=e.configuration.chainId,r=new m.default(e.provider)}d(this,n,"m",i).call(this,e,{chainId:a,ethQuery:r})}async updateSmartTransactions({networkClientId:e}={}){const{smartTransactions:t}=this.state.smartTransactionsState,r=t[d(this,n,"m",o).call(this,{networkClientId:e})].filter(T.isSmartTransactionPending).map((e=>e.uuid));r.length>0&&this.fetchSmartTransactionsStatus(r,{networkClientId:e})}async fetchSmartTransactionsStatus(e,{networkClientId:t}={}){const r=new URLSearchParams({uuids:e.join(",")}),a=d(this,n,"m",o).call(this,{networkClientId:t}),s=d(this,n,"m",c).call(this,{networkClientId:t}),l=`${(0,T.getAPIRequestURL)(w.APIType.BATCH_STATUS,a)}?${r.toString()}`,u=await this.fetch(l);return Object.entries(u).forEach((([e,t])=>{const r={statusMetadata:t,status:(0,T.calculateStatus)(t),cancellable:(0,T.isSmartTransactionCancellable)(t),uuid:e};d(this,n,"m",i).call(this,r,{chainId:a,ethQuery:s})})),u}async addNonceToTransaction(e){const t=await this.getNonceLock(e.from),r=t.nextNonce;return t.releaseLock(),Object.assign(Object.assign({},e),{nonce:`0x${r.toString(16)}`})}clearFees(){const e={approvalTxFees:undefined,tradeTxFees:undefined};return this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{fees:e})}),e}async getFees(e,t,{networkClientId:r}={}){const i=d(this,n,"m",o).call(this,{networkClientId:r}),a=[];let s;if(t){const r=await this.addNonceToTransaction(t);a.push(r),s=Object.assign(Object.assign({},e),{nonce:(0,T.incrementNonceInHex)(r.nonce)})}else s=e.nonce?e:await this.addNonceToTransaction(e);a.push(s);const c=await this.fetch((0,T.getAPIRequestURL)(w.APIType.GET_FEES,i),{method:"POST",body:JSON.stringify({txs:a})});let l,u;return t?(l=null==c?void 0:c.txs[0],u=null==c?void 0:c.txs[1]):u=null==c?void 0:c.txs[0],this.update({smartTransactionsState:Object.assign(Object.assign(Object.assign({},this.state.smartTransactionsState),i===this.config.chainId&&{fees:{approvalTxFees:l,tradeTxFees:u}}),{feesByChainId:Object.assign(Object.assign({},this.state.smartTransactionsState.feesByChainId),{[i]:{approvalTxFees:l,tradeTxFees:u}})})}),{approvalTxFees:l,tradeTxFees:u}}async submitSignedTransactions({transactionMeta:e,txParams:t,signedTransactions:r,signedCanceledTransactions:a,networkClientId:s}){var l;const u=d(this,n,"m",o).call(this,{networkClientId:s}),m=d(this,n,"m",c).call(this,{networkClientId:s}),p=await this.fetch((0,T.getAPIRequestURL)(w.APIType.SUBMIT_TRANSACTIONS,u),{method:"POST",body:JSON.stringify({rawTxs:r,rawCancelTxs:a})}),g=Date.now();let y;try{const e=await(0,f.query)(m,"getBalance",[null==t?void 0:t.from]);y=new v.BigNumber(e).toString(16)}catch(e){console.error("provider error",e)}let b,_,k={};!t.nonce&&(_=await this.getNonceLock(null==t?void 0:t.from),b=(0,h.hexlify)(_.nextNonce),k=_.nonceDetails,t&&(null!==(l=t.nonce)&&void 0!==l||(t.nonce=b)));const E=Object.assign(Object.assign({},p),{txHash:(0,T.getTxHash)(r[0])});try{d(this,n,"m",i).call(this,{chainId:u,nonceDetails:k,preTxBalance:y,status:w.SmartTransactionStatuses.PENDING,time:g,txParams:t,uuid:E.uuid,txHash:E.txHash,cancellable:!0,type:(null==e?void 0:e.type)||"swap"},{chainId:u,ethQuery:m})}finally{null==_||_.releaseLock()}return E}async cancelSmartTransaction(e,{networkClientId:t}={}){const r=d(this,n,"m",o).call(this,{networkClientId:t});await this.fetch((0,T.getAPIRequestURL)(w.APIType.CANCEL,r),{method:"POST",body:JSON.stringify({uuid:e})})}async fetchLiveness({networkClientId:e}={}){const t=d(this,n,"m",o).call(this,{networkClientId:e});let r=!1;try{const e=await this.fetch((0,T.getAPIRequestURL)(w.APIType.LIVENESS,t));r=Boolean(e.lastBlock)}catch(e){console.log('"fetchLiveness" API call failed')}return this.update({smartTransactionsState:Object.assign(Object.assign(Object.assign({},this.state.smartTransactionsState),t===this.config.chainId&&{liveness:r}),{livenessByChainId:Object.assign(Object.assign({},this.state.smartTransactionsState.livenessByChainId),{[t]:r})})}),r}async setStatusRefreshInterval(e){e!==this.config.interval&&this.configure({interval:e},!1,!1)}getTransactions({addressFrom:e,status:t}){return d(this,n,"m",l).call(this).filter((r=>{var n;return r.status===t&&(null===(n=r.txParams)||void 0===n?void 0:n.from)===e}))}getSmartTransactionByMinedTxHash(e){if(!e)return undefined;return d(this,n,"m",l).call(this).find((t=>{var r,n;return(null===(n=null===(r=t.statusMetadata)||void 0===r?void 0:r.minedHash)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()}))}}r.default=E,n=new WeakSet,i=async function(e,{chainId:t=this.config.chainId,ethQuery:r=this.ethQuery}){var i;const{smartTransactionsState:a}=this.state,{smartTransactions:o}=a,c=null!==(i=o[t])&&void 0!==i?i:[],l=null==c?void 0:c.findIndex((t=>t.uuid===e.uuid)),u=this.isNewSmartTransaction(e.uuid);if(this.ethQuery===undefined)throw new Error(k);if(this.trackStxStatusChange(e,u?undefined:c[l]),u){const r=null==c?void 0:c.findIndex((t=>{var r,n,i;return(null===(r=t.txParams)||void 0===r?void 0:r.nonce)===(null===(n=e.txParams)||void 0===n?void 0:n.nonce)&&(null===(i=t.status)||void 0===i?void 0:i.startsWith("cancelled"))})),n=[(0,b.default)(e)],i=Object.assign(Object.assign({},e),{history:n}),s=r>-1?c.slice(0,r).concat(c.slice(r+1)).concat(i):c.concat(i);this.update({smartTransactionsState:Object.assign(Object.assign({},a),{smartTransactions:Object.assign(Object.assign({},a.smartTransactions),{[t]:s})})})}else{if(e.status!==w.SmartTransactionStatuses.SUCCESS&&e.status!==w.SmartTransactionStatuses.REVERTED||e.confirmed)this.update({smartTransactionsState:Object.assign(Object.assign({},a),{smartTransactions:Object.assign(Object.assign({},a.smartTransactions),{[t]:a.smartTransactions[t].map(((t,r)=>r===l?Object.assign(Object.assign({},t),e):t))})})});else{const i=c[l],a=Object.assign(Object.assign({},i),e);await d(this,n,"m",s).call(this,a,{chainId:t,ethQuery:r})}this.eventEmitter.emit(`${e.uuid}:smartTransaction`,e)}},a=function(e){if(!e)return!0;const t=this.getRegularTransactions(),r=null==t?void 0:t.find((t=>{var r;return(null===(r=t.hash)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()}));return!r||![g.TransactionStatus.confirmed,g.TransactionStatus.submitted].includes(r.status)},s=async function(e,{chainId:t=this.config.chainId,ethQuery:r=this.ethQuery}){var s;if(r===undefined)throw new Error(k);const o=null===(s=e.statusMetadata)||void 0===s?void 0:s.minedHash;try{const s=await(0,f.query)(r,"getTransactionReceipt",[o]),c=await(0,f.query)(r,"getTransactionByHash",[o]),l=null==c?void 0:c.maxFeePerGas,u=null==c?void 0:c.maxPriorityFeePerGas;if(null==s?void 0:s.blockNumber){const c=await(0,f.query)(r,"getBlockByNumber",[null==s?void 0:s.blockNumber,!1]),h=null==c?void 0:c.baseFeePerGas,m=Object.assign(Object.assign({},e.txParams),{maxFeePerGas:l,maxPriorityFeePerGas:u}),p=Object.assign(Object.assign({},e),{id:e.uuid,status:g.TransactionStatus.confirmed,hash:o,txParams:m}),v=(0,T.snapshotFromTxMeta)(p),y=(0,T.replayHistory)(p.history),b=(0,T.generateHistoryEntry)(y,v,"txStateManager: setting status to confirmed"),w=b.length>0?Object.assign(Object.assign({},p),{history:p.history.concat(b)}):p;d(this,n,"m",a).call(this,o)&&this.confirmExternalTransaction(w,s,h),this.trackMetaMetricsEvent({event:_.MetaMetricsEventName.StxConfirmed,category:_.MetaMetricsEventCategory.Transactions}),d(this,n,"m",i).call(this,Object.assign(Object.assign({},e),{confirmed:!0}),{chainId:t,ethQuery:r})}}catch(e){this.trackMetaMetricsEvent({event:_.MetaMetricsEventName.StxConfirmationFailed,category:_.MetaMetricsEventCategory.Transactions}),console.error("confirm error",e)}},o=function({networkClientId:e}={}){return e?this.getNetworkClientById(e).configuration.chainId:this.config.chainId},c=function({networkClientId:e}={}){if(e)return new m.default(this.getNetworkClientById(e).provider);if(this.ethQuery===undefined)throw new Error(k);return this.ethQuery},l=function(){const{smartTransactions:e}=this.state.smartTransactionsState,{chainId:t}=this.config,r=null==e?void 0:e[t];return r&&0!==r.length?r:[]}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/SmartTransactionsController.js"}],[1592,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsEventCategory=r.MetaMetricsEventName=r.CHAIN_IDS=r.API_BASE_URL=void 0,r.API_BASE_URL="https://transaction.api.cx.metamask.io",r.CHAIN_IDS={ETHEREUM:"0x1",GOERLI:"0x5",RINKEBY:"0x4",BSC:"0x38"},function(e){e.StxStatusUpdated="STX Status Updated",e.StxConfirmed="STX Confirmed",e.StxConfirmationFailed="STX Confirmation Failed"}(r.MetaMetricsEventName||(r.MetaMetricsEventName={})),function(e){e.Transactions="Transactions"}(r.MetaMetricsEventCategory||(r.MetaMetricsEventCategory={}))}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/constants.js"}],[1593,{"./SmartTransactionsController":1591},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e("./SmartTransactionsController"));r.default=i.default}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/index.js"}],[1595,{"../package.json":1743,"./constants":1592,"./types":1594,"@ethereumjs/tx":1611,"@ethereumjs/util":1636,"@ethersproject/bytes":438,"bignumber.js":1739,buffer:2634,"fast-json-patch":2970,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getTxHash=r.incrementNonceInHex=r.isSmartTransactionCancellable=r.handleFetch=r.mapKeysToCamel=r.getStxProcessingTime=r.snapshotFromTxMeta=r.replayHistory=r.generateHistoryEntry=r.calculateStatus=r.getAPIRequestURL=r.isSmartTransactionStatusResolved=r.isSmartTransactionPending=void 0;const i=e("@ethereumjs/tx"),a=e("@ethereumjs/util"),s=e("@ethersproject/bytes"),o=e("bignumber.js"),c=n(e("fast-json-patch")),l=n(e("lodash")),d=e("./constants"),u=e("./types"),h=n(e("../package.json"));r.isSmartTransactionPending=function(e){return e.status===u.SmartTransactionStatuses.PENDING};r.isSmartTransactionStatusResolved=e=>"uuid_not_found"===e,r.getAPIRequestURL=function(e,t){const r=parseInt(t,16);switch(e){case u.APIType.GET_FEES:return`${d.API_BASE_URL}/networks/${r}/getFees`;case u.APIType.ESTIMATE_GAS:return`${d.API_BASE_URL}/networks/${r}/estimateGas`;case u.APIType.SUBMIT_TRANSACTIONS:return`${d.API_BASE_URL}/networks/${r}/submitTransactions?stxControllerVersion=${h.default.version}`;case u.APIType.CANCEL:return`${d.API_BASE_URL}/networks/${r}/cancel`;case u.APIType.BATCH_STATUS:return`${d.API_BASE_URL}/networks/${r}/batchStatus`;case u.APIType.LIVENESS:return`${d.API_BASE_URL}/networks/${r}/health`;default:throw new Error("Invalid APIType")}};r.calculateStatus=e=>{if((0,r.isSmartTransactionStatusResolved)(e))return u.SmartTransactionStatuses.RESOLVED;const t=[u.SmartTransactionCancellationReason.WOULD_REVERT,u.SmartTransactionCancellationReason.TOO_CHEAP,u.SmartTransactionCancellationReason.DEADLINE_MISSED,u.SmartTransactionCancellationReason.INVALID_NONCE,u.SmartTransactionCancellationReason.USER_CANCELLED,u.SmartTransactionCancellationReason.PREVIOUS_TX_CANCELLED];if((null==e?void 0:e.minedTx)===u.SmartTransactionMinedTx.NOT_MINED){if(e.cancellationReason===u.SmartTransactionCancellationReason.NOT_CANCELLED)return u.SmartTransactionStatuses.PENDING;const r=t.findIndex((t=>t===e.cancellationReason))>-1;if(e.cancellationReason&&r)return e.isSettled?u.cancellationReasonToStatusMap[e.cancellationReason]:u.SmartTransactionStatuses.PENDING}else{if((null==e?void 0:e.minedTx)===u.SmartTransactionMinedTx.SUCCESS)return u.SmartTransactionStatuses.SUCCESS;if((null==e?void 0:e.minedTx)===u.SmartTransactionMinedTx.CANCELLED)return u.SmartTransactionStatuses.CANCELLED;if((null==e?void 0:e.minedTx)===u.SmartTransactionMinedTx.REVERTED)return u.SmartTransactionStatuses.REVERTED;if((null==e?void 0:e.minedTx)===u.SmartTransactionMinedTx.UNKNOWN)return u.SmartTransactionStatuses.UNKNOWN}return u.SmartTransactionStatuses.UNKNOWN},r.generateHistoryEntry=function(e,t,r){const n=c.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n},r.replayHistory=function(e){return l.default.cloneDeep(e).reduce(((e,t)=>c.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t=Object.assign({},e);return delete t.history,l.default.cloneDeep(t)};r.getStxProcessingTime=e=>e?Math.round((Date.now()-e)/1e3):undefined;r.mapKeysToCamel=e=>{if(!l.default.isObject(e))return e;const t=l.default.mapValues(e,(e=>l.default.isArray(e)?e.map(r.mapKeysToCamel):l.default.isObject(e)?(0,r.mapKeysToCamel)(e):e));return l.default.mapKeys(t,((e,t)=>l.default.camelCase(t)))},r.handleFetch=async function(e,t){const n=await fetch(e,t),i=await n.json();if(!n.ok)throw console.log("response",n),new Error(`Fetch error:${JSON.stringify(Object.assign({status:n.status},(0,r.mapKeysToCamel)(i)))}`);return i};r.isSmartTransactionCancellable=e=>e.minedTx===u.SmartTransactionMinedTx.NOT_MINED&&(!e.cancellationReason||e.cancellationReason===u.SmartTransactionCancellationReason.NOT_CANCELLED);r.incrementNonceInHex=e=>{const t=new o.BigNumber(e,16).toString(10);return(0,s.hexlify)(Number(t)+1)};r.getTxHash=e=>{if(!e)return"";const r=i.TransactionFactory.fromSerializedData(t.from(e.slice(2),"hex")).hash();return(0,a.bytesToHex)(r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/utils.js"}],[1596,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,i)}t.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var s=e.apply(t,r);function o(e){n(s,i,a,o,c,"next",e)}function c(e){n(s,i,a,o,c,"throw",e)}o(undefined)}))}},t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/asyncToGenerator.js"}],[1597,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/interopRequireDefault.js"}],[1598,{"./typeof.js":1599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./typeof.js").default;function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t.exports=i=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var e,r={},a=Object.prototype,s=a.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:A(e,r,s)}),a}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var p="suspendedStart",g="suspendedYield",v="executing",y="completed",b={};function _(){}function w(){}function T(){}var k={};h(k,l,(function(){return this}));var E=Object.getPrototypeOf,I=E&&E(E(N([])));I&&I!==a&&s.call(I,l)&&(k=I);var P=T.prototype=_.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,c){var l=m(e[i],e,a);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==n(u)&&s.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,o,c)}),(function(e){r("throw",e,o,c)})):t.resolve(u).then((function(e){d.value=e,o(d)}),(function(e){return r("throw",e,o,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}})}function A(t,r,n){var i=p;return function(a,s){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw s;return{value:e,done:!0}}for(n.method=a,n.arg=s;;){var o=n.delegate;if(o){var c=C(o,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var l=m(t,r,n);if("normal"===l.type){if(i=n.done?y:g,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=m(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var s=a.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(s.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(n(t)+" is not iterable")}return w.prototype=T,o(P,"constructor",{value:T,configurable:!0}),o(T,"constructor",{value:w,configurable:!0}),w.displayName=h(T,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,h(e,u,"GeneratorFunction")),e.prototype=Object.create(P),e},r.awrap=function(e){return{__await:e}},S(x.prototype),h(x.prototype,d,(function(){return this})),r.AsyncIterator=x,r.async=function(e,t,n,i,a){void 0===a&&(a=Promise);var s=new x(f(e,t,n,i),a);return r.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},S(P),h(P,u,"Generator"),h(P,l,(function(){return this})),h(P,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=N,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var r in this)"t"===r.charAt(0)&&s.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,i){return o.type="throw",o.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=s.call(a,"catchLoc"),l=s.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},r}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/regeneratorRuntime.js"}],[1599,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/typeof.js"}],[16,{"../../../shared/constants/network":4131,"@metamask/base-controller":1068},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkOrderController=void 0;var n=e("@metamask/base-controller"),i=e("../../../shared/constants/network");const a={orderedNetworkList:[]},s={orderedNetworkList:{persist:!0,anonymous:!0}};class o extends n.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:s,name:"NetworkOrderController",state:{...a,...t}}),this.messagingSystem.subscribe("NetworkController:stateChange",(e=>{this.onNetworkControllerStateChange(e)}))}onNetworkControllerStateChange(e){const t=Object.values(e.networkConfigurations),r=[...i.MAINNET_CHAINS,...t].map((e=>({networkId:e.chainId,networkRpcUrl:e.rpcUrl})));let n=[];const a=[];r.forEach((e=>{const t=this.state.orderedNetworkList.findIndex((t=>t.networkId===e.networkId&&t.networkRpcUrl===e.networkRpcUrl));-1!==t?n[t]=e:a.push(e)})),n=n.filter((e=>Boolean(e))).concat(a),this.update((e=>{e.orderedNetworkList=n}))}updateNetworksList(e){this.update((t=>(t.orderedNetworkList=e,t)))}}r.NetworkOrderController=o}}},{package:"$root$",file:"app/scripts/controllers/network-order.ts"}],[160,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:68,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=68;const r=function(e){const{PermissionsController:t={},PermissionsMetadata:r={},...n}=e,{domainMetadata:s={},permissionsHistory:o={},permissionsLog:c=[]}=r;return{...n,PermissionController:i(t),PermissionLogController:{permissionActivityLog:c,permissionHistory:o},SubjectMetadataController:a(s)}}(t.data);return t.data=r,t}};function i(e){const{domains:t={}}=e;return{subjects:Object.entries(t).reduce(((e,[t,r])=>{const{permissions:[n]}=r,i=n.caveats.find((e=>"exposedAccounts"===e.name)),a={...n,caveats:[{type:"restrictReturnedAccounts",value:i.value}]};return delete a["@context"],e[t]={origin:t,permissions:{eth_accounts:a}},e}),{})}}function a(e){return{subjectMetadata:Object.entries(e).reduce(((e,[t,r])=>{const{name:n=null,icon:i=null,extensionId:a=null,...s}=r;return delete s.lastUpdated,delete s.host,t&&(e[t]={name:n,iconUrl:i,extensionId:a,...s,origin:t}),e}),{})}}}}},{package:"$root$",file:"app/scripts/migrations/068.js"}],[1600,{"../helpers/regeneratorRuntime":1598},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../helpers/regeneratorRuntime")();t.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/regenerator/index.js"}],[1601,{"./types.js":1614,"./util.js":1615,"@ethereumjs/common":1622,"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseTransaction=void 0;const n=e("@ethereumjs/common"),i=e("@ethereumjs/util"),a=e("./types.js"),s=e("./util.js");r.BaseTransaction=class{constructor(e,t){this.cache={hash:undefined,dataFee:undefined,senderPubKey:undefined},this.activeCapabilities=[],this.DEFAULT_CHAIN=n.Chain.Mainnet;const{nonce:r,gasLimit:a,to:o,value:c,data:l,v:d,r:u,s:h,type:f}=e;this._type=Number((0,i.bytesToBigInt)((0,i.toBytes)(f))),this.txOptions=t;const m=(0,i.toBytes)(""===o?"0x":o),p=(0,i.toBytes)(""===d?"0x":d),g=(0,i.toBytes)(""===u?"0x":u),v=(0,i.toBytes)(""===h?"0x":h);this.nonce=(0,i.bytesToBigInt)((0,i.toBytes)(""===r?"0x":r)),this.gasLimit=(0,i.bytesToBigInt)((0,i.toBytes)(""===a?"0x":a)),this.to=m.length>0?new i.Address(m):undefined,this.value=(0,i.bytesToBigInt)((0,i.toBytes)(""===c?"0x":c)),this.data=(0,i.toBytes)(""===l?"0x":l),this.v=p.length>0?(0,i.bytesToBigInt)(p):undefined,this.r=g.length>0?(0,i.bytesToBigInt)(g):undefined,this.s=v.length>0?(0,i.bytesToBigInt)(v):undefined,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const y=this.to===undefined||null===this.to,b=t.allowUnlimitedInitCodeSize??!1,_=t.common??this._getCommon();y&&_.isActivatedEIP(3860)&&!1===b&&(0,s.checkMaxInitCodeSize)(_,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}getValidationErrors(){const e=[];return this.isSigned()&&!this.verifySignature()&&e.push("Invalid Signature"),this.getBaseFee()>this.gasLimit&&e.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),e}isValid(){return 0===this.getValidationErrors().length}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=i.BIGINT_0;for(let n=0;n<this.data.length;n++)0===this.data[n]?r+=e:r+=t;if((this.to===undefined||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return this.to===undefined||0===this.to.bytes.length}isSigned(){const{v:e,r:t,s:r}=this;return e!==undefined&&t!==undefined&&r!==undefined}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,i.unpadBytes)(e).length}catch(e){return!1}}getSenderAddress(){return new i.Address((0,i.publicToAddress)(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;this.type===a.TransactionType.Legacy&&this.common.gteHardfork("spuriousDragon")&&!this.supports(a.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(a.Capability.EIP155ReplayProtection),t=!0);const r=this.getHashedMessageToSign(),n=this.common.customCrypto?.ecsign??i.ecsign,{v:s,r:o,s:c}=n(r,e),l=this.addSignature(s,o,c,!0);if(t){const e=this.activeCapabilities.indexOf(a.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return l}toJSON(){return{type:(0,i.bigIntToHex)(BigInt(this.type)),nonce:(0,i.bigIntToHex)(this.nonce),gasLimit:(0,i.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,i.bigIntToHex)(this.value),data:(0,i.bytesToHex)(this.data),v:this.v!==undefined?(0,i.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,i.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,i.bigIntToHex)(this.s):undefined}}_getCommon(e,t){if(t!==undefined){const r=(0,i.bytesToBigInt)((0,i.toBytes)(t));if(e){if(e.chainId()!==r){const t=this._errorMsg(`The chain ID does not match the chain ID of Common. Got: ${r}, expected: ${e.chainId}`);throw new Error(t)}return e.copy()}return n.Common.isSupportedChainId(r)?new n.Common({chain:r}):n.Common.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN})}return e?.copy()??new n.Common({chain:this.DEFAULT_CHAIN})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[n,a]of Object.entries(e))switch(t){case 64:if(r){if(a!==undefined&&a>=i.MAX_UINT64){const e=this._errorMsg(`${n} cannot equal or exceed MAX_UINT64 (2^64-1), given ${a}`);throw new Error(e)}}else if(a!==undefined&&a>i.MAX_UINT64){const e=this._errorMsg(`${n} cannot exceed MAX_UINT64 (2^64-1), given ${a}`);throw new Error(e)}break;case 256:if(r){if(a!==undefined&&a>=i.MAX_INTEGER){const e=this._errorMsg(`${n} cannot equal or exceed MAX_INTEGER (2^256-1), given ${a}`);throw new Error(e)}}else if(a!==undefined&&a>i.MAX_INTEGER){const e=this._errorMsg(`${n} cannot exceed MAX_INTEGER (2^256-1), given ${a}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,n]of Object.entries(e))if(t.includes(r)&&Array.isArray(n))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,i.bytesToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let n=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return n+=`signed=${t} hf=${r}`,n}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/baseTransaction.js"}],[1602,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEffectivePriorityFee=r.getUpfrontCost=void 0,r.getUpfrontCost=function(e,t){const r=e.maxPriorityFeePerGas,n=e.maxFeePerGas-t,i=(r<n?r:n)+t;return e.gasLimit*i+e.value},r.getEffectivePriorityFee=function(e,t){if(t===undefined||t>e.maxFeePerGas)throw new Error("Tx cannot pay baseFee");const r=e.maxFeePerGas-t;return e.maxPriorityFeePerGas<r?e.maxPriorityFeePerGas:r}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip1559.js"}],[1603,{"../util.js":1615,"./legacy.js":1605,"@ethereumjs/rlp":1626,"@ethereumjs/util":1636,"ethereum-cryptography/keccak.js":2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateYParity=r.serialize=r.getHashedMessageToSign=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),a=e("ethereum-cryptography/keccak.js"),s=e("../util.js"),o=e("./legacy.js");r.getHashedMessageToSign=function(e){return(e.common.customCrypto.keccak256??a.keccak256)(e.getMessageToSign())},r.serialize=function(e,t){return(0,i.concatBytes)((0,s.txTypeBytes)(e.type),n.RLP.encode(t??e.raw()))},r.validateYParity=function(e){const{v:t}=e;if(t!==undefined&&t!==i.BIGINT_0&&t!==i.BIGINT_1){const t=(0,o.errorMsg)(e,"The y-parity of the transaction should either be 0 or 1");throw new Error(t)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2718.js"}],[1604,{"../util.js":1615,"./legacy.js":1605},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDataFee=void 0;const n=e("../util.js"),i=e("./legacy.js");r.getDataFee=function(e){return i.getDataFee(e,BigInt(n.AccessLists.getDataFeeEIP2930(e.accessList,e.common)))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2930.js"}],[1605,{"../baseTransaction.js":1601,"../types.js":1614,"@ethereumjs/util":1636,"ethereum-cryptography/keccak.js":2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEffectivePriorityFee=r.getSenderPublicKey=r.validateHighS=r.hash=r.getDataFee=r.isSigned=r.errorMsg=void 0;const n=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak.js"),a=e("../baseTransaction.js"),s=e("../types.js");function o(e,t){return`${t} (${e.errorStr()})`}function c(e){const{s:t}=e;if(e.common.gteHardfork("homestead")&&t!==undefined&&t>n.SECP256K1_ORDER_DIV_2){const t=o(e,"Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(t)}}r.errorMsg=o,r.isSigned=function(e){const{v:t,r:r,s:n}=e;return t!==undefined&&r!==undefined&&n!==undefined},r.getDataFee=function(e,t){if(e.cache.dataFee&&e.cache.dataFee.hardfork===e.common.hardfork())return e.cache.dataFee.value;const r=a.BaseTransaction.prototype.getDataFee.bind(e)()+(t??0n);return Object.isFrozen(e)&&(e.cache.dataFee={value:r,hardfork:e.common.hardfork()}),r},r.hash=function(e){if(!e.isSigned()){const t=o(e,"Cannot call hash method if transaction is not signed");throw new Error(t)}const t=e.common.customCrypto.keccak256??i.keccak256;return Object.isFrozen(e)?(e.cache.hash||(e.cache.hash=t(e.serialize())),e.cache.hash):t(e.serialize())},r.validateHighS=c,r.getSenderPublicKey=function(e){if(e.cache.senderPubKey!==undefined)return e.cache.senderPubKey;const t=e.getMessageToVerifySignature(),{v:r,r:i,s:a}=e;c(e);try{const o=(e.common.customCrypto.ecrecover??n.ecrecover)(t,r,(0,n.bigIntToUnpaddedBytes)(i),(0,n.bigIntToUnpaddedBytes)(a),e.supports(s.Capability.EIP155ReplayProtection)?e.common.chainId():undefined);return Object.isFrozen(e)&&(e.cache.senderPubKey=o),o}catch(t){const r=o(e,"Invalid Signature");throw new Error(r)}},r.getEffectivePriorityFee=function(e,t){if(t!==undefined&&t>e)throw new Error("Tx cannot pay baseFee");return t===undefined?e:e-t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/legacy.js"}],[1606,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BYTES_PER_FIELD_ELEMENT=r.FIELD_ELEMENTS_PER_BLOB=r.MAX_TX_WRAP_KZG_COMMITMENTS=r.LIMIT_BLOBS_PER_TX=r.MAX_VERSIONED_HASHES_LIST_SIZE=r.MAX_ACCESS_LIST_SIZE=r.MAX_CALLDATA_SIZE=void 0,r.MAX_CALLDATA_SIZE=16777216,r.MAX_ACCESS_LIST_SIZE=16777216,r.MAX_VERSIONED_HASHES_LIST_SIZE=16777216,r.LIMIT_BLOBS_PER_TX=6,r.MAX_TX_WRAP_KZG_COMMITMENTS=16777216,r.FIELD_ELEMENTS_PER_BLOB=4096,r.BYTES_PER_FIELD_ELEMENT=32}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/constants.js"}],[1607,{"./baseTransaction.js":1601,"./capabilities/eip1559.js":1602,"./capabilities/eip2718.js":1603,"./capabilities/eip2930.js":1604,"./capabilities/legacy.js":1605,"./types.js":1614,"./util.js":1615,"@ethereumjs/rlp":1626,"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FeeMarketEIP1559Transaction=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),a=e("./baseTransaction.js"),s=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),c=e("./capabilities/eip2930.js"),l=e("./capabilities/legacy.js"),d=e("./types.js"),u=e("./util.js");class h extends a.BaseTransaction{constructor(e,t={}){super({...e,type:d.TransactionType.FeeMarketEIP1559},t);const{chainId:r,accessList:n,maxFeePerGas:s,maxPriorityFeePerGas:c}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!1===this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const h=u.AccessLists.getAccessListData(n??[]);if(this.accessList=h.accessList,this.AccessListJSON=h.AccessListJSON,u.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,i.bytesToBigInt)((0,i.toBytes)(""===s?"0x":s)),this.maxPriorityFeePerGas=(0,i.bytesToBigInt)((0,i.toBytes)(""===c?"0x":c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),a.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>i.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}o.validateYParity(this),l.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new h(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,i.equalsBytes)(e.subarray(0,1),(0,u.txTypeBytes)(d.TransactionType.FeeMarketEIP1559)))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${d.TransactionType.FeeMarketEIP1559}, received: ${(0,i.bytesToHex)(e.subarray(0,1))}`);const r=n.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return h.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,n,a,s,o,c,l,d,u,f,m,p]=e;return this._validateNotArray({chainId:r,v:f}),(0,i.validateNoLeadingZeroes)({nonce:n,maxPriorityFeePerGas:a,maxFeePerGas:s,gasLimit:o,value:l,v:f,r:m,s:p}),new h({chainId:(0,i.bytesToBigInt)(r),nonce:n,maxPriorityFeePerGas:a,maxFeePerGas:s,gasLimit:o,to:c,value:l,data:d,accessList:u??[],v:f!==undefined?(0,i.bytesToBigInt)(f):undefined,r:m,s:p},t)}getDataFee(){return c.getDataFee(this)}getEffectivePriorityFee(e){return s.getEffectivePriorityFee(this,e)}getUpfrontCost(e=i.BIGINT_0){return s.getUpfrontCost(this,e)}raw(){return[(0,i.bigIntToUnpaddedBytes)(this.chainId),(0,i.bigIntToUnpaddedBytes)(this.nonce),(0,i.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,i.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,i.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,i.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.v!==undefined?(0,i.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,i.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,i.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}getMessageToSign(){return o.serialize(this,this.raw().slice(0,9))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return l.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return l.getSenderPublicKey(this)}addSignature(e,t,r,n=!1){t=(0,i.toBytes)(t),r=(0,i.toBytes)(r);const a={...this.txOptions,common:this.common};return h.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:n?e-i.BIGINT_27:e,r:(0,i.bytesToBigInt)(t),s:(0,i.bytesToBigInt)(r)},a)}toJSON(){const e=u.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,i.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,i.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,i.bigIntToHex)(this.maxFeePerGas),accessList:e}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return l.errorMsg(this,e)}}r.FeeMarketEIP1559Transaction=h}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip1559Transaction.js"}],[1608,{"./baseTransaction.js":1601,"./capabilities/eip2718.js":1603,"./capabilities/eip2930.js":1604,"./capabilities/legacy.js":1605,"./types.js":1614,"./util.js":1615,"@ethereumjs/rlp":1626,"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessListEIP2930Transaction=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),a=e("./baseTransaction.js"),s=e("./capabilities/eip2718.js"),o=e("./capabilities/eip2930.js"),c=e("./capabilities/legacy.js"),l=e("./types.js"),d=e("./util.js");class u extends a.BaseTransaction{constructor(e,t={}){super({...e,type:l.TransactionType.AccessListEIP2930},t);const{chainId:r,accessList:n,gasPrice:o}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const u=d.AccessLists.getAccessListData(n??[]);if(this.accessList=u.accessList,this.AccessListJSON=u.AccessListJSON,d.AccessLists.verifyAccessList(this.accessList),this.gasPrice=(0,i.bytesToBigInt)((0,i.toBytes)(""===o?"0x":o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),a.BaseTransaction._validateNotArray(e),this.gasPrice*this.gasLimit>i.MAX_INTEGER){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}s.validateYParity(this),c.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new u(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,i.equalsBytes)(e.subarray(0,1),(0,d.txTypeBytes)(l.TransactionType.AccessListEIP2930)))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${l.TransactionType.AccessListEIP2930}, received: ${(0,i.bytesToHex)(e.subarray(0,1))}`);const r=n.RLP.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return u.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,n,a,s,o,c,l,d,h,f,m]=e;this._validateNotArray({chainId:r,v:h}),(0,i.validateNoLeadingZeroes)({nonce:n,gasPrice:a,gasLimit:s,value:c,v:h,r:f,s:m});return new u({chainId:(0,i.bytesToBigInt)(r),nonce:n,gasPrice:a,gasLimit:s,to:o,value:c,data:l,accessList:d??[],v:h!==undefined?(0,i.bytesToBigInt)(h):undefined,r:f,s:m},t)}getEffectivePriorityFee(e){return c.getEffectivePriorityFee(this.gasPrice,e)}getDataFee(){return o.getDataFee(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[(0,i.bigIntToUnpaddedBytes)(this.chainId),(0,i.bigIntToUnpaddedBytes)(this.nonce),(0,i.bigIntToUnpaddedBytes)(this.gasPrice),(0,i.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,i.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.v!==undefined?(0,i.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,i.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,i.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return s.serialize(this)}getMessageToSign(){return s.serialize(this,this.raw().slice(0,8))}getHashedMessageToSign(){return s.getHashedMessageToSign(this)}hash(){return c.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return c.getSenderPublicKey(this)}addSignature(e,t,r,n=!1){t=(0,i.toBytes)(t),r=(0,i.toBytes)(r);const a={...this.txOptions,common:this.common};return u.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:n?e-i.BIGINT_27:e,r:(0,i.bytesToBigInt)(t),s:(0,i.bytesToBigInt)(r)},a)}toJSON(){const e=d.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,i.bigIntToHex)(this.chainId),gasPrice:(0,i.bigIntToHex)(this.gasPrice),accessList:e}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,e}_errorMsg(e){return c.errorMsg(this,e)}}r.AccessListEIP2930Transaction=u}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip2930Transaction.js"}],[1609,{"./baseTransaction.js":1601,"./capabilities/eip1559.js":1602,"./capabilities/eip2718.js":1603,"./capabilities/eip2930.js":1604,"./capabilities/legacy.js":1605,"./constants.js":1606,"./types.js":1614,"./util.js":1615,"@ethereumjs/rlp":1626,"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BlobEIP4844Transaction=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),a=e("./baseTransaction.js"),s=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),c=e("./capabilities/eip2930.js"),l=e("./capabilities/legacy.js"),d=e("./constants.js"),u=e("./types.js"),h=e("./util.js");class f extends a.BaseTransaction{constructor(e,t={}){super({...e,type:u.TransactionType.BlobEIP4844},t);const{chainId:r,accessList:n,maxFeePerGas:s,maxPriorityFeePerGas:c,maxFeePerBlobGas:f}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!1===this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");if(!1===this.common.isActivatedEIP(4844))throw new Error("EIP-4844 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const m=h.AccessLists.getAccessListData(n??[]);if(this.accessList=m.accessList,this.AccessListJSON=m.AccessListJSON,h.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,i.bytesToBigInt)((0,i.toBytes)(""===s?"0x":s)),this.maxPriorityFeePerGas=(0,i.bytesToBigInt)((0,i.toBytes)(""===c?"0x":c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),a.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>i.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this.maxFeePerBlobGas=(0,i.bytesToBigInt)((0,i.toBytes)(""===(f??"")?"0x":f)),this.blobVersionedHashes=(e.blobVersionedHashes??[]).map((e=>(0,i.toBytes)(e))),o.validateYParity(this),l.validateHighS(this);for(const e of this.blobVersionedHashes){if(32!==e.length){const e=this._errorMsg("versioned hash is invalid length");throw new Error(e)}if(BigInt(e[0])!==this.common.param("sharding","blobCommitmentVersionKzg")){const e=this._errorMsg("versioned hash does not start with KZG commitment version");throw new Error(e)}}if(this.blobVersionedHashes.length>d.LIMIT_BLOBS_PER_TX){const e=this._errorMsg(`tx can contain at most ${d.LIMIT_BLOBS_PER_TX} blobs`);throw new Error(e)}if(0===this.blobVersionedHashes.length){const e=this._errorMsg("tx should contain at least one blob");throw new Error(e)}if(this.to===undefined){const e=this._errorMsg('tx should have a "to" field and cannot be used to create contracts');throw new Error(e)}this.blobs=e.blobs?.map((e=>(0,i.toBytes)(e))),this.kzgCommitments=e.kzgCommitments?.map((e=>(0,i.toBytes)(e))),this.kzgProofs=e.kzgProofs?.map((e=>(0,i.toBytes)(e)));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t){if(t?.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");const r=t.common.customCrypto.kzg;if(e.blobsData!==undefined){if(e.blobs!==undefined)throw new Error("cannot have both raw blobs data and encoded blobs in constructor");if(e.kzgCommitments!==undefined)throw new Error("cannot have both raw blobs data and KZG commitments in constructor");if(e.blobVersionedHashes!==undefined)throw new Error("cannot have both raw blobs data and versioned hashes in constructor");if(e.kzgProofs!==undefined)throw new Error("cannot have both raw blobs data and KZG proofs in constructor");e.blobs=(0,i.getBlobs)(e.blobsData.reduce(((e,t)=>e+t))),e.kzgCommitments=(0,i.blobsToCommitments)(r,e.blobs),e.blobVersionedHashes=(0,i.commitmentsToVersionedHashes)(e.kzgCommitments),e.kzgProofs=(0,i.blobsToProofs)(r,e.blobs,e.kzgCommitments)}return new f(e,t)}getEffectivePriorityFee(e){return s.getEffectivePriorityFee(this,e)}static minimalFromNetworkWrapper(e,t){if(t?.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");return f.fromTxData({...e,blobs:undefined,kzgCommitments:undefined,kzgProofs:undefined},t)}static fromSerializedTx(e,t={}){if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(!1===(0,i.equalsBytes)(e.subarray(0,1),(0,h.txTypeBytes)(u.TransactionType.BlobEIP4844)))throw new Error(`Invalid serialized tx input: not an EIP-4844 transaction (wrong tx type, expected: ${u.TransactionType.BlobEIP4844}, received: ${(0,i.bytesToHex)(e.subarray(0,1))}`);const r=n.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return f.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(11!==e.length&&14!==e.length)throw new Error("Invalid EIP-4844 transaction. Only expecting 11 values (for unsigned tx) or 14 values (for signed tx).");const[r,n,a,s,o,c,l,d,u,h,m,p,g,v]=e;return this._validateNotArray({chainId:r,v:p}),(0,i.validateNoLeadingZeroes)({nonce:n,maxPriorityFeePerGas:a,maxFeePerGas:s,gasLimit:o,value:l,maxFeePerBlobGas:h,v:p,r:g,s:v}),new f({chainId:(0,i.bytesToBigInt)(r),nonce:n,maxPriorityFeePerGas:a,maxFeePerGas:s,gasLimit:o,to:c,value:l,data:d,accessList:u??[],maxFeePerBlobGas:h,blobVersionedHashes:m,v:p!==undefined?(0,i.bytesToBigInt)(p):undefined,r:g,s:v},t)}static fromSerializedBlobTxNetworkWrapper(e,t){if(!t||!t.common)throw new Error("common instance required to validate versioned hashes");if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(!1===(0,i.equalsBytes)(e.subarray(0,1),(0,h.txTypeBytes)(u.TransactionType.BlobEIP4844)))throw new Error(`Invalid serialized tx input: not an EIP-4844 transaction (wrong tx type, expected: ${u.TransactionType.BlobEIP4844}, received: ${(0,i.bytesToHex)(e.subarray(0,1))}`);const r=n.RLP.decode(e.subarray(1));if(4!==r.length)throw Error("Expected 4 values in the deserialized network transaction");const[a,s,o,c]=r,l=f.fromValuesArray(a,{...t,freeze:!1});if(l.to===undefined)throw Error("BlobEIP4844Transaction can not be send without a valid `to`");const d=Number(t.common.param("sharding","blobCommitmentVersionKzg"));((e,t,r,n,a,s)=>{if(e.length!==t.length||t.length!==r.length)throw new Error("Number of blobVersionedHashes, blobs, and commitments not all equal");if(0===e.length)throw new Error("Invalid transaction with empty blobs");let o;try{o=s.verifyBlobKzgProofBatch(t,r,n)}catch(e){throw new Error(`KZG verification of blobs fail with error=${e}`)}if(!o)throw new Error("KZG proof cannot be verified from blobs/commitments");for(let t=0;t<e.length;t++){const n=(0,i.computeVersionedHash)(r[t],a);if(!(0,i.equalsBytes)(n,e[t]))throw new Error(`commitment for blob at index ${t} does not match versionedHash`)}})(l.blobVersionedHashes,s,o,c,d,t.common.customCrypto.kzg),l.blobs=s,l.kzgCommitments=o,l.kzgProofs=c;return(t?.freeze??!0)&&Object.freeze(l),l}getDataFee(){return c.getDataFee(this)}getUpfrontCost(e=i.BIGINT_0){return s.getUpfrontCost(this,e)}raw(){return[(0,i.bigIntToUnpaddedBytes)(this.chainId),(0,i.bigIntToUnpaddedBytes)(this.nonce),(0,i.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,i.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,i.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,i.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,(0,i.bigIntToUnpaddedBytes)(this.maxFeePerBlobGas),this.blobVersionedHashes,this.v!==undefined?(0,i.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,i.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,i.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}serializeNetworkWrapper(){if(this.blobs===undefined||this.kzgCommitments===undefined||this.kzgProofs===undefined)throw new Error("cannot serialize network wrapper without blobs, KZG commitments and KZG proofs provided");return o.serialize(this,[this.raw(),this.blobs,this.kzgCommitments,this.kzgProofs])}getMessageToSign(){return o.serialize(this,this.raw().slice(0,11))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return l.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return l.getSenderPublicKey(this)}toJSON(){const e=h.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,i.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,i.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,i.bigIntToHex)(this.maxFeePerGas),accessList:e,maxFeePerBlobGas:(0,i.bigIntToHex)(this.maxFeePerBlobGas),blobVersionedHashes:this.blobVersionedHashes.map((e=>(0,i.bytesToHex)(e)))}}addSignature(e,t,r,n=!1){t=(0,i.toBytes)(t),r=(0,i.toBytes)(r);const a={...this.txOptions,common:this.common};return f.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:n?e-i.BIGINT_27:e,r:(0,i.bytesToBigInt)(t),s:(0,i.bytesToBigInt)(r),maxFeePerBlobGas:this.maxFeePerBlobGas,blobVersionedHashes:this.blobVersionedHashes,blobs:this.blobs,kzgCommitments:this.kzgCommitments,kzgProofs:this.kzgProofs},a)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return l.errorMsg(this,e)}numBlobs(){return this.blobVersionedHashes.length}}r.BlobEIP4844Transaction=f}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip4844Transaction.js"}],[161,{"@metamask/permission-controller":1469,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/permission-controller"),i=e("lodash");r.default={version:69,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=69;const r=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?n.SubjectType.Extension:n.SubjectType.Website)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[1610,{"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeTxParams=void 0;const n=e("@ethereumjs/util");r.normalizeTxParams=e=>{const t=Object.assign({},e);return t.gasLimit=(0,n.toType)(t.gasLimit??t.gas,n.TypeOutput.BigInt),t.data=t.data===undefined?t.input:t.data,t.gasPrice=t.gasPrice!==undefined?BigInt(t.gasPrice):undefined,t.value=t.value!==undefined?BigInt(t.value):undefined,t.to=null!==t.to&&t.to!==undefined?(0,n.setLengthLeft)((0,n.toBytes)(t.to),20):null,t.v="0x0"===t.v?"0x":t.v,t.r="0x0"===t.r?"0x":t.r,t.s="0x0"===t.s?"0x":t.s,"0x"===t.v&&"0x"===t.r&&"0x"===t.s||(t.v=(0,n.toType)(t.v,n.TypeOutput.BigInt)),t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/fromRpc.js"}],[1611,{"./eip1559Transaction.js":1607,"./eip2930Transaction.js":1608,"./eip4844Transaction.js":1609,"./legacyTransaction.js":1612,"./transactionFactory.js":1613,"./types.js":1614},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=r.LegacyTransaction=r.BlobEIP4844Transaction=r.AccessListEIP2930Transaction=r.FeeMarketEIP1559Transaction=void 0;var a=e("./eip1559Transaction.js");Object.defineProperty(r,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return a.FeeMarketEIP1559Transaction}});var s=e("./eip2930Transaction.js");Object.defineProperty(r,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return s.AccessListEIP2930Transaction}});var o=e("./eip4844Transaction.js");Object.defineProperty(r,"BlobEIP4844Transaction",{enumerable:!0,get:function(){return o.BlobEIP4844Transaction}});var c=e("./legacyTransaction.js");Object.defineProperty(r,"LegacyTransaction",{enumerable:!0,get:function(){return c.LegacyTransaction}});var l=e("./transactionFactory.js");Object.defineProperty(r,"TransactionFactory",{enumerable:!0,get:function(){return l.TransactionFactory}}),i(e("./types.js"),r)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/index.js"}],[1612,{"./baseTransaction.js":1601,"./capabilities/legacy.js":1605,"./types.js":1614,"@ethereumjs/rlp":1626,"@ethereumjs/util":1636,"ethereum-cryptography/keccak.js":2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LegacyTransaction=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),a=e("ethereum-cryptography/keccak.js"),s=e("./baseTransaction.js"),o=e("./capabilities/legacy.js"),c=e("./types.js");function l(e,t){const r=Number(e),n=2*Number(t);return r===n+35||r===n+36}class d extends s.BaseTransaction{constructor(e,t={}){if(super({...e,type:c.TransactionType.Legacy},t),this.common=this._validateTxV(this.v,t.common),this.keccakFunction=this.common.customCrypto.keccak256??a.keccak256,this.gasPrice=(0,i.bytesToBigInt)((0,i.toBytes)(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>i.MAX_INTEGER){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),s.BaseTransaction._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?l(this.v,this.common.chainId())&&this.activeCapabilities.push(c.Capability.EIP155ReplayProtection):this.activeCapabilities.push(c.Capability.EIP155ReplayProtection));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new d(e,t)}static fromSerializedTx(e,t={}){const r=n.RLP.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,n,a,s,o,c,l,u,h]=e;return(0,i.validateNoLeadingZeroes)({nonce:r,gasPrice:n,gasLimit:a,value:o,v:l,r:u,s:h}),new d({nonce:r,gasPrice:n,gasLimit:a,to:s,value:o,data:c,v:l,r:u,s:h},t)}getEffectivePriorityFee(e){return o.getEffectivePriorityFee(this.gasPrice,e)}raw(){return[(0,i.bigIntToUnpaddedBytes)(this.nonce),(0,i.bigIntToUnpaddedBytes)(this.gasPrice),(0,i.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,i.bigIntToUnpaddedBytes)(this.value),this.data,this.v!==undefined?(0,i.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,i.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,i.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return n.RLP.encode(this.raw())}getMessageToSign(){const e=[(0,i.bigIntToUnpaddedBytes)(this.nonce),(0,i.bigIntToUnpaddedBytes)(this.gasPrice),(0,i.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,i.bigIntToUnpaddedBytes)(this.value),this.data];return this.supports(c.Capability.EIP155ReplayProtection)&&(e.push((0,i.bigIntToUnpaddedBytes)(this.common.chainId())),e.push((0,i.unpadBytes)((0,i.toBytes)(0))),e.push((0,i.unpadBytes)((0,i.toBytes)(0)))),e}getHashedMessageToSign(){const e=this.getMessageToSign();return this.keccakFunction(n.RLP.encode(e))}getDataFee(){return o.getDataFee(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){return o.hash(this)}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}return this.getHashedMessageToSign()}getSenderPublicKey(){return o.getSenderPublicKey(this)}addSignature(e,t,r,n=!1){t=(0,i.toBytes)(t),r=(0,i.toBytes)(r),n&&this.supports(c.Capability.EIP155ReplayProtection)&&(e+=this.common.chainId()*i.BIGINT_2+i.BIGINT_8);const a={...this.txOptions,common:this.common};return d.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:e,r:(0,i.bytesToBigInt)(t),s:(0,i.bytesToBigInt)(r)},a)}toJSON(){return{...super.toJSON(),gasPrice:(0,i.bigIntToHex)(this.gasPrice)}}_validateTxV(e,t){let r;const n=e!==undefined?Number(e):undefined;if(n!==undefined&&n<37&&27!==n&&28!==n)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${n}`);if(n!==undefined&&0!==n&&(!t||t.gteHardfork("spuriousDragon"))&&27!==n&&28!==n)if(t){if(!l(BigInt(n),t.chainId()))throw new Error(`Incompatible EIP155-based V ${n} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(n-35)%2==0?35:36,r=BigInt(n-e)/i.BIGINT_2}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return o.errorMsg(this,e)}}r.LegacyTransaction=d}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/legacyTransaction.js"}],[1613,{"./eip1559Transaction.js":1607,"./eip2930Transaction.js":1608,"./eip4844Transaction.js":1609,"./fromRpc.js":1610,"./legacyTransaction.js":1612,"./types.js":1614,"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=void 0;const n=e("@ethereumjs/util"),i=e("./eip1559Transaction.js"),a=e("./eip2930Transaction.js"),s=e("./eip4844Transaction.js"),o=e("./fromRpc.js"),c=e("./legacyTransaction.js"),l=e("./types.js");class d{constructor(){}static fromTxData(e,t={}){if("type"in e&&e.type!==undefined){if((0,l.isLegacyTxData)(e))return c.LegacyTransaction.fromTxData(e,t);if((0,l.isAccessListEIP2930TxData)(e))return a.AccessListEIP2930Transaction.fromTxData(e,t);if((0,l.isFeeMarketEIP1559TxData)(e))return i.FeeMarketEIP1559Transaction.fromTxData(e,t);if((0,l.isBlobEIP4844TxData)(e))return s.BlobEIP4844Transaction.fromTxData(e,t);throw new Error(`Tx instantiation with type ${e?.type} not supported`)}return c.LegacyTransaction.fromTxData(e,t)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return c.LegacyTransaction.fromSerializedTx(e,t);switch(e[0]){case l.TransactionType.AccessListEIP2930:return a.AccessListEIP2930Transaction.fromSerializedTx(e,t);case l.TransactionType.FeeMarketEIP1559:return i.FeeMarketEIP1559Transaction.fromSerializedTx(e,t);case l.TransactionType.BlobEIP4844:return s.BlobEIP4844Transaction.fromSerializedTx(e,t);default:throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}static fromBlockBodyData(e,t={}){if(e instanceof Uint8Array)return this.fromSerializedData(e,t);if(Array.isArray(e))return c.LegacyTransaction.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}static async fromJsonRpcProvider(e,t,r){const i=(0,n.getProvider)(e),a=await(0,n.fetchFromProvider)(i,{method:"eth_getTransactionByHash",params:[t]});if(null===a)throw new Error("No data returned from provider");return d.fromRPC(a,r)}static async fromRPC(e,t={}){return d.fromTxData((0,o.normalizeTxParams)(e),t)}}r.TransactionFactory=d}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/transactionFactory.js"}],[1614,{"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isBlobEIP4844TxData=r.isFeeMarketEIP1559TxData=r.isAccessListEIP2930TxData=r.isLegacyTxData=r.isBlobEIP4844Tx=r.isFeeMarketEIP1559Tx=r.isAccessListEIP2930Tx=r.isLegacyTx=r.TransactionType=r.isAccessList=r.isAccessListBytes=r.Capability=void 0;const n=e("@ethereumjs/util");var i;function a(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}!function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(r.Capability||(r.Capability={})),r.isAccessListBytes=a,r.isAccessList=function(e){return!a(e)},function(e){e[e.Legacy=0]="Legacy",e[e.AccessListEIP2930=1]="AccessListEIP2930",e[e.FeeMarketEIP1559=2]="FeeMarketEIP1559",e[e.BlobEIP4844=3]="BlobEIP4844"}(i=r.TransactionType||(r.TransactionType={})),r.isLegacyTx=function(e){return e.type===i.Legacy},r.isAccessListEIP2930Tx=function(e){return e.type===i.AccessListEIP2930},r.isFeeMarketEIP1559Tx=function(e){return e.type===i.FeeMarketEIP1559},r.isBlobEIP4844Tx=function(e){return e.type===i.BlobEIP4844},r.isLegacyTxData=function(e){return Number((0,n.bytesToBigInt)((0,n.toBytes)(e.type)))===i.Legacy},r.isAccessListEIP2930TxData=function(e){return Number((0,n.bytesToBigInt)((0,n.toBytes)(e.type)))===i.AccessListEIP2930},r.isFeeMarketEIP1559TxData=function(e){return Number((0,n.bytesToBigInt)((0,n.toBytes)(e.type)))===i.FeeMarketEIP1559},r.isBlobEIP4844TxData=function(e){return Number((0,n.bytesToBigInt)((0,n.toBytes)(e.type)))===i.BlobEIP4844}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/types.js"}],[1615,{"./types.js":1614,"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.txTypeBytes=r.AccessLists=r.checkMaxInitCodeSize=void 0;const n=e("@ethereumjs/util"),i=e("./types.js");r.checkMaxInitCodeSize=function(e,t){const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)};r.AccessLists=class{static getAccessListData(e){let t,r;if((0,i.isAccessList)(e)){t=e;const i=[];for(let t=0;t<e.length;t++){const r=e[t],a=(0,n.hexToBytes)(r.address),s=[];for(let e=0;e<r.storageKeys.length;e++)s.push((0,n.hexToBytes)(r.storageKeys[e]));i.push([a,s])}r=i}else{r=e??[];const i=[];for(let e=0;e<r.length;e++){const t=r[e],a=(0,n.bytesToHex)(t[0]),s=[];for(let e=0;e<t[1].length;e++)s.push((0,n.bytesToHex)(t[1][e]));const o={address:a,storageKeys:s};i.push(o)}t=i}return{AccessListJSON:t,accessList:r}}static verifyAccessList(e){for(let t=0;t<e.length;t++){const r=e[t],n=r[0],i=r[1];if(r[2]!==undefined)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==n.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<i.length;e++)if(32!==i[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(e){const t=[];for(let r=0;r<e.length;r++){const i=e[r],a={address:(0,n.bytesToHex)((0,n.setLengthLeft)(i[0],20)),storageKeys:[]},s=i[1];for(let e=0;e<s.length;e++){const t=s[e];a.storageKeys.push((0,n.bytesToHex)((0,n.setLengthLeft)(t,32)))}t.push(a)}return t}static getDataFeeEIP2930(e,t){const r=t.param("gasPrices","accessListStorageKeyCost"),n=t.param("gasPrices","accessListAddressCost");let i=0;for(let t=0;t<e.length;t++){i+=e[t][1].length}return e.length*Number(n)+i*Number(r)}},r.txTypeBytes=function(e){return(0,n.hexToBytes)("0x"+e.toString(16).padStart(2,"0"))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/util.js"}],[1616,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.chains=void 0,r.chains={mainnet:{name:"mainnet",chainId:1,networkId:1,defaultHardfork:"shanghai",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{name:"paris",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,timestamp:"1681338455",forkHash:"0xdce96c2d"},{name:"cancun",block:null,timestamp:"1710338135",forkHash:"0x9f3d2254"}],bootstrapNodes:[{ip:"18.138.108.67",port:30303,id:"d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666",location:"ap-southeast-1-001",comment:"bootnode-aws-ap-southeast-1-001"},{ip:"3.209.45.79",port:30303,id:"22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de",location:"us-east-1-001",comment:"bootnode-aws-us-east-1-001"},{ip:"65.108.70.101",port:30303,id:"2b252ab6a1d0f971d9722cb839a42cb81db019ba44c08754628ab4a823487071b5695317c8ccd085219c3a03af063495b2f1da8d18218da2d6a82981b45e6ffc",location:"eu-west-1-001",comment:"bootnode-hetzner-hel"},{ip:"157.90.35.166",port:30303,id:"4aeb4ab6c14b23e2c4cfdce879c04b0748a20d8e9b59e25ded2a08143e265c6c25936e74cbc8e641e3312ca288673d91f2f93f8e277de3cfa444ecdaaf982052",location:"eu-central-1-001",comment:"bootnode-hetzner-fsn"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},goerli:{name:"goerli",chainId:5,networkId:5,defaultHardfork:"shanghai",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{name:"paris",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,timestamp:"1678832736",forkHash:"0xf9843abf"},{name:"cancun",block:null,timestamp:"1705473120",forkHash:"0x70cc14e2"}],bootstrapNodes:[{ip:"51.141.78.53",port:30303,id:"011f758e6552d105183b1761c5e2dea0111bc20fd5f6422bc7f91e0fabbec9a6595caf6239b37feb773dddd3f87240d99d859431891e4a642cf2a0a9e6cbb98a",location:"",comment:"Upstream bootnode 1"},{ip:"13.93.54.137",port:30303,id:"176b9417f511d05b6b2cf3e34b756cf0a7096b3094572a8f6ef4cdcb9d1f9d00683bf0f83347eebdf3b81c3521c2332086d9592802230bf528eaf606a1d9677b",location:"",comment:"Upstream bootnode 2"},{ip:"94.237.54.114",port:30313,id:"46add44b9f13965f7b9875ac6b85f016f341012d84f975377573800a863526f4da19ae2c620ec73d11591fa9510e992ecc03ad0751f53cc02f7c7ed6d55c7291",location:"",comment:"Upstream bootnode 3"},{ip:"18.218.250.66",port:30313,id:"b5948a2d3e9d486c4d75bf32713221c2bd6cf86463302339299bd227dc2e276cd5a1c7ca4f43a0e9122fe9af884efed563bd2a1fd28661f3b5f5ad7bf1de5949",location:"",comment:"Upstream bootnode 4"},{ip:"3.11.147.67",port:30303,id:"a61215641fb8714a373c80edbfa0ea8878243193f57c96eeb44d0bc019ef295abd4e044fd619bfc4c59731a73fb79afe84e9ab6da0c743ceb479cbb6d263fa91",location:"",comment:"Ethereum Foundation bootnode"},{ip:"51.15.116.226",port:30303,id:"a869b02cec167211fb4815a82941db2e7ed2936fd90e78619c53eb17753fcf0207463e3419c264e2a1dd8786de0df7e68cf99571ab8aeb7c4e51367ef186b1dd",location:"",comment:"Goerli Initiative bootnode"},{ip:"51.15.119.157",port:30303,id:"807b37ee4816ecf407e9112224494b74dd5933625f655962d892f2f0f02d7fbbb3e2a94cf87a96609526f30c998fd71e93e2f53015c558ffc8b03eceaf30ee33",location:"",comment:"Goerli Initiative bootnode"},{ip:"51.15.119.157",port:40303,id:"a59e33ccd2b3e52d578f1fbd70c6f9babda2650f0760d6ff3b37742fdcdfdb3defba5d56d315b40c46b70198c7621e63ffa3f987389c7118634b0fefbbdfa7fd",location:"",comment:"Goerli Initiative bootnode"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},sepolia:{name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"shanghai",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{name:"paris",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"},{name:"cancun",block:null,timestamp:"1706655072",forkHash:"0x88cf81d9"}],bootstrapNodes:[{ip:"18.168.182.86",port:30303,id:"9246d00bc8fd1742e5ad2428b80fc4dc45d786283e05ef6edbd9002cbc335d40998444732fbe921cb88e1d2c73d1b1de53bae6a2237996e9bfe14f871baf7066",location:"",comment:"geth"},{ip:"52.14.151.177",port:30303,id:"ec66ddcf1a974950bd4c782789a7e04f8aa7110a72569b6e65fcd51e937e74eed303b1ea734e4d19cfaec9fbff9b6ee65bf31dcb50ba79acce9dd63a6aca61c7",location:"",comment:"besu"},{ip:"165.22.196.173",port:30303,id:"ce970ad2e9daa9e14593de84a8b49da3d54ccfdf83cbc4fe519cb8b36b5918ed4eab087dedd4a62479b8d50756b492d5f762367c8d20329a7854ec01547568a6",location:"",comment:"EF"},{ip:"65.108.95.67",port:30303,id:"075503b13ed736244896efcde2a992ec0b451357d46cb7a8132c0384721742597fc8f0d91bbb40bb52e7d6e66728d36a1fda09176294e4a30cfac55dcce26bc6",location:"",comment:"lodestar"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},holesky:{name:"holesky",chainId:17e3,networkId:17e3,defaultHardfork:"paris",consensus:{type:"pos",algorithm:"casper"},comment:"PoS test network to replace Goerli",url:"https://github.com/eth-clients/holesky/",genesis:{baseFeePerGas:"0x3B9ACA00",difficulty:"0x01",extraData:"0x",gasLimit:"0x17D7840",nonce:"0x0000000000001234",timestamp:"0x65156994"},hardforks:[{name:"chainstart",block:0,forkHash:"0xc61a6098"},{name:"homestead",block:0,forkHash:"0xc61a6098"},{name:"tangerineWhistle",block:0,forkHash:"0xc61a6098"},{name:"spuriousDragon",block:0,forkHash:"0xc61a6098"},{name:"byzantium",block:0,forkHash:"0xc61a6098"},{name:"constantinople",block:0,forkHash:"0xc61a6098"},{name:"petersburg",block:0,forkHash:"0xc61a6098"},{name:"istanbul",block:0,forkHash:"0xc61a6098"},{name:"muirGlacier",block:0,forkHash:"0xc61a6098"},{name:"berlin",block:0,forkHash:"0xc61a6098"},{name:"london",block:0,forkHash:"0xc61a6098"},{name:"paris",ttd:"0",block:0,forkHash:"0xc61a6098"},{name:"mergeForkIdTransition",block:0,forkHash:"0xc61a6098"},{name:"shanghai",block:null,timestamp:"1696000704",forkHash:"0xfd4f016b"},{name:"cancun",block:null,timestamp:"1707305664",forkHash:"0x9b192ad0"}],bootstrapNodes:[{ip:"146.190.13.128",port:30303,id:"ac906289e4b7f12df423d654c5a962b6ebe5b3a74cc9e06292a85221f9a64a6f1cfdd6b714ed6dacef51578f92b34c60ee91e9ede9c7f8fadc4d347326d95e2b",location:"",comment:"bootnode 1"},{ip:"178.128.136.233",port:30303,id:"a3435a0155a3e837c02f5e7f5662a2f1fbc25b48e4dc232016e1c51b544cb5b4510ef633ea3278c0e970fa8ad8141e2d4d0f9f95456c537ff05fdf9b31c15072",location:"",comment:"bootnode 2"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.holesky.ethdisco.net"]},kaustinen:{name:"kaustinen",chainId:69420,networkId:69420,defaultHardfork:"prague",consensus:{type:"pos",algorithm:"casper"},comment:"Verkle kaustinen testnet 2 (likely temporary, do not hard-wire into production code)",url:"https://github.com/eth-clients/kaustinen/",genesis:{difficulty:"0x01",extraData:"0x",gasLimit:"0x17D7840",nonce:"0x0000000000001234",timestamp:"0x65608a64"},hardforks:[{name:"chainstart",block:0},{name:"homestead",block:0},{name:"tangerineWhistle",block:0},{name:"spuriousDragon",block:0},{name:"byzantium",block:0},{name:"constantinople",block:0},{name:"petersburg",block:0},{name:"istanbul",block:0},{name:"berlin",block:0},{name:"london",block:0},{name:"paris",ttd:"0",block:0},{name:"mergeForkIdTransition",block:0},{name:"shanghai",block:null,timestamp:"0"},{name:"prague",block:null,timestamp:"1700825700"}],bootstrapNodes:[],dnsNetworks:[]}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/chains.js"}],[1617,{"./chains.js":1616,"./crc.js":1618,"./eips.js":1619,"./enums.js":1620,"./hardforks.js":1621,"./utils.js":1625,"@ethereumjs/util":1636,events:2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Common=void 0;const n=e("@ethereumjs/util"),i=e("events"),a=e("./chains.js"),s=e("./crc.js"),o=e("./eips.js"),c=e("./enums.js"),l=e("./hardforks.js"),d=e("./utils.js");class u{constructor(e){this._eips=[],this._paramsCache={},this._activatedEIPsCache=[],this.events=new i.EventEmitter,this._customChains=e.customChains??[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=this._chainParams.defaultHardfork??c.Hardfork.Shanghai,this.HARDFORK_CHANGES=this.hardforks().map((e=>[e.name,l.hardforks[e.name]??(this._chainParams.customHardforks&&this._chainParams.customHardforks[e.name])])),this._hardfork=this.DEFAULT_HARDFORK,e.hardfork!==undefined&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips),this.customCrypto=e.customCrypto??{},0===Object.keys(this._paramsCache).length&&(this._buildParamsCache(),this._buildActivatedEIPsCache())}static custom(e,t={}){const r=t.baseChain??"mainnet",n={...u._getChainParams(r)};if(n.name="custom-chain","string"!=typeof e)return new u({chain:{...n,...e},...t});if(e===c.CustomChain.PolygonMainnet)return u.custom({name:c.CustomChain.PolygonMainnet,chainId:137,networkId:137},t);if(e===c.CustomChain.PolygonMumbai)return u.custom({name:c.CustomChain.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===c.CustomChain.ArbitrumOne)return u.custom({name:c.CustomChain.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===c.CustomChain.xDaiChain)return u.custom({name:c.CustomChain.xDaiChain,chainId:100,networkId:100},t);if(e===c.CustomChain.OptimisticKovan)return u.custom({name:c.CustomChain.OptimisticKovan,chainId:69,networkId:69},{hardfork:c.Hardfork.Berlin,...t});if(e===c.CustomChain.OptimisticEthereum)return u.custom({name:c.CustomChain.OptimisticEthereum,chainId:10,networkId:10},{hardfork:c.Hardfork.Berlin,...t});throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:t,eips:r,genesisHash:n,hardfork:i,mergeForkIdPostMerge:a,customCrypto:s}){const o=(0,d.parseGethGenesis)(e,t,a),c=new u({chain:o.name??"custom",customChains:[o],eips:r,hardfork:i??o.hardfork,customCrypto:s});return n!==undefined&&c.setForkHashes(n),c}static isSupportedChainId(e){const t=this.getInitializedChains();return Boolean(t.names[e.toString()])}static _getChainParams(e,t){const r=this.getInitializedChains(t);if("number"==typeof e||"bigint"==typeof e){if(e=e.toString(),r.names[e]){return r[r.names[e]]}throw new Error(`Chain with ID ${e} not supported`)}if(r[e]!==undefined)return r[e];throw new Error(`Chain with name ${e} not supported`)}setChain(e){if("number"==typeof e||"bigint"==typeof e||"string"==typeof e)this._chainParams=u._getChainParams(e,this._customChains);else{if("object"!=typeof e)throw new Error("Wrong input format");{if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of t)if(!(r in e))throw new Error(`Missing required chain parameter: ${r}`);this._chainParams=e}}for(const e of this.hardforks())if(e.block===undefined)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this._buildParamsCache(),this._buildActivatedEIPsCache(),this.events.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkBy(e){const t=(0,n.toType)(e.blockNumber,n.TypeOutput.BigInt),r=(0,n.toType)(e.td,n.TypeOutput.BigInt),i=(0,n.toType)(e.timestamp,n.TypeOutput.BigInt),a=this.hardforks().filter((e=>null!==e.block||null!==e.ttd&&e.ttd!==undefined||e.timestamp!==undefined)),s=a.findIndex((e=>null!==e.ttd&&e.ttd!==undefined));if(a.slice(s+1).findIndex((e=>null!==e.ttd&&e.ttd!==undefined))>=0)throw Error("More than one merge hardforks found with ttd specified");let o=a.findIndex((e=>t!==undefined&&null!==e.block&&BigInt(e.block)>t||i!==undefined&&e.timestamp!==undefined&&BigInt(e.timestamp)>i));if(-1===o)o=a.length;else if(0===o)throw Error("Must have at least one hardfork at block 0");if(i===undefined){o-=a.slice(0,o).reverse().findIndex((e=>null!==e.block||e.ttd!==undefined))}if(o-=1,null===a[o].block&&a[o].timestamp===undefined)(r===undefined||null===r||BigInt(a[o].ttd)>r)&&(o-=1);else if(s>=0&&r!==undefined&&null!==r){if(o>=s&&BigInt(a[s].ttd)>r)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(o<s&&BigInt(a[s].ttd)<r)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const c=o;for(;o<a.length-1&&(a[o].block===a[o+1].block&&a[o].timestamp===a[o+1].timestamp);o++);if(i!==undefined){if(a.slice(0,c).reduce(((e,t)=>Math.max(Number(t.timestamp??"0"),e)),0)>i)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");if(a.slice(o+1).reduce(((e,t)=>Math.min(Number(t.timestamp??i),e)),Number(i))<i)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return a[o].name}setHardforkBy(e){const t=this.getHardforkBy(e);return this.setHardfork(t),t}_getHardfork(e){const t=this.hardforks();for(const r of t)if(r.name===e)return r;return null}setEIPs(e=[]){for(const t of e){if(!(t in o.EIPs))throw new Error(`${t} not supported`);const e=this.gteHardfork(o.EIPs[t].minimumHardfork);if(!e)throw new Error(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${e}`)}this._eips=e,this._buildParamsCache(),this._buildActivatedEIPsCache();for(const t of e)if(o.EIPs[t].requiredEIPs!==undefined)for(const r of o.EIPs[t].requiredEIPs)if(!e.includes(r)&&!this.isActivatedEIP(r))throw new Error(`${t} requires EIP ${r}, but is not included in the EIP list`)}_mergeWithParamsCache(e){this._paramsCache.gasConfig={...this._paramsCache.gasConfig,...e.gasConfig},this._paramsCache.gasPrices={...this._paramsCache.gasPrices,...e.gasPrices},this._paramsCache.pow={...this._paramsCache.pow,...e.pow},this._paramsCache.sharding={...this._paramsCache.sharding,...e.sharding},this._paramsCache.vm={...this._paramsCache.vm,...e.vm}}_buildParamsCache(){this._paramsCache={};const e=this.hardfork();for(const t of this.HARDFORK_CHANGES){if("eips"in t[1]){const e=t[1].eips;for(const t of e){if(!(t in o.EIPs))throw new Error(`${t} not supported`);this._mergeWithParamsCache(o.EIPs[t])}}else this._mergeWithParamsCache(t[1]);if(t[0]===e)break}for(const e of this._eips){if(!(e in o.EIPs))throw new Error(`${e} not supported`);this._mergeWithParamsCache(o.EIPs[e])}}_buildActivatedEIPsCache(){this._activatedEIPsCache=[];for(const e of this.HARDFORK_CHANGES){const t=e[1];this.gteHardfork(t.name)&&"eips"in t&&(this._activatedEIPsCache=this._activatedEIPsCache.concat(t.eips))}this._activatedEIPsCache=this._activatedEIPsCache.concat(this._eips)}param(e,t){let r=null;return this._paramsCache[e]!==undefined&&this._paramsCache[e][t]!==undefined&&(r=this._paramsCache[e][t].v),BigInt(r??0)}paramByHardfork(e,t,r){let n=null;for(const i of this.HARDFORK_CHANGES){if("eips"in i[1]){const r=i[1].eips;for(const i of r){const r=this.paramByEIP(e,t,i);n="bigint"==typeof r?r:n}}else i[1][e]!==undefined&&i[1][e][t]!==undefined&&(n=i[1][e][t].v);if(i[0]===r)break}return BigInt(n??0)}paramByEIP(e,t,r){if(!(r in o.EIPs))throw new Error(`${r} not supported`);const n=o.EIPs[r];if(!(e in n))return undefined;if(n[e][t]===undefined)return undefined;const i=n[e][t].v;return BigInt(i)}paramByBlock(e,t,r,n,i){const a=this.getHardforkBy({blockNumber:r,td:n,timestamp:i});return this.paramByHardfork(e,t,a)}isActivatedEIP(e){return!!this._activatedEIPsCache.includes(e)}hardforkIsActiveOnBlock(e,t){t=(0,n.toType)(t,n.TypeOutput.BigInt),e=e??this._hardfork;const r=this.hardforkBlock(e);return"bigint"==typeof r&&r!==n.BIGINT_0&&t>=r}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){e=e??this._hardfork;const r=this.hardforks();let n=-1,i=-1,a=0;for(const s of r)s.name===e&&(n=a),s.name===t&&(i=a),a+=1;return n>=i&&-1!==i}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){e=e??this._hardfork;const t=this._getHardfork(e)?.block;return t===undefined||null===t?null:BigInt(t)}hardforkTimestamp(e){e=e??this._hardfork;const t=this._getHardfork(e)?.timestamp;return t===undefined||null===t?null:BigInt(t)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock(t[0])}return null}eipTimestamp(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkTimestamp(t[0])}return null}hardforkTTD(e){e=e??this._hardfork;const t=this._getHardfork(e)?.ttd;return t===undefined||null===t?null:BigInt(t)}nextHardforkBlockOrTimestamp(e){e=e??this._hardfork;const t=this.hardforks();let r=t.findIndex((t=>t.name===e));if(e===c.Hardfork.Paris&&(r-=1),r<0)return null;let n=t[r].timestamp??t[r].block;n=null!==n&&n!==undefined?Number(n):null;const i=t.slice(r+1).find((e=>{let t=e.timestamp??e.block;return t=null!==t&&t!==undefined?Number(t):null,e.name!==c.Hardfork.Paris&&null!==t&&t!==undefined&&t!==n}));if(i===undefined)return null;const a=i.timestamp??i.block;return null===a||a===undefined?null:BigInt(a)}_calcForkHash(e,t){let r=new Uint8Array(0),i=0;for(const t of this.hardforks()){const{block:a,timestamp:s,name:o}=t;let l=s??a;if(l=null!==l?Number(l):null,"number"==typeof l&&0!==l&&l!==i&&o!==c.Hardfork.Paris){const e=(0,n.hexToBytes)("0x"+l.toString(16).padStart(16,"0"));r=(0,n.concatBytes)(r,e),i=l}if(t.name===e)break}const a=(0,n.concatBytes)(t,r);return(0,n.bytesToHex)((0,n.intToBytes)((0,s.crc32)(a)>>>0))}forkHash(e,t){e=e??this._hardfork;const r=this._getHardfork(e);if(null===r||null===r?.block&&r?.timestamp===undefined&&r?.ttd===undefined){throw new Error("No fork hash calculation possible for future hardfork")}if(null!==r?.forkHash&&r?.forkHash!==undefined)return r.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(e,t)}hardforkForForkHash(e){const t=this.hardforks().filter((t=>t.forkHash===e));return t.length>=1?t[t.length-1]:null}setForkHashes(e){for(const t of this.hardforks()){const r=t.timestamp??t.block;null!==t.forkHash&&t.forkHash!==undefined||(null===r||r===undefined)&&void 0===t.ttd||(t.forkHash=this.forkHash(t.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){const e=this._chainParams.hardforks;return this._chainParams.customHardforks!==undefined&&this._chainParams.customHardforks,e}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.type),r[0]===e)break;return t??this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.algorithm),r[0]===e)break;return t??this._chainParams.consensus.algorithm}consensusConfig(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES){if("consensus"in r[1]){const e=r[1],n=e.consensus.algorithm;t=e.consensus[n]}if(r[0]===e)break}return t??this._chainParams.consensus[this.consensusAlgorithm()]??{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.events=new i.EventEmitter,e}static getInitializedChains(e){const t={};for(const[e,r]of Object.entries(c.Chain))t[r]=e.toLowerCase();const r={...a.chains};if(e)for(const n of e){const{name:e}=n;t[n.chainId.toString()]=e,r[e]=n}return r.names=t,r}}r.Common=u}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/common.js"}],[1618,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crc32=void 0;let n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(n=new Int32Array(n));r.crc32=(e,t)=>((e,t)=>{let r=0===t?0:~t;for(let t=0;t<e.length;t++)r=n[255&(r^e[t])]^r>>>8;return~r})(e,t)>>>0}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/crc.js"}],[1619,{"./enums.js":1620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EIPs=void 0;const n=e("./enums.js");var i;!function(e){e.Stagnant="stagnant",e.Draft="draft",e.Review="review",e.Final="final"}(i||(i={})),r.EIPs={1153:{comment:"Transient storage opcodes",url:"https://eips.ethereum.org/EIPS/eip-1153",status:i.Review,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[],gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}}},1559:{comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:i.Final,minimumHardfork:n.Hardfork.Berlin,requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}}},2315:{comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:i.Draft,minimumHardfork:n.Hardfork.Istanbul,requiredEIPs:[],gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}}},2565:{comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:i.Final,minimumHardfork:n.Hardfork.Byzantium,requiredEIPs:[],gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}}},2718:{comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:i.Final,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[]},2929:{comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:i.Final,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[],gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}}},2930:{comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:i.Final,minimumHardfork:n.Hardfork.Istanbul,requiredEIPs:[2718,2929],gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}}},2935:{comment:"Save historical block hashes in state (Verkle related usage, UNSTABLE)",url:"https://github.com/gballet/EIPs/pull/3/commits/2e9ac09a142b0d9fb4db0b8d4609f92e5d9990c5",status:i.Draft,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[],vm:{historyStorageAddress:{v:BigInt("0xfffffffffffffffffffffffffffffffffffffffe"),d:"The address where the historical blockhashes are stored"},historyServeWindow:{v:BigInt(256),d:"The amount of blocks to be served by the historical blockhash contract"}}},3074:{comment:"AUTH and AUTHCALL opcodes",url:"https://eips.ethereum.org/EIPS/eip-3074",status:i.Review,minimumHardfork:n.Hardfork.London,requiredEIPs:[],gasPrices:{auth:{v:3100,d:"Gas cost of the AUTH opcode"},authcall:{v:0,d:"Gas cost of the AUTHCALL opcode"},authcallValueTransfer:{v:6700,d:"Paid for CALL when the value transfer is non-zero"}}},3198:{comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:i.Final,minimumHardfork:n.Hardfork.London,requiredEIPs:[],gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}}},3529:{comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:i.Final,minimumHardfork:n.Hardfork.Berlin,requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}}},3540:{comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:i.Review,minimumHardfork:n.Hardfork.London,requiredEIPs:[3541]},3541:{comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:i.Final,minimumHardfork:n.Hardfork.Berlin,requiredEIPs:[]},3554:{comment:"Difficulty Bomb Delay to December 1st 2021",url:"https://eips.ethereum.org/EIPS/eip-3554",status:i.Final,minimumHardfork:n.Hardfork.MuirGlacier,requiredEIPs:[],pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},3607:{comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:i.Final,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[]},3651:{comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:i.Review,minimumHardfork:n.Hardfork.London,requiredEIPs:[2929]},3670:{comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:n.Hardfork.London,requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},3675:{comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:i.Final,minimumHardfork:n.Hardfork.London,requiredEIPs:[]},3855:{comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:i.Review,minimumHardfork:n.Hardfork.Chainstart,requiredEIPs:[],gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}}},3860:{comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:i.Review,minimumHardfork:n.Hardfork.SpuriousDragon,requiredEIPs:[],gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}}},4345:{comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:i.Final,minimumHardfork:n.Hardfork.London,requiredEIPs:[],pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},4399:{comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:i.Review,minimumHardfork:n.Hardfork.London,requiredEIPs:[],gasPrices:{prevrandao:{v:2,d:"Base fee of the PREVRANDAO opcode (previously DIFFICULTY)"}}},4788:{comment:"Beacon block root in the EVM",url:"https://eips.ethereum.org/EIPS/eip-4788",status:i.Draft,minimumHardfork:n.Hardfork.Cancun,requiredEIPs:[],gasPrices:{},vm:{historicalRootsLength:{v:8191,d:"The modulo parameter of the beaconroot ring buffer in the beaconroot statefull precompile"}}},4844:{comment:"Shard Blob Transactions",url:"https://eips.ethereum.org/EIPS/eip-4844",status:i.Draft,minimumHardfork:n.Hardfork.Paris,requiredEIPs:[1559,2718,2930,4895],gasConfig:{blobGasPerBlob:{v:131072,d:"The base fee for blob gas per blob"},targetBlobGasPerBlock:{v:393216,d:"The target blob gas consumed per block"},maxblobGasPerBlock:{v:786432,d:"The max blob gas allowable per block"},blobGasPriceUpdateFraction:{v:3338477,d:"The denominator used in the exponential when calculating a blob gas price"}},gasPrices:{simpleGasPerBlob:{v:12e3,d:"The basic gas fee for each blob"},minBlobGasPrice:{v:1,d:"The minimum fee per blob gas"},kzgPointEvaluationGasPrecompilePrice:{v:5e4,d:"The fee associated with the point evaluation precompile"},blobhash:{v:3,d:"Base fee of the BLOBHASH opcode"}},sharding:{blobCommitmentVersionKzg:{v:1,d:"The number indicated a versioned hash is a KZG commitment"},fieldElementsPerBlob:{v:4096,d:"The number of field elements allowed per blob"}}},4895:{comment:"Beacon chain push withdrawals as operations",url:"https://eips.ethereum.org/EIPS/eip-4895",status:i.Review,minimumHardfork:n.Hardfork.Paris,requiredEIPs:[]},5133:{comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:i.Draft,minimumHardfork:n.Hardfork.GrayGlacier,requiredEIPs:[],pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}},5656:{comment:"MCOPY - Memory copying instruction",url:"https://eips.ethereum.org/EIPS/eip-5656",status:i.Draft,minimumHardfork:n.Hardfork.Shanghai,requiredEIPs:[],gasPrices:{mcopy:{v:3,d:"Base fee of the MCOPY opcode"}}},6780:{comment:"SELFDESTRUCT only in same transaction",url:"https://eips.ethereum.org/EIPS/eip-6780",status:i.Draft,minimumHardfork:n.Hardfork.London,requiredEIPs:[]},6800:{comment:"Ethereum state using a unified verkle tree (experimental)",url:"https://github.com/ethereum/EIPs/pull/6800",status:i.Draft,minimumHardfork:n.Hardfork.London,requiredEIPs:[]},7516:{comment:"BLOBBASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-7516",status:i.Draft,minimumHardfork:n.Hardfork.Paris,requiredEIPs:[4844],gasPrices:{blobbasefee:{v:2,d:"Gas cost of the BLOBBASEFEE opcode"}}}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/eips.js"}],[162,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:70,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=70;const r=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[1620,{"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CustomChain=r.ConsensusAlgorithm=r.ConsensusType=r.Hardfork=r.ChainGenesis=r.Chain=void 0;const n=e("@ethereumjs/util");var i;!function(e){e[e.Mainnet=1]="Mainnet",e[e.Goerli=5]="Goerli",e[e.Sepolia=11155111]="Sepolia",e[e.Holesky=17e3]="Holesky",e[e.Kaustinen=69420]="Kaustinen"}(i=r.Chain||(r.Chain={})),r.ChainGenesis={[i.Mainnet]:{name:"mainnet",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544")},[i.Goerli]:{name:"goerli",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0x5d6cded585e73c4e322c30c2f782a336316f17dd85a4863b9d838d2d4b8b3008")},[i.Sepolia]:{name:"sepolia",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0x5eb6e371a698b8d68f665192350ffcecbbbf322916f4b51bd79bb6887da3f494")},[i.Holesky]:{name:"holesky",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0x69d8c9d72f6fa4ad42d4702b433707212f90db395eb54dc20bc85de253788783")},[i.Kaustinen]:{name:"kaustinen",blockNumber:n.BIGINT_0,stateRoot:(0,n.hexToBytes)("0x5e8519756841faf0b2c28951c451b61a4b407b70a5ce5b57992f4bec973173ff")}},function(e){e.Chainstart="chainstart",e.Homestead="homestead",e.Dao="dao",e.TangerineWhistle="tangerineWhistle",e.SpuriousDragon="spuriousDragon",e.Byzantium="byzantium",e.Constantinople="constantinople",e.Petersburg="petersburg",e.Istanbul="istanbul",e.MuirGlacier="muirGlacier",e.Berlin="berlin",e.London="london",e.ArrowGlacier="arrowGlacier",e.GrayGlacier="grayGlacier",e.MergeForkIdTransition="mergeForkIdTransition",e.Paris="paris",e.Shanghai="shanghai",e.Cancun="cancun",e.Prague="prague"}(r.Hardfork||(r.Hardfork={})),function(e){e.ProofOfStake="pos",e.ProofOfWork="pow",e.ProofOfAuthority="poa"}(r.ConsensusType||(r.ConsensusType={})),function(e){e.Ethash="ethash",e.Clique="clique",e.Casper="casper"}(r.ConsensusAlgorithm||(r.ConsensusAlgorithm={})),function(e){e.PolygonMainnet="polygon-mainnet",e.PolygonMumbai="polygon-mumbai",e.ArbitrumOne="arbitrum-one",e.xDaiChain="x-dai-chain",e.OptimisticKovan="optimistic-kovan",e.OptimisticEthereum="optimistic-ethereum"}(r.CustomChain||(r.CustomChain={}))}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/enums.js"}],[1621,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.hardforks=r.Status=void 0,function(e){e.Draft="draft",e.Review="review",e.Final="final"}(n=r.Status||(r.Status={})),r.hardforks={chainstart:{name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:n.Final,gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},keccak256:{v:30,d:"Base fee of the SHA3 opcode"},keccak256Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:BigInt("5000000000000000000"),d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},homestead:{name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:n.Final,gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}}},dao:{name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:n.Final},tangerineWhistle:{name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:n.Final,gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}}},spuriousDragon:{name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:n.Final,gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}}},byzantium:{name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:n.Final,gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},pow:{minerReward:{v:BigInt("3000000000000000000"),d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},constantinople:{name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:n.Final,gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},pow:{minerReward:{v:BigInt("2000000000000000000"),d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},petersburg:{name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:n.Final,gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}}},istanbul:{name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:n.Final,gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}}},muirGlacier:{name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:n.Final,pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},berlin:{name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:n.Final,eips:[2565,2929,2718,2930]},london:{name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:n.Final,eips:[1559,3198,3529,3541]},arrowGlacier:{name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:n.Final,eips:[4345]},grayGlacier:{name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:n.Final,eips:[5133]},paris:{name:"paris",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:n.Final,consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},mergeForkIdTransition:{name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:n.Final,eips:[]},shanghai:{name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:n.Final,eips:[3651,3855,3860,4895]},cancun:{name:"cancun",comment:"Next feature hardfork after shanghai, includes proto-danksharding EIP 4844 blobs (still WIP hence not for production use), transient storage opcodes, parent beacon block root availability in EVM, selfdestruct only in same transaction, and blob base fee opcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/cancun.md",status:n.Final,eips:[1153,4844,4788,5656,6780,7516]},prague:{name:"prague",comment:"Next feature hardfork after cancun, internally used for verkle testing/implementation (incomplete/experimental)",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/prague.md",status:n.Draft,eips:[6800]}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/hardforks.js"}],[1622,{"./common.js":1617,"./enums.js":1620,"./interfaces.js":1623,"./types.js":1624,"./utils.js":1625},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./common.js"),r),i(e("./enums.js"),r),i(e("./interfaces.js"),r),i(e("./types.js"),r),i(e("./utils.js"),r)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/index.js"}],[1623,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/interfaces.js"}],[1624,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/types.js"}],[1625,{"./enums.js":1620,"@ethereumjs/util":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseGethGenesis=void 0;const n=e("@ethereumjs/util"),i=e("./enums.js");function a(e,t=!0){const{name:r,config:a,difficulty:s,mixHash:o,gasLimit:c,coinbase:l,baseFeePerGas:d,excessBlobGas:u}=e;let{extraData:h,timestamp:f,nonce:m}=e;const p=Number(f),{chainId:g}=a;if(""===h&&(h="0x"),(0,n.isHexPrefixed)(f)||(f=(0,n.intToHex)(parseInt(f))),18!==m.length&&(m=function(e){return e&&"0x0"!==e?(0,n.isHexPrefixed)(e)?"0x"+(0,n.stripHexPrefix)(e).padStart(16,"0"):"0x"+e.padStart(16,"0"):"0x0000000000000000"}(m)),a.eip155Block!==a.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const v={name:r,chainId:g,networkId:g,genesis:{timestamp:f,gasLimit:c,difficulty:s,nonce:m,extraData:h,mixHash:o,coinbase:l,baseFeePerGas:d,excessBlobGas:u},hardfork:undefined,hardforks:[],bootstrapNodes:[],consensus:a.clique!==undefined?{type:"poa",algorithm:"clique",clique:{period:a.clique.period??a.clique.blockperiodseconds,epoch:a.clique.epoch??a.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},y={[i.Hardfork.Homestead]:{name:"homesteadBlock"},[i.Hardfork.Dao]:{name:"daoForkBlock"},[i.Hardfork.TangerineWhistle]:{name:"eip150Block"},[i.Hardfork.SpuriousDragon]:{name:"eip155Block"},[i.Hardfork.Byzantium]:{name:"byzantiumBlock"},[i.Hardfork.Constantinople]:{name:"constantinopleBlock"},[i.Hardfork.Petersburg]:{name:"petersburgBlock"},[i.Hardfork.Istanbul]:{name:"istanbulBlock"},[i.Hardfork.MuirGlacier]:{name:"muirGlacierBlock"},[i.Hardfork.Berlin]:{name:"berlinBlock"},[i.Hardfork.London]:{name:"londonBlock"},[i.Hardfork.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:t},[i.Hardfork.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[i.Hardfork.Cancun]:{name:"cancunTime",postMerge:!0,isTimestamp:!0},[i.Hardfork.Prague]:{name:"pragueTime",postMerge:!0,isTimestamp:!0}},b=Object.keys(y).reduce(((e,t)=>(e[y[t].name]=t,e)),{}),_=Object.keys(a).filter((e=>b[e]!==undefined&&a[e]!==undefined&&null!==a[e]));v.hardforks=_.map((e=>({name:b[e],block:!0===y[b[e]].isTimestamp||"number"!=typeof a[e]?null:a[e],timestamp:!0===y[b[e]].isTimestamp&&"number"==typeof a[e]?a[e]:undefined}))).filter((e=>null!==e.block||e.timestamp!==undefined)),v.hardforks.sort((function(e,t){return(e.block??Infinity)-(t.block??Infinity)})),v.hardforks.sort((function(e,t){return(e.timestamp??0)-(t.timestamp??0)}));for(const e of v.hardforks)e.timestamp===p&&(e.timestamp=0);if(a.terminalTotalDifficulty!==undefined){const e={name:i.Hardfork.Paris,ttd:a.terminalTotalDifficulty,block:null},t=v.hardforks.findIndex((e=>!0===y[e.name]?.postMerge));-1!==t?v.hardforks.splice(t,0,e):v.hardforks.push(e)}const w=v.hardforks.length>0?v.hardforks.slice(-1)[0]:undefined;return v.hardfork=w?.name,v.hardforks.unshift({name:i.Hardfork.Chainstart,block:0}),v}r.parseGethGenesis=function(e,t,r){try{const n=["config","difficulty","gasLimit","nonce","alloc"];if(n.some((t=>!(t in e)))){const t=n.filter((t=>!(t in e)));throw new Error(`Invalid format, expected geth genesis field "${t}" missing`)}return t!==undefined&&(e.name=t),a(e,r)}catch(e){throw new Error(`Error parsing parameters file: ${e.message}`)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/common",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/common/dist/cjs/utils.js"}],[1626,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];let r=0;for(let i=0;i<e.length;i++){const a=n(e[i]);t.push(a),r+=a.length}return f(s(r,192),...t)}const t=v(e);return 1===t.length&&t[0]<128?t:f(s(t.length,128),t)}function i(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function a(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return u(d(e))}function s(e,t){if(e<56)return Uint8Array.from([e+t]);const r=p(e),n=p(t+55+r.length/2);return Uint8Array.from(h(n+r))}function o(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=c(v(e));if(t)return{data:r.data,remainder:r.remainder.slice()};if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,s,o;const l=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(d<=183){if(t=d-127,n=128===d?Uint8Array.from([]):i(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.subarray(t)}}if(d<=191){if(r=d-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=a(i(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=i(e,r,t+r),{data:n,remainder:e.subarray(t+r)}}if(d<=247){for(t=d-191,s=i(e,1,t);s.length;)o=c(s),l.push(o.data),s=o.remainder;return{data:l,remainder:e.subarray(t)}}{if(r=d-246,t=a(i(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(s=i(e,r,n);s.length;)o=c(s),l.push(o.data),s=o.remainder;return{data:l,remainder:e.subarray(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.RLP=r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=o;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function d(e){let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function u(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=u(e.slice(n,n+2))}return t}function f(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}function m(e){return(new TextEncoder).encode(e)}function p(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function v(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?h((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):m(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?h(p(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:d,concatBytes:f,hexToBytes:h,utf8ToBytes:m},r.RLP={encode:n,decode:o}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx>@ethereumjs/rlp",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/node_modules/@ethereumjs/rlp/dist/cjs/index.js"}],[1627,{"./bytes.js":1631,"./constants.js":1632,"./helpers.js":1635,"./internal.js":1637,"@ethereumjs/rlp":1646,"ethereum-cryptography/keccak.js":2868,"ethereum-cryptography/secp256k1.js":2885},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const n=e("@ethereumjs/rlp"),i=e("ethereum-cryptography/keccak.js"),a=e("ethereum-cryptography/secp256k1.js"),s=e("./bytes.js"),o=e("./constants.js"),c=e("./helpers.js"),l=e("./internal.js");class d{constructor(e=o.BIGINT_0,t=o.BIGINT_0,r=o.KECCAK256_RLP,n=o.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:i}=e;return new d(t!==undefined?(0,s.bytesToBigInt)((0,s.toBytes)(t)):undefined,r!==undefined?(0,s.bytesToBigInt)((0,s.toBytes)(r)):undefined,n!==undefined?(0,s.toBytes)(n):undefined,i!==undefined?(0,s.toBytes)(i):undefined)}static fromRlpSerializedAccount(e){const t=n.RLP.decode(e);if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,i]=e;return new d((0,s.bytesToBigInt)(t),(0,s.bytesToBigInt)(r),n,i)}_validate(){if(this.nonce<o.BIGINT_0)throw new Error("nonce must be greater than zero");if(this.balance<o.BIGINT_0)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,s.bigIntToUnpaddedBytes)(this.nonce),(0,s.bigIntToUnpaddedBytes)(this.balance),this.storageRoot,this.codeHash]}serialize(){return n.RLP.encode(this.raw())}isContract(){return!(0,s.equalsBytes)(this.codeHash,o.KECCAK256_NULL)}isEmpty(){return this.balance===o.BIGINT_0&&this.nonce===o.BIGINT_0&&(0,s.equalsBytes)(this.codeHash,o.KECCAK256_NULL)}}r.Account=d;r.isValidAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,t){(0,c.assertIsHexString)(e);const r=(0,l.stripHexPrefix)(e).toLowerCase();let n="";if(t!==undefined){n=(0,s.bytesToBigInt)((0,s.toBytes)(t)).toString()+"0x"}const a=(0,s.utf8ToBytes)(n+r),o=(0,s.bytesToHex)((0,i.keccak256)(a)).slice(2);let d="0x";for(let e=0;e<r.length;e++)parseInt(o[e],16)>=8?d+=r[e].toUpperCase():d+=r[e];return d};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,t){return(0,c.assertIsBytes)(e),(0,c.assertIsBytes)(t),(0,s.bytesToBigInt)(t)===o.BIGINT_0?(0,i.keccak256)(n.RLP.encode([e,Uint8Array.from([])])).subarray(-20):(0,i.keccak256)(n.RLP.encode([e,t])).subarray(-20)};r.generateAddress2=function(e,t,r){if((0,c.assertIsBytes)(e),(0,c.assertIsBytes)(t),(0,c.assertIsBytes)(r),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==t.length)throw new Error("Expected salt to be of length 32");return(0,i.keccak256)((0,s.concatBytes)((0,s.hexToBytes)("0xff"),e,t,(0,i.keccak256)(r))).subarray(-20)};r.isValidPrivate=function(e){return a.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,t=!1){if((0,c.assertIsBytes)(e),64===e.length)try{return a.secp256k1.ProjectivePoint.fromHex((0,s.concatBytes)(Uint8Array.from([4]),e)),!0}catch(e){return!1}if(!t)return!1;try{return a.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,t=!1){if((0,c.assertIsBytes)(e),t&&64!==e.length&&(e=a.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),64!==e.length)throw new Error("Expected pubKey to be of length 64");return(0,i.keccak256)(e).subarray(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,c.assertIsBytes)(e),a.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1)};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,c.assertIsBytes)(e),64!==e.length&&(e=a.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),e};r.zeroAddress=function(){const e=(0,s.zeros)(20);return(0,s.bytesToHex)(e)};function u(e){const[t,r,n,i]=e;return[t,r,0===n.length?o.KECCAK256_RLP:n,0===i.length?o.KECCAK256_NULL:i]}r.isZeroAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=u;const h=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,n,i]=e;return[t,r,(0,s.equalsBytes)(n,o.KECCAK256_RLP)?h:n,(0,s.equalsBytes)(i,o.KECCAK256_NULL)?h:i]},r.accountBodyToRLP=function(e,t=!0){const r=t?u(e):e;return n.RLP.encode(r)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/account.js"}],[1628,{"./account.js":1627,"./bytes.js":1631,"./constants.js":1632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const n=e("./account.js"),i=e("./bytes.js"),a=e("./constants.js");class s{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.bytes=e}static zero(){return new s((0,i.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new s((0,i.toBytes)(e))}static fromPublicKey(e){if(!(e instanceof Uint8Array))throw new Error("Public key should be Uint8Array");const t=(0,n.pubToAddress)(e);return new s(t)}static fromPrivateKey(e){if(!(e instanceof Uint8Array))throw new Error("Private key should be Uint8Array");const t=(0,n.privateToAddress)(e);return new s(t)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new s((0,n.generateAddress)(e.bytes,(0,i.bigIntToBytes)(t)))}static generate2(e,t,r){if(!(t instanceof Uint8Array))throw new Error("Expected salt to be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("Expected initCode to be a Uint8Array");return new s((0,n.generateAddress2)(e.bytes,t,r))}equals(e){return(0,i.equalsBytes)(this.bytes,e.bytes)}isZero(){return this.equals(s.zero())}isPrecompileOrSystemAddress(){const e=(0,i.bytesToBigInt)(this.bytes),t=a.BIGINT_0,r=BigInt("0xffff");return e>=t&&e<=r}toString(){return(0,i.bytesToHex)(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}r.Address=s}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/address.js"}],[1629,{events:2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const n=e("events");class i extends n.EventEmitter{emit(e,...t){let[r,n]=t;const i=this;let a=i._events[e]??[];return n===undefined&&"function"==typeof r&&(n=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=undefined),a=Array.isArray(a)?a:[a],async function(e,t,r){let n;for await(const i of t)try{i.length<2?i.call(e,r):await new Promise(((t,n)=>{i.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(i,a.slice(),r).then(n).catch(n),i.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(i,a){r.removeListener(e,n),t(i,a)}:function(i){r.removeListener(e,n),t(i,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let i,a,s=this._events[e]??[];const o="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(s)||(this._events[e]=s=[s]),a=s.length,i=s.length;i--;)if(s[i]===t){a=i+o;break}return s.splice(a,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=i}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/asyncEventEmitter.js"}],[163,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:71,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=71;const r=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[1630,{"./bytes.js":1631,"ethereum-cryptography/sha256.js":2886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.commitmentsToVersionedHashes=r.computeVersionedHash=r.blobsToProofs=r.blobsToCommitments=r.getBlobs=void 0;const n=e("ethereum-cryptography/sha256.js"),i=e("./bytes.js"),a=4096,s=131072;function o(e){const t=new Uint8Array(131072);for(let r=0;r<a;r++){const n=new Uint8Array(32);n.set(e.subarray(31*r,31*(r+1)),0),t.set(n,32*r)}return t}r.getBlobs=e=>{const t=(0,i.utf8ToBytes)(e),r=t.byteLength;if(0===r)throw Error("invalid blob data");if(r>262143)throw Error("blob data is too large");const n=Math.ceil(r/s),a=function(e,t){const r=new Uint8Array(t*s).fill(0);return r.set(e),r[e.byteLength]=128,r}(t,n),c=[];for(let e=0;e<n;e++){const t=o(a.subarray(e*s,(e+1)*s));c.push(t)}return c};r.blobsToCommitments=(e,t)=>{const r=[];for(const n of t)r.push(e.blobToKzgCommitment(n));return r};r.blobsToProofs=(e,t,r)=>t.map(((t,n)=>e.computeBlobKzgProof(t,r[n])));r.computeVersionedHash=(e,t)=>{const r=new Uint8Array(32);return r.set([t],0),r.set((0,n.sha256)(e).subarray(1),1),r};r.commitmentsToVersionedHashes=e=>{const t=[];for(const n of e)t.push((0,r.computeVersionedHash)(n,1));return t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/blobs.js"}],[1631,{"./helpers.js":1635,"./internal.js":1637,"ethereum-cryptography/random.js":2884,"ethereum-cryptography/utils.js":2887},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.utf8ToBytes=r.equalsBytes=r.bytesToUtf8=r.bigInt64ToBytes=r.int32ToBytes=r.bytesToBigInt64=r.bytesToInt32=r.concatBytes=r.randomBytes=r.compareBytes=r.intToUnpaddedBytes=r.bigIntToUnpaddedBytes=r.bigIntMin=r.bigIntMax=r.bigIntToHex=r.validateNoLeadingZeroes=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.toBytes=r.unpadHex=r.unpadArray=r.unpadBytes=r.setLengthRight=r.setLengthLeft=r.zeros=r.bigIntToBytes=r.intToBytes=r.intToHex=r.hexToBytes=r.bytesToInt=r.bytesToBigInt=r.bytesToHex=r.unprefixedHexToBytes=r.bytesToUnprefixedHex=void 0;const n=e("ethereum-cryptography/random.js"),i=e("ethereum-cryptography/utils.js"),a=e("./helpers.js"),s=e("./internal.js"),o=BigInt(0);r.bytesToUnprefixedHex=i.bytesToHex;const c={},l={};for(let e=0;e<16;e++){const t=e,r=16*e,n=e.toString(16).toLowerCase();l[n]=t,l[n.toUpperCase()]=t,c[n]=r,c[n.toUpperCase()]=r}function d(e){const t=e.length,r=new Uint8Array(t/2);for(let n=0;n<t;n+=2)r[n/2]=c[e[n]]+l[e[n+1]];return r}r.unprefixedHexToBytes=e=>{if("0x"===e.slice(0,2))throw new Error("hex string is prefixed with 0x, should be unprefixed");return d((0,s.padToEven)(e))};const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=e=>{let t="0x";if(e===undefined||0===e.length)return t;for(const r of e)t+=u[r];return t};const h=[];for(let e=0;e<=65535;e++)h[e]=BigInt(e);r.bytesToBigInt=(e,t=!1)=>{t&&e.reverse();const n=(0,r.bytesToHex)(e);return"0x"===n?o:4===n.length?h[e[0]]:6===n.length?h[256*e[0]+e[1]]:BigInt(n)};r.bytesToInt=e=>{const t=Number((0,r.bytesToBigInt)(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.hexToBytes=e=>{if("string"!=typeof e)throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);return(e=e.slice(2)).length%2!=0&&(e=(0,s.padToEven)(e)),d(e)};r.intToHex=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBytes=e=>{const t=(0,r.intToHex)(e);return(0,r.hexToBytes)(t)};r.bigIntToBytes=(e,t=!1)=>{const n=(0,r.toBytes)("0x"+(0,s.padToEven)(e.toString(16)));return t?n.reverse():n};r.zeros=e=>new Uint8Array(e);const f=(e,t,n)=>n?e.length<t?new Uint8Array([...e,...(0,r.zeros)(t-e.length)]):e.subarray(0,t):e.length<t?new Uint8Array([...(0,r.zeros)(t-e.length),...e]):e.subarray(-t);r.setLengthLeft=(e,t)=>((0,a.assertIsBytes)(e),f(e,t,!1));r.setLengthRight=(e,t)=>((0,a.assertIsBytes)(e),f(e,t,!0));const m=e=>{let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBytes=e=>((0,a.assertIsBytes)(e),m(e));r.unpadArray=e=>((0,a.assertIsArray)(e),m(e));r.unpadHex=e=>((0,a.assertIsHexString)(e),e=(0,s.stripHexPrefix)(e),"0x"+m(e));r.toBytes=e=>{if(null===e||e===undefined)return new Uint8Array;if(Array.isArray(e)||e instanceof Uint8Array)return Uint8Array.from(e);if("string"==typeof e){if(!(0,s.isHexString)(e))throw new Error(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${e}`);return(0,r.hexToBytes)(e)}if("number"==typeof e)return(0,r.intToBytes)(e);if("bigint"==typeof e){if(e<o)throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),(0,r.unprefixedHexToBytes)(t)}if(e.toBytes!==undefined)return e.toBytes();throw new Error("invalid type")};r.fromSigned=e=>BigInt.asIntN(256,(0,r.bytesToBigInt)(e));r.toUnsigned=e=>(0,r.bigIntToBytes)(BigInt.asUintN(256,e));r.addHexPrefix=e=>"string"!=typeof e||(0,s.isHexPrefixed)(e)?e:"0x"+e;r.short=(e,t=50)=>{const n=e instanceof Uint8Array?(0,r.bytesToHex)(e):e,i="0x"===n.slice(0,2)?t+2:t;return n.length<=i?n:n.slice(0,i)+"…"};r.validateNoLeadingZeroes=e=>{for(const[t,n]of Object.entries(e))if(n!==undefined&&n.length>0&&0===n[0])throw new Error(`${t} cannot have leading zeroes, received: ${(0,r.bytesToHex)(n)}`)};r.bigIntToHex=e=>"0x"+e.toString(16);r.bigIntMax=(...e)=>e.reduce(((e,t)=>t>e?t:e));r.bigIntMin=(...e)=>e.reduce(((e,t)=>t<e?t:e));r.bigIntToUnpaddedBytes=e=>(0,r.unpadBytes)((0,r.bigIntToBytes)(e));r.intToUnpaddedBytes=e=>(0,r.unpadBytes)((0,r.intToBytes)(e));r.compareBytes=(e,t)=>{const n=(0,r.bytesToBigInt)(e),i=(0,r.bytesToBigInt)(t);return n>i?1:n<i?-1:0};r.randomBytes=e=>(0,n.getRandomBytesSync)(e);r.concatBytes=(...e)=>{if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r},r.bytesToInt32=function(e,t=!1){return e.length<4&&(e=f(e,4,t)),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,t)},r.bytesToBigInt64=function(e,t=!1){return e.length<8&&(e=f(e,8,t)),new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0,t)},r.int32ToBytes=function(e,t=!1){const r=new ArrayBuffer(4);return new DataView(r).setUint32(0,e,t),new Uint8Array(r)},r.bigInt64ToBytes=function(e,t=!1){const r=new ArrayBuffer(8);return new DataView(r).setBigUint64(0,e,t),new Uint8Array(r)};var p=e("ethereum-cryptography/utils.js");Object.defineProperty(r,"bytesToUtf8",{enumerable:!0,get:function(){return p.bytesToUtf8}}),Object.defineProperty(r,"equalsBytes",{enumerable:!0,get:function(){return p.equalsBytes}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return p.utf8ToBytes}})}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/bytes.js"}],[1632,{"./bytes.js":1631,"ethereum-cryptography/secp256k1.js":2885},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BIGINT_2EXP256=r.BIGINT_2EXP224=r.BIGINT_2EXP160=r.BIGINT_2EXP96=r.BIGINT_224=r.BIGINT_160=r.BIGINT_100=r.BIGINT_96=r.BIGINT_256=r.BIGINT_255=r.BIGINT_128=r.BIGINT_64=r.BIGINT_32=r.BIGINT_31=r.BIGINT_28=r.BIGINT_27=r.BIGINT_8=r.BIGINT_7=r.BIGINT_3=r.BIGINT_2=r.BIGINT_1=r.BIGINT_0=r.BIGINT_NEG1=r.RIPEMD160_ADDRESS_STRING=r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("ethereum-cryptography/secp256k1.js"),i=e("./bytes.js");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=n.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=n.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=(0,i.hexToBytes)(r.KECCAK256_NULL_S),r.KECCAK256_RLP_ARRAY_S="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=(0,i.hexToBytes)(r.KECCAK256_RLP_ARRAY_S),r.KECCAK256_RLP_S="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=(0,i.hexToBytes)(r.KECCAK256_RLP_S),r.RLP_EMPTY_STRING=Uint8Array.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16,r.RIPEMD160_ADDRESS_STRING="0000000000000000000000000000000000000003",r.BIGINT_NEG1=BigInt(-1),r.BIGINT_0=BigInt(0),r.BIGINT_1=BigInt(1),r.BIGINT_2=BigInt(2),r.BIGINT_3=BigInt(3),r.BIGINT_7=BigInt(7),r.BIGINT_8=BigInt(8),r.BIGINT_27=BigInt(27),r.BIGINT_28=BigInt(28),r.BIGINT_31=BigInt(31),r.BIGINT_32=BigInt(32),r.BIGINT_64=BigInt(64),r.BIGINT_128=BigInt(128),r.BIGINT_255=BigInt(255),r.BIGINT_256=BigInt(256),r.BIGINT_96=BigInt(96),r.BIGINT_100=BigInt(100),r.BIGINT_160=BigInt(160),r.BIGINT_224=BigInt(224),r.BIGINT_2EXP96=BigInt(7922816251426434e13),r.BIGINT_2EXP160=BigInt(1461501637330903e33),r.BIGINT_2EXP224=BigInt(2695994666715064e52),r.BIGINT_2EXP256=r.BIGINT_2**r.BIGINT_256}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/constants.js"}],[1633,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ValueEncoding=r.KeyEncoding=void 0,function(e){e.String="string",e.Bytes="view",e.Number="number"}(r.KeyEncoding||(r.KeyEncoding={})),function(e){e.String="string",e.Bytes="view",e.JSON="json"}(r.ValueEncoding||(r.ValueEncoding={}))}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/db.js"}],[1634,{"./bytes.js":1631,"./internal.js":1637},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseGethGenesisState=void 0;const n=e("./bytes.js"),i=e("./internal.js");r.parseGethGenesisState=function(e){const t={};for(let r of Object.keys(e.alloc)){let{balance:a,code:s,storage:o,nonce:c}=e.alloc[r];r=(0,n.addHexPrefix)(r.toLowerCase()),a=(0,i.isHexPrefixed)(a)?a:(0,n.bigIntToHex)(BigInt(a)),s=s!==undefined?(0,n.addHexPrefix)(s):undefined,o=o!==undefined?Object.entries(o):undefined,c=c!==undefined?(0,n.addHexPrefix)(c):undefined,t[r]=[a,s,o,c]}return t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/genesis.js"}],[1635,{"./internal.js":1637},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBytes=r.assertIsHexString=void 0;const n=e("./internal.js");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBytes=function(e){if(!(e instanceof Uint8Array)){throw new Error(`This method only supports Uint8Array but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/helpers.js"}],[1636,{"./account.js":1627,"./address.js":1628,"./asyncEventEmitter.js":1629,"./blobs.js":1630,"./bytes.js":1631,"./constants.js":1632,"./db.js":1633,"./genesis.js":1634,"./internal.js":1637,"./kzg.js":1638,"./lock.js":1639,"./mapDB.js":1640,"./provider.js":1641,"./signature.js":1642,"./types.js":1643,"./units.js":1644,"./withdrawal.js":1645},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,i(e("./constants.js"),r),i(e("./units.js"),r),i(e("./account.js"),r),i(e("./address.js"),r),i(e("./db.js"),r),i(e("./withdrawal.js"),r),i(e("./signature.js"),r),i(e("./bytes.js"),r),i(e("./types.js"),r),i(e("./asyncEventEmitter.js"),r),i(e("./blobs.js"),r),i(e("./genesis.js"),r);var a=e("./internal.js");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return a.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return a.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return a.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return a.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return a.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return a.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return a.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return a.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return a.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return a.toAscii}}),i(e("./kzg.js"),r),i(e("./lock.js"),r),i(e("./mapDB.js"),r),i(e("./provider.js"),r)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/index.js"}],[1637,{"./bytes.js":1631},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0;const n=e("./bytes.js");function i(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}r.isHexPrefixed=i;function a(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return i(e)?e.slice(2):e},r.padToEven=a,r.getBinarySize=function(e){if("string"!=typeof e)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof e);return(0,n.utf8ToBytes)(e).byteLength},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(e){const t=(0,n.utf8ToBytes)(e);return`0x${a((0,n.bytesToUnprefixedHex)(t)).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let i=0;i<e.length;i++){let a=e[i][t];if(!0!==r||a){if("string"!=typeof a)throw new Error("invalid abi - expected type 'string', received "+typeof a)}else a="";n.push(a)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/internal.js"}],[1638,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.initKZG=void 0,r.initKZG=function(e,t){e.loadTrustedSetup()}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/kzg.js"}],[1639,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/lock.js"}],[164,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:72,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=72;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[1640,{"./bytes.js":1631},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MapDB=void 0;const n=e("./bytes.js");class i{constructor(e){this._database=e??new Map}async get(e){const t=e instanceof Uint8Array?(0,n.bytesToUnprefixedHex)(e):e.toString();return this._database.get(t)}async put(e,t){const r=e instanceof Uint8Array?(0,n.bytesToUnprefixedHex)(e):e.toString();this._database.set(r,t)}async del(e){const t=e instanceof Uint8Array?(0,n.bytesToUnprefixedHex)(e):e.toString();this._database.delete(t)}async batch(e){for(const t of e)"del"===t.type&&await this.del(t.key),"put"===t.type&&await this.put(t.key,t.value)}shallowCopy(){return new i(this._database)}open(){return Promise.resolve()}}r.MapDB=i}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/mapDB.js"}],[1641,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;r.fetchFromProvider=async(e,t)=>{const r=JSON.stringify({method:t.method,params:t.params,jsonrpc:"2.0",id:1}),n=await fetch(e,{headers:{"content-type":"application/json"},method:"POST",body:r});if(!n.ok)throw new Error(`JSONRpcError: ${JSON.stringify({method:t.method,status:n.status,message:await n.text().catch((()=>"Could not parse error message likely because of a network error"))},null,2)}`);return(await n.json()).result};r.getProvider=e=>{if("string"==typeof e)return e;if("object"==typeof e&&e._getConnection!==undefined)return e._getConnection().url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/provider.js"}],[1642,{"./bytes.js":1631,"./constants.js":1632,"./helpers.js":1635,"ethereum-cryptography/keccak.js":2868,"ethereum-cryptography/secp256k1.js":2885},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.calculateSigRecovery=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak.js"),i=e("ethereum-cryptography/secp256k1.js"),a=e("./bytes.js"),s=e("./constants.js"),o=e("./helpers.js");function c(e,t){return e===s.BIGINT_0||e===s.BIGINT_1?e:t===undefined?e-s.BIGINT_27:e-(t*s.BIGINT_2+BigInt(35))}function l(e){return e===s.BIGINT_0||e===s.BIGINT_1}r.ecsign=function(e,t,r){const n=i.secp256k1.sign(e,t),a=n.toCompactRawBytes();return{r:a.slice(0,32),s:a.slice(32,64),v:r===undefined?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*s.BIGINT_2}},r.calculateSigRecovery=c;r.ecrecover=function(e,t,r,n,s){const o=(0,a.concatBytes)((0,a.setLengthLeft)(r,32),(0,a.setLengthLeft)(n,32)),d=c(t,s);if(!l(d))throw new Error("Invalid signature v value");return i.secp256k1.Signature.fromCompact(o).addRecoveryBit(Number(d)).recoverPublicKey(e).toRawBytes(!1).slice(1)};r.toRpcSig=function(e,t,r,n){if(!l(c(e,n)))throw new Error("Invalid signature v value");return(0,a.bytesToHex)((0,a.concatBytes)((0,a.setLengthLeft)(t,32),(0,a.setLengthLeft)(r,32),(0,a.toBytes)(e)))};r.toCompactSig=function(e,t,r,n){if(!l(c(e,n)))throw new Error("Invalid signature v value");const i=Uint8Array.from([...r]);return(e>BigInt(28)&&e%s.BIGINT_2===s.BIGINT_1||e===s.BIGINT_1||e===BigInt(28))&&(i[0]|=128),(0,a.bytesToHex)((0,a.concatBytes)((0,a.setLengthLeft)(t,32),(0,a.setLengthLeft)(i,32)))};r.fromRpcSig=function(e){const t=(0,a.toBytes)(e);let r,n,i;if(t.length>=65)r=t.subarray(0,32),n=t.subarray(32,64),i=(0,a.bytesToBigInt)(t.subarray(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.subarray(0,32),n=t.subarray(32,64),i=BigInt((0,a.bytesToInt)(t.subarray(32,33))>>7),n[0]&=127}return i<27&&(i+=s.BIGINT_27),{v:i,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,i){if(32!==t.length||32!==r.length)return!1;if(!l(c(e,i)))return!1;const o=(0,a.bytesToBigInt)(t),d=(0,a.bytesToBigInt)(r);return!(o===s.BIGINT_0||o>=s.SECP256K1_ORDER||d===s.BIGINT_0||d>=s.SECP256K1_ORDER)&&!(n&&d>=s.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBytes)(e);const t=(0,a.utf8ToBytes)(`Ethereum Signed Message:\n${e.length}`);return(0,n.keccak256)((0,a.concatBytes)(t,e))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/signature.js"}],[1643,{"./bytes.js":1631,"./internal.js":1637},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes.js"),i=e("./internal.js");var a;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(a=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,i.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBytes)(e);switch(t){case a.Uint8Array:return r;case a.BigInt:return(0,n.bytesToBigInt)(r);case a.Number:{const e=(0,n.bytesToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case a.PrefixedHexString:return(0,n.bytesToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/types.js"}],[1644,{"./constants.js":1632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.formatBigDecimal=r.GWEI_TO_WEI=void 0;const n=e("./constants.js");r.GWEI_TO_WEI=BigInt(1e9),r.formatBigDecimal=function(e,t,r){t===n.BIGINT_0&&(t=n.BIGINT_1);const i=e/t,a=(e-i*t)*r/t,s=String(r).length-1-String(a).length;return`${i}.${"0".repeat(s)}${a}`}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/units.js"}],[1645,{"./address.js":1628,"./bytes.js":1631,"./constants.js":1632,"./types.js":1643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address.js"),i=e("./bytes.js"),a=e("./constants.js"),s=e("./types.js");class o{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:a,amount:c}=e,l=(0,s.toType)(t,s.TypeOutput.BigInt),d=(0,s.toType)(r,s.TypeOutput.BigInt),u=a instanceof n.Address?a:new n.Address((0,i.toBytes)(a)),h=(0,s.toType)(c,s.TypeOutput.BigInt);return new o(l,d,u,h)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,i]=e;return o.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBytesArray(e){const{index:t,validatorIndex:r,address:i,amount:o}=e;return[(0,s.toType)(t,s.TypeOutput.BigInt)===a.BIGINT_0?new Uint8Array:(0,s.toType)(t,s.TypeOutput.Uint8Array),(0,s.toType)(r,s.TypeOutput.BigInt)===a.BIGINT_0?new Uint8Array:(0,s.toType)(r,s.TypeOutput.Uint8Array),i instanceof n.Address?i.bytes:(0,s.toType)(i,s.TypeOutput.Uint8Array),(0,s.toType)(o,s.TypeOutput.BigInt)===a.BIGINT_0?new Uint8Array:(0,s.toType)(o,s.TypeOutput.Uint8Array)]}raw(){return o.toBytesArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.bytes,amount:this.amount}}toJSON(){return{index:(0,i.bigIntToHex)(this.index),validatorIndex:(0,i.bigIntToHex)(this.validatorIndex),address:(0,i.bytesToHex)(this.address.bytes),amount:(0,i.bigIntToHex)(this.amount)}}}r.Withdrawal=o}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/withdrawal.js"}],[1646,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];let r=0;for(let i=0;i<e.length;i++){const a=n(e[i]);t.push(a),r+=a.length}return f(s(r,192),...t)}const t=v(e);return 1===t.length&&t[0]<128?t:f(s(t.length,128),t)}function i(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function a(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return u(d(e))}function s(e,t){if(e<56)return Uint8Array.from([e+t]);const r=p(e),n=p(t+55+r.length/2);return Uint8Array.from(h(n+r))}function o(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=c(v(e));if(t)return{data:r.data,remainder:r.remainder.slice()};if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,s,o;const l=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(d<=183){if(t=d-127,n=128===d?Uint8Array.from([]):i(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.subarray(t)}}if(d<=191){if(r=d-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=a(i(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=i(e,r,t+r),{data:n,remainder:e.subarray(t+r)}}if(d<=247){for(t=d-191,s=i(e,1,t);s.length;)o=c(s),l.push(o.data),s=o.remainder;return{data:l,remainder:e.subarray(t)}}{if(r=d-246,t=a(i(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(s=i(e,r,n);s.length;)o=c(s),l.push(o.data),s=o.remainder;return{data:l,remainder:e.subarray(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.RLP=r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=o;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function d(e){let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function u(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=u(e.slice(n,n+2))}return t}function f(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}function m(e){return(new TextEncoder).encode(e)}function p(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function v(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?h((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):m(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?h(p(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:d,concatBytes:f,hexToBytes:h,utf8ToBytes:m},r.RLP={encode:n,decode:o}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util>@ethereumjs/rlp",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/node_modules/@ethereumjs/rlp/dist/cjs/index.js"}],[1647,{"./types":1651},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1648,{"./constants":1647,"./siwe":1650,"./types":1651,"./util":1652},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r),i(e("./siwe"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1649,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/logger.js"}],[165,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:73,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=73;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[1650,{"./logger":1649,"@metamask/utils":1982,"@spruceid/siwe-parser":2189,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),a=e("./logger"),s=(0,a.createModuleLogger)(a.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:(0,n.remove0x)(r),a=t.from(i,"hex");return 32===a.length?e:a.toString("utf8")}catch(t){return s(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:i}=e;if(!n||!(null===(t=null==i?void 0:i.parsedMessage)||void 0===t?void 0:t.domain))return!1;const a=new URL(n),s=(0,r.parseDomainParts)(i.parsedMessage.domain,a.protocol);return 0===s.hostname.localeCompare(a.hostname,undefined,{sensitivity:"accent"})&&(""!==s.port&&s.port!==a.port?""===a.port&&s.port===c[a.protocol]:""===s.username||s.username===a.username)}catch(e){return s(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new i.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1651,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1652,{"./constants":1647,"@ethereumjs/util":1660,"@metamask/ethjs-unit":1226,"@metamask/utils":1982,"bn.js":2586,buffer:2634,"eth-ens-namehash":2833,"fast-deep-equal":2964},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const a=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=i(e("bn.js")),l=i(e("eth-ens-namehash")),d=i(e("fast-deep-equal")),u=e("./constants"),h=new Error("timeout");function f(e){return e?new c.default((0,o.remove0x)(e),16):new c.default(0)}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield m(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=u.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.default(t),i=new c.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,s.toWei)(r,"gwei");if(n.length<=9)return(0,s.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let a=(0,s.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(a=a.add(new c.default(1))),a},r.weiHexToGweiDec=function(e){const t=new c.default((0,o.remove0x)(e),16);return(0,s.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new c.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.default.isBN(e)?e.toString(16):new c.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,a.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,a.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=m,r.handleFetch=p,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield p(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const a=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,a):e.sendAsync({method:t,params:r},a)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,d.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[1653,{"./bytes":1656,"./constants":1657,"./helpers":1659,"./internal":1661,"@ethereumjs/rlp":383,buffer:2634,"ethereum-cryptography/keccak":2868,"ethereum-cryptography/secp256k1":2885,"ethereum-cryptography/utils":2887},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const n=e("@ethereumjs/rlp"),i=e("ethereum-cryptography/keccak"),a=e("ethereum-cryptography/secp256k1"),s=e("ethereum-cryptography/utils"),o=e("./bytes"),c=e("./constants"),l=e("./helpers"),d=e("./internal"),u=BigInt(0);class h{constructor(e=u,t=u,r=c.KECCAK256_RLP,n=c.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:i}=e;return new h(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,r!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):undefined,n!==undefined?(0,o.toBuffer)(n):undefined,i!==undefined?(0,o.toBuffer)(i):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,i]=e;return new h((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),n,i)}_validate(){if(this.nonce<u)throw new Error("nonce must be greater than zero");if(this.balance<u)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(n.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===u&&this.nonce===u&&this.codeHash.equals(c.KECCAK256_NULL)}}r.Account=h;r.isValidAddress=function(e){try{(0,l.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,l.assertIsHexString)(e);const n=(0,d.stripHexPrefix)(e).toLowerCase();let a="";if(r!==undefined){a=(0,o.bufferToBigInt)((0,o.toBuffer)(r)).toString()+"0x"}const c=t.from(a+n,"utf8"),u=(0,s.bytesToHex)((0,i.keccak256)(c));let h="0x";for(let e=0;e<n.length;e++)parseInt(u[e],16)>=8?h+=n[e].toUpperCase():h+=n[e];return h};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(r),(0,o.bufferToBigInt)(r)===BigInt(0)?t.from((0,i.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,i.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,n){if((0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(r),(0,l.assertIsBuffer)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const a=(0,i.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,i.keccak256)(n)]));return(0,o.toBuffer)(a).slice(-20)};r.isValidPrivate=function(e){return a.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,l.assertIsBuffer)(e),64===e.length)try{return a.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return a.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,l.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(a.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,i.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,l.assertIsBuffer)(e),t.from(a.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,l.assertIsBuffer)(e),64!==e.length&&(e=t.from(a.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function f(e){const[t,r,n,i]=e;return[t,r,0===(0,o.arrToBufArr)(n).length?c.KECCAK256_RLP:n,0===(0,o.arrToBufArr)(i).length?c.KECCAK256_NULL:i]}r.isZeroAddress=function(e){try{(0,l.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=f;const m=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,n,i]=e;return[t,r,(0,o.arrToBufArr)(n).equals(c.KECCAK256_RLP)?m:n,(0,o.arrToBufArr)(i).equals(c.KECCAK256_NULL)?m:i]},r.accountBodyToRLP=function(e,t=!0){const r=t?f(e):e;return(0,o.arrToBufArr)(n.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/account.js"}],[1654,{"./account":1653,"./bytes":1656,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const n=e("./account"),i=e("./bytes");class a{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new a((0,i.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new a((0,i.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,n.pubToAddress)(e);return new a(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,n.privateToAddress)(e);return new a(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new a((0,n.generateAddress)(e.buf,(0,i.bigIntToBuffer)(t)))}static generate2(e,r,i){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(i))throw new Error("Expected initCode to be a Buffer");return new a((0,n.generateAddress2)(e.buf,r,i))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(a.zero())}isPrecompileOrSystemAddress(){const e=(0,i.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/address.js"}],[1655,{events:2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const n=e("events");class i extends n.EventEmitter{emit(e,...t){let[r,n]=t;const i=this;let a=i._events[e]??[];return n===undefined&&"function"==typeof r&&(n=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=undefined),a=Array.isArray(a)?a:[a],async function(e,t,r){let n;for await(const i of t)try{i.length<2?i.call(e,r):await new Promise(((t,n)=>{i.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(i,a.slice(),r).then(n).catch(n),i.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(i,a){r.removeListener(e,n),t(i,a)}:function(i){r.removeListener(e,n),t(i,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let i,a,s=this._events[e]??[];const o="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(s)||(this._events[e]=s=[s]),a=s.length,i=s.length;i--;)if(s[i]===t){a=i+o;break}return s.splice(a,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=i}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[1656,{"./helpers":1659,"./internal":1661,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const n=e("./helpers"),i=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const n=(0,r.intToHex)(e);return t.from((0,i.padToEven)(n.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const a=function(e,t,n){const i=(0,r.zeros)(t);return n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,n.assertIsBuffer)(e),a(e,t,!1)};r.setLengthRight=function(e,t){return(0,n.assertIsBuffer)(e),a(e,t,!0)};const s=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,n.assertIsBuffer)(e),s(e)};r.unpadArray=function(e){return(0,n.assertIsArray)(e),s(e)};r.unpadHexString=function(e){return(0,n.assertIsHexString)(e),e=(0,i.stripHexPrefix)(e),"0x"+s(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,i.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,i.padToEven)((0,i.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function c(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=o,r.bigIntToBuffer=c;r.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,o(e))};r.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,i.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const n=t.isBuffer(e)?e.toString("hex"):e;return n.length<=r?n:n.slice(0,r)+"…"};r.toUtf8=function(e){if((e=(0,i.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,r.baToJSON)(e[n]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(c(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/bytes.js"}],[1657,{buffer:2634,"ethereum-cryptography/secp256k1":2885},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("buffer"),i=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=i.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=i.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=n.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/constants.js"}],[1658,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=t<<5,1&~e.length||(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,n.subarray(1)),n};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const n=2-(1&t[0]);return t.subarray(n)}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/encoding.js"}],[1659,{"../../../../../../../../../is-buffer/index.js":3264,"./internal":1661},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const n=e("./internal");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/helpers.js"}],[166,{"../../../shared/constants/network":4131,"bignumber.js":2539,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("lodash"),a=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},s=e("../../../shared/constants/network");const o=e=>new a.default(e||"0x0",16).gt(0),c=["0x3","0x2a","0x4"],l={"0x3":{rpcUrl:(0,s.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,s.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,s.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};r.default={version:74,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=74;const r=function(e){var t,r;const n=(null==e?void 0:e.PreferencesController)||{},a=n.preferences||{},s=(null==e?void 0:e.NetworkController)||{},d=(null==s?void 0:s.provider)||{},u=c.filter((e=>e===(null==d?void 0:d.chainId)));if(!a.showTestNetworks&&0===u.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},f=(null===(r=e.CachedBalancesController)||void 0===r?void 0:r.cachedBalances)||{},m=Object.values(h).filter((({chainId:e})=>c.includes(e))).map((({chainId:e})=>e)),p=c.filter((e=>Object.values(f[e]||{}).some(o))),g=(0,i.uniq)([...p,...m,...u]),v=n.frequentRpcListDetail??[];g.forEach((e=>{v.find((t=>t.chainId===e))||v.unshift({rpcUrl:l[e].rpcUrl,chainId:e,ticker:l[e].ticker,nickname:l[e].nickname,rpcPrefs:{}})})),v.length&&(n.frequentRpcListDetail=v);if(u.length){const e=u[0];s.provider={...s.provider,type:"rpc",rpcUrl:l[e].rpcUrl,chainId:e,nickname:l[e].nickname,ticker:l[e].ticker}}return{...e,PreferencesController:{...n},NetworkController:{...s}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[1660,{"./account":1653,"./address":1654,"./asyncEventEmitter":1655,"./bytes":1656,"./constants":1657,"./encoding":1658,"./internal":1661,"./lock":1662,"./provider":1663,"./signature":1664,"./types":1665,"./units":1666,"./withdrawal":1667},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,i(e("./constants"),r),i(e("./units"),r),i(e("./account"),r),i(e("./address"),r),i(e("./withdrawal"),r),i(e("./signature"),r),i(e("./bytes"),r),i(e("./types"),r),i(e("./encoding"),r),i(e("./asyncEventEmitter"),r);var a=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return a.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return a.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return a.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return a.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return a.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return a.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return a.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return a.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return a.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return a.toAscii}}),i(e("./lock"),r),i(e("./provider"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/index.js"}],[1661,{buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function n(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=n,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(t){return`0x${n(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let i=0;i<e.length;i++){let a=e[i][t];if(!0!==r||a){if("string"!=typeof a)throw new Error("invalid abi - expected type 'string', received "+typeof a)}else a="";n.push(a)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/internal.js"}],[1662,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/lock.js"}],[1663,{"micro-ftch":3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const n=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/provider.js"}],[1664,{"./bytes":1656,"./constants":1657,"./helpers":1659,buffer:2634,"ethereum-cryptography/keccak":2868,"ethereum-cryptography/secp256k1":2885},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),a=e("./bytes"),s=e("./constants"),o=e("./helpers");function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function l(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,n){const a=i.secp256k1.sign(e,r),s=a.toCompactRawBytes();return{r:t.from(s.slice(0,32)),s:t.from(s.slice(32,64)),v:n===undefined?BigInt(a.recovery+27):BigInt(a.recovery+35)+BigInt(n)*BigInt(2)}};r.ecrecover=function(e,r,n,s,o){const d=t.concat([(0,a.setLengthLeft)(n,32),(0,a.setLengthLeft)(s,32)],64),u=c(r,o);if(!l(u))throw new Error("Invalid signature v value");const h=i.secp256k1.Signature.fromCompact(d).addRecoveryBit(Number(u)).recoverPublicKey(e);return t.from(h.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,n,i){if(!l(c(e,i)))throw new Error("Invalid signature v value");return(0,a.bufferToHex)(t.concat([(0,a.setLengthLeft)(r,32),(0,a.setLengthLeft)(n,32),(0,a.toBuffer)(e)]))};r.toCompactSig=function(e,r,n,i){if(!l(c(e,i)))throw new Error("Invalid signature v value");let s=n;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(s=t.from(n),s[0]|=128),(0,a.bufferToHex)(t.concat([(0,a.setLengthLeft)(r,32),(0,a.setLengthLeft)(s,32)]))};r.fromRpcSig=function(e){const t=(0,a.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,a.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,a.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return i<27&&(i+=BigInt(27)),{v:i,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,i){if(32!==t.length||32!==r.length)return!1;if(!l(c(e,i)))return!1;const o=(0,a.bufferToBigInt)(t),d=(0,a.bufferToBigInt)(r);return!(o===BigInt(0)||o>=s.SECP256K1_ORDER||d===BigInt(0)||d>=s.SECP256K1_ORDER)&&!(n&&d>=s.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,n.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/signature.js"}],[1665,{"./bytes":1656,"./internal":1661},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes"),i=e("./internal");var a;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(a=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,i.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case a.Buffer:return r;case a.BigInt:return(0,n.bufferToBigInt)(r);case a.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case a.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/types.js"}],[1666,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/units.js"}],[1667,{"./address":1654,"./bytes":1656,"./types":1665,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address"),i=e("./bytes"),a=e("./types");class s{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:o}=e,c=(0,a.toType)(t,a.TypeOutput.BigInt),l=(0,a.toType)(r,a.TypeOutput.BigInt),d=new n.Address((0,a.toType)(i,a.TypeOutput.Buffer)),u=(0,a.toType)(o,a.TypeOutput.BigInt);return new s(c,l,d,u)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,i]=e;return s.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBufferArray(e){const{index:r,validatorIndex:i,address:s,amount:o}=e,c=(0,a.toType)(r,a.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,a.toType)(r,a.TypeOutput.Buffer),l=(0,a.toType)(i,a.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,a.toType)(i,a.TypeOutput.Buffer);let d;d=s instanceof n.Address?s.buf:(0,a.toType)(s,a.TypeOutput.Buffer);return[c,l,d,(0,a.toType)(o,a.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,a.toType)(o,a.TypeOutput.Buffer)]}raw(){return s.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,i.bigIntToHex)(this.index),validatorIndex:(0,i.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,i.bigIntToHex)(this.amount)}}}r.Withdrawal=s}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[1668,{"./has-tx-object":1669,"@babel/runtime/helpers/asyncToGenerator":1596,"@babel/runtime/helpers/interopRequireDefault":1597,"@babel/runtime/regenerator":1600,"@metamask/ethjs-filter":1671,"@metamask/ethjs-util":1675,"ethjs-abi":2933,"js-sha3":3289,"promise-to-callback":3629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/regenerator")),a=n(e("@babel/runtime/helpers/asyncToGenerator")),s=e("ethjs-abi"),o=e("@metamask/ethjs-filter"),c=e("@metamask/ethjs-util").getKeys,l=e("js-sha3").keccak_256,d=e("promise-to-callback"),u=e("./has-tx-object");t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=this;function r(e){return function(){var t,r=[].slice.call(arguments);"function"==typeof r[r.length-1]&&(t=r.pop());var i=function(e){return n.apply(this,arguments)}({methodObject:e,methodArgs:r});return t?d(i)(t):i}}function n(){return(n=(0,a.default)(i.default.mark((function e(r){var n,a,o,c,l,d,h;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.methodObject,a=r.methodArgs,o="call",c={},u(a)&&(c=a.pop()),(l=Object.assign({},t.defaultTxObject,c,{to:t.address})).data=s.encodeMethod(n,a),!1===n.constant&&(o="sendTransaction"),e.next=9,t.query[o](l);case 9:if(d=e.sent,"call"!==o){e.next=20;break}return e.prev=11,h=s.decodeMethod(n,d),e.abrupt("return",h);case 16:throw e.prev=16,e.t0=e.catch(11),new Error("[ethjs-contract] while formatting incoming raw call data "+JSON.stringify(d)+" "+e.t0);case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,null,[[11,16]])})))).apply(this,arguments)}t.abi=e.contractABI||[],t.query=e.query,t.address=e.address||"0x",t.bytecode=e.contractBytecode||"0x",t.defaultTxObject=e.contractDefaultTxObject||{},t.filters=new o(t.query),(h=t.abi,h.filter((function(e){return("function"===e.type||"event"===e.type)&&e.name.length>0}))).forEach((function(e){"function"===e.type?t[e.name]=r(e):"event"===e.type&&(t[e.name]=function(e){return function(){var r=[].slice.call(arguments),n=c(e.inputs,"type",!1),i=["0x"+l(e.name+"("+n.join(",")+")")],a=Object.assign({},r[0])||{},o=Object.assign({},r[0]||{},{to:t.address,topics:i}),d=Object.assign({},a,{decoder:function(t){return s.decodeEvent(e,t,i)},defaultFilterObject:o});return new t.filters.Filter(d)}}(e))}));var h}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-contract/lib/contract.js"}],[1669,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=["from","to","data","value","gasPrice","gas"];t.exports=function(e){if(!Array.isArray(e)||0===e.length)return!1;var t=e[e.length-1];if(!t)return!1;if("object"!=typeof t)return!1;if(0===Object.keys(t).length)return!0;var r=Object.keys(t);if(n.some((function(e){return r.includes(e)})))return!0;return!1}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-contract/lib/has-tx-object.js"}],[167,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:75,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=75;const r=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[1670,{"./contract":1668,"./has-tx-object":1669,"@metamask/ethjs-filter":1671,"@metamask/ethjs-util":1675,"ethjs-abi":2933,"js-sha3":3289},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("ethjs-abi"),i=(e("js-sha3").keccak_256,e("@metamask/ethjs-filter"),e("@metamask/ethjs-util").getKeys),a=e("./contract"),s=e("./has-tx-object");t.exports=function(e){return function(t,r,o){if(!Array.isArray(t))throw new Error("[ethjs-contract] Contract ABI must be type Array, got type "+typeof t);if(void 0!==r&&"string"!=typeof r)throw new Error("[ethjs-contract] Contract bytecode must be type String, got type "+typeof r);if(void 0!==o&&"object"!=typeof o)throw new Error("[ethjs-contract] Contract default tx object must be type Object, got type "+typeof t);var c={at:function(n){return new a({address:n,query:e,contractBytecode:r,contractDefaultTxObject:o,contractABI:t})},new:function(){var a={},c=null,l=[].slice.call(arguments);"function"==typeof l[l.length-1]&&(c=l.pop()),s(l)&&(a=l.pop());var d=function(e){return e.filter((function(e){return"constructor"===e.type}))[0]}(t),u=Object.assign({},o,a);if(r&&(u.data=r),d){var h=n.encodeParams(i(d.inputs,"type"),l).substring(2);u.data=""+u.data+h}return c?e.sendTransaction(u,c):e.sendTransaction(u)}};return c}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-contract/lib/index.js"}],[1671,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){function r(e){var r=this;r.filterId=null,r.options=Object.assign({delay:300,decoder:function(e){return e},defaultFilterObject:{}},e||{}),r.watchers={},r.interval=setInterval((function(){null!==r.filterId&&Object.keys(r.watchers).length>0&&t.getFilterChanges(r.filterId,(function(e,t){var n=[],i=null;if(!e)try{t.forEach((function(e,i){n[i]=t[i],"object"==typeof t[i]&&(n[i].data=r.options.decoder(n[i].data))}))}catch(e){i=new Error("[ethjs-filter] while decoding filter change event data from RPC '"+JSON.stringify(n)+"': "+e)}Object.keys(r.watchers).forEach((function(a){var s=r.watchers[a];!0!==s.stop?i?s.callback(i,null):e?s.callback(e,null):Array.isArray(n)&&t.length>0&&s.callback(e,n):delete r.watchers[a]}))}))}),r.options.delay)}return r.prototype.at=function(e){this.filterId=e},r.prototype.watch=function(e){var t=e||function(){},r=this,n=Math.random().toString(36).substring(7);return r.watchers[n]={callback:t,stop:!1,stopWatching:function(){r.watchers[n].stop=!0}},r.watchers[n]},r.prototype.uninstall=function(e){var r=this,n=e||null;r.watchers=Object.assign({}),clearInterval(r.interval);var i=new Promise((function(e,n){t.uninstallFilter(r.filterId,(function(t,r){t?n(t):e(r)}))}));return n&&i.then((function(e){return n(null,e)})).catch((function(e){return n(e,null)})),n?null:i},r.prototype.new=function(){var r=null,n=this,i=[],a=[].slice.call(arguments);"function"==typeof a[a.length-1]&&(r=a.pop()),"Filter"===e&&i.push(Object.assign(n.options.defaultFilterObject,a[a.length-1]||{}));var s=new Promise((function(r,a){i.push((function(e,t){e?a(e):(n.filterId=t,r(t))})),t["new"+e].apply(t,i)}));return r&&s.then((function(e){return r(null,e)})).catch((function(e){return r(e,null)})),r?null:s},r}t.exports=function e(t){var r=this;if(!(r instanceof e))throw new Error("the EthFilter object must be instantiated with `new` flag.. (e.g. `const filters = new EthFilter(query);`)");if("object"!=typeof t)throw new Error("the EthFilter object must be instantiated with an EthQuery instance (e.g. `const filters = new EthFilter(new EthQuery(provider));`). See github.com/ethjs/ethjs-query for more details..");r.Filter=n("Filter",t),r.BlockFilter=n("BlockFilter",t),r.PendingTransactionFilter=n("PendingTransactionFilter",t)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract>@metamask/ethjs-filter",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-filter/lib/index.js"}],[1672,{"@metamask/ethjs-util":1675,"@metamask/number-to-bn":1430,"ethjs-schema":2935,"strip-hex-prefix":3999},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@metamask/number-to-bn"),i=e("ethjs-schema"),a=e("@metamask/ethjs-util"),s=a.arrayContainsArray,o=a.getBinarySize,c=a.padToEven,l=e("strip-hex-prefix");function d(e,t,r){if(-1===["string","number","object"].indexOf(typeof e)||null===e)return e;var i=n(e),a=r&&i.toString(16).length%2?"0":"";if(n(e).isNeg())throw new Error("[ethjs-format] while formatting quantity '"+i.toString(10)+"', invalid negative number. Number must be positive or zero.");return t?"0x"+a+i.toString(16):i}function u(e,t){var r=e;return-1===i.tags.indexOf(e)&&(r=d(e,t)),r}function h(e,t){var r=e,n=0;if("string"==typeof e&&(r="0x"+c(l(e)),n=o(r)),"0x00"===r&&(r="0x0"),"number"==typeof t&&null!==e&&"0x"!==r&&"0x0"!==r&&(!/^[0-9A-Fa-f]+$/.test(l(r))||n!==2+2*t))throw new Error("[ethjs-format] hex string '"+r+"' must be an alphanumeric "+(2+2*t)+" utf8 byte hex (chars: a-fA-F) string, is "+n+" bytes");return r}function f(e,t,r){var n=Object.assign({},t),a=null;if("string"==typeof e&&(a="Boolean|EthSyncing"===e?Object.assign({},i.objects.EthSyncing):"DATA|Transaction"===e?Object.assign({},i.objects.Transaction):Object.assign({},i.objects[e])),!s(Object.keys(t),a.__required))throw new Error("[ethjs-format] object "+JSON.stringify(t)+" must contain properties: "+a.__required.join(", "));return Object.keys(a).forEach((function(e){"__required"!==e&&void 0!==t[e]&&(n[e]=p(a[e],t[e],r))})),n}function m(e,t,r,n){var i=t.slice(),a=e;if("Array|DATA"===e&&(a=["D"]),"FilterChange"===e&&"string"==typeof t[0]&&(a=["D32"]),!0===r&&"number"==typeof n&&t.length<n)throw new Error("array "+JSON.stringify(t)+" must contain at least "+n+" params, but only contains "+t.length+".");return a=a.slice(),t.forEach((function(e,t){var n=0;a.length>1&&(n=t),i[t]=p(a[n],e,r)})),i}function p(e,t,r,n){var i=t;return"Q"===e?i=d(t,r):"QP"===e?i=d(t,r,!0):"Q|T"===e?i=u(t,r):"D"===e?i=h(t):"D20"===e?i=h(t,20):"D32"===e?i=h(t,32):"object"==typeof t&&null!==t&&!1===Array.isArray(t)?i=f(e,t,r):Array.isArray(t)&&(i=m(e,t,r,n)),i}t.exports={schema:i,formatQuantity:d,formatQuantityOrTag:u,formatObject:f,formatArray:m,format:p,formatInputs:function(e,t){return p(i.methods[e][0],t,!0,i.methods[e][2])},formatOutputs:function(e,t){return p(i.methods[e][1],t,!1)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-query>@metamask/ethjs-format",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-format/lib/index.js"}],[1673,{"@metamask/ethjs-format":1672,"@metamask/ethjs-rpc":1674,"promise-to-callback":3629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("@metamask/ethjs-format"),i=e("@metamask/ethjs-rpc"),a=e("promise-to-callback");function s(e,t){var r=this,n=t||{};if(!(this instanceof s))throw new Error('[ethjs-query] the Eth object requires the "new" flag in order to function normally (i.e. `const eth = new Eth(provider);`).');if("object"!=typeof e)throw new Error("[ethjs-query] the Eth object requires that the first input 'provider' must be an object, got '"+typeof e+"' (i.e. 'const eth = new Eth(provider);')");r.options=Object.assign({debug:n.debug||!1,logger:n.logger||console,jsonSpace:n.jsonSpace||0}),r.rpc=new i(e),r.setProvider=r.rpc.setProvider}function o(e,t){return function(){var r=null,i=null,s=this,o=[].slice.call(arguments),c=e.replace("eth_","");o.length>0&&"function"==typeof o[o.length-1]&&(r=o.pop());var l=function(){var r=this;return new Promise((function(a,l){if(o.length<t[2])l(new Error("[ethjs-query] method '"+c+"' requires at least "+t[2]+" input (format type "+t[0][0]+"), "+o.length+" provided. For more information visit: https://github.com/ethereum/wiki/wiki/JSON-RPC#"+e.toLowerCase()));else if(o.length>t[0].length)l(new Error("[ethjs-query] method '"+c+"' requires at most "+t[0].length+" params, "+o.length+" provided '"+JSON.stringify(o,null,s.options.jsonSpace)+"'. For more information visit: https://github.com/ethereum/wiki/wiki/JSON-RPC#"+e.toLowerCase()));else{t[3]&&o.length<t[3]&&o.push("latest"),r.log("attempting method formatting for '"+c+"' with inputs "+JSON.stringify(o,null,r.options.jsonSpace));try{i=n.formatInputs(e,o),r.log("method formatting success for '"+c+"' with formatted result: "+JSON.stringify(i,null,r.options.jsonSpace))}catch(e){return void l(new Error("[ethjs-query] while formatting inputs '"+JSON.stringify(o,null,r.options.jsonSpace)+"' for method '"+c+"' error: "+e))}r.rpc.sendAsync({method:e,params:i}).then((function(t){r.log("attempting method formatting for '"+c+"' with raw outputs: "+JSON.stringify(t,null,r.options.jsonSpace));var i=n.formatOutputs(e,t);r.log("method formatting success for '"+c+"' formatted result: "+JSON.stringify(i,null,r.options.jsonSpace)),a(i)})).catch((function(e){l(e)}))}}))}.call(this);return r?a(l)(r):l}}t.exports=s,s.prototype.log=function(e){this.options.debug&&this.options.logger.log("[ethjs-query log] "+e)},Object.keys(n.schema.methods).forEach((function(e){Object.defineProperty(s.prototype,e.replace("eth_",""),{enumerable:!0,value:o(e,n.schema.methods[e])})}))}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-query",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-query/lib/index.js"}],[1674,{"promise-to-callback":3629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("promise-to-callback");function i(e,t){var r=this,n=t||{};if(!(this instanceof i))throw new Error('[ethjs-rpc] the EthRPC object requires the "new" flag in order to function normally (i.e. `const eth = new EthRPC(provider);`).');r.options=Object.assign({jsonSpace:n.jsonSpace||0,max:n.max||9999999999999}),r.idCounter=Math.floor(Math.random()*r.options.max),r.setProvider=function(e){if("object"!=typeof e)throw new Error("[ethjs-rpc] the EthRPC object requires that the first input 'provider' must be an object, got '"+typeof e+"' (i.e. 'const eth = new EthRPC(provider);')");r.currentProvider=e},r.setProvider(e)}t.exports=i,i.prototype.sendAsync=function(e,t){var r=this;r.idCounter=r.idCounter%r.options.max;var i,a,s=(i=e,a=r.idCounter++,Object.assign({},{id:a,jsonrpc:"2.0",params:[]},i)),o=new Promise((function(e,t){r.currentProvider.sendAsync(s,(function(n,i){var a=i||{};if(n||a.error){var o="[ethjs-rpc] "+(a.error?"rpc":"")+" error with payload "+JSON.stringify(s,null,r.options.jsonSpace)+" "+(n?String(n):JSON.stringify(a.error,null,r.options.jsonSpace)),c=new Error(o);return c.value=n||a.error,void t(c)}e(a.result)}))}));return t?n(o)(t):o}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-query>@metamask/ethjs-rpc",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-rpc/lib/index.js"}],[1675,{buffer:2634,"is-hex-prefixed":3269,"strip-hex-prefix":3999},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),i=e("strip-hex-prefix");function a(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function s(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=s(e);return r.from(a(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:i,padToEven:a,intToHex:s,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+a(r.from(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},toUtf8:function(e){return r.from(a(i(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var a=e[i][t];if(r&&!a)a="";else if("string"!=typeof a)throw new Error("invalid abi");n.push(a)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract>@metamask/ethjs-util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-util/lib/index.js"}],[1676,{"./chunk-ITDY6AIZ.js":1688,"./chunk-S6VGOPUY.js":1694,"./chunk-UGFBA4GV.js":1697,"@metamask/controller-utils":1738,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-UGFBA4GV.js"),i=e("./chunk-ITDY6AIZ.js"),a=e("./chunk-S6VGOPUY.js"),s=e("@metamask/controller-utils"),o=e("lodash"),c=a.createModuleLogger.call(void 0,a.projectLogger,"swaps"),l=5e3,d="0x0000000000000000000000000000000000000000",u={name:"Ether",address:d,decimals:18},h={name:"Binance Coin",address:d,decimals:18},f={name:"Matic",address:d,decimals:18},m={name:"Avalanche",address:d,decimals:18},p={name:"Test Ether",address:d,decimals:18},g={name:"Ether",address:d,decimals:18},v={...u},y={...u},b={...u},_={[i.CHAIN_IDS.MAINNET]:u,"0x539":p,[i.CHAIN_IDS.BSC]:h,[i.CHAIN_IDS.POLYGON]:f,[i.CHAIN_IDS.GOERLI]:g,[i.CHAIN_IDS.AVALANCHE]:m,[i.CHAIN_IDS.OPTIMISM]:y,[i.CHAIN_IDS.ARBITRUM]:v,[i.CHAIN_IDS.ZKSYNC_ERA]:b},w=["swap","swapApproval"];function T(e,t){return!(!e||!t)&&e===_[t]?.address}function k(e){return new Promise((t=>setTimeout(t,e)))}r.UPDATE_POST_TX_BALANCE_TIMEOUT=l,r.UPDATE_POST_TX_BALANCE_ATTEMPTS=6,r.DEFAULT_TOKEN_ADDRESS=d,r.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=_,r.SWAP_TRANSACTION_TYPES=w,r.updateSwapsTransaction=function(e,t,r,{isSwapsDisabled:i,cancelTransaction:a,messenger:s}){if(i||!w.includes(t))return e;if("swap"===t&&!1===r?.hasApproveTx&&e.simulationFails)throw a(e.id),new Error("Simulation failed");const c=r?.meta;if(!c)return e;let l=e;return"swapApproval"===t&&(l=function(e,{type:t,sourceTokenSymbol:r}){n.validateIfTransactionUnapproved.call(void 0,e,"updateSwapApprovalTransaction");let i={type:t,sourceTokenSymbol:r};return i=o.pickBy.call(void 0,{type:t,sourceTokenSymbol:r}),o.merge.call(void 0,{},e,i)}(e,c),s.publish("TransactionController:transactionNewSwapApproval",{transactionMeta:l})),"swap"===t&&(l=function(e,{sourceTokenSymbol:t,destinationTokenSymbol:r,type:i,destinationTokenDecimals:a,destinationTokenAddress:s,swapMetaData:c,swapTokenValue:l,estimatedBaseFee:d,approvalTxId:u}){n.validateIfTransactionUnapproved.call(void 0,e,"updateSwapTransaction");let h={sourceTokenSymbol:t,destinationTokenSymbol:r,type:i,destinationTokenDecimals:a,destinationTokenAddress:s,swapMetaData:c,swapTokenValue:l,estimatedBaseFee:d,approvalTxId:u};return h=o.pickBy.call(void 0,h),o.merge.call(void 0,{},e,h)}(e,c),s.publish("TransactionController:transactionNewSwap",{transactionMeta:l})),l},r.updatePostTransactionBalance=async function(e,{ethQuery:t,getTransaction:r,updateTransaction:n}){c("Updating post transaction balance",e.id);const i=e.id;let a,o;for(let n=0;n<6;n++){c("Querying balance",{attempt:n});const d=await s.query.call(void 0,t,"getBalance",[e.txParams.from]);a={...r(i)??{}},o=a.approvalTxId?r(a.approvalTxId):void 0,a.postTxBalance=d.toString(16);const u=T(e.destinationTokenAddress,e.chainId);if(!u||e.preTxBalance!==a.postTxBalance){c("Finishing post balance update",{isDefaultTokenAddress:u,preTxBalance:e.preTxBalance,postTxBalance:a.postTxBalance});break}c("Waiting for balance to update",{delay:l}),await k(l)}return n(a,"TransactionController#updatePostTransactionBalance - Add post transaction balance"),c("Completed post balance update",a?.postTxBalance),{updatedTransactionMeta:a,approvalTransactionMeta:o}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-5OQ373JS.js"}],[1677,{"./chunk-S6VGOPUY.js":1694,"./chunk-Z4BLTVTB.js":1700,"@metamask/controller-utils":1738,events:2936,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f,m,p,g,v,y,b,_,w,T,k,E,I,P,S,x,A,C,j,M,B,N,O,L,R,F,G,H,D,U,W,$,q,V,K,z,Y,Q,X,J,Z,ee,te,re,ne=e("./chunk-S6VGOPUY.js"),ie=e("./chunk-Z4BLTVTB.js"),ae=e("@metamask/controller-utils"),se=e("events"),oe=(n=se)&&n.__esModule?n:{default:n},ce=e("lodash"),le=["replacement transaction underpriced","known transaction","gas price too low to replace","transaction with the same hash was already imported","gateway timeout","nonce too low"],de=ne.createModuleLogger.call(void 0,ne.projectLogger,"pending-transactions");i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakMap,g=new WeakMap,v=new WeakSet,y=function(){ie.__privateGet.call(void 0,this,m)||(ie.__privateGet.call(void 0,this,a).on("latest",ie.__privateGet.call(void 0,this,u)),ie.__privateSet.call(void 0,this,m,!0),de("Started polling"))},b=new WeakSet,_=async function(e){const t=await ie.__privateGet.call(void 0,this,h).call(this);try{await ie.__privateMethod.call(void 0,this,w,T).call(this)}catch(e){de("Failed to check transactions",e)}finally{t()}try{await ie.__privateMethod.call(void 0,this,k,E).call(this,e)}catch(e){de("Failed to resubmit transactions",e)}},w=new WeakSet,T=async function(){de("Checking transactions");const e=ie.__privateMethod.call(void 0,this,G,H).call(this);e.length?(de("Found pending transactions to check",{count:e.length,ids:e.map((e=>e.id))}),await Promise.all(e.map((e=>ie.__privateMethod.call(void 0,this,j,M).call(this,e))))):de("No pending transactions to check")},k=new WeakSet,E=async function(e){if(!ie.__privateGet.call(void 0,this,d)||!ie.__privateGet.call(void 0,this,m))return;de("Resubmitting transactions");const t=ie.__privateMethod.call(void 0,this,G,H).call(this);if(t.length){de("Found pending transactions to resubmit",{count:t.length,ids:t.map((e=>e.id))});for(const r of t)try{await ie.__privateMethod.call(void 0,this,S,x).call(this,r,e)}catch(e){const t=e.value?.message?.toLowerCase()||e.message.toLowerCase();if(ie.__privateMethod.call(void 0,this,I,P).call(this,t))return void de("Ignoring known transaction error",t);ie.__privateMethod.call(void 0,this,D,U).call(this,r,e.message,"There was an error when resubmitting this transaction.")}}else de("No pending transactions to resubmit")},I=new WeakSet,P=function(e){return le.some((t=>e.includes(t)))},S=new WeakSet,x=async function(e,t){if(!ie.__privateMethod.call(void 0,this,A,C).call(this,e,t))return;const{rawTx:r}=e;if(!ie.__privateGet.call(void 0,this,g).call(this,e))return;if(!r?.length)return de("Approving transaction as no raw value"),void await ie.__privateGet.call(void 0,this,i).call(this,e.id);const n=ie.__privateGet.call(void 0,this,c).call(this,e.networkClientId);await ie.__privateGet.call(void 0,this,f).call(this,n,r);const a=(e.retryCount??0)+1;ie.__privateMethod.call(void 0,this,K,z).call(this,ce.merge.call(void 0,{},e,{retryCount:a}),"PendingTransactionTracker:transaction-retry - Retry count increased")},A=new WeakSet,C=function(e,t){const r=ce.cloneDeep.call(void 0,e);r.firstRetryBlockNumber||(r.firstRetryBlockNumber=t,ie.__privateMethod.call(void 0,this,K,z).call(this,r,"PendingTransactionTracker:#isResubmitDue - First retry block number set"));const{firstRetryBlockNumber:n}=r,i=Number.parseInt(t,16)-Number.parseInt(n,16),a=e.retryCount||0;return i>=Math.min(50,Math.pow(2,a))},j=new WeakSet,M=async function(e){const{hash:t,id:r}=e;if(!t&&ie.__privateGet.call(void 0,this,p).call(this,e)){const t=new Error("We had an error while submitting this transaction, please try again.");return t.name="NoTxHashError",void ie.__privateMethod.call(void 0,this,W,$).call(this,e,t)}if(ie.__privateMethod.call(void 0,this,R,F).call(this,e))return de("Nonce already taken",r),void ie.__privateMethod.call(void 0,this,q,V).call(this,e);try{const r=await ie.__privateMethod.call(void 0,this,Y,Q).call(this,t),n="0x1"===r?.status;if("0x0"===r?.status)return de("Transaction receipt has failed status"),void ie.__privateMethod.call(void 0,this,W,$).call(this,e,new Error("Transaction dropped or replaced"));const{blockNumber:i,blockHash:a}=r||{};if(n&&i&&a)return void await ie.__privateMethod.call(void 0,this,B,N).call(this,e,{...r,blockNumber:i,blockHash:a})}catch(t){return de("Failed to check transaction",r,t),void ie.__privateMethod.call(void 0,this,D,U).call(this,e,t.message,"There was a problem loading this transaction.")}await ie.__privateMethod.call(void 0,this,O,L).call(this,e)&&ie.__privateMethod.call(void 0,this,q,V).call(this,e)},B=new WeakSet,N=async function(e,t){const{id:r}=e,{blockHash:n}=t;de("Transaction confirmed",r);const{baseFeePerGas:i,timestamp:a}=await ie.__privateMethod.call(void 0,this,X,J).call(this,n,!1),s=ce.cloneDeep.call(void 0,e);s.baseFeePerGas=i,s.blockTimestamp=a,s.status="confirmed",s.txParams={...s.txParams,gasUsed:t.gasUsed},s.txReceipt=t,s.verifiedOnBlockchain=!0,ie.__privateMethod.call(void 0,this,K,z).call(this,s,"PendingTransactionTracker:#onTransactionConfirmed - Transaction confirmed"),this.hub.emit("transaction-confirmed",s)},O=new WeakSet,L=async function(e){const{hash:t,id:r,txParams:{nonce:n,from:i}}=e;if(!n||!t)return!1;const a=await ie.__privateMethod.call(void 0,this,Z,ee).call(this,i),o=parseInt(a,16);if(parseInt(n,16)>=o)return!1;let c=ie.__privateGet.call(void 0,this,s).get(t);return void 0===c&&(c=0,ie.__privateGet.call(void 0,this,s).set(t,c)),c<3?(de("Incrementing dropped block count",{id:r,droppedBlockCount:c}),ie.__privateGet.call(void 0,this,s).set(t,c+1),!1):(de("Hit dropped block count",r),ie.__privateGet.call(void 0,this,s).delete(t),!0)},R=new WeakSet,F=function(e){const{id:t,txParams:r}=e;return ie.__privateMethod.call(void 0,this,te,re).call(this).some((e=>e.id!==t&&e.txParams.from===r.from&&"confirmed"===e.status&&e.txParams.nonce===r.nonce&&"incoming"!==e.type))},G=new WeakSet,H=function(){return ie.__privateMethod.call(void 0,this,te,re).call(this).filter((e=>"submitted"===e.status&&!e.verifiedOnBlockchain&&!e.isUserOperation))},D=new WeakSet,U=function(e,t,r){ie.__privateMethod.call(void 0,this,K,z).call(this,{...e,warning:{error:t,message:r}},"PendingTransactionTracker:#warnTransaction - Warning added")},W=new WeakSet,$=function(e,t){de("Transaction failed",e.id,t),this.hub.emit("transaction-failed",e,t)},q=new WeakSet,V=function(e){de("Transaction dropped",e.id),this.hub.emit("transaction-dropped",e)},K=new WeakSet,z=function(e,t){this.hub.emit("transaction-updated",e,t)},Y=new WeakSet,Q=async function(e){return await ae.query.call(void 0,ie.__privateGet.call(void 0,this,c).call(this),"getTransactionReceipt",[e])},X=new WeakSet,J=async function(e,t){return await ae.query.call(void 0,ie.__privateGet.call(void 0,this,c).call(this),"getBlockByHash",[e,t])},Z=new WeakSet,ee=async function(e){return await ae.query.call(void 0,ie.__privateGet.call(void 0,this,c).call(this),"getTransactionCount",[e])},te=new WeakSet,re=function(){const e=ie.__privateGet.call(void 0,this,o).call(this);return ie.__privateGet.call(void 0,this,l).call(this).filter((t=>t.chainId===e))},r.PendingTransactionTracker=class{constructor({approveTransaction:e,blockTracker:t,getChainId:r,getEthQuery:n,getTransactions:T,isResubmitEnabled:E,getGlobalLock:P,publishTransaction:x,hooks:C}){ie.__privateAdd.call(void 0,this,v),ie.__privateAdd.call(void 0,this,b),ie.__privateAdd.call(void 0,this,w),ie.__privateAdd.call(void 0,this,k),ie.__privateAdd.call(void 0,this,I),ie.__privateAdd.call(void 0,this,S),ie.__privateAdd.call(void 0,this,A),ie.__privateAdd.call(void 0,this,j),ie.__privateAdd.call(void 0,this,B),ie.__privateAdd.call(void 0,this,O),ie.__privateAdd.call(void 0,this,R),ie.__privateAdd.call(void 0,this,G),ie.__privateAdd.call(void 0,this,D),ie.__privateAdd.call(void 0,this,W),ie.__privateAdd.call(void 0,this,q),ie.__privateAdd.call(void 0,this,K),ie.__privateAdd.call(void 0,this,Y),ie.__privateAdd.call(void 0,this,X),ie.__privateAdd.call(void 0,this,Z),ie.__privateAdd.call(void 0,this,te),ie.__privateAdd.call(void 0,this,i,void 0),ie.__privateAdd.call(void 0,this,a,void 0),ie.__privateAdd.call(void 0,this,s,void 0),ie.__privateAdd.call(void 0,this,o,void 0),ie.__privateAdd.call(void 0,this,c,void 0),ie.__privateAdd.call(void 0,this,l,void 0),ie.__privateAdd.call(void 0,this,d,void 0),ie.__privateAdd.call(void 0,this,u,void 0),ie.__privateAdd.call(void 0,this,h,void 0),ie.__privateAdd.call(void 0,this,f,void 0),ie.__privateAdd.call(void 0,this,m,void 0),ie.__privateAdd.call(void 0,this,p,void 0),ie.__privateAdd.call(void 0,this,g,void 0),this.startIfPendingTransactions=()=>{ie.__privateMethod.call(void 0,this,G,H).call(this).length?ie.__privateMethod.call(void 0,this,v,y).call(this):this.stop()},this.hub=new(0,oe.default),ie.__privateSet.call(void 0,this,i,e),ie.__privateSet.call(void 0,this,a,t),ie.__privateSet.call(void 0,this,s,new Map),ie.__privateSet.call(void 0,this,o,r),ie.__privateSet.call(void 0,this,c,n),ie.__privateSet.call(void 0,this,l,T),ie.__privateSet.call(void 0,this,d,E??!0),ie.__privateSet.call(void 0,this,u,ie.__privateMethod.call(void 0,this,b,_).bind(this)),ie.__privateSet.call(void 0,this,h,P),ie.__privateSet.call(void 0,this,f,x),ie.__privateSet.call(void 0,this,m,!1),ie.__privateSet.call(void 0,this,g,C?.beforePublish??(()=>!0)),ie.__privateSet.call(void 0,this,p,C?.beforeCheckPendingTransaction??(()=>!0))}async forceCheckTransaction(e){const t=await ie.__privateGet.call(void 0,this,h).call(this);try{await ie.__privateMethod.call(void 0,this,j,M).call(this,e)}catch(e){de("Failed to check transaction",e)}finally{t()}}stop(){ie.__privateGet.call(void 0,this,m)&&(ie.__privateGet.call(void 0,this,a).removeListener("latest",ie.__privateGet.call(void 0,this,u)),ie.__privateSet.call(void 0,this,m,!1),de("Stopped polling"))}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-5XBULBP2.js"}],[1678,{"@metamask/rpc-errors":1566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/rpc-errors");r.validateConfirmedExternalTransaction=function(e,t,r){if(!e||!e.txParams)throw n.rpcErrors.invalidParams('"transactionMeta" or "transactionMeta.txParams" is missing');if("confirmed"!==e.status)throw n.rpcErrors.invalidParams('External transaction status should be "confirmed"');const i=e.txParams.nonce;if(r&&r.length>0){if(r.find((e=>e.txParams?.nonce===i)))throw n.rpcErrors.invalidParams("External transaction nonce should not be in pending txs")}if(t&&t.length>0){if(t.find((e=>e.txParams?.nonce===i)))throw n.rpcErrors.invalidParams("External transaction nonce should not be in confirmed txs")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-7LXE4KHV.js"}],[1679,{"./chunk-5OQ373JS.js":1676,"./chunk-5XBULBP2.js":1677,"./chunk-7LXE4KHV.js":1678,"./chunk-7YLATOE4.js":1680,"./chunk-CWJBSWH3.js":1681,"./chunk-DTDTOMTB.js":1683,"./chunk-F3CMU2DM.js":1684,"./chunk-GC77BSQZ.js":1685,"./chunk-NRWEI43Q.js":1690,"./chunk-QP75SWIQ.js":1691,"./chunk-R7NJVDWN.js":1692,"./chunk-RQKICZYP.js":1693,"./chunk-S6VGOPUY.js":1694,"./chunk-SD6CWFDF.js":1695,"./chunk-SSYRMQ63.js":1696,"./chunk-UGFBA4GV.js":1697,"./chunk-US7NQPYE.js":1698,"./chunk-VH47Q6TS.js":1699,"./chunk-Z4BLTVTB.js":1700,"./chunk-ZNZEJDOE.js":1701,"@ethereumjs/common":380,"@ethereumjs/tx":1707,"@ethereumjs/util":1719,"@metamask/base-controller":1732,"@metamask/controller-utils":1738,"@metamask/eth-query":1149,"@metamask/network-controller":1385,"@metamask/rpc-errors":1566,"@metamask/utils":1982,"async-mutex":2525,"eth-method-registry":1741,events:2936,lodash:3477,"nonce-tracker":3573,uuid:4067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f,m,p,g,v,y,b,_,w,T,k,E,I,P,S,x,A,C,j,M,B,N,O,L,R,F,G,H,D=e("./chunk-VH47Q6TS.js"),U=e("./chunk-RQKICZYP.js"),W=e("./chunk-QP75SWIQ.js"),$=e("./chunk-ZNZEJDOE.js"),q=e("./chunk-GC77BSQZ.js"),V=e("./chunk-SD6CWFDF.js"),K=e("./chunk-7YLATOE4.js"),z=e("./chunk-R7NJVDWN.js"),Y=e("./chunk-DTDTOMTB.js"),Q=e("./chunk-NRWEI43Q.js"),X=e("./chunk-5XBULBP2.js"),J=e("./chunk-7LXE4KHV.js"),Z=e("./chunk-CWJBSWH3.js"),ee=e("./chunk-US7NQPYE.js"),te=e("./chunk-SSYRMQ63.js"),re=e("./chunk-5OQ373JS.js"),ne=e("./chunk-UGFBA4GV.js"),ie=e("./chunk-F3CMU2DM.js"),ae=e("./chunk-S6VGOPUY.js"),se=e("./chunk-Z4BLTVTB.js"),oe=e("@ethereumjs/common"),ce=e("@ethereumjs/tx"),le=e("@ethereumjs/util"),de=e("@metamask/base-controller"),ue=e("@metamask/controller-utils"),he=e("@metamask/eth-query"),fe=(n=he)&&n.__esModule?n:{default:n},me=e("@metamask/network-controller"),pe=e("@metamask/rpc-errors"),ge=e("@metamask/utils"),ve=e("async-mutex"),ye=e("eth-method-registry"),be=e("events"),_e=e("lodash"),we=e("nonce-tracker"),Te=e("uuid"),ke={transactions:{persist:!0,anonymous:!1},methodData:{persist:!0,anonymous:!1},lastFetchedBlockNumbers:{persist:!0,anonymous:!1}},Ee=oe.Hardfork.London,Ie=1.1,Pe=1.1,Se="TransactionController",xe=(e=>(e.Approved="approved",e.NotApproved="not-approved",e.SkippedViaBeforePublishHook="skipped-via-before-publish-hook",e))(xe||{});var Ae=class extends de.BaseController{constructor({blockTracker:e,disableHistory:t,disableSendFlowHistory:r,disableSwaps:n,getCurrentAccountEIP1559Compatibility:y,getCurrentNetworkEIP1559Compatibility:T,getExternalPendingTransactions:P,getGasFeeEstimates:x,getNetworkClientRegistry:L,getNetworkState:F,getPermittedAccounts:H,getSavedGasFees:D,getSelectedAddress:U,incomingTransactions:W={},isMultichainEnabled:$=!1,isSimulationEnabled:q,messenger:V,onNetworkStateChange:z,pendingTransactions:Y={},provider:X,securityProviderRequest:J,sign:Z,state:ee,transactionHistoryLimit:te=40,hooks:re}){super({name:Se,metadata:ke,messenger:V,state:{methodData:{},transactions:[],lastFetchedBlockNumbers:{},...ee}}),se.__privateAdd.call(void 0,this,d),se.__privateAdd.call(void 0,this,h),se.__privateAdd.call(void 0,this,m),se.__privateAdd.call(void 0,this,v),se.__privateAdd.call(void 0,this,b),se.__privateAdd.call(void 0,this,w),se.__privateAdd.call(void 0,this,k),se.__privateAdd.call(void 0,this,I),se.__privateAdd.call(void 0,this,S),se.__privateAdd.call(void 0,this,A),se.__privateAdd.call(void 0,this,j),se.__privateAdd.call(void 0,this,B),se.__privateAdd.call(void 0,this,O),se.__privateAdd.call(void 0,this,R),se.__privateAdd.call(void 0,this,G),se.__privateAdd.call(void 0,this,i,new(0,be.EventEmitter)),this.inProcessOfSigning=new Set,this.mutex=new(0,ve.Mutex),se.__privateAdd.call(void 0,this,a,void 0),se.__privateAdd.call(void 0,this,s,void 0),this.signAbortCallbacks=new Map,se.__privateAdd.call(void 0,this,o,void 0),se.__privateAdd.call(void 0,this,c,void 0),se.__privateAdd.call(void 0,this,l,void 0),se.__privateAdd.call(void 0,this,g,(()=>{this.pendingTransactionTracker.startIfPendingTransactions(),se.__privateGet.call(void 0,this,l).checkForPendingTransactionAndStartPolling()})),this.messagingSystem=V,this.getNetworkState=F,this.isSendFlowHistoryDisabled=r??!1,this.isHistoryDisabled=t??!1,this.isSwapsDisabled=n??!1,se.__privateSet.call(void 0,this,c,q??(()=>!0)),this.registry=new(0,ye.MethodRegistry)({provider:X}),this.getSavedGasFees=D??(e=>{}),this.getCurrentAccountEIP1559Compatibility=y??(()=>Promise.resolve(!0)),this.getCurrentNetworkEIP1559Compatibility=T,this.getGasFeeEstimates=x||(()=>Promise.resolve({})),this.getPermittedAccounts=H,this.getSelectedAddress=U,this.getExternalPendingTransactions=P??(()=>[]),this.securityProviderRequest=J,se.__privateSet.call(void 0,this,a,W),se.__privateSet.call(void 0,this,s,Y),se.__privateSet.call(void 0,this,o,te),this.sign=Z,this.afterSign=re?.afterSign??(()=>!0),this.beforeApproveOnInit=re?.beforeApproveOnInit??(()=>!0),this.beforeCheckPendingTransaction=re?.beforeCheckPendingTransaction??(()=>!0),this.beforePublish=re?.beforePublish??(()=>!0),this.getAdditionalSignArguments=re?.getAdditionalSignArguments??(()=>[]),this.publish=re?.publish??(()=>Promise.resolve({transactionHash:void 0})),this.nonceTracker=se.__privateMethod.call(void 0,this,d,u).call(this,{provider:X,blockTracker:e}),se.__privateSet.call(void 0,this,l,new(0,Q.MultichainTrackingHelper)({isMultichainEnabled:$,provider:X,nonceTracker:this.nonceTracker,incomingTransactionOptions:W,findNetworkClientIdByChainId:e=>this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",e),getNetworkClientById:e=>this.messagingSystem.call("NetworkController:getNetworkClientById",e),getNetworkClientRegistry:L,removeIncomingTransactionHelperListeners:se.__privateMethod.call(void 0,this,b,_).bind(this),removePendingTransactionTrackerListeners:se.__privateMethod.call(void 0,this,k,E).bind(this),createNonceTracker:se.__privateMethod.call(void 0,this,d,u).bind(this),createIncomingTransactionHelper:se.__privateMethod.call(void 0,this,h,f).bind(this),createPendingTransactionTracker:se.__privateMethod.call(void 0,this,m,p).bind(this),onNetworkStateChange:e=>{this.messagingSystem.subscribe("NetworkController:stateChange",e)}})),se.__privateGet.call(void 0,this,l).initialize();const ne=new(0,ie.EtherscanRemoteTransactionSource)({includeTokenTransfers:W.includeTokenTransfers});this.incomingTransactionHelper=se.__privateMethod.call(void 0,this,h,f).call(this,{blockTracker:e,etherscanRemoteTransactionSource:ne}),this.pendingTransactionTracker=se.__privateMethod.call(void 0,this,m,p).call(this,{provider:X,blockTracker:e}),this.gasFeeFlows=se.__privateMethod.call(void 0,this,A,C).call(this),this.layer1GasFeeFlows=se.__privateMethod.call(void 0,this,j,M).call(this);new(0,K.GasFeePoller)({gasFeeFlows:this.gasFeeFlows.slice(0,-1),getEthQuery:(e,t)=>se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:t,chainId:e}),getGasFeeControllerEstimates:this.getGasFeeEstimates,getTransactions:()=>this.state.transactions,layer1GasFeeFlows:this.layer1GasFeeFlows,onStateChange:e=>{this.messagingSystem.subscribe("TransactionController:stateChange",e)}}).hub.on("transaction-updated",(e=>se.__privateMethod.call(void 0,this,B,N).call(this,e,{skipHistory:!0}))),this.messagingSystem.subscribe("TransactionController:stateChange",se.__privateGet.call(void 0,this,g)),z((()=>{ae.projectLogger.call(void 0,"Detected network change",this.getChainId()),this.pendingTransactionTracker.startIfPendingTransactions(),this.onBootCleanup()})),this.onBootCleanup()}failTransaction(e,t,r){const n=_e.merge.call(void 0,{},e,{error:ne.normalizeTxError.call(void 0,t),status:"failed"});this.messagingSystem.publish(`${Se}:transactionFailed`,{actionId:r,error:t.message,transactionMeta:n}),this.updateTransaction(n,"TransactionController#failTransaction - Add error message and set status to failed"),this.onTransactionStatusChange(n),this.messagingSystem.publish(`${Se}:transactionFinished`,n),se.__privateGet.call(void 0,this,i).emit(`${e.id}:finished`,n)}async registryLookup(e){const t=await this.registry.lookup(e);if(!t)return{registryMethod:"",parsedRegistryMethod:{name:void 0,args:void 0}};return{registryMethod:t,parsedRegistryMethod:this.registry.parse(t)}}destroy(){se.__privateMethod.call(void 0,this,v,y).call(this)}async handleMethodData(e){const t=await this.mutex.acquire();try{const{methodData:t}=this.state;if(Object.keys(t).find((t=>e===t)))return t[e];const r=await this.registryLookup(e);return this.update((t=>{t.methodData[e]=r})),r}finally{t()}}async addTransaction(e,{actionId:t,deviceConfirmedOn:r,method:n,origin:i,requireApproval:a,securityAlertResponse:s,sendFlowHistory:o,swaps:c={},type:d,networkClientId:u}={}){if(ae.projectLogger.call(void 0,"Adding transaction",e),e=ne.normalizeTransactionParams.call(void 0,e),u&&!se.__privateGet.call(void 0,this,l).has(u))throw new Error("The networkClientId for this transaction could not be found");const h=await this.getEIP1559Compatibility(u);D.validateTxParams.call(void 0,e,h),i&&await D.validateTransactionOrigin.call(void 0,await this.getPermittedAccounts(i),this.getSelectedAddress(),e.from,i);const f=this.generateDappSuggestedGasFees(e,i),m=this.getChainId(u),p=se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:u,chainId:m}),g=d??(await V.determineTransactionType.call(void 0,e,p)).type,v=this.getTransactionWithActionId(t);let y=v?_e.cloneDeep.call(void 0,v):{actionId:t,chainId:m,dappSuggestedGasFees:f,deviceConfirmedOn:r,id:Te.v1.call(void 0),origin:i,securityAlertResponse:s,status:"unapproved",time:Date.now(),txParams:e,userEditedGasLimit:!1,verifiedOnBlockchain:!1,type:g,networkClientId:u};if(await this.updateGasProperties(y),!v){if(n&&this.securityProviderRequest){const e=await this.securityProviderRequest(y,n);y.securityProviderResponse=e}this.isSendFlowHistoryDisabled||(y.sendFlowHistory=o??[]),this.isHistoryDisabled||(y=W.addInitialHistorySnapshot.call(void 0,y)),y=re.updateSwapsTransaction.call(void 0,y,g,c,{isSwapsDisabled:this.isSwapsDisabled,cancelTransaction:this.cancelTransaction.bind(this),messenger:this.messagingSystem}),this.addMetadata(y),se.__privateMethod.call(void 0,this,G,H).call(this,y),this.messagingSystem.publish(`${Se}:unapprovedTransactionAdded`,y)}return{result:this.processApproval(y,{isExisting:Boolean(v),requireApproval:a,actionId:t}),transactionMeta:y}}startIncomingTransactionPolling(e=[]){0!==e.length?se.__privateGet.call(void 0,this,l).startIncomingTransactionPolling(e):this.incomingTransactionHelper.start()}stopIncomingTransactionPolling(e=[]){0!==e.length?se.__privateGet.call(void 0,this,l).stopIncomingTransactionPolling(e):this.incomingTransactionHelper.stop()}stopAllIncomingTransactionPolling(){this.incomingTransactionHelper.stop(),se.__privateGet.call(void 0,this,l).stopAllIncomingTransactionPolling()}async updateIncomingTransactions(e=[]){0!==e.length?await se.__privateGet.call(void 0,this,l).updateIncomingTransactions(e):await this.incomingTransactionHelper.update()}async stopTransaction(e,t,{estimatedBaseFee:r,actionId:n}={}){if(this.getTransactionWithActionId(n))return;t&&(t=ne.normalizeGasFeeValues.call(void 0,t),ne.validateGasValues.call(void 0,t)),ae.projectLogger.call(void 0,"Creating cancel transaction",e,t);const a=this.getTransaction(e);if(!a)return;if(!this.sign)throw new Error("No sign method defined.");const s=ne.getIncreasedPriceFromExisting.call(void 0,a.txParams.gasPrice,Ie),o=ne.isGasPriceValue.call(void 0,t)&&t.gasPrice,c=o&&ne.validateMinimumIncrease.call(void 0,o,s)||s,d=a.txParams?.maxFeePerGas,u=ne.getIncreasedPriceFromExisting.call(void 0,d,Ie),h=ne.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxFeePerGas,f=h&&ne.validateMinimumIncrease.call(void 0,h,u)||d&&u,m=a.txParams?.maxPriorityFeePerGas,p=ne.getIncreasedPriceFromExisting.call(void 0,m,Ie),g=ne.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxPriorityFeePerGas,v=g&&ne.validateMinimumIncrease.call(void 0,g,p)||m&&p,y=f&&v?{from:a.txParams.from,gasLimit:a.txParams.gas,maxFeePerGas:f,maxPriorityFeePerGas:v,type:"0x2",nonce:a.txParams.nonce,to:a.txParams.from,value:"0x0"}:{from:a.txParams.from,gasLimit:a.txParams.gas,gasPrice:c,nonce:a.txParams.nonce,to:a.txParams.from,value:"0x0"},b=this.prepareUnsignedEthTx(a.chainId,y),_=await this.sign(b,a.txParams.from),w=le.bufferToHex.call(void 0,_.serialize()),T=y.maxFeePerGas??y.gasPrice,k=y.maxFeePerGas?a.txParams.maxFeePerGas:a.txParams.gasPrice;ae.projectLogger.call(void 0,"Submitting cancel transaction",{oldFee:k,newFee:T,txParams:y});const E=se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:a.networkClientId,chainId:a.chainId}),I=await this.publishTransactionForRetry(E,w,a),P={actionId:n,chainId:a.chainId,networkClientId:a.networkClientId,estimatedBaseFee:r,hash:I,id:Te.v1.call(void 0),originalGasEstimate:a.txParams.gas,status:"submitted",time:Date.now(),type:"cancel",txParams:y};this.addMetadata(P),this.messagingSystem.publish(`${Se}:transactionApproved`,{transactionMeta:P,actionId:n}),this.messagingSystem.publish(`${Se}:transactionSubmitted`,{transactionMeta:P,actionId:n}),this.messagingSystem.publish(`${Se}:transactionFinished`,P),se.__privateGet.call(void 0,this,i).emit(`${a.id}:finished`,P)}async speedUpTransaction(e,t,{actionId:r,estimatedBaseFee:n}={}){if(this.getTransactionWithActionId(r))return;t&&(t=ne.normalizeGasFeeValues.call(void 0,t),ne.validateGasValues.call(void 0,t)),ae.projectLogger.call(void 0,"Creating speed up transaction",e,t);const i=this.state.transactions.find((({id:t})=>t===e));if(!i)return;if(!this.sign)throw new Error("No sign method defined.");const a=ne.getIncreasedPriceFromExisting.call(void 0,i.txParams.gasPrice,Pe),s=ne.isGasPriceValue.call(void 0,t)&&t.gasPrice,o=s&&ne.validateMinimumIncrease.call(void 0,s,a)||a,c=i.txParams?.maxFeePerGas,d=ne.getIncreasedPriceFromExisting.call(void 0,c,Pe),u=ne.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxFeePerGas,h=u&&ne.validateMinimumIncrease.call(void 0,u,d)||c&&d,f=i.txParams?.maxPriorityFeePerGas,m=ne.getIncreasedPriceFromExisting.call(void 0,f,Pe),p=ne.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxPriorityFeePerGas,g=p&&ne.validateMinimumIncrease.call(void 0,p,m)||f&&m,v=h&&g?{...i.txParams,gasLimit:i.txParams.gas,maxFeePerGas:h,maxPriorityFeePerGas:g,type:"0x2"}:{...i.txParams,gasLimit:i.txParams.gas,gasPrice:o},y=this.prepareUnsignedEthTx(i.chainId,v),b=await this.sign(y,i.txParams.from),_=await this.updateTransactionMetaRSV(i,b),w=le.bufferToHex.call(void 0,b.serialize()),T=v.maxFeePerGas??v.gasPrice,k=v.maxFeePerGas?_.txParams.maxFeePerGas:_.txParams.gasPrice;ae.projectLogger.call(void 0,"Submitting speed up transaction",{oldFee:k,newFee:T,txParams:v});const E=se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:i.networkClientId,chainId:i.chainId}),I=await this.publishTransactionForRetry(E,w,i),P={..._,estimatedBaseFee:n,id:Te.v1.call(void 0),time:Date.now(),hash:I,actionId:r,originalGasEstimate:i.txParams.gas,type:"retry",originalType:i.type},S=h&&g?{...P,txParams:{...i.txParams,maxFeePerGas:h,maxPriorityFeePerGas:g}}:{...P,txParams:{...i.txParams,gasPrice:o}};this.addMetadata(S),this.messagingSystem.publish(`${Se}:transactionApproved`,{transactionMeta:S,actionId:r}),this.messagingSystem.publish(`${Se}:transactionSubmitted`,{transactionMeta:S,actionId:r}),this.messagingSystem.publish(`${Se}:speedupTransactionAdded`,S)}async estimateGas(e,t){const r=se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:t}),{estimatedGas:n,simulationFails:i}=await U.estimateGas.call(void 0,e,r);return{gas:n,simulationFails:i}}async estimateGasBuffered(e,t,r){const n=se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:r}),{blockGasLimit:i,estimatedGas:a,simulationFails:s}=await U.estimateGas.call(void 0,e,n);return{gas:U.addGasBuffer.call(void 0,a,i,t),simulationFails:s}}updateTransaction(e,t){se.__privateMethod.call(void 0,this,B,N).call(this,e,{note:t,skipHistory:this.isHistoryDisabled})}updateSecurityAlertResponse(e,t){if(!t)throw new Error("updateSecurityAlertResponse: securityAlertResponse should not be null");const r=this.getTransaction(e);if(!r)throw new Error("Cannot update security alert response as no transaction metadata found");const n={...r,securityAlertResponse:t};this.updateTransaction(n,`${Se}:updatesecurityAlertResponse - securityAlertResponse updated`)}wipeTransactions(e,t){if(e&&!t)return void this.update((e=>{e.transactions=[]}));const r=this.getChainId(),n=this.state.transactions.filter((({chainId:n,txParams:i})=>{if(!(e||n===r))return!0;return!(!t||i.from?.toLowerCase()===t.toLowerCase())}));this.update((e=>{e.transactions=this.trimTransactionsForState(n)}))}async confirmExternalTransaction(e,t,r){const n=this.addExternalTransaction(e);try{const e=n.id,i={...n,status:"confirmed",txReceipt:t};r&&(i.baseFeePerGas=r),this.markNonceDuplicatesDropped(e),this.updateTransaction(i,`${Se}:confirmExternalTransaction - Add external transaction`),this.onTransactionStatusChange(i),this.updatePostBalance(i),this.messagingSystem.publish(`${Se}:transactionConfirmed`,i)}catch(e){console.error("Failed to confirm external transaction",e)}}updateTransactionSendFlowHistory(e,t,r){if(this.isSendFlowHistoryDisabled)throw new Error("Send flow history is disabled for the current transaction controller");const n=this.getTransaction(e);if(!n)throw new Error("Cannot update send flow history as no transaction metadata found");ne.validateIfTransactionUnapproved.call(void 0,n,"updateTransactionSendFlowHistory");const i=n.sendFlowHistory??[];if(t===i.length){const e={...n,sendFlowHistory:[...i,...r]};this.updateTransaction(e,`${Se}:updateTransactionSendFlowHistory - sendFlowHistory updated`)}return this.getTransaction(e)}updateTransactionGasFees(e,{defaultGasEstimates:t,estimateUsed:r,estimateSuggested:n,gas:i,gasLimit:a,gasPrice:s,maxPriorityFeePerGas:o,maxFeePerGas:c,originalGasEstimate:l,userEditedGasLimit:d,userFeeLevel:u}){const h=this.getTransaction(e);if(!h)throw new Error("Cannot update transaction as no transaction metadata found");ne.validateIfTransactionUnapproved.call(void 0,h,"updateTransactionGasFees");let f={txParams:{gas:i,gasLimit:a,gasPrice:s,maxPriorityFeePerGas:o,maxFeePerGas:c},defaultGasEstimates:t,estimateUsed:r,estimateSuggested:n,originalGasEstimate:l,userEditedGasLimit:d,userFeeLevel:u};f.txParams=_e.pickBy.call(void 0,f.txParams),f=_e.pickBy.call(void 0,f);const m=_e.merge.call(void 0,{},h,f);return this.updateTransaction(m,`${Se}:updateTransactionGasFees - gas values updated`),this.getTransaction(e)}updatePreviousGasParams(e,{gasLimit:t,maxFeePerGas:r,maxPriorityFeePerGas:n}){const i=this.getTransaction(e);if(!i)throw new Error("Cannot update transaction as no transaction metadata found");ne.validateIfTransactionUnapproved.call(void 0,i,"updatePreviousGasParams");const a={previousGas:{gasLimit:t,maxFeePerGas:r,maxPriorityFeePerGas:n}};a.previousGas=_e.pickBy.call(void 0,a.previousGas);const s=_e.merge.call(void 0,{},i,a);return this.updateTransaction(s,`${Se}:updatePreviousGasParams - Previous gas values updated`),this.getTransaction(e)}async getNonceLock(e,t){return se.__privateGet.call(void 0,this,l).getNonceLock(e,t)}async updateEditableParams(e,{data:t,gas:r,gasPrice:n,from:i,to:a,value:s}){const o=this.getTransaction(e);if(!o)throw new Error("Cannot update editable params as no transaction metadata found");ne.validateIfTransactionUnapproved.call(void 0,o,"updateEditableParams");const c={txParams:{data:t,from:i,to:a,value:s,gas:r,gasPrice:n}};c.txParams=_e.pickBy.call(void 0,c.txParams);const d=_e.merge.call(void 0,{},o,c),u=se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:o.networkClientId,chainId:o.chainId}),{type:h}=await V.determineTransactionType.call(void 0,d.txParams,u);return d.type=h,await z.updateTransactionLayer1GasFee.call(void 0,{ethQuery:u,layer1GasFeeFlows:this.layer1GasFeeFlows,transactionMeta:d}),this.updateTransaction(d,`Update Editable Params for ${e}`),this.getTransaction(e)}async approveTransactionsWithSameNonce(e=[],{hasNonce:t}={}){if(ae.projectLogger.call(void 0,"Approving transactions with same nonce",{transactions:e}),0===e.length)return"";const r=e[0],n=this.getCommonConfiguration(r.chainId);let i;try{i=this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",r.chainId)}catch(e){ae.projectLogger.call(void 0,"failed to find networkClientId from chainId",e)}const a=ce.TransactionFactory.fromTxData(r,{common:n}),s=le.bufferToHex.call(void 0,a.serialize());if(this.inProcessOfSigning.has(s))return"";let o,c;this.inProcessOfSigning.add(s);try{const n=r.from;c=!0!==t?await this.getNonceLock(n,i):void 0;const a=c?ge.add0x.call(void 0,c.nextNonce.toString(16)):r.nonce;c&&ae.projectLogger.call(void 0,"Using nonce from nonce tracker",a,c.nonceDetails),o=await Promise.all(e.map((e=>(e.nonce=a,this.signExternalTransaction(e.chainId,e)))))}catch(e){throw ae.projectLogger.call(void 0,"Error while signing transactions with same nonce",e),e}finally{c?.releaseLock(),this.inProcessOfSigning.delete(s)}return o}updateCustodialTransaction(e,{errorMessage:t,hash:r,status:n}){const a=this.getTransaction(e);if(!a)throw new Error("Cannot update custodial transaction as no transaction metadata found");if(!a.custodyId)throw new Error("Transaction must be a custodian transaction");if(n&&!["submitted","signed","failed"].includes(n))throw new Error(`Cannot update custodial transaction with status: ${n}`);const s=_e.merge.call(void 0,{},a,_e.pickBy.call(void 0,{hash:r,status:n}));"submitted"===n&&(s.submittedTime=(new Date).getTime()),"failed"===n&&(s.error=ne.normalizeTxError.call(void 0,new Error(t))),this.updateTransaction(s,`${Se}:updateCustodialTransaction - Custodial transaction updated`),["submitted","failed"].includes(n)&&(this.messagingSystem.publish(`${Se}:transactionFinished`,s),se.__privateGet.call(void 0,this,i).emit(`${s.id}:finished`,s))}initApprovals(){const e=this.getChainId(),t=this.state.transactions.filter((t=>"unapproved"===t.status&&t.chainId===e&&!t.isUserOperation));for(const e of t)this.processApproval(e,{shouldShowRequest:!1}).catch((e=>{e?.code!==pe.errorCodes.provider.userRejectedRequest&&console.error("Error during persisted transaction approval",e)}))}getTransactions({searchCriteria:e={},initialList:t,filterToCurrentNetwork:r=!0,limit:n}={}){const i=this.getChainId(),a=_e.mapValues.call(void 0,e,(e=>"function"==typeof e?e:t=>t===e)),s=t??this.state.transactions,o=_e.sortBy.call(void 0,_e.pickBy.call(void 0,s,(e=>{if(r&&e.chainId!==i)return!1;for(const[t,r]of Object.entries(a))if(t in e.txParams){if(!1===r(e.txParams[t]))return!1}else if(!1===r(e[t]))return!1;return!0})),"time");if(void 0!==n){const e=new Set,t=[];for(let r=o.length-1;r>-1;r--){const i=o[r],{nonce:a}=i.txParams;if(!e.has(a)){if(!(e.size<n))continue;e.add(a)}t.unshift(i)}return t}return o}async signExternalTransaction(e,t){if(!this.sign)throw new Error("No sign method defined.");const r=ne.normalizeTransactionParams.call(void 0,t),n=ne.isEIP1559Transaction.call(void 0,r)?"0x2":"0x0",i={...r,type:n,gasLimit:r.gas,chainId:e},{from:a}=i,s=this.getCommonConfiguration(e),o=ce.TransactionFactory.fromTxData(i,{common:s}),c=await this.sign(o,a);return le.bufferToHex.call(void 0,c.serialize())}clearUnapprovedTransactions(){const e=this.state.transactions.filter((({status:e})=>"unapproved"!==e));this.update((t=>{t.transactions=this.trimTransactionsForState(e)}))}abortTransactionSigning(e){if(!this.getTransaction(e))throw new Error("Cannot abort signing as no transaction metadata found");const t=this.signAbortCallbacks.get(e);if(!t)throw new Error("Cannot abort signing as transaction is not waiting for signing");t(),this.signAbortCallbacks.delete(e)}addMetadata(e){this.update((t=>{t.transactions=this.trimTransactionsForState([...t.transactions,e])}))}async updateGasProperties(e){const t=await this.getEIP1559Compatibility(e.networkClientId)&&"0x0"!==e.txParams.type,{networkClientId:r,chainId:n}=e,i=r?this.messagingSystem.call("NetworkController:getNetworkClientById",r).configuration.type===me.NetworkClientType.Custom:this.getNetworkState().providerConfig.type===ue.NetworkType.rpc,a=se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:r,chainId:n});await U.updateGas.call(void 0,{ethQuery:a,chainId:n,isCustomNetwork:i,txMeta:e}),await te.updateGasFees.call(void 0,{eip1559:t,ethQuery:a,gasFeeFlows:this.gasFeeFlows,getGasFeeEstimates:this.getGasFeeEstimates,getSavedGasFees:this.getSavedGasFees.bind(this),txMeta:e}),await z.updateTransactionLayer1GasFee.call(void 0,{ethQuery:a,layer1GasFeeFlows:this.layer1GasFeeFlows,transactionMeta:e})}onBootCleanup(){this.submitApprovedTransactions()}submitApprovedTransactions(){const e=this.state.transactions.filter((e=>"approved"===e.status));for(const t of e)this.beforeApproveOnInit(t)&&this.approveTransaction(t.id).catch((e=>{console.error("Error while submitting persisted transaction",e)}))}async processApproval(e,{isExisting:t=!1,requireApproval:r,shouldShowRequest:n=!0,actionId:i}){const a=e.id;let s;const{meta:o,isCompleted:c}=this.isTransactionCompleted(a),l=c?Promise.resolve(o):this.waitForTransactionFinished(a);if(o&&!t&&!c)try{if(!1!==r){const t=await this.requestApproval(e,{shouldShowRequest:n});s=t.resultCallbacks;const r=t.value,i=r?.txMeta;i&&(ae.projectLogger.call(void 0,"Updating transaction with approval data",{customNonce:i.customNonceValue,params:i.txParams}),this.updateTransaction(i,"TransactionController#processApproval - Updated with approval data"))}const{isCompleted:t}=this.isTransactionCompleted(a);if(!t){"skipped-via-before-publish-hook"===await this.approveTransaction(a)&&s&&s.success();const e=this.getTransaction(a);this.messagingSystem.publish(`${Se}:transactionApproved`,{transactionMeta:e,actionId:i})}}catch(e){const{isCompleted:t}=this.isTransactionCompleted(a);if(!t){if(e?.code===pe.errorCodes.provider.userRejectedRequest)throw this.cancelTransaction(a,i),pe.providerErrors.userRejectedRequest("MetaMask Tx Signature: User denied transaction signature.");this.failTransaction(o,e,i)}}const d=await l;switch(d?.status){case"failed":throw s?.error(d.error),pe.rpcErrors.internal(d.error.message);case"submitted":return s?.success(),d.hash;default:const e=pe.rpcErrors.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(d||a)}`);throw s?.error(e),e}}async approveTransaction(e){const{transactions:t}=this.state,r=await this.mutex.acquire(),n=t.findIndex((({id:t})=>e===t)),a=t[n],s=_e.cloneDeep.call(void 0,a),{txParams:{from:o},networkClientId:c}=a;let d;try{if(!this.sign)return r(),this.failTransaction(a,new Error("No sign method defined.")),"not-approved";if(!a.chainId)return r(),this.failTransaction(a,new Error("No chainId defined.")),"not-approved";if(this.inProcessOfSigning.has(e))return ae.projectLogger.call(void 0,"Skipping approval as signing in progress",e),"not-approved";const[t,n]=await $.getNextNonce.call(void 0,a,(e=>se.__privateGet.call(void 0,this,l).getNonceLock(e,c)));d=n,s.status="approved",s.txParams={...s.txParams,nonce:t,chainId:a.chainId};const u={...s.txParams,gasLimit:s.txParams.gas};this.updateTransaction(s,"TransactionController#approveTransaction - Transaction approved"),this.onTransactionStatusChange(s);const h=ne.isEIP1559Transaction.call(void 0,s.txParams)?{...u,estimatedBaseFee:s.txParams.estimatedBaseFee,type:"0x2"}:u,f=await this.signTransaction(s,h);if(!this.beforePublish(s))return ae.projectLogger.call(void 0,"Skipping publishing transaction based on hook"),this.messagingSystem.publish(`${Se}:transactionPublishingSkipped`,s),"skipped-via-before-publish-hook";if(!f)return"not-approved";const m=se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:a.networkClientId,chainId:a.chainId});if("swap"===a.type){ae.projectLogger.call(void 0,"Determining pre-transaction balance");const e=await ue.query.call(void 0,m,"getBalance",[o]);s.preTxBalance=e,ae.projectLogger.call(void 0,"Updated pre-transaction balance",s.preTxBalance)}ae.projectLogger.call(void 0,"Publishing transaction",h);let{transactionHash:p}=await this.publish(s,f);return void 0===p&&(p=await this.publishTransaction(m,f)),ae.projectLogger.call(void 0,"Publish successful",p),s.hash=p,s.status="submitted",s.submittedTime=(new Date).getTime(),this.updateTransaction(s,"TransactionController#approveTransaction - Transaction submitted"),this.messagingSystem.publish(`${Se}:transactionSubmitted`,{transactionMeta:s}),this.messagingSystem.publish(`${Se}:transactionFinished`,s),se.__privateGet.call(void 0,this,i).emit(`${s.id}:finished`,s),this.onTransactionStatusChange(s),"approved"}catch(e){return this.failTransaction(a,e),"not-approved"}finally{this.inProcessOfSigning.delete(e),d?.(),r()}}async publishTransaction(e,t){return await ue.query.call(void 0,e,"sendRawTransaction",[t])}cancelTransaction(e,t){const r=this.state.transactions.find((({id:t})=>t===e));if(!r)return;this.update((t=>{const r=t.transactions.filter((({id:t})=>t!==e));t.transactions=this.trimTransactionsForState(r)}));const n={...r,status:"rejected"};this.messagingSystem.publish(`${Se}:transactionFinished`,n),se.__privateGet.call(void 0,this,i).emit(`${r.id}:finished`,n),this.messagingSystem.publish(`${Se}:transactionRejected`,{transactionMeta:n,actionId:t}),this.onTransactionStatusChange(n)}trimTransactionsForState(e){const t=new Set,r=[...e].sort(((e,t)=>e.time>t.time?-1:1)).filter((e=>{const{chainId:r,status:n,txParams:i,time:a}=e;if(i){const e=`${String(i.nonce)}-${ue.convertHexToDecimal.call(void 0,r)}-${new Date(a).toDateString()}`;if(t.has(e))return!0;if(t.size<se.__privateGet.call(void 0,this,o)||!this.isFinalState(n))return t.add(e),!0}return!1}));return r.reverse(),r}isFinalState(e){return"rejected"===e||"confirmed"===e||"failed"===e}isLocalFinalState(e){return["confirmed","failed","rejected","submitted"].includes(e)}async requestApproval(e,{shouldShowRequest:t}){const r=this.getApprovalId(e),{origin:n}=e,i=ue.ApprovalType.Transaction,a={txId:e.id};return await this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n||ue.ORIGIN_METAMASK,type:i,requestData:a,expectsResult:!0},t)}getTransaction(e){const{transactions:t}=this.state;return t.find((({id:t})=>t===e))}getApprovalId(e){return String(e.id)}isTransactionCompleted(e){const t=this.getTransaction(e);if(!t)return{meta:void 0,isCompleted:!1};return{meta:t,isCompleted:this.isLocalFinalState(t.status)}}getChainId(e){if(e)return this.messagingSystem.call("NetworkController:getNetworkClientById",e).configuration.chainId;const{providerConfig:t}=this.getNetworkState();return t.chainId}prepareUnsignedEthTx(e,t){return ce.TransactionFactory.fromTxData(t,{freeze:!1,common:this.getCommonConfiguration(e)})}getCommonConfiguration(e){const t={chainId:parseInt(e,16),defaultHardfork:Ee};return oe.Common.custom(t)}onIncomingTransactions({added:e,updated:t}){this.update((r=>{const{transactions:n}=r,i=[...e,...n.map((e=>t.find((({hash:t})=>t===e.hash))??e))];r.transactions=this.trimTransactionsForState(i)}))}onUpdatedLastFetchedBlockNumbers({lastFetchedBlockNumbers:e,blockNumber:t}){this.update((t=>{t.lastFetchedBlockNumbers=e})),this.messagingSystem.publish(`${Se}:incomingTransactionBlockReceived`,t)}generateDappSuggestedGasFees(e,t){if(!t||t===ue.ORIGIN_METAMASK)return;const{gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:i,gas:a}=e;if(void 0===r&&void 0===n&&void 0===i&&void 0===a)return;const s={};return void 0!==r?s.gasPrice=r:void 0===n&&void 0===i||(s.maxFeePerGas=n,s.maxPriorityFeePerGas=i),void 0!==a&&(s.gas=a),s}addExternalTransaction(e){const{chainId:t}=e,{transactions:r}=this.state,n=e?.txParams?.from,i=r.filter((e=>e.txParams.from===n&&e.chainId===t)),a=i.filter((e=>"confirmed"===e.status)),s=i.filter((e=>"submitted"===e.status));J.validateConfirmedExternalTransaction.call(void 0,e,a,s);const o=0!==(e.history??[]).length||this.isHistoryDisabled?e:W.addInitialHistorySnapshot.call(void 0,e);return this.update((e=>{e.transactions=this.trimTransactionsForState([...e.transactions,o])})),o}markNonceDuplicatesDropped(e){const t=this.getTransaction(e);if(!t)return;const r=t.txParams?.nonce,n=t.txParams?.from,{chainId:i}=t,a=this.state.transactions.filter((t=>t.id!==e&&t.txParams.from===n&&t.txParams.nonce===r&&t.chainId===i&&"incoming"!==t.type)),s=a.map((e=>e.id));if(0!==a.length){this.update((e=>{for(const r of e.transactions)s.includes(r.id)&&(r.replacedBy=t?.hash,r.replacedById=t?.id)}));for(const e of this.state.transactions)s.includes(e.id)&&"failed"!==e.status&&this.setTransactionStatusDropped(e)}}setTransactionStatusDropped(e){const t={...e,status:"dropped"};this.messagingSystem.publish(`${Se}:transactionDropped`,{transactionMeta:t}),this.updateTransaction(t,"TransactionController#setTransactionStatusDropped - Transaction dropped"),this.onTransactionStatusChange(t)}getTransactionWithActionId(e){return this.state.transactions.find((t=>e&&t.actionId===e))}async waitForTransactionFinished(e){return new Promise((t=>{se.__privateGet.call(void 0,this,i).once(`${e}:finished`,(e=>{t(e)}))}))}async updateTransactionMetaRSV(e,t){const r=_e.cloneDeep.call(void 0,e);for(const e of["r","s","v"]){const n=t[e];null!=n&&(r[e]=ge.add0x.call(void 0,n.toString(16)))}return r}async getEIP1559Compatibility(e){const t=await this.getCurrentNetworkEIP1559Compatibility(e),r=await this.getCurrentAccountEIP1559Compatibility();return t&&r}async signTransaction(e,t){ae.projectLogger.call(void 0,"Signing transaction",t);const r=this.prepareUnsignedEthTx(e.chainId,t);this.inProcessOfSigning.add(e.id);const n=await new Promise(((n,i)=>{this.sign?.(r,t.from,...this.getAdditionalSignArguments(e)).then(n,i),this.signAbortCallbacks.set(e.id,(()=>i(new Error("Signing aborted by user"))))}));if(this.signAbortCallbacks.delete(e.id),!n)return void ae.projectLogger.call(void 0,"Skipping signed status as no signed transaction");if(!this.afterSign(e,n))return this.updateTransaction(e,"TransactionController#signTransaction - Update after sign"),void ae.projectLogger.call(void 0,"Skipping signed status based on hook");const i={...await this.updateTransactionMetaRSV(e,n),status:"signed"};this.updateTransaction(i,"TransactionController#approveTransaction - Transaction signed"),this.onTransactionStatusChange(i);const a=le.bufferToHex.call(void 0,n.serialize()),s=_e.merge.call(void 0,{},i,{rawTx:a});return this.updateTransaction(s,"TransactionController#approveTransaction - RawTransaction added"),a}onTransactionStatusChange(e){this.messagingSystem.publish(`${Se}:transactionStatusUpdated`,{transactionMeta:e})}getNonceTrackerTransactions(e,t,r=this.getChainId()){return $.getAndFormatTransactionsForNonceTracker.call(void 0,r,t,e,this.state.transactions)}onConfirmedTransaction(e){ae.projectLogger.call(void 0,"Processing confirmed transaction",e.id),this.markNonceDuplicatesDropped(e.id),this.messagingSystem.publish(`${Se}:transactionConfirmed`,e),this.onTransactionStatusChange(e),this.updatePostBalance(e)}async updatePostBalance(e){try{if("swap"!==e.type)return;const t=se.__privateGet.call(void 0,this,l).getEthQuery({networkClientId:e.networkClientId,chainId:e.chainId}),{updatedTransactionMeta:r,approvalTransactionMeta:n}=await re.updatePostTransactionBalance.call(void 0,e,{ethQuery:t,getTransaction:this.getTransaction.bind(this),updateTransaction:this.updateTransaction.bind(this)});this.messagingSystem.publish(`${Se}:postTransactionBalanceUpdated`,{transactionMeta:r,approvalTransactionMeta:n})}catch(e){ae.projectLogger.call(void 0,"Error while updating post transaction balance",e)}}async publishTransactionForRetry(e,t,r){try{return await this.publishTransaction(e,t)}catch(e){if(this.isTransactionAlreadyConfirmedError(e))throw await this.pendingTransactionTracker.forceCheckTransaction(r),new Error("Previous transaction is already confirmed");throw e}}isTransactionAlreadyConfirmedError(e){return e?.message?.includes("nonce too low")||e?.data?.message?.includes("nonce too low")}};i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakSet,u=function({provider:e,blockTracker:t,chainId:r}){return new(0,we.NonceTracker)({provider:e,blockTracker:t,getPendingTransactions:se.__privateMethod.call(void 0,this,S,x).bind(this,r),getConfirmedTransactions:this.getNonceTrackerTransactions.bind(this,"confirmed")})},h=new WeakSet,f=function({blockTracker:e,etherscanRemoteTransactionSource:t,chainId:r}){const n=new(0,Y.IncomingTransactionHelper)({blockTracker:e,getCurrentAccount:this.getSelectedAddress,getLastFetchedBlockNumbers:()=>this.state.lastFetchedBlockNumbers,getChainId:r?()=>r:this.getChainId.bind(this),isEnabled:se.__privateGet.call(void 0,this,a).isEnabled,queryEntireHistory:se.__privateGet.call(void 0,this,a).queryEntireHistory,remoteTransactionSource:t,transactionLimit:se.__privateGet.call(void 0,this,o),updateTransactions:se.__privateGet.call(void 0,this,a).updateTransactions});return se.__privateMethod.call(void 0,this,w,T).call(this,n),n},m=new WeakSet,p=function({provider:e,blockTracker:t,chainId:r}){const n=new(0,fe.default)(e),i=r?()=>r:this.getChainId.bind(this),a=new(0,X.PendingTransactionTracker)({approveTransaction:async e=>{await this.approveTransaction(e)},blockTracker:t,getChainId:i,getEthQuery:()=>n,getTransactions:()=>this.state.transactions,isResubmitEnabled:se.__privateGet.call(void 0,this,s).isResubmitEnabled,getGlobalLock:()=>se.__privateGet.call(void 0,this,l).acquireNonceLockForChainIdKey({chainId:i()}),publishTransaction:this.publishTransaction.bind(this),hooks:{beforeCheckPendingTransaction:this.beforeCheckPendingTransaction.bind(this),beforePublish:this.beforePublish.bind(this)}});return se.__privateMethod.call(void 0,this,I,P).call(this,a),a},g=new WeakMap,v=new WeakSet,y=function(){this.pendingTransactionTracker.stop(),se.__privateMethod.call(void 0,this,k,E).call(this,this.pendingTransactionTracker),this.incomingTransactionHelper.stop(),se.__privateMethod.call(void 0,this,b,_).call(this,this.incomingTransactionHelper),se.__privateGet.call(void 0,this,l).stopAllTracking()},b=new WeakSet,_=function(e){e.hub.removeAllListeners("transactions"),e.hub.removeAllListeners("updatedLastFetchedBlockNumbers")},w=new WeakSet,T=function(e){e.hub.on("transactions",this.onIncomingTransactions.bind(this)),e.hub.on("updatedLastFetchedBlockNumbers",this.onUpdatedLastFetchedBlockNumbers.bind(this))},k=new WeakSet,E=function(e){e.hub.removeAllListeners("transaction-confirmed"),e.hub.removeAllListeners("transaction-dropped"),e.hub.removeAllListeners("transaction-failed"),e.hub.removeAllListeners("transaction-updated")},I=new WeakSet,P=function(e){e.hub.on("transaction-confirmed",this.onConfirmedTransaction.bind(this)),e.hub.on("transaction-dropped",this.setTransactionStatusDropped.bind(this)),e.hub.on("transaction-failed",this.failTransaction.bind(this)),e.hub.on("transaction-updated",this.updateTransaction.bind(this))},S=new WeakSet,x=function(e,t){return[...this.getNonceTrackerTransactions("submitted",t,e),...this.getExternalPendingTransactions(t,e)]},A=new WeakSet,C=function(){return[new(0,Z.LineaGasFeeFlow),new(0,ee.DefaultGasFeeFlow)]},j=new WeakSet,M=function(){return[]},B=new WeakSet,N=function(e,{note:t,skipHistory:r}){const n={...e,txParams:ne.normalizeTransactionParams.call(void 0,e.txParams)};D.validateTxParams.call(void 0,n.txParams);const i=se.__privateMethod.call(void 0,this,O,L).call(this,n),a=!0===r?n:W.updateTransactionHistory.call(void 0,n,t??"Transaction updated");this.update((t=>{const r=t.transactions.findIndex((({id:t})=>e.id===t));t.transactions[r]=a})),i.length>0&&se.__privateMethod.call(void 0,this,R,F).call(this,n,i)},O=new WeakSet,L=function(e){const{id:t,txParams:r}=e,n=this.getTransaction(t)?.txParams;if(!n||_e.isEqual.call(void 0,n,r))return[];const i=Object.keys(r).filter((e=>r[e]!==n[e]));return ae.projectLogger.call(void 0,"Transaction parameters have been updated",t,i,n,r),i},R=new WeakSet,F=function(e,t){["to","value","data"].some((e=>t.includes(e)))&&(ae.projectLogger.call(void 0,"Updating simulation data due to transaction parameter update"),se.__privateMethod.call(void 0,this,G,H).call(this,e))},G=new WeakSet,H=async function(e){const{id:t,chainId:r,txParams:n}=e,{from:i,to:a,value:s,data:o}=n;let l={error:{message:"Simulation disabled",isReverted:!1},tokenBalanceChanges:[]};se.__privateGet.call(void 0,this,c).call(this)&&(se.__privateMethod.call(void 0,this,B,N).call(this,{...e,simulationData:void 0},{skipHistory:!0}),l=await q.getSimulationData.call(void 0,{chainId:r,from:i,to:a,value:s,data:o}));const d=this.getTransaction(t);d?(this.updateTransaction({...d,simulationData:l},"TransactionController#updateSimulationData - Update simulation data"),ae.projectLogger.call(void 0,"Updated simulation data",t,l)):ae.projectLogger.call(void 0,"Cannot update simulation data as transaction not found",t,l)},r.HARDFORK=Ee,r.CANCEL_RATE=Ie,r.SPEED_UP_RATE=Pe,r.ApprovalState=xe,r.TransactionController=Ae}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-7QOACSQU.js"}],[168,{lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:76,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=76;const r=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:r,ignoredCollectibles:n,...i}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...r?{allNfts:r}:{},...n?{ignoredNfts:n}:{},...i},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[1680,{"./chunk-GQYELPS3.js":1687,"./chunk-R7NJVDWN.js":1692,"./chunk-S6VGOPUY.js":1694,"./chunk-Z4BLTVTB.js":1700,"@metamask/utils":1982,events:2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f,m,p,g,v,y,b,_,w,T,k,E,I=e("./chunk-R7NJVDWN.js"),P=e("./chunk-GQYELPS3.js"),S=e("./chunk-S6VGOPUY.js"),x=e("./chunk-Z4BLTVTB.js"),A=e("@metamask/utils"),C=e("events"),j=(n=C)&&n.__esModule?n:{default:n},M=A.createModuleLogger.call(void 0,S.projectLogger,"gas-fee-poller");i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap,u=new WeakSet,h=function(){x.__privateGet.call(void 0,this,d)||(x.__privateMethod.call(void 0,this,p,g).call(this),x.__privateSet.call(void 0,this,d,!0),M("Started polling"))},f=new WeakSet,m=function(){x.__privateGet.call(void 0,this,d)&&(clearTimeout(x.__privateGet.call(void 0,this,l)),x.__privateSet.call(void 0,this,l,void 0),x.__privateSet.call(void 0,this,d,!1),M("Stopped polling"))},p=new WeakSet,g=async function(){await x.__privateMethod.call(void 0,this,v,y).call(this),x.__privateSet.call(void 0,this,l,setTimeout((()=>x.__privateMethod.call(void 0,this,p,g).call(this)),1e4))},v=new WeakSet,y=async function(){const e=x.__privateMethod.call(void 0,this,k,E).call(this);M("Found unapproved transactions",{count:e.length}),await Promise.all(e.flatMap((e=>[x.__privateMethod.call(void 0,this,b,_).call(this,e),x.__privateMethod.call(void 0,this,w,T).call(this,e)])))},b=new WeakSet,_=async function(e){const{chainId:t,networkClientId:r}=e,n=x.__privateGet.call(void 0,this,a).call(this,t,r),o=P.getGasFeeFlow.call(void 0,e,x.__privateGet.call(void 0,this,i));o?M("Found gas fee flow",o.constructor.name,e.id):M("No gas fee flow found",e.id);const c={ethQuery:n,getGasFeeControllerEstimates:x.__privateGet.call(void 0,this,s),transactionMeta:e};let l;if(o)try{l=(await o.getGasFees(c)).estimates}catch(t){M("Failed to get suggested gas fees",e.id,t)}if(!l&&e.gasFeeEstimatesLoaded)return;const d={...e,gasFeeEstimates:l,gasFeeEstimatesLoaded:!0};this.hub.emit("transaction-updated",d),M("Updated suggested gas fees",{gasFeeEstimates:d.gasFeeEstimates,transaction:d.id})},w=new WeakSet,T=async function(e){const{chainId:t,networkClientId:r}=e,n=x.__privateGet.call(void 0,this,a).call(this,t,r);await I.updateTransactionLayer1GasFee.call(void 0,{ethQuery:n,layer1GasFeeFlows:x.__privateGet.call(void 0,this,c),transactionMeta:e}),void 0!==e.layer1GasFee&&this.hub.emit("transaction-updated",e)},k=new WeakSet,E=function(){return x.__privateGet.call(void 0,this,o).call(this).filter((e=>"unapproved"===e.status))},r.GasFeePoller=class{constructor({gasFeeFlows:e,getEthQuery:t,getGasFeeControllerEstimates:r,getTransactions:n,layer1GasFeeFlows:g,onStateChange:y}){x.__privateAdd.call(void 0,this,u),x.__privateAdd.call(void 0,this,f),x.__privateAdd.call(void 0,this,p),x.__privateAdd.call(void 0,this,v),x.__privateAdd.call(void 0,this,b),x.__privateAdd.call(void 0,this,w),x.__privateAdd.call(void 0,this,k),this.hub=new(0,j.default),x.__privateAdd.call(void 0,this,i,void 0),x.__privateAdd.call(void 0,this,a,void 0),x.__privateAdd.call(void 0,this,s,void 0),x.__privateAdd.call(void 0,this,o,void 0),x.__privateAdd.call(void 0,this,c,void 0),x.__privateAdd.call(void 0,this,l,void 0),x.__privateAdd.call(void 0,this,d,!1),x.__privateSet.call(void 0,this,i,e),x.__privateSet.call(void 0,this,c,g),x.__privateSet.call(void 0,this,a,t),x.__privateSet.call(void 0,this,s,r),x.__privateSet.call(void 0,this,o,n),y((()=>{x.__privateMethod.call(void 0,this,k,E).call(this).length?x.__privateMethod.call(void 0,this,u,h).call(this):x.__privateMethod.call(void 0,this,f,m).call(this)}))}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-7YLATOE4.js"}],[1681,{"./chunk-MXQLW52B.js":1689,"./chunk-S6VGOPUY.js":1694,"./chunk-US7NQPYE.js":1698,"./chunk-Z4BLTVTB.js":1700,"@metamask/controller-utils":1738,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f=e("./chunk-US7NQPYE.js"),m=e("./chunk-S6VGOPUY.js"),p=e("./chunk-MXQLW52B.js"),g=e("./chunk-Z4BLTVTB.js"),v=e("@metamask/controller-utils"),y=e("@metamask/utils").createModuleLogger.call(void 0,m.projectLogger,"linea-gas-fee-flow"),b=[v.ChainId["linea-mainnet"],v.ChainId["linea-goerli"],v.ChainId["linea-sepolia"]],_={low:1,medium:1.35,high:1.7},w={low:1,medium:1.05,high:1.1};n=new WeakSet,i=async function(e){const{ethQuery:t,transactionMeta:r}=e,n=await g.__privateMethod.call(void 0,this,a,s).call(this,r,t);y("Received Linea response",n);const i=g.__privateMethod.call(void 0,this,o,c).call(this,n.baseFeePerGas,_);y("Generated base fees",g.__privateMethod.call(void 0,this,u,h).call(this,i));const f=g.__privateMethod.call(void 0,this,o,c).call(this,n.priorityFeePerGas,w);y("Generated priority fees",g.__privateMethod.call(void 0,this,u,h).call(this,f));const m=g.__privateMethod.call(void 0,this,l,d).call(this,i,f);y("Generated max fees",g.__privateMethod.call(void 0,this,u,h).call(this,m));return{estimates:Object.values(p.GasFeeEstimateLevel).reduce(((e,t)=>({...e,[t]:{maxFeePerGas:v.toHex.call(void 0,m[t]),maxPriorityFeePerGas:v.toHex.call(void 0,f[t])}})),{})}},a=new WeakSet,s=function(e,t){return v.query.call(void 0,t,"linea_estimateGas",[{from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,input:e.txParams.data,gasPrice:"0x100000000"}])},o=new WeakSet,c=function(e,t){const r=v.hexToBN.call(void 0,e);return{low:r.muln(t.low),medium:r.muln(t.medium),high:r.muln(t.high)}},l=new WeakSet,d=function(e,t){return{low:e.low.add(t.low),medium:e.medium.add(t.medium),high:e.high.add(t.high)}},u=new WeakSet,h=function(e){return Object.values(p.GasFeeEstimateLevel).map((t=>e[t].toString(10)))},r.LineaGasFeeFlow=class{constructor(){g.__privateAdd.call(void 0,this,n),g.__privateAdd.call(void 0,this,a),g.__privateAdd.call(void 0,this,o),g.__privateAdd.call(void 0,this,l),g.__privateAdd.call(void 0,this,u)}matchesTransaction(e){return b.includes(e.chainId)}async getGasFees(e){try{return await g.__privateMethod.call(void 0,this,n,i).call(this,e)}catch(t){return y("Using default flow as fallback due to error",t),(new(0,f.DefaultGasFeeFlow)).getGasFees(e)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-CWJBSWH3.js"}],[1682,{"./chunk-ITDY6AIZ.js":1688,"./chunk-S6VGOPUY.js":1694,"@metamask/controller-utils":1738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-ITDY6AIZ.js"),i=e("./chunk-S6VGOPUY.js"),a=e("@metamask/controller-utils");async function s(e,{address:t,chainId:r,fromBlock:n,limit:s}){const c=function(e,t){const r=o(e);let n=`${r}/api?`;for(const e of Object.keys(t)){const r=t[e];r&&(n+=`${e}=${r}&`)}return n+="tag=latest&page=1",n}(r,{...{module:"account",address:t,startBlock:n?.toString(),offset:s?.toString(),sort:"desc"},action:e});i.incomingTransactionsLogger.call(void 0,"Sending Etherscan request",c);return await a.handleFetch.call(void 0,c)}function o(e){const t=n.ETHERSCAN_SUPPORTED_NETWORKS[e];if(!t)throw new Error(`Etherscan does not support chain with ID: ${e}`);return`https://${t.subdomain}.${t.domain}`}r.fetchEtherscanTransactions=async function({address:e,chainId:t,fromBlock:r,limit:n}){return await s("txlist",{address:e,chainId:t,fromBlock:r,limit:n})},r.fetchEtherscanTokenTransactions=async function({address:e,chainId:t,fromBlock:r,limit:n}){return await s("tokentx",{address:e,chainId:t,fromBlock:r,limit:n})},r.getEtherscanApiHost=o}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-CXXGL43K.js"}],[1683,{"./chunk-S6VGOPUY.js":1694,"./chunk-Z4BLTVTB.js":1700,"async-mutex":2525,events:2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f,m,p,g,v,y,b,_,w,T,k,E,I,P,S,x,A,C,j,M,B,N,O=e("./chunk-S6VGOPUY.js"),L=e("./chunk-Z4BLTVTB.js"),R=e("async-mutex"),F=e("events"),G=(n=F)&&n.__esModule?n:{default:n},H=[e=>e.status,e=>e.txParams.gasUsed];i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakMap,g=new WeakMap,v=new WeakSet,y=function(e){e.sort(((e,t)=>e.time<t.time?-1:1))},b=new WeakSet,_=function(e,t){return e.filter((e=>!t.some((({hash:t})=>t===e.hash))))},w=new WeakSet,T=function(e,t){return e.filter((e=>t.some((t=>e.hash===t.hash&&L.__privateMethod.call(void 0,this,k,E).call(this,e,t)))))},k=new WeakSet,E=function(e,t){return H.some((r=>r(e)!==r(t)))},I=new WeakSet,P=function(){const e=L.__privateGet.call(void 0,this,m).getLastBlockVariations?.()??[],t=L.__privateMethod.call(void 0,this,j,M).call(this,e);return L.__privateGet.call(void 0,this,s).call(this)[t]},S=new WeakSet,x=function(e){const t=L.__privateMethod.call(void 0,this,I,P).call(this);return t?t+1:L.__privateGet.call(void 0,this,f)?void 0:e-10},A=new WeakSet,C=function(e,t){let r=-1;for(const t of e){const e=t.blockNumber?parseInt(t.blockNumber,10):-1;r=Math.max(r,e)}if(-1===r)return;const n=L.__privateMethod.call(void 0,this,j,M).call(this,t),i=L.__privateGet.call(void 0,this,s).call(this);i[n]>=r||this.hub.emit("updatedLastFetchedBlockNumbers",{lastFetchedBlockNumbers:{...i,[n]:r},blockNumber:r})},j=new WeakSet,M=function(e){const t=L.__privateGet.call(void 0,this,c).call(this),r=L.__privateGet.call(void 0,this,a).call(this)?.toLowerCase();return[t,r,...e].join("#")},B=new WeakSet,N=function(){const e=L.__privateGet.call(void 0,this,l).call(this),t=L.__privateGet.call(void 0,this,c).call(this),r=L.__privateGet.call(void 0,this,m).isSupportedNetwork(t);return e&&r},r.IncomingTransactionHelper=class{constructor({blockTracker:e,getCurrentAccount:t,getLastFetchedBlockNumbers:r,getLocalTransactions:n,getChainId:y,isEnabled:_,queryEntireHistory:T,remoteTransactionSource:E,transactionLimit:P,updateTransactions:x}){L.__privateAdd.call(void 0,this,v),L.__privateAdd.call(void 0,this,b),L.__privateAdd.call(void 0,this,w),L.__privateAdd.call(void 0,this,k),L.__privateAdd.call(void 0,this,I),L.__privateAdd.call(void 0,this,S),L.__privateAdd.call(void 0,this,A),L.__privateAdd.call(void 0,this,j),L.__privateAdd.call(void 0,this,B),L.__privateAdd.call(void 0,this,i,void 0),L.__privateAdd.call(void 0,this,a,void 0),L.__privateAdd.call(void 0,this,s,void 0),L.__privateAdd.call(void 0,this,o,void 0),L.__privateAdd.call(void 0,this,c,void 0),L.__privateAdd.call(void 0,this,l,void 0),L.__privateAdd.call(void 0,this,d,void 0),L.__privateAdd.call(void 0,this,u,new(0,R.Mutex)),L.__privateAdd.call(void 0,this,h,void 0),L.__privateAdd.call(void 0,this,f,void 0),L.__privateAdd.call(void 0,this,m,void 0),L.__privateAdd.call(void 0,this,p,void 0),L.__privateAdd.call(void 0,this,g,void 0),this.hub=new(0,G.default),L.__privateSet.call(void 0,this,i,e),L.__privateSet.call(void 0,this,a,t),L.__privateSet.call(void 0,this,s,r),L.__privateSet.call(void 0,this,o,n||(()=>[])),L.__privateSet.call(void 0,this,c,y),L.__privateSet.call(void 0,this,l,_??(()=>!0)),L.__privateSet.call(void 0,this,d,!1),L.__privateSet.call(void 0,this,f,T??!0),L.__privateSet.call(void 0,this,m,E),L.__privateSet.call(void 0,this,p,P),L.__privateSet.call(void 0,this,g,x??!1),L.__privateSet.call(void 0,this,h,(async e=>{try{await this.update(e)}catch(e){console.error("Error while checking incoming transactions",e)}}))}start(){L.__privateGet.call(void 0,this,d)||L.__privateMethod.call(void 0,this,B,N).call(this)&&(L.__privateGet.call(void 0,this,i).addListener("latest",L.__privateGet.call(void 0,this,h)),L.__privateSet.call(void 0,this,d,!0))}stop(){L.__privateGet.call(void 0,this,i).removeListener("latest",L.__privateGet.call(void 0,this,h)),L.__privateSet.call(void 0,this,d,!1)}async update(e){const t=await L.__privateGet.call(void 0,this,u).acquire();O.incomingTransactionsLogger.call(void 0,"Checking for incoming transactions");try{if(!L.__privateMethod.call(void 0,this,B,N).call(this))return;const t=parseInt(e||await L.__privateGet.call(void 0,this,i).getLatestBlock(),16),r=L.__privateGet.call(void 0,this,m).getLastBlockVariations?.()??[],n=L.__privateMethod.call(void 0,this,S,x).call(this,t),s=L.__privateGet.call(void 0,this,a).call(this),l=L.__privateGet.call(void 0,this,c).call(this);let d=[];try{d=await L.__privateGet.call(void 0,this,m).fetchTransactions({address:s,currentChainId:l,fromBlock:n,limit:L.__privateGet.call(void 0,this,p)})}catch(e){return void O.incomingTransactionsLogger.call(void 0,"Error while fetching remote transactions",e)}L.__privateGet.call(void 0,this,g)||(d=d.filter((e=>e.txParams.to?.toLowerCase()===s.toLowerCase())));const u=L.__privateGet.call(void 0,this,g)?L.__privateGet.call(void 0,this,o).call(this):[],h=L.__privateMethod.call(void 0,this,b,_).call(this,d,u),f=L.__privateMethod.call(void 0,this,w,T).call(this,d,u);(h.length>0||f.length>0)&&(L.__privateMethod.call(void 0,this,v,y).call(this,h),L.__privateMethod.call(void 0,this,v,y).call(this,f),O.incomingTransactionsLogger.call(void 0,"Found incoming transactions",{new:h,updated:f}),this.hub.emit("transactions",{added:h,updated:f})),L.__privateMethod.call(void 0,this,A,C).call(this,d,r)}finally{t()}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-DTDTOMTB.js"}],[1684,{"./chunk-CXXGL43K.js":1682,"./chunk-ITDY6AIZ.js":1688,"./chunk-S6VGOPUY.js":1694,"./chunk-Z4BLTVTB.js":1700,"@metamask/controller-utils":1738,"async-mutex":2525,"bn.js":2586,uuid:4067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f,m,p,g,v,y,b=e("./chunk-CXXGL43K.js"),_=e("./chunk-ITDY6AIZ.js"),w=e("./chunk-S6VGOPUY.js"),T=e("./chunk-Z4BLTVTB.js"),k=e("@metamask/controller-utils"),E=e("async-mutex"),I=e("bn.js"),P=(n=I)&&n.__esModule?n:{default:n},S=e("uuid");i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakSet,c=function(e,t){const r=Date.now()-e,n=Math.max(0,5e3-r);n>0?setTimeout(t,n):t()},l=new WeakMap,d=new WeakMap,u=new WeakSet,h=function(e){let t=e.result;return"0"===e.status&&(t=[],e.result.length&&w.incomingTransactionsLogger.call(void 0,"Ignored Etherscan request error",{message:e.result,type:T.__privateGet.call(void 0,this,a)?"token":"normal"})),t},f=new WeakSet,m=function(e,t){const r=T.__privateMethod.call(void 0,this,v,y).call(this,e,t);return{...r,txParams:{...r.txParams,data:e.input},..."0"===e.isError?{status:"confirmed"}:{error:new Error("Transaction failed"),status:"failed"}}},p=new WeakSet,g=function(e,t){return{...T.__privateMethod.call(void 0,this,v,y).call(this,e,t),isTransfer:!0,transferInformation:{contractAddress:e.contractAddress,decimals:Number(e.tokenDecimal),symbol:e.tokenSymbol}}},v=new WeakSet,y=function(e,t){const r=1e3*parseInt(e.timeStamp,10);return{blockNumber:e.blockNumber,chainId:t,hash:e.hash,id:S.v1.call(void 0,{msecs:r}),status:"confirmed",time:r,txParams:{chainId:t,from:e.from,gas:k.BNToHex.call(void 0,new(0,P.default)(e.gas)),gasPrice:k.BNToHex.call(void 0,new(0,P.default)(e.gasPrice)),gasUsed:k.BNToHex.call(void 0,new(0,P.default)(e.gasUsed)),nonce:k.BNToHex.call(void 0,new(0,P.default)(e.nonce)),to:e.to,value:k.BNToHex.call(void 0,new(0,P.default)(e.value))},type:"incoming",verifiedOnBlockchain:!1}},r.EtherscanRemoteTransactionSource=class{constructor({includeTokenTransfers:e}={}){T.__privateAdd.call(void 0,this,o),T.__privateAdd.call(void 0,this,u),T.__privateAdd.call(void 0,this,f),T.__privateAdd.call(void 0,this,p),T.__privateAdd.call(void 0,this,v),T.__privateAdd.call(void 0,this,i,void 0),T.__privateAdd.call(void 0,this,a,void 0),T.__privateAdd.call(void 0,this,s,new(0,E.Mutex)),T.__privateAdd.call(void 0,this,l,(async(e,t)=>{const{currentChainId:r}=e,n=await b.fetchEtherscanTransactions.call(void 0,t);return T.__privateMethod.call(void 0,this,u,h).call(this,n).map((e=>T.__privateMethod.call(void 0,this,f,m).call(this,e,r)))})),T.__privateAdd.call(void 0,this,d,(async(e,t)=>{const{currentChainId:r}=e,n=await b.fetchEtherscanTokenTransactions.call(void 0,t);return T.__privateMethod.call(void 0,this,u,h).call(this,n).map((e=>T.__privateMethod.call(void 0,this,p,g).call(this,e,r)))})),T.__privateSet.call(void 0,this,i,e??!0),T.__privateSet.call(void 0,this,a,!1)}isSupportedNetwork(e){return Object.keys(_.ETHERSCAN_SUPPORTED_NETWORKS).includes(e)}getLastBlockVariations(){return[T.__privateGet.call(void 0,this,a)?"token":"normal"]}async fetchTransactions(e){const t=await T.__privateGet.call(void 0,this,s).acquire(),r=Date.now(),n={...e,chainId:e.currentChainId};try{const t=T.__privateGet.call(void 0,this,a)?await T.__privateGet.call(void 0,this,d).call(this,e,n):await T.__privateGet.call(void 0,this,l).call(this,e,n);return T.__privateGet.call(void 0,this,i)&&T.__privateSet.call(void 0,this,a,!T.__privateGet.call(void 0,this,a)),t}finally{T.__privateMethod.call(void 0,this,o,c).call(this,r,t)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-F3CMU2DM.js"}],[1685,{"./chunk-GE57YNGX.js":1686,"./chunk-S6VGOPUY.js":1694,"@ethersproject/abi":422,"@metamask/controller-utils":1738,"@metamask/metamask-eth-abis":1367,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-GE57YNGX.js"),i=e("./chunk-S6VGOPUY.js"),a=e("@ethersproject/abi"),s=e("@metamask/controller-utils"),o=e("@metamask/metamask-eth-abis"),c=e("@metamask/utils").createModuleLogger.call(void 0,i.projectLogger,"simulation");function l(e){return Array.isArray(e)?e.map(l):(e.toHexString?.()??e).toLowerCase()}function d(e){return[...e.logs??[],...(e.calls??[]).map((e=>d(e))).flat()]}function u(e,t){const r=s.hexToBN.call(void 0,t).sub(s.hexToBN.call(void 0,e)),n=r.isNeg(),i=s.toHex.call(void 0,r.abs());if(!r.isZero())return{previousBalance:e,newBalance:t,difference:i,isDecrease:n};c("Balance change is zero")}function h(e){return s.toHex.call(void 0,s.hexToBN.call(void 0,e))}r.getSimulationData=async function(e){const{chainId:t,from:r,to:i,value:s,data:f}=e;c("Getting simulation data",e);try{const m=await n.simulateTransactions.call(void 0,t,{transactions:[{data:f,from:r,maxFeePerGas:"0x0",maxPriorityFeePerGas:"0x0",to:i,value:s}],withCallTrace:!0,withLogs:!0}),p=m.transactions?.[0]?.error;if(p)throw{message:p};const g=function(e,t){const r=t.transactions[0];if(!r)return;const{stateDiff:n}=r,i=n?.pre?.[e]?.balance,a=n?.post?.[e]?.balance;if(!i||!a)return;return u(i,a)}(e.from,m),v=function(e){const t=d(e.transactions[0]?.callTrace??{});c("Extracted logs",t);const r=new(0,a.Interface)(o.abiERC20),n=new(0,a.Interface)(o.abiERC721),i=new(0,a.Interface)(o.abiERC1155);return t.map((e=>{const t=function(e,t,r,n){const i=[{abi:o.abiERC20,contractInterface:t,standard:"erc20"},{abi:o.abiERC721,contractInterface:r,standard:"erc721"},{abi:o.abiERC1155,contractInterface:n,standard:"erc1155"}];for(const{abi:t,contractInterface:r,standard:n}of i)try{return{...r.parseLog(e),abi:t,standard:n}}catch(e){continue}return}(e,r,n,i);if(!t)return void c("Failed to parse log",e);const a=t.abi.find((e=>e.name===t.name))?.inputs;if(!a)return void c("Failed to find inputs for event",t);const s=function(e,t){return e.reduce(((e,r,n)=>{const i=t[n].name.replace("_",""),a=l(r);return e[i]=a,e}),{})}(t.args,a);return{contractAddress:e.address,tokenStandard:t.standard,name:t.name,args:s,abi:t.abi}})).filter((e=>void 0!==e))}(m);c("Parsed events",v);const y=await async function(e,t){const r=function(e,t){const r=new Set;return t.reduce(((t,n)=>{if(!["Transfer","TransferSingle","TransferBatch"].includes(n.name)||![n.args.from,n.args.to].includes(e.from))return c("Ignoring event",n),t;let i=[void 0];"erc721"===n.tokenStandard&&(i=[n.args.tokenId]),"erc1155"===n.tokenStandard&&"TransferSingle"===n.name&&(i=[n.args.id]),"erc1155"===n.tokenStandard&&"TransferBatch"===n.name&&(i=n.args.ids),c("Extracted token ids",i);for(const s of i){const i={address:n.contractAddress,standard:n.tokenStandard,id:s},o=JSON.stringify(i);if(r.has(o)){c("Ignoring additional event with same contract and token ID",i);continue}r.add(o);const l=[e.from];"erc1155"===n.tokenStandard&&l.push(s),t.set(i,{from:e.from,to:n.contractAddress,data:new(0,a.Interface)(n.abi).encodeFunctionData("balanceOf",l)})}return t}),new Map)}(e,t),i=[...r.values()];if(c("Generated balance transactions",i),!i.length)return[];const s=await n.simulateTransactions.call(void 0,e.chainId,{transactions:[...i,e,...i]});if(c("Balance simulation response",s),s.transactions.length!==2*i.length+1)throw new Error("Invalid response from simulation API");return[...r.keys()].map(((e,t)=>{const r=u(h(s.transactions[t].return),h(s.transactions[t+i.length+1].return));if(r)return{...e,...r}})).filter((e=>void 0!==e))}(e,v);return{nativeBalanceChange:g,tokenBalanceChanges:y}}catch(t){c("Failed to get simulation data",t,e);const r=t;return{tokenBalanceChanges:[],error:{code:r.code,message:r.message,isReverted:r.message?.includes("execution reverted")??!1}}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-GC77BSQZ.js"}],[1686,{"./chunk-S6VGOPUY.js":1694,"@metamask/controller-utils":1738,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-S6VGOPUY.js"),i=e("@metamask/controller-utils"),a=e("@metamask/utils").createModuleLogger.call(void 0,n.projectLogger,"simulation-api"),s="https://tx-sentinel-{0}.api.cx.metamask.io/",o="networks",c=0;function l(e){return s.replace("{0}",e)}r.simulateTransactions=async function(e,t){const r=await async function(e){const t=await async function(){const e=`${l("ethereum-mainnet")}${o}`,t=await fetch(e);return t.json()}(),r=i.convertHexToDecimal.call(void 0,e),n=t[r];if(!n?.confirmations)throw a("Chain is not supported",e),new Error(`Chain is not supported: ${e}`);return l(n.network)}(e);a("Sending request",r,t);const n=c;c+=1;const s=await fetch(r,{method:"POST",body:JSON.stringify({id:String(n),jsonrpc:"2.0",method:"infura_simulateTransactions",params:[t]})}),d=await s.json();if(a("Received response",d),d.error)throw d.error;return d?.result}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-GE57YNGX.js"}],[1687,{"./chunk-MXQLW52B.js":1689,"@metamask/controller-utils":1738,"@metamask/gas-fee-controller":1238},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-MXQLW52B.js"),i=e("@metamask/controller-utils"),a=e("@metamask/gas-fee-controller");r.getGasFeeFlow=function(e,t){return t.find((t=>t.matchesTransaction(e)))},r.mergeGasFeeEstimates=function({gasFeeControllerEstimateType:e,gasFeeControllerEstimates:t,transactionGasFeeEstimates:r}){return e===a.GAS_ESTIMATE_TYPES.FEE_MARKET?Object.values(n.GasFeeEstimateLevel).reduce(((e,n)=>{return{...e,[n]:(a=t[n],s=r[n],{...a,suggestedMaxFeePerGas:i.weiHexToGweiDec.call(void 0,s.maxFeePerGas),suggestedMaxPriorityFeePerGas:i.weiHexToGweiDec.call(void 0,s.maxPriorityFeePerGas)})};var a,s}),{...t}):e===a.GAS_ESTIMATE_TYPES.LEGACY?Object.values(n.GasFeeEstimateLevel).reduce(((e,t)=>{return{...e,[t]:(n=r[t],i.weiHexToGweiDec.call(void 0,n.maxFeePerGas))};var n}),{}):t}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-GQYELPS3.js"}],[1688,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n={MAINNET:"0x1",GOERLI:"0x5",BASE:"0x2105",BASE_TESTNET:"0x14a33",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_TESTNET:"0x1a4",OPBNB:"0xcc",OPBNB_TESTNET:"0x15eb",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",GNOSIS:"0x64",ARBITRUM:"0xa4b1",ZKSYNC_ERA:"0x144"},i="etherscan.io",a="api",s={[n.GOERLI]:{domain:i,subdomain:`${a}-goerli`},[n.MAINNET]:{domain:i,subdomain:a},[n.SEPOLIA]:{domain:i,subdomain:`${a}-sepolia`},[n.LINEA_GOERLI]:{domain:"lineascan.build",subdomain:`${a}-goerli`},[n.LINEA_SEPOLIA]:{domain:"lineascan.build",subdomain:`${a}-sepolia`},[n.LINEA_MAINNET]:{domain:"lineascan.build",subdomain:a},[n.BSC]:{domain:"bscscan.com",subdomain:a},[n.BSC_TESTNET]:{domain:"bscscan.com",subdomain:`${a}-testnet`},[n.OPTIMISM]:{domain:i,subdomain:`${a}-optimistic`},[n.OPTIMISM_SEPOLIA]:{domain:i,subdomain:`${a}-sepolia-optimistic`},[n.POLYGON]:{domain:"polygonscan.com",subdomain:a},[n.POLYGON_TESTNET]:{domain:"polygonscan.com",subdomain:`${a}-mumbai`},[n.AVALANCHE]:{domain:"snowtrace.io",subdomain:a},[n.AVALANCHE_TESTNET]:{domain:"snowtrace.io",subdomain:`${a}-testnet`},[n.FANTOM]:{domain:"ftmscan.com",subdomain:a},[n.FANTOM_TESTNET]:{domain:"ftmscan.com",subdomain:`${a}-testnet`},[n.MOONBEAM]:{domain:"moonscan.io",subdomain:`${a}-moonbeam`},[n.MOONBEAM_TESTNET]:{domain:"moonscan.io",subdomain:`${a}-moonbase`},[n.MOONRIVER]:{domain:"moonscan.io",subdomain:`${a}-moonriver`},[n.GNOSIS]:{domain:"gnosisscan.io",subdomain:`${a}-gnosis`}},o={[n.OPTIMISM]:1,[n.OPTIMISM_SEPOLIA]:1};r.CHAIN_IDS=n,r.DEFAULT_ETHERSCAN_DOMAIN=i,r.DEFAULT_ETHERSCAN_SUBDOMAIN_PREFIX=a,r.ETHERSCAN_SUPPORTED_NETWORKS=s,r.GAS_BUFFER_CHAIN_OVERRIDES=o}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-ITDY6AIZ.js"}],[1689,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.dropped="dropped",e.failed="failed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved",e))(n||{}),i=(e=>(e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device",e))(i||{}),a=(e=>(e.cancel="cancel",e.contractInteraction="contractInteraction",e.deployContract="contractDeployment",e.ethDecrypt="eth_decrypt",e.ethGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.incoming="incoming",e.personalSign="personal_sign",e.retry="retry",e.simpleSend="simpleSend",e.sign="eth_sign",e.signTypedData="eth_signTypedData",e.smart="smart",e.swap="swap",e.swapApproval="swapApproval",e.tokenMethodApprove="approve",e.tokenMethodSafeTransferFrom="safetransferfrom",e.tokenMethodTransfer="transfer",e.tokenMethodTransferFrom="transferfrom",e.tokenMethodSetApprovalForAll="setapprovalforall",e.tokenMethodIncreaseAllowance="increaseAllowance",e))(a||{}),s=(e=>(e.legacy="0x0",e.accessList="0x1",e.feeMarket="0x2",e))(s||{}),o=(e=>(e.CUSTOM="custom",e.DAPP_SUGGESTED="dappSuggested",e.MEDIUM="medium",e))(o||{}),c=(e=>(e.low="low",e.medium="medium",e.high="high",e))(c||{}),l=(e=>(e.erc20="erc20",e.erc721="erc721",e.erc1155="erc1155",e))(l||{});r.TransactionStatus=n,r.WalletDevice=i,r.TransactionType=a,r.TransactionEnvelopeType=s,r.UserFeeLevel=o,r.GasFeeEstimateLevel=c,r.SimulationTokenStandard=l}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-MXQLW52B.js"}],[169,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)&&(0,n.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")&&delete e.PreferencesController.frequentRpcListDetail;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-082.ts"}],[1690,{"./chunk-F3CMU2DM.js":1684,"./chunk-S6VGOPUY.js":1694,"./chunk-Z4BLTVTB.js":1700,"@metamask/eth-query":1149,"async-mutex":2525},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l,d,u,h,f,m,p,g,v,y,b,_,w,T,k,E,I=e("./chunk-F3CMU2DM.js"),P=e("./chunk-S6VGOPUY.js"),S=e("./chunk-Z4BLTVTB.js"),x=e("@metamask/eth-query"),A=(n=x)&&n.__esModule?n:{default:n},C=e("async-mutex");i=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakMap,g=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,_=new WeakSet,w=function(e){const t=S.__privateGet.call(void 0,this,v).get(e);t&&(t.pendingTransactionTracker.stop(),S.__privateGet.call(void 0,this,h).call(this,t.pendingTransactionTracker),t.incomingTransactionHelper.stop(),S.__privateGet.call(void 0,this,u).call(this,t.incomingTransactionHelper),S.__privateGet.call(void 0,this,v).delete(e))},T=new WeakSet,k=function(e){if(S.__privateGet.call(void 0,this,v).get(e))return;const{provider:t,blockTracker:r,configuration:{chainId:n}}=S.__privateGet.call(void 0,this,l).call(this,e);let i=S.__privateGet.call(void 0,this,y).get(n);i||(i=new(0,I.EtherscanRemoteTransactionSource)({includeTokenTransfers:S.__privateGet.call(void 0,this,o).includeTokenTransfers}),S.__privateGet.call(void 0,this,y).set(n,i));const a=S.__privateGet.call(void 0,this,f).call(this,{provider:t,blockTracker:r,chainId:n}),s=S.__privateGet.call(void 0,this,m).call(this,{blockTracker:r,etherscanRemoteTransactionSource:i,chainId:n}),c=S.__privateGet.call(void 0,this,p).call(this,{provider:t,blockTracker:r,chainId:n});S.__privateGet.call(void 0,this,v).set(e,{nonceTracker:a,incomingTransactionHelper:s,pendingTransactionTracker:c})},E=new WeakMap,r.MultichainTrackingHelper=class{constructor({isMultichainEnabled:e,provider:t,nonceTracker:r,incomingTransactionOptions:n,findNetworkClientIdByChainId:I,getNetworkClientById:P,getNetworkClientRegistry:x,removeIncomingTransactionHelperListeners:A,removePendingTransactionTrackerListeners:C,createNonceTracker:j,createIncomingTransactionHelper:M,createPendingTransactionTracker:B,onNetworkStateChange:N}){S.__privateAdd.call(void 0,this,_),S.__privateAdd.call(void 0,this,T),S.__privateAdd.call(void 0,this,i,void 0),S.__privateAdd.call(void 0,this,a,void 0),S.__privateAdd.call(void 0,this,s,void 0),S.__privateAdd.call(void 0,this,o,void 0),S.__privateAdd.call(void 0,this,c,void 0),S.__privateAdd.call(void 0,this,l,void 0),S.__privateAdd.call(void 0,this,d,void 0),S.__privateAdd.call(void 0,this,u,void 0),S.__privateAdd.call(void 0,this,h,void 0),S.__privateAdd.call(void 0,this,f,void 0),S.__privateAdd.call(void 0,this,m,void 0),S.__privateAdd.call(void 0,this,p,void 0),S.__privateAdd.call(void 0,this,g,new Map),S.__privateAdd.call(void 0,this,v,new Map),S.__privateAdd.call(void 0,this,y,new Map),this.checkForPendingTransactionAndStartPolling=()=>{for(const[,e]of S.__privateGet.call(void 0,this,v))e.pendingTransactionTracker.startIfPendingTransactions()},S.__privateAdd.call(void 0,this,b,(e=>{S.__privateGet.call(void 0,this,E).call(this,e);const t=Object.keys(e),r=Array.from(S.__privateGet.call(void 0,this,v).keys());r.filter((e=>!t.includes(e))).forEach((e=>{S.__privateMethod.call(void 0,this,_,w).call(this,e)}));t.filter((e=>!r.includes(e))).forEach((e=>{S.__privateMethod.call(void 0,this,T,k).call(this,e)}))})),S.__privateAdd.call(void 0,this,E,(e=>{const t=new Set;Object.values(e).forEach((e=>t.add(e.configuration.chainId)));Array.from(S.__privateGet.call(void 0,this,y).keys()).filter((e=>!t.has(e))).forEach((e=>{S.__privateGet.call(void 0,this,y).delete(e)}))})),S.__privateSet.call(void 0,this,i,e),S.__privateSet.call(void 0,this,a,t),S.__privateSet.call(void 0,this,s,r),S.__privateSet.call(void 0,this,o,n),S.__privateSet.call(void 0,this,c,I),S.__privateSet.call(void 0,this,l,P),S.__privateSet.call(void 0,this,d,x),S.__privateSet.call(void 0,this,u,A),S.__privateSet.call(void 0,this,h,C),S.__privateSet.call(void 0,this,f,j),S.__privateSet.call(void 0,this,m,M),S.__privateSet.call(void 0,this,p,B),N(((e,t)=>{if(S.__privateGet.call(void 0,this,i)){const e=S.__privateGet.call(void 0,this,d).call(this);t.forEach((({op:t,path:r})=>{if("remove"===t&&"networkConfigurations"===r[0]){const t=r[1];delete e[t]}})),S.__privateGet.call(void 0,this,b).call(this,e)}}))}initialize(){if(!S.__privateGet.call(void 0,this,i))return;const e=S.__privateGet.call(void 0,this,d).call(this);S.__privateGet.call(void 0,this,b).call(this,e)}has(e){return S.__privateGet.call(void 0,this,v).has(e)}getEthQuery({networkClientId:e,chainId:t}={}){if(!S.__privateGet.call(void 0,this,i))return new(0,A.default)(S.__privateGet.call(void 0,this,a));let r;if(e)try{r=S.__privateGet.call(void 0,this,l).call(this,e)}catch(e){P.incomingTransactionsLogger.call(void 0,"failed to get network client by networkClientId")}if(!r&&t)try{e=S.__privateGet.call(void 0,this,c).call(this,t),r=S.__privateGet.call(void 0,this,l).call(this,e)}catch(e){P.incomingTransactionsLogger.call(void 0,"failed to get network client by chainId")}return r?new(0,A.default)(r.provider):new(0,A.default)(S.__privateGet.call(void 0,this,a))}async acquireNonceLockForChainIdKey({chainId:e,key:t="global"}){let r=S.__privateGet.call(void 0,this,g).get(e);r||(r=new Map,S.__privateGet.call(void 0,this,g).set(e,r));let n=r.get(t);return n||(n=new(0,C.Mutex),r.set(t,n)),await n.acquire()}async getNonceLock(e,t){let r,n=S.__privateGet.call(void 0,this,s);if(t&&S.__privateGet.call(void 0,this,i)){const i=S.__privateGet.call(void 0,this,l).call(this,t);r=await this.acquireNonceLockForChainIdKey({chainId:i.configuration.chainId,key:e});const a=S.__privateGet.call(void 0,this,v).get(t);if(!a)throw new Error("missing nonceTracker for networkClientId");n=a.nonceTracker}try{const t=await n.getNonceLock(e);return{...t,releaseLock:()=>{t.releaseLock(),r?.()}}}catch(e){throw r?.(),e}}startIncomingTransactionPolling(e=[]){e.forEach((e=>{S.__privateGet.call(void 0,this,v).get(e)?.incomingTransactionHelper.start()}))}stopIncomingTransactionPolling(e=[]){e.forEach((e=>{S.__privateGet.call(void 0,this,v).get(e)?.incomingTransactionHelper.stop()}))}stopAllIncomingTransactionPolling(){for(const[,e]of S.__privateGet.call(void 0,this,v))e.incomingTransactionHelper.stop()}async updateIncomingTransactions(e=[]){(await Promise.allSettled(e.map((async e=>await(S.__privateGet.call(void 0,this,v).get(e)?.incomingTransactionHelper.update()))))).filter((e=>"rejected"===e.status)).forEach((e=>{P.incomingTransactionsLogger.call(void 0,"failed to update incoming transactions",e.reason)}))}stopAllTracking(){for(const[e]of S.__privateGet.call(void 0,this,v))S.__privateMethod.call(void 0,this,_,w).call(this,e)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-NRWEI43Q.js"}],[1691,{"fast-json-patch":2970,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("fast-json-patch"),a=(n=i)&&n.__esModule?n:{default:n},s=e("lodash");function o(e){const t={...e};return delete t.history,s.cloneDeep.call(void 0,t)}r.addInitialHistorySnapshot=function(e){const t=o(e);return s.merge.call(void 0,{},e,{history:[t]})},r.updateTransactionHistory=function(e,t){if(!e.history)return e;const r=o(e);var n;const i=function(e,t,r){const n=a.default.compare(e,t);n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now());return n}((n=e.history,s.cloneDeep.call(void 0,n).reduce(((e,t)=>a.default.applyPatch(e,t).newDocument))),r,t);return i.length>0?s.merge.call(void 0,{},e,{history:[...e.history,i]}):e}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-QP75SWIQ.js"}],[1692,{"./chunk-S6VGOPUY.js":1694,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-S6VGOPUY.js"),i=e("@metamask/utils").createModuleLogger.call(void 0,n.projectLogger,"layer-1-gas-fee-flow");r.updateTransactionLayer1GasFee=async function(e){const t=await async function({ethQuery:e,transactionMeta:t,layer1GasFeeFlows:r}){const n=function(e,t){return t.find((t=>t.matchesTransaction(e)))}(t,r);if(!n)return void i("Layer 1 gas fee flow not found",t.id);try{const{layer1Fee:r}=await n.getLayer1Fee({ethQuery:e,transactionMeta:t});return r}catch(e){return void i("Failed to get layer 1 gas fee",t.id,e)}}(e);if(t){const{transactionMeta:r}=e;r.layer1GasFee=t}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-R7NJVDWN.js"}],[1693,{"./chunk-ITDY6AIZ.js":1688,"./chunk-S6VGOPUY.js":1694,"@metamask/controller-utils":1738,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-ITDY6AIZ.js"),i=e("./chunk-S6VGOPUY.js"),a=e("@metamask/controller-utils"),s=e("@metamask/utils"),o=s.createModuleLogger.call(void 0,i.projectLogger,"gas"),c="0x5208",l=1.5;async function d(e,t){const r={...e},{data:n,value:i}=r,{gasLimit:c,number:l}=await async function(e){return await a.query.call(void 0,e,"getBlockByNumber",["latest",!1])}(t),u=a.hexToBN.call(void 0,c);r.data=n?s.add0x.call(void 0,n):n,r.gas=a.BNToHex.call(void 0,a.fractionBN.call(void 0,u,19,20)),r.value=i||"0x0";let h,f=r.gas;try{f=await a.query.call(void 0,t,"estimateGas",[r])}catch(e){h={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:l,blockGasLimit:c}},o("Estimation failed",{...h,fallback:d})}return{blockGasLimit:c,estimatedGas:f,simulationFails:h}}function u(e,t,r){const n=a.hexToBN.call(void 0,e),i=a.hexToBN.call(void 0,t).muln(.9),c=n.muln(r);if(n.gt(i)){const t=s.add0x.call(void 0,e);return o("Using estimated value",t),t}if(c.lt(i)){const e=s.add0x.call(void 0,a.BNToHex.call(void 0,c));return o("Using padded estimate",e,r),e}const l=s.add0x.call(void 0,a.BNToHex.call(void 0,i));return o("Using 90% of block gas limit",l),l}r.log=o,r.FIXED_GAS=c,r.DEFAULT_GAS_MULTIPLIER=l,r.updateGas=async function(e){const{txMeta:t}=e,r={...t.txParams},[i,s]=await async function(e){const{isCustomNetwork:t,chainId:r,txMeta:i}=e;if(i.txParams.gas)return o("Using value from request",i.txParams.gas),[i.txParams.gas];if(await async function({ethQuery:e,txMeta:t,isCustomNetwork:r}){const{txParams:{to:n,data:i}}=t;if(r||!n||i)return!1;const s=await async function(e,t){return await a.query.call(void 0,e,"getCode",[t])}(e,n);return!s||"0x"===s}(e))return o("Using fixed value",c),[c];const{blockGasLimit:s,estimatedGas:h,simulationFails:f}=await d(i.txParams,e.ethQuery);if(t)return o("Using original estimate as custom network"),[h,f];const m=n.GAS_BUFFER_CHAIN_OVERRIDES[r]??l;return[u(h,s,m),f]}(e);t.txParams.gas=i,t.simulationFails=s,r.gas||(t.originalGasEstimate=t.txParams.gas),t.defaultGasEstimates||(t.defaultGasEstimates={}),t.defaultGasEstimates.gas=t.txParams.gas},r.estimateGas=d,r.addGasBuffer=u}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-RQKICZYP.js"}],[1694,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/utils"),i=n.createProjectLogger.call(void 0,"transaction-controller"),a=n.createModuleLogger.call(void 0,i,"incoming-transactions");r.createModuleLogger=n.createModuleLogger,r.projectLogger=i,r.incomingTransactionsLogger=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-S6VGOPUY.js"}],[1695,{"@ethersproject/abi":422,"@metamask/controller-utils":1738,"@metamask/metamask-eth-abis":1367},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@ethersproject/abi"),i=e("@metamask/controller-utils"),a=e("@metamask/metamask-eth-abis"),s=new(0,n.Interface)(a.abiERC20),o=new(0,n.Interface)(a.abiERC721),c=new(0,n.Interface)(a.abiERC1155),l=new(0,n.Interface)(a.abiFiatTokenV2);r.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error",r.determineTransactionType=async function(e,t){const{data:r,to:n}=e;if(r&&!n)return{type:"contractDeployment",getCodeResponse:void 0};const{contractCode:a,isContractAddress:d}=await async function(e,t){let r;try{r=await i.query.call(void 0,e,"getCode",[t])}catch(e){r=null}const n=!!r&&("0x"!==r&&"0x0"!==r);return{contractCode:r,isContractAddress:n}}(t,n);if(!d)return{type:"simpleSend",getCodeResponse:a};const u=0!==Number(e.value??"0"),h={type:"contractInteraction",getCodeResponse:a};if(!r||u)return h;const f=function(e){if(!e)return;try{return s.parseTransaction({data:e})}catch{}try{return o.parseTransaction({data:e})}catch{}try{return c.parseTransaction({data:e})}catch{}try{return l.parseTransaction({data:e})}catch{}return}(r)?.name;if(!f)return h;const m=["approve","setapprovalforall","transfer","transferfrom","safetransferfrom","increaseAllowance"].find((e=>e.toLowerCase()===f.toLowerCase()));return m?{type:m,getCodeResponse:a}:h}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-SD6CWFDF.js"}],[1696,{"./chunk-5OQ373JS.js":1676,"./chunk-GQYELPS3.js":1687,"./chunk-S6VGOPUY.js":1694,"@metamask/controller-utils":1738,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-5OQ373JS.js"),i=e("./chunk-GQYELPS3.js"),a=e("./chunk-S6VGOPUY.js"),s=e("@metamask/controller-utils"),o=e("@metamask/utils"),c=o.createModuleLogger.call(void 0,a.projectLogger,"gas-fees");function l(e){return s.toHex.call(void 0,s.gweiDecToWEIBN.call(void 0,e))}r.updateGasFees=async function(e){const{txMeta:t}=e,r={...t.txParams},a=n.SWAP_TRANSACTION_TYPES.includes(t.type)?void 0:e.getSavedGasFees(t.chainId),d=await async function(e){const{eip1559:t,ethQuery:r,gasFeeFlows:n,getGasFeeEstimates:a,txMeta:l}=e;if(!t&&l.txParams.gasPrice||t&&l.txParams.maxFeePerGas&&l.txParams.maxPriorityFeePerGas)return{};const d=i.getGasFeeFlow.call(void 0,l,n);try{return(await d.getGasFees({ethQuery:r,getGasFeeControllerEstimates:a,transactionMeta:l})).estimates.medium}catch(e){c("Failed to get suggested gas fees",e)}const u=await s.query.call(void 0,r,"gasPrice");return{gasPrice:u?o.add0x.call(void 0,u.toString(16)):void 0}}(e);c("Suggested gas fees",d);const u={...e,initialParams:r,savedGasFees:a,suggestedGasFees:d};t.txParams.maxFeePerGas=function(e){const{savedGasFees:t,eip1559:r,initialParams:n,suggestedGasFees:i}=e;if(!r)return;if(t){const e=l(t.maxBaseFee);return c("Using maxFeePerGas from savedGasFees",e),e}if(n.maxFeePerGas)return c("Using maxFeePerGas from request",n.maxFeePerGas),n.maxFeePerGas;if(n.gasPrice&&!n.maxPriorityFeePerGas)return c("Setting maxFeePerGas to gasPrice from request",n.gasPrice),n.gasPrice;if(i.maxFeePerGas)return c("Using suggested maxFeePerGas",i.maxFeePerGas),i.maxFeePerGas;if(i.gasPrice)return c("Setting maxFeePerGas to suggested gasPrice",i.gasPrice),i.gasPrice;return void c("maxFeePerGas not set")}(u),t.txParams.maxPriorityFeePerGas=function(e){const{eip1559:t,initialParams:r,savedGasFees:n,suggestedGasFees:i,txMeta:a}=e;if(!t)return;if(n){const e=l(n.priorityFee);return c("Using maxPriorityFeePerGas from savedGasFees.priorityFee",e),e}if(r.maxPriorityFeePerGas)return c("Using maxPriorityFeePerGas from request",r.maxPriorityFeePerGas),r.maxPriorityFeePerGas;if(r.gasPrice&&!r.maxFeePerGas)return c("Setting maxPriorityFeePerGas to gasPrice from request",r.gasPrice),r.gasPrice;if(i.maxPriorityFeePerGas)return c("Using suggested maxPriorityFeePerGas",i.maxPriorityFeePerGas),i.maxPriorityFeePerGas;if(a.txParams.maxFeePerGas)return c("Setting maxPriorityFeePerGas to maxFeePerGas",a.txParams.maxFeePerGas),a.txParams.maxFeePerGas;return void c("maxPriorityFeePerGas not set")}(u),t.txParams.gasPrice=function(e){const{eip1559:t,initialParams:r,suggestedGasFees:n}=e;if(t)return;if(r.gasPrice)return c("Using gasPrice from request",r.gasPrice),r.gasPrice;if(n.maxFeePerGas)return c("Using suggested maxFeePerGas",n.maxFeePerGas),n.maxFeePerGas;if(n.gasPrice)return c("Using suggested gasPrice",n.gasPrice),n.gasPrice;return void c("gasPrice not set")}(u),t.userFeeLevel=function(e){const{eip1559:t,initialParams:r,savedGasFees:n,suggestedGasFees:i,txMeta:a}=e;if(!t)return;if(n)return"custom";if(!r.maxFeePerGas&&!r.maxPriorityFeePerGas&&r.gasPrice)return a.origin===s.ORIGIN_METAMASK?"custom":"dappSuggested";if(!r.maxFeePerGas&&!r.maxPriorityFeePerGas&&i.maxFeePerGas&&i.maxPriorityFeePerGas)return"medium";if(a.origin===s.ORIGIN_METAMASK)return"medium";return"dappSuggested"}(u),c("Updated gas fee properties",{maxFeePerGas:t.txParams.maxFeePerGas,maxPriorityFeePerGas:t.txParams.maxPriorityFeePerGas,gasPrice:t.txParams.gasPrice}),(t.txParams.maxFeePerGas||t.txParams.maxPriorityFeePerGas)&&delete t.txParams.gasPrice,t.txParams.gasPrice&&(delete t.txParams.maxFeePerGas,delete t.txParams.maxPriorityFeePerGas),function(e){e.defaultGasEstimates||(e.defaultGasEstimates={});e.defaultGasEstimates.maxFeePerGas=e.txParams.maxFeePerGas,e.defaultGasEstimates.maxPriorityFeePerGas=e.txParams.maxPriorityFeePerGas,e.defaultGasEstimates.gasPrice=e.txParams.gasPrice,e.defaultGasEstimates.estimateType=e.userFeeLevel}(t)},r.gweiDecimalToWeiHex=l}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-SSYRMQ63.js"}],[1697,{"@metamask/controller-utils":1738,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/controller-utils"),i=e("@metamask/utils"),a={data:e=>i.add0x.call(void 0,c(e)),from:e=>i.add0x.call(void 0,e).toLowerCase(),gas:e=>i.add0x.call(void 0,e),gasLimit:e=>i.add0x.call(void 0,e),gasPrice:e=>i.add0x.call(void 0,e),nonce:e=>i.add0x.call(void 0,e),to:e=>i.add0x.call(void 0,e).toLowerCase(),value:e=>i.add0x.call(void 0,e),maxFeePerGas:e=>i.add0x.call(void 0,e),maxPriorityFeePerGas:e=>i.add0x.call(void 0,e),estimatedBaseFee:e=>i.add0x.call(void 0,e),type:e=>i.add0x.call(void 0,e)};var s=(e,t)=>i.add0x.call(void 0,`${parseInt(""+e*t,10).toString(16)}`);function o(e){try{return JSON.parse(JSON.stringify(e)),!0}catch{return!1}}function c(e){const t=e.toLowerCase().startsWith("0x")?e.slice(0,2):"",r=t?e.slice(2):e;return t+(r.length%2==0?r:`0${r}`)}r.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error",r.normalizeTransactionParams=function(e){const t={from:""};for(const r of i.getKnownPropertyNames.call(void 0,a))e[r]&&(t[r]=a[r](e[r]));return t.value||(t.value="0x0"),t},r.isEIP1559Transaction=function(e){const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")},r.validateGasValues=e=>{Object.keys(e).forEach((t=>{const r=e[t];if("string"!=typeof r||!i.isStrictHexString.call(void 0,r))throw new TypeError(`expected hex string for ${t} but received: ${r}`)}))},r.isFeeMarketEIP1559Values=e=>void 0!==e?.maxFeePerGas||void 0!==e?.maxPriorityFeePerGas,r.isGasPriceValue=e=>void 0!==e?.gasPrice,r.getIncreasedPriceHex=s,r.getIncreasedPriceFromExisting=(e,t)=>s(n.convertHexToDecimal.call(void 0,e),t),r.validateMinimumIncrease=function(e,t){const r=n.convertHexToDecimal.call(void 0,e),i=n.convertHexToDecimal.call(void 0,t);if(r>=i)return e;throw new Error(`The proposed value: ${r} should meet or exceed the minimum value: ${i}`)},r.validateIfTransactionUnapproved=function(e,t){if("unapproved"!==e?.status)throw new Error(`TransactionsController: Can only call ${t} on an unapproved transaction.\n      Current tx status: ${e?.status}`)},r.normalizeTxError=function(e){return{name:e.name,message:e.message,stack:e.stack,code:e.code,rpc:o(e.value)?e.value:void 0}},r.normalizeGasFeeValues=function(e){const t=e=>"string"==typeof e?i.add0x.call(void 0,e):e;return"gasPrice"in e?{gasPrice:t(e.gasPrice)}:{maxFeePerGas:t(e.maxFeePerGas),maxPriorityFeePerGas:t(e.maxPriorityFeePerGas)}},r.padHexToEvenLength=c}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-UGFBA4GV.js"}],[1698,{"./chunk-MXQLW52B.js":1689,"./chunk-S6VGOPUY.js":1694,"./chunk-SSYRMQ63.js":1696,"./chunk-Z4BLTVTB.js":1700,"@metamask/gas-fee-controller":1238,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,a,s,o,c,l=e("./chunk-SSYRMQ63.js"),d=e("./chunk-S6VGOPUY.js"),u=e("./chunk-MXQLW52B.js"),h=e("./chunk-Z4BLTVTB.js"),f=e("@metamask/gas-fee-controller"),m=e("@metamask/utils").createModuleLogger.call(void 0,d.projectLogger,"default-gas-fee-flow");n=new WeakSet,i=function({gasEstimateType:e,gasFeeEstimates:t,level:r}){return e===f.GAS_ESTIMATE_TYPES.FEE_MARKET?h.__privateMethod.call(void 0,this,a,s).call(this,t,r):h.__privateMethod.call(void 0,this,o,c).call(this,t,r)},a=new WeakSet,s=function(e,t){return{maxFeePerGas:l.gweiDecimalToWeiHex.call(void 0,e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:l.gweiDecimalToWeiHex.call(void 0,e[t].suggestedMaxPriorityFeePerGas)}},o=new WeakSet,c=function(e,t){const r=l.gweiDecimalToWeiHex.call(void 0,e[t]);return{maxFeePerGas:r,maxPriorityFeePerGas:r}},r.DefaultGasFeeFlow=class{constructor(){h.__privateAdd.call(void 0,this,n),h.__privateAdd.call(void 0,this,a),h.__privateAdd.call(void 0,this,o)}matchesTransaction(e){return!0}async getGasFees(e){const{getGasFeeControllerEstimates:t,transactionMeta:r}=e,{networkClientId:a}=r,{gasEstimateType:s,gasFeeEstimates:o}=await t({networkClientId:a});if(s===f.GAS_ESTIMATE_TYPES.FEE_MARKET)m("Using fee market estimates",o);else{if(s!==f.GAS_ESTIMATE_TYPES.LEGACY)throw new Error("'No gas fee estimates available");m("Using legacy estimates",o)}return{estimates:Object.values(u.GasFeeEstimateLevel).reduce(((e,t)=>({...e,[t]:h.__privateMethod.call(void 0,this,n,i).call(this,{gasEstimateType:s,gasFeeEstimates:o,level:t})})),{})}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-US7NQPYE.js"}],[1699,{"./chunk-UGFBA4GV.js":1697,"@ethersproject/abi":422,"@metamask/controller-utils":1738,"@metamask/metamask-eth-abis":1367,"@metamask/rpc-errors":1566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-UGFBA4GV.js"),i=e("@ethersproject/abi"),a=e("@metamask/controller-utils"),s=e("@metamask/metamask-eth-abis"),o=e("@metamask/rpc-errors");function c(e,t){switch(t){case"maxFeePerGas":case"maxPriorityFeePerGas":if(e.type&&"0x2"!==e.type)throw o.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but including maxFeePerGas and maxPriorityFeePerGas requires type: "0x2"`);break;default:if(e.type&&"0x2"===e.type)throw o.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but included a gasPrice instead of maxFeePerGas and maxPriorityFeePerGas`)}}function l(e,t,r){if(void 0!==e[r])throw o.rpcErrors.invalidParams(`Invalid transaction params: specified ${t} but also included ${r}, these cannot be mixed`)}function d(e,t){if("string"!=typeof e[t])throw o.rpcErrors.invalidParams(`Invalid transaction params: ${t} is not a string. got: (${e[t]})`)}r.validateTransactionOrigin=async function(e,t,r,n){if(n!==a.ORIGIN_METAMASK){if(!e.includes(r))throw o.providerErrors.unauthorized({data:{origin:n}})}else if(r!==t)throw o.rpcErrors.internal({message:"Internally initiated transaction is using invalid account.",data:{origin:n,fromAddress:r,selectedAddress:t}})},r.validateTxParams=function(e,t=!0){!function(e,t){if(n.isEIP1559Transaction.call(void 0,e)&&!t)throw o.rpcErrors.invalidParams("Invalid transaction params: params specify an EIP-1559 transaction but the current network does not support EIP-1559")}(e,t),function(e){if(!e||"string"!=typeof e)throw o.rpcErrors.invalidParams(`Invalid "from" address ${e}: not a string.`);if(!a.isValidHexAddress.call(void 0,e))throw o.rpcErrors.invalidParams('Invalid "from" address.')}(e.from),function(e){if("0x"===e.to||void 0===e.to){if(!e.data)throw o.rpcErrors.invalidParams('Invalid "to" address.');delete e.to}else if(void 0!==e.to&&!a.isValidHexAddress.call(void 0,e.to))throw o.rpcErrors.invalidParams('Invalid "to" address.')}(e),function(e){if(void 0!==e){if(e.includes("-"))throw o.rpcErrors.invalidParams(`Invalid transaction value "${e}": not a positive number.`);if(e.includes("."))throw o.rpcErrors.invalidParams(`Invalid transaction value "${e}": number must be in wei.`);const t=parseInt(e,10);if(!(Number.isFinite(t)&&!Number.isNaN(t)&&!isNaN(Number(e))&&Number.isSafeInteger(t)))throw o.rpcErrors.invalidParams(`Invalid transaction value ${e}: number must be a valid number.`)}}(e.value),function(e){if(e){const t=new(0,i.Interface)(s.abiERC20);try{t.parseTransaction({data:e})}catch(e){if(e.message.match(/BUFFER_OVERRUN/u))throw o.rpcErrors.invalidParams("Invalid transaction params: data out-of-bounds, BUFFER_OVERRUN.")}}}(e.data),function(e){if(void 0!==e&&"number"!=typeof e&&"string"!=typeof e)throw o.rpcErrors.invalidParams(`Invalid transaction params: chainId is not a Number or hex string. got: (${e})`)}(e.chainId),function(e){e.gasPrice&&(c(e,"gasPrice"),l(e,"gasPrice","maxFeePerGas"),l(e,"gasPrice","maxPriorityFeePerGas"),d(e,"gasPrice"));e.maxFeePerGas&&(c(e,"maxFeePerGas"),l(e,"maxFeePerGas","gasPrice"),d(e,"maxFeePerGas"));e.maxPriorityFeePerGas&&(c(e,"maxPriorityFeePerGas"),l(e,"maxPriorityFeePerGas","gasPrice"),d(e,"maxPriorityFeePerGas"))}(e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-VH47Q6TS.js"}],[17,{"@metamask/obs-store":1453,loglevel:3483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("@metamask/obs-store"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n};function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o={onboardingTabs:{}},c={seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1};r.default=class{constructor({initState:e}){s(this,"store",void 0),s(this,"registerOnboarding",(async(e,t)=>{if(this.store.getState().completedOnboarding)return void a.default.debug("Ignoring registerOnboarding; user already onboarded");const{onboardingTabs:r}={...this.store.getState()??{}};r&&(r[e]&&r[e]===t||(a.default.debug(`Registering onboarding tab at location '${e}' with tabId '${t}'`),r[e]=t,this.store.updateState({onboardingTabs:r})))})),this.store=new i.ObservableStore({...c,...e,...o})}setSeedPhraseBackedUp(e){this.store.updateState({seedPhraseBackedUp:e})}async completeOnboarding(){return this.store.updateState({completedOnboarding:!0}),!0}setFirstTimeFlowType(e){this.store.updateState({firstTimeFlowType:e})}}}}},{package:"$root$",file:"app/scripts/controllers/onboarding.ts"}],[170,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"network")&&(0,n.hasProperty)(e.NetworkController,"networkId")&&delete e.NetworkController.network;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-084.ts"}],[1700,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-Z4BLTVTB.js"}],[1701,{"./chunk-S6VGOPUY.js":1694,"@metamask/controller-utils":1738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-S6VGOPUY.js"),i=e("@metamask/controller-utils"),a=n.createModuleLogger.call(void 0,n.projectLogger,"nonce");r.getNextNonce=async function(e,t){const{customNonceValue:r,txParams:{from:n,nonce:s}}=e,o=r?i.toHex.call(void 0,r):void 0;if(o)return a("Using custom nonce",o),[o,void 0];if(s)return a("Using existing nonce",s),[s,void 0];const c=await t(n),l=i.toHex.call(void 0,c.nextNonce),d=c.releaseLock.bind(c);return a("Using nonce from nonce tracker",l,c.nonceDetails),[l,d]},r.getAndFormatTransactionsForNonceTracker=function(e,t,r,n){return n.filter((({chainId:n,isTransfer:i,isUserOperation:a,status:s,txParams:{from:o}})=>!i&&!a&&n===e&&s===r&&o.toLowerCase()===t.toLowerCase())).map((({status:e,txParams:{from:t,gas:r,value:n,nonce:i}})=>({status:e,history:[{}],txParams:{from:t??"",gas:r??"",value:n??"",nonce:i??""}})))}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-ZNZEJDOE.js"}],[1702,{"./chunk-5OQ373JS.js":1676,"./chunk-5XBULBP2.js":1677,"./chunk-7LXE4KHV.js":1678,"./chunk-7QOACSQU.js":1679,"./chunk-7YLATOE4.js":1680,"./chunk-CWJBSWH3.js":1681,"./chunk-CXXGL43K.js":1682,"./chunk-DTDTOMTB.js":1683,"./chunk-F3CMU2DM.js":1684,"./chunk-GC77BSQZ.js":1685,"./chunk-GE57YNGX.js":1686,"./chunk-GQYELPS3.js":1687,"./chunk-ITDY6AIZ.js":1688,"./chunk-MXQLW52B.js":1689,"./chunk-NRWEI43Q.js":1690,"./chunk-QP75SWIQ.js":1691,"./chunk-R7NJVDWN.js":1692,"./chunk-RQKICZYP.js":1693,"./chunk-S6VGOPUY.js":1694,"./chunk-SD6CWFDF.js":1695,"./chunk-SSYRMQ63.js":1696,"./chunk-UGFBA4GV.js":1697,"./chunk-US7NQPYE.js":1698,"./chunk-VH47Q6TS.js":1699,"./chunk-Z4BLTVTB.js":1700,"./chunk-ZNZEJDOE.js":1701},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-7QOACSQU.js");e("./chunk-VH47Q6TS.js"),e("./chunk-RQKICZYP.js"),e("./chunk-QP75SWIQ.js"),e("./chunk-ZNZEJDOE.js"),e("./chunk-GC77BSQZ.js"),e("./chunk-GE57YNGX.js");var i=e("./chunk-SD6CWFDF.js");e("./chunk-7YLATOE4.js"),e("./chunk-R7NJVDWN.js"),e("./chunk-DTDTOMTB.js"),e("./chunk-NRWEI43Q.js"),e("./chunk-5XBULBP2.js"),e("./chunk-7LXE4KHV.js"),e("./chunk-CWJBSWH3.js"),e("./chunk-US7NQPYE.js"),e("./chunk-SSYRMQ63.js"),e("./chunk-5OQ373JS.js");var a=e("./chunk-UGFBA4GV.js"),s=e("./chunk-GQYELPS3.js");e("./chunk-F3CMU2DM.js"),e("./chunk-CXXGL43K.js"),e("./chunk-ITDY6AIZ.js"),e("./chunk-S6VGOPUY.js");var o=e("./chunk-MXQLW52B.js");e("./chunk-Z4BLTVTB.js"),r.CANCEL_RATE=n.CANCEL_RATE,r.HARDFORK=n.HARDFORK,r.SimulationTokenStandard=o.SimulationTokenStandard,r.TransactionController=n.TransactionController,r.TransactionEnvelopeType=o.TransactionEnvelopeType,r.TransactionStatus=o.TransactionStatus,r.TransactionType=o.TransactionType,r.UserFeeLevel=o.UserFeeLevel,r.WalletDevice=o.WalletDevice,r.determineTransactionType=i.determineTransactionType,r.isEIP1559Transaction=a.isEIP1559Transaction,r.mergeGasFeeEstimates=s.mergeGasFeeEstimates,r.normalizeTransactionParams=a.normalizeTransactionParams}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/index.js"}],[1703,{"./types":1710,"./util":1711,"@ethereumjs/common":380,"@ethereumjs/util":1719},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseTransaction=void 0;const n=e("@ethereumjs/common"),i=e("@ethereumjs/util"),a=e("./types"),s=e("./util");r.BaseTransaction=class{constructor(e,t){this.cache={hash:undefined,dataFee:undefined},this.activeCapabilities=[],this.DEFAULT_CHAIN=n.Chain.Mainnet,this.DEFAULT_HARDFORK=n.Hardfork.Merge;const{nonce:r,gasLimit:a,to:o,value:c,data:l,v:d,r:u,s:h,type:f}=e;this._type=Number((0,i.bufferToBigInt)((0,i.toBuffer)(f))),this.txOptions=t;const m=(0,i.toBuffer)(""===o?"0x":o),p=(0,i.toBuffer)(""===d?"0x":d),g=(0,i.toBuffer)(""===u?"0x":u),v=(0,i.toBuffer)(""===h?"0x":h);this.nonce=(0,i.bufferToBigInt)((0,i.toBuffer)(""===r?"0x":r)),this.gasLimit=(0,i.bufferToBigInt)((0,i.toBuffer)(""===a?"0x":a)),this.to=m.length>0?new i.Address(m):undefined,this.value=(0,i.bufferToBigInt)((0,i.toBuffer)(""===c?"0x":c)),this.data=(0,i.toBuffer)(""===l?"0x":l),this.v=p.length>0?(0,i.bufferToBigInt)(p):undefined,this.r=g.length>0?(0,i.bufferToBigInt)(g):undefined,this.s=v.length>0?(0,i.bufferToBigInt)(v):undefined,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const y=this.to===undefined||null===this.to,b=t.allowUnlimitedInitCodeSize??!1,_=t.common??this._getCommon();y&&_.isActivatedEIP(3860)&&!1===b&&(0,s.checkMaxInitCodeSize)(_,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){const{v:e}=this;if(e!==undefined&&e!==BigInt(0)&&e!==BigInt(1)){const e=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(e)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&e!==undefined&&e>i.SECP256K1_ORDER_DIV_2){const e=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(e)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let n=0;n<this.data.length;n++)0===this.data[n]?r+=e:r+=t;if((this.to===undefined||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return this.to===undefined||0===this.to.buf.length}isSigned(){const{v:e,r:t,s:r}=this;return e!==undefined&&t!==undefined&&r!==undefined}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,i.unpadBuffer)(e).length}catch(e){return!1}}getSenderAddress(){return new i.Address((0,i.publicToAddress)(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(a.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(a.Capability.EIP155ReplayProtection),t=!0);const r=this.getMessageToSign(!0),{v:n,r:s,s:o}=(0,i.ecsign)(r,e),c=this._processSignature(n,s,o);if(t){const e=this.activeCapabilities.indexOf(a.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return c}_getCommon(e,t){if(t!==undefined){const r=(0,i.bufferToBigInt)((0,i.toBuffer)(t));if(e){if(e.chainId()!==r){const e=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(e)}return e.copy()}return n.Common.isSupportedChainId(r)?new n.Common({chain:r,hardfork:this.DEFAULT_HARDFORK}):n.Common.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}return e?.copy()??new n.Common({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[n,a]of Object.entries(e))switch(t){case 64:if(r){if(a!==undefined&&a>=i.MAX_UINT64){const e=this._errorMsg(`${n} cannot equal or exceed MAX_UINT64 (2^64-1), given ${a}`);throw new Error(e)}}else if(a!==undefined&&a>i.MAX_UINT64){const e=this._errorMsg(`${n} cannot exceed MAX_UINT64 (2^64-1), given ${a}`);throw new Error(e)}break;case 256:if(r){if(a!==undefined&&a>=i.MAX_INTEGER){const e=this._errorMsg(`${n} cannot equal or exceed MAX_INTEGER (2^256-1), given ${a}`);throw new Error(e)}}else if(a!==undefined&&a>i.MAX_INTEGER){const e=this._errorMsg(`${n} cannot exceed MAX_INTEGER (2^256-1), given ${a}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,n]of Object.entries(e))if(t.includes(r)&&Array.isArray(n))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,i.bufferToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let n=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return n+=`signed=${t} hf=${r}`,n}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/baseTransaction.js"}],[1704,{"./baseTransaction":1703,"./util":1711,"@ethereumjs/rlp":383,"@ethereumjs/util":1719,buffer:2634,"ethereum-cryptography/keccak":2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.FeeMarketEIP1559Transaction=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),a=e("ethereum-cryptography/keccak"),s=e("./baseTransaction"),o=e("./util"),c=t.from(2..toString(16).padStart(2,"0"),"hex");class l extends s.BaseTransaction{constructor(e,t={}){super({...e,type:2},t),this.DEFAULT_HARDFORK="london";const{chainId:r,accessList:n,maxFeePerGas:a,maxPriorityFeePerGas:c}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!1===this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const l=o.AccessLists.getAccessListData(n??[]);if(this.accessList=l.accessList,this.AccessListJSON=l.AccessListJSON,o.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,i.bufferToBigInt)((0,i.toBuffer)(""===a?"0x":a)),this.maxPriorityFeePerGas=(0,i.bufferToBigInt)((0,i.toBuffer)(""===c?"0x":c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),s.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>i.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this._validateYParity(),this._validateHighS();(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){if(!e.slice(0,1).equals(c))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: 2, received: ${e.slice(0,1).toString("hex")}`);const r=(0,i.arrToBufArr)(n.RLP.decode(e.slice(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return l.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,n,a,s,o,c,d,u,h,f,m,p]=e;return this._validateNotArray({chainId:r,v:f}),(0,i.validateNoLeadingZeroes)({nonce:n,maxPriorityFeePerGas:a,maxFeePerGas:s,gasLimit:o,value:d,v:f,r:m,s:p}),new l({chainId:(0,i.bufferToBigInt)(r),nonce:n,maxPriorityFeePerGas:a,maxFeePerGas:s,gasLimit:o,to:c,value:d,data:u,accessList:h??[],v:f!==undefined?(0,i.bufferToBigInt)(f):undefined,r:m,s:p},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(o.AccessLists.getDataFeeEIP2930(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,n=(t<r?t:r)+e;return this.gasLimit*n+this.value}raw(){return[(0,i.bigIntToUnpaddedBuffer)(this.chainId),(0,i.bigIntToUnpaddedBuffer)(this.nonce),(0,i.bigIntToUnpaddedBuffer)(this.maxPriorityFeePerGas),(0,i.bigIntToUnpaddedBuffer)(this.maxFeePerGas),(0,i.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,i.bigIntToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==undefined?(0,i.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,i.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,i.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){const e=this.raw();return t.concat([c,t.from(n.RLP.encode((0,i.bufArrToArr)(e)))])}getMessageToSign(e=!0){const r=this.raw().slice(0,9),s=t.concat([c,t.from(n.RLP.encode((0,i.bufArrToArr)(r)))]);return e?t.from((0,a.keccak256)(s)):s}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,a.keccak256)(this.serialize()))),this.cache.hash):t.from((0,a.keccak256)(this.serialize()))}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:n}=this;this._validateHighS();try{return(0,i.ecrecover)(e,t+BigInt(27),(0,i.bigIntToUnpaddedBuffer)(r),(0,i.bigIntToUnpaddedBuffer)(n))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const n={...this.txOptions,common:this.common};return l.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,i.bufferToBigInt)(t),s:(0,i.bufferToBigInt)(r)},n)}toJSON(){const e=o.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,i.bigIntToHex)(this.chainId),nonce:(0,i.bigIntToHex)(this.nonce),maxPriorityFeePerGas:(0,i.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,i.bigIntToHex)(this.maxFeePerGas),gasLimit:(0,i.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,i.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:e,v:this.v!==undefined?(0,i.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,i.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,i.bigIntToHex)(this.s):undefined}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}r.FeeMarketEIP1559Transaction=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/eip1559Transaction.js"}],[1705,{"./baseTransaction":1703,"./util":1711,"@ethereumjs/rlp":383,"@ethereumjs/util":1719,buffer:2634,"ethereum-cryptography/keccak":2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessListEIP2930Transaction=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),a=e("ethereum-cryptography/keccak"),s=e("./baseTransaction"),o=e("./util"),c=t.from(1..toString(16).padStart(2,"0"),"hex");class l extends s.BaseTransaction{constructor(e,t={}){super({...e,type:1},t),this.DEFAULT_HARDFORK="berlin";const{chainId:r,accessList:n,gasPrice:a}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const c=o.AccessLists.getAccessListData(n??[]);if(this.accessList=c.accessList,this.AccessListJSON=c.AccessListJSON,o.AccessLists.verifyAccessList(this.accessList),this.gasPrice=(0,i.bufferToBigInt)((0,i.toBuffer)(""===a?"0x":a)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),s.BaseTransaction._validateNotArray(e),this.gasPrice*this.gasLimit>i.MAX_INTEGER){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}this._validateYParity(),this._validateHighS();(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){if(!e.slice(0,1).equals(c))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: 1, received: ${e.slice(0,1).toString("hex")}`);const r=(0,i.arrToBufArr)(n.RLP.decode(Uint8Array.from(e.slice(1))));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return l.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,n,a,s,o,c,d,u,h,f,m]=e;this._validateNotArray({chainId:r,v:h}),(0,i.validateNoLeadingZeroes)({nonce:n,gasPrice:a,gasLimit:s,value:c,v:h,r:f,s:m});return new l({chainId:(0,i.bufferToBigInt)(r),nonce:n,gasPrice:a,gasLimit:s,to:o,value:c,data:d,accessList:u??[],v:h!==undefined?(0,i.bufferToBigInt)(h):undefined,r:f,s:m},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(o.AccessLists.getDataFeeEIP2930(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[(0,i.bigIntToUnpaddedBuffer)(this.chainId),(0,i.bigIntToUnpaddedBuffer)(this.nonce),(0,i.bigIntToUnpaddedBuffer)(this.gasPrice),(0,i.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,i.bigIntToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==undefined?(0,i.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,i.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,i.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){const e=this.raw();return t.concat([c,t.from(n.RLP.encode((0,i.bufArrToArr)(e)))])}getMessageToSign(e=!0){const r=this.raw().slice(0,8),s=t.concat([c,t.from(n.RLP.encode((0,i.bufArrToArr)(r)))]);return e?t.from((0,a.keccak256)(s)):s}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,a.keccak256)(this.serialize()))),this.cache.hash):t.from((0,a.keccak256)(this.serialize()))}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:n}=this;this._validateHighS();try{return(0,i.ecrecover)(e,t+BigInt(27),(0,i.bigIntToUnpaddedBuffer)(r),(0,i.bigIntToUnpaddedBuffer)(n))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const n={...this.txOptions,common:this.common};return l.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,i.bufferToBigInt)(t),s:(0,i.bufferToBigInt)(r)},n)}toJSON(){const e=o.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,i.bigIntToHex)(this.chainId),nonce:(0,i.bigIntToHex)(this.nonce),gasPrice:(0,i.bigIntToHex)(this.gasPrice),gasLimit:(0,i.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,i.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:e,v:this.v!==undefined?(0,i.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,i.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,i.bigIntToHex)(this.s):undefined}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}r.AccessListEIP2930Transaction=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/eip2930Transaction.js"}],[1706,{"@ethereumjs/util":1719},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeTxParams=void 0;const n=e("@ethereumjs/util");r.normalizeTxParams=e=>{const t=Object.assign({},e);return t.gasLimit=(0,n.toType)(t.gasLimit??t.gas,n.TypeOutput.BigInt),t.data=t.data===undefined?t.input:t.data,t.gasPrice=t.gasPrice!==undefined?BigInt(t.gasPrice):undefined,t.value=t.value!==undefined?BigInt(t.value):undefined,t.to=null!==t.to&&t.to!==undefined?(0,n.setLengthLeft)((0,n.toBuffer)(t.to),20):null,t.v="0x0"===t.v?"0x":t.v,t.r="0x0"===t.r?"0x":t.r,t.s="0x0"===t.s?"0x":t.s,"0x"!==t.v&&(t.v=(0,n.toType)(t.v,n.TypeOutput.BigInt)),t}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/fromRpc.js"}],[1707,{"./eip1559Transaction":1704,"./eip2930Transaction":1705,"./legacyTransaction":1708,"./transactionFactory":1709,"./types":1710},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=r.Transaction=r.AccessListEIP2930Transaction=r.FeeMarketEIP1559Transaction=void 0;var a=e("./eip1559Transaction");Object.defineProperty(r,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return a.FeeMarketEIP1559Transaction}});var s=e("./eip2930Transaction");Object.defineProperty(r,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return s.AccessListEIP2930Transaction}});var o=e("./legacyTransaction");Object.defineProperty(r,"Transaction",{enumerable:!0,get:function(){return o.Transaction}});var c=e("./transactionFactory");Object.defineProperty(r,"TransactionFactory",{enumerable:!0,get:function(){return c.TransactionFactory}}),i(e("./types"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/index.js"}],[1708,{"./baseTransaction":1703,"./types":1710,"@ethereumjs/rlp":383,"@ethereumjs/util":1719,buffer:2634,"ethereum-cryptography/keccak":2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Transaction=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),a=e("ethereum-cryptography/keccak"),s=e("./baseTransaction"),o=e("./types");function c(e,t){const r=Number(e),n=2*Number(t);return r===n+35||r===n+36}class l extends s.BaseTransaction{constructor(e,t={}){if(super({...e,type:0},t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=(0,i.bufferToBigInt)((0,i.toBuffer)(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>i.MAX_INTEGER){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),s.BaseTransaction._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?c(this.v,this.common.chainId())&&this.activeCapabilities.push(o.Capability.EIP155ReplayProtection):this.activeCapabilities.push(o.Capability.EIP155ReplayProtection));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){const r=(0,i.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,n,a,s,o,c,d,u,h]=e;return(0,i.validateNoLeadingZeroes)({nonce:r,gasPrice:n,gasLimit:a,value:o,v:d,r:u,s:h}),new l({nonce:r,gasPrice:n,gasLimit:a,to:s,value:o,data:c,v:d,r:u,s:h},t)}raw(){return[(0,i.bigIntToUnpaddedBuffer)(this.nonce),(0,i.bigIntToUnpaddedBuffer)(this.gasPrice),(0,i.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,i.bigIntToUnpaddedBuffer)(this.value),this.data,this.v!==undefined?(0,i.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,i.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,i.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){return t.from(n.RLP.encode((0,i.bufArrToArr)(this.raw())))}_getMessageToSign(){const e=[(0,i.bigIntToUnpaddedBuffer)(this.nonce),(0,i.bigIntToUnpaddedBuffer)(this.gasPrice),(0,i.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,i.bigIntToUnpaddedBuffer)(this.value),this.data];return this.supports(o.Capability.EIP155ReplayProtection)&&(e.push((0,i.bigIntToUnpaddedBuffer)(this.common.chainId())),e.push((0,i.unpadBuffer)((0,i.toBuffer)(0))),e.push((0,i.unpadBuffer)((0,i.toBuffer)(0)))),e}getMessageToSign(e=!0){const r=this._getMessageToSign();return e?t.from((0,a.keccak256)(n.RLP.encode((0,i.bufArrToArr)(r)))):r}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,a.keccak256)(n.RLP.encode((0,i.bufArrToArr)(this.raw()))))),this.cache.hash):t.from((0,a.keccak256)(n.RLP.encode((0,i.bufArrToArr)(this.raw()))))}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}const e=this._getMessageToSign();return t.from((0,a.keccak256)(n.RLP.encode((0,i.bufArrToArr)(e))))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r:r,s:n}=this;this._validateHighS();try{return(0,i.ecrecover)(e,t,(0,i.bigIntToUnpaddedBuffer)(r),(0,i.bigIntToUnpaddedBuffer)(n),this.supports(o.Capability.EIP155ReplayProtection)?this.common.chainId():undefined)}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){this.supports(o.Capability.EIP155ReplayProtection)&&(e+=this.common.chainId()*BigInt(2)+BigInt(8));const n={...this.txOptions,common:this.common};return l.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:e,r:(0,i.bufferToBigInt)(t),s:(0,i.bufferToBigInt)(r)},n)}toJSON(){return{nonce:(0,i.bigIntToHex)(this.nonce),gasPrice:(0,i.bigIntToHex)(this.gasPrice),gasLimit:(0,i.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,i.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),v:this.v!==undefined?(0,i.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,i.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,i.bigIntToHex)(this.s):undefined}}_validateTxV(e,t){let r;const n=e!==undefined?Number(e):undefined;if(n!==undefined&&n<37&&27!==n&&28!==n)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${n}`);if(n!==undefined&&0!==n&&(!t||t.gteHardfork("spuriousDragon"))&&27!==n&&28!==n)if(t){if(!c(BigInt(n),t.chainId()))throw new Error(`Incompatible EIP155-based V ${n} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(n-35)%2==0?35:36,r=BigInt(n-e)/BigInt(2)}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}r.Transaction=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/legacyTransaction.js"}],[1709,{"../../../../../../../../../is-buffer/index.js":3264,"./eip1559Transaction":1704,"./eip2930Transaction":1705,"./fromRpc":1706,"./legacyTransaction":1708,"@ethereumjs/util":1719},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=void 0;const n=e("@ethereumjs/util"),i=e("./eip1559Transaction"),a=e("./eip2930Transaction"),s=e("./fromRpc"),o=e("./legacyTransaction");class c{constructor(){}static fromTxData(e,t={}){if("type"in e&&e.type!==undefined){const r=Number((0,n.bufferToBigInt)((0,n.toBuffer)(e.type)));if(0===r)return o.Transaction.fromTxData(e,t);if(1===r)return a.AccessListEIP2930Transaction.fromTxData(e,t);if(2===r)return i.FeeMarketEIP1559Transaction.fromTxData(e,t);throw new Error(`Tx instantiation with type ${r} not supported`)}return o.Transaction.fromTxData(e,t)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return o.Transaction.fromSerializedTx(e,t);switch(e[0]){case 1:return a.AccessListEIP2930Transaction.fromSerializedTx(e,t);case 2:return i.FeeMarketEIP1559Transaction.fromSerializedTx(e,t);default:throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}static fromBlockBodyData(e,r={}){if(t.isBuffer(e))return this.fromSerializedData(e,r);if(Array.isArray(e))return o.Transaction.fromValuesArray(e,r);throw new Error("Cannot decode transaction: unknown type input")}static async fromEthersProvider(e,t,r){const i=(0,n.getProvider)(e),a=await(0,n.fetchFromProvider)(i,{method:"eth_getTransactionByHash",params:[t]});if(null===a)throw new Error("No data returned from provider");return c.fromRPCTx(a,r)}static async fromRPCTx(e,t={}){return c.fromTxData((0,s.normalizeTxParams)(e),t)}}r.TransactionFactory=c}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/transactionFactory.js"}],[171,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"provider")&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&delete e.NetworkController.provider;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-086.ts"}],[1710,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.isAccessList=r.isAccessListBuffer=r.Capability=void 0,function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(r.Capability||(r.Capability={})),r.isAccessListBuffer=n,r.isAccessList=function(e){return!n(e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/types.js"}],[1711,{"./types":1710,"@ethereumjs/util":1719},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessLists=r.checkMaxInitCodeSize=void 0;const n=e("@ethereumjs/util"),i=e("./types");r.checkMaxInitCodeSize=function(e,t){const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)};r.AccessLists=class{static getAccessListData(e){let t,r;if((0,i.isAccessList)(e)){t=e;const i=[];for(let t=0;t<e.length;t++){const r=e[t],a=(0,n.toBuffer)(r.address),s=[];for(let e=0;e<r.storageKeys.length;e++)s.push((0,n.toBuffer)(r.storageKeys[e]));i.push([a,s])}r=i}else{r=e??[];const i=[];for(let e=0;e<r.length;e++){const t=r[e],a=(0,n.bufferToHex)(t[0]),s=[];for(let e=0;e<t[1].length;e++)s.push((0,n.bufferToHex)(t[1][e]));const o={address:a,storageKeys:s};i.push(o)}t=i}return{AccessListJSON:t,accessList:r}}static verifyAccessList(e){for(let t=0;t<e.length;t++){const r=e[t],n=r[0],i=r[1];if(r[2]!==undefined)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==n.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<i.length;e++)if(32!==i[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(e){const t=[];for(let r=0;r<e.length;r++){const i=e[r],a={address:"0x"+(0,n.setLengthLeft)(i[0],20).toString("hex"),storageKeys:[]},s=i[1];for(let e=0;e<s.length;e++){const t=s[e];a.storageKeys.push("0x"+(0,n.setLengthLeft)(t,32).toString("hex"))}t.push(a)}return t}static getDataFeeEIP2930(e,t){const r=t.param("gasPrices","accessListStorageKeyCost"),n=t.param("gasPrices","accessListAddressCost");let i=0;for(let t=0;t<e.length;t++){i+=e[t][1].length}return e.length*Number(n)+i*Number(r)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/util.js"}]],[],{});