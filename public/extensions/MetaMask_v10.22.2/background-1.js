LavaPack.loadBundle([[141,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:11,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=11;try{const e=function(e){const t=e;return delete t.TOSHash,delete t.isDisclaimerConfirmed,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #11${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/011.js"}],[1415,{"./ledger-bridge":1416,"./ledger-iframe-bridge":1417,"./ledger-keyring":1418},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./ledger-keyring"),r),s(e("./ledger-iframe-bridge"),r),s(e("./ledger-bridge"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.js"}],[1416,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-bridge.js"}],[1417,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},h=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerIframeBridge=r.IFrameMessageAction=void 0;var f;!function(e){e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(f=r.IFrameMessageAction||(r.IFrameMessageAction={}));r.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){n.add(this),this.iframeLoaded=!1,s.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,this.messageCallbacks={},d(this,n,"m",l).call(this,e),h(this,s,{bridgeUrl:null==e?void 0:e.bridgeUrl},"f")}async init(){await d(this,n,"m",o).call(this,d(this,s,"f").bridgeUrl),this.eventListener=d(this,n,"m",c).bind(this,d(this,s,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return d(this,s,"f")}async setOptions(e){var t;d(this,n,"m",l).call(this,e),(null===(t=d(this,s,"f"))||void 0===t?void 0:t.bridgeUrl)!==e.bridgeUrl&&(d(this,s,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){return new Promise(((e,t)=>{d(this,n,"m",u).call(this,{action:f.LedgerMakeApp},(r=>{"success"in r&&r.success?e(!0):t("error"in r?r.error:new Error("Unknown error occurred"))}))}))}async updateTransportMethod(e){return new Promise(((t,r)=>{if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");d(this,n,"m",u).call(this,{action:f.LedgerUpdateTransport,params:{transportType:e}},(e=>"success"in e&&e.success?t(!0):r(new Error("Ledger transport could not be updated"))))}))}async getPublicKey(e){return d(this,n,"m",i).call(this,f.LedgerUnlock,e)}async deviceSignTransaction(e){return d(this,n,"m",i).call(this,f.LedgerSignTransaction,e)}async deviceSignMessage(e){return d(this,n,"m",i).call(this,f.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return d(this,n,"m",i).call(this,f.LedgerSignTypedData,e)}},s=new WeakMap,n=new WeakSet,i=async function(...[e,t]){return new Promise(((r,s)=>{d(this,n,"m",u).call(this,{action:e,params:t},(e=>{if("payload"in e&&e.payload){if("success"in e&&e.success)return r(e.payload);if("error"in e.payload)return s(e.payload.error)}return s(new Error("Unknown error occurred"))}))}))},o=async function(e){return new Promise((t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)}))},a=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},c=function(e,t){if(t.origin===d(this,n,"m",a).call(this,e)&&t.data){const e=this.messageCallbacks[t.data.messageId];e?e(t.data):t.data.action===f.LedgerConnectionChange&&(this.isDeviceConnected=t.data.payload.connected)}},u=function(e,t){this.currentMessageId+=1;const r=Object.assign(Object.assign({},e),{messageId:this.currentMessageId,target:"LEDGER-IFRAME"});if(this.messageCallbacks[this.currentMessageId]=t,!this.iframeLoaded||!this.iframe||!this.iframe.contentWindow)throw new Error("The iframe is not loaded yet");this.iframe.contentWindow.postMessage(r,"*")},l=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.js"}],[1418,{"@ethereumjs/rlp":451,"@ethereumjs/tx":456,"@ethereumjs/util":468,"@metamask/eth-sig-util":1421,buffer:3645,events:3952,hdkey:4261},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),y=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),v=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return y(t,e),t},_=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerKeyring=void 0;const w=e("@ethereumjs/rlp"),k=e("@ethereumjs/tx"),S=v(e("@ethereumjs/util")),E=e("@metamask/eth-sig-util"),T=e("buffer"),j=e("events"),C=b(e("hdkey")),I="m",P=`${I}/44'/60'/0'`,A="Ledger Hardware";var R;!function(e){e.Ropsten="http://api-ropsten.etherscan.io",e.Kovan="http://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(R||(R={}));class M extends j.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=A,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new C.default,this.hdPath=P,this.paths={},this.network=R.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e={}){var t,r,i,o;this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:P,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.accountDetails=null!==(i=e.accountDetails)&&void 0!==i?i:{},e.accountDetails||_(this,n,"m",s).call(this,e),this.implementFullBIP44=null!==(o=e.implementFullBIP44)&&void 0!==o&&o;const a=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter((e=>a.has(S.toChecksumAddress(e)))),Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount="number"==typeof e?e:parseInt(e,10)}setHdPath(e){this.hdPath!==e&&(this.hdk=new C.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return"already unlocked";const r=e?_(this,n,"m",f).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:r})}catch(e){throw e instanceof Error?e:new Error("Unknown error")}return t&&s.chainCode&&(this.hdk.publicKey=T.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=T.Buffer.from(s.chainCode,"hex")),s.address}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((async r=>{const s=this.unlockedAccount,i=s+e;for(let e=s;e<i;e++){const t=_(this,n,"m",d).call(this,e);let r;r=_(this,n,"m",h).call(this)?await this.unlock(t):_(this,n,"m",u).call(this,I,e),this.accountDetails[S.toChecksumAddress(r)]={bip44:_(this,n,"m",h).call(this),hdPath:t},this.accounts.includes(r)||(this.accounts=[...this.accounts,r]),this.page=0}t(this.accounts.slice())})).catch(r)}))}async getFirstPage(){return this.page=0,_(this,n,"m",o).call(this,1)}async getNextPage(){return _(this,n,"m",o).call(this,1)}async getPreviousPage(){return _(this,n,"m",o).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()));if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[S.toChecksumAddress(e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let r;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=S.bufferToHex(t.getChainId()),t.r="0x00",t.s="0x00",r=t.serialize().toString("hex"),_(this,n,"m",i).call(this,e,r,(e=>(t.v=T.Buffer.from(e.v,"hex"),t.r=T.Buffer.from(e.r,"hex"),t.s=T.Buffer.from(e.s,"hex"),t)));const s=t.getMessageToSign(!1);return r=T.Buffer.isBuffer(s)?s.toString("hex"):T.Buffer.from(w.RLP.encode(s)).toString("hex"),_(this,n,"m",i).call(this,e,r,(e=>{const r=t.toJSON();return r.type=t.type,r.v=S.addHexPrefix(e.v),r.r=S.addHexPrefix(e.r),r.s=S.addHexPrefix(e.s),k.TransactionFactory.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: Unknown error while signing message");let n;try{n=await this.bridge.deviceSignMessage({hdPath:r,message:S.stripHexPrefix(t)})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let s=parseInt(String(n.v),10).toString(16);s.length<2&&(s=`0${s}`);const i=`0x${n.r}${n.s}${s}`,o=(0,E.recoverPersonalSignature)({data:t,signature:i});if(S.toChecksumAddress(o)!==S.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=S.toChecksumAddress(e),r=this.accountDetails[t];if(!r)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:n}=r;if((await this.unlock(n,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return n}async signTypedData(e,t,r={}){if(!("V4"===r.version))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:n,types:s,primaryType:i,message:o}=E.TypedDataUtils.sanitizeData(t),a=E.TypedDataUtils.hashStruct("EIP712Domain",n,s,E.SignTypedDataVersion.V4).toString("hex"),c=E.TypedDataUtils.hashStruct(i.toString(),o,s,E.SignTypedDataVersion.V4).toString("hex"),u=await this.unlockAccountByAddress(e);if(!u)throw new Error("Ledger: Unknown error while signing message");let l;try{l=await this.bridge.deviceSignTypedData({hdPath:u,domainSeparatorHex:a,hashStructMessageHex:c})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let d=parseInt(String(l.v),10).toString(16);d.length<2&&(d=`0${d}`);const h=`0x${l.r}${l.s}${d}`,f=(0,E.recoverTypedSignature)({data:t,signature:h,version:E.SignTypedDataVersion.V4});if(S.toChecksumAddress(f)!==S.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return h}exportAccount(){throw new Error("Not supported on this device")}forgetDevice(){this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new C.default}}r.LedgerKeyring=M,n=new WeakSet,s=function(e){if(_(this,n,"m",h).call(this)&&e.accountIndexes)for(const[t,r]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:_(this,n,"m",d).call(this,r)};const t=new Set(Object.keys(this.accountDetails));_(this,n,"m",h).call(this)||this.accounts.forEach((e=>{try{const r=S.toChecksumAddress(e);t.has(r)||(this.accountDetails[r]={bip44:!1,hdPath:_(this,n,"m",l).call(this,e)})}catch(t){console.log(`failed to migrate account ${e}`)}}))},i=async function(e,t,r){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: Unknown error while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:t,hdPath:n})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing transaction")}const i=r(s);if(i.verifySignature())return i;throw new Error("Ledger: The transaction signature is not valid")},o=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let s;return await this.unlock(),s=_(this,n,"m",h).call(this)?await _(this,n,"m",a).call(this,t,r):_(this,n,"m",c).call(this,t,r),s},a=async function(e,t){const r=[];for(let s=e;s<t;s++){const e=_(this,n,"m",d).call(this,s),t=await this.unlock(e),i=!this.implementFullBIP44||await _(this,n,"m",p).call(this,t);if(r.push({address:t,balance:null,index:s}),!i)break}return r},c=function(e,t){const r=[];for(let s=e;s<t;s++){const e=_(this,n,"m",u).call(this,I,s);r.push({address:e,balance:null,index:s}),this.paths[S.toChecksumAddress(e)]=s}return r},u=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=S.publicToAddress(r.publicKey,!0).toString("hex");return S.toChecksumAddress(`0x${n}`)},l=function(e){const t=S.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===_(this,n,"m",u).call(this,I,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return _(this,n,"m",d).call(this,r)},d=function(e){return _(this,n,"m",h).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},h=function(){return"m/44'/60'/0'/0/0"===this.hdPath},f=function(e){return e.toString().replace("m/","")},p=async function(e){const t=_(this,n,"m",m).call(this),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await r.json();return"0"!==s.status&&s.result.length>0},m=function(){return this.network},M.type=A}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.js"}],[142,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:12,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=12;try{const e=function(e){const t=e;return t.NoticeController.noticesList.forEach((e=>{e.read&&(e.body="")})),t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #12${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/012.js"}],[1427,{"./util":1435},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaseInsensitiveMap=void 0;const n=e("./util");class s extends Map{static fromObject(e){return new s(Object.entries(e))}toObject(){return Object.fromEntries(this.entries())}get(e){return super.get(e.toLowerCase())}getOrThrow(e,t="Key"){return this.get(e)??(0,n.throwError)(`${t} '${e}' not found`)}has(e){return super.has(e.toLowerCase())}set(e,t){return super.set(e.toLowerCase(),t)}delete(e){return super.delete(e.toLowerCase())}}r.CaseInsensitiveMap=s}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/CaseInsensitiveMap.js"}],[1428,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeferredPromise=void 0;r.DeferredPromise=class{constructor(){if(this.resolve=undefined,this.reject=undefined,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),!this.resolve||!this.reject)throw new Error("Promise constructor failed")}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/DeferredPromise.js"}],[1429,{"@metamask/keyring-api":1591},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapControllerClient=void 0;const l=e("@metamask/keyring-api");class d{constructor(e,t,r,a){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c(this,i,e,"f"),c(this,n,t,"f"),c(this,s,r,"f"),c(this,o,a,"f")}async send(e){return u(this,i,"f").handleRequest({snapId:u(this,n,"f"),origin:u(this,s,"f"),handler:u(this,o,"f"),request:e})}}n=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap;class h extends l.KeyringClient{constructor({controller:e,snapId:t="undefined",origin:r="metamask",handler:n="onKeyringRequest"}){super(new d(e,t,r,n)),a.set(this,void 0),c(this,a,e,"f")}withSnapId(e){return new h({controller:u(this,a,"f"),snapId:e})}getController(){return u(this,a,"f")}}r.KeyringSnapControllerClient=h,a=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/KeyringSnapControllerClient.js"}],[143,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:13,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=13;try{const e=function(e){const t=e,{config:r}=t;r&&r.provider&&"testnet"===r.provider.type&&(t.config.provider.type="ropsten");return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #13${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/013.js"}],[1430,{"./CaseInsensitiveMap":1427},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapIdMap=r.InvalidSnapIdError=void 0;const o=e("./CaseInsensitiveMap");class a extends Error{constructor(e,t){super(`Snap "${e}" is not allowed to set "${t}"`),this.name="InvalidSnapIdError",this.snapId=e,this.key=t}}r.InvalidSnapIdError=a;class c{constructor(e){n.set(this,void 0),s(this,n,new o.CaseInsensitiveMap(e),"f")}toObject(){return i(this,n,"f").toObject()}static fromObject(e){return new c(Object.entries(e))}get(e,t){const r=i(this,n,"f").get(t);return r?.snapId===e?r:undefined}has(e,t){return this.get(e,t)!==undefined}delete(e,t){return this.has(e,t)&&i(this,n,"f").delete(t)}set(e,t){if(i(this,n,"f").has(e)&&!this.has(t.snapId,e))throw new a(t.snapId,e);return i(this,n,"f").set(e,t),this}values(){return i(this,n,"f").values()}get size(){return i(this,n,"f").size}}r.SnapIdMap=c,n=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapIdMap.js"}],[1431,{"./DeferredPromise":1428,"./KeyringSnapControllerClient":1429,"./SnapIdMap":1430,"./logger":1433,"./types":1434,"./util":1435,"@ethereumjs/tx":456,"@metamask/eth-sig-util":1421,"@metamask/keyring-api":1591,"@metamask/superstruct":2695,"@metamask/utils":2850,events:3952,uuid:1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g,y,v,_,b,w,k,S,E=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},T=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapKeyring=r.SNAP_KEYRING_TYPE=void 0;const j=e("@ethereumjs/tx"),C=e("@metamask/eth-sig-util"),I=e("@metamask/keyring-api"),P=e("@metamask/superstruct"),A=e("@metamask/utils"),R=e("events"),M=e("uuid"),O=e("./DeferredPromise"),x=e("./KeyringSnapControllerClient"),N=e("./logger"),B=e("./SnapIdMap"),D=e("./types"),$=e("./util");r.SNAP_KEYRING_TYPE="Snap Keyring";class L extends R.EventEmitter{constructor(e,t){super(),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),this.type=L.type,E(this,s,new x.KeyringSnapControllerClient({controller:e}),"f"),E(this,o,new B.SnapIdMap,"f"),E(this,i,new B.SnapIdMap,"f"),E(this,a,t,"f")}async handleKeyringSnapMessage(e,t){switch((0,P.assert)(t,D.SnapMessageStruct),t.method){case`${I.KeyringEvent.AccountCreated}`:return T(this,n,"m",c).call(this,e,t);case`${I.KeyringEvent.AccountUpdated}`:return T(this,n,"m",u).call(this,e,t);case`${I.KeyringEvent.AccountDeleted}`:return T(this,n,"m",l).call(this,e,t);case`${I.KeyringEvent.RequestApproved}`:return T(this,n,"m",d).call(this,e,t);case`${I.KeyringEvent.RequestRejected}`:return T(this,n,"m",h).call(this,e,t);default:throw new Error(`Method not supported: ${t.method}`)}}async serialize(){return{accounts:T(this,i,"f").toObject()}}async deserialize(e){e!==undefined&&E(this,i,B.SnapIdMap.fromObject(e.accounts),"f")}async getAccounts(){return(0,$.unique)([...T(this,i,"f").values()].map((({account:e})=>e.address.toLowerCase())))}async getAccountsBySnapId(e){return(0,$.unique)([...T(this,i,"f").values()].filter((({snapId:t})=>t===e)).map((({account:e})=>e.address.toLowerCase())))}async signTransaction(e,t,r={}){const s=t.common.chainId(),i=(0,$.toJson)({...t.toJSON(),from:e,type:`0x${t.type.toString(16)}`,chainId:(0,A.bigIntToHex)(s)}),o=await T(this,n,"m",f).call(this,{address:e,method:I.EthMethod.SignTransaction,params:[i],chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,`${s}`)}),a=(0,P.mask)(o,(0,P.object)({r:(0,P.string)(),s:(0,P.string)(),v:(0,P.string)()}));return j.TransactionFactory.fromTxData({...i,r:a.r,s:a.s,v:a.v})}async signTypedData(e,t,r={version:C.SignTypedDataVersion.V1}){const s={[C.SignTypedDataVersion.V1]:I.EthMethod.SignTypedDataV1,[C.SignTypedDataVersion.V3]:I.EthMethod.SignTypedDataV3,[C.SignTypedDataVersion.V4]:I.EthMethod.SignTypedDataV4}[r.version]||I.EthMethod.SignTypedDataV1,i=t.domain?.chainId;return(0,$.strictMask)(await T(this,n,"m",f).call(this,{address:e,method:s,params:(0,$.toJson)([e,t]),...i===undefined?{}:{chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,`${i}`)}}),I.EthBytesStruct)}async signMessage(e,t){return(0,$.strictMask)(await T(this,n,"m",f).call(this,{address:e,method:I.EthMethod.Sign,params:(0,$.toJson)([e,t])}),I.EthBytesStruct)}async signPersonalMessage(e,t){return(0,$.strictMask)(await T(this,n,"m",f).call(this,{address:e,method:I.EthMethod.PersonalSign,params:(0,$.toJson)([t,e])}),I.EthBytesStruct)}async prepareUserOperation(e,t,r){return(0,$.strictMask)(await T(this,n,"m",f).call(this,{address:e,method:I.EthMethod.PrepareUserOperation,params:(0,$.toJson)(t),noPending:!0,chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,r.chainId)}),I.EthBaseUserOperationStruct)}async patchUserOperation(e,t,r){return(0,$.strictMask)(await T(this,n,"m",f).call(this,{address:e,method:I.EthMethod.PatchUserOperation,params:(0,$.toJson)([t]),noPending:!0,chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,r.chainId)}),I.EthUserOperationPatchStruct)}async signUserOperation(e,t,r){return(0,$.strictMask)(await T(this,n,"m",f).call(this,{address:e,method:I.EthMethod.SignUserOperation,params:(0,$.toJson)([t]),chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,r.chainId)}),I.EthBytesStruct)}exportAccount(e){throw new Error("Exporting accounts from snaps is not supported.")}async removeAccount(e){const{account:t,snapId:r}=T(this,n,"m",w).call(this,e);T(this,i,"f").delete(r,t.id);try{await T(this,s,"f").withSnapId(r).deleteAccount(t.id)}catch(t){console.error(`Account '${e}' may not have been removed from snap '${r}':`,t)}}getAccountByAddress(e){return this.listAccounts().find((({address:t})=>(0,$.equalsIgnoreCase)(t,e)))}listAccounts(){return[...T(this,i,"f").values()].map((({account:e,snapId:t})=>{const r=T(this,n,"m",k).call(this,t);return{...e,address:e.address.toLowerCase(),metadata:{name:"",importTime:0,keyring:{type:this.type},...r!==undefined&&{snap:r}}}}))}}r.SnapKeyring=L,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,n=new WeakSet,c=async function(e,t){(0,P.assert)(t,I.AccountCreatedEventStruct);const{account:r,accountNameSuggestion:n,displayConfirmation:s}=t.params;if(await T(this,a,"f").addressExists(r.address.toLowerCase()))throw new Error(`Account address '${r.address}' already exists`);if(T(this,i,"f").has(e,r.id))throw new Error(`Account '${r.id}' already exists`);return await T(this,a,"f").addAccount(r.address.toLowerCase(),e,(async t=>{t&&(T(this,i,"f").set(r.id,{account:r,snapId:e}),await T(this,a,"f").saveState())}),n,s),null},u=async function(e,t){(0,P.assert)(t,I.AccountUpdatedEventStruct);const{account:r}=t.params,{account:n}=T(this,i,"f").get(e,r.id)??(0,$.throwError)(`Account '${r.id}' not found`);if(!(0,$.equalsIgnoreCase)(n.address,r.address))throw new Error(`Cannot change address of account '${r.id}'`);return T(this,i,"f").set(r.id,{account:r,snapId:e}),await T(this,a,"f").saveState(),null},l=async function(e,t){(0,P.assert)(t,I.AccountDeletedEventStruct);const{id:r}=t.params,n=T(this,i,"f").get(e,r);if(n===undefined)return null;const{account:{address:s}}=n;return await T(this,a,"f").removeAccount(s.toLowerCase(),e,(async e=>{e&&await T(this,a,"f").saveState()})),null},d=async function(e,t){(0,P.assert)(t,I.RequestApprovedEventStruct);const{id:r,result:n}=t.params,{promise:s}=T(this,o,"f").get(e,r)??(0,$.throwError)(`Request '${r}' not found`);return T(this,o,"f").delete(e,r),s.resolve(n),null},h=async function(e,t){(0,P.assert)(t,I.RequestRejectedEventStruct);const{id:r}=t.params,{promise:n}=T(this,o,"f").get(e,r)??(0,$.throwError)(`Request '${r}' not found`);return T(this,o,"f").delete(e,r),n.reject(new Error("Request rejected by user or snap.")),null},f=async function({address:e,method:t,params:r,chainId:s="",noPending:i=!1}){const{account:o,snapId:a}=T(this,n,"m",w).call(this,e);if(!T(this,n,"m",p).call(this,o,t))throw new Error(`Method '${t}' not supported for account ${o.address}`);const c=(0,M.v4)(),u=T(this,n,"m",m).call(this,c,a),l=await T(this,n,"m",g).call(this,{snapId:a,requestId:c,account:o,method:t,params:r,chainId:s});if(i&&l.pending)throw new Error(`Request '${c}' to snap '${a}' is pending and noPending is true.`);return l.pending?((l.redirect?.message||l.redirect?.url)&&await T(this,n,"m",v).call(this,l.redirect,a),u.promise):T(this,n,"m",y).call(this,l,c,a)},p=function(e,t){return e.methods.includes(t)},m=function(e,t){const r=new O.DeferredPromise;return T(this,o,"f").set(e,{promise:r,snapId:t}),r},g=async function({snapId:e,requestId:t,account:r,method:n,params:i,chainId:a}){try{const o={id:t,scope:a,account:r.id,request:{method:n,...i!==undefined&&{params:i}}};return(0,N.projectLogger)("Submit Snap request: ",o),await T(this,s,"f").withSnapId(e).submitRequest(o)}catch(r){throw(0,N.projectLogger)("Snap Request failed: ",{requestId:t}),T(this,o,"f").delete(e,t),r}},y=function(e,t,r){return T(this,o,"f").delete(r,t),e.result},v=async function(e,t){const{message:r="",url:s=""}=e,i=T(this,n,"m",_).call(this,s);i&&T(this,n,"m",b).call(this,i,t),await T(this,a,"f").redirectUser(t,i,r)},_=function(e){return e?(0,$.sanitizeUrl)(e):e},b=function(e,t){const{origin:r}=new URL(e),i=T(this,s,"f").getController().get(t);if(!i)throw new Error(`Snap '${t}' not found.`);if(!T(this,n,"m",S).call(this,i).includes(r))throw new Error(`Redirect URL domain '${r}' is not an allowed origin by snap '${t}'`)},w=function(e){return[...T(this,i,"f").values()].find((({account:t})=>(0,$.equalsIgnoreCase)(t.address,e)))??(0,$.throwError)(`Account '${e}' not found`)},k=function(e){const t=T(this,s,"f").getController().get(e);return t?{id:e,name:t.manifest.proposedName,enabled:t.enabled}:undefined},S=function(e){return e.manifest.initialPermissions["endowment:keyring"]?.allowedOrigins??[]},L.type=r.SNAP_KEYRING_TYPE}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapKeyring.js"}],[1432,{"./KeyringSnapControllerClient":1429,"./SnapKeyring":1431,"./types":1434},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./types"),r),s(e("./SnapKeyring"),r),s(e("./KeyringSnapControllerClient"),r)}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/index.js"}],[1433,{"@metamask/utils":2850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-snap-keyring")}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/logger.js"}],[1434,{"@metamask/superstruct":2695,"@metamask/utils":2850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapMessageStruct=void 0;const n=e("@metamask/superstruct"),s=e("@metamask/utils");r.SnapMessageStruct=(0,n.object)({method:(0,n.string)(),params:(0,n.optional)((0,n.union)([(0,n.array)(s.JsonStruct),(0,n.record)((0,n.string)(),s.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/types.js"}],[1435,{"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitizeUrl=r.equalsIgnoreCase=r.throwError=r.ensureDefined=r.toJson=r.unique=r.strictMask=void 0;const n=e("@metamask/superstruct");r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e},r.unique=function(e){return[...new Set(e)]},r.toJson=function(e){return JSON.parse(JSON.stringify(e))},r.ensureDefined=function(e){if(e===undefined)throw new Error("Argument is undefined")},r.throwError=function(e){throw new Error(e)},r.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()},r.sanitizeUrl=function(e){return new URL(e).toString()}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/util.js"}],[1436,{"./nil.js":1439,"./parse.js":1440,"./stringify.js":1444,"./v1.js":1445,"./v3.js":1446,"./v4.js":1448,"./v5.js":1449,"./validate.js":1450,"./version.js":1451},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=h(e("./v1.js")),s=h(e("./v3.js")),i=h(e("./v4.js")),o=h(e("./v5.js")),a=h(e("./nil.js")),c=h(e("./version.js")),u=h(e("./validate.js")),l=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/index.js"}],[1437,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function s(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,n,i,o){return s((a=s(s(t,e),s(n,o)))<<(c=i)|a>>>32-c,r);var a,c}function o(e,t,r,n,s,o,a){return i(t&r|~t&n,e,t,s,o,a)}function a(e,t,r,n,s,o,a){return i(t&n|r&~n,e,t,s,o,a)}function c(e,t,r,n,s,o,a){return i(t^r^n,e,t,s,o,a)}function u(e,t,r,n,s,o,a){return i(r^(t|~n),e,t,s,o,a)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let s=0;s<r;s+=8){const r=e[s>>5]>>>s%32&255,i=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,i=-271733879,l=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=r,h=i,f=l,p=d;r=o(r,i,l,d,e[t],7,-680876936),d=o(d,r,i,l,e[t+1],12,-389564586),l=o(l,d,r,i,e[t+2],17,606105819),i=o(i,l,d,r,e[t+3],22,-1044525330),r=o(r,i,l,d,e[t+4],7,-176418897),d=o(d,r,i,l,e[t+5],12,1200080426),l=o(l,d,r,i,e[t+6],17,-1473231341),i=o(i,l,d,r,e[t+7],22,-45705983),r=o(r,i,l,d,e[t+8],7,1770035416),d=o(d,r,i,l,e[t+9],12,-1958414417),l=o(l,d,r,i,e[t+10],17,-42063),i=o(i,l,d,r,e[t+11],22,-1990404162),r=o(r,i,l,d,e[t+12],7,1804603682),d=o(d,r,i,l,e[t+13],12,-40341101),l=o(l,d,r,i,e[t+14],17,-1502002290),i=o(i,l,d,r,e[t+15],22,1236535329),r=a(r,i,l,d,e[t+1],5,-165796510),d=a(d,r,i,l,e[t+6],9,-1069501632),l=a(l,d,r,i,e[t+11],14,643717713),i=a(i,l,d,r,e[t],20,-373897302),r=a(r,i,l,d,e[t+5],5,-701558691),d=a(d,r,i,l,e[t+10],9,38016083),l=a(l,d,r,i,e[t+15],14,-660478335),i=a(i,l,d,r,e[t+4],20,-405537848),r=a(r,i,l,d,e[t+9],5,568446438),d=a(d,r,i,l,e[t+14],9,-1019803690),l=a(l,d,r,i,e[t+3],14,-187363961),i=a(i,l,d,r,e[t+8],20,1163531501),r=a(r,i,l,d,e[t+13],5,-1444681467),d=a(d,r,i,l,e[t+2],9,-51403784),l=a(l,d,r,i,e[t+7],14,1735328473),i=a(i,l,d,r,e[t+12],20,-1926607734),r=c(r,i,l,d,e[t+5],4,-378558),d=c(d,r,i,l,e[t+8],11,-2022574463),l=c(l,d,r,i,e[t+11],16,1839030562),i=c(i,l,d,r,e[t+14],23,-35309556),r=c(r,i,l,d,e[t+1],4,-1530992060),d=c(d,r,i,l,e[t+4],11,1272893353),l=c(l,d,r,i,e[t+7],16,-155497632),i=c(i,l,d,r,e[t+10],23,-1094730640),r=c(r,i,l,d,e[t+13],4,681279174),d=c(d,r,i,l,e[t],11,-358537222),l=c(l,d,r,i,e[t+3],16,-722521979),i=c(i,l,d,r,e[t+6],23,76029189),r=c(r,i,l,d,e[t+9],4,-640364487),d=c(d,r,i,l,e[t+12],11,-421815835),l=c(l,d,r,i,e[t+15],16,530742520),i=c(i,l,d,r,e[t+2],23,-995338651),r=u(r,i,l,d,e[t],6,-198630844),d=u(d,r,i,l,e[t+7],10,1126891415),l=u(l,d,r,i,e[t+14],15,-1416354905),i=u(i,l,d,r,e[t+5],21,-57434055),r=u(r,i,l,d,e[t+12],6,1700485571),d=u(d,r,i,l,e[t+3],10,-1894986606),l=u(l,d,r,i,e[t+10],15,-1051523),i=u(i,l,d,r,e[t+1],21,-2054922799),r=u(r,i,l,d,e[t+8],6,1873313359),d=u(d,r,i,l,e[t+15],10,-30611744),l=u(l,d,r,i,e[t+6],15,-1560198380),i=u(i,l,d,r,e[t+13],21,1309151649),r=u(r,i,l,d,e[t+4],6,-145523070),d=u(d,r,i,l,e[t+11],10,-1120210379),l=u(l,d,r,i,e[t+2],15,718787259),i=u(i,l,d,r,e[t+9],21,-343485551),r=s(r,n),i=s(i,h),l=s(l,f),d=s(d,p)}return[r,i,l,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/md5-browser.js"}],[1438,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/native-browser.js"}],[1439,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/nil.js"}],[144,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:14,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=14;try{const e=function(e){const t=e;return t.NetworkController={},t.NetworkController.provider=t.config.provider,delete t.config.provider,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #14${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/014.js"}],[1440,{"./validate.js":1450},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/parse.js"}],[1441,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/regex.js"}],[1442,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)};const s=new Uint8Array(16)}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/rng-browser.js"}],[1443,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function s(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,o=Math.ceil(i/16),a=new Array(o);for(let t=0;t<o;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=a[e][t];for(let e=16;e<80;++e)i[e]=s(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let o=r[0],c=r[1],u=r[2],l=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),a=s(o,5)+n(r,c,u,l)+d+t[r]+i[e]>>>0;d=l,l=u,u=s(c,30)>>>0,c=o,o=a}r[0]=r[0]+o>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/sha1-browser.js"}],[1444,{"./validate.js":1450},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=o;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function o(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}var a=function(e,t=0){const r=o(e,t);if(!(0,s.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/stringify.js"}],[1445,{"./rng.js":1442,"./stringify.js":1444},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./rng.js"))&&n.__esModule?n:{default:n},i=e("./stringify.js");let o,a,c=0,u=0;var l=function(e,t,r){let n=t&&r||0;const l=t||new Array(16);let d=(e=e||{}).node||o,h=e.clockseq!==undefined?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||s.default)();null==d&&(d=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let f=e.msecs!==undefined?e.msecs:Date.now(),p=e.nsecs!==undefined?e.nsecs:u+1;const m=f-c+(p-u)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||f>c)&&e.nsecs===undefined&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=p,a=h,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;l[n++]=g>>>24&255,l[n++]=g>>>16&255,l[n++]=g>>>8&255,l[n++]=255&g;const y=f/4294967296*1e4&268435455;l[n++]=y>>>8&255,l[n++]=255&y,l[n++]=y>>>24&15|16,l[n++]=y>>>16&255,l[n++]=h>>>8|128,l[n++]=255&h;for(let e=0;e<6;++e)l[n+e]=d[e];return t||(0,i.unsafeStringify)(l)};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v1.js"}],[1446,{"./md5.js":1437,"./v35.js":1447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v3",48,s.default);r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v3.js"}],[1447,{"./parse.js":1440,"./stringify.js":1444},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,o,a){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,i.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,o){a=a||0;for(let e=0;e<16;++e)o[a+e]=u[e];return o}return(0,s.unsafeStringify)(u)}try{n.name=e}catch(e){}return n.DNS=o,n.URL=a,n};var n,s=e("./stringify.js"),i=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v35.js"}],[1448,{"./native.js":1438,"./rng.js":1442,"./stringify.js":1444},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./native.js")),s=o(e("./rng.js")),i=e("./stringify.js");function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const o=(e=e||{}).random||(e.rng||s.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,i.unsafeStringify)(o)};r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v4.js"}],[1449,{"./sha1.js":1443,"./v35.js":1447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v5",80,s.default);r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v5.js"}],[145,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:15,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=r;t.TransactionController.transactions=e.map((e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=n.TransactionStatus.failed),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/015.js"}],[1450,{"./regex.js":1441},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var i=function(e){return"string"==typeof e&&s.default.test(e)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/validate.js"}],[1451,{"./validate.js":1450},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/version.js"}],[146,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:16,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=n.TransactionStatus.submitted,delete e.err),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/016.js"}],[147,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:17,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(!e.status===n.TransactionStatus.failed||e.retryCount>0&&e.retryCount<2&&(e.status=n.TransactionStatus.submitted,delete e.err),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/017.js"}],[148,{"fast-json-patch":3986,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("fast-json-patch"))&&n.__esModule?n:{default:n},i=e("lodash");r.default={version:18,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=function(e){const t={...e};return delete t.history,(0,i.cloneDeep)(t)}(e);return e.history=[t],e}const t=(r=e.history,r.map(((e,t)=>0===t?e:function(e,t,r){const n=s.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n}(r[t-1],e)))).filter((e=>!Array.isArray(e)||e.length>0));var r;return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[1482,{"./trezor-bridge":1483,"./trezor-connect-bridge":1484,"./trezor-keyring":1485},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./trezor-keyring"),r),s(e("./trezor-bridge"),r),s(e("./trezor-connect-bridge"),r)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.js"}],[1483,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-bridge.js"}],[1484,{"@trezor/connect-web":3136},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorConnectBridge=void 0;const o=i(e("@trezor/connect-web"));r.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){o.default.on(o.DEVICE_EVENT,(e=>{var t;e.type===o.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)})),this.trezorConnectInitiated||(await o.default.init(e),this.trezorConnectInitiated=!0)}dispose(){return o.default.dispose(),Promise.resolve()}getPublicKey(e){return o.default.getPublicKey(e)}ethereumSignTransaction(e){return o.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return o.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return o.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.js"}],[1485,{"@ethereumjs/tx":456,"@ethereumjs/util":468,"@trezor/connect-plugin-ethereum":3128,buffer:3645,events:3952,hdkey:4261},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,s,i,o,a,c,u=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&u(t,e,r);return l(t,e),t},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorKeyring=r.TREZOR_CONNECT_MANIFEST=void 0;const p=e("events"),m=d(e("@ethereumjs/util")),g=f(e("hdkey")),y=e("@ethereumjs/tx"),v=e("@trezor/connect-plugin-ethereum"),_="m/44'/60'/0'/0",b={[_]:!0,"m/44'/60'/0'":!0,"m/44'/1'/0'/0":!0},w="Trezor Hardware",k=1e3;async function S(e){return new Promise((t=>setTimeout(t,e)))}function E(e){return"function"==typeof e.getChainId}r.TREZOR_CONNECT_MANIFEST={email:"support@metamask.io",appUrl:"https://metamask.io"};class T extends p.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=w,this.accounts=[],this.hdk=new g.default,this.hdPath=_,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}init(){return this.bridge.init({manifest:r.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e={}){var t,r,n,s;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:_,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.page=null!==(n=e.page)&&void 0!==n?n:0,this.perPage=null!==(s=e.perPage)&&void 0!==s?s:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise(((e,r)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then((n=>{var s;n.success?(this.hdk.publicKey=t.from(n.payload.publicKey,"hex"),this.hdk.chainCode=t.from(n.payload.chainCode,"hex"),e("just unlocked")):r(new Error((null===(s=n.payload)||void 0===s?void 0:s.error)||"Unknown error"))})).catch((e=>{r(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((r=>{const s=this.unlockedAccount,i=s+e;for(let e=s;e<i;e++){const t=h(this,n,"m",a).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t]),this.page=0}t(this.accounts)})).catch((e=>{r(e)}))}))}async getFirstPage(){return this.page=0,h(this,n,"m",s).call(this,1)}async getNextPage(){return h(this,n,"m",s).call(this,1)}async getPreviousPage(){return h(this,n,"m",s).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){return E(r)?h(this,n,"m",i).call(this,e,r.getChainId(),r,(e=>(r.v=t.from(e.v,"hex"),r.r=t.from(e.r,"hex"),r.s=t.from(e.s,"hex"),r))):h(this,n,"m",i).call(this,e,Number(r.common.chainId()),r,(e=>{const t=r.toJSON();return t.type=r.type,t.v=m.addHexPrefix(e.v),t.r=m.addHexPrefix(e.r),t.s=m.addHexPrefix(e.s),y.TransactionFactory.fromTxData(t,{common:r.common,freeze:Object.isFrozen(r)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise(((r,s)=>{this.unlock().then((i=>{setTimeout((()=>{this.bridge.ethereumSignMessage({path:h(this,n,"m",c).call(this,e),message:m.stripHexPrefix(t),hex:!0}).then((t=>{var n;if(t.success){t.payload.address!==m.toChecksumAddress(e)&&s(new Error("signature doesnt match the right address"));const n=`0x${t.payload.signature}`;r(n)}else s(new Error((null===(n=t.payload)||void 0===n?void 0:n.error)||"Unknown error"))})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}),"just unlocked"===i?k:0)})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}async signTypedData(e,t,{version:r}){var s,i;const o=(0,v.transformTypedData)(t,"V4"===r),{types:a,message:u={},domain:l={},primaryType:d,domain_separator_hash:f,message_hash:p}=o,g=await this.unlock();await S("just unlocked"===g?k:0);const y=await this.bridge.ethereumSignTypedData({path:h(this,n,"m",c).call(this,e),data:{types:Object.assign(Object.assign({},a),{EIP712Domain:null!==(s=a.EIP712Domain)&&void 0!==s?s:[]}),message:u,domain:l,primaryType:d},metamask_v4_compat:!0,domain_separator_hash:f,message_hash:null!=p?p:""});if(y.success){if(m.toChecksumAddress(e)!==y.payload.address)throw new Error("signature doesnt match the right address");return y.payload.signature}throw new Error((null===(i=y.payload)||void 0===i?void 0:i.error)||"Unknown error")}async exportAccount(){return Promise.reject(new Error("Not supported on this device"))}forgetDevice(){this.accounts=[],this.hdk=new g.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!b[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new g.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}r.TrezorKeyring=T,n=new WeakSet,s=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise(((e,t)=>{this.unlock().then((t=>{const r=(this.page-1)*this.perPage,s=r+this.perPage,i=[];for(let e=r;e<s;e++){const t=h(this,n,"m",a).call(this,"m",e);i.push({address:t,balance:null,index:e}),this.paths[m.toChecksumAddress(t)]=e}e(i)})).catch((e=>{t(e)}))}))},i=async function(e,t,r,s){var i,a;let u;u=E(r)?{to:h(this,n,"m",o).call(this,r.to),value:h(this,n,"m",o).call(this,r.value),data:h(this,n,"m",o).call(this,r.data),chainId:t,nonce:h(this,n,"m",o).call(this,r.nonce),gasLimit:h(this,n,"m",o).call(this,r.gasLimit),gasPrice:h(this,n,"m",o).call(this,r.gasPrice)}:Object.assign(Object.assign({},r.toJSON()),{chainId:t,to:h(this,n,"m",o).call(this,m.toBuffer(r.to))});try{const t=await this.unlock();await S("just unlocked"===t?k:0);const r=await this.bridge.ethereumSignTransaction({path:h(this,n,"m",c).call(this,e),transaction:u});if(r.success){const t=s(r.payload),n=m.toChecksumAddress(m.addHexPrefix(t.getSenderAddress().toString("hex")));if(n!==m.toChecksumAddress(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(i=r.payload)||void 0===i?void 0:i.error)||"Unknown error")}catch(e){throw new Error(null!==(a=null==e?void 0:e.toString())&&void 0!==a?a:"Unknown error")}},o=function(e){return m.bufferToHex(e).toString()},a=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=m.publicToAddress(r.publicKey,!0).toString("hex");return m.toChecksumAddress(`0x${n}`)},c=function(e){const t=m.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===h(this,n,"m",a).call(this,"m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`},T.type=w}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.js"}],[149,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:19,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(((e,t,r)=>{if(e.status!==n.TransactionStatus.submitted)return e;const s=function(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)}));return Math.max.apply(null,t)}(r.filter((e=>e.status===n.TransactionStatus.confirmed)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from))),i=function(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return n}(r.filter((e=>e.status===n.TransactionStatus.submitted)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),s),o=Math.max(i,s);return parseInt(e.txParams.nonce,16)>o+1&&(e.status=n.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[15,{"./types":16,"ethereumjs-util":3880},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RequestStatus=r.REFRESH_INTERVAL_MS=r.DEFAULT_BRIDGE_CONTROLLER_STATE=r.BRIDGE_CONTROLLER_NAME=void 0;var n=e("ethereumjs-util"),s=e("./types");r.BRIDGE_CONTROLLER_NAME="BridgeController";const i=r.REFRESH_INTERVAL_MS=3e4;r.RequestStatus=function(e){return e[e.LOADING=0]="LOADING",e[e.FETCHED=1]="FETCHED",e[e.ERROR=2]="ERROR",e}({});r.DEFAULT_BRIDGE_CONTROLLER_STATE={bridgeFeatureFlags:{[s.BridgeFeatureFlagsKey.EXTENSION_CONFIG]:{refreshRate:i,maxRefreshCount:5},[s.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]:!1,[s.BridgeFeatureFlagsKey.NETWORK_SRC_ALLOWLIST]:[],[s.BridgeFeatureFlagsKey.NETWORK_DEST_ALLOWLIST]:[]},srcTokens:{},srcTopAssets:[],destTokens:{},destTopAssets:[],quoteRequest:{walletAddress:undefined,srcTokenAddress:(0,n.zeroAddress)(),slippage:.5},quotes:[],quotesLastFetched:undefined,quotesLoadingStatus:undefined}}}},{package:"$root$",file:"app/scripts/controllers/bridge/constants.ts"}],[150,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:20,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[151,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:21,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[152,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:22,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==n.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[1521,{"@metamask/rpc-errors":2104,"@metamask/safe-event-emitter":2127,"@metamask/utils":1538},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},v=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcEngine=void 0;const _=e("@metamask/rpc-errors"),b=v(e("@metamask/safe-event-emitter")),w=e("@metamask/utils");class k extends b.default{constructor({notificationHandler:e}={}){super(),n.add(this),i.set(this,!1),o.set(this,void 0),a.set(this,void 0),g(this,o,[],"f"),g(this,a,e,"f")}destroy(){y(this,o,"f").forEach((e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()})),g(this,o,[],"f"),g(this,i,!0,"f")}push(e){y(this,n,"m",c).call(this),y(this,o,"f").push(e)}handle(e,t){if(y(this,n,"m",c).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?y(this,n,"m",u).call(this,e,t):y(this,n,"m",u).call(this,e):t?y(this,n,"m",l).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return y(this,n,"m",c).call(this),async(e,t,r,n)=>{try{const[i,a,c]=await y(s,s,"m",h).call(s,e,t,y(this,o,"f"));return a?(await y(s,s,"m",p).call(s,c),n(i)):r((async e=>{try{await y(s,s,"m",p).call(s,c)}catch(t){return e(t)}return e()}))}catch(e){return n(e)}}}async _promiseHandle(e){return new Promise(((t,r)=>{y(this,n,"m",l).call(this,e,((e,n)=>{e&&n===undefined?r(e):t(n)})).catch(r)}))}}function S(e){return JSON.stringify(e,null,2)}r.JsonRpcEngine=k,s=k,i=new WeakMap,o=new WeakMap,a=new WeakMap,n=new WeakSet,c=function(){if(y(this,i,"f"))throw new Error("This engine is destroyed and can no longer be used.")},u=async function(e,t){try{if(0===e.length){const e=[{id:null,jsonrpc:"2.0",error:new _.JsonRpcError(_.errorCodes.rpc.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}const r=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter((e=>e!==undefined));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}},l=async function(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const r=new _.JsonRpcError(_.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:null,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new _.JsonRpcError(_.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return y(this,a,"f")&&!(0,w.isJsonRpcRequest)(e)?t(null):t(r,{id:e.id??null,jsonrpc:"2.0",error:r})}if(y(this,a,"f")&&(0,w.isJsonRpcNotification)(e)&&!(0,w.isJsonRpcRequest)(e)){try{await y(this,a,"f").call(this,e)}catch(r){return t(r)}return t(null)}let r=null;const n={...e},i={id:n.id,jsonrpc:n.jsonrpc};try{await y(s,s,"m",d).call(s,n,i,y(this,o,"f"))}catch(e){r=e}return r&&(delete i.result,i.error||(i.error=(0,_.serializeError)(r))),t(r,i)},d=async function(e,t,r){const[n,i,o]=await y(s,s,"m",h).call(s,e,t,r);if(y(s,s,"m",m).call(s,e,t,i),await y(s,s,"m",p).call(s,o),n)throw n},h=async function(e,t,r){const n=[];let i=null,o=!1;for(const a of r)if([i,o]=await y(s,s,"m",f).call(s,e,t,a,n),o)break;return[i,o,n.reverse()]},f=async function(e,t,r,n){return new Promise((s=>{const i=e=>{const r=e||t.error;r&&(t.error=(0,_.serializeError)(r)),s([r,!0])},o=r=>{t.error?i(t.error):(r&&("function"!=typeof r&&i(new _.JsonRpcError(_.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${S(e)}`,{request:e})),n.push(r)),s([null,!1]))};try{r(e,t,o,i)}catch(e){i(e)}}))},p=async function(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))},m=function(e,t,r){if(!(0,w.hasProperty)(t,"result")&&!(0,w.hasProperty)(t,"error"))throw new _.JsonRpcError(_.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${S(e)}`,{request:e});if(!r)throw new _.JsonRpcError(_.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${S(e)}`,{request:e})}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/JsonRpcEngine.cjs"}],[1522,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAsyncMiddleware=void 0,r.createAsyncMiddleware=function(e){return async(t,r,n,s)=>{let i;const o=new Promise((e=>{i=e}));let a=null,c=!1;const u=async()=>(c=!0,n((e=>{a=e,i()})),o);try{await e(t,r,u),c?(await o,a(null)):s(null)}catch(e){a?a(e):s(e)}}}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/createAsyncMiddleware.cjs"}],[1523,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createScaffoldMiddleware=void 0,r.createScaffoldMiddleware=function(e){return(t,r,n,s)=>{const i=e[t.method];return i===undefined?n():"function"==typeof i?i(t,r,n,s):(r.result=i,s())}}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/createScaffoldMiddleware.cjs"}],[1524,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getUniqueId=void 0;const n=4294967295;let s=Math.floor(Math.random()*n);r.getUniqueId=function(){return s=(s+1)%n,s}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/getUniqueId.cjs"}],[1525,{"./getUniqueId.cjs":1524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createIdRemapMiddleware=void 0;const n=e("./getUniqueId.cjs");r.createIdRemapMiddleware=function(){return(e,t,r,s)=>{const i=e.id,o=(0,n.getUniqueId)();e.id=o,t.id=o,r((r=>{e.id=i,t.id=i,r()}))}}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/idRemapMiddleware.cjs"}],[1526,{"./JsonRpcEngine.cjs":1521,"./createAsyncMiddleware.cjs":1522,"./createScaffoldMiddleware.cjs":1523,"./getUniqueId.cjs":1524,"./idRemapMiddleware.cjs":1525,"./mergeMiddleware.cjs":1527},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mergeMiddleware=r.JsonRpcEngine=r.createIdRemapMiddleware=r.getUniqueId=r.createScaffoldMiddleware=r.createAsyncMiddleware=void 0;var n=e("./createAsyncMiddleware.cjs");Object.defineProperty(r,"createAsyncMiddleware",{enumerable:!0,get:function(){return n.createAsyncMiddleware}});var s=e("./createScaffoldMiddleware.cjs");Object.defineProperty(r,"createScaffoldMiddleware",{enumerable:!0,get:function(){return s.createScaffoldMiddleware}});var i=e("./getUniqueId.cjs");Object.defineProperty(r,"getUniqueId",{enumerable:!0,get:function(){return i.getUniqueId}});var o=e("./idRemapMiddleware.cjs");Object.defineProperty(r,"createIdRemapMiddleware",{enumerable:!0,get:function(){return o.createIdRemapMiddleware}});var a=e("./JsonRpcEngine.cjs");Object.defineProperty(r,"JsonRpcEngine",{enumerable:!0,get:function(){return a.JsonRpcEngine}});var c=e("./mergeMiddleware.cjs");Object.defineProperty(r,"mergeMiddleware",{enumerable:!0,get:function(){return c.mergeMiddleware}})}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/index.cjs"}],[1527,{"./JsonRpcEngine.cjs":1521},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mergeMiddleware=void 0;const n=e("./JsonRpcEngine.cjs");r.mergeMiddleware=function(e){const t=new n.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()}}}},{package:"@metamask/json-rpc-engine",file:"node_modules/@metamask/json-rpc-engine/dist/mergeMiddleware.cjs"}],[1528,{"./errors.cjs":1536,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class o extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=o,r.assert=function(e,t="Assertion failed.",r=o){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",a=o){try{(0,n.assert)(e,t)}catch(e){throw i(a,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/assert.cjs"}],[1529,{"./assert.cjs":1528,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let o,a;return"base64"===i?o=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),o=String.raw`[-_A-Za-z0-9]`),a=r?new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,n.pattern)(e,a)}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/base64.cjs"}],[153,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:23,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let n=!0;for(;r.length>40&&n;){const e=r.findIndex((e=>e.status===s.TransactionStatus.failed||e.status===s.TransactionStatus.rejected||e.status===s.TransactionStatus.confirmed||e.status===s.TransactionStatus.dropped));e<0?n=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[1530,{"./assert.cjs":1528,"./hex.cjs":1537,"@scure/base":2919,buffer:3645},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),o=48,a=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<a?o:c),u=s-(s<a?o:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/bytes.cjs"}],[1531,{"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAssetId=r.isCaipAssetType=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAssetIdStruct=r.CaipAssetTypeStruct=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ASSET_ID_REGEX=r.CAIP_ASSET_TYPE_REGEX=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),r.CaipAssetTypeStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_TYPE_REGEX),r.CaipAssetIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.isCaipAssetType=function(e){return(0,n.is)(e,r.CaipAssetTypeStruct)},r.isCaipAssetId=function(e){return(0,n.is)(e,r.CaipAssetIdStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1532,{"./base64.cjs":1529,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/checksum.cjs"}],[1533,{"./assert.cjs":1528,"./bytes.cjs":1530,"./hex.cjs":1537,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),o=e("./hex.cjs"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/coercers.cjs"}],[1534,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),o(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),o(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/collections.cjs"}],[1535,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1536,{"./misc.cjs":1542,"pony-cause":4600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function o(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=o,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return o(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/errors.cjs"}],[1537,{"./assert.cjs":1528,"./bytes.cjs":1530,"@metamask/superstruct":2695,"@noble/hashes/sha3":2900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),o=e("./bytes.cjs");function a(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),a=d((0,o.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=a[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=a,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(a(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/hex.cjs"}],[1538,{"./assert.cjs":1528,"./base64.cjs":1529,"./bytes.cjs":1530,"./caip-types.cjs":1531,"./checksum.cjs":1532,"./coercers.cjs":1533,"./collections.cjs":1534,"./encryption-types.cjs":1535,"./errors.cjs":1536,"./hex.cjs":1537,"./json.cjs":1539,"./keyring.cjs":1540,"./logging.cjs":1541,"./misc.cjs":1542,"./number.cjs":1543,"./opaque.cjs":1544,"./promise.cjs":1545,"./time.cjs":1546,"./transaction-types.cjs":1547,"./versions.cjs":1548},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/index.cjs"}],[1539,{"./assert.cjs":1528,"./misc.cjs":1542,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function o({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function a(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!o(r)||e.validator(t,r),refiner:(t,r)=>!o(r)||e.refiner(t,r)})}function c(e){if(null===e||"boolean"==typeof e||"string"==typeof e)return!0;if("number"==typeof e&&Number.isFinite(e))return!0;if("object"==typeof e){let t=!0;if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(!c(e[r])){t=!1;break}return t}const r=Object.entries(e);for(let e=0;e<r.length;e++)if("string"!=typeof r[e][0]||!c(r[e][1])){t=!1;break}return t}return!1}function u(e){return(0,n.create)(e,r.JsonStruct)}r.object=e=>(0,n.object)(e),r.exactOptional=a,r.UnsafeJsonStruct=(0,n.define)("JSON",(e=>c(e))),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return u(e),!0}catch{return!1}},r.getSafeJson=u,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:a(r.JsonStruct),stack:a((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/json.cjs"}],[154,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map(((e,t)=>(e.status===s.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e))),t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[1540,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/keyring.cjs"}],[1541,{debug:3789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/logging.cjs"}],[1542,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/misc.cjs"}],[1543,{"./assert.cjs":1528,"./hex.cjs":1537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/number.cjs"}],[1544,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/opaque.cjs"}],[1545,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/promise.cjs"}],[1546,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/time.cjs"}],[1547,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1548,{"./assert.cjs":1528,"@metamask/superstruct":2695,semver:4923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/json-rpc-engine>@metamask/utils",file:"node_modules/@metamask/json-rpc-engine/node_modules/@metamask/utils/dist/versions.cjs"}],[1549,{"readable-stream":4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("readable-stream");r.default=function(e){if(!e?.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,r=new n.Duplex({objectMode:!0,read:()=>undefined,write:function(e,n,s){t.handle(e,((e,t)=>{r.push(t)})),s()}});return t.on&&t.on("notification",(e=>{r.push(e)})),r}}}},{package:"@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/createEngineStream.cjs"}],[155,{"../lib/util":130,"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller"),i=e("../lib/util");r.default={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==s.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,i.addHexPrefix)(e).toLowerCase(),to:()=>(0,i.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,i.addHexPrefix)(e),value:e=>(0,i.addHexPrefix)(e),data:e=>(0,i.addHexPrefix)(e),gas:e=>(0,i.addHexPrefix)(e),gasPrice:e=>(0,i.addHexPrefix)(e)},r={};return Object.keys(t).forEach((n=>{e[n]&&(r[n]=t[n](e[n]))})),r}(e.txParams)),e)))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[1550,{"@metamask/safe-event-emitter":2127,"@metamask/utils":2850,"readable-stream":4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const s=n(e("@metamask/safe-event-emitter")),i=e("@metamask/utils"),o=e("readable-stream");r.default=function(e={}){const t={},r=new o.Duplex({objectMode:!0,read:()=>undefined,write:function(r,s,o){let c=null;try{!(0,i.hasProperty)(r,"id")?function(r){e?.retryOnMessage&&r.method===e.retryOnMessage&&Object.values(t).forEach((({req:e,retryCount:r=0})=>{if(!e.id)return;if(r>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);const n=t[e.id];n&&(n.retryCount=r+1),a(e)}));n.emit("notification",r)}(r):function(e){const{id:r}=e;if(null===r)return;const n=t[r];if(!n)return void console.warn(`StreamMiddleware - Unknown response id "${r}"`);delete t[r],Object.assign(n.res,e),setTimeout(n.end)}(r)}catch(e){c=e}o(c)}}),n=new s.default;return{events:n,middleware:(e,r,n,s)=>{t[e.id]={req:e,res:r,next:n,end:s},a(e)},stream:r};function a(e){r.push(e)}}}}},{package:"@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/createStreamMiddleware.cjs"}],[1551,{"./createEngineStream.cjs":1549,"./createStreamMiddleware.cjs":1550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createStreamMiddleware=r.createEngineStream=void 0;const s=n(e("./createEngineStream.cjs"));r.createEngineStream=s.default;const i=n(e("./createStreamMiddleware.cjs"));r.createStreamMiddleware=i.default}}},{package:"@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/index.cjs"}],[156,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce(((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t)),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[157,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter((e=>e.status!==s.TransactionStatus.rejected))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[158,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach((e=>{t.PreferencesController.accountTokens[e]={mainnet:r}})),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[159,{"./fail-tx":278,"@metamask/transaction-controller":2721},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@metamask/transaction-controller"),i=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};r.default={version:29,migrate:(0,i.default)(29,"Stuck in approved state for too long.",(e=>{const t=e.status===s.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5}))}}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[160,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach(((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId})),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[161,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[162,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[1624,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.GenericLog="GenericLog",e.EthSignLog="EthSignLog",e))(n||{});r.LogType=n}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-B6ES7RHK.js"}],[1625,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-JUURNM6C.js"}],[1626,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.PersonalSign="personal_sign",e.EthSignTypedData="eth_signTypedData",e.EthSignTypedDataV3="eth_signTypedData_v3",e.EthSignTypedDataV4="eth_signTypedData_v4",e))(n||{}),s=(e=>(e.Proposed="proposed",e.Rejected="rejected",e.Signed="signed",e))(s||{});r.SigningMethod=n,r.SigningStage=s}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-OL334B2K.js"}],[1627,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-PMCRFQY3.js"}],[1628,{"./chunk-UJIPPGP6.js":1629,"@metamask/base-controller":1190,uuid:5040},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i=e("./chunk-UJIPPGP6.js"),o=e("@metamask/base-controller"),a=e("uuid"),c="LoggingController",u={logs:{persist:!0,anonymous:!1}},l={logs:{}},d=class extends o.BaseController{constructor({messenger:e,state:t}){super({name:c,metadata:u,messenger:e,state:{...l,...t}}),i.__privateAdd.call(void 0,this,n),this.messagingSystem.registerActionHandler(`${c}:add`,(e=>this.add(e)))}add(e){const t={id:i.__privateMethod.call(void 0,this,n,s).call(this),timestamp:Date.now(),log:e};this.update((e=>{e.logs[t.id]=t}))}clear(){this.update((e=>{e.logs={}}))}};n=new WeakSet,s=function(){let e=a.v1.call(void 0);for(;e in this.state.logs;)e=a.v1.call(void 0);return e},r.LoggingController=d}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-PUAQGX73.js"}],[1629,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateMethod=(e,t,r)=>(((e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)})(e,t,"access private method"),r)}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-UJIPPGP6.js"}],[163,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[1630,{"./chunk-B6ES7RHK.js":1624,"./chunk-JUURNM6C.js":1625,"./chunk-OL334B2K.js":1626,"./chunk-PMCRFQY3.js":1627,"./chunk-PUAQGX73.js":1628,"./chunk-UJIPPGP6.js":1629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-PUAQGX73.js");e("./chunk-PMCRFQY3.js");var s=e("./chunk-OL334B2K.js");e("./chunk-JUURNM6C.js");var i=e("./chunk-B6ES7RHK.js");e("./chunk-UJIPPGP6.js"),r.LogType=i.LogType,r.LoggingController=n.LoggingController,r.SigningMethod=s.SigningMethod,r.SigningStage=s.SigningStage}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/index.js"}],[1634,{"./chunk-4R6XDQI5.js":1635,"./chunk-E3LTYZLZ.js":1636,"@metamask/controller-utils":1216},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4R6XDQI5.js"),s=e("./chunk-E3LTYZLZ.js"),i=e("@metamask/controller-utils"),o=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}async addUnapprovedMessage(e,t){s.validateSignMessageData.call(void 0,e);const r=i.detectSIWE.call(void 0,e),n=this.addRequestToMessageParams(e,t);n.data=s.normalizeMessageData.call(void 0,e.data),n.siwe=r;const o=this.createUnapprovedMessage(n,i.ApprovalType.PersonalSign,t),a=o.id;return await this.addMessage(o),this.hub.emit("unapprovedMessage",{...n,metamaskId:a}),a}prepMessageForSigning(e){const{metamaskId:t,...r}=e;return Promise.resolve(r)}},a=o;r.PersonalMessageManager=o,r.PersonalMessageManager_default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-4JJ4OG3I.js"}],[1635,{"@metamask/base-controller":1190,events:3952,uuid:5040},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("events"),i=e("uuid"),o=class extends n.BaseControllerV1{constructor(e,t,r,n,i){super(e,t),this.hub=new(0,s.EventEmitter),this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=n??[],this.getCurrentChainId=i,this.initialize()}addRequestToMessageParams(e,t){const r={...e};return t&&(r.requestId=t.id,r.origin=t.origin),r}createUnapprovedMessage(e,t,r){return{id:i.v1.call(void 0),messageParams:e,securityAlertResponse:r?.securityAlertResponse,status:"unapproved",time:Date.now(),type:t}}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}async securityCheck(e){if(this.securityProviderRequest){const t=await this.securityProviderRequest(e,e.type);return{...e,securityProviderResponse:t}}return e}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addMessage(e){const t=await this.securityCheck(e);this.messages.push(t),this.saveMessageList()}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}async waitForFinishStatus(e,t){const{metamaskId:r,...n}=e;return new Promise(((e,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}))}},a=o;r.AbstractMessageManager=o,r.AbstractMessageManager_default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-4R6XDQI5.js"}],[1636,{"@metamask/controller-utils":1216,"@metamask/eth-sig-util":1421,"@metamask/utils":2850,buffer:3645,jsonschema:4316},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/controller-utils"),s=e("@metamask/eth-sig-util"),i=e("@metamask/utils"),o=e("jsonschema"),a=/^[0-9A-Fa-f]+$/gu;function c(e,t){if(!e||"string"!=typeof e||!n.isValidHexAddress.call(void 0,e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=i.remove0x.call(void 0,e);if(t.match(a))return i.add0x.call(void 0,t)}catch(e){}return i.bytesToHex.call(void 0,t.from(e,"utf8"))},r.validateSignMessageData=function(e){const{from:t,data:r}=e;if(c(t,"from"),!r||"string"!=typeof r)throw new Error(`Invalid message "data": ${r} must be a valid string.`)},r.validateTypedSignMessageDataV1=function(e){if(c(e.from,"from"),!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{s.typedSignatureHash.call(void 0,e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},r.validateTypedSignMessageDataV3V4=function(e,t){if(c(e.from,"from"),!e.data||Array.isArray(e.data)||"object"!=typeof e.data&&"string"!=typeof e.data)throw new Error('Invalid message "data": Must be a valid string or object.');let r;if("object"==typeof e.data)r=e.data;else try{r=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if(o.validate.call(void 0,r,s.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.");if(!t)throw new Error("Current chainId cannot be null or undefined.");let{chainId:n}=r.domain;if(n){"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10));const e=parseInt(t,16);if(Number.isNaN(e))throw new Error(`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`);if(n!==e)throw new Error(`Provided chainId "${n}" must match the active chainId "${e}"`)}},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;c(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;c(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-E3LTYZLZ.js"}],[1637,{"./chunk-4R6XDQI5.js":1635,"./chunk-E3LTYZLZ.js":1636,"@metamask/controller-utils":1216},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4R6XDQI5.js"),s=e("./chunk-E3LTYZLZ.js"),i=e("@metamask/controller-utils"),o=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}async addUnapprovedMessage(e,t,r){if("V1"===r&&s.validateTypedSignMessageDataV1.call(void 0,e),"V3"===r||"V4"===r){const t=this.getCurrentChainId?.();s.validateTypedSignMessageDataV3V4.call(void 0,e,t)}"string"==typeof e.data||"V3"!==r&&"V4"!==r||(e.data=JSON.stringify(e.data));const n=this.addRequestToMessageParams(e,t),o=this.createUnapprovedMessage(n,i.ApprovalType.EthSignTypedData,t),a=o.id;return await this.addMessage(o),this.hub.emit("unapprovedMessage",{...e,metamaskId:a,version:r}),a}setMessageStatusErrored(e,t){const r=this.getMessage(e);r&&(r.error=t,this.updateMessage(r),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){const{metamaskId:t,version:r,...n}=e;return Promise.resolve(n)}},a=o;r.TypedMessageManager=o,r.TypedMessageManager_default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-OPSXL77K.js"}],[1638,{"./chunk-4R6XDQI5.js":1635,"./chunk-E3LTYZLZ.js":1636,"@metamask/controller-utils":1216},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4R6XDQI5.js"),s=e("./chunk-E3LTYZLZ.js"),i=e("@metamask/controller-utils"),o=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}async addUnapprovedMessageAsync(e,t){s.validateEncryptionPublicKeyMessageData.call(void 0,e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return n(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){const r=this.addRequestToMessageParams(e,t),n=this.createUnapprovedMessage(r,i.ApprovalType.EthGetEncryptionPublicKey,t),s=n.id;return await this.addMessage(n),this.hub.emit("unapprovedMessage",{...r,metamaskId:s}),s}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}},a=o;r.EncryptionPublicKeyManager=o,r.EncryptionPublicKeyManager_default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-SNLKWYZE.js"}],[1639,{"./chunk-4R6XDQI5.js":1635,"./chunk-E3LTYZLZ.js":1636,"@metamask/controller-utils":1216},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4R6XDQI5.js"),s=e("./chunk-E3LTYZLZ.js"),i=e("@metamask/controller-utils"),o=class extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}async addUnapprovedMessageAsync(e,t){s.validateDecryptedMessageData.call(void 0,e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return n(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return n(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return n(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){const r=this.addRequestToMessageParams(e,t);e.data=s.normalizeMessageData.call(void 0,e.data);const n=this.createUnapprovedMessage(r,i.ApprovalType.EthDecrypt,t),o=n.id;return await this.addMessage(n),this.hub.emit("unapprovedMessage",{...r,metamaskId:o}),o}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}};r.DecryptMessageManager=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/chunk-VU4XI5EX.js"}],[164,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[1640,{"./chunk-4JJ4OG3I.js":1634,"./chunk-4R6XDQI5.js":1635,"./chunk-E3LTYZLZ.js":1636,"./chunk-OPSXL77K.js":1637,"./chunk-SNLKWYZE.js":1638,"./chunk-VU4XI5EX.js":1639},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-VU4XI5EX.js"),s=e("./chunk-SNLKWYZE.js"),i=e("./chunk-4JJ4OG3I.js"),o=e("./chunk-OPSXL77K.js"),a=e("./chunk-4R6XDQI5.js");e("./chunk-E3LTYZLZ.js"),r.AbstractMessageManager=a.AbstractMessageManager,r.DecryptMessageManager=n.DecryptMessageManager,r.EncryptionPublicKeyManager=s.EncryptionPublicKeyManager,r.PersonalMessageManager=i.PersonalMessageManager,r.TypedMessageManager=o.TypedMessageManager}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.js"}],[1641,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={snapId:"npm:@metamask/message-signing-snap",manifest:{version:"0.4.0",description:"Automatic message signing of MetaMask tagged messages",proposedName:"MetaMask Message Signing Snap",repository:{type:"git",url:"https://github.com/MetaMask/message-signing-snap.git"},source:{shasum:"LAgptN++khoaukUy3XKLBOO+KSU41rPiLsLFk1Uwuws=",location:{npm:{filePath:"dist/bundle.js",iconPath:"images/icon.svg",packageName:"@metamask/message-signing-snap",registry:"https://registry.npmjs.org/"}}},initialConnections:{"https://portfolio.metamask.io":{},"https://portfolio-builds.metafi-dev.codefi.network":{}},initialPermissions:{snap_getEntropy:{},"endowment:rpc":{dapps:!0,snaps:!1}},manifestVersion:"0.1"},files:[{path:"images/icon.svg",value:'<svg width="500" height="500" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="500" height="500" fill="black"/>\n<g filter="url(#filter0_f_8_91)">\n<path d="M249.444 373.519C249.444 373.519 364.118 343.192 364.118 257.188L378.333 248.251L364.118 239.314L378.333 230.378L364.118 221.441V203.568V185.695V149.948V114.202L301.639 132.596C267.566 142.628 231.323 142.628 197.25 132.596L134.771 114.202V149.948V167.821V185.695V203.568V221.441L120.556 230.378L134.771 239.314L120.556 248.251L134.771 257.188C134.771 343.192 249.444 373.519 249.444 373.519Z" fill="#F1CA77"/>\n</g>\n<path d="M249.445 406.215C249.445 406.215 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 406.215 249.445 406.215Z" fill="#233447"/>\n<path d="M249.445 399.107C249.445 399.107 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 399.107 249.445 399.107Z" fill="#123AF0"/>\n<path d="M249.445 392C249.445 392 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 392 249.445 392Z" fill="#CD6116"/>\n<path d="M249.445 382.049C249.445 382.049 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 382.049 249.445 382.049Z" fill="#E4751F"/>\n<path d="M249.445 370.676C249.445 370.676 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 370.676 249.445 370.676Z" fill="#F6851B"/>\n<path d="M249.445 352.196C249.445 352.196 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888C290.105 147.184 208.784 147.184 134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 352.196 249.445 352.196Z" fill="url(#paint0_linear_8_91)"/>\n<defs>\n<filter id="filter0_f_8_91" x="94.9674" y="88.6133" width="308.954" height="310.494" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n<feGaussianBlur stdDeviation="12.7941" result="effect1_foregroundBlur_8_91"/>\n</filter>\n<linearGradient id="paint0_linear_8_91" x1="144.012" y1="132.09" x2="425.482" y2="446.967" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F1CA77"/>\n<stop offset="1" stop-color="#F6851B"/>\n</linearGradient>\n</defs>\n</svg>\n'},{path:"dist/bundle.js",value:'(()=>{var e={463:e=>{e.exports=a,a.default=a,a.stable=u,a.stableStringify=u;var t="[...]",n="[Circular]",r=[],s=[];function i(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function a(e,t,n,a){var o;void 0===a&&(a=i()),c(e,"",0,[],void 0,0,a);try{o=0===s.length?JSON.stringify(e,t,n):JSON.stringify(e,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var d=r.pop();4===d.length?Object.defineProperty(d[0],d[1],d[3]):d[0][d[1]]=d[2]}}return o}function o(e,t,n,i){var a=Object.getOwnPropertyDescriptor(i,n);void 0!==a.get?a.configurable?(Object.defineProperty(i,n,{value:e}),r.push([i,n,t,a])):s.push([t,n,e]):(i[n]=e,r.push([i,n,t]))}function c(e,r,s,i,a,d,u){var l;if(d+=1,"object"==typeof e&&null!==e){for(l=0;l<i.length;l++)if(i[l]===e)return void o(n,e,r,a);if(void 0!==u.depthLimit&&d>u.depthLimit)return void o(t,e,r,a);if(void 0!==u.edgesLimit&&s+1>u.edgesLimit)return void o(t,e,r,a);if(i.push(e),Array.isArray(e))for(l=0;l<e.length;l++)c(e[l],l,l,i,e,d,u);else{var h=Object.keys(e);for(l=0;l<h.length;l++){var f=h[l];c(e[f],f,l,i,e,d,u)}}i.pop()}}function d(e,t){return e<t?-1:e>t?1:0}function u(e,t,n,a){void 0===a&&(a=i());var o,c=l(e,"",0,[],void 0,0,a)||e;try{o=0===s.length?JSON.stringify(c,t,n):JSON.stringify(c,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var d=r.pop();4===d.length?Object.defineProperty(d[0],d[1],d[3]):d[0][d[1]]=d[2]}}return o}function l(e,s,i,a,c,u,h){var f;if(u+=1,"object"==typeof e&&null!==e){for(f=0;f<a.length;f++)if(a[f]===e)return void o(n,e,s,c);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==h.depthLimit&&u>h.depthLimit)return void o(t,e,s,c);if(void 0!==h.edgesLimit&&i+1>h.edgesLimit)return void o(t,e,s,c);if(a.push(e),Array.isArray(e))for(f=0;f<e.length;f++)l(e[f],f,f,a,e,u,h);else{var p={},m=Object.keys(e).sort(d);for(f=0;f<m.length;f++){var g=m[f];l(e[g],g,f,a,e,u,h),p[g]=e[g]}if(void 0===c)return p;r.push([c,s,e]),c[s]=p}a.pop()}}function h(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(s.length>0)for(var r=0;r<s.length;r++){var i=s[r];if(i[1]===t&&i[0]===n){n=i[2],s.splice(r,1);break}}return e.call(this,t,n)}}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{onRpcRequest:()=>xs});var e={};n.r(e),n.d(e,{aK:()=>ur,e8:()=>Wn,DO:()=>Kn,dJ:()=>lr,OG:()=>hr,My:()=>Yn,Ph:()=>nr,lX:()=>rr,Id:()=>or,fg:()=>mr,qj:()=>ar,aT:()=>tr,r4:()=>dr,aY:()=>Hn,x:()=>vr,lq:()=>sr,z:()=>ir,zW:()=>Gn,Q5:()=>yr});var t={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},s={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function i(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}const a=(e,t)=>Object.hasOwnProperty.call(e,t);var o;!function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(o=o||(o={}));class c extends TypeError{constructor(e,t){let n;const{message:r,explanation:s,...i}=e,{path:a}=e,o=0===a.length?r:`At path: ${a.join(".")} -- ${r}`;super(s??o),null!=s&&(this.cause=o),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function d(e){return"object"==typeof e&&null!==e}function u(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function l(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:s,branch:i}=t,{type:a}=n,{refinement:o,message:c=`Expected a value of type \\`${a}\\`${o?` with refinement \\`${o}\\``:""}, but received: \\`${u(r)}\\``}=e;return{value:r,type:a,refinement:o,key:s[s.length-1],path:s,branch:i,...e,message:c}}function*h(e,t,n,r){(function(e){return d(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const s of e){const e=l(s,t,n,r);e&&(yield e)}}function*f(e,t,n={}){const{path:r=[],branch:s=[e],coerce:i=!1,mask:a=!1}=n,o={path:r,branch:s};if(i&&(e=t.coercer(e,o),a&&"type"!==t.type&&d(t.schema)&&d(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let c="valid";for(const r of t.validator(e,o))r.explanation=n.message,c="not_valid",yield[r,void 0];for(let[u,l,h]of t.entries(e,o)){const t=f(l,h,{path:void 0===u?r:[...r,u],branch:void 0===u?s:[...s,l],coerce:i,mask:a,message:n.message});for(const n of t)n[0]?(c=null===n[0].refinement||void 0===n[0].refinement?"not_valid":"not_refined",yield[n[0],void 0]):i&&(l=n[1],void 0===u?e=l:e instanceof Map?e.set(u,l):e instanceof Set?e.add(l):d(e)&&(void 0!==l||u in e)&&(e[u]=l))}if("not_valid"!==c)for(const r of t.refiner(e,o))r.explanation=n.message,c="not_refined",yield[r,void 0];"valid"===c&&(yield[void 0,e])}class p{constructor(e){const{type:t,schema:n,validator:r,refiner:s,coercer:i=e=>e,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=i,this.validator=r?(e,t)=>h(r(e,t),t,this,e):()=>[],this.refiner=s?(e,t)=>h(s(e,t),t,this,e):()=>[]}assert(e,t){return m(e,this,t)}create(e,t){return g(e,this,t)}is(e){return y(e,this)}mask(e,t){return function(e,t,n){const r=v(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}(e,this,t)}validate(e,t={}){return v(e,this,t)}}function m(e,t,n){const r=v(e,t,{message:n});if(r[0])throw r[0]}function g(e,t,n){const r=v(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function y(e,t){return!v(e,t)[0]}function v(e,t,n={}){const r=f(e,t,n),s=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(r);if(s[0]){return[new c(s[0],(function*(){for(const e of r)e[0]&&(yield e[0])})),void 0]}return[void 0,s[1]]}function _(e,t){return new p({type:e,schema:null,validator:t})}function w(e){let t;return new p({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})}function b(e){return new p({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${u(e)}`})}function x(e){const t=u(e),n=typeof e;return new p({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \\`${t}\\`, but received: ${u(n)}`})}function E(){return _("never",(()=>!1))}function k(){return _("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${u(e)}`))}function O(e){const t=e?Object.keys(e):[],n=E();return new p({type:"object",schema:e??null,*entries(r){if(e&&d(r)){const s=new Set(Object.keys(r));for(const n of t)s.delete(n),yield[n,r[n],e[n]];for(const e of s)yield[e,r[e],n]}},validator:e=>d(e)||`Expected an object, but received: ${u(e)}`,coercer:e=>d(e)?{...e}:e})}function S(e){return new p({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function Z(e,t){return new p({type:"record",schema:null,*entries(n){if(d(n))for(const r in n){const s=n[r];yield[r,r,e],yield[r,s,t]}},validator:e=>d(e)||`Expected an object, but received: ${u(e)}`})}function N(){return _("string",(e=>"string"==typeof e||`Expected a string, but received: ${u(e)}`))}function T(e){const t=e.map((e=>e.type)).join(" | ");return new p({type:"union",schema:null,coercer(t){for(const n of e){const[e,r]=n.validate(t,{coerce:!0});if(!e)return r}return t},validator(n,r){const s=[];for(const t of e){const[...e]=f(n,t,r),[i]=e;if(!i?.[0])return[];for(const[t]of e)t&&s.push(t)}return[`Expected the value to satisfy a union of \\`${t}\\`, but received: ${u(n)}`,...s]}})}function A(e,t,n){return new p({...e,coercer:(r,s)=>y(r,t)?e.coercer(n(r,s),s):e.coercer(r,s)})}Error;function I(e){return function(e){return function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)&&"string"==typeof e.message?e.message:null==e?"":String(e)}(e).replace(/\\.$/u,"")}function j(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}class C extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}const B=e=>O(e);function R({path:e,branch:t}){const n=e[e.length-1];return a(t[t.length-2],n)}function P(e){return new p({...e,type:`optional ${e.type}`,validator:(t,n)=>!R(n)||e.validator(t,n),refiner:(t,n)=>!R(n)||e.refiner(t,n)})}const $=T([x(null),_("boolean",(e=>"boolean"==typeof e)),_("finite number",(e=>y(e,k())&&Number.isFinite(e))),N(),b(w((()=>$))),Z(N(),w((()=>$)))]),L=A($,_("any",(()=>!0)),(e=>(function(e,t,n="Assertion failed",r=C){try{m(e,t)}catch(e){throw j(r,`${n}: ${I(e)}.`)}}(e,$),JSON.parse(JSON.stringify(e,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))))));function U(e){try{return function(e){g(e,L)}(e),!0}catch{return!1}}const M=x("2.0"),z=(q=T([k(),N()]),new p({...q,validator:(e,t)=>null===e||q.validator(e,t),refiner:(e,t)=>null===e||q.refiner(e,t)}));var q;const D=B({code:_("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${u(e)}`)),message:N(),data:P(L),stack:P(N())}),F=T([Z(N(),L),b(L)]);B({id:z,jsonrpc:M,method:N(),params:P(F)}),B({jsonrpc:M,method:N(),params:P(F)});O({id:z,jsonrpc:M,result:S(_("unknown",(()=>!0))),error:S(D)});const V=B({id:z,jsonrpc:M,result:L}),H=B({id:z,jsonrpc:M,error:D});T([V,H]);var K=t.internal,W=(J(K),"Unspecified server error.");function J(e,t="Unspecified error message. This is a bug, please report it."){if(function(e){return Number.isInteger(e)}(e)){const t=e.toString();if(a(s,t))return s[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return W}return t}function Y(e){return Array.isArray(e)?e.map((e=>U(e)?e:i(e)?G(e):null)):i(e)?G(e):U(e)?e:null}function G(e){return Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return U(r)&&(t[n]=r),t}),{})}var X=n(463),Q=class extends Error{constructor(e,t,n){var r=(...e)=>{super(...e)};if(!Number.isInteger(e))throw new Error(\'"code" must be an integer.\');if(!t||"string"!=typeof t)throw new Error(\'"message" must be a non-empty string.\');!function(e){return i(e)&&a(e,"cause")&&i(e.cause)}(n)?r(t):(r(t,{cause:n.cause}),a(this,"cause")||Object.assign(this,{cause:n.cause})),void 0!==n&&(this.data=n),this.code=e}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}(this.data)&&(e.data.cause=Y(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return X(this.serialize(),ee,2)}};function ee(e,t){if("[Circular]"!==t)return t}var te,ne,re=e=>ie(t.invalidParams,e),se=e=>ie(t.methodNotFound,e);function ie(e,t){const[n,r]=ae(t);return new Q(e,n??J(e),r)}function ae(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??void 0,n]}}return[]}!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`\'${e}\'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(te||(te={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(ne||(ne={}));const oe=te.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ce=e=>{switch(typeof e){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return isNaN(e)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(e)?oe.array:null===e?oe.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?oe.promise:"undefined"!=typeof Map&&e instanceof Map?oe.map:"undefined"!=typeof Set&&e instanceof Set?oe.set:"undefined"!=typeof Date&&e instanceof Date?oe.date:oe.object;default:return oe.unknown}},de=te.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ue extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const s of e.issues)if("invalid_union"===s.code)s.unionErrors.map(r);else if("invalid_return_type"===s.code)r(s.returnTypeError);else if("invalid_arguments"===s.code)r(s.argumentsError);else if(0===s.path.length)n._errors.push(t(s));else{let e=n,r=0;for(;r<s.path.length;){const n=s.path[r];r===s.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(s))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof ue))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,te.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ue.create=e=>new ue(e);const le=(e,t)=>{let n;switch(e.code){case de.invalid_type:n=e.received===oe.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,te.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${te.joinValues(e.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${te.joinValues(e.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${te.joinValues(e.options)}, received \'${e.received}\'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:te.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case de.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case de.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=t.defaultError,te.assertNever(e)}return{message:n}};let he=le;function fe(){return he}const pe=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],a={...s,path:i};if(void 0!==s.message)return{...s,path:i,message:s.message};let o="";const c=r.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(a,{data:t,defaultError:o}).message;return{...s,path:i,message:o}};function me(e,t){const n=fe(),r=pe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===le?void 0:le].filter((e=>!!e))});e.common.issues.push(r)}class ge{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return ye;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,r=await e.value;n.push({key:t,value:r})}return ge.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:s}=r;if("aborted"===t.status)return ye;if("aborted"===s.status)return ye;"dirty"===t.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"===t.value||void 0===s.value&&!r.alwaysSet||(n[t.value]=s.value)}return{status:e.value,value:n}}}const ye=Object.freeze({status:"aborted"}),ve=e=>({status:"dirty",value:e}),_e=e=>({status:"valid",value:e}),we=e=>"aborted"===e.status,be=e=>"dirty"===e.status,xe=e=>"valid"===e.status,Ee=e=>"undefined"!=typeof Promise&&e instanceof Promise;function ke(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function Oe(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}var Se,Ze,Ne;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Se||(Se={}));class Te{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ae=(e,t)=>{if(xe(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ue(e.common.issues);return this._error=t,this._error}}};function Ie(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(\'Can\\\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.\');if(t)return{errorMap:t,description:s};return{errorMap:(t,s)=>{var i,a;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:s.defaultError}:void 0===s.data?{message:null!==(i=null!=o?o:r)&&void 0!==i?i:s.defaultError}:"invalid_type"!==t.code?{message:s.defaultError}:{message:null!==(a=null!=o?o:n)&&void 0!==a?a:s.defaultError}},description:s}}class je{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ce(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ce(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ge,ctx:{common:e.parent.common,data:e.data,parsedType:ce(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ee(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ce(e)},s=this._parseSync({data:e,path:r.path,parent:r});return Ae(r,s)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ce(e)},r=this._parse({data:e,path:n.path,parent:n}),s=await(Ee(r)?r:Promise.resolve(r));return Ae(n,s)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const s=e(t),i=()=>r.addIssue({code:de.custom,...n(t)});return"undefined"!=typeof Promise&&s instanceof Promise?s.then((e=>!!e||(i(),!1))):!!s||(i(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new St({schema:this,typeName:Lt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Zt.create(this,this._def)}nullable(){return Nt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ot.create(this,this._def)}promise(){return Ot.create(this,this._def)}or(e){return ut.create([this,e],this._def)}and(e){return pt.create(this,e,this._def)}transform(e){return new St({...Ie(this._def),schema:this,typeName:Lt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Tt({...Ie(this._def),innerType:this,defaultValue:t,typeName:Lt.ZodDefault})}brand(){return new Ct({typeName:Lt.ZodBranded,type:this,...Ie(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new At({...Ie(this._def),innerType:this,catchValue:t,typeName:Lt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Bt.create(this,e)}readonly(){return Rt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ce=/^c[^\\s-]{8,}$/i,Be=/^[0-9a-z]+$/,Re=/^[0-9A-HJKMNP-TV-Z]{26}$/,Pe=/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i,$e=/^[a-z0-9_-]{21}$/i,Le=/^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/,Ue=/^(?!\\.)(?!.*\\.\\.)([A-Z0-9_\'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;let Me;const ze=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,De=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Fe="((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))",Ve=new RegExp(`^${Fe}$`);function He(e){let t="([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d";return e.precision?t=`${t}\\\\.\\\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\\\.\\\\d+)?`),t}function Ke(e){let t=`${Fe}T${He(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\\\d{2}:?\\\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}class We extends je{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==oe.string){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.string,received:t.parsedType}),ye}const t=new ge;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const r=e.data.length>i.value,s=e.data.length<i.value;(r||s)&&(n=this._getOrReturnCtx(e,n),r?me(n,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&me(n,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)Ue.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"email",code:de.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)Me||(Me=new RegExp("^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$","u")),Me.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"emoji",code:de.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)Pe.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"uuid",code:de.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)$e.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"nanoid",code:de.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)Ce.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"cuid",code:de.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)Be.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"cuid2",code:de.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)Re.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"ulid",code:de.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),me(n,{validation:"url",code:de.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"regex",code:de.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){Ke(i).test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else if("date"===i.kind){Ve.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:"date",message:i.message}),t.dirty())}else if("time"===i.kind){new RegExp(`^${He(i)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:"time",message:i.message}),t.dirty())}else"duration"===i.kind?Le.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"duration",code:de.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?(r=e.data,("v4"!==(s=i.version)&&s||!ze.test(r))&&("v6"!==s&&s||!qe.test(r))&&(n=this._getOrReturnCtx(e,n),me(n,{validation:"ip",code:de.invalid_string,message:i.message}),t.dirty())):"base64"===i.kind?De.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"base64",code:de.invalid_string,message:i.message}),t.dirty()):te.assertNever(i);var r,s;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:de.invalid_string,...Se.errToObj(n)})}_addCheck(e){return new We({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Se.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...Se.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...Se.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Se.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Se.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Se.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Se.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Se.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Se.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Se.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Se.errToObj(t)})}nonempty(e){return this.min(1,Se.errToObj(e))}trim(){return new We({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new We({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new We({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Je(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r;return parseInt(e.toFixed(s).replace(".",""))%parseInt(t.toFixed(s).replace(".",""))/Math.pow(10,s)}We.create=e=>{var t;return new We({checks:[],typeName:Lt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ie(e)})};class Ye extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==oe.number){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.number,received:t.parsedType}),ye}let t;const n=new ge;for(const r of this._def.checks)if("int"===r.kind)te.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:de.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Je(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:de.not_finite,message:r.message}),n.dirty()):te.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Se.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Se.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Se.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Se.toString(t))}setLimit(e,t,n,r){return new Ye({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Se.toString(r)}]})}_addCheck(e){return new Ye({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Se.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Se.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&te.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ye.create=e=>new Ye({checks:[],typeName:Lt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Ie(e)});class Ge extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==oe.bigint){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.bigint,received:t.parsedType}),ye}let t;const n=new ge;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):te.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Se.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Se.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Se.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Se.toString(t))}setLimit(e,t,n,r){return new Ge({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Se.toString(r)}]})}_addCheck(e){return new Ge({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Ge.create=e=>{var t;return new Ge({checks:[],typeName:Lt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ie(e)})};class Xe extends je{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==oe.boolean){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.boolean,received:t.parsedType}),ye}return _e(e.data)}}Xe.create=e=>new Xe({typeName:Lt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Ie(e)});class Qe extends je{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==oe.date){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.date,received:t.parsedType}),ye}if(isNaN(e.data.getTime())){return me(this._getOrReturnCtx(e),{code:de.invalid_date}),ye}const t=new ge;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):te.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Se.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Se.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Qe.create=e=>new Qe({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Lt.ZodDate,...Ie(e)});class et extends je{_parse(e){if(this._getType(e)!==oe.symbol){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.symbol,received:t.parsedType}),ye}return _e(e.data)}}et.create=e=>new et({typeName:Lt.ZodSymbol,...Ie(e)});class tt extends je{_parse(e){if(this._getType(e)!==oe.undefined){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.undefined,received:t.parsedType}),ye}return _e(e.data)}}tt.create=e=>new tt({typeName:Lt.ZodUndefined,...Ie(e)});class nt extends je{_parse(e){if(this._getType(e)!==oe.null){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.null,received:t.parsedType}),ye}return _e(e.data)}}nt.create=e=>new nt({typeName:Lt.ZodNull,...Ie(e)});class rt extends je{constructor(){super(...arguments),this._any=!0}_parse(e){return _e(e.data)}}rt.create=e=>new rt({typeName:Lt.ZodAny,...Ie(e)});class st extends je{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _e(e.data)}}st.create=e=>new st({typeName:Lt.ZodUnknown,...Ie(e)});class it extends je{_parse(e){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.never,received:t.parsedType}),ye}}it.create=e=>new it({typeName:Lt.ZodNever,...Ie(e)});class at extends je{_parse(e){if(this._getType(e)!==oe.undefined){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.void,received:t.parsedType}),ye}return _e(e.data)}}at.create=e=>new at({typeName:Lt.ZodVoid,...Ie(e)});class ot extends je{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==oe.array)return me(t,{code:de.invalid_type,expected:oe.array,received:t.parsedType}),ye;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,s=t.data.length<r.exactLength.value;(e||s)&&(me(t,{code:e?de.too_big:de.too_small,minimum:s?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(me(t,{code:de.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(me(t,{code:de.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new Te(t,e,t.path,n))))).then((e=>ge.mergeArray(n,e)));const s=[...t.data].map(((e,n)=>r.type._parseSync(new Te(t,e,t.path,n))));return ge.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new ot({...this._def,minLength:{value:e,message:Se.toString(t)}})}max(e,t){return new ot({...this._def,maxLength:{value:e,message:Se.toString(t)}})}length(e,t){return new ot({...this._def,exactLength:{value:e,message:Se.toString(t)}})}nonempty(e){return this.min(1,e)}}function ct(e){if(e instanceof dt){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Zt.create(ct(r))}return new dt({...e._def,shape:()=>t})}return e instanceof ot?new ot({...e._def,type:ct(e.element)}):e instanceof Zt?Zt.create(ct(e.unwrap())):e instanceof Nt?Nt.create(ct(e.unwrap())):e instanceof mt?mt.create(e.items.map((e=>ct(e)))):e}ot.create=(e,t)=>new ot({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Lt.ZodArray,...Ie(t)});class dt extends je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=te.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==oe.object){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.object,received:t.parsedType}),ye}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:s}=this._getCached(),i=[];if(!(this._def.catchall instanceof it&&"strip"===this._def.unknownKeys))for(const e in n.data)s.includes(e)||i.push(e);const a=[];for(const e of s){const t=r[e],s=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new Te(n,s,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof it){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(me(n,{code:de.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new Te(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>ge.mergeObjectSync(t,e))):ge.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return Se.errToObj,new dt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,s,i,a;const o=null!==(i=null===(s=(r=this._def).errorMap)||void 0===s?void 0:s.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=Se.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new dt({...this._def,unknownKeys:"strip"})}passthrough(){return new dt({...this._def,unknownKeys:"passthrough"})}extend(e){return new dt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Lt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new dt({...this._def,catchall:e})}pick(e){const t={};return te.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new dt({...this._def,shape:()=>t})}omit(e){const t={};return te.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new dt({...this._def,shape:()=>t})}deepPartial(){return ct(this)}partial(e){const t={};return te.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new dt({...this._def,shape:()=>t})}required(e){const t={};return te.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Zt;)e=e._def.innerType;t[n]=e}})),new dt({...this._def,shape:()=>t})}keyof(){return xt(te.objectKeys(this.shape))}}dt.create=(e,t)=>new dt({shape:()=>e,unknownKeys:"strip",catchall:it.create(),typeName:Lt.ZodObject,...Ie(t)}),dt.strictCreate=(e,t)=>new dt({shape:()=>e,unknownKeys:"strict",catchall:it.create(),typeName:Lt.ZodObject,...Ie(t)}),dt.lazycreate=(e,t)=>new dt({shape:e,unknownKeys:"strip",catchall:it.create(),typeName:Lt.ZodObject,...Ie(t)});class ut extends je{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new ue(e.ctx.common.issues)));return me(t,{code:de.invalid_union,unionErrors:n}),ye}));{let e;const r=[];for(const s of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const s=r.map((e=>new ue(e)));return me(t,{code:de.invalid_union,unionErrors:s}),ye}}get options(){return this._def.options}}ut.create=(e,t)=>new ut({options:e,typeName:Lt.ZodUnion,...Ie(t)});const lt=e=>e instanceof wt?lt(e.schema):e instanceof St?lt(e.innerType()):e instanceof bt?[e.value]:e instanceof Et?e.options:e instanceof kt?te.objectValues(e.enum):e instanceof Tt?lt(e._def.innerType):e instanceof tt?[void 0]:e instanceof nt?[null]:e instanceof Zt?[void 0,...lt(e.unwrap())]:e instanceof Nt?[null,...lt(e.unwrap())]:e instanceof Ct||e instanceof Rt?lt(e.unwrap()):e instanceof At?lt(e._def.innerType):[];class ht extends je{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.object)return me(t,{code:de.invalid_type,expected:oe.object,received:t.parsedType}),ye;const n=this.discriminator,r=t.data[n],s=this.optionsMap.get(r);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(me(t,{code:de.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=lt(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \\`${e}\\` could not be extracted from all schema options`);for(const s of t){if(r.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);r.set(s,n)}}return new ht({typeName:Lt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Ie(n)})}}function ft(e,t){const n=ce(e),r=ce(t);if(e===t)return{valid:!0,data:e};if(n===oe.object&&r===oe.object){const n=te.objectKeys(t),r=te.objectKeys(e).filter((e=>-1!==n.indexOf(e))),s={...e,...t};for(const n of r){const r=ft(e[n],t[n]);if(!r.valid)return{valid:!1};s[n]=r.data}return{valid:!0,data:s}}if(n===oe.array&&r===oe.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const s=ft(e[r],t[r]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===oe.date&&r===oe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class pt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(we(e)||we(r))return ye;const s=ft(e.value,r.value);return s.valid?((be(e)||be(r))&&t.dirty(),{status:t.value,value:s.data}):(me(n,{code:de.invalid_intersection_types}),ye)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}pt.create=(e,t,n)=>new pt({left:e,right:t,typeName:Lt.ZodIntersection,...Ie(n)});class mt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.array)return me(n,{code:de.invalid_type,expected:oe.array,received:n.parsedType}),ye;if(n.data.length<this._def.items.length)return me(n,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&n.data.length>this._def.items.length&&(me(n,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Te(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>ge.mergeArray(t,e))):ge.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new mt({...this._def,rest:e})}}mt.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mt({items:e,typeName:Lt.ZodTuple,rest:null,...Ie(t)})};class gt extends je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.object)return me(n,{code:de.invalid_type,expected:oe.object,received:n.parsedType}),ye;const r=[],s=this._def.keyType,i=this._def.valueType;for(const e in n.data)r.push({key:s._parse(new Te(n,e,n.path,e)),value:i._parse(new Te(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?ge.mergeObjectAsync(t,r):ge.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new gt(t instanceof je?{keyType:e,valueType:t,typeName:Lt.ZodRecord,...Ie(n)}:{keyType:We.create(),valueType:e,typeName:Lt.ZodRecord,...Ie(t)})}}class yt extends je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.map)return me(n,{code:de.invalid_type,expected:oe.map,received:n.parsedType}),ye;const r=this._def.keyType,s=this._def.valueType,i=[...n.data.entries()].map((([e,t],i)=>({key:r._parse(new Te(n,e,n.path,[i,"key"])),value:s._parse(new Te(n,t,n.path,[i,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of i){const r=await n.key,s=await n.value;if("aborted"===r.status||"aborted"===s.status)return ye;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of i){const r=n.key,s=n.value;if("aborted"===r.status||"aborted"===s.status)return ye;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}}}yt.create=(e,t,n)=>new yt({valueType:t,keyType:e,typeName:Lt.ZodMap,...Ie(n)});class vt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.set)return me(n,{code:de.invalid_type,expected:oe.set,received:n.parsedType}),ye;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(me(n,{code:de.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(me(n,{code:de.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const s=this._def.valueType;function i(e){const n=new Set;for(const r of e){if("aborted"===r.status)return ye;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map(((e,t)=>s._parse(new Te(n,e,n.path,t))));return n.common.async?Promise.all(a).then((e=>i(e))):i(a)}min(e,t){return new vt({...this._def,minSize:{value:e,message:Se.toString(t)}})}max(e,t){return new vt({...this._def,maxSize:{value:e,message:Se.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}vt.create=(e,t)=>new vt({valueType:e,minSize:null,maxSize:null,typeName:Lt.ZodSet,...Ie(t)});class _t extends je{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.function)return me(t,{code:de.invalid_type,expected:oe.function,received:t.parsedType}),ye;function n(e,n){return pe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,fe(),le].filter((e=>!!e)),issueData:{code:de.invalid_arguments,argumentsError:n}})}function r(e,n){return pe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,fe(),le].filter((e=>!!e)),issueData:{code:de.invalid_return_type,returnTypeError:n}})}const s={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof Ot){const e=this;return _e((async function(...t){const a=new ue([]),o=await e._def.args.parseAsync(t,s).catch((e=>{throw a.addIssue(n(t,e)),a})),c=await Reflect.apply(i,this,o);return await e._def.returns._def.type.parseAsync(c,s).catch((e=>{throw a.addIssue(r(c,e)),a}))}))}{const e=this;return _e((function(...t){const a=e._def.args.safeParse(t,s);if(!a.success)throw new ue([n(t,a.error)]);const o=Reflect.apply(i,this,a.data),c=e._def.returns.safeParse(o,s);if(!c.success)throw new ue([r(o,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new _t({...this._def,args:mt.create(e).rest(st.create())})}returns(e){return new _t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new _t({args:e||mt.create([]).rest(st.create()),returns:t||st.create(),typeName:Lt.ZodFunction,...Ie(n)})}}class wt extends je{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}wt.create=(e,t)=>new wt({getter:e,typeName:Lt.ZodLazy,...Ie(t)});class bt extends je{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return me(t,{received:t.data,code:de.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}function xt(e,t){return new Et({values:e,typeName:Lt.ZodEnum,...Ie(t)})}bt.create=(e,t)=>new bt({value:e,typeName:Lt.ZodLiteral,...Ie(t)});class Et extends je{constructor(){super(...arguments),Ze.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return me(t,{expected:te.joinValues(n),received:t.parsedType,code:de.invalid_type}),ye}if(ke(this,Ze,"f")||Oe(this,Ze,new Set(this._def.values),"f"),!ke(this,Ze,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return me(t,{received:t.data,code:de.invalid_enum_value,options:n}),ye}return _e(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Et.create(e,{...this._def,...t})}exclude(e,t=this._def){return Et.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Ze=new WeakMap,Et.create=xt;class kt extends je{constructor(){super(...arguments),Ne.set(this,void 0)}_parse(e){const t=te.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==oe.string&&n.parsedType!==oe.number){const e=te.objectValues(t);return me(n,{expected:te.joinValues(e),received:n.parsedType,code:de.invalid_type}),ye}if(ke(this,Ne,"f")||Oe(this,Ne,new Set(te.getValidEnumValues(this._def.values)),"f"),!ke(this,Ne,"f").has(e.data)){const e=te.objectValues(t);return me(n,{received:n.data,code:de.invalid_enum_value,options:e}),ye}return _e(e.data)}get enum(){return this._def.values}}Ne=new WeakMap,kt.create=(e,t)=>new kt({values:e,typeName:Lt.ZodNativeEnum,...Ie(t)});class Ot extends je{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.promise&&!1===t.common.async)return me(t,{code:de.invalid_type,expected:oe.promise,received:t.parsedType}),ye;const n=t.parsedType===oe.promise?t.data:Promise.resolve(t.data);return _e(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Ot.create=(e,t)=>new Ot({type:e,typeName:Lt.ZodPromise,...Ie(t)});class St extends je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Lt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:e=>{me(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===r.type){const e=r.transform(n.data,s);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return ye;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?ye:"dirty"===r.status||"dirty"===t.value?ve(r.value):r}));{if("aborted"===t.value)return ye;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?ye:"dirty"===r.status||"dirty"===t.value?ve(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,s);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?ye:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?ye:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!xe(e))return e;const i=r.transform(e.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>xe(e)?Promise.resolve(r.transform(e.value,s)).then((e=>({status:t.value,value:e}))):e))}te.assertNever(r)}}St.create=(e,t,n)=>new St({schema:e,typeName:Lt.ZodEffects,effect:t,...Ie(n)}),St.createWithPreprocess=(e,t,n)=>new St({schema:t,effect:{type:"preprocess",transform:e},typeName:Lt.ZodEffects,...Ie(n)});class Zt extends je{_parse(e){return this._getType(e)===oe.undefined?_e(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zt.create=(e,t)=>new Zt({innerType:e,typeName:Lt.ZodOptional,...Ie(t)});class Nt extends je{_parse(e){return this._getType(e)===oe.null?_e(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Nt.create=(e,t)=>new Nt({innerType:e,typeName:Lt.ZodNullable,...Ie(t)});class Tt extends je{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===oe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Tt.create=(e,t)=>new Tt({innerType:e,typeName:Lt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Ie(t)});class At extends je{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ee(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}At.create=(e,t)=>new At({innerType:e,typeName:Lt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Ie(t)});class It extends je{_parse(e){if(this._getType(e)!==oe.nan){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.nan,received:t.parsedType}),ye}return{status:"valid",value:e.data}}}It.create=e=>new It({typeName:Lt.ZodNaN,...Ie(e)});const jt=Symbol("zod_brand");class Ct extends je{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Bt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ye:"dirty"===e.status?(t.dirty(),ve(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ye:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Bt({in:e,out:t,typeName:Lt.ZodPipeline})}}class Rt extends je{_parse(e){const t=this._def.innerType._parse(e),n=e=>(xe(e)&&(e.value=Object.freeze(e.value)),e);return Ee(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function Pt(e,t={},n){return e?rt.create().superRefine(((r,s)=>{var i,a;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,o=null===(a=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===a||a,c="string"==typeof e?{message:e}:e;s.addIssue({code:"custom",...c,fatal:o})}})):rt.create()}Rt.create=(e,t)=>new Rt({innerType:e,typeName:Lt.ZodReadonly,...Ie(t)});const $t={object:dt.lazycreate};var Lt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Lt||(Lt={}));const Ut=We.create,Mt=Ye.create,zt=It.create,qt=Ge.create,Dt=Xe.create,Ft=Qe.create,Vt=et.create,Ht=tt.create,Kt=nt.create,Wt=rt.create,Jt=st.create,Yt=it.create,Gt=at.create,Xt=ot.create,Qt=dt.create,en=dt.strictCreate,tn=ut.create,nn=ht.create,rn=pt.create,sn=mt.create,an=gt.create,on=yt.create,cn=vt.create,dn=_t.create,un=wt.create,ln=bt.create,hn=Et.create,fn=kt.create,pn=Ot.create,mn=St.create,gn=Zt.create,yn=Nt.create,vn=St.createWithPreprocess,_n=Bt.create,wn={string:e=>We.create({...e,coerce:!0}),number:e=>Ye.create({...e,coerce:!0}),boolean:e=>Xe.create({...e,coerce:!0}),bigint:e=>Ge.create({...e,coerce:!0}),date:e=>Qe.create({...e,coerce:!0})},bn=ye;var xn=Object.freeze({__proto__:null,defaultErrorMap:le,setErrorMap:function(e){he=e},getErrorMap:fe,makeIssue:pe,EMPTY_PATH:[],addIssueToContext:me,ParseStatus:ge,INVALID:ye,DIRTY:ve,OK:_e,isAborted:we,isDirty:be,isValid:xe,isAsync:Ee,get util(){return te},get objectUtil(){return ne},ZodParsedType:oe,getParsedType:ce,ZodType:je,datetimeRegex:Ke,ZodString:We,ZodNumber:Ye,ZodBigInt:Ge,ZodBoolean:Xe,ZodDate:Qe,ZodSymbol:et,ZodUndefined:tt,ZodNull:nt,ZodAny:rt,ZodUnknown:st,ZodNever:it,ZodVoid:at,ZodArray:ot,ZodObject:dt,ZodUnion:ut,ZodDiscriminatedUnion:ht,ZodIntersection:pt,ZodTuple:mt,ZodRecord:gt,ZodMap:yt,ZodSet:vt,ZodFunction:_t,ZodLazy:wt,ZodLiteral:bt,ZodEnum:Et,ZodNativeEnum:kt,ZodPromise:Ot,ZodEffects:St,ZodTransformer:St,ZodOptional:Zt,ZodNullable:Nt,ZodDefault:Tt,ZodCatch:At,ZodNaN:It,BRAND:jt,ZodBranded:Ct,ZodPipeline:Bt,ZodReadonly:Rt,custom:Pt,Schema:je,ZodSchema:je,late:$t,get ZodFirstPartyTypeKind(){return Lt},coerce:wn,any:Wt,array:Xt,bigint:qt,boolean:Dt,date:Ft,discriminatedUnion:nn,effect:mn,enum:hn,function:dn,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Pt((t=>t instanceof e),t),intersection:rn,lazy:un,literal:ln,map:on,nan:zt,nativeEnum:fn,never:Yt,null:Kt,nullable:yn,number:Mt,object:Qt,oboolean:()=>Dt().optional(),onumber:()=>Mt().optional(),optional:gn,ostring:()=>Ut().optional(),pipeline:_n,preprocess:vn,promise:pn,record:an,set:cn,strictObject:en,string:Ut,symbol:Vt,transformer:mn,tuple:sn,undefined:Ht,union:tn,unknown:Jt,void:Gt,NEVER:bn,ZodIssueCode:de,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:ue});function En(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function kn(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function On(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");En(e.outputLen),En(e.blockLen)}function Sn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Zn(e,t){kn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Nn="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const Tn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),An=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function In(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),kn(e),e}class jn{clone(){return this._cloneInto()}}function Cn(e=32){if(Nn&&"function"==typeof Nn.getRandomValues)return Nn.getRandomValues(new Uint8Array(e));if(Nn&&"function"==typeof Nn.randomBytes)return Nn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Bn=(e,t,n)=>e&t^e&n^t&n;class Rn extends jn{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Tn(this.buffer)}update(e){Sn(this);const{view:t,buffer:n,blockLen:r}=this,s=(e=In(e)).length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=Tn(e);for(;r<=s-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sn(this),Zn(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,d=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+d,o,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const a=Tn(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)a.setUint32(4*e,d[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}}const Pn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$n=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ln=new Uint32Array(64);class Un extends Rn{constructor(){super(64,32,8,!1),this.A=0|$n[0],this.B=0|$n[1],this.C=0|$n[2],this.D=0|$n[3],this.E=0|$n[4],this.F=0|$n[5],this.G=0|$n[6],this.H=0|$n[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:a,H:o}=this;return[e,t,n,r,s,i,a,o]}set(e,t,n,r,s,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)Ln[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Ln[e-15],n=Ln[e-2],r=An(t,7)^An(t,18)^t>>>3,s=An(n,17)^An(n,19)^n>>>10;Ln[e]=s+Ln[e-7]+r+Ln[e-16]|0}let{A:n,B:r,C:s,D:i,E:a,F:o,G:c,H:d}=this;for(let e=0;e<64;e++){const t=d+(An(a,6)^An(a,11)^An(a,25))+((u=a)&o^~u&c)+Pn[e]+Ln[e]|0,l=(An(n,2)^An(n,13)^An(n,22))+Bn(n,r,s)|0;d=c,c=o,o=a,a=i+t|0,i=s,s=r,r=n,n=t+l|0}var u;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(n,r,s,i,a,o,c,d)}roundClean(){Ln.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Mn=function(e){const t=t=>e().update(In(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}((()=>new Un));class zn extends jn{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,On(e);const n=In(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return Sn(this),this.iHash.update(e),this}digestInto(e){Sn(this),kn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qn=(e,t,n)=>new zn(e,t).update(n).digest();qn.create=(e,t)=>new zn(e,t);const Dn=BigInt(0),Fn=BigInt(1),Vn=BigInt(2);function Hn(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Kn(e){if(!Hn(e))throw new Error("Uint8Array expected")}function Wn(e,t){if("boolean"!=typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const Jn=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Yn(e){Kn(e);let t="";for(let n=0;n<e.length;n++)t+=Jn[e[n]];return t}function Gn(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Xn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Qn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function er(e){return e>=Qn._0&&e<=Qn._9?e-Qn._0:e>=Qn._A&&e<=Qn._F?e-(Qn._A-10):e>=Qn._a&&e<=Qn._f?e-(Qn._a-10):void 0}function tr(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=er(e.charCodeAt(s)),i=er(e.charCodeAt(s+1));if(void 0===n||void 0===i){const t=e[s]+e[s+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+s)}r[t]=16*n+i}return r}function nr(e){return Xn(Yn(e))}function rr(e){return Kn(e),Xn(Yn(Uint8Array.from(e).reverse()))}function sr(e,t){return tr(e.toString(16).padStart(2*t,"0"))}function ir(e,t){return sr(e,t).reverse()}function ar(e,t,n){let r;if("string"==typeof t)try{r=tr(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!Hn(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return r}function or(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];Kn(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}const cr=e=>"bigint"==typeof e&&Dn<=e;function dr(e,t,n){return cr(e)&&cr(t)&&cr(n)&&t<=e&&e<n}function ur(e,t,n,r){if(!dr(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)}function lr(e){let t;for(t=0;e>Dn;e>>=Fn,t+=1);return t}const hr=e=>(Vn<<BigInt(e-1))-Fn,fr=e=>new Uint8Array(e),pr=e=>Uint8Array.from(e);function mr(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=fr(e),s=fr(e),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...e)=>n(s,r,...e),c=(e=fr())=>{s=o(pr([0]),e),r=o(),0!==e.length&&(s=o(pr([1]),e),r=o())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=o();const t=r.slice();n.push(t),e+=r.length}return or(...n)};return(e,t)=>{let n;for(a(),c(e);!(n=t(d()));)c();return a(),n}}const gr={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Hn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function yr(e,t,n={}){const r=(t,n,r)=>{const s=gr[n];if("function"!=typeof s)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if(!(r&&void 0===i||s(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}function vr(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(void 0!==s)return s;const i=e(n,...r);return t.set(n,i),i}}const _r=BigInt(0),wr=BigInt(1),br=BigInt(2),xr=BigInt(3),Er=BigInt(4),kr=BigInt(5),Or=BigInt(8);BigInt(9),BigInt(16);function Sr(e,t){const n=e%t;return n>=_r?n:t+n}function Zr(e,t,n){if(n<=_r||t<_r)throw new Error("Expected power/modulo > 0");if(n===wr)return _r;let r=wr;for(;t>_r;)t&wr&&(r=r*e%n),e=e*e%n,t>>=wr;return r}function Nr(e,t,n){let r=e;for(;t-- >_r;)r*=r,r%=n;return r}function Tr(e,t){if(e===_r||t<=_r)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Sr(e,t),r=t,s=_r,i=wr,a=wr,o=_r;for(;n!==_r;){const e=r/n,t=r%n,c=s-a*e,d=i-o*e;r=n,n=t,s=a,i=o,a=c,o=d}if(r!==wr)throw new Error("invert: does not exist");return Sr(s,t)}function Ar(e){if(e%Er===xr){const t=(e+wr)/Er;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Or===kr){const t=(e-kr)/Or;return function(e,n){const r=e.mul(n,br),s=e.pow(r,t),i=e.mul(n,s),a=e.mul(e.mul(i,br),s),o=e.mul(i,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),n))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-wr)/br;let n,r,s;for(n=e-wr,r=0;n%br===_r;n/=br,r++);for(s=br;s<e&&Zr(s,t,e)!==e-wr;s++);if(1===r){const t=(e+wr)/Er;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+wr)/br;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=r,c=e.pow(e.mul(e.ONE,s),n),d=e.pow(a,i),u=e.pow(a,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,wr<<BigInt(o-t-1));c=e.sqr(n),d=e.mul(d,n),u=e.mul(u,c),o=t}return d}}(e)}const Ir=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jr(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Cr(e,t,n=!1,r={}){if(e<=_r)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:i}=jr(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Ar(e),o=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:hr(s),ZERO:_r,ONE:wr,create:t=>Sr(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return _r<=t&&t<e},is0:e=>e===_r,isOdd:e=>(e&wr)===wr,neg:t=>Sr(-t,e),eql:(e,t)=>e===t,sqr:t=>Sr(t*t,e),add:(t,n)=>Sr(t+n,e),sub:(t,n)=>Sr(t-n,e),mul:(t,n)=>Sr(t*n,e),pow:(e,t)=>function(e,t,n){if(n<_r)throw new Error("Expected power > 0");if(n===_r)return e.ONE;if(n===wr)return t;let r=e.ONE,s=t;for(;n>_r;)n&wr&&(r=e.mul(r,s)),s=e.sqr(s),n>>=wr;return r}(o,e,t),div:(t,n)=>Sr(t*Tr(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Tr(t,e),sqrt:r.sqrt||(e=>a(o,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,s)=>e.is0(r)?t:(n[s]=t,e.mul(t,r))),e.ONE),s=e.inv(r);return t.reduceRight(((t,r,s)=>e.is0(r)?t:(n[s]=e.mul(t,n[s]),e.mul(t,r))),s),n}(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?ir(e,i):sr(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return n?rr(e):nr(e)}});return Object.freeze(o)}function Br(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Rr(e){const t=Br(e);return t+Math.ceil(t/2)}const Pr=BigInt(0),$r=BigInt(1),Lr=new WeakMap,Ur=new WeakMap;function Mr(e){return function(e){const t=Ir.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});yr(e,t)}(e.Fp),yr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jr(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function zr(e){void 0!==e.lowS&&Wn("lowS",e.lowS),void 0!==e.prehash&&Wn("prehash",e.prehash)}const{Ph:qr,aT:Dr}=e,Fr={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:n}=Fr;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Gn(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Gn(s.length/2|128):"";return`${Gn(e)}${i}${s}${t}`},decode(e,t){const{Err:n}=Fr;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++];let i=0;if(!!(128&s)){const e=127&s;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const a=t.subarray(r,r+e);if(a.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===a[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of a)i=i<<8|e;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=s;const a=t.subarray(r,r+i);if(a.length!==i)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=Fr;if(e<Vr)throw new t("integer: negative integers are not allowed");let n=Gn(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected assertion");return n},decode(e){const{Err:t}=Fr;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return qr(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Fr,s="string"==typeof e?Dr(e):e;Kn(s);const{v:i,l:a}=r.decode(48,s);if(a.length)throw new t("Invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:d,l:u}=r.decode(2,c);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(d)}},hexFromSig(e){const{_tlv:t,_int:n}=Fr,r=`${t.encode(2,n.encode(e.r))}${t.encode(2,n.encode(e.s))}`;return t.encode(48,r)}},Vr=BigInt(0),Hr=BigInt(1),Kr=(BigInt(2),BigInt(3));BigInt(4);function Wr(e){const t=function(e){const t=Mr(e);yr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=Cr(t.n,t.nBitLength),s=t.toBytes||((e,t,r)=>{const s=t.toAffine();return or(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function a(e){const{a:r,b:s}=t,i=n.sqr(e),a=n.mul(i,e);return n.add(n.add(a,n.mul(e,r)),s)}if(!n.eql(n.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:s,n:i}=t;if(n&&"bigint"!=typeof e){if(Hn(e)&&(e=Yn(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let a;try{a="bigint"==typeof e?e:nr(ar("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return s&&(a=Sr(a,i)),ur("private key",a,Hr,i),a}function c(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const d=vr(((e,t)=>{const{px:r,py:s,pz:i}=e;if(n.eql(i,n.ONE))return{x:r,y:s};const a=e.is0();null==t&&(t=a?n.ONE:n.inv(i));const o=n.mul(r,t),c=n.mul(s,t),d=n.mul(i,t);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(d,n.ONE))throw new Error("invZ was invalid");return{x:o,y:c}})),u=vr((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:s}=e.toAffine();if(!n.isValid(r)||!n.isValid(s))throw new Error("bad point: x or y not FE");const i=n.sqr(s),o=a(r);if(!n.eql(i,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(r)?l.ZERO:new l(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(i(ar("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(o(e))}static msm(e,t){return function(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((e,n)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${n}`)})),n.forEach(((t,n)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${n}`)}));const s=lr(BigInt(n.length)),i=s>12?s-3:s>4?s-2:s?2:1,a=(1<<i)-1,o=new Array(a+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/i)*i;let d=e.ZERO;for(let t=c;t>=0;t-=i){o.fill(e.ZERO);for(let e=0;e<r.length;e++){const s=r[e],i=Number(s>>BigInt(t)&BigInt(a));o[i]=o[i].add(n[e])}let s=e.ZERO;for(let t=o.length-1,n=e.ZERO;t>0;t--)n=n.add(o[t]),s=s.add(n);if(d=d.add(s),0!==t)for(let e=0;e<i;e++)d=d.double()}return d}(l,r,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){u(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn\'t support isOdd")}equals(e){c(e);const{px:t,py:r,pz:s}=this,{px:i,py:a,pz:o}=e,d=n.eql(n.mul(t,o),n.mul(i,s)),u=n.eql(n.mul(r,o),n.mul(a,s));return d&&u}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,s=n.mul(r,Kr),{px:i,py:a,pz:o}=this;let c=n.ZERO,d=n.ZERO,u=n.ZERO,h=n.mul(i,i),f=n.mul(a,a),p=n.mul(o,o),m=n.mul(i,a);return m=n.add(m,m),u=n.mul(i,o),u=n.add(u,u),c=n.mul(e,u),d=n.mul(s,p),d=n.add(c,d),c=n.sub(f,d),d=n.add(f,d),d=n.mul(c,d),c=n.mul(m,c),u=n.mul(s,u),p=n.mul(e,p),m=n.sub(h,p),m=n.mul(e,m),m=n.add(m,u),u=n.add(h,h),h=n.add(u,h),h=n.add(h,p),h=n.mul(h,m),d=n.add(d,h),p=n.mul(a,o),p=n.add(p,p),h=n.mul(p,m),c=n.sub(c,h),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new l(c,d,u)}add(e){c(e);const{px:r,py:s,pz:i}=this,{px:a,py:o,pz:d}=e;let u=n.ZERO,h=n.ZERO,f=n.ZERO;const p=t.a,m=n.mul(t.b,Kr);let g=n.mul(r,a),y=n.mul(s,o),v=n.mul(i,d),_=n.add(r,s),w=n.add(a,o);_=n.mul(_,w),w=n.add(g,y),_=n.sub(_,w),w=n.add(r,i);let b=n.add(a,d);return w=n.mul(w,b),b=n.add(g,v),w=n.sub(w,b),b=n.add(s,i),u=n.add(o,d),b=n.mul(b,u),u=n.add(y,v),b=n.sub(b,u),f=n.mul(p,w),u=n.mul(m,v),f=n.add(u,f),u=n.sub(y,f),f=n.add(y,f),h=n.mul(u,f),y=n.add(g,g),y=n.add(y,g),v=n.mul(p,v),w=n.mul(m,w),y=n.add(y,v),v=n.sub(g,v),v=n.mul(p,v),w=n.add(w,v),g=n.mul(y,w),h=n.add(h,g),g=n.mul(b,w),u=n.mul(_,u),u=n.sub(u,g),g=n.mul(_,y),f=n.mul(b,f),f=n.add(f,g),new l(u,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return f.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){ur("scalar",e,Vr,t.n);const r=l.ZERO;if(e===Vr)return r;if(e===Hr)return this;const{endo:s}=t;if(!s)return f.unsafeLadder(this,e);let{k1neg:i,k1:a,k2neg:o,k2:c}=s.splitScalar(e),d=r,u=r,h=this;for(;a>Vr||c>Vr;)a&Hr&&(d=d.add(h)),c&Hr&&(u=u.add(h)),h=h.double(),a>>=Hr,c>>=Hr;return i&&(d=d.negate()),o&&(u=u.negate()),u=new l(n.mul(u.px,s.beta),u.py,u.pz),d.add(u)}multiply(e){const{endo:r,n:s}=t;let i,a;if(ur("scalar",e,Hr,s),r){const{k1neg:t,k1:s,k2neg:o,k2:c}=r.splitScalar(e);let{p:d,f:u}=this.wNAF(s),{p:h,f:p}=this.wNAF(c);d=f.constTimeNegate(t,d),h=f.constTimeNegate(o,h),h=new l(n.mul(h.px,r.beta),h.py,h.pz),i=d.add(h),a=u.add(p)}else{const{p:t,f:n}=this.wNAF(e);i=t,a=n}return l.normalizeZ([i,a])[0]}multiplyAndAddUnsafe(e,t,n){const r=l.BASE,s=(e,t)=>t!==Vr&&t!==Hr&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=s(this,t).add(s(e,n));return i.is0()?void 0:i}toAffine(e){return d(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Hr)return!0;if(n)return n(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Hr?this:n?n(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return Wn("isCompressed",e),this.assertValidity(),s(l,this,e)}toHex(e=!0){return Wn("isCompressed",e),Yn(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,f=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},s=e=>(r(e),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,s=t;for(;n>Pr;)n&$r&&(r=r.add(s)),s=s.double(),n>>=$r;return r},precomputeWindow(e,t){const{windows:n,windowSize:r}=s(t),i=[];let a=e,o=a;for(let e=0;e<n;e++){o=a,i.push(o);for(let e=1;e<r;e++)o=o.add(a),i.push(o);a=o.double()}return i},wNAF(t,r,i){const{windows:a,windowSize:o}=s(t);let c=e.ZERO,d=e.BASE;const u=BigInt(2**t-1),l=2**t,h=BigInt(t);for(let e=0;e<a;e++){const t=e*o;let s=Number(i&u);i>>=h,s>o&&(s-=l,i+=$r);const a=t,f=t+Math.abs(s)-1,p=e%2!=0,m=s<0;0===s?d=d.add(n(p,r[a])):c=c.add(n(m,r[f]))}return{p:c,f:d}},wNAFCached(e,t,n){const r=Ur.get(e)||1;let s=Lr.get(e);return s||(s=this.precomputeWindow(e,r),1!==r&&Lr.set(e,n(s))),this.wNAF(r,s,t)},setWindowSize(e,t){r(t),Ur.set(e,t),Lr.delete(e)}}}(l,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:o,weierstrassEquation:a,isWithinCurveOrder:function(e){return dr(e,Hr,t.n)}}}function Jr(e){const t=function(e){const t=Mr(e);return yr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,s=n.BYTES+1,i=2*n.BYTES+1;function a(e){return Sr(e,r)}function o(e){return Tr(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:u,isWithinCurveOrder:l}=Wr({...t,toBytes(e,t,r){const s=t.toAffine(),i=n.toBytes(s.x),a=or;return Wn("isCompressed",r),r?a(Uint8Array.from([t.hasEvenY()?2:3]),i):a(Uint8Array.from([4]),i,n.toBytes(s.y))},fromBytes(e){const t=e.length,r=e[0],a=e.subarray(1);if(t!==s||2!==r&&3!==r){if(t===i&&4===r){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}{const e=nr(a);if(!dr(e,Hr,n.ORDER))throw new Error("Point is not on curve");const t=u(e);let s;try{s=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~r)!==((s&Hr)===Hr)&&(s=n.neg(s)),{x:e,y:s}}}}),h=e=>Yn(sr(e,t.nByteLength));function f(e){return e>r>>Hr}const p=(e,t,n)=>nr(e.slice(t,n));class m{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=ar("compactSignature",e,2*n),new m(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Fr.toSig(ar("DER",e));return new m(t,n)}assertValidity(){ur("r",this.r,Hr,r),ur("s",this.s,Hr,r)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r,s,recovery:i}=this,d=_(ar("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&i?"03":"02",f=c.fromHex(l+h(u)),p=o(u),m=a(-d*p),g=a(s*p),y=c.BASE.multiplyAndAddUnsafe(f,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return tr(this.toDERHex())}toDERHex(){return Fr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return tr(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const g={isValidPrivateKey(e){try{return d(e),!0}catch(e){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const e=Rr(t.n);return function(e,t,n=!1){const r=e.length,s=Br(t),i=Rr(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const a=Sr(n?nr(e):rr(e),t-wr)+wr;return n?ir(a,s):sr(a,s)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=Hn(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===s||r===i:n?r===2*s||r===2*i:e instanceof c}const v=t.bits2int||function(e){const n=nr(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},_=t.bits2int_modN||function(e){return a(v(e))},w=hr(t.nBitLength);function b(e){return ur(`num < 2^${t.nBitLength}`,e,Vr,w),sr(e,t.nByteLength)}function x(e,r,s=E){if(["recovered","canonical"].some((e=>e in s)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=t;let{lowS:h,prehash:p,extraEntropy:g}=s;null==h&&(h=!0),e=ar("msgHash",e),zr(s),p&&(e=ar("prehashed msgHash",i(e)));const y=_(e),w=d(r),x=[b(w),b(y)];if(null!=g&&!1!==g){const e=!0===g?u(n.BYTES):g;x.push(ar("extraEntropy",e))}const k=or(...x),O=y;return{seed:k,k2sig:function(e){const t=v(e);if(!l(t))return;const n=o(t),r=c.BASE.multiply(t).toAffine(),s=a(r.x);if(s===Vr)return;const i=a(n*a(O+s*w));if(i===Vr)return;let d=(r.x===s?0:2)|Number(r.y&Hr),u=i;return h&&f(i)&&(u=function(e){return f(e)?a(-e):e}(i),d^=1),new m(s,u,d)}}}const E={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(d(e)).toRawBytes(n)},sign:function(e,n,r=E){const{seed:s,k2sig:i}=x(e,n,r),a=t;return mr(a.hash.outputLen,a.nByteLength,a.hmac)(s,i)},verify:function(e,n,r,s=k){const i=e;if(n=ar("msgHash",n),r=ar("publicKey",r),"strict"in s)throw new Error("options.strict was renamed to lowS");zr(s);const{lowS:d,prehash:u}=s;let l,h;try{if("string"==typeof i||Hn(i))try{l=m.fromDER(i)}catch(e){if(!(e instanceof Fr.Err))throw e;l=m.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:e,s:t}=i;l=new m(e,t)}}h=c.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(d&&l.hasHighS())return!1;u&&(n=t.hash(n));const{r:f,s:p}=l,g=_(n),y=o(p),v=a(g*y),w=a(f*y),b=c.BASE.multiplyAndAddUnsafe(h,v,w)?.toAffine();return!!b&&a(b.x)===f},ProjectivePoint:c,Signature:m,utils:g}}function Yr(e){return{hash:e,hmac:(t,...n)=>qn(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];kn(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}(...n)),randomBytes:Cn}}const Gr=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Xr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Qr=BigInt(1),es=BigInt(2),ts=(e,t)=>(e+t/es)/t;function ns(e){const t=Gr,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),d=e*e*e%t,u=d*d*e%t,l=Nr(u,n,t)*u%t,h=Nr(l,n,t)*u%t,f=Nr(h,es,t)*d%t,p=Nr(f,s,t)*f%t,m=Nr(p,i,t)*p%t,g=Nr(m,o,t)*m%t,y=Nr(g,c,t)*g%t,v=Nr(y,o,t)*m%t,_=Nr(v,n,t)*u%t,w=Nr(_,a,t)*p%t,b=Nr(w,r,t)*d%t,x=Nr(b,es,t);if(!rs.eql(rs.sqr(x),e))throw new Error("Cannot find square root");return x}const rs=Cr(Gr,void 0,void 0,{sqrt:ns}),ss=function(e,t){const n=t=>Jr({...e,...Yr(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:rs,n:Xr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Xr,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Qr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=ts(i*e,t),c=ts(-r*e,t);let d=Sr(e-o*n-c*s,t),u=Sr(-o*r-c*i,t);const l=d>a,h=u>a;if(l&&(d=t-d),h&&(u=t-u),d>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:d,k2neg:h,k2:u}}}},Mn);BigInt(0);ss.ProjectivePoint;function is(e,t){return as(e,"pattern",(n=>t.test(n)||`Expected a ${e.type} matching \\`/${t.source}/\\` but received "${n}"`))}function as(e,t,n){return new p({...e,*refiner(r,s){yield*e.refiner(r,s);const i=h(n(r,s),s,e,r);for(const e of i)yield{...e,refinement:t}}})}is(N(),/^(?:0x)?[0-9a-f]+$/iu),is(N(),/^0x[0-9a-f]+$/iu),is(N(),/^0x[0-9a-f]{40}$/u),is(N(),/^0x[0-9a-fA-F]{40}$/u);function os(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}function cs(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const ds=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function us(e){cs(e);let t="";for(let n=0;n<e.length;n++)t+=ds[e[n]];return t}const ls=48,hs=57,fs=65,ps=70,ms=97,gs=102;function ys(e){return e>=ls&&e<=hs?e-ls:e>=fs&&e<=ps?e-(fs-10):e>=ms&&e<=gs?e-(ms-10):void 0}function vs(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=ys(e.charCodeAt(s)),i=ys(e.charCodeAt(s+1));if(void 0===n||void 0===i){const t=e[s]+e[s+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+s)}r[t]=16*n+i}return r}async function _s(){const e=await async function(){return await snap.request({method:"snap_getEntropy",params:{version:1}})}();return vs(os(e))}async function ws(){const e=await _s();return function(e){return`0x${us(e)}`}(ss.getPublicKey(e))}const bs=xn.object({message:xn.string().startsWith("metamask:")});const xs=async({request:e})=>{switch(e.method){case"getPublicKey":return ws();case"signMessage":{const{params:t}=e;!function(e){try{bs.parse(e)}catch{throw re({message:"`signMessage`, must take a `message` parameter that must begin with `metamask:`"})}}(t);const{message:n}=t;return await async function(e){const t=await _s(),n=Mn(e);return`0x${ss.sign(n,t).toCompactHex()}`}(n)}default:throw se({data:{method:e.method}})}}})();var s=exports;for(var i in r)s[i]=r[i];r.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();'}],removable:!1}}}},{package:"@metamask/message-signing-snap",file:"node_modules/@metamask/message-signing-snap/dist/preinstalled-snap.json"}],[165,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}}}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[166,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[167,{"@metamask/controller-utils":1216,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/controller-utils");r.default={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach((e=>{r.add(e.chainId)}));for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,s.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[168,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[169,{"../../../shared/modules/hexstring-utils":5168,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/modules/hexstring-utils");const i="0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",o="DAI",a="SAI";function c(e={}){return e&&"object"==typeof e&&e.symbol===o&&(0,s.toChecksumHexAddress)(e.address)===i}r.default={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)c(t)&&(t.symbol=a);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)c(e)&&(e.symbol=a)}}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[17,{"../../../shared/constants/metametrics":5124,"../../../shared/modules/hexstring-utils":5168,"@metamask/base-controller":1190,"@metamask/controller-utils":1216,"@metamask/message-manager":1640,"@metamask/utils":2850,buffer:3645,events:3952,loglevel:4469},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isEIP1024EncryptedMessage=r.getDefaultState=r.default=void 0;var n=d(e("events")),s=d(e("loglevel")),i=e("@metamask/message-manager"),o=e("@metamask/base-controller"),a=e("@metamask/controller-utils"),c=e("@metamask/utils"),u=e("../../../shared/constants/metametrics"),l=e("../../../shared/modules/hexstring-utils");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f={unapprovedDecryptMsgs:{persist:!1,anonymous:!1},unapprovedDecryptMsgCount:{persist:!1,anonymous:!1}},p=e=>!!((0,c.isObject)(e.data)&&(0,c.hasProperty)(e.data,"version")&&(0,c.hasProperty)(e.data,"nonce")&&(0,c.hasProperty)(e.data,"ephemPublicKey")&&(0,c.hasProperty)(e.data,"ciphertext"));r.isEIP1024EncryptedMessage=p;const m=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=m;class g extends o.BaseController{constructor({getState:e,metricsEvent:t,messenger:r}){super({metadata:f,messenger:r,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),h(this,"hub",void 0),h(this,"_getState",void 0),h(this,"_metricsEvent",void 0),h(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this.hub=new n.default,this._decryptMessageManager=new i.DecryptMessageManager(undefined,undefined,undefined,["decrypted"]),this._decryptMessageManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._decryptMessageManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e)})),this._subscribeToMessageState(this._decryptMessageManager,((e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r}))}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})))}clearUnapproved(){this._decryptMessageManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);if(r.data=this._parseMessageData(r.data),!p(r))throw new Error("Invalid encrypted data.");const n=await this.messagingSystem.call("KeyringController:decryptMessage",r);this._decryptMessageManager.setMessageStatusAndResult(t,n,"decrypted"),this._acceptApproval(t)}catch(e){throw s.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!p(e))throw new Error("Invalid encrypted data.");const r=await this.messagingSystem.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:u.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||a.ORIGIN_METAMASK;try{this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:a.ApprovalType.EthDecrypt},!0)}catch(e){s.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,l.stripHexPrefix)(e),n=t.from(r,"hex");return JSON.parse(n.toString("utf8"))}_rejectApproval(e){try{this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){s.default.info("Error rejecting request to approval controller",e)}}}r.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[170,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[171,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[172,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[173,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[174,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[1742,{"@ethersproject/providers":551,assert:3641,"async-mutex":1747},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.NonceTracker=void 0;const s=n(e("assert")),i=e("async-mutex"),{Web3Provider:o}=e("@ethersproject/providers");r.NonceTracker=class{constructor(e){this.provider=e.provider,this.blockTracker=e.blockTracker,this.getPendingTransactions=e.getPendingTransactions,this.getConfirmedTransactions=e.getConfirmedTransactions,this.lockMap={}}async getGlobalLock(){const e=this._lookupMutex("global");return{releaseLock:await e.acquire()}}async getNonceLock(e){await this._globalMutexFree();const t=await this._takeMutex(e);try{const r=await this._getNetworkNextNonce(e),n=this._getHighestLocallyConfirmed(e),i=r.nonce,o=Math.max(i,n),a=this.getPendingTransactions(e),c=this._getHighestContinuousFrom(a,o),u={params:{highestLocallyConfirmed:n,nextNetworkNonce:i,highestSuggested:o},local:c,network:r},l=Math.max(r.nonce,c.nonce);return s.default(Number.isInteger(l),`nonce-tracker - nextNonce is not an integer - got: (${typeof l}) "${l}"`),{nextNonce:l,nonceDetails:u,releaseLock:t}}catch(e){throw t(),e}}async _globalMutexFree(){const e=this._lookupMutex("global");(await e.acquire())()}async _takeMutex(e){const t=this._lookupMutex(e);return await t.acquire()}_lookupMutex(e){let t=this.lockMap[e];return t||(t=new i.Mutex,this.lockMap[e]=t),t}async _getNetworkNextNonce(e){const t=await this.blockTracker.getLatestBlock(),r=await new o(this.provider).getTransactionCount(e,t);return s.default(Number.isInteger(r),`nonce-tracker - baseCount is not an integer - got: (${typeof r}) "${r}"`),{name:"network",nonce:r,details:{blockNumber:t,baseCount:r}}}_getHighestLocallyConfirmed(e){const t=this.getConfirmedTransactions(e),r=this._getHighestNonce(t);return Number.isInteger(r)?r+1:0}_getHighestNonce(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return s.default("string"==typeof t,"nonces should be hex strings"),parseInt(t,16)}));return Math.max.apply(null,t)}_getHighestContinuousFrom(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return s.default("string"==typeof t,"nonces should be hex strings"),parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return{name:"local",nonce:n,details:{startPoint:t,highest:n}}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker",file:"node_modules/@metamask/nonce-tracker/dist/NonceTracker.js"}],[1743,{"./NonceTracker":1742},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NonceTracker=void 0;var n=e("./NonceTracker");Object.defineProperty(r,"NonceTracker",{enumerable:!0,get:function(){return n.NonceTracker}})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker",file:"node_modules/@metamask/nonce-tracker/dist/index.js"}],[1744,{"./Semaphore":1745,tslib:4994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("tslib"),s=e("./Semaphore"),i=function(){function e(e){this._semaphore=new s.default(1,e)}return e.prototype.acquire=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e;return(0,n.__generator)(this,(function(t){switch(t.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=t.sent(),[2,e[1]]}}))}))},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive((function(){return e()}))},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.waitForUnlock=function(){return this._semaphore.waitForUnlock()},e.prototype.release=function(){this._semaphore.release()},e.prototype.cancel=function(){return this._semaphore.cancel()},e}();r.default=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/Mutex.js"}],[1745,{"./errors":1746,tslib:4994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("tslib"),s=e("./errors"),i=function(){function e(e,t){if(void 0===t&&(t=s.E_CANCELED),this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return e.prototype.acquire=function(){var e=this,t=this.isLocked(),r=new Promise((function(t,r){return e._queue.push({resolve:t,reject:r})}));return t||this._dispatch(),r},e.prototype.runExclusive=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,r,s;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.acquire()];case 1:t=n.sent(),r=t[0],s=t[1],n.label=2;case 2:return n.trys.push([2,,4,5]),[4,e(r)];case 3:return[2,n.sent()];case 4:return s(),[7];case 5:return[2]}}))}))},e.prototype.waitForUnlock=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e=this;return(0,n.__generator)(this,(function(t){return this.isLocked()?[2,new Promise((function(t){return e._waiters.push({resolve:t})}))]:[2,Promise.resolve()]}))}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=undefined,e()}},e.prototype.cancel=function(){var e=this;this._queue.forEach((function(t){return t.reject(e._cancelError)})),this._queue=[]},e.prototype._dispatch=function(){var e=this,t=this._queue.shift();if(t){var r=!1;this._currentReleaser=function(){r||(r=!0,e._value++,e._resolveWaiters(),e._dispatch())},t.resolve([this._value--,this._currentReleaser])}},e.prototype._resolveWaiters=function(){this._waiters.forEach((function(e){return e.resolve()})),this._waiters=[]},e}();r.default=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/Semaphore.js"}],[1746,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.E_CANCELED=r.E_ALREADY_LOCKED=r.E_TIMEOUT=void 0,r.E_TIMEOUT=new Error("timeout while waiting for mutex to become available"),r.E_ALREADY_LOCKED=new Error("mutex already locked"),r.E_CANCELED=new Error("request for lock canceled")}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/errors.js"}],[1747,{"./Mutex":1744,"./Semaphore":1745,"./errors":1746,"./tryAcquire":1748,"./withTimeout":1749,tslib:4994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tryAcquire=r.withTimeout=r.Semaphore=r.Mutex=void 0;var n=e("tslib"),s=e("./Mutex");Object.defineProperty(r,"Mutex",{enumerable:!0,get:function(){return s.default}});var i=e("./Semaphore");Object.defineProperty(r,"Semaphore",{enumerable:!0,get:function(){return i.default}});var o=e("./withTimeout");Object.defineProperty(r,"withTimeout",{enumerable:!0,get:function(){return o.withTimeout}});var a=e("./tryAcquire");Object.defineProperty(r,"tryAcquire",{enumerable:!0,get:function(){return a.tryAcquire}}),(0,n.__exportStar)(e("./errors"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/index.js"}],[1748,{"./errors":1746,"./withTimeout":1749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tryAcquire=void 0;var n=e("./errors"),s=e("./withTimeout");r.tryAcquire=function(e,t){return void 0===t&&(t=n.E_ALREADY_LOCKED),(0,s.withTimeout)(e,0,t)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/tryAcquire.js"}],[1749,{"./errors":1746,tslib:4994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withTimeout=void 0;var n=e("tslib"),s=e("./errors");r.withTimeout=function(e,t,r){var i=this;return void 0===r&&(r=s.E_TIMEOUT),{acquire:function(){return new Promise((function(s,o){return(0,n.__awaiter)(i,void 0,void 0,(function(){var i,a,c,u;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:i=!1,a=setTimeout((function(){i=!0,o(r)}),t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.acquire()];case 2:return c=n.sent(),i?(Array.isArray(c)?c[1]:c)():(clearTimeout(a),s(c)),[3,4];case 3:return u=n.sent(),i||(clearTimeout(a),o(u)),[3,4];case 4:return[2]}}))}))}))},runExclusive:function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,r;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:t=function(){return undefined},n.label=1;case 1:return n.trys.push([1,,7,8]),[4,this.acquire()];case 2:return r=n.sent(),Array.isArray(r)?(t=r[1],[4,e(r[0])]):[3,4];case 3:return[2,n.sent()];case 4:return t=r,[4,e()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:return t(),[7];case 8:return[2]}}))}))},release:function(){e.release()},cancel:function(){return e.cancel()},waitForUnlock:function(){return e.waitForUnlock()},isLocked:function(){return e.isLocked()}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/withTimeout.js"}],[175,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;s.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};const s=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[1750,{"@metamask/base-controller":1757,"@metamask/utils":1768,nanoid:1779},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("@metamask/utils"),i=e("nanoid"),o="NotificationController",a={notifications:{persist:!0,anonymous:!1}},c={notifications:{}},u=class extends n.BaseController{constructor({messenger:e,state:t}){super({name:o,metadata:a,messenger:e,state:{...c,...t}}),this.messagingSystem.registerActionHandler(`${o}:show`,((e,t)=>this.show(e,t))),this.messagingSystem.registerActionHandler(`${o}:dismiss`,(e=>this.dismiss(e))),this.messagingSystem.registerActionHandler(`${o}:markRead`,(e=>this.markRead(e))),this.messagingSystem.registerActionHandler(`${o}:clear`,(()=>this.clear()))}show(e,t){const r=i.nanoid.call(void 0),n={id:r,origin:e,createdDate:Date.now(),readDate:null,message:t};this.update((e=>{e.notifications[r]=n}))}dismiss(e){this.update((t=>{for(const r of e)s.hasProperty.call(void 0,t.notifications,r)&&delete t.notifications[r]}))}markRead(e){this.update((t=>{for(const r of e)s.hasProperty.call(void 0,t.notifications,r)&&(t.notifications[r].readDate=Date.now())}))}clear(){this.update((()=>({...c})))}};r.NotificationController=u}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/chunk-DR374FE2.js"}],[1751,{"./chunk-DR374FE2.js":1750},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-DR374FE2.js");r.NotificationController=n.NotificationController}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/index.js"}],[1752,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[1753,{"./chunk-UJFCPTF3.js":1755,"./chunk-Z4BLTVTB.js":1756},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,o,a=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,o,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,o).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,o).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,o).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,o).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,a.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1754,{"./chunk-Z4BLTVTB.js":1756,immer:4278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function o(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:o}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,o,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,o]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:o}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return o(e,t,"anonymous")},r.getPersistentState=function(e,t){return o(e,t,"persist")}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[1755,{"./chunk-Z4BLTVTB.js":1756},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,o,a,c,u,l,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,o);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,l=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,a),f.__privateAdd.call(void 0,this,u),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,o,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,o,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,u,l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,a,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,a,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1756,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1757,{"./chunk-FTHCJ6HY.js":1752,"./chunk-G42723LG.js":1753,"./chunk-IURK6TKD.js":1754,"./chunk-UJFCPTF3.js":1755,"./chunk-Z4BLTVTB.js":1756},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),o=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=o.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1758,{"./errors.cjs":1766,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class o extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=o,r.assert=function(e,t="Assertion failed.",r=o){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",a=o){try{(0,n.assert)(e,t)}catch(e){throw i(a,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[1759,{"./assert.cjs":1758,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let o,a;return"base64"===i?o=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),o=String.raw`[-_A-Za-z0-9]`),a=r?new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,n.pattern)(e,a)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[176,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[1760,{"./assert.cjs":1758,"./hex.cjs":1767,"@scure/base":2919,buffer:3645},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),o=48,a=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<a?o:c),u=s-(s<a?o:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[1761,{"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1762,{"./base64.cjs":1759,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[1763,{"./assert.cjs":1758,"./bytes.cjs":1760,"./hex.cjs":1767,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),o=e("./hex.cjs"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[1764,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),o(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),o(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[1765,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1766,{"./misc.cjs":1772,"pony-cause":4600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function o(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=o,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return o(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[1767,{"./assert.cjs":1758,"./bytes.cjs":1760,"@metamask/superstruct":2695,"@noble/hashes/sha3":2900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),o=e("./bytes.cjs");function a(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),a=d((0,o.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=a[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=a,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(a(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[1768,{"./assert.cjs":1758,"./base64.cjs":1759,"./bytes.cjs":1760,"./caip-types.cjs":1761,"./checksum.cjs":1762,"./coercers.cjs":1763,"./collections.cjs":1764,"./encryption-types.cjs":1765,"./errors.cjs":1766,"./hex.cjs":1767,"./json.cjs":1769,"./keyring.cjs":1770,"./logging.cjs":1771,"./misc.cjs":1772,"./number.cjs":1773,"./opaque.cjs":1774,"./promise.cjs":1775,"./time.cjs":1776,"./transaction-types.cjs":1777,"./versions.cjs":1778},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/index.cjs"}],[1769,{"./assert.cjs":1758,"./misc.cjs":1772,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function o({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function a(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!o(r)||e.validator(t,r),refiner:(t,r)=>!o(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=a;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:a(r.JsonStruct),stack:a((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/json.cjs"}],[177,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach((e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())}));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[1770,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[1771,{debug:3789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[1772,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[1773,{"./assert.cjs":1758,"./hex.cjs":1767},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/number.cjs"}],[1774,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[1775,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[1776,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/time.cjs"}],[1777,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1778,{"./assert.cjs":1758,"@metamask/superstruct":2695,semver:4923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[1779,{"./url-alphabet/index.cjs":1780},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let o="";for(;;){let t=r(s),a=s;for(;a--;)if(o+=e[t[a]&n]||"",o.length===i)return o}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,s),customRandom:i,urlAlphabet:n,random:s}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/index.browser.cjs"}],[178,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:48,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,n,o,a,c,u,l;null===(t=e.NetworkController)||void 0===t||delete t.settings;const d=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==d.type||"string"==typeof d.chainId&&i.test(d.chainId))&&"localhost"!==d.type){if(null!==(n=e.NetworkController)&&void 0!==n&&n.provider){var h;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(h=e.NetworkController)||void 0===h||null===(h=h.provider)||void 0===h||delete h.rpcTarget}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(o=e.CachedBalancesController)||void 0===o||delete o.cachedBalances;const f=null===(a=e.TransactionController)||void 0===a?void 0:a.transactions;Array.isArray(f)&&f.forEach((e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&s.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))}));const p=(null===(c=e.AddressBookController)||void 0===c?void 0:c.addressBook)||{};Object.keys(p).forEach((e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach((e=>{e&&"object"==typeof e&&(e.chainId=t)}))}(p[e],t),p[t]?function(e,t,r){const n=e[t]||{},s={...e[r]};Object.keys(n).forEach((e=>{if(s[e]&&"object"==typeof s[e]){const t={};new Set([...Object.keys(s[e]),...Object.keys(n[e]||{})]).forEach((r=>{var i;t[r]=s[e][r]||(null===(i=n[e])||void 0===i?void 0:i[r])||""})),s[e]=t}else n[e]&&"object"==typeof n[e]&&(s[e]=n[e])})),e[r]=s}(p,e,t):p[t]=p[e],delete p[e]}})),null===(u=e.IncomingTransactionsController)||void 0===u||null===(u=u.incomingTxLastFetchedBlocksByNetwork)||void 0===u||delete u.localhost;const m=null===(l=e.PreferencesController)||void 0===l?void 0:l.accountTokens;m&&Object.keys(m).forEach((e=>{var t,r;const n=(null===(t=m[e])||void 0===t?void 0:t.localhost)||[];if(n.length>0){const t=m[e].rpc||[];t.length>0?m[e].rpc=function(e,t){const r=i(e),n=i(t),s=[];return new Set([...Object.keys(r),...Object.keys(n)]).forEach((e=>{s.push({...r[e],...n[e]})})),s;function i(e){return e.reduce(((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e)),{})}}(n,t):m[e].rpc=n}null===(r=m[e])||void 0===r||delete r.localhost}));return e}(r),t}};const s=/^0x[0-9a-f]+$/iu,i=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[1780,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[179,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:49,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:n}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),n!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=n,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[18,{"../../../shared/constants/app":5112,"../../../shared/constants/keyring":5121,"../../../shared/constants/metametrics":5124,"@metamask/base-controller":1190,"@metamask/message-manager":1640,events:3952,loglevel:4469},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("events")),s=l(e("loglevel")),i=e("@metamask/message-manager"),o=e("@metamask/base-controller"),a=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/app");function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={unapprovedEncryptionPublicKeyMsgs:{persist:!1,anonymous:!1},unapprovedEncryptionPublicKeyMsgCount:{persist:!1,anonymous:!1}};class f extends o.BaseController{constructor({messenger:e,getEncryptionPublicKey:t,getAccountKeyringType:r,getState:s,metricsEvent:o}){super({name:"EncryptionPublicKeyController",metadata:h,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),d(this,"hub",void 0),d(this,"_getEncryptionPublicKey",void 0),d(this,"_getAccountKeyringType",void 0),d(this,"_getState",void 0),d(this,"_encryptionPublicKeyManager",void 0),d(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=t,this._getAccountKeyringType=r,this._getState=s,this._metricsEvent=o,this.hub=new n.default,this._encryptionPublicKeyManager=new i.EncryptionPublicKeyManager(undefined,undefined,undefined,["received"]),this._encryptionPublicKeyManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._encryptionPublicKeyManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e,"eth_getEncryptionPublicKey")})),this._subscribeToMessageState(this._encryptionPublicKeyManager,((e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r}))}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case c.KeyringType.ledger:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.trezor:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.lattice:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){s.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),n=await this._getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,n,"received"),this._acceptApproval(t),this._getState()}catch(e){throw s.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)}))}clearUnapproved(){this._encryptionPublicKeyManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:a.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e,t){const r=e.metamaskId,n=e.origin||u.ORIGIN_METAMASK;this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t},!0).catch((()=>{}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=f}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[180,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];r.default={version:50,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=50,s.forEach((e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)})),t}}}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[181,{"../../../shared/constants/network":5128,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:51,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:n,type:i}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},o=null===(r=s.BUILT_IN_NETWORKS[i])||void 0===r?void 0:r.chainId;o&&n!==o&&(e.NetworkController.provider.chainId=o);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[182,{"../../../shared/constants/network":5128,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:52,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:n}=e.PreferencesController,i={},o={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){i[e]={},t[e][s.NETWORK_TYPES.RPC]&&n.forEach((r=>{i[e][r.chainId]=t[e][s.NETWORK_TYPES.RPC]}));for(const r of Object.keys(t[e]))switch(r){case s.NETWORK_TYPES.MAINNET:i[e][s.CHAIN_IDS.MAINNET]=t[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":i[e]["0x3"]=t[e].ropsten;break;case"rinkeby":i[e]["0x4"]=t[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:i[e][s.CHAIN_IDS.GOERLI]=t[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":i[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=i}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){o[e]={},r[e][s.NETWORK_TYPES.RPC]&&n.forEach((t=>{o[e][t.chainId]=r[e][s.NETWORK_TYPES.RPC]}));for(const t of Object.keys(r[e]))switch(t){case s.NETWORK_TYPES.MAINNET:o[e][s.CHAIN_IDS.MAINNET]=r[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":o[e]["0x3"]=r[e].ropsten;break;case"rinkeby":o[e]["0x4"]=r[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:o[e][s.CHAIN_IDS.GOERLI]=r[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":o[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=o}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[183,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:53,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const n=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,i=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(n)&&n.forEach((e=>{e&&(e.type!==s.TransactionType.retry&&e.type!==s.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)}));if(i){Object.entries(i).forEach((([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:s.TransactionType.incoming})}))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[1832,{"./ObservableStore":1834},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1833,{"./ObservableStore":1834},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/MergedStore.js"}],[1834,{"@metamask/safe-event-emitter":2127},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),e===undefined?this._state={}:this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[1835,{"readable-stream":4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("readable-stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/asStream.js"}],[1836,{"./ComposedStore":1832,"./MergedStore":1833,"./ObservableStore":1834,"./asStream":1835,"./transform":1837},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/index.js"}],[1837,{"readable-stream":4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("readable-stream");r.storeTransformStream=function(e){return new n.Transform({objectMode:!0,transform:(t,r,n)=>{try{const r=e(t);return n(undefined,r),undefined}catch(e){return n(e),undefined}}})}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/transform.js"}],[184,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");function s(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}r.default={version:54,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=t.PreferencesController.tokens||[],n=r.filter((({decimals:e})=>s(e)));for(const e of n)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=n;const{accountTokens:i}=t.PreferencesController;if(i&&"object"==typeof i)for(const e of Object.keys(i)){const t=i[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter((({decimals:e})=>s(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=i,t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[185,{"../../../shared/constants/network":5128,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:55,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,n.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,((e,t)=>{var r;return(null===(r=s.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??i})),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId[i],delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};const i="UNKNOWN";s.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},s.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},s.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}],[186,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:56,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=56;const{PreferencesController:r}=t.data;return Array.isArray(null==r?void 0:r.tokens)&&(r.tokens=r.tokens.filter((({address:e})=>e))),null!=r&&r.accountTokens&&"object"==typeof r.accountTokens&&Object.keys(r.accountTokens).forEach((e=>{Object.keys(r.accountTokens[e]).forEach((t=>{r.accountTokens[e][t]=r.accountTokens[e][t].filter((({address:e})=>e))}))})),null!=r&&r.assetImages&&"undefined"in r.assetImages&&delete r.assetImages.undefined,t}}}}},{package:"$root$",file:"app/scripts/migrations/056.js"}],[187,{"../../../shared/modules/random-id":5174,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("../../../shared/modules/random-id"))&&n.__esModule?n:{default:n};r.default={version:57,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=57;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.TransactionController)&&void 0!==t&&t.transactions&&Array.isArray(e.TransactionController.transactions)&&!e.TransactionController.transactions.some((e=>"object"!=typeof e||void 0===e.txParams))&&(e.TransactionController.transactions=(0,s.keyBy)(e.TransactionController.transactions,(e=>(void 0!==e.id&&null!==e.id||(e.id=(0,i.default)()),e.id))));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/057.js"}],[188,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:58,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[189,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:59,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=59;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r)){const t=(0,n.groupBy)(Object.values(r),(e=>{var t;return`${null===(t=e.txParams)||void 0===t?void 0:t.nonce}-${e.chainId??e.metamaskNetworkId}`})),i=(0,n.pickBy)(t,(e=>e.some((e=>e.type!==s.TransactionType.cancel&&e.type!==s.TransactionType.retry))));e.TransactionController.transactions=(0,n.keyBy)((0,n.concat)(...Object.values(i)),(e=>e.id))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/059.js"}],[19,{"@metamask/base-controller":1190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsDataDeletionController=void 0;var n=e("@metamask/base-controller");function s(e,t,r){i(e,t),t.set(e,r)}function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t){return e.get(c(e,t))}function a(e,t,r){return e.set(c(e,t),r),r}function c(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const u="MetaMetricsDataDeletionController",l={metaMetricsDataDeletionId:{persist:!0,anonymous:!0},metaMetricsDataDeletionTimestamp:{persist:!0,anonymous:!0},metaMetricsDataDeletionStatus:{persist:!0,anonymous:!0}};var d=new WeakMap,h=new WeakMap,f=new WeakSet;class p extends n.BaseController{constructor({dataDeletionService:e,messenger:t,state:r,getMetaMetricsId:n}){var o,p;super({messenger:t,metadata:l,name:u,state:{metaMetricsDataDeletionId:null,metaMetricsDataDeletionTimestamp:0,...r}}),i(o=this,p=f),p.add(o),s(this,d,void 0),s(this,h,void 0),a(h,this,n),a(d,this,e),c(f,this,m).call(this)}async createMetaMetricsDataDeletionTask(){const e=o(h,this).call(this);if(!e)throw new Error("MetaMetrics ID not found");const t=await o(d,this).createDataDeletionRegulationTask(e);this.update((e=>{e.metaMetricsDataDeletionId=t??null,e.metaMetricsDataDeletionTimestamp=Date.now()})),await this.updateDataDeletionTaskStatus()}async updateDataDeletionTaskStatus(){const e=this.state.metaMetricsDataDeletionId;if(!e)throw new Error("Delete Regulation id not found");const t=await o(d,this).fetchDeletionRegulationStatus(e);this.update((e=>{e.metaMetricsDataDeletionStatus=t??undefined}))}}function m(){this.messagingSystem.registerActionHandler(`${u}:createMetaMetricsDataDeletionTask`,this.createMetaMetricsDataDeletionTask.bind(this)),this.messagingSystem.registerActionHandler(`${u}:updateDataDeletionTaskStatus`,this.updateDataDeletionTaskStatus.bind(this))}r.MetaMetricsDataDeletionController=p}}},{package:"$root$",file:"app/scripts/controllers/metametrics-data-deletion/metametrics-data-deletion.ts"}],[190,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s="2020-08-31";r.default={version:60,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=60;const r=function(e){var t;const r=null==e||null===(t=e.NotificationController)||void 0===t?void 0:t.notifications;var i;(0,n.isPlainObject)(r)&&(null===(i=r[2])||void 0===i?void 0:i.date)===s&&delete e.NotificationController.notifications[2];return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/060.js"}],[191,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:61,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[192,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:62,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[193,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:63,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,n,s,i,o,a,c;const u=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,l=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,d={};u&&Object.keys(u).forEach((e=>{Object.keys(u[e]).forEach((t=>{const r=u[e][t];d[t]===undefined?d[t]={[e]:r}:d[t]={...d[t],[e]:r}}))}));const h={};l&&Object.keys(l).forEach((e=>{Object.keys(l[e]).forEach((t=>{const r=l[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=d,e.TokensController.allIgnoredTokens=h):e.TokensController={allTokens:d,allIgnoredTokens:h};return null==e||null===(n=e.PreferencesController)||void 0===n||delete n.accountHiddenTokens,null==e||null===(s=e.PreferencesController)||void 0===s||delete s.accountTokens,null==e||null===(i=e.PreferencesController)||void 0===i||delete i.assetImages,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.hiddenTokens,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.tokens,null==e||null===(c=e.PreferencesController)||void 0===c||delete c.suggestedTokens,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[1934,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},s=Object.freeze({restrictReturnedAccounts:"restrictReturnedAccounts"}),i=(e=>(e.restricted="restricted",e.internal="internal",e))(i||{});r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r),r.WALLET_PREFIX="wallet_",r.CAVEAT_TYPES=s,r.LOG_IGNORE_METHODS=["wallet_registerOnboarding","wallet_watchAsset"],r.LOG_METHOD_TYPES=i,r.LOG_LIMIT=100}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/chunk-7KORYHSJ.js"}],[1935,{"./chunk-7KORYHSJ.js":1934,"@metamask/base-controller":1942,"@metamask/utils":1953},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,o,a,c,u,l,d,h,f,p,m,g,y,v=e("./chunk-7KORYHSJ.js"),_=e("@metamask/base-controller"),b=e("@metamask/utils"),w={permissionHistory:{},permissionActivityLog:[]},k=class extends _.BaseController{constructor({messenger:e,restrictedMethods:t,state:r}){super({messenger:e,name:"PermissionLogController",metadata:{permissionHistory:{persist:!0,anonymous:!1},permissionActivityLog:{persist:!0,anonymous:!1}},state:{...w,...r}}),v.__privateAdd.call(void 0,this,s),v.__privateAdd.call(void 0,this,o),v.__privateAdd.call(void 0,this,c),v.__privateAdd.call(void 0,this,l),v.__privateAdd.call(void 0,this,h),v.__privateAdd.call(void 0,this,p),v.__privateAdd.call(void 0,this,g),v.__privateAdd.call(void 0,this,n,void 0),v.__privateSet.call(void 0,this,n,t)}updateAccountsHistory(e,t){if(0===t.length)return;const r={eth_accounts:{accounts:v.__privateMethod.call(void 0,this,s,i).call(this,t,Date.now())}};v.__privateMethod.call(void 0,this,h,f).call(this,e,r)}createMiddleware(){return(e,t,r)=>{const{origin:s,method:i}=e,h=i.startsWith(v.WALLET_PREFIX),f="eth_requestAccounts"===i;if(!v.LOG_IGNORE_METHODS.includes(i)&&(h||v.__privateGet.call(void 0,this,n).has(i))||f){const n=v.__privateMethod.call(void 0,this,o,a).call(this,e,h),i=v.__privateMethod.call(void 0,this,p,m).call(this,e);r((e=>{const r=Date.now();v.__privateMethod.call(void 0,this,c,u).call(this,n,t,r),i&&!t.error&&t.result&&s&&v.__privateMethod.call(void 0,this,l,d).call(this,i,s,t.result,r,f),e()}))}else r()}}};n=new WeakMap,s=new WeakSet,i=function(e,t){return e.reduce(((e,r)=>({...e,[r]:t})),{})},o=new WeakSet,a=function(e,t){const r={id:e.id,method:e.method,methodType:t?"internal":"restricted",origin:e.origin,requestTime:Date.now(),responseTime:null,success:null};return this.update((e=>{const t=[...e.permissionActivityLog,r];e.permissionActivityLog=t.length>v.LOG_LIMIT?t.slice(1):t})),r},c=new WeakSet,u=function(e,t,r){e&&t&&this.update((n=>{n.permissionActivityLog=n.permissionActivityLog.map((n=>n.id===e.id?{...n,success:b.hasProperty.call(void 0,t,"result"),responseTime:r}:n))}))},l=new WeakSet,d=function(e,t,r,n,o){let a;if(o){const e=r;a={eth_accounts:{accounts:v.__privateMethod.call(void 0,this,s,i).call(this,e,n),lastApproved:n}}}else{a=r.reduce(((t,r)=>{const o=r.parentCapability;if(!e.includes(o))return t;if("eth_accounts"===o){const e=v.__privateMethod.call(void 0,this,g,y).call(this,r);return{...t,[o]:{lastApproved:n,accounts:v.__privateMethod.call(void 0,this,s,i).call(this,e,n)}}}return{...t,[o]:{lastApproved:n}}}),{})}Object.keys(a).length>0&&v.__privateMethod.call(void 0,this,h,f).call(this,t,a)},h=new WeakSet,f=function(e,t){const{permissionHistory:r}=this.state,n=r[e]??{},s={...n,...t},i=n.eth_accounts,o=t.eth_accounts;if(i&&o){const e=o.lastApproved??i.lastApproved;s.eth_accounts={lastApproved:e,accounts:{...i.accounts,...o.accounts}}}this.update((t=>{t.permissionHistory={...r,[e]:s}}))},p=new WeakSet,m=function(e){const{method:t,params:r}=e;return"eth_requestAccounts"===t?["eth_accounts"]:t===`${v.WALLET_PREFIX}requestPermissions`&&r&&Array.isArray(r)&&r[0]&&"object"==typeof r[0]&&!Array.isArray(r[0])?Object.keys(r[0]):null},g=new WeakSet,y=function(e){if("eth_accounts"!==e.parentCapability||!e.caveats)return[];const t=new Set;for(const r of e.caveats)if(r.type===v.CAVEAT_TYPES.restrictReturnedAccounts&&Array.isArray(r.value))for(const e of r.value)t.add(e);return[...t]},r.PermissionLogController=k}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/chunk-WGNFIOME.js"}],[1936,{"./chunk-7KORYHSJ.js":1934,"./chunk-WGNFIOME.js":1935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-WGNFIOME.js");e("./chunk-7KORYHSJ.js"),r.PermissionLogController=n.PermissionLogController}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/index.js"}],[1937,{"./chunk-UJFCPTF3.js":1939,"./chunk-Z4BLTVTB.js":1940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,o,a=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,o,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,o).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,o).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,o).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,o).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,a.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1938,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[1939,{"./chunk-Z4BLTVTB.js":1940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,o,a,c,u,l,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,o);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,l=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,a),f.__privateAdd.call(void 0,this,u),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,o,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,o,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,u,l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,a,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,a,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[194,{"@metamask/transaction-controller":2721,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");const i="sentEther";r.default={version:64,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r))for(const e of Object.values(r))e.type===i&&(e.type=s.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===i&&(e.type=s.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[1940,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1941,{"./chunk-Z4BLTVTB.js":1940,immer:4278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function o(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:o}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,o,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,o]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:o}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return o(e,t,"anonymous")},r.getPersistentState=function(e,t){return o(e,t,"persist")}}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/chunk-ZNOPSWMU.js"}],[1942,{"./chunk-G42723LG.js":1937,"./chunk-NINOM2XQ.js":1938,"./chunk-UJFCPTF3.js":1939,"./chunk-Z4BLTVTB.js":1940,"./chunk-ZNOPSWMU.js":1941},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-NINOM2XQ.js"),s=e("./chunk-ZNOPSWMU.js"),i=e("./chunk-G42723LG.js"),o=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=o.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/permission-log-controller>@metamask/base-controller",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1943,{"./errors.cjs":1951,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class o extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=o,r.assert=function(e,t="Assertion failed.",r=o){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",a=o){try{(0,n.assert)(e,t)}catch(e){throw i(a,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[1944,{"./assert.cjs":1943,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let o,a;return"base64"===i?o=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),o=String.raw`[-_A-Za-z0-9]`),a=r?new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,n.pattern)(e,a)}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[1945,{"./assert.cjs":1943,"./hex.cjs":1952,"@scure/base":2919,buffer:3645},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),o=48,a=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<a?o:c),u=s-(s<a?o:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[1946,{"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1947,{"./base64.cjs":1944,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[1948,{"./assert.cjs":1943,"./bytes.cjs":1945,"./hex.cjs":1952,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),o=e("./hex.cjs"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[1949,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),o(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),o(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[195,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:65,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[1950,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1951,{"./misc.cjs":1957,"pony-cause":4600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function o(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=o,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return o(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[1952,{"./assert.cjs":1943,"./bytes.cjs":1945,"@metamask/superstruct":2695,"@noble/hashes/sha3":2900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),o=e("./bytes.cjs");function a(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),a=d((0,o.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=a[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=a,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(a(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[1953,{"./assert.cjs":1943,"./base64.cjs":1944,"./bytes.cjs":1945,"./caip-types.cjs":1946,"./checksum.cjs":1947,"./coercers.cjs":1948,"./collections.cjs":1949,"./encryption-types.cjs":1950,"./errors.cjs":1951,"./hex.cjs":1952,"./json.cjs":1954,"./keyring.cjs":1955,"./logging.cjs":1956,"./misc.cjs":1957,"./number.cjs":1958,"./opaque.cjs":1959,"./promise.cjs":1960,"./time.cjs":1961,"./transaction-types.cjs":1962,"./versions.cjs":1963},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/index.cjs"}],[1954,{"./assert.cjs":1943,"./misc.cjs":1957,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function o({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function a(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!o(r)||e.validator(t,r),refiner:(t,r)=>!o(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=a;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:a(r.JsonStruct),stack:a((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/json.cjs"}],[1955,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[1956,{debug:3789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[1957,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[1958,{"./assert.cjs":1943,"./hex.cjs":1952},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/number.cjs"}],[1959,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[196,{"../../../shared/constants/hardware-wallets":5120,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/hardware-wallets");r.default={version:66,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?s.LedgerTransportTypes.webhid:s.LedgerTransportTypes.u2f,n=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),i={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:n?s.LedgerTransportTypes.live:r}};return delete i.PreferencesController.useLedgerLive,i}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[1960,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[1961,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/time.cjs"}],[1962,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1963,{"./assert.cjs":1943,"@metamask/superstruct":2695,semver:4923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[1964,{"./PhishingDetector.cjs":1965,"./types.cjs":1967,"./utils.cjs":1968,"@metamask/base-controller":1190,"@metamask/controller-utils":1216,"punycode/punycode.js":4668},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingController=r.phishingListKeyNameMap=r.ListNames=r.ListKeys=r.C2_DOMAIN_BLOCKLIST_URL=r.METAMASK_HOTLIST_DIFF_URL=r.METAMASK_STALELIST_URL=r.STALELIST_REFRESH_INTERVAL=r.HOTLIST_REFRESH_INTERVAL=r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=r.C2_DOMAIN_BLOCKLIST_ENDPOINT=r.CLIENT_SIDE_DETECION_BASE_URL=r.METAMASK_HOTLIST_DIFF_FILE=r.METAMASK_STALELIST_FILE=r.PHISHING_CONFIG_BASE_URL=void 0;const v=e("@metamask/base-controller"),_=e("@metamask/controller-utils"),b=e("punycode/punycode.js"),w=e("./PhishingDetector.cjs"),k=e("./types.cjs"),S=e("./utils.cjs");var E,T;r.PHISHING_CONFIG_BASE_URL="https://phishing-detection.api.cx.metamask.io",r.METAMASK_STALELIST_FILE="/v1/stalelist",r.METAMASK_HOTLIST_DIFF_FILE="/v1/diffsSince",r.CLIENT_SIDE_DETECION_BASE_URL="https://client-side-detection.api.cx.metamask.io",r.C2_DOMAIN_BLOCKLIST_ENDPOINT="/v1/request-blocklist",r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=300,r.HOTLIST_REFRESH_INTERVAL=300,r.STALELIST_REFRESH_INTERVAL=2592e3,r.METAMASK_STALELIST_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_STALELIST_FILE}`,r.METAMASK_HOTLIST_DIFF_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_HOTLIST_DIFF_FILE}`,r.C2_DOMAIN_BLOCKLIST_URL=`${r.CLIENT_SIDE_DETECION_BASE_URL}${r.C2_DOMAIN_BLOCKLIST_ENDPOINT}`,function(e){e.EthPhishingDetectConfig="eth_phishing_detect_config"}(E||(r.ListKeys=E={})),function(e){e.MetaMask="MetaMask"}(T||(r.ListNames=T={}));const j={[T.MetaMask]:E.EthPhishingDetectConfig};r.phishingListKeyNameMap={[E.EthPhishingDetectConfig]:T.MetaMask};const C="PhishingController",I={phishingLists:{persist:!0,anonymous:!1},whitelist:{persist:!0,anonymous:!1},hotlistLastFetched:{persist:!0,anonymous:!1},stalelistLastFetched:{persist:!0,anonymous:!1},c2DomainBlocklistLastFetched:{persist:!0,anonymous:!1}};class P extends v.BaseController{constructor({stalelistRefreshInterval:e=r.STALELIST_REFRESH_INTERVAL,hotlistRefreshInterval:t=r.HOTLIST_REFRESH_INTERVAL,c2DomainBlocklistRefreshInterval:h=r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL,messenger:f,state:p={}}){super({name:C,metadata:I,messenger:f,state:{phishingLists:[],whitelist:[],hotlistLastFetched:0,stalelistLastFetched:0,c2DomainBlocklistLastFetched:0,...p}}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),g(this,i,e,"f"),g(this,o,t,"f"),g(this,a,h,"f"),y(this,n,"m",d).call(this),this.updatePhishingDetector()}updatePhishingDetector(){g(this,s,new w.PhishingDetector(this.state.phishingLists),"f")}setStalelistRefreshInterval(e){g(this,i,e,"f")}setHotlistRefreshInterval(e){g(this,o,e,"f")}setC2DomainBlocklistRefreshInterval(e){g(this,a,e,"f")}isStalelistOutOfDate(){return(0,S.fetchTimeNow)()-this.state.stalelistLastFetched>=y(this,i,"f")}isHotlistOutOfDate(){return(0,S.fetchTimeNow)()-this.state.hotlistLastFetched>=y(this,o,"f")}isC2DomainBlocklistOutOfDate(){return(0,S.fetchTimeNow)()-this.state.c2DomainBlocklistLastFetched>=y(this,a,"f")}async maybeUpdateState(){if(this.isStalelistOutOfDate())return void await this.updateStalelist();this.isHotlistOutOfDate()&&await this.updateHotlist();this.isC2DomainBlocklistOutOfDate()&&await this.updateC2DomainBlocklist()}test(e){const t=(0,b.toASCII)(e),r=(0,S.getHostnameFromUrl)(t);return this.state.whitelist.includes(r||t)?{result:!1,type:k.PhishingDetectorResultType.All}:y(this,s,"f").check(t)}isBlockedRequest(e){const t=(0,b.toASCII)(e),r=(0,S.getHostnameFromUrl)(t);return this.state.whitelist.includes(r||t)?{result:!1,type:k.PhishingDetectorResultType.All}:y(this,s,"f").isMaliciousC2Domain(t)}bypass(e){const t=(0,b.toASCII)(e),r=(0,S.getHostnameFromUrl)(t),{whitelist:n}=this.state;n.includes(r||t)||this.update((e=>{e.whitelist.push(r||t)}))}async updateC2DomainBlocklist(){if(y(this,l,"f"))await y(this,l,"f");else try{g(this,l,y(this,n,"m",p).call(this),"f"),await y(this,l,"f")}finally{g(this,l,undefined,"f")}}async updateHotlist(){if(y(this,c,"f"))await y(this,c,"f");else try{g(this,c,y(this,n,"m",f).call(this),"f"),await y(this,c,"f")}finally{g(this,c,undefined,"f")}}async updateStalelist(){if(y(this,u,"f"))await y(this,u,"f");else try{g(this,u,y(this,n,"m",h).call(this),"f"),await y(this,u,"f")}finally{g(this,u,undefined,"f")}}}r.PhishingController=P,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,n=new WeakSet,d=function(){this.messagingSystem.registerActionHandler(`${C}:maybeUpdateState`,this.maybeUpdateState.bind(this)),this.messagingSystem.registerActionHandler(`${C}:testOrigin`,this.test.bind(this))},h=async function(){let e=null,t=null,s=null;try{const i=y(this,n,"m",m).call(this,r.METAMASK_STALELIST_URL),o=y(this,n,"m",m).call(this,r.C2_DOMAIN_BLOCKLIST_URL);[e,s]=await Promise.all([i,o]),e?.data&&e.data.lastUpdated>0&&(t=await y(this,n,"m",m).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e.data.lastUpdated}`))}finally{const e=(0,S.fetchTimeNow)();this.update((t=>{t.stalelistLastFetched=e,t.hotlistLastFetched=e,t.c2DomainBlocklistLastFetched=e}))}if(!e||!t)return;const{eth_phishing_detect_config:i,...o}=e.data,a={...i,...o,c2DomainBlocklist:s?s.recentlyAdded:[],name:r.phishingListKeyNameMap.eth_phishing_detect_config},c=(0,S.applyDiffs)(a,t.data,E.EthPhishingDetectConfig);this.update((e=>{e.phishingLists=[c]})),this.updatePhishingDetector()},f=async function(){const e=Math.max(...this.state.phishingLists.map((({lastUpdated:e})=>e)));let t;try{t=await y(this,n,"m",m).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e}`)}finally{this.update((e=>{e.hotlistLastFetched=(0,S.fetchTimeNow)()}))}if(!t?.data)return;const s=t.data,i=this.state.phishingLists.map((e=>(0,S.applyDiffs)(e,s,j[e.name],[],[])));this.update((e=>{e.phishingLists=i})),this.updatePhishingDetector()},p=async function(){let e=null;try{e=await y(this,n,"m",m).call(this,`${r.C2_DOMAIN_BLOCKLIST_URL}?timestamp=${(0,S.roundToNearestMinute)(this.state.c2DomainBlocklistLastFetched)}`)}finally{this.update((e=>{e.c2DomainBlocklistLastFetched=(0,S.fetchTimeNow)()}))}if(!e)return;const t=e.recentlyAdded,s=e.recentlyRemoved,i=this.state.phishingLists.map((e=>(0,S.applyDiffs)(e,[],j[e.name],t,s)));this.update((e=>{e.phishingLists=i})),this.updatePhishingDetector()},m=async function(e){const t=await(0,_.safelyExecute)((()=>fetch(e,{cache:"no-cache"})),!0);return 200===t?.status?await t.json():null},r.default=P}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingController.cjs"}],[1965,{"./types.cjs":1967,"./utils.cjs":1968,"fastest-levenshtein":4e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetector=void 0;const u=e("fastest-levenshtein"),l=e("./types.cjs"),d=e("./utils.cjs");r.PhishingDetector=class{constructor(e){n.add(this),s.set(this,void 0),i.set(this,void 0),Array.isArray(e)?(a(this,s,(0,d.processConfigs)(e),"f"),a(this,i,!1,"f")):(a(this,s,[(0,d.getDefaultPhishingDetectorConfig)({allowlist:e.whitelist,blocklist:e.blacklist,c2DomainBlocklist:e.c2DomainBlocklist,fuzzylist:e.fuzzylist,tolerance:e.tolerance})],"f"),a(this,i,!0,"f"))}check(e){const t=c(this,n,"m",o).call(this,e);if(c(this,i,"f")){let e=t.type;return e===l.PhishingDetectorResultType.Allowlist?e=l.PhishingDetectorResultType.Whitelist:e===l.PhishingDetectorResultType.Blocklist&&(e=l.PhishingDetectorResultType.Blacklist),{match:t.match,result:t.result,type:e}}return t}isMaliciousC2Domain(e){const t=(0,d.getHostnameFromUrl)(e);if(!t)return{result:!1,type:l.PhishingDetectorResultType.C2DomainBlocklist};const r=t.endsWith(".")?t.slice(0,-1):t,n=(0,d.domainToParts)(r);for(const{allowlist:e,name:t,version:r}of c(this,s,"f")){const s=(0,d.matchPartsAgainstList)(n,e);if(s){return{match:(0,d.domainPartsToDomain)(s),name:t,result:!1,type:l.PhishingDetectorResultType.Allowlist,version:r===undefined?r:String(r)}}}const i=(0,d.sha256Hash)(t.toLowerCase()),o=(0,d.generateParentDomains)(n.reverse(),5);for(const{c2DomainBlocklist:e,name:t,version:r}of c(this,s,"f"))if(e&&0!==e.length){if(e.includes(i))return{name:t,result:!0,type:l.PhishingDetectorResultType.C2DomainBlocklist,version:r===undefined?r:String(r)};for(const n of o){const s=(0,d.sha256Hash)(n);if(e.includes(s))return{name:t,result:!0,type:l.PhishingDetectorResultType.C2DomainBlocklist,version:r===undefined?r:String(r)}}}return{result:!1,type:l.PhishingDetectorResultType.C2DomainBlocklist}}},s=new WeakMap,i=new WeakMap,n=new WeakSet,o=function(e){const t=e.match(new RegExp("Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,}","u"));if(null!==t){const e=t[0];for(const{blocklist:t,name:r,version:n}of c(this,s,"f")){if(t.filter((e=>1===e.length)).find((t=>t[0]===e)))return{name:r,match:e,result:!0,type:l.PhishingDetectorResultType.Blocklist,version:n===undefined?n:String(n)}}}let r;try{r=new URL(e).hostname}catch(e){return{result:!1,type:l.PhishingDetectorResultType.All}}const n=r.endsWith(".")?r.slice(0,-1):r,i=(0,d.domainToParts)(n);for(const{allowlist:e,name:t,version:r}of c(this,s,"f")){const n=(0,d.matchPartsAgainstList)(i,e);if(n){return{match:(0,d.domainPartsToDomain)(n),name:t,result:!1,type:l.PhishingDetectorResultType.Allowlist,version:r===undefined?r:String(r)}}}for(const{blocklist:e,fuzzylist:t,name:r,tolerance:n,version:o}of c(this,s,"f")){const s=(0,d.matchPartsAgainstList)(i,e);if(s){return{match:(0,d.domainPartsToDomain)(s),name:r,result:!0,type:l.PhishingDetectorResultType.Blocklist,version:o===undefined?o:String(o)}}if(n>0){let e=(0,d.domainPartsToFuzzyForm)(i);e=e.replace(/^www\./u,"");const s=t.find((t=>{const r=(0,d.domainPartsToFuzzyForm)(t);return(0,u.distance)(e,r)<=n}));if(s){return{name:r,match:(0,d.domainPartsToDomain)(s),result:!0,type:l.PhishingDetectorResultType.Fuzzy,version:o===undefined?o:String(o)}}}}return{result:!1,type:l.PhishingDetectorResultType.All}}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingDetector.cjs"}],[1966,{"./PhishingController.cjs":1964,"./PhishingDetector.cjs":1965,"./types.cjs":1967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetectorResultType=r.PhishingDetector=void 0,s(e("./PhishingController.cjs"),r);var i=e("./PhishingDetector.cjs");Object.defineProperty(r,"PhishingDetector",{enumerable:!0,get:function(){return i.PhishingDetector}});var o=e("./types.cjs");Object.defineProperty(r,"PhishingDetectorResultType",{enumerable:!0,get:function(){return o.PhishingDetectorResultType}})}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/index.cjs"}],[1967,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetectorResultType=void 0,function(e){e.All="all",e.Fuzzy="fuzzy",e.Blocklist="blocklist",e.Allowlist="allowlist",e.Blacklist="blacklist",e.Whitelist="whitelist",e.C2DomainBlocklist="c2DomainBlocklist"}(n||(r.PhishingDetectorResultType=n={}))}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/types.cjs"}],[1968,{"./PhishingController.cjs":1964,"@noble/hashes/utils":2902,"ethereum-cryptography/sha256":3871},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.generateParentDomains=r.getHostnameFromUrl=r.sha256Hash=r.matchPartsAgainstList=r.domainPartsToFuzzyForm=r.domainPartsToDomain=r.processConfigs=r.getDefaultPhishingDetectorConfig=r.processDomainList=r.domainToParts=r.validateConfig=r.applyDiffs=r.roundToNearestMinute=r.fetchTimeNow=void 0;const n=e("@noble/hashes/utils"),s=e("ethereum-cryptography/sha256"),i=e("./PhishingController.cjs");r.fetchTimeNow=()=>Math.round(Date.now()/1e3),r.roundToNearestMinute=function(e){return 60*Math.floor(e/60)};const o=e=>{const t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]};function a(e){if(null===e||"object"!=typeof e)throw new Error("Invalid config");if("tolerance"in e&&!("fuzzylist"in e))throw new Error("Fuzzylist tolerance provided without fuzzylist");if("name"in e&&("string"!=typeof e.name||""===e.name))throw new Error("Invalid config parameter: 'name'");if("version"in e&&(!["number","string"].includes(typeof e.version)||""===e.version))throw new Error("Invalid config parameter: 'version'")}r.applyDiffs=(e,t,r,n=[],s=[])=>{const a=t.filter((({timestamp:t,targetList:n})=>t>e.lastUpdated&&o(n)[0]===r));let c=e.lastUpdated;const u={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist),c2DomainBlocklist:new Set(e.c2DomainBlocklist)};for(const{isRemoval:e,targetList:t,url:r,timestamp:n}of a){const s=o(t)[1];n>c&&(c=n),e?u[s].delete(r):u[s].add(r)}if(r===i.ListKeys.EthPhishingDetectConfig){for(const e of n)u.c2DomainBlocklist.add(e);for(const e of s)u.c2DomainBlocklist.delete(e)}return{c2DomainBlocklist:Array.from(u.c2DomainBlocklist),allowlist:Array.from(u.allowlist),blocklist:Array.from(u.blocklist),fuzzylist:Array.from(u.fuzzylist),version:e.version,name:i.phishingListKeyNameMap[r],tolerance:e.tolerance,lastUpdated:c}},r.validateConfig=a;r.domainToParts=e=>{try{return e.split(".").reverse()}catch(t){throw new Error(JSON.stringify(e))}};r.processDomainList=e=>e.map(r.domainToParts);r.getDefaultPhishingDetectorConfig=({allowlist:e=[],blocklist:t=[],fuzzylist:n=[],tolerance:s=3})=>({allowlist:(0,r.processDomainList)(e),blocklist:(0,r.processDomainList)(t),fuzzylist:(0,r.processDomainList)(n),tolerance:s});r.processConfigs=(e=[])=>e.filter((e=>{try{return a(e),!0}catch(e){return console.error(e),!1}})).map((e=>({...e,...(0,r.getDefaultPhishingDetectorConfig)(e)})));r.domainPartsToDomain=e=>e.slice().reverse().join(".");r.domainPartsToFuzzyForm=e=>e.slice(1).reverse().join(".");r.matchPartsAgainstList=(e,t)=>t.find((t=>!(t.length>e.length)&&t.every(((t,r)=>e[r]===t))));r.sha256Hash=e=>{const t=(0,s.sha256)((new TextEncoder).encode(e.toLowerCase()));return(0,n.bytesToHex)(t)};r.getHostnameFromUrl=e=>{let t;try{t=new URL(e).hostname}catch(e){return null}return t};r.generateParentDomains=(e,t=5)=>{const r=[];if(0===e.length)return r;if(1===e.length)r.push(e[0].toLowerCase());else{const n=e.slice(-2).join(".");r.push(n.toLowerCase());for(let n=e.length-3;n>=0&&r.length<t;n--){const t=e.slice(n).join(".");r.push(t.toLowerCase())}}return r}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/utils.cjs"}],[1969,{"fast-json-stable-stringify":3987,uuid:5040},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractPollingControllerBaseMixin=r.getKey=void 0;const i=s(e("fast-json-stable-stringify")),o=e("uuid");r.getKey=(e,t)=>`${e}:${(0,i.default)(t)}`,r.AbstractPollingControllerBaseMixin=function(e){var t,s;return t=new WeakMap,s=new WeakMap,class extends e{constructor(){super(...arguments),t.set(this,new Map),s.set(this,new Map)}startPollingByNetworkClientId(e,s={}){const i=(0,o.v4)(),a=(0,r.getKey)(e,s),c=n(this,t,"f").get(a)??new Set;return c.add(i),n(this,t,"f").set(a,c),1===c.size&&this._startPollingByNetworkClientId(e,s),i}stopAllPolling(){n(this,t,"f").forEach(((e,t)=>{e.forEach((e=>{this.stopPollingByPollingToken(e)}))}))}stopPollingByPollingToken(e){if(!e)throw new Error("pollingToken required");let r=null;for(const[s,i]of n(this,t,"f"))if(i.delete(e)){0===i.size&&(r=s);break}if(r){this._stopPollingByPollingTokenSetId(r),n(this,t,"f").delete(r);const e=n(this,s,"f").get(r);if(e){for(const t of e)t(r);e.clear()}}}onPollingCompleteByNetworkClientId(e,t,i={}){const o=(0,r.getKey)(e,i),a=n(this,s,"f").get(o)??new Set;a.add(t),n(this,s,"f").set(o,a)}}}}}},{package:"@metamask/polling-controller",file:"node_modules/@metamask/polling-controller/dist/AbstractPollingController.cjs"}],[197,{"../../../shared/constants/network":5128,"bignumber.js":3549,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/network");const a=e=>new i.default(e||"0x0",16).gt(0);r.default={version:67,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,n;const s=(null==e?void 0:e.PreferencesController)||{},i=s.preferences||{};if(i.showTestNetworks)return e;const c=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},u=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},l=(null===(n=e.CachedBalancesController)||void 0===n?void 0:n.cachedBalances)||{},d=o.TEST_CHAINS.includes(null==u?void 0:u.chainId),h=Object.values(c).some((({chainId:e})=>o.TEST_CHAINS.includes(e))),f=o.TEST_CHAINS.some((e=>Object.values(l[e]||{}).some(a))),p=d||h||f,m={...e,PreferencesController:{...s,preferences:{...i,showTestNetworks:p}}};return m}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[1970,{"./AbstractPollingController.cjs":1969,"@metamask/base-controller":1190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.BlockTrackerPollingControllerV1=r.BlockTrackerPollingController=r.BlockTrackerPollingControllerOnly=void 0;const s=e("@metamask/base-controller"),i=e("./AbstractPollingController.cjs");function o(e){var t;class r extends((0,i.AbstractPollingControllerBaseMixin)(e)){constructor(){super(...arguments),t.set(this,{})}_startPollingByNetworkClientId(e,r){const s=(0,i.getKey)(e,r);if(n(this,t,"f")[s])return;const o=this._getNetworkClientById(e);if(!o)throw new Error(`Unable to retrieve blockTracker for networkClientId ${e}`);{const i=this._executePoll.bind(this,e,r);o.blockTracker.addListener("latest",i),n(this,t,"f")[s]=i}}_stopPollingByPollingTokenSetId(e){const[r]=e.split(":"),s=this._getNetworkClientById(r);if(s&&n(this,t,"f")[e]){const r=n(this,t,"f")[e];r&&(s.blockTracker.removeListener("latest",r),delete n(this,t,"f")[e])}}}return t=new WeakMap,r}r.BlockTrackerPollingControllerOnly=o(class{}),r.BlockTrackerPollingController=o(s.BaseController),r.BlockTrackerPollingControllerV1=o(s.BaseControllerV1)}}},{package:"@metamask/polling-controller",file:"node_modules/@metamask/polling-controller/dist/BlockTrackerPollingController.cjs"}],[1971,{"./AbstractPollingController.cjs":1969,"@metamask/base-controller":1190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.StaticIntervalPollingControllerV1=r.StaticIntervalPollingController=r.StaticIntervalPollingControllerOnly=void 0;const i=e("@metamask/base-controller"),o=e("./AbstractPollingController.cjs");function a(e){var t,r;class i extends((0,o.AbstractPollingControllerBaseMixin)(e)){constructor(){super(...arguments),t.set(this,{}),r.set(this,1e3)}setIntervalLength(e){n(this,r,e,"f")}getIntervalLength(){return s(this,r,"f")}_startPollingByNetworkClientId(e,n){if(!s(this,r,"f"))throw new Error("intervalLength must be defined and greater than 0");const i=(0,o.getKey)(e,n),a=s(this,t,"f")[i];this._stopPollingByPollingTokenSetId(i);const c=s(this,t,"f")[i]=setTimeout((async()=>{try{await this._executePoll(e,n)}catch(e){console.error(e)}c===s(this,t,"f")[i]&&this._startPollingByNetworkClientId(e,n)}),a?s(this,r,"f"):0)}_stopPollingByPollingTokenSetId(e){const r=s(this,t,"f")[e];r&&(clearTimeout(r),delete s(this,t,"f")[e])}}return t=new WeakMap,r=new WeakMap,i}r.StaticIntervalPollingControllerOnly=a(class{}),r.StaticIntervalPollingController=a(i.BaseController),r.StaticIntervalPollingControllerV1=a(i.BaseControllerV1)}}},{package:"@metamask/polling-controller",file:"node_modules/@metamask/polling-controller/dist/StaticIntervalPollingController.cjs"}],[1972,{"./BlockTrackerPollingController.cjs":1970,"./StaticIntervalPollingController.cjs":1971},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.StaticIntervalPollingControllerV1=r.StaticIntervalPollingController=r.StaticIntervalPollingControllerOnly=r.BlockTrackerPollingControllerV1=r.BlockTrackerPollingController=r.BlockTrackerPollingControllerOnly=void 0;var n=e("./BlockTrackerPollingController.cjs");Object.defineProperty(r,"BlockTrackerPollingControllerOnly",{enumerable:!0,get:function(){return n.BlockTrackerPollingControllerOnly}}),Object.defineProperty(r,"BlockTrackerPollingController",{enumerable:!0,get:function(){return n.BlockTrackerPollingController}}),Object.defineProperty(r,"BlockTrackerPollingControllerV1",{enumerable:!0,get:function(){return n.BlockTrackerPollingControllerV1}});var s=e("./StaticIntervalPollingController.cjs");Object.defineProperty(r,"StaticIntervalPollingControllerOnly",{enumerable:!0,get:function(){return s.StaticIntervalPollingControllerOnly}}),Object.defineProperty(r,"StaticIntervalPollingController",{enumerable:!0,get:function(){return s.StaticIntervalPollingController}}),Object.defineProperty(r,"StaticIntervalPollingControllerV1",{enumerable:!0,get:function(){return s.StaticIntervalPollingControllerV1}})}}},{package:"@metamask/polling-controller",file:"node_modules/@metamask/polling-controller/dist/index.cjs"}],[198,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:68,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=68;const r=function(e){const{PermissionsController:t={},PermissionsMetadata:r={},...n}=e,{domainMetadata:o={},permissionsHistory:a={},permissionsLog:c=[]}=r;return{...n,PermissionController:s(t),PermissionLogController:{permissionActivityLog:c,permissionHistory:a},SubjectMetadataController:i(o)}}(t.data);return t.data=r,t}};function s(e){const{domains:t={}}=e;return{subjects:Object.entries(t).reduce(((e,[t,r])=>{const{permissions:[n]}=r,s=n.caveats.find((e=>"exposedAccounts"===e.name)),i={...n,caveats:[{type:"restrictReturnedAccounts",value:s.value}]};return delete i["@context"],e[t]={origin:t,permissions:{eth_accounts:i}},e}),{})}}function i(e){return{subjectMetadata:Object.entries(e).reduce(((e,[t,r])=>{const{name:n=null,icon:s=null,extensionId:i=null,...o}=r;return delete o.lastUpdated,delete o.host,t&&(e[t]={name:n,iconUrl:s,extensionId:i,...o,origin:t}),e}),{})}}}}},{package:"$root$",file:"app/scripts/migrations/068.js"}],[1980,{"./ppom-controller":1981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;var n=e("./ppom-controller");Object.defineProperty(r,"NETWORK_CACHE_DURATION",{enumerable:!0,get:function(){return n.NETWORK_CACHE_DURATION}}),Object.defineProperty(r,"PPOMController",{enumerable:!0,get:function(){return n.PPOMController}})}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/index.js"}],[1981,{"./ppom-storage":1982,"./util":1983,"@metamask/base-controller":1190,"@metamask/controller-utils":1216,"await-semaphore":3538},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g,y,v,_,b,w,k,S,E,T,j,C,I,P,A,R,M,O,x,N=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},B=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;const D=e("@metamask/base-controller"),$=e("@metamask/controller-utils"),L=e("await-semaphore"),J=e("./ppom-storage"),V=e("./util");r.NETWORK_CACHE_DURATION=6048e5;const H=["eth_call","eth_blockNumber","eth_createAccessList","eth_getLogs","eth_getFilterLogs","eth_getTransactionByHash","eth_chainId","eth_getBlockByHash","eth_getBlockByNumber","eth_getCode","eth_getStorageAt","eth_getBalance","eth_getTransactionCount","trace_call","trace_callMany","debug_traceCall","trace_filter"],U={versionInfo:{persist:!0,anonymous:!1},storageMetadata:{persist:!0,anonymous:!1}},F="PPOMController",q={headers:{"Content-Type":"application/json"}};class z extends D.BaseController{constructor({chainId:e,messenger:t,provider:r,storageBackend:v,securityAlertsEnabled:_,onPreferencesChange:b,ppomProvider:E,cdnBaseUrl:T,providerRequestLimit:j,state:C,blockaidPublicKey:I,nativeCrypto:P}){super({name:F,metadata:U,messenger:t,state:{versionInfo:C?.versionInfo??[],storageMetadata:C?.storageMetadata??[]}}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,0),h.set(this,void 0),f.set(this,void 0),p.set(this,{}),m.set(this,void 0),g.set(this,!1),y.set(this,undefined),N(this,h,(0,V.addHexPrefix)(e),"f"),N(this,i,r,"f"),N(this,c,E,"f"),N(this,o,new J.PPOMStorage({storageBackend:v,readMetadata:()=>[...this.state.storageMetadata],writeMetadata:e=>{this.update((t=>{t.storageMetadata=e}))}}),"f"),N(this,a,new L.Mutex,"f"),N(this,u,T,"f"),N(this,l,j??300,"f"),N(this,f,_,"f"),N(this,m,I,"f"),N(this,y,P,"f"),b(B(this,n,"m",w).bind(this)),B(this,n,"m",k).call(this),B(this,n,"m",S).call(this)}async usePPOM(e,t){const r=t??B(this,h,"f");if(!B(this,f,"f"))throw Error("User has securityAlertsEnabled set to false");if(!(0,V.blockaidValidationSupportedForNetwork)(r))throw Error(`Blockaid validation not available on network with chainId: ${r}`);return await B(this,a,"f").use((async()=>{const t=await B(this,n,"m",T).call(this,r);N(this,d,0,"f"),N(this,p,{},"f");return{...await e(t),providerRequestsCount:{...B(this,p,"f")}}}))}}r.PPOMController=z,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,n=new WeakSet,v=async function(){if(B(this,f,"f")&&!B(this,g,"f")){const{ppomInit:e}=B(this,c,"f");await e("./ppom_bg.wasm"),N(this,g,!0,"f")}},_=function(){B(this,n,"m",E).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)}));const{storageMetadata:e}=this.state;this.update((e=>{e.versionInfo=[],e.storageMetadata=[]})),B(this,o,"f").deleteAllFiles(e).catch((e=>{console.error(`Error in deleting files: ${e.message}`)}))},b=function(e){const t=this.messagingSystem.call("NetworkController:getNetworkClientById",e.selectedNetworkClientId),{chainId:r}=t.configuration,s=(0,V.addHexPrefix)(r);s!==B(this,h,"f")&&(N(this,h,s,"f"),B(this,n,"m",E).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)})))},w=function(e){const t=e.securityAlertsEnabled;t!==B(this,f,"f")&&(N(this,f,t,"f"),t||B(this,n,"m",_).call(this))},k=function(){this.messagingSystem.registerActionHandler(`${F}:usePPOM`,this.usePPOM.bind(this))},S=function(){const e=B(this,n,"m",b).bind(this);this.messagingSystem.subscribe("NetworkController:networkDidChange",e)},E=async function(){await B(this,a,"f").use((async()=>{B(this,s,"f")&&(B(this,s,"f").free(),N(this,s,undefined,"f"))}))},T=async function(e){const t=await B(this,n,"m",j).call(this);let r;return(B(this,s,"f")===undefined||t)&&(r=await B(this,n,"m",x).call(this,e),B(this,h,"f")===e&&(B(this,s,"f")&&B(this,s,"f").free(),N(this,s,r,"f")),B(this,o,"f").syncMetadata(this.state.versionInfo).catch((e=>{console.error(`Error while trying to sync metadata: ${e.message}`)}))),r},j=async function(){const e=await B(this,n,"m",R).call(this);return!!e&&(this.update((t=>{t.versionInfo=e})),!0)},C=function(e,t){return e.find((e=>e.name===t.name&&e.chainId===t.chainId&&e.version===t.version&&e.checksum===t.checksum))},I=async function(e){const t=await Promise.all(e.map((async e=>{let t;try{t=await B(this,n,"m",P).call(this,e)}catch(t){console.error(`Error in getting file ${e.filePath}: ${t.message}`)}return t?[e.name,new Uint8Array(t)]:undefined})));return t?.filter((e=>e?.[1]!==undefined))},P=async function(e){const{storageMetadata:t}=this.state;if(B(this,n,"m",C).call(this,t,e))try{return await B(this,o,"f").readFile(e.name,e.chainId)}catch(e){console.error(`Error in reading file: ${e.message}`)}(0,V.checkFilePath)(e.filePath);const r=(0,V.constructURLHref)(B(this,u,"f"),e.filePath),s=await B(this,n,"m",M).call(this,r);return await(0,V.validateSignature)(s,e.hashSignature,B(this,m,"f"),e.filePath,B(this,y,"f")),await B(this,o,"f").writeFile({data:s,...e}).catch((e=>{console.error(`Error in writing file: ${e.message}`)})),s},A=async function(e,t={},r="GET"){const n=await(0,$.safelyExecute)((async()=>(0,$.timeoutFetch)(e,{method:r,cache:"no-cache",redirect:"error",...t},1e4)),!0),s=304===n?.status;if(!n?.status||n?.status<200||n?.status>399)throw new Error(`Failed to fetch file with url: ${e}`);return{cached:s,response:n}},R=async function(){const e=(0,V.constructURLHref)(B(this,u,"f"),"ppom_version.json"),{cached:t,response:r}=await B(this,n,"m",A).call(this,e,{headers:q});return t&&this.state.versionInfo?.length?undefined:r.json()},M=async function(e){const{response:t}=await B(this,n,"m",A).call(this,e);return await t.arrayBuffer()},O=async function(e,t){if(B(this,d,"f")>B(this,l,"f"))return V.PROVIDER_ERRORS.limitExceeded();if(N(this,d,B(this,d,"f")+1,"f"),!H.includes(e))return V.PROVIDER_ERRORS.methodNotSupported();B(this,p,"f")[e]=B(this,p,"f")[e]?Number(B(this,p,"f")[e])+1:1;const r=(0,V.createPayload)(e,t);try{const e=await B(this,i,"f").request(r);return{jsonrpc:"2.0",id:r.id,result:e}}catch(e){return{jsonrpc:"2.0",id:r.id,error:e}}},x=async function(e){await B(this,n,"m",v).call(this);const t=this.state.versionInfo.filter((({chainId:t})=>t===e));if(t?.length===undefined||0===t?.length)throw new Error(`Aborting initialising PPOM as no files are found for the network with chainId: ${e}`);const r=await B(this,n,"m",I).call(this,t);if(r?.length!==t?.length)throw new Error(`Aborting initialising PPOM as not all files could not be downloaded for the network with chainId: ${e}`);const{PPOM:s}=B(this,c,"f");return s.new(B(this,n,"m",O).bind(this),r)}}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-controller.js"}],[1982,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMStorage=void 0;r.PPOMStorage=class{constructor({storageBackend:e,readMetadata:t,writeMetadata:r}){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),o(this,n,e,"f"),o(this,s,t,"f"),o(this,i,r,"f")}async syncMetadata(e){const t=a(this,s,"f").call(this),r=[];for(const n of t){try{await this.readFile(n.name,n.chainId)}catch(e){console.error("Error: ",e);continue}e.find((e=>e.name===n.name&&e.chainId===n.chainId&&e.version===n.version&&e.checksum===n.checksum))&&r.push(n)}const o=await a(this,n,"f").dir();for(const{name:e,chainId:t}of o)r.find((r=>r.name===e&&r.chainId===t))||await a(this,n,"f").delete({name:e,chainId:t});return a(this,i,"f").call(this,r),r}async deleteAllFiles(e){for(const t of e){const{name:e,chainId:r}=t;try{await a(this,n,"f").delete({name:e,chainId:r})}catch(t){console.error(`Error in deleting file: ${e}, ${r}`,t)}}}async readFile(e,t){const r=a(this,s,"f").call(this).find((r=>r.name===e&&r.chainId===t));if(!r)throw new Error(`File metadata (${e}, ${t}) not found`);const i=await a(this,n,"f").read({name:e,chainId:t},r.checksum);if(!i)throw new Error(`Storage File (${e}, ${t}) not found`);return i}async writeFile({data:e,name:t,chainId:r,version:o,checksum:c}){await a(this,n,"f").write({name:t,chainId:r},e,c);const u=a(this,s,"f").call(this),l=u.find((e=>e.name===t&&e.chainId===r));l?(l.version=o,l.checksum=c):u.push({name:t,chainId:r,version:o,checksum:c}),a(this,i,"f").call(this,u)}},n=new WeakMap,s=new WeakMap,i=new WeakMap}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-storage.js"}],[1983,{buffer:3645,"crypto-js":3754,elliptic:3809,"json-rpc-random-id":4313},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkFilePath=r.addHexPrefix=r.constructURLHref=r.validateSignature=r.PROVIDER_ERRORS=r.createPayload=r.IdGenerator=r.blockaidValidationSupportedForNetwork=r.SUPPORTED_NETWORK_CHAINIDS=void 0;const a=i(e("crypto-js")),c=o(e("elliptic")),u=o(e("json-rpc-random-id")),l=c.default.eddsa;r.SUPPORTED_NETWORK_CHAINIDS={MAINNET:"0x1",BSC:"0x38",OPTIMISM:"0xa",POLYGON:"0x89",AVALANCHE:"0xa86a",ARBITRUM:"0xa4b1",LINEA_MAINNET:"0xe708",BASE:"0x2105",SEPOLIA:"0xaa36a7",OPBNB:"0xcc",ZKSYNC:"0x144",SCROLL:"0x82750",BERACHAIN:"0x138d4",METACHAIN_ONE:"0x1b6e6"};r.blockaidValidationSupportedForNetwork=e=>Object.values(r.SUPPORTED_NETWORK_CHAINIDS).some((t=>t===e)),r.IdGenerator=(0,u.default)();r.createPayload=(e,t)=>({id:(0,r.IdGenerator)(),jsonrpc:"2.0",method:e,params:t??[]}),r.PROVIDER_ERRORS={limitExceeded:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32005,message:"Limit exceeded"}}),methodNotSupported:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32601,message:"Method not supported"}})};r.validateSignature=async(e,r,n,s,i,o)=>{const c=await(async(e,t,r=!0)=>{if(t)return t.createHash("sha256").update(e).digest("hex");if("crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest&&r){const t=await globalThis.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return(0,a.SHA256)(a.default.lib.WordArray.create(e)).toString()})(e,i,o);if(!new l("ed25519").keyFromPublic(n).verify(t.from(c),r))throw Error(`Signature verification failed for file path: ${s}`)};r.constructURLHref=(e,t)=>new URL(`https://${e}/${t}`.replace(/https:\/\/https:\/\//gu,"https://").replace(/\/\//gu,"/")).href;r.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):`0x${parseInt(e,10).toString(16)}`;r.checkFilePath=e=>{if(!e.match(/^[\w./]+$/u))throw new Error(`Invalid file path for data file: ${e}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/util.js"}],[1984,{"./constants.cjs":1985,"@metamask/base-controller":1190,"@metamask/controller-utils":1216},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PreferencesController=r.getDefaultPreferencesState=void 0;const o=e("@metamask/base-controller"),a=e("@metamask/controller-utils"),c=e("./constants.cjs"),u={featureFlags:{persist:!0,anonymous:!0},identities:{persist:!0,anonymous:!1},ipfsGateway:{persist:!0,anonymous:!1},isIpfsGatewayEnabled:{persist:!0,anonymous:!0},isMultiAccountBalancesEnabled:{persist:!0,anonymous:!0},lostIdentities:{persist:!0,anonymous:!1},openSeaEnabled:{persist:!0,anonymous:!0},securityAlertsEnabled:{persist:!0,anonymous:!0},selectedAddress:{persist:!0,anonymous:!1},showTestNetworks:{persist:!0,anonymous:!0},showIncomingTransactions:{persist:!0,anonymous:!0},useNftDetection:{persist:!0,anonymous:!0},useTokenDetection:{persist:!0,anonymous:!0},smartTransactionsOptInStatus:{persist:!0,anonymous:!1},useTransactionSimulations:{persist:!0,anonymous:!0}};function l(){return{featureFlags:{},identities:{},ipfsGateway:"https://ipfs.io/ipfs/",isIpfsGatewayEnabled:!0,isMultiAccountBalancesEnabled:!0,lostIdentities:{},openSeaEnabled:!1,securityAlertsEnabled:!1,selectedAddress:"",showIncomingTransactions:{[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MAINNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.GOERLI]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.BSC]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.BSC_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.OPTIMISM]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.OPTIMISM_SEPOLIA]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.POLYGON]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.POLYGON_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.AVALANCHE]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.AVALANCHE_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.FANTOM]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.FANTOM_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.SEPOLIA]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_GOERLI]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_SEPOLIA]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_MAINNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONBEAM]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONBEAM_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONRIVER]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.GNOSIS]:!0},showTestNetworks:!1,useNftDetection:!1,useTokenDetection:!0,smartTransactionsOptInStatus:!1,useTransactionSimulations:!0}}r.getDefaultPreferencesState=l;class d extends o.BaseController{constructor({messenger:e,state:t}){super({name:"PreferencesController",metadata:u,messenger:e,state:{...l(),...t}}),n.add(this),e.subscribe("KeyringController:stateChange",(e=>{const t=new Set;for(const r of e.keyrings)for(const e of r.accounts)t.add(e);t.size>0&&i(this,n,"m",s).call(this,Array.from(t))}))}addIdentities(e){const t=e.map((e=>(0,a.toChecksumHexAddress)(e)));this.update((e=>{const{identities:r}=e;for(const e of t){if(r[e])continue;const t=Object.keys(r).length;r[e]={name:`Account ${t+1}`,address:e,importTime:Date.now()}}}))}removeIdentity(e){e=(0,a.toChecksumHexAddress)(e);const{identities:t}=this.state;t[e]&&this.update((t=>{delete t.identities[e],e===t.selectedAddress&&(t.selectedAddress=Object.keys(t.identities)[0])}))}setAccountLabel(e,t){e=(0,a.toChecksumHexAddress)(e),this.update((r=>{const n=r.identities[e]||{};n.name=t,r.identities[e]=n}))}setFeatureFlag(e,t){this.update((r=>{r.featureFlags[e]=t}))}setSelectedAddress(e){this.update((t=>{t.selectedAddress=(0,a.toChecksumHexAddress)(e)}))}setIpfsGateway(e){this.update((t=>{t.ipfsGateway=e}))}setUseTokenDetection(e){this.update((t=>{t.useTokenDetection=e}))}setUseNftDetection(e){if(e&&!this.state.openSeaEnabled)throw new Error("useNftDetection cannot be enabled if openSeaEnabled is false");this.update((t=>{t.useNftDetection=e}))}setOpenSeaEnabled(e){this.update((t=>{t.openSeaEnabled=e,e||(t.useNftDetection=!1)}))}setSecurityAlertsEnabled(e){this.update((t=>{t.securityAlertsEnabled=e}))}setIsMultiAccountBalancesEnabled(e){this.update((t=>{t.isMultiAccountBalancesEnabled=e}))}setShowTestNetworks(e){this.update((t=>{t.showTestNetworks=e}))}setIsIpfsGatewayEnabled(e){this.update((t=>{t.isIpfsGatewayEnabled=e}))}setEnableNetworkIncomingTransactions(e,t){Object.values(c.ETHERSCAN_SUPPORTED_CHAIN_IDS).includes(e)&&this.update((r=>{r.showIncomingTransactions={...this.state.showIncomingTransactions,[e]:t}}))}setSmartTransactionsOptInStatus(e){this.update((t=>{t.smartTransactionsOptInStatus=e}))}setUseTransactionSimulations(e){this.update((t=>{t.useTransactionSimulations=e}))}}r.PreferencesController=d,n=new WeakSet,s=function(e){e=e.map((e=>(0,a.toChecksumHexAddress)(e))),this.update((t=>{const{identities:r}=t,n={};for(const[t,s]of Object.entries(r))e.includes(t)||(n[t]=s,delete r[t]);for(const[e,r]of Object.entries(n))t.lostIdentities[e]=r})),this.addIdentities(e),e.includes(this.state.selectedAddress)||this.update((t=>{t.selectedAddress=e[0]}))},r.default=d}}},{package:"@metamask/preferences-controller",file:"node_modules/@metamask/preferences-controller/dist/PreferencesController.cjs"}],[1985,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ETHERSCAN_SUPPORTED_CHAIN_IDS=void 0,r.ETHERSCAN_SUPPORTED_CHAIN_IDS={MAINNET:"0x1",GOERLI:"0x5",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",GNOSIS:"0x64"}}}},{package:"@metamask/preferences-controller",file:"node_modules/@metamask/preferences-controller/dist/constants.cjs"}],[1986,{"./PreferencesController.cjs":1984,"./constants.cjs":1985},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.ETHERSCAN_SUPPORTED_CHAIN_IDS=void 0,s(e("./PreferencesController.cjs"),r);var i=e("./constants.cjs");Object.defineProperty(r,"ETHERSCAN_SUPPORTED_CHAIN_IDS",{enumerable:!0,get:function(){return i.ETHERSCAN_SUPPORTED_CHAIN_IDS}})}}},{package:"@metamask/preferences-controller",file:"node_modules/@metamask/preferences-controller/dist/index.cjs"}],[199,{"@metamask/permission-controller":1850,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/permission-controller"),s=e("lodash");r.default={version:69,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=69;const r=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?n.SubjectType.Extension:n.SubjectType.Website)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[20,{"../../../development/build/constants":287,"../../../shared/constants/alarms":5110,"../../../shared/constants/app":5112,"../../../shared/constants/metametrics":5124,"../../../shared/constants/time":5140,"../../../shared/constants/transaction":5142,"../../../shared/modules/mv3.utils":5171,"../lib/util":130,"@metamask/name-controller":1657,"@metamask/obs-store":1836,"@metamask/utils":2850,buffer:3645,"ethereumjs-util":3880,lodash:4463,uuid:5040},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.overrideAnonymousEventNames=r.default=void 0;var n=e("lodash"),s=e("@metamask/obs-store"),i=e("ethereumjs-util"),o=e("uuid"),a=e("@metamask/name-controller"),c=e("@metamask/utils"),u=e("../../../shared/constants/app"),l=e("../../../shared/constants/metametrics"),d=e("../../../shared/constants/time"),h=e("../../../shared/modules/mv3.utils"),f=e("../../../shared/constants/alarms"),p=e("../lib/util"),m=e("../../../shared/constants/transaction"),g=e("../../../development/build/constants");function y(e,t,r){v(e,t),t.set(e,r)}function v(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return e.get(k(e,t))}function w(e,t,r){return e.set(k(e,t),r),r}function k(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const S=r.overrideAnonymousEventNames={[m.TransactionMetaMetricsEvent.added]:m.AnonymousTransactionMetaMetricsEvent.added,[m.TransactionMetaMetricsEvent.approved]:m.AnonymousTransactionMetaMetricsEvent.approved,[m.TransactionMetaMetricsEvent.finalized]:m.AnonymousTransactionMetaMetricsEvent.finalized,[m.TransactionMetaMetricsEvent.rejected]:m.AnonymousTransactionMetaMetricsEvent.rejected,[m.TransactionMetaMetricsEvent.submitted]:m.AnonymousTransactionMetaMetricsEvent.submitted,[l.MetaMetricsEventName.SignatureRequested]:l.MetaMetricsEventName.SignatureRequestedAnon,[l.MetaMetricsEventName.SignatureApproved]:l.MetaMetricsEventName.SignatureApprovedAnon,[l.MetaMetricsEventName.SignatureRejected]:l.MetaMetricsEventName.SignatureRejectedAnon},E=e=>{setTimeout((()=>{throw e}))},T=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,p.generateRandomId)()},j={'You must pass either an "anonymousId" or a "userId".':!0};var C=new WeakMap,I=new WeakMap,P=new WeakMap,A=new WeakMap,R=new WeakSet,M=new WeakMap;function O(e,t=l.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e,marketingCampaignCookieId:this.state.marketingCampaignCookieId}}function x(e){const{event:t,properties:r,revenue:s,value:i,currency:o,category:a,page:c,referrer:l,environmentType:d=u.ENVIRONMENT_TYPE_BACKGROUND}=e;return{event:t,messageId:T(e),properties:{...(0,n.omit)(r,["revenue","locale","currency","value"]),revenue:s,value:i,currency:o,category:a,locale:this.locale,chain_id:r&&"chain_id"in r&&"string"==typeof r.chain_id?r.chain_id:this.chainId,environment_type:d},context:k(R,this,O).call(this,l,c)}}function N(e){return Object.entries(e).reduce(((e,[t,r])=>k(R,this,V).call(this,r)?{...e,[t]:r.toISOString()}:k(R,this,L).call(this,r)?{...e,[t]:r}:(console.warn(`MetaMetricsController: "${t}" value is not a valid trait type`),e)),{})}function B(e={}){const t=b(M,this).call(this,e).map((e=>e.address));return new Set(t).size}function D(e){return Object.values(e).reduce(((e,t)=>e+(0,n.sum)(Object.values(t).map(n.size))),0)}function $(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{k(R,this,U).call(this,"identify",{userId:t??undefined,traits:e})}catch(e){b(C,this).call(this,e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}function L(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||k(R,this,J).call(this,e)||k(R,this,V).call(this,e)}function J(e){return Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"boolean"==typeof e))||e.every((e=>"number"==typeof e)))}function V(e){return"[object Date]"===Object.prototype.toString.call(e)}function H(e,t){const{isOptIn:r,metaMetricsId:n,matomoEvent:s,flushImmediately:i}=t||{};let o="userId",a=this.state.metaMetricsId,u=(null==t?void 0:t.excludeMetaMetricsId)??!1;const d=Boolean(e.event.match(/^send|^confirm/iu));return!1!==(null==t?void 0:t.excludeMetaMetricsId)&&d&&(u=!0),u||r&&!n?(o="anonymousId",a=l.METAMETRICS_ANONYMOUS_ID):r&&n&&(a=n),e[o]=a??undefined,!0===s&&(e.properties.legacy_event=!0),new Promise(((t,r)=>{k(R,this,U).call(this,"track",e,(e=>{if(e){const t=(0,c.isErrorWithMessage)(e)?e.message:"",n=(0,c.isErrorWithStack)(e)?e.stack:undefined,s=new Error(t);return n&&(s.stack=n),r(s)}return t()})),i&&b(A,this).flush()}))}function U(e,t,r){const{metaMetricsId:n,participateInMetaMetrics:s,latestNonAnonymousEventTimestamp:i}=this.state;if(!s||!n)return;const o=t.messageId||(0,p.generateRandomId)();let a=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,p.isValidDate)(e)&&(a=e)}const c={...t,messageId:o,timestamp:a};this.store.updateState({...this.store.getState(),latestNonAnonymousEventTimestamp:c.anonymousId===l.METAMETRICS_ANONYMOUS_ID?i:a.valueOf(),segmentApiCalls:{...this.store.getState().segmentApiCalls,[o]:{eventType:e,payload:{...c,timestamp:c.timestamp.toString()}}}});b(A,this)[e](c,(e=>{const{segmentApiCalls:t}=this.store.getState();return delete t[o],this.store.updateState({segmentApiCalls:t}),null==r?void 0:r(e)}))}function F(e){var t;const r=(null===(t=e.names)||void 0===t?void 0:t[a.NameType.ETHEREUM_ADDRESS])??{};return Object.keys(r).reduce(((e,t)=>{const n=r[t];return e+Object.keys(n).reduce(((e,t)=>{var r;return e+(Boolean(null===(r=n[t].name)||void 0===r?void 0:r.length)?1:0)}),0)}),0)}r.default=class{constructor({segment:e,preferencesControllerState:t,onPreferencesStateChange:r,onNetworkDidChange:i,getCurrentChainId:o,version:a,environment:u,initState:l,extension:m,captureException:g=E}){var S,T;v(S=this,T=R),T.add(S),_(this,"store",void 0),y(this,C,void 0),_(this,"chainId",void 0),_(this,"locale",void 0),_(this,"version",void 0),y(this,I,void 0),y(this,P,void 0),y(this,A,void 0),y(this,M,(0,n.memoize)(((e={})=>Object.values(e).reduce(((e,t)=>e.concat(...Object.values(t))),[])))),w(C,this,(e=>{const t=(0,c.getErrorMessage)(e);j[t]||g(e)})),this.chainId=o(),this.locale=t.currentLocale.replace("_","-"),this.version="production"===u?a:`${a}-${u}`,w(I,this,m),w(P,this,u);const O=(0,n.omitBy)(null==l?void 0:l.fragments,"persist"),x=(null==l?void 0:l.segmentApiCalls)||{};this.store=new s.ObservableStore({participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],traits:{},previousUserTraits:{},...l,fragments:{...null==l?void 0:l.fragments},segmentApiCalls:{...x}}),r((({currentLocale:e})=>{this.locale=null==e?void 0:e.replace("_","-")})),i((()=>{this.chainId=o()})),w(A,this,e),Object.values(O).forEach((e=>{this.processAbandonedFragment(e)})),h.isManifestV3&&Object.values(x).forEach((({eventType:e,payload:t})=>{try{k(R,this,U).call(this,e,t)}catch(e){b(C,this).call(this,e)}})),h.isManifestV3?(b(I,this).alarms.getAll().then((e=>{(0,p.checkAlarmExists)(e,f.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||b(I,this).alarms.create(f.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})})),b(I,this).alarms.onAlarm.addListener((e=>{e.name===f.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()}))):setInterval((()=>{this.finalizeAbandonedFragments()}),30*d.SECOND)}finalizeAbandonedFragments(){Object.values(this.store.getState().fragments).forEach((e=>{e.timeout&&e.lastUpdated&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.processAbandonedFragment(e)}))}generateMetaMetricsId(){return(0,i.bufferToHex)((0,i.keccak)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent||!e.category)throw new Error(`Must specify success event and category. Success event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.store.getState(),r=e.uniqueIdentifier??(0,o.v4)(),s={id:r,...e,lastUpdated:Date.now()},i=e.initialEvent===m.TransactionMetaMetricsEvent.submitted&&t[r]?{...t[r],canDeleteIfAbandoned:!1}:{};return this.store.updateState({fragments:{...t,[r]:(0,n.merge)(i,s)}}),s.initialEvent&&this.trackEvent({event:s.initialEvent,category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:s.page,referrer:s.referrer,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),s}getEventFragmentById(e){const{fragments:t}=this.store.getState();return t[e]}processAbandonedFragment(e){e.canDeleteIfAbandoned?this.deleteEventFragment(e.id):this.finalizeEventFragment(e.id,{abandoned:!0})}updateEventFragment(e,t){const{fragments:r}=this.store.getState(),s=r[e];if(!s&&e.includes("transaction-submitted-"))r[e]={canDeleteIfAbandoned:!0,category:l.MetaMetricsEventCategory.Transactions,successEvent:m.TransactionMetaMetricsEvent.finalized,id:e};else if(!s)throw new Error(`Event fragment with id ${e} does not exist.`);this.store.updateState({fragments:{...r,[e]:(0,n.merge)(r[e],{...t,lastUpdated:Date.now()})}})}deleteEventFragment(e){const{fragments:t}=this.store.getState();t[e]&&delete t[e]}finalizeEventFragment(e,{abandoned:t=!1,page:r,referrer:n}={}){const s=this.store.getState().fragments[e];if(!s)throw new Error(`Funnel with id ${e} does not exist.`);const i=t?s.failureEvent:s.successEvent;this.trackEvent({event:i??"",category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:r??s.page,referrer:s.referrer??n,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:s.actionId,uniqueIdentifier:s.uniqueIdentifier?`${s.uniqueIdentifier}-${t?"failure":"success"}`:undefined});const{fragments:o}=this.store.getState();delete o[e],this.store.updateState({fragments:o})}identify(e){const{metaMetricsId:t,participateInMetaMetrics:r}=this.state;if(!r||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const n=k(R,this,N).call(this,e);k(R,this,$).call(this,n)}updateExtensionUninstallUrl(e,r){const n={};e&&(n.mmi=t.from(r).toString("base64"),n.env=b(P,this),n.av=this.version);const s=new URLSearchParams(n);b(I,this)&&b(I,this).runtime&&b(I,this).runtime.setUninstallURL(`https://metamask.io/uninstalled?${s}`)}async setParticipateInMetaMetrics(e){const{metaMetricsId:t}=this.state,r=e&&!t?this.generateMetaMetricsId():t;return this.store.updateState({participateInMetaMetrics:e,metaMetricsId:r}),e?(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn()):this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),b(P,this)!==g.ENVIRONMENT.DEVELOPMENT&&null!==r&&this.updateExtensionUninstallUrl(e,r),r}setDataCollectionForMarketing(e){const{metaMetricsId:t}=this.state;return this.store.updateState({dataCollectionForMarketing:e}),!e&&this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),t}setMarketingCampaignCookieId(e){this.store.updateState({marketingCampaignCookieId:e})}get state(){return this.store.getState()}trackPage(e,t){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==t||!t.isOptInPath))return;const{name:r,params:n,environmentType:s,page:i,referrer:o,actionId:a}=e,{metaMetricsId:c}=this.state,u=c?"userId":"anonymousId",d=c??l.METAMETRICS_ANONYMOUS_ID;k(R,this,U).call(this,"page",{messageId:T({actionId:a}),[u]:d,name:r,properties:{params:n,locale:this.locale,chain_id:this.chainId,environment_type:s},context:k(R,this,O).call(this,o,i)})}catch(e){b(C,this).call(this,e)}}trackEvent(e,t){this.validatePayload(e),this.submitEvent(e,t).catch((e=>b(C,this).call(this,e)))}async submitEvent(e,t){if(this.validatePayload(e),!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const r=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const s=S[`${e.event}`],i={...e,event:s??e.event},o=(0,n.merge)(i.sensitiveProperties,i.properties);r.push(k(R,this,H).call(this,k(R,this,x).call(this,{...i,properties:o,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}r.push(k(R,this,H).call(this,k(R,this,x).call(this,e),t)),await Promise.all(r)}validatePayload(e){if(!e.event||!e.category)throw new Error(`Must specify event and category. Event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.store.getState();e.forEach((e=>{this.trackEvent(e)}))}clearEventsAfterMetricsOptIn(){this.store.updateState({eventsBeforeMetricsOptIn:[]})}addEventBeforeMetricsOptIn(e){const t=this.store.getState().eventsBeforeMetricsOptIn;this.store.updateState({eventsBeforeMetricsOptIn:[...t,e]})}updateTraits(e){const{traits:t}=this.store.getState();this.store.updateState({traits:{...t,...e}})}getMetaMetricsId(){let{metaMetricsId:e}=this.state;return e||(e=this.generateMetaMetricsId(),this.store.updateState({metaMetricsId:e})),e}_buildUserTraitsObject(e){var t;const{traits:r,previousUserTraits:s}=this.store.getState(),i={[l.MetaMetricsUserTrait.AddressBookEntries]:(0,n.sum)(Object.values(e.addressBook).map((e=>(0,n.size)(e)))),[l.MetaMetricsUserTrait.InstallDateExt]:r[l.MetaMetricsUserTrait.InstallDateExt]||"",[l.MetaMetricsUserTrait.LedgerConnectionType]:e.ledgerTransportType,[l.MetaMetricsUserTrait.NetworksAdded]:Object.values(e.networkConfigurationsByChainId).map((e=>e.chainId)),[l.MetaMetricsUserTrait.NetworksWithoutTicker]:Object.values(e.networkConfigurationsByChainId).filter((({nativeCurrency:e})=>!e)).map((({chainId:e})=>e)),[l.MetaMetricsUserTrait.NftAutodetectionEnabled]:e.useNftDetection,[l.MetaMetricsUserTrait.NumberOfAccounts]:Object.values(e.internalAccounts.accounts).length,[l.MetaMetricsUserTrait.NumberOfNftCollections]:k(R,this,B).call(this,e.allNfts),[l.MetaMetricsUserTrait.NumberOfNfts]:b(M,this).call(this,e.allNfts).length,[l.MetaMetricsUserTrait.NumberOfTokens]:k(R,this,D).call(this,e.allTokens),[l.MetaMetricsUserTrait.OpenSeaApiEnabled]:e.openSeaEnabled,[l.MetaMetricsUserTrait.ThreeBoxEnabled]:!1,[l.MetaMetricsUserTrait.Theme]:e.theme||"default",[l.MetaMetricsUserTrait.TokenDetectionEnabled]:e.useTokenDetection,[l.MetaMetricsUserTrait.ShowNativeTokenAsMainBalance]:e.ShowNativeTokenAsMainBalance,[l.MetaMetricsUserTrait.CurrentCurrency]:e.currentCurrency,[l.MetaMetricsUserTrait.SecurityProviders]:e.securityAlertsEnabled?["blockaid"]:[],[l.MetaMetricsUserTrait.PetnameAddressCount]:k(R,this,F).call(this,e),[l.MetaMetricsUserTrait.IsMetricsOptedIn]:e.participateInMetaMetrics,[l.MetaMetricsUserTrait.HasMarketingConsent]:e.dataCollectionForMarketing,[l.MetaMetricsUserTrait.TokenSortPreference]:(null===(t=e.tokenSortConfig)||void 0===t?void 0:t.key)||""};if(!s)return this.store.updateState({previousUserTraits:i}),i;if(s&&!(0,n.isEqual)(s,i)){const e=(0,n.pickBy)(i,((e,t)=>{const r=s[t];return!(0,n.isEqual)(r,e)}));return this.store.updateState({previousUserTraits:i}),e}return null}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics.ts"}],[200,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:70,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=70;const r=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[201,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:71,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=71;const r=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[202,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:72,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=72;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[2022,{"@metamask/base-controller":1190,"@metamask/selected-network-controller":2141,"@metamask/utils":2035},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g,y,v,_=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},b=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=r.controllerName=void 0;const w=e("@metamask/base-controller"),k=e("@metamask/selected-network-controller"),S=e("@metamask/utils");r.controllerName="QueuedRequestController",r.QueuedRequestControllerActionTypes={enqueueRequest:`${r.controllerName}:enqueueRequest`,getState:`${r.controllerName}:getState`},r.QueuedRequestControllerEventTypes={networkSwitched:`${r.controllerName}:networkSwitched`,stateChange:`${r.controllerName}:stateChange`};class E extends w.BaseController{constructor({messenger:e,shouldRequestSwitchNetwork:t,canRequestSwitchNetworkWithoutApproval:f,clearPendingConfirmations:p,showApprovalRequest:m}){super({name:r.controllerName,metadata:{queuedRequestCount:{anonymous:!0,persist:!1}},messenger:e,state:{queuedRequestCount:0}}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,[]),a.set(this,0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),_(this,c,t,"f"),_(this,u,f,"f"),_(this,l,p,"f"),_(this,d,m,"f"),b(this,n,"m",h).call(this)}async enqueueRequest(e,t){if(e.networkClientId===undefined)throw new Error("Error while attempting to enqueue request: networkClientId is required.");b(this,s,"f")===undefined&&_(this,s,e.origin,"f"),b(this,i,"f")===undefined&&_(this,i,e.networkClientId,"f");try{let r;const o=b(this,a,"f")>0&&b(this,u,"f").call(this,e);if(this.state.queuedRequestCount>0||b(this,s,"f")!==e.origin||b(this,i,"f")!==e.networkClientId||o){b(this,d,"f").call(this);const t=b(this,n,"m",y).call(this,e);r=t.requestHasEnded,await t.dequeuedPromise}else b(this,c,"f").call(this,e)&&await b(this,n,"m",m).call(this,e.networkClientId);_(this,a,b(this,a,"f")+1,"f");try{await t()}finally{r?.(),_(this,a,b(this,a,"f")-1,"f")}return undefined}finally{b(this,n,"m",v).call(this)}}}r.QueuedRequestController=E,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,n=new WeakSet,h=function(){this.messagingSystem.registerActionHandler(`${r.controllerName}:enqueueRequest`,this.enqueueRequest.bind(this)),this.messagingSystem.subscribe(k.SelectedNetworkControllerEventTypes.stateChange,((e,t)=>{t.forEach((({op:e,path:t})=>{if(2===t.length&&"domains"===t[0]&&"string"==typeof t[1]){const r=t[1];b(this,n,"m",f).call(this,r),"remove"===e&&r===b(this,s,"f")&&b(this,l,"f").call(this)}}))}))},f=function(e){b(this,o,"f").filter((({request:t})=>t.origin===e)).forEach((({processRequest:e})=>{e(new Error("The request has been rejected due to a change in selected network. Please verify the selected network and retry the request."))})),_(this,o,b(this,o,"f").filter((({request:t})=>t.origin!==e)),"f"),b(this,n,"m",g).call(this)},p=async function(){const e=b(this,o,"f").shift();_(this,s,e.request.origin,"f"),_(this,i,e.request.networkClientId,"f");const t=[e];let r;try{await b(this,n,"m",m).call(this,e.request.networkClientId)}catch(e){r=e}if(b(this,u,"f").call(this,e.request)){_(this,a,b(this,a,"f")+1,"f");try{e.processRequest(r),b(this,n,"m",g).call(this),await e.requestHasBeenProcessed}finally{_(this,a,b(this,a,"f")-1,"f")}const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");return b(this,i,"f")!==t&&b(this,n,"m",f).call(this,b(this,s,"f")),void b(this,n,"m",v).call(this)}for(;b(this,o,"f")[0]?.request.networkClientId===b(this,i,"f")&&b(this,o,"f")[0]?.request.origin===b(this,s,"f")&&!b(this,u,"f").call(this,b(this,o,"f")[0]?.request);){const e=b(this,o,"f").shift();t.push(e)}for(const{processRequest:e}of t)e(r);b(this,n,"m",g).call(this)},m=async function(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");e!==t&&(await this.messagingSystem.call("NetworkController:setActiveNetwork",e),this.messagingSystem.publish("QueuedRequestController:networkSwitched",e))},g=function(){this.update((e=>{e.queuedRequestCount=b(this,o,"f").length}))},y=function(e){const{promise:t,reject:r,resolve:s}=(0,S.createDeferredPromise)({suppressUnhandledRejection:!0}),{promise:i,resolve:a}=(0,S.createDeferredPromise)({suppressUnhandledRejection:!0});return b(this,o,"f").push({request:e,processRequest:e=>{e?r(e):s()},requestHasBeenProcessed:i}),b(this,n,"m",g).call(this),{dequeuedPromise:t,requestHasEnded:a}},v=function(){0===b(this,a,"f")&&(_(this,s,undefined,"f"),_(this,i,undefined,"f"),b(this,o,"f").length>0&&b(this,n,"m",p).call(this))}}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestController.cjs"}],[2023,{"@metamask/json-rpc-engine":1526,"@metamask/rpc-errors":2104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("@metamask/rpc-errors");r.createQueuedRequestMiddleware=({enqueueRequest:e,useRequestQueue:t,shouldEnqueueRequest:r})=>(0,n.createAsyncMiddleware)((async(n,i,o)=>{if(function(e){if(!e.origin)throw new Error("Request object is lacking an 'origin'");if("string"!=typeof e.origin)throw new Error(`Request object has an invalid origin of type '${typeof e.origin}'`);if(!e.networkClientId)throw new Error("Request object is lacking a 'networkClientId'");if("string"!=typeof e.networkClientId)throw new Error(`Request object has an invalid networkClientId of type '${typeof e.networkClientId}'`)}(n),!t()||!r(n))return await o();try{await e(n,o)}catch(e){i.error=(0,s.serializeError)(e)}return undefined}))}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestMiddleware.cjs"}],[2024,{"./QueuedRequestController.cjs":2022,"./QueuedRequestMiddleware.cjs":2023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=void 0;var n=e("./QueuedRequestController.cjs");Object.defineProperty(r,"QueuedRequestControllerActionTypes",{enumerable:!0,get:function(){return n.QueuedRequestControllerActionTypes}}),Object.defineProperty(r,"QueuedRequestControllerEventTypes",{enumerable:!0,get:function(){return n.QueuedRequestControllerEventTypes}}),Object.defineProperty(r,"QueuedRequestController",{enumerable:!0,get:function(){return n.QueuedRequestController}});var s=e("./QueuedRequestMiddleware.cjs");Object.defineProperty(r,"createQueuedRequestMiddleware",{enumerable:!0,get:function(){return s.createQueuedRequestMiddleware}})}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/index.cjs"}],[2025,{"./errors.cjs":2033,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class o extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=o,r.assert=function(e,t="Assertion failed.",r=o){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",a=o){try{(0,n.assert)(e,t)}catch(e){throw i(a,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[2026,{"./assert.cjs":2025,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let o,a;return"base64"===i?o=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),o=String.raw`[-_A-Za-z0-9]`),a=r?new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,n.pattern)(e,a)}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[2027,{"./assert.cjs":2025,"./hex.cjs":2034,"@scure/base":2919,buffer:3645},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),o=48,a=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<a?o:c),u=s-(s<a?o:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[2028,{"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAssetId=r.isCaipAssetType=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAssetIdStruct=r.CaipAssetTypeStruct=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ASSET_ID_REGEX=r.CAIP_ASSET_TYPE_REGEX=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),r.CaipAssetTypeStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_TYPE_REGEX),r.CaipAssetIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.isCaipAssetType=function(e){return(0,n.is)(e,r.CaipAssetTypeStruct)},r.isCaipAssetId=function(e){return(0,n.is)(e,r.CaipAssetIdStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2029,{"./base64.cjs":2026,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[203,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:73,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=73;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[2030,{"./assert.cjs":2025,"./bytes.cjs":2027,"./hex.cjs":2034,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),o=e("./hex.cjs"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[2031,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),o(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),o(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[2032,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2033,{"./misc.cjs":2039,"pony-cause":4600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function o(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=o,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return o(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[2034,{"./assert.cjs":2025,"./bytes.cjs":2027,"@metamask/superstruct":2695,"@noble/hashes/sha3":2900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),o=e("./bytes.cjs");function a(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),a=d((0,o.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=a[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=a,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(a(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[2035,{"./assert.cjs":2025,"./base64.cjs":2026,"./bytes.cjs":2027,"./caip-types.cjs":2028,"./checksum.cjs":2029,"./coercers.cjs":2030,"./collections.cjs":2031,"./encryption-types.cjs":2032,"./errors.cjs":2033,"./hex.cjs":2034,"./json.cjs":2036,"./keyring.cjs":2037,"./logging.cjs":2038,"./misc.cjs":2039,"./number.cjs":2040,"./opaque.cjs":2041,"./promise.cjs":2042,"./time.cjs":2043,"./transaction-types.cjs":2044,"./versions.cjs":2045},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/index.cjs"}],[2036,{"./assert.cjs":2025,"./misc.cjs":2039,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function o({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function a(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!o(r)||e.validator(t,r),refiner:(t,r)=>!o(r)||e.refiner(t,r)})}function c(e){if(null===e||"boolean"==typeof e||"string"==typeof e)return!0;if("number"==typeof e&&Number.isFinite(e))return!0;if("object"==typeof e){let t=!0;if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(!c(e[r])){t=!1;break}return t}const r=Object.entries(e);for(let e=0;e<r.length;e++)if("string"!=typeof r[e][0]||!c(r[e][1])){t=!1;break}return t}return!1}function u(e){return(0,n.create)(e,r.JsonStruct)}r.object=e=>(0,n.object)(e),r.exactOptional=a,r.UnsafeJsonStruct=(0,n.define)("JSON",(e=>c(e))),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return u(e),!0}catch{return!1}},r.getSafeJson=u,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:a(r.JsonStruct),stack:a((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/json.cjs"}],[2037,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[2038,{debug:3789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[2039,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[204,{"../../../shared/constants/network":5128,"bignumber.js":3549,lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/network");const a=e=>new i.default(e||"0x0",16).gt(0),c=["0x3","0x2a","0x4"],u={"0x3":{rpcUrl:(0,o.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,o.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,o.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};r.default={version:74,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=74;const r=function(e){var t,r;const n=(null==e?void 0:e.PreferencesController)||{},i=n.preferences||{},o=(null==e?void 0:e.NetworkController)||{},l=(null==o?void 0:o.provider)||{},d=c.filter((e=>e===(null==l?void 0:l.chainId)));if(!i.showTestNetworks&&0===d.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},f=(null===(r=e.CachedBalancesController)||void 0===r?void 0:r.cachedBalances)||{},p=Object.values(h).filter((({chainId:e})=>c.includes(e))).map((({chainId:e})=>e)),m=c.filter((e=>Object.values(f[e]||{}).some(a))),g=(0,s.uniq)([...m,...p,...d]),y=n.frequentRpcListDetail??[];g.forEach((e=>{y.find((t=>t.chainId===e))||y.unshift({rpcUrl:u[e].rpcUrl,chainId:e,ticker:u[e].ticker,nickname:u[e].nickname,rpcPrefs:{}})})),y.length&&(n.frequentRpcListDetail=y);if(d.length){const e=d[0];o.provider={...o.provider,type:"rpc",rpcUrl:u[e].rpcUrl,chainId:e,nickname:u[e].nickname,ticker:u[e].ticker}}return{...e,PreferencesController:{...n},NetworkController:{...o}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[2040,{"./assert.cjs":2025,"./hex.cjs":2034},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/number.cjs"}],[2041,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[2042,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[2043,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/time.cjs"}],[2044,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2045,{"./assert.cjs":2025,"@metamask/superstruct":2695,semver:4923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/queued-request-controller>@metamask/utils",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[2046,{"@metamask/base-controller":2053,"@metamask/rpc-errors":2057,"@metamask/utils":2090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("@metamask/rpc-errors"),i=e("@metamask/utils"),o="RateLimitController",a={requests:{persist:!1,anonymous:!1}},c=class extends n.BaseController{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:r,state:n,implementations:s}){const c={requests:i.getKnownPropertyNames.call(void 0,s).reduce(((e,t)=>({...e,[t]:{}})),{})};super({name:o,metadata:a,messenger:r,state:{...c,...n}}),this.implementations=s,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${o}:call`,((e,t,...r)=>this.call(e,t,...r)))}async call(e,t,...r){if(this.isRateLimited(t,e))throw s.rpcErrors.limitExceeded({message:`"${t.toString()}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const n=this.implementations[t].method;if(!n)throw new Error("Invalid api type");return n(...r)}isRateLimited(e,t){const r=this.implementations[e].rateLimitCount??this.rateLimitCount;return this.state.requests[e][t]>=r}recordRequest(e,t){const r=this.implementations[e].rateLimitTimeout??this.rateLimitTimeout,n=this.state.requests[e][t]??0;this.update((s=>{0===n&&setTimeout((()=>this.resetRequestCount(e,t)),r),Object.assign(s,{requests:{...s.requests,[e]:{[t]:n+1}}})}))}resetRequestCount(e,t){this.update((r=>{Object.assign(r,{requests:{...r.requests,[e]:{[t]:0}}})}))}};r.RateLimitController=c}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/chunk-37GF32BR.js"}],[2047,{"./chunk-37GF32BR.js":2046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-37GF32BR.js");r.RateLimitController=n.RateLimitController}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/index.js"}],[2048,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[2049,{"./chunk-UJFCPTF3.js":2051,"./chunk-Z4BLTVTB.js":2052},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,o,a=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,o,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,o).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,o).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,o).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,o).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,a.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[205,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:75,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=75;const r=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[2050,{"./chunk-Z4BLTVTB.js":2052,immer:4278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function o(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:o}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,o,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,o]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:o}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return o(e,t,"anonymous")},r.getPersistentState=function(e,t){return o(e,t,"persist")}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[2051,{"./chunk-Z4BLTVTB.js":2052},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,o,a,c,u,l,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,o);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,l=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,a),f.__privateAdd.call(void 0,this,u),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,o,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,o,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,u,l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,a,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,a,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2052,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2053,{"./chunk-FTHCJ6HY.js":2048,"./chunk-G42723LG.js":2049,"./chunk-IURK6TKD.js":2050,"./chunk-UJFCPTF3.js":2051,"./chunk-Z4BLTVTB.js":2052},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),o=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=o.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/index.js"}],[2054,{"./utils.cjs":2058,"@metamask/utils":2069,"fast-safe-stringify":3988},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.EthereumProviderError=r.JsonRpcError=void 0;const s=e("@metamask/utils"),i=n(e("fast-safe-stringify")),o=e("./utils.cjs");class a extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a non-empty string.');(0,o.dataHasCause)(r)?(super(t,{cause:r.cause}),(0,s.hasProperty)(this,"cause")||Object.assign(this,{cause:r.cause})):super(t),r!==undefined&&(this.data=r),this.code=e}serialize(){const e={code:this.code,message:this.message};return this.data!==undefined&&(e.data=this.data,(0,s.isPlainObject)(this.data)&&(e.data.cause=(0,o.serializeCause)(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return(0,i.default)(this.serialize(),c,2)}}r.JsonRpcError=a;function c(e,t){return"[Circular]"===t?undefined:t}r.EthereumProviderError=class extends a{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/classes.cjs"}],[2055,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.errorValues=r.errorCodes=void 0,r.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},r.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/error-constants.cjs"}],[2056,{"./classes.cjs":2054,"./error-constants.cjs":2055,"./utils.cjs":2058},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerErrors=r.rpcErrors=void 0;const n=e("./classes.cjs"),s=e("./error-constants.cjs"),i=e("./utils.cjs");function o(e,t){const[r,s]=c(t);return new n.JsonRpcError(e,r??(0,i.getMessageFromCode)(e),s)}function a(e,t){const[r,s]=c(t);return new n.EthereumProviderError(e,r??(0,i.getMessageFromCode)(e),s)}function c(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??undefined,r]}}return[]}r.rpcErrors={parse:e=>o(s.errorCodes.rpc.parse,e),invalidRequest:e=>o(s.errorCodes.rpc.invalidRequest,e),invalidParams:e=>o(s.errorCodes.rpc.invalidParams,e),methodNotFound:e=>o(s.errorCodes.rpc.methodNotFound,e),internal:e=>o(s.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return o(t,e)},invalidInput:e=>o(s.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>o(s.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>o(s.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>o(s.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>o(s.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>o(s.errorCodes.rpc.limitExceeded,e)},r.providerErrors={userRejectedRequest:e=>a(s.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>a(s.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>a(s.errorCodes.provider.unsupportedMethod,e),disconnected:e=>a(s.errorCodes.provider.disconnected,e),chainDisconnected:e=>a(s.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:s}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(t,r,s)}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/errors.cjs"}],[2057,{"./classes.cjs":2054,"./error-constants.cjs":2055,"./errors.cjs":2056,"./utils.cjs":2058},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.errorCodes=r.providerErrors=r.rpcErrors=r.getMessageFromCode=r.serializeError=r.serializeCause=r.dataHasCause=r.EthereumProviderError=r.JsonRpcError=void 0;var n=e("./classes.cjs");Object.defineProperty(r,"JsonRpcError",{enumerable:!0,get:function(){return n.JsonRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return n.EthereumProviderError}});var s=e("./utils.cjs");Object.defineProperty(r,"dataHasCause",{enumerable:!0,get:function(){return s.dataHasCause}}),Object.defineProperty(r,"serializeCause",{enumerable:!0,get:function(){return s.serializeCause}}),Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return s.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return s.getMessageFromCode}});var i=e("./errors.cjs");Object.defineProperty(r,"rpcErrors",{enumerable:!0,get:function(){return i.rpcErrors}}),Object.defineProperty(r,"providerErrors",{enumerable:!0,get:function(){return i.providerErrors}});var o=e("./error-constants.cjs");Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/index.cjs"}],[2058,{"./error-constants.cjs":2055,"@metamask/utils":2069},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.dataHasCause=r.serializeCause=r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=e("@metamask/utils"),s=e("./error-constants.cjs"),i=s.errorCodes.rpc.internal,o={code:i,message:a(i)};function a(e,t="Unspecified error message. This is a bug, please report it."){if(c(e)){const t=e.toString();if((0,n.hasProperty)(s.errorValues,t))return s.errorValues[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return t}function c(e){return Number.isInteger(e)}function u(e){return Array.isArray(e)?e.map((e=>(0,n.isValidJson)(e)?e:(0,n.isObject)(e)?l(e):null)):(0,n.isObject)(e)?l(e):(0,n.isValidJson)(e)?e:null}function l(e){return Object.getOwnPropertyNames(e).reduce(((t,r)=>{const s=e[r];return(0,n.isValidJson)(s)&&(t[r]=s),t}),{})}r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",r.getMessageFromCode=a,r.isValidCode=c,r.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:r=!0}={}){if(!(0,n.isJsonRpcError)(t))throw new Error("Must provide fallback error with integer number code and string message.");const s=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if((0,n.isJsonRpcError)(e))return e;const r=u(e),s={...t,data:{cause:r}};return s}(e,t);return r||delete s.stack,s},r.serializeCause=u,r.dataHasCause=function(e){return(0,n.isObject)(e)&&(0,n.hasProperty)(e,"cause")&&(0,n.isObject)(e.cause)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/utils.cjs"}],[2059,{"./errors.cjs":2067,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class o extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=o,r.assert=function(e,t="Assertion failed.",r=o){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",a=o){try{(0,n.assert)(e,t)}catch(e){throw i(a,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/assert.cjs"}],[206,{lodash:4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:76,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=76;const r=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:r,ignoredCollectibles:n,...s}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...r?{allNfts:r}:{},...n?{ignoredNfts:n}:{},...s},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[2060,{"./assert.cjs":2059,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let o,a;return"base64"===i?o=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),o=String.raw`[-_A-Za-z0-9]`),a=r?new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,n.pattern)(e,a)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/base64.cjs"}],[2061,{"./assert.cjs":2059,"./hex.cjs":2068,"@scure/base":2919,buffer:3645},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),o=48,a=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<a?o:c),u=s-(s<a?o:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/bytes.cjs"}],[2062,{"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAssetId=r.isCaipAssetType=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAssetIdStruct=r.CaipAssetTypeStruct=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ASSET_ID_REGEX=r.CAIP_ASSET_TYPE_REGEX=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),r.CaipAssetTypeStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_TYPE_REGEX),r.CaipAssetIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.isCaipAssetType=function(e){return(0,n.is)(e,r.CaipAssetTypeStruct)},r.isCaipAssetId=function(e){return(0,n.is)(e,r.CaipAssetIdStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2063,{"./base64.cjs":2060,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/checksum.cjs"}],[2064,{"./assert.cjs":2059,"./bytes.cjs":2061,"./hex.cjs":2068,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),o=e("./hex.cjs"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/coercers.cjs"}],[2065,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),o(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),o(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/collections.cjs"}],[2066,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2067,{"./misc.cjs":2073,"pony-cause":4600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function o(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=o,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return o(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/errors.cjs"}],[2068,{"./assert.cjs":2059,"./bytes.cjs":2061,"@metamask/superstruct":2695,"@noble/hashes/sha3":2900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),o=e("./bytes.cjs");function a(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),a=d((0,o.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=a[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=a,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(a(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/hex.cjs"}],[2069,{"./assert.cjs":2059,"./base64.cjs":2060,"./bytes.cjs":2061,"./caip-types.cjs":2062,"./checksum.cjs":2063,"./coercers.cjs":2064,"./collections.cjs":2065,"./encryption-types.cjs":2066,"./errors.cjs":2067,"./hex.cjs":2068,"./json.cjs":2070,"./keyring.cjs":2071,"./logging.cjs":2072,"./misc.cjs":2073,"./number.cjs":2074,"./opaque.cjs":2075,"./promise.cjs":2076,"./time.cjs":2077,"./transaction-types.cjs":2078,"./versions.cjs":2079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/index.cjs"}],[207,{"@metamask/utils":2850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)&&(0,n.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")&&delete e.PreferencesController.frequentRpcListDetail;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-082.ts"}],[2070,{"./assert.cjs":2059,"./misc.cjs":2073,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function o({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function a(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!o(r)||e.validator(t,r),refiner:(t,r)=>!o(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=a;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:a(r.JsonStruct),stack:a((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/json.cjs"}],[2071,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/keyring.cjs"}],[2072,{debug:3789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/logging.cjs"}],[2073,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/misc.cjs"}],[2074,{"./assert.cjs":2059,"./hex.cjs":2068},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/number.cjs"}],[2075,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/opaque.cjs"}],[2076,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/promise.cjs"}],[2077,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/time.cjs"}],[2078,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2079,{"./assert.cjs":2059,"@metamask/superstruct":2695,semver:4923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/versions.cjs"}],[208,{"@metamask/utils":2850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"network")&&(0,n.hasProperty)(e.NetworkController,"networkId")&&delete e.NetworkController.network;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-084.ts"}],[2080,{"./errors.cjs":2088,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class o extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=o,r.assert=function(e,t="Assertion failed.",r=o){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",a=o){try{(0,n.assert)(e,t)}catch(e){throw i(a,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[2081,{"./assert.cjs":2080,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let o,a;return"base64"===i?o=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),o=String.raw`[-_A-Za-z0-9]`),a=r?new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,n.pattern)(e,a)}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[2082,{"./assert.cjs":2080,"./hex.cjs":2089,"@scure/base":2919,buffer:3645},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),o=48,a=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<a?o:c),u=s-(s<a?o:c);n[e]=16*i+u}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[2083,{"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2084,{"./base64.cjs":2081,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[2085,{"./assert.cjs":2080,"./bytes.cjs":2082,"./hex.cjs":2089,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),o=e("./hex.cjs"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[2086,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),o(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),o(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[2087,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2088,{"./misc.cjs":2094,"pony-cause":4600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function o(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=o,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return o(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[2089,{"./assert.cjs":2080,"./bytes.cjs":2082,"@metamask/superstruct":2695,"@noble/hashes/sha3":2900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),o=e("./bytes.cjs");function a(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),a=d((0,o.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=a[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=a,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(a(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[209,{"@metamask/utils":2850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"provider")&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&delete e.NetworkController.provider;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-086.ts"}],[2090,{"./assert.cjs":2080,"./base64.cjs":2081,"./bytes.cjs":2082,"./caip-types.cjs":2083,"./checksum.cjs":2084,"./coercers.cjs":2085,"./collections.cjs":2086,"./encryption-types.cjs":2087,"./errors.cjs":2088,"./hex.cjs":2089,"./json.cjs":2091,"./keyring.cjs":2092,"./logging.cjs":2093,"./misc.cjs":2094,"./number.cjs":2095,"./opaque.cjs":2096,"./promise.cjs":2097,"./time.cjs":2098,"./transaction-types.cjs":2099,"./versions.cjs":2100},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/index.cjs"}],[2091,{"./assert.cjs":2080,"./misc.cjs":2094,"@metamask/superstruct":2695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function o({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function a(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!o(r)||e.validator(t,r),refiner:(t,r)=>!o(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=a;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:a(r.JsonStruct),stack:a((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:a(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/json.cjs"}],[2092,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[2093,{debug:3789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[2094,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[2095,{"./assert.cjs":2080,"./hex.cjs":2089},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/number.cjs"}],[2096,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[2097,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[2098,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/time.cjs"}],[2099,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[21,{"../../../shared/constants/network":5128,"@metamask/base-controller":1190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkOrderController=void 0;var n=e("@metamask/base-controller"),s=e("../../../shared/constants/network");const i={orderedNetworkList:[]},o={orderedNetworkList:{persist:!0,anonymous:!0}};class a extends n.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:o,name:"NetworkOrderController",state:{...i,...t}}),this.messagingSystem.subscribe("NetworkController:stateChange",(e=>{this.onNetworkControllerStateChange(e)}))}onNetworkControllerStateChange({networkConfigurationsByChainId:e}){this.update((t=>{const r=Object.keys(e).filter((e=>!s.TEST_CHAINS.includes(e))),n=r.filter((e=>!t.orderedNetworkList.some((({networkId:t})=>t===e)))).map((e=>({networkId:e})));t.orderedNetworkList=t.orderedNetworkList.filter((({networkId:e})=>r.includes(e))).concat(n)}))}updateNetworksList(e){this.update((t=>{t.orderedNetworkList=e.map((e=>({networkId:e})))}))}}r.NetworkOrderController=a}}},{package:"$root$",file:"app/scripts/controllers/network-order.ts"}],[210,{"@metamask/utils":2850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,n.hasProperty)(e,"NftController")&&(0,n.isObject)(e.NftController)){const t=e.NftController;if((0,n.hasProperty)(t,"allNftContracts")&&(0,n.isObject)(t.allNftContracts)){const{allNftContracts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&s(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}if((0,n.hasProperty)(t,"allNfts")&&(0,n.isObject)(t.allNfts)){const{allNfts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&s(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}e.NftController=t}if((0,n.hasProperty)(e,"TokenListController")&&(0,n.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,n.hasProperty)(t,"tokensChainsCache")&&(0,n.isObject)(t.tokensChainsCache)&&s(t.tokensChainsCache))for(const e of Object.keys(t.tokensChainsCache))(0,n.isStrictHexString)(e)||delete t.tokensChainsCache[e]}if((0,n.hasProperty)(e,"TokensController")&&(0,n.isObject)(e.TokensController)){const t=e.TokensController;if((0,n.hasProperty)(t,"allTokens")&&(0,n.isObject)(t.allTokens)&&s(t.allTokens)){const{allTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allTokens[r]}if((0,n.hasProperty)(t,"allIgnoredTokens")&&(0,n.isObject)(t.allIgnoredTokens)&&s(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allIgnoredTokens[r]}if((0,n.hasProperty)(t,"allDetectedTokens")&&(0,n.isObject)(t.allDetectedTokens)&&s(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allDetectedTokens[r]}e.TokensController=t}return e};var n=e("@metamask/utils");function s(e){return Object.keys(e).some((e=>(0,n.isStrictHexString)(e)))}}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-088.ts"}],[2100,{"./assert.cjs":2080,"@metamask/superstruct":2695,semver:4923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/versions.cjs"}]],[],{});