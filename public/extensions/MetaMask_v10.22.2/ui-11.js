LavaPack.loadBundle([[5425,{"../../../components/ui/mascot":5e3,events:2542,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){const e=(0,r.useRef)(new n.default);return r.default.createElement("div",{className:"mascot-background-animation__animation"},r.default.createElement("div",{className:"mascot-background-animation__background-1","data-testid":"mascot-background-animation-background-1"},r.default.createElement("svg",{width:"193",height:"190",viewBox:"0 0 193 190",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M153.753 53.876C153.595 53.9493 153.419 54.0161 153.25 54.0651C151.081 54.7451 148.777 53.538 148.086 51.3768C147.763 50.3298 147.851 49.2109 148.361 48.2363C148.87 47.2618 149.732 46.5374 150.78 46.2144C151.828 45.8913 152.948 45.9781 153.923 46.4865C154.898 46.9949 155.622 47.8557 155.944 48.9027C156.567 50.918 155.592 53.0243 153.753 53.876ZM150.817 47.5708C150.245 47.8359 149.782 48.2721 149.495 48.8334C149.144 49.5127 149.073 50.2843 149.303 51.0047C149.774 52.4998 151.375 53.3384 152.877 52.8787C154.374 52.4069 155.215 50.8063 154.756 49.3056C154.526 48.5852 154.027 47.9888 153.36 47.6334C152.68 47.2836 151.908 47.213 151.187 47.4437C151.049 47.4636 150.927 47.52 150.817 47.5708Z",fill:"#86E29B"}),r.default.createElement("path",{d:"M18.3624 73.9241C18.3015 73.9523 18.2407 73.9805 18.1798 74.0087C17.0495 74.4733 15.8073 74.4728 14.6751 74.0078C12.3517 73.0461 11.2387 70.3567 12.2031 68.0341C13.1676 65.7115 15.8598 64.5971 18.1833 65.5589C19.3155 66.0239 20.1951 66.9013 20.6591 68.0304C21.123 69.1595 21.1215 70.4008 20.6552 71.5326C20.2207 72.6053 19.4093 73.4391 18.3624 73.9241ZM15.0433 66.7921C14.3129 67.1305 13.713 67.7186 13.3766 68.5243C12.6776 70.207 13.4834 72.1377 15.1666 72.8348C15.9849 73.1647 16.8786 73.1789 17.6933 72.831C18.5136 72.4952 19.1388 71.8659 19.4818 71.0424C19.8126 70.2245 19.8276 69.3313 19.4801 68.5175C19.1448 67.6981 18.5155 67.0739 17.6917 66.7319C16.8144 66.3703 15.8589 66.4142 15.0433 66.7921Z",fill:"#FFB0EB"}),r.default.createElement("path",{d:"M116.617 37.3839C117.397 37.0226 117.736 36.0982 117.375 35.3192C117.015 34.5402 116.09 34.2016 115.31 34.5629C114.53 34.9243 114.19 35.8487 114.551 36.6277C114.912 37.4067 115.837 37.7453 116.617 37.3839Z",fill:"url(#paint0_linear)"}),r.default.createElement("path",{d:"M55.1317 91.7213C55.9116 91.36 56.2512 90.4356 55.8903 89.6566C55.5294 88.8776 54.6046 88.539 53.8247 88.9003C53.0448 89.2617 52.7052 90.1861 53.0661 90.9651C53.427 91.7441 54.3518 92.0827 55.1317 91.7213Z",fill:"url(#paint1_linear)"}),r.default.createElement("path",{d:"M31.9932 126.235C32.7731 125.874 33.1127 124.95 32.7518 124.171C32.3909 123.392 31.4661 123.053 30.6863 123.414C29.9064 123.776 29.5667 124.7 29.9277 125.479C30.2886 126.258 31.2134 126.597 31.9932 126.235Z",fill:"url(#paint2_linear)"}),r.default.createElement("path",{d:"M119.43 132.589C120.21 132.228 120.55 131.304 120.189 130.525C119.828 129.746 118.903 129.407 118.123 129.768C117.344 130.13 117.004 131.054 117.365 131.833C117.726 132.612 118.651 132.951 119.43 132.589Z",fill:"url(#paint3_linear)"}),r.default.createElement("path",{d:"M44.7469 47.3835C46.0108 46.7979 46.5612 45.2997 45.9763 44.0372C45.3914 42.7747 43.8926 42.2259 42.6286 42.8115C41.3647 43.3971 40.8143 44.8953 41.3992 46.1578C41.9841 47.4203 43.4829 47.9691 44.7469 47.3835Z",fill:"url(#paint4_linear)"}),r.default.createElement("path",{d:"M105.107 90.7857C106.371 90.2001 106.922 88.702 106.337 87.4394C105.752 86.1769 104.253 85.6282 102.989 86.2137C101.725 86.7993 101.175 88.2975 101.76 89.56C102.344 90.8226 103.843 91.3713 105.107 90.7857Z",fill:"url(#paint5_linear)"}),r.default.createElement("path",{d:"M95.5179 172.376C96.7818 171.791 97.3322 170.293 96.7473 169.03C96.1624 167.767 94.6636 167.219 93.3996 167.804C92.1357 168.39 91.5853 169.888 92.1702 171.151C92.7551 172.413 94.2539 172.962 95.5179 172.376Z",fill:"url(#paint6_linear)"}),r.default.createElement("path",{d:"M165.098 102.367C166.362 101.781 166.912 100.283 166.327 99.0205C165.742 97.758 164.244 97.2092 162.98 97.7948C161.716 98.3804 161.165 99.8786 161.75 101.141C162.335 102.404 163.834 102.952 165.098 102.367Z",fill:"url(#paint7_linear)"}),r.default.createElement("defs",null,r.default.createElement("linearGradient",{id:"paint0_linear",x1:"114.554",y1:"36.6326",x2:"117.379",y2:"35.3237",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#75C3FC"}),r.default.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),r.default.createElement("linearGradient",{id:"paint1_linear",x1:"53.0688",y1:"90.97",x2:"55.8937",y2:"89.6611",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#75C3FC"}),r.default.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),r.default.createElement("linearGradient",{id:"paint2_linear",x1:"29.9283",y1:"125.483",x2:"32.7532",y2:"124.174",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#75C3FC"}),r.default.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),r.default.createElement("linearGradient",{id:"paint3_linear",x1:"117.365",y1:"131.837",x2:"120.19",y2:"130.528",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#75C3FC"}),r.default.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),r.default.createElement("linearGradient",{id:"paint4_linear",x1:"41.4394",y1:"46.2402",x2:"45.947",y2:"43.9537",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#75C3FC"}),r.default.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),r.default.createElement("linearGradient",{id:"paint5_linear",x1:"101.8",y1:"89.6425",x2:"106.307",y2:"87.356",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#75C3FC"}),r.default.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),r.default.createElement("linearGradient",{id:"paint6_linear",x1:"92.2104",y1:"171.233",x2:"96.718",y2:"168.947",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#75C3FC"}),r.default.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),r.default.createElement("linearGradient",{id:"paint7_linear",x1:"161.79",y1:"101.224",x2:"166.298",y2:"98.937",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#75C3FC"}),r.default.createElement("stop",{offset:"1",stopColor:"#75C3FC"}))))),r.default.createElement("div",{className:"mascot-background-animation__background-2","data-testid":"mascot-background-animation-background-2"},r.default.createElement("svg",{width:"195",height:"205",viewBox:"0 0 195 205",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M29.84 121.982C30.0408 121.969 30.245 122.01 30.4258 122.106L46.4233 130.275C46.8125 130.478 47.0536 130.893 47.0402 131.324C47.0143 131.768 46.7423 132.148 46.3356 132.308L24.5484 140.937C24.1417 141.097 23.6789 141.005 23.3642 140.702C23.0495 140.4 22.9398 139.937 23.0753 139.525L28.8651 122.727C28.9671 122.426 29.2065 122.169 29.5086 122.056C29.614 122.023 29.7194 121.989 29.84 121.982ZM43.1981 131.148L30.5607 124.689L25.9884 137.96L43.1981 131.148Z",fill:"#75C4FD"}),r.default.createElement("path",{d:"M168.214 54.3381C168.442 54.3238 168.674 54.3764 168.869 54.485C169.217 54.6781 169.44 55.0266 169.465 55.4145L170.59 68.4358C170.631 68.8763 170.416 69.3061 170.041 69.5444C169.666 69.7827 169.182 69.7862 168.805 69.5681L156.14 62.2246C155.763 62.0065 155.535 61.5911 155.548 61.1472C155.56 60.7033 155.818 60.3112 156.209 60.1122L167.75 54.4343C167.908 54.3841 168.067 54.3473 168.214 54.3381ZM168.027 66.3674L167.248 57.3661L159.267 61.2902L168.027 66.3674Z",fill:"#FFB0EB"}),r.default.createElement("path",{d:"M88.6283 16.6885C88.8694 16.6734 89.1154 16.7385 89.3255 16.873L100.21 24.1133C100.561 24.3464 100.762 24.7635 100.708 25.1832C100.653 25.6028 100.381 25.969 99.9864 26.1146L86.3391 31.4276C85.9449 31.5731 85.5106 31.5064 85.1842 31.2314C84.8712 30.9556 84.7239 30.5352 84.8192 30.1264L87.5815 17.5731C87.666 17.2053 87.9162 16.9076 88.2702 16.7646C88.3882 16.7169 88.5078 16.696 88.6283 16.6885ZM97.1342 24.7894L89.4471 19.6718L87.5021 28.5349L97.1342 24.7894Z",fill:"url(#paint0_linear)"}),r.default.createElement("path",{d:"M117.145 183.156C116.944 183.289 116.698 183.356 116.449 183.344L103.402 182.517C102.982 182.49 102.6 182.229 102.437 181.839C102.274 181.448 102.327 180.995 102.596 180.671L111.758 169.247C112.027 168.923 112.436 168.764 112.856 168.839C113.265 168.921 113.603 169.212 113.725 169.614L117.609 181.866C117.72 182.227 117.652 182.61 117.417 182.911C117.339 183.011 117.246 183.089 117.145 183.156ZM105.728 180.393L114.944 180.981L112.197 172.333L105.728 180.393Z",fill:"url(#paint1_linear)"}),r.default.createElement("path",{d:"M38.0816 74.0208C38.1217 74.0183 38.1485 74.0166 38.1887 74.0141C42.3831 73.805 45.9744 77.0577 46.1831 81.2474C46.3919 85.4371 43.1484 89.0241 38.9407 89.234C34.7463 89.4431 31.1549 86.1904 30.9462 82.0007C30.7391 77.8377 33.9307 74.2809 38.0816 74.0208ZM38.9104 87.2486C41.9767 87.0565 44.3523 84.4236 44.1997 81.3448C44.0455 78.2393 41.3949 75.8407 38.2859 75.9952C35.1761 76.1364 32.7753 78.7977 32.9296 81.9033C33.0838 85.0088 35.7344 87.4073 38.8434 87.2528C38.8568 87.252 38.8836 87.2503 38.9104 87.2486Z",fill:"#86E29B"}),r.default.createElement("path",{d:"M162.178 97.8401C162.218 97.8376 162.245 97.8359 162.285 97.8334C166.48 97.6243 170.071 100.877 170.28 105.067C170.489 109.256 167.245 112.843 163.037 113.053C158.843 113.262 155.252 110.01 155.043 105.82C154.836 101.657 158.027 98.1002 162.178 97.8401ZM163.007 111.068C166.073 110.876 168.449 108.243 168.296 105.164C168.142 102.059 165.492 99.6601 162.383 99.8146C159.273 99.9557 156.872 102.617 157.026 105.723C157.181 108.828 159.831 111.227 162.94 111.072C162.953 111.071 162.98 111.07 163.007 111.068Z",fill:"#86E29B"}),r.default.createElement("defs",null,r.default.createElement("linearGradient",{id:"paint0_linear",x1:"100.609",y1:"23.2611",x2:"84.4152",y2:"24.2757",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#FFE466"}),r.default.createElement("stop",{offset:"1",stopColor:"#FFAFEA"})),r.default.createElement("linearGradient",{id:"paint1_linear",x1:"103.812",y1:"183.939",x2:"116.959",y2:"174.66",gradientUnits:"userSpaceOnUse"},r.default.createElement("stop",{stopColor:"#75C3FC"}),r.default.createElement("stop",{offset:"0.0928503",stopColor:"#81C2F6"}),r.default.createElement("stop",{offset:"1",stopColor:"#F0B8BD"}))))),r.default.createElement("div",{className:"mascot-background-animation__mascot-container","data-testid":"mascot-background-animation-mascot-container"},r.default.createElement(o.default,{animationEventEmitter:e.current,width:"42",height:"42",followMouse:!1})))};var n=i(e("events")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),o=i(e("../../../components/ui/mascot"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/swaps/mascot-background-animation/mascot-background-animation.js"}],[5426,{"../../../../shared/constants/swaps":4361,"../../../components/component-library":4822,"../../../components/ui/box":4931,"../../../contexts/i18n":5069,"../../../helpers/constants/design-system":5092,"../../../helpers/constants/routes":5097,"../../../store/actions":5486,"../swaps-footer":5458,"prop-types":3823,react:4076,"react-redux":4041,"react-router-dom":4061},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=T;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=g(e("prop-types")),i=e("../../../contexts/i18n"),l=e("../../../store/actions"),u=g(e("../../../components/ui/box")),c=e("../../../helpers/constants/design-system"),d=e("../../../components/component-library"),p=e("../../../helpers/constants/routes"),m=g(e("../swaps-footer")),f=e("../../../../shared/constants/swaps");function g(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function T({notificationKey:e}){const t=(0,n.useContext)(i.I18nContext),a=(0,o.useHistory)(),s=(0,r.useDispatch)();let g="",E="",T="";return e===f.QUOTES_EXPIRED_ERROR&&(g=t("swapAreYouStillThere"),E=t("swapAreYouStillThereDescription"),T=t("swapShowLatestQuotes")),n.default.createElement("div",{className:"notification-page"},n.default.createElement(u.default,{alignItems:c.AlignItems.center,display:c.DISPLAY.FLEX,flexDirection:c.FLEX_DIRECTION.COLUMN,marginTop:10,marginLeft:4,marginRight:4,textAlign:c.TEXT_ALIGN.CENTER,className:"notification-page__content"},n.default.createElement(u.default,{marginTop:8,marginBottom:4},n.default.createElement(d.Icon,{name:d.IconName.Warning,color:c.IconColor.iconMuted,className:"notification-page__warning-icon"})),n.default.createElement(d.Text,{variant:c.TextVariant.bodyLgMedium,as:"h2"},g),n.default.createElement(d.Text,{variant:c.TextVariant.bodyMd,as:"h6"},E)),n.default.createElement(m.default,{onSubmit:async()=>{await s((0,l.setSwapsErrorKey)("")),a.push(p.PREPARE_SWAP_ROUTE)},submitText:T,hideCancel:!0,showTermsOfService:!0}))}T.propTypes={notificationKey:s.default.oneOf([f.QUOTES_EXPIRED_ERROR])}}}},{package:"$root$",file:"ui/pages/swaps/notification-page/notification-page.js"}],[5427,{"../../../../shared/constants/metametrics":4353,"../../../../shared/constants/swaps":4361,"../../../../shared/lib/swaps-utils":4371,"../../../../shared/lib/token-util.ts":4373,"../../../../shared/lib/transactions-controller-utils":4374,"../../../../shared/modules/conversion.utils":4380,"../../../../shared/modules/string-utils":4393,"../../../../shared/modules/swaps.utils":4394,"../../../components/component-library":4822,"../../../components/ui/box":4931,"../../../contexts/i18n":5069,"../../../contexts/metametrics":5070,"../../../ducks/metamask/metamask":5084,"../../../ducks/swaps/swaps":5088,"../../../helpers/constants/design-system":5092,"../../../helpers/constants/routes":5097,"../../../helpers/utils/util":5133,"../../../hooks/useEqualityCheck":5153,"../../../hooks/useEthFiatAmount":5154,"../../../hooks/usePrevious":5160,"../../../hooks/useTokenFiatAmount":5173,"../../../hooks/useTokenTracker":5174,"../../../hooks/useTokensToSearch":5175,"../../../selectors":5478,"../../../store/actionConstants":5485,"../../../store/actions":5486,"../import-token":5417,"../list-with-search/list-with-search":5419,"../selected-token/selected-token":5446,"../swaps-banner-alert/swaps-banner-alert":5457,"../swaps-footer":5458,"../swaps.util":5460,"../transaction-settings/transaction-settings":5461,"./quotes-loading-animation":5428,"./review-quote":5429,"./smart-transactions-popover":5431,"@metamask/etherscan-link":1273,"bignumber.js":2428,classnames:2582,lodash:3676,"prop-types":3823,react:4076,"react-redux":4041,"react-router-dom":4061},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=Z;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=Q(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=K(e("bignumber.js")),o=K(e("prop-types")),s=e("react-redux"),i=e("lodash"),l=e("react-router-dom"),u=e("@metamask/etherscan-link"),c=K(e("classnames")),d=e("../../../contexts/metametrics"),p=e("../../../hooks/useTokensToSearch"),m=e("../../../hooks/useEqualityCheck"),f=e("../../../contexts/i18n"),g=e("../../../ducks/metamask/metamask"),E=K(e("../../../components/ui/box")),T=e("../../../helpers/constants/design-system"),_=e("../../../ducks/swaps/swaps"),h=e("../../../selectors"),S=e("../../../../shared/modules/conversion.utils"),v=e("../../../helpers/utils/util"),y=e("../../../hooks/usePrevious"),C=e("../../../hooks/useTokenTracker"),b=e("../../../hooks/useTokenFiatAmount"),w=e("../../../hooks/useEthFiatAmount"),k=e("../../../../shared/modules/swaps.utils"),I=e("../../../../shared/constants/metametrics"),A=e("../../../../shared/constants/swaps"),O=e("../../../store/actions"),N=e("../../../store/actionConstants"),x=e("../swaps.util"),P=e("../../../../shared/lib/token-util.ts"),M=e("../../../../shared/modules/string-utils"),D=e("../../../../shared/lib/transactions-controller-utils"),R=e("../../../../shared/lib/swaps-utils"),L=e("../../../components/component-library"),F=e("../../../helpers/constants/routes"),j=K(e("../import-token")),U=K(e("../transaction-settings/transaction-settings")),G=K(e("../swaps-banner-alert/swaps-banner-alert")),W=K(e("../swaps-footer")),B=K(e("../selected-token/selected-token")),q=K(e("../list-with-search/list-with-search")),H=K(e("./smart-transactions-popover")),V=K(e("./quotes-loading-animation")),$=K(e("./review-quote"));function K(e){return e&&e.__esModule?e:{default:e}}function Q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(Q=function(e){return e?a:t})(e)}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Y.apply(this,arguments)}let X;function Z({ethBalance:e,selectedAccountAddress:t,shuffledTokensList:a}){const o=(0,n.useContext)(f.I18nContext),K=(0,s.useDispatch)(),Q=(0,l.useHistory)(),Z=(0,n.useContext)(d.MetaMetricsContext),[z,J]=(0,n.useState)(undefined),[ee,te]=(0,n.useState)(!1),[ae,ne]=(0,n.useState)(),[re,oe]=(0,n.useState)(!1),se=()=>oe(!1),[ie,le]=(0,n.useState)(!1),ue=()=>le(!1),[ce,de]=(0,n.useState)(!1),[pe,me]=(0,n.useState)(null),[fe,ge]=(0,n.useState)(""),[Ee,Te]=(0,n.useState)(""),[_e,he]=(0,n.useState)(0),[Se,ve]=(0,n.useState)(!1),[ye,Ce]=(0,n.useState)(!1),be=(0,s.useSelector)(_.getIsFeatureFlagLoaded),we=(0,s.useSelector)(_.getBalanceError),ke=(0,s.useSelector)(_.getFetchParams,i.isEqual),{sourceTokenInfo:Ie={},destinationTokenInfo:Ae={}}=(null==ke?void 0:ke.metaData)||{},Oe=(0,s.useSelector)(g.getTokens,i.isEqual),Ne=(0,s.useSelector)(_.getTopAssets,i.isEqual),xe=(0,s.useSelector)(_.getFromToken,i.isEqual),Pe=(0,s.useSelector)(_.getFromTokenInputValue),Me=(0,s.useSelector)(_.getFromTokenError),De=(0,s.useSelector)(_.getMaxSlippage),Re=(0,s.useSelector)(_.getToToken,i.isEqual)||Ae,Le=(0,s.useSelector)(h.getSwapsDefaultToken,i.isEqual),Fe=(0,s.useSelector)(h.getCurrentChainId),je=(0,s.useSelector)(h.getRpcPrefsForCurrentProvider,s.shallowEqual),Ue=(0,s.useSelector)(h.getTokenList,i.isEqual),Ge=(0,s.useSelector)(_.getQuotes,i.isEqual),We=(0,s.useSelector)(_.getLatestAddedTokenTo,i.isEqual),Be=Object.keys(Ge).length,qe=Be>0,He=(0,s.useSelector)(_.getSwapsErrorKey),Ve=(0,s.useSelector)(_.getAggregatorMetadata,s.shallowEqual),$e=(0,s.useSelector)(_.getTransactionSettingsOpened,s.shallowEqual),Ke=Ve?Object.keys(Ve).length:0,Qe=(0,s.useSelector)(h.getTokenExchangeRates,i.isEqual),Ye=(0,s.useSelector)(g.getConversionRate),Xe=(0,s.useSelector)(h.isHardwareWallet),Ze=(0,s.useSelector)(h.getHardwareWalletType),ze=(0,s.useSelector)(_.getSmartTransactionsOptInStatus),Je=(0,s.useSelector)(_.getSmartTransactionsEnabled),et=(0,s.useSelector)(_.getCurrentSmartTransactionsEnabled),tt=et&&ze,at=ze!==undefined,nt=(0,s.useSelector)(_.getCurrentSmartTransactionsError),rt=(0,s.useSelector)(h.getCurrentCurrency),ot=(0,s.useSelector)(_.getFetchingQuotes),st=!ot&&qe,it=Je&&!at,lt=(0,k.isSwapsDefaultTokenSymbol)(null==Ie?void 0:Ie.symbol,Fe)?Le:Ie,{tokensWithBalances:ut}=(0,C.useTokenTracker)(Oe),ct=!(0,k.isSwapsDefaultTokenSymbol)(null==xe?void 0:xe.symbol,Fe)&&null!=xe&&xe.balance?[xe]:[],dt=(0,i.uniqBy)([...ut,...Oe,...ct],"address"),pt=(0,m.useEqualityCheck)(dt),mt=(0,p.getRenderableTokenData)(xe||lt,Qe,Ye,rt,Fe,Ue),ft=(0,p.useTokensToSearch)({usersTokens:pt,topTokens:Ne,shuffledTokensList:a,tokenBucketPriority:A.TokenBucketPriority.owned}),gt=(0,p.useTokensToSearch)({usersTokens:pt,topTokens:Ne,shuffledTokensList:a,tokenBucketPriority:A.TokenBucketPriority.top}),Et=ft.find((({address:e})=>(0,M.isEqualCaseInsensitive)(e,null==Re?void 0:Re.address)))||Re,Tt=(null==Et?void 0:Et.address)&&!(0,k.isSwapsDefaultTokenAddress)(null==Et?void 0:Et.address,Fe),_t=Number((null==Et?void 0:Et.occurances)||(null==Et?void 0:Et.occurrences)||0),{address:ht,symbol:St,string:vt,decimals:yt,balance:Ct}=mt||{},{address:bt}=Et||{},wt=Ct&&(0,D.calcTokenAmount)(Ct,yt).toString(10),kt=(0,y.usePrevious)(wt),It=(0,b.useTokenFiatAmount)(ht,Pe||0,St,{showFiat:!0},!0),At=(0,w.useEthFiatAmount)(Pe||0,{showFiat:!0},!0),Ot=(0,k.isSwapsDefaultTokenSymbol)(St,Fe)?At:It,Nt=(0,n.useCallback)(((e,t)=>{K((0,_.setFromTokenInputValue)(e));const a=new r.default(e||0).gt(t||0);we!==a&&K((0,_.setBalanceError)(a)),K((0,_.setFromTokenError)(xe&&(0,x.countDecimals)(e)>xe.decimals?"tooManyDecimals":null))}),[K,xe,we]);(0,n.useEffect)((()=>{let e;if(!Se)return void he(0);e=st?20:500+Math.floor(1500*Math.random());const t=setTimeout((()=>{_e<Ke?he(_e+1):_e===Ke&&st&&(async()=>{await K((0,O.setBackgroundSwapRouteState)("")),ve(!1),He!==A.ERROR_FETCHING_QUOTES&&He!==A.QUOTES_NOT_AVAILABLE_ERROR||K((0,O.setSwapsErrorKey)(A.QUOTES_NOT_AVAILABLE_ERROR))})()}),e);return function(){clearTimeout(t)}}),[ot,_e,st,Be,K,Q,He,Ke,Se]);const xt=e=>{null!=e&&e.address&&!Ot&&null!==z?(0,x.fetchTokenPrice)(e.address).then((e=>{null!==e&&e!==undefined&&J(e)})):J(null),null!=e&&e.address&&!pt.find((t=>(0,M.isEqualCaseInsensitive)(t.address,e.address)))&&(0,P.fetchTokenBalance)(e.address,t,global.ethereumProvider).then((t=>{if(null!=t&&t.balance){const a=t.balance.toString(10),n=(0,D.calcTokenAmount)(a,e.decimals);K((0,_.setSwapsFromToken)({...e,string:n.toString(10),balance:a}))}})),K((0,_.setSwapsFromToken)(e)),Nt(Pe,e.string,e.decimals)},Pt=(0,u.getTokenTrackerLink)(Et.address,Fe,null,null,{blockExplorerUrl:A.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[Fe]??null}),Mt=je.blockExplorerUrl?(0,v.getURLHostName)(Pt):o("etherscan"),{address:Dt}=Re||{},Rt=(0,n.useCallback)((e=>{We&&e.address!==Dt&&K((0,O.ignoreTokens)({tokensToIgnore:Dt,dontShowLoadingIndicator:!0})),K((0,_.setSwapToToken)(e)),te(!1)}),[K,We,Dt]),Lt=ut.find((e=>(0,M.isEqualCaseInsensitive)(e.address,null==xe?void 0:xe.address))),Ft=(0,y.usePrevious)(Lt);(0,n.useEffect)((()=>{const e=!(0,k.isSwapsDefaultTokenAddress)(null==Lt?void 0:Lt.address,Fe),t=(0,M.isEqualCaseInsensitive)(null==Lt?void 0:Lt.address,null==Ft?void 0:Ft.address),a=(null==Lt?void 0:Lt.balance)!==(null==Ft?void 0:Ft.balance);e&&t&&a&&K((0,_.setSwapsFromToken)({...xe,balance:null==Lt?void 0:Lt.balance,string:null==Lt?void 0:Lt.string}))}),[K,Lt,Ft,xe,Fe]),(0,n.useEffect)((()=>{(0,k.isSwapsDefaultTokenAddress)(null==xe?void 0:xe.address,Fe)&&(null==xe?void 0:xe.balance)!==(0,S.hexToDecimal)(e)&&K((0,_.setSwapsFromToken)({...xe,balance:(0,S.hexToDecimal)(e),string:(0,S.getValueFromWeiHex)({value:e,numberOfDecimals:4,toDenomination:"ETH"})}))}),[K,xe,e,Fe]),(0,n.useEffect)((()=>{null!=xe&&xe.symbol||null!=lt&&lt.symbol||K((0,_.setSwapsFromToken)(Le))}),[]),(0,n.useEffect)((()=>{kt!==wt&&Nt(Pe,wt)}),[Nt,kt,Pe,wt]);const jt=(0,n.useCallback)((()=>{Z({event:"Prepare Swap Page Loaded",category:I.MetaMetricsEventCategory.Swaps,sensitiveProperties:{is_hardware_wallet:Xe,hardware_wallet_type:Ze,stx_enabled:Je,current_stx_enabled:et,stx_user_opt_in:ze}})}),[Z,Xe,Ze,Je,et,ze]);(0,n.useEffect)((()=>{K((0,O.resetSwapsPostFetchState)()),K((0,_.setReviewSwapClickedTimestamp)()),jt()}),[K]);const Ut=()=>n.default.createElement("a",{className:"prepare-swap-page__token-etherscan-link",key:"prepare-swap-page-etherscan-link",onClick:()=>{Z({event:I.MetaMetricsEventName.ExternalLinkClicked,category:I.MetaMetricsEventCategory.Swaps,properties:{link_type:I.MetaMetricsEventLinkType.TokenTracker,location:"Swaps Confirmation",url_domain:(0,v.getURLHostName)(Pt)}}),global.platform.openTab({url:Pt})},target:"_blank",rel:"noopener noreferrer"},Mt),Gt=`${o("balance")}: ${vt||"0"}`,Wt=`${o("balance")}: ${(null==Et?void 0:Et.string)||"0"}`,Bt=(0,R.shouldEnableDirectWrapping)(Fe,ht,Et.address),qt=Me||!be||!Number(Pe)||!(null!=Et&&Et.address)||!ht||Number(De)<0||Number(De)>A.MAX_ALLOWED_SLIPPAGE||Tt&&_t<2&&!ee;let Ht;(0,n.useEffect)((()=>{K((0,O.clearSwapsQuotes)()),K((0,O.stopPollingForQuotes)());return X=setTimeout((()=>{X=null,qt||(tt&&((0,O.clearSmartTransactionFees)(),K({type:N.SET_SMART_TRANSACTIONS_ERROR,payload:null})),(async()=>{ve(!0),await K((0,_.fetchQuotesAndSetQuoteState)(Q,Pe,De,Z,!0))})())}),1e3),()=>clearTimeout(X)}),[K,Q,De,Z,qt,Pe,ht,bt,ze,tt]),Ht=He&&He===A.QUOTES_NOT_AVAILABLE_ERROR?o("swapQuotesNotAvailableErrorTitle"):qt?null!=Et&&Et.address&&ht?o("swapEnterAmount"):o("swapSelectToken"):o("swapFetchingQuotes");const Vt=(0,n.useCallback)((e=>(0,M.isEqualCaseInsensitive)(e.address,ht)),[ht]),$t=(0,n.useCallback)((e=>(0,M.isEqualCaseInsensitive)(e.address,null==Et?void 0:Et.address)),[null==Et?void 0:Et.address]),Kt=!He&&!qt&&qe,Qt=!He&&!qt&&!qe,Yt=!Me&&we&&St,Xt=1===_t;(0,n.useEffect)((()=>{He===A.QUOTES_EXPIRED_ERROR&&Q.push(F.SWAPS_NOTIFICATION_ROUTE)}),[He,Q]),(0,n.useEffect)((()=>{Qt&&ne("")}),[Qt]);const Zt={onImportTokenCloseClick:()=>{de(!1)},onImportTokenClick:()=>{Z({event:"Token Imported",category:I.MetaMetricsEventCategory.Swaps,sensitiveProperties:{symbol:null==pe?void 0:pe.symbol,address:null==pe?void 0:pe.address,chain_id:Fe,is_hardware_wallet:Xe,hardware_wallet_type:Ze,stx_enabled:Je,current_stx_enabled:et,stx_user_opt_in:ze}}),null==Rt||Rt(pe),me(null)},setIsImportTokenModalOpen:de,tokenForImport:pe};let zt,Jt,ea;ae&&!qt&&(zt=(0,x.formatSwapsValueForDisplay)(ae),Jt=(0,x.getClassNameForCharLength)(zt,"prepare-swap-page__receive-amount")),Pe&&(ea=(0,x.getClassNameForCharLength)(Pe,"prepare-swap-page__from-token-amount"));const ta=St&&!(0,k.isSwapsDefaultTokenSymbol)(St,Fe)&&Ct>0;return n.default.createElement("div",{className:"prepare-swap-page"},n.default.createElement("div",{className:"prepare-swap-page__content"},pe&&ce&&n.default.createElement(j.default,Y({isOpen:!0},Zt)),n.default.createElement(L.Modal,{onClose:se,isOpen:re,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},n.default.createElement(L.ModalOverlay,null),n.default.createElement(L.ModalContent,null,n.default.createElement(L.ModalHeader,{onClose:se},o("swapSwapTo")),n.default.createElement(E.default,{paddingTop:10,paddingRight:0,paddingBottom:0,paddingLeft:0,display:T.DISPLAY.FLEX},n.default.createElement(q.default,{selectedItem:Et,itemsToSearch:gt,onClickItem:e=>{null==Rt||Rt(e),se()},maxListItems:30,searchQuery:Ee,setSearchQuery:Te,hideItemIf:Vt,shouldSearchForImports:!0,onOpenImportTokenModalClick:e=>{me(e),de(!0),se(),Te("")}})))),n.default.createElement(L.Modal,{onClose:ue,isOpen:ie,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},n.default.createElement(L.ModalOverlay,null),n.default.createElement(L.ModalContent,null,n.default.createElement(L.ModalHeader,{onClose:ue},o("swapSwapFrom")),n.default.createElement(E.default,{paddingTop:10,paddingRight:0,paddingBottom:0,paddingLeft:0,display:T.DISPLAY.FLEX},n.default.createElement(q.default,{selectedItem:mt,itemsToSearch:ft,onClickItem:e=>{null==xt||xt(e),ue()},maxListItems:30,searchQuery:fe,setSearchQuery:ge,hideItemIf:$t})))),n.default.createElement(H.default,{onEnableSmartTransactionsClick:()=>(0,O.setSmartTransactionsOptInStatus)(!0,ze),onCloseSmartTransactionsOptInPopover:e=>{null==e||e.preventDefault(),(0,O.setSmartTransactionsOptInStatus)(!1,ze)},isOpen:it}),n.default.createElement("div",{className:"prepare-swap-page__swap-from-content"},n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.center},n.default.createElement(B.default,{onClick:()=>le(!0),onClose:ue,selectedToken:mt,testId:"prepare-swap-page-swap-from"}),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,alignItems:T.AlignItems.center},n.default.createElement(L.TextField,{className:(0,c.default)("prepare-swap-page__from-token-amount",{[ea]:ea}),size:T.Size.SM,placeholder:"0",onChange:e=>{e.stopPropagation();const t="."===e.target.value?"0.":e.target.value;""===t||/^(\.\d+|\d+(\.\d+)?|\d+\.)$/u.test(t)?Nt(t,wt):Nt(Pe||"",wt)},value:Pe,truncate:!1,testId:"prepare-swap-page-from-token-amount"}))),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.stretch},n.default.createElement("div",{className:"prepare-swap-page__balance-message"},St&&Gt,ta&&n.default.createElement("div",{className:"prepare-swap-page__max-balance","data-testid":"prepare-swap-page-max-balance",onClick:()=>Nt(wt||"0",wt)},o("max"))),Pe&&Ot&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.flexEnd,alignItems:T.AlignItems.flexEnd},n.default.createElement(L.Text,{variant:T.TextVariant.bodySm,color:T.TextColor.textAlternative},Ot))),Yt&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.flexStart},n.default.createElement(L.Text,{variant:T.TextVariant.bodySmBold,color:T.TextColor.textAlternative,marginTop:0},o("swapsNotEnoughToken",[St]))),Me&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.flexStart},n.default.createElement(L.Text,{variant:T.TextVariant.bodySmBold,color:T.TextColor.textAlternative,marginTop:0},o("swapTooManyDecimalsError",[St,yt]))),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.center},n.default.createElement("div",{className:(0,c.default)("prepare-swap-page__switch-tokens",{"prepare-swap-page__switch-tokens--rotate":ye,"prepare-swap-page__switch-tokens--disabled":Qt}),"data-testid":"prepare-swap-page-switch-tokens",onClick:()=>{Qt||(Rt(mt),xt(Et),Ce(!ye))},title:o("swapSwapSwitch")},n.default.createElement(L.Icon,{name:L.IconName.Arrow2Down,size:L.IconSize.Lg})))),n.default.createElement("div",{className:"prepare-swap-page__swap-to-content"},n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.center},n.default.createElement(B.default,{onClick:()=>oe(!0),onClose:se,selectedToken:Et,testId:"prepare-swap-page-swap-to"}),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,alignItems:T.AlignItems.center,marginLeft:2,className:"prepare-swap-page__receive-amount-container"},n.default.createElement(L.Text,{as:"h6","data-testid":"prepare-swap-page-receive-amount",className:(0,c.default)("prepare-swap-page__receive-amount",{[Jt]:Jt})},zt))),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.stretch},n.default.createElement("div",{className:"prepare-swap-page__balance-message"},(null==Et?void 0:Et.string)&&Wt))),!Kt&&Tt&&_t<2&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,marginTop:2},n.default.createElement(L.BannerAlert,{severity:Xt?T.SEVERITIES.WARNING:T.SEVERITIES.DANGER,title:o(Xt?"swapTokenVerifiedOn1SourceTitle":"swapTokenAddedManuallyTitle"),titleProps:{"data-testid":"swaps-banner-title"},width:T.BLOCK_SIZES.FULL},n.default.createElement(E.default,null,n.default.createElement(L.Text,{variant:T.TextVariant.bodyMd,as:"h6","data-testid":"mm-banner-alert-notification-text"},Xt?o("swapTokenVerifiedOn1SourceDescription",[null==Et?void 0:Et.symbol,n.default.createElement(Ut,{key:"block-explorer-link"})]):o("swapTokenAddedManuallyDescription",[n.default.createElement(Ut,{key:"block-explorer-link"})])),!ee&&n.default.createElement(L.ButtonLink,{size:L.ButtonLinkSize.Inherit,textProps:{variant:T.TextVariant.bodyMd,alignItems:T.AlignItems.flexStart},onClick:e=>{e.preventDefault(),te(!0)}},o("swapContinueSwapping"))))),He&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,marginTop:2},n.default.createElement(G.default,{swapsErrorKey:He,currentSlippage:De})),$e&&(Je||!Je&&!Bt)&&n.default.createElement(U.default,{onSelect:e=>{K((0,_.setMaxSlippage)(e))},maxAllowedSlippage:A.MAX_ALLOWED_SLIPPAGE,currentSlippage:De,smartTransactionsEnabled:Je,smartTransactionsOptInStatus:ze,setSmartTransactionsOptInStatus:O.setSmartTransactionsOptInStatus,currentSmartTransactionsError:nt,isDirectWrappingEnabled:Bt,onModalClose:()=>{K((0,_.setTransactionSettingsOpened)(!1))}}),Qt&&n.default.createElement(V.default,{quoteCount:_e,numberOfAggregators:Ke}),Kt&&n.default.createElement($.default,{setReceiveToAmount:ne})),!qe&&n.default.createElement(W.default,{submitText:Ht,disabled:!0,hideCancel:!0,showTermsOfService:!0}))}Z.propTypes={ethBalance:o.default.string,selectedAccountAddress:o.default.string,shuffledTokensList:o.default.array}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/prepare-swap-page.js"}],[5428,{"../../../components/component-library":4822,"../../../components/ui/box":4931,"../../../contexts/i18n":5069,"../../../helpers/constants/design-system":5092,"../mascot-background-animation/mascot-background-animation":5425,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=c(e("prop-types")),o=e("../../../contexts/i18n"),s=c(e("../../../components/ui/box")),i=e("../../../helpers/constants/design-system"),l=e("../../../components/component-library"),u=c(e("../mascot-background-animation/mascot-background-animation"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(e){const{quoteCount:t,numberOfAggregators:a}=e,r=(0,n.useContext)(o.I18nContext);return n.default.createElement(s.default,{marginTop:4,display:i.DISPLAY.FLEX,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center,flexDirection:i.FLEX_DIRECTION.COLUMN},n.default.createElement(s.default,{display:i.DISPLAY.FLEX,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center},n.default.createElement(l.Text,{variant:i.TextVariant.bodyMd,as:"h6",color:i.TextColor.textAlternative,marginLeft:1,marginRight:1},r("swapFetchingQuote")),n.default.createElement(l.Text,{variant:i.TextVariant.bodyMdBold,as:"h6",color:i.TextColor.textAlternative},r("swapQuoteNofM",[Math.min(t+1,a),a]))),n.default.createElement(u.default,null))}p.propTypes={quoteCount:r.default.number.isRequired,numberOfAggregators:r.default.number.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/quotes-loading-animation.js"}],[5429,{"../../../../app/scripts/lib/util":82,"../../../../shared/constants/gas":4349,"../../../../shared/constants/metametrics":4353,"../../../../shared/constants/network":4354,"../../../../shared/constants/swaps":4361,"../../../../shared/lib/metamask-controller-utils":4369,"../../../../shared/lib/swaps-utils":4371,"../../../../shared/lib/transactions-controller-utils":4374,"../../../../shared/modules/conversion.utils":4380,"../../../../shared/modules/string-utils":4393,"../../../../shared/modules/transaction.utils":4395,"../../../components/component-library":4822,"../../../components/ui/box":4931,"../../../components/ui/info-tooltip":4986,"../../../contexts/i18n":5069,"../../../contexts/metametrics":5070,"../../../ducks/metamask/metamask":5084,"../../../ducks/swaps/swaps":5088,"../../../helpers/constants/design-system":5092,"../../../helpers/constants/routes":5097,"../../../helpers/utils/optimism/fetchEstimatedL1Fee":5126,"../../../hooks/experiences/useRamps":5136,"../../../hooks/gasFeeInput/useGasFeeInputs":5139,"../../../hooks/useEqualityCheck":5153,"../../../hooks/useEthFiatAmount":5154,"../../../hooks/usePrevious":5160,"../../../hooks/useTokenTracker":5174,"../../../selectors":5478,"../../../store/actions":5486,"../../confirm-approve/confirm-approve.util":5197,"../countdown-timer":5405,"../exchange-rate-display":5413,"../select-quote-popover":5439,"../swaps-footer":5458,"../swaps.util":5460,"./slippage-notification-modal":5430,"./view-quote-price-difference":5432,"@sentry/browser":1813,"bignumber.js":2428,classnames:2582,lodash:3676,"prop-types":3823,react:4076,"react-redux":4041,"react-router-dom":4061},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=z;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=Y(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=Q(e("bignumber.js")),i=e("lodash"),l=Q(e("classnames")),u=e("@sentry/browser"),c=Q(e("prop-types")),d=e("../../../contexts/i18n"),p=Q(e("../select-quote-popover")),m=e("../../../hooks/useEthFiatAmount"),f=e("../../../hooks/useEqualityCheck"),g=e("../../../hooks/usePrevious"),E=e("../../../hooks/gasFeeInput/useGasFeeInputs"),T=e("../../../contexts/metametrics"),_=e("../../../ducks/swaps/swaps"),h=e("../../../selectors"),S=e("../../../ducks/metamask/metamask"),v=e("../../../store/actions"),y=e("../../../helpers/constants/routes"),C=e("../../../../shared/constants/network"),b=e("../../../../shared/modules/conversion.utils"),w=e("../../confirm-approve/confirm-approve.util"),k=e("../swaps.util"),I=e("../../../hooks/useTokenTracker"),A=e("../../../../shared/constants/swaps"),O=e("../../../../shared/constants/gas"),N=Q(e("../countdown-timer")),x=Q(e("../swaps-footer")),P=Q(e("../../../components/ui/box")),M=e("../../../helpers/constants/design-system"),D=e("../../../components/component-library"),R=e("../../../../shared/constants/metametrics"),L=e("../../../../shared/modules/string-utils"),F=e("../../../../shared/modules/transaction.utils"),j=e("../../../../shared/lib/metamask-controller-utils"),U=e("../../../../shared/lib/transactions-controller-utils"),G=e("../../../../app/scripts/lib/util"),W=e("../../../../shared/lib/swaps-utils"),B=Q(e("../../../helpers/utils/optimism/fetchEstimatedL1Fee")),q=Q(e("../exchange-rate-display")),H=Q(e("../../../components/ui/info-tooltip")),V=Q(e("../../../hooks/experiences/useRamps")),$=Q(e("./view-quote-price-difference")),K=Q(e("./slippage-notification-modal"));function Q(e){return e&&e.__esModule?e:{default:e}}function Y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(Y=function(e){return e?a:t})(e)}let X;const Z="https://community.metamask.io/t/what-is-gas-why-do-transactions-take-so-long/3172";function z({setReceiveToAmount:e}){var t,a,c,Q,Y,z;const J=(0,o.useHistory)(),ee=(0,r.useDispatch)(),te=(0,n.useContext)(d.I18nContext),ae=(0,n.useContext)(T.MetaMetricsContext),[ne,re]=(0,n.useState)(!1),[oe,se]=(0,n.useState)(!1),[ie,le]=(0,n.useState)(!1),[ue]=(0,n.useState)(!1),[ce,de]=(0,n.useState)(null),[pe,me]=(0,n.useState)(null),[fe,ge]=(0,n.useState)(null),[Ee]=(0,n.useState)(Date.now()),{openBuyCryptoInPdapp:Te}=(0,V.default)(),[_e,he]=(0,n.useState)(!1),[Se,ve]=(0,n.useState)(!1),ye=[O.GasRecommendations.high,O.GasRecommendations.medium],Ce=(0,r.useSelector)(_.getBackgroundSwapRouteState),be=(0,r.useSelector)(_.getQuotes,i.isEqual);(0,n.useEffect)((()=>{Object.values(be).length?"awaiting"===Ce&&J.push(y.AWAITING_SWAP_ROUTE):J.push(y.PREPARE_SWAP_ROUTE)}),[J,be,Ce]);const we=(0,r.useSelector)(_.getQuotesLastFetched),ke=(0,g.usePrevious)(we),Ie=(0,r.useSelector)(_.getUsedSwapsGasPrice),Ae=(0,r.useSelector)(_.getCustomSwapsGas),Oe=(0,r.useSelector)(_.getCustomMaxFeePerGas),Ne=(0,r.useSelector)(_.getCustomMaxPriorityFeePerGas),xe=(0,r.useSelector)(_.getSwapsUserFeeLevel),Pe=(0,r.useSelector)(h.getTokenExchangeRates,i.isEqual),Me=(0,f.useEqualityCheck)(Pe),{balance:De}=(0,r.useSelector)(h.getSelectedAccount,r.shallowEqual),Re=(0,r.useSelector)(h.conversionRateSelector),Le=(0,r.useSelector)(h.getUSDConversionRate),Fe=(0,r.useSelector)(h.getIsMultiLayerFeeNetwork),je=(0,r.useSelector)(h.getCurrentCurrency),Ue=(0,r.useSelector)(S.getTokens,i.isEqual),Ge=(0,r.useSelector)(h.checkNetworkAndAccountSupports1559),We=(0,r.useSelector)(_.getBalanceError),Be=(0,r.useSelector)(_.getFetchParams,i.isEqual),qe=(0,r.useSelector)(_.getApproveTxParams,r.shallowEqual),He=(0,r.useSelector)(_.getSelectedQuote,i.isEqual),Ve=(0,r.useSelector)(_.getTopQuote,i.isEqual),$e=He||Ve,Ke=(null==$e||null===(t=$e.trade)||void 0===t?void 0:t.value)??"0x0",Qe=(0,r.useSelector)(_.getSwapsQuoteRefreshTime),Ye=(0,r.useSelector)(h.getSwapsDefaultToken,i.isEqual),Xe=(0,r.useSelector)(h.getCurrentChainId),Ze=(0,r.useSelector)(S.getNativeCurrency),ze=(0,r.useSelector)(_.getReviewSwapClickedTimestamp),Je=(0,r.useSelector)(_.getSmartTransactionsOptInStatus),et=(0,r.useSelector)(_.getSmartTransactionsEnabled),tt=(0,r.useSelector)(_.getSwapsSTXLoading),at=(0,r.useSelector)(_.getCurrentSmartTransactionsError),nt=(0,r.useSelector)(_.getSmartTransactionsError),rt=(0,r.useSelector)(_.getCurrentSmartTransactionsEnabled),ot=(0,r.useSelector)(_.getSmartTransactionFees,i.isEqual),st=(0,r.useSelector)(_.getSwapsNetworkConfig,r.shallowEqual),it=$e.trade,lt=rt&&Je,[ut]=(0,n.useState)((()=>{const e=Number(null==Be?void 0:Be.slippage);return e>0&&e<=1?A.SLIPPAGE_LOW_ERROR:e>=5&&e<=A.MAX_ALLOWED_SLIPPAGE?A.SLIPPAGE_HIGH_ERROR:""}));let ct;Ge&&(ct=(0,E.useGasFeeInputs)(O.GasRecommendations.high,{userFeeLevel:xe||O.GasRecommendations.high}));const dt=null==Be?void 0:Be.sourceToken,pt={reg_tx_fee_in_usd:undefined,reg_tx_fee_in_eth:undefined,reg_tx_max_fee_in_usd:undefined,reg_tx_max_fee_in_eth:undefined,stx_fee_in_usd:undefined,stx_fee_in_eth:undefined,stx_max_fee_in_usd:undefined,stx_max_fee_in_eth:undefined},mt=(null==$e?void 0:$e.gasEstimateWithRefund)||`0x${(0,b.decimalToHex)((null==$e?void 0:$e.averageGas)||0)}`,ft=(null==$e?void 0:$e.gasEstimate)||"0x0",gt=new s.default(ft,16).times((null==$e?void 0:$e.gasMultiplier)||_.FALLBACK_GAS_MULTIPLIER,10).round(0).toString(16),Et=null!=$e&&$e.gasEstimate?gt:`0x${(0,b.decimalToHex)((null==$e?void 0:$e.maxGas)||0)}`,Tt=Ae||Et;let _t,ht,St;if(Ge){const{maxFeePerGas:e,maxPriorityFeePerGas:t,gasFeeEstimates:{estimatedBaseFee:a="0"}}=ct;_t=Oe||(0,b.decGWEIToHexWEI)(e),ht=Ne||(0,b.decGWEIToHexWEI)(t),St=(0,b.addHexes)((0,b.decGWEIToHexWEI)(a),ht)}let vt=(0,U.calcGasTotal)(Tt,_t||Ie);null!==pe&&(vt=(0,b.sumHexes)(vt||"0x0",pe||"0x0"));const{tokensWithBalances:yt}=(0,I.useTokenTracker)(Ue,!0),Ct=dt===Ye.address?Ye:yt.find((({address:e})=>(0,L.isEqualCaseInsensitive)(e,dt))),bt=Ct||$e.sourceTokenInfo,wt=(null==yt?void 0:yt.length)&&(0,U.calcTokenAmount)(bt.balance||"0x0",bt.decimals).toFixed(9),kt=yt&&Ct===undefined,It=(0,F.parseStandardTokenTransactionData)(null==qe?void 0:qe.data),At=It&&(0,j.getTokenValueParam)(It),Ot=At&&(null==bt?void 0:bt.decimals)!==undefined&&(0,U.calcTokenAmount)(At,bt.decimals).toFixed(9),Nt=null==qe?void 0:qe.gas,xt=(0,n.useMemo)((()=>(0,k.quotesToRenderableData)({quotes:be,gasPrice:Ge?St:Ie,conversionRate:Re,currentCurrency:je,approveGas:Nt,tokenConversionRates:Me,chainId:Xe,smartTransactionEstimatedGas:et&&Je&&(null==ot?void 0:ot.tradeTxFees),nativeCurrencySymbol:Ze,multiLayerL1ApprovalFeeTotal:fe})),[be,Ie,St,Ge,Re,je,Nt,Me,Xe,null==ot?void 0:ot.tradeTxFees,Ze,et,Je,fe]),Pt=xt.find((e=>e.aggId===$e.aggregator)),{destinationTokenDecimals:Mt,destinationTokenSymbol:Dt,destinationTokenValue:Rt,sourceTokenDecimals:Lt,sourceTokenSymbol:Ft,sourceTokenValue:jt}=Pt;let{feeInFiat:Ut,feeInEth:Gt,rawEthFee:Wt,feeInUsd:Bt}=(0,k.getRenderableNetworkFeesForQuote)({tradeGas:mt,approveGas:Nt,gasPrice:Ge?St:Ie,currentCurrency:je,conversionRate:Re,USDConversionRate:Le,tradeValue:Ke,sourceSymbol:Ft,sourceAmount:$e.sourceAmount,chainId:Xe,nativeCurrencySymbol:Ze,multiLayerL1FeeTotal:pe});pt.reg_tx_fee_in_usd=Number(Bt),pt.reg_tx_fee_in_eth=Number(Wt);const qt=(0,k.getRenderableNetworkFeesForQuote)({tradeGas:Tt,approveGas:Nt,gasPrice:_t||Ie,currentCurrency:je,conversionRate:Re,USDConversionRate:Le,tradeValue:Ke,sourceSymbol:Ft,sourceAmount:$e.sourceAmount,chainId:Xe,nativeCurrencySymbol:Ze,multiLayerL1FeeTotal:pe});let{feeInFiat:Ht,feeInEth:Vt,rawEthFee:$t,feeInUsd:Kt}=qt;if(pt.reg_tx_max_fee_in_usd=Number(Kt),pt.reg_tx_max_fee_in_eth=Number($t),lt&&null!=ot&&ot.tradeTxFees){var Qt;const e=(null==ot?void 0:ot.tradeTxFees.feeEstimate)+((null==ot||null===(Qt=ot.approvalTxFees)||void 0===Qt?void 0:Qt.feeEstimate)||0),t=e*st.stxMaxFeeMultiplier;({feeInFiat:Ut,feeInEth:Gt,rawEthFee:Wt,feeInUsd:Bt}=(0,k.getFeeForSmartTransaction)({chainId:Xe,currentCurrency:je,conversionRate:Re,USDConversionRate:Le,nativeCurrencySymbol:Ze,feeInWeiDec:e})),pt.stx_fee_in_usd=Number(Bt),pt.stx_fee_in_eth=Number(Wt),pt.estimated_gas=null==ot?void 0:ot.tradeTxFees.gasLimit,({feeInFiat:Ht,feeInEth:Vt,rawEthFee:$t,feeInUsd:Kt}=(0,k.getFeeForSmartTransaction)({chainId:Xe,currentCurrency:je,conversionRate:Re,USDConversionRate:Le,nativeCurrencySymbol:Ze,feeInWeiDec:t})),pt.stx_max_fee_in_usd=Number(Kt),pt.stx_max_fee_in_eth=Number($t)}const Yt=new s.default($e.sourceAmount),Xt=new s.default($e.trade.value||0,10).plus(new s.default(vt,16)),Zt=((null==yt?void 0:yt.length)||We)&&Yt.gt(new s.default(bt.balance||"0x0")),zt=Xt.gt(new s.default(De||"0x0")),Jt=Zt?(0,U.toPrecisionWithoutTrailingZeros)((0,U.calcTokenAmount)(Yt,bt.decimals).minus(wt).toString(10),6):null,ea=zt?(0,U.toPrecisionWithoutTrailingZeros)(Xt.minus(De,16).div("1000000000000000000",10).toString(10),6):null;let ta;lt&&null!=nt&&nt.balanceNeededWei&&(ta=(0,b.decWEIToDecETH)(nt.balanceNeededWei-nt.currentBalanceWei));const aa=(0,g.usePrevious)(ta),na=(0,r.useSelector)(_.getDestinationTokenInfo,i.isEqual);(0,n.useEffect)((()=>{lt?Zt?ee((0,_.setBalanceError)(!0)):We&&!Zt&&ee((0,_.setBalanceError)(!1)):Zt||zt?ee((0,_.setBalanceError)(!0)):!We||Zt||zt||ee((0,_.setBalanceError)(!1))}),[Zt,zt,ee,lt,We]),(0,n.useEffect)((()=>{const e=Date.now()-we;e>Qe&&!ne?(re(!0),ee((0,v.safeRefetchQuotes)())):e>Qe&&(ee((0,v.setSwapsErrorKey)(A.QUOTES_EXPIRED_ERROR)),J.push(y.SWAPS_NOTIFICATION_ROUTE))}),[we,ne,ee,J,Qe]),(0,n.useEffect)((()=>{!ce&&Ot&&de(Ot)}),[ce,Ot]);const ra=(We||Jt||!lt&&ea||lt&&ta)&&!ue,oa=(0,r.useSelector)(h.isHardwareWallet),sa=(0,r.useSelector)(h.getHardwareWalletType),ia=Object.values(be).length,la=(0,n.useRef)(),ua=(0,n.useMemo)((()=>({token_from:Ft,token_from_amount:jt,token_to:Dt,token_to_amount:Rt,request_type:null==Be?void 0:Be.balanceError,slippage:null==Be?void 0:Be.slippage,custom_slippage:2!==(null==Be?void 0:Be.slippage),response_time:null==Be?void 0:Be.responseTime,best_quote_source:null==Ve?void 0:Ve.aggregator,available_quotes:ia,is_hardware_wallet:oa,hardware_wallet_type:sa,stx_enabled:et,current_stx_enabled:rt,stx_user_opt_in:Je})),[Ft,jt,Dt,Rt,null==Be?void 0:Be.balanceError,null==Be?void 0:Be.slippage,null==Be?void 0:Be.responseTime,null==Ve?void 0:Ve.aggregator,ia,oa,sa,et,rt,Je]),ca=(0,n.useCallback)((()=>{ae({event:"Best Quote Reviewed",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ua,network_fees:Ut}})}),[ae,ua,Ut]),da=(0,n.useCallback)((()=>{ae({event:"Review Quote Component Loaded",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ua,response_time:Ee-ze}})}),[ae,ua,Ee,ze]);(0,n.useEffect)((()=>{!la.current&&[Ft,jt,Dt,Rt,Be,Ve,ia,Ut].every((e=>null!==e&&e!==undefined))&&(la.current=!0,ca())}),[Be,Ve,ia,Ut,Dt,Rt,Ft,jt,ca]),(0,n.useEffect)((()=>{if((lt&&aa||!lt)&&we===ke)return;let e;if(lt&&ta)e=ta;else{if(lt||!ea)return;e=ea}ae({event:R.MetaMetricsEventName.SwapError,category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ua,error_type:R.MetaMetricsEventErrorType.InsufficientGas,additional_balance_needed:e}})}),[we,ke,ta,lt,ae,aa,ea,ua]);const pa=$e.fee,ma=()=>{ae({event:"Edit Spend Limit Opened",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ua,custom_spend_limit_set:ce===Ot,custom_spend_limit_amount:ce===Ot?null:Ot}}),ee((0,v.showModal)({name:"EDIT_APPROVAL_PERMISSION",decimals:bt.decimals,origin:"MetaMask",setCustomAmount:e=>{const t=""===e?ce:e,a=(0,w.getCustomTxParamsData)(qe.data,{customPermissionAmount:t,decimals:bt.decimals});null!=t&&t.length&&qe.data!==a&&ee((0,v.setCustomApproveTxData)(a))},tokenAmount:ce,customTokenAmount:ce===Ot?null:Ot,tokenBalance:wt,tokenSymbol:bt.symbol,requiredMinimum:(0,U.calcTokenAmount)($e.sourceAmount,bt.decimals)}))},fa=Boolean(ta||ea),ga=kt?te("swapTokenBalanceUnavailable",[Ft]):te("swapApproveNeedMoreTokens",[n.default.createElement("span",{key:"swapApproveNeedMoreTokens-1"},Jt||ta||ea),Jt&&Ft!==Ye.symbol?Ft:Ye.symbol]),Ea=null==$e||null===(a=$e.priceSlippage)||void 0===a?void 0:a.bucket,Ta=(0,g.usePrevious)(Ea);(0,n.useEffect)((()=>{_e&&Ta===O.GasRecommendations.medium&&Ea===O.GasRecommendations.high&&he(!1)}),[Ea,_e,Ta]);let _a=null;const ha=(0,m.useEthFiatAmount)((null==$e||null===(c=$e.priceSlippage)||void 0===c?void 0:c.sourceAmountInETH)||0,{showFiat:!0}),Sa=(0,m.useEthFiatAmount)((null==$e||null===(Q=$e.priceSlippage)||void 0===Q?void 0:Q.destinationAmountInETH)||0,{showFiat:!0}),va=!ha||!Sa||Boolean(null==$e||null===(Y=$e.priceSlippage)||void 0===Y?void 0:Y.calculationError);let ya=0;null!=$e&&null!==(z=$e.priceSlippage)&&void 0!==z&&z.ratio&&(ya=parseFloat(new s.default($e.priceSlippage.ratio,10).minus(1,10).times(100,10).toFixed(2),10));const Ca=(0,g.usePrevious)(ya),ba=!kt&&!ra&&$e&&(ye.includes(Ea)||va);ba&&(_a=n.default.createElement($.default,{usedQuote:$e,sourceTokenValue:jt,destinationTokenValue:Rt,priceSlippageFromSource:ha,priceSlippageFromDestination:Sa,priceDifferencePercentage:ya,priceSlippageUnknownFiatValue:va,onAcknowledgementClick:()=>{he(!0)},acknowledged:_e}));const wa=ra||ba,ka=Boolean(oe||We||kt||ba&&!_e||Ge&&St===undefined||!Ge&&(null===Ie||Ie===undefined)||rt&&(at||nt)||rt&&Je&&!(null!=ot&&ot.tradeTxFees));(0,n.useEffect)((()=>{ba&&_e&&we!==ke&&ya!==Ca&&he(!1)}),[_e,ke,we,ba,ya,Ca]),(0,n.useEffect)((()=>{if(lt&&!Zt){const e={from:it.from,to:it.to,value:it.value,data:it.data,gas:it.gas,chainId:Xe};X=setInterval((()=>{tt||ee((0,_.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:qe,fallbackOnNotEnoughFunds:!1}))}),st.stxGetTransactionsRefreshTime),ee((0,_.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:qe,fallbackOnNotEnoughFunds:!1}))}else X&&clearInterval(X);return()=>clearInterval(X)}),[ee,lt,it.data,it.from,it.value,it.gas,it.to,Xe,st.stxGetTransactionsRefreshTime,Zt]),(0,n.useEffect)((()=>{ee((0,v.setSwapsQuotesPollingLimitEnabled)(!0)),ze&&da()}),[ee,da,ze]),(0,n.useEffect)((()=>{!rt&&at&&oe&&se(!1)}),[rt,at,oe]),(0,n.useEffect)((()=>{if(!Fe||null==$e||!$e.multiLayerL1TradeFeeTotal)return;(async()=>{try{let e="0x0";qe&&(e=await(0,B.default)({txParams:{...qe,gasPrice:(0,G.addHexPrefix)(qe.gasPrice),value:"0x0"},chainId:Xe}),ge(e));const t=(0,b.sumHexes)($e.multiLayerL1TradeFeeTotal,e);me(t)}catch(e){(0,u.captureException)(e),me(null),ge(null)}})()}),[it,qe,Fe,Xe,$e]);const Ia=(0,W.calcTokenValue)(Rt,Mt),Aa=(0,U.calcTokenAmount)(Ia,Mt),Oa=(0,k.formatSwapsValueForDisplay)(Aa),Na=Oa.match(/\d+/gu).join("").length;let xa=Oa;Na>20&&(xa=`${Oa.slice(0,20)}...`),(0,n.useEffect)((()=>{e(xa)}),[xa,e]);const Pa=!qe||We&&!ue,Ma=n.default.createElement("span",{key:"fee-card-approve-symbol",className:"fee-card__bold"},te("enableToken",[Ft])),Da=({acknowledgedSlippage:e=!1})=>{!ut||e?(se(!0),We?na.symbol===Ye.symbol?J.push(y.DEFAULT_ROUTE):J.push(`${y.ASSET_ROUTE}/${na.address}`):lt&&null!=ot&&ot.tradeTxFees?ee((0,_.signAndSendSwapsSmartTransaction)({unsignedTransaction:it,trackEvent:ae,history:J,additionalTrackingParams:pt})):ee((0,_.signAndSendTransactions)(J,ae,pt))):ve(!0)};return n.default.createElement("div",{className:"review-quote"},n.default.createElement("div",{className:"review-quote__content"},n.default.createElement(K.default,{isOpen:Se,setSlippageNotificationModalOpened:ve,slippageErrorKey:ut,onSwapSubmit:Da,currentSlippage:null==Be?void 0:Be.slippage}),ie&&n.default.createElement(p.default,{quoteDataRows:xt,onClose:()=>le(!1),onSubmit:e=>ee((0,_.swapsQuoteSelected)(e)),swapToSymbol:Dt,initialAggId:$e.aggregator,onQuoteDetailsIsOpened:()=>{ae({event:"Quote Details Opened",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ua,other_quote_selected:(null==$e?void 0:$e.aggregator)!==(null==Ve?void 0:Ve.aggregator),other_quote_selected_source:(null==$e?void 0:$e.aggregator)===(null==Ve?void 0:Ve.aggregator)?null:null==$e?void 0:$e.aggregator}})},hideEstimatedGasFee:et&&Je}),wa&&n.default.createElement(n.default.Fragment,null,_a,(ra||kt)&&n.default.createElement(D.BannerAlert,{title:te("notEnoughBalance"),titleProps:{"data-testid":"swaps-banner-title"},severity:M.Severity.Info,description:ga,descriptionProps:{"data-testid":"mm-banner-alert-notification-text"},actionButtonLabel:fa?te("buyMoreAsset",[Ze]):undefined,actionButtonOnClick:fa?()=>Te():undefined,marginTop:2})),n.default.createElement("div",{className:"review-quote__countdown-timer-container"},n.default.createElement(N.default,{timeStarted:we,warningTime:"0:10",labelKey:"swapNewQuoteIn"})),n.default.createElement(P.default,{marginTop:1,marginBottom:0,display:M.DISPLAY.FLEX,flexDirection:M.FlexDirection.Column,className:"review-quote__overview"},n.default.createElement(P.default,{display:M.DISPLAY.FLEX,justifyContent:M.JustifyContent.spaceBetween,alignItems:M.AlignItems.center},n.default.createElement(D.Text,{variant:M.TextVariant.bodyMd,marginRight:1,color:M.TextColor.textAlternative},te("quoteRate")),n.default.createElement(q.default,{primaryTokenValue:(0,W.calcTokenValue)(jt,Lt),primaryTokenDecimals:Lt,primaryTokenSymbol:Ft,secondaryTokenValue:Ia,secondaryTokenDecimals:Mt,secondaryTokenSymbol:Dt,boldSymbols:!1,className:"main-quote-summary__exchange-rate-display",showIconForSwappingTokens:!1})),n.default.createElement(P.default,{display:M.DISPLAY.FLEX,justifyContent:M.JustifyContent.spaceBetween,alignItems:M.AlignItems.stretch},n.default.createElement(P.default,{display:M.DISPLAY.FLEX,alignItems:M.AlignItems.center,width:M.FRACTIONS.SIX_TWELFTHS},n.default.createElement(D.Text,{variant:M.TextVariant.bodyMd,as:"h6",color:M.TextColor.textAlternative,marginRight:1},te("transactionDetailGasHeading")),n.default.createElement(H.default,{position:"left",contentText:n.default.createElement(n.default.Fragment,null,n.default.createElement("p",{className:"fee-card__info-tooltip-paragraph"},te("swapGasFeesSummary",[(()=>{switch(Xe){case C.CHAIN_IDS.MAINNET:return te("networkNameEthereum");case C.CHAIN_IDS.BSC:return te("networkNameBSC");case C.CHAIN_IDS.POLYGON:return te("networkNamePolygon");case C.CHAIN_IDS.LOCALHOST:return te("networkNameTestnet");case C.CHAIN_IDS.GOERLI:return te("networkNameGoerli");case C.CHAIN_IDS.AVALANCHE:return te("networkNameAvalanche");case C.CHAIN_IDS.OPTIMISM:return te("networkNameOptimism");case C.CHAIN_IDS.ARBITRUM:return te("networkNameArbitrum");default:throw new Error("This network is not supported for token swaps")}})()])),n.default.createElement("p",{className:"fee-card__info-tooltip-paragraph"},te("swapGasFeesDetails")),n.default.createElement("p",{className:"fee-card__info-tooltip-paragraph"},n.default.createElement("a",{className:"fee-card__link",onClick:()=>{ae({event:'Clicked "Gas Fees: Learn More" Link',category:R.MetaMetricsEventCategory.Swaps}),global.platform.openTab({url:Z})},target:"_blank",rel:"noopener noreferrer"},te("swapGasFeesLearnMore"))))})),n.default.createElement(P.default,{display:M.DISPLAY.FLEX,alignItems:M.AlignItems.flexEnd,width:M.FRACTIONS.SIX_TWELFTHS},n.default.createElement(D.Text,{variant:M.TextVariant.bodyMd,as:"h6",color:M.TextColor.textAlternative,width:M.FRACTIONS.EIGHT_TWELFTHS,textAlign:M.TEXT_ALIGN.RIGHT,paddingRight:1},Gt),n.default.createElement(D.Text,{variant:M.TextVariant.bodyMdBold,as:"h6",color:M.TextColor.textAlternative,"data-testid":"review-quote-gas-fee-in-fiat",width:M.FRACTIONS.FOUR_TWELFTHS,textAlign:M.TEXT_ALIGN.RIGHT},` ${Ut}`))),(Ht||Vt)&&n.default.createElement(P.default,{display:M.DISPLAY.FLEX},n.default.createElement(P.default,{display:M.DISPLAY.FLEX,width:M.FRACTIONS.SIX_TWELFTHS}),n.default.createElement(P.default,{display:M.DISPLAY.FLEX,justifyContent:M.JustifyContent.flexEnd,width:M.FRACTIONS.SIX_TWELFTHS},n.default.createElement(D.Text,{variant:M.TextVariant.bodySm,color:M.TextColor.textAlternative,width:M.FRACTIONS.EIGHT_TWELFTHS,paddingRight:1,textAlign:M.TEXT_ALIGN.RIGHT},`${te("maxFee")}: `),n.default.createElement(D.Text,{variant:M.TextVariant.bodySm,color:M.TextColor.textAlternative,width:M.FRACTIONS.FOUR_TWELFTHS,textAlign:M.TEXT_ALIGN.RIGHT},Ht||Vt))),!Pa&&n.default.createElement(P.default,{display:M.DISPLAY.FLEX,justifyContent:M.JustifyContent.spaceBetween},n.default.createElement(D.Text,{variant:M.TextVariant.bodyMd,as:"h6",color:M.TextColor.textAlternative,marginRight:1},te("swapEnableTokenForSwapping",[Ma])),n.default.createElement(D.Text,{variant:M.TextVariant.bodyMd},n.default.createElement(D.ButtonLink,{onClick:()=>ma(),size:M.Size.inherit,className:"review-quote__edit-limit"},te("swapEditLimit")))),n.default.createElement(P.default,{display:M.DISPLAY.FLEX,marginTop:3,justifyContent:M.JustifyContent.center,alignItems:M.AlignItems.center},n.default.createElement(D.Text,{variant:M.TextVariant.bodySm,color:M.TextColor.textDefault},te("swapIncludesMetaMaskFeeViewAllQuotes",[pa,n.default.createElement(D.ButtonLink,{key:"view-all-quotes","data-testid":"review-quote-view-all-quotes",onClick:()=>{ae({event:"All Available Quotes Opened",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ua,other_quote_selected:(null==$e?void 0:$e.aggregator)!==(null==Ve?void 0:Ve.aggregator),other_quote_selected_source:(null==$e?void 0:$e.aggregator)===(null==Ve?void 0:Ve.aggregator)?null:null==$e?void 0:$e.aggregator}}),le(!0)},size:M.Size.inherit},te("viewAllQuotes"))]))))),n.default.createElement(x.default,{onSubmit:Da,submitText:te(lt&&tt?"preparingSwap":"swap"),hideCancel:!0,disabled:ka,className:(0,l.default)("review-quote__footer",{"review-quote__thin-swaps-footer":wa}),showTopBorder:!0,showTermsOfService:!0}))}z.propTypes={setReceiveToAmount:c.default.func.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/review-quote.js"}],[5430,{"../../../../shared/constants/swaps":4361,"../../../components/component-library":4822,"../../../contexts/i18n":5069,"../../../helpers/constants/design-system":5092,"../swaps-banner-alert/swaps-banner-alert":5457,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function({isOpen:e,slippageErrorKey:t,setSlippageNotificationModalOpened:a,onSwapSubmit:n,currentSlippage:c}){const d=(0,r.useContext)(o.I18nContext),[p,m]=(0,r.useState)(!1),f=d(p?"preparingSwap":"swapAnyway");return r.default.createElement(i.Modal,{onClose:()=>a(!1),isOpen:e,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},r.default.createElement(i.ModalOverlay,null),r.default.createElement(i.ModalContent,null,r.default.createElement(i.ModalHeader,{onClose:()=>a(!1)},t===l.SLIPPAGE_HIGH_ERROR?d("swapHighSlippage"):t===l.SLIPPAGE_LOW_ERROR?d("swapLowSlippage"):""),r.default.createElement(i.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.stretch,className:"high-slippage__content",marginTop:7},r.default.createElement(u.default,{swapsErrorKey:t,showTransactionSettingsLink:!0,currentSlippage:c}),r.default.createElement(i.Box,{marginTop:5},r.default.createElement(i.ButtonPrimary,{onClick:()=>{m(!0),n({acknowledgedSlippage:!0})},block:!0,"data-testid":"high-slippage-continue-anyway",disabled:p},f)))))};var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),o=e("../../../contexts/i18n"),s=e("../../../helpers/constants/design-system"),i=e("../../../components/component-library"),l=e("../../../../shared/constants/swaps"),u=(n=e("../swaps-banner-alert/swaps-banner-alert"))&&n.__esModule?n:{default:n};function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/slippage-notification-modal.tsx"}],[5431,{"../../../components/component-library":4822,"../../../contexts/i18n":5069,"../../../helpers/constants/design-system":5092,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function({onEnableSmartTransactionsClick:e,onCloseSmartTransactionsOptInPopover:t,isOpen:a}){const i=(0,n.useContext)(r.I18nContext);return n.default.createElement(s.Modal,{isOpen:a,onClose:t},n.default.createElement(s.ModalOverlay,null),n.default.createElement(s.ModalContent,null,n.default.createElement(s.ModalHeader,{onClose:t},i("smartSwapsAreHere")),n.default.createElement(s.Box,{display:o.Display.Flex,flexDirection:o.FlexDirection.Column,gap:4,marginTop:4},n.default.createElement(s.Box,{display:o.Display.Flex,flexDirection:o.FlexDirection.Column},n.default.createElement("img",{src:"./images/logo/smart-transactions-header.png",alt:i("swapSwapSwitch")})),n.default.createElement(s.Text,null,i("smartSwapsDescription")),n.default.createElement(s.Text,{as:"ul",marginTop:3,marginBottom:3,style:{listStyle:"inside"}},n.default.createElement("li",null,i("stxBenefit1")),n.default.createElement("li",null,i("stxBenefit2")),n.default.createElement("li",null,i("stxBenefit3")),n.default.createElement("li",null,i("stxBenefit4"),n.default.createElement(s.Text,{as:"span",fontWeight:o.FontWeight.Normal}," *"))),n.default.createElement(s.Text,{color:o.TextColor.textAlternative},i("smartSwapsSubDescription")," ",n.default.createElement(s.Text,{as:"span",fontWeight:o.FontWeight.Bold,color:o.TextColor.textAlternative},i("stxYouCanOptOut")," ")),n.default.createElement(s.Button,{variant:s.ButtonVariant.Primary,onClick:e,width:o.BlockSize.Full},i("enableSmartSwaps")),n.default.createElement(s.Button,{type:"link",variant:s.ButtonVariant.Link,onClick:t,width:o.BlockSize.Full},i("noThanksVariant2")))))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("../../../contexts/i18n"),o=e("../../../helpers/constants/design-system"),s=e("../../../components/component-library");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/smart-transactions-popover.tsx"}],[5432,{"../../../../shared/constants/gas":4349,"../../../components/component-library":4822,"../../../components/ui/box":4931,"../../../contexts/i18n":5069,"../../../helpers/constants/design-system":5092,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=c(e("prop-types")),o=e("../../../contexts/i18n"),s=c(e("../../../components/ui/box")),i=e("../../../helpers/constants/design-system"),l=e("../../../../shared/constants/gas"),u=e("../../../components/component-library");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(e){const{usedQuote:t,sourceTokenValue:a,destinationTokenValue:r,onAcknowledgementClick:c,acknowledged:d,priceSlippageFromSource:p,priceSlippageFromDestination:m,priceDifferencePercentage:f,priceSlippageUnknownFiatValue:g}=e,E=(0,n.useContext)(o.I18nContext);let T=E("swapPriceUnavailableTitle"),_=E("swapPriceUnavailableDescription"),h=l.GasRecommendations.high;g||(T=E("swapPriceDifferenceTitle",[f]),_=E("swapPriceDifference",[a,t.sourceTokenInfo.symbol,p,r,t.destinationTokenInfo.symbol,m]),h=t.priceSlippage.bucket);const S=h===l.GasRecommendations.high?i.SEVERITIES.DANGER:i.SEVERITIES.WARNING;return n.default.createElement(s.default,{display:i.DISPLAY.FLEX,marginTop:2},n.default.createElement(u.BannerAlert,{title:T,titleProps:{"data-testid":"swaps-banner-title"},severity:S,width:i.BLOCK_SIZES.FULL,"data-testid":"mm-banner-alert"},n.default.createElement(s.default,null,n.default.createElement(u.Text,{variant:i.TextVariant.bodyMd,as:"h6","data-testid":"mm-banner-alert-notification-text"},_),!d&&n.default.createElement(u.ButtonLink,{size:u.ButtonLinkSize.Inherit,textProps:{variant:i.TextVariant.bodyMd,alignItems:i.AlignItems.flexStart},onClick:c},E("swapAnyway")))))}p.propTypes={usedQuote:r.default.object,sourceTokenValue:r.default.string,destinationTokenValue:r.default.string,onAcknowledgementClick:r.default.func,acknowledged:r.default.bool,priceSlippageFromSource:r.default.string,priceSlippageFromDestination:r.default.string,priceDifferencePercentage:r.default.number,priceSlippageUnknownFiatValue:r.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/view-quote-price-difference.js"}],[5433,{"./searchable-item-list":5438},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./searchable-item-list"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/index.js"}],[5434,{"./item-list.component":5435},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./item-list.component"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/item-list/index.js"}],[5435,{"../../../../../shared/constants/metametrics":4353,"../../../../../shared/constants/swaps":4361,"../../../../components/ui/actionable-message/actionable-message":4927,"../../../../components/ui/button":4935,"../../../../components/ui/identicon":4985,"../../../../components/ui/url-icon":5066,"../../../../contexts/i18n":5069,"../../../../contexts/metametrics":5070,"../../../../helpers/utils/util":5133,"../../../../selectors":5478,classnames:2582,"prop-types":3823,react:4076,"react-redux":4041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=h;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=T(e("prop-types")),s=T(e("classnames")),i=T(e("../../../../components/ui/identicon")),l=T(e("../../../../components/ui/url-icon")),u=T(e("../../../../components/ui/button")),c=T(e("../../../../components/ui/actionable-message/actionable-message")),d=e("../../../../contexts/i18n"),p=e("../../../../selectors"),m=e("../../../../../shared/constants/metametrics"),f=e("../../../../../shared/constants/swaps"),g=e("../../../../helpers/utils/util"),E=e("../../../../contexts/metametrics");function T(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}function h({results:e=[],onClickItem:t,onOpenImportTokenModalClick:a,Placeholder:o,listTitle:T,maxListItems:_=6,searchQuery:h="",containerRef:S,hideRightLabels:v,hideItemIf:y,listContainerClassName:C}){const b=(0,n.useContext)(d.I18nContext),w=(0,r.useSelector)(p.getCurrentChainId),k=(0,r.useSelector)(p.getRpcPrefsForCurrentProvider).blockExplorerUrl??f.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[w]??null,I=(0,r.useSelector)(p.getUseCurrencyRateCheck),A=(0,g.getURLHostName)(k),O=(0,n.useContext)(E.MetaMetricsContext),N=1===e.length&&e[0].notImported,x=o?n.default.createElement(o,{searchQuery:h}):null;return 0===e.length?x:n.default.createElement("div",{className:"searchable-item-list"},T?n.default.createElement("div",{className:"searchable-item-list__title"},T):null,n.default.createElement("div",{className:(0,s.default)("searchable-item-list__list-container",C),ref:S,"data-testid":"searchable-item-list-list-container"},e.slice(0,_).map(((e,r)=>{if(null!=y&&y(e))return null;const o=e.balance>0;if(e.blocked&&!o&&!h)return null;const c=()=>{e.blocked||(e.notImported?a(e):null==t||t(e))},{iconUrl:d,identiconAddress:p,selected:m,blocked:f,primaryLabel:g,secondaryLabel:E,rightPrimaryLabel:T,rightSecondaryLabel:_,IconComponent:S}=e;return n.default.createElement("div",{tabIndex:"0",className:(0,s.default)("searchable-item-list__item",{"searchable-item-list__item--selected":m,"searchable-item-list__item--disabled":f}),"data-testid":"searchable-item-list__item",onClick:c,onKeyUp:e=>"Enter"===e.key&&c(),key:`searchable-item-list-item-${r}`,title:f?b("swapTokenNotAvailable"):null},d||g?n.default.createElement(l.default,{url:d,name:g}):null,d||g||!p?null:n.default.createElement("div",{className:"searchable-item-list__identicon"},n.default.createElement(i.default,{address:p,diameter:24})),S?n.default.createElement(S,null):null,n.default.createElement("div",{className:"searchable-item-list__labels"},n.default.createElement("div",{className:"searchable-item-list__item-labels"},g?n.default.createElement("span",{className:"searchable-item-list__primary-label","data-testid":"searchable-item-list-primary-label"},g):null,E?n.default.createElement("span",{className:"searchable-item-list__secondary-label"},E):null),v||!T&&!_?null:n.default.createElement("div",{className:"searchable-item-list__right-labels"},T?n.default.createElement("span",{className:"searchable-item-list__right-primary-label"},T):null,_&&I?n.default.createElement("span",{className:"searchable-item-list__right-secondary-label"},_):null)),e.notImported&&n.default.createElement(u.default,{type:"primary",onClick:c,"data-testid":"searchable-item-list-import-button"},b("import")))})),!N&&k&&n.default.createElement("div",{tabIndex:"0",className:"searchable-item-list__item searchable-item-list__item--add-token",key:"searchable-item-list-item-last"},n.default.createElement(c.default,{message:b("addTokenByContractAddress",[n.default.createElement("a",{key:"searchable-item-list__etherscan-link",onClick:()=>{O({event:"Clicked Block Explorer Link",category:m.MetaMetricsEventCategory.Swaps,properties:{link_type:"Token Tracker",action:"Verify Contract Address",block_explorer_domain:A}}),global.platform.openTab({url:k})},target:"_blank",rel:"noopener noreferrer"},A)])}))))}h.propTypes={results:o.default.arrayOf(o.default.shape({iconUrl:o.default.string,selected:o.default.bool,blocked:o.default.bool,primaryLabel:o.default.string,secondaryLabel:o.default.string,rightPrimaryLabel:o.default.string,rightSecondaryLabel:o.default.string})),onClickItem:o.default.func,onOpenImportTokenModalClick:o.default.func,Placeholder:o.default.func,listTitle:o.default.string,maxListItems:o.default.number,searchQuery:o.default.string,containerRef:o.default.shape({current:o.default.instanceOf(window.Element)}),hideRightLabels:o.default.bool,hideItemIf:o.default.func,listContainerClassName:o.default.string}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/item-list/item-list.component.js"}],[5436,{"./list-item-search.component":5437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./list-item-search.component"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/list-item-search/index.js"}],[5437,{"../../../../../shared/modules/hexstring-utils":4384,"../../../../components/ui/icon/search-icon":4979,"../../../../components/ui/text-field":5046,"../../../../hooks/usePrevious":5160,"../../../../selectors/selectors":5481,"../../swaps.util":5460,"@material-ui/core/InputAdornment":706,"fuse.js":3180,loglevel:3688,"prop-types":3823,react:4076,"react-redux":4041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=h;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=g(e("prop-types")),s=g(e("fuse.js")),i=g(e("loglevel")),l=g(e("@material-ui/core/InputAdornment")),u=g(e("../../../../components/ui/text-field")),c=e("../../../../hooks/usePrevious"),d=e("../../../../../shared/modules/hexstring-utils"),p=e("../../swaps.util"),m=e("../../../../selectors/selectors"),f=g(e("../../../../components/ui/icon/search-icon"));function g(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}const T=()=>n.default.createElement(l.default,{position:"start",style:{marginRight:"12px"}},n.default.createElement(f.default,{size:20,color:"var(--color-icon-muted)"}));let _;function h({onSearch:e,error:t,listToSearch:a=[],fuseSearchKeys:o,searchPlaceholderText:l,defaultToAll:f,shouldSearchForImports:g,searchQuery:E,setSearchQuery:h}){const S=(0,n.useRef)(),v=(0,r.useSelector)(m.getCurrentChainId),y=async t=>{h(t),_&&clearTimeout(_),_=setTimeout((async()=>{_=null;const n=t.trim(),r=(0,d.isValidHexAddress)(n),o=S.current.search(t),s=f&&""===t?a:o;g&&0===s.length&&r?await(async t=>{try{const a=await(0,p.fetchToken)(t,v);if(a)return a.primaryLabel=a.symbol,a.secondaryLabel=a.name,a.notImported=!0,void e({searchQuery:t,results:[a]})}catch(e){i.default.error("Token not found, show 0 results.",e)}e({searchQuery:t,results:[]})})(n):e({searchQuery:t,results:s})}),350)};(0,n.useEffect)((()=>()=>clearTimeout(_)),[]),(0,n.useEffect)((()=>{S.current||(S.current=new s.default(a,{shouldSort:!0,threshold:.45,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:o}))}),[o,a]);const C=(0,c.usePrevious)(a??[]);return(0,n.useEffect)((()=>{if(S.current&&E&&C!==a){S.current.setCollection(a);const t=S.current.search(E);e({searchQuery:E,results:t})}}),[a,E,e,C]),n.default.createElement(u.default,{"data-testid":"search-list-items",className:"searchable-item-list__search",placeholder:l,type:"text",value:E,onChange:e=>y(e.target.value),error:t,fullWidth:!0,startAdornment:T(),autoComplete:"off",autoFocus:!0})}h.propTypes={onSearch:o.default.func,error:o.default.string,listToSearch:o.default.array.isRequired,fuseSearchKeys:o.default.arrayOf(o.default.object).isRequired,searchPlaceholderText:o.default.string,defaultToAll:o.default.bool,shouldSearchForImports:o.default.bool,searchQuery:o.default.string,setSearchQuery:o.default.func}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/list-item-search/list-item-search.component.js"}],[5438,{"./item-list":5434,"./list-item-search":5436,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=i(e("prop-types")),o=i(e("./item-list")),s=i(e("./list-item-search"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u({className:e,defaultToAll:t,fuseSearchKeys:a,itemSelectorError:r,itemsToSearch:i=[],listTitle:l,maxListItems:u,onClickItem:c,onOpenImportTokenModalClick:d,Placeholder:p,searchPlaceholderText:m,hideRightLabels:f,hideItemIf:g,listContainerClassName:E,shouldSearchForImports:T,searchQuery:_,setSearchQuery:h}){const S=(0,n.useRef)(),v=(0,n.useMemo)((()=>t?i:[]),[t,i]),[y,C]=(0,n.useState)(v);return(0,n.useEffect)((()=>{_||C(v)}),[v.length,_]),n.default.createElement("div",{className:e},n.default.createElement(s.default,{listToSearch:i,fuseSearchKeys:a,onSearch:({searchQuery:e="",results:t=[]})=>{h(e),C(t)},error:r,searchPlaceholderText:m,defaultToAll:t,shouldSearchForImports:T,searchQuery:_,setSearchQuery:h}),n.default.createElement(o.default,{searchQuery:_,results:y,onClickItem:c,onOpenImportTokenModalClick:d,Placeholder:p,listTitle:l,maxListItems:u,containerRef:S,hideRightLabels:f,hideItemIf:g,listContainerClassName:E}))}u.propTypes={itemSelectorError:r.default.string,itemsToSearch:r.default.array,onClickItem:r.default.func,onOpenImportTokenModalClick:r.default.func,Placeholder:r.default.func,className:r.default.string,searchPlaceholderText:r.default.string,fuseSearchKeys:r.default.arrayOf(r.default.shape({name:r.default.string,weight:r.default.number})),listTitle:r.default.string,defaultToAll:r.default.bool,maxListItems:r.default.number,hideRightLabels:r.default.bool,hideItemIf:r.default.func,listContainerClassName:r.default.string,shouldSearchForImports:r.default.bool,searchQuery:r.default.string,setSearchQuery:r.default.func}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/searchable-item-list.js"}],[5439,{"./select-quote-popover":5443},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./select-quote-popover"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/index.js"}],[5440,{"./quote-details":5441},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./quote-details"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/quote-details/index.js"}],[5441,{"../../../../components/ui/info-tooltip":4986,"../../../../contexts/i18n":5069,"../../../../selectors":5478,"../../exchange-rate-display":5413,"prop-types":3823,react:4076,"react-redux":4041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=c(e("prop-types")),s=e("../../../../contexts/i18n"),i=c(e("../../../../components/ui/info-tooltip")),l=c(e("../../exchange-rate-display")),u=e("../../../../selectors");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}const p=({slippage:e,sourceTokenValue:t,sourceTokenSymbol:a,destinationTokenValue:o,destinationTokenSymbol:c,liquiditySourceKey:d,minimumAmountReceived:p,feeInEth:m,networkFees:f,metaMaskFee:g,hideEstimatedGasFee:E})=>{const T=(0,n.useContext)(s.I18nContext),_=(0,r.useSelector)(u.getUseCurrencyRateCheck);return n.default.createElement("div",{className:"quote-details"},n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapRate")),n.default.createElement("div",{className:"quote-details__detail-content"},n.default.createElement(l.default,{primaryTokenValue:t,primaryTokenDecimals:1,primaryTokenSymbol:a,secondaryTokenValue:o,secondaryTokenDecimals:1,secondaryTokenSymbol:c}))),n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapMaxSlippage"),n.default.createElement(i.default,{position:"bottom",contentText:T("swapSlippageTooltip")})),n.default.createElement("div",{className:"quote-details__detail-content"},`${e}%`)),n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapAmountReceived"),n.default.createElement(i.default,{position:"bottom",contentText:T("swapAmountReceivedInfo")})),n.default.createElement("div",{className:"quote-details__detail-content"},n.default.createElement("span",null,p),n.default.createElement("span",{className:"quote-details__bold"},` ${c}`))),!E&&n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapEstimatedNetworkFees"),n.default.createElement(i.default,{position:"bottom",contentText:T("swapEstimatedNetworkFeesInfo")})),n.default.createElement("div",{className:"quote-details__detail-content"},n.default.createElement("span",null,m),n.default.createElement("span",{className:"quote-details__light-grey"},_&&` (${f})`))),n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapSource"),n.default.createElement(i.default,{position:"bottom",contentText:T("swapSourceInfo")})),n.default.createElement("div",{className:"quote-details__detail-content"},T(d))),n.default.createElement("div",{className:"quote-details__row quote-details__row--high"},n.default.createElement("div",{className:"quote-details__detail-header"},n.default.createElement("img",{src:"./images/logo/metamask-fox.svg",className:"quote-details__metafox-logo",alt:""}),T("swapMetaMaskFee")),n.default.createElement("div",{className:"quote-details__detail-content"},T("swapMetaMaskFeeDescription",[g]))))};p.propTypes={slippage:o.default.number.isRequired,sourceTokenValue:o.default.string.isRequired,sourceTokenSymbol:o.default.string.isRequired,destinationTokenValue:o.default.string.isRequired,destinationTokenSymbol:o.default.string.isRequired,liquiditySourceKey:o.default.string.isRequired,minimumAmountReceived:o.default.string.isRequired,feeInEth:o.default.string.isRequired,networkFees:o.default.string.isRequired,metaMaskFee:o.default.number.isRequired,hideEstimatedGasFee:o.default.bool};var m=p;a.default=m}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/quote-details/quote-details.js"}],[5442,{"prop-types":3823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.QUOTE_DATA_ROWS_PROPTYPES_SHAPE=void 0;var n,r=(n=e("prop-types"))&&n.__esModule?n:{default:n};const o=r.default.shape({aggId:r.default.string.isRequired,amountReceiving:r.default.string.isRequired,destinationTokenDecimals:r.default.number.isRequired,destinationTokenSymbol:r.default.string.isRequired,destinationTokenValue:r.default.string.isRequired,isBestQuote:r.default.bool,networkFees:r.default.string.isRequired,quoteSource:r.default.string.isRequired,rawNetworkFees:r.default.string.isRequired,slippage:r.default.number.isRequired,sourceTokenDecimals:r.default.number.isRequired,sourceTokenSymbol:r.default.string.isRequired,sourceTokenValue:r.default.string.isRequired});a.QUOTE_DATA_ROWS_PROPTYPES_SHAPE=o}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/select-quote-popover-constants.js"}],[5443,{"../../../components/ui/button":4935,"../../../components/ui/popover":5020,"../../../contexts/i18n":5069,"./quote-details":5440,"./select-quote-popover-constants":5442,"./sort-list":5444,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=d(e("prop-types")),o=e("../../../contexts/i18n"),s=d(e("../../../components/ui/popover")),i=d(e("../../../components/ui/button")),l=d(e("./quote-details")),u=d(e("./sort-list")),c=e("./select-quote-popover-constants");function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}const f=({quoteDataRows:e=[],onClose:t=null,onSubmit:a=null,swapToSymbol:r,initialAggId:c,onQuoteDetailsIsOpened:d,hideEstimatedGasFee:p})=>{const f=(0,n.useContext)(o.I18nContext),[g,E]=(0,n.useState)(1),[T,_]=(0,n.useState)(null),[h,S]=(0,n.useState)(c),[v,y]=(0,n.useState)("sortList"),[C,b]=(0,n.useState)(null),w=(0,n.useCallback)((()=>{a(h),t()}),[h,t,a]),k=(0,n.useCallback)((()=>{b(null),y("sortList")}),[]),I=(0,n.useCallback)((e=>S(e)),[S]),A=(0,n.useCallback)((t=>{const a=e.find((e=>e.aggId===t));y("quoteDetails"),d(),b(a)}),[e,d]),O=(0,n.useCallback)((()=>n.default.createElement("div",{className:"select-quote-popover__popover-bg",onClick:t})),[t]),N=n.default.createElement(n.default.Fragment,null,n.default.createElement(i.default,{type:"secondary",className:"page-container__footer-button select-quote-popover__button",onClick:t},f("close")),n.default.createElement(i.default,{type:"primary",className:"page-container__footer-button select-quote-popover__button",onClick:w},f("swapSelect")));return n.default.createElement("div",{className:"select-quote-popover"},n.default.createElement(s.default,{title:f("quoteDetails"===v?"swapSelectAQuote":"swapQuoteDetails"),subtitle:"sortList"===v?f("swapSelectQuotePopoverDescription"):null,onClose:t,CustomBackground:O,className:"select-quote-popover__popover-wrap",footerClassName:"swaps__footer",footer:"quoteDetails"===v?null:N,onBack:"quoteDetails"===v?k:null},"sortList"===v&&n.default.createElement(u.default,{quoteDataRows:e,selectedAggId:h,onSelect:I,onCaretClick:A,swapToSymbol:r,sortDirection:g,setSortDirection:E,sortColumn:T,setSortColumn:_,hideEstimatedGasFee:p}),"quoteDetails"===v&&C&&n.default.createElement(l.default,m({},C,{hideEstimatedGasFee:p}))))};f.propTypes={onClose:r.default.func,onSubmit:r.default.func,swapToSymbol:r.default.string,quoteDataRows:r.default.arrayOf(c.QUOTE_DATA_ROWS_PROPTYPES_SHAPE),initialAggId:r.default.string,onQuoteDetailsIsOpened:r.default.func,hideEstimatedGasFee:r.default.bool.isRequired};var g=f;a.default=g}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/select-quote-popover.js"}],[5444,{"./sort-list":5445},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./sort-list"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/sort-list/index.js"}],[5445,{"../../../../components/ui/icon/sun-check-icon.component":4980,"../../../../components/ui/info-tooltip":4986,"../../../../contexts/i18n":5069,"../../../../selectors":5478,"../select-quote-popover-constants":5442,"bignumber.js":2428,classnames:2582,"prop-types":3823,react:4076,"react-redux":4041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=E;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=m(e("prop-types")),s=m(e("classnames")),i=m(e("bignumber.js")),l=m(e("../../../../components/ui/icon/sun-check-icon.component")),u=e("../../../../contexts/i18n"),c=e("../select-quote-popover-constants"),d=m(e("../../../../components/ui/info-tooltip")),p=e("../../../../selectors");function m(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}const g=()=>n.default.createElement("svg",{width:"6",height:"9",viewBox:"0 0 6 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M0.7948 4.96973C0.365112 4.96973 0.150269 5.47754 0.462769 5.77051L2.78699 8.09473C2.96277 8.29004 3.25574 8.29004 3.45105 8.09473L5.77527 5.77051C6.06824 5.47754 5.85339 4.96973 5.44324 4.96973H0.7948ZM5.77527 2.91895L3.45105 0.594727C3.25574 0.418945 2.96277 0.418945 2.78699 0.594727L0.462769 2.91895C0.150269 3.23145 0.365112 3.71973 0.7948 3.71973H5.44324C5.85339 3.71973 6.06824 3.23145 5.77527 2.91895Z",fill:"var(--color-primary-default)"}));function E({quoteDataRows:e,selectedAggId:t,onSelect:a,onCaretClick:o,swapToSymbol:c,sortDirection:m,setSortDirection:f,sortColumn:E=null,setSortColumn:T,hideEstimatedGasFee:_}){const h=(0,n.useContext)(u.I18nContext),[S,v]=(0,n.useState)(!1),y=(0,r.useSelector)(p.getUseCurrencyRateCheck),C=e=>{e===E?f(-1*m):T(e)},b=(0,n.useMemo)((()=>[...e].sort(((e,t)=>{if(null===E&&e.isBestQuote)return-1;if(null===E&&t.isBestQuote)return 1;if(null===E){const a=new i.default(e.destinationTokenValue).toString(16),n=new i.default(t.destinationTokenValue).toString(16);return a[a.length-1]<n[n.length-1]?-1:1}return"quoteSource"===E?e[E]>t[E]?-1*m:m:new i.default(e[E]).gt(t[E])?-1*m:m}))),[e,E,m]),w=b.findIndex((({aggId:e})=>t===e));return n.default.createElement("div",{className:"select-quote-popover__sort-list"},n.default.createElement("div",{className:"select-quote-popover__column-headers"},n.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__receiving","data-testid":"select-quote-popover__receiving",onClick:()=>C("destinationTokenValue")},n.default.createElement("span",{className:"select-quote-popover__receiving-symbol"},c),n.default.createElement("div",{className:"select-quote-popover__receiving-label"},n.default.createElement("span",null,h("swapReceiving")),n.default.createElement(d.default,{position:"bottom",contentText:h("swapReceivingInfoTooltip")}),n.default.createElement(g,null))),n.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__network-fees select-quote-popover__network-fees-header","data-testid":"select-quote-popover__network-fees-header",onClick:()=>C("rawNetworkFees")},!_&&y&&n.default.createElement(n.default.Fragment,null,n.default.createElement("span",null,h("swapEstimatedNetworkFees")),n.default.createElement(d.default,{position:"bottom",contentText:h("swapEstimatedNetworkFeesInfo")}),n.default.createElement(g,null))),n.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__quote-source","data-testid":"select-quote-popover__quote-source",onClick:()=>C("quoteSource")},h("swapQuoteSource"),n.default.createElement("div",{className:"select-quote-popover__quote-source-toggle"},n.default.createElement(g,null)))),b.map((({destinationTokenValue:e,networkFees:t,isBestQuote:r,quoteSource:i,aggId:u},c)=>n.default.createElement("div",{className:(0,s.default)("select-quote-popover__row",{"select-quote-popover__row--selected":w===c,"select-quote-popover__row--no-hover":S}),onClick:()=>a(u),key:`select-quote-popover-row-${c}`,"data-testid":`select-quote-popover-row-${c}`},n.default.createElement("div",{className:"select-quote-popover__receiving"},n.default.createElement("div",{className:"select-quote-popover__receiving-value"},r&&n.default.createElement(l.default,{reverseColors:w!==c}),n.default.createElement("div",{className:"select-quote-popover__receiving-value-text",title:e},e)),"RFQ"===i&&n.default.createElement("span",{className:"select-quote-popover__zero-slippage"},h("swapZeroSlippage"))),n.default.createElement("div",{className:"select-quote-popover__network-fees"},!_&&y&&t),n.default.createElement("div",{className:"select-quote-popover__quote-source"},n.default.createElement("div",{className:(0,s.default)("select-quote-popover__quote-source-label",{"select-quote-popover__quote-source-label--green":"AGG"===i,"select-quote-popover__quote-source-label--orange":"RFQ"===i,"select-quote-popover__quote-source-label--blue":"DEX"===i})},i)),n.default.createElement("div",{className:"select-quote-popover__caret-right","data-testid":`select-quote-popover__caret-right-${c}`,onClick:e=>{e.stopPropagation(),o(u)},onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},n.default.createElement("i",{className:"fa fa-angle-up"}))))))}E.propTypes={selectedAggId:o.default.string.isRequired,onSelect:o.default.func.isRequired,onCaretClick:o.default.func.isRequired,swapToSymbol:o.default.string.isRequired,quoteDataRows:o.default.arrayOf(c.QUOTE_DATA_ROWS_PROPTYPES_SHAPE).isRequired,sortDirection:o.default.number.isRequired,setSortDirection:o.default.func.isRequired,sortColumn:o.default.string,setSortColumn:o.default.func.isRequired,hideEstimatedGasFee:o.default.bool.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/sort-list/sort-list.js"}],[5446,{"../../../components/component-library":4822,"../../../components/ui/url-icon":5066,"../../../contexts/i18n":5069,"../../../helpers/constants/design-system":5092,classnames:2582,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=c(e("prop-types")),o=c(e("classnames")),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=c(e("../../../components/ui/url-icon")),u=e("../../../contexts/i18n");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p({onClick:e,onClose:t,selectedToken:a,testId:r}){const c=(0,n.useContext)(u.I18nContext),d=(null==a?void 0:a.iconUrl)&&(null==a?void 0:a.symbol);return n.default.createElement("div",{className:(0,o.default)("dropdown-search-list","dropdown-search-list__selector-closed-container","dropdown-input-pair__selector--closed"),"data-testid":"dropdown-search-list",tabIndex:"0",onClick:e,onKeyUp:a=>{"Escape"===a.key?t():"Enter"===a.key&&e(a)}},n.default.createElement("div",{className:"dropdown-search-list__selector-closed"},d&&n.default.createElement(l.default,{url:a.iconUrl,className:"dropdown-search-list__selector-closed-icon",name:null==a?void 0:a.symbol}),n.default.createElement("div",{className:(0,o.default)("dropdown-search-list__labels",{"dropdown-search-list__labels--with-icon":d})},n.default.createElement("div",{className:"dropdown-search-list__item-labels"},n.default.createElement("span",{"data-testid":r,className:(0,o.default)("dropdown-search-list__closed-primary-label",{"dropdown-search-list__select-default":!(null!=a&&a.symbol)})},(null==a?void 0:a.symbol)||c("swapSelectAToken"))))),n.default.createElement(s.Icon,{name:s.IconName.ArrowDown,size:s.IconSize.Xs,marginRight:3,color:i.IconColor.iconAlternative}))}p.propTypes={onClick:r.default.func.isRequired,onClose:r.default.func.isRequired,selectedToken:r.default.object.isRequired,testId:r.default.string}}}},{package:"$root$",file:"ui/pages/swaps/selected-token/selected-token.js"}],[5447,{"./slippage-buttons":5448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./slippage-buttons"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/slippage-buttons/index.js"}],[5448,{"../../../../shared/constants/swaps":4361,"../../../components/component-library":4822,"../../../components/ui/box":4931,"../../../components/ui/button":4935,"../../../components/ui/button-group":4933,"../../../components/ui/info-tooltip":4986,"../../../components/ui/toggle-button":5050,"../../../contexts/i18n":5069,"../../../helpers/constants/design-system":5092,"../swaps.util":5460,classnames:2582,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=E(e("prop-types")),o=E(e("classnames")),s=e("../../../contexts/i18n"),i=E(e("../../../components/ui/button-group")),l=E(e("../../../components/ui/button")),u=E(e("../../../components/ui/info-tooltip")),c=E(e("../../../components/ui/toggle-button")),d=E(e("../../../components/ui/box")),p=e("../../../helpers/constants/design-system"),m=e("../swaps.util"),f=e("../../../../shared/constants/swaps"),g=e("../../../components/component-library");function E(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function _({onSelect:e,maxAllowedSlippage:t,currentSlippage:a,smartTransactionsEnabled:r,smartTransactionsOptInStatus:E,setSmartTransactionsOptInStatus:T,currentSmartTransactionsError:_,isDirectWrappingEnabled:h}){const S=(0,n.useContext)(s.I18nContext),[v,y]=(0,n.useState)((()=>"number"!=typeof a||Object.values(f.Slippage).includes(a)?"":a.toString())),[C,b]=(0,n.useState)(!1),[w,k]=(0,n.useState)((()=>a===f.Slippage.high?1:a===f.Slippage.default?0:"number"==typeof a?2:0)),[I,A]=(0,n.useState)((()=>a!==f.Slippage.default)),[O,N]=(0,n.useState)(null);let x="";v&&(Number(v)<0?x=S("swapSlippageNegative"):Number(v)>0&&Number(v)<=1?x=S("swapLowSlippageError"):Number(v)>=5&&Number(v)<=t?x=S("swapHighSlippageWarning"):Number(v)>t&&(x=S("swapsExcessiveSlippageWarning")));const P=v||S("swapCustom");return(0,n.useEffect)((()=>{O&&C&&window.document.activeElement!==O&&O.focus()}),[O,C]),n.default.createElement("div",{className:"slippage-buttons"},n.default.createElement("button",{onClick:()=>A(!I),className:(0,o.default)("slippage-buttons__header",{"slippage-buttons__header--open":I})},n.default.createElement("div",{className:"slippage-buttons__header-text"},S("swapsAdvancedOptions")),I?n.default.createElement("i",{className:"fa fa-angle-up"}):n.default.createElement("i",{className:"fa fa-angle-down"})),n.default.createElement("div",{className:"slippage-buttons__content"},I&&n.default.createElement(n.default.Fragment,null,!h&&n.default.createElement("div",{className:"slippage-buttons__dropdown-content"},n.default.createElement("div",{className:"slippage-buttons__buttons-prefix"},n.default.createElement("div",{className:"slippage-buttons__prefix-text"},S("swapsMaxSlippage")),n.default.createElement(u.default,{position:"top",contentText:S("swapSlippageTooltip")})),n.default.createElement(i.default,{defaultActiveButtonIndex:2!==w||v?w:1,variant:"radiogroup",newActiveButtonIndex:w,className:(0,o.default)("button-group","slippage-buttons__button-group")},n.default.createElement(l.default,{onClick:()=>{y(""),b(!1),k(0),e(f.Slippage.default)}},S("swapSlippagePercent",[f.Slippage.default])),n.default.createElement(l.default,{onClick:()=>{y(""),b(!1),k(1),e(f.Slippage.high)}},S("swapSlippagePercent",[f.Slippage.high])),n.default.createElement(l.default,{className:(0,o.default)("slippage-buttons__button-group-custom-button",{"radio-button--danger":x}),onClick:()=>{k(2),b(!0)}},C?n.default.createElement("div",{className:(0,o.default)("slippage-buttons__custom-input",{"slippage-buttons__custom-input--danger":x})},n.default.createElement("input",{"data-testid":"slippage-buttons__custom-slippage",onChange:t=>{const{value:a}=t.target;!isNaN(Number(a))&&(y(a),e(Number(a)))},type:"text",maxLength:"4",ref:N,onBlur:()=>{b(!1)},value:v||""})):P,(v||C)&&n.default.createElement("div",{className:"slippage-buttons__percentage-suffix"},"%")))),r&&n.default.createElement(d.default,{marginTop:2,display:p.Display.Flex},n.default.createElement(d.default,{display:p.Display.Flex,alignItems:p.AlignItems.center,paddingRight:3},n.default.createElement(g.Text,{variant:p.TextVariant.bodySm,as:"h6",paddingRight:2,fontWeight:p.FontWeight.Bold},S("smartSwap")),_?n.default.createElement(u.default,{position:"top",contentText:(0,m.getTranslatedStxErrorMessage)(_,S)}):n.default.createElement(u.default,{position:"top",contentText:S("stxTooltip")})),n.default.createElement(c.default,{value:E,onToggle:e=>{T(!e,e)},offLabel:S("off"),onLabel:S("on"),disabled:Boolean(_)}))),x&&n.default.createElement("div",{className:"slippage-buttons__error-text"},x)))}_.propTypes={onSelect:r.default.func.isRequired,maxAllowedSlippage:r.default.number.isRequired,currentSlippage:r.default.number,smartTransactionsEnabled:r.default.bool.isRequired,smartTransactionsOptInStatus:r.default.bool,setSmartTransactionsOptInStatus:r.default.func,currentSmartTransactionsError:r.default.string,isDirectWrappingEnabled:r.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/slippage-buttons/slippage-buttons.js"}],[5449,{react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"15",height:"13",viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M14.4946 6.14779C14.4863 5.93594 14.3991 5.69108 14.2539 5.53666L9.51334 0.49958C9.1921 0.21091 8.57613 0.0917437 8.21709 0.425509C7.86344 0.754237 7.87396 1.39178 8.22627 1.72181L11.5595 5.25889L1.1618 5.25889C0.670919 5.25889 0.272949 5.65687 0.272949 6.14779C0.272949 6.6387 0.670919 7.03668 1.1618 7.03668L11.5595 7.03668L8.22627 10.5738C7.92297 10.8776 7.86691 11.5376 8.21709 11.8701C8.56718 12.2025 9.20529 12.0963 9.51334 11.796L14.2539 6.75891C14.4161 6.58653 14.4952 6.38428 14.4946 6.14779Z",fill:"#D6D9DC"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/arrow-icon.js"}],[5450,{react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"41",height:"39",viewBox:"0 0 41 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.5805 6.55143C36.1394 8.11033 37.3994 9.91222 38.3237 11.8681C38.7066 12.6782 39.0318 13.5148 39.2968 14.3714L39.3242 14.4606C39.4816 14.9785 39.6171 15.5037 39.73 16.0347C40.6511 20.3654 40.0335 24.9029 37.9511 28.8509C35.6001 33.308 31.5749 36.6487 26.7609 38.138C24.3773 38.8754 21.8717 39.1361 19.3873 38.9052C16.9029 38.6743 14.4883 37.9563 12.2813 36.7922C10.2608 35.7264 8.52045 34.3588 7.08333 32.7636C5.61245 31.1448 4.43054 29.2824 3.59178 27.2574C3.32329 26.6092 2.89685 25.2767 2.89685 25.2767H6.89583C7.68667 27.4068 8.96033 29.362 10.6288 30.9609L10.6318 30.96C11.5096 31.8005 12.501 32.5516 13.595 33.1786C15.8742 34.483 18.4736 35.1864 21.1455 35.1864C25.1768 35.1864 29.0429 33.585 31.8935 30.7345C34.744 27.8839 36.3455 24.0177 36.3455 19.9865C36.3455 18.7267 36.1891 17.483 35.8871 16.2814C35.8206 16.017 35.7471 15.7546 35.6666 15.4945C34.4752 11.6432 31.8027 8.42306 28.237 6.54231C24.6713 4.66156 20.5045 4.27429 16.6533 5.46571C12.8837 6.63189 9.71868 9.21706 7.82253 12.6699L12.8961 15.307L3.28331 18.3447L0.245605 8.73191L4.45005 10.9171C6.81537 6.56278 10.7905 3.30177 15.5303 1.83546C17.3658 1.26761 19.2587 0.986653 21.1455 0.986694C26.1846 0.986694 31.0173 2.98824 34.5805 6.55143Z",fill:"var(--color-primary-default)"}),r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1252 22.1036L14.7107 18.689L12.0926 21.3257L18.1252 27.3584L30.2322 15.2515L27.614 12.6148L18.1252 22.1036Z",fill:"var(--color-primary-default)"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/canceled-icon.js"}],[5451,{"./smart-transaction-status":5453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./smart-transaction-status"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/index.js"}],[5452,{react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"41",height:"39",viewBox:"0 0 41 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.6806 6.55143C36.2395 8.11033 37.4995 9.91222 38.4238 11.8681C38.8067 12.6782 39.1319 13.5148 39.3969 14.3714L39.4243 14.4606C39.5817 14.9785 39.7172 15.5037 39.8301 16.0347C40.7512 20.3654 40.1336 24.9029 38.0512 28.8509C35.7002 33.308 31.675 36.6487 26.861 38.138C24.4773 38.8754 21.9718 39.1361 19.4874 38.9052C17.003 38.6743 14.5884 37.9563 12.3814 36.7922C10.3609 35.7264 8.62055 34.3588 7.18343 32.7636C5.71254 31.1448 4.53064 29.2824 3.69188 27.2574C3.42339 26.6092 2.99695 25.2767 2.99695 25.2767H6.99592C7.78677 27.4068 9.06042 29.362 10.7289 30.9609L10.7319 30.96C11.6097 31.8005 12.6011 32.5516 13.6951 33.1786C15.9743 34.483 18.5737 35.1864 21.2456 35.1864C25.2769 35.1864 29.143 33.585 31.9936 30.7345C34.8441 27.8839 36.4456 24.0177 36.4456 19.9865C36.4456 18.7267 36.2892 17.483 35.9872 16.2814C35.9207 16.017 35.8471 15.7546 35.7667 15.4945C34.5753 11.6432 31.9028 8.42306 28.3371 6.54231C24.7714 4.66156 20.6046 4.27429 16.7534 5.46571C12.9838 6.63189 9.81878 9.21706 7.92263 12.6699L12.9962 15.307L3.3834 18.3447L0.345703 8.73191L4.55015 10.9171C6.91547 6.56278 10.8906 3.30177 15.6304 1.83546C17.4659 1.26761 19.3588 0.986653 21.2456 0.986694C26.2847 0.986694 31.1174 2.98824 34.6806 6.55143Z",fill:"#D73A49"}),r.default.createElement("path",{d:"M18.5849 19.9869L15.1454 23.4264L17.9845 26.2655L21.424 22.826L24.8635 26.2655L27.7026 23.4264L24.2631 19.9869L27.7026 16.5473L24.8635 13.7082L21.424 17.1478L17.9845 13.7082L15.1454 16.5473L18.5849 19.9869Z",fill:"#D73A49"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/reverted-icon.js"}],[5453,{"../../../../shared/constants/metametrics":4353,"../../../../shared/constants/swaps":4361,"../../../../shared/constants/transaction":4366,"../../../../shared/lib/transactions-controller-utils":4374,"../../../components/component-library":4822,"../../../components/ui/box":4931,"../../../components/ui/url-icon":5066,"../../../contexts/i18n":5069,"../../../contexts/metametrics":5070,"../../../ducks/metamask/metamask":5084,"../../../ducks/swaps/swaps":5088,"../../../helpers/constants/design-system":5092,"../../../helpers/constants/routes":5097,"../../../selectors":5478,"../../../store/actions":5486,"../create-new-swap":5407,"../swaps-footer":5458,"../swaps.util":5460,"../view-on-block-explorer":5462,"./arrow-icon":5449,"./canceled-icon":5450,"./reverted-icon":5452,"./success-icon":5454,"./timer-icon":5455,"./unknown-icon":5456,"@metamask/etherscan-link":1273,lodash:3676,react:4076,"react-redux":4041,"react-router-dom":4061},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e,t,a,M,D,R,L,F,j,U,G;const[W,B]=(0,n.useState)(!1),q=(0,n.useContext)(l.I18nContext),H=(0,o.useHistory)(),V=(0,r.useDispatch)(),$=(0,r.useSelector)(u.getFetchParams,i.isEqual)||{},{destinationTokenInfo:K={},sourceTokenInfo:Q={}}=(null==$?void 0:$.metaData)||{},Y=(0,r.useSelector)(c.isHardwareWallet),X=(0,r.useSelector)(c.getHardwareWalletType),Z=(0,r.useSelector)(u.getSelectedQuote,i.isEqual),z=(0,r.useSelector)(u.getTopQuote,i.isEqual),J=Z||z,ee=(0,r.useSelector)(u.getCurrentSmartTransactions,i.isEqual),te=(0,r.useSelector)(u.getSmartTransactionsOptInStatus),ae=(0,r.useSelector)(c.getCurrentChainId),ne=(0,r.useSelector)(c.getRpcPrefsForCurrentProvider,r.shallowEqual),re=(0,r.useSelector)(u.getSwapsNetworkConfig,r.shallowEqual),oe=(0,r.useSelector)(u.getSmartTransactionsEnabled),se=(0,r.useSelector)(u.getCurrentSmartTransactionsEnabled),ie=ne.blockExplorerUrl??d.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[ae]??null,le=(0,r.useSelector)(p.getNativeCurrency),ue=(0,r.useSelector)(c.conversionRateSelector),ce=(0,r.useSelector)(c.getUSDConversionRate),de=(0,r.useSelector)(c.getCurrentCurrency);let pe,me,fe=S.SmartTransactionStatus.pending,ge={};if(ee&&ee.length>0){var Ee,Te,_e,he;ge=ee[ee.length-1],pe=null===(Ee=ge)||void 0===Ee?void 0:Ee.uuid,fe=(null===(Te=ge)||void 0===Te?void 0:Te.status)||S.SmartTransactionStatus.pending,me=null===(_e=ge)||void 0===_e||null===(he=_e.statusMetadata)||void 0===he?void 0:he.cancellationFeeWei}const[Se,ve]=(0,n.useState)(re.stxStatusDeadline),ye={needs_two_confirmations:!0,token_from:Q.symbol??(null===(e=ge)||void 0===e?void 0:e.sourceTokenSymbol),token_from_amount:(null==$?void 0:$.value)??(null===(t=ge)||void 0===t?void 0:t.swapTokenValue),token_to:K.symbol??(null===(a=ge)||void 0===a?void 0:a.destinationTokenSymbol),request_type:null!=$&&$.balanceError?"Quote":"Order",slippage:null==$?void 0:$.slippage,custom_slippage:2===(null==$?void 0:$.slippage),is_hardware_wallet:Y,hardware_wallet_type:X,stx_enabled:oe,current_stx_enabled:se,stx_user_opt_in:te};let Ce;var be;null!=J&&J.destinationAmount&&(Ce=(0,k.calcTokenAmount)(null==J?void 0:J.destinationAmount,K.decimals??(null===(be=ge)||void 0===be?void 0:be.destinationTokenDecimals)).toPrecision(8));const we=(0,n.useContext)(C.MetaMetricsContext),ke=fe===S.SmartTransactionStatus.pending,Ie=ke||fe===S.SmartTransactionStatus.success,Ae=null===(M=ge)||void 0===M||null===(D=M.statusMetadata)||void 0===D?void 0:D.minedHash;(0,n.useEffect)((()=>{we({event:"STX Status Page Loaded",category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:ye})}),[]),(0,n.useEffect)((()=>{let e;if(ke&&pe){const t=()=>{const t=Math.round((Date.now()-ge.time)/1e3);if(t>re.stxStatusDeadline)return ve(0),void clearInterval(e);ve(re.stxStatusDeadline-t)};e=setInterval(t,1e3),t()}return()=>clearInterval(e)}),[V,ke,pe,ge.time,re.stxStatusDeadline]),(0,n.useEffect)((()=>{V((0,_.setBackgroundSwapRouteState)("smartTransactionStatus")),setTimeout((()=>{V((0,_.stopPollingForQuotes)())}),1e3)}),[V]);let Oe,Ne,xe,Pe,Me=q("stxPendingPrivatelySubmittingSwap");ke&&(W?Me=q("stxTryingToCancel"):me>0&&(Me=q("stxPendingPubliclySubmittingSwap")));if(fe===S.SmartTransactionStatus.success){var De,Re;if(Me=q("stxSuccess"),K.symbol||null!==(De=ge)&&void 0!==De&&De.destinationTokenSymbol)Oe=q("stxSuccessDescription",[K.symbol??(null===(Re=ge)||void 0===Re?void 0:Re.destinationTokenSymbol)]);xe=n.default.createElement(I.default,null)}else"cancelled_user_cancelled"===fe||(null===(R=ge)||void 0===R||null===(L=R.statusMetadata)||void 0===L?void 0:L.minedTx)===S.SmartTransactionStatus.cancelled?(Me=q("stxUserCancelled"),Oe=q("stxUserCancelledDescription"),xe=n.default.createElement(O.default,null)):fe.startsWith("cancelled")||fe.includes("deadline_missed")?(Me=q("stxCancelled"),Oe=q("stxCancelledDescription"),Ne=q("stxCancelledSubDescription"),xe=n.default.createElement(O.default,null)):"unknown"===fe?(Me=q("stxUnknown"),Oe=q("stxUnknownDescription"),xe=n.default.createElement(N.default,null)):"reverted"===fe&&(Me=q("stxFailure"),Oe=q("stxFailureDescription",[n.default.createElement("a",{className:"smart-transaction-status__support-link",key:"smart-transaction-status-support-link",href:"https://support.metamask.io",target:"_blank",rel:"noopener noreferrer"},q("customerSupport"))]),xe=n.default.createElement(A.default,null));Ae&&pe&&(Pe=(0,s.getBlockExplorerLink)({hash:Ae,chainId:ae},{blockExplorerUrl:ie}));const Le=ge.cancellable&&!W,Fe=()=>{const{feeInFiat:e}=(0,y.getFeeForSmartTransaction)({chainId:ae,currentCurrency:de,conversionRate:ue,USDConversionRate:ce,nativeCurrencySymbol:le,feeInWeiDec:me||0});return n.default.createElement(g.default,{marginBottom:0},n.default.createElement("a",{className:"smart-transaction-status__cancel-swap-link",href:"#",onClick:e=>{null==e||e.preventDefault(),B(!0),we({event:"Cancel STX",category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:ye}),V((0,u.cancelSwapsSmartTransaction)(pe))}},q("attemptToCancelSwap",[e])))};return n.default.createElement("div",{className:"smart-transaction-status"},n.default.createElement(g.default,{paddingLeft:8,paddingRight:8,height:T.BLOCK_SIZES.FULL,justifyContent:T.JustifyContent.flexStart,display:T.DISPLAY.FLEX,className:"smart-transaction-status__content"},n.default.createElement(g.default,{marginTop:10,marginBottom:0,display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.center,alignItems:T.AlignItems.center},n.default.createElement(f.Text,{color:T.TextColor.textAlternative,variant:T.TextVariant.bodySm,as:"h6"},`${(null==$?void 0:$.value)&&Number($.value).toFixed(5)} `),n.default.createElement(f.Text,{color:T.TextColor.textAlternative,variant:T.TextVariant.bodySmBold,as:"h6",marginLeft:1,marginRight:2},Q.symbol??(null===(F=ge)||void 0===F?void 0:F.sourceTokenSymbol)),Q.iconUrl?n.default.createElement(E.default,{url:Q.iconUrl,className:"main-quote-summary__icon",name:Q.symbol??(null===(j=ge)||void 0===j?void 0:j.destinationTokenSymbol),fallbackClassName:"main-quote-summary__icon-fallback"}):null,n.default.createElement(g.default,{display:T.DISPLAY.BLOCK,marginLeft:2,marginRight:2},n.default.createElement(x.default,null)),K.iconUrl?n.default.createElement(E.default,{url:K.iconUrl,className:"main-quote-summary__icon",name:K.symbol??(null===(U=ge)||void 0===U?void 0:U.destinationTokenSymbol),fallbackClassName:"main-quote-summary__icon-fallback"}):null,n.default.createElement(f.Text,{color:T.TextColor.textAlternative,variant:T.TextVariant.bodySm,as:"h6",marginLeft:2},`~${Ce&&Number(Ce).toFixed(5)} `),n.default.createElement(f.Text,{color:T.TextColor.textAlternative,variant:T.TextVariant.bodySmBold,as:"h6",marginLeft:1},K.symbol??(null===(G=ge)||void 0===G?void 0:G.destinationTokenSymbol))),n.default.createElement(g.default,{marginTop:3,className:"smart-transaction-status__background-animation smart-transaction-status__background-animation--top"}),xe&&n.default.createElement(g.default,{marginTop:3,marginBottom:2},xe),ke&&n.default.createElement(g.default,{marginTop:7,marginBottom:1,display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.center,alignItems:T.AlignItems.center},n.default.createElement(P.default,null),n.default.createElement(f.Text,{color:T.TextColor.textAlternative,variant:T.TextVariant.bodySm,as:"h6",marginLeft:1},`${q("stxSwapCompleteIn")} `),n.default.createElement(f.Text,{color:T.TextColor.textAlternative,variant:T.TextVariant.bodySmBold,as:"h6",marginLeft:1,className:"smart-transaction-status__remaining-time"},(0,y.showRemainingTimeInMinAndSec)(Se))),n.default.createElement(f.Text,{color:T.TextColor.textDefault,variant:T.TextVariant.headingSm,as:"h4",fontWeight:T.FontWeight.Bold},Me),ke&&n.default.createElement("div",{className:"smart-transaction-status__loading-bar-container"},n.default.createElement("div",{className:"smart-transaction-status__loading-bar",style:{width:100/re.stxStatusDeadline*(re.stxStatusDeadline-Se)+"%"}})),Oe&&n.default.createElement(f.Text,{variant:T.TextVariant.bodySm,as:"h6",marginTop:Pe&&1,color:T.TextColor.textAlternative},Oe),Pe&&n.default.createElement(w.default,{blockExplorerUrl:Pe,sensitiveTrackingProperties:ye}),n.default.createElement(g.default,{marginTop:3,className:"smart-transaction-status__background-animation smart-transaction-status__background-animation--bottom"}),Ne&&n.default.createElement(f.Text,{variant:T.TextVariant.bodySm,as:"h6",marginTop:8,color:T.TextColor.textAlternative},Ne)),Le&&pe&&ke&&n.default.createElement(Fe,null),fe===S.SmartTransactionStatus.success?n.default.createElement(b.default,{sensitiveTrackingProperties:ye}):null,n.default.createElement(v.default,{onSubmit:async()=>{Ie?(await V((0,u.prepareToLeaveSwaps)()),H.push(m.DEFAULT_ROUTE)):H.push(m.BUILD_QUOTE_ROUTE)},onCancel:async()=>{await V((0,u.prepareToLeaveSwaps)()),H.push(m.DEFAULT_ROUTE)},submitText:q(Ie?"close":"tryAgain"),hideCancel:Ie,cancelText:q("close"),className:"smart-transaction-status__swaps-footer"}))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=D(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("@metamask/etherscan-link"),i=e("lodash"),l=e("../../../contexts/i18n"),u=e("../../../ducks/swaps/swaps"),c=e("../../../selectors"),d=e("../../../../shared/constants/swaps"),p=e("../../../ducks/metamask/metamask"),m=e("../../../helpers/constants/routes"),f=e("../../../components/component-library"),g=M(e("../../../components/ui/box")),E=M(e("../../../components/ui/url-icon")),T=e("../../../helpers/constants/design-system"),_=e("../../../store/actions"),h=e("../../../../shared/constants/metametrics"),S=e("../../../../shared/constants/transaction"),v=M(e("../swaps-footer")),y=e("../swaps.util"),C=e("../../../contexts/metametrics"),b=M(e("../create-new-swap")),w=M(e("../view-on-block-explorer")),k=e("../../../../shared/lib/transactions-controller-utils"),I=M(e("./success-icon")),A=M(e("./reverted-icon")),O=M(e("./canceled-icon")),N=M(e("./unknown-icon")),x=M(e("./arrow-icon")),P=M(e("./timer-icon"));function M(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(D=function(e){return e?a:t})(e)}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/smart-transaction-status.js"}],[5454,{react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.5457 19.8983C34.5457 23.9296 32.9443 27.7958 30.0937 30.6463C27.2432 33.4969 23.377 35.0983 19.3457 35.0983C15.3144 35.0983 11.4482 33.4969 8.59768 30.6463C5.74713 27.7958 4.1457 23.9296 4.1457 19.8983C4.1457 15.867 5.74713 12.0008 8.59768 9.15029C11.4482 6.29974 15.3144 4.69832 19.3457 4.69832C20.7897 4.69832 22.1957 4.90732 23.5257 5.28732L26.5087 2.30432C24.3047 1.39232 21.8917 0.898315 19.3457 0.898315C16.8506 0.898315 14.3799 1.38977 12.0747 2.3446C9.76953 3.29944 7.67499 4.69897 5.91067 6.46329C2.34748 10.0265 0.345703 14.8592 0.345703 19.8983C0.345703 24.9374 2.34748 29.7702 5.91067 33.3333C7.67499 35.0977 9.76953 36.4972 12.0747 37.452C14.3799 38.4069 16.8506 38.8983 19.3457 38.8983C24.3848 38.8983 29.2175 36.8965 32.7807 33.3333C36.3439 29.7702 38.3457 24.9374 38.3457 19.8983H34.5457ZM11.5747 16.2503L8.8957 18.9483L17.4457 27.4983L36.4457 8.49832L33.7667 5.80032L17.4457 22.1213L11.5747 16.2503Z",fill:"#28A745"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/success-icon.js"}],[5455,{react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M7.36621 0.0810547C3.62012 0.0810547 0.584961 3.11621 0.584961 6.8623C0.584961 10.6084 3.62012 13.6436 7.36621 13.6436C11.1123 13.6436 14.1475 10.6084 14.1475 6.8623C14.1475 3.11621 11.1123 0.0810547 7.36621 0.0810547ZM7.36621 12.3311C4.33105 12.3311 1.89746 9.89746 1.89746 6.8623C1.89746 3.85449 4.33105 1.39355 7.36621 1.39355C10.374 1.39355 12.835 3.85449 12.835 6.8623C12.835 9.89746 10.374 12.3311 7.36621 12.3311ZM9.03418 9.4873C9.19824 9.59668 9.38965 9.56934 9.49902 9.40527L10.0186 8.72168C10.1279 8.55762 10.1006 8.36621 9.93652 8.25684L8.13184 6.91699V3.03418C8.13184 2.87012 7.96777 2.70605 7.80371 2.70605H6.92871C6.7373 2.70605 6.60059 2.87012 6.60059 3.03418V7.5459C6.60059 7.62793 6.62793 7.7373 6.70996 7.79199L9.03418 9.4873Z",fill:"var(--color-primary-default)"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/timer-icon.js"}],[5456,{react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("circle",{cx:"19.1533",cy:"19.2715",r:"17.1",stroke:"var(--color-primary-default)",strokeWidth:"3.8"}),r.default.createElement("path",{d:"M16.712 21.5034C16.712 20.7834 16.88 20.1834 17.216 19.7034C17.568 19.2074 18.08 18.7274 18.752 18.2634C19.008 18.0874 19.264 17.9274 19.52 17.7834C19.776 17.6394 20 17.4874 20.192 17.3274C20.4 17.1514 20.56 16.9674 20.672 16.7754C20.8 16.5674 20.864 16.3194 20.864 16.0314C20.864 15.5354 20.688 15.1594 20.336 14.9034C20 14.6474 19.592 14.5194 19.112 14.5194C18.616 14.5194 18.16 14.6794 17.744 14.9994C17.344 15.3034 17.144 15.7674 17.144 16.3914H13.52C13.52 15.6394 13.664 14.9354 13.952 14.2794C14.24 13.6074 14.632 13.0314 15.128 12.5514C15.64 12.0554 16.232 11.6634 16.904 11.3754C17.592 11.0874 18.328 10.9434 19.112 10.9434C19.896 10.9434 20.616 11.0794 21.272 11.3514C21.944 11.6234 22.512 11.9834 22.976 12.4314C23.456 12.8794 23.824 13.3994 24.08 13.9914C24.352 14.5674 24.488 15.1754 24.488 15.8154C24.488 16.2314 24.456 16.6234 24.392 16.9914C24.344 17.3594 24.24 17.7114 24.08 18.0474C23.936 18.3834 23.728 18.7114 23.456 19.0314C23.184 19.3514 22.84 19.6634 22.424 19.9674C21.784 20.4474 21.272 20.8234 20.888 21.0954C20.52 21.3674 20.336 21.6474 20.336 21.9354V21.9594H16.712V21.5034ZM18.512 28.4634C18.16 28.4634 17.824 28.3994 17.504 28.2714C17.2 28.1274 16.928 27.9434 16.688 27.7194C16.464 27.4794 16.28 27.2074 16.136 26.9034C16.008 26.5834 15.944 26.2474 15.944 25.8954C15.944 25.5434 16.008 25.2154 16.136 24.9114C16.28 24.5914 16.464 24.3194 16.688 24.0954C16.928 23.8554 17.2 23.6714 17.504 23.5434C17.824 23.3994 18.16 23.3274 18.512 23.3274C18.864 23.3274 19.192 23.3994 19.496 23.5434C19.816 23.6714 20.088 23.8554 20.312 24.0954C20.552 24.3194 20.736 24.5914 20.864 24.9114C21.008 25.2154 21.08 25.5434 21.08 25.8954C21.08 26.2474 21.008 26.5834 20.864 26.9034C20.736 27.2074 20.552 27.4794 20.312 27.7194C20.088 27.9434 19.816 28.1274 19.496 28.2714C19.192 28.3994 18.864 28.4634 18.512 28.4634Z",fill:"var(--color-primary-default)"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/unknown-icon.js"}],[5457,{"../../../../shared/constants/swaps":4361,"../../../components/component-library":4822,"../../../components/component-library/banner-alert":4784,"../../../components/ui/box":4931,"../../../contexts/i18n":5069,"../../../ducks/swaps/swaps":5088,"../../../helpers/constants/design-system":5092,"prop-types":3823,react:4076,"react-redux":4041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=m(e("prop-types")),s=e("../../../contexts/i18n"),i=e("../../../components/component-library/banner-alert"),l=m(e("../../../components/ui/box")),u=e("../../../helpers/constants/design-system"),c=e("../../../components/component-library"),d=e("../../../../shared/constants/swaps"),p=e("../../../ducks/swaps/swaps");function m(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function g({swapsErrorKey:e,showTransactionSettingsLink:t,currentSlippage:a}){const o=(0,n.useContext)(s.I18nContext),m=(0,r.useDispatch)();let f,g,E=u.SEVERITIES.DANGER;const T=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd},n.default.createElement(c.ButtonLink,{onClick:e=>{e.preventDefault(),m((0,p.setTransactionSettingsOpened)(!0))},size:c.ButtonLinkSize.Inherit},o("swapAdjustSlippage")));switch(e){case d.SLIPPAGE_VERY_HIGH_ERROR:f=o("swapSlippageOverLimitTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapSlippageOverLimitDescription")),T);break;case d.SLIPPAGE_HIGH_ERROR:E=u.SEVERITIES.WARNING,f=o("swapSlippageHighTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapSlippageHighDescription",[a])),t&&T);break;case d.SLIPPAGE_LOW_ERROR:E=u.SEVERITIES.WARNING,f=o("swapSlippageLowTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapSlippageLowDescription",[a])),t&&T);break;case d.SLIPPAGE_NEGATIVE_ERROR:f=o("swapSlippageNegativeTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapSlippageNegativeDescription")),T);break;case d.QUOTES_NOT_AVAILABLE_ERROR:f=o("swapQuotesNotAvailableErrorTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapQuotesNotAvailableDescription")),n.default.createElement(c.ButtonLink,{size:c.ButtonLinkSize.Inherit,textProps:{variant:u.TextVariant.bodyMd,alignItems:u.AlignItems.flexStart},as:"a",href:"https://support.metamask.io/hc/en-us/articles/4405093054363-User-Guide-Swaps",target:"_blank",rel:"noopener noreferrer"},o("swapLearnMore")));break;case d.ERROR_FETCHING_QUOTES:f=o("swapFetchingQuotesErrorTitle"),g=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapFetchingQuotesErrorDescription"));break;case d.CONTRACT_DATA_DISABLED_ERROR:f=o("swapContractDataDisabledErrorTitle"),g=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapContractDataDisabledErrorDescription"));break;case d.QUOTES_EXPIRED_ERROR:f=o("swapQuotesExpiredErrorTitle"),g=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapQuotesExpiredErrorDescription"));break;case d.OFFLINE_FOR_MAINTENANCE:f=o("offlineForMaintenance"),g=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("metamaskSwapsOfflineDescription"));break;case d.SWAP_FAILED_ERROR:f=o("swapFailedErrorTitle")}return n.default.createElement(i.BannerAlert,{severity:E,title:f,titleProps:{"data-testid":"swaps-banner-title"}},g)}g.propTypes={swapsErrorKey:o.default.string,showTransactionSettingsLink:o.default.bool,currentSlippage:o.default.number}}}},{package:"$root$",file:"ui/pages/swaps/swaps-banner-alert/swaps-banner-alert.js"}],[5458,{"./swaps-footer":5459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./swaps-footer"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/swaps-footer/index.js"}],[5459,{"../../../components/ui/page-container/page-container-footer":5015,"../../../contexts/i18n":5069,classnames:2582,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=l(e("prop-types")),o=l(e("classnames")),s=e("../../../contexts/i18n"),i=l(e("../../../components/ui/page-container/page-container-footer"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function c({onCancel:e,hideCancel:t,onSubmit:a,submitText:r,disabled:l,showTermsOfService:u,showTopBorder:c,className:d="",cancelText:p}){const m=(0,n.useContext)(s.I18nContext);return n.default.createElement("div",{className:"swaps-footer"},n.default.createElement("div",{className:(0,o.default)("swaps-footer__buttons",d,{"swaps-footer__buttons--border":c})},n.default.createElement(i.default,{onCancel:e,hideCancel:t,cancelText:p||m("back"),onSubmit:a,submitText:r,footerClassName:(0,o.default)("swaps-footer__custom-page-container-footer-class",d),footerButtonClassName:(0,o.default)("swaps-footer__custom-page-container-footer-button-class",{"swaps-footer__custom-page-container-footer-button-class--single":t}),disabled:l})),u&&n.default.createElement("div",{className:"swaps-footer__bottom-text",onClick:()=>global.platform.openTab({url:"https://metamask.io/terms.html"})},m("termsOfService")))}c.propTypes={onCancel:r.default.func,hideCancel:r.default.bool,onSubmit:r.default.func,submitText:r.default.string,disabled:r.default.bool,showTermsOfService:r.default.bool,showTopBorder:r.default.bool,className:r.default.string,cancelText:r.default.string}}}},{package:"$root$",file:"ui/pages/swaps/swaps-footer/swaps-footer.js"}],[5460,{"../../../shared/constants/common":4348,"../../../shared/constants/network":4354,"../../../shared/constants/swaps":4361,"../../../shared/lib/fetch-with-cache":4368,"../../../shared/lib/swaps-utils":4371,"../../../shared/lib/transactions-controller-utils":4374,"../../../shared/modules/conversion.utils":4380,"../../../shared/modules/hexstring-utils":4384,"../../../shared/modules/swaps.utils":4394,"../../helpers/utils/confirm-tx.util":5115,"bignumber.js":2428},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.countDecimals=a.StxErrorTypes=void 0,a.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),a=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:g},functionName:"fetchAggregatorMetadata"}),n={};for(const e in a)(0,p.validateData)(S,a[e],t)&&(n[e]=a[e]);return n},a.fetchSwapsFeatureFlags=async function(){const e=o.SWAPS_API_V2_BASE_URL;return await(0,u.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},a.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),a=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,p.validateData)(y,a,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:n,ProposeGasPrice:r,FastGasPrice:o}=a;return{safeLow:n,average:r,fast:o}},a.fetchToken=async function(e,t){const a=(0,p.getBaseApi)("token",t);return await(0,u.default)({url:`${a}?address=${e}`,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:g},functionName:"fetchToken"})},a.fetchTokenPrice=async function(e){var t;const a=`contract_addresses=${e}&vs_currencies=eth`,n=await(0,u.default)({url:`https://api.coingecko.com/api/v3/simple/token_price/ethereum?${a}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==n||null===(t=n[e])||void 0===t?void 0:t.eth},a.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),a=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:g},functionName:"fetchTokens"});return[o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...a.filter((a=>(0,p.validateData)(_,a,t,false)&&!((0,s.isSwapsDefaultTokenSymbol)(a.symbol,e)||(0,s.isSwapsDefaultTokenAddress)(a.address,e))))]},a.fetchTopAssets=async function(e){const t=(0,p.getBaseApi)("topAssets",e),a=await(0,u.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:g}})||[];return a.reduce(((e,a,n)=>(0,p.validateData)(h,a,t)?{...e,[a.address]:{index:String(n)}}:e),{})},a.formatSwapsValueForDisplay=w,a.getNetworkNameByChainId=a.getFeeForSmartTransaction=a.getClassNameForCharLength=void 0,a.getRenderableNetworkFeesForQuote=b,a.parseSmartTransactionsError=a.isContractAddressValid=a.getTranslatedStxErrorMessage=a.getSwapsLivenessForNetwork=void 0,a.quotesToRenderableData=function({quotes:e,gasPrice:t,conversionRate:a,currentCurrency:n,approveGas:o,tokenConversionRates:i,chainId:l,smartTransactionEstimatedGas:u,nativeCurrencySymbol:c,multiLayerL1ApprovalFeeTotal:p}){return Object.values(e).map((e=>{const{destinationAmount:f=0,sourceAmount:g=0,sourceTokenInfo:E,destinationTokenInfo:T,slippage:_,aggType:h,aggregator:S,gasEstimateWithRefund:v,averageGas:y,fee:k,trade:I,multiLayerL1TradeFeeTotal:A}=e;let O=null;null!==A&&null!==p?O=(0,m.sumHexes)(A||"0x0",p||"0x0"):null!==A&&(O=A);const N=(0,d.calcTokenAmount)(g,E.decimals).toString(10),x=(0,d.calcTokenAmount)(f,T.decimals).toPrecision(8);let P=null,M=null,D=null,R=null;({feeInFiat:P,feeInEth:M,rawNetworkFees:D,rawEthFee:R}=b({tradeGas:v||(0,m.decimalToHex)(y||8e5),approveGas:o,gasPrice:t,currentCurrency:n,conversionRate:a,tradeValue:I.value,sourceSymbol:E.symbol,sourceAmount:g,chainId:l,multiLayerL1FeeTotal:O})),u&&({feeInFiat:P,feeInEth:M}=C({chainId:l,currentCurrency:n,conversionRate:a,nativeCurrencySymbol:c,feeInWeiDec:u.feeEstimate}));const L=new r.BigNumber(100-_).div(100),F=new r.BigNumber(x).times(L).toFixed(6),j=i[T.address],U=(0,s.isSwapsDefaultTokenSymbol)(T.symbol,l)?(0,d.calcTokenAmount)(f,T.decimals).minus(R,10):new r.BigNumber(j||0,10).times((0,d.calcTokenAmount)(f,T.decimals),10).minus(R,10);let G,W=_;return"AGG"===h?G="swapAggregator":"RFQ"===h?(G="swapRequestForQuotation",W=0):G="DEX"===h?"swapDecentralizedExchange":"CONTRACT"===h?"swapDirectContract":"swapUnknown",{aggId:S,amountReceiving:`${x} ${T.symbol}`,destinationTokenDecimals:T.decimals,destinationTokenSymbol:T.symbol,destinationTokenValue:w(x),destinationIconUrl:T.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:G,feeInEth:M,detailedNetworkFees:`${M} (${P})`,networkFees:P,quoteSource:h,rawNetworkFees:D,slippage:W,sourceTokenDecimals:E.decimals,sourceTokenSymbol:E.symbol,sourceTokenValue:N,sourceTokenIconUrl:E.iconUrl,ethValueOfTrade:U,minimumAmountReceived:F,metaMaskFee:k}}))},a.showRemainingTimeInMinAndSec=void 0;var n,r=e("bignumber.js"),o=e("../../../shared/constants/swaps"),s=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),l=e("../../helpers/utils/confirm-tx.util"),u=(n=e("../../../shared/lib/fetch-with-cache"))&&n.__esModule?n:{default:n},c=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),m=e("../../../shared/modules/conversion.utils"),f=e("../../../shared/constants/common");const g=3e5,E="usd",T={"X-Client-Id":o.SWAPS_CLIENT_ID},_=[{property:"address",type:"string",validator:e=>(0,c.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],h=_.slice(0,2),S=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],v=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),y=[{property:"SafeGasPrice",type:"string",validator:v},{property:"ProposeGasPrice",type:"string",validator:v},{property:"FastGasPrice",type:"string",validator:v}];const C=({chainId:e,currentCurrency:t,conversionRate:a,USDConversionRate:n,nativeCurrencySymbol:r,feeInWeiDec:s})=>{var i;const u=(0,m.decimalToHex)(s),c=(0,m.getValueFromWeiHex)({value:u,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),d=(0,m.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:a,numberOfDecimals:2});let p;p=t===E?d:(0,m.getValueFromWeiHex)({value:u,toCurrency:E,conversionRate:n,numberOfDecimals:2});return{feeInUsd:p,feeInFiat:(0,l.formatCurrency)(d,t),feeInEth:`${c} ${r||(null===(i=o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:c}};function b({tradeGas:e,approveGas:t,gasPrice:a,currentCurrency:n,conversionRate:i,USDConversionRate:u,tradeValue:c,sourceSymbol:p,sourceAmount:g,chainId:T,nativeCurrencySymbol:_,multiLayerL1FeeTotal:h}){const S=new r.BigNumber(e||"0x0",16).plus(t||"0x0",16).toString(16);let v=(0,d.calcGasTotal)(S,a);null!==h&&(v=(0,m.sumHexes)(v||"0x0",h||"0x0"));const y=new r.BigNumber(c,16).minus((0,s.isSwapsDefaultTokenSymbol)(p,T)?g:0,10).toString(16),C=new r.BigNumber(v,16).plus(y,16).toString(16),b=(0,m.getValueFromWeiHex)({value:C,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),w=(0,m.getValueFromWeiHex)({value:C,toCurrency:n,conversionRate:i,numberOfDecimals:2}),k=(0,l.formatCurrency)(w,n);let I;I=n===E?w:(0,m.getValueFromWeiHex)({value:C,toCurrency:E,conversionRate:u,numberOfDecimals:2});return{rawNetworkFees:w,feeInUsd:I,rawEthFee:b,feeInFiat:k,feeInEth:`${b} ${_||o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[T].symbol}`,nonGasFee:y}}function w(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,d.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new r.BigNumber(t).toFixed()),t}a.getFeeForSmartTransaction=C;a.getClassNameForCharLength=(e,t)=>{let a;return a=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${a}`};a.isContractAddressValid=(e,t)=>!(!e||!o.ALLOWED_CONTRACT_ADDRESSES[t])&&o.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const k=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return o.ETHEREUM;case i.CHAIN_IDS.BSC:return o.BSC;case i.CHAIN_IDS.POLYGON:return o.POLYGON;case i.CHAIN_IDS.GOERLI:return o.GOERLI;case i.CHAIN_IDS.AVALANCHE:return o.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return o.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return o.ARBITRUM;default:return""}};a.getNetworkNameByChainId=k;a.getSwapsLivenessForNetwork=(e,t={})=>{const a=k(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[a])return{swapsFeatureIsLive:!1};return t[a].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[a].fallbackToV1}};a.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};a.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let I=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});a.StxErrorTypes=I;a.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case I.unavailable:case I.regularTxPending:return t("smartSwapsErrorUnavailable");case I.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};a.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[5461,{"../../../../shared/constants/swaps":4361,"../../../components/component-library":4822,"../../../components/ui/box":4931,"../../../components/ui/button":4935,"../../../components/ui/button-group":4933,"../../../components/ui/info-tooltip":4986,"../../../components/ui/toggle-button":5050,"../../../components/ui/typography":5061,"../../../contexts/i18n":5069,"../../../ducks/swaps/swaps":5088,"../../../helpers/constants/design-system":5092,"../../../store/actions":5486,"../swaps.util":5460,classnames:2582,"prop-types":3823,react:4076,"react-redux":4041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=S(e("prop-types")),s=S(e("classnames")),i=e("../../../contexts/i18n"),l=S(e("../../../components/ui/button-group")),u=S(e("../../../components/ui/button")),c=S(e("../../../components/ui/info-tooltip")),d=S(e("../../../components/ui/toggle-button")),p=S(e("../../../components/ui/box")),m=S(e("../../../components/ui/typography")),f=e("../../../helpers/constants/design-system"),g=e("../swaps.util"),E=e("../../../../shared/constants/swaps"),T=e("../../../components/component-library"),_=e("../../../store/actions"),h=e("../../../ducks/swaps/swaps");function S(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function y({onSelect:e,onModalClose:t,maxAllowedSlippage:a,currentSlippage:o,smartTransactionsEnabled:S,smartTransactionsOptInStatus:v,setSmartTransactionsOptInStatus:y,currentSmartTransactionsError:C,isDirectWrappingEnabled:b}){const w=(0,n.useContext)(i.I18nContext),k=(0,r.useDispatch)(),I=(0,r.useSelector)(h.getSwapsErrorKey),[A,O]=(0,n.useState)((()=>"number"!=typeof o||Object.values(E.Slippage).includes(o)?"":o.toString())),[N,x]=(0,n.useState)(!1),[P,M]=(0,n.useState)((()=>o===E.Slippage.high?1:o===E.Slippage.default?0:"number"==typeof o?2:0)),[D,R]=(0,n.useState)(null),[L,F]=(0,n.useState)(o),[j,U]=(0,n.useState)(v),G=L!==o||j!==v;let W="",B="",q=f.SEVERITIES.INFO;A&&(Number(A)<0?(q=f.SEVERITIES.DANGER,W=w("swapSlippageNegativeDescription"),B=w("swapSlippageNegativeTitle"),k((0,_.setSwapsErrorKey)(E.SLIPPAGE_NEGATIVE_ERROR))):Number(A)>0&&Number(A)<=1?(q=f.SEVERITIES.WARNING,W=w("swapSlippageLowDescription",[L]),B=w("swapSlippageLowTitle")):Number(A)>=5&&Number(A)<=a?(q=f.SEVERITIES.WARNING,W=w("swapSlippageHighDescription",[L]),B=w("swapSlippageHighTitle")):Number(A)>a?(q=f.SEVERITIES.DANGER,W=w("swapSlippageOverLimitDescription"),B=w("swapSlippageOverLimitTitle"),k((0,_.setSwapsErrorKey)(E.SLIPPAGE_VERY_HIGH_ERROR))):0===Number(A)?(q=f.SEVERITIES.INFO,W=w("swapSlippageZeroDescription"),B=w("swapSlippageZeroTitle")):I&&k((0,_.setSwapsErrorKey)("")));const H=q===f.SEVERITIES.DANGER,V=A||w("swapCustom");return(0,n.useEffect)((()=>{D&&N&&window.document.activeElement!==D&&D.focus()}),[D,N]),(0,n.useEffect)((()=>{2!==P&&k((0,_.setSwapsErrorKey)(""))}),[k,P]),n.default.createElement(T.Modal,{onClose:t,isOpen:!0,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},n.default.createElement(T.ModalOverlay,null),n.default.createElement(T.ModalContent,null,n.default.createElement(T.ModalHeader,{onClose:t},w("transactionSettings")),n.default.createElement(p.default,{display:f.DISPLAY.FLEX,flexDirection:f.FlexDirection.Column,justifyContent:f.JustifyContent.spaceBetween,alignItems:f.AlignItems.stretch,className:"transaction-settings__content"},n.default.createElement(p.default,{marginTop:7,marginBottom:5},n.default.createElement(n.default.Fragment,null,S&&n.default.createElement(p.default,{marginTop:2,marginBottom:6,display:f.DISPLAY.FLEX,justifyContent:f.JustifyContent.spaceBetween},n.default.createElement(p.default,{display:f.DISPLAY.FLEX,alignItems:f.AlignItems.center,paddingRight:3},n.default.createElement(m.default,{variant:f.TypographyVariant.H6,boxProps:{paddingRight:2}},w("smartSwap")),C?n.default.createElement(c.default,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:(0,g.getTranslatedStxErrorMessage)(C,w)}):n.default.createElement(c.default,{position:"top",contentText:w("stxTooltip"),iconFillColor:"var(--color-icon-muted)"})),n.default.createElement(d.default,{value:j,onToggle:e=>{U(!e,e)},offLabel:w("off"),onLabel:w("on"),disabled:Boolean(C)})),!b&&n.default.createElement(n.default.Fragment,null,n.default.createElement(p.default,{display:f.DISPLAY.FLEX,alignItems:f.AlignItems.center},n.default.createElement(m.default,{variant:f.TypographyVariant.H6,boxProps:{paddingRight:2}},w("swapsMaxSlippage")),C?n.default.createElement(c.default,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:(0,g.getTranslatedStxErrorMessage)(C,w)}):n.default.createElement(c.default,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:w("swapSlippageTooltip")})),n.default.createElement(p.default,{display:f.DISPLAY.FLEX},n.default.createElement(l.default,{defaultActiveButtonIndex:2!==P||A?P:1,variant:"radiogroup",newActiveButtonIndex:P,className:(0,s.default)("button-group","transaction-settings__button-group")},n.default.createElement(u.default,{onClick:()=>{O(""),x(!1),M(0),F(E.Slippage.default)}},w("swapSlippagePercent",[E.Slippage.default])),n.default.createElement(u.default,{onClick:()=>{O(""),x(!1),M(1),F(E.Slippage.high)}},w("swapSlippagePercent",[E.Slippage.high])),n.default.createElement(u.default,{className:(0,s.default)("transaction-settings__button-group-custom-button",{"radio-button--danger":H}),onClick:()=>{M(2),x(!0)}},N?n.default.createElement("div",{className:(0,s.default)("transaction-settings__custom-input",{"transaction-settings__custom-input--danger":H})},n.default.createElement("input",{"data-testid":"transaction-settings-custom-slippage",onChange:e=>{const{value:t}=e.target;!isNaN(Number(t))&&(O(t),F(Number(t)))},type:"text",maxLength:"4",ref:R,onBlur:()=>{x(!1)},onKeyDown:e=>{"Enter"===e.key&&x(!1)},value:A||""})):V,(A||N)&&n.default.createElement("div",{className:"transaction-settings__percentage-suffix"},"%")))))),W&&n.default.createElement(p.default,{marginTop:5},n.default.createElement(T.BannerAlert,{severity:q,title:B,titleProps:{"data-testid":"swaps-banner-title"}},n.default.createElement(m.default,{variant:f.TypographyVariant.H6,testId:"mm-banner-alert-notification-text"},W)))),n.default.createElement(p.default,{marginTop:5},n.default.createElement(T.ButtonPrimary,{onClick:()=>{L!==o&&e(L),j!==v&&y(j),t()},block:!0,disabled:!G,"data-testid":"update-transaction-settings-button"},w("update"))))))}y.propTypes={onSelect:o.default.func.isRequired,onModalClose:o.default.func.isRequired,maxAllowedSlippage:o.default.number.isRequired,currentSlippage:o.default.number,smartTransactionsEnabled:o.default.bool.isRequired,smartTransactionsOptInStatus:o.default.bool,setSmartTransactionsOptInStatus:o.default.func,currentSmartTransactionsError:o.default.string,isDirectWrappingEnabled:o.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/transaction-settings/transaction-settings.js"}],[5462,{"./view-on-block-explorer":5463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./view-on-block-explorer"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/view-on-block-explorer/index.js"}],[5463,{"../../../../shared/constants/metametrics":4353,"../../../components/ui/box":4931,"../../../contexts/i18n":5069,"../../../contexts/metametrics":5070,"../../../helpers/utils/util":5133,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=c(e("prop-types")),o=c(e("../../../components/ui/box")),s=e("../../../contexts/i18n"),i=e("../../../helpers/utils/util"),l=e("../../../contexts/metametrics"),u=e("../../../../shared/constants/metametrics");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p({blockExplorerUrl:e,sensitiveTrackingProperties:t}){const a=(0,n.useContext)(s.I18nContext),r=(0,n.useContext)(l.MetaMetricsContext),c=(0,i.getURLHostName)(e);return n.default.createElement(o.default,{marginTop:6,className:"view-on-block-explorer"},n.default.createElement("button",{onClick:()=>{r({event:u.MetaMetricsEventName.ExternalLinkClicked,category:u.MetaMetricsEventCategory.Swaps,sensitiveProperties:t,properties:{link_type:u.MetaMetricsEventLinkType.TransactionBlockExplorer,location:"Swap Transaction",url_domain:c}}),global.platform.openTab({url:e})}},a("viewOnCustomBlockExplorer",[a("blockExplorerSwapAction"),c])))}p.propTypes={blockExplorerUrl:r.default.string.isRequired,sensitiveTrackingProperties:r.default.object.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/view-on-block-explorer/view-on-block-explorer.js"}],[5464,{"./view-quote":5466},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./view-quote"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/view-quote/index.js"}],[5465,{"../../../../shared/constants/gas":4349,"../../../components/component-library":4822,"../../../components/ui/actionable-message/actionable-message":4927,"../../../components/ui/box":4931,"../../../components/ui/tooltip":5057,"../../../contexts/i18n":5069,"../../../helpers/constants/design-system":5092,classnames:2582,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=m(e("prop-types")),o=m(e("classnames")),s=e("../../../contexts/i18n"),i=m(e("../../../components/ui/actionable-message/actionable-message")),l=m(e("../../../components/ui/tooltip")),u=m(e("../../../components/ui/box")),c=e("../../../helpers/constants/design-system"),d=e("../../../../shared/constants/gas"),p=e("../../../components/component-library");function m(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function g(e){const{usedQuote:t,sourceTokenValue:a,destinationTokenValue:r,onAcknowledgementClick:m,acknowledged:f,priceSlippageFromSource:g,priceSlippageFromDestination:E,priceDifferencePercentage:T,priceSlippageUnknownFiatValue:_}=e,h=(0,n.useContext)(s.I18nContext);let S="",v="",y="",C="";return _?(S=h("swapPriceUnavailableTitle"),v=h("swapPriceUnavailableDescription"),y=d.GasRecommendations.high,C=h("tooltipApproveButton")):(S=h("swapPriceDifferenceTitle",[T]),v=h("swapPriceDifference",[a,t.sourceTokenInfo.symbol,g,r,t.destinationTokenInfo.symbol,E]),y=t.priceSlippage.bucket,C=h("tooltipApproveButton")),n.default.createElement("div",{className:(0,o.default)("view-quote__price-difference-warning-wrapper",y)},n.default.createElement(i.default,{message:n.default.createElement("div",{className:"view-quote__price-difference-warning-contents"},n.default.createElement("div",{className:"view-quote__price-difference-warning-contents-text"},n.default.createElement(u.default,{display:c.DISPLAY.FLEX,justifyContent:c.JustifyContent.spaceBetween,paddingBottom:2},n.default.createElement("div",{className:"view-quote__price-difference-warning-contents-title"},S),n.default.createElement(l.default,{position:"bottom",title:h("swapPriceImpactTooltip")},n.default.createElement(p.Icon,{name:p.IconName.Info}))),v,!f&&n.default.createElement("div",{className:"view-quote__price-difference-warning-contents-actions"},n.default.createElement("button",{onClick:()=>{m()}},C))))}))}g.propTypes={usedQuote:r.default.object,sourceTokenValue:r.default.string,destinationTokenValue:r.default.string,onAcknowledgementClick:r.default.func,acknowledged:r.default.bool,priceSlippageFromSource:r.default.string,priceSlippageFromDestination:r.default.string,priceDifferencePercentage:r.default.number,priceSlippageUnknownFiatValue:r.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/view-quote/view-quote-price-difference.js"}],[5466,{"../../../../app/scripts/lib/util":82,"../../../../shared/constants/gas":4349,"../../../../shared/constants/metametrics":4353,"../../../../shared/constants/swaps":4361,"../../../../shared/lib/metamask-controller-utils":4369,"../../../../shared/lib/swaps-utils":4371,"../../../../shared/lib/transactions-controller-utils":4374,"../../../../shared/modules/conversion.utils":4380,"../../../../shared/modules/string-utils":4393,"../../../../shared/modules/transaction.utils":4395,"../../../components/ui/actionable-message/actionable-message":4927,"../../../components/ui/box":4931,"../../../components/ui/pulse-loader":5022,"../../../contexts/i18n":5069,"../../../contexts/metametrics":5070,"../../../ducks/metamask/metamask":5084,"../../../ducks/swaps/swaps":5088,"../../../helpers/constants/routes":5097,"../../../helpers/utils/optimism/fetchEstimatedL1Fee":5126,"../../../hooks/gasFeeInput/useGasFeeInputs":5139,"../../../hooks/useEqualityCheck":5153,"../../../hooks/useEthFiatAmount":5154,"../../../hooks/usePrevious":5160,"../../../hooks/useTokenTracker":5174,"../../../selectors":5478,"../../../store/actionConstants":5485,"../../../store/actions":5486,"../../confirm-approve/confirm-approve.util":5197,"../countdown-timer":5405,"../fee-card":5415,"../main-quote-summary":5423,"../select-quote-popover":5439,"../swaps-footer":5458,"../swaps.util":5460,"./view-quote-price-difference":5465,"@sentry/browser":1813,"bignumber.js":2428,classnames:2582,lodash:3676,react:4076,"react-redux":4041,"react-router-dom":4061},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e,t,a,V,$,Q;const Y=(0,o.useHistory)(),X=(0,r.useDispatch)(),Z=(0,n.useContext)(c.I18nContext),z=(0,n.useContext)(E.MetaMetricsContext),[J,ee]=(0,n.useState)(!1),[te,ae]=(0,n.useState)(!1),[ne,re]=(0,n.useState)(!1),[oe,se]=(0,n.useState)(!1),[ie,le]=(0,n.useState)(null),[ue,ce]=(0,n.useState)(null),[de,pe]=(0,n.useState)(null),[me]=(0,n.useState)(Date.now()),[fe,ge]=(0,n.useState)(!1),Ee=[N.GasRecommendations.high,N.GasRecommendations.medium],Te=(0,r.useSelector)(_.getBackgroundSwapRouteState),_e=(0,r.useSelector)(_.getQuotes,i.isEqual);(0,n.useEffect)((()=>{Object.values(_e).length?"awaiting"===Te&&Y.push(C.AWAITING_SWAP_ROUTE):Y.push(C.BUILD_QUOTE_ROUTE)}),[Y,_e,Te]);const he=(0,r.useSelector)(_.getQuotesLastFetched),Se=(0,r.useSelector)(_.getUsedSwapsGasPrice),ve=(0,r.useSelector)(_.getCustomSwapsGas),ye=(0,r.useSelector)(_.getCustomMaxFeePerGas),Ce=(0,r.useSelector)(_.getCustomMaxPriorityFeePerGas),be=(0,r.useSelector)(_.getSwapsUserFeeLevel),we=(0,r.useSelector)(h.getTokenExchangeRates,i.isEqual),ke=(0,m.useEqualityCheck)(we),{balance:Ie}=(0,r.useSelector)(h.getSelectedAccount,r.shallowEqual),Ae=(0,r.useSelector)(h.conversionRateSelector),Oe=(0,r.useSelector)(h.getUSDConversionRate),Ne=(0,r.useSelector)(h.getIsMultiLayerFeeNetwork),xe=(0,r.useSelector)(h.getCurrentCurrency),Pe=(0,r.useSelector)(S.getTokens,i.isEqual),Me=(0,r.useSelector)(h.checkNetworkAndAccountSupports1559),De=(0,r.useSelector)(_.getBalanceError),Re=(0,r.useSelector)(_.getFetchParams,i.isEqual),Le=(0,r.useSelector)(_.getApproveTxParams,r.shallowEqual),Fe=(0,r.useSelector)(_.getSelectedQuote,i.isEqual),je=(0,r.useSelector)(_.getTopQuote,i.isEqual),Ue=Fe||je,Ge=(null==Ue||null===(e=Ue.trade)||void 0===e?void 0:e.value)??"0x0",We=(0,r.useSelector)(_.getSwapsQuoteRefreshTime),Be=(0,r.useSelector)(h.getSwapsDefaultToken,i.isEqual),qe=(0,r.useSelector)(h.getCurrentChainId),He=(0,r.useSelector)(S.getNativeCurrency),Ve=(0,r.useSelector)(_.getReviewSwapClickedTimestamp),$e=(0,r.useSelector)(_.getSmartTransactionsOptInStatus),Ke=(0,r.useSelector)(_.getSmartTransactionsEnabled),Qe=(0,r.useSelector)(_.getSwapsSTXLoading),Ye=(0,r.useSelector)(_.getCurrentSmartTransactionsError),Xe=(0,r.useSelector)(_.getSmartTransactionsError),Ze=(0,r.useSelector)(_.getSmartTransactionFees,i.isEqual),ze=(0,r.useSelector)(_.getCurrentSmartTransactionsEnabled),Je=(0,r.useSelector)(_.getSwapsNetworkConfig,r.shallowEqual),et=Ue.trade,tt=ze&&$e;let at;Me&&(at=(0,g.useGasFeeInputs)(N.GasRecommendations.high,{userFeeLevel:be||N.GasRecommendations.high}));const nt=null==Re?void 0:Re.sourceToken,rt={reg_tx_fee_in_usd:undefined,reg_tx_fee_in_eth:undefined,reg_tx_max_fee_in_usd:undefined,reg_tx_max_fee_in_eth:undefined,stx_fee_in_usd:undefined,stx_fee_in_eth:undefined,stx_max_fee_in_usd:undefined,stx_max_fee_in_eth:undefined},ot=(null==Ue?void 0:Ue.gasEstimateWithRefund)||`0x${(0,q.decimalToHex)((null==Ue?void 0:Ue.averageGas)||0)}`,st=(null==Ue?void 0:Ue.gasEstimate)||"0x0",it=new s.default(st,16).times((null==Ue?void 0:Ue.gasMultiplier)||_.FALLBACK_GAS_MULTIPLIER,10).round(0).toString(16),lt=null!=Ue&&Ue.gasEstimate?it:`0x${(0,q.decimalToHex)((null==Ue?void 0:Ue.maxGas)||0)}`,ut=ve||lt;let ct,dt,pt;if(Me){const{maxFeePerGas:e,maxPriorityFeePerGas:t,gasFeeEstimates:{estimatedBaseFee:a="0"}}=at;ct=ye||(0,q.decGWEIToHexWEI)(e),dt=Ce||(0,q.decGWEIToHexWEI)(t),pt=(0,q.addHexes)((0,q.decGWEIToHexWEI)(a),dt)}let mt=(0,U.calcGasTotal)(ut,ct||Se);null!==ue&&(mt=(0,q.sumHexes)(mt||"0x0",ue||"0x0"));const{tokensWithBalances:ft}=(0,A.useTokenTracker)(Pe,!0),gt=nt===Be.address?Be:ft.find((({address:e})=>(0,L.isEqualCaseInsensitive)(e,nt))),Et=gt||Ue.sourceTokenInfo,Tt=(null==ft?void 0:ft.length)&&(0,U.calcTokenAmount)(Et.balance||"0x0",Et.decimals).toFixed(9),_t=ft&&gt===undefined,ht=(0,F.parseStandardTokenTransactionData)(null==Le?void 0:Le.data),St=ht&&(0,j.getTokenValueParam)(ht),vt=St&&(null==Et?void 0:Et.decimals)!==undefined&&(0,U.calcTokenAmount)(St,Et.decimals).toFixed(9),yt=null==Le?void 0:Le.gas,Ct=(0,n.useMemo)((()=>(0,I.quotesToRenderableData)({quotes:_e,gasPrice:Me?pt:Se,conversionRate:Ae,currentCurrency:xe,approveGas:yt,tokenConversionRates:ke,chainId:qe,smartTransactionEstimatedGas:Ke&&$e&&(null==Ze?void 0:Ze.tradeTxFees),nativeCurrencySymbol:He,multiLayerL1ApprovalFeeTotal:de})),[_e,Se,pt,Me,Ae,xe,yt,ke,qe,null==Ze?void 0:Ze.tradeTxFees,He,Ke,$e,de]),bt=Ct.find((e=>e.aggId===Ue.aggregator)),{destinationTokenDecimals:wt,destinationTokenSymbol:kt,destinationTokenValue:It,destinationIconUrl:At,sourceTokenDecimals:Ot,sourceTokenSymbol:Nt,sourceTokenValue:xt,sourceTokenIconUrl:Pt}=bt;let{feeInFiat:Mt,feeInEth:Dt,rawEthFee:Rt,feeInUsd:Lt}=(0,I.getRenderableNetworkFeesForQuote)({tradeGas:ot,approveGas:yt,gasPrice:Me?pt:Se,currentCurrency:xe,conversionRate:Ae,USDConversionRate:Oe,tradeValue:Ge,sourceSymbol:Nt,sourceAmount:Ue.sourceAmount,chainId:qe,nativeCurrencySymbol:He,multiLayerL1FeeTotal:ue});rt.reg_tx_fee_in_usd=Number(Lt),rt.reg_tx_fee_in_eth=Number(Rt);const Ft=(0,I.getRenderableNetworkFeesForQuote)({tradeGas:ut,approveGas:yt,gasPrice:ct||Se,currentCurrency:xe,conversionRate:Ae,USDConversionRate:Oe,tradeValue:Ge,sourceSymbol:Nt,sourceAmount:Ue.sourceAmount,chainId:qe,nativeCurrencySymbol:He,multiLayerL1FeeTotal:ue});let{feeInFiat:jt,feeInEth:Ut,rawEthFee:Gt,feeInUsd:Wt}=Ft;if(rt.reg_tx_max_fee_in_usd=Number(Wt),rt.reg_tx_max_fee_in_eth=Number(Gt),ze&&$e&&null!=Ze&&Ze.tradeTxFees){var Bt;const e=(null==Ze?void 0:Ze.tradeTxFees.feeEstimate)+((null==Ze||null===(Bt=Ze.approvalTxFees)||void 0===Bt?void 0:Bt.feeEstimate)||0),t=e*Je.stxMaxFeeMultiplier;({feeInFiat:Mt,feeInEth:Dt,rawEthFee:Rt,feeInUsd:Lt}=(0,I.getFeeForSmartTransaction)({chainId:qe,currentCurrency:xe,conversionRate:Ae,USDConversionRate:Oe,nativeCurrencySymbol:He,feeInWeiDec:e})),rt.stx_fee_in_usd=Number(Lt),rt.stx_fee_in_eth=Number(Rt),rt.estimated_gas=null==Ze?void 0:Ze.tradeTxFees.gasLimit,({feeInFiat:jt,feeInEth:Ut,rawEthFee:Gt,feeInUsd:Wt}=(0,I.getFeeForSmartTransaction)({chainId:qe,currentCurrency:xe,conversionRate:Ae,USDConversionRate:Oe,nativeCurrencySymbol:He,feeInWeiDec:t})),rt.stx_max_fee_in_usd=Number(Wt),rt.stx_max_fee_in_eth=Number(Gt)}const qt=new s.default(Ue.sourceAmount),Ht=new s.default(Ue.trade.value||0,10).plus(new s.default(mt,16)),Vt=((null==ft?void 0:ft.length)||De)&&qt.gt(new s.default(Et.balance||"0x0")),$t=Ht.gt(new s.default(Ie||"0x0")),Kt=Vt?(0,U.toPrecisionWithoutTrailingZeros)((0,U.calcTokenAmount)(qt,Et.decimals).minus(Tt).toString(10),6):null,Qt=$t?(0,U.toPrecisionWithoutTrailingZeros)(Ht.minus(Ie,16).div("1000000000000000000",10).toString(10),6):null;let Yt;tt&&null!=Xe&&Xe.balanceNeededWei&&(Yt=(0,q.decWEIToDecETH)(Xe.balanceNeededWei-Xe.currentBalanceWei));const Xt=(0,r.useSelector)(_.getDestinationTokenInfo,i.isEqual);(0,n.useEffect)((()=>{tt?Vt?X((0,_.setBalanceError)(!0)):De&&!Vt&&X((0,_.setBalanceError)(!1)):Vt||$t?X((0,_.setBalanceError)(!0)):!De||Vt||$t||X((0,_.setBalanceError)(!1))}),[Vt,$t,De,X,tt]),(0,n.useEffect)((()=>{const e=Date.now()-he;e>We&&!J?(ee(!0),X((0,v.safeRefetchQuotes)())):e>We&&(X((0,v.setSwapsErrorKey)(O.QUOTES_EXPIRED_ERROR)),Y.push(C.SWAPS_ERROR_ROUTE))}),[he,J,X,Y,We]),(0,n.useEffect)((()=>{!ie&&vt&&le(vt)}),[ie,vt]);const Zt=(!ze||!$e)&&Qt,zt=tt&&Yt,Jt=(De||Kt||Zt||zt)&&!oe,ea=(0,r.useSelector)(h.isHardwareWallet),ta=(0,r.useSelector)(h.getHardwareWalletType),aa=Object.values(_e).length,na=(0,n.useRef)(),ra=(0,n.useMemo)((()=>({token_from:Nt,token_from_amount:xt,token_to:kt,token_to_amount:It,request_type:null==Re?void 0:Re.balanceError,slippage:null==Re?void 0:Re.slippage,custom_slippage:2!==(null==Re?void 0:Re.slippage),response_time:null==Re?void 0:Re.responseTime,best_quote_source:null==je?void 0:je.aggregator,available_quotes:aa,is_hardware_wallet:ea,hardware_wallet_type:ta,stx_enabled:Ke,current_stx_enabled:ze,stx_user_opt_in:$e})),[Nt,xt,kt,It,null==Re?void 0:Re.balanceError,null==Re?void 0:Re.slippage,null==Re?void 0:Re.responseTime,null==je?void 0:je.aggregator,aa,ea,ta,Ke,ze,$e]),oa=()=>{z({event:"Edit Spend Limit Opened",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,custom_spend_limit_set:ie===vt,custom_spend_limit_amount:ie===vt?null:vt}})},sa=(0,n.useCallback)((()=>{z({event:"Best Quote Reviewed",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,network_fees:Mt}})}),[z,ra,Mt]),ia=(0,n.useCallback)((()=>{z({event:"View Quote Page Loaded",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,response_time:me-Ve}})}),[z,ra,me,Ve]);(0,n.useEffect)((()=>{!na.current&&[Nt,xt,kt,It,Re,je,aa,Mt].every((e=>null!==e&&e!==undefined))&&(na.current=!0,sa())}),[Re,je,aa,Mt,kt,It,Nt,xt,sa]);const la=Ue.fee,ua=_t?Z("swapTokenBalanceUnavailable",[Nt]):Z("swapApproveNeedMoreTokens",[n.default.createElement("span",{key:"swapApproveNeedMoreTokens-1",className:"view-quote__bold"},Kt||Yt||Qt),Kt&&Nt!==Be.symbol?Nt:Be.symbol]),ca=null==Ue||null===(t=Ue.priceSlippage)||void 0===t?void 0:t.bucket,da=(0,f.usePrevious)(ca);(0,n.useEffect)((()=>{fe&&da===N.GasRecommendations.medium&&ca===N.GasRecommendations.high&&ge(!1)}),[ca,fe,da]);let pa=null;const ma=(0,p.useEthFiatAmount)((null==Ue||null===(a=Ue.priceSlippage)||void 0===a?void 0:a.sourceAmountInETH)||0,{showFiat:!0}),fa=(0,p.useEthFiatAmount)((null==Ue||null===(V=Ue.priceSlippage)||void 0===V?void 0:V.destinationAmountInETH)||0,{showFiat:!0}),ga=!ma||!fa||Boolean(null==Ue||null===($=Ue.priceSlippage)||void 0===$?void 0:$.calculationError);let Ea=0;null!=Ue&&null!==(Q=Ue.priceSlippage)&&void 0!==Q&&Q.ratio&&(Ea=parseFloat(new s.default(Ue.priceSlippage.ratio,10).minus(1,10).times(100,10).toFixed(2),10));const Ta=!_t&&!Jt&&Ue&&(Ee.includes(ca)||ga);Ta&&(pa=n.default.createElement(H.default,{usedQuote:Ue,sourceTokenValue:xt,destinationTokenValue:It,priceSlippageFromSource:ma,priceSlippageFromDestination:fa,priceDifferencePercentage:Ea,priceSlippageUnknownFiatValue:ga,onAcknowledgementClick:()=>{ge(!0)},acknowledged:fe}));const _a=Ta&&!fe,ha=Jt||Ta,Sa=Boolean(te||De||_t||_a||Me&&pt===undefined||!Me&&(null===Se||Se===undefined)||ze&&(Ye||Xe)||ze&&$e&&!(null!=Ze&&Ze.tradeTxFees));return(0,n.useEffect)((()=>{if(ze&&$e&&!Vt){const e={from:et.from,to:et.to,value:et.value,data:et.data,gas:et.gas,chainId:qe};K=setInterval((()=>{Qe||X((0,_.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:Le,fallbackOnNotEnoughFunds:!1}))}),Je.stxGetTransactionsRefreshTime),X((0,_.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:Le,fallbackOnNotEnoughFunds:!1}))}else K&&clearInterval(K);return()=>clearInterval(K)}),[X,ze,$e,et.data,et.from,et.value,et.gas,et.to,qe,Je.stxGetTransactionsRefreshTime,Vt]),(0,n.useEffect)((()=>{X((0,v.setSwapsQuotesPollingLimitEnabled)(!0)),Ve&&ia()}),[X,ia,Ve]),(0,n.useEffect)((()=>{!ze&&Ye&&te&&ae(!1)}),[ze,Ye,te]),(0,n.useEffect)((()=>{if(!Ne||null==Ue||!Ue.multiLayerL1TradeFeeTotal)return;(async()=>{try{let e="0x0";Le&&(e=await(0,B.default)(qe,{txParams:{...Le,gasPrice:(0,G.addHexPrefix)(Le.gasPrice),value:"0x0"}}),pe(e));const t=(0,q.sumHexes)(Ue.multiLayerL1TradeFeeTotal,e);ce(t)}catch(e){(0,u.captureException)(e),ce(null),pe(null)}})()}),[et,Le,Ne,qe,Ue]),(0,n.useEffect)((()=>{tt&&X({type:y.SET_SMART_TRANSACTIONS_ERROR,payload:null})}),[tt,X]),n.default.createElement("div",{className:"view-quote"},n.default.createElement("div",{className:(0,l.default)("view-quote__content",{"view-quote__content_modal":_a})},ne&&n.default.createElement(d.default,{quoteDataRows:Ct,onClose:()=>re(!1),onSubmit:e=>X((0,_.swapsQuoteSelected)(e)),swapToSymbol:kt,initialAggId:Ue.aggregator,onQuoteDetailsIsOpened:()=>{z({event:"Quote Details Opened",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,other_quote_selected:(null==Ue?void 0:Ue.aggregator)!==(null==je?void 0:je.aggregator),other_quote_selected_source:(null==Ue?void 0:Ue.aggregator)===(null==je?void 0:je.aggregator)?null:null==Ue?void 0:Ue.aggregator}})},hideEstimatedGasFee:Ke&&$e}),n.default.createElement("div",{className:(0,l.default)("view-quote__warning-wrapper",{"view-quote__warning-wrapper--thin":!ha})},pa,(Jt||_t)&&n.default.createElement(k.default,{message:ua,onClose:()=>se(!0)})),n.default.createElement("div",{className:"view-quote__countdown-timer-container"},n.default.createElement(x.default,{timeStarted:he,warningTime:"0:10",labelKey:"swapNewQuoteIn"})),n.default.createElement(b.default,{sourceValue:(0,W.calcTokenValue)(xt,Ot),sourceDecimals:Ot,sourceSymbol:Nt,destinationValue:(0,W.calcTokenValue)(It,wt),destinationDecimals:wt,destinationSymbol:kt,sourceIconUrl:Pt,destinationIconUrl:At}),ze&&$e&&!(null!=Ze&&Ze.tradeTxFees)&&!Jt&&n.default.createElement(D.default,{marginTop:0,marginBottom:10},n.default.createElement(M.default,null)),(!ze||!$e||(null==Ze?void 0:Ze.tradeTxFees))&&n.default.createElement("div",{className:(0,l.default)("view-quote__fee-card-container",{"view-quote__fee-card-container--three-rows":Le&&(!De||oe)})},n.default.createElement(T.default,{primaryFee:{fee:Dt,maxFee:Ut},secondaryFee:{fee:Mt,maxFee:jt},hideTokenApprovalRow:!Le||De&&!oe,tokenApprovalSourceTokenSymbol:Nt,onTokenApprovalClick:()=>{oa(),X((0,v.showModal)({name:"EDIT_APPROVAL_PERMISSION",decimals:Et.decimals,origin:"MetaMask",setCustomAmount:e=>{const t=""===e?ie:e,a=(0,w.getCustomTxParamsData)(Le.data,{customPermissionAmount:t,decimals:Et.decimals});null!=t&&t.length&&Le.data!==a&&X((0,v.setCustomApproveTxData)(a))},tokenAmount:ie,customTokenAmount:ie===vt?null:vt,tokenBalance:Tt,tokenSymbol:Et.symbol,requiredMinimum:(0,U.calcTokenAmount)(Ue.sourceAmount,Et.decimals)}))},metaMaskFee:String(la),numberOfQuotes:Object.values(_e).length,onQuotesClick:()=>{z({event:"All Available Quotes Opened",category:R.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,other_quote_selected:(null==Ue?void 0:Ue.aggregator)!==(null==je?void 0:je.aggregator),other_quote_selected_source:(null==Ue?void 0:Ue.aggregator)===(null==je?void 0:je.aggregator)?null:null==Ue?void 0:Ue.aggregator}}),re(!0)},chainId:qe,maxPriorityFeePerGasDecGWEI:(0,q.hexWEIToDecGWEI)(dt),maxFeePerGasDecGWEI:(0,q.hexWEIToDecGWEI)(ct)}))),n.default.createElement(P.default,{onSubmit:()=>{ae(!0),De?Xt.symbol===Be.symbol?Y.push(C.DEFAULT_ROUTE):Y.push(`${C.ASSET_ROUTE}/${Xt.address}`):ze&&$e&&null!=Ze&&Ze.tradeTxFees?X((0,_.signAndSendSwapsSmartTransaction)({unsignedTransaction:et,trackEvent:z,history:Y,additionalTrackingParams:rt})):X((0,_.signAndSendTransactions)(Y,z,rt))},submitText:Z(ze&&$e&&Qe?"preparingSwap":"swap"),hideCancel:!0,disabled:Sa,className:ha?"view-quote__thin-swaps-footer":"",showTopBorder:!0}))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=$(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=V(e("bignumber.js")),i=e("lodash"),l=V(e("classnames")),u=e("@sentry/browser"),c=e("../../../contexts/i18n"),d=V(e("../select-quote-popover")),p=e("../../../hooks/useEthFiatAmount"),m=e("../../../hooks/useEqualityCheck"),f=e("../../../hooks/usePrevious"),g=e("../../../hooks/gasFeeInput/useGasFeeInputs"),E=e("../../../contexts/metametrics"),T=V(e("../fee-card")),_=e("../../../ducks/swaps/swaps"),h=e("../../../selectors"),S=e("../../../ducks/metamask/metamask"),v=e("../../../store/actions"),y=e("../../../store/actionConstants"),C=e("../../../helpers/constants/routes"),b=V(e("../main-quote-summary")),w=e("../../confirm-approve/confirm-approve.util"),k=V(e("../../../components/ui/actionable-message/actionable-message")),I=e("../swaps.util"),A=e("../../../hooks/useTokenTracker"),O=e("../../../../shared/constants/swaps"),N=e("../../../../shared/constants/gas"),x=V(e("../countdown-timer")),P=V(e("../swaps-footer")),M=V(e("../../../components/ui/pulse-loader")),D=V(e("../../../components/ui/box")),R=e("../../../../shared/constants/metametrics"),L=e("../../../../shared/modules/string-utils"),F=e("../../../../shared/modules/transaction.utils"),j=e("../../../../shared/lib/metamask-controller-utils"),U=e("../../../../shared/lib/transactions-controller-utils"),G=e("../../../../app/scripts/lib/util"),W=e("../../../../shared/lib/swaps-utils"),B=V(e("../../../helpers/utils/optimism/fetchEstimatedL1Fee")),q=e("../../../../shared/modules/conversion.utils"),H=V(e("./view-quote-price-difference"));function V(e){return e&&e.__esModule?e:{default:e}}function $(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return($=function(e){return e?a:t})(e)}let K}}},{package:"$root$",file:"ui/pages/swaps/view-quote/view-quote.js"}],[5467,{"../../../shared/constants/network":4354,"../../../shared/constants/tokens":4365,"../../../shared/lib/transactions-controller-utils":4374,"../../../shared/modules/security-provider.utils":4391,"../../components/app/approve-content-card/approve-content-card":4431,"../../components/app/confirm-page-container":4459,"../../components/app/confirm-page-container/confirm-page-container-content":4453,"../../components/app/custom-nonce":4487,"../../components/app/custom-spending-cap/custom-spending-cap":4489,"../../components/app/ledger-instruction-field/ledger-instruction-field":4534,"../../components/app/modals/contract-details-modal/contract-details-modal":4557,"../../components/app/network-account-balance-header/network-account-balance-header":4591,"../../components/app/security-provider-banner-message/security-provider-banner-message":4631,"../../components/component-library":4822,"../../components/ui/box/box":4930,"../../components/ui/button":4935,"../../components/ui/contract-token-values/contract-token-values":4947,"../../components/ui/dialog":4953,"../../components/ui/page-container":5013,"../../components/ui/review-spending-cap/review-spending-cap":5026,"../../components/ui/simulation-error-message":5032,"../../components/ui/url-icon/url-icon":5067,"../../contexts/gasFee":5068,"../../contexts/i18n":5069,"../../ducks/app/app":5076,"../../ducks/confirm-transaction/confirm-transaction.duck":5077,"../../ducks/history/history":5081,"../../helpers/constants/design-system":5092,"../../helpers/utils/util":5133,"../../hooks/useSimulationFailureWarning":5168,"../../selectors":5478,"../../store/actions":5486,"../confirm-approve/confirm-approve.util":5197,"bignumber.js":2428,"prop-types":3823,react:4076,"react-redux":4041,"react-router-dom":4061},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=H;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=B(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=W(e("prop-types")),i=W(e("bignumber.js")),l=W(e("../../components/ui/box/box")),u=W(e("../../components/app/network-account-balance-header/network-account-balance-header")),c=W(e("../../components/ui/url-icon/url-icon")),d=e("../../helpers/constants/design-system"),p=e("../../contexts/i18n"),m=W(e("../../components/ui/contract-token-values/contract-token-values")),f=W(e("../../components/ui/button")),g=W(e("../../components/ui/review-spending-cap/review-spending-cap")),E=e("../../components/ui/page-container"),T=W(e("../../components/app/modals/contract-details-modal/contract-details-modal")),_=e("../../selectors"),h=e("../../../shared/constants/network"),S=e("../../store/actions"),v=e("../../ducks/confirm-transaction/confirm-transaction.duck"),y=e("../../ducks/history/history"),C=W(e("../../components/app/approve-content-card/approve-content-card")),b=W(e("../../components/app/custom-spending-cap/custom-spending-cap")),w=W(e("../../components/ui/dialog")),k=e("../../contexts/gasFee"),I=e("../confirm-approve/confirm-approve.util"),A=e("../../ducks/app/app"),O=e("../../helpers/utils/util"),N=e("../../../shared/lib/transactions-controller-utils"),x=e("../../../shared/constants/tokens"),P=e("../../../shared/modules/security-provider.utils"),M=e("../../components/app/confirm-page-container"),D=e("../../hooks/useSimulationFailureWarning"),R=W(e("../../components/ui/simulation-error-message")),L=W(e("../../components/app/ledger-instruction-field/ledger-instruction-field")),F=W(e("../../components/app/security-provider-banner-message/security-provider-banner-message")),j=e("../../components/component-library"),U=e("../../components/app/confirm-page-container/confirm-page-container-content"),G=W(e("../../components/app/custom-nonce"));function W(e){return e&&e.__esModule?e:{default:e}}function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(B=function(e){return e?a:t})(e)}const q=["portfolio.metamask.io"];function H({origin:e,siteImage:t,showCustomizeGasModal:a,useNonceField:s,currentCurrency:W,nativeCurrency:B,ethTransactionTotal:H,fiatTransactionTotal:V,hexTransactionTotal:$,hexMinimumTransactionFee:K,txData:Q,isMultiLayerFeeNetwork:Y,supportsEIP1559:X,userAddress:Z,tokenAddress:z,data:J,isSetApproveForAll:ee,isApprovalOrRejection:te,decimals:ae,dappProposedTokenAmount:ne,currentTokenBalance:re,toAddress:oe,tokenSymbol:se,fromAddressIsLedger:ie,warning:le}){const ue=(0,n.useContext)(p.I18nContext),ce=(0,r.useDispatch)(),de=(0,o.useHistory)(),pe=(0,r.useSelector)(y.getMostRecentOverviewPage),{hostname:me}=new URL(e),fe=q.includes(me),[ge,Ee]=(0,n.useState)(ne),[Te,_e]=(0,n.useState)(!1),[he,Se]=(0,n.useState)(!1),[ve,ye]=(0,n.useState)(!1),[Ce,be]=(0,n.useState)("0"!==ne&&!fe),[we,ke]=(0,n.useState)(""),[Ie,Ae]=(0,n.useState)(!1),Oe=(0,D.useSimulationFailureWarning)(Ie),Ne=(0,r.useSelector)((e=>(0,_.getTargetAccountWithSendEtherInfo)(e,Z))),xe=(0,r.useSelector)(_.getNetworkIdentifier),Pe=(0,r.useSelector)(_.getRpcPrefsForCurrentProvider),Me=(0,r.useSelector)(_.getUnapprovedTxCount),De=(0,r.useSelector)(_.getUnapprovedTransactions),Re=(0,r.useSelector)(_.getUseCurrencyRateCheck),Le=(0,r.useSelector)(_.getNextSuggestedNonce),Fe=(0,r.useSelector)(_.getCustomNonceValue),je=e=>e.replace(/,/gu,".");let Ue=x.NUM_W_OPT_DECIMAL_COMMA_OR_DOT_REGEX.test(ge)?je(ge).toString():"0";const Ge=(0,N.calcTokenAmount)(x.MAX_TOKEN_ALLOWANCE_AMOUNT,ae);if(ge.length>1&&Number(ge)){new i.default(ge).greaterThan(Ge)&&(Ue=0)}const We=Ue?(0,I.getCustomTxParamsData)(J,{customPermissionAmount:Ue,decimals:ae}):null;let Be={...Q};We&&(Be={...Be,txParams:{...Be.txParams,data:We}});const qe=(0,r.useSelector)((e=>(0,_.transactionFeeSelector)(e,Be))),He=(0,r.useSelector)((e=>(0,_.getKnownMethodData)(e,J))),{balanceError:Ve}=(0,k.useGasFeeContext)(),$e=Ce&&(""===ge||""!==we),Ke=!Ce&&Ve,Qe=h.NETWORK_TO_NAME_MAP[Be.chainId]||xe,Ye=()=>{const{name:e}=He;var t;qe.gasEstimationObject.baseFeePerGas&&(Be.estimatedBaseFee=qe.gasEstimationObject.baseFeePerGas),e&&(Be.contractMethodName=e),ne&&(Be.dappProposedTokenAmount=ne,Be.originalApprovalAmount=ne),ge?(Be.customTokenAmount=ge,Be.finalApprovalAmount=ge):ne!==undefined&&(Be.finalApprovalAmount=ne),re&&(Be.currentTokenBalance=re),ce((0,S.updateCustomNonce)("")),ce((0,S.updateAndApproveTx)((t=Be,Fe?{...t,customNonceValue:Fe}:t))).then((()=>{ce((0,v.clearConfirmTransaction)()),de.push(pe)}))},Xe=()=>{ye(!1),be(!0)},Ze=()=>{ce((0,S.getNextNonce)())};(0,n.useEffect)((()=>{Ze()}),[ce]);const ze=e=>{ce((0,S.updateCustomNonce)(e))},Je=""===ge,et=n.default.createElement(l.default,{marginTop:4,key:z},n.default.createElement(m.default,{tokenName:se,address:z,chainId:Be.chainId,rpcPrefs:Pe}));return n.default.createElement(l.default,{className:"token-allowance-container page-container"},n.default.createElement(l.default,null,n.default.createElement(M.ConfirmPageContainerNavigation,null)),n.default.createElement(l.default,{paddingLeft:4,paddingRight:4,alignItems:d.AlignItems.center,display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.spaceBetween},n.default.createElement(l.default,null,!Ce&&n.default.createElement(f.default,{type:"inline",onClick:()=>Xe()},n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.textMuted,fontWeight:d.FontWeight.Bold},"<"," ",ue("back")))),n.default.createElement(l.default,{textAlign:d.TextAlign.End},n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.textMuted,fontWeight:d.FontWeight.Bold},Ce?1:2," ",ue("ofTextNofM")," 2"))),n.default.createElement(u.default,{networkName:Qe,accountName:Ne.name,accountBalance:re,tokenName:se,accountAddress:Z,chainId:Be.chainId}),(0,P.isSuspiciousResponse)(null==Q?void 0:Q.securityProviderResponse)&&n.default.createElement(F.default,{securityProviderResponse:Q.securityProviderResponse}),le&&n.default.createElement(l.default,{className:"token-allowance-container__custom-nonce-warning"},n.default.createElement(U.ConfirmPageContainerWarning,{warning:le})),n.default.createElement(l.default,{display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.center},n.default.createElement(l.default,{display:d.DISPLAY.FLEX,alignItems:d.AlignItems.center,marginTop:6,marginRight:12,marginBottom:8,marginLeft:12,paddingTop:2,paddingRight:4,paddingBottom:2,paddingLeft:2,borderColor:d.Color.borderMuted,borderStyle:d.BorderStyle.solid,borderWidth:1,className:"token-allowance-container__icon-display-content"},n.default.createElement(c.default,{className:"token-allowance-container__icon-display-content__siteimage-identicon",fallbackClassName:"token-allowance-container__icon-display-content__siteimage-identicon",name:e,url:t}),n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.textAlternative,marginLeft:1},e))),n.default.createElement(l.default,{marginLeft:4,marginRight:4},n.default.createElement(j.Text,{variant:d.TextVariant.headingMd,align:d.TextAlign.Center},Ce?ue("spendingCapRequest",[et]):n.default.createElement(l.default,null,ue("0"===ge||Je?"revokeSpendingCap":"spendingCapRequest",[et])))),n.default.createElement(l.default,{marginTop:1,display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.center},n.default.createElement(f.default,{type:"link",onClick:()=>_e(!0),className:"token-allowance-container__verify-link"},n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.Color.primaryDefault},ue("verifyContractDetails")))),n.default.createElement(l.default,{margin:[4,4,3,4]},Ce?n.default.createElement(b.default,{txParams:null==Q?void 0:Q.txParams,tokenName:se,currentTokenBalance:re,dappProposedValue:ne,siteOrigin:e,passTheErrorText:e=>ke(e),decimals:ae,setInputChangeInProgress:Se,customSpendingCap:ge,setCustomSpendingCap:Ee}):n.default.createElement(g.default,{tokenName:se,currentTokenBalance:re,tokenValue:isNaN(parseFloat(ge))?ne:je(ge),onEdit:()=>Xe()})),!Ce&&Ve&&n.default.createElement(w.default,{type:"error",className:"send__error-dialog"},ue("insufficientFundsForGas")),!Ce&&n.default.createElement(l.default,{className:"token-allowance-container__card-wrapper"},Oe&&n.default.createElement(l.default,{paddingTop:0,paddingRight:4,paddingBottom:4,paddingLeft:4},n.default.createElement(R.default,{userAcknowledgedGasMissing:Ie,setUserAcknowledgedGasMissing:()=>Ae(!0)})),n.default.createElement(C.default,{symbol:n.default.createElement(j.Icon,{name:j.IconName.Tag}),title:ue("transactionFee"),showEdit:!0,showAdvanceGasFeeOptions:!0,onEditClick:a,renderTransactionDetailsContent:!0,noBorder:s||!ve,supportsEIP1559:X,isMultiLayerFeeNetwork:Y,ethTransactionTotal:H,nativeCurrency:B,fullTxData:Be,userAcknowledgedGasMissing:Ie,renderSimulationFailureWarning:Oe,hexTransactionTotal:$,hexMinimumTransactionFee:K,fiatTransactionTotal:V,currentCurrency:W,useCurrencyRateCheck:Re})),s&&n.default.createElement(l.default,{marginTop:4,marginRight:4,marginLeft:4},n.default.createElement(G.default,{nextNonce:Le,customNonceValue:Fe,showCustomizeNonceModal:()=>((e,t,a,n,r)=>{ce((0,S.showModal)({name:"CUSTOMIZE_NONCE",useNonceField:e,nextNonce:t,customNonceValue:a,updateCustomNonce:n,getNextNonce:r}))})(s,Le,Fe,ze,Ze)})),n.default.createElement(l.default,{display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.center},n.default.createElement(f.default,{type:"link",onClick:()=>ye(!ve),className:"token-allowance-container__view-details"},n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.primaryDefault,marginRight:1},ue("viewDetails")),ve?n.default.createElement("i",{className:"fa fa-sm fa-angle-up"}):n.default.createElement("i",{className:"fa fa-sm fa-angle-down"}))),ve?n.default.createElement(l.default,{display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.COLUMN,alignItems:d.AlignItems.center,className:"token-allowance-container__full-tx-content"},n.default.createElement(l.default,{className:"token-allowance-container__data"},n.default.createElement(C.default,{symbol:n.default.createElement("i",{className:"fa fa-file"}),title:ue("data"),renderDataContent:!0,noBorder:!0,supportsEIP1559:X,isSetApproveForAll:ee,fullTxData:Be,userAcknowledgedGasMissing:Ie,renderSimulationFailureWarning:Oe,isApprovalOrRejection:te,data:We||J,useCurrencyRateCheck:Re,hexMinimumTransactionFee:K}))):null,!Ce&&ie&&n.default.createElement(l.default,{paddingLeft:2,paddingRight:2},n.default.createElement(L.default,{showDataInstruction:!0})),n.default.createElement(E.PageContainerFooter,{cancelText:ue("reject"),submitText:ue(Ce?"next":"approveButtonText"),onCancel:()=>(ce((0,S.updateCustomNonce)("")),ce((0,A.setCustomTokenAmount)("")),void ce((0,S.cancelTx)(Be)).then((()=>{ce((0,v.clearConfirmTransaction)()),de.push(pe)}))),onSubmit:()=>Ce?(ye(!1),void be(!1)):Ye(),disabled:he||$e||Ke},Me>1&&n.default.createElement(f.default,{type:"link",onClick:e=>{e.preventDefault(),ce((0,S.showModal)({name:"REJECT_TRANSACTIONS",unapprovedTxCount:Me,onSubmit:async()=>{await ce((0,S.cancelTxs)((0,O.valuesFor)(De))),ce((0,v.clearConfirmTransaction)()),de.push(pe)}}))}},ue("rejectTxsN",[Me]))),Te&&n.default.createElement(T.default,{tokenName:se,onClose:()=>_e(!1),tokenAddress:z,toAddress:oe,chainId:Be.chainId,rpcPrefs:Pe}))}H.propTypes={origin:s.default.string,siteImage:s.default.string,showCustomizeGasModal:s.default.func,useNonceField:s.default.bool,currentCurrency:s.default.string,nativeCurrency:s.default.string,ethTransactionTotal:s.default.string,fiatTransactionTotal:s.default.string,hexTransactionTotal:s.default.string,hexMinimumTransactionFee:s.default.string,txData:s.default.object,isMultiLayerFeeNetwork:s.default.bool,supportsEIP1559:s.default.bool,userAddress:s.default.string,tokenAddress:s.default.string,data:s.default.string,isSetApproveForAll:s.default.bool,isApprovalOrRejection:s.default.bool,decimals:s.default.string,dappProposedTokenAmount:s.default.string,currentTokenBalance:s.default.string,toAddress:s.default.string,tokenSymbol:s.default.string,fromAddressIsLedger:s.default.bool,warning:s.default.string}}}},{package:"$root$",file:"ui/pages/token-allowance/token-allowance.js"}],[5468,{"./token-details-page":5469},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./token-details-page"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/token-details/index.js"}],[5469,{"../../../shared/constants/network":4354,"../../../shared/modules/string-utils":4393,"../../components/component-library":4822,"../../components/ui/box":4931,"../../components/ui/button":4935,"../../components/ui/identicon":4985,"../../components/ui/tooltip":5057,"../../contexts/i18n":5069,"../../ducks/metamask/metamask":5084,"../../helpers/constants/design-system":5092,"../../helpers/constants/routes":5097,"../../hooks/useCopyToClipboard":5149,"../../hooks/useTokenFiatAmount":5173,"../../hooks/useTokenTracker":5174,"../../selectors":5478,"../../store/actions":5486,react:4076,"react-redux":4041,"react-router-dom":4061},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e,t;const a=(0,r.useDispatch)(),y=(0,o.useHistory)(),C=(0,n.useContext)(c.I18nContext),b=(0,r.useSelector)(s.getTokens),w=(0,r.useSelector)(i.getTokenList),{address:k}=(0,o.useParams)(),I=w[k.toLowerCase()],A=null==I||null===(e=I.aggregators)||void 0===e?void 0:e.join(", "),O=b.find((({address:e})=>(0,S.isEqualCaseInsensitive)(e,k))),{tokensWithBalances:N}=(0,d.useTokenTracker)([O]),x=null===(t=N[0])||void 0===t?void 0:t.string,P=(0,p.useTokenFiatAmount)(null==O?void 0:O.address,x,null==O?void 0:O.symbol),{nickname:M,type:D}=(0,r.useSelector)(s.getProviderConfig),[R,L]=(0,l.useCopyToClipboard)();if(!O)return n.default.createElement(o.Redirect,{to:{pathname:g.DEFAULT_ROUTE}});return n.default.createElement(_.default,{className:"page-container token-details"},n.default.createElement(_.default,{marginLeft:5,marginRight:6},n.default.createElement(v.Text,{fontWeight:h.FontWeight.Bold,margin:0,marginTop:4,variant:h.TextVariant.bodySm,as:"h6",color:h.TextColor.textDefault,className:"token-details__title"},C("tokenDetails"),n.default.createElement(T.default,{type:"link",onClick:()=>y.push(`${g.ASSET_ROUTE}/${O.address}`),className:"token-details__closeButton"})),n.default.createElement(_.default,{display:h.DISPLAY.FLEX,marginTop:4},n.default.createElement(v.Text,{align:h.TextAlign.Center,fontWeight:h.FontWeight.Bold,margin:0,marginRight:5,variant:h.TextVariant.headingSm,as:"h4",color:h.TextColor.textDefault,className:"token-details__token-value"},x||""),n.default.createElement(_.default,{marginTop:1},n.default.createElement(u.default,{diameter:32,address:O.address,image:I?I.iconUrl:O.image}))),n.default.createElement(v.Text,{margin:0,marginTop:4,variant:h.TextVariant.bodySm,as:"h6",color:h.TextColor.textAlternative},P||""),n.default.createElement(v.Text,{margin:0,marginTop:6,variant:h.TextVariant.bodyXs,as:"h6",color:h.TextColor.textAlternative,fontWeight:h.FontWeight.Bold},C("tokenContractAddress")),n.default.createElement(_.default,{display:h.DISPLAY.FLEX},n.default.createElement(v.Text,{variant:h.TextVariant.bodySm,as:"h6",margin:0,marginTop:2,color:h.TextColor.textDefault,overflowWrap:h.OverflowWrap.BreakWord,className:"token-details__token-address"},O.address),n.default.createElement(E.default,{position:"bottom",title:C(R?"copiedExclamation":"copyToClipboard"),containerClassName:"token-details__copy-icon"},n.default.createElement(v.ButtonIcon,{ariaLabel:"copy",name:R?v.IconName.CopySuccess:v.IconName.Copy,className:"token-details__copyIcon",onClick:()=>L(O.address),color:h.IconColor.primaryDefault,size:v.ButtonIconSize.Sm}))),n.default.createElement(v.Text,{variant:h.TextVariant.bodyXs,as:"h6",margin:0,marginTop:4,color:h.TextColor.textAlternative,fontWeight:h.FontWeight.Bold},C("tokenDecimalTitle")),n.default.createElement(v.Text,{variant:h.TextVariant.bodySm,as:"h6",margin:0,marginTop:1,color:h.TextColor.textDefault},O.decimals),n.default.createElement(v.Text,{variant:h.TextVariant.bodyXs,as:"h6",margin:0,marginTop:4,color:h.TextColor.textAlternative,fontWeight:h.FontWeight.Bold},C("network")),n.default.createElement(v.Text,{variant:h.TextVariant.bodySm,as:"h6",margin:1,marginTop:0,color:h.TextColor.textDefault},D===f.NETWORK_TYPES.RPC?M??C("privateNetwork"):C(D)),A&&n.default.createElement(n.default.Fragment,null,n.default.createElement(v.Text,{variant:h.TextVariant.bodyXs,as:"h6",margin:0,marginTop:4,color:h.TextColor.textAlternative,fontWeight:h.FontWeight.Bold},C("tokenList")),n.default.createElement(v.Text,{variant:h.TextVariant.bodySm,as:"h6",margin:0,marginTop:1,color:h.TextColor.textDefault},`${A}.`)),n.default.createElement(T.default,{type:"secondary",className:"token-details__hide-token-button",onClick:()=>{a((0,m.showModal)({name:"HIDE_TOKEN_CONFIRMATION",token:O,history:y}))}},n.default.createElement(v.Text,{variant:h.TextVariant.bodySm,as:"h6",color:h.TextColor.primaryDefault},C("hideToken")))))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("../../ducks/metamask/metamask"),i=e("../../selectors"),l=e("../../hooks/useCopyToClipboard"),u=y(e("../../components/ui/identicon")),c=e("../../contexts/i18n"),d=e("../../hooks/useTokenTracker"),p=e("../../hooks/useTokenFiatAmount"),m=e("../../store/actions"),f=e("../../../shared/constants/network"),g=e("../../helpers/constants/routes"),E=y(e("../../components/ui/tooltip")),T=y(e("../../components/ui/button")),_=y(e("../../components/ui/box")),h=e("../../helpers/constants/design-system"),S=e("../../../shared/modules/string-utils"),v=e("../../components/component-library");function y(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(C=function(e){return e?a:t})(e)}}}},{package:"$root$",file:"ui/pages/token-details/token-details-page.js"}],[5470,{"./unlock-page.container":5472},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){var n;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=((n=e("./unlock-page.container"))&&n.__esModule?n:{default:n}).default;a.default=r}}},{package:"$root$",file:"ui/pages/unlock-page/index.js"}],[5471,{"../../../shared/constants/metametrics":4353,"../../../shared/lib/ui-utils":4375,"../../components/ui/button":4935,"../../components/ui/mascot":5e3,"../../components/ui/text-field":5046,"../../helpers/constants/routes":5097,"../../helpers/utils/build-types":5113,"./unlock-page.util":5473,events:2542,"prop-types":3823,react:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("events"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),o=f(e("prop-types")),s=f(e("../../components/ui/button")),i=f(e("../../components/ui/text-field")),l=f(e("../../components/ui/mascot")),u=e("../../helpers/constants/routes"),c=e("../../../shared/constants/metametrics"),d=e("../../../shared/lib/ui-utils"),p=e("../../helpers/utils/build-types"),m=e("./unlock-page.util");function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function E(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(a!==undefined){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends r.Component{constructor(...e){super(...e),E(this,"state",{password:"",error:null}),E(this,"submitting",!1),E(this,"failed_attempts",0),E(this,"animationEventEmitter",new n.EventEmitter),E(this,"handleSubmit",(async e=>{e.preventDefault(),e.stopPropagation();const{password:t}=this.state,{onSubmit:a,forceUpdateMetamaskState:n}=this.props;if(""!==t&&!this.submitting){this.setState({error:null}),this.submitting=!0;try{await a(t),this.context.trackEvent({category:c.MetaMetricsEventCategory.Navigation,event:c.MetaMetricsEventName.AppUnlocked,properties:{failed_attempts:this.failed_attempts}},{isNewVisit:!0})}catch({message:e}){this.failed_attempts+=1,"Incorrect password"===e&&(await n(),this.context.trackEvent({category:c.MetaMetricsEventCategory.Navigation,event:c.MetaMetricsEventName.AppUnlockedFailed,properties:{reason:"incorrect_password",failed_attempts:this.failed_attempts}})),this.setState({error:e}),this.submitting=!1}}}))}UNSAFE_componentWillMount(){const{isUnlocked:e,history:t}=this.props;e&&t.push(u.DEFAULT_ROUTE)}handleInputChange({target:e}){if(this.setState({password:e.value,error:null}),e.getBoundingClientRect){const t=e,a=t.getBoundingClientRect(),n=(0,m.getCaretCoordinates)(t,t.selectionEnd);this.animationEventEmitter.emit("point",{x:a.left+n.left-t.scrollLeft,y:a.top+n.top-t.scrollTop})}}renderSubmitButton(){return r.default.createElement(s.default,{type:"submit","data-testid":"unlock-submit",style:{backgroundColor:"var(--color-primary-default)",color:"var(--color-primary-inverse)",marginTop:"20px",height:"60px",fontWeight:"400",boxShadow:"none",borderRadius:"100px"},disabled:!this.state.password,variant:"contained",size:"large",onClick:this.handleSubmit},this.context.t("unlock"))}render(){const{password:e,error:t}=this.state,{t:a}=this.context,{onRestore:n}=this.props;let o=a("appNameMmi");return o=a("needHelpLinkText"),r.default.createElement("div",{className:"unlock-page__container"},r.default.createElement("div",{className:"unlock-page","data-testid":"unlock-page"},r.default.createElement("div",{className:"unlock-page__mascot-container"},r.default.createElement(l.default,{animationEventEmitter:this.animationEventEmitter,width:"120",height:"120"}),(0,p.isBeta)()?r.default.createElement("div",{className:"unlock-page__mascot-container__beta"},a("beta")):null),r.default.createElement("h1",{className:"unlock-page__title"},a("welcomeBack")),r.default.createElement("div",null,a("unlockMessage")),r.default.createElement("form",{className:"unlock-page__form",onSubmit:this.handleSubmit},r.default.createElement(i.default,{id:"password","data-testid":"unlock-password",label:a("password"),type:"password",value:e,onChange:e=>this.handleInputChange(e),error:t,autoFocus:!0,autoComplete:"current-password",theme:"material",fullWidth:!0})),this.renderSubmitButton(),r.default.createElement("div",{className:"unlock-page__links"},r.default.createElement(s.default,{type:"link",key:"import-account",className:"unlock-page__link",onClick:()=>n()},a("forgotPassword"))),r.default.createElement("div",{className:"unlock-page__support"},a("needHelp",[r.default.createElement("a",{href:d.SUPPORT_LINK,target:"_blank",rel:"noopener noreferrer",key:"need-help-link",onClick:()=>{this.context.trackEvent({category:c.MetaMetricsEventCategory.Navigation,event:c.MetaMetricsEventName.SupportLinkClicked,properties:{url:d.SUPPORT_LINK}},{contextPropsIntoEventProperties:[c.MetaMetricsContextProp.PageTitle]})}},o)]))))}}a.default=T,E(T,"contextTypes",{trackEvent:o.default.func,t:o.default.func}),E(T,"propTypes",{history:o.default.object.isRequired,isUnlocked:o.default.bool,onRestore:o.default.func,onSubmit:o.default.func,forceUpdateMetamaskState:o.default.func})}}},{package:"$root$",file:"ui/pages/unlock-page/unlock-page.component.js"}],[5472,{"../../../app/scripts/lib/util":82,"../../../shared/constants/app":4346,"../../helpers/constants/routes":5097,"../../store/actions":5486,"./unlock-page.component":5471,"react-redux":4041,"react-router-dom":4061,redux:4109},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,r=e("react-redux"),o=e("react-router-dom"),s=e("redux"),i=e("../../../app/scripts/lib/util"),l=e("../../../shared/constants/app"),u=e("../../helpers/constants/routes"),c=e("../../store/actions"),d=(n=e("./unlock-page.component"))&&n.__esModule?n:{default:n};var p=(0,s.compose)(o.withRouter,(0,r.connect)((e=>{const{metamask:{isUnlocked:t}}=e;return{isUnlocked:t}}),(e=>({tryUnlockMetamask:t=>e((0,c.tryUnlockMetamask)(t)),markPasswordForgotten:()=>e((0,c.markPasswordForgotten)()),forceUpdateMetamaskState:()=>(0,c.forceUpdateMetamaskState)(e)})),((e,t,a)=>{const{markPasswordForgotten:n,tryUnlockMetamask:r,...o}=t,{history:s,onSubmit:c,...d}=a;return{...e,...o,...d,onRestore:async()=>{await n(),s.push(u.RESTORE_VAULT_ROUTE),(0,i.getEnvironmentType)()===l.ENVIRONMENT_TYPE_POPUP&&global.platform.openExtensionInBrowser(u.RESTORE_VAULT_ROUTE)},onSubmit:c||(async e=>{await r(e),s.push(u.DEFAULT_ROUTE)}),history:s}})))(d.default);a.default=p}}},{package:"$root$",file:"ui/pages/unlock-page/unlock-page.container.js"}],[5473,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getCaretCoordinates=function(e,t){const a=document.createElement("div");a.id="password-mirror-div",document.body.appendChild(a);const n=window.getComputedStyle(e);a.textContent=new Array(t+1).join("•");const r=document.createElement("span");r.textContent="•",a.appendChild(r);const o={top:r.offsetTop+parseInt(n.borderTopWidth,10),left:r.offsetLeft+parseInt(n.borderLeftWidth,10)};return document.body.removeChild(a),o}}}},{package:"$root$",file:"ui/pages/unlock-page/unlock-page.util.js"}],[5474,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getApprovalFlows=function(e){return e.metamask.approvalFlows},a.getApprovalRequestsByType=void 0,a.hasPendingApprovals=function(e,t,a){const n=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));if(a)return n.some(a);return n.length>0};a.getApprovalRequestsByType=(e,t,a)=>{const n=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return a?n.filter(a):n}}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[5475,{".":5478,"../../shared/constants/gas":4349,"../../shared/constants/transaction":4366,"../../shared/lib/transactions-controller-utils":4374,"../../shared/modules/conversion.utils":4380,"../../shared/modules/gas.utils":4383,"../../shared/modules/string-utils":4393,"../../shared/modules/transaction.utils":4395,"../ducks/metamask/metamask":5084,"../helpers/utils/confirm-tx.util":5115,"../helpers/utils/tx-helper":5132,"./custom-gas":5476,"./selectors":5481,reselect:4118},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.use4ByteResolutionSelector=a.unconfirmedTransactionsListSelector=a.unconfirmedTransactionsHashSelector=a.unconfirmedMessagesHashSelector=a.txDataSelector=a.transactionFeeSelector=a.tokenAddressSelector=a.sendTokenTokenAmountAndToAddressSelector=a.currentCurrencySelector=a.conversionRateSelector=a.contractExchangeRateSelector=void 0;var n,r=e("reselect"),o=(n=e("../helpers/utils/tx-helper"))&&n.__esModule?n:{default:n},s=e("../helpers/utils/confirm-tx.util"),i=e("../../shared/modules/transaction.utils"),l=e("../ducks/metamask/metamask"),u=e("../../shared/constants/transaction"),c=e("../../shared/constants/gas"),d=e("../../shared/modules/gas.utils"),p=e("../../shared/modules/string-utils"),m=e("../../shared/lib/transactions-controller-utils"),f=e("../../shared/modules/conversion.utils"),g=e("./custom-gas"),E=e("./selectors"),T=e(".");const _=e=>(0,T.getUnapprovedTransactions)(e),h=e=>e.metamask.unapprovedMsgs,S=e=>e.metamask.unapprovedPersonalMsgs,v=e=>e.metamask.unapprovedDecryptMsgs,y=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,C=e=>e.metamask.unapprovedTypedMessages,b=(0,r.createSelector)(_,h,S,v,y,C,E.deprecatedGetCurrentNetworkId,E.getCurrentChainId,((e={},t={},a={},n={},r={},s={},i,l)=>(0,o.default)(e,t,a,n,r,s,i,l)||[]));a.unconfirmedTransactionsListSelector=b;const w=(0,r.createSelector)(_,h,S,v,y,C,E.deprecatedGetCurrentNetworkId,E.getCurrentChainId,((e={},t={},a={},n={},r={},o={},s,l)=>({...Object.keys(e).reduce(((t,a)=>{const n={...t};return(0,i.transactionMatchesNetwork)(e[a],l,s)&&(n[a]=e[a]),n}),{}),...t,...a,...n,...r,...o})));a.unconfirmedTransactionsHashSelector=w;const k=(0,r.createSelector)(h,S,v,y,C,((e={},t={},a={},n={},r={})=>({...e,...t,...a,...n,...r})));a.unconfirmedMessagesHashSelector=k;a.use4ByteResolutionSelector=e=>e.metamask.use4ByteResolution;const I=e=>e.metamask.currentCurrency;a.currentCurrencySelector=I;const A=e=>e.metamask.conversionRate;a.conversionRateSelector=A;const O=e=>e.confirmTransaction.txData;a.txDataSelector=O;const N=(0,r.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),x=(0,r.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),P=(0,r.createSelector)(O,(e=>e&&e.txParams||{})),M=(0,r.createSelector)(P,(e=>e&&e.to));a.tokenAddressSelector=M;const D=(0,r.createSelector)(x,N,((e,t)=>{let a="",n="0";if(e&&e.length){a=e._to;let r=e._value.toString();t&&(r=(0,m.calcTokenAmount)(r,t).toFixed()),n=(0,s.roundExponential)(r)}return{toAddress:a,tokenAmount:n}}));a.sendTokenTokenAmountAndToAddressSelector=D;const R=(0,r.createSelector)((e=>e.metamask.contractExchangeRates),M,((e,t)=>e[Object.keys(e).find((e=>(0,p.isEqualCaseInsensitive)(e,t)))]));a.contractExchangeRateSelector=R;a.transactionFeeSelector=function(e,t){var a,n,r,o;const i=I(e),p=A(e),m=(0,l.getNativeCurrency)(e),E=(0,l.getGasFeeEstimates)(e)||{},_=(0,l.getGasEstimateType)(e),h=(0,T.checkNetworkAndAccountSupports1559)(e),S={gasLimit:(null===(a=t.txParams)||void 0===a?void 0:a.gas)??"0x0"};if(h){var v;const{gasPrice:e="0"}=E,a=E[t.userFeeLevel]||{};if((null===(v=t.txParams)||void 0===v?void 0:v.type)===u.TransactionEnvelopeType.legacy){var y;S.gasPrice=(null===(y=t.txParams)||void 0===y?void 0:y.gasPrice)??(0,f.decGWEIToHexWEI)(e)}else{var C,b,w,k;const{suggestedMaxPriorityFeePerGas:n,suggestedMaxFeePerGas:r}=a;S.maxFeePerGas=null===(C=t.txParams)||void 0===C||!C.maxFeePerGas||t.userFeeLevel!==c.CUSTOM_GAS_ESTIMATE&&r?(0,f.decGWEIToHexWEI)(r||e):null===(b=t.txParams)||void 0===b?void 0:b.maxFeePerGas,S.maxPriorityFeePerGas=null===(w=t.txParams)||void 0===w||!w.maxPriorityFeePerGas||t.userFeeLevel!==c.CUSTOM_GAS_ESTIMATE&&n?n&&(0,f.decGWEIToHexWEI)(n)||S.maxFeePerGas:null===(k=t.txParams)||void 0===k?void 0:k.maxPriorityFeePerGas,S.baseFeePerGas=(0,f.decGWEIToHexWEI)(E.estimatedBaseFee)}}else switch(_){case c.GasEstimateTypes.none:S.gasPrice=(null===(n=t.txParams)||void 0===n?void 0:n.gasPrice)??"0x0";break;case c.GasEstimateTypes.ethGasPrice:S.gasPrice=(null===(r=t.txParams)||void 0===r?void 0:r.gasPrice)??(0,f.decGWEIToHexWEI)(E.gasPrice);break;case c.GasEstimateTypes.legacy:S.gasPrice=(null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)??(0,g.getAveragePriceEstimateInHexWEI)(e);case c.GasEstimateTypes.feeMarket:}const{txParams:{value:O="0x0"}={}}=t,N=(0,f.getValueFromWeiHex)({value:O,fromCurrency:m,toCurrency:i,conversionRate:p,numberOfDecimals:2}),x=(0,f.getValueFromWeiHex)({value:O,fromCurrency:m,toCurrency:m,conversionRate:p,numberOfDecimals:6}),P=(0,d.getMinimumGasTotalInHexWei)(S),M=(0,d.getMaximumGasTotalInHexWei)(S),D=(0,s.getTransactionFee)({value:P,fromCurrency:m,toCurrency:i,numberOfDecimals:2,conversionRate:p}),R=(0,s.getTransactionFee)({value:M,fromCurrency:m,toCurrency:i,numberOfDecimals:2,conversionRate:p}),L=(0,s.getTransactionFee)({value:P,fromCurrency:m,toCurrency:m,numberOfDecimals:6,conversionRate:p});return{hexTransactionAmount:O,fiatTransactionAmount:N,ethTransactionAmount:x,hexMinimumTransactionFee:P,fiatMinimumTransactionFee:D,hexMaximumTransactionFee:M,fiatMaximumTransactionFee:R,ethTransactionFee:L,fiatTransactionTotal:(0,s.addFiat)(D,N),ethTransactionTotal:(0,s.addEth)(L,x),hexTransactionTotal:(0,f.sumHexes)(O,P),gasEstimationObject:S}}}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[5476,{".":5478,"../../app/scripts/lib/util":82,"../../shared/constants/common":4348,"../../shared/constants/gas":4349,"../../shared/lib/transactions-controller-utils":4374,"../../shared/modules/Numeric":4376,"../../shared/modules/conversion.utils":4380,"../ducks/metamask/metamask":5084,"../ducks/send":5086,"../helpers/utils/confirm-tx.util":5115,"../helpers/utils/formatters":5117},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.basicPriceEstimateToETHTotal=_,a.getAverageEstimate=E,a.getAveragePriceEstimateInHexWEI=function(e){return S(E(e))},a.getBasicGasEstimateLoadingStatus=function(e){return!1===v(e)},a.getCustomGasLimit=function(e){return e.gas.customData.limit},a.getCustomGasPrice=f,a.getDefaultActiveButtonIndex=function(e,t,a){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,n.addHexPrefix)(t||a))},a.getFastPriceEstimate=T,a.getFastPriceEstimateInHexWEI=function(e){return S(T(e)||"0x0")},a.getGasPriceInHexWei=S,a.getIsCustomNetworkGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.ethGasPrice&&!(0,m.getIsMainnet)(e)},a.getIsEthGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.ethGasPrice&&(0,m.getIsMainnet)(e)},a.getIsGasEstimatesFetched=v,a.getNoGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.none},a.getRenderableConvertedCurrencyFee=function(e,t,a,n){const s=_(new d.Numeric(e,10).toBase(16).toString(),t),i=(0,r.decEthToConvertedCurrency)(s,a,n);return(0,o.formatCurrency)(i,a)},a.getRenderableEthFee=function(e,t,a=9,n="ETH"){const r=_(new d.Numeric(e,10).toBase(16).toString(),t,a);return(0,s.formatETHFee)(r,n)},a.getSafeLowEstimate=g,a.isCustomPriceExcessive=function(e,t=!1){const a=t?(0,i.getGasPrice)(e):f(e),n=T(e);if(!a||!n)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*n),10)},a.isCustomPriceSafe=function(e){const t=g(e),a=f(e);if(!a)return!0;if(!t)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},a.isCustomPriceSafeForCustomNetwork=function(e){const t=E(e),a=f(e);if(!a)return!0;if(!t)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},a.priceEstimateToWei=h;var n=e("../../app/scripts/lib/util"),r=e("../../shared/modules/conversion.utils"),o=e("../helpers/utils/confirm-tx.util"),s=e("../helpers/utils/formatters"),i=e("../ducks/send"),l=e("../../shared/constants/gas"),u=e("../ducks/metamask/metamask"),c=e("../../shared/lib/transactions-controller-utils"),d=e("../../shared/modules/Numeric"),p=e("../../shared/constants/common"),m=e(".");function f(e){return e.gas.customData.price}function g(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function E(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function T(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function _(e,t,a=9){return new d.Numeric((0,c.calcGasTotal)(t,e),16,p.EtherDenomination.GWEI).round(a).toBase(10).toString()}function h(e){return new d.Numeric(e,16,p.EtherDenomination.GWEI).toDenomination(p.EtherDenomination.WEI).round(9).toString()}function S(e){const t=new d.Numeric(e,10).toBase(16).toString();return(0,n.addHexPrefix)(h(t))}function v(e){const t=(0,u.getGasEstimateType)(e);return!(0,u.isEIP1559Network)(e)&&t!==l.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[5477,{"../helpers/constants/routes":5097},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getFirstTimeFlowType=void 0,a.getFirstTimeFlowTypeRoute=function(e){const{firstTimeFlowType:t}=e.metamask;let a;a="create"===t?n.ONBOARDING_CREATE_PASSWORD_ROUTE:"import"===t?n.ONBOARDING_IMPORT_WITH_SRP_ROUTE:n.DEFAULT_ROUTE;return a},a.getOnboardingInitiator=void 0;var n=e("../helpers/constants/routes");a.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;a.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const a=Object.keys(t)[0];return{location:a,tabId:t[a]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[5478,{"./approvals":5474,"./confirm-transaction":5475,"./custom-gas":5476,"./first-time-flow":5477,"./metametrics":5479,"./permissions":5480,"./selectors":5481,"./transactions":5482},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("./confirm-transaction");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===n[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return n[e]}}))}));var r=e("./custom-gas");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===r[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return r[e]}}))}));var o=e("./first-time-flow");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===o[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=e("./metametrics");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===s[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return s[e]}}))}));var i=e("./permissions");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===i[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return i[e]}}))}));var l=e("./selectors");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===l[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return l[e]}}))}));var u=e("./transactions");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===u[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=e("./approvals");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===c[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return c[e]}}))}))}}},{package:"$root$",file:"ui/selectors/index.js"}],[5479,{reselect:4118},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.selectMatchingFragment=a.selectFragments=a.selectFragmentBySuccessEvent=a.selectFragmentById=void 0;var n=e("reselect");const r=e=>e.metamask.fragments;a.selectFragments=r;const o=(0,n.createSelector)(r,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined));a.selectFragmentBySuccessEvent=o;const s=(0,n.createSelector)(r,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));a.selectFragmentById=s;const i=(0,n.createSelector)(((e,t)=>o(e,t.fragmentOptions)),((e,t)=>s(e,t.existingId)),((e,t)=>t??e));a.selectMatchingFragment=i}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[5480,{".":5478,"../../shared/constants/permissions":4355,"./approvals":5474,"@metamask/controller-utils":1076,"@metamask/rpc-methods":1439},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.activeTabHasPermissions=function(e){var t;const{activeTab:a,metamask:n}=e,{subjects:r={}}=n;return Boolean(Object.keys((null===(t=r[a.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},a.getAccountToConnectToActiveTab=function(e){const t=(0,i.getSelectedAddress)(e),a=c(e),{metamask:{identities:n}}=e,r=Object.keys(n).length;if(a.length&&a.length!==r&&-1===a.findIndex((e=>e===t)))return n[t];return undefined},a.getAddressConnectedSubjectMap=function(e){const t=(0,i.getSubjectMetadata)(e),a=d(e),n={};return Object.keys(a).forEach((e=>{const{iconUrl:r,name:o}=t[e]||{};a[e].forEach((t=>{const a=o||e;n[t]=n[t]?{...n[t],[e]:{iconUrl:r,name:a}}:{[e]:{iconUrl:r,name:a}}}))})),n},a.getConnectedSubjectsForAllAddresses=function(e){const t=l(e),a=(0,i.getSubjectMetadata)(e),n={};return Object.entries(t).forEach((([e,t])=>{p(t).forEach((t=>{n[t]||(n[t]=[]),n[t].push(a[e]||{})}))})),n},a.getConnectedSubjectsForSelectedAddress=function(e){const{selectedAddress:t}=e.metamask,a=l(e),n=(0,i.getSubjectMetadata)(e),r=[];return Object.entries(a).forEach((([e,a])=>{if(!p(a).includes(t))return;const{extensionId:o,name:s,iconUrl:i}=n[e]||{};r.push({extensionId:o,origin:e,name:s,iconUrl:i})})),r},a.getFirstPermissionRequest=function(e){const t=E(e);return t&&t[0]?t[0]:null},a.getFirstSnapInstallOrUpdateRequest=function(e){var t;return(null===(t=g(e))||void 0===t?void 0:t[0])??null},a.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,a)=>(t[a].eth_accounts&&(e[a]=JSON.parse(JSON.stringify(t[a].eth_accounts))),e)),{})},a.getOrderedConnectedAccountsForActiveTab=function(e){var t,a;const{activeTab:n,metamask:{permissionHistory:r}}=e,o=null===(t=r[n.origin])||void 0===t||null===(a=t.eth_accounts)||void 0===a?void 0:a.accounts,s=(0,i.getMetaMaskAccountsOrdered)(e),l=c(e);return s.filter((e=>l.includes(e.address))).map((e=>({...e,lastActive:null==o?void 0:o[e.address]}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},a.getPermissionSubjects=l,a.getPermissions=function(e,t){var a;return null===(a=l(e)[t])||void 0===a?void 0:a.permissions},a.getPermissionsForActiveTab=function(e){var t;const{activeTab:a,metamask:n}=e,{subjects:r={}}=n,o=(null===(t=r[a.origin])||void 0===t?void 0:t.permissions)??{};return Object.keys(o).map((e=>({key:e,value:o[e]})))},a.getPermissionsRequests=E,a.getPermittedAccounts=u,a.getPermittedAccountsByOrigin=d,a.getPermittedAccountsForCurrentTab=c,a.getRequestState=function(e,t){var a;return null===(a=e.metamask.pendingApprovals[t])||void 0===a?void 0:a.requestState},a.getRequestType=function(e,t){var a;return null===(a=e.metamask.pendingApprovals[t])||void 0===a?void 0:a.type},a.getSnapInstallOrUpdateRequests=g,a.getSubjectsWithPermission=function(e,t){const a=l(e),n=[];return Object.entries(a).forEach((([a,{permissions:r}])=>{if(r[t]){const{extensionId:t,name:r,iconUrl:o}=(0,i.getTargetSubjectMetadata)(e,a)||{};n.push({extensionId:t,origin:a,name:r,iconUrl:o})}})),n},a.getSubjectsWithSnapPermission=function(e,t){const a=l(e);return Object.entries(a).filter((([e,{permissions:a}])=>{var n;return null===(n=a[r.WALLET_SNAP_PERMISSION_KEY])||void 0===n?void 0:n.caveats[0].value[t]})).map((([t,a])=>{const{extensionId:n,name:r,iconUrl:o}=(0,i.getTargetSubjectMetadata)(e,t)||{};return{extensionId:n,origin:t,name:r,iconUrl:o}}))};var n=e("@metamask/controller-utils"),r=e("@metamask/rpc-methods"),o=e("../../shared/constants/permissions"),s=e("./approvals"),i=e(".");function l(e){return e.metamask.subjects||{}}function u(e,t){return f(m(function(e,t){var a;return t&&(null===(a=e.metamask.subjects)||void 0===a?void 0:a[t])}(e,t)))}function c(e){return u(e,(0,i.getOriginOfCurrentTab)(e))}function d(e){const t=l(e);return Object.keys(t).reduce(((e,a)=>{const n=p(t[a]);return n.length>0&&(e[a]=n),e}),{})}function p(e){return f(m(e))}function m(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function f(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===o.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function g(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e||"wallet_installSnapResult"===e)).map((({requestData:e})=>e))}function E(e){var t;return null===(t=(0,s.getApprovalRequestsByType)(e,n.ApprovalType.WalletRequestPermissions))||void 0===t?void 0:t.map((({requestData:e})=>e))}}}},{package:"$root$",file:"ui/selectors/permissions.js"}],[5481,{"../../app/scripts/lib/util":82,"../../shared/constants/app":4346,"../../shared/constants/bridge":4347,"../../shared/constants/hardware-wallets":4350,"../../shared/constants/keyring":4351,"../../shared/constants/labels":4352,"../../shared/constants/network":4354,"../../shared/constants/swaps":4361,"../../shared/constants/terms":4362,"../../shared/constants/time":4364,"../../shared/constants/tokens":4365,"../../shared/constants/transaction":4366,"../../shared/modules/conversion.utils":4380,"../../shared/modules/string-utils":4393,"../../shared/notifications":4397,"../ducks/app/app":5076,"../ducks/metamask/metamask":5084,"../helpers/constants/design-system":5092,"../helpers/constants/routes":5097,"../helpers/utils/util":5133,"../pages/confirmation/templates":5234,"./permissions":5480,"./transactions":5482,"./util":5483,"@metamask/controller-utils":1076,"@metamask/subject-metadata-controller":1698,lodash:3676,reselect:4118},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.accountsWithSendEtherInfoSelector=Z,a.checkNetworkAndAccountSupports1559=function(e){return(0,S.isEIP1559Network)(e)},a.checkNetworkOrAccountNotSupports1559=function(e){return(0,S.isNotEIP1559Network)(e)},a.deprecatedGetCurrentNetworkId=L,a.doesAddressRequireLedgerHidConnection=function(e,t){const a=(0,S.isAddressLedger)(e,t),n=(0,S.getLedgerTransportType)(e)===u.LedgerTransportTypes.webhid,r=(0,v.getLedgerWebHidConnectedStatus)(e)!==u.WebHIDConnectedStatuses.connected,o=(0,v.getLedgerTransportStatus)(e)!==u.HardwareTransportStates.verified;return a&&n&&(r||o)},a.getAccountName=function(e,t){const a=Object.values(e).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return a&&""!==a.name?a.name:""},a.getAccountType=function(e){return R(M(e))},a.getAccountTypeForKeyring=R,a.getAccountsWithLabels=function(e){return V(e).map((({address:e,name:t,balance:a})=>({address:e,addressLabel:`${t.length<p.TRUNCATED_NAME_CHAR_LIMIT?t:`${t.slice(0,p.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,g.shortenAddress)(e)})`,label:t,balance:a})))},a.getAddressBook=Y,a.getAddressBookEntry=X,a.getAddressBookEntryOrAccountName=function(e,t){const a=X(e,t)||Object.values(e.metamask.identities).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return a&&""!==a.name?a.name:t},a.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[P(e)]},a.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},a.getAllAccountsOnNetworkAreEmpty=function(e){const t=H(e)??{},a=Object.values(t).every((e=>"0x0"===e||"0x00"===e)),n=0===G(e);return a&&n},a.getAllEnabledNetworks=function(e){const t=Ne(e),a=xe(e);return oe(e)?a:t},a.getAllNetworks=xe,a.getAppIsLoading=function(e){return e.appState.isLoading},a.getBlockExplorerLinkText=function(e,t=!1){const a=je(e),n=ue(e);let r={firstPart:"addBlockExplorer",secondPart:""};n.blockExplorerUrl?r=t?{firstPart:"blockExplorerView",secondPart:(0,g.getURLHostName)(n.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===a&&(r=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return r},a.getCurrentAccountWithSendEtherInfo=z,a.getCurrentChainId=P,a.getCurrentCurrency=function(e){return e.metamask.currentCurrency},a.getCurrentEthBalance=J,a.getCurrentKeyring=M,a.getCurrentNetwork=function(e){const t=xe(e),a=(0,S.getProviderConfig)(e),n="rpc"===a.type?e=>e.id===a.id:e=>e.id===a.type;return t.find(n)},a.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},a.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},a.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},a.getDetectedTokensInCurrentNetwork=function(e){var t,a;const n=P(e),r=j(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(a=t[n])||void 0===a?void 0:a[r]},a.getDisabledRpcMethodPreferences=function(e){return e.metamask.disabledRpcMethodPreferences},a.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t])return e.metamask.ensResolutionsByAddress[t];const a=X(e,t)||Object.values(e.metamask.identities).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return(null==a?void 0:a.name)||""},a.getFeatureFlags=function(e){return e.metamask.featureFlags},a.getFullTxData=void 0,a.getGasIsLoading=function(e){return e.appState.gasIsLoading},a.getHardwareWalletType=function(e){const t=M(e);return D(e)?t.type:undefined},a.getInfuraBlocked=function(e){return Boolean(e.metamask.infuraBlocked)},a.getInsightSnaps=void 0,a.getIpfsGateway=function(e){return e.metamask.ipfsGateway},a.getIsBase=Me,a.getIsBridgeChain=de,a.getIsBridgeToken=void 0,a.getIsBuyableChain=function(e){const t=P(e);return Object.keys(l.BUYABLE_CHAINS_MAP).includes(t)},a.getIsCustomNetwork=je,a.getIsDynamicTokenListAvailable=Le,a.getIsLineaMainnet=ae,a.getIsMainnet=te,a.getIsMultiLayerFeeNetwork=function(e){return Re(e)},a.getIsNetworkUsed=function(e){const t=P(e),{usedNetworks:a}=e.metamask;return Boolean(a[t])},a.getIsNonStandardEthChain=function(e){return!(te(e)||ne(e))},a.getIsOpStack=Re,a.getIsOpbnb=De,a.getIsOptimism=Pe,a.getIsSwapsChain=ce,a.getIsTestnet=ne,a.getIsTokenDetectionInactiveOnMainnet=Fe,a.getIsTokenDetectionSupported=function(e){const t=ke(e),a=Le(e);return t&&a},a.getIsTransactionSecurityCheckEnabled=function(e){return e.metamask.transactionSecurityCheckEnabled},a.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=ke(e),a=te(e);return Le(e)&&!t&&!a},a.getKnownMethodData=function(e,t){if(!t)return null;const a=(0,i.addHexPrefix)(t).slice(0,10),{knownMethodData:n,use4ByteResolution:r}=e.metamask;return r&&(null==n?void 0:n[a])},a.getMemoizedMetadataContractName=a.getMemoizedMetaMaskIdentities=a.getMemoizedAddressBook=void 0,a.getMetaMaskAccountBalances=q,a.getMetaMaskAccountsOrdered=a.getMetaMaskAccountsConnected=a.getMetaMaskAccounts=void 0,a.getMetaMaskCachedBalances=H,a.getMetaMaskIdentities=B,a.getMetaMaskKeyrings=W,a.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},a.getMetadataContractName=function(e,t){const a=Ie(e),n=Object.values(a).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return n&&""!==n.name?n.name:""},a.getNativeCurrencyImage=function(e){var t;const a=null===(t=(0,S.getNativeCurrency)(e))||void 0===t?void 0:t.toUpperCase();return l.NATIVE_CURRENCY_TOKEN_IMAGE_MAP[a]},a.getNetworkConfigurations=Ae,a.getNetworkIdentifier=function(e){const{type:t,nickname:a,rpcUrl:n}=(0,S.getProviderConfig)(e);return a||n||t},a.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},a.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},a.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},a.getNewTokensImported=function(e){return e.appState.newTokensImported},a.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},a.getNonTestNetworks=Ne,a.getNotifications=Ce,a.getNumberOfTokens=G,a.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},a.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},a.getOriginOfCurrentTab=function(e){return e.activeTab.origin},a.getPreferences=re,a.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},a.getRpcPrefsForCurrentProvider=ue,a.getSelectedAccount=Q,a.getSelectedAccountCachedBalance=K,a.getSelectedAddress=j,a.getSelectedIdentity=U,a.getSelectedNetworkClientId=x,a.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=re(e);return t},a.getShouldShowFiat=function(e){const t=te(e),a=ae(e),n=je(e),r=(0,S.getConversionRate)(e),o=Ue(e),{showFiatInTestnets:s}=re(e);return Boolean((t||a||n||s)&&o&&r)},a.getShouldShowSeedPhraseReminder=function(e){const{tokens:t,seedPhraseBackedUp:a,dismissSeedBackUpReminder:n}=e.metamask,r=J(e)??0;return!1===a&&(parseInt(r,16)>0||t.length>0)&&!1===n},a.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},a.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*_.DAY},a.getShowProductTour=function(e){return e.metamask.showProductTour},a.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:a}=e.metamask,n=(new Date).getTime(),r=a?90*_.DAY:2*_.DAY;return n-t>=r},a.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(h.TERMS_OF_USE_LAST_UPDATED).getTime()},a.getShowTestNetworks=oe,a.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},a.getSnap=void 0,a.getSnaps=he,a.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},a.getSnapsList=function(e){const t=he(e);return Object.entries(t).map((([t,a])=>{const n=le(e,null==a?void 0:a.id);return{key:t,id:a.id,packageName:(0,g.removeSnapIdPrefix)(a.id),name:(0,g.getSnapName)(a.id,n)}}))},a.getSnapsRouteObjects=void 0,a.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),a=function(e){const t=M(e),a=(null==t?void 0:t.type)===c.KeyringType.ledger,n=window.navigator.hid!==undefined,r=(0,S.getLedgerTransportType)(e)===u.LedgerTransportTypes.live,o=window.navigator.userAgent.includes("Firefox"),s=ce(e);return{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:n&&a&&r,9:!1,10:!1,11:!1,12:!1,13:!1,14:!1,15:!1,16:!1,17:!1,18:!1,19:!1,20:a&&o,21:s,22:!0,24:!0===e.metamask.hadAdvancedGasFeesSetPriorToMigration92_3,[k.NOTIFICATION_DROP_LEDGER_FIREFOX]:a&&o,[k.NOTIFICATION_OPEN_BETA_SNAPS]:!0}}(e),n=t.filter((e=>!e.isShown&&a[e.id]));return n.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},a.getSubjectMetadata=se,a.getSuggestedNfts=function(e){var t;return(null===(t=ee(e))||void 0===t?void 0:t.filter((({requestData:e,type:t})=>{var a;return t===r.ApprovalType.WatchAsset&&(null==e||null===(a=e.asset)||void 0===a?void 0:a.tokenId)!==undefined})))||[]},a.getSuggestedTokens=function(e){var t;return(null===(t=ee(e))||void 0===t?void 0:t.filter((({type:e,requestData:t})=>{var a;return e===r.ApprovalType.WatchAsset&&(null==t||null===(a=t.asset)||void 0===a?void 0:a.tokenId)===undefined})))||[]},a.getSwapsDefaultToken=function(e){const t=Q(e),a=null==t?void 0:t.balance,n=P(e);return{...m.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[n],balance:(0,b.hexToDecimal)(a),string:(0,b.getValueFromWeiHex)({value:a,numberOfDecimals:4,toDenomination:"ETH"})}},a.getTargetAccount=function(e,t){return F(e)[t]},a.getTargetAccountWithSendEtherInfo=function(e,t){const a=Z(e);return(0,g.getAccountByAddress)(a,t)},a.getTargetSubjectMetadata=le,a.getTestNetworkBackgroundColor=function(e){const t=e.metamask.providerConfig.ticker;switch(!0){case null==t?void 0:t.includes(l.GOERLI_DISPLAY_NAME):return w.BackgroundColor.goerli;case null==t?void 0:t.includes(l.SEPOLIA_DISPLAY_NAME):return w.BackgroundColor.sepolia;default:return undefined}},a.getTestNetworks=Oe,a.getTheme=function(e){return e.metamask.theme},a.getTokenExchangeRates=a.getTokenDetectionSupportNetworkByChainId=void 0,a.getTokenList=Ie,a.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},a.getTotalUnapprovedMessagesCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:a=0,unapprovedDecryptMsgCount:n=0,unapprovedEncryptionPublicKeyMsgCount:r=0,unapprovedTypedMessagesCount:o=0}=e.metamask;return t+a+n+r+o},a.getTotalUnapprovedSignatureRequestCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:a=0,unapprovedTypedMessagesCount:n=0}=e.metamask;return t+a+n},a.getTxData=a.getTransaction=void 0,a.getUSDConversionRate=function(e){return e.metamask.usdConversionRate},a.getUnapprovedConfirmations=ee,a.getUnapprovedTemplatedConfirmations=function(e){return ee(e).filter((e=>E.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type)))},a.getUnapprovedTransaction=void 0,a.getUnapprovedTxCount=function(e){const t=(0,I.getUnapprovedTransactions)(e);return Object.keys(t).length},a.getUnreadNotifications=be,a.getUnreadNotificationsCount=void 0,a.getUseBlockie=function(e){return Boolean(e.metamask.useBlockie)},a.getUseCurrencyRateCheck=Ue,a.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},a.getUseNonceField=function(e){return Boolean(e.metamask.useNonceField)},a.getUseTokenDetection=ke,a.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},a.hasUnsignedQRHardwareMessage=function(e){const{type:t,msgParams:a}=e.confirmTransaction.txData;if(!t||!a)return!1;const{from:n}=a,{keyrings:r}=e.metamask,o=r.find((e=>e.type===c.KeyringType.qr));if(!o)return!1;switch(t){case d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA:case d.MESSAGE_TYPE.ETH_SIGN:case d.MESSAGE_TYPE.PERSONAL_SIGN:return Boolean(o.accounts.find((e=>e.toLowerCase()===n.toLowerCase())));default:return!1}},a.hasUnsignedQRHardwareTransaction=function(e){const{txParams:t}=e.confirmTransaction.txData;if(!t)return!1;const{from:a}=t,{keyrings:n}=e.metamask,r=n.find((e=>e.type===c.KeyringType.qr));if(!r)return!1;return Boolean(r.accounts.find((e=>e.toLowerCase()===a.toLowerCase())))},a.isBalanceCached=function(e){var t;const a=null===(t=q(e)[j(e)])||void 0===t?void 0:t.balance,n=K(e);return Boolean(!a&&n)},a.isCurrentProviderCustom=function(e){const t=(0,S.getProviderConfig)(e);return t.type===l.NETWORK_TYPES.RPC&&!Object.values(l.CHAIN_IDS).includes(t.chainId)},a.isHardwareWallet=D,a.isNetworkLoading=function(e){const t=x(e);return t&&e.metamask.networksMetadata[t].status!==l.NetworkStatus.Available};var n=e("@metamask/subject-metadata-controller"),r=e("@metamask/controller-utils"),o=e("lodash"),s=e("reselect"),i=e("../../app/scripts/lib/util"),l=e("../../shared/constants/network"),u=e("../../shared/constants/hardware-wallets"),c=e("../../shared/constants/keyring"),d=e("../../shared/constants/app"),p=e("../../shared/constants/labels"),m=e("../../shared/constants/swaps"),f=e("../../shared/constants/bridge"),g=e("../helpers/utils/util"),E=e("../pages/confirmation/templates"),T=e("../../shared/constants/tokens"),_=e("../../shared/constants/time"),h=e("../../shared/constants/terms"),S=e("../ducks/metamask/metamask"),v=e("../ducks/app/app"),y=e("../../shared/modules/string-utils"),C=e("../../shared/constants/transaction"),b=e("../../shared/modules/conversion.utils"),w=e("../helpers/constants/design-system"),k=e("../../shared/notifications"),I=e("./transactions"),A=e("../helpers/constants/routes"),O=e("./permissions"),N=e("./util");function x(e){return e.metamask.selectedNetworkClientId}function P(e){const{chainId:t}=(0,S.getProviderConfig)(e);return t}function M(e){const t=U(e);if(!t)return null;return(0,S.findKeyringForAddress)(e,t.address)}function D(e){var t;const a=M(e);return Boolean(null==a||null===(t=a.type)||void 0===t?void 0:t.includes("Hardware"))}function R(e){if(!e)return"";const{type:t}=e;switch(t){case c.KeyringType.trezor:case c.KeyringType.ledger:case c.KeyringType.lattice:case c.KeyringType.qr:return"hardware";case c.KeyringType.imported:return"imported";default:return"default"}}function L(e){return e.metamask.networkId??"loading"}const F=(0,s.createSelector)(B,q,H,((e,t,a)=>Object.keys(e).reduce(((e,n)=>{let r={};return t[n]&&(r={...r,...t[n]}),null!==r.balance&&r.balance!==undefined||(r={...r,balance:a&&a[n]}),{...e,[n]:r}}),{})));function j(e){return e.metamask.selectedAddress}function U(e){const t=j(e),{identities:a}=e.metamask;return a[t]}function G(e){const{tokens:t}=e.metamask;return t?t.length:0}function W(e){return e.metamask.keyrings}function B(e){return e.metamask.identities}function q(e){return e.metamask.accounts}function H(e){const t=P(e),a=L(e);return e.metamask.cachedBalances[t]??e.metamask.cachedBalances[a]}a.getMetaMaskAccounts=F;const V=(0,s.createSelector)(W,B,F,((e,t,a)=>e.reduce(((e,t)=>e.concat(t.accounts)),[]).filter((e=>Boolean(t[e]))).map((e=>({...t[e],...a[e]})))));a.getMetaMaskAccountsOrdered=V;const $=(0,s.createSelector)(V,(e=>e.map((({address:e})=>e.toLowerCase()))));function K(e){const t=H(e),a=j(e);return t&&t[a]}function Q(e){return F(e)[j(e)]}a.getMetaMaskAccountsConnected=$;function Y(e){const t=P(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function X(e,t){return Y(e).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)))}function Z(e){const t=F(e),a=B(e);return Object.entries(a).map((([e,a])=>({...a,...t[e]})))}function z(e){const t=j(e),a=Z(e);return(0,g.getAccountByAddress)(a,t)}function J(e){var t;return null===(t=z(e))||void 0===t?void 0:t.balance}function ee(e){const{pendingApprovals:t={}}=e.metamask;return Object.values(t)}function te(e){return P(e)===l.CHAIN_IDS.MAINNET}function ae(e){return P(e)===l.CHAIN_IDS.LINEA_MAINNET}function ne(e){const t=P(e);return l.TEST_CHAINS.includes(t)}function re({metamask:e}){return e.preferences}function oe(e){const{showTestNetworks:t}=re(e);return Boolean(t)}function se(e){return e.metamask.subjectMetadata}a.getTokenExchangeRates=e=>e.metamask.contractExchangeRates;const ie=(0,o.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function le(e,t){const a=se(e)[t];if((null==a?void 0:a.subjectType)===n.SubjectType.Snap){const{svgIcon:e,...t}=a;return{...t,iconUrl:e?ie(e):null}}return a}function ue(e){const{rpcPrefs:t}=(0,S.getProviderConfig)(e);return t||{}}function ce(e){const t=P(e);return m.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(t)}function de(e){const t=P(e);return f.ALLOWED_BRIDGE_CHAIN_IDS.includes(t)}a.getIsBridgeToken=e=>t=>{const a=P(t);return de(t)&&f.ALLOWED_BRIDGE_TOKEN_ADDRESSES[a].includes(e.toLowerCase())};const pe=(0,N.createDeepEqualSelector)(B,(e=>e));a.getMemoizedMetaMaskIdentities=pe;const me=(0,N.createDeepEqualSelector)(Y,(e=>e));a.getMemoizedAddressBook=me;const fe=(0,N.createDeepEqualSelector)(Ie,((e,t)=>t),((e,t)=>{const a=Object.values(e).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return a&&""!==a.name?a.name:""}));a.getMemoizedMetadataContractName=fe;const ge=e=>e.confirmTransaction.txData;a.getTxData=ge;const Ee=(0,N.createDeepEqualSelector)((e=>(0,I.getUnapprovedTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{}));a.getUnapprovedTransaction=Ee;const Te=(0,N.createDeepEqualSelector)((e=>(0,I.getCurrentNetworkTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{}));a.getTransaction=Te;const _e=(0,N.createDeepEqualSelector)(ge,((e,t,a)=>a===C.TransactionStatus.unapproved?Ee(e,t):Te(e,t)),((e,t,a,n)=>n),((e,t,a)=>{let n={...e,...t};return t&&t.simulationFails&&(n.simulationFails={...t.simulationFails}),a&&(n={...n,txParams:{...n.txParams,data:a}}),n}));function he(e){return e.metamask.snaps}a.getFullTxData=_e;const Se=(0,N.createDeepEqualSelector)(he,((e,t)=>t),((e,t)=>e[t]));a.getSnap=Se;const ve=(0,N.createDeepEqualSelector)(he,O.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var a;return null===(a=t[e])||void 0===a?void 0:a.permissions["endowment:transaction-insight"]}))));a.getInsightSnaps=ve;const ye=(0,s.createSelector)(he,(e=>Object.values(e).map((e=>({id:e.id,tabMessage:()=>e.manifest.proposedName,descriptionMessage:()=>e.manifest.description,sectionMessage:()=>e.manifest.description,route:`${A.SNAPS_VIEW_ROUTE}/${encodeURIComponent(e.id)}`,icon:"fa fa-flask"})))));function Ce(e){return Object.values(e.metamask.notifications).sort(((e,t)=>new Date(t.createdDate)-new Date(e.createdDate)))}function be(e){return Ce(e).filter((e=>null===e.readDate))}a.getSnapsRouteObjects=ye;const we=(0,s.createSelector)(be,(e=>e.length));function ke(e){return Boolean(e.metamask.useTokenDetection)}function Ie(e){return Fe(e)?T.STATIC_MAINNET_TOKEN_LIST:e.metamask.tokenList}function Ae(e){return e.metamask.networkConfigurations}function Oe(e){const t=Ae(e)||{};return[{chainId:l.CHAIN_IDS.GOERLI,nickname:l.GOERLI_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.GOERLI],providerType:l.NETWORK_TYPES.GOERLI,ticker:l.TEST_NETWORK_TICKER_MAP[l.NETWORK_TYPES.GOERLI],id:l.NETWORK_TYPES.GOERLI,removable:!1},{chainId:l.CHAIN_IDS.SEPOLIA,nickname:l.SEPOLIA_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.SEPOLIA],providerType:l.NETWORK_TYPES.SEPOLIA,ticker:l.TEST_NETWORK_TICKER_MAP[l.NETWORK_TYPES.SEPOLIA],id:l.NETWORK_TYPES.SEPOLIA,removable:!1},{chainId:l.CHAIN_IDS.LINEA_GOERLI,nickname:l.LINEA_GOERLI_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.LINEA_GOERLI],rpcPrefs:{imageUrl:l.LINEA_GOERLI_TOKEN_IMAGE_URL},providerType:l.NETWORK_TYPES.LINEA_GOERLI,ticker:l.TEST_NETWORK_TICKER_MAP[l.NETWORK_TYPES.LINEA_GOERLI],id:l.NETWORK_TYPES.LINEA_GOERLI,removable:!1},...Object.values(t).filter((({chainId:e})=>e===l.CHAIN_IDS.LOCALHOST)).map((e=>({...e,removable:!0})))]}function Ne(e){const t=Ae(e)||{};return[{chainId:l.CHAIN_IDS.MAINNET,nickname:l.MAINNET_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.MAINNET],rpcPrefs:{imageUrl:l.ETH_TOKEN_IMAGE_URL},providerType:l.NETWORK_TYPES.MAINNET,ticker:l.CURRENCY_SYMBOLS.ETH,id:l.NETWORK_TYPES.MAINNET,removable:!1},{chainId:l.CHAIN_IDS.LINEA_MAINNET,nickname:l.LINEA_MAINNET_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.LINEA_MAINNET],rpcPrefs:{imageUrl:l.LINEA_MAINNET_TOKEN_IMAGE_URL},providerType:l.NETWORK_TYPES.LINEA_MAINNET,ticker:l.TEST_NETWORK_TICKER_MAP[l.NETWORK_TYPES.LINEA_MAINNET],id:l.NETWORK_TYPES.LINEA_MAINNET,removable:!1},...Object.values(t).filter((({chainId:e})=>![l.CHAIN_IDS.LOCALHOST].includes(e))).map((e=>({...e,removable:!0})))]}function xe(e){return[...Ne(e),...Oe(e)]}function Pe(e){return P(e)===l.CHAIN_IDS.OPTIMISM||P(e)===l.CHAIN_IDS.OPTIMISM_TESTNET}function Me(e){return P(e)===l.CHAIN_IDS.BASE||P(e)===l.CHAIN_IDS.BASE_TESTNET}function De(e){return P(e)===l.CHAIN_IDS.OPBNB||P(e)===l.CHAIN_IDS.OPBNB_TESTNET}function Re(e){return Pe(e)||Me(e)||De(e)}a.getUnreadNotificationsCount=we;function Le(e){const t=P(e);return[l.CHAIN_IDS.MAINNET,l.CHAIN_IDS.BSC,l.CHAIN_IDS.POLYGON,l.CHAIN_IDS.AVALANCHE,l.CHAIN_IDS.AURORA].includes(t)}function Fe(e){const t=te(e);return!ke(e)&&t}function je(e){const t=P(e);return!l.CHAIN_ID_TO_RPC_URL_MAP[t]}function Ue(e){return Boolean(e.metamask.useCurrencyRateCheck)}a.getTokenDetectionSupportNetworkByChainId=e=>{switch(P(e)){case l.CHAIN_IDS.MAINNET:return l.MAINNET_DISPLAY_NAME;case l.CHAIN_IDS.BSC:return l.BSC_DISPLAY_NAME;case l.CHAIN_IDS.POLYGON:return l.POLYGON_DISPLAY_NAME;case l.CHAIN_IDS.AVALANCHE:return l.AVALANCHE_DISPLAY_NAME;case l.CHAIN_IDS.AURORA:return l.AURORA_DISPLAY_NAME;default:return""}}}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[5482,{"../../shared/constants/transaction":4366,"../../shared/modules/conversion.utils":4380,"../../shared/modules/transaction.utils":4395,"../ducks/metamask/metamask":5084,"../helpers/constants/transactions":5101,"../helpers/utils/tx-helper":5132,"./approvals":5474,"./selectors":5481,"./util":5483,"@metamask/controller-utils":1076,reselect:4118},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getUnapprovedTransactions=a.getCurrentNetworkTransactions=void 0,a.hasTransactionPendingApprovals=function(e){return D(e)||R.some((t=>(0,m.hasPendingApprovals)(e,t)))},a.unapprovedTypedMessagesSelector=a.unapprovedPersonalMsgsSelector=a.unapprovedMsgsSelector=a.unapprovedMessagesSelector=a.unapprovedEncryptionPublicKeyMsgsSelector=a.unapprovedDecryptMsgsSelector=a.transactionsSelector=a.transactionSubSelector=a.submittedPendingTransactionsSelector=a.smartTransactionsListSelector=a.selectedAddressTxListSelector=a.nonceSortedTransactionsSelector=a.nonceSortedPendingTransactionsSelector=a.nonceSortedCompletedTransactionsSelector=a.incomingTxListSelector=void 0;var n,r=e("@metamask/controller-utils"),o=e("reselect"),s=e("../helpers/constants/transactions"),i=(n=e("../helpers/utils/tx-helper"))&&n.__esModule?n:{default:n},l=e("../../shared/constants/transaction"),u=e("../../shared/modules/transaction.utils"),c=e("../../shared/modules/conversion.utils"),d=e("../ducks/metamask/metamask"),p=e("./selectors"),m=e("./approvals"),f=e("./util");const g=[l.TransactionType.cancel,l.TransactionType.retry],E=e=>e.metamask.unapprovedMsgs;a.unapprovedMsgsSelector=E;const T=(0,f.createDeepEqualSelector)((e=>{const{transactions:t,networkId:a}=e.metamask??{};if(null==t||!t.length)return[];const{chainId:n}=(0,d.getProviderConfig)(e);return t.filter((e=>(0,u.transactionMatchesNetwork)(e,n,a)))}),(e=>e));a.getCurrentNetworkTransactions=T;const _=(0,f.createDeepEqualSelector)((e=>T(e).filter((e=>e.status===l.TransactionStatus.unapproved)).reduce(((e,t)=>(e[t.id]=t,e)),{})),(e=>e));a.getUnapprovedTransactions=_;const h=(0,f.createDeepEqualSelector)((e=>{const{incomingTransactionsPreferences:t}=e.metamask;if(!t)return[];const a=T(e),n=(0,p.getSelectedAddress)(e);return a.filter((e=>e.type===l.TransactionType.incoming&&e.txParams.to===n))}),(e=>e));a.incomingTxListSelector=h;const S=e=>e.metamask.unapprovedPersonalMsgs;a.unapprovedPersonalMsgsSelector=S;const v=e=>e.metamask.unapprovedDecryptMsgs;a.unapprovedDecryptMsgsSelector=v;const y=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;a.unapprovedEncryptionPublicKeyMsgsSelector=y;const C=e=>e.metamask.unapprovedTypedMessages;a.unapprovedTypedMessagesSelector=C;const b=e=>{var t,a,n;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(a=t.smartTransactions)||void 0===a||null===(n=a[(0,p.getCurrentChainId)(e)])||void 0===n?void 0:n.filter((e=>!e.confirmed)).map((e=>{var t;return{...e,transactionType:l.TransactionType.smart,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?l.SmartTransactionStatus.cancelled:e.status}}))};a.smartTransactionsListSelector=b;const w=(0,o.createSelector)(p.getSelectedAddress,T,b,((e,t=[],a=[])=>t.filter((({txParams:t})=>t.from===e)).concat(a)));a.selectedAddressTxListSelector=w;const k=(0,o.createSelector)(E,S,v,y,C,p.deprecatedGetCurrentNetworkId,p.getCurrentChainId,((e={},t={},a={},n={},r={},o,s)=>(0,i.default)({},e,t,a,n,r,o,s)||[]));a.unapprovedMessagesSelector=k;const I=(0,o.createSelector)(k,h,((e=[],t=[])=>e.concat(t)));a.transactionSubSelector=I;const A=(0,o.createSelector)(I,w,((e=[],t=[])=>t.concat(e).sort(((e,t)=>t.time-e.time))));a.transactionsSelector=A;const O=(e,t)=>{const{primaryTransaction:{time:a}={}}=t;let n=e.length;for(let t=0;t<e.length;t++){const r=e[t],{primaryTransaction:{time:o}={}}=r;if(o>a){n=t;break}}e.splice(n,0,t)},N=(0,o.createSelector)(A,((e=[])=>{const t=[],a=[],n=[],r={};e.forEach((e=>{const{txParams:{nonce:o}={},status:i,type:u,time:d,txReceipt:p}=e;if(void 0===o||u===l.TransactionType.incoming){const n={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:o};u===l.TransactionType.incoming?a.push(n):O(t,n)}else if(o in r){var m,f,E;const t=r[o];((e,t)=>{const{time:a}=t;let n=e.length;for(let t=0;t<e.length;t++)if(e[t].time>a){n=t;break}e.splice(n,0,t)})(t.transactions,e);const{primaryTransaction:{time:a=0}={},initialTransaction:{time:n=0}={}}=t,c={isOnChainFailure:"0x0"===(null==p?void 0:p.status),isEphemeral:i===l.TransactionStatus.failed&&"0x0"!==(null==p?void 0:p.status),isRetryOrCancel:g.includes(u),occurredAfterPrimary:d>a,hasPriorityStatus:i in s.PRIORITY_STATUS_HASH,isConfirmed:i===l.TransactionStatus.confirmed,occurredBeforeInitial:d<n,isValidRetry:u===l.TransactionType.retry&&(i in s.PRIORITY_STATUS_HASH||i===l.TransactionStatus.dropped),isValidCancel:u===l.TransactionType.cancel&&(i in s.PRIORITY_STATUS_HASH||i===l.TransactionStatus.dropped)};c.eligibleForInitial=!c.isRetryOrCancel&&!c.isEphemeral,c.shouldBePrimary=c.isConfirmed||c.isOnChainFailure;const T={isEphemeral:t.primaryTransaction.status===l.TransactionStatus.failed&&"0x0"!==(null===(m=t.primaryTransaction)||void 0===m||null===(f=m.txReceipt)||void 0===f?void 0:f.status)},_={isEphemeral:t.initialTransaction.status===l.TransactionStatus.failed&&"0x0"!==(null===(E=t.initialTransaction.txReceipt)||void 0===E?void 0:E.status)};(c.shouldBePrimary||T.isEphemeral||c.occurredAfterPrimary&&c.hasPriorityStatus)&&(t.primaryTransaction=e),(c.occurredBeforeInitial&&c.eligibleForInitial||_.isEphemeral&&c.eligibleForInitial)&&(t.initialTransaction=e),c.isValidRetry&&(t.hasRetried=!0),c.isValidCancel&&(t.hasCancelled=!0)}else r[o]={nonce:o,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===l.TransactionType.retry&&(e.status in s.PRIORITY_STATUS_HASH||e.status===l.TransactionStatus.dropped),hasCancelled:e.type===l.TransactionType.cancel&&(e.status in s.PRIORITY_STATUS_HASH||e.status===l.TransactionStatus.dropped)},((e,t)=>{let a=e.length;for(let n=0;n<e.length;n++){const r=e[n];if(Number((0,c.hexToDecimal)(r))>Number((0,c.hexToDecimal)(t))){a=n;break}}e.splice(a,0,t)})(n,o)}));const o=n.map((e=>r[e]));return((e,t)=>{t.forEach((t=>{O(e,t)}))})(o,a),t.concat(o).map((e=>{var t;if(g.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!g.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))}));a.nonceSortedTransactionsSelector=N;const x=(0,o.createSelector)(N,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in s.PENDING_STATUS_HASH))));a.nonceSortedPendingTransactionsSelector=x;const P=(0,o.createSelector)(N,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in s.PENDING_STATUS_HASH))).reverse()));a.nonceSortedCompletedTransactionsSelector=P;const M=(0,o.createSelector)(A,((e=[])=>e.filter((e=>e.status===l.TransactionStatus.submitted))));a.submittedPendingTransactionsSelector=M;const D=e=>{const t=_(e),a=(0,m.getApprovalRequestsByType)(e,r.ApprovalType.Transaction),n=(0,p.getCurrentChainId)(e);return a.filter((({id:e})=>t[e]&&(0,u.transactionMatchesNetwork)(t[e],n))).length>0},R=[r.ApprovalType.EthDecrypt,r.ApprovalType.EthGetEncryptionPublicKey,r.ApprovalType.EthSign,r.ApprovalType.EthSignTypedData,r.ApprovalType.PersonalSign]}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[5483,{lodash:3676,reselect:4118},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.createDeepEqualSelector=void 0;var n=e("lodash"),r=e("reselect");const o=(0,r.createSelectorCreator)(r.defaultMemoize,n.isEqual);a.createDeepEqualSelector=o}}},{package:"$root$",file:"ui/selectors/util.js"}],[5484,{"../../../shared/constants/metametrics":4353,"../../../shared/modules/mv3.utils":4386,"../actions":5486,pify:3815},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a._setBackgroundConnection=async function(e){l=e,u=(0,r.default)(l),s.isManifestV3&&(f&&console.warn("_setBackgroundConnection called while a queue was processing and not disconnected yet"),async function(){if(f)return;f=!0;try{if(c.length>0){const e={category:o.MetaMetricsEventCategory.ServiceWorkers,event:o.MetaMetricsEventName.ServiceWorkerRestarted,properties:{service_worker_action_queue_methods:c.map((e=>e.request.method))}};(0,i.trackMetaMetricsEvent)(e)}for(;null!==(e=l)&&void 0!==e&&e.connectionStream.readable&&c.length>0;){var e;const t=c.shift();await m({action:t,disconnectSideeffect:()=>c.unshift(t)})}}catch(e){console.error(e)}f=!1}())},a.callBackgroundMethod=void 0,a.dropQueue=function(e){e||c.forEach((({reject:e})=>e(Error("Background operation cancelled while waiting for connection."))));c.length=0},a.generateActionId=void 0,a.submitRequestToBackground=function(e,t,a=d()){var n;if(s.isManifestV3)return new Promise(((n,r)=>{p({actionId:a,request:{method:e,args:t??[]},resolve:n,reject:r})}));return null===(n=u)||void 0===n?void 0:n[e](...t??[])};var n,r=(n=e("pify"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/metametrics"),s=e("../../../shared/modules/mv3.utils"),i=e("../actions");let l=null,u=null;const c=[],d=()=>Date.now()+Math.random();a.generateActionId=d;const p=e=>{var t;c.some((t=>t.actionId===e.actionId))||(null!==(t=l)&&void 0!==t&&t.connectionStream.readable?m({action:e,disconnectSideeffect:()=>c.push(e)}):c.push(e))};async function m({action:e,disconnectSideeffect:t}){const{request:{method:a,args:n},resolve:r,reject:o}=e;try{var s;r(await(null===(s=u)||void 0===s?void 0:s[a](...n)))}catch(a){var i;null!==(i=l)&&void 0!==i&&i.DisconnectError&&a instanceof l.DisconnectError?t(e):o(a)}}a.callBackgroundMethod=(e,t,a,n=d())=>{if(s.isManifestV3){p({actionId:n,request:{method:e,args:t??[]},resolve:e=>a(undefined,e),reject:e=>a(e,undefined)})}else{var r;null===(r=l)||void 0===r||r[e](...t,a)}};let f=!1}}},{package:"$root$",file:"ui/store/action-queue/index.ts"}],[5485,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.UPDATE_TRANSACTION_PARAMS=a.UPDATE_METAMASK_STATE=a.UPDATE_CUSTOM_NONCE=a.UNLOCK_SUCCEEDED=a.UNLOCK_IN_PROGRESS=a.UNLOCK_FAILED=a.TRANSACTION_ERROR=a.TOGGLE_NETWORK_MENU=a.TOGGLE_GAS_LOADING_ANIMATION=a.TOGGLE_CURRENCY_INPUT_SWITCH=a.TOGGLE_ACCOUNT_MENU=a.SHOW_SEND_TOKEN_PAGE=a.SHOW_PRIVATE_KEY=a.SHOW_LOADING=a.SHOW_IPFS_MODAL_OPEN=a.SHOW_IPFS_MODAL_CLOSE=a.SHOW_CONF_TX_PAGE=a.SHOW_ACCOUNTS_PAGE=a.SET_WEBHID_CONNECTED_STATUS=a.SET_SMART_TRANSACTIONS_ERROR=a.SET_SELECTED_NETWORK_CONFIGURATION_ID=a.SET_REQUEST_ACCOUNT_TABS=a.SET_REMOVE_NFT_MESSAGE=a.SET_PENDING_TOKENS=a.SET_PARTICIPATE_IN_METAMETRICS=a.SET_OPEN_METAMASK_TAB_IDS=a.SET_NEXT_NONCE=a.SET_NEW_TOKENS_IMPORTED=a.SET_NEW_NFT_ADDED_MESSAGE=a.SET_NEW_NETWORK_ADDED=a.SET_MOUSE_USER_STATE=a.SET_LEDGER_TRANSPORT_STATUS=a.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=a.SET_FIRST_TIME_FLOW_TYPE=a.SET_CUSTOM_TOKEN_AMOUNT=a.SET_CURRENT_LOCALE=a.SET_ACCOUNT_LABEL=a.SET_ACCOUNT_DETAILS_ADDRESS=a.SELECT_ACTION_MODAL_OPEN=a.SELECT_ACTION_MODAL_CLOSE=a.SELECTED_ADDRESS_CHANGED=a.SELECTED_ACCOUNT_CHANGED=a.QR_CODE_DETECTED=a.ONBOARDED_IN_THIS_UI_SESSION=a.NETWORK_DROPDOWN_OPEN=a.NETWORK_DROPDOWN_CLOSE=a.MODAL_OPEN=a.MODAL_CLOSE=a.LOCK_METAMASK=a.LOADING_METHOD_DATA_STARTED=a.LOADING_METHOD_DATA_FINISHED=a.IMPORT_TOKENS_POPOVER_OPEN=a.IMPORT_TOKENS_POPOVER_CLOSE=a.IMPORT_NFTS_MODAL_OPEN=a.IMPORT_NFTS_MODAL_CLOSE=a.HIDE_WHATS_NEW_POPUP=a.HIDE_WARNING=a.HIDE_LOADING=a.GO_HOME=a.GAS_FEE_ESTIMATES_UPDATED=a.DISPLAY_WARNING=a.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=a.COMPLETE_ONBOARDING=a.COMPLETED_TX=a.CLOSE_WELCOME_SCREEN=a.CLEAR_PENDING_TOKENS=a.CLEAR_ACCOUNT_DETAILS=a.CHAIN_CHANGED=a.CAPTURE_SINGLE_EXCEPTION=a.ALERT_OPEN=a.ALERT_CLOSE=a.ADDRESS_BOOK_UPDATED=a.ACCOUNT_CHANGED=void 0;a.GO_HOME="GO_HOME";a.MODAL_OPEN="UI_MODAL_OPEN";a.MODAL_CLOSE="UI_MODAL_CLOSE";a.ALERT_OPEN="UI_ALERT_OPEN";a.ALERT_CLOSE="UI_ALERT_CLOSE";a.QR_CODE_DETECTED="UI_QR_CODE_DETECTED";a.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN";a.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE";a.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN";a.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE";a.SHOW_IPFS_MODAL_OPEN="UI_IPFS_MODAL_OPEN";a.SHOW_IPFS_MODAL_CLOSE="UI_IPFS_MODAL_CLOSE";a.IMPORT_TOKENS_POPOVER_OPEN="UI_IMPORT_TOKENS_POPOVER_OPEN";a.IMPORT_TOKENS_POPOVER_CLOSE="UI_IMPORT_TOKENS_POPOVER_CLOSE";a.SELECT_ACTION_MODAL_OPEN="UI_SELECT_ACTION_MODAL_OPEN";a.SELECT_ACTION_MODAL_CLOSE="UI_SELECT_ACTION_MODAL_CLOSE";a.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE";a.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED";a.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED";a.ACCOUNT_CHANGED="ACCOUNT_CHANGED";a.CHAIN_CHANGED="CHAIN_CHANGED";a.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED";a.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED";a.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN";a.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS";a.UNLOCK_FAILED="UNLOCK_FAILED";a.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED";a.LOCK_METAMASK="LOCK_METAMASK";a.DISPLAY_WARNING="DISPLAY_WARNING";a.HIDE_WARNING="HIDE_WARNING";a.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION";a.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE";a.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE";a.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE";a.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY";a.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL";a.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS";a.SET_ACCOUNT_DETAILS_ADDRESS="SET_ACCOUNT_DETAILS_ADDRESS";a.COMPLETED_TX="COMPLETED_TX";a.TRANSACTION_ERROR="TRANSACTION_ERROR";a.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS";a.SET_NEXT_NONCE="SET_NEXT_NONCE";a.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH";a.SHOW_LOADING="SHOW_LOADING_INDICATION";a.HIDE_LOADING="HIDE_LOADING_INDICATION";a.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU";a.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU";a.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE";a.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS";a.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE";a.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING";a.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION";a.SET_MOUSE_USER_STATE="SET_MOUSE_USER_STATE";a.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS";a.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS";a.SET_PENDING_TOKENS="SET_PENDING_TOKENS";a.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS";a.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE";a.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID";a.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED";a.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE";a.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE";a.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED";a.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED";a.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS";a.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS";a.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP";a.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION";a.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR";a.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE";a.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH";a.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED";a.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}]],[],{});