LavaPack.loadBundle([[5217,{"../../../../../shared/constants/metametrics":4130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,o){const{origin:i,snapName:c}=e,{trackEvent:u}=o,d=e=>{u({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})};return{content:[{element:"CreateSnapAccount",key:"create-snap-account",props:{snapId:i,snapName:c}}],cancelText:t("cancel"),submitText:t("create"),onLoad:()=>d(r.MetaMetricsEventName.AddSnapAccountViewed),onSubmit:()=>{d(r.MetaMetricsEventName.AddSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:()=>{d(r.MetaMetricsEventName.AddSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)}}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-snap-account.js"}],[5218,{"../ResultTemplate":5209,"@metamask/controller-utils":1077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils");const a=new(e("../ResultTemplate").ResultTemplate)(r.ApprovalType.ResultError),s={getValues:a.getValues.bind(a)};n.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/error.js"}],[5219,{"../../../../../shared/constants/app":4120,"../../../../store/actions":5521,"./add-ethereum-chain":5216,"./create-snap-account":5217,"./error":5218,"./remove-snap-account":5220,"./smart-transaction-status-page":5221,"./snap-account-redirect":5222,"./snaps/snap-alert/snap-alert":5223,"./snaps/snap-confirmation/snap-confirmation":5224,"./snaps/snap-prompt/snap-prompt":5225,"./success":5226,"./switch-ethereum-chain":5227,"@metamask/controller-utils":1077,lodash:3477},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=void 0,n.getTemplateAlerts=async function(e,t){var n;const r=null===(n=E[e.type])||void 0===n?void 0:n.getAlerts,a=r?await r(e,t):[];if(!Array.isArray(a))throw new Error(`Template alerts must be an array, received: ${a}`);if(a.some((e=>(null==e?void 0:e.id)===undefined)))throw new Error(`Template alert entries must be objects with an id key. Received: ${a}`);return a},n.getTemplateState=async function(e){var t;const n=(null===(t=E[e.type])||void 0===t?void 0:t.getState)??_,r=await n(e);if("object"!=typeof r||Array.isArray(r))throw new Error(`Template state must be an object, received: ${r}`);if(null===r||r===undefined)return{};return r},n.getTemplateValues=function(e,t,n,a,o,i){var c;const u=null===(c=E[e.type])||void 0===c?void 0:c.getValues;if(!u)throw new Error(`MESSAGE_TYPE: '${e.type}' is not specified in approval templates`);const d=function(e){return{rejectPendingApproval:(...t)=>e((0,s.rejectPendingApproval)(...t)),resolvePendingApproval:(...t)=>e((0,s.resolvePendingApproval)(...t)),upsertNetworkConfiguration:(...t)=>e((0,s.upsertNetworkConfiguration)(...t)),setNewNetworkAdded:(...t)=>e((0,s.setNewNetworkAdded)(...t)),deleteInterface:(...t)=>e((0,s.deleteInterface)(...t))}}(n),l=u(e,t,d,a,o,i),p=(0,r.omit)(l,S),g=(0,r.pick)(l,S);if(p.length>0)throw new Error(`Received extraneous keys from ${e.type}.getValues. These keys are not passed to the confirmation page: ${Object.keys(p)}`);return g};var r=e("lodash"),a=e("@metamask/controller-utils"),s=e("../../../../store/actions"),o=e("../../../../../shared/constants/app"),i=y(e("./smart-transaction-status-page")),c=y(e("./create-snap-account")),u=y(e("./remove-snap-account")),d=y(e("./snap-account-redirect")),l=y(e("./add-ethereum-chain")),p=y(e("./switch-ethereum-chain")),g=y(e("./success")),m=y(e("./error")),f=y(e("./snaps/snap-alert/snap-alert")),h=y(e("./snaps/snap-confirmation/snap-confirmation")),T=y(e("./snaps/snap-prompt/snap-prompt"));function y(e){return e&&e.__esModule?e:{default:e}}const E={[a.ApprovalType.AddEthereumChain]:l.default,[a.ApprovalType.SwitchEthereumChain]:p.default,[a.ApprovalType.ResultSuccess]:g.default,[a.ApprovalType.ResultError]:m.default,[o.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage]:i.default,[a.ApprovalType.SnapDialogAlert]:f.default,[a.ApprovalType.SnapDialogConfirmation]:h.default,[a.ApprovalType.SnapDialogPrompt]:T.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation]:c.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval]:u.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect]:d.default},S=(n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=Object.keys(E),["cancelText","content","onLoad","onCancel","onSubmit","networkDisplay","submitText","loadingText","hideSubmitButton"]);async function _(){return{}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/index.js"}],[5220,{"../../../../../shared/constants/metametrics":4130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,o){const{origin:i,snapName:c}=e,{publicAddress:u}=e.requestData,{trackEvent:d}=o,l=e=>{d({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})};return{content:[{element:"RemoveSnapAccount",key:"remove-snap-account",props:{snapId:i,snapName:c,publicAddress:u}}],cancelText:t("cancel"),submitText:t("remove"),onLoad:()=>l(r.MetaMetricsEventName.RemoveSnapAccountViewed),onSubmit:()=>{l(r.MetaMetricsEventName.RemoveSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:()=>{l(r.MetaMetricsEventName.RemoveSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)}}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/remove-snap-account.js"}],[5221,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n,r){const{id:a,requestState:s}=e;return{content:[{element:"SmartTransactionStatusPage",key:"smart-transaction-status-page",props:{requestState:s,onCloseExtension:()=>{n.resolvePendingApproval(a,!0)},onViewActivity:()=>{n.resolvePendingApproval(a,!0)}}}],hideSubmitButton:!0}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/smart-transaction-status-page.js"}],[5222,{"../../../../../shared/constants/metametrics":4130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,o){const{origin:i,snapName:c}=e,{url:u,message:d,isBlockedUrl:l}=e.requestData,{trackEvent:p}=o,g=e=>{p({event:e,category:r.MetaMetricsEventCategory.Transactions,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},m=r=>u!==undefined&&null!==u&&u.length>0&&!1===l?{submitText:t("goToSite"),onSubmit:()=>{g(r),n.resolvePendingApproval(e.id,!0)}}:{};return{content:[{element:"SnapAccountRedirect",key:"snap-account-redirect",props:{url:u,message:d,snapId:i,snapName:c,isBlockedUrl:l,...m(r.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectSnapUrlClicked)}}],cancelText:t("close"),onLoad:()=>g(r.MetaMetricsEventName.SnapAccountTransactionFinalizeViewed),onCancel:()=>{g(r.MetaMetricsEventName.SnapAccountTransactionFinalizeClosed),n.resolvePendingApproval(e.id,!1)},...m(r.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectGoToSiteClicked)}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snap-account-redirect.js"}],[5223,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{submitText:t("ok").toUpperCase(),onSubmit:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-alert/snap-alert.js"}],[5224,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{cancelText:t("reject"),submitText:t("approveButtonText"),onSubmit:()=>{n.resolvePendingApproval(e.id,!0),n.deleteInterface(r)},onCancel:()=>{n.resolvePendingApproval(e.id,!1),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-confirmation/snap-confirmation.js"}],[5225,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{cancelText:t("cancel"),submitText:t("submit"),onSubmit:t=>{n.resolvePendingApproval(e.id,t),n.deleteInterface(r)},onCancel:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-prompt/snap-prompt.js"}],[5226,{"../ResultTemplate":5209,"@metamask/controller-utils":1077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils");const a=new(e("../ResultTemplate").ResultTemplate)(r.ApprovalType.ResultSuccess),s={getValues:a.getValues.bind(a)};n.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/success.js"}],[5227,{"../../../../helpers/constants/design-system":4914,"eth-rpc-errors":2865},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),a=e("../../../../helpers/constants/design-system");const s={id:"PENDING_TX_DROP_NOTICE",severity:a.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"switchingNetworksCancelsPendingConfirmations"}}}};const o={getAlerts:async function(e,t){const n=[];return t.unapprovedTxsCount>0&&n.push(s),n},getValues:function(e,t,n){return{content:[{element:"Typography",key:"title",children:t("switchEthereumChainConfirmationTitle"),props:{variant:a.TypographyVariant.H3,align:"center",fontWeight:"normal",boxProps:{margin:[0,0,2],padding:[0,4,0,4]}}},{element:"Typography",key:"description",children:t("switchEthereumChainConfirmationDescription"),props:{variant:a.TypographyVariant.H7,color:a.TextColor.textAlternative,align:"center",boxProps:{padding:[0,4,0,4]}}},{element:"Box",key:"status-box",props:{justifyContent:a.JustifyContent.center},children:{element:"ConfirmationNetworkSwitch",key:"network-being-switched",props:{toNetwork:e.requestData.toNetworkConfiguration,fromNetwork:e.requestData.fromNetworkConfiguration}}}],cancelText:t("cancel"),submitText:t("switchNetwork"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData.toNetworkConfiguration),onCancel:()=>n.rejectPendingApproval(e.id,r.ethErrors.provider.userRejectedRequest().serialize()),networkDisplay:!0}}};n.default=o}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/switch-ethereum-chain.js"}],[5228,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e===undefined?undefined:"string"==typeof e?e:Array.isArray(e)?e.map(r):{key:e.key,element:e.name,props:e.properties,children:r(e.children)}}Object.defineProperty(n,"__esModule",{value:!0}),n.processError=function(e,t){const n=r(e)||t;if("string"!=typeof n)return n;return{key:"error",element:"ActionableMessage",props:{type:"danger",message:n}}},n.processHeader=function(e){return r(e)},n.processString=function(e,t){const n=r(e)||t;if("string"!=typeof n)return n;return a=n,function(e,t,n){let r=0,a=0;const s=Array.from(e.matchAll(t)),o=[];for(const t of s){const s=e.substring(r,t.index);s.length&&o.push(s);const i=n(t[1],a);o.push(i),r=t.index+t[0].length,a+=1}const i=e.substring(r);return i.length&&o.push(i),o}(a,/\*\*(.+?)\*\*/gu,((e,t)=>({key:`bold-${t}`,element:"b",children:e})));var a}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/util.ts"}],[525,{"@ethereumjs/util":400,"@keystonehq/bc-ur-registry":547,buffer:2634,hdkey:3245,uuid:4067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("@keystonehq/bc-ur-registry"),s=e("uuid"),o=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,i=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new a.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new a.RegistryType("eth-signature",402),ETH_NFT_ITEM:new a.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=a.extend;var l,p;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(l||(l={})),(p=n.DataType||(n.DataType={}))[p.transaction=1]="transaction",p[p.typedData=2]="typedData",p[p.personalMessage=3]="personalMessage",p[p.typedTransaction=4]="typedTransaction";class g extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[l.requestId]=new a.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[l.address]=this.address),this.chainId&&(e[l.chainId]=Number(this.chainId)),this.origin&&(e[l.origin]=this.origin),e[l.signData]=this.signData,e[l.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[l.derivationPath]=t,new a.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,r,o,i,c,u,d){const l=r.replace(/[m|M]\//,"").split("/"),p=new a.CryptoKeypath(l.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new a.PathComponent({index:t,hardened:n})})),t.from(o,"hex"));return new g({requestId:i?t.from(s.parse(i)):undefined,signData:e,dataType:n,derivationPath:p,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):undefined,origin:d||undefined})}}g.fromDataItem=e=>{const t=e.getData(),n=t[l.signData],r=t[l.dataType],s=a.CryptoKeypath.fromDataItem(t[l.derivationPath]),o=t[l.chainId]?t[l.chainId]:undefined,i=t[l.address]?t[l.address]:undefined,c=t[l.requestId]?t[l.requestId].getData():undefined,u=t[l.origin]?t[l.origin]:undefined;return new g({requestId:c,signData:n,dataType:r,chainId:o,derivationPath:s,address:i,origin:u})},g.fromCBOR=e=>{const t=u(e);return g.fromDataItem(t)};const{RegistryTypes:m,decodeToDataItem:f}=a.extend;var h;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(h||(h={}));class T extends a.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[h.requestId]=new a.DataItem(this.requestId,m.UUID.getTag())),this.origin&&(e[h.origin]=this.origin),e[h.signature]=this.signature,new a.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}T.fromDataItem=e=>{const t=e.getData(),n=t[h.signature],r=t[h.requestId]?t[h.requestId].getData():undefined;return new T(n,r,t[h.origin])},T.fromCBOR=e=>{const t=f(e);return T.fromDataItem(t)};const{decodeToDataItem:y}=a.extend;var E;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(E||(E={}));class S extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[E.chainId]=this.chainId,e[E.name]=this.name,e[E.contractAddress]=this.contractAddress,e[E.contractName]=this.contractName,e[E.mediaData]=this.mediaData,new a.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,r,a){return new S({chainId:e,contractAddress:t,contractName:n,mediaData:a,name:r})}}S.fromDataItem=e=>{const t=e.getData(),n=t[E.chainId],r=t[E.name],a=t[E.mediaData],s=t[E.contractAddress],o=t[E.contractName];return new S({chainId:n,name:r,contractAddress:s,contractName:o,mediaData:a})},S.fromCBOR=e=>{const t=y(e);return S.fromDataItem(t)};const _=(e,t)=>{const n=o.fromExtendedKey(e).derive(t),r="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(r)};a.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(a).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})),n.ETHNFTItem=S,n.ETHSignature=T,n.EthSignRequest=g,n.findHDPathFromAddress=(e,t,n,r)=>{for(let a=0;a<n;a++){const n=_(t,`M/0/${a}`);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${a}`}return null},n.generateAddressFromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.development.js"}],[5253,{"../../../selectors/approvals":5509,"@metamask/controller-utils":1077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.currentConfirmationSelector=n.confirmSelector=void 0,n.latestPendingConfirmationSelector=function(e){return o(e).sort(((e,t)=>t.time-e.time))[0]},n.pendingConfirmationsSelector=o,n.pendingConfirmationsSortedSelector=function(e){return(0,a.getPendingApprovals)(e).filter((({type:e})=>s.includes(e))).sort(((e,t)=>e.time-t.time))};var r=e("@metamask/controller-utils"),a=e("../../../selectors/approvals");const s=[r.ApprovalType.EthSign,r.ApprovalType.PersonalSign,r.ApprovalType.EthSignTypedData,r.ApprovalType.Transaction];function o(e){return(0,a.getPendingApprovals)(e).filter((({type:e})=>s.includes(e)))}n.confirmSelector=e=>e.confirm;n.currentConfirmationSelector=e=>e.confirm.currentConfirmation}}},{package:"$root$",file:"ui/pages/confirmations/selectors/confirm.ts"}],[526,{"@ethereumjs/util":400,"@keystonehq/bc-ur-registry":547,buffer:2634,hdkey:3245,uuid:4067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("@keystonehq/bc-ur-registry"),s=e("uuid"),o=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,i=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new a.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new a.RegistryType("eth-signature",402),ETH_NFT_ITEM:new a.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=a.extend;var l,p;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(l||(l={})),(p=n.DataType||(n.DataType={}))[p.transaction=1]="transaction",p[p.typedData=2]="typedData",p[p.personalMessage=3]="personalMessage",p[p.typedTransaction=4]="typedTransaction";class g extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[l.requestId]=new a.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[l.address]=this.address),this.chainId&&(e[l.chainId]=Number(this.chainId)),this.origin&&(e[l.origin]=this.origin),e[l.signData]=this.signData,e[l.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[l.derivationPath]=t,new a.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,r,o,i,c,u,d){const l=r.replace(/[m|M]\//,"").split("/"),p=new a.CryptoKeypath(l.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new a.PathComponent({index:t,hardened:n})})),t.from(o,"hex"));return new g({requestId:i?t.from(s.parse(i)):void 0,signData:e,dataType:n,derivationPath:p,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):void 0,origin:d||void 0})}}g.fromDataItem=e=>{const t=e.getData(),n=t[l.signData],r=t[l.dataType],s=a.CryptoKeypath.fromDataItem(t[l.derivationPath]),o=t[l.chainId]?t[l.chainId]:void 0,i=t[l.address]?t[l.address]:void 0,c=t[l.requestId]?t[l.requestId].getData():void 0;return new g({requestId:c,signData:n,dataType:r,chainId:o,derivationPath:s,address:i,origin:t[l.origin]?t[l.origin]:void 0})},g.fromCBOR=e=>{const t=u(e);return g.fromDataItem(t)};const{RegistryTypes:m,decodeToDataItem:f}=a.extend;var h;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(h||(h={}));class T extends a.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[h.requestId]=new a.DataItem(this.requestId,m.UUID.getTag())),this.origin&&(e[h.origin]=this.origin),e[h.signature]=this.signature,new a.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}T.fromDataItem=e=>{const t=e.getData(),n=t[h.signature],r=t[h.requestId]?t[h.requestId].getData():void 0;return new T(n,r,t[h.origin])},T.fromCBOR=e=>{const t=f(e);return T.fromDataItem(t)};const{decodeToDataItem:y}=a.extend;var E;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(E||(E={}));class S extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[E.chainId]=this.chainId,e[E.name]=this.name,e[E.contractAddress]=this.contractAddress,e[E.contractName]=this.contractName,e[E.mediaData]=this.mediaData,new a.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,r,a){return new S({chainId:e,contractAddress:t,contractName:n,mediaData:a,name:r})}}S.fromDataItem=e=>{const t=e.getData();return new S({chainId:t[E.chainId],name:t[E.name],contractAddress:t[E.contractAddress],contractName:t[E.contractName],mediaData:t[E.mediaData]})},S.fromCBOR=e=>{const t=y(e);return S.fromDataItem(t)};const _=(e,t)=>{const n=o.fromExtendedKey(e).derive(t),r="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(r)};a.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(a).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})),n.ETHNFTItem=S,n.ETHSignature=T,n.EthSignRequest=g,n.findHDPathFromAddress=(e,t,n,r)=>{for(let a=0;a<n;a++){const n=_(t,"M/0/"+a);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${a}`}return null},n.generateAddressFromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.production.min.js"}],[527,{"./bc-ur-registry-eth.cjs.development.js":525,"./bc-ur-registry-eth.cjs.production.min.js":526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/index.js"}],[528,{"./RegistryItem":539,"./RegistryType":540,"./lib":550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Bytes=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");class o extends a.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>s.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new r.DataItem(this.bytes)}}n.Bytes=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/Bytes.js"}],[529,{".":547,"./RegistryItem":539,"./RegistryType":540,"./lib":550,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoAccount=void 0;const r=e("."),a=e("./lib"),s=e("./RegistryItem"),o=e("./RegistryType");var i;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(i||(i={}));class c extends s.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[i.outputDescriptors]=this.outputDescriptors.map((e=>e.toDataItem()))),new a.DataItem(e)}}}n.CryptoAccount=c,c.fromDataItem=e=>{const n=e.getData(),a=t.alloc(4),s=n[i.masterFingerprint];s&&a.writeUInt32BE(s,0);const o=n[i.outputDescriptors].map((e=>r.CryptoOutput.fromDataItem(e)));return new c(a,o)},c.fromCBOR=e=>{const t=(0,a.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoAccount.js"}],[5291,{"../../../../shared/constants/common":4122,"../../../../shared/constants/gas":4125,"../../../../shared/modules/Numeric":4154},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE=n.REQUIRED_ERROR=n.RECIPIENT_TYPES=n.NO_RESOLUTION_FOR_DOMAIN=n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR=n.NEGATIVE_ETH_ERROR=n.MIN_GAS_TOTAL=n.MIN_GAS_PRICE_HEX=n.MIN_GAS_PRICE_GWEI=n.MIN_GAS_PRICE_DEC=n.MIN_GAS_LIMIT_DEC=n.MAX_GAS_LIMIT_DEC=n.KNOWN_RECIPIENT_ADDRESS_WARNING=n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR=n.INVALID_RECIPIENT_ADDRESS_ERROR=n.INSUFFICIENT_TOKENS_ERROR=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR=n.INSUFFICIENT_FUNDS_ERROR=n.HIGH_FEE_WARNING_MULTIPLIER=n.FLOAT_TOKENS_ERROR=n.ENS_UNKNOWN_ERROR=n.ENS_REGISTRATION_ERROR=n.ENS_NO_ADDRESS_FOR_NAME=n.ENS_NOT_FOUND_ON_NETWORK=n.ENS_ILLEGAL_CHARACTER=n.DOMAIN_NOT_SUPPORTED_ON_NETWORK=n.CONTRACT_ADDRESS_ERROR=n.CONFUSING_ENS_ERROR=void 0;var r=e("../../../../shared/constants/gas"),a=e("../../../../shared/modules/Numeric"),s=e("../../../../shared/constants/common");const o=n.MIN_GAS_PRICE_DEC="0",i=n.MIN_GAS_PRICE_HEX=parseInt(o,10).toString(16);n.MIN_GAS_LIMIT_DEC=new a.Numeric("21000",10),n.MAX_GAS_LIMIT_DEC="7920027",n.HIGH_FEE_WARNING_MULTIPLIER=1.5,n.MIN_GAS_PRICE_GWEI=new a.Numeric(i,16,s.EtherDenomination.WEI).toDenomination(s.EtherDenomination.GWEI).round(1).toPrefixedHexString(),n.MIN_GAS_TOTAL=new a.Numeric(r.MIN_GAS_LIMIT_HEX,16).times(new a.Numeric(i,16,s.EtherDenomination.WEI)).toPrefixedHexString(),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE="0xa9059cbb",n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE="0x23b872dd",n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE="0xf242432a",n.INSUFFICIENT_FUNDS_ERROR="insufficientFunds",n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR="insufficientFundsForGas",n.INSUFFICIENT_TOKENS_ERROR="insufficientTokens",n.NEGATIVE_ETH_ERROR="negativeETH",n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR="negativeOrZeroAmountToken",n.FLOAT_TOKENS_ERROR="floatAmountToken",n.INVALID_RECIPIENT_ADDRESS_ERROR="invalidAddressRecipient",n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR="invalidAddressRecipientNotEthNetwork",n.REQUIRED_ERROR="required",n.KNOWN_RECIPIENT_ADDRESS_WARNING="knownAddressRecipient",n.CONTRACT_ADDRESS_ERROR="contractAddressError",n.CONFUSING_ENS_ERROR="confusingEnsDomain",n.ENS_NO_ADDRESS_FOR_NAME="noAddressForName",n.ENS_NOT_FOUND_ON_NETWORK="ensNotFoundOnCurrentNetwork",n.ENS_ILLEGAL_CHARACTER="ensIllegalCharacter",n.ENS_UNKNOWN_ERROR="ensUnknownError",n.ENS_REGISTRATION_ERROR="ensRegistrationError",n.DOMAIN_NOT_SUPPORTED_ON_NETWORK="domainNotSupportedOnNetwork",n.NO_RESOLUTION_FOR_DOMAIN="noDomainResolution",n.RECIPIENT_TYPES={SMART_CONTRACT:"SMART_CONTRACT",NON_CONTRACT:"NON_CONTRACT"}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.constants.js"}],[5293,{"../../../../app/scripts/lib/util":92,"../../../../shared/constants/transaction":4143,"../../../../shared/modules/Numeric":4154,"./send.constants":5291,"@metamask/abi-utils":992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=function(e,t,n=1.5){const r=new o.Numeric(e,16),a=new o.Numeric(t,16).times(new o.Numeric(.9,10)).round(0),s=r.times(new o.Numeric(n,10)).round(0);if(r.greaterThanOrEqualTo(a))return e;if(s.lessThan(a))return s.toString();return a.toString()},n.ellipsify=function(e,t=6,n=4){if(!e)return"";return`${e.slice(0,t)}...${e.slice(-n)}`},n.generateERC1155TransferData=d,n.generateERC20TransferData=c,n.generateERC721TransferData=u,n.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:n,amount:r}){switch(e.standard){case s.TokenStandard.ERC721:return u({toAddress:n,fromAddress:t,tokenId:e.tokenId});case s.TokenStandard.ERC1155:return d({toAddress:n,fromAddress:t,tokenId:e.tokenId});case s.TokenStandard.ERC20:default:return c({toAddress:n,amount:r,sendToken:e})}},n.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:n=1,gasTotal:r="0x0",primaryCurrency:a}){let s=new o.Numeric(e,16).add(new o.Numeric(r,16)),i=new o.Numeric(t,16);null!=a&&(s=s.applyConversionRate(n),i=i.applyConversionRate(n));return i.greaterThanOrEqualTo(s)},n.isERC1155BalanceSufficient=function({amount:e="0",tokenBalance:t}){const n=new o.Numeric(e,16);return new o.Numeric(t,10).greaterThanOrEqualTo(n)},n.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:n}){const r=new o.Numeric(e,16).shiftedBy(n);return new o.Numeric(t,16).greaterThanOrEqualTo(r)};var r=e("@metamask/abi-utils"),a=e("../../../../app/scripts/lib/util"),s=e("../../../../shared/constants/transaction"),o=e("../../../../shared/modules/Numeric"),i=e("./send.constants");function c({toAddress:e="0x0",amount:t="0x0",sendToken:n}){return n?i.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","uint256"],[(0,a.addHexPrefix)(e),(0,a.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function u({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n}){return n?i.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","address","uint256"],[(0,a.addHexPrefix)(t),(0,a.addHexPrefix)(e),BigInt(n)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function d({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n,amount:s="1",data:o="0"}){return n?i.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","address","uint256","uint256","bytes"],[(0,a.addHexPrefix)(t),(0,a.addHexPrefix)(e),BigInt(n),(0,a.addHexPrefix)(s),(0,a.addHexPrefix)(o)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.utils.js"}],[530,{"./RegistryItem":539,"./RegistryType":540,"./lib":550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoCoinInfo=n.Network=n.Type=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");var o,i,c;!function(e){e.type="1",e.network="2"}(o||(o={})),function(e){e[e.bitcoin=0]="bitcoin"}(i=n.Type||(n.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(c=n.Network||(n.Network={}));class u extends a.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||i.bitcoin,this.getNetwork=()=>this.network||c.mainnet,this.toDataItem=()=>{const e={};return this.type&&(e[o.type]=this.type),this.network&&(e[o.network]=this.network),new r.DataItem(e)}}}n.CryptoCoinInfo=u,u.fromDataItem=e=>{const t=e.getData(),n=t[o.type],r=t[o.network];return new u(n,r)},u.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoCoinInfo.js"}],[531,{"./RegistryItem":539,"./RegistryType":540,"./lib":550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoECKey=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");var o;!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(o||(o={}));class i extends a.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const e={};return this.curve&&(e[o.curve]=this.curve),this.privateKey!==undefined&&(e[o.private]=this.privateKey),e[o.data]=this.data,new r.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||undefined}}n.CryptoECKey=i,i.fromDataItem=e=>{const t=e.getData(),n=t[o.curve],r=t[o.private],a=t[o.data];if(!a)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new i({data:a,curve:n,privateKey:r})},i.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return i.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoECKey.js"}],[532,{"./CryptoCoinInfo":530,"./CryptoKeypath":533,"./RegistryItem":539,"./RegistryType":540,"./lib":550,bs58check:2638,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoHDKey=void 0;const r=e("bs58check"),a=e("./CryptoCoinInfo"),s=e("./CryptoKeypath"),o=e("./lib"),i=e("./RegistryItem"),c=e("./RegistryType");var u;!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(u||(u={}));class d extends i.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,n,a;let s,o,i=0,c=t.alloc(4).fill(0);if(this.isMaster())s=t.from("0488ADE4","hex"),o=0,i=0;else{o=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(n=this.getOrigin())||void 0===n?void 0:n.getDepth());const r=null===(a=this.getOrigin())||void 0===a?void 0:a.getComponents(),u=r[r.length-1];u&&(i=u.isHardened()?u.getIndex()+2147483648:u.getIndex(),this.getParentFingerprint()&&(c=this.getParentFingerprint())),s=this.isPrivateKey()?t.from("0488ADE4","hex"):t.from("0488B21E","hex")}const u=t.alloc(1);u.writeUInt8(o,0);const d=t.alloc(4);d.writeUInt32BE(i,0);const l=this.getChainCode(),p=this.getKey();return(0,r.encode)(t.concat([s,u,c,d,l,p]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,n,r,a,s,o;let i="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(i+=`${null===(r=null===(n=this.getOrigin())||void 0===n?void 0:n.getSourceFingerprint())||void 0===r?void 0:r.toString("hex")}/${null===(a=this.getOrigin())||void 0===a?void 0:a.getPath()}`),i+=this.getBip32Key(),this.getChildren()&&(null===(s=this.getChildren())||void 0===s?void 0:s.getPath())&&(i+=`/${null===(o=this.getChildren())||void 0===o?void 0:o.getPath()}`),i},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{const e={};if(this.master)e[u.is_master]=!0,e[u.key_data]=this.key,e[u.chain_code]=this.chainCode;else{if(this.privateKey!==undefined&&(e[u.is_private]=this.privateKey),e[u.key_data]=this.key,this.chainCode&&(e[u.chain_code]=this.chainCode),this.useInfo){const t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[u.use_info]=t}if(this.origin){const t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[u.origin]=t}if(this.children){const t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[u.children]=t}this.parentFingerprint&&(e[u.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==undefined&&(e[u.name]=this.name),this.note!==undefined&&(e[u.note]=this.note)}return new o.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}n.CryptoHDKey=d,d.fromDataItem=e=>{const n=e.getData(),r=!!n[u.is_master],o=n[u.is_private],i=n[u.key_data],c=n[u.chain_code],l=n[u.use_info]?a.CryptoCoinInfo.fromDataItem(n[u.use_info]):undefined,p=n[u.origin]?s.CryptoKeypath.fromDataItem(n[u.origin]):undefined,g=n[u.children]?s.CryptoKeypath.fromDataItem(n[u.children]):undefined,m=n[u.parent_fingerprint];let f=undefined;m&&(f=t.alloc(4),f.writeUInt32BE(m,0));const h=n[u.name],T=n[u.note];return new d({isMaster:r,isPrivateKey:o,key:i,chainCode:c,useInfo:l,origin:p,children:g,parentFingerprint:f,name:h,note:T})},d.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return d.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoHDKey.js"}],[533,{"./PathComponent":538,"./RegistryItem":539,"./RegistryType":540,"./lib":550,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoKeypath=void 0;const r=e("./lib"),a=e("./PathComponent"),s=e("./RegistryItem"),o=e("./RegistryType");var i;!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(i||(i={}));class c extends s.RegistryItem{constructor(e=[],t,n){super(),this.components=e,this.sourceFingerprint=t,this.depth=n,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0===this.components.length)return undefined;return this.components.map((e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`)).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const e={},t=[];return this.components&&this.components.forEach((e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())})),e[i.components]=t,this.sourceFingerprint&&(e[i.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==undefined&&(e[i.depth]=this.depth),new r.DataItem(e)}}}n.CryptoKeypath=c,c.fromDataItem=e=>{const n=e.getData(),r=[],s=n[i.components];if(s)for(let e=0;e<s.length;e+=2){const t=s[e+1],n=s[e];"number"==typeof n?r.push(new a.PathComponent({index:n,hardened:t})):r.push(new a.PathComponent({hardened:t}))}const o=n[i.source_fingerprint];let u;o&&(u=t.alloc(4),u.writeUInt32BE(o,0));const d=n[i.depth];return new c(r,u,d)},c.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoKeypath.js"}],[534,{"./CryptoECKey":531,"./CryptoHDKey":532,"./MultiKey":537,"./RegistryItem":539,"./RegistryType":540,"./ScriptExpression":541,"./lib":550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoOutput=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),s=e("./lib"),o=e("./MultiKey"),i=e("./RegistryItem"),c=e("./RegistryType"),u=e("./ScriptExpression");class d extends i.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>c.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof a.CryptoHDKey?this.cryptoKey:undefined,this.getECKey=()=>this.cryptoKey instanceof r.CryptoECKey?this.cryptoKey:undefined,this.getMultiKey=()=>this.cryptoKey instanceof o.MultiKey?this.cryptoKey:undefined,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();(this.cryptoKey instanceof r.CryptoECKey||this.cryptoKey instanceof a.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag());return[...this.scriptExpressions].reverse().forEach((t=>{const n=t.getTag();e.getTag()===undefined?e.setTag(n):e=new s.DataItem(e,n)})),e}}}n.CryptoOutput=d,d.fromDataItem=e=>{const t=[];let n=e;for(;;){let e=n.getTag();const r=u.ScriptExpression.fromTag(e);if(!r)break;if(t.push(r),!(n.getData()instanceof s.DataItem))break;n=n.getData(),e=n.getTag()}const i=t.length;if(i>0&&(t[i-1].getExpression()===u.ScriptExpressions.MULTISIG.getExpression()||t[i-1].getExpression()===u.ScriptExpressions.SORTED_MULTISIG.getExpression())){const e=o.MultiKey.fromDataItem(n);return new d(t,e)}if(n.getTag()===c.RegistryTypes.CRYPTO_HDKEY.getTag()){const e=a.CryptoHDKey.fromDataItem(n);return new d(t,e)}{const e=r.CryptoECKey.fromDataItem(n);return new d(t,e)}},d.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return d.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoOutput.js"}],[535,{"./RegistryItem":539,"./RegistryType":540,"./lib":550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoPSBT=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");class o extends a.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new r.DataItem(this.psbt)}}n.CryptoPSBT=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoPSBT.js"}],[536,{"..":547,"../RegistryType":540,"../errors":542,"@ngraveio/bc-ur":1990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.URRegistryDecoder=void 0;const r=e("@ngraveio/bc-ur"),a=e(".."),s=e("../RegistryType"),o=e("../errors");class i extends r.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const e=this.resultUR();switch(e.type){case s.RegistryTypes.BYTES.getType():return a.Bytes.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_HDKEY.getType():return a.CryptoHDKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_KEYPATH.getType():return a.CryptoKeypath.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_COIN_INFO.getType():return a.CryptoCoinInfo.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ECKEY.getType():return a.CryptoECKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_OUTPUT.getType():return a.CryptoOutput.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_PSBT.getType():return a.CryptoPSBT.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ACCOUNT.getType():return a.CryptoAccount.fromCBOR(e.cbor);default:throw new o.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}n.URRegistryDecoder=i}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/Decoder/index.js"}],[537,{"./CryptoECKey":531,"./CryptoHDKey":532,"./RegistryItem":539,"./RegistryType":540,"./lib/DataItem":548},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultiKey=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),s=e("./lib/DataItem"),o=e("./RegistryItem"),i=e("./RegistryType");var c;!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(c||(c={}));class u extends o.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const e={};e[c.threshold]=this.threshold;const t=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}));return e[c.keys]=t,new s.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map((e=>e.getOutputDescriptorContent())).join(",")].join(",")}}n.MultiKey=u,u.fromDataItem=e=>{const t=e.getData(),n=t[c.threshold],s=t[c.keys],o=[];return s.forEach((e=>{e.getTag()===i.RegistryTypes.CRYPTO_HDKEY.getTag()?o.push(a.CryptoHDKey.fromDataItem(e)):e.getTag()===i.RegistryTypes.CRYPTO_ECKEY.getTag()&&o.push(r.CryptoECKey.fromDataItem(e))})),new u(n,o)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/MultiKey.js"}],[538,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PathComponent=void 0;class r{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,this.index!==undefined?this.wildcard=!1:this.wildcard=!0,this.index&&this.index&r.HARDENED_BIT)throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}n.PathComponent=r,r.HARDENED_BIT=2147483648}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/PathComponent.js"}],[539,{"./lib":550,"@ngraveio/bc-ur":1990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryItem=void 0;const r=e("@ngraveio/bc-ur"),a=e("./lib");n.RegistryItem=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===undefined)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,a.encodeDataItem)(this.toDataItem())},this.toUR=()=>new r.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,n)=>{const a=this.toUR();return new r.UREncoder(a,e,t,n)}}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryItem.js"}],[54,{"../../../shared/modules/browser-runtime.utils":4155,"@sentry/browser":2072,loglevel:3483,"webextension-polyfill":4102},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("webextension-polyfill")),a=i(e("loglevel")),s=e("@sentry/browser"),o=e("../../../shared/modules/browser-runtime.utils");function i(e){return e&&e.__esModule?e:{default:e}}n.default=class{constructor(){this.isSupported=Boolean(r.default.storage.local),this.isSupported||a.default.error("Storage local API not available."),this.dataPersistenceFailing=!1,this.mostRecentRetrievedState=null}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');try{await this._set({data:e,meta:this.metadata}),this.dataPersistenceFailing&&(this.dataPersistenceFailing=!1)}catch(e){this.dataPersistenceFailing||(this.dataPersistenceFailing=!0,(0,s.captureException)(e)),a.default.error("error setting state in local store:",e)}}async get(){if(!this.isSupported)return undefined;const e=await this._get();return t=e,0===Object.keys(t).length?(this.mostRecentRetrievedState=null,undefined):(this.mostRecentRetrievedState=e,e);var t}_get(){const{local:e}=r.default.storage;return new Promise(((t,n)=>{e.get(null).then((e=>{const r=(0,o.checkForLastError)();r?n(r):t(e)}))}))}_set(e){const{local:t}=r.default.storage;return new Promise(((n,r)=>{t.set(e).then((()=>{const e=(0,o.checkForLastError)();e?r(e):n()}))}))}}}}},{package:"$root$",file:"app/scripts/lib/local-store.js"}],[540,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryTypes=n.RegistryType=void 0;class r{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}n.RegistryType=r,n.RegistryTypes={UUID:new r("uuid",37),BYTES:new r("bytes",undefined),CRYPTO_HDKEY:new r("crypto-hdkey",303),CRYPTO_KEYPATH:new r("crypto-keypath",304),CRYPTO_COIN_INFO:new r("crypto-coin-info",305),CRYPTO_ECKEY:new r("crypto-eckey",306),CRYPTO_OUTPUT:new r("crypto-output",308),CRYPTO_PSBT:new r("crypto-psbt",310),CRYPTO_ACCOUNT:new r("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new r("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new r("qr-hardware-call",1201),KEY_DERIVATION_CALL:new r("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new r("key-derivation-schema",1302)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryType.js"}],[541,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ScriptExpressions=n.ScriptExpression=void 0;class r{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}n.ScriptExpression=r,r.fromTag=e=>Object.values(n.ScriptExpressions).find((t=>t.getTag()===e)),n.ScriptExpressions={SCRIPT_HASH:new r(400,"sh"),WITNESS_SCRIPT_HASH:new r(401,"wsh"),PUBLIC_KEY:new r(402,"pk"),PUBLIC_KEY_HASH:new r(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new r(404,"wpkh"),COMBO:new r(405,"combo"),MULTISIG:new r(406,"multi"),SORTED_MULTISIG:new r(407,"sortedmulti"),ADDRESS:new r(307,"addr"),RAW_SCRIPT:new r(408,"raw")}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/ScriptExpression.js"}],[542,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UnknownURTypeError=void 0;class r extends Error{constructor(e){super(e)}}n.UnknownURTypeError=r}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/errors/index.js"}],[543,{"../CryptoHDKey":532,"../RegistryItem":539,"../RegistryType":540,"../lib":550,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoMultiAccounts=void 0;const r=e("../RegistryType"),a=e("../CryptoHDKey"),s=e("../RegistryItem"),o=e("../lib");var i;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"}(i||(i={}));class c extends s.RegistryItem{constructor(e,t,n,a,s){super(),this.masterFingerprint=e,this.keys=t,this.device=n,this.deviceId=a,this.version=s,this.getRegistryType=()=>r.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[i.keys]=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}))),this.device&&(e[i.device]=this.device),this.deviceId&&(e[i.deviceId]=this.deviceId),this.version&&(e[i.version]=this.version),new o.DataItem(e)}}}n.CryptoMultiAccounts=c,c.fromDataItem=e=>{const n=e.getData(),r=t.alloc(4),s=n[i.masterFingerprint];s&&r.writeUInt32BE(s,0);const o=n[i.keys].map((e=>a.CryptoHDKey.fromDataItem(e))),u=n[i.device],d=n[i.deviceId],l=n[i.version];return new c(r,o,u,d,l)},c.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/CryptoMultiAccounts.js"}],[544,{"../CryptoKeypath":533,"../RegistryItem":539,"../RegistryType":540,"../lib":550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivationSchema=n.DerivationAlgorithm=n.Curve=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),o=e("../CryptoKeypath");var i,c,u;!function(e){e[e.keyPath=1]="keyPath",e[e.curve=2]="curve",e[e.algo=3]="algo"}(i||(i={})),function(e){e[e.secp256k1=0]="secp256k1",e[e.ed25519=1]="ed25519"}(c=n.Curve||(n.Curve={})),function(e){e[e.slip10=0]="slip10",e[e.bip32ed25519=1]="bip32ed25519"}(u=n.DerivationAlgorithm||(n.DerivationAlgorithm={}));class d extends a.RegistryItem{constructor(e,t=c.secp256k1,n=u.slip10){super(),this.keypath=e,this.curve=t,this.algo=n,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.toDataItem=()=>{const e={},t=this.getKeypath().toDataItem();return t.setTag(this.getKeypath().getRegistryType().getTag()),e[i.keyPath]=t,e[i.curve]=this.curve,e[i.algo]=this.algo,new s.DataItem(e)}}}n.KeyDerivationSchema=d,d.fromDataItem=e=>{const t=e.getData(),n=o.CryptoKeypath.fromDataItem(t[i.keyPath]),r=t[i.curve],a=t[i.algo];return new d(n,r,a)},d.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return d.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/DerivationSchema.js"}],[545,{"../RegistryItem":539,"../RegistryType":540,"../lib":550,"./DerivationSchema":544},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivation=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),o=e("./DerivationSchema");var i;!function(e){e[e.schemas=1]="schemas"}(i||(i={}));class c extends a.RegistryItem{constructor(e){super(),this.schemas=e,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const e={};return e[i.schemas]=this.schemas.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t})),new s.DataItem(e)}}}n.KeyDerivation=c,c.fromDataItem=e=>{const t=e.getData()[i.schemas].map((e=>o.KeyDerivationSchema.fromDataItem(e)));return new c(t)},c.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return c.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/KeyDerivation.js"}],[546,{"../RegistryItem":539,"../RegistryType":540,"../lib":550,"./KeyDerivation":545},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.QRHardwareCall=n.QRHardwareCallType=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),o=e("./KeyDerivation");var i,c;!function(e){e[e.type=1]="type",e[e.params=2]="params",e[e.origin=3]="origin"}(i||(i={})),function(e){e[e.KeyDerivation=0]="KeyDerivation"}(c=n.QRHardwareCallType||(n.QRHardwareCallType={}));class u extends a.RegistryItem{constructor(e,t,n){super(),this.type=e,this.params=t,this.origin=n,this.getRegistryType=()=>r.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};e[i.type]=this.type;const t=this.params.toDataItem();return t.setTag(this.params.getRegistryType().getTag()),e[i.params]=t,this.origin&&(e[i.origin]=this.origin),new s.DataItem(e)}}}n.QRHardwareCall=u,u.fromDataItem=e=>{const t=e.getData(),n=t[i.type]||c.KeyDerivation;let r;if(n===c.KeyDerivation)r=o.KeyDerivation.fromDataItem(t[i.params]);const a=t[i.origin];return new u(n,r,a)},u.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/QRHardwareCall.js"}],[547,{"./Bytes":528,"./CryptoAccount":529,"./CryptoCoinInfo":530,"./CryptoECKey":531,"./CryptoHDKey":532,"./CryptoKeypath":533,"./CryptoOutput":534,"./CryptoPSBT":535,"./Decoder":536,"./MultiKey":537,"./PathComponent":538,"./RegistryItem":539,"./RegistryType":540,"./ScriptExpression":541,"./errors":542,"./extended/CryptoMultiAccounts":543,"./extended/DerivationSchema":544,"./extended/KeyDerivation":545,"./extended/QRHardwareCall":546,"./lib":550,"./patchCBOR":551,"./types":552,"./utils":553,"buffer/":2641,tslib:4022},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.extend=n.PathComponent=n.ScriptExpressions=n.MultiKey=n.CryptoPSBT=n.CryptoOutput=n.CryptoECKey=n.CryptoCoinInfoNetwork=n.CryptoCoinInfoType=n.CryptoCoinInfo=n.CryptoKeypath=n.CryptoMultiAccounts=n.CryptoHDKey=n.CryptoAccount=n.Bytes=n.URRegistryDecoder=n.DataItem=void 0;const r=e("tslib");e("./patchCBOR");const a=e("buffer/");Object.defineProperty(n,"Buffer",{enumerable:!0,get:function(){return a.Buffer}});const s=e("./CryptoHDKey");Object.defineProperty(n,"CryptoHDKey",{enumerable:!0,get:function(){return s.CryptoHDKey}});const o=e("./CryptoKeypath");Object.defineProperty(n,"CryptoKeypath",{enumerable:!0,get:function(){return o.CryptoKeypath}});const i=e("./CryptoCoinInfo");Object.defineProperty(n,"CryptoCoinInfo",{enumerable:!0,get:function(){return i.CryptoCoinInfo}}),Object.defineProperty(n,"CryptoCoinInfoType",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(n,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return i.Network}});const c=e("./CryptoECKey");Object.defineProperty(n,"CryptoECKey",{enumerable:!0,get:function(){return c.CryptoECKey}});const u=e("./Bytes");Object.defineProperty(n,"Bytes",{enumerable:!0,get:function(){return u.Bytes}});const d=e("./CryptoOutput");Object.defineProperty(n,"CryptoOutput",{enumerable:!0,get:function(){return d.CryptoOutput}});const l=e("./CryptoPSBT");Object.defineProperty(n,"CryptoPSBT",{enumerable:!0,get:function(){return l.CryptoPSBT}});const p=e("./CryptoAccount");Object.defineProperty(n,"CryptoAccount",{enumerable:!0,get:function(){return p.CryptoAccount}});const g=e("./Decoder");Object.defineProperty(n,"URRegistryDecoder",{enumerable:!0,get:function(){return g.URRegistryDecoder}});const m=e("./MultiKey");Object.defineProperty(n,"MultiKey",{enumerable:!0,get:function(){return m.MultiKey}});const f=e("./ScriptExpression");Object.defineProperty(n,"ScriptExpressions",{enumerable:!0,get:function(){return f.ScriptExpressions}});const h=e("./PathComponent");Object.defineProperty(n,"PathComponent",{enumerable:!0,get:function(){return h.PathComponent}});const T=e("./RegistryItem"),y=e("./RegistryType"),E=e("./lib");var S=e("./lib");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return S.DataItem}});const _=e("./utils"),I=e("./extended/CryptoMultiAccounts");Object.defineProperty(n,"CryptoMultiAccounts",{enumerable:!0,get:function(){return I.CryptoMultiAccounts}});const A={URRegistryDecoder:g.URRegistryDecoder,Bytes:u.Bytes,CryptoAccount:p.CryptoAccount,CryptoHDKey:s.CryptoHDKey,CryptoMultiAccounts:I.CryptoMultiAccounts,CryptoKeypath:o.CryptoKeypath,CryptoCoinInfo:i.CryptoCoinInfo,CryptoCoinInfoType:i.Type,CryptoCoinInfoNetwork:i.Network,CryptoECKey:c.CryptoECKey,CryptoOutput:d.CryptoOutput,CryptoPSBT:l.CryptoPSBT,MultiKey:m.MultiKey,ScriptExpressions:f.ScriptExpressions,PathComponent:h.PathComponent},v={addReader:E.addReader,addSemanticDecode:E.addSemanticDecode,addSemanticEncode:E.addSemanticEncode,addWriter:E.addWriter,patchTags:_.patchTags},w={RegistryTypes:y.RegistryTypes,RegistryItem:T.RegistryItem,RegistryType:y.RegistryType,decodeToDataItem:E.decodeToDataItem,encodeDataItem:E.encodeDataItem,cbor:v};n.extend=w,(0,r.__exportStar)(e("./errors"),n),(0,r.__exportStar)(e("./Decoder"),n),(0,r.__exportStar)(e("./lib"),n),(0,r.__exportStar)(e("./CryptoAccount"),n),(0,r.__exportStar)(e("./CryptoPSBT"),n),(0,r.__exportStar)(e("./CryptoHDKey"),n),(0,r.__exportStar)(e("./extended/CryptoMultiAccounts"),n),(0,r.__exportStar)(e("./extended/QRHardwareCall"),n),(0,r.__exportStar)(e("./extended/KeyDerivation"),n),(0,r.__exportStar)(e("./extended/DerivationSchema"),n),(0,r.__exportStar)(e("./CryptoOutput"),n),(0,r.__exportStar)(e("./CryptoCoinInfo"),n),(0,r.__exportStar)(e("./CryptoECKey"),n),(0,r.__exportStar)(e("./MultiKey"),n),(0,r.__exportStar)(e("./CryptoKeypath"),n),(0,r.__exportStar)(e("./patchCBOR"),n),(0,r.__exportStar)(e("./PathComponent"),n),(0,r.__exportStar)(e("./RegistryItem"),n),(0,r.__exportStar)(e("./RegistryType"),n),(0,r.__exportStar)(e("./types"),n),(0,r.__exportStar)(e("./utils"),n),n.default=A}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/index.js"}],[548,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=void 0;n.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/DataItem.js"}],[549,{"./DataItem":548,buffer:2634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){!function(e,n){"function"==typeof define&&define.amd?define([],n):void 0!==t&&t.exports?t.exports=n():e.CBOR=n()}(this,(function(){const{DataItem:t}=e("./DataItem");var r=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",n=0;n<this.$hex.length;n+=2)t+="%"+this.$hex.substring(n,n+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],n=0;n<this.$hex.length;n+=2)t.push(parseInt(this.$hex.substring(n,n+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var n="",r=0;r<t.length;r++){var a=t.charCodeAt(r).toString(16);1===a.length&&(a="0"+a),n+=a}return new e(n)},e.fromUtf8String=function(t){for(var n=encodeURIComponent(t),r="",a=0;a<n.length;a++)if("%"===n.charAt(a))r+=n.substring(a+1,a+3),a+=2;else{var s=n.charCodeAt(a).toString(16);s.length<2&&(s="0"+s),r+=s}return new e(r)};var r=[],a={},s=function(e){return function(){throw new Error(e+" not implemented")}};function o(){}function i(){}function c(e,t){var n=e.value;return n<24?n:24==n?t.readByte():25==n?t.readUint16():26==n?t.readUint32():27==n?t.readUint64():31==n?null:void s("Additional info: "+n)()}function u(e,t,n){var r=e<<5;t<24?n.writeByte(r|t):t<256?(n.writeByte(24|r),n.writeByte(t)):t<65536?(n.writeByte(25|r),n.writeUint16(t)):t<4294967296?(n.writeByte(26|r),n.writeUint32(t)):(n.writeByte(27|r),n.writeUint64(t))}o.prototype={peekByte:s("peekByte"),readByte:s("readByte"),readChunk:s("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,n=1023&e,r=32768&e;if(31===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-25)*(1024+n):Math.pow(2,-24)*n;return r?-a:a},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,n=8388607&e,r=2147483648&e;if(255===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-23-127)*(8388608+n):Math.pow(2,-149)*n;return r?-a:a},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,n=4294967296*(1048575&e)+this.readUint32(),r=2147483648&e;if(2047===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-52-1023)*(4503599627370496+n):Math.pow(2,-1074)*n;return r?-a:a},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},i.prototype={writeByte:s("writeByte"),result:s("result"),writeFloat16:s("writeFloat16"),writeFloat32:s("writeFloat32"),writeFloat64:s("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:s("writeString"),canWriteBinary:function(e){return!1},writeBinary:s("writeChunk")};var d=new Error;function l(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var n=c(t,e),r=[];if(null!==n){5===t.type&&(n*=2);for(var s=0;s<n;s++)r[s]=l(e)}else for(var o;(o=l(e))!==d;)r.push(o);if(5===t.type){var i={};for(s=0;s<r.length;s+=2)i[r[s]]=r[s+1];return i}return r;case 6:var u=c(t,e),p=a[u];r=l(e);return p?p(r):r;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return d;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function p(e,t){for(var n=0;n<r.length;n++){var a=r[n].fn(e);if(a!==undefined)return u(6,r[n].tag,t),p(a,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,n){n.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(f.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(n=0;n<e.length;n++)p(e[n],t)}else{var s=Object.keys(e);u(5,s.length,t);for(n=0;n<s.length;n++){const r=parseInt(s[n]);isNaN(r)?(p(s[n],t),p(e[s[n]],t)):(p(r,t),p(e[s[n]],t))}}}}var g=[],m=[],f={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?m.push((function(n){if(e===n)return t(n)})):m.push(e)},addReader:function(e,t){"string"==typeof e?g.push((function(n,r){if(e===r)return t(n,r)})):g.push(e)},encode:function(e,t){for(var n=0;n<m.length;n++){var r=(0,m[n])(t);if(r)return p(e,r),r.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var n=0;n<m.length;n++){var r=(0,m[n])(t);if(r)return e.getTag()!==undefined?(p(e,r),r.result()):(p(e.getData(),r),r.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var n=0;n<g.length;n++){var r=(0,g[n])(e,t);if(r)return l(r)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,n){for(var r=0;r<g.length;r++){var a=(0,g[r])(e,n);if(a){const e=l(a);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+n)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return r.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return a[e]=t,this}};function h(e){this.buffer=e,this.pos=0}function T(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function y(e){this.hex=e,this.pos=0}function E(e){this.$hex="",this.finalFormat=e||"hex"}return h.prototype=Object.create(o.prototype),h.prototype.peekByte=function(){return this.buffer[this.pos]},h.prototype.readByte=function(){return this.buffer[this.pos++]},h.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},h.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},h.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},h.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},h.prototype.readChunk=function(e){var t=n.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},T.prototype=Object.create(i.prototype),T.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},T.prototype.writeFloat32=function(e){var t=n.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},T.prototype.writeFloat64=function(e){var t=n.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},T.prototype.writeString=function(e,t){var r=n.from(e,"utf-8");t(r.length),this.writeBuffer(r)},T.prototype.canWriteBinary=function(e){return e instanceof n},T.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},T.prototype.writeBuffer=function(e){if(!(e instanceof n))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},T.prototype.result=function(){for(var e=n.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var a=this.completeBuffers[r];a.copy(e,t,0,a.length),t+=a.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof n&&(f.addReader((function(e,t){return n.isBuffer(e)?new h(e):"hex"===t||"base64"===t?new h(n.from(e,t)):void 0})),f.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new T(e):void 0:new T}))),y.prototype=Object.create(o.prototype),y.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},y.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},y.prototype.readChunk=function(t){var r=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof n?n.from(r,"hex"):new e(r)},E.prototype=Object.create(i.prototype),E.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},E.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof n&&t instanceof n},E.prototype.writeBinary=function(t,r){if(t instanceof e)r(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof n&&t instanceof n))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");r(t.length),this.$hex+=t.toString("hex")}},E.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof n?n.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},E.prototype.writeString=function(t,n){var r=e.fromUtf8String(t);n(r.length()),this.$hex+=r.$hex},f.addReader((function(t,n){return t instanceof e||t.$hex?new y(t.$hex):"hex"===n?new y(t):void 0})),f.addWriter((function(e){if("hex"===e)return new E})),f}();return r.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),r}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/cbor-sync.js"}],[5495,{"../../../shared/constants/common":4122,"../../../shared/constants/network":4131,"../../../shared/constants/swaps":4139,"../../../shared/lib/fetch-with-cache":4146,"../../../shared/lib/swaps-utils":4149,"../../../shared/lib/transactions-controller-utils":4152,"../../../shared/modules/conversion.utils":4158,"../../../shared/modules/hexstring-utils":4164,"../../../shared/modules/swaps.utils":4178,"../../helpers/utils/confirm-tx.util":4938,"bignumber.js":2539},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=n.StxErrorTypes=void 0,n.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:f},functionName:"fetchAggregatorMetadata"}),r={};for(const e in n)(0,p.validateData)(S,n[e],t)&&(r[e]=n[e]);return r},n.fetchSwapsFeatureFlags=async function(){const e=s.SWAPS_API_V2_BASE_URL;return await(0,u.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},n.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,p.validateData)(I,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:r,ProposeGasPrice:a,FastGasPrice:s}=n;return{safeLow:r,average:a,fast:s}},n.fetchToken=async function(e,t){const n=(0,p.getBaseApi)("token",t);return await(0,u.default)({url:`${n}?address=${e}`,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:f},functionName:"fetchToken"})},n.fetchTokenPrice=async function(e){var t;const n=`spot-prices?tokenAddresses=${e}&vsCurrency=eth&includeMarketData=false`,r=await(0,u.default)({url:`https://price-api.metafi.codefi.network/v2/chains/1/${n}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==r||null===(t=r[e])||void 0===t?void 0:t.eth},n.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:f},functionName:"fetchTokens"});return[s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...n.filter((n=>(0,p.validateData)(y,n,t,false)&&!((0,o.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,o.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=(0,p.getBaseApi)("topAssets",e),n=await(0,u.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:f}})||[];return n.reduce(((e,n,r)=>(0,p.validateData)(E,n,t)?{...e,[n.address]:{index:String(r)}}:e),{})},n.formatSwapsValueForDisplay=w,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=n.getClassNameForCharLength=void 0,n.getRenderableNetworkFeesForQuote=v,n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=n.getSwapsLivenessForNetwork=void 0,n.quotesToRenderableData=function({quotes:e,gasPrice:t,conversionRate:n,currentCurrency:r,approveGas:s,tokenConversionRates:i,chainId:c,smartTransactionEstimatedGas:u,nativeCurrencySymbol:d,multiLayerL1ApprovalFeeTotal:p}){return Object.values(e).map((e=>{const{destinationAmount:m=0,sourceAmount:f=0,sourceTokenInfo:h,destinationTokenInfo:T,slippage:y,aggType:E,aggregator:S,gasEstimateWithRefund:_,averageGas:I,fee:k,trade:N,multiLayerL1TradeFeeTotal:R}=e;let b=null;null!==R&&null!==p?b=(0,g.sumHexes)(R||"0x0",p||"0x0"):null!==R&&(b=R);const O=(0,l.calcTokenAmount)(f,h.decimals).toString(10),C=(0,l.calcTokenAmount)(m,T.decimals).toPrecision(8);let P=null,D=null,M=null,B=null;({feeInFiat:P,feeInEth:D,rawNetworkFees:M,rawEthFee:B}=v({tradeGas:_||(0,g.decimalToHex)(I||8e5),approveGas:s,gasPrice:t,currentCurrency:r,conversionRate:n,tradeValue:N.value,sourceSymbol:h.symbol,sourceAmount:f,chainId:c,multiLayerL1FeeTotal:b})),u&&({feeInFiat:P,feeInEth:D}=A({chainId:c,currentCurrency:r,conversionRate:n,nativeCurrencySymbol:d,feeInWeiDec:u.feeEstimate}));const L=new a.BigNumber(100-y).div(100),U=new a.BigNumber(C).times(L).toFixed(6),x=i[T.address],F=(0,o.isSwapsDefaultTokenSymbol)(T.symbol,c)?(0,l.calcTokenAmount)(m,T.decimals).minus(B,10):new a.BigNumber(x||0,10).times((0,l.calcTokenAmount)(m,T.decimals),10).minus(B,10);let H,q=y;return"AGG"===E?H="swapAggregator":"RFQ"===E?(H="swapRequestForQuotation",q=0):H="DEX"===E?"swapDecentralizedExchange":"CONTRACT"===E?"swapDirectContract":"swapUnknown",{aggId:S,amountReceiving:`${C} ${T.symbol}`,destinationTokenDecimals:T.decimals,destinationTokenSymbol:T.symbol,destinationTokenValue:w(C),destinationIconUrl:T.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:H,feeInEth:D,detailedNetworkFees:`${D} (${P})`,networkFees:P,quoteSource:E,rawNetworkFees:M,slippage:q,sourceTokenDecimals:h.decimals,sourceTokenSymbol:h.symbol,sourceTokenValue:O,sourceTokenIconUrl:h.iconUrl,ethValueOfTrade:F,minimumAmountReceived:U,metaMaskFee:k}}))},n.showRemainingTimeInMinAndSec=void 0;var r,a=e("bignumber.js"),s=e("../../../shared/constants/swaps"),o=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),c=e("../../helpers/utils/confirm-tx.util"),u=(r=e("../../../shared/lib/fetch-with-cache"))&&r.__esModule?r:{default:r},d=e("../../../shared/modules/hexstring-utils"),l=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),g=e("../../../shared/modules/conversion.utils"),m=e("../../../shared/constants/common");const f=3e5,h="usd",T={"X-Client-Id":s.SWAPS_CLIENT_ID},y=[{property:"address",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],E=y.slice(0,2),S=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],_=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),I=[{property:"SafeGasPrice",type:"string",validator:_},{property:"ProposeGasPrice",type:"string",validator:_},{property:"FastGasPrice",type:"string",validator:_}];const A=({chainId:e,currentCurrency:t,conversionRate:n,USDConversionRate:r,nativeCurrencySymbol:a,feeInWeiDec:o})=>{var i;const u=(0,g.decimalToHex)(o),d=(0,g.getValueFromWeiHex)({value:u,toDenomination:m.EtherDenomination.ETH,numberOfDecimals:5}),l=(0,g.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:n,numberOfDecimals:2});let p;p=t===h?l:(0,g.getValueFromWeiHex)({value:u,toCurrency:h,conversionRate:r,numberOfDecimals:2});return{feeInUsd:p,feeInFiat:(0,c.formatCurrency)(l,t),feeInEth:`${d} ${a||(null===(i=s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:d}};function v({tradeGas:e,approveGas:t,gasPrice:n,currentCurrency:r,conversionRate:i,USDConversionRate:u,tradeValue:d,sourceSymbol:p,sourceAmount:f,chainId:T,nativeCurrencySymbol:y,multiLayerL1FeeTotal:E}){const S=new a.BigNumber(e||"0x0",16).plus(t||"0x0",16).toString(16);let _=(0,l.calcGasTotal)(S,n);null!==E&&(_=(0,g.sumHexes)(_||"0x0",E||"0x0"));const I=new a.BigNumber(d,16).minus((0,o.isSwapsDefaultTokenSymbol)(p,T)?f:0,10).toString(16),A=new a.BigNumber(_,16).plus(I,16).toString(16),v=(0,g.getValueFromWeiHex)({value:A,toDenomination:m.EtherDenomination.ETH,numberOfDecimals:5}),w=(0,g.getValueFromWeiHex)({value:A,toCurrency:r,conversionRate:i,numberOfDecimals:2}),k=(0,c.formatCurrency)(w,r);let N;N=r===h?w:(0,g.getValueFromWeiHex)({value:A,toCurrency:h,conversionRate:u,numberOfDecimals:2});return{rawNetworkFees:w,feeInUsd:N,rawEthFee:v,feeInFiat:k,feeInEth:`${v} ${y||s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[T].symbol}`,nonGasFee:I}}function w(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,l.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new a.BigNumber(t).toFixed()),t}n.getFeeForSmartTransaction=A;n.getClassNameForCharLength=(e,t)=>{let n;return n=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${n}`};n.isContractAddressValid=(e,t)=>!(!e||!s.ALLOWED_CONTRACT_ADDRESSES[t])&&s.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const k=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return s.ETHEREUM;case i.CHAIN_IDS.BSC:return s.BSC;case i.CHAIN_IDS.POLYGON:return s.POLYGON;case i.CHAIN_IDS.GOERLI:return s.GOERLI;case i.CHAIN_IDS.AVALANCHE:return s.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return s.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return s.ARBITRUM;case i.CHAIN_IDS.ZKSYNC_ERA:return s.ZKSYNC_ERA;case i.CHAIN_IDS.LINEA_MAINNET:return s.LINEA;case i.CHAIN_IDS.BASE:return s.BASE;default:return""}};n.getNetworkNameByChainId=k;n.getSwapsLivenessForNetwork=(e,t={})=>{const n=k(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[n])return{swapsFeatureIsLive:!1};return t[n].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[n].fallbackToV1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let N=n.StxErrorTypes=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});n.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case N.unavailable:case N.regularTxPending:return t("smartSwapsErrorUnavailable");case N.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[550,{"./DataItem":548,"./cbor-sync":549},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=n.addWriter=n.addReader=n.addSemanticEncode=n.addSemanticDecode=n.decodeToDataItem=n.encodeDataItem=void 0;var r=e("./cbor-sync");Object.defineProperty(n,"encodeDataItem",{enumerable:!0,get:function(){return r.encodeDataItem}}),Object.defineProperty(n,"decodeToDataItem",{enumerable:!0,get:function(){return r.decodeToDataItem}}),Object.defineProperty(n,"addSemanticDecode",{enumerable:!0,get:function(){return r.addSemanticDecode}}),Object.defineProperty(n,"addSemanticEncode",{enumerable:!0,get:function(){return r.addSemanticEncode}}),Object.defineProperty(n,"addReader",{enumerable:!0,get:function(){return r.addReader}}),Object.defineProperty(n,"addWriter",{enumerable:!0,get:function(){return r.addWriter}});var a=e("./DataItem");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return a.DataItem}})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/index.js"}],[5509,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getApprovalFlows=function(e){return e.metamask.approvalFlows},n.getApprovalRequestsByType=void 0,n.getPendingApprovals=function(e){return Object.values(e.metamask.pendingApprovals)},n.hasPendingApprovals=function(e,t,n){const r=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>t.includes(e)));if(n)return r.some(n);return r.length>0};n.getApprovalRequestsByType=(e,t,n)=>{const r=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return n?r.filter(n):r}}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[551,{"./RegistryType":540,"./ScriptExpression":541,"./utils":553},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./utils"),a=e("./RegistryType"),s=e("./ScriptExpression"),o=Object.values(a.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),i=Object.values(s.ScriptExpressions).map((e=>e.getTag()));(0,r.patchTags)(o.concat(i))}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/patchCBOR.js"}],[5510,{".":5513,"../../shared/constants/gas":4125,"../../shared/lib/transactions-controller-utils":4152,"../../shared/modules/conversion.utils":4158,"../../shared/modules/gas.utils":4163,"../../shared/modules/string-utils":4177,"../ducks/metamask/metamask":4906,"../helpers/utils/confirm-tx.util":4938,"../helpers/utils/tx-helper":4956,"./custom-gas":5511,"./selectors":5517,"@metamask/transaction-controller":1931,reselect:3884},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.use4ByteResolutionSelector=n.unconfirmedTransactionsListSelector=n.unconfirmedTransactionsHashSelector=n.unconfirmedMessagesHashSelector=n.txDataSelector=n.transactionFeeSelector=n.tokenAddressSelector=n.sendTokenTokenAmountAndToAddressSelector=n.currentCurrencySelector=n.conversionRateSelector=n.contractExchangeRateSelector=void 0;var r,a=e("reselect"),s=e("@metamask/transaction-controller"),o=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},i=e("../helpers/utils/confirm-tx.util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/constants/gas"),d=e("../../shared/modules/gas.utils"),l=e("../../shared/modules/string-utils"),p=e("../../shared/lib/transactions-controller-utils"),g=e("../../shared/modules/conversion.utils"),m=e("./custom-gas"),f=e("./selectors"),h=e(".");const T=e=>(0,h.getUnapprovedTransactions)(e),y=e=>e.metamask.unapprovedMsgs,E=e=>e.metamask.unapprovedPersonalMsgs,S=e=>e.metamask.unapprovedDecryptMsgs,_=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,I=e=>e.metamask.unapprovedTypedMessages;n.unconfirmedTransactionsListSelector=(0,a.createSelector)(T,y,E,S,_,I,f.getCurrentChainId,((e={},t={},n={},r={},a={},s={},i)=>(0,o.default)(e,t,n,r,a,s,i)||[])),n.unconfirmedTransactionsHashSelector=(0,a.createSelector)(T,y,E,S,_,I,f.getCurrentChainId,((e={},t={},n={},r={},a={},s={},o)=>({...Object.keys(e).reduce(((t,n)=>{const r={...t};return e[n].chainId===o&&(r[n]=e[n]),r}),{}),...t,...n,...r,...a,...s}))),n.unconfirmedMessagesHashSelector=(0,a.createSelector)(y,E,S,_,I,((e={},t={},n={},r={},a={})=>({...e,...t,...n,...r,...a})));n.use4ByteResolutionSelector=e=>e.metamask.use4ByteResolution;const A=e=>e.metamask.currentCurrency;n.currentCurrencySelector=A;const v=e=>{var t;return null===(t=e.metamask.currencyRates[(0,c.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate};n.conversionRateSelector=v;const w=e=>e.confirmTransaction.txData;n.txDataSelector=w;const k=(0,a.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),N=(0,a.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),R=(0,a.createSelector)(w,(e=>e&&e.txParams||{})),b=n.tokenAddressSelector=(0,a.createSelector)(R,(e=>e&&e.to));n.sendTokenTokenAmountAndToAddressSelector=(0,a.createSelector)(N,k,((e,t)=>{let n="",r="0";if(e&&e.length){n=e._to;let a=e._value.toString();t&&(a=(0,p.calcTokenAmount)(a,t).toFixed()),r=(0,i.roundExponential)(a)}return{toAddress:n,tokenAmount:r}})),n.contractExchangeRateSelector=(0,a.createSelector)((e=>e.metamask.contractExchangeRates),b,((e,t)=>e[Object.keys(e).find((e=>(0,l.isEqualCaseInsensitive)(e,t)))]));n.transactionFeeSelector=function(e,t){var n,r,a,o;const l=A(e),p=v(e),f=(0,c.getNativeCurrency)(e),T=(0,c.getGasFeeEstimates)(e)||{},y=(0,c.getGasEstimateType)(e),E=(0,h.checkNetworkAndAccountSupports1559)(e),S={gasLimit:(null===(n=t.txParams)||void 0===n?void 0:n.gas)??"0x0"};if(E){var _;const{gasPrice:e="0"}=T,n=T[t.userFeeLevel]||{};if((null===(_=t.txParams)||void 0===_?void 0:_.type)===s.TransactionEnvelopeType.legacy){var I;S.gasPrice=(null===(I=t.txParams)||void 0===I?void 0:I.gasPrice)??(0,g.decGWEIToHexWEI)(e)}else{var w,k,N,R;const{suggestedMaxPriorityFeePerGas:r,suggestedMaxFeePerGas:a}=n;S.maxFeePerGas=null===(w=t.txParams)||void 0===w||!w.maxFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&a?(0,g.decGWEIToHexWEI)(a||e):null===(k=t.txParams)||void 0===k?void 0:k.maxFeePerGas,S.maxPriorityFeePerGas=null===(N=t.txParams)||void 0===N||!N.maxPriorityFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&r?r&&(0,g.decGWEIToHexWEI)(r)||S.maxFeePerGas:null===(R=t.txParams)||void 0===R?void 0:R.maxPriorityFeePerGas,S.baseFeePerGas=(0,g.decGWEIToHexWEI)(T.estimatedBaseFee)}}else switch(y){case u.GasEstimateTypes.feeMarket:case u.GasEstimateTypes.none:S.gasPrice=(null===(r=t.txParams)||void 0===r?void 0:r.gasPrice)??"0x0";break;case u.GasEstimateTypes.ethGasPrice:S.gasPrice=(null===(a=t.txParams)||void 0===a?void 0:a.gasPrice)??(0,g.decGWEIToHexWEI)(T.gasPrice);break;case u.GasEstimateTypes.legacy:S.gasPrice=(null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)??(0,m.getAveragePriceEstimateInHexWEI)(e)}const{txParams:{value:b="0x0"}={}}=t,O=(0,g.getValueFromWeiHex)({value:b,fromCurrency:f,toCurrency:l,conversionRate:p,numberOfDecimals:2}),C=(0,g.getValueFromWeiHex)({value:b,fromCurrency:f,toCurrency:f,conversionRate:p,numberOfDecimals:6}),P=(0,d.getMinimumGasTotalInHexWei)(S),D=(0,d.getMaximumGasTotalInHexWei)(S),M=(0,i.getTransactionFee)({value:P,fromCurrency:f,toCurrency:l,numberOfDecimals:2,conversionRate:p}),B=(0,i.getTransactionFee)({value:D,fromCurrency:f,toCurrency:l,numberOfDecimals:2,conversionRate:p}),L=(0,i.getTransactionFee)({value:P,fromCurrency:f,toCurrency:f,numberOfDecimals:6,conversionRate:p});return{hexTransactionAmount:b,fiatTransactionAmount:O,ethTransactionAmount:C,hexMinimumTransactionFee:P,fiatMinimumTransactionFee:M,hexMaximumTransactionFee:D,fiatMaximumTransactionFee:B,ethTransactionFee:L,fiatTransactionTotal:(0,i.addFiat)(M,O),ethTransactionTotal:(0,i.addEth)(L,C),hexTransactionTotal:(0,g.sumHexes)(b,P),gasEstimationObject:S}}}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[5511,{".":5513,"../../app/scripts/lib/util":92,"../../shared/constants/common":4122,"../../shared/constants/gas":4125,"../../shared/lib/transactions-controller-utils":4152,"../../shared/modules/Numeric":4154,"../../shared/modules/conversion.utils":4158,"../ducks/metamask/metamask":4906,"../ducks/send":4908,"../helpers/utils/confirm-tx.util":4938,"../helpers/utils/formatters":4940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.basicPriceEstimateToETHTotal=y,n.getAverageEstimate=h,n.getAveragePriceEstimateInHexWEI=function(e){return S(h(e))},n.getBasicGasEstimateLoadingStatus=function(e){return!1===_(e)},n.getCustomGasLimit=function(e){return e.gas.customData.limit},n.getCustomGasPrice=m,n.getDefaultActiveButtonIndex=function(e,t,n){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,r.addHexPrefix)(t||n))},n.getFastPriceEstimate=T,n.getFastPriceEstimateInHexWEI=function(e){return S(T(e)||"0x0")},n.getGasPriceInHexWei=S,n.getIsCustomNetworkGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&!(0,g.getIsMainnet)(e)},n.getIsEthGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&(0,g.getIsMainnet)(e)},n.getIsGasEstimatesFetched=_,n.getNoGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.none},n.getRenderableConvertedCurrencyFee=function(e,t,n,r){const o=y(new l.Numeric(e,10).toBase(16).toString(),t),i=(0,a.decEthToConvertedCurrency)(o,n,r);return(0,s.formatCurrency)(i,n)},n.getRenderableEthFee=function(e,t,n=9,r="ETH"){const a=y(new l.Numeric(e,10).toBase(16).toString(),t,n);return(0,o.formatETHFee)(a,r)},n.getSafeLowEstimate=f,n.isCustomPriceExcessive=function(e,t=!1){const n=t?(0,i.getGasPrice)(e):m(e),r=T(e);if(!n||!r)return!1;return new l.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*r),10)},n.isCustomPriceSafe=function(e){const t=f(e),n=m(e);if(!n)return!0;if(!t)return!1;return new l.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},n.isCustomPriceSafeForCustomNetwork=function(e){const t=h(e),n=m(e);if(!n)return!0;if(!t)return!1;return new l.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},n.priceEstimateToWei=E;var r=e("../../app/scripts/lib/util"),a=e("../../shared/modules/conversion.utils"),s=e("../helpers/utils/confirm-tx.util"),o=e("../helpers/utils/formatters"),i=e("../ducks/send"),c=e("../../shared/constants/gas"),u=e("../ducks/metamask/metamask"),d=e("../../shared/lib/transactions-controller-utils"),l=e("../../shared/modules/Numeric"),p=e("../../shared/constants/common"),g=e(".");function m(e){return e.gas.customData.price}function f(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function h(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function T(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function y(e,t,n=9){return new l.Numeric((0,d.calcGasTotal)(t,e),16,p.EtherDenomination.GWEI).round(n).toBase(10).toString()}function E(e){return new l.Numeric(e,16,p.EtherDenomination.GWEI).toDenomination(p.EtherDenomination.WEI).round(9).toString()}function S(e){const t=new l.Numeric(e,10).toBase(16).toString();return(0,r.addHexPrefix)(E(t))}function _(e){const t=(0,u.getGasEstimateType)(e);return!(0,u.isEIP1559Network)(e)&&t!==c.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[5512,{"../../shared/constants/onboarding":4133,"../helpers/constants/routes":4918},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstTimeFlowType=void 0,n.getFirstTimeFlowTypeRoute=function(e){const{firstTimeFlowType:t}=e.metamask;let n;n=t===r.FirstTimeFlowType.create?a.ONBOARDING_CREATE_PASSWORD_ROUTE:t===r.FirstTimeFlowType.import?a.ONBOARDING_IMPORT_WITH_SRP_ROUTE:a.DEFAULT_ROUTE;return n},n.getOnboardingInitiator=void 0;var r=e("../../shared/constants/onboarding"),a=e("../helpers/constants/routes");n.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;n.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const n=Object.keys(t)[0];return{location:n,tabId:t[n]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[5513,{"../pages/confirmations/selectors/confirm":5253,"./approvals":5509,"./confirm-transaction":5510,"./custom-gas":5511,"./first-time-flow":5512,"./metametrics":5514,"./permissions":5516,"./selectors":5517,"./transactions":5518},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("../pages/confirmations/selectors/confirm");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=e("./confirm-transaction");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=e("./custom-gas");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=e("./first-time-flow");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=e("./metametrics");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=e("./permissions");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=e("./selectors");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}}))}));var d=e("./transactions");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===d[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}}))}));var l=e("./approvals");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}}))}))}}},{package:"$root$",file:"ui/selectors/index.js"}],[5514,{reselect:3884},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectMatchingFragment=n.selectFragments=n.selectFragmentBySuccessEvent=n.selectFragmentById=void 0;var r=e("reselect");const a=e=>e.metamask.fragments;n.selectFragments=a;const s=n.selectFragmentBySuccessEvent=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined)),o=n.selectFragmentById=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));n.selectMatchingFragment=(0,r.createSelector)(((e,t)=>s(e,t.fragmentOptions)),((e,t)=>o(e,t.existingId)),((e,t)=>t??e))}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[5516,{".":5513,"../../shared/constants/permissions":4134,"./approvals":5509,"./util":5519,"@metamask/controller-utils":1077,"@metamask/snaps-rpc-methods":1861},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.activeTabHasPermissions=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Boolean(Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},n.getAccountToConnectToActiveTab=function(e){const t=(0,c.getSelectedInternalAccount)(e),n=l(e),{metamask:{internalAccounts:{accounts:r}}}=e,a=Object.keys(r).length;if(n.length&&n.length!==a&&-1===n.findIndex((e=>e===t.address)))return(0,c.getInternalAccount)(e,t.id);return undefined},n.getAddressConnectedSubjectMap=function(e){const t=(0,c.getSubjectMetadata)(e),n=g(e),r={};return Object.keys(n).forEach((e=>{const{iconUrl:a,name:s}=t[e]||{};n[e].forEach((t=>{const n=s||e;r[t]=r[t]?{...r[t],[e]:{iconUrl:a,name:n}}:{[e]:{iconUrl:a,name:n}}}))})),r},n.getConnectedSubjectsForAllAddresses=function(e){const t=u(e),n=(0,c.getSubjectMetadata)(e),r={};return Object.entries(t).forEach((([e,t])=>{m(t).forEach((t=>{r[t]||(r[t]=[]);const a=n[e];a&&r[t].push(a)}))})),r},n.getConnectedSubjectsForSelectedAddress=function(e){const{selectedAddress:t}=e.metamask,n=u(e),r=(0,c.getSubjectMetadata)(e),a=[];return Object.entries(n).forEach((([e,n])=>{if(!m(n).includes(t))return;const{extensionId:s,name:o,iconUrl:i}=r[e]||{};a.push({extensionId:s,origin:e,name:o,iconUrl:i})})),a},n.getFirstPermissionRequest=function(e){const t=y(e);return t&&t[0]?t[0]:null},n.getFirstSnapInstallOrUpdateRequest=function(e){var t;return(null===(t=T(e))||void 0===t?void 0:t[0])??null},n.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,n)=>(t[n].eth_accounts&&(e[n]=JSON.parse(JSON.stringify(t[n].eth_accounts))),e)),{})},n.getOrderedConnectedAccountsForActiveTab=function(e){var t;const{activeTab:n,metamask:{permissionHistory:r}}=e,a=null===(t=r[n.origin])||void 0===t||null===(t=t.eth_accounts)||void 0===t?void 0:t.accounts,s=(0,c.getMetaMaskAccountsOrdered)(e),o=l(e);return s.filter((e=>o.includes(e.address))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==a?void 0:a[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getOrderedConnectedAccountsForConnectedDapp=function(e,t){var n;const{metamask:{permissionHistory:r}}=e,a=null===(n=r[t.origin])||void 0===n||null===(n=n.eth_accounts)||void 0===n?void 0:n.accounts,s=(0,c.getMetaMaskAccountsOrdered)(e),o=p(e,t);return s.filter((e=>o.includes(e.address))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==a?void 0:a[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getPermissionSubjects=u,n.getPermissionSubjectsDeepEqual=void 0,n.getPermissions=function(e,t){var n;return null===(n=u(e)[t])||void 0===n?void 0:n.permissions},n.getPermissionsForActiveTab=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r,s=(null===(t=a[n.origin])||void 0===t?void 0:t.permissions)??{};return Object.keys(s).map((e=>({key:e,value:s[e]})))},n.getPermissionsRequests=y,n.getPermittedAccounts=d,n.getPermittedAccountsByOrigin=g,n.getPermittedAccountsForCurrentTab=l,n.getPermittedAccountsForSelectedTab=p,n.getRequestState=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.requestState},n.getRequestType=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.type},n.getSnapInstallOrUpdateRequests=T,n.getSubjectMetadataDeepEqual=void 0,n.getSubjectsWithPermission=function(e,t){const n=u(e),r=[];return Object.entries(n).forEach((([n,{permissions:a}])=>{if(a[t]){const{extensionId:t,name:a,iconUrl:s}=(0,c.getTargetSubjectMetadata)(e,n)||{};r.push({extensionId:t,origin:n,name:a,iconUrl:s})}})),r},n.getSubjectsWithSnapPermission=function(e,t){const n=u(e);return Object.entries(n).filter((([e,{permissions:n}])=>{var r;return null===(r=n[a.WALLET_SNAP_PERMISSION_KEY])||void 0===r?void 0:r.caveats[0].value[t]})).map((([t,n])=>{const{extensionId:r,name:a,iconUrl:s}=(0,c.getTargetSubjectMetadata)(e,t)||{};return{extensionId:r,origin:t,name:a,iconUrl:s}}))};var r=e("@metamask/controller-utils"),a=e("@metamask/snaps-rpc-methods"),s=e("../../shared/constants/permissions"),o=e("./approvals"),i=e("./util"),c=e(".");n.getPermissionSubjectsDeepEqual=(0,i.createDeepEqualSelector)((e=>e.metamask.subjects||{}),(e=>e)),n.getSubjectMetadataDeepEqual=(0,i.createDeepEqualSelector)((e=>e.metamask.subjectMetadata),(e=>e));function u(e){return e.metamask.subjects||{}}function d(e,t){return h(f(function(e,t){var n;return t&&(null===(n=e.metamask.subjects)||void 0===n?void 0:n[t])}(e,t)))}function l(e){return d(e,(0,c.getOriginOfCurrentTab)(e))}function p(e,t){return d(e,t)}function g(e){const t=u(e);return Object.keys(t).reduce(((e,n)=>{const r=m(t[n]);return r.length>0&&(e[n]=r),e}),{})}function m(e){return h(f(e))}function f(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function h(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===s.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function T(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e||"wallet_installSnapResult"===e)).map((({requestData:e})=>e))}function y(e){var t;return null===(t=(0,o.getApprovalRequestsByType)(e,r.ApprovalType.WalletRequestPermissions))||void 0===t?void 0:t.map((({requestData:e})=>e))}}}},{package:"$root$",file:"ui/selectors/permissions.js"}],[5517,{"../../app/scripts/lib/ppom/ppom-middleware":64,"../../app/scripts/lib/util":92,"../../shared/constants/app":4120,"../../shared/constants/bridge":4121,"../../shared/constants/hardware-wallets":4126,"../../shared/constants/keyring":4127,"../../shared/constants/labels":4128,"../../shared/constants/network":4131,"../../shared/constants/swaps":4139,"../../shared/constants/terms":4140,"../../shared/constants/time":4141,"../../shared/constants/tokens":4142,"../../shared/modules/conversion.utils":4158,"../../shared/modules/selectors":4174,"../../shared/modules/string-utils":4177,"../../shared/notifications":4181,"../ducks/app/app":4897,"../ducks/metamask/metamask":4906,"../helpers/constants/design-system":4914,"../helpers/constants/survey":4923,"../helpers/utils/util":4957,"../pages/confirmations/confirmation/templates":5219,"./permissions":5516,"./transactions":5518,"./util":5519,"@metamask/controller-utils":1077,"@metamask/name-controller":1370,"@metamask/permission-controller":1469,"@metamask/snaps-utils":1898,"@metamask/transaction-controller":1931,lodash:3477,reselect:3884,semver:3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountSupportsSmartTx=function(e){const t=q(e);return Boolean("hardware"!==t&&"snap"!==t)},n.accountsWithSendEtherInfoSelector=oe,n.checkIfMethodIsEnabled=function(e,t){const n=$(e);return Boolean(n.methods.includes(t))},n.checkNetworkAndAccountSupports1559=function(e,t){return(0,w.isEIP1559Network)(e,t)},n.checkNetworkOrAccountNotSupports1559=function(e){return(0,w.isNotEIP1559Network)(e)},n.doesAddressRequireLedgerHidConnection=function(e,t){const n=(0,w.isAddressLedger)(e,t),r=(0,w.getLedgerTransportType)(e)===m.LedgerTransportTypes.webhid,a=(0,k.getLedgerWebHidConnectedStatus)(e)!==m.WebHIDConnectedStatuses.connected,s=(0,k.getLedgerTransportStatus)(e)!==m.HardwareTransportStates.verified;return n&&r&&(a||s)},n.getAccountName=function(e,t){const n=e.find((e=>(0,N.isEqualCaseInsensitive)(e.address,t)));return n&&""!==n.metadata.name?n.metadata.name:""},n.getAccountType=q,n.getAccountTypeForKeyring=G,n.getAccountsWithLabels=function(e){return ee(e).map((e=>{const{address:t,metadata:{name:n},balance:r}=e;return{...e,addressLabel:`${n.length<T.TRUNCATED_NAME_CHAR_LIMIT?n:`${n.slice(0,T.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,S.shortenAddress)(t)})`,label:n,balance:r}}))},n.getAddressBook=ae,n.getAddressBookEntry=se,n.getAddressBookEntryOrAccountName=function(e,t){const n=se(e,t);if(n&&""!==n.name)return n.name;const r=Object.values(Y(e)).find((e=>(0,N.isEqualCaseInsensitive)(e.address,t)));return(null==r?void 0:r.metadata.name)||t},n.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[x(e)]},n.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},n.getAllAccountsOnNetworkAreEmpty=function(e){const t=Z(e)??{},n=Object.values(t).every((e=>"0x0"===e||"0x00"===e)),r=0===z(e);return n&&r},n.getAllConnectedAccounts=void 0,n.getAllDomains=ne,n.getAllSnapAvailableUpdates=n.getAllNetworks=n.getAllEnabledNetworks=void 0,n.getAllTokens=function(e){return e.metamask.allTokens},n.getAnySnapUpdateAvailable=void 0,n.getAppIsLoading=function(e){return e.appState.isLoading},n.getBlockExplorerLinkText=function(e,t=!1){const n=it(e),r=Ce(e);let a={firstPart:"addBlockExplorer",secondPart:""};r.blockExplorerUrl?a=t?{firstPart:"blockExplorerView",secondPart:(0,S.getURLHostName)(r.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===n&&(a=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return a},n.getConnectedSnapsList=n.getConnectedSitesListWithNetworkInfo=n.getConnectedSitesList=n.getConfirmationExchangeRates=void 0,n.getCurrentAccountWithSendEtherInfo=ie,n.getCurrentChainId=x,n.getCurrentCurrency=function(e){return e.metamask.currentCurrency},n.getCurrentEthBalance=ce,n.getCurrentKeyring=F,n.getCurrentNetwork=void 0,n.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},n.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},n.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},n.getDetectedTokensInCurrentNetwork=function(e){var t;const n=x(e),{address:r}=$(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(t=t[n])||void 0===t?void 0:t[r]},n.getDisabledRpcMethodPreferences=function(e){return e.metamask.disabledRpcMethodPreferences},n.getEnabledSnaps=void 0,n.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t])return e.metamask.ensResolutionsByAddress[t];const n=se(e,t)||W(e,t);return(null==n?void 0:n.name)||""},n.getEthereumAddressNames=function(e){var t;return(null===(t=e.metamask.names)||void 0===t?void 0:t[d.NameType.ETHEREUM_ADDRESS])||{}},n.getFeatureFlags=function(e){return e.metamask.featureFlags},n.getFeatureNotificationsEnabled=function(e){const{featureNotificationsEnabled:t=!1}=Te(e);return t},n.getFullTxData=void 0,n.getGasIsLoading=function(e){return e.appState.gasIsLoading},n.getHardwareWalletType=function(e){const t=F(e);return H(e)?t.type:undefined},n.getHasDismissedOpenSeaToBlockaidBanner=function(e){return Boolean(e.metamask.hasDismissedOpenSeaToBlockaidBanner)},n.getHasMigratedFromOpenSeaToBlockaid=function(e){return Boolean(e.metamask.hasMigratedFromOpenSeaToBlockaid)},n.getHiddenAccountsList=ze,n.getInfuraBlocked=function(e){return e.metamask.networksMetadata[U(e)].status===g.NetworkStatus.Blocked},n.getInterfaceContent=n.getInterface=n.getInsightSnaps=n.getInsightSnapIds=void 0,n.getInternalAccount=function(e,t){return e.metamask.internalAccounts.accounts[t]},n.getInternalAccountByAddress=W,n.getInternalAccounts=Y,n.getInternalAccountsSortedByKeyring=void 0,n.getIpfsGateway=function(e){return e.metamask.ipfsGateway},n.getIsAddSnapAccountEnabled=function(e){return e.metamask.addSnapAccountEnabled},n.getIsBase=tt,n.getIsBridgeChain=function(e){const t=x(e);return E.ALLOWED_BRIDGE_CHAIN_IDS.includes(t)},n.getIsBuyableChain=function(e){const t=x(e);return Object.keys(g.BUYABLE_CHAINS_MAP).includes(t)},n.getIsCustomNetwork=it,n.getIsDynamicTokenListAvailable=at,n.getIsLineaMainnet=fe,n.getIsMainnet=me,n.getIsMultiLayerFeeNetwork=function(e){return rt(e)},n.getIsNetworkSupportedByBlockaid=function(e){const t=x(e);return P.SUPPORTED_CHAIN_IDS.includes(t)},n.getIsNetworkUsed=function(e){const t=x(e),{usedNetworks:n}=e.metamask;return Boolean(n[t])},n.getIsNonStandardEthChain=function(e){return!(me(e)||he(e))},n.getIsOpStack=rt,n.getIsOpbnb=nt,n.getIsOptimism=et,n.getIsSecurityAlertsEnabled=function(e){return e.metamask.securityAlertsEnabled},n.getIsSigningQRHardwareTransaction=function(e){var t;return(null===(t=e.metamask.qrHardware)||void 0===t||null===(t=t.sign)||void 0===t?void 0:t.request)!==undefined},n.getIsSwapsChain=function(e){const t=x(e);return y.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(t)},n.getIsTestnet=he,n.getIsTokenDetectionInactiveOnMainnet=st,n.getIsTokenDetectionSupported=function(e){const t=Xe(e),n=at(e);return t&&n},n.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=Xe(e),n=me(e);return at(e)&&!t&&!n},n.getKeyringSnapAccounts=function(e){const t=Y(e);return Object.values(t).filter((e=>{const{keyring:t}=e.metadata;return t.type===f.KeyringType.snap}))},n.getKeyringSnapRemovalResult=function(e){return e.appState.keyringRemovalSnapModal},n.getKnownMethodData=function(e,t){if(!t)return null;const n=(0,p.addHexPrefix)(t).slice(0,10),{knownMethodData:r,use4ByteResolution:a}=e.metamask;return a&&(null==r?void 0:r[n])},n.getMemoizedUnapprovedMessages=n.getMemoizedUnapprovedConfirmations=n.getMemoizedTxId=n.getMemoizedTargetSubjectMetadata=n.getMemoizedMetadataContracts=n.getMemoizedMetadataContractName=n.getMemoizedMetadataContract=n.getMemoizedMetaMaskInternalAccounts=n.getMemoizedMetaMaskIdentities=n.getMemoizedInterfaces=n.getMemoizedInterfaceContent=n.getMemoizedInterface=n.getMemoizedCurrentChainId=n.getMemoizedAddressBook=void 0,n.getMemoizedUnapprovedTypedMessages=n.getMemoizedUnapprovedTemplatedConfirmations=n.getMemoizedUnapprovedPersonalMessages=void 0,n.getMetaMaskAccountBalances=J,n.getMetaMaskAccountsOrdered=n.getMetaMaskAccountsConnected=n.getMetaMaskAccounts=void 0,n.getMetaMaskCachedBalances=Z,n.getMetaMaskIdentities=X,n.getMetaMaskKeyrings=Q,n.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},n.getMetadataContractName=function(e,t){const n=Je(e),r=Object.values(n).find((e=>(0,N.isEqualCaseInsensitive)(e.address,t)));return r&&""!==r.name?r.name:""},n.getNameLookupSnapsIds=void 0,n.getNameSources=function(e){return e.metamask.nameSources||{}},n.getNames=function(e){return e.metamask.names||{}},n.getNativeCurrencyImage=function(e){const t=x(e);return g.CHAIN_ID_TOKEN_IMAGE_MAP[t]},n.getNetworkConfigurations=Ze,n.getNetworkIdentifier=function(e){const{type:t,nickname:n,rpcUrl:r}=(0,w.getProviderConfig)(e);return n||r||t},n.getNetworkToAutomaticallySwitchTo=function(e){Qe(e),Pe(e),ot(e);(0,p.getEnvironmentType)()===D.ENVIRONMENT_TYPE_POPUP&&(0,w.getIsUnlocked)(e),0;return null},n.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},n.getNeverShowSwitchedNetworkMessage=function(e){return e.metamask.switchedNetworkNeverShowMessage},n.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},n.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},n.getNewTokensImported=function(e){return e.appState.newTokensImported},n.getNewTokensImportedError=function(e){return e.appState.newTokensImportedError},n.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},n.getNonTestNetworks=void 0,n.getNotifications=$e,n.getNotifySnaps=void 0,n.getNumberOfAllUnapprovedTransactionsAndMessages=Qe,n.getNumberOfTokens=z,n.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},n.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},n.getOrderedNetworksList=function(e){return e.metamask.orderedNetworkList},n.getOriginOfCurrentTab=Pe,n.getPetnamesEnabled=function(e){const{petnamesEnabled:t=!0}=Te(e);return t},n.getPinnedAccountsList=Ve,n.getPreferences=Te,n.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},n.getRpcPrefsForCurrentProvider=Ce,n.getSelectedAccount=re,n.getSelectedAccountCachedBalance=te,n.getSelectedAddress=K,n.getSelectedIdentity=function(e){const t=K(e),{identities:n}=e.metamask;return n[t]},n.getSelectedInternalAccount=$,n.getSelectedInternalAccountWithBalance=function(e){const t=$(e),n=J(e)[t.address];return{...t,balance:n?n.balance:"0x0"}},n.getSelectedNetworkClientId=U,n.getSendInputCurrencySwitched=function({appState:e}){return e.sendInputCurrencySwitched},n.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=Te(e);return t},n.getShouldShowFiat=function(e){const t=me(e),n=fe(e),r=it(e),a=(0,w.getConversionRate)(e),s=ct(e),{showFiatInTestnets:o}=Te(e);return Boolean((t||n||r||o)&&s&&a)},n.getShouldShowSeedPhraseReminder=function(e){const{tokens:t,seedPhraseBackedUp:n,dismissSeedBackUpReminder:r}=e.metamask,a=$(e)?ce(e):0;return!1===n&&(parseInt(a,16)>0||t.length>0)&&!1===r},n.getShowAccountBanner=function(e){return e.metamask.showAccountBanner},n.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},n.getShowExtensionInFullSizeView=function(e){const{showExtensionInFullSizeView:t}=Te(e);return Boolean(t)},n.getShowFiatInTestnets=function(e){const{showFiatInTestnets:t}=Te(e);return t},n.getShowNetworkBanner=function(e){return e.metamask.showNetworkBanner},n.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*A.DAY},n.getShowPermissionsTour=function(e){return e.metamask.showPermissionsTour},n.getShowProductTour=function(e){return e.metamask.showProductTour},n.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:n}=e.metamask,r=(new Date).getTime(),a=n?90*A.DAY:2*A.DAY;return r-t>=a},n.getShowSurveyToast=function(e){const{surveyLinkLastClickedOrClosed:t}=e.metamask,n=new Date(`${C.SURVEY_DATE} ${C.SURVEY_START_TIME}`).getTime(),r=new Date(`${C.SURVEY_DATE} ${C.SURVEY_END_TIME}`).getTime(),a=Date.now();return a>n&&a<r&&!t},n.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(v.TERMS_OF_USE_LAST_UPDATED).getTime()},n.getShowTestNetworks=ye,n.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},n.getSnapMetadata=n.getSnapManifest=n.getSnapLatestVersion=n.getSnap=n.getSignatureInsightSnaps=n.getSignatureInsightSnapIds=void 0,n.getSnapRegistry=function(e){const{snapRegistryList:t}=e.metamask;return t},n.getSnapRegistryData=void 0,n.getSnaps=Fe,n.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},n.getSnapsList=ut,n.getSnapsMetadata=void 0,n.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),n=function(e){const t=F(e),n=(null==t?void 0:t.type)===f.KeyringType.ledger,r=window.navigator.hid!==undefined,a=(0,w.getLedgerTransportType)(e)===m.LedgerTransportTypes.live,s=window.navigator.userAgent.includes("Firefox");return{8:r&&n&&a,20:n&&s,24:!0===e.metamask.hadAdvancedGasFeesSetPriorToMigration92_3,[O.NOTIFICATION_DROP_LEDGER_FIREFOX]:n&&s,[O.NOTIFICATION_U2F_LEDGER_LIVE]:n&&!s,[O.NOTIFICATION_STAKING_PORTFOLIO]:!0,[O.NOTIFICATION_BLOCKAID_DEFAULT]:!0,[O.NOTIFICATION_PETNAMES]:!0,[O.NOTIFICATION_PORTFOLIO_V2]:!0,[O.NOTIFICATION_SIMULATIONS]:!0}}(e),r=t.filter((e=>!e.isShown&&n[e.id]));return r.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},n.getSubjectMetadata=Ee,n.getSuggestedNfts=function(e){var t;return(null===(t=pe(e))||void 0===t?void 0:t.filter((({requestData:e,type:t})=>{var n;return t===s.ApprovalType.WatchAsset&&(null==e||null===(n=e.asset)||void 0===n?void 0:n.tokenId)!==undefined})))||[]},n.getSuggestedTokens=function(e){var t;return(null===(t=pe(e))||void 0===t?void 0:t.filter((({type:e,requestData:t})=>{var n;return e===s.ApprovalType.WatchAsset&&(null==t||null===(n=t.asset)||void 0===n?void 0:n.tokenId)===undefined})))||[]},n.getSwapsDefaultToken=function(e){const t=re(e),n=null==t?void 0:t.balance,r=x(e);return{...y.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[r],balance:(0,R.hexToDecimal)(n),string:(0,R.getValueFromWeiHex)({value:n,numberOfDecimals:4,toDenomination:"ETH"})}},n.getSwitchedNetworkDetails=function(e){const{switchedNetworkDetails:t}=e.metamask,n=le(e);if(t){var r;const e=n.find((({id:e})=>t.networkClientId===e));return{nickname:null==e?void 0:e.nickname,imageUrl:null==e||null===(r=e.rpcPrefs)||void 0===r?void 0:r.imageUrl,origin:null==t?void 0:t.origin}}return null},n.getTargetAccount=function(e,t){return j(e)[t]},n.getTargetAccountWithSendEtherInfo=function(e,t){const n=oe(e);return(0,S.getAccountByAddress)(n,t)},n.getTargetSubjectMetadata=_e,n.getTestNetworkBackgroundColor=function(e){const t=e.metamask.providerConfig.ticker;switch(!0){case null==t?void 0:t.includes(g.GOERLI_DISPLAY_NAME):return b.BackgroundColor.goerli;case null==t?void 0:t.includes(g.SEPOLIA_DISPLAY_NAME):return b.BackgroundColor.sepolia;default:return undefined}},n.getTestNetworks=void 0,n.getTheme=function(e){return e.metamask.theme},n.getTokenExchangeRates=n.getTokenDetectionSupportNetworkByChainId=void 0,n.getTokenList=Je,n.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},n.getTotalUnapprovedMessagesCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:n=0,unapprovedDecryptMsgCount:r=0,unapprovedEncryptionPublicKeyMsgCount:a=0,unapprovedTypedMessagesCount:s=0}=e.metamask;return t+n+r+a+s},n.getTotalUnapprovedSignatureRequestCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:n=0,unapprovedTypedMessagesCount:r=0}=e.metamask;return t+n+r},n.getTxData=n.getTransaction=void 0,n.getUSDConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,w.getProviderConfig)(e).ticker])||void 0===t?void 0:t.usdConversionRate},n.getUnapprovedConfirmations=pe,n.getUnapprovedTemplatedConfirmations=ge,n.getUnapprovedTransaction=void 0,n.getUnapprovedTxCount=function(e){const t=(0,M.getUnapprovedTransactions)(e);return Object.keys(t).length},n.getUnconnectedAccounts=function(e){const t=ee(e),n=(0,B.getOrderedConnectedAccountsForActiveTab)(e);return t.filter((e=>!n.some((t=>t.address===e.address))))},n.getUnreadNotifications=Ye,n.getUnreadNotificationsCount=void 0,n.getUpdatedAndSortedAccounts=function(e){const t=ee(e),n=Ve(e),r=ze(e);(0,B.getOrderedConnectedAccountsForActiveTab)(e).forEach((e=>{const n=t.find((t=>t.id===e.id));n&&e.metadata&&(n.connections=!0,n.lastSelected=e.metadata.lastSelected)}));const a=t.filter((e=>e.connections&&e.lastSelected)),s=a.length>0?a.reduce(((e,t)=>e.lastSelected>t.lastSelected?e:t)):null;t.forEach((e=>{e.pinned=Boolean(n.includes(e.address)),e.hidden=Boolean(r.includes(e.address)),s&&e.id===s.id?e.active=!0:e.active=!1}));const o=null==n?void 0:n.map((e=>t.find((t=>t.address===e)))).filter((e=>Boolean(e&&n.includes(e.address)&&!(null!=r&&r.includes(e.address))))),i=t.filter((e=>!n.includes(e.address)&&!r.includes(e.address))),c=t.filter((e=>r.includes(e.address)));return[...o,...i,...c]},n.getUseBlockie=function(e){return Boolean(e.metamask.useBlockie)},n.getUseCurrencyRateCheck=ct,n.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},n.getUseNonceField=function(e){const t=(0,h.getIsSmartTransaction)(e);return Boolean(!t&&e.metamask.useNonceField)},n.getUseRequestQueue=ot,n.getUseTokenDetection=Xe,n.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},n.getsnapsAddSnapAccountModalDismissed=function(e){const{snapsAddSnapAccountModalDismissed:t}=e.metamask;return t},n.isBalanceCached=function(e){var t;const{address:n}=$(e),r=null===(t=J(e)[n])||void 0===t?void 0:t.balance,a=te(e);return Boolean(!r&&a)},n.isCurrentProviderCustom=function(e){const t=(0,w.getProviderConfig)(e);return t.type===g.NETWORK_TYPES.RPC&&!Object.values(g.CHAIN_IDS).includes(t.chainId)},n.isHardwareWallet=H,n.isNetworkLoading=function(e){const t=U(e);return t&&e.metamask.networksMetadata[t].status!==g.NetworkStatus.Available},n.useSafeChainsListValidationSelector=n.selectInstalledSnaps=n.rawStateSelector=void 0;var r,a=e("@metamask/permission-controller"),s=e("@metamask/controller-utils"),o=e("@metamask/snaps-utils"),i=e("lodash"),c=(r=e("semver"))&&r.__esModule?r:{default:r},u=e("reselect"),d=e("@metamask/name-controller"),l=e("@metamask/transaction-controller"),p=e("../../app/scripts/lib/util"),g=e("../../shared/constants/network"),m=e("../../shared/constants/hardware-wallets"),f=e("../../shared/constants/keyring"),h=e("../../shared/modules/selectors"),T=e("../../shared/constants/labels"),y=e("../../shared/constants/swaps"),E=e("../../shared/constants/bridge"),S=e("../helpers/utils/util"),_=e("../pages/confirmations/confirmation/templates"),I=e("../../shared/constants/tokens"),A=e("../../shared/constants/time"),v=e("../../shared/constants/terms"),w=e("../ducks/metamask/metamask"),k=e("../ducks/app/app"),N=e("../../shared/modules/string-utils"),R=e("../../shared/modules/conversion.utils"),b=e("../helpers/constants/design-system"),O=e("../../shared/notifications"),C=e("../helpers/constants/survey"),P=e("../../app/scripts/lib/ppom/ppom-middleware"),D=e("../../shared/constants/app"),M=e("./transactions"),B=e("./permissions"),L=e("./util");function U(e){return e.metamask.selectedNetworkClientId}function x(e){const{chainId:t}=(0,w.getProviderConfig)(e);return t}function F(e){const t=$(e);return t?t.metadata.keyring:null}function H(e){var t;const n=F(e);return Boolean(null==n||null===(t=n.type)||void 0===t?void 0:t.includes("Hardware"))}function q(e){return G(F(e))}function G(e){if(!e)return"";const{type:t}=e;switch(t){case f.KeyringType.trezor:case f.KeyringType.ledger:case f.KeyringType.lattice:case f.KeyringType.qr:return"hardware";case f.KeyringType.imported:return"imported";case f.KeyringType.snap:return"snap";default:return"default"}}const j=n.getMetaMaskAccounts=(0,u.createSelector)(Y,J,Z,((e,t,n)=>Object.values(e).reduce(((e,r)=>{let a=r;return t[r.address]&&(a={...a,...t[r.address]}),null!==a.balance&&a.balance!==undefined||(a={...a,balance:(n&&n[r.address])??"0x0"}),{...e,[r.address]:a}}),{})));function K(e){return e.metamask.selectedAddress}function W(e,t){return Object.values(e.metamask.internalAccounts.accounts).find((e=>(0,N.isEqualCaseInsensitive)(e.address,t)))}function $(e){const t=e.metamask.internalAccounts.selectedAccount;return e.metamask.internalAccounts.accounts[t]}function Y(e){return Object.values(e.metamask.internalAccounts.accounts)}const V=n.getInternalAccountsSortedByKeyring=(0,u.createSelector)(Q,j,((e,t)=>e.map((({accounts:e})=>e)).flat().map((e=>t[e]))));function z(e){const{tokens:t}=e.metamask;return t?t.length:0}function Q(e){return e.metamask.keyrings}function X(e){return e.metamask.identities}function J(e){return e.metamask.accounts}function Z(e){var t;const n=x(e);return null!==(t=e.metamask.accountsByChainId)&&void 0!==t&&t[n]?Object.entries(e.metamask.accountsByChainId[n]).reduce(((e,[t,n])=>(e[t]=n.balance,e)),{}):{}}const ee=n.getMetaMaskAccountsOrdered=(0,u.createSelector)(V,j,((e,t)=>e.map((e=>({...e,...t[e.address]})))));n.getMetaMaskAccountsConnected=(0,u.createSelector)(ee,(e=>e.map((({address:e})=>e.toLowerCase()))));function te(e){const t=Z(e),{address:n}=$(e);return null==t?void 0:t[n]}function ne(e){return e.metamask.domains}function re(e){const t=j(e),n=$(e);return n?{...n,...t[n.address]}:undefined}n.getConfirmationExchangeRates=e=>e.metamask.confirmationExchangeRates;function ae(e){const t=x(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function se(e,t){return ae(e).find((e=>(0,N.isEqualCaseInsensitive)(e.address,t)))}function oe(e){const t=j(e),n=Y(e);return Object.values(n).map((e=>({...e,...t[e.address]})))}function ie(e){const{address:t}=$(e),n=oe(e);return(0,S.getAccountByAddress)(n,t)}function ce(e){var t;return null===(t=ie(e))||void 0===t?void 0:t.balance}n.getTokenExchangeRates=e=>e.metamask.contractExchangeRates;const ue=n.getNonTestNetworks=(0,L.createDeepEqualSelector)(Ze,((e={})=>[{chainId:g.CHAIN_IDS.MAINNET,nickname:g.MAINNET_DISPLAY_NAME,rpcUrl:g.CHAIN_ID_TO_RPC_URL_MAP[g.CHAIN_IDS.MAINNET],rpcPrefs:{imageUrl:g.ETH_TOKEN_IMAGE_URL},providerType:g.NETWORK_TYPES.MAINNET,ticker:g.CURRENCY_SYMBOLS.ETH,id:g.NETWORK_TYPES.MAINNET,removable:!1},{chainId:g.CHAIN_IDS.LINEA_MAINNET,nickname:g.LINEA_MAINNET_DISPLAY_NAME,rpcUrl:g.CHAIN_ID_TO_RPC_URL_MAP[g.CHAIN_IDS.LINEA_MAINNET],rpcPrefs:{imageUrl:g.LINEA_MAINNET_TOKEN_IMAGE_URL},providerType:g.NETWORK_TYPES.LINEA_MAINNET,ticker:g.TEST_NETWORK_TICKER_MAP[g.NETWORK_TYPES.LINEA_MAINNET],id:g.NETWORK_TYPES.LINEA_MAINNET,removable:!1},...Object.values(e).filter((({chainId:e})=>![g.CHAIN_IDS.LOCALHOST].includes(e))).map((e=>{var t;return{...e,rpcPrefs:{...e.rpcPrefs,imageUrl:(null==e||null===(t=e.rpcPrefs)||void 0===t?void 0:t.imageUrl)??g.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[e.chainId]},removable:!0}}))])),de=n.getTestNetworks=(0,L.createDeepEqualSelector)(Ze,((e={})=>[{chainId:g.CHAIN_IDS.SEPOLIA,nickname:g.SEPOLIA_DISPLAY_NAME,rpcUrl:g.CHAIN_ID_TO_RPC_URL_MAP[g.CHAIN_IDS.SEPOLIA],providerType:g.NETWORK_TYPES.SEPOLIA,ticker:g.TEST_NETWORK_TICKER_MAP[g.NETWORK_TYPES.SEPOLIA],id:g.NETWORK_TYPES.SEPOLIA,removable:!1},{chainId:g.CHAIN_IDS.LINEA_GOERLI,nickname:g.LINEA_GOERLI_DISPLAY_NAME,rpcUrl:g.CHAIN_ID_TO_RPC_URL_MAP[g.CHAIN_IDS.LINEA_GOERLI],rpcPrefs:{imageUrl:g.LINEA_GOERLI_TOKEN_IMAGE_URL},providerType:g.NETWORK_TYPES.LINEA_GOERLI,ticker:g.TEST_NETWORK_TICKER_MAP[g.NETWORK_TYPES.LINEA_GOERLI],id:g.NETWORK_TYPES.LINEA_GOERLI,removable:!1},{chainId:g.CHAIN_IDS.LINEA_SEPOLIA,nickname:g.LINEA_SEPOLIA_DISPLAY_NAME,rpcUrl:g.CHAIN_ID_TO_RPC_URL_MAP[g.CHAIN_IDS.LINEA_SEPOLIA],rpcPrefs:{imageUrl:g.LINEA_SEPOLIA_TOKEN_IMAGE_URL},providerType:g.NETWORK_TYPES.LINEA_SEPOLIA,ticker:g.TEST_NETWORK_TICKER_MAP[g.NETWORK_TYPES.LINEA_SEPOLIA],id:g.NETWORK_TYPES.LINEA_SEPOLIA,removable:!1},...Object.values(e).filter((({chainId:e})=>e===g.CHAIN_IDS.LOCALHOST)).map((e=>({...e,removable:!0})))])),le=n.getAllNetworks=(0,L.createDeepEqualSelector)(ue,de,((e,t)=>[...e,...t]));function pe(e){const{pendingApprovals:t={}}=e.metamask;return Object.values(t)}function ge(e){return pe(e).filter((e=>_.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type)))}function me(e){return x(e)===g.CHAIN_IDS.MAINNET}function fe(e){return x(e)===g.CHAIN_IDS.LINEA_MAINNET}function he(e){const t=x(e);return g.TEST_CHAINS.includes(t)}function Te({metamask:e}){return e.preferences}function ye(e){const{showTestNetworks:t}=Te(e);return Boolean(t)}function Ee(e){return e.metamask.subjectMetadata}const Se=(0,i.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function _e(e,t){const n=Ee(e)[t];if((null==n?void 0:n.subjectType)===a.SubjectType.Snap){const{svgIcon:e,...t}=n;return{...t,iconUrl:e?Se(e):null}}return n}const Ie=e=>e;n.rawStateSelector=Ie;const Ae=e=>e.metamask.snaps;n.selectInstalledSnaps=Ae;const ve=n.getSnapRegistryData=(0,u.createSelector)([e=>{var t;return null===(t=e.metamask.database)||void 0===t?void 0:t.verifiedSnaps},(e,t)=>t],((e,t)=>e?e[t]:null)),we=n.getSnapLatestVersion=(0,u.createSelector)([ve],(e=>e?Object.keys(e.versions).reduce(((e,t)=>c.default.gt(t,e)?t:e),"0.0.0"):null)),ke=n.getAllSnapAvailableUpdates=(0,u.createSelector)([Ae,Ie],((e,t)=>{const n=new Map;return Object.keys(e).forEach((r=>{const a=we(t,r);n.set(r,!!a&&c.default.gt(a,e[r].version))})),n})),Ne=(n.getAnySnapUpdateAvailable=(0,u.createSelector)([ke],(e=>[...e.values()].some((e=>!0===e)))),n.getMemoizedTargetSubjectMetadata=(0,L.createDeepEqualSelector)(_e,(e=>e)),n.getMemoizedUnapprovedConfirmations=(0,L.createDeepEqualSelector)(pe,(e=>e)),n.getMemoizedUnapprovedTemplatedConfirmations=(0,L.createDeepEqualSelector)(ge,(e=>e)),(e,t)=>t),Re=n.getMemoizedInterfaces=(0,L.createDeepEqualSelector)((e=>e.metamask.interfaces),(e=>e)),be=n.getInterface=(0,u.createSelector)([Re,Ne],((e,t)=>e[t])),Oe=(n.getMemoizedInterface=(0,L.createDeepEqualSelector)(be,(e=>e)),n.getInterfaceContent=(0,u.createSelector)([Re,Ne],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.content})));n.getMemoizedInterfaceContent=(0,L.createDeepEqualSelector)(Oe,(e=>e));function Ce(e){const{rpcPrefs:t}=(0,w.getProviderConfig)(e);return t||{}}function Pe(e){return e.activeTab.origin}n.getMemoizedMetaMaskIdentities=(0,L.createDeepEqualSelector)(X,(e=>e)),n.getMemoizedMetaMaskInternalAccounts=(0,L.createDeepEqualSelector)(Y,(e=>e)),n.getMemoizedAddressBook=(0,L.createDeepEqualSelector)(ae,(e=>e)),n.getMemoizedMetadataContracts=(0,L.createDeepEqualSelector)(((e,t,n)=>Je(e,n)),((e,t)=>t),((e,t)=>t.map((t=>Object.values(e).find((e=>(0,N.isEqualCaseInsensitive)(e.address,t)))))));const De=n.getMemoizedMetadataContract=(0,L.createDeepEqualSelector)(Je,((e,t)=>t),((e,t)=>Object.values(e).find((e=>(0,N.isEqualCaseInsensitive)(e.address,t))))),Me=(n.getMemoizedMetadataContractName=(0,L.createDeepEqualSelector)(De,(e=>(null==e?void 0:e.name)??"")),e=>e.confirmTransaction.txData);n.getTxData=Me;const Be=n.getUnapprovedTransaction=(0,L.createDeepEqualSelector)((e=>(0,M.getUnapprovedTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{})),Le=n.getTransaction=(0,L.createDeepEqualSelector)((e=>(0,M.getCurrentNetworkTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{})),Ue=(n.getFullTxData=(0,L.createDeepEqualSelector)(Me,((e,t,n)=>n===l.TransactionStatus.unapproved?Be(e,t):Le(e,t)),((e,t,n,r,a)=>({customTxParamsData:r,hexTransactionAmount:a})),((e,t,{customTxParamsData:n,hexTransactionAmount:r})=>{let a={...e,...t};return t&&t.simulationFails&&(a.simulationFails={...t.simulationFails}),n&&(a={...a,txParams:{...a.txParams,data:n}}),r&&(a={...a,txParams:{...a.txParams,value:r}}),a})),n.getAllConnectedAccounts=(0,L.createDeepEqualSelector)(B.getConnectedSubjectsForAllAddresses,(e=>Object.keys(e)))),xe=n.getConnectedSitesList=(0,L.createDeepEqualSelector)(B.getConnectedSubjectsForAllAddresses,X,Ue,((e,t,n)=>{const r={};return n.forEach((n=>{e[n].forEach((e=>{const a=e.origin;r[a]?(r[a].addresses.push(n),r[a].addressToNameMap[n]=t[n].name):r[a]={...e,addresses:[n],addressToNameMap:{[n]:t[n].name}}}))})),r}));n.getConnectedSitesListWithNetworkInfo=(0,L.createDeepEqualSelector)(xe,ne,le,((e,t,n)=>(Object.keys(e).forEach((r=>{const a=n.find((e=>e.id===t[r]));e[r].networkIconUrl=a.rpcPrefs.imageUrl,e[r].networkName=a.nickname})),e))),n.getConnectedSnapsList=(0,L.createDeepEqualSelector)(ut,(e=>{const t={};return Object.values(e).forEach((e=>{t[e.name]||(t[e.name]=e)})),t})),n.getMemoizedCurrentChainId=(0,L.createDeepEqualSelector)(x,(e=>e)),n.getMemoizedTxId=(0,L.createDeepEqualSelector)((e=>e.appState.txId),(e=>e)),n.getMemoizedUnapprovedMessages=(0,L.createDeepEqualSelector)((e=>e.metamask.unapprovedMsgs),(e=>e)),n.getMemoizedUnapprovedPersonalMessages=(0,L.createDeepEqualSelector)((e=>e.metamask.unapprovedPersonalMsgs),(e=>e)),n.getMemoizedUnapprovedTypedMessages=(0,L.createDeepEqualSelector)((e=>e.metamask.unapprovedTypedMessages),(e=>e));function Fe(e){return e.metamask.snaps}const He=n.getSnap=(0,L.createDeepEqualSelector)(Fe,((e,t)=>t),((e,t)=>e[t])),qe=n.getSnapManifest=(0,L.createDeepEqualSelector)((e=>e.metamask.currentLocale),((e,t)=>He(e,t)),((e,t)=>null!=t&&t.localizationFiles?(0,o.getLocalizedSnapManifest)(t.manifest,e,t.localizationFiles):null==t?void 0:t.manifest)),Ge=n.getSnapMetadata=(0,L.createDeepEqualSelector)(((e,t)=>qe(e,t)),((e,t)=>t),((e,t)=>({name:(null==e?void 0:e.proposedName)??(t?(0,o.stripSnapPrefix)(t):null),description:null==e?void 0:e.description}))),je=(n.getSnapsMetadata=(0,L.createDeepEqualSelector)((e=>e),(e=>Object.keys(Fe(e))),((e,t)=>t.reduce(((t,n)=>(t[n]=Ge(e,n),t)),{}))),n.getEnabledSnaps=(0,L.createDeepEqualSelector)(Fe,(e=>Object.values(e).reduce(((e,t)=>(t.enabled&&(e[t.id]=t),e)),{})))),Ke=n.getInsightSnaps=(0,L.createDeepEqualSelector)(je,B.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:transaction-insight"]})))),We=n.getSignatureInsightSnaps=(0,L.createDeepEqualSelector)(je,B.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:signature-insight"]}))));n.getSignatureInsightSnapIds=(0,L.createDeepEqualSelector)(We,(e=>e.map((e=>e.id)))),n.getInsightSnapIds=(0,L.createDeepEqualSelector)(Ke,(e=>e.map((e=>e.id)))),n.getNameLookupSnapsIds=(0,L.createDeepEqualSelector)(je,B.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:name-lookup"]})).map((e=>e.id)))),n.getNotifySnaps=(0,L.createDeepEqualSelector)(je,B.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions.snap_notify}))));function $e(e){return Object.values(e.metamask.notifications).sort(((e,t)=>new Date(t.createdDate)-new Date(e.createdDate)))}function Ye(e){return $e(e).filter((e=>null===e.readDate))}n.getUnreadNotificationsCount=(0,u.createSelector)(Ye,(e=>e.length));function Ve(e){return e.metamask.pinnedAccountList}function ze(e){return e.metamask.hiddenAccountList}function Qe(e){const t={...(0,M.getUnapprovedTransactions)(e),...e.metamask.unapprovedMsgs,...e.metamask.unapprovedDecryptMsgs,...e.metamask.unapprovedPersonalMsgs,...e.metamask.unapprovedEncryptionPublicKeyMsgs,...e.metamask.unapprovedTypedMessages};return Object.keys(t).length}n.getCurrentNetwork=(0,L.createDeepEqualSelector)(le,w.getProviderConfig,((e,t)=>{const n="rpc"===t.type?e=>e.id===t.id:e=>e.id===t.type;return e.find(n)}));function Xe(e){return Boolean(e.metamask.useTokenDetection)}function Je(e,t=!1){return st(e)&&!t?I.STATIC_MAINNET_TOKEN_LIST:e.metamask.tokenList}function Ze(e){return e.metamask.networkConfigurations}n.getAllEnabledNetworks=(0,L.createDeepEqualSelector)(ue,le,ye,((e,t,n)=>n?t:e));function et(e){return x(e)===g.CHAIN_IDS.OPTIMISM||x(e)===g.CHAIN_IDS.OPTIMISM_TESTNET||x(e)===g.CHAIN_IDS.OPTIMISM_GOERLI}function tt(e){return x(e)===g.CHAIN_IDS.BASE||x(e)===g.CHAIN_IDS.BASE_TESTNET}function nt(e){return x(e)===g.CHAIN_IDS.OPBNB||x(e)===g.CHAIN_IDS.OPBNB_TESTNET}function rt(e){return et(e)||tt(e)||nt(e)}function at(e){const t=x(e);return[g.CHAIN_IDS.MAINNET,g.CHAIN_IDS.BSC,g.CHAIN_IDS.POLYGON,g.CHAIN_IDS.AVALANCHE,g.CHAIN_IDS.LINEA_GOERLI,g.CHAIN_IDS.LINEA_SEPOLIA,g.CHAIN_IDS.LINEA_MAINNET,g.CHAIN_IDS.ARBITRUM,g.CHAIN_IDS.OPTIMISM,g.CHAIN_IDS.BASE,g.CHAIN_IDS.ZKSYNC_ERA].includes(t)}function st(e){const t=me(e);return!Xe(e)&&t}function ot(e){return e.metamask.useRequestQueue}function it(e){const t=x(e);return!g.CHAIN_ID_TO_RPC_URL_MAP[t]}n.getTokenDetectionSupportNetworkByChainId=e=>{switch(x(e)){case g.CHAIN_IDS.MAINNET:return g.MAINNET_DISPLAY_NAME;case g.CHAIN_IDS.BSC:return g.BSC_DISPLAY_NAME;case g.CHAIN_IDS.POLYGON:return g.POLYGON_DISPLAY_NAME;case g.CHAIN_IDS.AVALANCHE:return g.AVALANCHE_DISPLAY_NAME;case g.CHAIN_IDS.LINEA_GOERLI:return g.LINEA_GOERLI_DISPLAY_NAME;case g.CHAIN_IDS.LINEA_SEPOLIA:return g.LINEA_SEPOLIA_DISPLAY_NAME;case g.CHAIN_IDS.LINEA_MAINNET:return g.LINEA_MAINNET_DISPLAY_NAME;case g.CHAIN_IDS.ARBITRUM:return g.ARBITRUM_DISPLAY_NAME;case g.CHAIN_IDS.OPTIMISM:return g.OPTIMISM_DISPLAY_NAME;case g.CHAIN_IDS.BASE:return g.BASE_DISPLAY_NAME;case g.CHAIN_IDS.ZKSYNC_ERA:return g.ZK_SYNC_ERA_DISPLAY_NAME;default:return""}};function ct(e){return Boolean(e.metamask.useCurrencyRateCheck)}function ut(e){const t=Fe(e);return Object.entries(t).filter((([e,t])=>!t.preinstalled)).map((([t,n])=>{const r=_e(e,null==n?void 0:n.id);return{key:t,id:n.id,iconUrl:null==r?void 0:r.iconUrl,subjectType:null==r?void 0:r.subjectType,packageName:(0,o.stripSnapPrefix)(n.id),name:Ge(e,n.id).name}}))}n.useSafeChainsListValidationSelector=e=>e.metamask.useSafeChainsListValidation}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[5518,{"../../shared/constants/transaction":4143,"../../shared/modules/conversion.utils":4158,"../ducks/metamask/metamask":4906,"../helpers/constants/transactions":4924,"../helpers/utils/tx-helper":4956,"./approvals":5509,"./selectors":5517,"./util":5519,"@metamask/controller-utils":1077,"@metamask/transaction-controller":1931,reselect:3884},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUnapprovedTransactions=n.getCurrentNetworkTransactions=n.getApprovedAndSignedTransactions=void 0,n.hasTransactionPendingApprovals=function(e){return C(e)||(0,g.hasPendingApprovals)(e,P)},n.unapprovedTypedMessagesSelector=n.unapprovedPersonalMsgsSelector=n.unapprovedMsgsSelector=n.unapprovedMessagesSelector=n.unapprovedEncryptionPublicKeyMsgsSelector=n.unapprovedDecryptMsgsSelector=n.transactionsSelector=n.transactionSubSelector=n.submittedPendingTransactionsSelector=n.smartTransactionsListSelector=n.selectedAddressTxListSelector=n.nonceSortedTransactionsSelector=n.nonceSortedPendingTransactionsSelector=n.nonceSortedCompletedTransactionsSelector=n.incomingTxListSelector=void 0;var r,a=e("@metamask/controller-utils"),s=e("reselect"),o=e("@metamask/transaction-controller"),i=e("../helpers/constants/transactions"),c=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},u=e("../../shared/constants/transaction"),d=e("../../shared/modules/conversion.utils"),l=e("../ducks/metamask/metamask"),p=e("./selectors"),g=e("./approvals"),m=e("./util");const f=[o.TransactionType.cancel,o.TransactionType.retry],h=e=>e.metamask.unapprovedMsgs;n.unapprovedMsgsSelector=h;const T=n.getCurrentNetworkTransactions=(0,m.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask??{};if(null==t||!t.length)return[];const{chainId:n}=(0,l.getProviderConfig)(e);return t.filter((e=>e.chainId===n)).sort(((e,t)=>e.time-t.time))}),(e=>e)),y=n.getUnapprovedTransactions=(0,m.createDeepEqualSelector)((e=>T(e).filter((e=>e.status===o.TransactionStatus.unapproved)).reduce(((e,t)=>(e[t.id]=t,e)),{})),(e=>e)),E=(n.getApprovedAndSignedTransactions=(0,m.createDeepEqualSelector)((e=>T(e).filter((e=>[o.TransactionStatus.approved,o.TransactionStatus.signed].includes(e.status)))),(e=>e)),n.incomingTxListSelector=(0,m.createDeepEqualSelector)((e=>{const{incomingTransactionsPreferences:t}=e.metamask;if(!t)return[];const n=T(e),{address:r}=(0,p.getSelectedInternalAccount)(e);return n.filter((e=>e.type===o.TransactionType.incoming&&e.txParams.to===r))}),(e=>e))),S=e=>e.metamask.unapprovedPersonalMsgs;n.unapprovedPersonalMsgsSelector=S;const _=e=>e.metamask.unapprovedDecryptMsgs;n.unapprovedDecryptMsgsSelector=_;const I=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;n.unapprovedEncryptionPublicKeyMsgsSelector=I;const A=e=>e.metamask.unapprovedTypedMessages;n.unapprovedTypedMessagesSelector=A;const v=e=>{var t;const{address:n}=(0,p.getSelectedInternalAccount)(e);return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t||null===(t=t[(0,p.getCurrentChainId)(e)])||void 0===t?void 0:t.filter((e=>{var t,r;const a=null===(t=e.status)||void 0===t?void 0:t.startsWith("cancelled");return(null===(r=e.txParams)||void 0===r?void 0:r.from)===n&&!e.confirmed&&(!a||a&&e.type===o.TransactionType.swap)})).map((e=>{var t;return{...e,isSmartTransaction:!0,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?u.SmartTransactionStatus.cancelled:e.status}}))};n.smartTransactionsListSelector=v;const w=n.selectedAddressTxListSelector=(0,s.createSelector)(p.getSelectedInternalAccount,T,v,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e.address)).filter((({type:e})=>e!==o.TransactionType.incoming)).concat(n))),k=n.unapprovedMessagesSelector=(0,s.createSelector)(h,S,_,I,A,p.getCurrentChainId,((e={},t={},n={},r={},a={},s)=>(0,c.default)({},e,t,n,r,a,s)||[])),N=n.transactionSubSelector=(0,s.createSelector)(k,E,((e=[],t=[])=>e.concat(t))),R=n.transactionsSelector=(0,s.createSelector)(N,w,((e=[],t=[])=>t.concat(e).sort(((e,t)=>t.time-e.time)))),b=(e,t)=>{const{primaryTransaction:{time:n}={}}=t;let r=e.length;for(let t=0;t<e.length;t++){const a=e[t],{primaryTransaction:{time:s}={}}=a;if(s>n){r=t;break}}e.splice(r,0,t)},O=n.nonceSortedTransactionsSelector=(0,s.createSelector)(R,((e=[])=>{const t=[],n=[],r=[],a={};e.forEach((e=>{const{txParams:{nonce:s}={},status:c,type:u,time:l,txReceipt:p}=e;if(void 0===s||u===o.TransactionType.incoming){const r={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:s};u===o.TransactionType.incoming?n.push(r):b(t,r)}else if(s in a){var g,m;const t=a[s];((e,t)=>{const{time:n}=t;let r=e.length;for(let t=0;t<e.length;t++)if(e[t].time>n){r=t;break}e.splice(r,0,t)})(t.transactions,e);const{primaryTransaction:{time:n=0}={},initialTransaction:{time:r=0}={}}=t,d={isOnChainFailure:"0x0"===(null==p?void 0:p.status),isEphemeral:c===o.TransactionStatus.failed&&"0x0"!==(null==p?void 0:p.status),isRetryOrCancel:f.includes(u),occurredAfterPrimary:l>n,hasPriorityStatus:c in i.PRIORITY_STATUS_HASH,isConfirmed:c===o.TransactionStatus.confirmed,occurredBeforeInitial:l<r,isValidRetry:u===o.TransactionType.retry&&(c in i.PRIORITY_STATUS_HASH||c===o.TransactionStatus.dropped),isValidCancel:u===o.TransactionType.cancel&&(c in i.PRIORITY_STATUS_HASH||c===o.TransactionStatus.dropped)};d.eligibleForInitial=!d.isRetryOrCancel&&!d.isEphemeral,d.shouldBePrimary=d.isConfirmed||d.isOnChainFailure;const h={isEphemeral:t.primaryTransaction.status===o.TransactionStatus.failed&&"0x0"!==(null===(g=t.primaryTransaction)||void 0===g||null===(g=g.txReceipt)||void 0===g?void 0:g.status)},T={isEphemeral:t.initialTransaction.status===o.TransactionStatus.failed&&"0x0"!==(null===(m=t.initialTransaction.txReceipt)||void 0===m?void 0:m.status)};(d.shouldBePrimary||h.isEphemeral||d.occurredAfterPrimary&&d.hasPriorityStatus)&&(t.primaryTransaction=e),(d.occurredBeforeInitial&&d.eligibleForInitial||T.isEphemeral&&d.eligibleForInitial)&&(t.initialTransaction=e),d.isValidRetry&&(t.hasRetried=!0),d.isValidCancel&&(t.hasCancelled=!0)}else a[s]={nonce:s,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===o.TransactionType.retry&&(e.status in i.PRIORITY_STATUS_HASH||e.status===o.TransactionStatus.dropped),hasCancelled:e.type===o.TransactionType.cancel&&(e.status in i.PRIORITY_STATUS_HASH||e.status===o.TransactionStatus.dropped)},((e,t)=>{let n=e.length;for(let r=0;r<e.length;r++){const a=e[r];if(Number((0,d.hexToDecimal)(a))>Number((0,d.hexToDecimal)(t))){n=r;break}}e.splice(n,0,t)})(r,s)}));const s=r.map((e=>a[e]));return((e,t)=>{t.forEach((t=>{b(e,t)}))})(s,n),t.concat(s).map((e=>{var t;if(f.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!f.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))})),C=(n.nonceSortedPendingTransactionsSelector=(0,s.createSelector)(O,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in i.PENDING_STATUS_HASH)))),n.nonceSortedCompletedTransactionsSelector=(0,s.createSelector)(O,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in i.PENDING_STATUS_HASH))).reverse())),n.submittedPendingTransactionsSelector=(0,s.createSelector)(R,((e=[])=>e.filter((e=>e.status===o.TransactionStatus.submitted)))),e=>{const t=y(e),n=(0,g.getApprovalRequestsByType)(e,a.ApprovalType.Transaction),r=(0,p.getCurrentChainId)(e);return n.filter((({id:e})=>t[e]&&t[e].chainId===r)).length>0}),P=[a.ApprovalType.EthDecrypt,a.ApprovalType.EthGetEncryptionPublicKey,a.ApprovalType.EthSign,a.ApprovalType.EthSignTypedData,a.ApprovalType.PersonalSign]}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[5519,{lodash:3477,reselect:3884},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createDeepEqualSelector=void 0;var r=e("lodash"),a=e("reselect");n.createDeepEqualSelector=(0,a.createSelectorCreator)(a.defaultMemoize,r.isEqual)}}},{package:"$root$",file:"ui/selectors/util.js"}],[552,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/types.js"}],[5520,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_TRANSACTION_PARAMS=n.UPDATE_METAMASK_STATE=n.UPDATE_CUSTOM_NONCE=n.UNLOCK_SUCCEEDED=n.UNLOCK_IN_PROGRESS=n.UNLOCK_FAILED=n.TRANSACTION_ERROR=n.TOGGLE_NETWORK_MENU=n.TOGGLE_GAS_LOADING_ANIMATION=n.TOGGLE_CURRENCY_INPUT_SWITCH=n.TOGGLE_ACCOUNT_MENU=n.SHOW_SEND_TOKEN_PAGE=n.SHOW_PRIVATE_KEY=n.SHOW_LOADING=n.SHOW_KEYRING_SNAP_REMOVAL_RESULT=n.SHOW_IPFS_MODAL_OPEN=n.SHOW_IPFS_MODAL_CLOSE=n.SHOW_CONF_TX_PAGE=n.SHOW_ACCOUNTS_PAGE=n.SET_WEBHID_CONNECTED_STATUS=n.SET_SMART_TRANSACTIONS_ERROR=n.SET_SELECTED_NETWORK_CONFIGURATION_ID=n.SET_REQUEST_ACCOUNT_TABS=n.SET_REMOVE_NFT_MESSAGE=n.SET_PENDING_TOKENS=n.SET_PARTICIPATE_IN_METAMETRICS=n.SET_OPEN_METAMASK_TAB_IDS=n.SET_NEXT_NONCE=n.SET_NEW_TOKENS_IMPORTED_ERROR=n.SET_NEW_TOKENS_IMPORTED=n.SET_NEW_NFT_ADDED_MESSAGE=n.SET_NEW_NETWORK_ADDED=n.SET_LEDGER_TRANSPORT_STATUS=n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=n.SET_FIRST_TIME_FLOW_TYPE=n.SET_CUSTOM_TOKEN_AMOUNT=n.SET_CURRENT_LOCALE=n.SET_CONFIRMATION_EXCHANGE_RATES=n.SET_ACCOUNT_LABEL=n.SET_ACCOUNT_DETAILS_ADDRESS=n.SELECTED_ADDRESS_CHANGED=n.SELECTED_ACCOUNT_CHANGED=n.QR_CODE_DETECTED=n.ONBOARDED_IN_THIS_UI_SESSION=n.NETWORK_DROPDOWN_OPEN=n.NETWORK_DROPDOWN_CLOSE=n.MODAL_OPEN=n.MODAL_CLOSE=n.LOCK_METAMASK=n.LOADING_METHOD_DATA_STARTED=n.LOADING_METHOD_DATA_FINISHED=n.IMPORT_TOKENS_POPOVER_OPEN=n.IMPORT_TOKENS_POPOVER_CLOSE=n.IMPORT_NFTS_MODAL_OPEN=n.IMPORT_NFTS_MODAL_CLOSE=n.HIDE_WHATS_NEW_POPUP=n.HIDE_WARNING=n.HIDE_LOADING=n.HIDE_KEYRING_SNAP_REMOVAL_RESULT=n.GO_HOME=n.GAS_FEE_ESTIMATES_UPDATED=n.DISPLAY_WARNING=n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=n.DEPRECATED_NETWORK_POPOVER_OPEN=n.DEPRECATED_NETWORK_POPOVER_CLOSE=n.CONNECT_ACCOUNTS_MODAL_OPEN=n.CONNECT_ACCOUNTS_MODAL_CLOSE=n.COMPLETE_ONBOARDING=n.COMPLETED_TX=n.CLOSE_WELCOME_SCREEN=n.CLEAR_PENDING_TOKENS=n.CLEAR_ACCOUNT_DETAILS=n.CHAIN_CHANGED=n.CAPTURE_SINGLE_EXCEPTION=n.ALERT_OPEN=n.ALERT_CLOSE=n.ADDRESS_BOOK_UPDATED=n.ACCOUNT_CHANGED=void 0;n.GO_HOME="GO_HOME",n.MODAL_OPEN="UI_MODAL_OPEN",n.MODAL_CLOSE="UI_MODAL_CLOSE",n.SET_CONFIRMATION_EXCHANGE_RATES="SET_CONFIRMATION_EXCHANGE_RATES",n.ALERT_OPEN="UI_ALERT_OPEN",n.ALERT_CLOSE="UI_ALERT_CLOSE",n.QR_CODE_DETECTED="UI_QR_CODE_DETECTED",n.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN",n.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE",n.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN",n.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE",n.SHOW_IPFS_MODAL_OPEN="UI_IPFS_MODAL_OPEN",n.SHOW_IPFS_MODAL_CLOSE="UI_IPFS_MODAL_CLOSE",n.IMPORT_TOKENS_POPOVER_OPEN="UI_IMPORT_TOKENS_POPOVER_OPEN",n.IMPORT_TOKENS_POPOVER_CLOSE="UI_IMPORT_TOKENS_POPOVER_CLOSE",n.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE",n.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED",n.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED",n.ACCOUNT_CHANGED="ACCOUNT_CHANGED",n.CHAIN_CHANGED="CHAIN_CHANGED",n.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED",n.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED",n.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN",n.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS",n.UNLOCK_FAILED="UNLOCK_FAILED",n.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED",n.LOCK_METAMASK="LOCK_METAMASK",n.DISPLAY_WARNING="DISPLAY_WARNING",n.HIDE_WARNING="HIDE_WARNING",n.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION",n.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE",n.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE",n.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE",n.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY",n.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL",n.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS",n.SET_ACCOUNT_DETAILS_ADDRESS="SET_ACCOUNT_DETAILS_ADDRESS",n.COMPLETED_TX="COMPLETED_TX",n.TRANSACTION_ERROR="TRANSACTION_ERROR",n.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS",n.SET_NEXT_NONCE="SET_NEXT_NONCE",n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH",n.SHOW_LOADING="SHOW_LOADING_INDICATION",n.HIDE_LOADING="HIDE_LOADING_INDICATION",n.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU",n.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU",n.DEPRECATED_NETWORK_POPOVER_OPEN="DEPRECATED_NETWORK_POPOVER_OPEN",n.DEPRECATED_NETWORK_POPOVER_CLOSE="DEPRECATED_NETWORK_POPOVER_CLOSE",n.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE",n.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS",n.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE",n.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING",n.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION",n.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS",n.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS",n.SET_PENDING_TOKENS="SET_PENDING_TOKENS",n.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS",n.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE",n.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID",n.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED",n.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE",n.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE",n.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED",n.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED",n.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS",n.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS",n.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP",n.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION",n.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR",n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE",n.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH",n.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED",n.SET_NEW_TOKENS_IMPORTED_ERROR="SET_NEW_TOKENS_IMPORTED_ERROR",n.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT",n.CONNECT_ACCOUNTS_MODAL_OPEN="UI_CONNECT_ACCOUNTS_MODAL_OPEN",n.CONNECT_ACCOUNTS_MODAL_CLOSE="UI_CONNECT_ACCOUNTS_MODAL_CLOSE",n.SHOW_KEYRING_SNAP_REMOVAL_RESULT="SHOW_KEYRING_SNAP_REMOVAL_RESULT",n.HIDE_KEYRING_SNAP_REMOVAL_RESULT="HIDE_KEYRING_SNAP_REMOVAL_RESULT"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}],[5521,{"../../app/scripts/lib/util":92,"../../shared/constants/app":4120,"../../shared/constants/common":4122,"../../shared/constants/hardware-wallets":4126,"../../shared/lib/switch-direction":4150,"../../shared/modules/conversion.utils":4158,"../../shared/modules/error":4160,"../../shared/modules/hexstring-utils":4164,"../../shared/modules/i18n":4165,"../../shared/modules/string-utils":4177,"../ducks/alerts/unconnected-account":4896,"../ducks/metamask/metamask":4906,"../ducks/send":4908,"../helpers/constants/notifications":4917,"../helpers/utils/transactions.util":4955,"../pages/swaps/swaps.util":5495,"../selectors":5513,"./actionConstants":5520,"./background-connection":5522,"@sentry/browser":2072,buffer:2634,"eth-rpc-errors":2865,lodash:3477,loglevel:3483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.abortTransactionSigning=function(e){return async t=>{try{await(0,w.submitRequestToBackground)("abortTransactionSigning",[e])}catch(e){t(Z(e))}}},n.addImportedTokens=function(e,t){return async n=>{try{await(0,w.submitRequestToBackground)("addImportedTokens",[e,t])}catch(e){(0,A.logErrorWithMessage)(e)}finally{await ne(n)}}},n.addMorePermittedAccounts=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,w.callBackgroundMethod)("addMorePermittedAccounts",[e,t],(e=>{e?r(e):n()}))})),await ne(n)}},n.addNewAccount=function(){return r.default.debug("background.addNewAccount"),async(e,t)=>{const n=(0,l.getInternalAccounts)(t());let r;e(X());try{r=await(0,w.submitRequestToBackground)("addNewAccount",[Object.keys(n).length])}catch(t){throw e(Z(t)),t}finally{e(J())}return await ne(e),r}},n.addNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||r(X());try{await(0,w.submitRequestToBackground)("addNft",[e,t])}catch(e){(0,A.logErrorWithMessage)(e),r(Z(e))}finally{await ne(r),r(J())}}},n.addNftVerifyOwnership=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||r(X());try{await(0,w.submitRequestToBackground)("addNftVerifyOwnership",[e,t])}catch(e){if((0,A.isErrorWithMessage)(e)&&(e.message.includes("This NFT is not owned by the user")||e.message.includes("Unable to verify ownership")))throw e;(0,A.logErrorWithMessage)(e),r(Z(e))}finally{await ne(r),r(J())}}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,w.callBackgroundMethod)("addPermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await ne(n)}},n.addPollingTokenToAppState=ce,n.addToAddressBook=function(e,t="",n=""){return r.default.debug("background.addToAddressBook"),async(r,a)=>{const{chainId:s}=(0,m.getProviderConfig)(a());let o;try{o=await(0,w.submitRequestToBackground)("setAddressBook",[(0,f.toChecksumHexAddress)(e),t,s,n])}catch(e){throw(0,A.logErrorWithMessage)(e),r(Z("Address book failed to update")),e}o||r(Z("Address book failed to update"))}},n.addToken=function({address:e,symbol:t,decimals:n,image:r,networkClientId:a},s){return async o=>{if(!e)throw new Error("MetaMask - Cannot add token without address");s||o(X());try{await(0,w.submitRequestToBackground)("addToken",[{address:e,symbol:t,decimals:n,image:r,networkClientId:a}])}catch(e){(0,A.logErrorWithMessage)(e),o(Z(e))}finally{await ne(o),o(J())}}},n.addTransactionAndRouteToConfirmationPage=function(e,t){return async n=>{const a=(0,w.generateActionId)();try{r.default.debug("background.addTransaction");const s=await(0,w.submitRequestToBackground)("addTransaction",[e,{...t,actionId:a,origin:u.ORIGIN_METAMASK}]);return n($()),s}catch(e){n(J()),n(Z(e))}return null}},n.addTransactionAndWaitForPublish=async function(e,t){r.default.debug("background.addTransactionAndWaitForPublish");const n=(0,w.generateActionId)();return await(0,w.submitRequestToBackground)("addTransactionAndWaitForPublish",[e,{...t,origin:u.ORIGIN_METAMASK,actionId:n}])},n.approvePermissionsRequest=function(e){return t=>{(0,w.callBackgroundMethod)("approvePermissionsRequest",[e],(e=>{e&&t(Z(e)),ne(t)}))}},n.attemptLedgerTransportCreation=async function(){return await(0,w.submitRequestToBackground)("attemptLedgerTransportCreation")},n.automaticallySwitchNetwork=function(e,t){return async n=>{await n(V(e)),await n(Y({networkClientId:e,origin:t})),await ne(n)}},n.backupUserData=async function(){let e;try{e=await(0,w.submitRequestToBackground)("backupUserData")}catch(e){throw(0,A.logErrorWithMessage)(e),e}return e},n.cancelDecryptMsg=function(e){return async t=>{let n;t(X());try{n=await(0,w.submitRequestToBackground)("cancelDecryptMessage",[e.id])}finally{t(J())}return t(q(n)),t(B(e.id)),t(Q()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{let n;t(X());try{n=await(0,w.submitRequestToBackground)("cancelEncryptionPublicKey",[e.id])}finally{t(J())}return t(q(n)),t(B(e.id)),t(Q()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(J()),await(0,w.submitRequestToBackground)("cancelQRHardwareSignRequest")}},n.cancelSmartTransaction=function(e){return async t=>{try{await(0,w.submitRequestToBackground)("cancelSmartTransaction",[e])}catch(e){if((0,A.logErrorWithMessage)(e),(0,A.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const n=(0,T.parseSmartTransactionsError)(e.message);t({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:n})}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(J()),await(0,w.submitRequestToBackground)("cancelSyncQRHardware")}},n.cancelTx=function(e,t=!0){return n=>(t&&n(X()),new Promise(((t,n)=>{(0,w.callBackgroundMethod)("rejectPendingApproval",[String(e.id),o.ethErrors.provider.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))})).then((()=>M())).then((e=>n(q(e)))).then((()=>(n((0,p.resetSendState)()),n(B(e.id)),n(J()),n(Q()),e))).catch((e=>{throw n(J()),e})))},n.cancelTxs=function(e){return async t=>{t(X());try{const n=e.map((({id:e})=>e)),r=n.map((e=>new Promise(((t,n)=>{(0,w.callBackgroundMethod)("rejectPendingApproval",[String(e),o.ethErrors.provider.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))}))));await Promise.all(r);const a=await M();t(q(a)),t((0,p.resetSendState)()),n.forEach((e=>{t(B(e))}))}finally{(0,d.getEnvironmentType)()===u.ENVIRONMENT_TYPE_NOTIFICATION?de():t(J())}}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:r}=n().appState;e in r||(t({type:v.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,a.captureException)(Error(e)))}},n.checkAndUpdateAllNftsOwnershipStatus=async function(){await(0,w.submitRequestToBackground)("checkAndUpdateAllNftsOwnershipStatus")},n.checkAndUpdateSingleNftOwnershipStatus=async function(e){await(0,w.submitRequestToBackground)("checkAndUpdateSingleNftOwnershipStatus",[e,!1])},n.checkHardwareStatus=function(e,t){return r.default.debug("background.checkHardwareStatus",e,t),async n=>{n(X());let r=!1;try{r=await(0,w.submitRequestToBackground)("checkHardwareStatus",[e,t])}catch(e){throw(0,A.logErrorWithMessage)(e),n(Z(e)),e}finally{n(J())}return await ne(n),r}},n.clearAccountDetails=function(){return{type:v.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:v.CLEAR_PENDING_TOKENS}},n.clearSmartTransactionFees=function(){(0,w.submitRequestToBackground)("clearSmartTransactionFees")},n.clearSwapsQuotes=function(){return async e=>{await(0,w.submitRequestToBackground)("clearSwapsQuotes"),await ne(e)}},n.clearSwitchedNetworkDetails=function(){return async e=>{await(0,w.submitRequestToBackground)("clearSwitchedNetworkDetails",[]),await ne(e)}},n.closeCurrentNotificationWindow=Q,n.closeNotificationPopup=de,n.closeWelcomeScreen=function(){return{type:v.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=te,n.completedTx=B,n.connectHardware=function(e,t,n,a){return r.default.debug("background.connectHardware",e,t,n),async(r,o)=>{const{ledgerTransportType:i}=o().metamask;let c;r(X(`Looking for your ${(0,s.capitalize)(e)}...`));try{if(e===h.HardwareDeviceNames.ledger&&i===h.LedgerTransportTypes.webhid){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:h.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(h.LEDGER_USB_VENDOR_ID))))throw new Error(a("ledgerWebHIDNotConnectedErrorMessage"))}c=await(0,w.submitRequestToBackground)("connectHardware",[e,t,n])}catch(t){throw(0,A.logErrorWithMessage)(t),e===h.HardwareDeviceNames.ledger&&i===h.LedgerTransportTypes.webhid&&(0,A.isErrorWithMessage)(t)&&t.message.match("Failed to open the device")?(r(Z(a("ledgerDeviceOpenFailureMessage"))),new Error(a("ledgerDeviceOpenFailureMessage"))):(e!==h.HardwareDeviceNames.qr&&r(Z(t)),t)}finally{r(J())}return await ne(r),c}},n.createCancelTransaction=function(e,t,n={}){let a;return r.default.debug("background.createCancelTransaction"),r=>{const s=(0,w.generateActionId)();return new Promise(((o,i)=>{(0,w.callBackgroundMethod)("createCancelTransaction",[e,t,{...n,actionId:s}],((t,n)=>{var s;if(t)return null!=t&&null!==(s=t.message)&&void 0!==s&&s.includes("Previous transaction is already confirmed")&&r(z({name:"TRANSACTION_ALREADY_CONFIRMED",originalTransactionId:e})),r(Z(t)),void i(t);if(n){const e=(0,l.getCurrentNetworkTransactions)({metamask:n}),{id:t}=e[e.length-1];a=t,o(n)}}))})).then((e=>r(q(e)))).then((()=>a))}},n.createEventFragment=function(e){const t=(0,w.generateActionId)();return(0,w.submitRequestToBackground)("createEventFragment",[{...e,actionId:t}])},n.createNewVault=O,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(X());try{await O(e);return await P(e)}catch(e){throw t(Z(e)),(0,A.isErrorWithMessage)(e)?new Error(e.message):e}finally{t(J())}}},n.createNewVaultAndRestore=function(e,n){return a=>{a(X()),r.default.debug("background.createNewVaultAndRestore");const s=Array.from(t.from(n,"utf8").values());let o;return new Promise(((t,n)=>{(0,w.callBackgroundMethod)("createNewVaultAndRestore",[e,s],((e,r)=>{e?n(e):(o=r,t())}))})).then((()=>a(U()))).then((()=>(a(W()),a(J()),o))).catch((e=>(a(Z(e.message)),a(J()),Promise.reject(e))))}},n.createRetryTransaction=function(e,t){let n;return r=>new Promise(((a,s)=>{const o=(0,w.generateActionId)();(0,w.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{actionId:o}],((e,t)=>{if(e)return r(Z(e)),void s(e);if(t){const e=(0,l.getCurrentNetworkTransactions)(t);n=e[e.length-1],a(t)}}))})).then((e=>r(q(e)))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n={}){let a;return r.default.debug("background.createSpeedUpTransaction"),r=>{const s=(0,w.generateActionId)();return new Promise(((o,i)=>{(0,w.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{...n,actionId:s}],((e,t)=>{if(e)return r(Z(e)),void i(e);if(t){const e=(0,l.getCurrentNetworkTransactions)(t);a=e[e.length-1],o(t)}}))})).then((e=>r(q(e)))).then((()=>a))}},n.createTransactionEventFragment=function(e){const t=(0,w.generateActionId)();return(0,w.submitRequestToBackground)("createTransactionEventFragment",[{transactionId:e,actionId:t}])},n.decryptMsg=function(e){return r.default.debug("action - decryptMsg"),async t=>{let n;t(X()),r.default.debug("actions calling background.decryptMessage");try{n=await(0,w.submitRequestToBackground)("decryptMessage",[e])}catch(e){throw(0,A.logErrorWithMessage)(e),t(Z(e)),e}finally{t(J())}return t(q(n)),t(B(e.metamaskId)),t(Q()),e}},n.decryptMsgInline=function(e){return r.default.debug("action - decryptMsgInline"),async t=>{let n;r.default.debug("actions calling background.decryptMessageInline");try{n=await(0,w.submitRequestToBackground)("decryptMessageInline",[e])}catch(e){throw(0,A.logErrorWithMessage)(e),t(Z(e)),e}return t(q(n)),n.unapprovedDecryptMsgs[e.metamaskId]}},n.deleteExpiredNotifications=function(){return async(e,t)=>{const n=t(),r=(0,l.getNotifications)(n).filter((e=>{const t=new Date(Date.now()-E.NOTIFICATIONS_EXPIRATION_DELAY);return Boolean(e.readDate&&new Date(e.readDate)<t)})).map((({id:e})=>e));r.length&&(await(0,w.submitRequestToBackground)("dismissNotifications",[r]),await ne(e))}},n.deleteInterface=function(e){return async t=>{await(0,w.submitRequestToBackground)("deleteInterface",[e]),await ne(t)}},n.detectNfts=function(){return async e=>{e(X()),r.default.debug("background.detectNfts"),await(0,w.submitRequestToBackground)("detectNfts"),e(J()),await ne(e)}},n.detectTokens=function(){return async e=>{e(X()),r.default.debug("background.detectTokens"),await(0,w.submitRequestToBackground)("detectTokens"),e(J()),await ne(e)}},n.disableSnap=function(e){return async t=>{await(0,w.submitRequestToBackground)("disableSnap",[e]),await ne(t)}},n.disconnectOriginFromSnap=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("disconnectOriginFromSnap",[e,t]),await ne(n)}},n.dismissNotifications=function(e){return async t=>{await(0,w.submitRequestToBackground)("dismissNotifications",[e]),await ne(t)}},n.dismissOpenSeaToBlockaidBanner=function(){return e=>{r.default.debug("background.dismissOpenSeaToBlockaidBanner"),(0,w.callBackgroundMethod)("dismissOpenSeaToBlockaidBanner",[],(t=>{t&&e(Z(t))}))}},n.dismissSmartTransactionsErrorMessage=function(){return{type:v.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=Z,n.editAndSetNetworkConfiguration=function({networkConfigurationId:e,rpcUrl:t,chainId:n,nickname:a,rpcPrefs:s,ticker:o=I.EtherDenomination.ETH},{source:i}){return async c=>{r.default.debug(`background.removeNetworkConfiguration: ${e}`);try{await(0,w.submitRequestToBackground)("removeNetworkConfiguration",[e])}catch(e){return(0,A.logErrorWithMessage)(e),void c(Z("Had a problem removing network!"))}try{await(0,w.submitRequestToBackground)("upsertNetworkConfiguration",[{rpcUrl:t,chainId:n,ticker:o,nickname:a||t,rpcPrefs:s},{setActive:!0,referrer:u.ORIGIN_METAMASK,source:i}])}catch(e){(0,A.logErrorWithMessage)(e),c(Z("Had a problem changing networks!"))}}},n.enableSnap=function(e){return async t=>{await(0,w.submitRequestToBackground)("enableSnap",[e]),await ne(t)}},n.encryptionPublicKeyMsg=function(e){return r.default.debug("action - encryptionPublicKeyMsg"),async t=>{let n;t(X()),r.default.debug("actions calling background.encryptionPublicKey");try{n=await(0,w.submitRequestToBackground)("encryptionPublicKey",[e])}catch(e){throw(0,A.logErrorWithMessage)(e),t(Z(e)),e}finally{t(J())}return t(q(n)),t(B(e.metamaskId)),t(Q()),e}},n.estimateGas=function(e){return(0,w.submitRequestToBackground)("estimateGas",[e])},n.exportAccount=function(e,t,n,a){return function(s){return s(X()),r.default.debug("background.verifyPassword"),new Promise(((o,i)=>{(0,w.callBackgroundMethod)("verifyPassword",[e],(function(c){if(c)return r.default.error("Error in verifying password."),s(J()),s(Z("Incorrect Password.")),void i(c);r.default.debug("background.exportAccount"),(0,w.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(s(J()),e)return(0,A.logErrorWithMessage)(e),s(Z("Had a problem exporting the account.")),void i(e);n(t),a(!0),o(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return r.default.debug("background.verifyPassword"),new Promise(((a,s)=>{(0,w.callBackgroundMethod)("verifyPassword",[e],(function(o){if(o)return r.default.error("Error in submitting password."),void s(o);r.default.debug("background.exportAccounts");const i=t.map((t=>new Promise(((r,a)=>(0,w.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(e)return(0,A.logErrorWithMessage)(e),n(Z("Had a problem exporting the account.")),void a(e);r(t)}))))));a(Promise.all(i))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[r,a]=await(0,w.submitRequestToBackground)("fetchAndSetQuotes",[e,t]);return await ne(n),[r,a]}},n.fetchSmartTransactionFees=function(e,t){return async n=>{t&&(t.value="0x0");try{const r=await await(0,w.submitRequestToBackground)("fetchSmartTransactionFees",[e,t]);return n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:null}),r}catch(e){if((0,A.logErrorWithMessage)(e),(0,A.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,T.parseSmartTransactionsError)(e.message);n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,w.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(e){(0,A.logErrorWithMessage)(e)}}},n.finalizeEventFragment=function(e,t){return(0,w.submitRequestToBackground)("finalizeEventFragment",[e,t])},n.forceUpdateMetamaskState=ne,n.forgetDevice=function(e){return r.default.debug("background.forgetDevice",e),async t=>{t(X());try{await(0,w.submitRequestToBackground)("forgetDevice",[e])}catch(e){throw(0,A.logErrorWithMessage)(e),t(Z(e)),e}finally{t(J())}await ne(t)}},n.gasFeeStartPollingByNetworkClientId=async function(e){const t=await(0,w.submitRequestToBackground)("gasFeeStartPollingByNetworkClientId",[e]);return await ce(t),t},n.gasFeeStopPollingByPollingToken=async function(e){await(0,w.submitRequestToBackground)("gasFeeStopPollingByPollingToken",[e]),await ue(e)},n.getBalancesInSingleCall=async function(e){return await(0,w.submitRequestToBackground)("getBalancesInSingleCall",[e])},n.getContractMethodData=function(e=""){return async(t,n)=>{const a=(0,d.addHexPrefix)(e).slice(0,10);if(a.length<10)return{};const{knownMethodData:s,use4ByteResolution:o}=n().metamask;if(null!=s&&s[a]&&0!==Object.keys(s[a]).length)return s[a];r.default.debug("loadingMethodData");const{name:c,params:u}=await(0,i.getMethodDataAsync)(a,o);return(0,w.callBackgroundMethod)("addKnownMethodData",[a,{name:c,params:u}],(e=>{e&&t(Z(e))})),{name:c,params:u}}},n.getCurrentNetworkEIP1559Compatibility=async function(){let e;try{e=await(0,w.submitRequestToBackground)("getCurrentNetworkEIP1559Compatibility")}catch(e){console.error(e)}return e},n.getGasFeeTimeEstimate=function(e,t){return(0,w.submitRequestToBackground)("getGasFeeTimeEstimate",[e,t])},n.getNetworkConfigurationByNetworkClientId=async function(e){let t;try{t=await(0,w.submitRequestToBackground)("getNetworkConfigurationByNetworkClientId",[e])}catch(e){console.error(e)}return t},n.getNextNonce=function(){return async(e,t)=>{const{address:n}=(0,l.getSelectedInternalAccount)(t()),r=(0,l.getSelectedNetworkClientId)(t());let a;try{a=await(0,w.submitRequestToBackground)("getNextNonce",[n,r])}catch(t){throw e(Z(t)),t}return e(se(a)),a}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(ie(await(0,w.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},n.getPhishingResult=async function(e){return await(0,w.submitRequestToBackground)("getPhishingResult",[e])},n.getRequestAccountTabIds=function(){return async e=>{e(oe(await(0,w.submitRequestToBackground)("getRequestAccountTabIds")))}},n.getRpcMethodPreferences=function(){return async e=>{e(X()),await(0,w.submitRequestToBackground)("getRpcMethodPreferences",[]),e(J())}},n.getSeedPhrase=P,n.getSnapAccountsById=async function(e){return await(0,w.submitRequestToBackground)("getAccountsBySnapId",[e])},n.getTokenStandardAndDetails=async function(e,t,n){return await(0,w.submitRequestToBackground)("getTokenStandardAndDetails",[e,t,n])},n.getTokenSymbol=async function(e){return await(0,w.submitRequestToBackground)("getTokenSymbol",[e])},n.getTransactions=async function(e={}){return await(0,w.submitRequestToBackground)("getTransactions",[e])},n.goHome=R,n.handleSnapRequest=async function(e){return(0,w.submitRequestToBackground)("handleSnapRequest",[e])},n.hideAccountBanner=function(){return(0,w.submitRequestToBackground)("setShowAccountBanner",[!1])},n.hideAlert=function(){return{type:v.ALERT_CLOSE}},n.hideBetaHeader=function(){return(0,w.submitRequestToBackground)("setShowBetaHeader",[!1])},n.hideDeprecatedNetworkModal=function(){return{type:v.DEPRECATED_NETWORK_POPOVER_CLOSE}},n.hideImportNftsModal=function(){return{type:v.IMPORT_NFTS_MODAL_CLOSE}},n.hideImportTokensModal=function(){return{type:v.IMPORT_TOKENS_POPOVER_CLOSE}},n.hideIpfsModal=function(){return{type:v.SHOW_IPFS_MODAL_CLOSE}},n.hideKeyringRemovalResultModal=function(){return{type:v.HIDE_KEYRING_SNAP_REMOVAL_RESULT}},n.hideLoadingIndication=J,n.hideModal=function(){return{type:v.MODAL_CLOSE}},n.hideNetworkBanner=function(){return(0,w.submitRequestToBackground)("setShowNetworkBanner",[!1])},n.hideNetworkDropdown=function(){return{type:v.NETWORK_DROPDOWN_CLOSE}},n.hidePermissionsTour=function(){return(0,w.submitRequestToBackground)("setShowPermissionsTour",[!1])},n.hideProductTour=function(){return(0,w.submitRequestToBackground)("setShowProductTour",[!1])},n.hideTestNetMessage=function(){return(0,w.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},n.hideWarning=function(){return{type:v.HIDE_WARNING}},n.ignoreTokens=function({tokensToIgnore:e,dontShowLoadingIndicator:t=!1}){const n=Array.isArray(e)?e:[e];return async e=>{t||e(X());try{await(0,w.submitRequestToBackground)("ignoreTokens",[n])}catch(t){(0,A.logErrorWithMessage)(t),e(Z(t))}finally{await ne(e),e(J())}}},n.importNewAccount=function(e,t,n){return async a=>{let s;a(X(n));try{r.default.debug("background.importAccountWithStrategy"),await(0,w.submitRequestToBackground)("importAccountWithStrategy",[e,t]),r.default.debug("background.getState"),s=await(0,w.submitRequestToBackground)("getState")}finally{a(J())}return a(q(s)),s}},n.isNftOwner=async function(e,t,n){return await(0,w.submitRequestToBackground)("isNftOwner",[e,t,n])},n.lockMetamask=function(){return r.default.debug("background.setLocked"),e=>(e(X()),G().then((()=>M())).catch((t=>(e(Z(t.message)),Promise.reject(t)))).then((t=>{e(q(t)),e(J()),e({type:v.LOCK_METAMASK})})).catch((()=>{e(J()),e({type:v.LOCK_METAMASK})})))},n.markNotificationsAsRead=function(e){return async t=>{await(0,w.submitRequestToBackground)("markNotificationsAsRead",[e]),await ne(t)}},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>{(0,w.callBackgroundMethod)("markPasswordForgotten",[],(n=>{n?t(n):e()}))}))}finally{e(J()),await ne(e)}}},n.neverShowSwitchedNetworkMessage=function(){return(0,w.submitRequestToBackground)("setSwitchedNetworkNeverShowMessage",[!0])},n.qrCodeDetected=function(e){return async t=>{await t({type:v.QR_CODE_DETECTED,value:e}),t((0,p.computeEstimatedGasLimit)())}},n.rejectAllMessages=function(e){return async t=>{const n=(0,o.serializeError)(o.ethErrors.provider.userRejectedRequest());await Promise.all(e.map((async({id:e})=>await(0,w.submitRequestToBackground)("rejectPendingApproval",[e,n]))));const{pendingApprovals:r}=await ne(t);0===Object.values(r).length&&t(Q())}},n.rejectPendingApproval=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("rejectPendingApproval",[e,t]);const{pendingApprovals:r}=await ne(n);0===Object.values(r).length&&n(Q())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,r)=>{(0,w.callBackgroundMethod)("rejectPermissionsRequest",[e],(e=>{if(e)return t(Z(e)),void r(e);ne(t).then(n).catch(r)}))}))},n.removeAccount=function(e){return async t=>{t(X());try{await new Promise(((t,n)=>{(0,w.callBackgroundMethod)("removeAccount",[e],((e,r)=>{e?n(e):t(r)}))})),await ne(t)}catch(e){throw t(Z(e)),e}finally{t(J())}r.default.info(`Account removed: ${e}`),t(W())}},n.removeAndIgnoreNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot ignore NFT without address");if(!t)throw new Error("MetaMask - Cannot ignore NFT without tokenID");n||r(X());try{await(0,w.submitRequestToBackground)("removeAndIgnoreNft",[e,t])}catch(e){throw(0,A.logErrorWithMessage)(e),r(Z(e)),e}finally{await ne(r),r(J())}}},n.removeFromAddressBook=function(e,t){return r.default.debug("background.removeFromAddressBook"),async()=>{await(0,w.submitRequestToBackground)("removeFromAddressBook",[e,(0,f.toChecksumHexAddress)(t)])}},n.removeNetworkConfiguration=function(e){return t=>(r.default.debug(`background.removeNetworkConfiguration: ${e}`),new Promise(((n,r)=>{(0,w.callBackgroundMethod)("removeNetworkConfiguration",[e],(e=>{if(e)return(0,A.logErrorWithMessage)(e),t(Z("Had a problem removing network!")),void r(e);n()}))})))},n.removeNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot remove NFT without address");if(!t)throw new Error("MetaMask - Cannot remove NFT without tokenID");n||r(X());try{await(0,w.submitRequestToBackground)("removeNft",[e,t])}catch(e){(0,A.logErrorWithMessage)(e),r(Z(e))}finally{await ne(r),r(J())}}},n.removePermissionsFor=function(e){return t=>{(0,w.callBackgroundMethod)("removePermissionsFor",[e],(e=>{e&&t(Z(e))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,w.callBackgroundMethod)("removePermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await ne(n)}},n.removePollingTokenFromAppState=ue,n.removeSnap=function(e){return async(t,n)=>{var r;t(X());const a=(null===(r=(0,l.getPermissionSubjects)(n())[e])||void 0===r||null===(r=r.permissions)||void 0===r?void 0:r.snap_manageAccounts)!==undefined;try{if(a){const t=await(0,w.submitRequestToBackground)("getAccountsBySnapId",[e]);for(const e of t)await(0,w.submitRequestToBackground)("removeAccount",[e])}await(0,w.submitRequestToBackground)("removeSnap",[e]),await ne(t)}catch(e){throw t(Z(e)),e}finally{t(J())}}},n.requestAccountsPermissionWithId=function(e){return async t=>{const n=await(0,w.submitRequestToBackground)("requestAccountsPermissionWithId",[e]);return await ne(t),n}},n.requestRevealSeedWords=function(e){return async t=>{t(X()),r.default.debug("background.verifyPassword");try{await C(e);return await P(e)}finally{t(J())}}},n.requestUserApproval=function({origin:e,type:t,requestData:n}){return async r=>{try{await(0,w.submitRequestToBackground)("requestUserApproval",[{origin:e,type:t,requestData:n}])}catch(e){(0,A.logErrorWithMessage)(e),r(Z("Had trouble requesting user approval"))}}},n.resetAccount=function(){return e=>(e(X()),new Promise(((t,n)=>{(0,w.callBackgroundMethod)("resetAccount",[],((a,s)=>{if(e(J()),a)return(0,A.isErrorWithMessage)(a)&&e(Z(a.message)),void n(a);r.default.info(`Transaction history reset for ${s}`),e(W()),t(s)}))})))},n.resetBackgroundSwapsState=function(){return async e=>{await(0,w.submitRequestToBackground)("resetSwapsState"),await ne(e)}},n.resetSwapsPostFetchState=function(){return async e=>{await(0,w.submitRequestToBackground)("resetPostFetchState"),await ne(e)}},n.resolvePendingApproval=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("resolvePendingApproval",[e,t]);const{pendingApprovals:r}=await ne(n);0===Object.values(r).length&&n(Q())}},n.restoreUserData=async function(e){try{await(0,w.submitRequestToBackground)("restoreUserData",[e])}catch(e){throw(0,A.logErrorWithMessage)(e),e}return!0},n.revokeDynamicSnapPermissions=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("revokeDynamicSnapPermissions",[e,t]),await ne(n)}},n.rollbackToPreviousProvider=function(){return async e=>{try{await(0,w.submitRequestToBackground)("rollbackToPreviousProvider")}catch(t){(0,A.logErrorWithMessage)(t),e(Z("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await(0,w.submitRequestToBackground)("safeRefetchQuotes"),await ne(e)}},n.setAccountDetailsAddress=function(e){return{type:v.SET_ACCOUNT_DETAILS_ADDRESS,payload:e}},n.setAccountLabel=function(e,t){return n=>(n(X()),r.default.debug("background.setAccountLabel"),new Promise(((r,a)=>{(0,w.callBackgroundMethod)("setAccountLabel",[e,t],(s=>{if(n(J()),s)return n(Z(s)),void a(s);n({type:v.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),r(e)}))})))},n.setActiveNetwork=V,n.setAddSnapAccountEnabled=async function(e){try{await(0,w.submitRequestToBackground)("setAddSnapAccountEnabled",[e])}catch(e){(0,A.logErrorWithMessage)(e)}},n.setAdvancedGasFee=function(e){return t=>{t(X()),r.default.debug("background.setAdvancedGasFee"),(0,w.callBackgroundMethod)("setAdvancedGasFee",[e],(e=>{t(J()),e&&t(Z(e))}))}},n.setAlertEnabledness=async function(e,t){await(0,w.submitRequestToBackground)("setAlertEnabledness",[e,t])},n.setAutoLockTimeLimit=function(e){return ee("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await(0,w.submitRequestToBackground)("setBackgroundSwapRouteState",[e]),await ne(t)}},n.setCompletedOnboarding=function(){return async e=>{e(X());try{await(0,w.submitRequestToBackground)("completeOnboarding"),e(te())}catch(t){throw e(Z(t)),t}finally{e(J())}}},n.setConfirmationExchangeRates=function(e){return{type:v.SET_CONFIRMATION_EXCHANGE_RATES,value:e}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,w.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(e=>{if((0,A.isErrorWithMessage)(e))throw new Error(e.message)}))}},n.setCurrentCurrency=function(e){return async t=>{t(X()),r.default.debug("background.setCurrentCurrency");try{await(0,w.submitRequestToBackground)("setCurrentCurrency",[e]),await ne(t)}catch(e){return(0,A.logErrorWithMessage)(e),void t(Z(e))}finally{t(J())}}},n.setCurrentExtensionPopupId=function(e){return async t=>{await(0,w.submitRequestToBackground)("setCurrentExtensionPopupId",[e]),await ne(t)}},n.setCurrentLocale=ae,n.setCustomApproveTxData=function(e){return async t=>{await(0,w.submitRequestToBackground)("setCustomApproveTxData",[e]),await ne(t)}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await(0,w.submitRequestToBackground)("setDefaultHomeActiveTabName",[e]),await ne(t)}},n.setDisabledRpcMethodPreference=function(e,t){return async n=>{n(X()),await(0,w.submitRequestToBackground)("setDisabledRpcMethodPreference",[e,t]),n(J())}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(X()),await(0,w.submitRequestToBackground)("setDismissSeedBackUpReminder",[e]),t(J())}},n.setFeatureFlag=function(e,t,n){return r=>(r(X()),new Promise(((a,s)=>{(0,w.callBackgroundMethod)("setFeatureFlag",[e,t],((e,t)=>{if(r(J()),e)return r(Z(e)),void s(e);n&&r(z({name:n})),a(t)}))})))},n.setFeatureNotificationsEnabled=function(e){return ee("featureNotificationsEnabled",e)},n.setFirstTimeFlowType=function(e){return t=>{r.default.debug("background.setFirstTimeFlowType"),(0,w.callBackgroundMethod)("setFirstTimeFlowType",[e],(e=>{e&&t(Z(e))})),t({type:v.SET_FIRST_TIME_FLOW_TYPE,value:e})}},n.setFirstTimeUsedNetwork=function(e){return(0,w.submitRequestToBackground)("setFirstTimeUsedNetwork",[e])},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:v.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,payload:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return ee("hideZeroBalanceTokens",e)},n.setIncomingTransactionsPreferences=function(e,t){return async n=>{n(X()),r.default.debug("background.setIncomingTransactionsPreferences"),await(0,w.submitRequestToBackground)("setIncomingTransactionsPreferences",[e,t]),n(J())}},n.setInitialGasEstimate=function(e){return async t=>{await(0,w.submitRequestToBackground)("setInitialGasEstimate",[e]),await ne(t)}},n.setIpfsGateway=function(e){return t=>{r.default.debug("background.setIpfsGateway"),(0,w.callBackgroundMethod)("setIpfsGateway",[e],(e=>{e&&t(Z(e))}))}},n.setIsIpfsGatewayEnabled=function(e){return t=>{r.default.debug("background.setIsIpfsGatewayEnabled"),(0,w.callBackgroundMethod)("setIsIpfsGatewayEnabled",[e],(e=>{e&&t(Z(e))}))}},n.setLastActiveTime=function(){return e=>{(0,w.callBackgroundMethod)("setLastActiveTime",[],(t=>{t&&e(Z(t))}))}},n.setName=function(e){return async()=>{await(0,w.submitRequestToBackground)("setName",[e])}},n.setNetworkClientIdForDomain=function(e,t){return(0,w.submitRequestToBackground)("setNetworkClientIdForDomain",[e,t])},n.setNewNetworkAdded=function({networkConfigurationId:e,nickname:t}){return{type:v.SET_NEW_NETWORK_ADDED,payload:{networkConfigurationId:e,nickname:t}}},n.setNewNftAddedMessage=function(e){return{type:v.SET_NEW_NFT_ADDED_MESSAGE,payload:e}},n.setNewTokensImported=function(e){return{type:v.SET_NEW_TOKENS_IMPORTED,payload:e}},n.setNewTokensImportedError=function(e){return{type:v.SET_NEW_TOKENS_IMPORTED_ERROR,payload:e}},n.setNextNonce=se,n.setOpenMetamaskTabsIDs=ie,n.setOpenSeaEnabled=function(e){return async t=>{t(X()),r.default.debug("background.setOpenSeaEnabled");try{await(0,w.submitRequestToBackground)("setOpenSeaEnabled",[e])}finally{t(J())}}},n.setOutdatedBrowserWarningLastShown=function(e){return async()=>{await(0,w.submitRequestToBackground)("setOutdatedBrowserWarningLastShown",[e])}},n.setParticipateInMetaMetrics=function(e){return t=>(r.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,a)=>{(0,w.callBackgroundMethod)("setParticipateInMetaMetrics",[e],((s,o)=>{var i;if(r.default.debug(s),s)return t(Z(s)),void a(s);null===(i=window.sentry)||void 0===i||i.toggleSession(),t({type:v.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,o])}))})))},n.setPendingTokens=function(e){const{customToken:t,selectedTokens:n={},tokenAddressList:r=[]}=e,a=null!=t&&t.address&&null!=t&&t.symbol&&Boolean((null==t?void 0:t.decimals)>=0&&(null==t?void 0:t.decimals)<=36)?{...n,[t.address]:{...t,isCustom:!0}}:n;return Object.keys(a).forEach((e=>{a[e].unlisted=!r.find((t=>(0,y.isEqualCaseInsensitive)(t,e)))})),{type:v.SET_PENDING_TOKENS,payload:a}},n.setPetnamesEnabled=function(e){return ee("petnamesEnabled",e)},n.setPreference=ee,n.setProviderType=function(e){return async t=>{r.default.debug("background.setProviderType",e);try{await(0,w.submitRequestToBackground)("setProviderType",[e])}catch(e){(0,A.logErrorWithMessage)(e),t(Z("Had a problem changing networks!"))}}},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,w.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(e=>{if((0,A.isErrorWithMessage)(e))throw new Error(e.message)}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{(0,w.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[e],(e=>{if((0,A.isErrorWithMessage)(e))throw new Error(e.message)}))}},n.setRemoveNftMessage=function(e){return{type:v.SET_REMOVE_NFT_MESSAGE,payload:e}},n.setRequestAccountTabIds=oe,n.setSecurityAlertsEnabled=function(e){try{(0,w.submitRequestToBackground)("setSecurityAlertsEnabled",[e])}catch(e){(0,A.logErrorWithMessage)(e)}},n.setSeedPhraseBackedUp=function(e){return t=>(r.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,r)=>{(0,w.callBackgroundMethod)("setSeedPhraseBackedUp",[e],(e=>{if(e)return t(Z(e)),void r(e);ne(t).then(n).catch(r)}))})))},n.setSelectedAccount=function(e){return async(t,n)=>{t(X()),r.default.debug("background.setSelectedAddress");const a=n(),s=(0,m.getUnconnectedAccountAlertEnabledness)(a),o=a.activeTab.origin,i=(0,l.getInternalAccountByAddress)(a,e),c=(0,l.getPermittedAccountsForCurrentTab)(a),u=Boolean(o)&&c.includes(i.address),d=Boolean(o)&&c.includes(e),p=u&&!d;try{await j(e),await K(i.id),await ne(t)}catch(e){return void t(Z(e))}finally{t(J())}s&&p&&(t((0,g.switchedToUnconnectedAccount)()),await le(o))}},n.setSelectedAddress=function(e){return async t=>{t(X()),r.default.debug("background.setSelectedAddress");try{await j(e)}catch(e){return void t(Z(e))}finally{t(J())}}},n.setSelectedInternalAccount=function(e){return async t=>{t(X()),r.default.debug("background.setSelectedInternalAccount");try{await K(e)}catch(e){return void t(Z(e))}finally{t(J())}}},n.setSelectedNetworkConfigurationId=function(e){return{type:v.SET_SELECTED_NETWORK_CONFIGURATION_ID,payload:e}},n.setSelectedQuoteAggId=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSelectedQuoteAggId",[e]),await ne(t)}},n.setShowExtensionInFullSizeView=function(e){return ee("showExtensionInFullSizeView",e)},n.setShowFiatConversionOnTestnetsPreference=function(e){return ee("showFiatInTestnets",e)},n.setShowTestNetworks=function(e){return ee("showTestNetworks",e)},n.setSmartTransactionsOptInStatus=function(e){return ee("smartTransactionsOptInStatus",e)},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{try{await(0,w.submitRequestToBackground)("setStatusRefreshInterval",[e])}catch(e){(0,A.logErrorWithMessage)(e)}}},n.setSnapsAddSnapAccountModalDismissed=async function(){await(0,w.submitRequestToBackground)("setSnapsAddSnapAccountModalDismissed",[!0])},n.setSnapsInstallPrivacyWarningShownStatus=function(e){return async()=>{await(0,w.submitRequestToBackground)("setSnapsInstallPrivacyWarningShownStatus",[e])}},n.setSurveyLinkLastClickedOrClosed=function(e){return async()=>{await(0,w.submitRequestToBackground)("setSurveyLinkLastClickedOrClosed",[e])}},n.setSwapsErrorKey=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsErrorKey",[e]),await ne(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsFeatureFlags",[e]),await ne(t)}},n.setSwapsLiveness=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsLiveness",[e]),await ne(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[e]),await ne(t)}},n.setSwapsTokens=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsTokens",[e]),await ne(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await ne(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsTxGasPrice",[e]),await ne(t)}},n.setSwitchedNetworkDetails=Y,n.setTermsOfUseLastAgreed=function(e){return async()=>{await(0,w.submitRequestToBackground)("setTermsOfUseLastAgreed",[e])}},n.setTheme=function(e){return async t=>{t(X()),r.default.debug("background.setTheme");try{await(0,w.submitRequestToBackground)("setTheme",[e])}finally{t(J())}}},n.setUnconnectedAccountAlertShown=le,n.setUse4ByteResolution=function(e){return async t=>{t(X()),r.default.debug("background.setUse4ByteResolution");try{await(0,w.submitRequestToBackground)("setUse4ByteResolution",[e])}catch(e){t(Z(e))}finally{t(J())}}},n.setUseAddressBarEnsResolution=function(e){return t=>{r.default.debug("background.setUseAddressBarEnsResolution"),(0,w.callBackgroundMethod)("setUseAddressBarEnsResolution",[e],(e=>{e&&t(Z(e))}))}},n.setUseBlockie=function(e){return t=>{t(X()),r.default.debug("background.setUseBlockie"),(0,w.callBackgroundMethod)("setUseBlockie",[e],(e=>{t(J()),e&&t(Z(e))}))}},n.setUseCurrencyRateCheck=function(e){return t=>{t(X()),r.default.debug("background.setUseCurrencyRateCheck"),(0,w.callBackgroundMethod)("setUseCurrencyRateCheck",[e],(e=>{t(J()),e&&t(Z(e))}))}},n.setUseExternalNameSources=function(e){try{(0,w.submitRequestToBackground)("setUseExternalNameSources",[e])}catch(e){(0,A.logErrorWithMessage)(e)}},n.setUseMultiAccountBalanceChecker=function(e){return t=>{t(X()),r.default.debug("background.setUseMultiAccountBalanceChecker"),(0,w.callBackgroundMethod)("setUseMultiAccountBalanceChecker",[e],(e=>{t(J()),e&&t(Z(e))}))}},n.setUseNativeCurrencyAsPrimaryCurrencyPreference=function(e){return ee("useNativeCurrencyAsPrimaryCurrency",e)},n.setUseNftDetection=function(e){return async t=>{t(X()),r.default.debug("background.setUseNftDetection");try{await(0,w.submitRequestToBackground)("setUseNftDetection",[e])}finally{t(J())}}},n.setUseNonceField=function(e){return async t=>{t(X()),r.default.debug("background.setUseNonceField");try{await(0,w.submitRequestToBackground)("setUseNonceField",[e])}catch(e){t(Z(e))}t(J())}},n.setUsePhishDetect=function(e){return t=>{t(X()),r.default.debug("background.setUsePhishDetect"),(0,w.callBackgroundMethod)("setUsePhishDetect",[e],(e=>{t(J()),e&&t(Z(e))}))}},n.setUseRequestQueue=function(e){try{(0,w.submitRequestToBackground)("setUseRequestQueue",[e])}catch(e){(0,A.logErrorWithMessage)(e)}},n.setUseSafeChainsListValidation=function(e){return t=>{t(X()),r.default.debug("background.setUseSafeChainsListValidation"),(0,w.callBackgroundMethod)("setUseSafeChainsListValidation",[e],(e=>{t(J()),e&&t(Z(e))}))}},n.setUseTokenDetection=function(e){return t=>{t(X()),r.default.debug("background.setUseTokenDetection"),(0,w.callBackgroundMethod)("setUseTokenDetection",[e],(e=>{t(J()),e&&t(Z(e))}))}},n.setUseTransactionSimulations=function(e){try{(0,w.submitRequestToBackground)("setUseTransactionSimulations",[e])}catch(e){(0,A.logErrorWithMessage)(e)}},n.setWeb3ShimUsageAlertDismissed=async function(e){await(0,w.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[e])},n.showAccountsPage=W,n.showAlert=function(e){return{type:v.ALERT_OPEN,payload:e}},n.showConfTxPage=$,n.showDeprecatedNetworkModal=function(){return{type:v.DEPRECATED_NETWORK_POPOVER_OPEN}},n.showImportNftsModal=function(e){return{type:v.IMPORT_NFTS_MODAL_OPEN,payload:e}},n.showImportTokensModal=function(){return{type:v.IMPORT_TOKENS_POPOVER_OPEN}},n.showIpfsModal=function(){return{type:v.SHOW_IPFS_MODAL_OPEN}},n.showKeyringSnapRemovalModal=function(e){return{type:v.SHOW_KEYRING_SNAP_REMOVAL_RESULT,payload:e}},n.showLoadingIndication=X,n.showModal=z,n.showNetworkDropdown=function(){return{type:v.NETWORK_DROPDOWN_OPEN}},n.showPrivateKey=function(e){return{type:v.SHOW_PRIVATE_KEY,payload:e}},n.showQrScanner=function(){return e=>{e(z({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:v.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const r=await pe(e,t.fees),a=await pe(e,t.cancelFees,!0);try{return(await(0,w.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:r,signedCanceledTransactions:a,txParams:e}])).uuid}catch(e){if((0,A.logErrorWithMessage)(e),(0,A.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,T.parseSmartTransactionsError)(e.message);n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.stopPollingForQuotes=function(){return async e=>{await(0,w.submitRequestToBackground)("stopPollingForQuotes"),await ne(e)}},n.submitPassword=b,n.submitQRHardwareCryptoAccount=async function(e){await(0,w.submitRequestToBackground)("submitQRHardwareCryptoAccount",[e])},n.submitQRHardwareCryptoHDKey=async function(e){await(0,w.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[e])},n.submitQRHardwareSignature=async function(e,t){await(0,w.submitRequestToBackground)("submitQRHardwareSignature",[e,t])},n.throwTestBackgroundError=async function(e){await(0,w.submitRequestToBackground)("throwTestError",[e])},n.toggleAccountMenu=function(){return{type:v.TOGGLE_ACCOUNT_MENU}},n.toggleNetworkMenu=function(){return{type:v.TOGGLE_NETWORK_MENU}},n.trackMetaMetricsEvent=function(e,t){return(0,w.submitRequestToBackground)("trackMetaMetricsEvent",[{...e,actionId:(0,w.generateActionId)()},t])},n.trackMetaMetricsPage=function(e,t){return(0,w.submitRequestToBackground)("trackMetaMetricsPage",[{...e,actionId:(0,w.generateActionId)()},t])},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{(0,w.callBackgroundMethod)("tryReverseResolveAddress",[e],(e=>{e&&(0,A.logErrorWithMessage)(e),t()}))}))},n.tryUnlockMetamask=function(e){return t=>(t(X()),t(x()),r.default.debug("background.submitPassword"),new Promise(((t,n)=>{(0,w.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))})).then((()=>(t(H()),ne(t)))).then((()=>{t(J())})).catch((e=>(t(F(e.message)),t(J()),Promise.reject(e)))))},n.unMarkPasswordForgotten=U,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(X());try{await b(e);const n=await P(e);return await ne(t),n}catch(e){throw t(Z(e)),(0,A.isErrorWithMessage)(e)?new Error(e.message):e}finally{t(J())}}},n.unlockFailed=F,n.unlockHardwareWalletAccounts=function(e,t,n,a){return r.default.debug("background.unlockHardwareWalletAccount",e,t,n,a),async r=>{r(X());for(const s of e)try{await(0,w.submitRequestToBackground)("unlockHardwareWalletAccount",[s,t,n,a])}catch(e){throw(0,A.logErrorWithMessage)(e),r(Z(e)),r(J()),e}return r(J()),undefined}},n.unlockInProgress=x,n.unlockSucceeded=H,n.updateAccountsList=function(e){return async()=>{await(0,w.submitRequestToBackground)("updateAccountsList",[e])}},n.updateAndApproveTx=function(e,t,n){return r=>(!t&&r(X(n)),new Promise(((t,n)=>{const a=(0,w.generateActionId)();(0,w.callBackgroundMethod)("resolvePendingApproval",[String(e.id),{txMeta:e,actionId:a},{waitForResult:!0}],(a=>{if(r(L(e.id,e.txParams)),r((0,p.resetSendState)()),a)return r(R()),(0,A.logErrorWithMessage)(a),void n(a);t(e)}))})).then((()=>M())).then((e=>r(q(e)))).then((()=>(r((0,p.resetSendState)()),r(B(e.id)),r(J()),r(D("")),r(Q()),e))).catch((e=>(r(J()),Promise.reject(e)))))},n.updateCurrentLocale=re,n.updateCustomNonce=D,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async r=>{await Promise.all([(0,w.submitRequestToBackground)("setSwapsTxGasLimit",[e]),(0,w.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[t]),(0,w.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[n])]),await ne(r)}},n.updateEditableParams=function(e,t){return async n=>{let r;try{r=await(0,w.submitRequestToBackground)("updateEditableParams",[e,t])}catch(e){throw(0,A.logErrorWithMessage)(e),e}return await ne(n),r}},n.updateEventFragment=function(e,t){return(0,w.submitRequestToBackground)("updateEventFragment",[e,t])},n.updateHiddenAccountsList=function(e){return async()=>{await(0,w.submitRequestToBackground)("updateHiddenAccountsList",[e])}},n.updateInterfaceState=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("updateInterfaceState",[e,t]),await ne(n)}},n.updateMetamaskState=q,n.updateNetworksList=function(e){return async()=>{await(0,w.submitRequestToBackground)("updateNetworksList",[e])}},n.updateNftDropDownState=function(e){return async t=>{await(0,w.submitRequestToBackground)("updateNftDropDownState",[e]),await ne(t)}},n.updatePreviousGasParams=function(e,t){return async()=>{let n;try{n=await(0,w.submitRequestToBackground)("updatePreviousGasParams",[e,t])}catch(e){throw(0,A.logErrorWithMessage)(e),e}return n}},n.updateProposedNames=function(e){return async()=>await(0,w.submitRequestToBackground)("updateProposedNames",[e])},n.updateSmartTransaction=function(e,t){return async n=>{try{await(0,w.submitRequestToBackground)("updateSmartTransaction",[{uuid:e,...t}])}catch(e){if((0,A.logErrorWithMessage)(e),(0,A.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,T.parseSmartTransactionsError)(e.message);n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.updateSnap=function(e,t){return async(n,r)=>{await(0,w.submitRequestToBackground)("updateSnap",[e,t]),await ne(n);const a=r(),s=(0,l.getFirstSnapInstallOrUpdateRequest)(a);return null==s?void 0:s.metadata.id}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsUserFeeLevel",[e]),await ne(t)}},n.updateTokenType=async function(e){try{return await(0,w.submitRequestToBackground)("updateTokenType",[e])}catch(e){(0,A.logErrorWithMessage)(e)}return undefined},n.updateTransaction=function(e,t){return async n=>{!t&&n(X());try{await(0,w.submitRequestToBackground)("updateTransaction",[e])}catch(t){throw n(L(e.id,e.txParams)),n(J()),n(R()),(0,A.logErrorWithMessage)(t),t}try{n(L(e.id,e.txParams));return n(q(await M())),n($({id:e.id})),e}finally{n(J())}}},n.updateTransactionGasFees=function(e,t){return async()=>{let n;try{n=await(0,w.submitRequestToBackground)("updateTransactionGasFees",[e,t])}catch(e){throw(0,A.logErrorWithMessage)(e),e}return n}},n.updateTransactionParams=L,n.updateTransactionSendFlowHistory=function(e,t,n){return async()=>{let r;try{r=await(0,w.submitRequestToBackground)("updateTransactionSendFlowHistory",[e,t,n])}catch(e){throw(0,A.logErrorWithMessage)(e),e}return r}},n.updateViewedNotifications=function(e){return(0,w.submitRequestToBackground)("updateViewedNotifications",[e])},n.upsertNetworkConfiguration=function({rpcUrl:e,chainId:t,nickname:n,rpcPrefs:a,ticker:s=I.EtherDenomination.ETH},{setActive:o,source:i}){return async c=>{let d;r.default.debug(`background.upsertNetworkConfiguration: ${e} ${t} ${s} ${n}`);try{d=await(0,w.submitRequestToBackground)("upsertNetworkConfiguration",[{rpcUrl:e,chainId:t,ticker:s,nickname:n||e,rpcPrefs:a},{setActive:o,source:i,referrer:u.ORIGIN_METAMASK}])}catch(e){r.default.error(e),c(Z("Had a problem adding network!"))}return d}},n.verifyPassword=C;var r=N(e("loglevel")),a=e("@sentry/browser"),s=e("lodash"),o=e("eth-rpc-errors"),i=e("../helpers/utils/transactions.util"),c=N(e("../../shared/lib/switch-direction")),u=e("../../shared/constants/app"),d=e("../../app/scripts/lib/util"),l=e("../selectors"),p=e("../ducks/send"),g=e("../ducks/alerts/unconnected-account"),m=e("../ducks/metamask/metamask"),f=e("../../shared/modules/hexstring-utils"),h=e("../../shared/constants/hardware-wallets"),T=e("../pages/swaps/swaps.util"),y=e("../../shared/modules/string-utils"),E=e("../helpers/constants/notifications"),S=e("../../shared/modules/i18n"),_=e("../../shared/modules/conversion.utils"),I=e("../../shared/constants/common"),A=e("../../shared/modules/error"),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("./actionConstants")),w=e("./background-connection");function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function N(e){return e&&e.__esModule?e:{default:e}}function R(){return{type:v.GO_HOME}}function b(e){return new Promise(((t,n)=>{(0,w.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))}))}function O(e){return new Promise(((t,n)=>{(0,w.callBackgroundMethod)("createNewVaultAndKeychain",[e],(e=>{e?n(e):t(!0)}))}))}function C(e){return new Promise(((t,n)=>{(0,w.callBackgroundMethod)("verifyPassword",[e],(e=>{e?n(e):t(!0)}))}))}async function P(e){const n=await(0,w.submitRequestToBackground)("getSeedPhrase",[e]);return t.from(n).toString("utf8")}function D(e){return{type:v.UPDATE_CUSTOM_NONCE,value:e}}const M=()=>(r.default.debug("background.getState"),new Promise(((e,t)=>{(0,w.callBackgroundMethod)("getState",[],((n,r)=>{n?t(n):e(r)}))})));function B(e){return t=>{t({type:v.COMPLETED_TX,value:{id:e}})}}function L(e,t){return{type:v.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function U(){return e=>new Promise((e=>{(0,w.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{e()}))})).then((()=>ne(e)))}function x(){return{type:v.UNLOCK_IN_PROGRESS}}function F(e){return{type:v.UNLOCK_FAILED,value:e}}function H(e){return{type:v.UNLOCK_SUCCEEDED,value:e}}function q(e){return(t,n)=>{var r,a;const o=n(),i=(0,m.getProviderConfig)(o),{metamask:c}=o,{currentLocale:u}=c,d=(0,l.getSelectedInternalAccount)(o),g=null==d?void 0:d.address,{currentLocale:f,providerConfig:h}=e,T=(0,l.getSelectedInternalAccount)({metamask:e}),y=null==T?void 0:T.address;u&&f&&u!==f&&t(re(f)),g!==y&&t({type:v.SELECTED_ADDRESS_CHANGED});const E=(null===(r=e.addressBook)||void 0===r?void 0:r[null==h?void 0:h.chainId])??{},S=(null===(a=c.addressBook)||void 0===a?void 0:a[null==i?void 0:i.chainId])??{},_=(0,l.getMetaMaskAccounts)({metamask:e}),I=(0,l.getMetaMaskAccounts)({metamask:c}),A=_[y],w=_[g];Object.entries(I).forEach((([e,n])=>{(0,s.isEqual)(n,_[e])||t({type:v.ACCOUNT_CHANGED,payload:{account:_[e]}})})),!1===(0,s.isEqual)(w,A)&&t({type:v.SELECTED_ACCOUNT_CHANGED,payload:{account:A}}),!1===(0,s.isEqual)(S,E)&&t({type:v.ADDRESS_BOOK_UPDATED,payload:{addressBook:E}}),!1===(0,s.isEqual)(c.gasFeeEstimates,e.gasFeeEstimates)&&t({type:v.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:e.gasFeeEstimates,gasEstimateType:e.gasEstimateType}}),t({type:v.UPDATE_METAMASK_STATE,value:e}),i.chainId!==h.chainId&&(t({type:v.CHAIN_CHANGED,payload:h.chainId}),t((0,p.initializeSendState)({chainHasChanged:!0})))}}const G=()=>new Promise(((e,t)=>{(0,w.callBackgroundMethod)("setLocked",[],(n=>{n?t(n):e()}))}));async function j(e){r.default.debug("background.setSelectedAddress"),await(0,w.submitRequestToBackground)("setSelectedAddress",[e])}async function K(e){r.default.debug("background.setSelectedInternalAccount"),await(0,w.submitRequestToBackground)("setSelectedInternalAccount",[e])}function W(){return{type:v.SHOW_ACCOUNTS_PAGE}}function $({id:e}={}){return{type:v.SHOW_CONF_TX_PAGE,id:e}}function Y(e){return async t=>{await(0,w.submitRequestToBackground)("setSwitchedNetworkDetails",[e]),await ne(t)}}function V(e){return async t=>{r.default.debug(`background.setActiveNetwork: ${e}`);try{await(0,w.submitRequestToBackground)("setActiveNetwork",[e])}catch(e){(0,A.logErrorWithMessage)(e),t(Z("Had a problem changing networks!"))}}}function z(e){return{type:v.MODAL_OPEN,payload:e}}function Q(){return(e,t)=>{const n=t(),r=(0,l.getApprovalFlows)(n);(0,d.getEnvironmentType)()!==u.ENVIRONMENT_TYPE_NOTIFICATION||(0,l.hasTransactionPendingApprovals)(n)||(0,l.getIsSigningQRHardwareTransaction)(n)||0!==r.length||de()}}function X(e){return{type:v.SHOW_LOADING,payload:e}}function J(){return{type:v.HIDE_LOADING}}function Z(e){return(0,A.isErrorWithMessage)(e)?{type:v.DISPLAY_WARNING,payload:e.message}:"string"==typeof e?{type:v.DISPLAY_WARNING,payload:e}:{type:v.DISPLAY_WARNING,payload:`${e}`}}function ee(e,t){return n=>(n(X()),new Promise(((r,a)=>{(0,w.callBackgroundMethod)("setPreference",[e,t],((e,t)=>{if(n(J()),e)return n(Z(e)),void a(e);r(t)}))})))}function te(){return{type:v.COMPLETE_ONBOARDING}}async function ne(e){let t;r.default.debug("background.getState");try{t=await(0,w.submitRequestToBackground)("getState")}catch(t){throw e(Z(t)),t}return e(q(t)),t}function re(e){return async t=>{t(X());try{await(0,S.loadRelativeTimeFormatLocaleData)(e);const n=await(0,S.fetchLocale)(e),r=await(0,w.submitRequestToBackground)("setCurrentLocale",[e]);(0,c.default)(r),t(ae(e,n))}catch(e){return void t(Z(e))}finally{t(J())}}}function ae(e,t){return{type:v.SET_CURRENT_LOCALE,payload:{locale:e,messages:t}}}function se(e){return{type:v.SET_NEXT_NONCE,payload:e}}function oe(e){return{type:v.SET_REQUEST_ACCOUNT_TABS,payload:e}}function ie(e){return{type:v.SET_OPEN_METAMASK_TAB_IDS,payload:e}}async function ce(e){return(0,w.submitRequestToBackground)("addPollingTokenToAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,d.getEnvironmentType)()]])}async function ue(e){return(0,w.submitRequestToBackground)("removePollingTokenFromAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,d.getEnvironmentType)()]])}async function de(){await(0,w.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}async function le(e){await(0,w.submitRequestToBackground)("setUnconnectedAccountAlertShown",[e])}const pe=async(e,t,n)=>{const r=t.map((t=>{const r={...e,maxFeePerGas:(0,_.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,_.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,_.decimalToHex)(21e3):e.gas,value:e.value};return n&&(r.to=r.from,r.data="0x"),r}));return await(0,w.submitRequestToBackground)("approveTransactionsWithSameNonce",[r])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/store/actions.ts"}],[5522,{pify:3622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.generateActionId=n.callBackgroundMethod=void 0,n.setBackgroundConnection=async function(e){s=e,o=(0,a.default)(s)},n.submitRequestToBackground=function(e,t){var n;return null===(n=o)||void 0===n?void 0:n[e](...t??[])};var r,a=(r=e("pify"))&&r.__esModule?r:{default:r};let s=null,o=null;n.generateActionId=()=>Date.now()+Math.random();n.callBackgroundMethod=(e,t,n)=>{var r;null===(r=s)||void 0===r||r[e](...t,n)}}}},{package:"$root$",file:"ui/store/background-connection.ts"}],[553,{"./lib":550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.patchTags=void 0;const r=e("./lib"),a=[];n.patchTags=e=>{e.forEach((e=>{a.find((t=>t===e))||((0,r.addSemanticEncode)(e,(t=>{if(t instanceof r.DataItem&&t.getTag()===e)return t.getData()})),(0,r.addSemanticDecode)(e,(t=>new r.DataItem(t,e))),a.push(e))}))}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/utils.js"}],[58,{"../../../shared/modules/fetch-with-timeout":4162,loglevel:3483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("loglevel"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=(0,a(e("../../../shared/modules/fetch-with-timeout")).default)();n.default=class{constructor(){s(this,"isSupported",!0),this._initialized=!1,this._initializing=this._init(),this._state=undefined,this.mostRecentRetrievedState=null}async _init(){try{const e=await o("http://localhost:12345/state.json");e.ok&&(this._state=await e.json())}catch(e){r.default.debug(`Error loading network state: '${e.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this.mostRecentRetrievedState||(this.mostRecentRetrievedState=this._state),this._state}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');this._initialized||await this._initializing,this._state={data:e,meta:this._metadata}}}}}},{package:"$root$",file:"app/scripts/lib/network-store.js"}],[64,{"../../../../shared/constants/network":4131,"../../../../shared/constants/security-provider":4136,"../../../../shared/constants/transaction":4143,"./ppom-util":65,uuid:4067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SUPPORTED_CHAIN_IDS=void 0,n.createPPOMMiddleware=function(e,t,n,s,l){return async(p,g,m)=>{try{var f;const g=null===(f=t.store.getState())||void 0===f?void 0:f.securityAlertsEnabled,{chainId:m}=n.state.providerConfig;if(g&&u.includes(p.method)&&d.includes(m)){const t=(0,r.v4)();let n={reason:a.BlockaidResultType.Loading,result_type:a.BlockaidReason.inProgress,securityAlertId:t};e.usePPOM((async e=>{try{const r=(0,i.normalizePPOMRequest)(p);n=await e.validateJsonRpc(r),n.securityAlertId=t}catch(e){null==c||c.captureException(e),console.error("Error validating JSON RPC using PPOM: ","object"==typeof e||"string"==typeof e?e:JSON.stringify(e)),n={result_type:a.BlockaidResultType.Errored,reason:a.BlockaidReason.errored,description:e instanceof Error?`${e.name}: ${e.message}`:JSON.stringify(e)}}})).catch((e=>{null==c||c.captureException(e),console.error("Error createPPOMMiddleware#usePPOM: ","object"==typeof e||"string"==typeof e?e:JSON.stringify(e)),n={result_type:a.BlockaidResultType.Errored,reason:a.BlockaidReason.errored,description:e instanceof Error?`${e.name}: ${e.message}`:JSON.stringify(e)}})).finally((()=>{l(p,{...n,securityAlertId:t})})),o.SIGNING_METHODS.includes(p.method)&&s.addSignatureSecurityAlertResponse({reason:a.BlockaidResultType.Loading,result_type:a.BlockaidReason.inProgress,securityAlertId:t}),p.securityAlertResponse={...n}}}catch(e){null==c||c.captureException(e),console.error("Error createPPOMMiddleware: ","object"==typeof e||"string"==typeof e?e:JSON.stringify(e)),p.securityAlertResponse={result_type:a.BlockaidResultType.Errored,reason:a.BlockaidReason.errored,description:e instanceof Error?`${e.name}: ${e.message}`:JSON.stringify(e)}}finally{m()}}};var r=e("uuid"),a=e("../../../../shared/constants/security-provider"),s=e("../../../../shared/constants/network"),o=e("../../../../shared/constants/transaction"),i=e("./ppom-util");const{sentry:c}=global,u=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction",...o.SIGNING_METHODS]),d=n.SUPPORTED_CHAIN_IDS=[s.CHAIN_IDS.ARBITRUM,s.CHAIN_IDS.AVALANCHE,s.CHAIN_IDS.BASE,s.CHAIN_IDS.BSC,s.CHAIN_IDS.LINEA_MAINNET,s.CHAIN_IDS.MAINNET,s.CHAIN_IDS.OPTIMISM,s.CHAIN_IDS.POLYGON,s.CHAIN_IDS.SEPOLIA]}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-middleware.ts"}],[65,{"@metamask/transaction-controller":1931},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.normalizePPOMRequest=function(e){var t;if(e.method!==a)return e;const n=(null===(t=e.params)||void 0===t?void 0:t[0])||{},s=(0,r.normalizeTransactionParams)(n);return{...e,params:[s]}};var r=e("@metamask/transaction-controller");const a="eth_sendTransaction"}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-util.ts"}],[80,{"@sentry/utils":2155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FilterEvents=void 0;var r=e("@sentry/utils");function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor({getMetaMetricsEnabled:e}){a(this,"name",s.id),a(this,"getMetaMetricsEnabled",void 0),this.getMetaMetricsEnabled=e}setupOnce(e,t){e((async e=>{const n=t().getIntegration(s);return n&&!await n.getMetaMetricsEnabled()?(r.logger.warn("Event dropped due to MetaMetrics setting."),null):e}))}}n.FilterEvents=s,a(s,"id","FilterEvents")}}},{package:"$root$",file:"app/scripts/lib/sentry-filter-events.ts"}],[81,{"../../../shared/modules/object.utils":4169,"../platforms/extension":216,"./local-store":54,"./network-store":58,"./setupSentry":82},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=e("../../../shared/modules/object.utils"),a=i(e("../platforms/extension")),s=i(e("./local-store")),o=(i(e("./network-store")),e("./setupSentry"));function i(e){return e&&e.__esModule?e:{default:e}}const c=new a.default,u=new s.default;globalThis.stateHooks.getPersistedState=async function(){return await u.get()};const d={data:o.SENTRY_BACKGROUND_STATE,meta:{version:!0}};globalThis.stateHooks.getSentryState=function(){const e={browser:window.navigator.userAgent,version:c.getVersion()};if(globalThis.stateHooks.getSentryAppState)return{...e,state:globalThis.stateHooks.getSentryAppState()};if(u.mostRecentRetrievedState||globalThis.stateHooks.getMostRecentPersistedState){const t=u.mostRecentRetrievedState||globalThis.stateHooks.getMostRecentPersistedState();if(t)return{...e,persistedState:(0,r.maskObject)(t,d)}}return e}}}},{package:"$root$",file:"app/scripts/lib/setup-initial-state-hooks.js"}],[82,{"../../../shared/modules/object.utils":4169,"./extractEthjsErrorMessage":49,"./sentry-filter-events":80,"@sentry/browser":2072,"@sentry/integrations":2127},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SENTRY_UI_STATE=n.SENTRY_BACKGROUND_STATE=n.MMI_SENTRY_BACKGROUND_STATE=n.ERROR_URL_ALLOWLIST=void 0,n.beforeBreadcrumb=_,n.default=function({release:e,getState:t}){if(!e)throw new Error("Missing release");if(d&&!m)return undefined;const n="main"===g?l:`${l}-${g}`;let r;"production"===l?(r="https://24a3ef3399ee2049b00f92c1399c9be1@o4505435504377856.ingest.us.sentry.io/4507177964208128",console.log(`Setting up Sentry Remote Error Reporting for '${n}': SENTRY_DSN`)):(console.log(`Setting up Sentry Remote Error Reporting for '${n}': SENTRY_DSN_DEV`),r=p);async function o(){if("mmi"===g)return!0;const e=t();if(e.state||e.persistedState)return y(e);try{return E(await globalThis.stateHooks.getPersistedState())}catch(e){return console.error(e),!1}}async function c(){return"mmi"===g||o()}a.init({dsn:r,debug:d,autoSessionTracking:!1,environment:n,integrations:[new i.FilterEvents({getMetaMetricsEnabled:o}),new s.Dedupe,new s.ExtraErrorData],release:e,beforeSend:e=>A(e,t),beforeBreadcrumb:_(t)});const u=async()=>{var e,t,n,r;const s=null===(e=a.getCurrentHub)||void 0===e?void 0:e.call(a),o=(null===(t=s.getClient)||void 0===t||null===(n=(r=t.call(s)).getOptions)||void 0===n?void 0:n.call(r))??{};s&&!0===await c()&&(o.autoSessionTracking=!0,s.startSession())},f=async()=>{var e,t,n,r;const s=null===(e=a.getCurrentHub)||void 0===e?void 0:e.call(a),o=(null===(t=s.getClient)||void 0===t||null===(n=(r=t.call(s)).getOptions)||void 0===n?void 0:n.call(r))??{};s&&!1===await c()&&(o.autoSessionTracking=!1,s.endSession())};return{...a,startSession:u,endSession:f,toggleSession:async()=>{var e,t,n,r;const s=null===(e=a.getCurrentHub)||void 0===e?void 0:e.call(a),o=(null===(t=s.getClient)||void 0===t||null===(n=(r=t.call(s)).getOptions)||void 0===n?void 0:n.call(r))??{autoSessionTracking:!1},i=await c();!0===i&&!1===o.autoSessionTracking?await u():!1===i&&!0===o.autoSessionTracking&&await f()}}},n.removeUrlsFromBreadCrumb=I,n.rewriteReport=A;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("@sentry/browser")),s=e("@sentry/integrations"),o=e("../../../shared/modules/object.utils"),i=e("./sentry-filter-events"),c=(r=e("./extractEthjsErrorMessage"))&&r.__esModule?r:{default:r};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d=!1,l="other",p="https://24a3ef3399ee2049b00f92c1399c9be1@o4505435504377856.ingest.us.sentry.io/4507177964208128",g="main",m=!1,f=n.ERROR_URL_ALLOWLIST={CRYPTOCOMPARE:"cryptocompare.com",COINGECKO:"coingecko.com",ETHERSCAN:"etherscan.io",CODEFI:"codefi.network",SEGMENT:"segment.io"},h=(n.MMI_SENTRY_BACKGROUND_STATE={MMIController:{opts:!0},CustodyController:{store:!0},MmiConfigurationController:{store:!0,configurationClient:!0}},n.SENTRY_BACKGROUND_STATE={AccountsController:{internalAccounts:{accounts:!1,selectedAccount:!1}},AccountTracker:{accounts:!1,accountsByChainId:!1,currentBlockGasLimit:!0,currentBlockGasLimitByChainId:!0},AddressBookController:{addressBook:!1},AlertController:{alertEnabledness:!0,unconnectedAccountAlertShownOrigins:!1,web3ShimUsageOrigins:!1},AnnouncementController:{announcements:!1},NetworkOrderController:{orderedNetworkList:[]},AccountOrderController:{pinnedAccountList:[],hiddenAccountList:[]},AppMetadataController:{currentAppVersion:!0,currentMigrationVersion:!0,previousAppVersion:!0,previousMigrationVersion:!0},ApprovalController:{approvalFlows:!1,pendingApprovals:!1,pendingApprovalCount:!1},AppStateController:{browserEnvironment:!0,connectedStatusPopoverHasBeenShown:!0,currentPopupId:!1,currentExtensionPopupId:!1,defaultHomeActiveTabName:!0,fullScreenGasPollTokens:!0,hadAdvancedGasFeesSetPriorToMigration92_3:!0,nftsDetectionNoticeDismissed:!0,nftsDropdownState:!0,notificationGasPollTokens:!0,outdatedBrowserWarningLastShown:!0,popupGasPollTokens:!0,qrHardware:!0,recoveryPhraseReminderHasBeenShown:!0,recoveryPhraseReminderLastShown:!0,showBetaHeader:!0,showPermissionsTour:!0,showProductTour:!0,showNetworkBanner:!0,showAccountBanner:!0,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,showTestnetMessageInDropdown:!0,surveyLinkLastClickedOrClosed:!0,snapsInstallPrivacyWarningShown:!0,termsOfUseLastAgreed:!0,timeoutMinutes:!0,trezorModel:!0,usedNetworks:!0},CronjobController:{jobs:!1},CurrencyController:{currentCurrency:!0,currencyRates:!0},DecryptMessageController:{unapprovedDecryptMsgs:!1,unapprovedDecryptMsgCount:!0},EncryptionPublicKeyController:{unapprovedEncryptionPublicKeyMsgs:!1,unapprovedEncryptionPublicKeyMsgCount:!0},EnsController:{ensResolutionsByAddress:!1,ensEntries:!1},GasFeeController:{estimatedGasFeeTimeBounds:!0,gasEstimateType:!0,gasFeeEstimates:!0,gasFeeEstimatesByChainId:!0},KeyringController:{isUnlocked:!0,keyrings:!1},LoggingController:{logs:!1},MetaMetricsController:{eventsBeforeMetricsOptIn:!1,fragments:!1,metaMetricsId:!0,participateInMetaMetrics:!0,previousUserTraits:!1,segmentApiCalls:!1,traits:!1},NameController:{names:!1,nameSources:!1,useExternalNameSources:!1},NetworkController:{networkConfigurations:!1,networksMetadata:!0,providerConfig:{chainId:!0,id:!0,nickname:!0,rpcPrefs:!1,rpcUrl:!1,ticker:!0,type:!0},selectedNetworkClientId:!1},NftController:{allNftContracts:!1,allNfts:!1,ignoredNfts:!1},NotificationController:{notifications:!1},OnboardingController:{completedOnboarding:!0,firstTimeFlowType:!0,onboardingTabs:!1,seedPhraseBackedUp:!0},PPOMController:{securityAlertsEnabled:!1,storageMetadata:[],versionFileETag:!1,versionInfo:[]},PermissionController:{subjects:!1},PermissionLogController:{permissionActivityLog:!1,permissionHistory:!1},PhishingController:{},PreferencesController:{advancedGasFee:!0,currentLocale:!0,disabledRpcMethodPreferences:!0,dismissSeedBackUpReminder:!0,featureFlags:!0,forgottenPassword:!0,identities:!1,incomingTransactionsPreferences:!0,isIpfsGatewayEnabled:!1,ipfsGateway:!1,knownMethodData:!1,ledgerTransportType:!0,lostIdentities:!1,openSeaEnabled:!0,preferences:{autoLockTimeLimit:!0,hideZeroBalanceTokens:!0,showExtensionInFullSizeView:!0,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,useNativeCurrencyAsPrimaryCurrency:!0,petnamesEnabled:!0},selectedAddress:!1,snapRegistryList:!1,theme:!0,signatureSecurityAlertResponses:!1,use4ByteResolution:!0,useAddressBarEnsResolution:!0,useBlockie:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,useNftDetection:!0,useNonceField:!0,usePhishDetect:!0,useTokenDetection:!0,useRequestQueue:!0,useTransactionSimulations:!0,hasDismissedOpenSeaToBlockaidBanner:!0},SelectedNetworkController:{domains:!1},SignatureController:{unapprovedMsgCount:!0,unapprovedMsgs:!1,unapprovedPersonalMsgCount:!0,unapprovedPersonalMsgs:!1,unapprovedTypedMessages:!1,unapprovedTypedMessagesCount:!0},SmartTransactionsController:{smartTransactionsState:{fees:{approvalTxFees:!0,tradeTxFees:!0},liveness:!0,smartTransactions:!1,userOptIn:!0,userOptInV2:!0}},SnapController:{unencryptedSnapStates:!1,snapStates:!1,snaps:!1},SnapInterface:{interfaces:!1},SnapsRegistry:{database:!1,lastUpdated:!1,databaseUnavailable:!1},SubjectMetadataController:{subjectMetadata:!1},SwapsController:{swapsState:{approveTxId:!1,customApproveTxData:!1,customGasPrice:!0,customMaxFeePerGas:!0,customMaxGas:!0,customMaxPriorityFeePerGas:!0,errorKey:!0,fetchParams:!0,quotes:!1,quotesLastFetched:!0,quotesPollingLimitEnabled:!0,routeState:!0,saveFetchedQuotes:!0,selectedAggId:!0,swapsFeatureFlags:!0,swapsFeatureIsLive:!0,swapsQuotePrefetchingRefreshTime:!0,swapsQuoteRefreshTime:!0,swapsStxBatchStatusRefreshTime:!0,swapsStxGetTransactionsRefreshTime:!0,swapsStxMaxFeeMultiplier:!0,swapsUserFeeLevel:!0,tokens:!1,topAggId:!1,tradeTxId:!1}},TokenDetectionController:{[o.AllProperties]:!1},TokenListController:{preventPollingOnNetworkRestart:!0,tokenList:!1,tokensChainsCache:{[o.AllProperties]:!1}},TokenRatesController:{contractExchangeRates:!1,contractExchangeRatesByChainId:!1},TokensController:{allDetectedTokens:{[o.AllProperties]:!1},allIgnoredTokens:{[o.AllProperties]:!1},allTokens:{[o.AllProperties]:!1},detectedTokens:!1,ignoredTokens:!1,tokens:!1},TransactionController:{transactions:!1,lastFetchedBlockNumbers:!1,methodData:!1},TxController:{transactions:!1},UserOperationController:{userOperations:!1}}),T=Object.values(h).reduce(((e,t)=>({...e,...t})),{});n.SENTRY_UI_STATE={gas:!0,history:!0,metamask:{...T,isInitialized:!0,customNonceValue:!0,isAccountMenuOpen:!0,isNetworkMenuOpen:!0,nextNonce:!0,pendingTokens:!1,welcomeScreenSeen:!0,confirmationExchangeRates:!0,useSafeChainsListValidation:!0,addSnapAccountEnabled:!1,snapsAddSnapAccountModalDismissed:!1,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1},unconnectedAccount:!0};function y(e){return e.persistedState?E(e.persistedState):!!e.state&&(e.state.metamask?Boolean(e.state.metamask.participateInMetaMetrics):Boolean(null===(t=e.state.MetaMetricsController)||void 0===t?void 0:t.participateInMetaMetrics));var t}function E(e){var t;return Boolean(null==e||null===(t=e.data)||void 0===t||null===(t=t.MetaMetricsController)||void 0===t?void 0:t.participateInMetaMetrics)}function S(e){return e.match(/^(chrome-extension|moz-extension):\/\//u)?e:""}function _(e){return t=>{if(!e)return null;const n=e();if(!y(n)||!function(e){var t,n;return e.persistedState?Boolean(null===(t=e.persistedState.data)||void 0===t||null===(t=t.OnboardingController)||void 0===t?void 0:t.completedOnboarding):!!e.state&&(e.state.metamask?Boolean(e.state.metamask.completedOnboarding):Boolean(null===(n=e.state.OnboardingController)||void 0===n?void 0:n.completedOnboarding))}(n)||"ui.input"===(null==t?void 0:t.category))return null;return I(t)}}function I(e){var t,n,r;return null!=e&&null!==(t=e.data)&&void 0!==t&&t.url&&(e.data.url=S(e.data.url)),null!=e&&null!==(n=e.data)&&void 0!==n&&n.to&&(e.data.to=S(e.data.to)),null!=e&&null!==(r=e.data)&&void 0!==r&&r.from&&(e.data.from=S(e.data.from)),e}function A(e,t){try{if(function(e){v(e,(e=>{let t=(0,c.default)(e);return 0===t.indexOf("Transaction Failed: known transaction")&&(t="Transaction Failed: known transaction"),t}))}(e),function(e){v(e,(e=>{let t=e;const n=/(([-.+a-zA-Z]+:\/\/)|(www\.))\S+[@:.]\S+/gu;return(t.match(n)||[]).forEach((e=>{try{const n=new URL(e),{hostname:r}=n;Object.values(f).some((e=>r===e||r.endsWith(`.${e}`)))||(t=t.replace(e,"**"))}catch(n){t=t.replace(e,"**")}})),t}))}(e),function(e){v(e,(e=>e.replace(/0x[A-Fa-f0-9]{40}/u,"0x**")))}(e),function(e){var t;null!==(t=e.request)&&void 0!==t&&t.url&&(e.request.url=w(e.request.url));e.exception&&e.exception.values&&e.exception.values.forEach((e=>{e.stacktrace&&e.stacktrace.frames.forEach((e=>{e.filename=w(e.filename)}))}))}(e),t){const n=t();e.extra||(e.extra={}),e.extra.appState=n}}catch(e){console.warn(e)}return e}function v(e,t){"string"==typeof e.message&&(e.message=t(e.message)),e.exception&&e.exception.values&&e.exception.values.forEach((e=>{"string"==typeof e.value&&(e.value=t(e.value))}))}function w(e){var t;if(null===(t=globalThis.location)||void 0===t||!t.origin)return e;const n=null==e?void 0:e.split(globalThis.location.origin)[1];if(!n)return e;return`/metamask${n}`}}}},{package:"$root$",file:"app/scripts/lib/setupSentry.js"}],[88,{"../../../shared/constants/app":4120,"obj-multiplex":3581,pump:3661},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setupMultiplex=function(e){const t=new r.default;return t.ignoreStream(s.EXTENSION_MESSAGES.CONNECTION_READY),(0,a.default)(e,t,e,(e=>{e&&console.error(e)})),t};var r=o(e("obj-multiplex")),a=o(e("pump")),s=e("../../../shared/constants/app");function o(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/stream-utils.js"}],[92,{"../../../shared/constants/app":4120,"../../../shared/constants/network":4131,"../../../shared/modules/hexstring-utils":4164,"@metamask/transaction-controller":1931,"bn.js":2586,lodash:3477,url:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BnMultiplyByFraction=function(e,t,n){const r=new a.default(t),s=new a.default(n);return e.mul(r).div(s)},n.addHexPrefix=void 0,n.addUrlProtocolPrefix=function(e){let t=e.trim();t.length&&!r.default.parse(t).protocol&&(t=`https://${t}`);if(null!==g(t))return t;return null},n.checkAlarmExists=function(e,t){return e.some((e=>e.name===t))},n.deferredPromise=function(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}},n.formatTxMetaForRpcResult=function(e){const{r:t,s:n,v:r,hash:a,txReceipt:s,txParams:i}=e,{to:c,data:u,nonce:d,gas:l,from:p,value:g,gasPrice:m,accessList:f,maxFeePerGas:h,maxPriorityFeePerGas:T}=i,y={v:r,r:t,s:n,to:c,gas:l,from:p,hash:a,nonce:`${d}`,input:u||"0x",value:g||"0x0",accessList:f||null,blockHash:(null==s?void 0:s.blockHash)||null,blockNumber:(null==s?void 0:s.blockNumber)||null,transactionIndex:(null==s?void 0:s.transactionIndex)||null,type:h&&T?o.TransactionEnvelopeType.feeMarket:o.TransactionEnvelopeType.legacy};h&&T?(y.gasPrice=h,y.maxFeePerGas=h,y.maxPriorityFeePerGas=T):y.gasPrice=m;return y},n.generateRandomId=void 0,n.getChainType=function(e){if(e===c.CHAIN_IDS.MAINNET)return"mainnet";if(c.TEST_CHAINS.includes(e))return"testnet";return"custom"},n.getPlatform=n.getEnvironmentType=void 0,n.getValidUrl=g,n.hexToBn=function(e){return new a.default((0,u.stripHexPrefix)(e),16)},n.isValidDate=void 0,n.isWebUrl=function(e){const t=g(e);return null!==t&&("https:"===t.protocol||"http:"===t.protocol)},n.previousValueComparator=function(e,t){let n,r=!0;return a=>{try{return r?(r=!1,e(t??a,a)):e(n,a)}finally{n=a}}};var r=d(e("url")),a=d(e("bn.js")),s=e("lodash"),o=e("@metamask/transaction-controller"),i=e("../../../shared/constants/app"),c=e("../../../shared/constants/network"),u=e("../../../shared/modules/hexstring-utils");function d(e){return e&&e.__esModule?e:{default:e}}const l=(0,s.memoize)((e=>{const t=new URL(e);return"/popup.html"===t.pathname?i.ENVIRONMENT_TYPE_POPUP:["/home.html"].includes(t.pathname)?i.ENVIRONMENT_TYPE_FULLSCREEN:"/notification.html"===t.pathname?i.ENVIRONMENT_TYPE_NOTIFICATION:i.ENVIRONMENT_TYPE_BACKGROUND}));n.getEnvironmentType=(e=window.location.href)=>l(e);n.getPlatform=()=>{const{navigator:e}=window,{userAgent:t}=e;return t.includes("Firefox")?i.PLATFORM_FIREFOX:"brave"in e?i.PLATFORM_BRAVE:t.includes("Edg/")?i.PLATFORM_EDGE:t.includes("OPR")?i.PLATFORM_OPERA:i.PLATFORM_CHROME};n.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):e.startsWith("-")?e.replace("-","-0x"):`0x${e}`;const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";n.generateRandomId=()=>{let e="";for(let t=0;t<20;t++)e+=p.charAt(Math.floor(62*Math.random()));return e};function g(e){try{const t=new URL(e);return 0===t.hostname.length||0===t.pathname.length||t.hostname!==decodeURIComponent(t.hostname)?null:t}catch(e){return null}}n.isValidDate=e=>e instanceof Date}}},{package:"$root$",file:"app/scripts/lib/util.ts"}],[990,{"./errors":991,"./packer":994,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.decodeSingle=n.decode=n.encodePacked=n.encodeSingle=n.encode=void 0;const r=e("@metamask/utils"),a=e("./errors"),s=e("./packer");n.encode=(e,t,n,r)=>{try{return(0,s.pack)({types:e,values:t,packed:n,tight:r})}catch(e){if(e instanceof a.ParserError)throw new a.ParserError(`Unable to encode value: ${e.message}`,e);throw new a.ParserError(`An unexpected error occurred: ${(0,a.getErrorMessage)(e)}`,e)}};n.encodeSingle=(e,t)=>(0,n.encode)([e],[t]);n.encodePacked=(e,t,r)=>(0,n.encode)(e,t,!0,r);n.decode=(e,t)=>{const n=(0,r.createBytes)(t);try{return(0,s.unpack)(e,n)}catch(e){if(e instanceof a.ParserError)throw new a.ParserError(`Unable to decode value: ${e.message}`,e);throw new a.ParserError(`An unexpected error occurred: ${(0,a.getErrorMessage)(e)}`,e)}};n.decodeSingle=(e,t)=>{const s=(0,n.decode)([e],t);return(0,r.assert)(1===s.length,new a.ParserError("Decoded value array has unexpected length.")),s[0]}}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/abi.js"}],[991,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParserError=n.getErrorStack=n.getErrorMessage=void 0;const r=e("@metamask/utils");n.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,r.isObject)(e)&&(0,r.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";n.getErrorStack=e=>e instanceof Error?e.stack:undefined;class a extends Error{constructor(e,t){super(e),this.name="ParserError";const r=(0,n.getErrorStack)(t);r&&(this.stack=r)}}n.ParserError=a}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/errors.js"}],[992,{"./abi":990,"./errors":991,"./types":1007},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),a(e("./abi"),n),a(e("./errors"),n),a(e("./types"),n)}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/index.js"}],[993,{"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.iterate=void 0;const r=e("@metamask/utils");n.iterate=function*(e,t=32){for(let n=0;n<e.length;n+=t){const a=e=>{(0,r.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,r.assert)(e%t==0,"Length must be a multiple of the size."),n+=e},s=e.subarray(n);yield{skip:a,value:s}}return{skip:()=>undefined,value:new Uint8Array}}}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/iterator.js"}],[994,{"./errors":991,"./iterator":993,"./parsers":1001,"./utils":1009,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unpack=n.pack=n.isDynamicParser=n.getParser=void 0;const r=e("@metamask/utils"),a=e("./errors"),s=e("./iterator"),o=e("./parsers"),i=e("./utils");n.getParser=e=>{const t={address:o.address,array:o.array,bool:o.bool,bytes:o.bytes,fixedBytes:o.fixedBytes,function:o.fn,number:o.number,string:o.string,tuple:o.tuple},n=t[e];if(n)return n;const r=Object.values(t).find((t=>t.isType(e)));if(r)return r;throw new a.ParserError(`The type "${e}" is not supported.`)};n.isDynamicParser=(e,t)=>{const{isDynamic:n}=e;return"function"==typeof n?n(t):n};n.pack=({types:e,values:t,packed:s=!1,tight:o=!1,arrayPacked:c=!1,byteArray:u=new Uint8Array})=>{(0,r.assert)(e.length===t.length,new a.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));const{staticBuffer:d,dynamicBuffer:l,pointers:p}=e.reduce((({staticBuffer:e,dynamicBuffer:a,pointers:i},u,d)=>{const l=(0,n.getParser)(u),p=t[d];if(s||c||!(0,n.isDynamicParser)(l,u))return{staticBuffer:l.encode({buffer:e,value:p,type:u,packed:s,tight:o}),dynamicBuffer:a,pointers:i};return{staticBuffer:(0,r.concatBytes)([e,new Uint8Array(32)]),dynamicBuffer:l.encode({buffer:a,value:p,type:u,packed:s,tight:o}),pointers:[...i,{position:e.length,pointer:a.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,r.assert)(!s&&!c||0===l.length,new a.ParserError("Invalid pack state."));const g=d.length,m=p.reduce(((e,{pointer:t,position:n})=>{const a=(0,i.padStart)((0,r.numberToBytes)(g+t));return(0,i.set)(e,a,n)}),d);return(0,r.concatBytes)([u,m,l])};n.unpack=(e,t)=>{const o=(0,s.iterate)(t);return e.map((e=>{const{value:{value:s,skip:i},done:c}=o.next();(0,r.assert)(!c,new a.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${e}".`));const u=(0,n.getParser)(e);if((0,n.isDynamicParser)(u,e)){const n=(0,r.bytesToNumber)(s.subarray(0,32)),a=t.subarray(n);return u.decode({type:e,value:a,skip:i})}return u.decode({type:e,value:s,skip:i})}))}}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/packer.js"}],[995,{"../errors":991,"../utils":1009,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.address=n.getAddress=void 0;const r=e("@metamask/utils"),a=e("../errors"),s=e("../utils");n.getAddress=e=>{const t=(0,r.createBytes)(e);return(0,r.assert)(t.length<=20,new a.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,s.padStart)(t,20)},n.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:a}){const o=(0,n.getAddress)(t);if(a)return(0,r.concatBytes)([e,o]);const i=(0,s.padStart)(o);return(0,r.concatBytes)([e,i])},decode:({value:e})=>(0,r.add0x)((0,r.bytesToHex)(e.slice(12,32)))}}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/parsers/address.js"}],[996,{"../errors":991,"../packer":994,"../utils":1009,"./fixed-bytes":999,"./tuple":1005,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.array=n.getTupleType=n.getArrayType=n.isArrayType=void 0;const r=e("@metamask/utils"),a=e("../errors"),s=e("../packer"),o=e("../utils"),i=e("./fixed-bytes"),c=e("./tuple"),u=/^(?<type>.*)\[(?<length>\d*?)\]$/u;n.isArrayType=e=>u.test(e);n.getArrayType=e=>{const t=e.match(u);return(0,r.assert)(t?.groups?.type,new a.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):undefined]};n.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,n.array={isDynamic(e){const[t,r]=(0,n.getArrayType)(e);return r===undefined||(0,s.isDynamicParser)((0,s.getParser)(t),t)},isType:e=>(0,n.isArrayType)(e),getByteLength(e){(0,r.assert)((0,n.isArrayType)(e),new a.ParserError(`Expected an array type, but received "${e}".`));const[t,o]=(0,n.getArrayType)(e);return(0,s.isDynamicParser)(this,e)||o===undefined?32:c.tuple.getByteLength((0,n.getTupleType)(t,o))},encode({type:e,buffer:t,value:u,packed:d,tight:l}){const[p,g]=(0,n.getArrayType)(e);if((0,r.assert)(!d||!(0,n.isArrayType)(p),new a.ParserError("Cannot pack nested arrays.")),d&&(0,s.isDynamicParser)((0,s.getParser)(p),p))return(0,s.pack)({types:new Array(u.length).fill(p),values:u,byteArray:t,packed:d,arrayPacked:!0,tight:l});if(g)return(0,r.assert)(g===u.length,new a.ParserError(`Array length does not match type length. Expected a length of ${g}, but received ${u.length}.`)),c.tuple.encode({type:(0,n.getTupleType)(p,g),buffer:t,value:u,packed:i.fixedBytes.isType(p)&&l,tight:l});if(d)return(0,s.pack)({types:new Array(u.length).fill(p),values:u,byteArray:t,packed:i.fixedBytes.isType(p)&&l,arrayPacked:!0,tight:l});const m=(0,o.padStart)((0,r.numberToBytes)(u.length));return(0,s.pack)({types:new Array(u.length).fill(p),values:u,byteArray:(0,r.concatBytes)([t,m]),packed:d,tight:l})},decode({type:e,value:t,...o}){const[i,u]=(0,n.getArrayType)(e);if(u){const e=c.tuple.decode({type:(0,n.getTupleType)(i,u),value:t,...o});return(0,r.assert)(e.length===u,new a.ParserError(`Array length does not match type length. Expected a length of ${u}, but received ${e.length}.`)),e}const d=(0,r.bytesToNumber)(t.subarray(0,32));return(0,s.unpack)(new Array(d).fill(i),t.subarray(32))}}}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/parsers/array.js"}],[997,{"../errors":991,"./number":1002,"@metamask/utils":1982,superstruct:4002},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.bool=n.getBooleanValue=void 0;const r=e("@metamask/utils"),a=e("superstruct"),s=e("../errors"),o=e("./number"),i=(0,a.coerce)((0,a.boolean)(),(0,a.union)([(0,a.literal)("true"),(0,a.literal)("false")]),(e=>"true"===e));n.getBooleanValue=e=>{try{return(0,a.create)(e,i)?BigInt(1):BigInt(0)}catch{throw new s.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},n.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:a,tight:s}){const i=(0,n.getBooleanValue)(t);return a?(0,r.concatBytes)([e,(0,r.bigIntToBytes)(i)]):o.number.encode({type:"uint256",buffer:e,value:i,packed:a,tight:s})},decode:e=>o.number.decode({...e,type:"uint256"})===BigInt(1)}}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/parsers/bool.js"}],[998,{"../utils":1009,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.bytes=void 0;const r=e("@metamask/utils"),a=e("../utils");n.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n}){const s=(0,r.createBytes)(t);if(n)return(0,r.concatBytes)([e,s]);const o=32*Math.ceil(s.byteLength/32);return(0,r.concatBytes)([e,(0,a.padStart)((0,r.numberToBytes)(s.byteLength)),(0,a.padEnd)(s,o)])},decode({value:e}){const t=e.subarray(0,32),n=(0,r.bytesToNumber)(t);return e.slice(32,32+n)}}}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/parsers/bytes.js"}],[999,{"../errors":991,"../utils":1009,"@metamask/utils":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fixedBytes=n.getByteLength=void 0;const r=e("@metamask/utils"),a=e("../errors"),s=e("../utils"),o=/^bytes([0-9]{1,2})$/u;n.getByteLength=e=>{const t=e.match(o)?.[1];(0,r.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const n=Number(t);return(0,r.assert)(n>0&&n<=32,new a.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),n},n.fixedBytes={isDynamic:!1,isType:e=>o.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:o,packed:i}){const c=(0,n.getByteLength)(e),u=(0,r.createBytes)(o);return(0,r.assert)(u.length<=c,new a.ParserError(`Expected a value of length ${c}, but received a value of length ${u.length}.`)),i?(0,r.concatBytes)([t,(0,s.padEnd)(u,c)]):(0,r.concatBytes)([t,(0,s.padEnd)(u)])},decode({type:e,value:t}){const r=(0,n.getByteLength)(e);return t.slice(0,r)}}}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/parsers/fixed-bytes.js"}]],[],{});