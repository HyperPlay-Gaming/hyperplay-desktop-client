LavaPack.loadBundle([[818,{"../core/AxiosError":792,"../env/data":802},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../env/data").version,o=e("../core/AxiosError"),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,r){function i(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,a){if(!1===e)throw new o(i(n," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!s[n]&&(s[n]=!0,console.warn(i(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,a)}},t.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),i=n.length;i-- >0;){var s=n[i],a=t[s];if(a){var c=e[s],l=c===undefined||a(c,s,e);if(!0!==l)throw new o("option "+s+" must be "+l,o.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new o("Unknown option "+s,o.ERR_BAD_OPTION)}},validators:i}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>axios",file:"node_modules/@ledgerhq/evm-tools/node_modules/axios/lib/helpers/validator.js"}],[819,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=FormData}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>axios",file:"node_modules/@ledgerhq/evm-tools/node_modules/axios/lib/platform/browser/classes/FormData.js"}],[820,{"../../../helpers/AxiosURLSearchParams":803},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../helpers/AxiosURLSearchParams");t.exports="undefined"!=typeof URLSearchParams?URLSearchParams:n}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>axios",file:"node_modules/@ledgerhq/evm-tools/node_modules/axios/lib/platform/browser/classes/URLSearchParams.js"}],[821,{"./classes/FormData":819,"./classes/URLSearchParams":820},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={isBrowser:!0,classes:{URLSearchParams:e("./classes/URLSearchParams"),FormData:e("./classes/FormData"),Blob:Blob},protocols:["http","https","file","blob","url","data"]}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>axios",file:"node_modules/@ledgerhq/evm-tools/node_modules/axios/lib/platform/browser/index.js"}],[822,{"./node/":821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./node/")}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>axios",file:"node_modules/@ledgerhq/evm-tools/node_modules/axios/lib/platform/index.js"}],[823,{"./helpers/bind":804},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=e("./helpers/bind"),i=Object.prototype.toString,s=(n=Object.create(null),function(e){var t=i.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function c(e){return Array.isArray(e)}function l(e){return void 0===e}var u=a("ArrayBuffer");function d(e){return"number"==typeof e}function f(e){return null!==e&&"object"==typeof e}function p(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var h=a("Date"),g=a("File"),m=a("Blob"),b=a("FileList");function _(e){return"[object Function]"===i.call(e)}var y=a("URLSearchParams");function E(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var w,v=(w="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return w&&e instanceof w});var P,T=a("HTMLFormElement"),O=(P=Object.prototype.hasOwnProperty,function(e,t){return P.call(e,t)});t.exports={isArray:c,isArrayBuffer:u,isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||i.call(e)===t||_(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:d,isObject:f,isPlainObject:p,isEmptyObject:function(e){return e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype},isUndefined:l,isDate:h,isFile:g,isBlob:m,isFunction:_,isStream:function(e){return f(e)&&_(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){var e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:E,merge:function e(){var t={};function r(r,n){p(t[n])&&p(r)?t[n]=e(t[n],r):p(r)?t[n]=e({},r):c(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)E(arguments[n],r);return t},extend:function(e,t,r){return E(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)},toFlatObject:function(e,t,r,n){var o,i,s,a={};if(t=t||{},null==e)return t;do{for(i=(o=Object.getOwnPropertyNames(e)).length;i-- >0;)s=o[i],n&&!n(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==r&&Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:a,endsWith:function(e,t,r){e=String(e),(r===undefined||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return-1!==n&&n===r},toArray:function(e){if(!e)return null;if(c(e))return e;var t=e.length;if(!d(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r},isTypedArray:v,isFileList:b,forEachEntry:function(e,t){for(var r,n=(e&&e[Symbol.iterator]).call(e);(r=n.next())&&!r.done;){var o=r.value;t.call(e,o[0],o[1])}},matchAll:function(e,t){for(var r,n=[];null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:T,hasOwnProperty:O}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>axios",file:"node_modules/@ledgerhq/evm-tools/node_modules/axios/lib/utils.js"}],[824,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0,r.version="ethers/5.7.2"}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>ethers",file:"node_modules/@ledgerhq/evm-tools/node_modules/ethers/lib/_version.js"}],[825,{"./_version":824,"./utils":827,"@ethersproject/abstract-signer":505,"@ethersproject/bignumber":514,"@ethersproject/constants":520,"@ethersproject/contracts":523,"@ethersproject/logger":544,"@ethersproject/providers":561,"@ethersproject/wallet":612,"@ethersproject/wordlists":617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Wordlist=r.version=r.wordlists=r.utils=r.logger=r.errors=r.constants=r.FixedNumber=r.BigNumber=r.ContractFactory=r.Contract=r.BaseContract=r.providers=r.getDefaultProvider=r.VoidSigner=r.Wallet=r.Signer=void 0;var s=e("@ethersproject/contracts");Object.defineProperty(r,"BaseContract",{enumerable:!0,get:function(){return s.BaseContract}}),Object.defineProperty(r,"Contract",{enumerable:!0,get:function(){return s.Contract}}),Object.defineProperty(r,"ContractFactory",{enumerable:!0,get:function(){return s.ContractFactory}});var a=e("@ethersproject/bignumber");Object.defineProperty(r,"BigNumber",{enumerable:!0,get:function(){return a.BigNumber}}),Object.defineProperty(r,"FixedNumber",{enumerable:!0,get:function(){return a.FixedNumber}});var c=e("@ethersproject/abstract-signer");Object.defineProperty(r,"Signer",{enumerable:!0,get:function(){return c.Signer}}),Object.defineProperty(r,"VoidSigner",{enumerable:!0,get:function(){return c.VoidSigner}});var l=e("@ethersproject/wallet");Object.defineProperty(r,"Wallet",{enumerable:!0,get:function(){return l.Wallet}});var u=i(e("@ethersproject/constants"));r.constants=u;var d=i(e("@ethersproject/providers"));r.providers=d;var f=e("@ethersproject/providers");Object.defineProperty(r,"getDefaultProvider",{enumerable:!0,get:function(){return f.getDefaultProvider}});var p=e("@ethersproject/wordlists");Object.defineProperty(r,"Wordlist",{enumerable:!0,get:function(){return p.Wordlist}}),Object.defineProperty(r,"wordlists",{enumerable:!0,get:function(){return p.wordlists}});var h=i(e("./utils"));r.utils=h;var g=e("@ethersproject/logger");Object.defineProperty(r,"errors",{enumerable:!0,get:function(){return g.ErrorCode}});var m=e("./_version");Object.defineProperty(r,"version",{enumerable:!0,get:function(){return m.version}});var b=new g.Logger(m.version);r.logger=b}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>ethers",file:"node_modules/@ledgerhq/evm-tools/node_modules/ethers/lib/ethers.js"}],[826,{"./ethers":825},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Wordlist=r.version=r.wordlists=r.utils=r.logger=r.errors=r.constants=r.FixedNumber=r.BigNumber=r.ContractFactory=r.Contract=r.BaseContract=r.providers=r.getDefaultProvider=r.VoidSigner=r.Wallet=r.Signer=r.ethers=void 0;var s=i(e("./ethers"));r.ethers=s;try{var a=window;null==a._ethers&&(a._ethers=s)}catch(e){}var c=e("./ethers");Object.defineProperty(r,"Signer",{enumerable:!0,get:function(){return c.Signer}}),Object.defineProperty(r,"Wallet",{enumerable:!0,get:function(){return c.Wallet}}),Object.defineProperty(r,"VoidSigner",{enumerable:!0,get:function(){return c.VoidSigner}}),Object.defineProperty(r,"getDefaultProvider",{enumerable:!0,get:function(){return c.getDefaultProvider}}),Object.defineProperty(r,"providers",{enumerable:!0,get:function(){return c.providers}}),Object.defineProperty(r,"BaseContract",{enumerable:!0,get:function(){return c.BaseContract}}),Object.defineProperty(r,"Contract",{enumerable:!0,get:function(){return c.Contract}}),Object.defineProperty(r,"ContractFactory",{enumerable:!0,get:function(){return c.ContractFactory}}),Object.defineProperty(r,"BigNumber",{enumerable:!0,get:function(){return c.BigNumber}}),Object.defineProperty(r,"FixedNumber",{enumerable:!0,get:function(){return c.FixedNumber}}),Object.defineProperty(r,"constants",{enumerable:!0,get:function(){return c.constants}}),Object.defineProperty(r,"errors",{enumerable:!0,get:function(){return c.errors}}),Object.defineProperty(r,"logger",{enumerable:!0,get:function(){return c.logger}}),Object.defineProperty(r,"utils",{enumerable:!0,get:function(){return c.utils}}),Object.defineProperty(r,"wordlists",{enumerable:!0,get:function(){return c.wordlists}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.version}}),Object.defineProperty(r,"Wordlist",{enumerable:!0,get:function(){return c.Wordlist}})}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>ethers",file:"node_modules/@ledgerhq/evm-tools/node_modules/ethers/lib/index.js"}],[827,{"@ethersproject/abi":500,"@ethersproject/address":507,"@ethersproject/base64":509,"@ethersproject/basex":510,"@ethersproject/bytes":516,"@ethersproject/hash":529,"@ethersproject/hdnode":534,"@ethersproject/json-wallets":537,"@ethersproject/keccak256":542,"@ethersproject/logger":544,"@ethersproject/properties":550,"@ethersproject/random":573,"@ethersproject/rlp":576,"@ethersproject/sha2":579,"@ethersproject/signing-key":583,"@ethersproject/solidity":601,"@ethersproject/strings":605,"@ethersproject/transactions":608,"@ethersproject/units":610,"@ethersproject/wallet":612,"@ethersproject/web":615},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.formatBytes32String=r.Utf8ErrorFuncs=r.toUtf8String=r.toUtf8CodePoints=r.toUtf8Bytes=r._toEscapedUtf8String=r.nameprep=r.hexDataSlice=r.hexDataLength=r.hexZeroPad=r.hexValue=r.hexStripZeros=r.hexConcat=r.isHexString=r.hexlify=r.base64=r.base58=r.TransactionDescription=r.LogDescription=r.Interface=r.SigningKey=r.HDNode=r.defaultPath=r.isBytesLike=r.isBytes=r.zeroPad=r.stripZeros=r.concat=r.arrayify=r.shallowCopy=r.resolveProperties=r.getStatic=r.defineReadOnly=r.deepCopy=r.checkProperties=r.poll=r.fetchJson=r._fetchData=r.RLP=r.Logger=r.checkResultErrors=r.FormatTypes=r.ParamType=r.FunctionFragment=r.EventFragment=r.ErrorFragment=r.ConstructorFragment=r.Fragment=r.defaultAbiCoder=r.AbiCoder=void 0,r.Indexed=r.Utf8ErrorReason=r.UnicodeNormalizationForm=r.SupportedAlgorithm=r.mnemonicToSeed=r.isValidMnemonic=r.entropyToMnemonic=r.mnemonicToEntropy=r.getAccountPath=r.verifyTypedData=r.verifyMessage=r.recoverPublicKey=r.computePublicKey=r.recoverAddress=r.computeAddress=r.getJsonWalletAddress=r.TransactionTypes=r.serializeTransaction=r.parseTransaction=r.accessListify=r.joinSignature=r.splitSignature=r.soliditySha256=r.solidityKeccak256=r.solidityPack=r.shuffled=r.randomBytes=r.sha512=r.sha256=r.ripemd160=r.keccak256=r.computeHmac=r.commify=r.parseUnits=r.formatUnits=r.parseEther=r.formatEther=r.isAddress=r.getCreate2Address=r.getContractAddress=r.getIcapAddress=r.getAddress=r._TypedDataEncoder=r.id=r.isValidName=r.namehash=r.hashMessage=r.dnsEncode=r.parseBytes32String=void 0;var s=e("@ethersproject/abi");Object.defineProperty(r,"AbiCoder",{enumerable:!0,get:function(){return s.AbiCoder}}),Object.defineProperty(r,"checkResultErrors",{enumerable:!0,get:function(){return s.checkResultErrors}}),Object.defineProperty(r,"ConstructorFragment",{enumerable:!0,get:function(){return s.ConstructorFragment}}),Object.defineProperty(r,"defaultAbiCoder",{enumerable:!0,get:function(){return s.defaultAbiCoder}}),Object.defineProperty(r,"ErrorFragment",{enumerable:!0,get:function(){return s.ErrorFragment}}),Object.defineProperty(r,"EventFragment",{enumerable:!0,get:function(){return s.EventFragment}}),Object.defineProperty(r,"FormatTypes",{enumerable:!0,get:function(){return s.FormatTypes}}),Object.defineProperty(r,"Fragment",{enumerable:!0,get:function(){return s.Fragment}}),Object.defineProperty(r,"FunctionFragment",{enumerable:!0,get:function(){return s.FunctionFragment}}),Object.defineProperty(r,"Indexed",{enumerable:!0,get:function(){return s.Indexed}}),Object.defineProperty(r,"Interface",{enumerable:!0,get:function(){return s.Interface}}),Object.defineProperty(r,"LogDescription",{enumerable:!0,get:function(){return s.LogDescription}}),Object.defineProperty(r,"ParamType",{enumerable:!0,get:function(){return s.ParamType}}),Object.defineProperty(r,"TransactionDescription",{enumerable:!0,get:function(){return s.TransactionDescription}});var a=e("@ethersproject/address");Object.defineProperty(r,"getAddress",{enumerable:!0,get:function(){return a.getAddress}}),Object.defineProperty(r,"getCreate2Address",{enumerable:!0,get:function(){return a.getCreate2Address}}),Object.defineProperty(r,"getContractAddress",{enumerable:!0,get:function(){return a.getContractAddress}}),Object.defineProperty(r,"getIcapAddress",{enumerable:!0,get:function(){return a.getIcapAddress}}),Object.defineProperty(r,"isAddress",{enumerable:!0,get:function(){return a.isAddress}});var c=i(e("@ethersproject/base64"));r.base64=c;var l=e("@ethersproject/basex");Object.defineProperty(r,"base58",{enumerable:!0,get:function(){return l.Base58}});var u=e("@ethersproject/bytes");Object.defineProperty(r,"arrayify",{enumerable:!0,get:function(){return u.arrayify}}),Object.defineProperty(r,"concat",{enumerable:!0,get:function(){return u.concat}}),Object.defineProperty(r,"hexConcat",{enumerable:!0,get:function(){return u.hexConcat}}),Object.defineProperty(r,"hexDataSlice",{enumerable:!0,get:function(){return u.hexDataSlice}}),Object.defineProperty(r,"hexDataLength",{enumerable:!0,get:function(){return u.hexDataLength}}),Object.defineProperty(r,"hexlify",{enumerable:!0,get:function(){return u.hexlify}}),Object.defineProperty(r,"hexStripZeros",{enumerable:!0,get:function(){return u.hexStripZeros}}),Object.defineProperty(r,"hexValue",{enumerable:!0,get:function(){return u.hexValue}}),Object.defineProperty(r,"hexZeroPad",{enumerable:!0,get:function(){return u.hexZeroPad}}),Object.defineProperty(r,"isBytes",{enumerable:!0,get:function(){return u.isBytes}}),Object.defineProperty(r,"isBytesLike",{enumerable:!0,get:function(){return u.isBytesLike}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return u.isHexString}}),Object.defineProperty(r,"joinSignature",{enumerable:!0,get:function(){return u.joinSignature}}),Object.defineProperty(r,"zeroPad",{enumerable:!0,get:function(){return u.zeroPad}}),Object.defineProperty(r,"splitSignature",{enumerable:!0,get:function(){return u.splitSignature}}),Object.defineProperty(r,"stripZeros",{enumerable:!0,get:function(){return u.stripZeros}});var d=e("@ethersproject/hash");Object.defineProperty(r,"_TypedDataEncoder",{enumerable:!0,get:function(){return d._TypedDataEncoder}}),Object.defineProperty(r,"dnsEncode",{enumerable:!0,get:function(){return d.dnsEncode}}),Object.defineProperty(r,"hashMessage",{enumerable:!0,get:function(){return d.hashMessage}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return d.id}}),Object.defineProperty(r,"isValidName",{enumerable:!0,get:function(){return d.isValidName}}),Object.defineProperty(r,"namehash",{enumerable:!0,get:function(){return d.namehash}});var f=e("@ethersproject/hdnode");Object.defineProperty(r,"defaultPath",{enumerable:!0,get:function(){return f.defaultPath}}),Object.defineProperty(r,"entropyToMnemonic",{enumerable:!0,get:function(){return f.entropyToMnemonic}}),Object.defineProperty(r,"getAccountPath",{enumerable:!0,get:function(){return f.getAccountPath}}),Object.defineProperty(r,"HDNode",{enumerable:!0,get:function(){return f.HDNode}}),Object.defineProperty(r,"isValidMnemonic",{enumerable:!0,get:function(){return f.isValidMnemonic}}),Object.defineProperty(r,"mnemonicToEntropy",{enumerable:!0,get:function(){return f.mnemonicToEntropy}}),Object.defineProperty(r,"mnemonicToSeed",{enumerable:!0,get:function(){return f.mnemonicToSeed}});var p=e("@ethersproject/json-wallets");Object.defineProperty(r,"getJsonWalletAddress",{enumerable:!0,get:function(){return p.getJsonWalletAddress}});var h=e("@ethersproject/keccak256");Object.defineProperty(r,"keccak256",{enumerable:!0,get:function(){return h.keccak256}});var g=e("@ethersproject/logger");Object.defineProperty(r,"Logger",{enumerable:!0,get:function(){return g.Logger}});var m=e("@ethersproject/sha2");Object.defineProperty(r,"computeHmac",{enumerable:!0,get:function(){return m.computeHmac}}),Object.defineProperty(r,"ripemd160",{enumerable:!0,get:function(){return m.ripemd160}}),Object.defineProperty(r,"sha256",{enumerable:!0,get:function(){return m.sha256}}),Object.defineProperty(r,"sha512",{enumerable:!0,get:function(){return m.sha512}});var b=e("@ethersproject/solidity");Object.defineProperty(r,"solidityKeccak256",{enumerable:!0,get:function(){return b.keccak256}}),Object.defineProperty(r,"solidityPack",{enumerable:!0,get:function(){return b.pack}}),Object.defineProperty(r,"soliditySha256",{enumerable:!0,get:function(){return b.sha256}});var _=e("@ethersproject/random");Object.defineProperty(r,"randomBytes",{enumerable:!0,get:function(){return _.randomBytes}}),Object.defineProperty(r,"shuffled",{enumerable:!0,get:function(){return _.shuffled}});var y=e("@ethersproject/properties");Object.defineProperty(r,"checkProperties",{enumerable:!0,get:function(){return y.checkProperties}}),Object.defineProperty(r,"deepCopy",{enumerable:!0,get:function(){return y.deepCopy}}),Object.defineProperty(r,"defineReadOnly",{enumerable:!0,get:function(){return y.defineReadOnly}}),Object.defineProperty(r,"getStatic",{enumerable:!0,get:function(){return y.getStatic}}),Object.defineProperty(r,"resolveProperties",{enumerable:!0,get:function(){return y.resolveProperties}}),Object.defineProperty(r,"shallowCopy",{enumerable:!0,get:function(){return y.shallowCopy}});var E=i(e("@ethersproject/rlp"));r.RLP=E;var w=e("@ethersproject/signing-key");Object.defineProperty(r,"computePublicKey",{enumerable:!0,get:function(){return w.computePublicKey}}),Object.defineProperty(r,"recoverPublicKey",{enumerable:!0,get:function(){return w.recoverPublicKey}}),Object.defineProperty(r,"SigningKey",{enumerable:!0,get:function(){return w.SigningKey}});var v=e("@ethersproject/strings");Object.defineProperty(r,"formatBytes32String",{enumerable:!0,get:function(){return v.formatBytes32String}}),Object.defineProperty(r,"nameprep",{enumerable:!0,get:function(){return v.nameprep}}),Object.defineProperty(r,"parseBytes32String",{enumerable:!0,get:function(){return v.parseBytes32String}}),Object.defineProperty(r,"_toEscapedUtf8String",{enumerable:!0,get:function(){return v._toEscapedUtf8String}}),Object.defineProperty(r,"toUtf8Bytes",{enumerable:!0,get:function(){return v.toUtf8Bytes}}),Object.defineProperty(r,"toUtf8CodePoints",{enumerable:!0,get:function(){return v.toUtf8CodePoints}}),Object.defineProperty(r,"toUtf8String",{enumerable:!0,get:function(){return v.toUtf8String}}),Object.defineProperty(r,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return v.Utf8ErrorFuncs}});var P=e("@ethersproject/transactions");Object.defineProperty(r,"accessListify",{enumerable:!0,get:function(){return P.accessListify}}),Object.defineProperty(r,"computeAddress",{enumerable:!0,get:function(){return P.computeAddress}}),Object.defineProperty(r,"parseTransaction",{enumerable:!0,get:function(){return P.parse}}),Object.defineProperty(r,"recoverAddress",{enumerable:!0,get:function(){return P.recoverAddress}}),Object.defineProperty(r,"serializeTransaction",{enumerable:!0,get:function(){return P.serialize}}),Object.defineProperty(r,"TransactionTypes",{enumerable:!0,get:function(){return P.TransactionTypes}});var T=e("@ethersproject/units");Object.defineProperty(r,"commify",{enumerable:!0,get:function(){return T.commify}}),Object.defineProperty(r,"formatEther",{enumerable:!0,get:function(){return T.formatEther}}),Object.defineProperty(r,"parseEther",{enumerable:!0,get:function(){return T.parseEther}}),Object.defineProperty(r,"formatUnits",{enumerable:!0,get:function(){return T.formatUnits}}),Object.defineProperty(r,"parseUnits",{enumerable:!0,get:function(){return T.parseUnits}});var O=e("@ethersproject/wallet");Object.defineProperty(r,"verifyMessage",{enumerable:!0,get:function(){return O.verifyMessage}}),Object.defineProperty(r,"verifyTypedData",{enumerable:!0,get:function(){return O.verifyTypedData}});var A=e("@ethersproject/web");Object.defineProperty(r,"_fetchData",{enumerable:!0,get:function(){return A._fetchData}}),Object.defineProperty(r,"fetchJson",{enumerable:!0,get:function(){return A.fetchJson}}),Object.defineProperty(r,"poll",{enumerable:!0,get:function(){return A.poll}});var S=e("@ethersproject/sha2");Object.defineProperty(r,"SupportedAlgorithm",{enumerable:!0,get:function(){return S.SupportedAlgorithm}});var I=e("@ethersproject/strings");Object.defineProperty(r,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return I.UnicodeNormalizationForm}}),Object.defineProperty(r,"Utf8ErrorReason",{enumerable:!0,get:function(){return I.Utf8ErrorReason}})}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>ethers",file:"node_modules/@ledgerhq/evm-tools/node_modules/ethers/lib/utils.js"}],[828,{"./errors":829,"./modules/Domains":830,"./modules/EIP712":831,"./services/ledger":835,"./utils":838,"@ledgerhq/logs":881,"bignumber.js":878,buffer:3561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ledgerService=void 0;const a=e("bignumber.js"),c=e("@ledgerhq/logs"),l=e("./utils"),u=e("./modules/Domains"),d=s(e("./services/ledger"));r.ledgerService=d.default;const f=e("./errors"),p=e("./modules/EIP712");o(e("./utils"),r);const h={eth:1,erc20:2,erc721:3,erc20mintable:4,erc721mintable:5},g=e=>e&&27264===e.statusCode?new f.EthAppPleaseEnableContractData("Please enable Blind signing or Contract data in the Ethereum app Settings"):e;r.default=class{setLoadConfig(e){this.loadConfig=e}constructor(e,t="w0w",r={}){this.transport=e,this.loadConfig=r,e.decorateAppAPIMethods(this,["getAddress","signTransaction","signPersonalMessage","getAppConfiguration","signEIP712Message","signEIP712HashedMessage","starkGetPublicKey","starkSignOrder","starkSignOrder_v2","starkSignTransfer","starkSignTransfer_v2","starkProvideQuantum","starkProvideQuantum_v2","starkUnsafeSign","eth2GetPublicKey","eth2SetWithdrawalIndex","getEIP1024PublicEncryptionKey","getEIP1024SharedSecret"],t)}getAddress(e,r,n,o){const i=(0,l.splitPath)(e);let s=t.alloc(1+4*i.length);if(s[0]=i.length,i.forEach(((e,t)=>{s.writeUInt32BE(e,1+4*t)})),o){const e=t.alloc(8,0),r=t.from((0,l.padHexString)(new a.BigNumber(o).toString(16)),"hex");e.write(r.toString("hex"),e.length-r.length,"hex"),s=t.concat([s,e])}return this.transport.send(224,2,r?1:0,n?1:0,s).then((e=>{const t=e[0],r=e[1+t];return{publicKey:e.slice(1,1+t).toString("hex"),address:"0x"+e.slice(1+t+1,1+t+1+r).toString("ascii"),chainCode:n?e.slice(1+t+1+r,1+t+1+r+32).toString("hex"):undefined}}))}signTransaction(e,r,n){return i(this,void 0,void 0,(function*(){if(n===undefined&&(console.warn("hw-app-eth: signTransaction(path, rawTxHex, resolution): please provide the 'resolution' parameter. See https://github.com/LedgerHQ/ledgerjs/blob/master/packages/hw-app-eth/README.md â€“ the previous signature is deprecated and providing the 3rd 'resolution' parameter explicitly will become mandatory so you have the control on the resolution and the fallback mecanism (e.g. fallback to blind signing or not).// Possible solution:\n + import { ledgerService } from '@ledgerhq/hw-app-eth';\n + const resolution = await ledgerService.resolveTransaction(rawTxHex);"),n=yield d.default.resolveTransaction(r,this.loadConfig,{externalPlugins:!0,erc20:!0}).catch((e=>(console.warn("an error occurred in resolveTransaction => fallback to blind signing: "+String(e)),null)))),n){for(const e of n.domains)yield(0,u.domainResolutionFlow)(this,e).catch((t=>{(0,c.log)("error","domainResolutionFlow failed",{domainDescriptor:e,error:t})}));for(const e of n.plugin)yield this.setPlugin(e);for(const{payload:e,signature:t}of n.externalPlugin)yield this.setExternalPlugin(e,t);for(const e of n.nfts)yield this.provideNFTInformation(e);for(const e of n.erc20Tokens)yield this.provideERC20TokenInformation(e)}const o=t.from(r,"hex"),{vrsOffset:i,txType:s,chainId:a,chainIdTruncated:f}=(0,l.decodeTxInfo)(o),p=(0,l.splitPath)(e);let h,m=0;for(;m!==o.length;){const e=0===m,r=e?149-4*p.length:150;let n=m+r>o.length?o.length-m:r;0!=i&&m+n>=i&&(n=o.length-m);const s=t.alloc(e?1+4*p.length+n:n);e?(s[0]=p.length,p.forEach(((e,t)=>{s.writeUInt32BE(e,1+4*t)})),o.copy(s,1+4*p.length,m,m+n)):o.copy(s,0,m,m+n),h=yield this.transport.send(224,4,e?0:128,0,s).catch((e=>{throw g(e)})),m+=n}const b=h[0];let _="";if(a.times(2).plus(35).plus(1).isGreaterThan(255)){const e=(2*f+35)%256,t=Math.abs(b-e);_=null!=s?t%2==1?"00":"01":a.times(2).plus(35).plus(t).toString(16)}else _=b.toString(16);_.length%2==1&&(_="0"+_);return{v:_,r:h.slice(1,33).toString("hex"),s:h.slice(33,65).toString("hex")}}))}clearSignTransaction(e,t,r){return i(this,arguments,void 0,(function*(e,t,r,n=!1){const o=yield d.default.resolveTransaction(t,this.loadConfig,r).catch((e=>{if(console.warn("an error occurred in resolveTransaction => fallback to blind signing: "+String(e)),n)throw e;return null}));return this.signTransaction(e,t,o)}))}getAppConfiguration(){return this.transport.send(224,6,0,0).then((e=>({arbitraryDataEnabled:1&e[0],erc20ProvisioningNecessary:2&e[0],starkEnabled:4&e[0],starkv2Supported:8&e[0],version:e[1]+"."+e[2]+"."+e[3]})))}signPersonalMessage(e,r){return i(this,void 0,void 0,(function*(){const n=(0,l.splitPath)(e);let o=0;const i=t.from(r,"hex");let s;for(;o!==i.length;){const e=0===o?149-4*n.length-4:150,r=o+e>i.length?i.length-o:e,a=t.alloc(0===o?1+4*n.length+4+r:r);0===o?(a[0]=n.length,n.forEach(((e,t)=>{a.writeUInt32BE(e,1+4*t)})),a.writeUInt32BE(i.length,1+4*n.length),i.copy(a,1+4*n.length+4,o,o+r)):i.copy(a,0,o,o+r),s=yield this.transport.send(224,8,0===o?0:128,0,a),o+=r}return{v:s[0],r:s.slice(1,33).toString("hex"),s:s.slice(33,65).toString("hex")}}))}signEIP712HashedMessage(e,t,r){return(0,p.signEIP712HashedMessage)(this.transport,e,t,r)}signEIP712Message(e,t){return i(this,arguments,void 0,(function*(e,t,r=!1){return(0,p.signEIP712Message)(this.transport,e,t,r,this.loadConfig)}))}getChallenge(){return i(this,void 0,void 0,(function*(){let e;return function(e){e[e.CLA=224]="CLA",e[e.INS=32]="INS",e[e.P1=0]="P1",e[e.P2=0]="P2",e[e.LC=0]="LC"}(e||(e={})),this.transport.send(e.CLA,e.INS,e.P1,e.P2).then((e=>{const[,t,r]=new RegExp("(.*)(.{4}$)").exec(e.toString("hex"))||[];if("9000"!==r)throw new Error(`An error happened while generating the challenge. Status code: ${r}`);return`0x${t}`})).catch((e=>{throw(0,c.log)("error","couldn't request a challenge",e),e}))}))}starkGetPublicKey(e,r){const n=(0,l.splitPath)(e),o=t.alloc(1+4*n.length);return o[0]=n.length,n.forEach(((e,t)=>{o.writeUInt32BE(e,1+4*t)})),this.transport.send(240,2,r?1:0,0,o).then((e=>e.slice(0,e.length-2)))}starkSignOrder(e,r,n,o,i,s,a,c,u,d,f){const p=(0,l.maybeHexBuffer)(r),h=(0,l.maybeHexBuffer)(o),g=(0,l.splitPath)(e),m=t.alloc(1+4*g.length+20+32+20+32+4+4+8+8+4+4,0);let b=0;return m[0]=g.length,g.forEach(((e,t)=>{m.writeUInt32BE(e,1+4*t)})),b=1+4*g.length,p&&p.copy(m,b),b+=20,t.from(n.toString(16).padStart(64,"0"),"hex").copy(m,b),b+=32,h&&h.copy(m,b),b+=20,t.from(i.toString(16).padStart(64,"0"),"hex").copy(m,b),b+=32,m.writeUInt32BE(s,b),b+=4,m.writeUInt32BE(a,b),b+=4,t.from(c.toString(16).padStart(16,"0"),"hex").copy(m,b),b+=8,t.from(u.toString(16).padStart(16,"0"),"hex").copy(m,b),b+=8,m.writeUInt32BE(d,b),b+=4,m.writeUInt32BE(f,b),this.transport.send(240,4,1,0,m).then((e=>({r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")})))}starkSignOrder_v2(e,r,n,o,i,s,a,c,u,d,f,p,g,m,b){const _=(0,l.maybeHexBuffer)(r),y=(0,l.maybeHexBuffer)(s);if(!(n in h))throw new Error("eth.starkSignOrderv2 invalid source quantization type="+n);if(!(a in h))throw new Error("eth.starkSignOrderv2 invalid destination quantization type="+a);const E=(0,l.splitPath)(e),w=t.alloc(1+4*E.length+1+20+32+32+1+20+32+32+4+4+8+8+4+4,0);let v=0;return w[0]=E.length,E.forEach(((e,t)=>{w.writeUInt32BE(e,1+4*t)})),v=1+4*E.length,w[v]=h[n],v++,_&&_.copy(w,v),v+=20,o&&t.from(o.toString(16).padStart(64,"0"),"hex").copy(w,v),v+=32,i&&t.from(i.toString(16).padStart(64,"0"),"hex").copy(w,v),v+=32,w[v]=h[a],v++,y&&y.copy(w,v),v+=20,c&&t.from(c.toString(16).padStart(64,"0"),"hex").copy(w,v),v+=32,u&&t.from(u.toString(16).padStart(64,"0"),"hex").copy(w,v),v+=32,w.writeUInt32BE(d,v),v+=4,w.writeUInt32BE(f,v),v+=4,t.from(p.toString(16).padStart(16,"0"),"hex").copy(w,v),v+=8,t.from(g.toString(16).padStart(16,"0"),"hex").copy(w,v),v+=8,w.writeUInt32BE(m,v),v+=4,w.writeUInt32BE(b,v),this.transport.send(240,4,3,0,w).then((e=>({r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")})))}starkSignTransfer(e,r,n,o,i,s,a,c,u){const d=(0,l.maybeHexBuffer)(r),f=(0,l.hexBuffer)(o),p=(0,l.splitPath)(e),h=t.alloc(1+4*p.length+20+32+32+4+4+8+4+4,0);let g=0;return h[0]=p.length,p.forEach(((e,t)=>{h.writeUInt32BE(e,1+4*t)})),g=1+4*p.length,d&&d.copy(h,g),g+=20,t.from(n.toString(16).padStart(64,"0"),"hex").copy(h,g),g+=32,f.copy(h,g),g+=32,h.writeUInt32BE(i,g),g+=4,h.writeUInt32BE(s,g),g+=4,t.from(a.toString(16).padStart(16,"0"),"hex").copy(h,g),g+=8,h.writeUInt32BE(c,g),g+=4,h.writeUInt32BE(u,g),this.transport.send(240,4,2,0,h).then((e=>({r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")})))}starkSignTransfer_v2(e,r,n,o,i,s,a,c,u,d,f,p,g){const m=(0,l.maybeHexBuffer)(r),b=(0,l.hexBuffer)(s),_=(0,l.maybeHexBuffer)(p);if(!(n in h))throw new Error("eth.starkSignTransferv2 invalid quantization type="+n);const y=(0,l.splitPath)(e),E=t.alloc(1+4*y.length+1+20+32+32+32+4+4+8+4+4+(_?52:0),0);let w=0;return E[0]=y.length,y.forEach(((e,t)=>{E.writeUInt32BE(e,1+4*t)})),w=1+4*y.length,E[w]=h[n],w++,m&&m.copy(E,w),w+=20,o&&t.from(o.toString(16).padStart(64,"0"),"hex").copy(E,w),w+=32,i&&t.from(i.toString(16).padStart(64,"0"),"hex").copy(E,w),w+=32,b.copy(E,w),w+=32,E.writeUInt32BE(a,w),w+=4,E.writeUInt32BE(c,w),w+=4,t.from(u.toString(16).padStart(16,"0"),"hex").copy(E,w),w+=8,E.writeUInt32BE(d,w),w+=4,E.writeUInt32BE(f,w),_&&g&&(w+=4,t.from(g.toString(16).padStart(64,"0"),"hex").copy(E,w),w+=32,_.copy(E,w)),this.transport.send(240,4,_?5:4,0,E).then((e=>({r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")})))}starkProvideQuantum(e,r){const n=(0,l.maybeHexBuffer)(e),o=t.alloc(52,0);return n&&n.copy(o,0),t.from(r.toString(16).padStart(64,"0"),"hex").copy(o,20),this.transport.send(240,8,0,0,o).then((()=>!0),(e=>{if(e&&27904===e.statusCode)return!1;throw e}))}starkProvideQuantum_v2(e,r,n,o){const i=(0,l.maybeHexBuffer)(e);if(!(r in h))throw new Error("eth.starkProvideQuantumV2 invalid quantization type="+r);const s=t.alloc(84,0);let a=0;return i&&i.copy(s,a),a+=20,n&&t.from(n.toString(16).padStart(64,"0"),"hex").copy(s,a),a+=32,o&&t.from(o.toString(16).padStart(64,"0"),"hex").copy(s,a),this.transport.send(240,8,h[r],0,s).then((()=>!0),(e=>{if(e&&27904===e.statusCode)return!1;throw e}))}starkUnsafeSign(e,r){const n=(0,l.hexBuffer)(r),o=(0,l.splitPath)(e),i=t.alloc(1+4*o.length+32);let s=0;return i[0]=o.length,o.forEach(((e,t)=>{i.writeUInt32BE(e,1+4*t)})),s=1+4*o.length,n.copy(i,s),this.transport.send(240,10,0,0,i).then((e=>({r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")})))}eth2GetPublicKey(e,r){const n=(0,l.splitPath)(e),o=t.alloc(1+4*n.length);return o[0]=n.length,n.forEach(((e,t)=>{o.writeUInt32BE(e,1+4*t)})),this.transport.send(224,14,r?1:0,0,o).then((e=>({publicKey:e.slice(0,-2).toString("hex")})))}eth2SetWithdrawalIndex(e){const r=t.alloc(4,0);return r.writeUInt32BE(e,0),this.transport.send(224,16,0,0,r).then((()=>!0),(e=>{if(e&&27904===e.statusCode)return!1;throw e}))}getEIP1024PublicEncryptionKey(e,r){const n=(0,l.splitPath)(e),o=t.alloc(1+4*n.length);return o[0]=n.length,n.forEach(((e,t)=>{o.writeUInt32BE(e,1+4*t)})),this.transport.send(224,24,r?1:0,0,o).then((e=>({publicKey:e.slice(0,-2).toString("hex")})))}getEIP1024SharedSecret(e,r,n){const o=(0,l.splitPath)(e),i=(0,l.hexBuffer)(r),s=t.alloc(1+4*o.length+32);let a=0;return s[0]=o.length,o.forEach(((e,t)=>{s.writeUInt32BE(e,1+4*t)})),a=1+4*o.length,i.copy(s,a),this.transport.send(224,24,n?1:0,1,s).then((e=>({sharedSecret:e.slice(0,-2).toString("hex")})))}provideERC20TokenInformation(e){const r=t.from(e,"hex");return this.transport.send(224,10,0,0,r).then((()=>!0),(e=>{if(e&&27904===e.statusCode)return!1;throw e}))}setExternalPlugin(e,r){const n=t.from(e,"hex"),o=t.from(null!=r?r:"","hex"),i=t.concat([n,o]);return this.transport.send(224,18,0,0,i).then((()=>!0),(e=>{if(e&&27264===e.statusCode)return!1;if(e&&27012===e.statusCode)return!1;if(e&&27904===e.statusCode)return!1;throw e}))}setPlugin(e){const r=t.from(e,"hex");return this.transport.send(224,22,0,0,r).then((()=>!0),(e=>{if(e&&27264===e.statusCode)return!1;if(e&&27012===e.statusCode)return!1;if(e&&27904===e.statusCode)return!1;throw e}))}provideNFTInformation(e){const r=t.from(e,"hex");return this.transport.send(224,20,0,0,r).then((()=>!0),(e=>{if(e&&27904===e.statusCode)throw new f.EthAppNftNotSupported;throw e}))}provideDomainName(e){return i(this,void 0,void 0,(function*(){let r;!function(e){e[e.CLA=224]="CLA",e[e.INS=34]="INS",e[e.P1_FIRST_CHUNK=1]="P1_FIRST_CHUNK",e[e.P1_FOLLOWING_CHUNK=0]="P1_FOLLOWING_CHUNK",e[e.P2=0]="P2"}(r||(r={}));const n=t.from(e,"hex"),o=t.concat([t.from((0,l.intAsHexBytes)(n.length,2),"hex"),n]),i=new Array(Math.ceil(o.length/256)).fill(null).map(((e,t)=>o.slice(255*t,255*(t+1))));for(const e of i){const t=e===i[0];yield this.transport.send(r.CLA,r.INS,t?r.P1_FIRST_CHUNK:r.P1_FOLLOWING_CHUNK,r.P2,e)}return!0}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/Eth.js"}],[829,{"@ledgerhq/errors":781},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EthAppNftNotSupported=r.EthAppPleaseEnableContractData=void 0;const n=e("@ledgerhq/errors");r.EthAppPleaseEnableContractData=(0,n.createCustomErrorClass)("EthAppPleaseEnableContractData"),r.EthAppNftNotSupported=(0,n.createCustomErrorClass)("EthAppNftNotSupported")}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/errors.js"}],[830,{"../../services/ledger":835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.domainResolutionFlow=void 0;const i=o(e("../../services/ledger"));r.domainResolutionFlow=(e,t)=>n(void 0,void 0,void 0,(function*(){if(!t)return;const{domain:r,address:n,registry:o,type:s}=t,a=yield e.getChallenge(),c="forward"===s?yield i.default.signDomainResolution(r,o,a):yield i.default.signAddressResolution(n,o,a);c&&(yield e.provideDomainName(c))}))}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/modules/Domains/index.js"}],[831,{"../../services/ledger/erc20":834,"../../services/ledger/loadConfig":836,"../../utils":838,"./utils":832,"@ledgerhq/evm-tools/lib/message/EIP712/index":782,buffer:3561,semver:5064},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.signEIP712HashedMessage=r.signEIP712Message=void 0;const i=o(e("semver")),s=e("@ledgerhq/evm-tools/lib/message/EIP712/index"),a=e("../../services/ledger/erc20"),c=e("../../utils"),l=e("../../services/ledger/loadConfig"),u=e("./utils"),d=(e,r)=>{let n;!function(e){e[e.CLA=224]="CLA",e[e.INS=26]="INS",e[e.P1_complete=0]="P1_complete",e[e.P1_partial=1]="P1_partial",e[e.P2_name=0]="P2_name",e[e.P2_field=255]="P2_field"}(n||(n={}));const{structType:o,value:i}=r,s="name"===o&&"string"==typeof i?t.from(i,"utf-8"):i;return e.send(n.CLA,n.INS,n.P1_complete,"name"===o?n.P2_name:n.P2_field,s)},f=(e,r)=>n(void 0,void 0,void 0,(function*(){var n;let o;!function(e){e[e.CLA=224]="CLA",e[e.INS=28]="INS",e[e.P1_complete=0]="P1_complete",e[e.P1_partial=1]="P1_partial",e[e.P2_root=0]="P2_root",e[e.P2_array=15]="P2_array",e[e.P2_field=255]="P2_field"}(o||(o={}));const{structType:i,value:s}=r;if("root"===i)return e.send(o.CLA,o.INS,o.P1_complete,o.P2_root,t.from(s,"utf-8"));if("array"===i)return e.send(o.CLA,o.INS,o.P1_complete,o.P2_array,t.from((0,c.intAsHexBytes)(s,1),"hex"));if("field"===i){const{data:r,type:i,sizeInBits:a}=s,l=null===(n=u.EIP712_TYPE_ENCODERS[i.toUpperCase()])||void 0===n?void 0:n.call(u.EIP712_TYPE_ENCODERS,r,a);if(l){const r=Math.floor(l.length/256),n=l.length%256,i=t.concat([t.from((0,c.intAsHexBytes)(r,1),"hex"),t.from((0,c.intAsHexBytes)(n,1),"hex"),l]),s=new Array(Math.ceil(i.length/256)).fill(null).map(((e,t)=>i.subarray(255*t,255*(t+1))));for(const t of s)yield e.send(o.CLA,o.INS,t!==s[s.length-1]?o.P1_partial:o.P1_complete,o.P2_field,t)}}return Promise.resolve()}));function p(e,r,o,i){return n(this,void 0,void 0,(function*(){let n;switch(function(e){e[e.CLA=224]="CLA",e[e.INS=30]="INS",e[e.P1_standard=0]="P1_standard",e[e.P1_discarded=1]="P1_discarded",e[e.P2_activate=0]="P2_activate",e[e.P2_discarded=1]="P2_discarded",e[e.P2_show_field=255]="P2_show_field",e[e.P2_message_info=15]="P2_message_info",e[e.P2_datetime=252]="P2_datetime",e[e.P2_amount_join_token=253]="P2_amount_join_token",e[e.P2_amount_join_value=254]="P2_amount_join_value",e[e.P2_raw=255]="P2_raw"}(n||(n={})),r){case"activate":return e.send(n.CLA,n.INS,n.P1_discarded,n.P2_activate);case"contractName":{const{displayName:r,filtersCount:o,sig:s}=i,{displayNameBuffer:a,sigBuffer:l}=(0,u.getFilterDisplayNameAndSigBuffers)(r,s),d=t.from((0,c.intAsHexBytes)(o,1),"hex"),f=t.concat([a,d,l]);return e.send(n.CLA,n.INS,n.P1_standard,n.P2_message_info,f)}case"showField":{const{displayName:r,sig:o,format:s,coinRef:c,chainId:l,coinRefsTokensMap:d,shouldUseV1Filters:f,erc20SignaturesBlob:p,isDiscarded:h}=i,{displayNameBuffer:g,sigBuffer:m}=(0,u.getFilterDisplayNameAndSigBuffers)(r,o);if(f){const r=t.concat([g,m]);return e.send(n.CLA,n.INS,n.P1_standard,n.P2_show_field,r)}if("token"===s&&c!==undefined){const{token:t,deviceTokenIndex:r}=d[c];if(r===undefined){const r=yield(0,a.byContractAddressAndChainId)(t,l,p);if(r){let t;!function(e){e[e.CLA=224]="CLA",e[e.INS=10]="INS",e[e.P1=0]="P1",e[e.P2=0]="P2"}(t||(t={}));const n=yield e.send(t.CLA,t.INS,t.P1,t.P2,r.data);d[c].deviceTokenIndex=n[0]}}}if("amount"===s&&255===c){const{token:t}=d[255],r=yield(0,a.byContractAddressAndChainId)(t,l,p);r&&(yield e.send(224,10,0,0,r.data),d[255].deviceTokenIndex=255)}if(!s)throw new Error("Missing format");const b={raw:n.P2_raw,datetime:n.P2_datetime,token:n.P2_amount_join_token,amount:n.P2_amount_join_value},_=(0,u.getPayloadForFilterV2)(s,c,d,g,m);return e.send(n.CLA,n.INS,h?n.P1_discarded:n.P1_standard,b[s],_)}case"discardField":{const{path:r}=i,o=t.from(r),s=t.from((0,c.intAsHexBytes)(o.length,1),"hex"),a=t.concat([s,o]);return e.send(n.CLA,n.INS,n.P1_standard,n.P2_discarded,a)}}}))}r.signEIP712Message=(e,r,o,...h)=>n(void 0,[e,r,o,...h],void 0,(function*(e,r,o,h=!1,g){let m;!function(e){e[e.CLA=224]="CLA",e[e.INS=12]="INS",e[e.P1=0]="P1",e[e.P2_v0=0]="P2_v0",e[e.P2_full=1]="P2_full"}(m||(m={}));const{primaryType:b,types:_,domain:y,message:E}=o,{calServiceURL:w}=(0,l.getLoadConfig)(g),v=(0,s.sortObjectAlphabetically)(_),{version:P}=yield(0,u.getAppAndVersion)(e),T=!i.default.gte(P,"1.11.1-0",{includePrerelease:!0}),O=i.default.gte(P,"1.12.0-0",{includePrerelease:!0}),A=yield(0,s.getFiltersForMessage)(o,T,w),S=(0,u.getCoinRefTokensMap)(A,T,o),I=Object.entries(v);for(const[t,r]of I){yield d(e,{structType:"name",value:t});for(const{name:t,type:n}of r){const r=(0,u.makeTypeEntryStructBuffer)({name:t,type:n});yield d(e,{structType:"field",value:r})}}A&&(yield p(e,"activate"));const C=T?undefined:yield(0,a.findERC20SignaturesInfo)(g,y.chainId||0),N=(({transport:e,loadConfig:t,chainId:r,erc20SignaturesBlob:o,types:i,filters:s,shouldUseV1Filters:a,shouldUseDiscardedFields:c,coinRefsTokensMap:l})=>{var d;const h={};for(const e in i)h[e]=null===(d=i[e])||void 0===d?void 0:d.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.type})),{});const g=(t,i,...d)=>n(void 0,[t,i,...d],void 0,(function*(t,n,i=""){var d,m;const[b,_]=t,[y,...E]=_,w=!u.EIP712_TYPE_PROPERTIES[(null===(d=null==b?void 0:b.name)||void 0===d?void 0:d.toUpperCase())||""];if(Array.isArray(n)&&void 0!==y){yield f(e,{structType:"array",value:n.length});const t=`${i}.[]`;if(!n.length){const n=null==s?void 0:s.fields.filter((e=>e.path.startsWith(t)));if(n&&c)for(const t of n)yield p(e,"discardField",0,{path:t.path}),yield p(e,"showField",0,{displayName:t.label,sig:t.signature,format:t.format,coinRef:t.coin_ref,chainId:r,erc20SignaturesBlob:o,shouldUseV1Filters:a,coinRefsTokensMap:l,isDiscarded:!0})}for(const e of n)yield g([b,E],e,t)}else if(w)for(const[e,t]of Object.entries(n)){const r=null===(m=h[(null==b?void 0:b.name)||""])||void 0===m?void 0:m[e];r&&(yield g((0,u.destructTypeFromString)(r),t,`${i}.${e}`))}else{const t=null==s?void 0:s.fields.find((e=>i===e.path));t&&(yield p(e,"showField",0,{displayName:t.label,sig:t.signature,format:t.format,coinRef:t.coin_ref,chainId:r,erc20SignaturesBlob:o,shouldUseV1Filters:a,coinRefsTokensMap:l,isDiscarded:!1})),yield f(e,{structType:"field",value:{data:n,type:(null==b?void 0:b.name)||"",sizeInBits:null==b?void 0:b.size}})}}));return g})({transport:e,loadConfig:g,chainId:y.chainId||0,erc20SignaturesBlob:C,types:v,filters:A,shouldUseV1Filters:T,shouldUseDiscardedFields:O,coinRefsTokensMap:S}),x="EIP712Domain";yield f(e,{structType:"root",value:x});const R=v[x];for(const{name:e,type:t}of R){const r=y[e];yield N((0,u.destructTypeFromString)(t),r)}if(A){const{contractName:t,fields:r}=A,n={displayName:t.label,filtersCount:r.length,sig:t.signature};yield p(e,"contractName",0,n)}yield f(e,{structType:"root",value:b});const k=v[b];for(const{name:e,type:t}of k){const r=E[e];yield N((0,u.destructTypeFromString)(t),r,e)}const j=(0,c.splitPath)(r),L=t.alloc(1+4*j.length);return L[0]=j.length,j.forEach(((e,t)=>{L.writeUInt32BE(e,1+4*t)})),e.send(m.CLA,m.INS,m.P1,h?m.P2_v0:m.P2_full,L).then((e=>({v:e[0],r:e.subarray(1,33).toString("hex"),s:e.subarray(33,65).toString("hex")})))}));r.signEIP712HashedMessage=(e,r,n,o)=>{const i=(0,c.hexBuffer)(n),s=(0,c.hexBuffer)(o),a=(0,c.splitPath)(r),l=t.alloc(1+4*a.length+32+32,0);let u=0;return l[0]=a.length,a.forEach(((e,t)=>{l.writeUInt32BE(e,1+4*t)})),u=1+4*a.length,i.copy(l,u),u+=32,s.copy(l,u),e.send(224,12,0,0,l).then((e=>({v:e[0],r:e.subarray(1,33).toString("hex"),s:e.subarray(33,65).toString("hex")})))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/modules/EIP712/index.js"}],[832,{"../../utils":838,"@ledgerhq/evm-tools/lib/message/index":783,"bignumber.js":878,buffer:3561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getPayloadForFilterV2=r.getFilterDisplayNameAndSigBuffers=r.getAppAndVersion=r.getCoinRefTokensMap=r.makeTypeEntryStructBuffer=r.constructTypeDescByteString=r.destructTypeFromString=r.EIP712_TYPE_ENCODERS=r.EIP712_TYPE_PROPERTIES=void 0;const i=o(e("bignumber.js")),s=e("@ledgerhq/evm-tools/lib/message/index"),a=e("../../utils");var c;!function(e){e[e.DYNAMIC=0]="DYNAMIC",e[e.FIXED=1]="FIXED"}(c||(c={})),r.EIP712_TYPE_PROPERTIES={CUSTOM:{key:()=>0,size:()=>null},INT:{key:()=>1,size:e=>Number(e)/8},UINT:{key:()=>2,size:e=>Number(e)/8},ADDRESS:{key:()=>3,size:()=>null},BOOL:{key:()=>4,size:()=>null},STRING:{key:()=>5,size:()=>null},BYTES:{key:e=>void 0!==e?6:7,size:e=>void 0!==e?Number(e):null}},r.EIP712_TYPE_ENCODERS={INT(e,r=256){const n=null!=e?e:"0";if("string"==typeof n&&(null==n?void 0:n.startsWith("0x")))return(0,a.hexBuffer)(n);let o=new i.default(n);if(o.lt(0)){const e=r/8;o=new i.default(`0x${t.alloc(e,255).toString("hex")}`).plus(o).plus(1)}const s=o.toString(16).length%2?"0"+o.toString(16):o.toString(16);return t.from(s,"hex")},UINT(e){return this.INT(e)},BOOL(e){return this.INT("boolean"==typeof e?Number(e).toString():e)},ADDRESS:e=>(0,a.hexBuffer)(null!=e?e:"").slice(0,20),STRING:e=>t.from(null!=e?e:"","utf-8"),BYTES(e,t){const r=null!=e?e:"";return(0,a.hexBuffer)(r).slice(0,null!=t?t:((null==r?void 0:r.length)-2)/2)}};r.destructTypeFromString=e=>{const t=new RegExp(/^([^[\]]*)(\[.*\])*/g),r=new RegExp(/\[(\d*)\]/g),n=new RegExp(/(?=u?int|bytes)([a-zA-Z-0-9]+?)(\d{1,3})$/g),[,o,i]=t.exec(e||"")||[],[,s=o,a]=n.exec(o||"")||[];return[s?{name:s,size:a?Number(a):undefined}:null,(i?[...i.matchAll(r)]:[]).map((([,e])=>e?Number(e):null))]};r.constructTypeDescByteString=(e,t,r)=>{if(r>=16)throw new Error("Eth utils - constructTypeDescByteString - Cannot accept a typeValue >= 16 because the typeValue can only be 4 bits in binary"+{isArray:e,typeSize:t,typeValue:r});const n=e?"1":"0",o="number"==typeof t?"1":"0",i=r.toString(2).padStart(4,"0");return(0,a.intAsHexBytes)(parseInt(n+o+"00"+i,2),1)};r.makeTypeEntryStructBuffer=({name:e,type:n})=>{var o,i,s,l;const[u,d]=(0,r.destructTypeFromString)(n),f=Boolean(d.length),p=r.EIP712_TYPE_PROPERTIES[(null===(o=null==u?void 0:u.name)||void 0===o?void 0:o.toUpperCase())||""]||r.EIP712_TYPE_PROPERTIES.CUSTOM,h=p.key(null==u?void 0:u.size),g=p.size(null==u?void 0:u.size),m=(0,r.constructTypeDescByteString)(f,g,h),b=[t.from(m,"hex")];return p===r.EIP712_TYPE_PROPERTIES.CUSTOM&&(b.push(t.from((0,a.intAsHexBytes)(null!==(s=null===(i=null==u?void 0:u.name)||void 0===i?void 0:i.length)&&void 0!==s?s:0,1),"hex")),b.push(t.from(null!==(l=null==u?void 0:u.name)&&void 0!==l?l:"","utf-8"))),"number"==typeof g&&b.push(t.from((0,a.intAsHexBytes)(g,1),"hex")),f&&(b.push(t.from((0,a.intAsHexBytes)(d.length,1),"hex")),d.forEach((e=>{"number"==typeof e?b.push(t.from((0,a.intAsHexBytes)(c.FIXED,1),"hex"),t.from((0,a.intAsHexBytes)(e,1),"hex")):b.push(t.from((0,a.intAsHexBytes)(c.DYNAMIC,1),"hex"))}))),b.push(t.from((0,a.intAsHexBytes)(e.length,1),"hex"),t.from(e,"utf-8")),t.concat(b)};r.getCoinRefTokensMap=(e,t,r)=>{const n={};if(t||!e)return n;const o=e.fields.filter((({format:e})=>"token"===e)).sort(((e,t)=>(e.coin_ref||0)-(t.coin_ref||0))).reduce(((e,t)=>{const n=(0,s.getValueFromPath)(t.path,r);if(Array.isArray(n))throw new Error("Array of tokens is not supported with a single coin ref");return[...e,{token:n,coinRef:t.coin_ref}]}),[]);for(const{token:e,coinRef:t}of o)n[t]={token:e};return e.fields.some((e=>"amount"===e.format&&255===e.coin_ref))&&r.domain.verifyingContract&&(n[255]={token:r.domain.verifyingContract}),n};r.getAppAndVersion=e=>n(void 0,void 0,void 0,(function*(){const t=yield e.send(176,1,0,0);let r=1;const n=t[r];r+=1;const o=t.subarray(r,r+n).toString("ascii");r+=n;const i=t[r];r+=1;return{name:o,version:t.subarray(r,r+i).toString("ascii")}}));r.getFilterDisplayNameAndSigBuffers=(e,r)=>{const n=t.from(e),o=t.from((0,a.intAsHexBytes)(n.length,1),"hex"),i=t.from(r,"hex"),s=t.from((0,a.intAsHexBytes)(i.length,1),"hex");return{displayNameBuffer:t.concat([o,n]),sigBuffer:t.concat([s,i])}};r.getPayloadForFilterV2=(e,r,n,o,i)=>{switch(e){case"raw":case"datetime":return t.concat([o,i]);case"token":{const{deviceTokenIndex:e}=n[r];return t.concat([t.from((0,a.intAsHexBytes)(e||r||0,1),"hex"),i])}case"amount":{const{deviceTokenIndex:e}=n[r];return t.concat([o,t.from((0,a.intAsHexBytes)(e||r||0,1),"hex"),i])}default:throw new Error("Invalid format")}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/modules/EIP712/utils.js"}],[833,{"./loadConfig":836,"@ledgerhq/logs":881,axios:839},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.loadInfosForContractMethod=void 0;const i=o(e("axios")),s=e("./loadConfig"),a=e("@ledgerhq/logs");r.loadInfosForContractMethod=(e,t,r,o)=>n(void 0,void 0,void 0,(function*(){const{pluginBaseURL:r,extraPlugins:n}=(0,s.getLoadConfig)(o);let c={};if(r){const e=`${r}/plugins/ethereum.json`;c=yield i.default.get(`${r}/plugins/ethereum.json`).then((e=>e.data)).catch((t=>((0,a.log)("error","could not fetch from "+e+": "+String(t)),null)))}if(n&&(c=Object.assign(Object.assign({},c),n)),!c)return;const l=t.toLowerCase(),u=e.toLowerCase();if(u in c){const e=c[u];if(l in e)return{payload:e[l].serialized_data,signature:e[l].signature,plugin:e[l].plugin,erc20OfInterest:e[l].erc20OfInterest,abi:e.abi}}}))}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/services/ledger/contracts.js"}],[834,{"./loadConfig":836,"@ledgerhq/cryptoassets-evm-signatures/lib/data/evm/index":737,"@ledgerhq/logs":881,axios:839,buffer:3561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.byContractAddressAndChainId=r.findERC20SignaturesInfo=void 0;const i=o(e("axios")),s=e("@ledgerhq/logs"),a=e("@ledgerhq/cryptoassets-evm-signatures/lib/data/evm/index"),c=e("./loadConfig"),l=e=>{const t=e.toLowerCase();return t.startsWith("0x")?t:"0x"+t};r.findERC20SignaturesInfo=(e,t)=>n(void 0,void 0,void 0,(function*(){const{cryptoassetsBaseURL:r}=(0,c.getLoadConfig)(e);if(!r)return null;const n=`${r}/evm/${t}/erc20-signatures.json`;return yield i.default.get(n).then((({data:e})=>{if(!e||"string"!=typeof e)throw new Error(`ERC20 signatures for chainId ${t} file is malformed ${n}`);return e})).catch((e=>((0,s.log)("error","could not fetch from "+n+": "+String(e)),null)))}));r.byContractAddressAndChainId=(e,t,r)=>{var n,o;if(r)try{return u(r).byContractAndChainId(l(e),t)}catch(r){return null===(n=d(t))||void 0===n?void 0:n.byContractAndChainId(l(e),t)}return null===(o=d(t))||void 0===o?void 0:o.byContractAndChainId(l(e),t)};const u=e=>{const r=t.from(e,"base64"),n={},o=[];let i=0;for(;i<r.length;){const e=r.readUInt32BE(i);i+=4;const t=r.slice(i,i+e);let s=0;const a=t.readUInt8(s);s+=1;const c=t.slice(s,s+a).toString("ascii");s+=a;const u=l(t.slice(s,s+20).toString("hex"));s+=20;const d=t.readUInt32BE(s);s+=4;const f=t.readUInt32BE(s);s+=4;const p={ticker:c,contractAddress:u,decimals:d,chainId:f,signature:t.slice(s),data:t};o.push(p),n[String(f)+":"+u]=p,i+=e}return{list:()=>o,byContractAndChainId:(e,t)=>n[String(t)+":"+e]}},d=(()=>{const e={};return t=>{if(e[t])return e[t];const r=a.signatures[t];if(!r)return null;const n=u(r);return e[t]=n,n}})()}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/services/ledger/erc20.js"}],[835,{"../../utils":838,"./contracts":833,"./erc20":834,"./nfts":837,"@ethersproject/abi":500,"@ledgerhq/domain-service/lib/signers/index":739,"@ledgerhq/logs":881,buffer:3561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=e("@ledgerhq/logs"),i=e("@ethersproject/abi"),s=e("@ledgerhq/domain-service/lib/signers/index"),a=e("./erc20"),c=e("./contracts"),l=e("./nfts"),u=e("../../utils"),d=(e,t,r,i)=>n(void 0,void 0,void 0,(function*(){const n={nfts:[],erc20Tokens:[]};if(i.nft){const i=yield(0,l.getNFTInfo)(e,t,r);i?((0,o.log)("ethereum","loaded nft info for "+i.contractAddress+" ("+i.collectionName+")"),n.nfts.push(i.data)):(0,o.log)("ethereum","couldn't load nft info for "+e)}if(i.token){const i=yield(0,a.findERC20SignaturesInfo)(r,t),s=(0,a.byContractAddressAndChainId)(e,t,i);s?((0,o.log)("ethereum","loaded erc20token info for "+s.contractAddress+" ("+s.ticker+")"),n.erc20Tokens.push(s.data.toString("hex"))):(0,o.log)("ethereum","couldn't load erc20token info for "+e)}return n}));r.default={resolveTransaction:(e,r,s)=>n(void 0,void 0,void 0,(function*(){const a=t.from(e,"hex"),{decodedTx:f,chainIdTruncated:p}=(0,u.decodeTxInfo)(a),{domains:h}=s,g=f.to,m=f.data.length>=10&&f.data.substring(0,10),b=[];if(m){const e={token:s.erc20&&u.tokenSelectors.includes(m),nft:s.nft&&u.nftSelectors.includes(m),externalPlugins:s.externalPlugins},t=yield((e,t,r,s,a,f)=>n(void 0,void 0,void 0,(function*(){let n={externalPlugin:[],plugin:[],nfts:[],erc20Tokens:[],domains:[]};if(f.nft){const r=yield(0,l.loadNftPlugin)(e,t,s,a);r?n.plugin.push(r):(0,o.log)("ethereum","no NFT plugin payload for selector "+t+" and address "+e)}if(f.externalPlugins){const l=yield(0,c.loadInfosForContractMethod)(e,t,s,a);if(l){const{plugin:e,payload:c,signature:f,erc20OfInterest:p,abi:h}=l;if(e&&((0,o.log)("ethereum",`found plugin (${e}) for selector: ${t}`),n.externalPlugin.push({payload:c,signature:f})),p&&p.length&&h){const e=new i.Interface(h).parseTransaction(r).args;for(const t of p){const r=t.split(".").reduce(((e,t)=>"-1"===t&&Array.isArray(e)?e[e.length-1]:e[t]),e),o=yield d(r,s,a,{nft:!1,externalPlugins:!1,token:!0});n=(0,u.mergeResolutions)([n,o])}}}else(0,o.log)("ethereum","no infos for selector "+t)}return n})))(g,m,f,p,r,e);t&&b.push(t);const a=yield d(g,p,r,e);a&&b.push(a)}if(h){const e={domains:h};b.push(e)}return(0,u.mergeResolutions)(b)})),signDomainResolution:s.signDomainResolution,signAddressResolution:s.signAddressResolution}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/services/ledger/index.js"}],[836,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getLoadConfig=void 0;const n={nftExplorerBaseURL:"https://nft.api.live.ledger.com/v1/ethereum",pluginBaseURL:"https://cdn.live.ledger.com",extraPlugins:null,cryptoassetsBaseURL:"https://cdn.live.ledger.com/cryptoassets",calServiceURL:"https://crypto-assets-service.api.ledger.com"};r.getLoadConfig=function(e){return Object.assign(Object.assign({},n),e)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/services/ledger/loadConfig.js"}],[837,{"./loadConfig":836,"@ledgerhq/logs":881,axios:839},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.loadNftPlugin=r.getNFTInfo=void 0;const i=o(e("axios")),s=e("./loadConfig"),a=e("@ledgerhq/logs");r.getNFTInfo=(e,t,r)=>n(void 0,void 0,void 0,(function*(){var n;const{nftExplorerBaseURL:o}=(0,s.getLoadConfig)(r);if(!o)return;const c=`${o}/${t}/contracts/${e}`,l=yield i.default.get(c).then((e=>e.data)).catch((e=>((0,a.log)("error","could not fetch from "+c+": "+String(e)),null)));if(!l)return;const u=l.payload,d=parseInt(u.slice(4,6),16),f=null===(n=u.substr(6,2*d).match(/.{2}/g))||void 0===n?void 0:n.reduce(((e,t)=>e+String.fromCharCode(parseInt(t,16))),"");return{contractAddress:e,collectionName:f||"",data:u}}));r.loadNftPlugin=(e,t,r,o)=>n(void 0,void 0,void 0,(function*(){const{nftExplorerBaseURL:n}=(0,s.getLoadConfig)(o);if(!n)return;const c=`${n}/${r}/contracts/${e}/plugin-selector/${t}`,l=yield i.default.get(c).then((e=>e.data)).catch((e=>((0,a.log)("error","could not fetch from "+c+": "+String(e)),null)));if(!l)return;return l.payload}))}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/services/ledger/nfts.js"}],[838,{"@ethersproject/rlp":576,"@ledgerhq/evm-tools/lib/selectors/index":784,"bignumber.js":878,buffer:3561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.mergeResolutions=r.nftSelectors=r.tokenSelectors=r.intAsHexBytes=r.decodeTxInfo=r.maybeHexBuffer=r.hexBuffer=r.splitPath=r.padHexString=r.ERC1155_CLEAR_SIGNED_SELECTORS=r.ERC721_CLEAR_SIGNED_SELECTORS=r.ERC20_CLEAR_SIGNED_SELECTORS=void 0;const n=e("bignumber.js"),o=e("@ledgerhq/evm-tools/lib/selectors/index");Object.defineProperty(r,"ERC20_CLEAR_SIGNED_SELECTORS",{enumerable:!0,get:function(){return o.ERC20_CLEAR_SIGNED_SELECTORS}}),Object.defineProperty(r,"ERC721_CLEAR_SIGNED_SELECTORS",{enumerable:!0,get:function(){return o.ERC721_CLEAR_SIGNED_SELECTORS}}),Object.defineProperty(r,"ERC1155_CLEAR_SIGNED_SELECTORS",{enumerable:!0,get:function(){return o.ERC1155_CLEAR_SIGNED_SELECTORS}});const i=e("@ethersproject/rlp");function s(e){const n=e.startsWith("0x")?e.slice(2):e;return t.from((0,r.padHexString)(n),"hex")}r.padHexString=e=>e.length%2?"0"+e:e,r.splitPath=function(e){const t=[];return e.split("/").forEach((e=>{let r=parseInt(e,10);isNaN(r)||(e.length>1&&"'"===e[e.length-1]&&(r+=2147483648),t.push(r))})),t},r.hexBuffer=s,r.maybeHexBuffer=function(e){return e?s(e):null};r.decodeTxInfo=e=>{const r=[1,2].includes(e[0])?e[0]:null,o=null===r?e:e.slice(1),s=(0,i.decode)(o).map((e=>t.from(e.slice(2),"hex")));let a=0;const c=(0,i.decode)(o);let l;l=2===r?{data:c[7],to:c[5],chainId:s[0]}:1===r?{data:c[6],to:c[4],chainId:s[0]}:{data:c[5],to:c[3],chainId:s.length>6?s[6]:t.from("0x01","hex")};const u=l.chainId;let d=new n.BigNumber(0);if(u){d=new n.BigNumber(u.toString("hex"),16);const e=t.alloc(4);u.length>4?u.copy(e):u.copy(e,4-u.length),a=e.readUInt32BE(0)}let f=0;if(null===r&&s.length>6){const r=t.from((0,i.encode)(s.slice(-3)).slice(2),"hex");if(f=e.length-(r.length-1),r[0]>247){f++;f+=r[0]-247-1}}return{decodedTx:l,txType:r,chainId:d,chainIdTruncated:a,vrsOffset:f}};r.intAsHexBytes=(e,t)=>e.toString(16).padStart(2*t,"0"),r.tokenSelectors=Object.values(o.ERC20_CLEAR_SIGNED_SELECTORS),r.nftSelectors=[...Object.values(o.ERC721_CLEAR_SIGNED_SELECTORS),...Object.values(o.ERC1155_CLEAR_SIGNED_SELECTORS)];r.mergeResolutions=e=>{const t={nfts:[],erc20Tokens:[],externalPlugin:[],plugin:[],domains:[]};for(const r of e)for(const e in r)t[e].push(...r[e]);return t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/utils.js"}],[839,{"./lib/axios":841},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./lib/axios")}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/index.js"}],[840,{"../cancel/CanceledError":843,"../core/AxiosError":846,"../core/buildFullPath":848,"../defaults/transitional":854,"../helpers/parseProtocol":868,"../platform":876,"./../core/settle":851,"./../helpers/buildURL":859,"./../helpers/cookies":861,"./../helpers/isURLSameOrigin":865,"./../helpers/parseHeaders":867,"./../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./../utils"),o=e("./../core/settle"),i=e("./../helpers/cookies"),s=e("./../helpers/buildURL"),a=e("../core/buildFullPath"),c=e("./../helpers/parseHeaders"),l=e("./../helpers/isURLSameOrigin"),u=e("../defaults/transitional"),d=e("../core/AxiosError"),f=e("../cancel/CanceledError"),p=e("../helpers/parseProtocol"),h=e("../platform");t.exports=function(e){return new Promise((function(t,r){var g,m=e.data,b=e.headers,_=e.responseType,y=e.withXSRFToken;function E(){e.cancelToken&&e.cancelToken.unsubscribe(g),e.signal&&e.signal.removeEventListener("abort",g)}n.isFormData(m)&&n.isStandardBrowserEnv()&&delete b["Content-Type"];var w=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",P=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";b.Authorization="Basic "+btoa(v+":"+P)}var T=a(e.baseURL,e.url);function O(){if(w){var n="getAllResponseHeaders"in w?c(w.getAllResponseHeaders()):null,i={data:_&&"text"!==_&&"json"!==_?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:n,config:e,request:w};o((function(e){t(e),E()}),(function(e){r(e),E()}),i),w=null}}if(w.open(e.method.toUpperCase(),s(T,e.params,e.paramsSerializer),!0),w.timeout=e.timeout,"onloadend"in w?w.onloadend=O:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(O)},w.onabort=function(){w&&(r(new d("Request aborted",d.ECONNABORTED,e,w)),w=null)},w.onerror=function(){r(new d("Network Error",d.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||u;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new d(t,n.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,w)),w=null},n.isStandardBrowserEnv()&&(y&&n.isFunction(y)&&(y=y(e)),y||!1!==y&&l(T))){var A=e.xsrfHeaderName&&e.xsrfCookieName&&i.read(e.xsrfCookieName);A&&(b[e.xsrfHeaderName]=A)}"setRequestHeader"in w&&n.forEach(b,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete b[t]:w.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),_&&"json"!==_&&(w.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&w.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(g=function(t){w&&(r(!t||t.type?new f(null,e,w):t),w.abort(),w=null)},e.cancelToken&&e.cancelToken.subscribe(g),e.signal&&(e.signal.aborted?g():e.signal.addEventListener("abort",g))),m||!1===m||0===m||""===m||(m=null);var S=p(T);S&&-1===h.protocols.indexOf(S)?r(new d("Unsupported protocol "+S+":",d.ERR_BAD_REQUEST,e)):w.send(m)}))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/adapters/xhr.js"}],[841,{"../lib/core/AxiosError":846,"./cancel/CancelToken":842,"./cancel/CanceledError":843,"./cancel/isCancel":844,"./core/Axios":845,"./core/mergeConfig":850,"./defaults":853,"./env/data":856,"./helpers/bind":858,"./helpers/formDataToJSON":862,"./helpers/isAxiosError":864,"./helpers/spread":869,"./helpers/toFormData":870,"./utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./utils"),o=e("./helpers/bind"),i=e("./core/Axios"),s=e("./core/mergeConfig"),a=e("./defaults"),c=e("./helpers/formDataToJSON");var l=function e(t){var r=new i(t),a=o(i.prototype.request,r);return n.extend(a,i.prototype,r),n.extend(a,r),a.create=function(r){return e(s(t,r))},a}(a);l.Axios=i,l.CanceledError=e("./cancel/CanceledError"),l.CancelToken=e("./cancel/CancelToken"),l.isCancel=e("./cancel/isCancel"),l.VERSION=e("./env/data").version,l.toFormData=e("./helpers/toFormData"),l.AxiosError=e("../lib/core/AxiosError"),l.Cancel=l.CanceledError,l.all=function(e){return Promise.all(e)},l.spread=e("./helpers/spread"),l.isAxiosError=e("./helpers/isAxiosError"),l.formToJSON=function(e){return c(n.isHTMLForm(e)?new FormData(e):e)},t.exports=l,t.exports.default=l}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/axios.js"}],[842,{"./CanceledError":843},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./CanceledError");function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,o,i){r.reason||(r.reason=new n(e,o,i),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},t.exports=o}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/cancel/CancelToken.js"}],[843,{"../core/AxiosError":846,"../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../core/AxiosError");function o(e,t,r){n.call(this,null==e?"canceled":e,n.ERR_CANCELED,t,r),this.name="CanceledError"}e("../utils").inherits(o,n,{__CANCEL__:!0}),t.exports=o}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/cancel/CanceledError.js"}],[844,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){return!(!e||!e.__CANCEL__)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/cancel/isCancel.js"}],[845,{"../helpers/buildURL":859,"../helpers/validator":872,"./../utils":877,"./InterceptorManager":847,"./buildFullPath":848,"./dispatchRequest":849,"./mergeConfig":850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./../utils"),o=e("../helpers/buildURL"),i=e("./InterceptorManager"),s=e("./dispatchRequest"),a=e("./mergeConfig"),c=e("./buildFullPath"),l=e("../helpers/validator"),u=l.validators;function d(e){this.defaults=e,this.interceptors={request:new i,response:new i}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==undefined&&l.assertOptions(r,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var o=t.paramsSerializer;o!==undefined&&l.assertOptions(o,{encode:u.function,serialize:u.function},!0),n.isFunction(o)&&(t.paramsSerializer={serialize:o});var i=[],c=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(c=c&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var d,f=[];if(this.interceptors.response.forEach((function(e){f.push(e.fulfilled,e.rejected)})),!c){var p=[s,undefined];for(Array.prototype.unshift.apply(p,i),p=p.concat(f),d=Promise.resolve(t);p.length;)d=d.then(p.shift(),p.shift());return d}for(var h=t;i.length;){var g=i.shift(),m=i.shift();try{h=g(h)}catch(e){m(e);break}}try{d=s(h)}catch(e){return Promise.reject(e)}for(;f.length;)d=d.then(f.shift(),f.shift());return d},d.prototype.getUri=function(e){e=a(this.defaults,e);var t=c(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},n.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(a(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),t.exports=d}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/core/Axios.js"}],[846,{"../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../utils");function o(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}n.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=o.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){s[e]={value:e}})),Object.defineProperties(o,s),Object.defineProperty(i,"isAxiosError",{value:!0}),o.from=function(e,t,r,s,a,c){var l=Object.create(i);return n.toFlatObject(e,l,(function(e){return e!==Error.prototype})),o.call(l,e.message,t,r,s,a),l.cause=e,l.name=e.name,c&&Object.assign(l,c),l},t.exports=o}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/core/AxiosError.js"}],[847,{"./../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./../utils");function o(){this.handlers=[]}o.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.clear=function(){this.handlers&&(this.handlers=[])},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},t.exports=o}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/core/InterceptorManager.js"}],[848,{"../helpers/combineURLs":860,"../helpers/isAbsoluteURL":863},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../helpers/isAbsoluteURL"),o=e("../helpers/combineURLs");t.exports=function(e,t){return e&&!n(t)?o(e,t):t}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/core/buildFullPath.js"}],[849,{"../cancel/CanceledError":843,"../cancel/isCancel":844,"../defaults":853,"../helpers/normalizeHeaderName":866,"./../utils":877,"./transformData":852},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./../utils"),o=e("./transformData"),i=e("../cancel/isCancel"),s=e("../defaults"),a=e("../cancel/CanceledError"),c=e("../helpers/normalizeHeaderName");function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}t.exports=function(e){return l(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,null,e.transformRequest),c(e.headers,"Accept"),c(e.headers,"Content-Type"),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return l(e),t.data=o.call(e,t.data,t.headers,t.status,e.transformResponse),t}),(function(t){return i(t)||(l(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,t.response.status,e.transformResponse))),Promise.reject(t)}))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/core/dispatchRequest.js"}],[85,{"../util":135,"@metamask/json-rpc-engine":1780},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:o,params:i}=t;if("eth_getTransactionCount"!==o)return void n();const[s,a]=i;"pending"===a?r.result=await e(s,t.networkClientId):n()}))},r.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:i,params:s}=t;if("eth_getTransactionByHash"!==i)return void n();const[a]=s,c=e(a);c?r.result=(0,o.formatTxMetaForRpcResult)(c):n()}))};var n=e("@metamask/json-rpc-engine"),o=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[850,{"../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../utils");t.exports=function(e,t){t=t||{};var r={};function o(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isEmptyObject(t)?n.merge({},e):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function i(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(undefined,e[r]):o(e[r],t[r])}function s(e){if(!n.isUndefined(t[e]))return o(undefined,t[e])}function a(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(undefined,e[r]):o(undefined,t[r])}function c(r){return r in t?o(e[r],t[r]):r in e?o(undefined,e[r]):void 0}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||i,o=t(e);n.isUndefined(o)&&t!==c||(r[e]=o)})),r}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/core/mergeConfig.js"}],[851,{"./AxiosError":846},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./AxiosError");t.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(new n("Request failed with status code "+r.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/core/settle.js"}],[852,{"../defaults":853,"./../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./../utils"),o=e("../defaults");t.exports=function(e,t,r,i){var s=this||o;return n.forEach(i,(function(n){e=n.call(s,e,t,r)})),e}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/core/transformData.js"}],[853,{"../adapters/http":840,"../adapters/xhr":840,"../core/AxiosError":846,"../helpers/formDataToJSON":862,"../helpers/normalizeHeaderName":866,"../helpers/toFormData":870,"../helpers/toURLEncodedForm":871,"../platform":876,"../utils":877,"./transitional":854,_process:4523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("../utils"),o=e("../helpers/normalizeHeaderName"),i=e("../core/AxiosError"),s=e("./transitional"),a=e("../helpers/toFormData"),c=e("../helpers/toURLEncodedForm"),l=e("../platform"),u=e("../helpers/formDataToJSON"),d={"Content-Type":"application/x-www-form-urlencoded"};function f(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var p,h={transitional:s,adapter:("undefined"!=typeof XMLHttpRequest?p=e("../adapters/xhr"):void 0!==r&&"[object process]"===Object.prototype.toString.call(r)&&(p=e("../adapters/http")),p),transformRequest:[function(e,t){o(t,"Accept"),o(t,"Content-Type");var r,i=t&&t["Content-Type"]||"",s=i.indexOf("application/json")>-1,l=n.isObject(e);if(l&&n.isHTMLForm(e)&&(e=new FormData(e)),n.isFormData(e))return s?JSON.stringify(u(e)):e;if(n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e))return e;if(n.isArrayBufferView(e))return e.buffer;if(n.isURLSearchParams(e))return f(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();if(l){if(-1!==i.indexOf("application/x-www-form-urlencoded"))return c(e,this.formSerializer).toString();if((r=n.isFileList(e))||i.indexOf("multipart/form-data")>-1){var d=this.env&&this.env.FormData;return a(r?{"files[]":e}:e,d&&new d,this.formSerializer)}}return l||s?(f(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(t||JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||h.transitional,r=t&&t.forcedJSONParsing,o="json"===this.responseType;if(e&&n.isString(e)&&(r&&!this.responseType||o)){var s=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw i.from(e,i.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:l.classes.FormData,Blob:l.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){h.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){h.headers[e]=n.merge(d)})),t.exports=h}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/defaults/index.js"}],[854,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/defaults/transitional.js"}],[855,{"form-data":3944},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("form-data")}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/env/classes/FormData.js"}],[856,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={version:"0.28.1"}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/env/data.js"}],[857,{"./toFormData":870},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toFormData");function o(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function i(e,t){this._pairs=[],e&&n(e,this,t)}var s=i.prototype;s.append=function(e,t){this._pairs.push([e,t])},s.toString=function(e){var t=e?function(t){return e.call(this,t,o)}:o;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")},t.exports=i}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/AxiosURLSearchParams.js"}],[858,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){return function(){return e.apply(t,arguments)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/bind.js"}],[859,{"../helpers/AxiosURLSearchParams":857,"../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../utils"),o=e("../helpers/AxiosURLSearchParams");function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(e,t,r){if(!t)return e;var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s));var a,c=r&&r.encode||i,l=r&&r.serialize;return(a=l?l(t,r):n.isURLSearchParams(t)?t.toString():new o(t,r).toString(c))&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/buildURL.js"}],[86,{events:3868,loglevel:4386},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("events")),o=i(e("loglevel"));function i(e){return e&&e.__esModule?e:{default:e}}class s extends n.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const r=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||r&&r.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const r of t)try{o.default.info(`Running migration ${r.version}...`);const t=await r.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==r.version)throw new Error("Migrator - Migration did not update version number correctly");e=t,o.default.info(`Migration ${r.version} complete`)}catch(t){const n=t.message;return t.message=`MetaMask Migration Error #${r.version}: ${n}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}r.default=s}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[860,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/combineURLs.js"}],[861,{"./../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/cookies.js"}],[862,{"../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../utils");t.exports=function(e){function t(e,r,o,i){var s=e[i++],a=Number.isFinite(+s),c=i>=e.length;return s=!s&&n.isArray(o)?o.length:s,c?(n.hasOwnProperty(o,s)?o[s]=[o[s],r]:o[s]=r,!a):(o[s]&&n.isObject(o[s])||(o[s]=[]),t(e,r,o[s],i)&&n.isArray(o[s])&&(o[s]=function(e){var t,r,n={},o=Object.keys(e),i=o.length;for(t=0;t<i;t++)n[r=o[t]]=e[r];return n}(o[s])),!a)}if(n.isFormData(e)&&n.isFunction(e.entries)){var r={};return n.forEachEntry(e,(function(e,o){t(function(e){return n.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),o,r,0)})),r}return null}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/formDataToJSON.js"}],[863,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/isAbsoluteURL.js"}],[864,{"./../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./../utils");t.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/isAxiosError.js"}],[865,{"./../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/isURLSameOrigin.js"}],[866,{"../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../utils");t.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/normalizeHeaderName.js"}],[867,{"./../utils":877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./../utils"),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,r,i,s={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.slice(0,i)).toLowerCase(),r=n.trim(e.slice(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}})),s):s}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/parseHeaders.js"}],[868,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/parseProtocol.js"}],[869,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){return function(t){return e.apply(null,t)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/spread.js"}],[870,{"../core/AxiosError":846,"../env/classes/FormData":855,"../utils":877,buffer:3561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("../utils"),o=e("../core/AxiosError"),i=e("../env/classes/FormData");function s(e){return n.isPlainObject(e)||n.isArray(e)}function a(e){return n.endsWith(e,"[]")?e.slice(0,-2):e}function c(e,t,r){return e?e.concat(t).map((function(e,t){return e=a(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}var l=n.toFlatObject(n,{},null,(function(e){return/^is[A-Z]/.test(e)}));t.exports=function(e,t,u){if(!n.isObject(e))throw new TypeError("target must be an object");t=t||new(i||FormData);var d,f=(u=n.toFlatObject(u,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!n.isUndefined(t[e])}))).metaTokens,p=u.visitor||_,h=u.dots,g=u.indexes,m=(u.Blob||"undefined"!=typeof Blob&&Blob)&&((d=t)&&n.isFunction(d.append)&&"FormData"===d[Symbol.toStringTag]&&d[Symbol.iterator]);if(!n.isFunction(p))throw new TypeError("visitor must be a function");function b(e){if(null===e)return"";if(n.isDate(e))return e.toISOString();if(!m&&n.isBlob(e))throw new o("Blob is not supported. Use a Buffer instead.");return n.isArrayBuffer(e)||n.isTypedArray(e)?m&&"function"==typeof Blob?new Blob([e]):r.from(e):e}function _(e,r,o){var i=e;if(e&&!o&&"object"==typeof e)if(n.endsWith(r,"{}"))r=f?r:r.slice(0,-2),e=JSON.stringify(e);else if(n.isArray(e)&&function(e){return n.isArray(e)&&!e.some(s)}(e)||n.isFileList(e)||n.endsWith(r,"[]")&&(i=n.toArray(e)))return r=a(r),i.forEach((function(e,o){!n.isUndefined(e)&&t.append(!0===g?c([r],o,h):null===g?r:r+"[]",b(e))})),!1;return!!s(e)||(t.append(c(o,r,h),b(e)),!1)}var y=[],E=Object.assign(l,{defaultVisitor:_,convertValue:b,isVisitable:s});if(!n.isObject(e))throw new TypeError("data must be an object");return function e(r,o){if(!n.isUndefined(r)){if(-1!==y.indexOf(r))throw Error("Circular reference detected in "+o.join("."));y.push(r),n.forEach(r,(function(r,i){!0===(!n.isUndefined(r)&&p.call(t,r,n.isString(i)?i.trim():i,o,E))&&e(r,o?o.concat(i):[i])})),y.pop()}}(e),t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/toFormData.js"}],[871,{"../platform/":876,"../utils":877,"./toFormData":870},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../utils"),o=e("./toFormData"),i=e("../platform/");t.exports=function(e,t){return o(e,new i.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,o){return i.isNode&&n.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/toURLEncodedForm.js"}],[872,{"../core/AxiosError":846,"../env/data":856},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../env/data").version,o=e("../core/AxiosError"),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,r){function i(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,a){if(!1===e)throw new o(i(n," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!s[n]&&(s[n]=!0,console.warn(i(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,a)}},t.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),i=n.length;i-- >0;){var s=n[i],a=t[s];if(a){var c=e[s],l=c===undefined||a(c,s,e);if(!0!==l)throw new o("option "+s+" must be "+l,o.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new o("Unknown option "+s,o.ERR_BAD_OPTION)}},validators:i}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/helpers/validator.js"}],[873,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=FormData}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/platform/browser/classes/FormData.js"}],[874,{"../../../helpers/AxiosURLSearchParams":857},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../helpers/AxiosURLSearchParams");t.exports="undefined"!=typeof URLSearchParams?URLSearchParams:n}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/platform/browser/classes/URLSearchParams.js"}],[875,{"./classes/FormData":873,"./classes/URLSearchParams":874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={isBrowser:!0,classes:{URLSearchParams:e("./classes/URLSearchParams"),FormData:e("./classes/FormData"),Blob:Blob},protocols:["http","https","file","blob","url","data"]}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/platform/browser/index.js"}],[876,{"./node/":875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./node/")}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/platform/index.js"}],[877,{"./helpers/bind":858},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=e("./helpers/bind"),i=Object.prototype.toString,s=(n=Object.create(null),function(e){var t=i.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function c(e){return Array.isArray(e)}function l(e){return void 0===e}var u=a("ArrayBuffer");function d(e){return"number"==typeof e}function f(e){return null!==e&&"object"==typeof e}function p(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var h=a("Date"),g=a("File"),m=a("Blob"),b=a("FileList");function _(e){return"[object Function]"===i.call(e)}var y=a("URLSearchParams");function E(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var w,v=(w="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return w&&e instanceof w});var P,T=a("HTMLFormElement"),O=(P=Object.prototype.hasOwnProperty,function(e,t){return P.call(e,t)});t.exports={isArray:c,isArrayBuffer:u,isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||i.call(e)===t||_(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:d,isObject:f,isPlainObject:p,isEmptyObject:function(e){return e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype},isUndefined:l,isDate:h,isFile:g,isBlob:m,isFunction:_,isStream:function(e){return f(e)&&_(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){var e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:E,merge:function e(){var t={};function r(r,n){p(t[n])&&p(r)?t[n]=e(t[n],r):p(r)?t[n]=e({},r):c(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)E(arguments[n],r);return t},extend:function(e,t,r){return E(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)},toFlatObject:function(e,t,r,n){var o,i,s,a={};if(t=t||{},null==e)return t;do{for(i=(o=Object.getOwnPropertyNames(e)).length;i-- >0;)s=o[i],n&&!n(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==r&&Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:a,endsWith:function(e,t,r){e=String(e),(r===undefined||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return-1!==n&&n===r},toArray:function(e){if(!e)return null;if(c(e))return e;var t=e.length;if(!d(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r},isTypedArray:v,isFileList:b,forEachEntry:function(e,t){for(var r,n=(e&&e[Symbol.iterator]).call(e);(r=n.next())&&!r.done;){var o=r.value;t.call(e,o[0],o[1])}},matchAll:function(e,t){for(var r,n=[];null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:T,hasOwnProperty:O}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>axios",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/axios/lib/utils.js"}],[878,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,i=Math.floor,s="[BigNumber Error] ",a=s+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,p=1e9;function h(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,r,n=1,o=e.length,i=e[0]+"";n<o;){for(t=e[n++]+"",r=l-t.length;r--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function m(e,t){var r,n,o=e.c,i=t.c,s=e.s,a=t.s,c=e.e,l=t.e;if(!s||!a)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=c==l,!o||!i)return n?0:!o^r?1:-1;if(!n)return c>l^r?1:-1;for(a=(c=o.length)<(l=i.length)?c:l,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^r?1:-1;return c==l?0:c>l^r?1:-1}function b(e,t,r,n){if(e<t||e>r||e!==i(e))throw Error(s+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function _(e){var t=e.c.length-1;return h(e.e/l)==t&&e.c[t]%2!=0}function y(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function E(e,t,r){var n,o;if(t<0){for(o=r+".";++t;o+=r);e=o+e}else if(++t>(n=e.length)){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,w,v,P,T,O,A,S,I,C,N=V.prototype={constructor:V,toString:null,valueOf:null},x=new V(1),R=20,k=4,j=-7,L=21,M=-1e7,D=1e7,U=!1,B=1,F=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",G=!0;function V(e,t){var r,o,s,c,d,f,p,h,g=this;if(!(g instanceof V))return new V(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>D?g.c=g.e=null:e.e<M?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>D?g.c=g.e=null:(g.e=c,g.c=[e]))}h=String(e)}else{if(!n.test(h=String(e)))return v(g,h,f);g.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(c=h.indexOf("."))>-1&&(h=h.replace(".","")),(d=h.search(/e/i))>0?(c<0&&(c=d),c+=+h.slice(d+1),h=h.substring(0,d)):c<0&&(c=h.length)}else{if(b(t,2,H.length,"Base"),10==t&&G)return Y(g=new V(e),R+g.e+1,k);if(h=String(e),f="number"==typeof e){if(0*e!=0)return v(g,h,f,t);if(g.s=1/e<0?(h=h.slice(1),-1):1,V.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else g.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(r=H.slice(0,t),c=d=0,p=h.length;d<p;d++)if(r.indexOf(o=h.charAt(d))<0){if("."==o){if(d>c){c=p;continue}}else if(!s&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){s=!0,d=-1,c=0;continue}return v(g,String(e),f,t)}f=!1,(c=(h=w(h,t,10,g.s)).indexOf("."))>-1?h=h.replace(".",""):c=h.length}for(d=0;48===h.charCodeAt(d);d++);for(p=h.length;48===h.charCodeAt(--p););if(h=h.slice(d,++p)){if(p-=d,f&&V.DEBUG&&p>15&&(e>u||e!==i(e)))throw Error(a+g.s*e);if((c=c-d-1)>D)g.c=g.e=null;else if(c<M)g.c=[g.e=0];else{if(g.e=c,g.c=[],d=(c+1)%l,c<0&&(d+=l),d<p){for(d&&g.c.push(+h.slice(0,d)),p-=l;d<p;)g.c.push(+h.slice(d,d+=l));d=l-(h=h.slice(d)).length}else d-=p;for(;d--;h+="0");g.c.push(+h)}}else g.c=[g.e=0]}function $(e,t,r,n){var o,i,s,a,c;if(null==r?r=k:b(r,0,8),!e.c)return e.toString();if(o=e.c[0],s=e.e,null==t)c=g(e.c),c=1==n||2==n&&(s<=j||s>=L)?y(c,s):E(c,s,"0");else if(i=(e=Y(new V(e),t,r)).e,a=(c=g(e.c)).length,1==n||2==n&&(t<=i||i<=j)){for(;a<t;c+="0",a++);c=y(c,i)}else if(t-=s,c=E(c,i,"0"),i+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-a)>0)for(i+1==a&&(c+=".");t--;c+="0");return e.s<0&&o?"-"+c:c}function z(e,t){for(var r,n,o=1,i=new V(e[0]);o<e.length;o++)(!(n=new V(e[o])).s||(r=m(i,n))===t||0===r&&i.s===t)&&(i=n);return i}function K(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(r=n+r*l-1)>D?e.c=e.e=null:r<M?e.c=[e.e=0]:(e.e=r,e.c=t),e}function Y(e,t,r,n){var s,a,u,f,p,h,g,m=e.c,b=d;if(m){e:{for(s=1,f=m[0];f>=10;f/=10,s++);if((a=t-s)<0)a+=l,u=t,p=m[h=0],g=i(p/b[s-u-1]%10);else if((h=o((a+1)/l))>=m.length){if(!n)break e;for(;m.length<=h;m.push(0));p=g=0,s=1,u=(a%=l)-l+1}else{for(p=f=m[h],s=1;f>=10;f/=10,s++);g=(u=(a%=l)-l+s)<0?0:i(p/b[s-u-1]%10)}if(n=n||t<0||null!=m[h+1]||(u<0?p:p%b[s-u-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(a>0?u>0?p/b[s-u]:0:m[h-1])%10&1||r==(e.s<0?8:7)),t<1||!m[0])return m.length=0,n?(t-=e.e+1,m[0]=b[(l-t%l)%l],e.e=-t||0):m[0]=e.e=0,e;if(0==a?(m.length=h,f=1,h--):(m.length=h+1,f=b[l-a],m[h]=u>0?i(p/b[s-u]%b[u])*f:0),n)for(;;){if(0==h){for(a=1,u=m[0];u>=10;u/=10,a++);for(u=m[0]+=f,f=1;u>=10;u/=10,f++);a!=f&&(e.e++,m[0]==c&&(m[0]=1));break}if(m[h]+=f,m[h]!=c)break;m[h--]=0,f=1}for(a=m.length;0===m[--a];m.pop());}e.e>D?e.c=e.e=null:e.e<M&&(e.c=[e.e=0])}return e}function W(e){var t,r=e.e;return null===r?e.toString():(t=g(e.c),t=r<=j||r>=L?y(t,r):E(t,r,"0"),e.s<0?"-"+t:t)}return V.clone=e,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(r=e[t],0,p,t),R=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(r=e[t],0,8,t),k=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(b(r[0],-p,0,t),b(r[1],0,p,t),j=r[0],L=r[1]):(b(r,-p,p,t),j=-(L=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)b(r[0],-p,-1,t),b(r[1],1,p,t),M=r[0],D=r[1];else{if(b(r,-p,p,t),!r)throw Error(s+t+" cannot be zero: "+r);M=-(D=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(s+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!r,Error(s+"crypto unavailable");U=r}else U=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(r=e[t],0,9,t),B=r),e.hasOwnProperty(t="POW_PRECISION")&&(b(r=e[t],0,p,t),F=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(s+t+" not an object: "+r);q=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(s+t+" invalid: "+r);G="0123456789"==r.slice(0,10),H=r}}return{DECIMAL_PLACES:R,ROUNDING_MODE:k,EXPONENTIAL_AT:[j,L],RANGE:[M,D],CRYPTO:U,MODULO_MODE:B,POW_PRECISION:F,FORMAT:q,ALPHABET:H}},V.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!V.DEBUG)return!0;var t,r,n=e.c,o=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&o>=-p&&o<=p&&o===i(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break e}if((t=(o+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=c||r!==i(r))break e;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===a||1===a||-1===a))return!0;throw Error(s+"Invalid BigNumber: "+e)},V.maximum=V.max=function(){return z(arguments,-1)},V.minimum=V.min=function(){return z(arguments,1)},V.random=(P=9007199254740992,T=Math.random()*P&2097151?function(){return i(Math.random()*P)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,c,u=0,f=[],h=new V(x);if(null==e?e=R:b(e,0,p),a=o(e/l),U)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));u<a;)(c=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(f.push(c%1e14),u+=2);u=a/2}else{if(!crypto.randomBytes)throw U=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(a*=7);u<a;)(c=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(f.push(c%1e14),u+=7);u=a/7}if(!U)for(;u<a;)(c=T())<9e15&&(f[u++]=c%1e14);for(a=f[--u],e%=l,a&&e&&(c=d[l-e],f[u]=i(a/c)*c);0===f[u];f.pop(),u--);if(u<0)f=[n=0];else{for(n=-1;0===f[0];f.splice(0,1),n-=l);for(u=1,c=f[0];c>=10;c/=10,u++);u<l&&(n-=l-u)}return h.e=n,h.c=f,h}),V.sum=function(){for(var e=1,t=arguments,r=new V(t[0]);e<t.length;)r=r.plus(t[e++]);return r},w=function(){var e="0123456789";function t(e,t,r,n){for(var o,i,s=[0],a=0,c=e.length;a<c;){for(i=s.length;i--;s[i]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),o=0;o<s.length;o++)s[o]>r-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/r|0,s[o]%=r)}return s.reverse()}return function(n,o,i,s,a){var c,l,u,d,f,p,h,m,b=n.indexOf("."),_=R,y=k;for(b>=0&&(d=F,F=0,n=n.replace(".",""),p=(m=new V(o)).pow(n.length-b),F=d,m.c=t(E(g(p.c),p.e,"0"),10,i,e),m.e=m.c.length),u=d=(h=t(n,o,i,a?(c=H,e):(c=e,H))).length;0==h[--d];h.pop());if(!h[0])return c.charAt(0);if(b<0?--u:(p.c=h,p.e=u,p.s=s,h=(p=r(p,m,_,y,i)).c,f=p.r,u=p.e),b=h[l=u+_+1],d=i/2,f=f||l<0||null!=h[l+1],f=y<4?(null!=b||f)&&(0==y||y==(p.s<0?3:2)):b>d||b==d&&(4==y||f||6==y&&1&h[l-1]||y==(p.s<0?8:7)),l<1||!h[0])n=f?E(c.charAt(1),-_,c.charAt(0)):c.charAt(0);else{if(h.length=l,f)for(--i;++h[--l]>i;)h[l]=0,l||(++u,h=[1].concat(h));for(d=h.length;!h[--d];);for(b=0,n="";b<=d;n+=c.charAt(h[b++]));n=E(n,u,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,o,i,s,a=0,c=e.length,l=t%f,u=t/f|0;for(e=e.slice();c--;)a=((o=l*(i=e[c]%f)+(n=u*i+(s=e[c]/f|0)*l)%f*f+a)/r|0)+(n/f|0)+u*s,e[c]=o%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function r(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,o,s,a,u){var d,f,p,g,m,b,_,y,E,w,v,P,T,O,A,S,I,C=n.s==o.s?1:-1,N=n.c,x=o.c;if(!(N&&N[0]&&x&&x[0]))return new V(n.s&&o.s&&(N?!x||N[0]!=x[0]:x)?N&&0==N[0]||!x?0*C:C/0:NaN);for(E=(y=new V(C)).c=[],C=s+(f=n.e-o.e)+1,u||(u=c,f=h(n.e/l)-h(o.e/l),C=C/l|0),p=0;x[p]==(N[p]||0);p++);if(x[p]>(N[p]||0)&&f--,C<0)E.push(1),g=!0;else{for(O=N.length,S=x.length,p=0,C+=2,(m=i(u/(x[0]+1)))>1&&(x=e(x,m,u),N=e(N,m,u),S=x.length,O=N.length),T=S,v=(w=N.slice(0,S)).length;v<S;w[v++]=0);I=x.slice(),I=[0].concat(I),A=x[0],x[1]>=u/2&&A++;do{if(m=0,(d=t(x,w,S,v))<0){if(P=w[0],S!=v&&(P=P*u+(w[1]||0)),(m=i(P/A))>1)for(m>=u&&(m=u-1),_=(b=e(x,m,u)).length,v=w.length;1==t(b,w,_,v);)m--,r(b,S<_?I:x,_,u),_=b.length,d=1;else 0==m&&(d=m=1),_=(b=x.slice()).length;if(_<v&&(b=[0].concat(b)),r(w,b,v,u),v=w.length,-1==d)for(;t(x,w,S,v)<1;)m++,r(w,S<v?I:x,v,u),v=w.length}else 0===d&&(m++,w=[0]);E[p++]=m,w[0]?w[v++]=N[T]||0:(w=[N[T]],v=1)}while((T++<O||null!=w[0])&&C--);g=null!=w[0],E[0]||E.splice(0,1)}if(u==c){for(p=1,C=E[0];C>=10;C/=10,p++);Y(y,s+(y.e=p+f*l-1)+1,a,g)}else y.e=f,y.r=+g;return y}}(),O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,S=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,C=/^\s*\+(?=[\w.])|^\s+|\s+$/g,v=function(e,t,r,n){var o,i=r?t:t.replace(C,"");if(I.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(O,(function(e,t,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?e:t})),n&&(o=n,i=i.replace(A,"$1").replace(S,"0.$1")),t!=i))return new V(i,o);if(V.DEBUG)throw Error(s+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},N.absoluteValue=N.abs=function(){var e=new V(this);return e.s<0&&(e.s=1),e},N.comparedTo=function(e,t){return m(this,new V(e,t))},N.decimalPlaces=N.dp=function(e,t){var r,n,o,i=this;if(null!=e)return b(e,0,p),null==t?t=k:b(t,0,8),Y(new V(i),e+i.e+1,t);if(!(r=i.c))return null;if(n=((o=r.length-1)-h(this.e/l))*l,o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},N.dividedBy=N.div=function(e,t){return r(this,new V(e,t),R,k)},N.dividedToIntegerBy=N.idiv=function(e,t){return r(this,new V(e,t),0,1)},N.exponentiatedBy=N.pow=function(e,t){var r,n,a,c,u,d,f,p,h=this;if((e=new V(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+W(e));if(null!=t&&(t=new V(t)),u=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return p=new V(Math.pow(+W(h),u?e.s*(2-_(e)):+W(e))),t?p.mod(t):p;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new V(NaN);(n=!d&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||u&&h.c[1]>=24e7:h.c[0]<8e13||u&&h.c[0]<=9999975e7)))return c=h.s<0&&_(e)?-0:0,h.e>-1&&(c=1/c),new V(d?1/c:c);F&&(c=o(F/l+2))}for(u?(r=new V(.5),d&&(e.s=1),f=_(e)):f=(a=Math.abs(+W(e)))%2,p=new V(x);;){if(f){if(!(p=p.times(h)).c)break;c?p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}if(a){if(0===(a=i(a/2)))break;f=a%2}else if(Y(e=e.times(r),e.e+1,1),e.e>14)f=_(e);else{if(0===(a=+W(e)))break;f=a%2}h=h.times(h),c?h.c&&h.c.length>c&&(h.c.length=c):n&&(h=h.mod(t))}return n?p:(d&&(p=x.div(p)),t?p.mod(t):c?Y(p,F,k,undefined):p)},N.integerValue=function(e){var t=new V(this);return null==e?e=k:b(e,0,8),Y(t,t.e+1,e)},N.isEqualTo=N.eq=function(e,t){return 0===m(this,new V(e,t))},N.isFinite=function(){return!!this.c},N.isGreaterThan=N.gt=function(e,t){return m(this,new V(e,t))>0},N.isGreaterThanOrEqualTo=N.gte=function(e,t){return 1===(t=m(this,new V(e,t)))||0===t},N.isInteger=function(){return!!this.c&&h(this.e/l)>this.c.length-2},N.isLessThan=N.lt=function(e,t){return m(this,new V(e,t))<0},N.isLessThanOrEqualTo=N.lte=function(e,t){return-1===(t=m(this,new V(e,t)))||0===t},N.isNaN=function(){return!this.s},N.isNegative=function(){return this.s<0},N.isPositive=function(){return this.s>0},N.isZero=function(){return!!this.c&&0==this.c[0]},N.minus=function(e,t){var r,n,o,i,s=this,a=s.s;if(t=(e=new V(e,t)).s,!a||!t)return new V(NaN);if(a!=t)return e.s=-t,s.plus(e);var u=s.e/l,d=e.e/l,f=s.c,p=e.c;if(!u||!d){if(!f||!p)return f?(e.s=-t,e):new V(p?s:NaN);if(!f[0]||!p[0])return p[0]?(e.s=-t,e):new V(f[0]?s:3==k?-0:0)}if(u=h(u),d=h(d),f=f.slice(),a=u-d){for((i=a<0)?(a=-a,o=f):(d=u,o=p),o.reverse(),t=a;t--;o.push(0));o.reverse()}else for(n=(i=(a=f.length)<(t=p.length))?a:t,a=t=0;t<n;t++)if(f[t]!=p[t]){i=f[t]<p[t];break}if(i&&(o=f,f=p,p=o,e.s=-e.s),(t=(n=p.length)-(r=f.length))>0)for(;t--;f[r++]=0);for(t=c-1;n>a;){if(f[--n]<p[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=c}f[n]-=p[n]}for(;0==f[0];f.splice(0,1),--d);return f[0]?K(e,f,d):(e.s=3==k?-1:1,e.c=[e.e=0],e)},N.modulo=N.mod=function(e,t){var n,o,i=this;return e=new V(e,t),!i.c||!e.s||e.c&&!e.c[0]?new V(NaN):!e.c||i.c&&!i.c[0]?new V(i):(9==B?(o=e.s,e.s=1,n=r(i,e,0,3),e.s=o,n.s*=o):n=r(i,e,0,B),(e=i.minus(n.times(e))).c[0]||1!=B||(e.s=i.s),e)},N.multipliedBy=N.times=function(e,t){var r,n,o,i,s,a,u,d,p,g,m,b,_,y,E,w=this,v=w.c,P=(e=new V(e,t)).c;if(!(v&&P&&v[0]&&P[0]))return!w.s||!e.s||v&&!v[0]&&!P||P&&!P[0]&&!v?e.c=e.e=e.s=null:(e.s*=w.s,v&&P?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=h(w.e/l)+h(e.e/l),e.s*=w.s,(u=v.length)<(g=P.length)&&(_=v,v=P,P=_,o=u,u=g,g=o),o=u+g,_=[];o--;_.push(0));for(y=c,E=f,o=g;--o>=0;){for(r=0,m=P[o]%E,b=P[o]/E|0,i=o+(s=u);i>o;)r=((d=m*(d=v[--s]%E)+(a=b*d+(p=v[s]/E|0)*m)%E*E+_[i]+r)/y|0)+(a/E|0)+b*p,_[i--]=d%y;_[i]=r}return r?++n:_.splice(0,1),K(e,_,n)},N.negated=function(){var e=new V(this);return e.s=-e.s||null,e},N.plus=function(e,t){var r,n=this,o=n.s;if(t=(e=new V(e,t)).s,!o||!t)return new V(NaN);if(o!=t)return e.s=-t,n.minus(e);var i=n.e/l,s=e.e/l,a=n.c,u=e.c;if(!i||!s){if(!a||!u)return new V(o/0);if(!a[0]||!u[0])return u[0]?e:new V(a[0]?n:0*o)}if(i=h(i),s=h(s),a=a.slice(),o=i-s){for(o>0?(s=i,r=u):(o=-o,r=a),r.reverse();o--;r.push(0));r.reverse()}for((o=a.length)-(t=u.length)<0&&(r=u,u=a,a=r,t=o),o=0;t;)o=(a[--t]=a[t]+u[t]+o)/c|0,a[t]=c===a[t]?0:a[t]%c;return o&&(a=[o].concat(a),++s),K(e,a,s)},N.precision=N.sd=function(e,t){var r,n,o,i=this;if(null!=e&&e!==!!e)return b(e,1,p),null==t?t=k:b(t,0,8),Y(new V(i),e,t);if(!(r=i.c))return null;if(n=(o=r.length-1)*l+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return e&&i.e+1>n&&(n=i.e+1),n},N.shiftedBy=function(e){return b(e,-9007199254740991,u),this.times("1e"+e)},N.squareRoot=N.sqrt=function(){var e,t,n,o,i,s=this,a=s.c,c=s.s,l=s.e,u=R+4,d=new V("0.5");if(1!==c||!a||!a[0])return new V(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+W(s)))||c==1/0?(((t=g(a)).length+l)%2==0&&(t+="0"),c=Math.sqrt(+t),l=h((l+1)/2)-(l<0||l%2),n=new V(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new V(c+""),n.c[0])for((c=(l=n.e)+u)<3&&(c=0);;)if(i=n,n=d.times(i.plus(r(s,i,u,1))),g(i.c).slice(0,c)===(t=g(n.c)).slice(0,c)){if(n.e<l&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Y(n,n.e+R+2,1),e=!n.times(n).eq(s));break}if(!o&&(Y(i,i.e+R+2,0),i.times(i).eq(s))){n=i;break}u+=4,c+=4,o=1}return Y(n,n.e+R+1,k,e)},N.toExponential=function(e,t){return null!=e&&(b(e,0,p),e++),$(this,e,t,1)},N.toFixed=function(e,t){return null!=e&&(b(e,0,p),e=e+this.e+1),$(this,e,t)},N.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=q;else if("object"!=typeof r)throw Error(s+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var i,a=n.split("."),c=+r.groupSize,l=+r.secondaryGroupSize,u=r.groupSeparator||"",d=a[0],f=a[1],p=o.s<0,h=p?d.slice(1):d,g=h.length;if(l&&(i=c,c=l,l=i,g-=i),c>0&&g>0){for(i=g%c||c,d=h.substr(0,i);i<g;i+=c)d+=u+h.substr(i,c);l>0&&(d+=u+h.slice(i)),p&&(d="-"+d)}n=f?d+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):d}return(r.prefix||"")+n+(r.suffix||"")},N.toFraction=function(e){var t,n,o,i,a,c,u,f,p,h,m,b,_=this,y=_.c;if(null!=e&&(!(u=new V(e)).isInteger()&&(u.c||1!==u.s)||u.lt(x)))throw Error(s+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+W(u));if(!y)return new V(_);for(t=new V(x),p=n=new V(x),o=f=new V(x),b=g(y),a=t.e=b.length-_.e-1,t.c[0]=d[(c=a%l)<0?l+c:c],e=!e||u.comparedTo(t)>0?a>0?t:p:u,c=D,D=1/0,u=new V(b),f.c[0]=0;h=r(u,t,0,1),1!=(i=n.plus(h.times(o))).comparedTo(e);)n=o,o=i,p=f.plus(h.times(i=p)),f=i,t=u.minus(h.times(i=t)),u=i;return i=r(e.minus(n),o,0,1),f=f.plus(i.times(p)),n=n.plus(i.times(o)),f.s=p.s=_.s,m=r(p,o,a*=2,k).minus(_).abs().comparedTo(r(f,n,a,k).minus(_).abs())<1?[p,o]:[f,n],D=c,m},N.toNumber=function(){return+W(this)},N.toPrecision=function(e,t){return null!=e&&b(e,1,p),$(this,e,t,2)},N.toString=function(e){var t,r=this,n=r.s,o=r.e;return null===o?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=o<=j||o>=L?y(g(r.c),o):E(g(r.c),o,"0"):10===e&&G?t=E(g((r=Y(new V(r),R+o+1,k)).c),r.e,"0"):(b(e,2,H.length,"Base"),t=w(E(g(r.c),o,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},N.valueOf=N.toJSON=function(){return W(this)},N._isBigNumber=!0,null!=t&&V.set(t),V}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>bignumber.js",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/bignumber.js/bignumber.js"}],[879,{rxjs:4808},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.setEnvUnsafe=r.setEnv=r.changes=r.getEnvDesc=r.isEnvDefault=r.getEnvDefault=r.getEnv=r.getAllEnvs=r.getAllEnvNames=r.getDefinition=void 0;const n=e("rxjs"),o=e=>{if(!Number.isNaN(e))return parseInt(e,10)},i=e=>{if(!Number.isNaN(e))return parseFloat(e)},s=e=>"boolean"==typeof e?e:!("0"===e||"false"===e),a=e=>"string"==typeof e?e:undefined,c=e=>{const t="string"==typeof e?e.split(","):null;if(Array.isArray(t)&&t.length>0)return t},l={ADDRESS_POISONING_FAMILIES:{def:"evm,tron",parser:a,desc:"List of families impacted by the address poisoning attack"},ANALYTICS_CONSOLE:{def:!1,parser:s,desc:"Show tracking overlays on the app UI"},DEBUG_THEME:{def:!1,parser:s,desc:"Show theme debug overlay UI"},API_ICP_ENDPOINT:{def:"https://icp.coin.ledger.com/",parser:a,desc:"Rosetta API for ICP"},API_CASPER_INDEXER_ENDPOINT:{parser:a,def:"https://casper.coin.ledger.com/indexer",desc:"Casper API url indexer"},API_CASPER_NODE_ENDPOINT:{parser:a,def:"https://casper.coin.ledger.com/node/",desc:"Casper API url node"},API_ALGORAND_BLOCKCHAIN_EXPLORER_API_ENDPOINT:{def:"https://algorand.coin.ledger.com",parser:a,desc:"Node API endpoint for algorand"},API_CELO_INDEXER:{def:"https://celo.coin.ledger.com/indexer/",parser:a,desc:"Explorer API for celo"},API_CELO_NODE:{def:"https://celo.coin.ledger.com/archive/",parser:a,desc:"Node endpoint for celo"},COSMOS_GAS_AMPLIFIER:{def:1.3,parser:o,desc:"Cosmos gas estimate multiplier"},API_FILECOIN_ENDPOINT:{parser:a,def:"https://filecoin.coin.ledger.com",desc:"Filecoin API url"},API_STACKS_ENDPOINT:{parser:a,def:"https://stacks.coin.ledger.com",desc:"Stacks API url"},API_POLKADOT_INDEXER:{parser:a,def:"https://polkadot.coin.ledger.com",desc:"Explorer API for polkadot"},API_POLKADOT_SIDECAR:{parser:a,def:"https://polkadot-sidecar.coin.ledger.com",desc:"Polkadot Sidecar API url"},API_POLKADOT_SIDECAR_CREDENTIALS:{parser:a,def:"",desc:"Polkadot Sidecar API credentials"},API_POLKADOT_NODE:{parser:a,def:"https://polkadot-fullnodes.api.live.ledger.com",desc:"Polkadot Node"},ELROND_API_ENDPOINT:{parser:a,def:"https://elrond.coin.ledger.com",desc:"Elrond API url"},ELROND_DELEGATION_API_ENDPOINT:{parser:a,def:"https://delegations-elrond.coin.ledger.com",desc:"Elrond DELEGATION API url"},API_STELLAR_HORIZON:{parser:a,def:"https://stellar.coin.ledger.com",desc:"Stellar Horizon API url"},API_STELLAR_HORIZON_FETCH_LIMIT:{parser:o,def:100,desc:"Limit of operation that Horizon will fetch per page"},API_STELLAR_HORIZON_STATIC_FEE:{def:!1,parser:s,desc:"Static fee for Stellar account"},API_TEZOS_BAKER:{parser:a,def:"https://tezos-bakers.api.live.ledger.com",desc:"bakers API for tezos"},API_TEZOS_BLOCKCHAIN_EXPLORER_API_ENDPOINT:{def:"https://xtz-explorer.api.live.ledger.com/explorer",parser:a,desc:"Ledger explorer API for tezos"},API_TEZOS_TZKT_API:{def:"https://xtz-tzkt-explorer.api.live.ledger.com",parser:a,desc:"tzkt.io explorer"},API_TEZOS_NODE:{def:"https://xtz-node.api.live.ledger.com",parser:a,desc:"node API for tezos (for broadcast only)"},API_TRONGRID_PROXY:{parser:a,def:"https://tron.coin.ledger.com",desc:"proxy url for trongrid API"},API_SOLANA_PROXY:{parser:a,def:"https://solana.coin.ledger.com",desc:"proxy url for solana API"},SOLANA_VALIDATORS_APP_BASE_URL:{parser:a,def:"https://earn.api.live.ledger.com/v0/network/solana/validator-details",desc:"base url for validators.app validator list"},SOLANA_TESTNET_VALIDATORS_APP_BASE_URL:{parser:a,def:"https://validators-solana.coin.ledger.com/api/v1/validators",desc:"base url for testnet validators.app validator list"},SOLANA_TX_CONFIRMATION_TIMEOUT:{def:1e5,parser:o,desc:"solana transaction broadcast confirmation timeout"},API_HEDERA_MIRROR:{def:"https://hedera.coin.ledger.com",parser:a,desc:"mirror node API for Hedera"},API_VECHAIN_THOREST:{def:"https://vechain.coin.ledger.com",parser:a,desc:"Thorest API for VeChain"},BASE_SOCKET_URL:{def:"wss://scriptrunner.api.live.ledger.com/update",parser:a,desc:"Ledger script runner API"},BOT_TIMEOUT_SCAN_ACCOUNTS:{def:6e5,parser:o,desc:"bot's default timeout for scanAccounts"},BOT_SPEC_DEFAULT_TIMEOUT:{def:18e5,parser:o,desc:"define the default value of spec.skipMutationsTimeout (if not overriden by spec)"},BUY_API_BASE:{def:"https://buy.api.live.ledger.com/buy/v1",parser:a,desc:"Buy crypto API base url - version 1"},CARDANO_API_ENDPOINT:{def:"https://cardano.coin.ledger.com/api",parser:a,desc:"Cardano API url"},CARDANO_TESTNET_API_ENDPOINT:{def:"https://testnet-ledger.cardanoscan.io/api",parser:a,desc:"Cardano API url"},ICON_NODE_ENDPOINT:{parser:a,def:"https://icon.coin.ledger.com/api/v3",desc:"ICON RPC url"},ICON_DEBUG_ENDPOINT:{parser:a,def:"https://icon.coin.ledger.com/api/v3d",desc:"ICON debug RPC url"},ICON_INDEXER_ENDPOINT:{parser:a,def:"https://icon.coin.ledger.com/api/v1",desc:"ICON API url"},ICON_TESTNET_NODE_ENDPOINT:{parser:a,def:"https://berlin.net.solidwallet.io/api/v3",desc:"ICON Berlin Testnet API url"},ICON_TESTNET_DEBUG_ENDPOINT:{parser:a,def:"https://berlin.net.solidwallet.io/api/v3d",desc:"ICON Berlin Testnet debug"},ICON_TESTNET_INDEXER_ENDPOINT:{parser:a,def:"https://tracker.berlin.icon.community/api/v1",desc:"ICON Berlin Testnet API url"},COINAPPS:{def:"",parser:a,desc:"(dev feature) defines the folder for speculos mode that contains Nano apps binaries (.elf) in a specific structure: <device>/<firmware>/<appName>/app_<appVersion>.elf"},CRYPTO_ORG_INDEXER:{def:"https://cryptoorg-rpc-indexer.coin.ledger.com",parser:a,desc:"location of the Cronos POS Chain (formerly Crypto.org) indexer API"},CRYPTO_ORG_TESTNET_INDEXER:{def:"https://cronos-pos.org/explorer/croeseid4",parser:a,desc:"location of the Cronos POS Chain (formerly Crypto.org) indexer testnet API"},CRYPTO_ORG_RPC_URL:{def:"https://cryptoorg-rpc-node.coin.ledger.com",parser:a,desc:"location of the Cronos POS Chain (formerly Crypto.org) chain node"},CRYPTO_ORG_TESTNET_RPC_URL:{def:"https://rpc-testnet-croeseid-4.crypto.org",parser:a,desc:"location of the Cronos POS Chain (formerly Crypto.org) chain testnet node"},DEBUG_UTXO_DISPLAY:{def:4,parser:o,desc:"define maximum number of utxos to display in CLI"},DEBUG_HTTP_RESPONSE:{def:!1,parser:s,desc:"includes HTTP response body in logs"},DEVICE_CANCEL_APDU_FLUSH_MECHANISM:{def:!0,parser:s,desc:"enable a mechanism that send a 0x00 apdu to force device to awake from its 'Processing' UI state"},DEVICE_PROXY_URL:{def:"",parser:a,desc:"enable a proxy to use instead of a physical device"},DEVICE_PROXY_MODEL:{def:"nanoS",parser:a,desc:"allow to override the default model of a proxied device"},DISABLE_TRANSACTION_BROADCAST:{def:!1,parser:s,desc:"disable broadcast of transactions"},DISABLE_SYNC_TOKEN:{def:!0,parser:s,desc:"disable a problematic mechanism of our API"},DISABLE_FW_UPDATE_VERSION_CHECK:{def:!1,parser:s,desc:"disable the version check for firmware update eligibility"},EIP1559_MINIMUM_FEES_GATE:{def:!0,parser:s,desc:"prevents the user from doing an EIP1559 transaction with fees too low"},EIP1559_PRIORITY_FEE_LOWER_GATE:{def:.85,parser:i,desc:"minimum priority fee percents allowed compared to network conditions allowed when EIP1559_MINIMUM_FEES_GATE is activated"},EIP1559_BASE_FEE_MULTIPLIER:{def:1.5,parser:i,desc:"mutiplier for the base fee that is composing the maxFeePerGas property"},EXPERIMENTAL_BLE:{def:!1,parser:s,desc:"enable experimental support of Bluetooth"},EXPERIMENTAL_CURRENCIES:{def:"",parser:a,desc:"enable experimental support of currencies (comma separated)"},EXPERIMENTAL_EXPLORERS:{def:!1,parser:s,desc:"enable experimental explorer APIs"},EXPERIMENTAL_LANGUAGES:{def:!1,parser:s,desc:"enable experimental languages"},EXPERIMENTAL_MANAGER:{def:!1,parser:s,desc:"enable an experimental version of Manager"},EXPERIMENTAL_ROI_CALCULATION:{def:!1,parser:s,desc:"enable an experimental version of the portfolio percentage calculation"},EXPERIMENTAL_SEND_MAX:{def:!1,parser:s,desc:"force enabling SEND MAX even if not yet stable"},EXPERIMENTAL_USB:{def:!1,parser:s,desc:"enable an experimental implementation of USB support"},EXPERIMENTAL_SWAP:{def:!1,parser:s,desc:"enable an experimental swap interface"},EXPLORER:{def:"https://explorers.api.live.ledger.com",parser:a,desc:"Ledger generic explorer API"},EXPLORER_STAGING:{def:"https://explorers.api-01.live.ledger-stg.com",parser:a,desc:"Ledger staging explorer API"},EXPLORER_BETA:{def:"https://explorers.api.live.ledger.com",parser:a,desc:"Ledger generic explorer beta API"},EXPLORER_SATSTACK:{def:"http://localhost:20000",parser:a,desc:"Ledger satstack Bitcoin explorer API"},EXPORT_EXCLUDED_LOG_TYPES:{def:"ble-frame",parser:a,desc:"comma-separated list of excluded log types for exported logs"},EXPORT_MAX_LOGS:{def:5e3,parser:o,desc:"maximum logs to keep for export"},DISABLE_APP_VERSION_REQUIREMENTS:{def:!1,parser:s,desc:"force an old application version to be accepted regardless of its version"},FORCE_PROVIDER:{def:1,parser:o,desc:"use a different provider for app store (for developers only)"},FILTER_ZERO_AMOUNT_ERC20_EVENTS:{def:!0,parser:s,desc:"Remove filter of address poisoning"},GET_CALLS_RETRY:{def:2,parser:o,desc:"how many times to retry a GET http call"},GET_CALLS_TIMEOUT:{def:6e4,parser:o,desc:"how much time to timeout a GET http call"},HIDE_EMPTY_TOKEN_ACCOUNTS:{def:!1,parser:s,desc:"hide the sub accounts when they are empty"},KEYCHAIN_OBSERVABLE_RANGE:{def:0,parser:o,desc:"overrides the gap limit specified by BIP44 (default to 20)"},LEDGER_CLIENT_VERSION:{def:"",parser:a,desc:"the 'X-Ledger-Client-Version' HTTP header to use for queries to Ledger APIs"},LEDGER_COUNTERVALUES_API:{def:"https://countervalues.live.ledger.com",parser:a,desc:"Ledger countervalues API"},LEDGER_REST_API_BASE:{def:"https://explorers.api.live.ledger.com",parser:a,desc:"DEPRECATED"},LEGACY_KT_SUPPORT_TO_YOUR_OWN_RISK:{def:!1,parser:s,desc:"enable sending to KT accounts. Not tested."},MANAGER_API_BASE:{def:"https://manager.api.live.ledger.com/api",parser:a,desc:"Ledger Manager API"},MANAGER_DEV_MODE:{def:!1,parser:s,desc:"enable visibility of utility apps in Manager"},MANAGER_INSTALL_DELAY:{def:1e3,parser:o,desc:"defines the time to wait before installing apps to prevent known glitch (<=1.5.5) when chaining installs"},MAPPING_SERVICE:{def:"https://mapping-service.api.ledger.com",parser:a,desc:""},MAX_ACCOUNT_NAME_SIZE:{def:50,parser:o,desc:"maximum size of account names"},MOCK:{def:"",parser:a,desc:"switch the app into a MOCK mode for test purpose, the value will be used as a seed for the rng. Avoid falsy values."},MOCK_COUNTERVALUES:{def:"",parser:a,desc:"switch the countervalues resolution into a MOCK mode for test purpose"},MOCK_APP_UPDATE:{def:!1,parser:s,desc:"Always shows app update in the manager"},MOCK_EXCHANGE_TEST_CONFIG:{def:!1,parser:s,desc:"mock the cryptoassets config and test partner (in the context of app-exchange)"},MOCK_REMOTE_LIVE_MANIFEST:{def:"",parser:a,desc:"mock remote live app manifest"},MOCK_OS_VERSION:{def:"",parser:a,desc:"if defined, overrides the os and version. format: os@version. Example: Windows_NT@6.1.7601"},MOCK_NO_BYPASS:{def:!1,parser:s,desc:"if defined, avoids bypass of the currentDevice in the store."},NFT_CURRENCIES:{def:"ethereum,polygon",parser:a,desc:"set the currencies where NFT is active"},NFT_ETH_METADATA_SERVICE:{def:"https://nft.api.live.ledger.com",parser:a,desc:"service uri used to get the metadata of an nft"},OPERATION_ADDRESSES_LIMIT:{def:100,parser:o,desc:"limit the number of addresses in from/to of operations"},OPERATION_OPTIMISTIC_RETENTION:{def:18e5,parser:o,desc:"timeout to keep an optimistic operation that was broadcasted but not yet visible from the coin implementation or the API"},OPERATION_PAGE_SIZE_INITIAL:{def:100,parser:o,desc:"defines the initial default operation length page to use"},POLKADOT_ELECTION_STATUS_THRESHOLD:{def:25,parser:o,desc:"in blocks - number of blocks before Polkadot election effectively opens to consider it as open and disable all staking features"},SATSTACK:{def:!1,parser:s,desc:"Switch to satstack mode"},SCAN_FOR_INVALID_PATHS:{def:!1,parser:s,desc:"enable searching accounts in exotic derivation paths"},SEED:{def:"",parser:a,desc:"(dev feature) seed to be used by speculos (device simulator)"},SHOW_LEGACY_NEW_ACCOUNT:{def:!1,parser:s,desc:"allow the creation of legacy accounts"},SIMPLE_HASH_API_BASE:{def:"https://simplehash.api.live.ledger.com/api/v0",parser:a,desc:"SimpleHash API base url"},SKIP_ONBOARDING:{def:!1,parser:s,desc:"dev flag to skip onboarding flow"},SPECULOS_API_PORT:{def:0,parser:o,desc:"API port for speculos"},SPECULOS_PID_OFFSET:{def:0,parser:o,desc:"offset to be added to the speculos pid and avoid collision with other instances"},SPECULOS_USE_WEBSOCKET:{def:!1,parser:s,desc:"Use speculos websocket interface instead of Rest API"},SWAP_API_BASE:{def:"https://swap.ledger.com/v5",parser:a,desc:"Swap API base"},SWAP_USER_IP:{def:"",parser:a,desc:"Swap IP"},SWAP_DISABLE_APPS_INSTALL:{def:!1,parser:s,desc:"bypass app checks on Nano for speculos swap tests"},SYNC_ALL_INTERVAL:{def:48e4,parser:o,desc:"delay between successive sync"},SYNC_BOOT_DELAY:{def:2e3,parser:o,desc:"delay before the sync starts"},SYNC_PENDING_INTERVAL:{def:1e4,parser:o,desc:"delay between sync when an operation is still pending"},SYNC_OUTDATED_CONSIDERED_DELAY:{def:6e5,parser:o,desc:"delay until Live consider a sync outdated"},SYNC_MAX_CONCURRENT:{def:4,parser:o,desc:"maximum limit to synchronize accounts concurrently to limit overload"},BOT_MAX_CONCURRENT:{def:10,parser:o,desc:"maximum limit to run bot spec in parallel"},USER_ID:{def:"",parser:a,desc:"unique identifier of app instance. used to derivate dissociated ids for difference purposes (e.g. the firmware update incremental deployment)."},WALLETCONNECT:{def:!1,parser:s,desc:"is walletconnect enabled"},CLOUD_SYNC_API_STAGING:{def:"https://cloud-sync-backend.api.aws.stg.ldg-tech.com",parser:a,desc:"wallet sync api staging base url"},CLOUD_SYNC_API_PROD:{def:"https://cloud-sync.api.live.ledger.com",parser:a,desc:"wallet sync api production base url"},WITH_DEVICE_POLLING_DELAY:{def:500,parser:i,desc:"delay when polling device"},ANNOUNCEMENTS_API_URL:{def:"https://cdn.live.ledger.com/announcements",parser:a,desc:"url used to fetch new announcements"},ANNOUNCEMENTS_API_VERSION:{def:1,parser:o,desc:"version used for the announcements api"},STATUS_API_URL:{def:"https://ledger.statuspage.io/api",parser:a,desc:"url used to fetch ledger status"},STATUS_API_VERSION:{def:2,parser:o,desc:"version used for ledger status api"},TEZOS_MAX_TX_QUERIES:{def:100,parser:o,desc:"safe max on maximum number of queries to synchronize a tezos account"},TRUSTCHAIN_API_STAGING:{def:"https://trustchain-backend.api.aws.stg.ldg-tech.com",parser:a,desc:"Trustchain API Staging"},TRUSTCHAIN_API_PROD:{def:"https://trustchain.api.live.ledger.com",parser:a,desc:"Trustchain API Prod"},PLATFORM_DEBUG:{def:!1,parser:s,desc:"enable visibility of debug apps and tools in Platform Catalog"},PLATFORM_EXPERIMENTAL_APPS:{def:!1,parser:s,desc:"enable visibility of experimental apps and tools in Platform Catalog"},PLATFORM_MANIFEST_API_URL:{def:"https://live-app-catalog.ledger.com/api/v1/apps",parser:a,desc:"url used to fetch platform app manifests"},PLATFORM_LOCAL_MANIFEST_JSON:{def:"",parser:a,desc:'json manifest for a local (test) platform app manifests. How to use: PLATFORM_LOCAL_MANIFEST_JSON="$(cat /path/to/file.json)"'},PLATFORM_GLOBAL_CATALOG_API_URL:{def:"https://cdn.live.ledger.com/platform/catalog/v1/data.json",parser:a,desc:"url used to fetch platform app manifests"},PLATFORM_GLOBAL_CATALOG_STAGING_API_URL:{def:"https://cdn.live.ledger-stg.com/platform/catalog/v1/data.json",parser:a,desc:"url used to fetch platform app manifests (staging)"},PLATFORM_RAMP_CATALOG_API_URL:{def:"https://cdn.live.ledger.com/platform/trade/v1/data.json",parser:a,desc:"url used to fetch platform app manifests"},PLATFORM_RAMP_CATALOG_STAGING_API_URL:{def:"https://cdn.live.ledger-stg.com/platform/trade/v1/data.json",parser:a,desc:"url used to fetch platform app manifests (staging)"},PLATFORM_API_URL:{def:"",parser:a,desc:"url used to fetch platform catalog"},PLATFORM_API_VERSION:{def:1,parser:o,desc:"version used for the platform api"},PLAYWRIGHT_RUN:{def:!1,parser:s,desc:"true when launched for E2E testing"},MARKET_API_URL:{def:"https://proxycg.api.live.ledger.com/api/v3",parser:a,desc:"Market data api"},USE_LEARN_STAGING_URL:{def:!1,parser:s,desc:"use the staging URL for the learn page"},DYNAMIC_CAL_BASE_URL:{def:"https://cdn.live.ledger.com/cryptoassets",parser:a,desc:"bucket S3 of the dynamic cryptoassets list"},CAL_SERVICE_URL:{def:"https://crypto-assets-service.api.ledger.com",parser:a,desc:"Cryptoassets list service url"},FEATURE_FLAGS:{def:"{}",parser:e=>{try{if("string"!=typeof e)throw new Error;return JSON.parse(e)}catch(e){return undefined}},desc:"key value map for feature flags: {[key in FeatureId]?: Feature]}"},PERFORMANCE_CONSOLE:{def:!1,parser:s,desc:"Show a performance overlay on the app UI"},ETHEREUM_STUCK_TRANSACTION_TIMEOUT:{def:3e5,parser:o,desc:"Time after which an optimisc operation is considered stuck"},EVM_REPLACE_TX_LEGACY_GASPRICE_FACTOR:{def:1.3,parser:i,desc:"Replace transaction gasprice factor for legacy evm transaction. This value should be 1.1 minimum since this is the minimum increase required by most nodes"},EVM_REPLACE_TX_EIP1559_MAXFEE_FACTOR:{def:1.3,parser:i,desc:"Replace transaction max fee factor for EIP1559 evm transaction. This value should be 1.1 minimum since this is the minimum increase required by most nodes"},EVM_REPLACE_TX_EIP1559_MAXPRIORITYFEE_FACTOR:{def:1.1,parser:i,desc:"Replace transaction max priority fee factor for EIP1559 evm transaction. This value should be 1.1 minimum since this is the minimum increase required by most nodes"},ENABLE_NETWORK_LOGS:{def:!1,parser:s,desc:"Enable network request and responses logs. Errors are always logged"},CRYPTO_ASSET_SEARCH_KEYS:{def:["ticker","name","keywords"],parser:c,desc:"Fuse search attributes to find a currency according to user input"},VERBOSE:{def:[],parser:c,desc:'Sets up debug console printing of logs. `VERBOSE=1` or `VERBOSE=true`: to print all logs | `VERBOSE="apdu,hw,transport,hid-verbose"` : filtering on a list of log `type` separated by a `,`'},DEFAULT_TRANSACTION_POLLING_INTERVAL:{def:3e4,parser:o,desc:"Default interval to poll for transaction confirmation in speedup/cancel evm flow (in ms)"},LOW_BATTERY_PERCENTAGE:{def:20,parser:o,desc:"Configure the low battery percentage threshold"},LOG_DRAWERS:{def:!1,parser:s,desc:"Enable logs for drawers"}};r.getDefinition=e=>e in l?l[e]:undefined;const u=Object.keys(l).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:l[t].def})),{}),d=Object.assign({},u);r.getAllEnvNames=()=>Object.keys(l);r.getAllEnvs=()=>Object.assign({},d);r.getEnv=e=>d[e];r.getEnvDefault=e=>u[e];r.isEnvDefault=e=>d[e]===u[e];r.getEnvDesc=e=>l[e].desc,r.changes=new n.Subject;r.setEnv=(e,t)=>{const n=d[e];n!==t&&(d[e]=t,r.changes.next({name:e,value:t,oldValue:n}))};r.setEnvUnsafe=(e,t)=>{const n=(0,r.getDefinition)(e);if(!n)return!1;const{parser:o}=n,i=o(t);return i===undefined||null===i?(console.warn(`Invalid ENV value for ${e}`),!1):((0,r.setEnv)(e,i),!0)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>@ledgerhq/live-env",file:"node_modules/@ledgerhq/live-env/lib/env.js"}],[880,{"./env":879},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./env"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>@ledgerhq/live-env",file:"node_modules/@ledgerhq/live-env/lib/index.js"}],[881,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.listen=r.LocalTracer=r.trace=r.log=void 0;let n=0;const o=[];r.log=(e,t,r)=>{const o={type:e,id:String(++n),date:new Date};t&&(o.message=t),r&&(o.data=r),s(o)};r.trace=({type:e,message:t,data:r,context:o})=>{const i={type:e,id:String(++n),date:new Date};t&&(i.message=t),r&&(i.data=r),o&&(i.context=o),s(i)};class i{constructor(e,t){this.type=e,this.context=t}trace(e,t){(0,r.trace)({type:this.type,message:e,data:t,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context=Object.assign(Object.assign({},this.context),e)}getType(){return this.type}setType(e){this.type=e}withType(e){return new i(e,this.context)}withContext(e){return new i(this.type,e)}withUpdatedContext(e){return new i(this.type,Object.assign(Object.assign({},this.context),e))}}r.LocalTracer=i;function s(e){for(let t=0;t<o.length;t++)try{o[t](e)}catch(e){console.error(e)}}r.listen=e=>(o.push(e),()=>{const t=o.indexOf(e);-1!==t&&(o[t]=o[o.length-1],o.pop())}),"undefined"!=typeof window&&(window.__ledgerLogsListen=r.listen)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/logs",file:"node_modules/@ledgerhq/logs/lib/index.js"}],[89,{"../../../shared/constants/notifications":5265,"../platforms/extension":291,"@metamask/safe-event-emitter":2306},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.NOTIFICATION_MANAGER_EVENTS=void 0;var n=s(e("@metamask/safe-event-emitter")),o=s(e("../platforms/extension")),i=e("../../../shared/constants/notifications");function s(e){return e&&e.__esModule?e:{default:e}}const a=r.NOTIFICATION_MANAGER_EVENTS={POPUP_CLOSED:"onPopupClosed"};class c extends n.default{constructor(){super(),this.platform=new o.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const r=await this._getPopup(t);if(r)await this.platform.focusWindow(r.id);else{let e=0,t=0;try{const r=await this.platform.getLastFocusedWindow();t=r.top,e=Math.max(r.left+(r.width-i.NOTIFICATION_WIDTH),0)}catch(r){const{screenX:n,screenY:o,outerWidth:s}=window;t=Math.max(o,0),e=Math.max(n+(s-i.NOTIFICATION_WIDTH),0)}const r=await this.platform.openWindow({url:"notification.html",type:"popup",width:i.NOTIFICATION_WIDTH,height:i.NOTIFICATION_HEIGHT,left:e,top:t});r.left!==e&&"fullscreen"!==r.state&&await this.platform.updateWindowPosition(r.id,e,t),this._setCurrentPopupId(r.id),this._popupId=r.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(a.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}r.default=c}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[9,{"@metamask/base-controller":1396},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccountOrderController=void 0;var n=e("@metamask/base-controller");const o={pinnedAccountList:[],hiddenAccountList:[]},i={pinnedAccountList:{persist:!0,anonymous:!0},hiddenAccountList:{persist:!0,anonymous:!0}};class s extends n.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:i,name:"AccountOrderController",state:{...o,...t}})}updateAccountsList(e){this.update((t=>(t.pinnedAccountList=e,t)))}updateHiddenAccountsList(e){this.update((t=>(t.hiddenAccountList=e,t)))}}r.AccountOrderController=s}}},{package:"$root$",file:"app/scripts/controllers/account-order.ts"}],[90,{"../../../../shared/constants/offscreen-communication":5266,"eth-lattice-keyring":3756},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LatticeKeyringOffscreen=void 0;var n,o=(n=e("eth-lattice-keyring"))&&n.__esModule?n:{default:n},i=e("../../../../shared/constants/offscreen-communication");class s extends o.default{constructor(e={}){super(e)}async _getCreds(){try{const e=this.appName?this.appName:"Unknown",t=`${i.KnownOrigins.lattice}?keyring=${e}&forceLogin=true`;return await new Promise(((e,r)=>{chrome.runtime.sendMessage({target:i.OffscreenCommunicationTarget.latticeOffscreen,params:{url:t}},(t=>{t.error&&r(t.error),e(t.result)}))}))}catch(e){throw new Error(e)}}}r.LatticeKeyringOffscreen=s,function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s,"type",void 0),s.type=o.default.type}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/lattice-offscreen-keyring.ts"}],[91,{"../../../../shared/constants/offscreen-communication":5266},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerOffscreenBridge=void 0;var n=e("../../../../shared/constants/offscreen-communication");function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.LedgerOffscreenBridge=class{constructor(){o(this,"isDeviceConnected",!1)}init(){return chrome.runtime.onMessage.addListener((e=>{e.target===n.OffscreenCommunicationTarget.extension&&e.event===n.OffscreenCommunicationEvents.ledgerDeviceConnect&&(this.isDeviceConnected=!0)})),Promise.resolve()}destroy(){return Promise.resolve()}getOptions(){return Promise.resolve({})}setOptions(){return Promise.resolve()}attemptMakeApp(){return new Promise(((e,t)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.makeApp},(r=>{r.success?e(!0):r.error?t(r.error):t(new Error("Unknown error occurred"))}))}))}updateTransportMethod(e){return new Promise(((t,r)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.updateTransport,params:{transportType:e}},(e=>{e.success?t(!0):r(new Error("Ledger transport could not be updated"))}))}))}getPublicKey(e){return new Promise(((t,r)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.getPublicKey,params:e},(e=>{e.success?t(e.payload):r(e.payload.error)}))}))}deviceSignTransaction(e){return new Promise(((t,r)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.signTransaction,params:e},(e=>{e.success?t(e.payload):r(e.payload.error)}))}))}deviceSignMessage(e){return new Promise(((t,r)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.signPersonalMessage,params:e},(e=>{e.success?t(e.payload):r(e.payload.error)}))}))}deviceSignTypedData(e){return new Promise(((t,r)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.signTypedData,params:e},(e=>{e.success?t(e.payload):r(e.payload.error)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/ledger-offscreen-bridge.ts"}],[92,{"../../../../shared/constants/offscreen-communication":5266},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorOffscreenBridge=void 0;var n=e("../../../../shared/constants/offscreen-communication");function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.TrezorOffscreenBridge=class{constructor(){o(this,"model",void 0),o(this,"minorVersion",void 0)}init(e){return chrome.runtime.onMessage.addListener((e=>{e.target===n.OffscreenCommunicationTarget.extension&&e.event===n.OffscreenCommunicationEvents.trezorDeviceConnect&&(this.model=e.payload.model,this.minorVersion=e.payload.minorVersion)})),new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.init,params:e},(()=>{t()}))}))}dispose(){return new Promise((e=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.dispose},(()=>{e()}))}))}getPublicKey(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.getPublicKey,params:e},(e=>{t(e)}))}))}ethereumSignTransaction(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signTransaction,params:e},(e=>{t(e)}))}))}ethereumSignMessage(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signMessage,params:e},(e=>{t(e)}))}))}ethereumSignTypedData(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signTypedData,params:e},(e=>{t(e)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/trezor-offscreen-bridge.ts"}],[93,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.IndexedDBPPOMStorage=void 0;const i=async(e,t,r)=>{const n=await crypto.subtle.digest("SHA-256",t);if(Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")!==r)throw new Error(`Checksum mismatch for key ${e}`)};var s=new WeakSet;function a(e){return new Promise(((t,r)=>{const n=indexedDB.open(this.storeName,this.dbVersion);n.onerror=e=>{var t;r(new Error(`Failed to open database ${this.storeName}: ${null===(t=e.target)||void 0===t?void 0:t.error}`))},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:["name","chainId"]})},n.onsuccess=r=>{const n=r.target.result.transaction([this.storeName],e).objectStore(this.storeName);t(n)}}))}r.IndexedDBPPOMStorage=class{constructor(e,t){n(this,s),o(this,"storeName",void 0),o(this,"dbVersion",void 0),this.storeName=e,this.dbVersion=t}async objectStoreAction(e,t,r="readonly"){return new Promise(((n,o)=>{(function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")})(s,this,a).call(this,r).then((r=>{const i=r[e](t);i.onsuccess=async e=>{n(e)},i.onerror=t=>{var r;o(new Error(`Error in indexDB operation ${e}: ${null===(r=t.target)||void 0===r?void 0:r.error}`))}})).catch((e=>{o(e)}))}))}async read(e,t){var r;const n=null===(r=(await this.objectStoreAction("get",[e.name,e.chainId])).target)||void 0===r||null===(r=r.result)||void 0===r?void 0:r.data;return await i(e,n,t),n}async write(e,t,r){await i(e,t,r),await this.objectStoreAction("put",{...e,data:t},"readwrite")}async delete(e){await this.objectStoreAction("delete",[e.name,e.chainId],"readwrite")}async dir(){var e;return null===(e=(await this.objectStoreAction("getAllKeys")).target)||void 0===e?void 0:e.result.map((([e,t])=>({name:e,chainId:t})))}}}}},{package:"$root$",file:"app/scripts/lib/ppom/indexed-db-backend.ts"}],[94,{"../../../../shared/constants/app":5248,"../../../../shared/constants/security-provider":5270,"../../../../shared/constants/transaction":5278,"../../../../shared/lib/trace":5291,"../../../../shared/modules/selectors/networks":5320,"./ppom-util":95,"@metamask/controller-utils":1422},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPPOMMiddleware=function(e,t,r,d,f,p){return async(h,g,m)=>{try{const{securityAlertsEnabled:g}=t.state,{chainId:m}=(0,a.getProviderConfig)({metamask:r.state})??{};if(!m)return;if(!g||!u.includes(h.method))return;const b=h.params[0];if("string"==typeof b){const{isSIWEMessage:e}=(0,n.detectSIWE)({data:b});if(e)return}else if(h.method===o.MESSAGE_TYPE.ETH_SEND_TRANSACTION){const{to:e}=b??{},t=f.listAccounts();if(t.some((({address:t})=>(null==t?void 0:t.toLowerCase())===(null==e?void 0:e.toLowerCase()))))return}const _=(0,l.generateSecurityAlertId)();(0,c.trace)({name:c.TraceName.PPOMValidation,parentContext:h.traceContext},(()=>(0,l.validateRequestWithPPOM)({ppomController:e,request:h,securityAlertId:_,chainId:m,updateSecurityAlertResponse:p})));const y={...s.SECURITY_ALERT_RESPONSE_CHECKING_CHAIN,securityAlertId:_};i.SIGNING_METHODS.includes(h.method)&&d.addSignatureSecurityAlertResponse(y),h.securityAlertResponse=y}catch(e){h.securityAlertResponse=(0,l.handlePPOMError)(e,"Error createPPOMMiddleware: ")}finally{m()}}};var n=e("@metamask/controller-utils"),o=e("../../../../shared/constants/app"),i=e("../../../../shared/constants/transaction"),s=e("../../../../shared/constants/security-provider"),a=e("../../../../shared/modules/selectors/networks"),c=e("../../../../shared/lib/trace"),l=e("./ppom-util");const u=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction",...i.SIGNING_METHODS])}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-middleware.ts"}],[95,{"../../../../shared/constants/security-provider":5270,"../../../../shared/constants/transaction":5278,"./security-alerts-api":97,"@metamask/transaction-controller":2698,uuid:5175},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.METHOD_SIGN_TYPED_DATA_V4=r.METHOD_SIGN_TYPED_DATA_V3=void 0,r.generateSecurityAlertId=function(){return(0,o.v4)()},r.handlePPOMError=p,r.isChainSupported=h,r.updateSecurityAlertResponse=async function({appStateController:e,method:t,securityAlertId:r,securityAlertResponse:n,signatureController:o,transactionController:i}){const a=s.SIGNING_METHODS.includes(t),c=await async function(e,t,r,n){const o=s.SIGNING_METHODS.includes(t);for(;;){let t;if(t=o?Object.values(r.messages).find((t=>{var r;return(null===(r=t.securityAlertResponse)||void 0===r?void 0:r.securityAlertId)===e})):n.state.transactions.find((t=>{var r;return(null===(r=t.securityAlertResponse)||void 0===r?void 0:r.securityAlertId)===e})),t)return t;await new Promise((e=>setTimeout(e,100)))}}(r,t,o,i);a?e.addSignatureSecurityAlertResponse({...n,securityAlertId:r}):i.updateSecurityAlertResponse(c.id,{...n,securityAlertId:r})},r.validateRequestWithPPOM=async function({ppomController:e,request:t,securityAlertId:r,chainId:o,updateSecurityAlertResponse:s}){try{if(!await h(o))return void await s(t.method,r,i.SECURITY_ALERT_RESPONSE_CHAIN_NOT_SUPPORTED);await s(t.method,r,i.LOADING_SECURITY_ALERT_RESPONSE);const c=function(e){if(t=e,t.method!==l)return function(e){if((e.method===d||e.method===u)&&Array.isArray(e.params))return{...e,params:e.params.slice(0,2)};return e}(e);var t;const r=e.params[0],o=(0,n.normalizeTransactionParams)(r);return{...e,params:[o]}}(t),f=(0,a.isSecurityAlertsAPIEnabled)()?await async function(e,t,r){try{return{...await(0,a.validateWithSecurityAlertsAPI)(t,r),source:i.SecurityAlertSource.API}}catch(n){return p(n,"Error validating request with security alerts API"),await g(e,r,t)}}(e,o,c):await g(e,c,o);await s(t.method,r,f)}catch(e){await s(t.method,r,p(e,"Error validating JSON RPC using PPOM: "))}};var n=e("@metamask/transaction-controller"),o=e("uuid"),i=e("../../../../shared/constants/security-provider"),s=e("../../../../shared/constants/transaction"),a=e("./security-alerts-api");const{sentry:c}=global,l="eth_sendTransaction",u=r.METHOD_SIGN_TYPED_DATA_V3="eth_signTypedData_v3",d=r.METHOD_SIGN_TYPED_DATA_V4="eth_signTypedData_v4",f={result_type:i.BlockaidResultType.Errored,reason:i.BlockaidReason.errored};function p(e,t){const r=function(e){if("object"==typeof e||"string"==typeof e)return e;return JSON.stringify(e)}(e),n=function(e){if(e instanceof Error)return`${e.name}: ${e.message}`;return JSON.stringify(e)}(e);return null==c||c.captureException(e),console.error(t,r),{...f,description:n}}async function h(e){let t=i.SECURITY_PROVIDER_SUPPORTED_CHAIN_IDS_FALLBACK_LIST;try{(0,a.isSecurityAlertsAPIEnabled)()&&(t=await(0,a.getSecurityAlertsAPISupportedChainIds)())}catch(e){p(e,"Error fetching supported chains from security alerts API")}return t.includes(e)}async function g(e,t,r){return{...await e.usePPOM((e=>e.validateJsonRpc(t)),r),source:i.SecurityAlertSource.Local}}}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-util.ts"}],[96,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.PPOM=void 0,r.initSync=function(e){if(n!==undefined)return n;const t=A();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const r=new WebAssembly.Instance(e,t);return S(r,e)},r.main=function(){n.main()};const o="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&o.decode();let i=null;function s(){return null!==i&&0!==i.byteLength||(i=new Uint8Array(n.memory.buffer)),i}function a(e,t){return e>>>=0,o.decode(s().subarray(e,e+t))}const c=new Array(128).fill(undefined);c.push(undefined,null,!0,!1);let l=c.length;function u(e){l===c.length&&c.push(c.length+1);const t=l;return l=c[t],c[t]=e,t}function d(e){return c[e]}function f(e){const t=d(e);return function(e){e<132||(c[e]=l,l=e)}(e),t}let p=0;const h="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},g="function"==typeof h.encodeInto?function(e,t){return h.encodeInto(e,t)}:function(e,t){const r=h.encode(e);return t.set(r),{read:e.length,written:r.length}};function m(e,t,r){if(r===undefined){const r=h.encode(e),n=t(r.length,1)>>>0;return s().subarray(n,n+r.length).set(r),p=r.length,n}let n=e.length,o=t(n,1)>>>0;const i=s();let a=0;for(;a<n;a++){const t=e.charCodeAt(a);if(t>127)break;i[o+a]=t}if(a!==n){0!==a&&(e=e.slice(a)),o=r(o,n,n=a+3*e.length,1)>>>0;const t=s().subarray(o+a,o+n);a+=g(e,t).written}return p=a,o}let b=null;function _(){return null!==b&&0!==b.byteLength||(b=new Int32Array(n.memory.buffer)),b}function y(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let r="[";t>0&&(r+=y(e[0]));for(let n=1;n<t;n++)r+=", "+y(e[n]);return r+="]",r}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(!(r.length>1))return toString.call(e);if(n=r[1],"Object"==n)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:n}function E(e,t,r){n.wasm_bindgen__convert__closures__invoke1_mut(e,t,u(r))}function w(e,t){n._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__destroy(e,t)}let v=null;function P(e,t){const r=t(4*e.length,4)>>>0,o=(null!==v&&0!==v.byteLength||(v=new Uint32Array(n.memory.buffer)),v);for(let t=0;t<e.length;t++)o[r/4+t]=u(e[t]);return p=e.length,r}function T(e,t){try{return e.apply(this,t)}catch(e){n.__wbindgen_exn_store(u(e))}}class O{static __wrap(e){e>>>=0;const t=Object.create(O.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();n.__wbg_ppom_free(e)}static new(e,t){const r=P(t,n.__wbindgen_malloc),o=p;return f(n.ppom_new(u(e),r,o))}validateJsonRpc(e){return f(n.ppom_validateJsonRpc(this.__wbg_ptr,u(e)))}static version(){return f(n.ppom_version())}}function A(){const e={wbg:{}};return e.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return u(d(e).buffer)},e.wbg.__wbg_call_01734de55d61e11d=function(){return T((function(e,t,r){return u(d(e).call(d(t),d(r)))}),arguments)},e.wbg.__wbg_call_4c92f6aec1e1d6e6=function(){return T((function(e,t,r,n){return u(d(e).call(d(t),d(r),d(n)))}),arguments)},e.wbg.__wbg_from_d7c216d4616bb368=function(e){return u(Array.from(d(e)))},e.wbg.__wbg_get_44be0491f933a435=function(e,t){return u(d(e)[t>>>0])},e.wbg.__wbg_length_72e2208bbc0efc61=function(e){return d(e).length},e.wbg.__wbg_length_d813e535247d427e=function(e){return d(e).length},e.wbg.__wbg_length_fff51ee6522a1a18=function(e){return d(e).length},e.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var r={a:e,b:t};const o=new Promise(((e,t)=>{const o=r.a;r.a=0;try{return function(e,t,r,o){n.wasm_bindgen__convert__closures__invoke2_mut(e,t,u(r),u(o))}(o,r.b,e,t)}finally{r.a=o}}));return u(o)}finally{r.a=r.b=0}},e.wbg.__wbg_new_8125e318e6245eed=function(e){return u(new Uint8Array(d(e)))},e.wbg.__wbg_parse_670c19d4e984792e=function(){return T((function(e,t){return u(JSON.parse(a(e,t)))}),arguments)},e.wbg.__wbg_ppom_new=function(e){return u(O.__wrap(e))},e.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return u(Promise.resolve(d(e)))},e.wbg.__wbg_set_5cf90238115182c3=function(e,t,r){d(e).set(d(t),r>>>0)},e.wbg.__wbg_stringify_e25465938f3f611f=function(){return T((function(e){return u(JSON.stringify(d(e)))}),arguments)},e.wbg.__wbg_then_b2267541e2a73865=function(e,t,r){return u(d(e).then(d(t),d(r)))},e.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return u(d(e).then(d(t)))},e.wbg.__wbindgen_cb_drop=function(e){const t=f(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbindgen_closure_wrapper_wasm_bindgen__closure__Closure_T___wrap__breaks_if_inlined=function(e,t,r){const n=function(e,t,r,n){const o={a:e,b:t,cnt:1},i=(...e)=>{o.cnt++;const t=o.a;o.a=0;try{return n(t,o.b,...e)}finally{0==--o.cnt?r(t,o.b):o.a=t}};return i.original=o,i}(e,t,w,E);return u(n)},e.wbg.__wbindgen_debug_string=function(e,t){const r=m(y(d(t)),n.__wbindgen_malloc,n.__wbindgen_realloc),o=p;_()[e/4+1]=o,_()[e/4+0]=r},e.wbg.__wbindgen_error_new=function(e,t){return u(new Error(a(e,t)))},e.wbg.__wbindgen_is_undefined=function(e){return d(e)===undefined},e.wbg.__wbindgen_memory=function(){return u(n.memory)},e.wbg.__wbindgen_object_drop_ref=function(e){f(e)},e.wbg.__wbindgen_string_get=function(e,t){const r=d(t),o="string"==typeof r?r:undefined;var i,s=(i=o)===undefined||null===i?0:m(o,n.__wbindgen_malloc,n.__wbindgen_realloc),a=p;_()[e/4+1]=a,_()[e/4+0]=s},e.wbg.__wbindgen_string_new=function(e,t){return u(a(e,t))},e.wbg.__wbindgen_throw=function(e,t){throw new Error(a(e,t))},e}function S(e,t){return n=e.exports,I.__wbindgen_wasm_module=t,b=null,v=null,i=null,n.__wbindgen_start(),n}async function I(e){if(n!==undefined)return n;const t=A();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:o}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}(await e,t);return S(r,o)}r.PPOM=O;r.default=I}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom.js"}],[97,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSecurityAlertsAPISupportedChainIds=async function(){return i(o)},r.isSecurityAlertsAPIEnabled=function(){const e="true";return"true"===e.toString()},r.validateWithSecurityAlertsAPI=async function(e,t){return i(`${n}/${e}`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})};const n="validate",o="supportedChains";async function i(e,t){const r=function(e){const t="https://security-alerts.api.cx.metamask.io";if(!t)throw new Error("Security alerts API URL is not set");return`${t}/${e}`}(e),n=await fetch(r,t);if(!n.ok)throw new Error(`Security alerts API request failed with status: ${n.status}`);return await n.json()}}}},{package:"$root$",file:"app/scripts/lib/ppom/security-alerts-api.ts"}],[98,{"./handlers":104,"@metamask/permission-controller":2133,"@metamask/rpc-errors":2304,"@metamask/snaps-rpc-methods":2479,"@metamask/utils":2761},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createMethodMiddleware=r.createLegacyMethodMiddleware=void 0;var n=e("@metamask/permission-controller"),o=e("@metamask/rpc-errors"),i=e("@metamask/snaps-rpc-methods"),s=e("@metamask/utils"),a=e("./handlers");const c=[...a.handlers,...n.permissionRpcMethods.handlers];r.createMethodMiddleware=l(c),r.createLegacyMethodMiddleware=l(a.legacyHandlers);function l(e){const t=e.reduce(((e,t)=>{for(const r of t.methodNames)e[r]=t;return e}),{}),r=new Set(e.flatMap((({hookNames:e})=>Object.getOwnPropertyNames(e))));return e=>{!function(e,t){const r=[];if(t.forEach((t=>{(0,s.hasProperty)(e,t)||r.push(t)})),r.length>0)throw new Error(`Missing expected hooks:\n\n${r.join("\n")}\n`);const n=Object.getOwnPropertyNames(e).filter((e=>!t.has(e)));if(n.length>0)throw new Error(`Received unexpected hooks:\n\n${n.join("\n")}\n`)}(e,r);return async(r,n,s,a)=>{const c=t[r.method];if(c){const{implementation:t,hookNames:l}=c;try{return await t(r,n,s,a,(0,i.selectHooks)(e,l))}catch(e){return a(e instanceof Error?e:o.rpcErrors.internal({data:e}))}}return s()}}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[99,{"../../../../shared/constants/network":5264,"@metamask/rpc-errors":2304},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createUnsupportedMethodMiddleware=function(){return async function(e,t,r,i){return o.UNSUPPORTED_RPC_METHODS.has(e.method)?i(n.rpcErrors.methodNotSupported()):r()}};var n=e("@metamask/rpc-errors"),o=e("../../../../shared/constants/network")}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createUnsupportedMethodMiddleware.ts"}],[4,{"../../shared/constants/app":5248,"../../shared/constants/metametrics":5260,"../../shared/constants/offscreen-communication":5266,"../../shared/modules/add-nonce-to-csp":5295,"../../shared/modules/browser-runtime.utils":5297,"../../shared/modules/mv3.utils":5310,"../../shared/modules/object.utils":5312,"../../shared/modules/provider-injection":5313,"../../shared/modules/selectors/networks":5320,"../../test/e2e/background-socket/socket-background-to-mocha":5331,"../../test/e2e/default-fixture":5333,"../../test/stub/keyring-bridge":5339,"./constants/marketing-site-whitelist":6,"./constants/sentry-state":7,"./first-time-state":41,"./fixtures/generate-wallet-state":42,"./lib/createStreamSink":70,"./lib/ens-ipfs/setup":77,"./lib/get-first-preferred-lang-code":79,"./lib/getObjStructure":80,"./lib/local-store":82,"./lib/migrator":86,"./lib/network-store":88,"./lib/notification-manager":89,"./lib/setup-initial-state-hooks":114,"./lib/util":135,"./metamask-controller":136,"./migrations":289,"./offscreen":290,"./platforms/extension":291,"@metamask/controller-utils":1422,"@metamask/notification-services-controller":2115,"@metamask/obs-store":2126,"@metamask/rpc-errors":2304,"@metamask/snaps-rpc-methods":2479,"@metamask/utils":2761,"debounce-stream":3702,events:3868,"extension-port-stream":3871,loglevel:4386,"readable-stream":4791,"webextension-polyfill":5225},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.loadStateFromPersistence=ve,r.setupController=Oe,r.statePersistenceEvents=void 0,e("./lib/setup-initial-state-hooks");var n=H(e("events")),o=e("readable-stream"),i=H(e("debounce-stream")),s=H(e("loglevel")),a=H(e("webextension-polyfill")),c=e("@metamask/obs-store"),l=e("@metamask/utils"),u=e("@metamask/controller-utils"),d=H(e("extension-port-stream")),f=e("@metamask/rpc-errors"),p=e("@metamask/snaps-rpc-methods"),h=e("@metamask/notification-services-controller"),g=e("../../shared/constants/app"),m=e("../../shared/constants/metametrics"),b=e("../../shared/modules/browser-runtime.utils"),_=e("../../shared/modules/mv3.utils"),y=e("../../shared/modules/object.utils"),E=(e("../../test/e2e/default-fixture"),e("../../test/e2e/background-socket/socket-background-to-mocha"),e("../../shared/constants/offscreen-communication"),e("../../test/stub/keyring-bridge")),w=e("../../shared/modules/selectors/networks"),v=e("../../shared/modules/add-nonce-to-csp"),P=e("../../shared/modules/provider-injection"),T=H(e("./migrations")),O=H(e("./lib/migrator")),A=H(e("./platforms/extension")),S=H(e("./lib/local-store")),I=H(e("./lib/network-store")),C=e("./constants/sentry-state"),N=H(e("./lib/createStreamSink")),x=q(e("./lib/notification-manager")),R=q(e("./metamask-controller")),k=H(e("./first-time-state")),j=H(e("./lib/get-first-preferred-lang-code")),L=H(e("./lib/getObjStructure")),M=H(e("./lib/ens-ipfs/setup")),D=e("./lib/util"),U=(e("./fixtures/generate-wallet-state"),e("./offscreen")),B=e("./constants/marketing-site-whitelist");function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(F=function(e){return e?r:t})(e)}function q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=F(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function H(e){return e&&e.__esModule?e:{default:e}}const G="#0376C9",V="#D73847",$=9,z=!1,K=z?new I.default:new S.default;global.stateHooks.getMostRecentPersistedState=()=>K.mostRecentRetrievedState;const{sentry:Y}=global;let W={...k.default};const X={[g.ENVIRONMENT_TYPE_POPUP]:!0,[g.ENVIRONMENT_TYPE_NOTIFICATION]:!0,[g.ENVIRONMENT_TYPE_FULLSCREEN]:!0},J=["trezor-connect"];s.default.setLevel("info",!1);const Z=new A.default,Q=new x.default;let ee=0,te=!1,re=!1;const ne={},oe={};let ie,se;const ae={};z&&(global.stateHooks.metamaskGetState=K.get.bind(K));const ce=new URL("https://metamask.github.io/phishing-warning/v4.1.0/"),le=ce.toString(),ue=1e3,de=r.statePersistenceEvents=new n.default,{promise:fe,resolve:pe,reject:he}=(0,D.deferredPromise)(),ge=async()=>{const e=await a.default.tabs.query({url:"<all_urls>",windowType:"normal"}).then((e=>((0,b.checkForLastErrorAndLog)(),e))).catch((()=>{(0,b.checkForLastErrorAndLog)()}));for(const t of e)a.default.tabs.sendMessage(t.id,{name:g.EXTENSION_MESSAGES.READY}).then((()=>{(0,b.checkForLastErrorAndLog)()})).catch((()=>{(0,b.checkForLastErrorAndLog)()}))};let me,be,_e;function ye(){const e=(new Date).toISOString();a.default.storage.session.set({timestamp:e})}async function Ee(){try{const t=_.isManifestV3?(0,U.createOffscreen)():null,r=await ve(),n=r.data,o=await(0,j.default)();let i;if(_.isManifestV3){var e;if(!1!==(null===(e=n.PreferencesController)||void 0===e?void 0:e.enableMV3TimestampSave)){const e=2e3;ye(),setInterval(ye,e)}const t=await a.default.storage.session.get(["isFirstMetaMaskControllerSetup"]);i=(null==t?void 0:t.isFirstMetaMaskControllerSetup)===undefined,await a.default.storage.session.set({isFirstMetaMaskControllerSetup:i})}Oe(n,o,z?{keyrings:{trezorBridge:E.FakeTrezorBridge,ledgerBridge:E.FakeLedgerBridge}}:{},i,r.meta,t),function(e){async function t(e,t){try{return await a.default.tabs.update(e,{url:t})}catch(e){return null==Y?void 0:Y.captureException(e)}}const r=!_.isManifestV3;a.default.webRequest.onBeforeRequest.addListener((n=>{var o,i,s;if(n.tabId===a.default.tabs.TAB_ID_NONE)return{};const{completedOnboarding:c}=e.onboardingController.state;if(!c)return{};if(!e.preferencesController.state.usePhishDetect)return{};if(n.initiator&&new URL(n.initiator).host===ce.host)return{};const{hostname:l,href:u,searchParams:d}=new URL(n.url);if(z&&d.has("IN_TEST_BYPASS_EARLY_PHISHING_DETECTION"))return{};e.phishingController.maybeUpdateState();const f=e.phishingController.isBlockedRequest(n.url);let p,h;if("main_frame"!==n.type&&"sub_frame"!==n.type||(p=e.phishingController.test(n.url)),!(null!==(o=p)&&void 0!==o&&o.result||f.result))return{};let g=l;null!==(i=p)&&void 0!==i&&i.result&&f.result?h=`${p.type} and ${f.type}`:null!==(s=p)&&void 0!==s&&s.result?h=p.type:(h=f.type,g=n.initiator),e.metaMetricsController.trackEvent({event:m.MetaMetricsEventName.PhishingPageDisplayed,category:m.MetaMetricsEventCategory.Phishing,properties:{url:g,referrer:{url:g},reason:h,requestDomain:f.result?l:undefined}});const b=new URLSearchParams({hostname:l,href:u}),_=new URL(le);_.hash=b.toString();const y=_.toString();return r?"main_frame"===n.type?{redirectUrl:y}:(t(n.tabId,y),{cancel:!0}):(t(n.tabId,y),{})}),{urls:["http://*/*","https://*/*","ws://*/*","wss://*/*"]},r?["blocking"]:[])}(ie),_.isManifestV3||(await async function(){let e;try{const t=new URL(le);let r,n;t.hash="#extensionStartup",e=window.document.createElement("iframe"),e.setAttribute("src",t.href),e.setAttribute("sandbox","allow-scripts allow-same-origin");const o=new Promise(((e,t)=>{r=e,n=t}));e.addEventListener("load",r),window.document.body.appendChild(e),setTimeout((()=>n(new we)),ue),await o}catch(e){e instanceof we?console.warn("Phishing warning page timeout; page not guaranteed to work offline."):console.error("Failed to initialize phishing warning page",e)}finally{e&&e.remove()}}(),(0,D.getPlatform)()===g.PLATFORM_FIREFOX&&function(){const e=btoa(a.default.runtime.getURL("/"));a.default.webRequest.onHeadersReceived.addListener((({responseHeaders:t,url:r})=>{const n=(0,P.checkURLForProviderInjection)(new URL(r)),o=ie.preferencesController.state.overrideContentSecurityPolicyHeader;if(n&&o)for(const r of t)"content-security-policy"===r.name.toLowerCase()&&(r.value=(0,v.addNonceToCsp)(r.value,e));return{responseHeaders:t}}),{types:["main_frame","sub_frame"],urls:["http://*/*","https://*/*"]},["blocking","responseHeaders"])}()),await ge(),s.default.info("MetaMask initialization complete."),pe()}catch(e){he(e)}}a.default.runtime.onConnect.addListener((async(...e)=>{await fe,me(...e)})),a.default.runtime.onConnectExternal.addListener((async(...e)=>{var t;await fe;null!==(t=e[0].sender.tab)&&void 0!==t&&t.id,be(...e)}));class we extends Error{constructor(){super("Timeout failed")}}async function ve(){const e=new O.default({migrations:T.default,defaultVersion:null});if(e.on("error",console.warn),se=await K.get()||e.generateInitialState(W),se&&!se.data&&(se=e.generateInitialState(W),Y.captureMessage("MetaMask - Empty vault found - unable to recover")),e.on("error",(e=>{const t=(0,L.default)(se);Y.captureException(e,{extra:{vaultStructure:t}})})),se=await e.migrateData(se),!se)throw new Error("MetaMask - migrator returned undefined");if(!(0,l.isObject)(se.meta))throw new Error(`MetaMask - migrator metadata has invalid type '${typeof se.meta}'`);if("number"!=typeof se.meta.version)throw new Error(`MetaMask - migrator metadata version has invalid type '${typeof se.meta.version}'`);if(!(0,l.isObject)(se.data))throw new Error(`MetaMask - migrator data has invalid type '${typeof se.data}'`);return K.setMetadata(se.meta),K.set(se.data),se}function Pe(e){var t;const{metaMetricsId:r}=ie.metaMetricsController.state;if(!(0,D.shouldEmitDappViewedEvent)(r))return;const n=ie.controllerMessenger.call("PermissionController:getPermissions",e),o=null==n||null===(t=n.eth_accounts)||void 0===t||null===(t=t.caveats[0])||void 0===t?void 0:t.value.length;if(!o)return;const i=ie.controllerMessenger.call("PreferencesController:getState"),s=Object.keys(i.identities).length;ie.metaMetricsController.trackEvent({event:m.MetaMetricsEventName.DappViewed,category:m.MetaMetricsEventCategory.InpageProvider,referrer:{url:e},properties:{is_first_visit:!1,number_of_accounts:s,number_of_accounts_connected:o}})}function Te(e){if(!e.sender||!e.sender.tab||!e.sender.url)return;const t=e.sender.tab.id,r=new URL(e.sender.url),{origin:n}=r;Object.keys(ae).includes(t)||(ae[t]=n);const o=ie.controllerMessenger.call("PermissionController:hasPermissions",n),i="New Tab"!==e.sender.tab.title;o&&i&&Pe(n)}function Oe(e,t,r,n,l,b){var E;ie=new R.default({infuraProjectId:"b6bf7d3508c941499b10025c0776eaf8",showUserConfirmation:Ae,initState:e,initLangCode:t,platform:Z,notificationManager:Q,browser:a.default,getRequestAccountTabIds:()=>oe,getOpenMetamaskTabsIds:()=>ne,localStore:K,overrides:r,isFirstMetaMaskControllerSetup:n,currentMigrationVersion:l.version,featureFlags:{},offscreenPromise:b}),(0,M.default)({getCurrentChainId:()=>(0,w.getCurrentChainId)({metamask:ie.networkController.state}),getIpfsGateway:ie.preferencesController.getIpfsGateway.bind(ie.preferencesController),getUseAddressBarEnsResolution:()=>ie.preferencesController.state.useAddressBarEnsResolution,provider:ie.provider}),(0,o.pipeline)((0,c.storeAsStream)(ie.store),(0,i.default)(1e3),(0,N.default)((async e=>{await K.set(e),de.emit("state-persisted",e)})),(e=>{s.default.error("MetaMask - Persistence pipeline failed",e)})),E=ie,global.stateHooks.getSentryAppState=function(){const e=E.memStore.getState();return(0,y.maskObject)(e,C.SENTRY_BACKGROUND_STATE)};const v=()=>ee>0||Boolean(Object.keys(ne).length)||te,P=(e,t)=>{if(!1===e)ie.onClientClosed();else{if(t===g.ENVIRONMENT_TYPE_FULLSCREEN&&Boolean(Object.keys(ne).length))return;ie.onEnvironmentTypeClosed(t)}};function T(e,t){return e>t?`${t}+`:String(e)}function O(){const e=A(),t=function(){try{const{isNotificationServicesEnabled:e,isFeatureAnnouncementsEnabled:t}=ie.notificationServicesController.state,r=Object.values(ie.notificationServicesController.state.metamaskNotificationsList).filter((e=>e.type===h.NotificationServicesController.Constants.TRIGGER_TYPES.SNAP&&null===e.readDate)).length,n=t?ie.notificationServicesController.state.metamaskNotificationsList.filter((e=>!e.isRead&&e.type===h.NotificationServicesController.Constants.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT)).length:0,o=e?ie.notificationServicesController.state.metamaskNotificationsList.filter((e=>!e.isRead&&e.type!==h.NotificationServicesController.Constants.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT&&e.type!==h.NotificationServicesController.Constants.TRIGGER_TYPES.SNAP)).length:0;return r+n+o}catch(e){return console.error("Failed to get unread notifications count:",e),0}}();let r="",n=G;e?r=T(e,$):t>0&&(r=T(t,$),n=V);try{const e={text:r},t={color:n};_.isManifestV3?(a.default.action.setBadgeText(e),a.default.action.setBadgeBackgroundColor(t)):(a.default.browserAction.setBadgeText(e),a.default.browserAction.setBadgeBackgroundColor(t))}catch(e){console.error("Error updating browser badge:",e)}}function A(){try{let e=ie.appStateController.waitingForUnlock.length+ie.approvalController.getTotalApprovalCount();return ie.preferencesController.getUseRequestQueue()&&(e+=ie.queuedRequestController.state.queuedRequestCount),e}catch(e){return console.error("Failed to get pending approval count:",e),0}}me=async e=>{var t;const n=e.name;if(J.includes(e.name))return;let i=!1;const s=(0,D.getPlatform)(),c=null!==(t=e.sender)&&void 0!==t&&t.url?new URL(e.sender.url):null;if(i=s===g.PLATFORM_FIREFOX?X[n]:(null==c?void 0:c.origin)===`chrome-extension://${a.default.runtime.id}`,i){var l;const t=(null==r||null===(l=r.getPortStream)||void 0===l?void 0:l.call(r,e))||new d.default(e);if(ie.isClientOpen=!0,ie.setupTrustedCommunication(t,e.sender),n===g.ENVIRONMENT_TYPE_POPUP&&(ee+=1,(0,o.finished)(t,(()=>{ee-=1;const e=v();ie.isClientOpen=e,P(e,g.ENVIRONMENT_TYPE_POPUP)}))),n===g.ENVIRONMENT_TYPE_NOTIFICATION&&(te=!0,(0,o.finished)(t,(()=>{te=!1;const e=v();ie.isClientOpen=e,P(e,g.ENVIRONMENT_TYPE_NOTIFICATION)}))),n===g.ENVIRONMENT_TYPE_FULLSCREEN){const r=e.sender.tab.id;ne[r]=!0,(0,o.finished)(t,(()=>{delete ne[r];const e=v();ie.isClientOpen=e,P(e,g.ENVIRONMENT_TYPE_FULLSCREEN)}))}}else if(c&&c.origin===ce.origin&&c.pathname===ce.pathname){var u;const t=(null==r||null===(u=r.getPortStream)||void 0===u?void 0:u.call(r,e))||new d.default(e);ie.setupPhishingCommunication({connectionStream:t})}else{if(e.sender&&e.sender.tab&&e.sender.url){const t=e.sender.tab.id,r=new URL(e.sender.url),{origin:n}=r;Te(e),e.onMessage.addListener((e=>{e.data&&e.data.method===g.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS&&(oe[n]=t)}))}if(c&&B.COOKIE_ID_MARKETING_WHITELIST_ORIGINS.some((e=>e===c.origin))){var f;const t=(null==r||null===(f=r.getPortStream)||void 0===f?void 0:f.call(r,e))||new d.default(e);ie.setUpCookieHandlerCommunication({connectionStream:t})}be(e)}},be=e=>{var t;const n=(null==r||null===(t=r.getPortStream)||void 0===t?void 0:t.call(r,e))||new d.default(e);ie.setupUntrustedCommunicationEip1193({connectionStream:n,sender:e.sender})},_e=async e=>{var t;if(J.includes(e.name))return;e.sender&&e.sender.tab&&e.sender.url&&Te(e);const n=(null==r||null===(t=r.getPortStream)||void 0===t?void 0:t.call(r,e))||new d.default(e);ie.setupUntrustedCommunicationCaip({connectionStream:n,sender:e.sender})},null!=r&&r.registerConnectListeners&&r.registerConnectListeners(me,be),O(),ie.decryptMessageController.hub.on(R.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,O),ie.encryptionPublicKeyController.hub.on(R.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,O),ie.signatureController.hub.on(R.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,O),ie.appStateController.on(R.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,O),ie.controllerMessenger.subscribe(R.METAMASK_CONTROLLER_EVENTS.APPROVAL_STATE_CHANGE,O),ie.controllerMessenger.subscribe(R.METAMASK_CONTROLLER_EVENTS.QUEUED_REQUEST_STATE_CHANGE,O),ie.controllerMessenger.subscribe(R.METAMASK_CONTROLLER_EVENTS.METAMASK_NOTIFICATIONS_LIST_UPDATED,O),ie.controllerMessenger.subscribe(R.METAMASK_CONTROLLER_EVENTS.METAMASK_NOTIFICATIONS_MARK_AS_READ,O),Q.on(x.NOTIFICATION_MANAGER_EVENTS.POPUP_CLOSED,(({automaticallyClosed:e})=>{e?A()>0&&Ae():(ie.signatureController.rejectUnapproved(m.REJECT_NOTIFICATION_CLOSE_SIG),ie.decryptMessageController.rejectUnapproved(m.REJECT_NOTIFICATION_CLOSE),ie.encryptionPublicKeyController.rejectUnapproved(m.REJECT_NOTIFICATION_CLOSE),Object.values(ie.approvalController.state.pendingApprovals).forEach((({id:e,type:t})=>{switch(t){case u.ApprovalType.SnapDialogAlert:case u.ApprovalType.SnapDialogPrompt:case p.DIALOG_APPROVAL_TYPES.default:ie.approvalController.accept(e,null);break;case u.ApprovalType.SnapDialogConfirmation:case g.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation:case g.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval:case g.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect:ie.approvalController.accept(e,!1);break;default:ie.approvalController.reject(e,f.providerErrors.userRejectedRequest())}}))),O()})),Object.values(ie.snapController.state.snaps).some((e=>!e.preinstalled))&&ie.snapController.updateBlockedSnaps()}async function Ae(){const e=await Z.getActiveTabs(),t=Boolean(e.find((e=>ne[e.id]))),r=e.length>0&&e[0].extData&&e[0].extData.indexOf("vivaldi_tab")>-1;if(!re&&(r||0===ee)&&!t){re=!0;try{const e=ie.appStateController.getCurrentPopupId();await Q.showPopup((e=>ie.appStateController.setCurrentPopupId(e)),e)}finally{re=!1}}}const Se=()=>{if(ie)return ie.metaMetricsController.updateTraits({[m.MetaMetricsUserTrait.InstallDateExt]:(new Date).toISOString().split("T")[0]}),void ie.metaMetricsController.addEventBeforeMetricsOptIn({category:m.MetaMetricsEventCategory.App,event:m.MetaMetricsEventName.AppInstalled,properties:{}});setTimeout((()=>{Se()}),500)};async function Ie(){Boolean(await K.get())||(Se(),Z.openExtensionInBrowser()),a.default.tabs.onActivated.addListener((e=>{if(ie){const{tabId:t}=e,r=ae[t];r&&ie.permissionController.state.subjects[r]!==undefined&&Pe(r)}}))}(async function(){await Ie();try{await Ee(),K.cleanUpMostRecentRetrievedState()}catch(e){s.default.error(e)}})()}}},{package:"$root$",file:"app/scripts/background.js"}]],[4],{});