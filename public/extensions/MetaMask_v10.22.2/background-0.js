LavaPack.loadBundle([[10,{"../../../shared/constants/metametrics":3215,"../../../shared/constants/network":3216,"../../../shared/constants/time":3221,"../../../shared/constants/tokens":3222,"../../../shared/constants/transaction":3223,"../../../shared/modules/network.utils":3243,"../../../shared/modules/string-utils":3248,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("loglevel"),i=e("../../../shared/constants/time"),s=e("../../../shared/constants/network"),o=e("../../../shared/constants/tokens"),a=e("../../../shared/modules/network.utils"),c=e("../../../shared/modules/string-utils"),u=e("../../../shared/constants/transaction"),l=e("../../../shared/constants/metametrics");const d=3*i.MINUTE;r.default=class{constructor({interval:e=d,preferences:t,network:r,keyringMemStore:n,tokenList:i,tokensController:s,assetsContractController:o=null,trackMetaMetricsEvent:a}={}){var c,u,l,h,f;this.assetsContractController=o,this.tokensController=s,this.preferences=t,this.interval=e,this.network=r,this.keyringMemStore=n,this.tokenList=i,this.useTokenDetection=null===(c=this.preferences)||void 0===c?void 0:c.store.getState().useTokenDetection,this.selectedAddress=null===(u=this.preferences)||void 0===u?void 0:u.store.getState().selectedAddress,this.tokenAddresses=null===(l=this.tokensController)||void 0===l?void 0:l.state.tokens.map((e=>e.address)),this.hiddenTokens=null===(h=this.tokensController)||void 0===h?void 0:h.state.ignoredTokens,this.detectedTokens=null===(f=this.tokensController)||void 0===f?void 0:f.state.detectedTokens,this.chainId=this.getChainIdFromNetworkStore(r),this._trackMetaMetricsEvent=a,null==t||t.store.subscribe((({selectedAddress:e,useTokenDetection:t})=>{this.selectedAddress===e&&this.useTokenDetection===t||(this.selectedAddress=e,this.useTokenDetection=t,this.restartTokenDetection({selectedAddress:e}))})),null==s||s.subscribe((({tokens:e=[],ignoredTokens:t=[],detectedTokens:r=[]})=>{this.tokenAddresses=e.map((e=>e.address)),this.hiddenTokens=t,this.detectedTokens=r}))}async detectNewTokens({selectedAddress:e,chainId:t}={}){const r=e??this.selectedAddress,i=t??this.getChainIdFromNetworkStore(this._network);if(!this.isActive)return;if(!(0,a.isTokenDetectionEnabledForNetwork)(i))return;if(!this.useTokenDetection&&i!==s.CHAIN_IDS.MAINNET)return;const d=!this.useTokenDetection&&i===s.CHAIN_IDS.MAINNET,{tokenList:h}=this._tokenList.state,f=d?o.STATIC_MAINNET_TOKEN_LIST:h,p=[];for(const e in f)this.tokenAddresses.find((t=>(0,c.isEqualCaseInsensitive)(t,e)))||this.hiddenTokens.find((t=>(0,c.isEqualCaseInsensitive)(t,e)))||this.detectedTokens.find((({address:t})=>(0,c.isEqualCaseInsensitive)(t,e)))||p.push(e);const m=[p.slice(0,1e3),p.slice(1e3,p.length-1)];for(const e of m){let t;try{t=await this.assetsContractController.getBalancesInSingleCall(r,e)}catch(e){return void(0,n.warn)("MetaMask - DetectTokensController single call balance fetch failed",e)}const s=[],o=[];if(t){const e=Object.keys(t);for(const t of e){const{address:e,symbol:r,decimals:n}=f[t];o.push(`${r} - ${e}`),s.push({address:e,symbol:r,decimals:n})}s.length>0&&(this._trackMetaMetricsEvent({event:l.EVENT_NAMES.TOKEN_DETECTED,category:l.EVENT.CATEGORIES.WALLET,properties:{tokens:o,token_standard:u.TokenStandard.ERC20,asset_type:u.AssetType.token}}),await this.tokensController.addDetectedTokens(s,{selectedAddress:r,chainId:i}))}}}restartTokenDetection({selectedAddress:e,chainId:t}={}){const r=e??this.selectedAddress,n=t??this.chainId;this.isActive&&r&&(this.detectNewTokens({selectedAddress:r,chainId:n}),this.interval=d)}getChainIdFromNetworkStore(e){return null==e?void 0:e.store.getState().provider.chainId}set interval(e){this._handle&&clearInterval(this._handle),e&&(this._handle=setInterval((()=>{this.detectNewTokens()}),e))}set network(e){e&&(this._network=e,this._network.store.subscribe((()=>{if(this.chainId!==this.getChainIdFromNetworkStore(e)){const t=this.getChainIdFromNetworkStore(e);this.chainId=t,this.restartTokenDetection({chainId:this.chainId})}})))}set keyringMemStore(e){e&&(this._keyringMemStore=e,this._keyringMemStore.subscribe((({isUnlocked:e})=>{this.isUnlocked!==e&&(this.isUnlocked=e,e&&this.restartTokenDetection())})))}set tokenList(e){e&&(this._tokenList=e)}get isActive(){return this.isOpen&&this.isUnlocked}}}}},{package:"$root$",file:"app/scripts/controllers/detect-tokens.js"}],[100,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:15,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=r;t.TransactionController.transactions=e.map((e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=i.TransactionStatus.failed),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/015.js"}],[1001,{"@ethereumjs/util":316,"@metamask/eth-sig-util":1067,"@metamask/scure-bip39":1184,"@metamask/scure-bip39/dist/wordlists/english":1185,buffer:1789,"ethereum-cryptography/hdkey":1007,"ethereum-cryptography/keccak":1008,"ethereum-cryptography/utils":1009},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{HDKey:n}=e("ethereum-cryptography/hdkey"),{keccak256:i}=e("ethereum-cryptography/keccak"),{bytesToHex:s}=e("ethereum-cryptography/utils"),{stripHexPrefix:o,privateToPublic:a,publicToAddress:c,ecsign:u,arrToBufArr:l,bufferToHex:d}=e("@ethereumjs/util"),h=e("@metamask/scure-bip39"),{wordlist:f}=e("@metamask/scure-bip39/dist/wordlists/english"),{concatSig:p,decrypt:m,getEncryptionPublicKey:g,normalize:y,personalSign:w,signTypedData:b,SignTypedDataVersion:v}=e("@metamask/eth-sig-util"),_="HD Key Tree";class E{constructor(e={}){this.type=_,this._wallets=[],this.deserialize(e)}generateRandomMnemonic(){this._initFromMnemonic(h.generateMnemonic(f))}_uint8ArrayToString(e){return Array.from(new Uint16Array(new Uint8Array(e).buffer)).map((e=>f[e])).join(" ")}_stringToUint8Array(e){const t=e.split(" ").map((e=>f.indexOf(e)));return new Uint8Array(new Uint16Array(t).buffer)}_mnemonicToUint8Array(e){let t=e;if(e&&e.type&&"Buffer"===e.type&&(t=e.data),"string"==typeof t||r.isBuffer(t)||Array.isArray(t)){let e=t;return Array.isArray(t)?e=r.from(t).toString():r.isBuffer(t)&&(e=t.toString()),this._stringToUint8Array(e)}return t instanceof Object&&!(t instanceof Uint8Array)?Uint8Array.from(Object.values(t)):t}serialize(){const e=this._uint8ArrayToString(this.mnemonic),t=new TextEncoder("utf-8").encode(e);return Promise.resolve({mnemonic:Array.from(t),numberOfAccounts:this._wallets.length,hdPath:this.hdPath})}deserialize(e={}){if(e.numberOfAccounts&&!e.mnemonic)throw new Error("Eth-Hd-Keyring: Deserialize method cannot be called with an opts value for numberOfAccounts and no menmonic");if(this.root)throw new Error("Eth-Hd-Keyring: Secret recovery phrase already provided");return this.opts=e,this._wallets=[],this.mnemonic=null,this.root=null,this.hdPath=e.hdPath||"m/44'/60'/0'/0",e.mnemonic&&this._initFromMnemonic(e.mnemonic),e.numberOfAccounts?this.addAccounts(e.numberOfAccounts):Promise.resolve([])}addAccounts(e=1){if(!this.root)throw new Error("Eth-Hd-Keyring: No secret recovery phrase provided");const t=this._wallets.length,r=[];for(let n=t;n<e+t;n++){const e=this.root.deriveChild(n);r.push(e),this._wallets.push(e)}const n=r.map((e=>this._addressfromPublicKey(e.publicKey)));return Promise.resolve(n)}getAccounts(){return this._wallets.map((e=>this._addressfromPublicKey(e.publicKey)))}async getAppKeyAddress(e,t){if(!t||"string"!=typeof t)throw new Error("'origin' must be a non-empty string");const r=this._getWalletForAccount(e,{withAppKeyOrigin:t});return y(c(r.publicKey).toString("hex"))}async exportAccount(e,t={}){const r=this._getWalletForAccount(e,t);return s(r.privateKey)}async signTransaction(e,t,r={}){const n=this._getPrivateKeyFor(e,r),i=t.sign(n);return i===undefined?t:i}async signMessage(e,t,n={}){const i=o(t),s=this._getPrivateKeyFor(e,n),a=u(r.from(i,"hex"),s);return p(a.v,a.r,a.s)}async signPersonalMessage(e,t,n={}){const i=this._getPrivateKeyFor(e,n),s=r.from(i,"hex");return w({privateKey:s,data:t})}async decryptMessage(e,t){const n=this._getWalletForAccount(e),{privateKey:i}=n,s=r.from(i).toString("hex");return m({privateKey:s,encryptedData:t})}async signTypedData(e,t,r={version:v.V1}){const n=Object.keys(v).includes(r.version)?r.version:v.V1,i=this._getPrivateKeyFor(e,r);return b({privateKey:i,data:t,version:n})}removeAccount(e){const t=y(e);if(!this._wallets.map((({publicKey:e})=>this._addressfromPublicKey(e))).includes(t))throw new Error(`Address ${t} not found in this keyring`);this._wallets=this._wallets.filter((({publicKey:e})=>this._addressfromPublicKey(e)!==t))}async getEncryptionPublicKey(e,t={}){const r=this._getPrivateKeyFor(e,t);return g(r)}_getPrivateKeyFor(e,t={}){if(!e)throw new Error("Must specify address.");return this._getWalletForAccount(e,t).privateKey}_getWalletForAccount(e,t={}){const n=y(e);let s=this._wallets.find((({publicKey:e})=>this._addressfromPublicKey(e)===n));if(!s)throw new Error("HD Keyring - Unable to find matching address.");if(t.withAppKeyOrigin){const{privateKey:e}=s,n=r.from(t.withAppKeyOrigin,"utf8"),o=r.concat([e,n]),c=l(i(o,256));s={privateKey:c,publicKey:a(c)}}return s}_initFromMnemonic(e){if(this.root)throw new Error("Eth-Hd-Keyring: Secret recovery phrase already provided");this.mnemonic=this._mnemonicToUint8Array(e);if(!h.validateMnemonic(this.mnemonic,f))throw new Error("Eth-Hd-Keyring: Invalid secret recovery phrase provided");const t=h.mnemonicToSeedSync(this.mnemonic,f);this.hdWallet=n.fromMasterSeed(t),this.root=this.hdWallet.derive(this.hdPath)}_addressfromPublicKey(e){return d(c(r.from(e),!0)).toLowerCase()}}E.type=_,t.exports=E}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring",file:"node_modules/@metamask/eth-hd-keyring/index.js"}],[1002,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=i,r.bytes=s,r.hash=o,r.exists=a,r.output=c;const u={number:n,bool:i,bytes:s,hash:o,exists:a,output:c};r.default=u}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/_assert.js"}],[1003,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=s(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}r.fromBig=s,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0);function a(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}r.add=a;const c={fromBig:s,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};r.default=c}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/_u64.js"}],[1004,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto={node:undefined,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/cryptoBrowser.js"}],[1005,{"./_assert.js":1002,"./_u64.js":1003,"./utils.js":1006},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),i=e("./_u64.js"),s=e("./utils.js"),[o,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let i=u;for(let e=0;e<7;e++)t=(t<<l^(t>>h)*p)%f,t&d&&(i^=l<<(l<<BigInt(e))-l);c.push(i)}const[m,g]=i.default.split(c,!0),y=(e,t,r)=>r>32?i.default.rotlBH(e,t,r):i.default.rotlSH(e,t,r),w=(e,t,r)=>r>32?i.default.rotlBL(e,t,r):i.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=y(s,o,1)^r[n],c=w(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=a[r],s=y(t,i,n),c=w(t,i,n),u=o[r];t=e[u],i=e[u+1],e[u]=s,e[u+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=g[n]}r.fill(0)}r.keccakP=b;class v extends s.Hash{constructor(e,t,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){n.default.exists(this);const{blockLen:t,state:r}=this,i=(e=(0,s.toBytes)(e)).length;for(let n=0;n<i;){const s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){n.default.exists(this,!1),n.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return n.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(n.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new v(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}r.Keccak=v;const _=(e,t,r)=>(0,s.wrapConstructor)((()=>new v(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const E=(e,t,r)=>(0,s.wrapConstructorWithOpts)(((n={})=>new v(t,e,n.dkLen===undefined?r:n.dkLen,!0)));r.shake128=E(31,168,16),r.shake256=E(31,136,32)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/sha3.js"}],[1006,{"@noble/hashes/crypto":1004},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t};function s(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=s(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;e>=0&&e<t||(await(0,r.nextTick)(),i+=e)}},r.utf8ToBytes=s,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(t!==undefined&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/utils.js"}],[1007,{"@scure/bip32":1242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.HDKey=r.HARDENED_OFFSET=void 0;var n=e("@scure/bip32");Object.defineProperty(r,"HARDENED_OFFSET",{enumerable:!0,get:function(){return n.HARDENED_OFFSET}}),Object.defineProperty(r,"HDKey",{enumerable:!0,get:function(){return n.HDKey}})}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/hdkey.js"}],[1008,{"./utils":1009,"@noble/hashes/sha3":1005},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.keccak512=r.keccak384=r.keccak256=r.keccak224=void 0;const n=e("@noble/hashes/sha3"),i=e("./utils");r.keccak224=(0,i.wrapHash)(n.keccak_224),r.keccak256=(()=>{const e=(0,i.wrapHash)(n.keccak_256);return e.create=n.keccak_256.create,e})(),r.keccak384=(0,i.wrapHash)(n.keccak_384),r.keccak512=(0,i.wrapHash)(n.keccak_512)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/keccak.js"}],[1009,{"@noble/hashes/_assert":1002,"@noble/hashes/utils":1006},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=r.wrapHash=r.equalsBytes=r.hexToBytes=r.bytesToUtf8=r.utf8ToBytes=r.createView=r.concatBytes=r.toHex=r.bytesToHex=r.assertBytes=r.assertBool=void 0;const i=n(e("@noble/hashes/_assert")),s=e("@noble/hashes/utils"),o=i.default.bool;r.assertBool=o;const a=i.default.bytes;r.assertBytes=a;var c=e("@noble/hashes/utils");Object.defineProperty(r,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(r,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),r.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},r.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,s.hexToBytes)(t)},r.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},r.wrapHash=function(e){return t=>(i.default.bytes(t),e(t))},r.crypto=(()=>{const e="object"==typeof self&&"crypto"in self?self.crypto:undefined,r=void 0!==t&&"function"==typeof t.require&&t.require.bind(t);return{node:r&&!e?r("crypto"):undefined,web:e}})()}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/utils.js"}],[101,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:16,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=i.TransactionStatus.submitted,delete e.err),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/016.js"}],[1010,{"./fetch-config-from-req":1012,"./logging-utils":1014,"eth-rpc-errors":2e3,"json-rpc-engine":2529,"node-fetch":2794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createInfuraMiddleware=void 0;const i=e("json-rpc-engine"),s=e("eth-rpc-errors"),o=n(e("node-fetch")),a=e("./fetch-config-from-req"),c=e("./logging-utils"),u=(0,c.createModuleLogger)(c.projectLogger,"create-infura-middleware"),l=["Gateway timeout","ETIMEDOUT","ECONNRESET","SyntaxError"];async function d(e,t,r,n,i,c){const{fetchUrl:u,fetchParams:l}=(0,a.fetchConfigFromReq)({network:e,projectId:t,extraHeaders:r,req:n,source:c}),d=await(0,o.default)(u,l),f=await d.text();if(!d.ok)switch(d.status){case 405:throw s.ethErrors.rpc.methodNotFound();case 429:throw h("Request is being rate limited.");case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",h(e)}();default:throw h(f)}if("eth_getBlockByNumber"===n.method&&"Not Found"===f)return void(i.result=null);const p=JSON.parse(f);i.result=p.result,i.error=p.error}function h(e){return s.ethErrors.rpc.internal(e)}function f(e){const t=e.toString();return l.some((e=>t.includes(e)))}function p(e){return new Promise((t=>{setTimeout(t,e)}))}r.createInfuraMiddleware=function({network:e="mainnet",maxAttempts:t=5,source:r,projectId:n,headers:s={}}){if(!n||"string"!=typeof n)throw new Error(`Invalid value for 'projectId': "${n}"`);if(!s||"object"!=typeof s)throw new Error(`Invalid value for 'headers': "${s}"`);if(!t)throw new Error(`Invalid value for 'maxAttempts': "${t}" (${typeof t})`);return(0,i.createAsyncMiddleware)((async(i,o)=>{for(let a=1;a<=t;a++)try{u("Attempting request to Infura. network = %o, projectId = %s, headers = %o, req = %o",e,n,s,i),await d(e,n,s,i,o,r);break}catch(e){if(!f(e))throw u("Non-retriable request error encountered. req = %o, res = %o, error = %o",i,o,e),e;if(!(t-a)){u("Retriable request error encountered, but exceeded max attempts. req = %o, res = %o, error = %o",i,o,e);const t=`InfuraProvider - cannot complete request. All retries exhausted.\nOriginal Error:\n${e.toString()}\n\n`;throw new Error(t)}u("Retriable request error encountered. req = %o, res = %o, error = %o",i,o,e),u("Waiting 1 second to try again..."),await p(1e3)}}))}}}},{package:"@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/create-infura-middleware.js"}],[1011,{"./create-infura-middleware":1010,"eth-json-rpc-middleware":1020,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createProvider=void 0;const n=e("json-rpc-engine"),i=e("eth-json-rpc-middleware"),s=e("./create-infura-middleware");r.createProvider=function(e){const t=new n.JsonRpcEngine;return t.push((0,s.createInfuraMiddleware)(e)),(0,i.providerFromEngine)(t)}}}},{package:"@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/create-provider.js"}],[1012,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return{id:e.id,jsonrpc:e.jsonrpc,method:e.method,params:e.params}}Object.defineProperty(r,"__esModule",{value:!0}),r.fetchConfigFromReq=void 0,r.fetchConfigFromReq=function({network:e,projectId:t,extraHeaders:r={},req:i,source:s}){const o=i.origin||"internal",a=Object.assign({},r,{Accept:"application/json","Content-Type":"application/json"});return s&&(a["Infura-Source"]=`${s}/${o}`),{fetchUrl:`https://${e}.infura.io/v3/${t}`,fetchParams:{method:"POST",headers:a,body:JSON.stringify(n(i))}}}}}},{package:"@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/fetch-config-from-req.js"}],[1013,{"./create-infura-middleware":1010,"./create-provider":1011,"./fetch-config-from-req":1012},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./create-infura-middleware"),r),i(e("./fetch-config-from-req"),r),i(e("./create-provider"),r)}}},{package:"@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/index.js"}],[1014,{"@metamask/utils":1202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-json-rpc-infura")}}},{package:"@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/logging-utils.js"}],[1015,{"./utils/cache":1026,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockCacheMiddleware=void 0;const n=e("json-rpc-engine"),i=e("./utils/cache"),s=[undefined,null,"<nil>"];class o{constructor(){this.cache={}}getBlockCacheForPayload(e,t){const r=Number.parseInt(t,16);let n=this.cache[r];if(!n){const e={};this.cache[r]=e,n=e}return n}async get(e,t){const r=this.getBlockCacheForPayload(e,t),n=(0,i.cacheIdentifierForPayload)(e,!0);return n?r[n]:undefined}async set(e,t,r){if(!this.canCacheResult(e,r))return;const n=(0,i.cacheIdentifierForPayload)(e,!0);if(!n)return;this.getBlockCacheForPayload(e,t)[n]=r}canCacheRequest(e){if(!(0,i.canCache)(e))return!1;return"pending"!==(0,i.blockTagForPayload)(e)}canCacheResult(e,t){return!s.includes(t)&&!(e.method&&["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(e.method)&&(!t||!t.blockHash||"0x0000000000000000000000000000000000000000000000000000000000000000"===t.blockHash))}clearBefore(e){const t=Number.parseInt(e,16);Object.keys(this.cache).map(Number).filter((e=>e<t)).forEach((e=>delete this.cache[e]))}}r.createBlockCacheMiddleware=function({blockTracker:e}={}){if(!e)throw new Error("createBlockCacheMiddleware - No PollingBlockTracker specified");const t=new o,r={perma:t,block:t,fork:t};return(0,n.createAsyncMiddleware)((async(n,s,o)=>{if(n.skipCache)return o();const a=(0,i.cacheTypeForPayload)(n),c=r[a];if(!c)return o();if(!c.canCacheRequest(n))return o();let u,l=(0,i.blockTagForPayload)(n);if(l||(l="latest"),"earliest"===l)u="0x00";else if("latest"===l){const r=await e.getLatestBlock();t.clearBefore(r),u=r}else u=l;const d=await c.get(n,u);return d===undefined?(await o(),await c.set(n,u,s.result)):s.result=d,undefined}))}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/block-cache.js"}],[1016,{"./utils/cache":1026,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefRewriteMiddleware=void 0;const n=e("json-rpc-engine"),i=e("./utils/cache");r.createBlockRefRewriteMiddleware=function({blockTracker:e}={}){if(!e)throw Error('BlockRefRewriteMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(t,r,n)=>{var s;const o=(0,i.blockTagParamIndex)(t);if(o===undefined)return n();let a=null===(s=t.params)||void 0===s?void 0:s[o];if(a===undefined&&(a="latest"),"latest"!==a)return n();const c=await e.getLatestBlock();return t.params&&(t.params[o]=c),n()}))}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/block-ref-rewrite.js"}],[1017,{"./utils/cache":1026,clone:1826,"json-rpc-engine":2529,pify:1034},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefMiddleware=void 0;const i=e("json-rpc-engine"),s=n(e("clone")),o=n(e("pify")),a=e("./utils/cache");r.createBlockRefMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('BlockRefMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('BlockRefMiddleware - mandatory "blockTracker" option is missing.');return(0,i.createAsyncMiddleware)((async(r,n,i)=>{var c;const u=(0,a.blockTagParamIndex)(r);if(u===undefined)return i();let l=null===(c=r.params)||void 0===c?void 0:c[u];if(l===undefined&&(l="latest"),"latest"!==l)return i();const d=await t.getLatestBlock(),h=(0,s.default)(r);h.params&&(h.params[u]=d);const f=await(0,o.default)(e.sendAsync).call(e,h);return n.result=f.result,n.error=f.error,i()}))}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/block-ref.js"}],[1018,{"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockTrackerInspectorMiddleware=void 0;const n=e("json-rpc-engine"),i=["eth_getTransactionByHash","eth_getTransactionReceipt"];r.createBlockTrackerInspectorMiddleware=function({blockTracker:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{var s;if(!i.includes(t.method))return n();if(await n(),!(null===(s=r.result)||void 0===s?void 0:s.blockNumber))return undefined;if("string"==typeof r.result.blockNumber){Number.parseInt(r.result.blockNumber,16)>Number.parseInt(e.getCurrentBlock(),16)&&await e.checkForLatestBlock()}return undefined}))}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/block-tracker-inspector.js"}],[1019,{btoa:1788,"eth-rpc-errors":2e3,"json-rpc-engine":2529,"node-fetch":1788},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createFetchConfigFromReq=r.createFetchMiddleware=void 0;const n=e("json-rpc-engine"),i=e("eth-rpc-errors"),s=global.fetch||e("node-fetch"),o=global.btoa||e("btoa"),a=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function c(e){switch(e.status){case 405:throw i.ethErrors.rpc.methodNotFound();case 418:throw i.ethErrors.rpc.internal({message:"Request is being rate limited."});case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",i.ethErrors.rpc.internal({message:e})}()}}function u(e,t){if(200!==e.status)throw i.ethErrors.rpc.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw i.ethErrors.rpc.internal({data:t.error});return t.result}function l({req:e,rpcUrl:t,originHttpHeaderKey:r}){const n=new URL(t),i=function(e){let t="";t+=e.protocol,t+=`//${e.hostname}`,e.port&&(t+=`:${e.port}`);return t+=`${e.pathname}`,t+=`${e.search}`,t}(n),s={id:e.id,jsonrpc:e.jsonrpc,method:e.method,params:e.params},a=e.origin,c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)};if(n.username&&n.password){const e=`${n.username}:${n.password}`,t=o(e);c.headers.Authorization=`Basic ${t}`}return r&&a&&(c.headers[r]=a),{fetchUrl:i,fetchParams:c}}function d(e){return new Promise((t=>setTimeout(t,e)))}r.createFetchMiddleware=function({rpcUrl:e,originHttpHeaderKey:t}){return(0,n.createAsyncMiddleware)((async(r,n,i)=>{const{fetchUrl:o,fetchParams:h}=l({req:r,rpcUrl:e,originHttpHeaderKey:t});for(let e=0;e<5;e++){try{const e=await s(o,h);c(e);const t=await e.text();let r;try{r=JSON.parse(t)}catch(e){throw new Error(`FetchMiddleware - failed to parse response body: "${t}"`)}const i=u(e,r);return void(n.result=i)}catch(e){const t=e.toString();if(!a.some((e=>t.includes(e))))throw e}await d(1e3)}}))},r.createFetchConfigFromReq=l}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/fetch.js"}],[102,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:17,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(!e.status===i.TransactionStatus.failed||e.retryCount>0&&e.retryCount<2&&(e.status=i.TransactionStatus.submitted,delete e.err),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/017.js"}],[1020,{"./block-cache":1015,"./block-ref":1017,"./block-ref-rewrite":1016,"./block-tracker-inspector":1018,"./fetch":1019,"./inflight-cache":1021,"./providerAsMiddleware":1022,"./providerFromEngine":1023,"./providerFromMiddleware":1024,"./retryOnEmpty":1025,"./wallet":1027},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./block-cache"),r),i(e("./block-ref-rewrite"),r),i(e("./block-ref"),r),i(e("./block-tracker-inspector"),r),i(e("./fetch"),r),i(e("./inflight-cache"),r),i(e("./providerAsMiddleware"),r),i(e("./providerFromEngine"),r),i(e("./providerFromMiddleware"),r),i(e("./retryOnEmpty"),r),i(e("./wallet"),r)}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/index.js"}],[1021,{"./utils/cache":1026,clone:1826,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createInflightCacheMiddleware=void 0;const i=n(e("clone")),s=e("json-rpc-engine"),o=e("./utils/cache");r.createInflightCacheMiddleware=function(){const e={};return(0,s.createAsyncMiddleware)((async(t,r,n)=>{if(t.skipCache)return n();const s=(0,o.cacheIdentifierForPayload)(t);if(!s)return n();let a=e[s];return a?(await function(e,t){const{resolve:r,promise:n}=function(){let e;const t=new Promise((t=>{e=t}));return{resolve:e,promise:t}}();return t.push((t=>{e.result=(0,i.default)(t.result),e.error=(0,i.default)(t.error),r()})),n}(r,a),undefined):(a=[],e[s]=a,await n(),delete e[s],function(e,t){setTimeout((()=>{t.forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}))}(r,a),undefined)}))}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/inflight-cache.js"}],[1022,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ethersProviderAsMiddleware=r.providerAsMiddleware=void 0,r.providerAsMiddleware=function(e){return(t,r,n,i)=>{e.sendAsync(t,((e,t)=>e instanceof Error?i(e):(Object.assign(r,t),i())))}},r.ethersProviderAsMiddleware=function(e){return(t,r,n,i)=>{e.send(t,((e,t)=>e?i(e):(Object.assign(r,t),i())))}}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/providerAsMiddleware.js"}],[1023,{"@metamask/safe-event-emitter":1183},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromEngine=void 0;const i=n(e("@metamask/safe-event-emitter"));r.providerFromEngine=function(e){const t=new i.default;return t.sendAsync=(t,r)=>{e.handle(t,r)},t.send=(t,r)=>{if("function"!=typeof r)throw new Error('Must provide callback to "send" method.');e.handle(t,r)},e.on&&e.on("notification",(e=>{t.emit("data",null,e)})),t}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/providerFromEngine.js"}],[1024,{"./providerFromEngine":1023,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromMiddleware=void 0;const n=e("json-rpc-engine"),i=e("./providerFromEngine");r.providerFromMiddleware=function(e){const t=new n.JsonRpcEngine;return t.push(e),(0,i.providerFromEngine)(t)}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/providerFromMiddleware.js"}],[1025,{"./utils/cache":1026,clone:1826,"json-rpc-engine":2529,pify:1034},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createRetryOnEmptyMiddleware=void 0;const i=n(e("clone")),s=e("json-rpc-engine"),o=n(e("pify")),a=e("./utils/cache"),c=[undefined,null,"<nil>"];function u(e){return new Promise((t=>setTimeout(t,e)))}r.createRetryOnEmptyMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('RetryOnEmptyMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('RetryOnEmptyMiddleware - mandatory "blockTracker" option is missing.');return(0,s.createAsyncMiddleware)((async(r,n,s)=>{var l;const d=(0,a.blockTagParamIndex)(r);if(d===undefined)return s();let h=null===(l=r.params)||void 0===l?void 0:l[d];if(h===undefined&&(h="latest"),["latest","pending"].includes(h))return s();const f=Number.parseInt(h.slice(2),16);if(Number.isNaN(f))return s();const p=await t.getLatestBlock();if(f>Number.parseInt(p.slice(2),16))return s();const m=(0,i.default)(r),g=await async function(e,t){for(let r=0;r<e;r++)try{return await t()}catch(e){await u(1e3)}throw new Error("RetryOnEmptyMiddleware - retries exhausted")}(10,(async()=>{const t=await(0,o.default)(e.sendAsync).call(e,m);if(c.includes(t))throw new Error(`RetryOnEmptyMiddleware - empty response "${JSON.stringify(t)}" for request "${JSON.stringify(m)}"`);return t}));return n.result=g.result,n.error=g.error,s()}))}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/retryOnEmpty.js"}],[1026,{"json-stable-stringify":2535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.cacheTypeForPayload=r.blockTagParamIndex=r.paramsWithoutBlockTag=r.blockTagForPayload=r.canCache=r.cacheIdentifierForPayload=void 0;const i=n(e("json-stable-stringify"));function s(e){return"never"!==c(e)}function o(e){if(!e.params)return[];const t=a(e);return t===undefined||t>=e.params.length?e.params:"eth_getBlockByNumber"===e.method?e.params.slice(1):e.params.slice(0,t)}function a(e){switch(e.method){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return undefined}}function c(e){switch(e.method){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return"perma";case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return"fork";case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return"block";default:return"never"}}r.cacheIdentifierForPayload=function(e,t){var r;const n=t?o(e):null!==(r=e.params)&&void 0!==r?r:[];return s(e)?`${e.method}:${(0,i.default)(n)}`:null},r.canCache=s,r.blockTagForPayload=function(e){if(!e.params)return undefined;const t=a(e);return t===undefined||t>=e.params.length?undefined:e.params[t]},r.paramsWithoutBlockTag=o,r.blockTagParamIndex=a,r.cacheTypeForPayload=c}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/utils/cache.js"}],[1027,{"eth-rpc-errors":2e3,"eth-sig-util":1028,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.createWalletMiddleware=void 0;const o=e("json-rpc-engine"),a=s(e("eth-sig-util")),c=e("eth-rpc-errors");function u(e){return 42===e.length}r.createWalletMiddleware=function({getAccounts:e,processDecryptMessage:t,processEncryptionPublicKey:r,processEthSignMessage:n,processPersonalMessage:i,processTransaction:s,processSignTransaction:l,processTypedMessage:d,processTypedMessageV3:h,processTypedMessageV4:f}){if(!e)throw new Error("opts.getAccounts is required");return(0,o.createScaffoldMiddleware)({eth_accounts:(0,o.createAsyncMiddleware)((async function(t,r){r.result=await e(t)})),eth_coinbase:(0,o.createAsyncMiddleware)((async function(t,r){const n=await e(t);r.result=n[0]||null})),eth_sendTransaction:(0,o.createAsyncMiddleware)((async function(e,t){if(!s)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0]||{};r.from=await p(r.from,e),t.result=await s(r,e)})),eth_signTransaction:(0,o.createAsyncMiddleware)((async function(e,t){if(!l)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0]||{};r.from=await p(r.from,e),t.result=await l(r,e)})),eth_sign:(0,o.createAsyncMiddleware)((async function(e,t){if(!n)throw c.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),i=e.params[1],s=e.params[2]||{},o=Object.assign(Object.assign({},s),{from:r,data:i});t.result=await n(o,e)})),eth_signTypedData:(0,o.createAsyncMiddleware)((async function(e,t){if(!d)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0],n=await p(e.params[1],e),i=e.params[2]||{},s=Object.assign(Object.assign({},i),{from:n,data:r});t.result=await d(s,e,"V1")})),eth_signTypedData_v3:(0,o.createAsyncMiddleware)((async function(e,t){if(!h)throw c.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),n=e.params[1],i={data:n,from:r,version:"V3"};t.result=await h(i,e,"V3")})),eth_signTypedData_v4:(0,o.createAsyncMiddleware)((async function(e,t){if(!f)throw c.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),n=e.params[1],i={data:n,from:r,version:"V4"};t.result=await f(i,e,"V4")})),personal_sign:(0,o.createAsyncMiddleware)((async function(e,t){if(!i)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0],n=e.params[1],s=e.params[2]||{};let o,a;if(u(r)&&!u(n)){let e="The eth_personalSign method requires params ordered ";e+="[message, address]. This was previously handled incorrectly, ",e+="and has been corrected automatically. ",e+="Please switch this param order for smooth behavior in the future.",t.warning=e,o=r,a=n}else a=r,o=n;o=await p(o,e);const l=Object.assign(Object.assign({},s),{from:o,data:a});t.result=await i(l,e)})),eth_getEncryptionPublicKey:(0,o.createAsyncMiddleware)((async function(e,t){if(!r)throw c.ethErrors.rpc.methodNotSupported();const n=await p(e.params[0],e);t.result=await r(n,e)})),eth_decrypt:(0,o.createAsyncMiddleware)((async function(e,r){if(!t)throw c.ethErrors.rpc.methodNotSupported();const n=e.params[0],i=await p(e.params[1],e),s=e.params[2]||{},o=Object.assign(Object.assign({},s),{from:i,data:n});r.result=await t(o,e)})),personal_ecRecover:(0,o.createAsyncMiddleware)((async function(e,t){const r=e.params[0],n=e.params[1],i=e.params[2]||{},s=Object.assign(Object.assign({},i),{sig:n,data:r}),o=a.recoverPersonalSignature(s);t.result=o}))});async function p(t,r){if("string"==typeof t&&t.length>0&&u(t)){const n=(await e(r,{suppressUnauthorized:!1})).map((e=>e.toLowerCase())),i=t.toLowerCase();if(n.includes(i))return i;throw c.ethErrors.provider.unauthorized()}throw c.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-json-rpc-middleware/dist/wallet.js"}],[1028,{"ethereumjs-abi":2024,"ethereumjs-util":1029},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("ethereumjs-util"),i=e("ethereumjs-abi");function s(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;const r=e.map((function(e){return"bytes"===e.type?n.toBuffer(e.value):e.value})),s=e.map((function(e){return e.type})),o=e.map((function(e){if(!e.name)throw t;return e.type+" "+e.name}));return i.soliditySHA3(["bytes32","bytes32"],[i.soliditySHA3(new Array(e.length).fill("string"),o),i.soliditySHA3(s,r)])}function o(e,t){const r=n.toBuffer(t),i=n.fromRpcSig(r);return n.ecrecover(e,i.v,i.r,i.s)}function a(e){const t=n.toBuffer(e.data);return o(n.hashPersonalMessage(t),e.sig)}function c(e,t){for(var r=""+e;r.length<t;)r="0"+r;return r}t.exports={concatSig:function(e,t,r){const i=n.fromSigned(t),s=n.fromSigned(r),o=n.bufferToInt(e),a=c(n.toUnsigned(i).toString("hex"),64),u=c(n.toUnsigned(s).toString("hex"),64),l=n.stripHexPrefix(n.intToHex(o));return n.addHexPrefix(a.concat(u,l)).toString("hex")},normalize:function(e){if(e){if("number"==typeof e){const t=n.toBuffer(e);e=n.bufferToHex(t)}if("string"!=typeof e){var t="eth-sig-util.normalize() requires hex string or integer input.";throw new Error(t+=" received "+typeof e+": "+e)}return n.addHexPrefix(e.toLowerCase())}},personalSign:function(e,t){var r=n.toBuffer(t.data),i=n.hashPersonalMessage(r),s=n.ecsign(i,e);return n.bufferToHex(this.concatSig(s.v,s.r,s.s))},recoverPersonalSignature:function(e){const t=a(e),r=n.publicToAddress(t);return n.bufferToHex(r)},extractPublicKey:function(e){return"0x"+a(e).toString("hex")},typedSignatureHash:function(e){const t=s(e);return n.bufferToHex(t)},signTypedData:function(e,t){const r=s(t.data),i=n.ecsign(r,e);return n.bufferToHex(this.concatSig(i.v,i.r,i.s))},recoverTypedSignature:function(e){const t=o(s(e.data),e.sig),r=n.publicToAddress(t);return n.bufferToHex(r)}}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware>eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/eth-sig-util/index.js"}],[1029,{"./secp256k1-adapter":1030,assert:1556,"bn.js":1746,"create-hash":1906,"ethereum-cryptography/keccak":2020,"ethjs-util":1033,rlp:3012,"safe-buffer":3014},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("ethereum-cryptography/keccak"),s=i.keccak224,o=i.keccak384,a=i.keccak256,c=i.keccak512,u=e("./secp256k1-adapter"),l=e("assert"),d=e("rlp"),h=e("bn.js"),f=e("create-hash"),p=e("safe-buffer").Buffer;Object.assign(r,e("ethjs-util")),r.MAX_INTEGER=new h("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new h("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.SHA3_NULL_S=r.KECCAK256_NULL_S,r.KECCAK256_NULL=p.from(r.KECCAK256_NULL_S,"hex"),r.SHA3_NULL=r.KECCAK256_NULL,r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.SHA3_RLP_ARRAY_S=r.KECCAK256_RLP_ARRAY_S,r.KECCAK256_RLP_ARRAY=p.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.SHA3_RLP_ARRAY=r.KECCAK256_RLP_ARRAY,r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.SHA3_RLP_S=r.KECCAK256_RLP_S,r.KECCAK256_RLP=p.from(r.KECCAK256_RLP_S,"hex"),r.SHA3_RLP=r.KECCAK256_RLP,r.BN=h,r.rlp=d,r.secp256k1=u,r.zeros=function(e){return p.allocUnsafe(e).fill(0)},r.zeroAddress=function(){var e=r.zeros(20);return r.bufferToHex(e)},r.setLengthLeft=r.setLength=function(e,t,n){var i=r.zeros(t);return e=r.toBuffer(e),n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)},r.setLengthRight=function(e,t){return r.setLength(e,t,!0)},r.unpad=r.stripZeros=function(e){for(var t=(e=r.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},r.toBuffer=function(e){if(!p.isBuffer(e))if(Array.isArray(e))e=p.from(e);else if("string"==typeof e)e=r.isHexString(e)?p.from(r.padToEven(r.stripHexPrefix(e)),"hex"):p.from(e);else if("number"==typeof e)e=r.intToBuffer(e);else if(null===e||e===undefined)e=p.allocUnsafe(0);else if(h.isBN(e))e=e.toArrayLike(p);else{if(!e.toArray)throw new Error("invalid type");e=p.from(e.toArray())}return e},r.bufferToInt=function(e){return new h(r.toBuffer(e)).toNumber()},r.bufferToHex=function(e){return"0x"+(e=r.toBuffer(e)).toString("hex")},r.fromSigned=function(e){return new h(e).fromTwos(256)},r.toUnsigned=function(e){return p.from(e.toTwos(256).toArray())},r.keccak=function(e,t){switch(e=r.toBuffer(e),t||(t=256),t){case 224:return s(e);case 256:return a(e);case 384:return o(e);case 512:return c(e);default:throw new Error("Invald algorithm: keccak"+t)}},r.keccak256=function(e){return r.keccak(e)},r.sha3=r.keccak,r.sha256=function(e){return e=r.toBuffer(e),f("sha256").update(e).digest()},r.ripemd160=function(e,t){e=r.toBuffer(e);var n=f("rmd160").update(e).digest();return!0===t?r.setLength(n,32):n},r.rlphash=function(e){return r.keccak(d.encode(e))},r.isValidPrivate=function(e){return u.privateKeyVerify(e)},r.isValidPublic=function(e,t){return 64===e.length?u.publicKeyVerify(p.concat([p.from([4]),e])):!!t&&u.publicKeyVerify(e)},r.pubToAddress=r.publicToAddress=function(e,t){return e=r.toBuffer(e),t&&64!==e.length&&(e=u.publicKeyConvert(e,!1).slice(1)),l(64===e.length),r.keccak(e).slice(-20)};var m=r.privateToPublic=function(e){return e=r.toBuffer(e),u.publicKeyCreate(e,!1).slice(1)};r.importPublic=function(e){return 64!==(e=r.toBuffer(e)).length&&(e=u.publicKeyConvert(e,!1).slice(1)),e},r.ecsign=function(e,t){var r=u.sign(e,t),n={};return n.r=r.signature.slice(0,32),n.s=r.signature.slice(32,64),n.v=r.recovery+27,n},r.hashPersonalMessage=function(e){var t=r.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return r.keccak(p.concat([t,e]))},r.ecrecover=function(e,t,n,i){var s=p.concat([r.setLength(n,32),r.setLength(i,32)],64),o=t-27;if(0!==o&&1!==o)throw new Error("Invalid signature v value");var a=u.recover(e,s,o);return u.publicKeyConvert(a,!1).slice(1)},r.toRpcSig=function(e,t,n){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return r.bufferToHex(p.concat([r.setLengthLeft(t,32),r.setLengthLeft(n,32),r.toBuffer(e-27)]))},r.fromRpcSig=function(e){if(65!==(e=r.toBuffer(e)).length)throw new Error("Invalid signature length");var t=e[64];return t<27&&(t+=27),{v:t,r:e.slice(0,32),s:e.slice(32,64)}},r.privateToAddress=function(e){return r.publicToAddress(m(e))},r.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},r.isZeroAddress=function(e){return r.zeroAddress()===r.addHexPrefix(e)},r.toChecksumAddress=function(e){e=r.stripHexPrefix(e).toLowerCase();for(var t=r.keccak(e).toString("hex"),n="0x",i=0;i<e.length;i++)parseInt(t[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n},r.isValidChecksumAddress=function(e){return r.isValidAddress(e)&&r.toChecksumAddress(e)===e},r.generateAddress=function(e,t){return e=r.toBuffer(e),t=(t=new h(t)).isZero()?null:p.from(t.toArray()),r.rlphash([e,t]).slice(-20)},r.isPrecompiled=function(e){var t=r.unpad(e);return 1===t.length&&t[0]>=1&&t[0]<=8},r.addHexPrefix=function(e){return"string"!=typeof e||r.isHexPrefixed(e)?e:"0x"+e},r.isValidSignature=function(e,t,r,n){var i=new h("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===t.length&&32===r.length&&((27===e||28===e)&&(t=new h(t),r=new h(r),!(t.isZero()||t.gt(s)||r.isZero()||r.gt(s))&&(!1!==n||1!==new h(r).cmp(i))))},r.baToJSON=function(e){if(p.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(r.baToJSON(e[n]));return t}},r.defineProperties=function(e,t,i){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(t){var n={};return e._fields.forEach((function(t){n[t]="0x"+e[t].toString("hex")})),n}return r.baToJSON(this.raw)},e.serialize=function(){return d.encode(e.raw)},t.forEach((function(t,n){function i(){return e.raw[n]}function s(i){"00"!==(i=r.toBuffer(i)).toString("hex")||t.allowZero||(i=p.allocUnsafe(0)),t.allowLess&&t.length?(i=r.stripZeros(i),l(t.length>=i.length,"The field "+t.name+" must not have more "+t.length+" bytes")):t.allowZero&&0===i.length||!t.length||l(t.length===i.length,"The field "+t.name+" must have byte length of "+t.length),e.raw[n]=i}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:i,set:s}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:s,get:i})})),i)if("string"==typeof i&&(i=p.from(r.stripHexPrefix(i),"hex")),p.isBuffer(i)&&(i=d.decode(i)),Array.isArray(i)){if(i.length>e._fields.length)throw new Error("wrong number of fields in data");i.forEach((function(t,n){e[e._fields[n]]=r.toBuffer(t)}))}else{if("object"!==(void 0===i?"undefined":n(i)))throw new Error("invalid data");var s=Object.keys(i);t.forEach((function(t){-1!==s.indexOf(t.name)&&(e[t.name]=i[t.name]),-1!==s.indexOf(t.alias)&&(e[t.alias]=i[t.alias])}))}}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/ethereumjs-util/dist/index.js"}],[103,{"../controllers/transactions/lib/tx-state-history-helpers":30,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../controllers/transactions/lib/tx-state-history-helpers");var s={version:18,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=(0,i.snapshotFromTxMeta)(e);return e.history=[t],e}const t=(0,i.migrateFromSnapshotsToDiffs)(e.history).filter((e=>!Array.isArray(e)||e.length>0));return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[1030,{"./secp256k1-lib/der":1031,"./secp256k1-lib/index":1032,buffer:1789,"ethereum-cryptography/secp256k1":2022},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("ethereum-cryptography/secp256k1");function i(){return e("./secp256k1-lib/index")}var s=e("./secp256k1-lib/der"),o=function(e){return 32===e.length&&n.privateKeyVerify(Uint8Array.from(e))};t.exports={privateKeyVerify:o,privateKeyExport:function(e,t){var r=i();if(32!==e.length)throw new RangeError("private key length is invalid");var n=r.privateKeyExport(e,t);return s.privateKeyExport(e,n,t)},privateKeyImport:function(e){if(null!==(e=s.privateKeyImport(e))&&32===e.length&&o(e))return e;throw new Error("couldn't import from DER format")},privateKeyNegate:function(e){return r.from(n.privateKeyNegate(Uint8Array.from(e)))},privateKeyModInverse:function(e){if(32!==e.length)throw new Error("private key length is invalid");var t=i();return r.from(t.privateKeyModInverse(Uint8Array.from(e)))},privateKeyTweakAdd:function(e,t){return r.from(n.privateKeyTweakAdd(Uint8Array.from(e),t))},privateKeyTweakMul:function(e,t){return r.from(n.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))},publicKeyCreate:function(e,t){return r.from(n.publicKeyCreate(Uint8Array.from(e),t))},publicKeyConvert:function(e,t){return r.from(n.publicKeyConvert(Uint8Array.from(e),t))},publicKeyVerify:function(e){return(33===e.length||65===e.length)&&n.publicKeyVerify(Uint8Array.from(e))},publicKeyTweakAdd:function(e,t,i){return r.from(n.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),i))},publicKeyTweakMul:function(e,t,i){return r.from(n.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),i))},publicKeyCombine:function(e,t){var i=[];return e.forEach((function(e){i.push(Uint8Array.from(e))})),r.from(n.publicKeyCombine(i,t))},signatureNormalize:function(e){return r.from(n.signatureNormalize(Uint8Array.from(e)))},signatureExport:function(e){return r.from(n.signatureExport(Uint8Array.from(e)))},signatureImport:function(e){return r.from(n.signatureImport(Uint8Array.from(e)))},signatureImportLax:function(e){if(0===e.length)throw new RangeError("signature length is invalid");var t=i(),r=s.signatureImportLax(e);if(null===r)throw new Error("couldn't parse DER signature");return t.signatureImport(r)},sign:function(e,t,i){if(null===i)throw new TypeError("options should be an Object");var s=void 0;if(i){if(s={},null===i.data)throw new TypeError("options.data should be a Buffer");if(i.data){if(32!==i.data.length)throw new RangeError("options.data length is invalid");s.data=new Uint8Array(i.data)}if(null===i.noncefn)throw new TypeError("options.noncefn should be a Function");i.noncefn&&(s.noncefn=function(e,t,n,s,o){var a=null!=n?r.from(n):null,c=null!=s?r.from(s):null,u=r.from("");return i.noncefn&&(u=i.noncefn(r.from(e),r.from(t),a,c,o)),Uint8Array.from(u)})}var o=n.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),s);return{signature:r.from(o.signature),recovery:o.recid}},verify:function(e,t,r){return n.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)},recover:function(e,t,i,s){return r.from(n.ecdsaRecover(Uint8Array.from(t),i,Uint8Array.from(e),s))},ecdh:function(e,t){return r.from(n.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))},ecdhUnsafe:function(e,t,n){if(33!==e.length&&65!==e.length)throw new RangeError("public key length is invalid");if(32!==t.length)throw new RangeError("private key length is invalid");var s=i();return r.from(s.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),n))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/ethereumjs-util/dist/secp256k1-adapter.js"}],[1031,{buffer:1789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var t=e.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=e.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);r.privateKeyExport=function(r,i,s){var o=e.from(s?t:n);return r.copy(o,s?8:9),i.copy(o,s?181:214),o},r.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||48!==e[r])return null;if(t<(r+=1)+1||!(128&e[r]))return null;var n=127&e[r];if(n<1||n>2)return null;if(t<(r+=1)+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return t<(r+=n)+i||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]?null:e.slice(r+2,r+2+e[r+1])},r.signatureImportLax=function(t){var r=e.alloc(32,0),n=e.alloc(32,0),i=t.length,s=0;if(48!==t[s++])return null;var o=t[s++];if(128&o&&(s+=o-128)>i)return null;if(2!==t[s++])return null;var a=t[s++];if(128&a){if(s+(o=a-128)>i)return null;for(;o>0&&0===t[s];s+=1,o-=1);for(a=0;o>0;s+=1,o-=1)a=(a<<8)+t[s]}if(a>i-s)return null;var c=s;if(s+=a,2!==t[s++])return null;var u=t[s++];if(128&u){if(s+(o=u-128)>i)return null;for(;o>0&&0===t[s];s+=1,o-=1);for(u=0;o>0;s+=1,o-=1)u=(u<<8)+t[s]}if(u>i-s)return null;var l=s;for(s+=u;a>0&&0===t[c];a-=1,c+=1);if(a>32)return null;var d=t.slice(c,c+a);for(d.copy(r,32-d.length);u>0&&0===t[l];u-=1,l+=1);if(u>32)return null;var h=t.slice(l,l+u);return h.copy(n,32-h.length),{r:r,s:n}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/ethereumjs-util/dist/secp256k1-lib/der.js"}],[1032,{"bn.js":1746,buffer:1789,elliptic:1940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=e("bn.js"),i=new(0,e("elliptic").ec)("secp256k1"),s=i.curve;r.privateKeyExport=function(e,t){var r=new n(e);if(r.ucmp(s.n)>=0)throw new Error("couldn't export to DER format");var a=i.g.mul(r);return o(a.getX(),a.getY(),t)},r.privateKeyModInverse=function(e){var r=new n(e);if(r.ucmp(s.n)>=0||r.isZero())throw new Error("private key range is invalid");return r.invm(s.n).toArrayLike(t,"be",32)},r.signatureImport=function(e){var r=new n(e.r);r.ucmp(s.n)>=0&&(r=new n(0));var i=new n(e.s);return i.ucmp(s.n)>=0&&(i=new n(0)),t.concat([r.toArrayLike(t,"be",32),i.toArrayLike(t,"be",32)])},r.ecdhUnsafe=function(e,t,r){var a=i.keyFromPublic(e),c=new n(t);if(c.ucmp(s.n)>=0||c.isZero())throw new Error("scalar was invalid (zero or overflow)");var u=a.pub.mul(c);return o(u.getX(),u.getY(),r)};var o=function(e,r,n){var i=void 0;return n?((i=t.alloc(33))[0]=r.isOdd()?3:2,e.toArrayLike(t,"be",32).copy(i,1)):((i=t.alloc(65))[0]=4,e.toArrayLike(t,"be",32).copy(i,1),r.toArrayLike(t,"be",32).copy(i,33)),i}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/ethereumjs-util/dist/secp256k1-lib/index.js"}],[1033,{buffer:1789,"is-hex-prefixed":2506,"strip-hex-prefix":3086},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),i=e("strip-hex-prefix");function s(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return new r(s(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:i,padToEven:s,intToHex:o,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+s(new r(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},toUtf8:function(e){return new r(s(i(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var s=e[i][t];if(r&&!s)s="";else if("string"!=typeof s)throw new Error("invalid abi");n.push(s)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware>eth-sig-util>ethereumjs-util>ethjs-util",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/ethjs-util/lib/index.js"}],[1034,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=(e,t)=>function(){const r=t.promiseModule,n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];return new r(((r,i)=>{t.errorFirst?n.push((function(e,n){if(t.multiArgs){const t=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),i(t)):r(t)}else e?i(e):r(n)})):n.push((function(e){if(t.multiArgs){const e=new Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];r(e)}else r(e)})),e.apply(this,n)}))};t.exports=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const r=e=>{const r=t=>"string"==typeof t?e===t:t.test(e);return t.include?t.include.some(r):!t.exclude.some(r)};let i;i="function"==typeof e?function(){return t.excludeMain?e.apply(this,arguments):n(e,t).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e));for(const s in e){const o=e[s];i[s]="function"==typeof o&&r(s)?n(o,t):o}return i}}}},{package:"@metamask/eth-json-rpc-infura>eth-json-rpc-middleware>pify",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/pify/index.js"}],[1035,{"./logging-utils":1042,"./utils/cache":1047,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockCacheMiddleware=void 0;const n=e("json-rpc-engine"),i=e("./logging-utils"),s=e("./utils/cache"),o=i.createModuleLogger(i.projectLogger,"block-cache"),a=[undefined,null,"<nil>"];class c{constructor(){this.cache={}}getBlockCache(e){const t=Number.parseInt(e,16);let r=this.cache[t];if(!r){const e={};this.cache[t]=e,r=e}return r}async get(e,t){const r=this.getBlockCache(t),n=s.cacheIdentifierForRequest(e,!0);return n?r[n]:undefined}async set(e,t,r){if(!this.canCacheResult(e,r))return;const n=s.cacheIdentifierForRequest(e,!0);if(!n)return;this.getBlockCache(t)[n]=r}canCacheRequest(e){if(!s.canCache(e.method))return!1;return"pending"!==s.blockTagForRequest(e)}canCacheResult(e,t){return!a.includes(t)&&!(e.method&&["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(e.method)&&(!t||!t.blockHash||"0x0000000000000000000000000000000000000000000000000000000000000000"===t.blockHash))}clearBefore(e){const t=Number.parseInt(e,16);Object.keys(this.cache).map(Number).filter((e=>e<t)).forEach((e=>delete this.cache[e]))}}r.createBlockCacheMiddleware=function({blockTracker:e}={}){if(!e)throw new Error("createBlockCacheMiddleware - No PollingBlockTracker specified");const t=new c,r={[s.CacheStrategy.Permanent]:t,[s.CacheStrategy.Block]:t,[s.CacheStrategy.Fork]:t,[s.CacheStrategy.Never]:undefined};return n.createAsyncMiddleware((async(n,i,a)=>{if(n.skipCache)return a();const c=s.cacheTypeForMethod(n.method),u=r[c];if(!u)return a();if(!u.canCacheRequest(n))return a();const l=s.blockTagForRequest(n),d=l&&"string"==typeof l?l:"latest";let h;if(o("blockTag = %o, req = %o",d,n),"earliest"===d)h="0x00";else if("latest"===d){o("Fetching latest block number to determine cache key");const r=await e.getLatestBlock();o("Clearing values stored under block numbers before %o",r),t.clearBefore(r),h=r}else h=d;const f=await u.get(n,h);return f===undefined?(o("No cache stored under block number %o, carrying request forward",h),await a(),o("Populating cache with",i),await u.set(n,h,i.result)):(o("Cache hit, reusing cache result stored under block number %o",h),i.result=f),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-cache.js"}],[1036,{"./utils/cache":1047,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefRewriteMiddleware=void 0;const n=e("json-rpc-engine"),i=e("./utils/cache");r.createBlockRefRewriteMiddleware=function({blockTracker:e}={}){if(!e)throw Error('BlockRefRewriteMiddleware - mandatory "blockTracker" option is missing.');return n.createAsyncMiddleware((async(t,r,n)=>{const s=i.blockTagParamIndex(t.method);if(s===undefined)return n();let o=Array.isArray(t.params)?t.params[s]:undefined;if(o===undefined&&(o="latest"),"latest"!==o)return n();const a=await e.getLatestBlock();return Array.isArray(t.params)&&(t.params[s]=a),n()}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref-rewrite.js"}],[1037,{"./logging-utils":1042,"./utils/cache":1047,clone:1826,"json-rpc-engine":2529,pify:1049},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefMiddleware=void 0;const i=e("json-rpc-engine"),s=n(e("clone")),o=n(e("pify")),a=e("./logging-utils"),c=e("./utils/cache"),u=a.createModuleLogger(a.projectLogger,"block-ref");r.createBlockRefMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('BlockRefMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('BlockRefMiddleware - mandatory "blockTracker" option is missing.');return i.createAsyncMiddleware((async(r,n,i)=>{var a;const l=c.blockTagParamIndex(r.method);if(l===undefined)return i();if("latest"!==(Array.isArray(r.params)&&null!==(a=r.params[l])&&void 0!==a?a:"latest"))return u('blockRef is not "latest", carrying request forward'),i();const d=await t.getLatestBlock();u(`blockRef is "latest", setting param ${l} to latest block ${d}`);const h=s.default(r);Array.isArray(h.params)&&(h.params[l]=d),u("Performing another request %o",h);const f=await o.default(e.sendAsync).call(e,h);return n.result=f.result,n.error=f.error,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref.js"}],[1038,{"./logging-utils":1042,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockTrackerInspectorMiddleware=void 0;const n=e("json-rpc-engine"),i=e("./logging-utils"),s=i.createModuleLogger(i.projectLogger,"block-tracker-inspector"),o=["eth_getTransactionByHash","eth_getTransactionReceipt"];function a(e){const{result:t}=e;return t&&"object"==typeof t&&(r=t,n="blockNumber",Object.hasOwnProperty.call(r,n))&&"string"==typeof t.blockNumber?t.blockNumber:undefined;var r,n}r.createBlockTrackerInspectorMiddleware=function({blockTracker:e}){return n.createAsyncMiddleware((async(t,r,n)=>{if(!o.includes(t.method))return n();await n();const i=a(r);if(!i)return undefined;s("res.result.blockNumber exists, proceeding. res = %o",r);return Number.parseInt(i,16)>Number.parseInt(e.getCurrentBlock(),16)&&(s("blockNumber from response is greater than current block number, refreshing current block number"),await e.checkForLatestBlock()),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-tracker-inspector.js"}],[1039,{btoa:1788,"eth-rpc-errors":2e3,"json-rpc-engine":2529,"node-fetch":1788},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createFetchConfigFromReq=r.createFetchMiddleware=void 0;const n=e("json-rpc-engine"),i=e("eth-rpc-errors"),s=global.fetch||e("node-fetch"),o=global.btoa||e("btoa"),a=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function c(e){switch(e.status){case 405:throw i.ethErrors.rpc.methodNotFound();case 418:throw i.ethErrors.rpc.internal({message:"Request is being rate limited."});case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",i.ethErrors.rpc.internal({message:e})}()}}function u(e,t){if(200!==e.status)throw i.ethErrors.rpc.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw i.ethErrors.rpc.internal({data:t.error});return t.result}function l({req:e,rpcUrl:t,originHttpHeaderKey:r}){const n=new URL(t),i=function(e){let t="";t+=e.protocol,t+=`//${e.hostname}`,e.port&&(t+=`:${e.port}`);return t+=`${e.pathname}`,t+=`${e.search}`,t}(n),s={id:e.id,jsonrpc:e.jsonrpc,method:e.method,params:e.params},a=e.origin,c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)};if(n.username&&n.password){const e=`${n.username}:${n.password}`,t=o(e);c.headers.Authorization=`Basic ${t}`}return r&&a&&(c.headers[r]=a),{fetchUrl:i,fetchParams:c}}function d(e){return new Promise((t=>setTimeout(t,e)))}r.createFetchMiddleware=function({rpcUrl:e,originHttpHeaderKey:t}){return n.createAsyncMiddleware((async(r,n,i)=>{const{fetchUrl:o,fetchParams:h}=l({req:r,rpcUrl:e,originHttpHeaderKey:t});for(let e=0;e<5;e++){try{const e=await s(o,h);c(e);const t=await e.text();let r;try{r=JSON.parse(t)}catch(e){throw new Error(`FetchMiddleware - failed to parse response body: "${t}"`)}const i=u(e,r);return void(n.result=i)}catch(e){const t=e.toString();if(!a.some((e=>t.includes(e))))throw e}await d(1e3)}}))},r.createFetchConfigFromReq=l}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/fetch.js"}],[104,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:19,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(((e,t,r)=>{if(e.status!==i.TransactionStatus.submitted)return e;const n=function(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)}));return Math.max.apply(null,t)}(r.filter((e=>e.status===i.TransactionStatus.confirmed)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from))),s=function(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return n}(r.filter((e=>e.status===i.TransactionStatus.submitted)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),n),o=Math.max(s,n);return parseInt(e.txParams.nonce,16)>o+1&&(e.status=i.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[1040,{"./block-cache":1035,"./block-ref":1037,"./block-ref-rewrite":1036,"./block-tracker-inspector":1038,"./fetch":1039,"./inflight-cache":1041,"./providerAsMiddleware":1043,"./providerFromEngine":1044,"./providerFromMiddleware":1045,"./retryOnEmpty":1046,"./wallet":1048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./block-cache"),r),i(e("./block-ref-rewrite"),r),i(e("./block-ref"),r),i(e("./block-tracker-inspector"),r),i(e("./fetch"),r),i(e("./inflight-cache"),r),i(e("./providerAsMiddleware"),r),i(e("./providerFromEngine"),r),i(e("./providerFromMiddleware"),r),i(e("./retryOnEmpty"),r),i(e("./wallet"),r)}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/index.js"}],[1041,{"./logging-utils":1042,"./utils/cache":1047,clone:1826,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createInflightCacheMiddleware=void 0;const i=n(e("clone")),s=e("json-rpc-engine"),o=e("./logging-utils"),a=e("./utils/cache"),c=o.createModuleLogger(o.projectLogger,"inflight-cache");r.createInflightCacheMiddleware=function(){const e={};return s.createAsyncMiddleware((async(t,r,n)=>{if(t.skipCache)return n();const s=a.cacheIdentifierForRequest(t);if(!s)return c("Request is not cacheable, proceeding. req = %o",t),n();let o=e[s];return o?(c("Running %i handler(s) for request %o",o.length,t),await function(e,t){const{resolve:r,promise:n}=function(){let e;const t=new Promise((t=>{e=t}));return{resolve:e,promise:t}}();return t.push((t=>{e.result=i.default(t.result),e.error=i.default(t.error),r()})),n}(r,o),undefined):(o=[],e[s]=o,c("Carrying original request forward %o",t),await n(),delete e[s],c("Running %i collected handler(s) for request %o",o.length,t),function(e,t){setTimeout((()=>{t.forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}))}(r,o),undefined)}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/inflight-cache.js"}],[1042,{"@metamask/utils":1202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=n.createProjectLogger("eth-json-rpc-middleware")}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/logging-utils.js"}],[1043,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ethersProviderAsMiddleware=r.providerAsMiddleware=void 0,r.providerAsMiddleware=function(e){return(t,r,n,i)=>{e.sendAsync(t,((e,t)=>e instanceof Error?i(e):(Object.assign(r,t),i())))}},r.ethersProviderAsMiddleware=function(e){return(t,r,n,i)=>{e.send(t,((e,t)=>e?i(e):(Object.assign(r,t),i())))}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/providerAsMiddleware.js"}],[1044,{"@metamask/safe-event-emitter":1183},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromEngine=void 0;const i=n(e("@metamask/safe-event-emitter"));r.providerFromEngine=function(e){const t=new i.default;return t.sendAsync=(t,r)=>{e.handle(t,r)},t.send=(t,r)=>{if("function"!=typeof r)throw new Error('Must provide callback to "send" method.');e.handle(t,r)},e.on&&e.on("notification",(e=>{t.emit("data",null,e)})),t}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/providerFromEngine.js"}],[1045,{"./providerFromEngine":1044,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromMiddleware=void 0;const n=e("json-rpc-engine"),i=e("./providerFromEngine");r.providerFromMiddleware=function(e){const t=new n.JsonRpcEngine;return t.push(e),i.providerFromEngine(t)}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/providerFromMiddleware.js"}],[1046,{"./logging-utils":1042,"./utils/cache":1047,clone:1826,"json-rpc-engine":2529,pify:1049},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createRetryOnEmptyMiddleware=void 0;const i=n(e("clone")),s=e("json-rpc-engine"),o=n(e("pify")),a=e("./logging-utils"),c=e("./utils/cache"),u=a.createModuleLogger(a.projectLogger,"retry-on-empty"),l=[undefined,null,"<nil>"];function d(e){return new Promise((t=>setTimeout(t,e)))}r.createRetryOnEmptyMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('RetryOnEmptyMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('RetryOnEmptyMiddleware - mandatory "blockTracker" option is missing.');return s.createAsyncMiddleware((async(r,n,s)=>{const a=c.blockTagParamIndex(r.method);if(a===undefined)return s();let h=Array.isArray(r.params)?r.params[a]:undefined;if(h===undefined&&(h="latest"),["latest","pending"].includes(h))return s();const f=Number.parseInt(h.slice(2),16);if(Number.isNaN(f))return s();const p=await t.getLatestBlock(),m=Number.parseInt(p.slice(2),16);if(f>m)return u("Requested block number %o is higher than latest block number %o, falling through to original request",f,m),s();u("Requested block number %o is not higher than latest block number %o, trying request until non-empty response is received",f,m);const g=i.default(r),y=await async function(e,t){for(let r=0;r<e;r++)try{return await t()}catch(e){u("(call %i) Request failed, waiting 1s to retry again...",r+1),await d(1e3)}throw u("Retries exhausted"),new Error("RetryOnEmptyMiddleware - retries exhausted")}(10,(async()=>{u("Performing request %o",g);const t=await o.default(e.sendAsync).call(e,g);if(u("Response is %o",t),l.includes(t.result))throw new Error(`RetryOnEmptyMiddleware - empty response "${JSON.stringify(t)}" for request "${JSON.stringify(g)}"`);return t}));return u("Copying result %o and error %o",y.result,y.error),n.result=y.result,n.error=y.error,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/retryOnEmpty.js"}],[1047,{"json-stable-stringify":2535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.cacheTypeForMethod=r.blockTagParamIndex=r.blockTagForRequest=r.canCache=r.cacheIdentifierForRequest=r.CacheStrategy=void 0;const i=n(e("json-stable-stringify"));var s;function o(e){return c(e)!==s.Never}function a(e){switch(e){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return undefined}}function c(e){switch(e){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return s.Permanent;case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return s.Fork;case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return s.Block;default:return s.Never}}!function(e){e.Block="block",e.Fork="fork",e.Never="never",e.Permanent="perma"}(s=r.CacheStrategy||(r.CacheStrategy={})),r.cacheIdentifierForRequest=function(e,t){var r;const n=t?function(e){if(!e.params)return[];const t=a(e.method);if(t===undefined||!Array.isArray(e.params)||t>=e.params.length)return e.params;if("eth_getBlockByNumber"===e.method)return e.params.slice(1);return e.params.slice(0,t)}(e):null!==(r=e.params)&&void 0!==r?r:[];return o(e.method)?`${e.method}:${i.default(n)}`:null},r.canCache=o,r.blockTagForRequest=function(e){if(!e.params)return undefined;const t=a(e.method);return t===undefined||!Array.isArray(e.params)||t>=e.params.length?undefined:e.params[t]},r.blockTagParamIndex=a,r.cacheTypeForMethod=c}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/cache.js"}],[1048,{"@metamask/eth-sig-util":1067,"eth-rpc-errors":2e3,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.createWalletMiddleware=void 0;const o=e("json-rpc-engine"),a=s(e("@metamask/eth-sig-util")),c=e("eth-rpc-errors");function u(e){return 42===e.length}r.createWalletMiddleware=function({getAccounts:e,processDecryptMessage:t,processEncryptionPublicKey:r,processEthSignMessage:n,processPersonalMessage:i,processTransaction:s,processSignTransaction:l,processTypedMessage:d,processTypedMessageV3:h,processTypedMessageV4:f}){if(!e)throw new Error("opts.getAccounts is required");return o.createScaffoldMiddleware({eth_accounts:o.createAsyncMiddleware((async function(t,r){r.result=await e(t)})),eth_coinbase:o.createAsyncMiddleware((async function(t,r){const n=await e(t);r.result=n[0]||null})),eth_sendTransaction:o.createAsyncMiddleware((async function(e,t){if(!s)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0]||{};r.from=await p(r.from,e),t.result=await s(r,e)})),eth_signTransaction:o.createAsyncMiddleware((async function(e,t){if(!l)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0]||{};r.from=await p(r.from,e),t.result=await l(r,e)})),eth_sign:o.createAsyncMiddleware((async function(e,t){if(!n)throw c.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),i=e.params[1],s=e.params[2]||{},o=Object.assign(Object.assign({},s),{from:r,data:i});t.result=await n(o,e)})),eth_signTypedData:o.createAsyncMiddleware((async function(e,t){if(!d)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0],n=await p(e.params[1],e),i=e.params[2]||{},s=Object.assign(Object.assign({},i),{from:n,data:r});t.result=await d(s,e,"V1")})),eth_signTypedData_v3:o.createAsyncMiddleware((async function(e,t){if(!h)throw c.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),n=e.params[1],i={data:n,from:r,version:"V3"};t.result=await h(i,e,"V3")})),eth_signTypedData_v4:o.createAsyncMiddleware((async function(e,t){if(!f)throw c.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),n=e.params[1],i={data:n,from:r,version:"V4"};t.result=await f(i,e,"V4")})),personal_sign:o.createAsyncMiddleware((async function(e,t){if(!i)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0],n=e.params[1],s=e.params[2]||{};let o,a;if(u(r)&&!u(n)){let e="The eth_personalSign method requires params ordered ";e+="[message, address]. This was previously handled incorrectly, ",e+="and has been corrected automatically. ",e+="Please switch this param order for smooth behavior in the future.",t.warning=e,o=r,a=n}else a=r,o=n;o=await p(o,e);const l=Object.assign(Object.assign({},s),{from:o,data:a});t.result=await i(l,e)})),eth_getEncryptionPublicKey:o.createAsyncMiddleware((async function(e,t){if(!r)throw c.ethErrors.rpc.methodNotSupported();const n=await p(e.params[0],e);t.result=await r(n,e)})),eth_decrypt:o.createAsyncMiddleware((async function(e,r){if(!t)throw c.ethErrors.rpc.methodNotSupported();const n=e.params[0],i=await p(e.params[1],e),s=e.params[2]||{},o=Object.assign(Object.assign({},s),{from:i,data:n});r.result=await t(o,e)})),personal_ecRecover:o.createAsyncMiddleware((async function(e,t){const r=e.params[0],n=e.params[1],i=a.recoverPersonalSignature({data:r,signature:n});t.result=i}))});async function p(t,r){if("string"==typeof t&&t.length>0&&u(t)){const n=(await e(r,{suppressUnauthorized:!1})).map((e=>e.toLowerCase())),i=t.toLowerCase();if(n.includes(i))return i;throw c.ethErrors.provider.unauthorized()}throw c.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/wallet.js"}],[1049,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=(e,t)=>function(){const r=t.promiseModule,n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];return new r(((r,i)=>{t.errorFirst?n.push((function(e,n){if(t.multiArgs){const t=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),i(t)):r(t)}else e?i(e):r(n)})):n.push((function(e){if(t.multiArgs){const e=new Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];r(e)}else r(e)})),e.apply(this,n)}))};t.exports=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const r=e=>{const r=t=>"string"==typeof t?e===t:t.test(e);return t.include?t.include.some(r):!t.exclude.some(r)};let i;i="function"==typeof e?function(){return t.excludeMain?e.apply(this,arguments):n(e,t).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e));for(const s in e){const o=e[s];i[s]="function"==typeof o&&r(s)?n(o,t):o}return i}}}},{package:"@metamask/eth-json-rpc-middleware>pify",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/pify/index.js"}],[105,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:20,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[1050,{"@metamask/browser-passworder":994,"@metamask/eth-hd-keyring":1001,"@metamask/eth-sig-util":1067,"@metamask/eth-simple-keyring":1079,events:1790,"obs-store":2809},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/browser-passworder"),i=e("@metamask/eth-hd-keyring"),{normalize:s}=e("@metamask/eth-sig-util"),o=e("@metamask/eth-simple-keyring"),{EventEmitter:a}=e("events"),c=e("obs-store"),u=[h(o),h(i)],l="HD Key Tree",d="Simple Key Pair";function h(e){const t=()=>new e;return t.type=e.type,t}t.exports={KeyringController:class extends a{constructor(e){super();const t=e.initState||{};this.keyringBuilders=e.keyringBuilders?u.concat(e.keyringBuilders):u,this.store=new c(t),this.memStore=new c({isUnlocked:!1,keyringTypes:this.keyringBuilders.map((e=>e.type)),keyrings:[],encryptionKey:null}),this.encryptor=e.encryptor||n,this.keyrings=[],this._unsupportedKeyrings=[],this.cacheEncryptionKey=Boolean(e.cacheEncryptionKey)}fullUpdate(){return this.emit("update",this.memStore.getState()),this.memStore.getState()}async createNewVaultAndKeychain(e){return this.password=e,await this.createFirstKeyTree(),this.setUnlocked(),this.fullUpdate()}async createNewVaultAndRestore(e,t){if("string"!=typeof e)throw new Error("Password must be text.");this.password=e,await this.clearKeyrings();const r=await this.addNewKeyring(l,{mnemonic:t,numberOfAccounts:1}),[n]=await r.getAccounts();if(!n)throw new Error("KeyringController - First Account not found.");return this.setUnlocked(),this.fullUpdate()}async setLocked(){return delete this.password,this.memStore.updateState({isUnlocked:!1,encryptionKey:null,encryptionSalt:null}),this.keyrings=[],await this._updateMemStoreKeyrings(),this.emit("lock"),this.fullUpdate()}async submitPassword(e){return this.keyrings=await this.unlockKeyrings(e),this.setUnlocked(),this.fullUpdate()}async submitEncryptionKey(e,t){return this.keyrings=await this.unlockKeyrings(undefined,e,t),this.setUnlocked(),this.fullUpdate()}async verifyPassword(e){const t=this.store.getState().vault;if(!t)throw new Error("Cannot unlock without a previous vault.");await this.encryptor.decrypt(e,t)}async addNewKeyring(e,t){const r=await this._newKeyring(e,t);t&&t.mnemonic||e!==l||(r.generateRandomMnemonic(),await r.addAccounts());const n=await r.getAccounts();return await this.checkForDuplicate(e,n),this.keyrings.push(r),await this.persistAllKeyrings(),this.fullUpdate(),r}async removeEmptyKeyrings(){const e=[];await Promise.all(this.keyrings.map((async t=>{(await t.getAccounts()).length>0&&e.push(t)}))),this.keyrings=e}async checkForDuplicate(e,t){const r=await this.getAccounts();if(e===d){if(Boolean(r.find((e=>{return e===t[0]||e===((r=t[0]).startsWith("0x")?r.slice(2):r);var r}))))throw new Error("The account you are trying to import is a duplicate");return t}return t}async addNewAccount(e){return(await e.addAccounts(1)).forEach((e=>{this.emit("newAccount",e)})),await this.persistAllKeyrings(),this.fullUpdate()}async exportAccount(e){const t=await this.getKeyringForAccount(e);return await t.exportAccount(s(e))}async removeAccount(e){const t=await this.getKeyringForAccount(e);if("function"!=typeof t.removeAccount)throw new Error(`Keyring ${t.type} doesn't support account removal operations`);t.removeAccount(e),this.emit("removedAccount",e);return 0===(await t.getAccounts()).length&&await this.removeEmptyKeyrings(),await this.persistAllKeyrings(),this.fullUpdate()}async signTransaction(e,t,r={}){const n=s(t),i=await this.getKeyringForAccount(n);return await i.signTransaction(n,e,r)}async signMessage(e,t={}){const r=s(e.from),n=await this.getKeyringForAccount(r);return await n.signMessage(r,e.data,t)}async signPersonalMessage(e,t={}){const r=s(e.from),n=await this.getKeyringForAccount(r);return await n.signPersonalMessage(r,e.data,t)}async getEncryptionPublicKey(e,t={}){const r=s(e),n=await this.getKeyringForAccount(e);return await n.getEncryptionPublicKey(r,t)}async decryptMessage(e,t={}){const r=s(e.from);return(await this.getKeyringForAccount(r)).decryptMessage(r,e.data,t)}async signTypedMessage(e,t={version:"V1"}){const r=s(e.from);return(await this.getKeyringForAccount(r)).signTypedData(r,e.data,t)}async getAppKeyAddress(e,t){const r=s(e);return(await this.getKeyringForAccount(r)).getAppKeyAddress(r,t)}async exportAppKeyForAddress(e,t){const r=s(e),n=await this.getKeyringForAccount(r);if(!("exportAccount"in n))throw new Error(`The keyring for address ${e} does not support exporting.`);return n.exportAccount(r,{withAppKeyOrigin:t})}async createFirstKeyTree(){this.clearKeyrings();const e=await this.addNewKeyring(l),[t]=await e.getAccounts();if(!t)throw new Error("KeyringController - No account found on keychain.");const r=s(t);return this.emit("newVault",r),null}async persistAllKeyrings(){const{encryptionKey:e,encryptionSalt:t}=this.memStore.getState();if(!this.password&&!e)throw new Error("Cannot persist vault without password and encryption key");const r=await Promise.all(this.keyrings.map((async e=>{const[t,r]=await Promise.all([e.type,e.serialize()]);return{type:t,data:r}})));let n,i;if(r.push(...this._unsupportedKeyrings),this.cacheEncryptionKey){if(this.password){const{vault:e,exportedKeyString:t}=await this.encryptor.encryptWithDetail(this.password,r);n=e,i=t}else if(e){const i=await this.encryptor.importKey(e),s=await this.encryptor.encryptWithKey(i,r);s.salt=t,n=JSON.stringify(s)}}else n=await this.encryptor.encrypt(this.password,r);if(!n)throw new Error("Cannot persist vault without vault information");return this.store.updateState({vault:n}),await this._updateMemStoreKeyrings(),i&&this.memStore.updateState({encryptionKey:i,encryptionSalt:JSON.parse(n).salt}),!0}async unlockKeyrings(e,t,r){const n=this.store.getState().vault;if(!n)throw new Error("Cannot unlock without a previous vault.");let i;if(await this.clearKeyrings(),this.cacheEncryptionKey)if(e){const t=await this.encryptor.decryptWithDetail(e,n);i=t.vault,this.password=e,this.memStore.updateState({encryptionKey:t.exportedKeyString,encryptionSalt:t.salt})}else{const e=JSON.parse(n);if(r!==e.salt)throw new Error("Encryption key and salt provided are expired");const s=await this.encryptor.importKey(t);i=await this.encryptor.decryptWithKey(s,e),this.memStore.updateState({encryptionKey:t,encryptionSalt:r})}else i=await this.encryptor.decrypt(e,n),this.password=e;return await Promise.all(i.map(this._restoreKeyring.bind(this))),await this._updateMemStoreKeyrings(),this.keyrings}async restoreKeyring(e){const t=await this._restoreKeyring(e);return t&&await this._updateMemStoreKeyrings(),t}async _restoreKeyring(e){const{type:t,data:r}=e,n=await this._newKeyring(t,r);return n?(await n.getAccounts(),this.keyrings.push(n),n):(this._unsupportedKeyrings.push(e),undefined)}getKeyringBuilderForType(e){return this.keyringBuilders.find((t=>t.type===e))}getKeyringsByType(e){return this.keyrings.filter((t=>t.type===e))}async getAccounts(){const e=this.keyrings||[];return(await Promise.all(e.map((e=>e.getAccounts())))).reduce(((e,t)=>e.concat(t)),[]).map(s)}async getKeyringForAccount(e){const t=s(e),r=await Promise.all(this.keyrings.map((e=>Promise.all([e,e.getAccounts()])))),n=r.filter((e=>e[1].map(s).includes(t)));if(n&&n.length>0)return n[0][0];let i="";throw e?r&&r.length?n&&n.length||(i="There are keyrings, but none match the address"):i="There are no keyrings":i="The address passed in is invalid/empty",new Error(`No keyring found for the requested account. Error info: ${i}`)}async displayForKeyring(e){const t=await e.getAccounts();return{type:e.type,accounts:t.map(s)}}async clearKeyrings(){this.keyrings=[],this.memStore.updateState({keyrings:[]})}async _updateMemStoreKeyrings(){const e=await Promise.all(this.keyrings.map(this.displayForKeyring));return this.memStore.updateState({keyrings:e})}setUnlocked(){this.memStore.updateState({isUnlocked:!0}),this.emit("unlock")}forgetKeyring(e){if(!e.forgetDevice)throw new Error(`KeyringController - keyring does not have method "forgetDevice", keyring type: ${e.type}`);e.forgetDevice(),this.persistAllKeyrings()}async _newKeyring(e,t){const r=this.getKeyringBuilderForType(e);if(!r)return undefined;const n=r();return await n.deserialize(t),n.init&&await n.init(),n}},keyringBuilderFactory:h}}}},{package:"@metamask/eth-keyring-controller",file:"node_modules/@metamask/eth-keyring-controller/index.js"}],[1051,{"@ethereumjs/tx":305,buffer:1789,"eth-sig-util":1052,"ethereumjs-util":2044,events:1790,hdkey:1058},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{EventEmitter:n}=e("events"),i=e("hdkey"),s=e("ethereumjs-util"),o=e("eth-sig-util"),{TransactionFactory:a}=e("@ethereumjs/tx"),c="m",u="Ledger Hardware",l={ropsten:"http://api-ropsten.etherscan.io",kovan:"http://api-kovan.etherscan.io",rinkeby:"https://api-rinkeby.etherscan.io",mainnet:"https://api.etherscan.io"};class d extends n{constructor(e={}){super(),this.accountDetails={},this.bridgeUrl=null,this.type=u,this.page=0,this.perPage=5,this.unlockedAccount=0,this.hdk=new i,this.paths={},this.iframe=null,this.network="mainnet",this.implementFullBIP44=!1,this.deserialize(e),this.iframeLoaded=!1,this._setupIframe(),this.currentMessageId=0,this.messageCallbacks={},this._setupListener()}serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,accountDetails:this.accountDetails,bridgeUrl:this.bridgeUrl,implementFullBIP44:!1})}deserialize(e={}){return this.hdPath=e.hdPath||"m/44'/60'/0'",this.bridgeUrl=e.bridgeUrl||"https://metamask.github.io/eth-ledger-bridge-keyring",this.accounts=e.accounts||[],this.accountDetails=e.accountDetails||{},e.accountDetails||this._migrateAccountDetails(e),this.implementFullBIP44=e.implementFullBIP44||!1,this.accounts=this.accounts.filter((e=>Object.keys(this.accountDetails).includes(s.toChecksumAddress(e)))),Promise.resolve()}_migrateAccountDetails(e){if(this._isLedgerLiveHdPath()&&e.accountIndexes)for(const t of Object.keys(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:this._getPathForIndex(e.accountIndexes[t])};this._isLedgerLiveHdPath()||this.accounts.filter((e=>!Object.keys(this.accountDetails).includes(s.toChecksumAddress(e)))).forEach((e=>{try{this.accountDetails[s.toChecksumAddress(e)]={bip44:!1,hdPath:this._pathFromAddress(e)}}catch(t){console.log(`failed to migrate account ${e}`)}}))}isUnlocked(){return Boolean(this.hdk&&this.hdk.publicKey)}isConnected(){return this.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=parseInt(e,10)}setHdPath(e){this.hdPath!==e&&(this.hdk=new i),this.hdPath=e}unlock(e,t=!0){if(this.isUnlocked()&&!e)return Promise.resolve("already unlocked");const n=e?this._toLedgerPath(e):this.hdPath;return new Promise(((e,i)=>{this._sendMessage({action:"ledger-unlock",params:{hdPath:n}},(({success:n,payload:s})=>{n?(t&&(this.hdk.publicKey=r.from(s.publicKey,"hex"),this.hdk.chainCode=r.from(s.chainCode,"hex")),e(s.address)):i(s.error||new Error("Unknown error"))}))}))}addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((async r=>{const n=this.unlockedAccount,i=n+e;for(let e=n;e<i;e++){const t=this._getPathForIndex(e);let r;r=this._isLedgerLiveHdPath()?await this.unlock(t):this._addressFromIndex(c,e),this.accountDetails[s.toChecksumAddress(r)]={bip44:this._isLedgerLiveHdPath(),hdPath:t},this.accounts.includes(r)||this.accounts.push(r),this.page=0}t(this.accounts)})).catch(r)}))}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase())),delete this.accountDetails[s.toChecksumAddress(e)]}attemptMakeApp(){return new Promise(((e,t)=>{this._sendMessage({action:"ledger-make-app"},(({success:r,error:n})=>{r?e(!0):t(n)}))}))}updateTransportMethod(e){return new Promise(((t,r)=>{this.iframeLoaded?this._sendMessage({action:"ledger-update-transport",params:{transportType:e}},(({success:e})=>{e?t(!0):r(new Error("Ledger transport could not be updated"))})):this.delayedPromise={resolve:t,reject:r,transportType:e}}))}signTransaction(e,t){let n;if("function"==typeof t.getChainId)return t.v=s.bufferToHex(t.getChainId()),t.r="0x00",t.s="0x00",n=t.serialize().toString("hex"),this._signTransaction(e,n,(e=>(t.v=r.from(e.v,"hex"),t.r=r.from(e.r,"hex"),t.s=r.from(e.s,"hex"),t)));const i=t.getMessageToSign(!1);return n=r.isBuffer(i)?i.toString("hex"):s.rlp.encode(i).toString("hex"),this._signTransaction(e,n,(e=>{const r=t.toJSON();return r.type=t.type,r.v=s.addHexPrefix(e.v),r.r=s.addHexPrefix(e.r),r.s=s.addHexPrefix(e.s),a.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}_signTransaction(e,t,r){return new Promise(((n,i)=>{this.unlockAccountByAddress(e).then((e=>{this._sendMessage({action:"ledger-sign-transaction",params:{tx:t,hdPath:e}},(({success:e,payload:t})=>{if(e){const e=r(t);e.verifySignature()?n(e):i(new Error("Ledger: The transaction signature is not valid"))}else i(t.error||new Error("Ledger: Unknown error while signing transaction"))}))})).catch(i)}))}signMessage(e,t){return this.signPersonalMessage(e,t)}signPersonalMessage(e,t){return new Promise(((r,n)=>{this.unlockAccountByAddress(e).then((i=>{this._sendMessage({action:"ledger-sign-personal-message",params:{hdPath:i,message:s.stripHexPrefix(t)}},(({success:i,payload:a})=>{if(i){let i=a.v-27;i=i.toString(16),i.length<2&&(i=`0${i}`);const c=`0x${a.r}${a.s}${i}`,u=o.recoverPersonalSignature({data:t,sig:c});s.toChecksumAddress(u)!==s.toChecksumAddress(e)&&n(new Error("Ledger: The signature doesnt match the right address")),r(c)}else n(a.error||new Error("Ledger: Unknown error while signing message"))}))})).catch(n)}))}async unlockAccountByAddress(e){const t=s.toChecksumAddress(e);if(!Object.keys(this.accountDetails).includes(t))throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:r}=this.accountDetails[t];if((await this.unlock(r,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return r}async signTypedData(e,t,r={}){const n="V4"===r.version;if(!n)throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:i,types:a,primaryType:c,message:u}=o.TypedDataUtils.sanitizeData(t),l=o.TypedDataUtils.hashStruct("EIP712Domain",i,a,n).toString("hex"),d=o.TypedDataUtils.hashStruct(c,u,a,n).toString("hex"),h=await this.unlockAccountByAddress(e),{success:f,payload:p}=await new Promise((e=>{this._sendMessage({action:"ledger-sign-typed-data",params:{hdPath:h,domainSeparatorHex:l,hashStructMessageHex:d}},(t=>e(t)))}));if(f){let r=p.v-27;r=r.toString(16),r.length<2&&(r=`0${r}`);const n=`0x${p.r}${p.s}${r}`,i=o.recoverTypedSignature_v4({data:t,sig:n});if(s.toChecksumAddress(i)!==s.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return n}throw p.error||new Error("Ledger: Unknown error while signing message")}exportAccount(){throw new Error("Not supported on this device")}forgetDevice(){this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new i}_setupIframe(){this.iframe=document.createElement("iframe"),this.iframe.src=this.bridgeUrl,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{if(this.iframeLoaded=!0,this.delayedPromise)try{const e=await this.updateTransportMethod(this.delayedPromise.transportType);this.delayedPromise.resolve(e)}catch(e){this.delayedPromise.reject(e)}finally{delete this.delayedPromise}},document.head.appendChild(this.iframe)}_getOrigin(){const e=this.bridgeUrl.split("/");return e.splice(-1,1),e.join("/")}_sendMessage(e,t){e.target="LEDGER-IFRAME",this.currentMessageId+=1,e.messageId=this.currentMessageId,this.messageCallbacks[this.currentMessageId]=t,this.iframe.contentWindow.postMessage(e,"*")}_setupListener(){this._eventListener=({origin:e,data:t})=>e===this._getOrigin()&&(t&&(this.messageCallbacks[t.messageId]?this.messageCallbacks[t.messageId](t):"ledger-connection-change"===t.action&&(this.isDeviceConnected=t.payload.connected)),undefined),window.addEventListener("message",this._eventListener)}destroy(){window.removeEventListener("message",this._eventListener)}async __getPage(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let n;return await this.unlock(),n=this._isLedgerLiveHdPath()?await this._getAccountsBIP44(t,r):this._getAccountsLegacy(t,r),n}async _getAccountsBIP44(e,t){const r=[];for(let n=e;n<t;n++){const e=this._getPathForIndex(n),t=await this.unlock(e),i=!this.implementFullBIP44||await this._hasPreviousTransactions(t);if(r.push({address:t,balance:null,index:n}),!i)break}return r}_getAccountsLegacy(e,t){const r=[];for(let n=e;n<t;n++){const e=this._addressFromIndex(c,n);r.push({address:e,balance:null,index:n}),this.paths[s.toChecksumAddress(e)]=n}return r}_padLeftEven(e){return e.length%2==0?e:`0${e}`}_normalize(e){return this._padLeftEven(s.bufferToHex(e).toLowerCase())}_addressFromIndex(e,t){const r=this.hdk.derive(`${e}/${t}`),n=s.publicToAddress(r.publicKey,!0).toString("hex");return s.toChecksumAddress(`0x${n}`)}_pathFromAddress(e){const t=s.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===this._addressFromIndex(c,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return this._getPathForIndex(r)}_toAscii(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t}_getPathForIndex(e){return this._isLedgerLiveHdPath()?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`}_isLedgerLiveHdPath(){return"m/44'/60'/0'/0/0"===this.hdPath}_toLedgerPath(e){return e.toString().replace("m/","")}async _hasPreviousTransactions(e){const t=this._getApiUrl(),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),n=await r.json();return"0"!==n.status&&n.result.length>0}_getApiUrl(){return l[this.network]||l.mainnet}}d.type=u,t.exports=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/index.js"}],[1052,{buffer:1789,"ethereumjs-abi":2024,"ethereumjs-util":1053,tweetnacl:3146,"tweetnacl-util":3145},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),i=e("ethereumjs-util"),s=e("ethereumjs-abi"),o=e("tweetnacl");o.util=e("tweetnacl-util");const a={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},c={encodeData(e,t,r,o=!0){const a=["bytes32"],c=[this.hashType(e,r)];if(o){const u=(e,t,a)=>{if(r[t]!==undefined)return["bytes32",null===a||a===undefined?"0x0000000000000000000000000000000000000000000000000000000000000000":i.keccak(this.encodeData(t,a,r,o))];if(a===undefined)throw new Error(`missing value for field ${e} of type ${t}`);if("bytes"===t)return["bytes32",i.keccak(a)];if("string"===t)return"string"==typeof a&&(a=n.from(a,"utf8")),["bytes32",i.keccak(a)];if(t.lastIndexOf("]")===t.length-1){const r=t.slice(0,t.lastIndexOf("[")),n=a.map((t=>u(e,r,t)));return["bytes32",i.keccak(s.rawEncode(n.map((([e])=>e)),n.map((([,e])=>e))))]}return[t,a]};for(const n of r[e]){const[e,r]=u(n.name,n.type,t[n.name]);a.push(e),c.push(r)}}else for(const s of r[e]){let e=t[s.name];if(e!==undefined)if("bytes"===s.type)a.push("bytes32"),e=i.keccak(e),c.push(e);else if("string"===s.type)a.push("bytes32"),"string"==typeof e&&(e=n.from(e,"utf8")),e=i.keccak(e),c.push(e);else if(r[s.type]!==undefined)a.push("bytes32"),e=i.keccak(this.encodeData(s.type,e,r,o)),c.push(e);else{if(s.type.lastIndexOf("]")===s.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");a.push(s.type),c.push(e)}}return s.rawEncode(a,c)},encodeType(e,t){let r="",n=this.findTypeDependencies(e,t).filter((t=>t!==e));n=[e].concat(n.sort());for(const e of n){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r},findTypeDependencies(e,t,r=[]){const[n]=e.match(/^\w*/u);if(e=n,r.includes(e)||t[e]===undefined)return r;r.push(e);for(const n of t[e])for(const e of this.findTypeDependencies(n.type,t,r))!r.includes(e)&&r.push(e);return r},hashStruct(e,t,r,n=!0){return i.keccak(this.encodeData(e,t,r,n))},hashType(e,t){return i.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const r of Object.keys(a.properties))e[r]&&(t[r]=e[r]);return t.types&&(t.types={EIP712Domain:[],...t.types}),t},sign(e,t=!0){const r=this.sanitizeData(e),s=[n.from("1901","hex")];return s.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),"EIP712Domain"!==r.primaryType&&s.push(this.hashStruct(r.primaryType,r.message,r.types,t)),i.keccak(n.concat(s))}};function u(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;const r=e.map((function(e){return"bytes"===e.type?i.toBuffer(e.value):e.value})),n=e.map((function(e){return e.type})),o=e.map((function(e){if(!e.name)throw t;return`${e.type} ${e.name}`}));return s.soliditySHA3(["bytes32","bytes32"],[s.soliditySHA3(new Array(e.length).fill("string"),o),s.soliditySHA3(n,r)])}function l(e,t){const r=i.toBuffer(t),n=i.fromRpcSig(r);return i.ecrecover(e,n.v,n.r,n.s)}function d(e){const t=i.toBuffer(e.data);return l(i.hashPersonalMessage(t),e.sig)}function h(e,t){let r=`${e}`;for(;r.length<t;)r=`0${r}`;return r}function f(e){const t=n.from(e,"hex").toString("base64");return o.util.decodeBase64(t)}t.exports={TYPED_MESSAGE_SCHEMA:a,TypedDataUtils:c,concatSig(e,t,r){const n=i.fromSigned(t),s=i.fromSigned(r),o=i.bufferToInt(e),a=h(i.toUnsigned(n).toString("hex"),64),c=h(i.toUnsigned(s).toString("hex"),64),u=i.stripHexPrefix(i.intToHex(o));return i.addHexPrefix(a.concat(c,u)).toString("hex")},normalize(e){if(!e)return undefined;if("number"==typeof e){const t=i.toBuffer(e);e=i.bufferToHex(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return i.addHexPrefix(e.toLowerCase())},personalSign(e,t){const r=i.toBuffer(t.data),n=i.hashPersonalMessage(r),s=i.ecsign(n,e);return i.bufferToHex(this.concatSig(s.v,s.r,s.s))},recoverPersonalSignature(e){const t=d(e),r=i.publicToAddress(t);return i.bufferToHex(r)},extractPublicKey:e=>`0x${d(e).toString("hex")}`,typedSignatureHash(e){const t=u(e);return i.bufferToHex(t)},signTypedDataLegacy(e,t){const r=u(t.data),n=i.ecsign(r,e);return i.bufferToHex(this.concatSig(n.v,n.r,n.s))},recoverTypedSignatureLegacy(e){const t=l(u(e.data),e.sig),r=i.publicToAddress(t);return i.bufferToHex(r)},encrypt(e,t,r){if("x25519-xsalsa20-poly1305"===r){if(void 0===t.data)throw new Error('Cannot detect secret message, message params should be of the form {data: "secret message"} ');const r=o.box.keyPair();let n;try{n=o.util.decodeBase64(e)}catch(e){throw new Error("Bad public key")}const i=o.util.decodeUTF8(t.data),s=o.randomBytes(o.box.nonceLength),a=o.box(i,s,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:o.util.encodeBase64(s),ephemPublicKey:o.util.encodeBase64(r.publicKey),ciphertext:o.util.encodeBase64(a)}}throw new Error("Encryption type/version not supported")},encryptSafely(e,t,r){const{data:i}=t;if(!i)throw new Error("Cannot encrypt empty msg.data");if("object"==typeof i&&i.toJSON)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const s={data:i,padding:""},o=n.byteLength(JSON.stringify(s),"utf-8")%2048;let a=0;o>0&&(a=2048-o-16),s.padding="0".repeat(a);const c={data:JSON.stringify(s)};return this.encrypt(e,c,r)},decrypt(e,t){if("x25519-xsalsa20-poly1305"===e.version){const r=f(t),n=o.box.keyPair.fromSecretKey(r).secretKey,i=o.util.decodeBase64(e.nonce),s=o.util.decodeBase64(e.ciphertext),a=o.util.decodeBase64(e.ephemPublicKey),c=o.box.open(s,i,a,n);let u;try{u=o.util.encodeUTF8(c)}catch(e){throw new Error("Decryption failed.")}if(u)return u;throw new Error("Decryption failed.")}throw new Error("Encryption type/version not supported.")},decryptSafely(e,t){return JSON.parse(this.decrypt(e,t)).data},getEncryptionPublicKey(e){const t=f(e),r=o.box.keyPair.fromSecretKey(t).publicKey;return o.util.encodeBase64(r)},signTypedMessage(e,t,r="V4"){switch(r){case"V1":return this.signTypedDataLegacy(e,t);case"V3":return this.signTypedData(e,t);default:return this.signTypedData_v4(e,t)}},recoverTypedMessage(e,t="V4"){switch(t){case"V1":return this.recoverTypedSignatureLegacy(e);case"V3":return this.recoverTypedSignature(e);default:return this.recoverTypedSignature_v4(e)}},signTypedData(e,t){const r=c.sign(t.data,!1),n=i.ecsign(r,e);return i.bufferToHex(this.concatSig(n.v,n.r,n.s))},signTypedData_v4(e,t){const r=c.sign(t.data),n=i.ecsign(r,e);return i.bufferToHex(this.concatSig(n.v,n.r,n.s))},recoverTypedSignature(e){const t=l(c.sign(e.data,!1),e.sig),r=i.publicToAddress(t);return i.bufferToHex(r)},recoverTypedSignature_v4(e){const t=l(c.sign(e.data),e.sig),r=i.publicToAddress(t);return i.bufferToHex(r)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/index.js"}],[1053,{"./secp256k1-adapter":1054,assert:1556,"bn.js":1746,"create-hash":1906,"ethereum-cryptography/keccak":2020,"ethjs-util":1057,rlp:3012,"safe-buffer":3014},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("ethereum-cryptography/keccak"),s=i.keccak224,o=i.keccak384,a=i.keccak256,c=i.keccak512,u=e("./secp256k1-adapter"),l=e("assert"),d=e("rlp"),h=e("bn.js"),f=e("create-hash"),p=e("safe-buffer").Buffer;Object.assign(r,e("ethjs-util")),r.MAX_INTEGER=new h("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new h("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.SHA3_NULL_S=r.KECCAK256_NULL_S,r.KECCAK256_NULL=p.from(r.KECCAK256_NULL_S,"hex"),r.SHA3_NULL=r.KECCAK256_NULL,r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.SHA3_RLP_ARRAY_S=r.KECCAK256_RLP_ARRAY_S,r.KECCAK256_RLP_ARRAY=p.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.SHA3_RLP_ARRAY=r.KECCAK256_RLP_ARRAY,r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.SHA3_RLP_S=r.KECCAK256_RLP_S,r.KECCAK256_RLP=p.from(r.KECCAK256_RLP_S,"hex"),r.SHA3_RLP=r.KECCAK256_RLP,r.BN=h,r.rlp=d,r.secp256k1=u,r.zeros=function(e){return p.allocUnsafe(e).fill(0)},r.zeroAddress=function(){var e=r.zeros(20);return r.bufferToHex(e)},r.setLengthLeft=r.setLength=function(e,t,n){var i=r.zeros(t);return e=r.toBuffer(e),n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)},r.setLengthRight=function(e,t){return r.setLength(e,t,!0)},r.unpad=r.stripZeros=function(e){for(var t=(e=r.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},r.toBuffer=function(e){if(!p.isBuffer(e))if(Array.isArray(e))e=p.from(e);else if("string"==typeof e)e=r.isHexString(e)?p.from(r.padToEven(r.stripHexPrefix(e)),"hex"):p.from(e);else if("number"==typeof e)e=r.intToBuffer(e);else if(null===e||e===undefined)e=p.allocUnsafe(0);else if(h.isBN(e))e=e.toArrayLike(p);else{if(!e.toArray)throw new Error("invalid type");e=p.from(e.toArray())}return e},r.bufferToInt=function(e){return new h(r.toBuffer(e)).toNumber()},r.bufferToHex=function(e){return"0x"+(e=r.toBuffer(e)).toString("hex")},r.fromSigned=function(e){return new h(e).fromTwos(256)},r.toUnsigned=function(e){return p.from(e.toTwos(256).toArray())},r.keccak=function(e,t){switch(e=r.toBuffer(e),t||(t=256),t){case 224:return s(e);case 256:return a(e);case 384:return o(e);case 512:return c(e);default:throw new Error("Invald algorithm: keccak"+t)}},r.keccak256=function(e){return r.keccak(e)},r.sha3=r.keccak,r.sha256=function(e){return e=r.toBuffer(e),f("sha256").update(e).digest()},r.ripemd160=function(e,t){e=r.toBuffer(e);var n=f("rmd160").update(e).digest();return!0===t?r.setLength(n,32):n},r.rlphash=function(e){return r.keccak(d.encode(e))},r.isValidPrivate=function(e){return u.privateKeyVerify(e)},r.isValidPublic=function(e,t){return 64===e.length?u.publicKeyVerify(p.concat([p.from([4]),e])):!!t&&u.publicKeyVerify(e)},r.pubToAddress=r.publicToAddress=function(e,t){return e=r.toBuffer(e),t&&64!==e.length&&(e=u.publicKeyConvert(e,!1).slice(1)),l(64===e.length),r.keccak(e).slice(-20)};var m=r.privateToPublic=function(e){return e=r.toBuffer(e),u.publicKeyCreate(e,!1).slice(1)};r.importPublic=function(e){return 64!==(e=r.toBuffer(e)).length&&(e=u.publicKeyConvert(e,!1).slice(1)),e},r.ecsign=function(e,t){var r=u.sign(e,t),n={};return n.r=r.signature.slice(0,32),n.s=r.signature.slice(32,64),n.v=r.recovery+27,n},r.hashPersonalMessage=function(e){var t=r.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return r.keccak(p.concat([t,e]))},r.ecrecover=function(e,t,n,i){var s=p.concat([r.setLength(n,32),r.setLength(i,32)],64),o=t-27;if(0!==o&&1!==o)throw new Error("Invalid signature v value");var a=u.recover(e,s,o);return u.publicKeyConvert(a,!1).slice(1)},r.toRpcSig=function(e,t,n){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return r.bufferToHex(p.concat([r.setLengthLeft(t,32),r.setLengthLeft(n,32),r.toBuffer(e-27)]))},r.fromRpcSig=function(e){if(65!==(e=r.toBuffer(e)).length)throw new Error("Invalid signature length");var t=e[64];return t<27&&(t+=27),{v:t,r:e.slice(0,32),s:e.slice(32,64)}},r.privateToAddress=function(e){return r.publicToAddress(m(e))},r.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},r.isZeroAddress=function(e){return r.zeroAddress()===r.addHexPrefix(e)},r.toChecksumAddress=function(e){e=r.stripHexPrefix(e).toLowerCase();for(var t=r.keccak(e).toString("hex"),n="0x",i=0;i<e.length;i++)parseInt(t[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n},r.isValidChecksumAddress=function(e){return r.isValidAddress(e)&&r.toChecksumAddress(e)===e},r.generateAddress=function(e,t){return e=r.toBuffer(e),t=(t=new h(t)).isZero()?null:p.from(t.toArray()),r.rlphash([e,t]).slice(-20)},r.isPrecompiled=function(e){var t=r.unpad(e);return 1===t.length&&t[0]>=1&&t[0]<=8},r.addHexPrefix=function(e){return"string"!=typeof e||r.isHexPrefixed(e)?e:"0x"+e},r.isValidSignature=function(e,t,r,n){var i=new h("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===t.length&&32===r.length&&((27===e||28===e)&&(t=new h(t),r=new h(r),!(t.isZero()||t.gt(s)||r.isZero()||r.gt(s))&&(!1!==n||1!==new h(r).cmp(i))))},r.baToJSON=function(e){if(p.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(r.baToJSON(e[n]));return t}},r.defineProperties=function(e,t,i){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(t){var n={};return e._fields.forEach((function(t){n[t]="0x"+e[t].toString("hex")})),n}return r.baToJSON(this.raw)},e.serialize=function(){return d.encode(e.raw)},t.forEach((function(t,n){function i(){return e.raw[n]}function s(i){"00"!==(i=r.toBuffer(i)).toString("hex")||t.allowZero||(i=p.allocUnsafe(0)),t.allowLess&&t.length?(i=r.stripZeros(i),l(t.length>=i.length,"The field "+t.name+" must not have more "+t.length+" bytes")):t.allowZero&&0===i.length||!t.length||l(t.length===i.length,"The field "+t.name+" must have byte length of "+t.length),e.raw[n]=i}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:i,set:s}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:s,get:i})})),i)if("string"==typeof i&&(i=p.from(r.stripHexPrefix(i),"hex")),p.isBuffer(i)&&(i=d.decode(i)),Array.isArray(i)){if(i.length>e._fields.length)throw new Error("wrong number of fields in data");i.forEach((function(t,n){e[e._fields[n]]=r.toBuffer(t)}))}else{if("object"!==(void 0===i?"undefined":n(i)))throw new Error("invalid data");var s=Object.keys(i);t.forEach((function(t){-1!==s.indexOf(t.name)&&(e[t.name]=i[t.name]),-1!==s.indexOf(t.alias)&&(e[t.alias]=i[t.alias])}))}}}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/node_modules/ethereumjs-util/dist/index.js"}],[1054,{"./secp256k1-lib/der":1055,"./secp256k1-lib/index":1056,buffer:1789,"ethereum-cryptography/secp256k1":2022},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("ethereum-cryptography/secp256k1");function i(){return e("./secp256k1-lib/index")}var s=e("./secp256k1-lib/der"),o=function(e){return 32===e.length&&n.privateKeyVerify(Uint8Array.from(e))};t.exports={privateKeyVerify:o,privateKeyExport:function(e,t){var r=i();if(32!==e.length)throw new RangeError("private key length is invalid");var n=r.privateKeyExport(e,t);return s.privateKeyExport(e,n,t)},privateKeyImport:function(e){if(null!==(e=s.privateKeyImport(e))&&32===e.length&&o(e))return e;throw new Error("couldn't import from DER format")},privateKeyNegate:function(e){return r.from(n.privateKeyNegate(Uint8Array.from(e)))},privateKeyModInverse:function(e){if(32!==e.length)throw new Error("private key length is invalid");var t=i();return r.from(t.privateKeyModInverse(Uint8Array.from(e)))},privateKeyTweakAdd:function(e,t){return r.from(n.privateKeyTweakAdd(Uint8Array.from(e),t))},privateKeyTweakMul:function(e,t){return r.from(n.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))},publicKeyCreate:function(e,t){return r.from(n.publicKeyCreate(Uint8Array.from(e),t))},publicKeyConvert:function(e,t){return r.from(n.publicKeyConvert(Uint8Array.from(e),t))},publicKeyVerify:function(e){return(33===e.length||65===e.length)&&n.publicKeyVerify(Uint8Array.from(e))},publicKeyTweakAdd:function(e,t,i){return r.from(n.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),i))},publicKeyTweakMul:function(e,t,i){return r.from(n.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),i))},publicKeyCombine:function(e,t){var i=[];return e.forEach((function(e){i.push(Uint8Array.from(e))})),r.from(n.publicKeyCombine(i,t))},signatureNormalize:function(e){return r.from(n.signatureNormalize(Uint8Array.from(e)))},signatureExport:function(e){return r.from(n.signatureExport(Uint8Array.from(e)))},signatureImport:function(e){return r.from(n.signatureImport(Uint8Array.from(e)))},signatureImportLax:function(e){if(0===e.length)throw new RangeError("signature length is invalid");var t=i(),r=s.signatureImportLax(e);if(null===r)throw new Error("couldn't parse DER signature");return t.signatureImport(r)},sign:function(e,t,i){if(null===i)throw new TypeError("options should be an Object");var s=void 0;if(i){if(s={},null===i.data)throw new TypeError("options.data should be a Buffer");if(i.data){if(32!==i.data.length)throw new RangeError("options.data length is invalid");s.data=new Uint8Array(i.data)}if(null===i.noncefn)throw new TypeError("options.noncefn should be a Function");i.noncefn&&(s.noncefn=function(e,t,n,s,o){var a=null!=n?r.from(n):null,c=null!=s?r.from(s):null,u=r.from("");return i.noncefn&&(u=i.noncefn(r.from(e),r.from(t),a,c,o)),Uint8Array.from(u)})}var o=n.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),s);return{signature:r.from(o.signature),recovery:o.recid}},verify:function(e,t,r){return n.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)},recover:function(e,t,i,s){return r.from(n.ecdsaRecover(Uint8Array.from(t),i,Uint8Array.from(e),s))},ecdh:function(e,t){return r.from(n.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))},ecdhUnsafe:function(e,t,n){if(33!==e.length&&65!==e.length)throw new RangeError("public key length is invalid");if(32!==t.length)throw new RangeError("private key length is invalid");var s=i();return r.from(s.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),n))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/node_modules/ethereumjs-util/dist/secp256k1-adapter.js"}],[1055,{buffer:1789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var t=e.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=e.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);r.privateKeyExport=function(r,i,s){var o=e.from(s?t:n);return r.copy(o,s?8:9),i.copy(o,s?181:214),o},r.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||48!==e[r])return null;if(t<(r+=1)+1||!(128&e[r]))return null;var n=127&e[r];if(n<1||n>2)return null;if(t<(r+=1)+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return t<(r+=n)+i||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]?null:e.slice(r+2,r+2+e[r+1])},r.signatureImportLax=function(t){var r=e.alloc(32,0),n=e.alloc(32,0),i=t.length,s=0;if(48!==t[s++])return null;var o=t[s++];if(128&o&&(s+=o-128)>i)return null;if(2!==t[s++])return null;var a=t[s++];if(128&a){if(s+(o=a-128)>i)return null;for(;o>0&&0===t[s];s+=1,o-=1);for(a=0;o>0;s+=1,o-=1)a=(a<<8)+t[s]}if(a>i-s)return null;var c=s;if(s+=a,2!==t[s++])return null;var u=t[s++];if(128&u){if(s+(o=u-128)>i)return null;for(;o>0&&0===t[s];s+=1,o-=1);for(u=0;o>0;s+=1,o-=1)u=(u<<8)+t[s]}if(u>i-s)return null;var l=s;for(s+=u;a>0&&0===t[c];a-=1,c+=1);if(a>32)return null;var d=t.slice(c,c+a);for(d.copy(r,32-d.length);u>0&&0===t[l];u-=1,l+=1);if(u>32)return null;var h=t.slice(l,l+u);return h.copy(n,32-h.length),{r:r,s:n}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/node_modules/ethereumjs-util/dist/secp256k1-lib/der.js"}],[1056,{"bn.js":1746,buffer:1789,elliptic:1940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=e("bn.js"),i=new(0,e("elliptic").ec)("secp256k1"),s=i.curve;r.privateKeyExport=function(e,t){var r=new n(e);if(r.ucmp(s.n)>=0)throw new Error("couldn't export to DER format");var a=i.g.mul(r);return o(a.getX(),a.getY(),t)},r.privateKeyModInverse=function(e){var r=new n(e);if(r.ucmp(s.n)>=0||r.isZero())throw new Error("private key range is invalid");return r.invm(s.n).toArrayLike(t,"be",32)},r.signatureImport=function(e){var r=new n(e.r);r.ucmp(s.n)>=0&&(r=new n(0));var i=new n(e.s);return i.ucmp(s.n)>=0&&(i=new n(0)),t.concat([r.toArrayLike(t,"be",32),i.toArrayLike(t,"be",32)])},r.ecdhUnsafe=function(e,t,r){var a=i.keyFromPublic(e),c=new n(t);if(c.ucmp(s.n)>=0||c.isZero())throw new Error("scalar was invalid (zero or overflow)");var u=a.pub.mul(c);return o(u.getX(),u.getY(),r)};var o=function(e,r,n){var i=void 0;return n?((i=t.alloc(33))[0]=r.isOdd()?3:2,e.toArrayLike(t,"be",32).copy(i,1)):((i=t.alloc(65))[0]=4,e.toArrayLike(t,"be",32).copy(i,1),r.toArrayLike(t,"be",32).copy(i,33)),i}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/node_modules/ethereumjs-util/dist/secp256k1-lib/index.js"}],[1057,{buffer:1789,"is-hex-prefixed":2506,"strip-hex-prefix":3086},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),i=e("strip-hex-prefix");function s(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return new r(s(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:i,padToEven:s,intToHex:o,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+s(new r(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},toUtf8:function(e){return new r(s(i(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var s=e[i][t];if(r&&!s)s="";else if("string"!=typeof s)throw new Error("invalid abi");n.push(s)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util>ethjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/ethjs-util/lib/index.js"}],[1058,{assert:1556,coinstring:1828,crypto:1911,"safe-buffer":3014,secp256k1:1059},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("assert"),i=e("safe-buffer").Buffer,s=e("crypto"),o=e("coinstring"),a=e("secp256k1"),c=i.from("Bitcoin seed","utf8"),u=2147483648,l={private:76066276,public:76067358};function d(e){this.versions=e||l,this.depth=0,this.index=0,this._privateKey=null,this._publicKey=null,this.chainCode=null,this._fingerprint=0,this.parentFingerprint=0}function h(e,t,r){var n=i.allocUnsafe(78);n.writeUInt32BE(t,0),n.writeUInt8(e.depth,4);var s=e.depth?e.parentFingerprint:0;return n.writeUInt32BE(s,5),n.writeUInt32BE(e.index,9),e.chainCode.copy(n,13),r.copy(n,45),n}function f(e){var t=s.createHash("sha256").update(e).digest();return s.createHash("rmd160").update(t).digest()}Object.defineProperty(d.prototype,"fingerprint",{get:function(){return this._fingerprint}}),Object.defineProperty(d.prototype,"identifier",{get:function(){return this._identifier}}),Object.defineProperty(d.prototype,"pubKeyHash",{get:function(){return this.identifier}}),Object.defineProperty(d.prototype,"privateKey",{get:function(){return this._privateKey},set:function(e){n.equal(e.length,32,"Private key must be 32 bytes."),n(!0===a.privateKeyVerify(e),"Invalid private key"),this._privateKey=e,this._publicKey=a.publicKeyCreate(e,!0),this._identifier=f(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0)}}),Object.defineProperty(d.prototype,"publicKey",{get:function(){return this._publicKey},set:function(e){n(33===e.length||65===e.length,"Public key must be 33 or 65 bytes."),n(!0===a.publicKeyVerify(e),"Invalid public key"),this._publicKey=a.publicKeyConvert(e,!0),this._identifier=f(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0),this._privateKey=null}}),Object.defineProperty(d.prototype,"privateExtendedKey",{get:function(){return this._privateKey?o.encode(h(this,this.versions.private,i.concat([i.alloc(1,0),this.privateKey]))):null}}),Object.defineProperty(d.prototype,"publicExtendedKey",{get:function(){return o.encode(h(this,this.versions.public,this.publicKey))}}),d.prototype.derive=function(e){if("m"===e||"M"===e||"m'"===e||"M'"===e)return this;var t=e.split("/"),r=this;return t.forEach((function(e,t){if(0!==t){var i=e.length>1&&"'"===e[e.length-1],s=parseInt(e,10);n(s<u,"Invalid index"),i&&(s+=u),r=r.deriveChild(s)}else n(e,"m","Invalid path")})),r},d.prototype.deriveChild=function(e){var t,r=e>=u,o=i.allocUnsafe(4);if(o.writeUInt32BE(e,0),r){n(this.privateKey,"Could not derive hardened child key");var c=this.privateKey,l=i.alloc(1,0);c=i.concat([l,c]),t=i.concat([c,o])}else t=i.concat([this.publicKey,o]);var h=s.createHmac("sha512",this.chainCode).update(t).digest(),f=h.slice(0,32),p=h.slice(32),m=new d(this.versions);if(this.privateKey)try{m.privateKey=a.privateKeyTweakAdd(this.privateKey,f)}catch(t){return this.derive(e+1)}else try{m.publicKey=a.publicKeyTweakAdd(this.publicKey,f,!0)}catch(t){return this.derive(e+1,r)}return m.chainCode=p,m.depth=this.depth+1,m.parentFingerprint=this.fingerprint,m.index=e,m},d.prototype.sign=function(e){return a.sign(e,this.privateKey).signature},d.prototype.verify=function(e,t){return a.verify(e,t,this.publicKey)},d.prototype.toJSON=function(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}},d.fromMasterSeed=function(e,t){var r=s.createHmac("sha512",c).update(e).digest(),n=r.slice(0,32),i=r.slice(32),o=new d(t);return o.chainCode=i,o.privateKey=n,o},d.fromExtendedKey=function(e,t){var r=new d(t=t||l),i=o.decode(e),s=i.readUInt32BE(0);n(s===t.private||s===t.public,"Version mismatch: does not match private or public"),r.depth=i.readUInt8(4),r.parentFingerprint=i.readUInt32BE(5),r.index=i.readUInt32BE(9),r.chainCode=i.slice(13,45);var a=i.slice(45);return 0===a.readUInt8(0)?(n(s===t.private,"Version mismatch: version does not match private"),r.privateKey=a.slice(1)):(n(s===t.public,"Version mismatch: version does not match public"),r.publicKey=a),r},d.fromJSON=function(e){return d.fromExtendedKey(e.xpriv)},d.HARDENED_OFFSET=u,t.exports=d}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/hdkey/lib/hdkey.js"}],[1059,{"./lib":1063,"./lib/elliptic":1062},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./lib")(e("./lib/elliptic"))}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/elliptic.js"}],[106,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:21,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[1060,{"../../../../../is-buffer/index.js":2502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var t=Object.prototype.toString;r.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},r.isBoolean=function(e,r){if("[object Boolean]"!==t.call(e))throw TypeError(r)},r.isBuffer=function(t,r){if(!e.isBuffer(t))throw TypeError(r)},r.isFunction=function(e,r){if("[object Function]"!==t.call(e))throw TypeError(r)},r.isNumber=function(e,r){if("[object Number]"!==t.call(e))throw TypeError(r)},r.isObject=function(e,r){if("[object Object]"!==t.call(e))throw TypeError(r)},r.isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},r.isBufferLength2=function(e,t,r,n){if(e.length!==t&&e.length!==r)throw RangeError(n)},r.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},r.isNumberInInterval=function(e,t,r,n){if(e<=t||e>=r)throw RangeError(n)}}).call(this)}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")})}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/assert.js"}],[1061,{bip66:1700,"safe-buffer":3014},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("bip66"),s=n.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=n.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);r.privateKeyExport=function(e,t,r){var i=n.from(r?s:o);return e.copy(i,r?8:9),t.copy(i,r?181:214),i},r.privateKeyImport=function(e){var t=e.length,r=0;if(!(t<r+1||48!==e[r])&&!(t<(r+=1)+1)&&128&e[r]){var n=127&e[r];if(r+=1,!(n<1||n>2||t<r+n)){var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);if(!(t<(r+=n)+i||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return e.slice(r+2,r+2+e[r+1])}}},r.signatureExport=function(e){for(var t=n.concat([n.from([0]),e.r]),r=33,s=0;r>1&&0===t[s]&&!(128&t[s+1]);--r,++s);for(var o=n.concat([n.from([0]),e.s]),a=33,c=0;a>1&&0===o[c]&&!(128&o[c+1]);--a,++c);return i.encode(t.slice(s),o.slice(c))},r.signatureImport=function(e){var t=n.alloc(32,0),r=n.alloc(32,0);try{var s=i.decode(e);if(33===s.r.length&&0===s.r[0]&&(s.r=s.r.slice(1)),s.r.length>32)throw new Error("R length is too long");if(33===s.s.length&&0===s.s[0]&&(s.s=s.s.slice(1)),s.s.length>32)throw new Error("S length is too long")}catch(e){return}return s.r.copy(t,32-s.r.length),s.s.copy(r,32-s.s.length),{r:t,s:r}},r.signatureImportLax=function(e){var t=n.alloc(32,0),r=n.alloc(32,0),i=e.length,s=0;if(48===e[s++]){var o=e[s++];if(!(128&o&&(s+=o-128)>i)&&2===e[s++]){var a=e[s++];if(128&a){if(s+(o=a-128)>i)return;for(;o>0&&0===e[s];s+=1,o-=1);for(a=0;o>0;s+=1,o-=1)a=(a<<8)+e[s]}if(!(a>i-s)){var c=s;if(s+=a,2===e[s++]){var u=e[s++];if(128&u){if(s+(o=u-128)>i)return;for(;o>0&&0===e[s];s+=1,o-=1);for(u=0;o>0;s+=1,o-=1)u=(u<<8)+e[s]}if(!(u>i-s)){var l=s;for(s+=u;a>0&&0===e[c];a-=1,c+=1);if(!(a>32)){var d=e.slice(c,c+a);for(d.copy(t,32-d.length);u>0&&0===e[l];u-=1,l+=1);if(!(u>32)){var h=e.slice(l,l+u);return h.copy(r,32-h.length),{r:t,s:r}}}}}}}}}}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/der.js"}],[1062,{"../messages.json":1064,"bn.js":1746,"create-hash":1906,elliptic:1940,"safe-buffer":3014},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("create-hash"),s=e("bn.js"),o=e("elliptic").ec,a=e("../messages.json"),c=new o("secp256k1"),u=c.curve;function l(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new s(t);if(r.cmp(u.p)>=0)return null;var n=(r=r.toRed(u.red)).redSqr().redIMul(r).redIAdd(u.b).redSqrt();return 3===e!==n.isOdd()&&(n=n.redNeg()),c.keyPair({pub:{x:r,y:n}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var n=new s(t),i=new s(r);if(n.cmp(u.p)>=0||i.cmp(u.p)>=0)return null;if(n=n.toRed(u.red),i=i.toRed(u.red),(6===e||7===e)&&i.isOdd()!==(7===e))return null;var o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd(u.b)).isZero()?c.keyPair({pub:{x:n,y:i}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}r.privateKeyVerify=function(e){var t=new s(e);return t.cmp(u.n)<0&&!t.isZero()},r.privateKeyExport=function(e,t){var r=new s(e);if(r.cmp(u.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return n.from(c.keyFromPrivate(e).getPublic(t,!0))},r.privateKeyNegate=function(e){var t=new s(e);return t.isZero()?n.alloc(32):u.n.sub(t).umod(u.n).toArrayLike(n,"be",32)},r.privateKeyModInverse=function(e){var t=new s(e);if(t.cmp(u.n)>=0||t.isZero())throw new Error(a.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(u.n).toArrayLike(n,"be",32)},r.privateKeyTweakAdd=function(e,t){var r=new s(t);if(r.cmp(u.n)>=0)throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(new s(e)),r.cmp(u.n)>=0&&r.isub(u.n),r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(n,"be",32)},r.privateKeyTweakMul=function(e,t){var r=new s(t);if(r.cmp(u.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new s(e)),r.cmp(u.n)&&(r=r.umod(u.n)),r.toArrayLike(n,"be",32)},r.publicKeyCreate=function(e,t){var r=new s(e);if(r.cmp(u.n)>=0||r.isZero())throw new Error(a.EC_PUBLIC_KEY_CREATE_FAIL);return n.from(c.keyFromPrivate(e).getPublic(t,!0))},r.publicKeyConvert=function(e,t){var r=l(e);if(null===r)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return n.from(r.getPublic(t,!0))},r.publicKeyVerify=function(e){return null!==l(e)},r.publicKeyTweakAdd=function(e,t,r){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new s(t)).cmp(u.n)>=0)throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var o=u.g.mul(t).add(i.pub);if(o.isInfinity())throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return n.from(o.encode(!0,r))},r.publicKeyTweakMul=function(e,t,r){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new s(t)).cmp(u.n)>=0||t.isZero())throw new Error(a.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.from(i.pub.mul(t).encode(!0,r))},r.publicKeyCombine=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;++i)if(r[i]=l(e[i]),null===r[i])throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);for(var s=r[0].pub,o=1;o<r.length;++o)s=s.add(r[o].pub);if(s.isInfinity())throw new Error(a.EC_PUBLIC_KEY_COMBINE_FAIL);return n.from(s.encode(!0,t))},r.signatureNormalize=function(e){var t=new s(e.slice(0,32)),r=new s(e.slice(32,64));if(t.cmp(u.n)>=0||r.cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);var i=n.from(e);return 1===r.cmp(c.nh)&&u.n.sub(r).toArrayLike(n,"be",32).copy(i,32),i},r.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new s(t).cmp(u.n)>=0||new s(r).cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},r.signatureImport=function(e){var t=new s(e.r);t.cmp(u.n)>=0&&(t=new s(0));var r=new s(e.s);return r.cmp(u.n)>=0&&(r=new s(0)),n.concat([t.toArrayLike(n,"be",32),r.toArrayLike(n,"be",32)])},r.sign=function(e,t,r,i){if("function"==typeof r){var o=r;r=function(r){var c=o(e,t,null,i,r);if(!n.isBuffer(c)||32!==c.length)throw new Error(a.ECDSA_SIGN_FAIL);return new s(c)}}var l=new s(t);if(l.cmp(u.n)>=0||l.isZero())throw new Error(a.ECDSA_SIGN_FAIL);var d=c.sign(e,t,{canonical:!0,k:r,pers:i});return{signature:n.concat([d.r.toArrayLike(n,"be",32),d.s.toArrayLike(n,"be",32)]),recovery:d.recoveryParam}},r.verify=function(e,t,r){var n={r:t.slice(0,32),s:t.slice(32,64)},i=new s(n.r),o=new s(n.s);if(i.cmp(u.n)>=0||o.cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);if(1===o.cmp(c.nh)||i.isZero()||o.isZero())return!1;var d=l(r);if(null===d)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return c.verify(e,n,{x:d.pub.x,y:d.pub.y})},r.recover=function(e,t,r,i){var o={r:t.slice(0,32),s:t.slice(32,64)},l=new s(o.r),d=new s(o.s);if(l.cmp(u.n)>=0||d.cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);try{if(l.isZero()||d.isZero())throw new Error;var h=c.recoverPubKey(e,o,r);return n.from(h.encode(!0,i))}catch(e){throw new Error(a.ECDSA_RECOVER_FAIL)}},r.ecdh=function(e,t){var n=r.ecdhUnsafe(e,t,!0);return i("sha256").update(n).digest()},r.ecdhUnsafe=function(e,t,r){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var o=new s(t);if(o.cmp(u.n)>=0||o.isZero())throw new Error(a.ECDH_FAIL);return n.from(i.pub.mul(o).encode(!0,r))}}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/elliptic/index.js"}],[1063,{"./assert":1060,"./der":1061,"./messages.json":1064},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./assert"),i=e("./der"),s=e("./messages.json");function o(e,t){return e===undefined?t:(n.isBoolean(e,s.COMPRESSED_TYPE_INVALID),e)}t.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0);var a=e.privateKeyExport(t,r);return i.privateKeyExport(t,a,r)},privateKeyImport:function(t){if(n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),(t=i.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(s.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakAdd(t,r,i)},publicKeyTweakMul:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakMul(t,r,i)},publicKeyCombine:function(t,r){n.isArray(t,s.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,s.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<t.length;++i)n.isBuffer(t[i],s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[i],33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID);return r=o(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return i.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,i){n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,a=null;return i!==undefined&&(n.isObject(i,s.OPTIONS_TYPE_INVALID),i.data!==undefined&&(n.isBuffer(i.data,s.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(i.data,32,s.OPTIONS_DATA_LENGTH_INVALID),o=i.data),i.noncefn!==undefined&&(n.isFunction(i.noncefn,s.OPTIONS_NONCEFN_TYPE_INVALID),a=i.noncefn)),e.sign(t,r,a,o)},verify:function(t,r,i){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(i,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(i,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,i)},recover:function(t,r,i,a){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(i,s.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(i,-1,4,s.RECOVERY_ID_VALUE_INVALID),a=o(a,!0),e.recover(t,r,i,a)},ecdh:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),i=o(i,!0),e.ecdhUnsafe(t,r,i)}}}}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/index.js"}],[1064,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={COMPRESSED_TYPE_INVALID:"compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID:"private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID:"private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID:"private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL:"couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL:"couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID:"public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID:"public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID:"public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID:"public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL:"the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL:"private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL:"the sum of the public keys is not valid",ECDH_FAIL:"scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID:"signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID:"signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL:"couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL:"couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:"couldn't serialize signature to DER format",ECDSA_SIGN_FAIL:"nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL:"couldn't recover public key from signature",MSG32_TYPE_INVALID:"message should be a Buffer",MSG32_LENGTH_INVALID:"message length is invalid",OPTIONS_TYPE_INVALID:"options should be an Object",OPTIONS_DATA_TYPE_INVALID:"options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID:"options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID:"options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID:"recovery should be a Number",RECOVERY_ID_VALUE_INVALID:"recovery should have value between -1 and 4",TWEAK_TYPE_INVALID:"tweak should be a Buffer",TWEAK_LENGTH_INVALID:"tweak length is invalid"}}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/messages.json"}],[1065,{"./utils":1070,buffer:1789,tweetnacl:3146,"tweetnacl-util":3145},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const o=s(e("tweetnacl")),a=s(e("tweetnacl-util")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.decodeBase64(e)}catch(e){throw new Error("Bad public key")}const i=a.decodeUTF8(t),s=o.randomBytes(o.box.nonceLength),c=o.box(i,s,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.encodeBase64(s),ephemPublicKey:a.encodeBase64(r.publicKey),ciphertext:a.encodeBase64(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const r=d(t),n=o.box.keyPair.fromSecretKey(r).secretKey,i=a.decodeBase64(e.nonce),s=a.decodeBase64(e.ciphertext),c=a.decodeBase64(e.ephemPublicKey),u=o.box.open(s,i,c,n);let l;try{l=a.encodeUTF8(u)}catch(e){throw new Error("Decryption failed.")}if(l)return l;throw new Error("Decryption failed.")}throw new Error("Encryption type/version not supported.")}function d(e){const r=t.from(e,"hex").toString("base64");return a.decodeBase64(r)}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:r,padding:""},s=t.byteLength(JSON.stringify(i),"utf-8")%2048;let o=0;return s>0&&(o=2048-s-16),i.padding="0".repeat(o),u({publicKey:e,data:JSON.stringify(i),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const t=d(e),r=o.box.keyPair.fromSecretKey(t).publicKey;return a.encodeBase64(r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1066,{"./utils":1070,"@ethereumjs/util":316,"bn.js":1746,buffer:1789,"ethjs-util":1078},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.rawEncode=r.parseNumber=r.solidityPack=void 0;const i=e("@ethereumjs/util"),s=e("ethjs-util"),o=n(e("bn.js")),a=e("./utils");function c(e){return e.lastIndexOf("]")===e.length-1}function u(e){const t=e.match(/(.*)\[(.*?)\]$/u);return t?""===t[2]?"dynamic":parseInt(t[2],10):null}function l(e){return parseInt(/^\D+(\d+)$/u.exec(e)[1],10)}function d(e){const t=typeof e;if("string"===t)return(0,i.isHexPrefixed)(e)?new o.default((0,s.stripHexPrefix)(e),16):new o.default(e,10);if("number"===t)return new o.default(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function h(e,r,n){let s,o;if(c(e)){const n=e.replace(/\[.*?\]/u,"");if(!c(n)){const t=u(e);if("dynamic"!==t&&0!==t&&r.length>t)throw new Error(`Elements exceed array size: ${t}`)}const i=r.map((function(e){return h(n,e,256)}));return t.concat(i)}if("bytes"===e)return r;if("string"===e)return t.from(r,"utf8");if("bool"===e){n=n||8;const e=Array(n/4).join("0");return t.from(r?`${e}1`:`${e}0`,"hex")}if("address"===e){let e=20;return n&&(e=n/8),(0,i.setLengthLeft)((0,i.toBuffer)(r),e)}if(e.startsWith("bytes")){if(s=l(e),s<1||s>32)throw new Error(`Invalid bytes<N> width: ${s}`);return"number"==typeof r&&(r=(0,a.normalize)(r)),(0,i.setLengthRight)((0,i.toBuffer)(r),s)}if(e.startsWith("uint")){if(s=l(e),s%8||s<8||s>256)throw new Error(`Invalid uint<N> width: ${s}`);if(o=d(r),o.bitLength()>s)throw new Error(`Supplied uint exceeds width: ${s} vs ${o.bitLength()}`);return n=n||s,o.toArrayLike(t,"be",n/8)}if(e.startsWith("int")){if(s=l(e),s%8||s<8||s>256)throw new Error(`Invalid int<N> width: ${s}`);if(o=d(r),o.bitLength()>s)throw new Error(`Supplied int exceeds width: ${s} vs ${o.bitLength()}`);return n=n||s,o.toTwos(s).toArrayLike(t,"be",n/8)}throw new Error(`Unsupported or invalid type: ${e}`)}function f(e){return e.startsWith("int[")?`int256${e.slice(3)}`:"int"===e?"int256":e.startsWith("uint[")?`uint256${e.slice(4)}`:"uint"===e?"uint256":e.startsWith("fixed[")?`fixed128x128${e.slice(5)}`:"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?`ufixed128x128${e.slice(6)}`:"ufixed"===e?"ufixed128x128":e}function p(e,r){let n,s,h,f;if("address"===e)return p("uint160",d(r));if("bool"===e)return p("uint8",r?1:0);if("string"===e)return p("bytes",t.from(r,"utf8"));if(c(e)){if(void 0===r.length)throw new Error("Not an array?");if(n=u(e),"dynamic"!==n&&0!==n&&r.length>n)throw new Error(`Elements exceed array size: ${n}`);for(f in h=[],e=e.slice(0,e.lastIndexOf("[")),"string"==typeof r&&(r=JSON.parse(r)),r)Object.prototype.hasOwnProperty.call(r,f)&&h.push(p(e,r[f]));if("dynamic"===n){const e=p("uint256",r.length);h.unshift(e)}return t.concat(h)}if("bytes"===e)return r=t.from(r),h=t.concat([p("uint256",r.length),r]),r.length%32!=0&&(h=t.concat([h,(0,i.zeros)(32-r.length%32)])),h;if(e.startsWith("bytes")){if(n=l(e),n<1||n>32)throw new Error(`Invalid bytes<N> width: ${n}`);return"number"==typeof r&&(r=(0,a.normalize)(r)),(0,i.setLengthRight)((0,i.toBuffer)(r),32)}if(e.startsWith("uint")){if(n=l(e),n%8||n<8||n>256)throw new Error(`Invalid uint<N> width: ${n}`);if(s=d(r),s.bitLength()>n)throw new Error(`Supplied uint exceeds width: ${n} vs ${s.bitLength()}`);if(s<0)throw new Error("Supplied uint is negative");return s.toArrayLike(t,"be",32)}if(e.startsWith("int")){if(n=l(e),n%8||n<8||n>256)throw new Error(`Invalid int<N> width: ${n}`);if(s=d(r),s.bitLength()>n)throw new Error(`Supplied int exceeds width: ${n} vs ${s.bitLength()}`);return s.toTwos(256).toArrayLike(t,"be",32)}if(e.startsWith("ufixed")){if(n=g(e),s=d(r),s<0)throw new Error("Supplied ufixed is negative");return p("uint256",s.mul(new o.default(2).pow(new o.default(n[1]))))}if(e.startsWith("fixed"))return n=g(e),p("int256",d(r).mul(new o.default(2).pow(new o.default(n[1]))));throw new Error(`Unsupported or invalid type: ${e}`)}function m(e){return"string"===e||"bytes"===e||"dynamic"===u(e)}function g(e){const t=/^\D+(\d+)x(\d+)$/u.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}r.solidityPack=function(e,r){if(e.length!==r.length)throw new Error("Number of types are not matching the values");const n=[];for(let t=0;t<e.length;t++){const i=f(e[t]),s=r[t];n.push(h(i,s,null))}return t.concat(n)},r.parseNumber=d,r.rawEncode=function(e,r){const n=[],i=[];let s=0;e.forEach((function(e){if(c(e)){const t=u(e);s+="dynamic"!==t?32*t:32}else s+=32}));for(let t=0;t<e.length;t++){const o=f(e[t]),a=p(o,r[t]);m(o)?(n.push(p("uint256",s)),i.push(a),s+=a.length):n.push(a)}return t.concat(n.concat(i))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/ethereumjs-abi-utils.js"}],[1067,{"./encryption":1065,"./personal-sign":1068,"./sign-typed-data":1069,"./utils":1070},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,i(e("./personal-sign"),r),i(e("./sign-typed-data"),r),i(e("./encryption"),r);var s=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return s.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return s.normalize}})}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/index.js"}],[1068,{"./utils":1070,"@ethereumjs/util":316},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),i=e("./utils");function s(e,t){const r=(0,n.hashPersonalMessage)((0,i.legacyToBuffer)(e));return(0,i.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,i.isNullish)(t))throw new Error("Missing data parameter");if((0,i.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,i.legacyToBuffer)(t),s=(0,n.hashPersonalMessage)(r),o=(0,n.ecsign)(s,e);return(0,i.concatSig)((0,n.toBuffer)(o.v),o.r,o.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");const r=s(e,t),o=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(o)},r.extractPublicKey=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");return`0x${s(e,t).toString("hex")}`}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1069,{"./ethereumjs-abi-utils":1066,"./utils":1070,"@ethereumjs/util":316,buffer:1789,"ethereum-cryptography/keccak":1076,"ethjs-util":1078},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("ethjs-util"),i=e("@ethereumjs/util"),s=e("ethereum-cryptography/keccak"),o=e("./ethereumjs-abi-utils"),a=e("./utils");var c;function u(e,t){if(!Object.keys(c).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function l(e,r,h,f,p){if(u(p,[c.V3,c.V4]),e[h]!==undefined)return["bytes32",p===c.V4&&null==f?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,i.arrToBufArr)((0,s.keccak256)(d(h,f,e,p)))];if(f===undefined)throw new Error(`missing value for field ${r} of type ${h}`);if("bytes"===h){if("number"==typeof f)f=(0,a.numberToBuffer)(f);else if((0,n.isHexString)(f)){const e=f.length%2?"0":"";f=t.from(e+f.slice(2),"hex")}else f=t.from(f,"utf8");return["bytes32",(0,i.arrToBufArr)((0,s.keccak256)(f))]}if("string"===h)return f="number"==typeof f?(0,a.numberToBuffer)(f):t.from(null!=f?f:"","utf8"),["bytes32",(0,i.arrToBufArr)((0,s.keccak256)(f))];if(h.lastIndexOf("]")===h.length-1){if(p===c.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const t=h.slice(0,h.lastIndexOf("[")),n=f.map((n=>l(e,r,t,n,p)));return["bytes32",(0,i.arrToBufArr)((0,s.keccak256)((0,o.rawEncode)(n.map((([e])=>e)),n.map((([,e])=>e)))))]}return[h,f]}function d(e,t,r,n){u(n,[c.V3,c.V4]);const i=["bytes32"],s=[m(e,r)];for(const o of r[e]){if(n===c.V3&&t[o.name]===undefined)continue;const[e,a]=l(r,o.name,o.type,t[o.name],n);i.push(e),s.push(a)}return(0,o.rawEncode)(i,s)}function h(e,t){let r="";const n=f(e,t);n.delete(e);const i=[e,...Array.from(n).sort()];for(const e of i){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function f(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])f(n.type,t,r);return r}function p(e,t,r,n){return u(n,[c.V3,c.V4]),(0,i.arrToBufArr)((0,s.keccak256)(d(e,t,r,n)))}function m(e,r){const n=t.from(h(e,r),"utf-8");return(0,i.arrToBufArr)((0,s.keccak256)(n))}function g(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function y(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((function(e){return"bytes"!==e.type?e.value:(0,a.legacyToBuffer)(e.value)})),n=e.map((function(e){return e.type})),c=e.map((function(e){if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,i.arrToBufArr)((0,s.keccak256)((0,o.solidityPack)(["bytes32","bytes32"],[(0,s.keccak256)((0,o.solidityPack)(new Array(e.length).fill("string"),c)),(0,s.keccak256)((0,o.solidityPack)(n,r))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(c=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:d,encodeType:h,findTypeDependencies:f,hashStruct:p,hashType:m,sanitizeData:g,eip712Hash:function(e,r){u(r,[c.V3,c.V4]);const n=g(e),o=[t.from("1901","hex")];return o.push(p("EIP712Domain",n.domain,n.types,r)),"EIP712Domain"!==n.primaryType&&o.push(p(n.primaryType,n.message,n.types,r)),(0,i.arrToBufArr)((0,s.keccak256)(t.concat(o)))}},r.typedSignatureHash=function(e){const t=y(e);return(0,i.bufferToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:n}){if(u(n),(0,a.isNullish)(t))throw new Error("Missing data parameter");if((0,a.isNullish)(e))throw new Error("Missing private key parameter");const s=n===c.V1?y(t):r.TypedDataUtils.eip712Hash(t,n),o=(0,i.ecsign)(s,e);return(0,a.concatSig)((0,i.toBuffer)(o.v),o.r,o.s)},r.recoverTypedSignature=function({data:e,signature:t,version:n}){if(u(n),(0,a.isNullish)(e))throw new Error("Missing data parameter");if((0,a.isNullish)(t))throw new Error("Missing signature parameter");const s=n===c.V1?y(e):r.TypedDataUtils.eip712Hash(e,n),o=(0,a.recoverPublicKey)(s,t),l=(0,i.publicToAddress)(o);return(0,i.bufferToHex)(l)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[107,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:22,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==i.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[1070,{"@ethereumjs/util":316,buffer:1789,"ethjs-util":1078},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.numberToBuffer=r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),i=e("ethjs-util");function s(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}r.padWithZeroes=s,r.isNullish=function(e){return null===e||e===undefined},r.legacyToBuffer=function(e){return"string"!=typeof e||(0,i.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const o=(0,n.fromSigned)(t),a=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=s((0,n.toUnsigned)(o).toString("hex"),64),l=s((0,n.toUnsigned)(a).toString("hex"),64),d=(0,i.stripHexPrefix)((0,i.intToHex)(c));return(0,n.addHexPrefix)(u.concat(l,d))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(!e)return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,n.toBuffer)(e);e=(0,n.bufferToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,n.addHexPrefix)(e.toLowerCase())},r.numberToBuffer=function(e){const r=e.toString(16),n=r.length%2?"0":"";return t.from(n+r,"hex")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1071,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=i,r.bytes=s,r.hash=o,r.exists=a,r.output=c;const u={number:n,bool:i,bytes:s,hash:o,exists:a,output:c};r.default=u}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/_assert.js"}],[1072,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=s(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}r.fromBig=s,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0);function a(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}r.add=a;const c={fromBig:s,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};r.default=c}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/_u64.js"}],[1073,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto={node:undefined,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/cryptoBrowser.js"}],[1074,{"./_assert.js":1071,"./_u64.js":1072,"./utils.js":1075},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),i=e("./_u64.js"),s=e("./utils.js"),[o,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let i=u;for(let e=0;e<7;e++)t=(t<<l^(t>>h)*p)%f,t&d&&(i^=l<<(l<<BigInt(e))-l);c.push(i)}const[m,g]=i.default.split(c,!0),y=(e,t,r)=>r>32?i.default.rotlBH(e,t,r):i.default.rotlSH(e,t,r),w=(e,t,r)=>r>32?i.default.rotlBL(e,t,r):i.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=y(s,o,1)^r[n],c=w(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=a[r],s=y(t,i,n),c=w(t,i,n),u=o[r];t=e[u],i=e[u+1],e[u]=s,e[u+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=g[n]}r.fill(0)}r.keccakP=b;class v extends s.Hash{constructor(e,t,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){n.default.exists(this);const{blockLen:t,state:r}=this,i=(e=(0,s.toBytes)(e)).length;for(let n=0;n<i;){const s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){n.default.exists(this,!1),n.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return n.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(n.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new v(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}r.Keccak=v;const _=(e,t,r)=>(0,s.wrapConstructor)((()=>new v(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const E=(e,t,r)=>(0,s.wrapConstructorWithOpts)(((n={})=>new v(t,e,n.dkLen===undefined?r:n.dkLen,!0)));r.shake128=E(31,168,16),r.shake256=E(31,136,32)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/sha3.js"}],[1075,{"@noble/hashes/crypto":1073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t};function s(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=s(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;e>=0&&e<t||(await(0,r.nextTick)(),i+=e)}},r.utf8ToBytes=s,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(t!==undefined&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/utils.js"}],[1076,{"./utils":1077,"@noble/hashes/sha3":1074},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.keccak512=r.keccak384=r.keccak256=r.keccak224=void 0;const n=e("@noble/hashes/sha3"),i=e("./utils");r.keccak224=(0,i.wrapHash)(n.keccak_224),r.keccak256=(()=>{const e=(0,i.wrapHash)(n.keccak_256);return e.create=n.keccak_256.create,e})(),r.keccak384=(0,i.wrapHash)(n.keccak_384),r.keccak512=(0,i.wrapHash)(n.keccak_512)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography",file:"node_modules/@metamask/eth-sig-util/node_modules/ethereum-cryptography/keccak.js"}],[1077,{"@noble/hashes/_assert":1071,"@noble/hashes/utils":1075},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=r.wrapHash=r.equalsBytes=r.hexToBytes=r.bytesToUtf8=r.utf8ToBytes=r.createView=r.concatBytes=r.toHex=r.bytesToHex=r.assertBytes=r.assertBool=void 0;const i=n(e("@noble/hashes/_assert")),s=e("@noble/hashes/utils"),o=i.default.bool;r.assertBool=o;const a=i.default.bytes;r.assertBytes=a;var c=e("@noble/hashes/utils");Object.defineProperty(r,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(r,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),r.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},r.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,s.hexToBytes)(t)},r.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},r.wrapHash=function(e){return t=>(i.default.bytes(t),e(t))},r.crypto=(()=>{const e="object"==typeof self&&"crypto"in self?self.crypto:undefined,r=void 0!==t&&"function"==typeof t.require&&t.require.bind(t);return{node:r&&!e?r("crypto"):undefined,web:e}})()}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography",file:"node_modules/@metamask/eth-sig-util/node_modules/ethereum-cryptography/utils.js"}],[1078,{buffer:1789,"is-hex-prefixed":2506,"strip-hex-prefix":3086},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),i=e("strip-hex-prefix");function s(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return new r(s(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:i,padToEven:s,intToHex:o,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+s(new r(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},toUtf8:function(e){return new r(s(i(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var s=e[i][t];if(r&&!s)s="";else if("string"!=typeof s)throw new Error("invalid abi");n.push(s)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethjs-util",file:"node_modules/@metamask/eth-sig-util/node_modules/ethjs-util/lib/index.js"}],[1079,{"@ethereumjs/util":316,"@metamask/eth-sig-util":1067,buffer:1789,"ethereum-cryptography/keccak":1085,events:1790,randombytes:2879},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{EventEmitter:n}=e("events"),{isValidPrivate:i,stripHexPrefix:s,privateToPublic:o,bufferToHex:a,publicToAddress:c,ecsign:u,arrToBufArr:l}=e("@ethereumjs/util"),d=e("randombytes"),{keccak256:h}=e("ethereum-cryptography/keccak"),f="Simple Key Pair",{concatSig:p,decrypt:m,getEncryptionPublicKey:g,normalize:y,personalSign:w,signTypedData:b,SignTypedDataVersion:v}=e("@metamask/eth-sig-util");function _(){const e=d(32);if(!i(e))throw new Error("Private key does not satisfy the curve requirements (ie. it is invalid)");return e}class E extends n{constructor(e){super(),this.type=f,this._wallets=[],this.deserialize(e)}async serialize(){return this._wallets.map((({privateKey:e})=>e.toString("hex")))}async deserialize(e=[]){this._wallets=e.map((e=>{const t=s(e),n=r.from(t,"hex");return{privateKey:n,publicKey:o(n)}}))}async addAccounts(e=1){const t=[];for(let r=0;r<e;r++){const e=_(),r=o(e);t.push({privateKey:e,publicKey:r})}this._wallets=this._wallets.concat(t);return t.map((({publicKey:e})=>a(c(e))))}async getAccounts(){return this._wallets.map((({publicKey:e})=>a(c(e))))}async signTransaction(e,t,r={}){const n=this._getPrivateKeyFor(e,r),i=t.sign(n);return i===undefined?t:i}async signMessage(e,t,n={}){const i=s(t),o=this._getPrivateKeyFor(e,n),a=u(r.from(i,"hex"),o);return p(a.v,a.r,a.s)}async signPersonalMessage(e,t,n={}){const i=this._getPrivateKeyFor(e,n),s=r.from(i,"hex");return w({privateKey:s,data:t})}async decryptMessage(e,t){const r=this._getWalletForAccount(e),{privateKey:n}=r;return m({privateKey:n,encryptedData:t})}async signTypedData(e,t,r={version:v.V1}){const n=Object.keys(v).includes(r.version)?r.version:v.V1,i=this._getPrivateKeyFor(e,r);return b({privateKey:i,data:t,version:n})}async getEncryptionPublicKey(e,t={}){const r=this._getPrivateKeyFor(e,t);return g(r)}_getPrivateKeyFor(e,t={}){if(!e)throw new Error("Must specify address.");return this._getWalletForAccount(e,t).privateKey}async getAppKeyAddress(e,t){if(!t||"string"!=typeof t)throw new Error("'origin' must be a non-empty string");const r=this._getWalletForAccount(e,{withAppKeyOrigin:t});return y(c(r.publicKey).toString("hex"))}async exportAccount(e,t={}){return this._getWalletForAccount(e,t).privateKey.toString("hex")}removeAccount(e){if(!this._wallets.map((({publicKey:e})=>a(c(e)).toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this._wallets=this._wallets.filter((({publicKey:t})=>a(c(t)).toLowerCase()!==e.toLowerCase()))}_getWalletForAccount(e,t={}){const n=y(e);let i=this._wallets.find((({publicKey:e})=>a(c(e))===n));if(!i)throw new Error("Simple Keyring - Unable to find matching address.");if(t.withAppKeyOrigin){const{privateKey:e}=i,n=r.from(t.withAppKeyOrigin,"utf8"),s=r.concat([e,n]),a=l(h(s,256));i={privateKey:a,publicKey:o(a)}}return i}}E.type=f,t.exports=E}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring",file:"node_modules/@metamask/eth-simple-keyring/index.js"}],[108,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:23,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let n=!0;for(;r.length>40&&n;){const e=r.findIndex((e=>e.status===i.TransactionStatus.failed||e.status===i.TransactionStatus.rejected||e.status===i.TransactionStatus.confirmed||e.status===i.TransactionStatus.dropped));e<0?n=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[1080,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=i,r.bytes=s,r.hash=o,r.exists=a,r.output=c;const u={number:n,bool:i,bytes:s,hash:o,exists:a,output:c};r.default=u}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/@noble/hashes/_assert.js"}],[1081,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=s(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}r.fromBig=s,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0);function a(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}r.add=a;const c={fromBig:s,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};r.default=c}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/@noble/hashes/_u64.js"}],[1082,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto={node:undefined,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/@noble/hashes/cryptoBrowser.js"}],[1083,{"./_assert.js":1080,"./_u64.js":1081,"./utils.js":1084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),i=e("./_u64.js"),s=e("./utils.js"),[o,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let i=u;for(let e=0;e<7;e++)t=(t<<l^(t>>h)*p)%f,t&d&&(i^=l<<(l<<BigInt(e))-l);c.push(i)}const[m,g]=i.default.split(c,!0),y=(e,t,r)=>r>32?i.default.rotlBH(e,t,r):i.default.rotlSH(e,t,r),w=(e,t,r)=>r>32?i.default.rotlBL(e,t,r):i.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=y(s,o,1)^r[n],c=w(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=a[r],s=y(t,i,n),c=w(t,i,n),u=o[r];t=e[u],i=e[u+1],e[u]=s,e[u+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=g[n]}r.fill(0)}r.keccakP=b;class v extends s.Hash{constructor(e,t,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){n.default.exists(this);const{blockLen:t,state:r}=this,i=(e=(0,s.toBytes)(e)).length;for(let n=0;n<i;){const s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){n.default.exists(this,!1),n.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return n.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(n.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new v(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}r.Keccak=v;const _=(e,t,r)=>(0,s.wrapConstructor)((()=>new v(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const E=(e,t,r)=>(0,s.wrapConstructorWithOpts)(((n={})=>new v(t,e,n.dkLen===undefined?r:n.dkLen,!0)));r.shake128=E(31,168,16),r.shake256=E(31,136,32)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/@noble/hashes/sha3.js"}],[1084,{"@noble/hashes/crypto":1082},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t};function s(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=s(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;e>=0&&e<t||(await(0,r.nextTick)(),i+=e)}},r.utf8ToBytes=s,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(t!==undefined&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/@noble/hashes/utils.js"}],[1085,{"./utils":1086,"@noble/hashes/sha3":1083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.keccak512=r.keccak384=r.keccak256=r.keccak224=void 0;const n=e("@noble/hashes/sha3"),i=e("./utils");r.keccak224=(0,i.wrapHash)(n.keccak_224),r.keccak256=(()=>{const e=(0,i.wrapHash)(n.keccak_256);return e.create=n.keccak_256.create,e})(),r.keccak384=(0,i.wrapHash)(n.keccak_384),r.keccak512=(0,i.wrapHash)(n.keccak_512)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-simple-keyring/node_modules/ethereum-cryptography/keccak.js"}],[1086,{"@noble/hashes/_assert":1080,"@noble/hashes/utils":1084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=r.wrapHash=r.equalsBytes=r.hexToBytes=r.bytesToUtf8=r.utf8ToBytes=r.createView=r.concatBytes=r.toHex=r.bytesToHex=r.assertBytes=r.assertBool=void 0;const i=n(e("@noble/hashes/_assert")),s=e("@noble/hashes/utils"),o=i.default.bool;r.assertBool=o;const a=i.default.bytes;r.assertBytes=a;var c=e("@noble/hashes/utils");Object.defineProperty(r,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(r,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),r.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},r.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,s.hexToBytes)(t)},r.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},r.wrapHash=function(e){return t=>(i.default.bytes(t),e(t))},r.crypto=(()=>{const e="object"==typeof self&&"crypto"in self?self.crypto:undefined,r=void 0!==t&&"function"==typeof t.require&&t.require.bind(t);return{node:r&&!e?r("crypto"):undefined,web:e}})()}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-simple-keyring/node_modules/ethereum-cryptography/utils.js"}],[109,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map(((e,t)=>(e.status===i.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e))),t}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[11,{"../../../../shared/constants/network":3216,"@ethersproject/providers":411,"ethereum-ens-network-map":2023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("@ethersproject/providers"),s=(n=e("ethereum-ens-network-map"))&&n.__esModule?n:{default:n},o=e("../../../../shared/constants/network");r.default=class{static getNetworkEnsSupport(e){return Boolean(s.default[e])}constructor({network:e,provider:t}={}){const r=o.NETWORK_ID_TO_ETHERS_NETWORK_NAME_MAP[e],n=s.default[e],a=new i.Web3Provider(t,{chainId:parseInt(e,10),name:r,ensAddress:n});this._ethProvider=a}lookup(e){return this._ethProvider.resolveName(e)}reverse(e){return this._ethProvider.lookupAddress(e)}}}}},{package:"$root$",file:"app/scripts/controllers/ens/ens.js"}],[110,{"../../../shared/constants/transaction":3223,"../lib/util":85,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../lib/util"),s=e("../../../shared/constants/transaction");var o={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==s.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,i.addHexPrefix)(e).toLowerCase(),to:()=>(0,i.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,i.addHexPrefix)(e),value:e=>(0,i.addHexPrefix)(e),data:e=>(0,i.addHexPrefix)(e),gas:e=>(0,i.addHexPrefix)(e),gasPrice:e=>(0,i.addHexPrefix)(e)},r={};return Object.keys(t).forEach((n=>{e[n]&&(r[n]=t[n](e[n]))})),r}(e.txParams)),e)))}return t}(t.data);return t.data=r,t}};r.default=o}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[111,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce(((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t)),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[1112,{"./determineGasFeeCalculations":1113,"./fetchGasEstimatesViaEthFeeHistory":1115,"./gas-util":1119,"@metamask/base-controller":1124,"@metamask/controller-utils":998,"eth-query":1996,"ethereumjs-util":2044,uuid:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.GasFeeController=r.GAS_ESTIMATE_TYPES=r.LEGACY_GAS_PRICES_API_URL=void 0;const s=i(e("eth-query")),o=e("uuid"),a=e("ethereumjs-util"),c=e("@metamask/base-controller"),u=e("@metamask/controller-utils"),l=e("./gas-util"),d=i(e("./determineGasFeeCalculations")),h=i(e("./fetchGasEstimatesViaEthFeeHistory"));r.LEGACY_GAS_PRICES_API_URL="https://api.metaswap.codefi.network/gasPrices",r.GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};const f={gasFeeEstimates:{persist:!0,anonymous:!1},estimatedGasFeeTimeBounds:{persist:!0,anonymous:!1},gasEstimateType:{persist:!0,anonymous:!1}},p={gasFeeEstimates:{},estimatedGasFeeTimeBounds:{},gasEstimateType:r.GAS_ESTIMATE_TYPES.NONE};class m extends c.BaseControllerV2{constructor({interval:e=15e3,messenger:t,state:i,getCurrentNetworkEIP1559Compatibility:o,getCurrentAccountEIP1559Compatibility:a,getChainId:c,getCurrentNetworkLegacyGasAPICompatibility:u,getProvider:l,onNetworkStateChange:d,legacyAPIEndpoint:h=r.LEGACY_GAS_PRICES_API_URL,EIP1559APIEndpoint:m="https://mock-gas-server.herokuapp.com/",clientId:g}){if(super({name:"GasFeeController",metadata:f,messenger:t,state:Object.assign(Object.assign({},p),i)}),this.intervalDelay=e,this.pollTokens=new Set,this.getCurrentNetworkEIP1559Compatibility=o,this.getCurrentNetworkLegacyGasAPICompatibility=u,this.getCurrentAccountEIP1559Compatibility=a,this.EIP1559APIEndpoint=m,this.legacyAPIEndpoint=h,this.clientId=g,d&&c){const e=l();this.ethQuery=new s.default(e),this.currentChainId=c(),d((()=>n(this,void 0,void 0,(function*(){const e=l(),t=c();this.ethQuery=new s.default(e),this.currentChainId!==t&&(this.currentChainId=t,yield this.resetPolling())}))))}else{const e=this.messagingSystem.call("NetworkController:getProviderConfig");this.currentChainId=e.chainId,this.ethQuery=this.messagingSystem.call("NetworkController:getEthQuery"),this.messagingSystem.subscribe("NetworkController:providerChange",(e=>n(this,void 0,void 0,(function*(){this.ethQuery=this.messagingSystem.call("NetworkController:getEthQuery"),this.currentChainId!==e.chainId&&(this.currentChainId=e.chainId,yield this.resetPolling())}))))}}resetPolling(){return n(this,void 0,void 0,(function*(){if(0!==this.pollTokens.size){const e=Array.from(this.pollTokens);this.stopPolling(),yield this.getGasFeeEstimatesAndStartPolling(e[0]),e.slice(1).forEach((e=>{this.pollTokens.add(e)}))}}))}fetchGasFeeEstimates(e){return n(this,void 0,void 0,(function*(){return yield this._fetchGasFeeEstimateData(e)}))}getGasFeeEstimatesAndStartPolling(e){return n(this,void 0,void 0,(function*(){const t=e||(0,o.v1)();return this.pollTokens.add(t),1===this.pollTokens.size&&(yield this._fetchGasFeeEstimateData(),this._poll()),t}))}_fetchGasFeeEstimateData(e={}){return n(this,void 0,void 0,(function*(){const{shouldUpdateState:t=!0}=e;let r;const n=this.getCurrentNetworkLegacyGasAPICompatibility();let i;i="string"==typeof this.currentChainId?(0,a.isHexString)(this.currentChainId)?parseInt(this.currentChainId,16):parseInt(this.currentChainId,10):this.currentChainId;try{r=yield this.getEIP1559Compatibility()}catch(e){console.error(e),r=!1}const s=yield(0,d.default)({isEIP1559Compatible:r,isLegacyGasAPICompatible:n,fetchGasEstimates:l.fetchGasEstimates,fetchGasEstimatesUrl:this.EIP1559APIEndpoint.replace("<chain_id>",`${i}`),fetchGasEstimatesViaEthFeeHistory:h.default,fetchLegacyGasPriceEstimates:l.fetchLegacyGasPriceEstimates,fetchLegacyGasPriceEstimatesUrl:this.legacyAPIEndpoint.replace("<chain_id>",`${i}`),fetchEthGasPriceEstimate:l.fetchEthGasPriceEstimate,calculateTimeEstimate:l.calculateTimeEstimate,clientId:this.clientId,ethQuery:this.ethQuery});return t&&this.update((e=>{e.gasFeeEstimates=s.gasFeeEstimates,e.estimatedGasFeeTimeBounds=s.estimatedGasFeeTimeBounds,e.gasEstimateType=s.gasEstimateType})),s}))}disconnectPoller(e){this.pollTokens.delete(e),0===this.pollTokens.size&&this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId),this.pollTokens.clear(),this.resetState()}destroy(){super.destroy(),this.stopPolling()}_poll(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval((()=>n(this,void 0,void 0,(function*(){yield(0,u.safelyExecute)((()=>this._fetchGasFeeEstimateData()))}))),this.intervalDelay)}resetState(){this.update((()=>p))}getEIP1559Compatibility(){var e,t;return n(this,void 0,void 0,(function*(){const r=yield this.getCurrentNetworkEIP1559Compatibility(),n=null===(t=null===(e=this.getCurrentAccountEIP1559Compatibility)||void 0===e?void 0:e.call(this))||void 0===t||t;return r&&n}))}getTimeEstimate(e,t){return this.state.gasFeeEstimates&&this.state.gasEstimateType===r.GAS_ESTIMATE_TYPES.FEE_MARKET?(0,l.calculateTimeEstimate)(e,t,this.state.gasFeeEstimates):{}}}r.GasFeeController=m,r.default=m}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/GasFeeController.js"}],[1113,{"./GasFeeController":1112},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("./GasFeeController");r.default=function({isEIP1559Compatible:e,isLegacyGasAPICompatible:t,fetchGasEstimates:r,fetchGasEstimatesUrl:s,fetchGasEstimatesViaEthFeeHistory:o,fetchLegacyGasPriceEstimates:a,fetchLegacyGasPriceEstimatesUrl:c,fetchEthGasPriceEstimate:u,calculateTimeEstimate:l,clientId:d,ethQuery:h}){return n(this,void 0,void 0,(function*(){try{if(e){let e;try{e=yield r(s,d)}catch(t){e=yield o(h)}const{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:n}=e.medium;return{gasFeeEstimates:e,estimatedGasFeeTimeBounds:l(t,n,e),gasEstimateType:i.GAS_ESTIMATE_TYPES.FEE_MARKET}}if(t){return{gasFeeEstimates:yield a(c,d),estimatedGasFeeTimeBounds:{},gasEstimateType:i.GAS_ESTIMATE_TYPES.LEGACY}}throw new Error("Main gas fee/price estimation failed. Use fallback")}catch(e){try{return{gasFeeEstimates:yield u(h),estimatedGasFeeTimeBounds:{},gasEstimateType:i.GAS_ESTIMATE_TYPES.ETH_GASPRICE}}catch(e){if(e instanceof Error)throw new Error(`Gas fee/price estimation failed. Message: ${e.message}`);throw e}}}))}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/determineGasFeeCalculations.js"}],[1114,{"@metamask/controller-utils":998,"ethereumjs-util":2044},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("ethereumjs-util"),s=e("@metamask/controller-utils"),o=1024;function a({ethQuery:e,numberOfBlocks:t,endBlockNumber:r,percentiles:i,includeNextBlock:o}){var a;return n(this,void 0,void 0,(function*(){const n=yield(0,s.query)(e,"eth_feeHistory",[(0,s.toHex)(t),(0,s.toHex)(r),i]),c=(0,s.fromHex)(n.oldestBlock);if(n.baseFeePerGas!==undefined&&n.baseFeePerGas.length>0&&n.gasUsedRatio.length>0&&(n.reward===undefined||n.reward.length>0)){const e=o?n.baseFeePerGas:n.baseFeePerGas.slice(0,t),r=n.gasUsedRatio,u=null!==(a=n.reward)&&void 0!==a?a:[],l=r.length;return e.map(((e,t)=>{const n=(0,s.fromHex)(e),o=c.addn(t);return t>=l?function({baseFeePerGas:e,number:t}){return{number:t,baseFeePerGas:e,gasUsedRatio:null,priorityFeesByPercentile:null}}({baseFeePerGas:n,number:o}):function({baseFeePerGas:e,number:t,blockIndex:r,gasUsedRatios:n,priorityFeePercentileGroups:i,percentiles:o}){const a=n[r],c=i[r];return{number:t,baseFeePerGas:e,gasUsedRatio:a,priorityFeesByPercentile:o.reduce(((e,t,r)=>{const n=c[r];return Object.assign(Object.assign({},e),{[t]:(0,s.fromHex)(n)})}),{})}}({baseFeePerGas:n,number:o,blockIndex:t,gasUsedRatios:r,priorityFeePercentileGroups:u,percentiles:i})}))}return[]}))}r.default=function({ethQuery:e,numberOfBlocks:t,endBlock:r="latest",percentiles:c=[],includeNextBlock:u=!1}){return n(this,void 0,void 0,(function*(){const n=c.length>0?Array.from(new Set(c)).sort(((e,t)=>e-t)):[],l=function(e,t){e.lt(new i.BN(t))&&(t=e.toNumber());const r=[];for(let n=e.subn(t);n.lt(e);n=n.addn(o)){const t=e.sub(n).toNumber(),i=t<o?t:o,s=n.addn(i);r.push({numberOfBlocks:i,endBlockNumber:s})}return r}("latest"===r?(0,s.fromHex)(yield(0,s.query)(e,"blockNumber")):r,t);return(yield Promise.all(l.map((({numberOfBlocks:t,endBlockNumber:r},i)=>i===l.length-1?a({ethQuery:e,numberOfBlocks:t,endBlockNumber:r,percentiles:n,includeNextBlock:u}):a({ethQuery:e,numberOfBlocks:t,endBlockNumber:r,percentiles:n,includeNextBlock:!1}))))).reduce(((e,t)=>[...e,...t]),[])}))}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchBlockFeeHistory.js"}],[1115,{"./fetchBlockFeeHistory":1114,"./fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels":1116,"./fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock":1117,"@metamask/controller-utils":998,"ethjs-unit":2082},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const s=e("ethjs-unit"),o=e("@metamask/controller-utils"),a=i(e("./fetchBlockFeeHistory")),c=i(e("./fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock")),u=i(e("./fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels"));r.default=function(e){return n(this,void 0,void 0,(function*(){const t=yield(0,c.default)(e),r=yield(0,a.default)({ethQuery:e,endBlock:t.number,numberOfBlocks:5,percentiles:[10,20,30]}),n=(0,s.fromWei)(t.baseFeePerGas,o.GWEI),i=(0,u.default)(r);return Object.assign(Object.assign({},i),{estimatedBaseFee:n,historicalBaseFeeRange:null,baseFeeTrend:null,latestPriorityFeeRange:null,historicalPriorityFeeRange:null,priorityFeeTrend:null,networkCongestion:null})}))}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchGasEstimatesViaEthFeeHistory.js"}],[1116,{"./medianOf":1118,"@metamask/controller-utils":998,"ethereumjs-util":2044,"ethjs-unit":2082},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const i=e("ethereumjs-util"),s=e("ethjs-unit"),o=e("@metamask/controller-utils"),a=n(e("./medianOf")),c=["low","medium","high"],u={low:{percentile:10,baseFeePercentageMultiplier:new i.BN(110),priorityFeePercentageMultiplier:new i.BN(94),minSuggestedMaxPriorityFeePerGas:new i.BN(1e9),estimatedWaitTimes:{minWaitTimeEstimate:15e3,maxWaitTimeEstimate:3e4}},medium:{percentile:20,baseFeePercentageMultiplier:new i.BN(120),priorityFeePercentageMultiplier:new i.BN(97),minSuggestedMaxPriorityFeePerGas:new i.BN(15e8),estimatedWaitTimes:{minWaitTimeEstimate:15e3,maxWaitTimeEstimate:45e3}},high:{percentile:30,baseFeePercentageMultiplier:new i.BN(125),priorityFeePercentageMultiplier:new i.BN(98),minSuggestedMaxPriorityFeePerGas:new i.BN(2e9),estimatedWaitTimes:{minWaitTimeEstimate:15e3,maxWaitTimeEstimate:6e4}}};r.default=function(e){return c.reduce(((t,r)=>{const n=function(e,t){const r=u[e],n=t[t.length-1].baseFeePerGas.mul(r.baseFeePercentageMultiplier).divn(100),c=t.map((e=>"priorityFeesByPercentile"in e?e.priorityFeesByPercentile[r.percentile]:null)).filter(i.BN.isBN),l=(0,a.default)(c).mul(r.priorityFeePercentageMultiplier).divn(100),d=i.BN.max(l,r.minSuggestedMaxPriorityFeePerGas),h=n.add(d);return Object.assign(Object.assign({},r.estimatedWaitTimes),{suggestedMaxPriorityFeePerGas:(0,s.fromWei)(d,o.GWEI),suggestedMaxFeePerGas:(0,s.fromWei)(h,o.GWEI)})}(r,e);return Object.assign(Object.assign({},t),{[r]:n})}),{})}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels.js"}],[1117,{"@metamask/controller-utils":998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("@metamask/controller-utils");r.default=function(e,t=!1){return n(this,void 0,void 0,(function*(){const r=yield(0,i.query)(e,"blockNumber"),n=yield(0,i.query)(e,"getBlockByNumber",[r,t]);return Object.assign(Object.assign({},n),{number:(0,i.fromHex)(n.number),baseFeePerGas:(0,i.fromHex)(n.baseFeePerGas)})}))}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock.js"}],[1118,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){const t=e.slice().sort(((e,t)=>e.cmp(t))),r=t.length;return t[Math.floor((r-1)/2)]}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchGasEstimatesViaEthFeeHistory/medianOf.js"}],[1119,{"@metamask/controller-utils":998,"ethereumjs-util":2044},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.calculateTimeEstimate=r.fetchEthGasPriceEstimate=r.fetchLegacyGasPriceEstimates=r.fetchGasEstimates=r.normalizeGWEIDecimalNumbers=void 0;const i=e("ethereumjs-util"),s=e("@metamask/controller-utils"),o=e=>({"X-Client-Id":e});function a(e){const t=(0,s.gweiDecToWEIBN)(e).toString(16);return(0,s.weiHexToGweiDec)(t).toString(10)}r.normalizeGWEIDecimalNumbers=a,r.fetchGasEstimates=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield(0,s.handleFetch)(e,t?{headers:o(t)}:undefined);return{low:Object.assign(Object.assign({},r.low),{suggestedMaxPriorityFeePerGas:a(r.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(r.low.suggestedMaxFeePerGas)}),medium:Object.assign(Object.assign({},r.medium),{suggestedMaxPriorityFeePerGas:a(r.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(r.medium.suggestedMaxFeePerGas)}),high:Object.assign(Object.assign({},r.high),{suggestedMaxPriorityFeePerGas:a(r.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(r.high.suggestedMaxFeePerGas)}),estimatedBaseFee:a(r.estimatedBaseFee),historicalBaseFeeRange:r.historicalBaseFeeRange,baseFeeTrend:r.baseFeeTrend,latestPriorityFeeRange:r.latestPriorityFeeRange,historicalPriorityFeeRange:r.historicalPriorityFeeRange,priorityFeeTrend:r.priorityFeeTrend,networkCongestion:r.networkCongestion}}))},r.fetchLegacyGasPriceEstimates=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield(0,s.handleFetch)(e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",headers:Object.assign({"Content-Type":"application/json"},t&&o(t))});return{low:r.SafeGasPrice,medium:r.ProposeGasPrice,high:r.FastGasPrice}}))},r.fetchEthGasPriceEstimate=function(e){return n(this,void 0,void 0,(function*(){const t=yield(0,s.query)(e,"gasPrice");return{gasPrice:(0,s.weiHexToGweiDec)(t).toString()}}))},r.calculateTimeEstimate=function(e,t,r){const{low:n,medium:o,high:a,estimatedBaseFee:c}=r,u=(0,s.gweiDecToWEIBN)(e),l=(0,s.gweiDecToWEIBN)(t),d=(0,s.gweiDecToWEIBN)(c),h=i.BN.min(u,l.sub(d)),f=(0,s.gweiDecToWEIBN)(n.suggestedMaxPriorityFeePerGas),p=(0,s.gweiDecToWEIBN)(o.suggestedMaxPriorityFeePerGas),m=(0,s.gweiDecToWEIBN)(a.suggestedMaxPriorityFeePerGas);let g,y;return h.lt(f)?(g=null,y="unknown"):h.gte(f)&&h.lt(p)?(g=n.minWaitTimeEstimate,y=n.maxWaitTimeEstimate):h.gte(p)&&h.lt(m)?(g=o.minWaitTimeEstimate,y=o.maxWaitTimeEstimate):h.eq(m)?(g=a.minWaitTimeEstimate,y=a.maxWaitTimeEstimate):(g=0,y=a.maxWaitTimeEstimate),{lowerTimeBound:g,upperTimeBound:y}}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/gas-util.js"}],[112,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter((e=>e.status!==i.TransactionStatus.rejected))}return t}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[1120,{"./GasFeeController":1112},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./GasFeeController"),r)}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/index.js"}],[1121,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1122,{immer:2499},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{const s=t[i][r],o=e[i];return"function"==typeof s?n[i]=s(o):s&&(n[i]=o),n}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r]=n.produceWithPatches(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1123,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1124,{"./BaseController":1121,"./BaseControllerV2":1122,"./ControllerMessenger":1123},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var s=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1128,{"./BIP44Node":1129,"./SLIP10Node":1130,"./constants":1131,"./utils":1142},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.getBIP44AddressKeyDeriver=r.deriveBIP44AddressKey=r.BIP44CoinTypeNode=r.BIP_44_COIN_TYPE_DEPTH=void 0;const o=e("./BIP44Node"),a=e("./constants"),c=e("./SLIP10Node"),u=e("./utils");r.BIP_44_COIN_TYPE_DEPTH=2;class l{constructor(e,t){n.set(this,void 0),i(this,n,e,"f"),this.coin_type=t,this.path=(0,u.getBIP44CoinTypePathString)(t),Object.freeze(this)}static async fromJSON(e,t){h(t),d(e.depth);const r=await o.BIP44Node.fromExtendedKey({depth:e.depth,index:e.index,parentFingerprint:e.parentFingerprint,chainCode:(0,u.hexStringToBytes)(e.chainCode),privateKey:(0,u.nullableHexStringToBytes)(e.privateKey),publicKey:(0,u.hexStringToBytes)(e.publicKey)});return new l(r,t)}static async fromDerivationPath(e){d(e.length-1);const t=await o.BIP44Node.fromDerivationPath({derivationPath:e}),n=Number.parseInt(e[r.BIP_44_COIN_TYPE_DEPTH].split(":")[1].replace("'",""),10);return new l(t,n)}static async fromNode(e,t){if(!(e instanceof o.BIP44Node))throw new Error("Invalid node: Expected an instance of BIP44Node.");return h(t),d(e.depth),Promise.resolve(new l(e,t))}get depth(){return s(this,n,"f").depth}get privateKeyBytes(){return s(this,n,"f").privateKeyBytes}get publicKeyBytes(){return s(this,n,"f").publicKeyBytes}get chainCodeBytes(){return s(this,n,"f").chainCodeBytes}get privateKey(){return s(this,n,"f").privateKey}get publicKey(){return s(this,n,"f").publicKey}get compressedPublicKey(){return s(this,n,"f").compressedPublicKey}get compressedPublicKeyBytes(){return s(this,n,"f").compressedPublicKeyBytes}get chainCode(){return s(this,n,"f").chainCode}get address(){return s(this,n,"f").address}get masterFingerprint(){return s(this,n,"f").masterFingerprint}get parentFingerprint(){return s(this,n,"f").parentFingerprint}get fingerprint(){return s(this,n,"f").fingerprint}get index(){return s(this,n,"f").index}get curve(){return s(this,n,"f").curve}get extendedKey(){return s(this,n,"f").extendedKey}async deriveBIP44AddressKey({account:e=0,change:t=0,address_index:r}){return await s(this,n,"f").derive((0,u.getBIP44CoinTypeToAddressPathTuple)({account:e,change:t,address_index:r}))}toJSON(){return Object.assign(Object.assign({},s(this,n,"f").toJSON()),{coin_type:this.coin_type,path:this.path})}}function d(e){if(e!==r.BIP_44_COIN_TYPE_DEPTH)throw new Error(`Invalid depth: Coin type nodes must be of depth ${r.BIP_44_COIN_TYPE_DEPTH}. Received: "${e}"`)}function h(e){if("number"!=typeof e||!Number.isInteger(e)||e<0)throw new Error("Invalid coin type: The specified coin type must be a non-negative integer number.")}async function f(e){if(e instanceof l)return d(e.depth),e;if("string"==typeof e){const t=await o.BIP44Node.fromExtendedKey(e),r=await l.fromNode(t,t.index-a.BIP_32_HARDENED_OFFSET);return d(r.depth),r}return l.fromJSON(e,e.coin_type)}r.BIP44CoinTypeNode=l,n=new WeakMap,r.deriveBIP44AddressKey=async function(e,{account:t=0,change:r=0,address_index:n}){const i=(0,u.getBIP44CoinTypeToAddressPathTuple)({account:t,change:r,address_index:n}),s=await f(e),a=await(0,c.deriveChildNode)({path:i,node:s});return new o.BIP44Node(a)},r.getBIP44AddressKeyDeriver=async function(e,t){const{account:r=0,change:n=0}=null!=t?t:{},i=await f(e),s=(0,u.getHardenedBIP32NodeToken)(r),a=(0,u.getBIP32NodeToken)(n),l=async(e,t=!1)=>{const r=await(0,c.deriveChildNode)({path:[s,a,t?(0,u.getHardenedBIP32NodeToken)(e):(0,u.getUnhardenedBIP32NodeToken)(e)],node:i});return new o.BIP44Node(r)};return l.coin_type=i.coin_type,l.path=(0,u.getBIP44ChangePathString)(i.path,{account:r,change:n}),Object.freeze(l),l}}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/BIP44CoinTypeNode.js"}],[1129,{"./SLIP10Node":1130,"./constants":1131,"./extended-keys":1140,"./utils":1142,"@metamask/utils":1202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.validateBIP44Depth=r.BIP44Node=void 0;const o=e("@metamask/utils"),a=e("./constants"),c=e("./extended-keys"),u=e("./SLIP10Node"),l=e("./utils");class d{constructor(e){n.set(this,void 0),i(this,n,e,"f"),Object.freeze(this)}static async fromJSON(e){return d.fromExtendedKey(e)}static async fromExtendedKey(e){if("string"==typeof e){const t=(0,c.decodeExtendedKey)(e),{chainCode:r,depth:n,parentFingerprint:i,index:s}=t;if(t.version===c.PRIVATE_KEY_VERSION){const{privateKey:e}=t;return d.fromExtendedKey({depth:n,parentFingerprint:i,index:s,privateKey:e,chainCode:r})}const{publicKey:o}=t;return d.fromExtendedKey({depth:n,parentFingerprint:i,index:s,publicKey:o,chainCode:r})}const{privateKey:t,publicKey:r,chainCode:n,depth:i,parentFingerprint:s,index:o}=e;h(i);const a=await u.SLIP10Node.fromExtendedKey({privateKey:t,publicKey:r,chainCode:n,depth:i,parentFingerprint:s,index:o,curve:"secp256k1"});return new d(a)}static async fromDerivationPath({derivationPath:e}){h(e.length-1),f(e,a.MIN_BIP_44_DEPTH);const t=await u.SLIP10Node.fromDerivationPath({derivationPath:e,curve:"secp256k1"});return new d(t)}get depth(){return s(this,n,"f").depth}get privateKeyBytes(){return s(this,n,"f").privateKeyBytes}get publicKeyBytes(){return s(this,n,"f").publicKeyBytes}get chainCodeBytes(){return s(this,n,"f").chainCodeBytes}get privateKey(){return s(this,n,"f").privateKey}get publicKey(){return s(this,n,"f").publicKey}get compressedPublicKey(){return s(this,n,"f").compressedPublicKey}get compressedPublicKeyBytes(){return s(this,n,"f").compressedPublicKeyBytes}get chainCode(){return s(this,n,"f").chainCode}get address(){return s(this,n,"f").address}get masterFingerprint(){return s(this,n,"f").masterFingerprint}get parentFingerprint(){return s(this,n,"f").parentFingerprint}get fingerprint(){return s(this,n,"f").fingerprint}get index(){return s(this,n,"f").index}get extendedKey(){const e={depth:this.depth,parentFingerprint:this.parentFingerprint,index:this.index,chainCode:this.chainCodeBytes};return this.privateKeyBytes?(0,c.encodeExtendedKey)(Object.assign(Object.assign({},e),{version:c.PRIVATE_KEY_VERSION,privateKey:this.privateKeyBytes})):(0,c.encodeExtendedKey)(Object.assign(Object.assign({},e),{version:c.PUBLIC_KEY_VERSION,publicKey:this.publicKeyBytes}))}get curve(){return s(this,n,"f").curve}neuter(){const e=s(this,n,"f").neuter();return new d(e)}async derive(e){if(this.depth===a.MAX_BIP_44_DEPTH)throw new Error("Illegal operation: This HD tree node is already a leaf node.");h(this.depth+e.length),f(e,this.depth+1);const t=await s(this,n,"f").derive(e);return new d(t)}toJSON(){return{depth:this.depth,masterFingerprint:this.masterFingerprint,parentFingerprint:this.parentFingerprint,index:this.index,privateKey:this.privateKey,publicKey:this.publicKey,chainCode:this.chainCode}}}function h(e){if((0,u.validateBIP32Depth)(e),e<a.MIN_BIP_44_DEPTH||e>a.MAX_BIP_44_DEPTH)throw new Error(`Invalid HD tree path depth: The depth must be a positive integer N such that 0 <= N <= 5. Received: "${e}"`)}function f(e,t){e.forEach(((e,r)=>{const n=t+r;if(n!==a.MIN_BIP_44_DEPTH)switch((0,o.assert)("string"==typeof e),n){case 1:if(e!==a.BIP44PurposeNodeToken)throw new Error(`Invalid derivation path: The "purpose" node (depth 1) must be the string "${a.BIP44PurposeNodeToken}".`);break;case 2:if(!a.BIP_32_PATH_REGEX.test(e)||!(0,l.isHardened)(e))throw new Error('Invalid derivation path: The "coin_type" node (depth 2) must be a hardened BIP-32 node.');break;case 3:if(!a.BIP_32_PATH_REGEX.test(e)||!(0,l.isHardened)(e))throw new Error('Invalid derivation path: The "account" node (depth 3) must be a hardened BIP-32 node.');break;case 4:if(!a.BIP_32_PATH_REGEX.test(e))throw new Error('Invalid derivation path: The "change" node (depth 4) must be a BIP-32 node.');break;case a.MAX_BIP_44_DEPTH:if(!a.BIP_32_PATH_REGEX.test(e))throw new Error('Invalid derivation path: The "address_index" node (depth 5) must be a BIP-32 node.')}else if(!(e instanceof Uint8Array||a.BIP_39_PATH_REGEX.test(e)))throw new Error('Invalid derivation path: The "m" / seed node (depth 0) must be a BIP-39 node.')}))}r.BIP44Node=d,n=new WeakMap,r.validateBIP44Depth=h}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/BIP44Node.js"}],[113,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach((e=>{t.PreferencesController.accountTokens[e]={mainnet:r}})),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[1130,{"./constants":1131,"./curves":1134,"./derivation":1136,"./derivers/bip32":1137,"./utils":1142,"@metamask/utils":1202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.deriveChildNode=r.validateParentFingerprint=r.validateBIP32Depth=r.SLIP10Node=void 0;const n=e("@metamask/utils"),i=e("./constants"),s=e("./curves"),o=e("./derivation"),a=e("./derivers/bip32"),c=e("./utils");class u{constructor({depth:e,masterFingerprint:t,parentFingerprint:r,index:n,chainCode:i,privateKey:s,publicKey:o,curve:a}){this.depth=e,this.masterFingerprint=t,this.parentFingerprint=r,this.index=n,this.chainCodeBytes=i,this.privateKeyBytes=s,this.publicKeyBytes=o,this.curve=a,Object.freeze(this)}static async fromJSON(e){return u.fromExtendedKey(e)}static async fromExtendedKey({depth:e,masterFingerprint:t,parentFingerprint:r,index:n,privateKey:o,publicKey:a,chainCode:f,curve:p}){const m=(0,c.getBytes)(f,i.BYTES_KEY_LENGTH);if(l(p),d(e),(0,c.validateBIP32Index)(n),h(r),o){const a=(0,c.getBytes)(o,i.BYTES_KEY_LENGTH);return new u({depth:e,masterFingerprint:t,parentFingerprint:r,index:n,chainCode:m,privateKey:a,publicKey:await(0,s.getCurveByName)(p).getPublicKey(a),curve:p})}if(a){const i=(0,c.getBytes)(a,(0,s.getCurveByName)(p).publicKeyLength);return new u({depth:e,masterFingerprint:t,parentFingerprint:r,index:n,chainCode:m,publicKey:i,curve:p})}throw new Error("Invalid options: Must provide either a private key or a public key.")}static async fromDerivationPath({derivationPath:e,curve:t}){if(l(t),!e)throw new Error("Invalid options: Must provide a derivation path.");if(0===e.length)throw new Error("Invalid derivation path: May not specify an empty derivation path.");return await(0,o.deriveKeyFromPath)({path:e,depth:e.length-1,curve:t})}get chainCode(){return(0,n.bytesToHex)(this.chainCodeBytes)}get privateKey(){return this.privateKeyBytes?(0,n.bytesToHex)(this.privateKeyBytes):undefined}get publicKey(){return(0,n.bytesToHex)(this.publicKeyBytes)}get compressedPublicKeyBytes(){return(0,s.getCurveByName)(this.curve).compressPublicKey(this.publicKeyBytes)}get compressedPublicKey(){return(0,n.bytesToHex)(this.compressedPublicKeyBytes)}get address(){if("secp256k1"!==this.curve)throw new Error("Unable to get address for this node: Only secp256k1 is supported.");return(0,n.bytesToHex)((0,a.publicKeyToEthAddress)(this.publicKeyBytes))}get fingerprint(){return(0,c.getFingerprint)(this.compressedPublicKeyBytes)}neuter(){return new u({depth:this.depth,masterFingerprint:this.masterFingerprint,parentFingerprint:this.parentFingerprint,index:this.index,chainCode:this.chainCodeBytes,publicKey:this.publicKeyBytes,curve:this.curve})}async derive(e){return await f({path:e,node:this})}toJSON(){return{depth:this.depth,masterFingerprint:this.masterFingerprint,parentFingerprint:this.parentFingerprint,index:this.index,curve:this.curve,privateKey:this.privateKey,publicKey:this.publicKey,chainCode:this.chainCode}}}function l(e){if(!e||"string"!=typeof e)throw new Error("Invalid curve: Must specify a curve.");if(!Object.keys(s.curves).includes(e))throw new Error(`Invalid curve: Only the following curves are supported: ${Object.keys(s.curves).join(", ")}.`)}function d(e){if(!(0,c.isValidInteger)(e))throw new Error(`Invalid HD tree path depth: The depth must be a positive integer. Received: "${String(e)}".`)}function h(e){if(!(0,c.isValidInteger)(e))throw new Error(`Invalid parent fingerprint: The fingerprint must be a positive integer. Received: "${String(e)}".`)}async function f({path:e,node:t}){if(0===e.length)throw new Error("Invalid HD tree derivation path: Deriving a path of length 0 is not defined.");const r=t.depth+e.length;return d(r),await(0,o.deriveKeyFromPath)({path:e,node:t,depth:r})}r.SLIP10Node=u,r.validateBIP32Depth=d,r.validateParentFingerprint=h,r.deriveChildNode=f}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/SLIP10Node.js"}],[1131,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BIP_32_HARDENED_OFFSET=r.BIP_39_PATH_REGEX=r.BIP_32_PATH_REGEX=r.BIP44PurposeNodeToken=r.MAX_BIP_44_DEPTH=r.MIN_BIP_44_DEPTH=r.BYTES_KEY_LENGTH=void 0,r.BYTES_KEY_LENGTH=32,r.MIN_BIP_44_DEPTH=0,r.MAX_BIP_44_DEPTH=5,r.BIP44PurposeNodeToken="bip32:44'",r.BIP_32_PATH_REGEX=/^bip32:\d+'?$/u,r.BIP_39_PATH_REGEX=/^bip39:([a-z]+){1}( [a-z]+){11,23}$/u,r.BIP_32_HARDENED_OFFSET=2147483648}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/constants.js"}],[1132,{"./ed25519":1133,"./secp256k1":1135,"@noble/secp256k1":1143},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.mod=r.getCurveByName=r.curves=void 0;const o=e("@noble/secp256k1"),a=s(e("./ed25519")),c=s(e("./secp256k1"));r.curves={secp256k1:c,ed25519:a},r.getCurveByName=function(e){return r.curves[e]},r.mod=o.utils.mod}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/curves/curve.js"}],[1133,{"@metamask/utils":1202,"@noble/ed25519":1224},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decompressPublicKey=r.compressPublicKey=r.publicAdd=r.getPublicKey=r.publicKeyLength=r.deriveUnhardenedKeys=r.isValidPrivateKey=r.secret=r.name=r.curve=void 0;const n=e("@metamask/utils"),i=e("@noble/ed25519");var s=e("@noble/ed25519");Object.defineProperty(r,"curve",{enumerable:!0,get:function(){return s.CURVE}}),r.name="ed25519",r.secret=(0,n.stringToBytes)("ed25519 seed");r.isValidPrivateKey=e=>!0,r.deriveUnhardenedKeys=!1,r.publicKeyLength=33;r.getPublicKey=async(e,t)=>{const r=await(0,i.getPublicKey)(e);return(0,n.concatBytes)([new Uint8Array([0]),r])};r.publicAdd=(e,t)=>{throw new Error("Ed25519 does not support public key derivation.")};r.compressPublicKey=e=>e;r.decompressPublicKey=e=>e}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/curves/ed25519.js"}],[1134,{"./curve":1132,"./ed25519":1133,"./secp256k1":1135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.ed25519=r.secp256k1=void 0,s(e("./curve"),r),r.secp256k1=o(e("./secp256k1")),r.ed25519=o(e("./ed25519"))}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/curves/index.js"}],[1135,{"@metamask/utils":1202,"@noble/secp256k1":1143},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decompressPublicKey=r.compressPublicKey=r.publicAdd=r.getPublicKey=r.isValidPrivateKey=r.publicKeyLength=r.deriveUnhardenedKeys=r.secret=r.name=r.curve=void 0;const n=e("@metamask/utils"),i=e("@noble/secp256k1");var s=e("@noble/secp256k1");Object.defineProperty(r,"curve",{enumerable:!0,get:function(){return s.CURVE}}),r.name="secp256k1",r.secret=(0,n.stringToBytes)("Bitcoin seed"),r.deriveUnhardenedKeys=!0,r.publicKeyLength=65;r.isValidPrivateKey=e=>i.utils.isValidPrivateKey(e);r.getPublicKey=(e,t)=>(0,i.getPublicKey)(e,t);r.publicAdd=(e,t)=>{const r=i.Point.fromHex(e).add(i.Point.fromPrivateKey(t));return r.assertValidity(),r.toRawBytes(!1)};r.compressPublicKey=e=>i.Point.fromHex(e).toRawBytes(!0);r.decompressPublicKey=e=>i.Point.fromHex(e).toRawBytes(!1)}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/curves/secp256k1.js"}],[1136,{"./BIP44CoinTypeNode":1128,"./BIP44Node":1129,"./SLIP10Node":1130,"./constants":1131,"./curves":1134,"./derivers":1139,"@metamask/utils":1202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validatePathSegment=r.deriveKeyFromPath=void 0;const n=e("@metamask/utils"),i=e("./BIP44CoinTypeNode"),s=e("./BIP44Node"),o=e("./constants"),a=e("./curves"),c=e("./derivers"),u=e("./SLIP10Node");function l(e,t,r){if(0===e.length)throw new Error("Invalid HD path segment: The segment must not be empty.");let n=!1;if(e.forEach(((e,t)=>{if(0===t){if(n=e instanceof Uint8Array||o.BIP_39_PATH_REGEX.test(e),!(e instanceof Uint8Array||n||o.BIP_32_PATH_REGEX.test(e)))throw d()}else if(e instanceof Uint8Array||!o.BIP_32_PATH_REGEX.test(e))throw d()})),r===o.MIN_BIP_44_DEPTH&&(!n||1!==e.length))throw new Error(`Invalid HD path segment: The segment must consist of a single BIP-39 node for depths of ${o.MIN_BIP_44_DEPTH}. Received: "${String(e)}".`);if(!t&&!n)throw new Error("Invalid derivation parameters: Must specify parent key if the first node of the path segment is not a BIP-39 node.");if(t&&n)throw new Error("Invalid derivation parameters: May not specify parent key if the path segment starts with a BIP-39 node.")}function d(){return new Error("Invalid HD path segment: The path segment is malformed.")}r.deriveKeyFromPath=async function(e){const{path:t,depth:r=t.length}=e,o="node"in e?e.node:undefined,h="curve"in e?e.curve:null==o?void 0:o.curve;if(o&&!(o instanceof u.SLIP10Node)&&!(o instanceof s.BIP44Node)&&!(o instanceof i.BIP44CoinTypeNode))throw new Error("Invalid arguments: Node must be a SLIP-10 node or a BIP-44 node when provided.");if(!h)throw new Error("Invalid arguments: Must specify either a parent node or curve.");return l(t,Boolean(null==o?void 0:o.privateKey)||Boolean(null==o?void 0:o.publicKey),r),await t.reduce((async(e,t,r)=>{const i=await e;if("string"==typeof t){const[e,r]=t.split(":");(0,n.assert)(function(e){return e in c.derivers}(e),`Unknown derivation type: "${e}".`);const s=c.derivers[e];return await s.deriveChildKey({path:r,node:i,curve:(0,a.getCurveByName)(h)})}return(0,n.assert)(0===r,d()),await c.derivers.bip39.deriveChildKey({path:t,node:i,curve:(0,a.getCurveByName)(h)})}),Promise.resolve(o))},r.validatePathSegment=l}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/derivation.js"}],[1137,{"../SLIP10Node":1130,"../constants":1131,"../curves":1134,"../utils":1142,"@metamask/utils":1202,"@noble/hashes/hmac":1229,"@noble/hashes/sha3":1233,"@noble/hashes/sha512":1234},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.privateAdd=r.deriveChildKey=r.publicKeyToEthAddress=r.privateKeyToEthAddress=void 0;const n=e("@metamask/utils"),i=e("@noble/hashes/hmac"),s=e("@noble/hashes/sha3"),o=e("@noble/hashes/sha512"),a=e("../constants"),c=e("../curves"),u=e("../SLIP10Node"),l=e("../utils");function d(e){return(0,n.assert)(e instanceof Uint8Array&&(0,l.isValidBytesKey)(e,c.secp256k1.publicKeyLength),"Invalid key: The key must be a 65-byte, non-zero Uint8Array."),(0,s.keccak_256)(e.slice(1)).slice(-20)}function h({parentPublicKey:e,childIndex:t}){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t,!1),(0,n.concatBytes)([e,r])}function f(e,t,r){const i=(0,n.bytesToBigInt)(e),s=(0,n.bytesToBigInt)(t);if(s>=r.curve.n)throw new Error("Invalid tweak: Tweak is larger than the curve order.");const o=(0,c.mod)(i+s,r.curve.n),a=(0,n.hexToBytes)(o.toString(16).padStart(64,"0"));if(!r.isValidPrivateKey(a))throw new Error("Invalid private key or tweak: The resulting private key is invalid.");return a}r.privateKeyToEthAddress=function(e){return(0,n.assert)(e instanceof Uint8Array&&(0,l.isValidBytesKey)(e,a.BYTES_KEY_LENGTH),"Invalid key: The key must be a 32-byte, non-zero Uint8Array."),d(c.secp256k1.getPublicKey(e,!1))},r.publicKeyToEthAddress=d,r.deriveChildKey=async function({path:e,node:t,curve:r=c.secp256k1}){(0,n.assert)("string"==typeof e,"Invalid path: Must be a string.");const s=e.includes("'");if(!s&&!r.deriveUnhardenedKeys)throw new Error(`Invalid path: Cannot derive unhardened child keys with ${r.name}.`);if(!t)throw new Error("Invalid parameters: Must specify a node to derive from.");if(s&&!t.privateKey)throw new Error("Invalid parameters: Cannot derive hardened child keys without a private key.");const l=e.split("'")[0],d=parseInt(l,10);if(!/^\d+$/u.test(l)||!Number.isInteger(d)||d<0||d>=a.BIP_32_HARDENED_OFFSET)throw new Error(`Invalid BIP-32 index: The index must be a non-negative decimal integer less than ${a.BIP_32_HARDENED_OFFSET}.`);if(t.privateKeyBytes){const e=await async function({privateKey:e,childIndex:t,isHardened:r,curve:i}){if(r){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t+a.BIP_32_HARDENED_OFFSET,!1),(0,n.concatBytes)([new Uint8Array([0]),e,r])}return h({parentPublicKey:await i.getPublicKey(e,!0),childIndex:t})}({privateKey:t.privateKeyBytes,childIndex:d,isHardened:s,curve:r}),{privateKey:c,chainCode:l}=await async function({privateKey:e,chainCode:t,secretExtension:r,curve:n}){const s=(0,i.hmac)(o.sha512,t,r),a=s.slice(0,32),c=s.slice(32);if("ed25519"===n.name){return{privateKey:a,publicKey:await n.getPublicKey(a),chainCode:c}}const u=f(e,a,n),l=await n.getPublicKey(u);return{privateKey:u,publicKey:l,chainCode:c}}({privateKey:t.privateKeyBytes,chainCode:t.chainCodeBytes,secretExtension:e,curve:r});return u.SLIP10Node.fromExtendedKey({privateKey:c,chainCode:l,depth:t.depth+1,masterFingerprint:t.masterFingerprint,parentFingerprint:t.fingerprint,index:d+(s?a.BIP_32_HARDENED_OFFSET:0),curve:r.name})}const p=h({parentPublicKey:t.compressedPublicKeyBytes,childIndex:d}),{publicKey:m,chainCode:g}=function({publicKey:e,chainCode:t,publicExtension:r,curve:n}){const s=(0,i.hmac)(o.sha512,t,r),a=s.slice(0,32),c=s.slice(32);return{publicKey:n.publicAdd(e,a),chainCode:c}}({publicKey:t.compressedPublicKeyBytes,chainCode:t.chainCodeBytes,publicExtension:p,curve:r});return u.SLIP10Node.fromExtendedKey({publicKey:m,chainCode:g,depth:t.depth+1,masterFingerprint:t.masterFingerprint,parentFingerprint:t.fingerprint,index:d,curve:r.name})},r.privateAdd=f}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/derivers/bip32.js"}],[1138,{"../SLIP10Node":1130,"../curves":1134,"../utils":1142,"@metamask/scure-bip39":1184,"@metamask/scure-bip39/dist/wordlists/english":1185,"@noble/hashes/hmac":1229,"@noble/hashes/sha512":1234},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBip39KeyFromSeed=r.deriveChildKey=r.bip39MnemonicToMultipath=void 0;const n=e("@metamask/scure-bip39"),i=e("@metamask/scure-bip39/dist/wordlists/english"),s=e("@noble/hashes/hmac"),o=e("@noble/hashes/sha512"),a=e("../curves"),c=e("../SLIP10Node"),u=e("../utils");async function l(e,t=a.secp256k1){const r=(0,s.hmac)(o.sha512,t.secret,e),n=r.slice(0,32),i=r.slice(32),l=(0,u.getFingerprint)(await t.getPublicKey(n,!0));return c.SLIP10Node.fromExtendedKey({privateKey:n,chainCode:i,masterFingerprint:l,depth:0,parentFingerprint:0,index:0,curve:t.name})}r.bip39MnemonicToMultipath=function(e){return`bip39:${e.toLowerCase().trim()}`},r.deriveChildKey=async function({path:e,curve:t}){return l(await(0,n.mnemonicToSeed)(e,i.wordlist),t)},r.createBip39KeyFromSeed=l}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/derivers/bip39.js"}],[1139,{"./bip32":1137,"./bip39":1138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.derivers=void 0;const o=s(e("./bip32")),a=s(e("./bip39"));r.derivers={bip32:o,bip39:a}}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/derivers/index.js"}],[114,{"../../../shared/constants/transaction":3223,"./fail-tx":168},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("../../../shared/constants/transaction"),s=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};var o={version:29,migrate:(0,s.default)(29,"Stuck in approved state for too long.",(e=>{const t=e.status===i.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5}))};r.default=o}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[1140,{"./BIP44Node":1129,"./curves/secp256k1":1135,"./utils":1142,"@metamask/utils":1202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.encodeExtendedKey=r.decodeExtendedKey=r.PRIVATE_KEY_VERSION=r.PUBLIC_KEY_VERSION=void 0;const n=e("@metamask/utils"),i=e("./BIP44Node"),s=e("./curves/secp256k1"),o=e("./utils");r.PUBLIC_KEY_VERSION=76067358,r.PRIVATE_KEY_VERSION=76066276;r.decodeExtendedKey=e=>{const t=(0,o.decodeBase58check)(e);if(78!==t.length)throw new Error(`Invalid extended key: Expected a length of 78, got ${t.length}.`);const a=(0,n.createDataView)(t),c=a.getUint32(0,!1),u=a.getUint8(4);(0,i.validateBIP44Depth)(u);const l=a.getUint32(5,!1),d=a.getUint32(9,!1),h=t.slice(13,45);if(!(0,o.isValidBytesKey)(h,32))throw new Error("Invalid extended key: Chain code must be a 32-byte non-zero byte array.");const f=t.slice(45,78);if(!(0,o.isValidBytesKey)(f,33))throw new Error("Invalid extended key: Key must be a 33-byte non-zero byte array.");const p=(0,n.createDataView)(f);if(c===r.PUBLIC_KEY_VERSION){if(2!==p.getUint8(0)&&3!==p.getUint8(0))throw new Error("Invalid extended key: Public key must start with 0x02 or 0x03.");return{version:c,depth:u,parentFingerprint:l,index:d,chainCode:h,publicKey:(0,s.decompressPublicKey)(f)}}if(c===r.PRIVATE_KEY_VERSION){if(0!==p.getUint8(0))throw new Error("Invalid extended key: Private key must start with 0x00.");return{version:c,depth:u,parentFingerprint:l,index:d,chainCode:h,privateKey:f.slice(1)}}throw new Error("Invalid extended key: Expected a public (xpub) or private key (xprv) version.")};r.encodeExtendedKey=e=>{const{version:t,depth:i,parentFingerprint:a,index:c,chainCode:u}=e,l=new Uint8Array(78),d=(0,n.createDataView)(l);if(d.setUint32(0,t,!1),d.setUint8(4,i),d.setUint32(5,a,!1),d.setUint32(9,c,!1),l.set(u,13),e.version===r.PUBLIC_KEY_VERSION){const{publicKey:t}=e,r=(0,s.compressPublicKey)(t);l.set(r,45)}if(e.version===r.PRIVATE_KEY_VERSION){const{privateKey:t}=e;l.set(t,46)}return(0,o.encodeBase58check)(l)}}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/extended-keys.js"}],[1141,{"./BIP44CoinTypeNode":1128,"./BIP44Node":1129,"./SLIP10Node":1130,"./constants":1131,"./curves":1134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getBIP44AddressKeyDeriver=r.deriveBIP44AddressKey=r.BIP_44_COIN_TYPE_DEPTH=r.BIP44CoinTypeNode=r.ed25519=r.secp256k1=r.SLIP10Node=r.BIP44Node=void 0;var s=e("./BIP44Node");Object.defineProperty(r,"BIP44Node",{enumerable:!0,get:function(){return s.BIP44Node}});var o=e("./SLIP10Node");Object.defineProperty(r,"SLIP10Node",{enumerable:!0,get:function(){return o.SLIP10Node}});var a=e("./curves");Object.defineProperty(r,"secp256k1",{enumerable:!0,get:function(){return a.secp256k1}}),Object.defineProperty(r,"ed25519",{enumerable:!0,get:function(){return a.ed25519}});var c=e("./BIP44CoinTypeNode");Object.defineProperty(r,"BIP44CoinTypeNode",{enumerable:!0,get:function(){return c.BIP44CoinTypeNode}}),Object.defineProperty(r,"BIP_44_COIN_TYPE_DEPTH",{enumerable:!0,get:function(){return c.BIP_44_COIN_TYPE_DEPTH}}),Object.defineProperty(r,"deriveBIP44AddressKey",{enumerable:!0,get:function(){return c.deriveBIP44AddressKey}}),Object.defineProperty(r,"getBIP44AddressKeyDeriver",{enumerable:!0,get:function(){return c.getBIP44AddressKeyDeriver}}),i(e("./constants"),r)}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/index.js"}],[1142,{"./constants":1131,"@metamask/scure-bip39/dist/wordlists/english":1185,"@metamask/utils":1202,"@noble/hashes/ripemd160":1231,"@noble/hashes/sha256":1232,"@scure/base":1241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mnemonicPhraseToBytes=r.getFingerprint=r.encodeBase58check=r.decodeBase58check=r.getBytes=r.isValidInteger=r.isValidBytesKey=r.nullableHexStringToBytes=r.hexStringToBytes=r.isHardened=r.isValidBIP32Index=r.validateBIP32Index=r.getBIP32NodeToken=r.getUnhardenedBIP32NodeToken=r.getHardenedBIP32NodeToken=r.getBIP44CoinTypeToAddressPathTuple=r.getBIP44ChangePathString=r.getBIP44CoinTypePathString=void 0;const n=e("@metamask/scure-bip39/dist/wordlists/english"),i=e("@metamask/utils"),s=e("@noble/hashes/ripemd160"),o=e("@noble/hashes/sha256"),a=e("@scure/base"),c=e("./constants");function u(e){return h(e),`${l(e)}'`}function l(e){return h(e),`bip32:${e}`}function d(e){if("number"==typeof e)return l(e);if(!e||!Number.isInteger(e.index)||"boolean"!=typeof e.hardened)throw new Error("Invalid BIP-32 index: Must be an object containing the index and whether it is hardened.");return e.hardened?u(e.index):l(e.index)}function h(e){if(!f(e))throw new Error("Invalid BIP-32 index: Must be a non-negative integer.")}function f(e){return g(e)}function p(e){return e instanceof Uint8Array?e:(0,i.hexToBytes)(e)}function m(e,t){if(e.length!==t)return!1;for(const t of e)if(0!==t)return!0;return!1}function g(e){return"number"==typeof e&&Number.isInteger(e)&&e>=0}function y(e,t){if(!m(e,t))throw new Error(`Invalid value: Must be a non-zero ${t}-byte byte array.`)}r.getBIP44CoinTypePathString=function(e){return`m / ${c.BIP44PurposeNodeToken} / ${u(e)}`},r.getBIP44ChangePathString=function(e,t){var r,n;return`${e} / ${u(null!==(r=t.account)&&void 0!==r?r:0)} / ${d(null!==(n=t.change)&&void 0!==n?n:0)}`},r.getBIP44CoinTypeToAddressPathTuple=function({account:e=0,change:t=0,address_index:r}){return[u(e),d(t),d(r)]},r.getHardenedBIP32NodeToken=u,r.getUnhardenedBIP32NodeToken=l,r.getBIP32NodeToken=d,r.validateBIP32Index=h,r.isValidBIP32Index=f,r.isHardened=function(e){return e.endsWith("'")},r.hexStringToBytes=p,r.nullableHexStringToBytes=function(e){return e!==undefined?p(e):undefined},r.isValidBytesKey=m,r.isValidInteger=g,r.getBytes=function(e,t){if(e instanceof Uint8Array)return y(e,t),e;if("string"==typeof e){const r=(0,i.hexToBytes)(e);return y(r,t),r}throw new Error("Invalid value: Expected an instance of Uint8Array or hexadecimal string.")};r.decodeBase58check=e=>{const t=(0,a.base58check)(o.sha256);try{return t.decode(e)}catch(e){throw new Error("Invalid value: Value is not base58-encoded, or the checksum is invalid.")}};r.encodeBase58check=e=>(0,a.base58check)(o.sha256).encode(e);r.getFingerprint=e=>{if(!m(e,33))throw new Error("Invalid public key: The key must be a 33-byte, non-zero byte array.");const t=(0,s.ripemd160)((0,o.sha256)(e));return(0,i.createDataView)(t).getUint32(0,!1)},r.mnemonicPhraseToBytes=function(e){const t=e.split(" ").map((e=>{const t=n.wordlist.indexOf(e);return(0,i.assert)(-1!==t,`Invalid mnemonic phrase: Unknown word "${e}".`),t}));return new Uint8Array(new Uint16Array(t).buffer)}}}},{package:"@metamask/key-tree",file:"node_modules/@metamask/key-tree/dist/utils.js"}],[1143,{crypto:1788},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.schnorr=r.verify=r.signSync=r.sign=r.getSharedSecret=r.recoverPublicKey=r.getPublicKey=r.Signature=r.Point=r.CURVE=void 0;const n=e("crypto"),i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),c=BigInt(8),u=Object.freeze({a:i,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:s,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});r.CURVE=u;const l=(e,t)=>(e+t/o)/t,d={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=u,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-s*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),c=l(o*e,t),d=l(-n*e,t);let h=R(e-c*r-d*i,t),f=R(-c*n-d*o,t);const p=h>a,m=f>a;if(p&&(h=t-h),m&&(f=t-f),h>a||f>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:p,k1:h,k2neg:m,k2:f}}},h=32,f=32;function p(e){const{a:t,b:r}=u,n=R(e*e),i=R(n*e);return R(i+t*e+r)}const m=u.a===i;class g extends Error{constructor(e){super(e)}}function y(e){if(!(e instanceof w))throw new TypeError("JacobianPoint expected")}class w{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof _))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(_.ZERO)?w.ZERO:new w(e.x,e.y,s)}static toAffineBatch(e){const t=function(e,t=u.P){const r=new Array(e.length),n=D(e.reduce(((e,n,s)=>n===i?e:(r[s]=e,R(e*n,t))),s),t);return e.reduceRight(((e,n,s)=>n===i?e:(r[s]=R(e*r[s],t),R(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return w.toAffineBatch(e).map(w.fromAffine)}equals(e){y(e);const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e,a=R(n*n),c=R(o*o),u=R(t*c),l=R(i*a),d=R(R(r*o)*c),h=R(R(s*n)*a);return u===l&&d===h}negate(){return new w(this.x,R(-this.y),this.z)}double(){const{x:e,y:t,z:r}=this,n=R(e*e),i=R(t*t),s=R(i*i),u=e+i,l=R(o*(R(u*u)-n-s)),d=R(a*n),h=R(d*d),f=R(h-o*l),p=R(d*(l-f)-c*s),m=R(o*t*r);return new w(f,p,m)}add(e){y(e);const{x:t,y:r,z:n}=this,{x:s,y:a,z:c}=e;if(s===i||a===i)return this;if(t===i||r===i)return e;const u=R(n*n),l=R(c*c),d=R(t*l),h=R(s*u),f=R(R(r*c)*l),p=R(R(a*n)*u),m=R(h-d),g=R(p-f);if(m===i)return g===i?this.double():w.ZERO;const b=R(m*m),v=R(m*b),_=R(d*b),E=R(g*g-v-o*_),k=R(g*(_-E)-f*v),T=R(n*c*m);return new w(E,k,T)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=w.ZERO;if("bigint"==typeof e&&e===i)return t;let r=M(e);if(r===s)return this;if(!m){let e=t,n=this;for(;r>i;)r&s&&(e=e.add(n)),n=n.double(),r>>=s;return e}let{k1neg:n,k1:o,k2neg:a,k2:c}=d.splitScalar(r),u=t,l=t,h=this;for(;o>i||c>i;)o&s&&(u=u.add(h)),c&s&&(l=l.add(h)),h=h.double(),o>>=s,c>>=s;return n&&(u=u.negate()),a&&(l=l.negate()),l=new w(R(l.x*d.beta),l.y,l.z),u.add(l)}precomputeWindow(e){const t=m?128/e+1:256/e+1,r=[];let n=this,i=n;for(let s=0;s<t;s++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(w.BASE)&&(t=_.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&v.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=w.normalizeZ(n),v.set(t,n)));let i=w.ZERO,o=w.BASE;const a=1+(m?128/r:256/r),c=2**(r-1),u=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let t=0;t<a;t++){const r=t*c;let a=Number(e&u);e>>=d,a>c&&(a-=l,e+=s);const h=r,f=r+Math.abs(a)-1,p=t%2!=0,m=a<0;0===a?o=o.add(b(p,n[h])):i=i.add(b(m,n[f]))}return{p:i,f:o}}multiply(e,t){let r,n,i=M(e);if(m){const{k1neg:e,k1:s,k2neg:o,k2:a}=d.splitScalar(i);let{p:c,f:u}=this.wNAF(s,t),{p:l,f:h}=this.wNAF(a,t);c=b(e,c),l=b(o,l),l=new w(R(l.x*d.beta),l.y,l.z),r=c.add(l),n=u.add(h)}else{const{p:e,f:s}=this.wNAF(i,t);r=e,n=s}return w.normalizeZ([r,n])[0]}toAffine(e){const{x:t,y:r,z:n}=this,i=this.equals(w.ZERO);null==e&&(e=i?c:D(n));const o=e,a=R(o*o),u=R(a*o),l=R(t*a),d=R(r*u),h=R(n*o);if(i)return _.ZERO;if(h!==s)throw new Error("invZ was invalid");return new _(l,d)}}function b(e,t){const r=t.negate();return e?r:t}w.BASE=new w(u.Gx,u.Gy,s),w.ZERO=new w(i,s,i);const v=new WeakMap;class _{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,v.delete(this)}hasEvenY(){return this.y%o===i}static fromCompressedHex(e){const t=32===e.length,r=O(t?e:e.subarray(1));if(!G(r))throw new Error("Point is not on curve");let n=function(e){const{P:t}=u,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),l=BigInt(88),d=e*e*e%t,h=d*d*e%t,f=K(h,a)*h%t,p=K(f,a)*h%t,m=K(p,o)*d%t,g=K(m,n)*m%t,y=K(g,i)*g%t,w=K(y,c)*y%t,b=K(w,l)*w%t,v=K(b,c)*y%t,_=K(v,a)*h%t,E=K(_,s)*g%t,k=K(E,r)*d%t,T=K(k,o);if(T*T%t!==e)throw new Error("Cannot find square root");return T}(p(r));const i=(n&s)===s;if(t)i&&(n=R(-n));else{1==(1&e[0])!==i&&(n=R(-n))}const c=new _(r,n);return c.assertValidity(),c}static fromUncompressedHex(e){const t=O(e.subarray(1,33)),r=O(e.subarray(33,65)),n=new _(t,r);return n.assertValidity(),n}static fromHex(e){const t=L(e),r=t.length,n=t[0];if(r===h)return this.fromCompressedHex(t);if(33===r&&(2===n||3===n))return this.fromCompressedHex(t);if(65===r&&4===n)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return _.BASE.multiply(z(e))}static fromSignature(e,t,r){const{r:n,s:i}=Y(t);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const s=U(L(e)),{n:o}=u,a=2===r||3===r?n+o:n,c=D(a,o),l=R(-s*c,o),d=R(i*c,o),h=1&r?"03":"02",f=_.fromHex(h+x(a)),p=_.BASE.multiplyAndAddUnsafe(f,l,d);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(e=!1){return N(this.toHex(e))}toHex(e=!1){const t=x(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${x(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!G(t)||!G(r))throw new Error(e);const n=R(r*r);if(R(n-p(t))!==i)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new _(this.x,R(-this.y))}double(){return w.fromAffine(this).double().toAffine()}add(e){return w.fromAffine(this).add(w.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return w.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){const n=w.fromAffine(this),o=t===i||t===s||this!==_.BASE?n.multiplyUnsafe(t):n.multiply(t),a=w.fromAffine(e).multiplyUnsafe(r),c=o.add(a);return c.equals(w.ZERO)?undefined:c.toAffine()}}function E(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function k(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${I(e)}`);const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:O(r),left:e.subarray(t+2)}}r.Point=_,_.BASE=new _(u.Gx,u.Gy),_.ZERO=new _(i,i);class T{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,r="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=t?I(e):e;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new T(B(n.slice(0,64)),B(n.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${I(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=k(e.subarray(2)),{data:n,left:i}=k(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${I(i)}`);return{r:t,s:n}}(t?e:N(e));return new T(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!V(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!V(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=u.n>>s;return this.s>e}normalizeS(){return this.hasHighS()?new T(this.r,R(-this.s,u.n)):this}toDERRawBytes(){return N(this.toDERHex())}toDERHex(){const e=E(j(this.s)),t=E(j(this.r)),r=e.length/2,n=t.length/2,i=j(r),s=j(n);return`30${j(n+r+4)}02${s}${t}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return N(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}function P(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}r.Signature=T;const A=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function I(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=A[e[r]];return t}const S=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function x(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(i<=e&&e<S))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function C(e){const t=N(x(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function j(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function B(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function N(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function O(e){return B(I(e))}function L(e){return e instanceof Uint8Array?Uint8Array.from(e):N(e)}function M(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&V(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function R(e,t=u.P){const r=e%t;return r>=i?r:t+r}function K(e,t){const{P:r}=u;let n=e;for(;t-- >i;)n*=n,n%=r;return n}function D(e,t=u.P){if(e===i||t<=i)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=R(e,t),n=t,o=i,a=s,c=s,l=i;for(;r!==i;){const e=n/r,t=n%r,i=o-c*e,s=a-l*e;n=r,r=t,o=c,a=l,c=i,l=s}if(n!==s)throw new Error("invert: does not exist");return R(o,t)}function U(e,t=!1){const r=function(e){const t=8*e.length-256,r=O(e);return t>0?r>>BigInt(t):r}(e);if(t)return r;const{n:n}=u;return r>=n?r-n:r}let H,F;class ${constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return r.utils.hmacSha256(this.k,...e)}hmacSync(...e){return F(this.k,...e)}checkSync(){if("function"!=typeof F)throw new g("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return P(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return P(...t)}}function V(e){return i<e&&e<u.n}function G(e){return i<e&&e<u.P}function q(e,t,r,n=!0){const{n:o}=u,a=U(e,!0);if(!V(a))return;const c=D(a,o),l=_.BASE.multiply(a),d=R(l.x,o);if(d===i)return;const h=R(c*R(t+r*d,o),o);if(h===i)return;let f=new T(d,h),p=(l.x===f.r?0:2)|Number(l.y&s);return n&&f.hasHighS()&&(f=f.normalizeS(),p^=1),{sig:f,recovery:p}}function z(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private key");t=B(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==f)throw new Error("Expected 32 bytes of private key");t=O(e)}if(!V(t))throw new Error("Expected private key: 0 < key < n");return t}function W(e){return e instanceof _?(e.assertValidity(),e):_.fromHex(e)}function Y(e){if(e instanceof T)return e.assertValidity(),e;try{return T.fromDER(e)}catch(t){return T.fromCompact(e)}}function Z(e){const t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?33===n||65===n:r?66===n||130===n:e instanceof _}function J(e){return O(e.length>h?e.slice(0,h):e)}function X(e){const t=J(e),r=R(t,u.n);return Q(r<i?t:r)}function Q(e){return C(e)}function ee(e,t,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const i=L(e),s=z(t),o=[Q(s),X(i)];if(null!=n){!0===n&&(n=r.utils.randomBytes(h));const e=L(n);if(e.length!==h)throw new Error("sign: Expected 32 bytes of extra data");o.push(e)}return{seed:P(...o),m:J(i),d:s}}function te(e,t){const{sig:r,recovery:n}=e,{der:i,recovered:s}=Object.assign({canonical:!0,der:!0},t),o=i?r.toDERRawBytes():r.toCompactRawBytes();return s?[o,n]:o}r.getPublicKey=function(e,t=!1){return _.fromPrivateKey(e).toRawBytes(t)},r.recoverPublicKey=function(e,t,r,n=!1){return _.fromSignature(e,t,r).toRawBytes(n)},r.getSharedSecret=function(e,t,r=!1){if(Z(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!Z(t))throw new TypeError("getSharedSecret: second arg must be public key");const n=W(t);return n.assertValidity(),n.multiply(z(e)).toRawBytes(r)},r.sign=async function(e,t,r={}){const{seed:n,m:i,d:s}=ee(e,t,r.extraEntropy),o=new $(32,f);let a;for(await o.reseed(n);!(a=q(await o.generate(),i,s,r.canonical));)await o.reseed();return te(a,r)},r.signSync=function(e,t,r={}){const{seed:n,m:i,d:s}=ee(e,t,r.extraEntropy),o=new $(32,f);let a;for(o.reseedSync(n);!(a=q(o.generateSync(),i,s,r.canonical));)o.reseedSync();return te(a,r)};const re={strict:!0};function ne(e){return R(O(e),u.n)}r.verify=function(e,t,r,n=re){let i;try{i=Y(e),t=L(t)}catch(e){return!1}const{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;const a=U(t);let c;try{c=W(r)}catch(e){return!1}const{n:l}=u,d=D(o,l),h=R(a*d,l),f=R(s*d,l),p=_.BASE.multiplyAndAddUnsafe(c,h,f);return!!p&&R(p.x,l)===s};class ie{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=L(e);if(64!==t.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);const r=O(t.subarray(0,32)),n=O(t.subarray(32,64));return new ie(r,n)}assertValidity(){const{r:e,s:t}=this;if(!G(e)||!V(t))throw new Error("Invalid signature")}toHex(){return x(this.r)+x(this.s)}toRawBytes(){return N(this.toHex())}}class se{constructor(e,t,n=r.utils.randomBytes()){if(null==e)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=L(e);const{x:i,scalar:s}=this.getScalar(z(t));if(this.px=i,this.d=s,this.rand=L(n),32!==this.rand.length)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){const t=_.fromPrivateKey(e),r=t.hasEvenY()?e:u.n-e;return{point:t,scalar:r,x:t.toRawX()}}initNonce(e,t){return C(e^O(t))}finalizeNonce(e){const t=R(O(e),u.n);if(t===i)throw new Error("sign: Creation of signature failed. k is zero");const{point:r,x:n,scalar:s}=this.getScalar(t);return{R:r,rx:n,k:s}}finalizeSig(e,t,r,n){return new ie(e.x,R(t+r*n,u.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:e,d:t,px:n,rand:i}=this,s=r.utils.taggedHash,o=this.initNonce(t,await s(de.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await s(de.nonce,o,n,e)),l=ne(await s(de.challenge,c,n,e)),d=this.finalizeSig(a,u,l,t);return await ce(d,e,n)||this.error(),d}calcSync(){const{m:e,d:t,px:n,rand:i}=this,s=r.utils.taggedHashSync,o=this.initNonce(t,s(de.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(s(de.nonce,o,n,e)),l=ne(s(de.challenge,c,n,e)),d=this.finalizeSig(a,u,l,t);return ue(d,e,n)||this.error(),d}}function oe(e,t,r){const n=e instanceof ie,i=n?e:ie.fromHex(e);return n&&i.assertValidity(),{...i,m:L(t),P:W(r)}}function ae(e,t,r,n){const i=_.BASE.multiplyAndAddUnsafe(t,z(r),R(-n,u.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function ce(e,t,n){try{const{r:i,s:s,m:o,P:a}=oe(e,t,n),c=ne(await r.utils.taggedHash(de.challenge,C(i),a.toRawX(),o));return ae(i,a,s,c)}catch(e){return!1}}function ue(e,t,n){try{const{r:i,s:s,m:o,P:a}=oe(e,t,n),c=ne(r.utils.taggedHashSync(de.challenge,C(i),a.toRawX(),o));return ae(i,a,s,c)}catch(e){if(e instanceof g)throw e;return!1}}r.schnorr={Signature:ie,getPublicKey:function(e){return _.fromPrivateKey(e).toRawX()},sign:async function(e,t,r){return new se(e,t,r).calc()},verify:ce,signSync:function(e,t,r){return new se(e,t,r).calcSync()},verifySync:ue},_.BASE._setWindowSize(8);const le={node:n,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined},de={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},he={};r.utils={bytesToHex:I,hexToBytes:N,concatBytes:P,mod:R,invert:D,isValidPrivateKey(e){try{return z(e),!0}catch(e){return!1}},_bigintTo32Bytes:C,_normalizePrivateKey:z,hashToPrivateKey:e=>{if((e=L(e)).length<40||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return C(R(O(e),u.n-s)+s)},randomBytes:(e=32)=>{if(le.web)return le.web.getRandomValues(new Uint8Array(e));if(le.node){const{randomBytes:t}=le.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>r.utils.hashToPrivateKey(r.utils.randomBytes(40)),precompute(e=8,t=_.BASE){const r=t===_.BASE?t:new _(t.x,t.y);return r._setWindowSize(e),r.multiply(a),r},sha256:async(...e)=>{if(le.web){const t=await le.web.subtle.digest("SHA-256",P(...e));return new Uint8Array(t)}if(le.node){const{createHash:t}=le.node,r=t("sha256");return e.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(le.web){const r=await le.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=P(...t),i=await le.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(le.node){const{createHmac:r}=le.node,n=r("sha256",e);return t.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:undefined,hmacSha256Sync:undefined,taggedHash:async(e,...t)=>{let n=he[e];if(n===undefined){const t=await r.utils.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=P(t,t),he[e]=n}return r.utils.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof H)throw new g("sha256Sync is undefined, you need to set it");let r=he[e];if(r===undefined){const t=H(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=P(t,t),he[e]=r}return H(r,...t)},_JacobianPoint:w},Object.defineProperties(r.utils,{sha256Sync:{configurable:!1,get:()=>H,set(e){H||(H=e)}},hmacSha256Sync:{configurable:!1,get:()=>F,set(e){F||(F=e)}}})}}},{package:"@metamask/key-tree>@noble/secp256k1",file:"node_modules/@metamask/key-tree/node_modules/@noble/secp256k1/lib/index.js"}],[115,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach(((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId})),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[1151,{"./ObservableStore":1154},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class i extends n.ObservableStore{constructor(e){super();this.getState()||this.putState({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1152,{"./ObservableStore":1154},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LocalStorageStore=void 0;const n=e("./ObservableStore");class i extends n.ObservableStore{constructor(e={}){if(!global.localStorage)throw new Error("LocalStorageStore - can't find localStorage.");if(super(),!e.storageKey)throw new Error("LocalStorageStore - no storageKey specified.");this._storageKey=e.storageKey}_getState(){const e=global.localStorage.getItem(this._storageKey);return e?JSON.parse(e):undefined}_putState(e){const t=JSON.stringify(e);return global.localStorage.setItem(this._storageKey,t)}}r.LocalStorageStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/LocalStorageStore.js"}],[1153,{"./ObservableStore":1154},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class i extends n.ObservableStore{constructor(e=[]){super();this.getState()||this.putState({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/MergedStore.js"}],[1154,{"@metamask/safe-event-emitter":1183},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const i=n(e("@metamask/safe-event-emitter"));class s extends i.default{constructor(e={}){super(),this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState(),r=Object.assign({},t,e);this.putState(r)}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[1155,{stream:1792},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("stream");class i extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new i(e)}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/asStream.js"}],[1156,{"./ComposedStore":1151,"./LocalStorageStore":1152,"./MergedStore":1153,"./ObservableStore":1154,"./asStream":1155,"./transform":1157},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./asStream"),r),i(e("./ComposedStore"),r),i(e("./LocalStorageStore"),r),i(e("./MergedStore"),r),i(e("./ObservableStore"),r),i(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/index.js"}],[1157,{through2:1158},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("through2");r.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/transform.js"}],[1158,{_process:2832,"readable-stream":2996,util:1795,xtend:3197},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Transform,i=e("util").inherits,s=e("xtend");function o(e){n.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function c(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),e(t,r,n)}}i(o,n),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,r){var n=new o(e);return n._transform=t,r&&(n._flush=r),n})),t.exports.ctor=c((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=s(e,t),o.call(this,this.options)}return i(n,o),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),t.exports.obj=c((function(e,t,r){var n=new o(s({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/obs-store>through2",file:"node_modules/@metamask/obs-store/node_modules/through2/through2.js"}],[1159,{"./Permission":1160,"./errors":1162,"@metamask/controller-utils":1170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.decorateWithCaveats=r.isRestrictedMethodCaveatSpecification=void 0;const i=e("@metamask/controller-utils"),s=e("./errors"),o=e("./Permission");function a(e){return(0,i.hasProperty)(e,"decorator")}r.isRestrictedMethodCaveatSpecification=a,r.decorateWithCaveats=function(e,t,r){const{caveats:i}=t;if(!i)return e;let c=t=>n(this,void 0,void 0,(function*(){return e(t)}));for(const e of i){const t=r[e.type];if(!t)throw new s.UnrecognizedCaveatTypeError(e.type);if(!a(t))throw new s.CaveatSpecificationMismatchError(t,o.PermissionType.RestrictedMethod);c=t.decorator(c,e)}return c}}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/Caveat.js"}],[116,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[1160,{nanoid:1173},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hasSpecificationType=r.PermissionType=r.findCaveat=r.constructPermission=void 0;const n=e("nanoid");r.constructPermission=function(e){const{caveats:t=null,invoker:r,target:i}=e;return{id:(0,n.nanoid)(),parentCapability:i,invoker:r,caveats:t,date:(new Date).getTime()}},r.findCaveat=function(e,t){var r;return null===(r=e.caveats)||void 0===r?void 0:r.find((e=>e.type===t))},function(e){e.RestrictedMethod="RestrictedMethod",e.Endowment="Endowment"}(r.PermissionType||(r.PermissionType={})),r.hasSpecificationType=function(e,t){return e.permissionType===t}}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/Permission.js"}],[1161,{"./Caveat":1159,"./Permission":1160,"./errors":1162,"./permission-middleware":1164,"./utils":1168,"@metamask/base-controller":993,"@metamask/controller-utils":1170,"deep-freeze-strict":1923,"eth-rpc-errors":2e3,immer:2499,nanoid:1173},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionController=r.CaveatMutatorOperation=void 0;const o=s(e("deep-freeze-strict")),a=e("immer"),c=e("nanoid"),u=e("eth-rpc-errors"),l=e("@metamask/base-controller"),d=e("@metamask/controller-utils"),h=e("./Caveat"),f=e("./errors"),p=e("./Permission"),m=e("./permission-middleware"),g=e("./utils"),y="PermissionController";var w;!function(e){e[e.noop=0]="noop",e[e.updateValue=1]="updateValue",e[e.deleteCaveat=2]="deleteCaveat",e[e.revokePermission=3]="revokePermission"}(w=r.CaveatMutatorOperation||(r.CaveatMutatorOperation={}));class b extends l.BaseControllerV2{constructor(e){const{caveatSpecifications:t,permissionSpecifications:r,unrestrictedMethods:n,messenger:i,state:s={}}=e;super({name:y,metadata:{subjects:{anonymous:!0,persist:!0}},messenger:i,state:Object.assign(Object.assign({},{subjects:{}}),s)}),this._unrestrictedMethods=new Set(n),this._caveatSpecifications=(0,o.default)(Object.assign({},t)),this.validatePermissionSpecifications(r,this._caveatSpecifications),this._permissionSpecifications=(0,o.default)(Object.assign({},r)),this.registerMessageHandlers(),this.createPermissionMiddleware=(0,m.getPermissionMiddlewareFactory)({executeRestrictedMethod:this._executeRestrictedMethod.bind(this),getRestrictedMethod:this.getRestrictedMethod.bind(this),isUnrestrictedMethod:this.unrestrictedMethods.has.bind(this.unrestrictedMethods)})}get unrestrictedMethods(){return this._unrestrictedMethods}getPermissionSpecification(e){return this._permissionSpecifications[e]}getCaveatSpecification(e){return this._caveatSpecifications[e]}validatePermissionSpecifications(e,t){Object.entries(e).forEach((([e,{permissionType:r,targetKey:n,allowedCaveats:i}])=>{if(!r||!(0,d.hasProperty)(p.PermissionType,r))throw new Error(`Invalid permission type: "${r}"`);if(!e||/_$/u.test(e)||/[^_]\*$/u.test(e))throw new Error(`Invalid permission target key: "${e}"`);if(e!==n)throw new Error(`Invalid permission specification: key "${e}" must match specification.target value "${n}".`);i&&i.forEach((e=>{if(!(0,d.hasProperty)(t,e))throw new f.UnrecognizedCaveatTypeError(e);const n=t[e],i=(0,h.isRestrictedMethodCaveatSpecification)(n);if(r===p.PermissionType.RestrictedMethod&&!i||r===p.PermissionType.Endowment&&i)throw new f.CaveatSpecificationMismatchError(n,r)}))}))}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${y}:clearPermissions`,(()=>this.clearState())),this.messagingSystem.registerActionHandler(`${y}:getEndowments`,((e,t,r)=>this.getEndowments(e,t,r))),this.messagingSystem.registerActionHandler(`${y}:getSubjectNames`,(()=>this.getSubjectNames())),this.messagingSystem.registerActionHandler(`${y}:getPermissions`,(e=>this.getPermissions(e))),this.messagingSystem.registerActionHandler(`${y}:hasPermission`,((e,t)=>this.hasPermission(e,t))),this.messagingSystem.registerActionHandler(`${y}:hasPermissions`,(e=>this.hasPermissions(e))),this.messagingSystem.registerActionHandler(`${y}:grantPermissions`,this.grantPermissions.bind(this)),this.messagingSystem.registerActionHandler(`${y}:requestPermissions`,((e,t)=>this.requestPermissions(e,t))),this.messagingSystem.registerActionHandler(`${y}:revokeAllPermissions`,(e=>this.revokeAllPermissions(e))),this.messagingSystem.registerActionHandler(`${y}:revokePermissionForAllSubjects`,(e=>this.revokePermissionForAllSubjects(e))),this.messagingSystem.registerActionHandler(`${y}:revokePermissions`,this.revokePermissions.bind(this)),this.messagingSystem.registerActionHandler(`${y}:updateCaveat`,((e,t,r,n)=>{this.updateCaveat(e,t,r,n)}))}clearState(){this.update((e=>Object.assign({},{subjects:{}})))}getTypedPermissionSpecification(e,t,r){const n=e===p.PermissionType.RestrictedMethod?(0,f.methodNotFound)(t,r?{origin:r}:undefined):new f.EndowmentPermissionDoesNotExistError(t,r),i=this.getTargetKey(t);if(!i)throw n;const s=this.getPermissionSpecification(i);if(!(0,p.hasSpecificationType)(s,e))throw n;return s}getRestrictedMethod(e,t){return this.getTypedPermissionSpecification(p.PermissionType.RestrictedMethod,e,t).methodImplementation}getSubjectNames(){return Object.keys(this.state.subjects)}getPermission(e,t){var r;return null===(r=this.state.subjects[e])||void 0===r?void 0:r.permissions[t]}getPermissions(e){var t;return null===(t=this.state.subjects[e])||void 0===t?void 0:t.permissions}hasPermission(e,t){return Boolean(this.getPermission(e,t))}hasPermissions(e){return Boolean(this.state.subjects[e])}revokeAllPermissions(e){this.update((t=>{if(!t.subjects[e])throw new f.UnrecognizedSubjectError(e);delete t.subjects[e]}))}revokePermission(e,t){this.revokePermissions({[e]:[t]})}revokePermissions(e){this.update((t=>{Object.keys(e).forEach((r=>{if(!(0,d.hasProperty)(t.subjects,r))throw new f.UnrecognizedSubjectError(r);e[r].forEach((e=>{const{permissions:n}=t.subjects[r];if(!(0,d.hasProperty)(n,e))throw new f.PermissionDoesNotExistError(r,e);this.deletePermission(t.subjects,r,e)}))}))}))}revokePermissionForAllSubjects(e){0!==this.getSubjectNames().length&&this.update((t=>{Object.entries(t.subjects).forEach((([r,n])=>{const{permissions:i}=n;(0,d.hasProperty)(i,e)&&this.deletePermission(t.subjects,r,e)}))}))}deletePermission(e,t,r){const{permissions:n}=e[t];Object.keys(n).length>1?delete n[r]:delete e[t]}hasCaveat(e,t,r){return Boolean(this.getCaveat(e,t,r))}getCaveat(e,t,r){const n=this.getPermission(e,t);if(!n)throw new f.PermissionDoesNotExistError(e,t);return(0,p.findCaveat)(n,r)}addCaveat(e,t,r,n){if(this.hasCaveat(e,t,r))throw new f.CaveatAlreadyExistsError(e,t,r);this.setCaveat(e,t,r,n)}updateCaveat(e,t,r,n){if(!this.hasCaveat(e,t,r))throw new f.CaveatDoesNotExistError(e,t,r);this.setCaveat(e,t,r,n)}setCaveat(e,t,r,n){this.update((i=>{const s=i.subjects[e];if(!s)throw new f.UnrecognizedSubjectError(e);const o=s.permissions[t];if(!o)throw new f.PermissionDoesNotExistError(e,t);const a={type:r,value:n};if(this.validateCaveat(a,e,t),o.caveats){const e=o.caveats.findIndex((e=>e.type===a.type));-1===e?o.caveats.push(a):o.caveats.splice(e,1,a)}else o.caveats=[a];this.validateModifiedPermission(o,e,t)}))}updatePermissionsByCaveat(e,t){0!==Object.keys(this.state.subjects).length&&this.update((r=>{Object.values(r.subjects).forEach((n=>{Object.values(n.permissions).forEach((i=>{const{caveats:s}=i,o=null==s?void 0:s.find((({type:t})=>t===e));if(!o)return;const a=t(o.value);switch(a.operation){case w.noop:break;case w.updateValue:o.value=a.value,this.validateCaveat(o,n.origin,i.parentCapability);break;case w.deleteCaveat:this.deleteCaveat(i,e,n.origin,i.parentCapability);break;case w.revokePermission:this.deletePermission(r.subjects,n.origin,i.parentCapability);break;default:throw new Error(`Unrecognized mutation result: "${a.operation}"`)}}))}))}))}removeCaveat(e,t,r){this.update((n=>{var i;const s=null===(i=n.subjects[e])||void 0===i?void 0:i.permissions[t];if(!s)throw new f.PermissionDoesNotExistError(e,t);if(!s.caveats)throw new f.CaveatDoesNotExistError(e,t,r);this.deleteCaveat(s,r,e,t)}))}deleteCaveat(e,t,r,n){if(!e.caveats)throw new f.CaveatDoesNotExistError(r,n,t);const i=e.caveats.findIndex((e=>e.type===t));if(-1===i)throw new f.CaveatDoesNotExistError(r,n,t);1===e.caveats.length?e.caveats=null:e.caveats.splice(i,1),this.validateModifiedPermission(e,r,n)}validateModifiedPermission(e,t,r){const n=this.getTargetKey(e.parentCapability);if(!n)throw new Error(`Fatal: Existing permission target key "${n}" has no specification.`);this.validatePermission(this.getPermissionSpecification(n),e,t,r)}getTargetKey(e){if((0,d.hasProperty)(this._permissionSpecifications,e))return e;const t={};for(const e of Object.keys(this._permissionSpecifications)){const r=e.match(/(.+)\*$/u);r&&(t[r[1]]=!0)}const r=e.split("_");let n="";for(;r.length>0&&!(0,d.hasProperty)(this._permissionSpecifications,n)&&!t[n];)n+=`${r.shift()}_`;return t[n]?`${n}*`:undefined}grantPermissions({approvedPermissions:e,requestData:t,preserveExistingPermissions:r=!0,subject:n}){const{origin:i}=n;if(!i||"string"!=typeof i)throw new f.InvalidSubjectIdentifierError(i);const s=r?Object.assign({},this.getPermissions(i)):{};for(const[r,n]of Object.entries(e)){const e=this.getTargetKey(r);if(!e)throw(0,f.methodNotFound)(r);if(n.parentCapability!==undefined&&r!==n.parentCapability)throw new f.InvalidApprovedPermissionError(i,r,n);const o=r,a=this.getPermissionSpecification(e),c={caveats:this.constructCaveats(i,o,n.caveats),invoker:i,target:o};let u;a.factory?(u=a.factory(c,t),this.validatePermission(a,u,i,o)):(u=(0,p.constructPermission)(c),this.validatePermission(a,u,i,o,{invokePermissionValidator:!0,performCaveatValidation:!1})),s[o]=u}return this.setValidatedPermissions(i,s),s}validatePermission(e,t,r,n,{invokePermissionValidator:i,performCaveatValidation:s}={invokePermissionValidator:!0,performCaveatValidation:!0}){const{allowedCaveats:o,validator:a}=e;if((0,d.hasProperty)(t,"caveats")){const{caveats:e}=t;if(null!==e&&!(Array.isArray(e)&&e.length>0))throw new f.InvalidCaveatsPropertyError(r,n,e);const i=new Set;null==e||e.forEach((e=>{if(s&&this.validateCaveat(e,r,n),!(null==o?void 0:o.includes(e.type)))throw new f.ForbiddenCaveatError(e.type,r,n);if(i.has(e.type))throw new f.DuplicateCaveatError(e.type,r,n);i.add(e.type)}))}i&&a&&a(t,r,n)}setValidatedPermissions(e,t){this.update((r=>{r.subjects[e]||(r.subjects[e]={origin:e,permissions:{}}),r.subjects[e].permissions=(0,a.castDraft)(t)}))}constructCaveats(e,t,r){const n=null==r?void 0:r.map((r=>{this.validateCaveat(r,e,t);const{type:n,value:i}=r;return{type:n,value:i}}));return n&&(0,d.isNonEmptyArray)(n)?n:undefined}validateCaveat(e,t,r){var n;if(!(0,d.isPlainObject)(e))throw new f.InvalidCaveatError(e,t,r);if(2!==Object.keys(e).length)throw new f.InvalidCaveatFieldsError(e,t,r);if("string"!=typeof e.type)throw new f.InvalidCaveatTypeError(e,t,r);const i=this.getCaveatSpecification(e.type);if(!i)throw new f.UnrecognizedCaveatTypeError(e.type,t,r);if(!(0,d.hasProperty)(e,"value")||e.value===undefined)throw new f.CaveatMissingValueError(e,t,r);if(!(0,d.isValidJson)(e.value))throw new f.CaveatInvalidJsonError(e,t,r);null===(n=i.validator)||void 0===n||n.call(i,e,t,r)}requestPermissions(e,t,r={}){return n(this,void 0,void 0,(function*(){const{origin:n}=e,{id:s=(0,c.nanoid)(),preserveExistingPermissions:o=!0}=r;this.validateRequestedPermissions(n,t);const a={id:s,origin:n},u={metadata:a,permissions:t},l=yield this.requestUserApproval(u),{permissions:d}=l,h=i(l,["permissions"]);return[this.grantPermissions({subject:e,approvedPermissions:d,preserveExistingPermissions:o,requestData:h}),a]}))}validateRequestedPermissions(e,t){if(!(0,d.isPlainObject)(t))throw(0,f.invalidParams)({message:`Requested permissions for origin "${e}" is not a plain object.`,data:{origin:e,requestedPermissions:t}});if(0===Object.keys(t).length)throw(0,f.invalidParams)({message:`Permissions request for origin "${e}" contains no permissions.`,data:{requestedPermissions:t}});for(const r of Object.keys(t)){const n=t[r],i=this.getTargetKey(r);if(!i)throw(0,f.methodNotFound)(r,{origin:e,requestedPermissions:t});if(!(0,d.isPlainObject)(n)||n.parentCapability!==undefined&&r!==n.parentCapability)throw(0,f.invalidParams)({message:`Permissions request for origin "${e}" contains invalid requested permission(s).`,data:{origin:e,requestedPermissions:t}});this.validatePermission(this.getPermissionSpecification(i),n,e,r,{invokePermissionValidator:!1,performCaveatValidation:!0})}}requestUserApproval(e){return n(this,void 0,void 0,(function*(){const{origin:t,id:r}=e.metadata,n=yield this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:t,requestData:e,type:g.MethodNames.requestPermissions},!0);return this.validateApprovedPermissions(n,{id:r,origin:t}),n}))}validateApprovedPermissions(e,t){const{id:r,origin:n}=t;if(!(0,d.isPlainObject)(e)||!(0,d.isPlainObject)(e.metadata))throw(0,f.internalError)(`Approved permissions request for subject "${n}" is invalid.`,{data:{approvedRequest:e}});const{metadata:{id:i,origin:s},permissions:o}=e;if(i!==r)throw(0,f.internalError)(`Approved permissions request for subject "${n}" mutated its id.`,{originalId:r,mutatedId:i});if(s!==n)throw(0,f.internalError)(`Approved permissions request for subject "${n}" mutated its origin.`,{originalOrigin:n,mutatedOrigin:s});try{this.validateRequestedPermissions(n,o)}catch(e){if(e instanceof u.EthereumRpcError)throw(0,f.internalError)(`Invalid approved permissions request: ${e.message}`,e.data);throw(0,f.internalError)("Unrecognized error type",{error:e})}}acceptPermissionsRequest(e){return n(this,void 0,void 0,(function*(){const{id:t}=e.metadata;if(!this.hasApprovalRequest({id:t}))throw new f.PermissionsRequestNotFoundError(t);if(0!==Object.keys(e.permissions).length)try{this.messagingSystem.call("ApprovalController:acceptRequest",t,e)}catch(e){throw this._rejectPermissionsRequest(t,e),e}else this._rejectPermissionsRequest(t,(0,f.invalidParams)({message:"Must request at least one permission."}))}))}rejectPermissionsRequest(e){return n(this,void 0,void 0,(function*(){if(!this.hasApprovalRequest({id:e}))throw new f.PermissionsRequestNotFoundError(e);this._rejectPermissionsRequest(e,(0,f.userRejectedRequest)())}))}hasApprovalRequest(e){return this.messagingSystem.call("ApprovalController:hasRequest",e)}_rejectPermissionsRequest(e,t){return this.messagingSystem.call("ApprovalController:rejectRequest",e,t)}getEndowments(e,t,r){return n(this,void 0,void 0,(function*(){if(!this.hasPermission(e,t))throw(0,f.unauthorized)({data:{origin:e,targetName:t}});return this.getTypedPermissionSpecification(p.PermissionType.Endowment,t,e).endowmentGetter({origin:e,requestData:r})}))}executeRestrictedMethod(e,t,r){return n(this,void 0,void 0,(function*(){const n=this.getRestrictedMethod(t,e),i=yield this._executeRestrictedMethod(n,{origin:e},t,r);if(i===undefined)throw new Error(`Internal request for method "${t}" as origin "${e}" returned no result.`);return i}))}_executeRestrictedMethod(e,t,r,n=[]){const{origin:i}=t,s=this.getPermission(i,r);if(!s)throw(0,f.unauthorized)({data:{origin:i,method:r}});return(0,h.decorateWithCaveats)(e,s,this._caveatSpecifications)({method:r,params:n,context:{origin:i}})}}r.PermissionController=b}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/PermissionController.js"}],[1162,{"eth-rpc-errors":2e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionsRequestNotFoundError=r.CaveatSpecificationMismatchError=r.DuplicateCaveatError=r.ForbiddenCaveatError=r.InvalidCaveatFieldsError=r.CaveatInvalidJsonError=r.CaveatMissingValueError=r.InvalidCaveatTypeError=r.InvalidCaveatError=r.CaveatAlreadyExistsError=r.CaveatDoesNotExistError=r.InvalidCaveatsPropertyError=r.UnrecognizedCaveatTypeError=r.EndowmentPermissionDoesNotExistError=r.PermissionDoesNotExistError=r.InvalidApprovedPermissionError=r.UnrecognizedSubjectError=r.InvalidSubjectIdentifierError=r.internalError=r.userRejectedRequest=r.invalidParams=r.methodNotFound=r.unauthorized=void 0;const n=e("eth-rpc-errors");r.unauthorized=function(e){return n.ethErrors.provider.unauthorized({message:"Unauthorized to perform action. Try requesting the required permission(s) first. For more information, see: https://docs.metamask.io/guide/rpc-api.html#permissions",data:e.data})},r.methodNotFound=function(e,t){const r={message:`The method "${e}" does not exist / is not available.`};return t!==undefined&&(r.data=t),n.ethErrors.rpc.methodNotFound(r)},r.invalidParams=function(e){return n.ethErrors.rpc.invalidParams({data:e.data,message:e.message})},r.userRejectedRequest=function(e){return n.ethErrors.provider.userRejectedRequest({data:e})},r.internalError=function(e,t){return n.ethErrors.rpc.internal({message:e,data:t})};class i extends Error{constructor(e){super(`Invalid subject identifier: "${"string"==typeof e?e:typeof e}"`)}}r.InvalidSubjectIdentifierError=i;class s extends Error{constructor(e){super(`Unrecognized subject: "${e}" has no permissions.`)}}r.UnrecognizedSubjectError=s;class o extends Error{constructor(e,t,r){super(`Invalid approved permission for origin "${e}" and target "${t}".`),this.data={origin:e,target:t,approvedPermission:r}}}r.InvalidApprovedPermissionError=o;class a extends Error{constructor(e,t){super(`Subject "${e}" has no permission for "${t}".`)}}r.PermissionDoesNotExistError=a;class c extends Error{constructor(e,t){super(`Subject "${t}" has no permission for "${e}".`),t&&(this.data={origin:t})}}r.EndowmentPermissionDoesNotExistError=c;class u extends Error{constructor(e,t,r){super(`Unrecognized caveat type: "${e}"`),this.data={caveatType:e},t!==undefined&&(this.data.origin=t),r!==undefined&&(this.data.target=r)}}r.UnrecognizedCaveatTypeError=u;class l extends Error{constructor(e,t,r){super(`The "caveats" property of permission for "${t}" of subject "${e}" is invalid. It must be a non-empty array if specified.`),this.data={origin:e,target:t,caveatsProperty:r}}}r.InvalidCaveatsPropertyError=l;class d extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" has no caveat of type "${r}".`)}}r.CaveatDoesNotExistError=d;class h extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" already has a caveat of type "${r}".`)}}r.CaveatAlreadyExistsError=h;class f extends n.EthereumRpcError{constructor(e,t,r){super(n.errorCodes.rpc.invalidParams,"Invalid caveat. Caveats must be plain objects.",{receivedCaveat:e}),this.data={origin:t,target:r}}}r.InvalidCaveatError=f;class p extends Error{constructor(e,t,r){super(`Caveat types must be strings. Received: "${typeof e.type}"`),this.data={caveat:e,origin:t,target:r}}}r.InvalidCaveatTypeError=p;class m extends Error{constructor(e,t,r){super('Caveat is missing "value" field.'),this.data={caveat:e,origin:t,target:r}}}r.CaveatMissingValueError=m;class g extends Error{constructor(e,t,r){super('Caveat "value" is invalid JSON.'),this.data={caveat:e,origin:t,target:r}}}r.CaveatInvalidJsonError=g;class y extends Error{constructor(e,t,r){super(`Caveat has unexpected number of fields: "${Object.keys(e).length}"`),this.data={caveat:e,origin:t,target:r}}}r.InvalidCaveatFieldsError=y;class w extends Error{constructor(e,t,r){super(`Permissions for target "${r}" may not have caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}}r.ForbiddenCaveatError=w;class b extends Error{constructor(e,t,r){super(`Permissions for target "${r}" contains multiple caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}}r.DuplicateCaveatError=b;class v extends Error{constructor(e,t){super(`Caveat specification uses a mismatched type. Expected caveats for ${t}`),this.data={caveatSpec:e,permissionType:t}}}r.CaveatSpecificationMismatchError=v;class _ extends Error{constructor(e){super(`Permissions request with id "${e}" not found.`)}}r.PermissionsRequestNotFoundError=_}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/errors.js"}],[1163,{"./Caveat":1159,"./Permission":1160,"./PermissionController":1161,"./errors":1162,"./rpc-methods":1166,"./utils":1168},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.permissionRpcMethods=void 0,s(e("./Caveat"),r),s(e("./errors"),r),s(e("./Permission"),r),s(e("./PermissionController"),r),s(e("./utils"),r),r.permissionRpcMethods=o(e("./rpc-methods"))}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/index.js"}],[1164,{"./errors":1162,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionMiddlewareFactory=void 0;const i=e("json-rpc-engine"),s=e("./errors");r.getPermissionMiddlewareFactory=function({executeRestrictedMethod:e,getRestrictedMethod:t,isUnrestrictedMethod:r}){return function(o){const{origin:a}=o;if("string"!=typeof a||!a)throw new Error('The subject "origin" must be a non-empty string.');return(0,i.createAsyncMiddleware)(((i,c,u)=>n(this,void 0,void 0,(function*(){const{method:n,params:l}=i;if(r(n))return u();const d=t(n,a),h=yield e(d,o,n,l);return h===undefined?(c.error=(0,s.internalError)(`Request for method "${i.method}" returned undefined result.`,{request:i}),undefined):(c.result=h,undefined)}))))}}}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/permission-middleware.js"}],[1165,{"../utils":1168},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionsHandler=void 0;const i=e("../utils");r.getPermissionsHandler={methodNames:[i.MethodNames.getPermissions],implementation:function(e,t,r,i,{getPermissionsForOrigin:s}){return n(this,void 0,void 0,(function*(){return t.result=Object.values(s()||{}),i()}))},hookNames:{getPermissionsForOrigin:!0}}}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/rpc-methods/getPermissions.js"}],[1166,{"./getPermissions":1165,"./requestPermissions":1167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handlers=void 0;const n=e("./requestPermissions"),i=e("./getPermissions");r.handlers=[n.requestPermissionsHandler,i.getPermissionsHandler]}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/rpc-methods/index.js"}],[1167,{"../errors":1162,"../utils":1168,"@metamask/controller-utils":1170,"eth-rpc-errors":2e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.requestPermissionsHandler=void 0;const i=e("eth-rpc-errors"),s=e("@metamask/controller-utils"),o=e("../utils"),a=e("../errors");r.requestPermissionsHandler={methodNames:[o.MethodNames.requestPermissions],implementation:function(e,t,r,o,{requestPermissionsForOrigin:c}){return n(this,void 0,void 0,(function*(){const{id:r,params:n}=e;if("number"!=typeof r&&"string"!=typeof r||"string"==typeof r&&!r)return o(i.ethErrors.rpc.invalidRequest({message:"Invalid request: Must specify a valid id.",data:{request:e}}));if(!Array.isArray(n)||!(0,s.isPlainObject)(n[0]))return o((0,a.invalidParams)({data:{request:e}}));const[u]=n,[l]=yield c(u,String(r));return t.result=Object.values(l),o()}))},hookNames:{requestPermissionsForOrigin:!0}}}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/rpc-methods/requestPermissions.js"}],[1168,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MethodNames=void 0,function(e){e.requestPermissions="wallet_requestPermissions",e.getPermissions="wallet_getPermissions"}(r.MethodNames||(r.MethodNames={}))}}},{package:"@metamask/permission-controller",file:"node_modules/@metamask/permission-controller/dist/utils.js"}],[1169,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.OPENSEA_TEST_API_URL=r.OPENSEA_API_URL=r.OPENSEA_PROXY_URL=r.TESTNET_NETWORK_TYPE_TO_TICKER_SYMBOL=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=r.MAINNET=void 0,r.MAINNET="mainnet",r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="1337",r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH"},r.TESTNET_NETWORK_TYPE_TO_TICKER_SYMBOL={goerli:"GoerliETH",sepolia:"SepoliaETH",mainnet:"",rpc:"",localhost:""},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v1",r.OPENSEA_API_URL="https://api.opensea.io/api/v1",r.OPENSEA_TEST_API_URL="https://testnets-api.opensea.io/api/v1"}}},{package:"@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/permission-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[117,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[1170,{"./constants":1169,"./types":1171,"./util":1172,"isomorphic-fetch":2518},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),e("isomorphic-fetch"),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r)}}},{package:"@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/permission-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1171,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksChainId=void 0,function(e){e.mainnet="1",e.goerli="5",e.sepolia="11155111",e.localhost="",e.rpc=""}(r.NetworksChainId||(r.NetworksChainId={}))}}},{package:"@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/permission-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1172,{buffer:1789,"eth-ens-namehash":1969,"ethereumjs-util":2044,"ethjs-unit":2082,"fast-deep-equal":2291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.hasProperty=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=void 0;const s=e("ethereumjs-util"),o=e("ethjs-unit"),a=i(e("eth-ens-namehash")),c=i(e("fast-deep-equal")),u=new Error("timeout");function l(e){return new s.BN((0,s.stripHexPrefix)(e),16)}function d(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${e}'`);return r}))}function h(e,t){return n(this,void 0,void 0,(function*(){const r=yield d(e,t);return yield r.json()}))}r.BNToHex=function(e){return(0,s.addHexPrefix)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new s.BN(t),i=new s.BN(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new s.BN(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,o.toWei)(r,"gwei");if(n.length<=9)return(0,o.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let a=(0,o.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(a=a.add(new s.BN(1))),a},r.weiHexToGweiDec=function(e){const t=new s.BN((0,s.stripHexPrefix)(e),16);return(0,o.fromWei)(t,"gwei").toString(10)},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=l,r.hexToText=function(e){try{const r=(0,s.stripHexPrefix)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return s.BN.isBN(e)?e:new s.BN(l(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,s.isHexString)(e)?e:`0x${s.BN.isBN(e)?e.toString(16):new s.BN(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,s.addHexPrefix)(e);return(0,s.isHexString)(t)?(0,s.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,s.addHexPrefix)(e):e;return!!(0,s.isHexString)(r)&&(0,s.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=d,r.handleFetch=h,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield h(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))]):yield h(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===u)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([d(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=a.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,s.isHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};r.hasProperty=(e,t)=>Reflect.hasOwnProperty.call(e,t),r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,c.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/permission-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[1173,{"./url-alphabet/index.cjs":1174},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),i=e=>crypto.getRandomValues(new Uint8Array(e)),s=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(s=t)=>{let o="";for(;;){let t=r(i),a=i;for(;a--;)if(o+=e[t[a]&n]||"",o.length===s)return o}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>s(e,t,i),customRandom:s,urlAlphabet:n,random:i}}}},{package:"@metamask/permission-controller>nanoid",file:"node_modules/@metamask/permission-controller/node_modules/nanoid/index.browser.cjs"}],[1174,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/permission-controller>nanoid",file:"node_modules/@metamask/permission-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[1175,{"./utils":1177,"@metamask/base-controller":993,"@metamask/controller-utils":1179,"eth-phishing-detect/src/config.json":1994,"eth-phishing-detect/src/detector":1995,"punycode/":2848},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingController=r.METAMASK_HOTLIST_DIFF_URL=r.METAMASK_STALELIST_URL=r.STALELIST_REFRESH_INTERVAL=r.HOTLIST_REFRESH_INTERVAL=r.METAMASK_HOTLIST_DIFF_FILE=r.METAMASK_STALELIST_FILE=r.PHISHING_CONFIG_BASE_URL=void 0;const h=e("punycode/"),f=d(e("eth-phishing-detect/src/config.json")),p=d(e("eth-phishing-detect/src/detector")),m=e("@metamask/base-controller"),g=e("@metamask/controller-utils"),y=e("./utils");r.PHISHING_CONFIG_BASE_URL="https://static.metafi.codefi.network/api/v1/lists",r.METAMASK_STALELIST_FILE="/stalelist.json",r.METAMASK_HOTLIST_DIFF_FILE="/hotlist.json",r.HOTLIST_REFRESH_INTERVAL=1800,r.STALELIST_REFRESH_INTERVAL=345600,r.METAMASK_STALELIST_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_STALELIST_FILE}`,r.METAMASK_HOTLIST_DIFF_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_HOTLIST_DIFF_FILE}`;class w extends m.BaseController{constructor(e,t){super(e,t),n.add(this),i.set(this,void 0),s.set(this,void 0),this.name="PhishingController",this.defaultConfig={stalelistRefreshInterval:r.STALELIST_REFRESH_INTERVAL,hotlistRefreshInterval:r.HOTLIST_REFRESH_INTERVAL},this.defaultState={listState:{allowlist:f.default.whitelist,blocklist:f.default.blacklist,fuzzylist:f.default.fuzzylist,tolerance:f.default.tolerance,version:f.default.version,name:"MetaMask",lastUpdated:0},whitelist:[],hotlistLastFetched:0,stalelistLastFetched:0},this.initialize(),this.updatePhishingDetector()}updatePhishingDetector(){this.detector=new p.default([{allowlist:this.state.listState.allowlist,blocklist:this.state.listState.blocklist,fuzzylist:this.state.listState.fuzzylist,tolerance:this.state.listState.tolerance,name:"MetaMask",version:this.state.listState.version}])}setStalelistRefreshInterval(e){this.configure({stalelistRefreshInterval:e},!1,!1)}setHotlistRefreshInterval(e){this.configure({hotlistRefreshInterval:e},!1,!1)}isStalelistOutOfDate(){return(0,y.fetchTimeNow)()-this.state.stalelistLastFetched>=this.config.stalelistRefreshInterval}isHotlistOutOfDate(){return(0,y.fetchTimeNow)()-this.state.hotlistLastFetched>=this.config.hotlistRefreshInterval}maybeUpdateState(){return c(this,void 0,void 0,(function*(){if(this.isStalelistOutOfDate())return void(yield this.updateStalelist());this.isHotlistOutOfDate()&&(yield this.updateHotlist())}))}test(e){const t=(0,h.toASCII)(e);return-1!==this.state.whitelist.indexOf(t)?{result:!1,type:"all"}:this.detector.check(t)}bypass(e){const t=(0,h.toASCII)(e),{whitelist:r}=this.state;-1===r.indexOf(t)&&this.update({whitelist:[...r,t]})}updateHotlist(){return c(this,void 0,void 0,(function*(){if(u(this,i,"f"))yield u(this,i,"f");else try{l(this,i,u(this,n,"m",a).call(this),"f"),yield u(this,i,"f")}finally{l(this,i,undefined,"f")}}))}updateStalelist(){return c(this,void 0,void 0,(function*(){if(u(this,s,"f"))yield u(this,s,"f");else try{l(this,s,u(this,n,"m",o).call(this),"f"),yield u(this,s,"f")}finally{l(this,s,undefined,"f")}}))}queryConfig(e){return c(this,void 0,void 0,(function*(){const t=yield(0,g.safelyExecute)((()=>fetch(e,{cache:"no-cache"})),!0);return 200===(null==t?void 0:t.status)?yield t.json():null}))}}r.PhishingController=w,i=new WeakMap,s=new WeakMap,n=new WeakSet,o=function(){return c(this,void 0,void 0,(function*(){if(this.disabled)return;let e,t;try{[e,t]=yield Promise.all([this.queryConfig(r.METAMASK_STALELIST_URL),this.queryConfig(r.METAMASK_HOTLIST_DIFF_URL)])}finally{const e=(0,y.fetchTimeNow)();this.update({stalelistLastFetched:e,hotlistLastFetched:e})}if(!e||!t)return;const n=(0,y.applyDiffs)(e,t);this.update({listState:n}),this.updatePhishingDetector()}))},a=function(){return c(this,void 0,void 0,(function*(){if(this.disabled)return;let e;try{e=yield this.queryConfig(r.METAMASK_HOTLIST_DIFF_URL)}finally{this.update({hotlistLastFetched:(0,y.fetchTimeNow)()})}if(!e)return;const t=(0,y.applyDiffs)(this.state.listState,e);this.update({listState:t}),this.updatePhishingDetector()}))},r.default=w}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingController.js"}],[1176,{"./PhishingController":1175,"isomorphic-fetch":2518},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),e("isomorphic-fetch"),i(e("./PhishingController"),r)}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/index.js"}],[1177,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.applyDiffs=r.fetchTimeNow=void 0;r.fetchTimeNow=()=>Math.round(Date.now()/1e3);r.applyDiffs=(e,t)=>{const n=t.filter((({timestamp:t})=>t>e.lastUpdated)),i={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist)};for(const{isRemoval:e,targetList:t,url:r}of n)e?i[t].delete(r):i[t].add(r);const s=(0,r.fetchTimeNow)();return{allowlist:Array.from(i.allowlist),blocklist:Array.from(i.blocklist),fuzzylist:Array.from(i.fuzzylist),version:e.version,name:"MetaMask",tolerance:e.tolerance,lastUpdated:s}}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/utils.js"}],[1178,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.OPENSEA_TEST_API_URL=r.OPENSEA_API_URL=r.OPENSEA_PROXY_URL=r.TESTNET_NETWORK_TYPE_TO_TICKER_SYMBOL=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=r.MAINNET=void 0,r.MAINNET="mainnet",r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="1337",r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH"},r.TESTNET_NETWORK_TYPE_TO_TICKER_SYMBOL={goerli:"GoerliETH",sepolia:"SepoliaETH",mainnet:"",rpc:"",localhost:""},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v1",r.OPENSEA_API_URL="https://api.opensea.io/api/v1",r.OPENSEA_TEST_API_URL="https://testnets-api.opensea.io/api/v1"}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1179,{"./constants":1178,"./types":1180,"./util":1181,"isomorphic-fetch":2518},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),e("isomorphic-fetch"),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r)}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[118,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[1180,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksChainId=void 0,function(e){e.mainnet="1",e.goerli="5",e.sepolia="11155111",e.localhost="",e.rpc=""}(r.NetworksChainId||(r.NetworksChainId={}))}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1181,{buffer:1789,"eth-ens-namehash":1969,"ethereumjs-util":2044,"ethjs-unit":2082,"fast-deep-equal":2291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.hasProperty=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=void 0;const s=e("ethereumjs-util"),o=e("ethjs-unit"),a=i(e("eth-ens-namehash")),c=i(e("fast-deep-equal")),u=new Error("timeout");function l(e){return new s.BN((0,s.stripHexPrefix)(e),16)}function d(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${e}'`);return r}))}function h(e,t){return n(this,void 0,void 0,(function*(){const r=yield d(e,t);return yield r.json()}))}r.BNToHex=function(e){return(0,s.addHexPrefix)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new s.BN(t),i=new s.BN(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new s.BN(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,o.toWei)(r,"gwei");if(n.length<=9)return(0,o.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let a=(0,o.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(a=a.add(new s.BN(1))),a},r.weiHexToGweiDec=function(e){const t=new s.BN((0,s.stripHexPrefix)(e),16);return(0,o.fromWei)(t,"gwei").toString(10)},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=l,r.hexToText=function(e){try{const r=(0,s.stripHexPrefix)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return s.BN.isBN(e)?e:new s.BN(l(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,s.isHexString)(e)?e:`0x${s.BN.isBN(e)?e.toString(16):new s.BN(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,s.addHexPrefix)(e);return(0,s.isHexString)(t)?(0,s.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,s.addHexPrefix)(e):e;return!!(0,s.isHexString)(r)&&(0,s.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=d,r.handleFetch=h,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield h(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))]):yield h(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===u)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([d(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=a.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,s.isHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};r.hasProperty=(e,t)=>Reflect.hasOwnProperty.call(e,t),r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,c.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[1182,{"@metamask/key-tree":1141,"@metamask/utils":1202,"@noble/hashes/sha3":1233,superstruct:3087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.enumValue=r.deriveEntropy=r.isEqual=r.selectHooks=void 0;const n=e("@metamask/key-tree"),i=e("@metamask/utils"),s=e("@noble/hashes/sha3"),o=e("superstruct"),a=2147483648;r.selectHooks=function(e,t){return t?Object.keys(t).reduce(((t,r)=>{const n=r;return t[n]=e[n],t}),{}):undefined},r.isEqual=function(e,t){return e.length===t.length&&e.every(((e,r)=>e===t[r]))},r.deriveEntropy=async function({input:e,salt:t="",mnemonicPhrase:r,magic:o}){const c=(0,i.stringToBytes)(e),u=(0,i.stringToBytes)(t),l=function(e){const t=[],r=(0,i.createDataView)(e);for(let e=0;e<8;e++){const n=(r.getUint32(4*e)|a)>>>0;t.push(`bip32:${n-a}'`)}return t}((0,s.keccak_256)((0,i.concatBytes)([c,(0,s.keccak_256)(u)]))),{privateKey:d}=await n.SLIP10Node.fromDerivationPath({derivationPath:[r,`bip32:${o}`,...l],curve:"secp256k1"});return(0,i.assert)(d,"Failed to derive the entropy."),(0,i.add0x)(d)},r.enumValue=function(e){return(0,o.literal)(e)}}}},{package:"@metamask/rpc-methods",file:"node_modules/@metamask/rpc-methods/dist/utils.js"}],[1183,{events:1790},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("events");function i(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout((()=>{throw e}))}}class s extends n.EventEmitter{emit(e,...t){let r="error"===e;const n=this._events;if(n!==undefined)r=r&&n.error===undefined;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const s=n[e];if(s===undefined)return!1;if("function"==typeof s)i(s,this,t);else{const e=s.length,r=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(s);for(let n=0;n<e;n+=1)i(r[n],this,t)}return!0}}r.default=s}}},{package:"json-rpc-engine>@metamask/safe-event-emitter",file:"node_modules/@metamask/safe-event-emitter/index.js"}],[1184,{"@noble/hashes/_assert":1225,"@noble/hashes/pbkdf2":1230,"@noble/hashes/sha256":1232,"@noble/hashes/sha512":1234,"@noble/hashes/utils":1235,"@scure/base":1241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mnemonicToSeedSync=r.mnemonicToSeed=r.validateMnemonic=r.entropyToMnemonic=r.mnemonicToEntropy=r.generateMnemonic=void 0;
/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */
const n=e("@noble/hashes/_assert"),i=e("@noble/hashes/pbkdf2"),s=e("@noble/hashes/sha256"),o=e("@noble/hashes/sha512"),a=e("@noble/hashes/utils"),c=e("@scure/base");function u(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function l(e){const t=u(e),r=t.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:r}}function d(e){n.default.bytes(e,16,20,24,28,32)}r.generateMnemonic=function(e,t=128){if(n.default.number(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return m((0,a.randomBytes)(t/8),e)};const h=e=>{const t=8-e.length/4;return new Uint8Array([(0,s.sha256)(e)[0]>>t<<t])};function f(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),c.utils.chain(c.utils.checksum(1,h),c.utils.radix2(11,!0),c.utils.alphabet(e))}function p(e,t){let r;if("string"==typeof e){const{words:n}=l(e);r=f(t).decode(n)}else r=f(t).decode(Array.from(new Uint16Array(e.buffer)).map((e=>t[e])));return d(r),r}function m(e,t){d(e);const r=f(t).encode(e).map((e=>t.indexOf(e)));return new Uint8Array(new Uint16Array(r).buffer)}r.mnemonicToEntropy=p,r.entropyToMnemonic=m,r.validateMnemonic=function(e,t){try{p(e,t)}catch(e){return!1}return!0};const g=e=>u(`mnemonic${e}`);function y(e,t){let r;return r="string"==typeof e?(new TextEncoder).encode(l(e).nfkd):(new TextEncoder).encode(Array.from(new Uint16Array(e.buffer)).map((e=>t[e])).join(" ")),r}r.mnemonicToSeed=function(e,t,r=""){const n=y(e,t);return(0,i.pbkdf2Async)(o.sha512,n,g(r),{c:2048,dkLen:64})},r.mnemonicToSeedSync=function(e,t,r=""){const n=y(e,t);return(0,i.pbkdf2)(o.sha512,n,g(r),{c:2048,dkLen:64})}}}},{package:"@metamask/scure-bip39",file:"node_modules/@metamask/scure-bip39/dist/index.js"}],[1185,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wordlist=void 0,r.wordlist="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n")}}},{package:"@metamask/scure-bip39",file:"node_modules/@metamask/scure-bip39/dist/wordlists/english.js"}],[1187,{"./constants":1188,"./types":1190,"./utils":1191,"@ethersproject/bignumber":362,"@ethersproject/bytes":365,"@ethersproject/providers":411,"@metamask/base-controller":993,"@metamask/controller-utils":998,"bignumber.js":1192,"lodash/cloneDeep":2710,"lodash/mapValues":2738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_INTERVAL=void 0;const i=e("@metamask/base-controller"),s=e("@metamask/controller-utils"),o=e("bignumber.js"),a=e("@ethersproject/bignumber"),c=e("@ethersproject/providers"),u=e("@ethersproject/bytes"),l=n(e("lodash/mapValues")),d=n(e("lodash/cloneDeep")),h=e("./types"),f=e("./utils"),p=e("./constants");r.DEFAULT_INTERVAL=5e3;class m extends i.BaseController{constructor({onNetworkStateChange:e,getNonceLock:t,getNetwork:n,provider:i,confirmExternalTransaction:s,trackMetaMetricsEvent:o},a,u){super(a,u),this.defaultConfig={interval:r.DEFAULT_INTERVAL,chainId:p.CHAIN_IDS.ETHEREUM,clientId:"default",supportedChainIds:[p.CHAIN_IDS.ETHEREUM,p.CHAIN_IDS.RINKEBY]},this.defaultState={smartTransactionsState:{smartTransactions:{},userOptIn:undefined,fees:{approvalTxFees:undefined,tradeTxFees:undefined},liveness:!0}},this.getNonceLock=t,this.getNetwork=n,this.ethersProvider=new c.Web3Provider(i),this.confirmExternalTransaction=s,this.trackMetaMetricsEvent=o,this.initialize(),this.initializeSmartTransactionsForChainId(),e((({providerConfig:e})=>{const{chainId:t}=e;this.configure({chainId:t}),this.initializeSmartTransactionsForChainId(),this.checkPoll(this.state),this.ethersProvider=new c.Web3Provider(i)})),this.subscribe((e=>this.checkPoll(e)))}async fetch(e,t){const{clientId:r}=this.config,n=Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json"},r&&{"X-Client-Id":r})});return f.handleFetch(e,n)}checkPoll(e){const{smartTransactions:t}=e.smartTransactionsState,r=t[this.config.chainId],n=null==r?void 0:r.filter(f.isSmartTransactionPending);!this.timeoutHandle&&(null==n?void 0:n.length)>0?this.poll():this.timeoutHandle&&0===(null==n?void 0:n.length)&&this.stop()}initializeSmartTransactionsForChainId(){var e;if(this.config.supportedChainIds.includes(this.config.chainId)){const{smartTransactionsState:t}=this.state;this.update({smartTransactionsState:Object.assign(Object.assign({},t),{smartTransactions:Object.assign(Object.assign({},t.smartTransactions),{[this.config.chainId]:null!==(e=t.smartTransactions[this.config.chainId])&&void 0!==e?e:[]})})})}}async poll(e){const{chainId:t,supportedChainIds:r}=this.config;e&&this.configure({interval:e},!1,!1),this.timeoutHandle&&clearInterval(this.timeoutHandle),r.includes(t)&&(await s.safelyExecute((()=>this.updateSmartTransactions())),this.timeoutHandle=setInterval((()=>{s.safelyExecute((()=>this.updateSmartTransactions()))}),this.config.interval))}async stop(){this.timeoutHandle&&clearInterval(this.timeoutHandle),this.timeoutHandle=undefined}setOptInState(e){this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{userOptIn:e})})}trackStxStatusChange(e,t){if(!t)return;let r=d.default(e);if(r=Object.assign(Object.assign({},d.default(t)),r),!r.swapMetaData||r.status===t.status&&t.swapMetaData)return;const n={stx_status:r.status,token_from_symbol:r.sourceTokenSymbol,token_to_symbol:r.destinationTokenSymbol,processing_time:f.getStxProcessingTime(r.time),stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:!0};this.trackMetaMetricsEvent({event:"STX Status Updated",category:"swaps",sensitiveProperties:n})}isNewSmartTransaction(e){const{chainId:t}=this.config,{smartTransactionsState:r}=this.state,{smartTransactions:n}=r,i=n[t],s=null==i?void 0:i.findIndex((t=>t.uuid===e));return-1===s||s===undefined}updateSmartTransaction(e){const{chainId:t}=this.config,{smartTransactionsState:r}=this.state,{smartTransactions:n}=r,i=n[t],s=null==i?void 0:i.findIndex((t=>t.uuid===e.uuid)),o=this.isNewSmartTransaction(e.uuid);if(this.trackStxStatusChange(e,o?undefined:i[s]),o){const n=i.findIndex((t=>{var r,n,i;return(null===(r=t.txParams)||void 0===r?void 0:r.nonce)===(null===(n=e.txParams)||void 0===n?void 0:n.nonce)&&(null===(i=t.status)||void 0===i?void 0:i.startsWith("cancelled"))})),s=[d.default(e)],o=Object.assign(Object.assign({},e),{history:s}),a=n>-1?i.slice(0,n).concat(i.slice(n+1)).concat(o):i.concat(o);this.update({smartTransactionsState:Object.assign(Object.assign({},r),{smartTransactions:Object.assign(Object.assign({},r.smartTransactions),{[t]:a})})})}else{if((e.status===h.SmartTransactionStatuses.SUCCESS||e.status===h.SmartTransactionStatuses.REVERTED)&&!e.confirmed){const t=i[s],r=Object.assign(Object.assign({},t),e);this.confirmSmartTransaction(r)}this.update({smartTransactionsState:Object.assign(Object.assign({},r),{smartTransactions:Object.assign(Object.assign({},r.smartTransactions),{[t]:r.smartTransactions[t].map(((t,r)=>r===s?Object.assign(Object.assign({},t),e):t))})})})}}async updateSmartTransactions(){const{smartTransactions:e}=this.state.smartTransactionsState,{chainId:t}=this.config,r=(null==e?void 0:e[t]).filter(f.isSmartTransactionPending).map((e=>e.uuid));r.length>0&&this.fetchSmartTransactionsStatus(r)}async confirmSmartTransaction(e){var t,r,n;const i=null===(t=e.statusMetadata)||void 0===t?void 0:t.minedHash;try{const t=await this.ethersProvider.getTransactionReceipt(i),s=await this.ethersProvider.getTransaction(i),o=null===(r=s.maxFeePerGas)||void 0===r?void 0:r.toHexString(),c=null===(n=s.maxPriorityFeePerGas)||void 0===n?void 0:n.toHexString();if(null==t?void 0:t.blockNumber){const r=await this.ethersProvider.getBlock(null==t?void 0:t.blockNumber,!1),n=null==r?void 0:r.baseFeePerGas.toHexString(),s=l.default(t,(e=>e instanceof a.BigNumber?e.toHexString():e)),u=Object.assign(Object.assign({},e.txParams),{maxFeePerGas:o,maxPriorityFeePerGas:c}),d=Object.assign(Object.assign({},e),{id:e.uuid,status:"confirmed",hash:i,txParams:u}),h=f.snapshotFromTxMeta(d),p=f.replayHistory(d.history),m=f.generateHistoryEntry(p,h,"txStateManager: setting status to confirmed"),g=m.length>0?Object.assign(Object.assign({},d),{history:d.history.concat(m)}):d;this.confirmExternalTransaction(g,s,n),this.trackMetaMetricsEvent({event:"STX Confirmed",category:"swaps"}),this.updateSmartTransaction(Object.assign(Object.assign({},e),{confirmed:!0}))}}catch(e){this.trackMetaMetricsEvent({event:"STX Confirmation Failed",category:"swaps"}),console.error("confirm error",e)}}async fetchSmartTransactionsStatus(e){const{chainId:t}=this.config,r=new URLSearchParams({uuids:e.join(",")}),n=`${f.getAPIRequestURL(h.APIType.BATCH_STATUS,t)}?${r.toString()}`,i=await this.fetch(n);return Object.entries(i).forEach((([e,t])=>{this.updateSmartTransaction({statusMetadata:t,status:f.calculateStatus(t),cancellable:f.isSmartTransactionCancellable(t),uuid:e})})),i}async addNonceToTransaction(e){const t=await this.getNonceLock(e.from),r=t.nextNonce;return t.releaseLock(),Object.assign(Object.assign({},e),{nonce:`0x${r.toString(16)}`})}clearFees(){const e={approvalTxFees:undefined,tradeTxFees:undefined};return this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{fees:e})}),e}async getFees(e,t){const{chainId:r}=this.config,n=[];let i;if(t){const r=await this.addNonceToTransaction(t);n.push(r),i=Object.assign(Object.assign({},e),{nonce:f.incrementNonceInHex(r.nonce)})}else i=await this.addNonceToTransaction(e);n.push(i);const s=await this.fetch(f.getAPIRequestURL(h.APIType.GET_FEES,r),{method:"POST",body:JSON.stringify({txs:n})});let o,a;return t?(o=null==s?void 0:s.txs[0],a=null==s?void 0:s.txs[1]):a=null==s?void 0:s.txs[0],this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{fees:{approvalTxFees:o,tradeTxFees:a}})}),{approvalTxFees:o,tradeTxFees:a}}async submitSignedTransactions({txParams:e,signedTransactions:t,signedCanceledTransactions:r}){const{chainId:n}=this.config,i=await this.fetch(f.getAPIRequestURL(h.APIType.SUBMIT_TRANSACTIONS,n),{method:"POST",body:JSON.stringify({rawTxs:t,rawCancelTxs:r})}),s=Date.now(),a=this.getNetwork();let c;try{const t=await this.ethersProvider.getBalance(null==e?void 0:e.from);c=new o.BigNumber(t.toHexString()).toString(16)}catch(e){console.error("ethers error",e)}const l=await this.getNonceLock(null==e?void 0:e.from);try{const t=u.hexlify(l.nextNonce);e&&!(null==e?void 0:e.nonce)&&(e.nonce=t);const{nonceDetails:r}=l;this.updateSmartTransaction({chainId:n,nonceDetails:r,metamaskNetworkId:a,preTxBalance:c,status:h.SmartTransactionStatuses.PENDING,time:s,txParams:e,uuid:i.uuid,cancellable:!0})}finally{l.releaseLock()}return i}async cancelSmartTransaction(e){const{chainId:t}=this.config;await this.fetch(f.getAPIRequestURL(h.APIType.CANCEL,t),{method:"POST",body:JSON.stringify({uuid:e})})}async fetchLiveness(){const{chainId:e}=this.config;let t=!1;try{const r=await this.fetch(f.getAPIRequestURL(h.APIType.LIVENESS,e));t=Boolean(r.lastBlock)}catch(e){console.log('"fetchLiveness" API call failed')}return this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{liveness:t})}),t}async setStatusRefreshInterval(e){e!==this.config.interval&&this.configure({interval:e},!1,!1)}getTransactions({addressFrom:e,status:t}){const{smartTransactions:r}=this.state.smartTransactionsState,{chainId:n}=this.config,i=null==r?void 0:r[n];return i&&0!==i.length?i.filter((r=>{var n;return r.status===t&&(null===(n=r.txParams)||void 0===n?void 0:n.from)===e})):[]}}r.default=m}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/SmartTransactionsController.js"}],[1188,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_IDS=r.API_BASE_URL=void 0,r.API_BASE_URL="https://transaction.metaswap.codefi.network",r.CHAIN_IDS={ETHEREUM:"0x1",RINKEBY:"0x4",BSC:"0x38"}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/constants.js"}],[1189,{"./SmartTransactionsController":1187,"isomorphic-fetch":2518},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),e("isomorphic-fetch");const i=n(e("./SmartTransactionsController"));r.default=i.default}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/index.js"}],[119,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[1190,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.cancellationReasonToStatusMap=r.SmartTransactionStatuses=r.SmartTransactionCancellationReason=r.SmartTransactionMinedTx=r.APIType=void 0,function(e){e[e.GET_FEES=0]="GET_FEES",e[e.ESTIMATE_GAS=1]="ESTIMATE_GAS",e[e.SUBMIT_TRANSACTIONS=2]="SUBMIT_TRANSACTIONS",e[e.CANCEL=3]="CANCEL",e[e.BATCH_STATUS=4]="BATCH_STATUS",e[e.LIVENESS=5]="LIVENESS"}(r.APIType||(r.APIType={})),function(e){e.NOT_MINED="not_mined",e.SUCCESS="success",e.CANCELLED="cancelled",e.REVERTED="reverted",e.UNKNOWN="unknown"}(r.SmartTransactionMinedTx||(r.SmartTransactionMinedTx={})),function(e){e.WOULD_REVERT="would_revert",e.TOO_CHEAP="too_cheap",e.DEADLINE_MISSED="deadline_missed",e.INVALID_NONCE="invalid_nonce",e.USER_CANCELLED="user_cancelled",e.NOT_CANCELLED="not_cancelled",e.PREVIOUS_TX_CANCELLED="previous_tx_cancelled"}(n=r.SmartTransactionCancellationReason||(r.SmartTransactionCancellationReason={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.REVERTED="reverted",e.UNKNOWN="unknown",e.CANCELLED="cancelled",e.CANCELLED_WOULD_REVERT="cancelled_would_revert",e.CANCELLED_TOO_CHEAP="cancelled_too_cheap",e.CANCELLED_DEADLINE_MISSED="cancelled_deadline_missed",e.CANCELLED_INVALID_NONCE="cancelled_invalid_nonce",e.CANCELLED_USER_CANCELLED="cancelled_user_cancelled",e.CANCELLED_PREVIOUS_TX_CANCELLED="cancelled_previous_tx_cancelled",e.RESOLVED="resolved"}(i=r.SmartTransactionStatuses||(r.SmartTransactionStatuses={})),r.cancellationReasonToStatusMap={[n.WOULD_REVERT]:i.CANCELLED_WOULD_REVERT,[n.TOO_CHEAP]:i.CANCELLED_TOO_CHEAP,[n.DEADLINE_MISSED]:i.CANCELLED_DEADLINE_MISSED,[n.INVALID_NONCE]:i.CANCELLED_INVALID_NONCE,[n.USER_CANCELLED]:i.CANCELLED_USER_CANCELLED,[n.PREVIOUS_TX_CANCELLED]:i.CANCELLED_PREVIOUS_TX_CANCELLED}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/types.js"}],[1191,{"./constants":1188,"./types":1190,"@ethersproject/bytes":365,"bignumber.js":1192,"fast-json-patch":2295,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.incrementNonceInHex=r.isSmartTransactionCancellable=r.handleFetch=r.mapKeysToCamel=r.getStxProcessingTime=r.snapshotFromTxMeta=r.replayHistory=r.generateHistoryEntry=r.calculateStatus=r.getAPIRequestURL=r.isSmartTransactionStatusResolved=r.isSmartTransactionPending=void 0;const i=n(e("fast-json-patch")),s=n(e("lodash")),o=e("bignumber.js"),a=e("@ethersproject/bytes"),c=e("./types"),u=e("./constants");r.isSmartTransactionPending=function(e){return e.status===c.SmartTransactionStatuses.PENDING};r.isSmartTransactionStatusResolved=e=>"uuid_not_found"===e,r.getAPIRequestURL=function(e,t){const r=parseInt(t,16);switch(e){case c.APIType.GET_FEES:return`${u.API_BASE_URL}/networks/${r}/getFees`;case c.APIType.ESTIMATE_GAS:return`${u.API_BASE_URL}/networks/${r}/estimateGas`;case c.APIType.SUBMIT_TRANSACTIONS:return`${u.API_BASE_URL}/networks/${r}/submitTransactions`;case c.APIType.CANCEL:return`${u.API_BASE_URL}/networks/${r}/cancel`;case c.APIType.BATCH_STATUS:return`${u.API_BASE_URL}/networks/${r}/batchStatus`;case c.APIType.LIVENESS:return`${u.API_BASE_URL}/networks/${r}/health`;default:throw new Error("Invalid APIType")}};r.calculateStatus=e=>{if(r.isSmartTransactionStatusResolved(e))return c.SmartTransactionStatuses.RESOLVED;const t=[c.SmartTransactionCancellationReason.WOULD_REVERT,c.SmartTransactionCancellationReason.TOO_CHEAP,c.SmartTransactionCancellationReason.DEADLINE_MISSED,c.SmartTransactionCancellationReason.INVALID_NONCE,c.SmartTransactionCancellationReason.USER_CANCELLED,c.SmartTransactionCancellationReason.PREVIOUS_TX_CANCELLED];if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.NOT_MINED){if(e.cancellationReason===c.SmartTransactionCancellationReason.NOT_CANCELLED)return c.SmartTransactionStatuses.PENDING;const r=t.findIndex((t=>t===e.cancellationReason))>-1;if(e.cancellationReason&&r)return e.isSettled?c.cancellationReasonToStatusMap[e.cancellationReason]:c.SmartTransactionStatuses.PENDING}else{if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.SUCCESS)return c.SmartTransactionStatuses.SUCCESS;if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.CANCELLED)return c.SmartTransactionStatuses.CANCELLED;if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.REVERTED)return c.SmartTransactionStatuses.REVERTED;if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.UNKNOWN)return c.SmartTransactionStatuses.UNKNOWN}return c.SmartTransactionStatuses.UNKNOWN},r.generateHistoryEntry=function(e,t,r){const n=i.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n},r.replayHistory=function(e){return s.default.cloneDeep(e).reduce(((e,t)=>i.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t=Object.assign({},e);return delete t.history,s.default.cloneDeep(t)};r.getStxProcessingTime=e=>e?Math.round((Date.now()-e)/1e3):undefined;r.mapKeysToCamel=e=>{if(!s.default.isObject(e))return e;const t=s.default.mapValues(e,(e=>s.default.isArray(e)?e.map(r.mapKeysToCamel):s.default.isObject(e)?r.mapKeysToCamel(e):e));return s.default.mapKeys(t,((e,t)=>s.default.camelCase(t)))},r.handleFetch=async function(e,t){const n=await fetch(e,t),i=await n.json();if(!n.ok)throw console.log("response",n),new Error(`Fetch error:${JSON.stringify(Object.assign({status:n.status},r.mapKeysToCamel(i)))}`);return i};r.isSmartTransactionCancellable=e=>e.minedTx===c.SmartTransactionMinedTx.NOT_MINED&&(!e.cancellationReason||e.cancellationReason===c.SmartTransactionCancellationReason.NOT_CANCELLED);r.incrementNonceInHex=e=>{const t=new o.BigNumber(e,16).toString(10);return a.hexlify(Number(t)+1)}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/utils.js"}],[1192,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,f=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=u-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function g(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function y(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(o+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function w(e){var t=e.c.length-1;return p(e.e/u)==t&&e.c[t]%2!=0}function b(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function v(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,_,E,k,T,P,A,I,S,x,C=V.prototype={constructor:V,toString:null,valueOf:null},j=new V(1),B=20,N=4,O=-7,L=21,M=-1e7,R=1e7,K=!1,D=1,U=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function V(e,t){var r,i,o,c,d,h,f,p,m=this;if(!(m instanceof V))return new V(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>R?m.c=m.e=null:e.e<M?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>R?m.c=m.e=null:(m.e=c,m.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return E(m,p,h);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(d=p.search(/e/i))>0?(c<0&&(c=d),c+=+p.slice(d+1),p=p.substring(0,d)):c<0&&(c=p.length)}else{if(y(t,2,F.length,"Base"),10==t&&$)return W(m=new V(e),B+m.e+1,N);if(p=String(e),h="number"==typeof e){if(0*e!=0)return E(m,p,h,t);if(m.s=1/e<0?(p=p.slice(1),-1):1,V.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=F.slice(0,t),c=d=0,f=p.length;d<f;d++)if(r.indexOf(i=p.charAt(d))<0){if("."==i){if(d>c){c=f;continue}}else if(!o&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){o=!0,d=-1,c=0;continue}return E(m,String(e),h,t)}h=!1,(c=(p=_(p,t,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(d=0;48===p.charCodeAt(d);d++);for(f=p.length;48===p.charCodeAt(--f););if(p=p.slice(d,++f)){if(f-=d,h&&V.DEBUG&&f>15&&(e>l||e!==s(e)))throw Error(a+m.s*e);if((c=c-d-1)>R)m.c=m.e=null;else if(c<M)m.c=[m.e=0];else{if(m.e=c,m.c=[],d=(c+1)%u,c<0&&(d+=u),d<f){for(d&&m.c.push(+p.slice(0,d)),f-=u;d<f;)m.c.push(+p.slice(d,d+=u));d=u-(p=p.slice(d)).length}else d-=f;for(;d--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function G(e,t,r,n){var i,s,o,a,c;if(null==r?r=N:y(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=m(e.c),c=1==n||2==n&&(o<=O||o>=L)?b(c,o):v(c,o,"0");else if(s=(e=W(new V(e),t,r)).e,a=(c=m(e.c)).length,1==n||2==n&&(t<=s||s<=O)){for(;a<t;c+="0",a++);c=b(c,s)}else if(t-=o,c=v(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function q(e,t){for(var r,n=1,i=new V(e[0]);n<e.length;n++){if(!(r=new V(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function z(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*u-1)>R?e.c=e.e=null:r<M?e.c=[e.e=0]:(e.e=r,e.c=t),e}function W(e,t,r,n){var o,a,l,h,f,p,m,g=e.c,y=d;if(g){e:{for(o=1,h=g[0];h>=10;h/=10,o++);if((a=t-o)<0)a+=u,l=t,m=(f=g[p=0])/y[o-l-1]%10|0;else if((p=i((a+1)/u))>=g.length){if(!n)break e;for(;g.length<=p;g.push(0));f=m=0,o=1,l=(a%=u)-u+1}else{for(f=h=g[p],o=1;h>=10;h/=10,o++);m=(l=(a%=u)-u+o)<0?0:f/y[o-l-1]%10|0}if(n=n||t<0||null!=g[p+1]||(l<0?f:f%y[o-l-1]),n=r<4?(m||n)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(a>0?l>0?f/y[o-l]:0:g[p-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=y[(u-t%u)%u],e.e=-t||0):g[0]=e.e=0,e;if(0==a?(g.length=p,h=1,p--):(g.length=p+1,h=y[u-a],g[p]=l>0?s(f/y[o-l]%y[l])*h:0),n)for(;;){if(0==p){for(a=1,l=g[0];l>=10;l/=10,a++);for(l=g[0]+=h,h=1;l>=10;l/=10,h++);a!=h&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[p]+=h,g[p]!=c)break;g[p--]=0,h=1}for(a=g.length;0===g[--a];g.pop());}e.e>R?e.c=e.e=null:e.e<M&&(e.c=[e.e=0])}return e}function Y(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=O||r>=L?b(t,r):v(t,r,"0"),e.s<0?"-"+t:t)}return V.clone=e,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(r=e[t],0,f,t),B=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(r=e[t],0,8,t),N=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(y(r[0],-f,0,t),y(r[1],0,f,t),O=r[0],L=r[1]):(y(r,-f,f,t),O=-(L=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)y(r[0],-f,-1,t),y(r[1],1,f,t),M=r[0],R=r[1];else{if(y(r,-f,f,t),!r)throw Error(o+t+" cannot be zero: "+r);M=-(R=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(o+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw K=!r,Error(o+"crypto unavailable");K=r}else K=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(r=e[t],0,9,t),D=r),e.hasOwnProperty(t="POW_PRECISION")&&(y(r=e[t],0,f,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(o+t+" not an object: "+r);H=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);$="0123456789"==r.slice(0,10),F=r}}return{DECIMAL_PLACES:B,ROUNDING_MODE:N,EXPONENTIAL_AT:[O,L],RANGE:[M,R],CRYPTO:K,MODULO_MODE:D,POW_PRECISION:U,FORMAT:H,ALPHABET:F}},V.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!V.DEBUG)return!0;var t,r,n=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&i>=-f&&i<=f&&i===s(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%u)<1&&(t+=u),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=c||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(o+"Invalid BigNumber: "+e)},V.maximum=V.max=function(){return q(arguments,C.lt)},V.minimum=V.min=function(){return q(arguments,C.gt)},V.random=(k=9007199254740992,T=Math.random()*k&2097151?function(){return s(Math.random()*k)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,c,l=0,h=[],p=new V(j);if(null==e?e=B:y(e,0,f),a=i(e/u),K)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(h.push(c%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw K=!1,Error(o+"crypto unavailable");for(t=crypto.randomBytes(a*=7);l<a;)(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(h.push(c%1e14),l+=7);l=a/7}if(!K)for(;l<a;)(c=T())<9e15&&(h[l++]=c%1e14);for(a=h[--l],e%=u,a&&e&&(c=d[u-e],h[l]=s(a/c)*c);0===h[l];h.pop(),l--);if(l<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=u);for(l=1,c=h[0];c>=10;c/=10,l++);l<u&&(n-=u-l)}return p.e=n,p.c=h,p}),V.sum=function(){for(var e=1,t=arguments,r=new V(t[0]);e<t.length;)r=r.plus(t[e++]);return r},_=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var c,u,l,d,h,f,p,g,y=n.indexOf("."),w=B,b=N;for(y>=0&&(d=U,U=0,n=n.replace(".",""),f=(g=new V(i)).pow(n.length-y),U=d,g.c=t(v(m(f.c),f.e,"0"),10,s,e),g.e=g.c.length),l=d=(p=t(n,i,s,a?(c=F,e):(c=e,F))).length;0==p[--d];p.pop());if(!p[0])return c.charAt(0);if(y<0?--l:(f.c=p,f.e=l,f.s=o,p=(f=r(f,g,w,b,s)).c,h=f.r,l=f.e),y=p[u=l+w+1],d=s/2,h=h||u<0||null!=p[u+1],h=b<4?(null!=y||h)&&(0==b||b==(f.s<0?3:2)):y>d||y==d&&(4==b||h||6==b&&1&p[u-1]||b==(f.s<0?8:7)),u<1||!p[0])n=h?v(c.charAt(1),-w,c.charAt(0)):c.charAt(0);else{if(p.length=u,h)for(--s;++p[--u]>s;)p[u]=0,u||(++l,p=[1].concat(p));for(d=p.length;!p[--d];);for(y=0,n="";y<=d;n+=c.charAt(p[y++]));n=v(n,l,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%h,l=t/h|0;for(e=e.slice();c--;)a=((i=u*(s=e[c]%h)+(n=l*s+(o=e[c]/h|0)*u)%h*h+a)/r|0)+(n/h|0)+l*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,a,l){var d,h,f,m,g,y,w,b,v,_,E,k,T,P,A,I,S,x=n.s==i.s?1:-1,C=n.c,j=i.c;if(!(C&&C[0]&&j&&j[0]))return new V(n.s&&i.s&&(C?!j||C[0]!=j[0]:j)?C&&0==C[0]||!j?0*x:x/0:NaN);for(v=(b=new V(x)).c=[],x=o+(h=n.e-i.e)+1,l||(l=c,h=p(n.e/u)-p(i.e/u),x=x/u|0),f=0;j[f]==(C[f]||0);f++);if(j[f]>(C[f]||0)&&h--,x<0)v.push(1),m=!0;else{for(P=C.length,I=j.length,f=0,x+=2,(g=s(l/(j[0]+1)))>1&&(j=e(j,g,l),C=e(C,g,l),I=j.length,P=C.length),T=I,E=(_=C.slice(0,I)).length;E<I;_[E++]=0);S=j.slice(),S=[0].concat(S),A=j[0],j[1]>=l/2&&A++;do{if(g=0,(d=t(j,_,I,E))<0){if(k=_[0],I!=E&&(k=k*l+(_[1]||0)),(g=s(k/A))>1)for(g>=l&&(g=l-1),w=(y=e(j,g,l)).length,E=_.length;1==t(y,_,w,E);)g--,r(y,I<w?S:j,w,l),w=y.length,d=1;else 0==g&&(d=g=1),w=(y=j.slice()).length;if(w<E&&(y=[0].concat(y)),r(_,y,E,l),E=_.length,-1==d)for(;t(j,_,I,E)<1;)g++,r(_,I<E?S:j,E,l),E=_.length}else 0===d&&(g++,_=[0]);v[f++]=g,_[0]?_[E++]=C[T]||0:(_=[C[T]],E=1)}while((T++<P||null!=_[0])&&x--);m=null!=_[0],v[0]||v.splice(0,1)}if(l==c){for(f=1,x=v[0];x>=10;x/=10,f++);W(b,o+(b.e=f+h*u-1)+1,a,m)}else b.e=h,b.r=+m;return b}}(),P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,I=/^\.([^.]+)$/,S=/^-?(Infinity|NaN)$/,x=/^\s*\+(?=[\w.])|^\s+|\s+$/g,E=function(e,t,r,n){var i,s=r?t:t.replace(x,"");if(S.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(P,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(A,"$1").replace(I,"0.$1")),t!=s))return new V(s,i);if(V.DEBUG)throw Error(o+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},C.absoluteValue=C.abs=function(){var e=new V(this);return e.s<0&&(e.s=1),e},C.comparedTo=function(e,t){return g(this,new V(e,t))},C.decimalPlaces=C.dp=function(e,t){var r,n,i,s=this;if(null!=e)return y(e,0,f),null==t?t=N:y(t,0,8),W(new V(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-p(this.e/u))*u,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},C.dividedBy=C.div=function(e,t){return r(this,new V(e,t),B,N)},C.dividedToIntegerBy=C.idiv=function(e,t){return r(this,new V(e,t),0,1)},C.exponentiatedBy=C.pow=function(e,t){var r,n,a,c,l,d,h,f,p=this;if((e=new V(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+Y(e));if(null!=t&&(t=new V(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return f=new V(Math.pow(+Y(p),l?2-w(e):+Y(e))),t?f.mod(t):f;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new V(NaN);(n=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&w(e)?-0:0,p.e>-1&&(c=1/c),new V(d?1/c:c);U&&(c=i(U/u+2))}for(l?(r=new V(.5),d&&(e.s=1),h=w(e)):h=(a=Math.abs(+Y(e)))%2,f=new V(j);;){if(h){if(!(f=f.times(p)).c)break;c?f.c.length>c&&(f.c.length=c):n&&(f=f.mod(t))}if(a){if(0===(a=s(a/2)))break;h=a%2}else if(W(e=e.times(r),e.e+1,1),e.e>14)h=w(e);else{if(0===(a=+Y(e)))break;h=a%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}return n?f:(d&&(f=j.div(f)),t?f.mod(t):c?W(f,U,N,undefined):f)},C.integerValue=function(e){var t=new V(this);return null==e?e=N:y(e,0,8),W(t,t.e+1,e)},C.isEqualTo=C.eq=function(e,t){return 0===g(this,new V(e,t))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(e,t){return g(this,new V(e,t))>0},C.isGreaterThanOrEqualTo=C.gte=function(e,t){return 1===(t=g(this,new V(e,t)))||0===t},C.isInteger=function(){return!!this.c&&p(this.e/u)>this.c.length-2},C.isLessThan=C.lt=function(e,t){return g(this,new V(e,t))<0},C.isLessThanOrEqualTo=C.lte=function(e,t){return-1===(t=g(this,new V(e,t)))||0===t},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new V(e,t)).s,!a||!t)return new V(NaN);if(a!=t)return e.s=-t,o.plus(e);var l=o.e/u,d=e.e/u,h=o.c,f=e.c;if(!l||!d){if(!h||!f)return h?(e.s=-t,e):new V(f?o:NaN);if(!h[0]||!f[0])return f[0]?(e.s=-t,e):new V(h[0]?o:3==N?-0:0)}if(l=p(l),d=p(d),h=h.slice(),a=l-d){for((s=a<0)?(a=-a,i=h):(d=l,i=f),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=h.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(h[t]!=f[t]){s=h[t]<f[t];break}if(s&&(i=h,h=f,f=i,e.s=-e.s),(t=(n=f.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=c-1;n>a;){if(h[--n]<f[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=c}h[n]-=f[n]}for(;0==h[0];h.splice(0,1),--d);return h[0]?z(e,h,d):(e.s=3==N?-1:1,e.c=[e.e=0],e)},C.modulo=C.mod=function(e,t){var n,i,s=this;return e=new V(e,t),!s.c||!e.s||e.c&&!e.c[0]?new V(NaN):!e.c||s.c&&!s.c[0]?new V(s):(9==D?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,D),(e=s.minus(n.times(e))).c[0]||1!=D||(e.s=s.s),e)},C.multipliedBy=C.times=function(e,t){var r,n,i,s,o,a,l,d,f,m,g,y,w,b,v,_=this,E=_.c,k=(e=new V(e,t)).c;if(!(E&&k&&E[0]&&k[0]))return!_.s||!e.s||E&&!E[0]&&!k||k&&!k[0]&&!E?e.c=e.e=e.s=null:(e.s*=_.s,E&&k?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=p(_.e/u)+p(e.e/u),e.s*=_.s,(l=E.length)<(m=k.length)&&(w=E,E=k,k=w,i=l,l=m,m=i),i=l+m,w=[];i--;w.push(0));for(b=c,v=h,i=m;--i>=0;){for(r=0,g=k[i]%v,y=k[i]/v|0,s=i+(o=l);s>i;)r=((d=g*(d=E[--o]%v)+(a=y*d+(f=E[o]/v|0)*g)%v*v+w[s]+r)/b|0)+(a/v|0)+y*f,w[s--]=d%b;w[s]=r}return r?++n:w.splice(0,1),z(e,w,n)},C.negated=function(){var e=new V(this);return e.s=-e.s||null,e},C.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new V(e,t)).s,!i||!t)return new V(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/u,o=e.e/u,a=n.c,l=e.c;if(!s||!o){if(!a||!l)return new V(i/0);if(!a[0]||!l[0])return l[0]?e:new V(a[0]?n:0*i)}if(s=p(s),o=p(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=l):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=l.length)<0&&(r=l,l=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+l[t]+i)/c|0,a[t]=c===a[t]?0:a[t]%c;return i&&(a=[i].concat(a),++o),z(e,a,o)},C.precision=C.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return y(e,1,f),null==t?t=N:y(t,0,8),W(new V(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*u+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},C.shiftedBy=function(e){return y(e,-9007199254740991,l),this.times("1e"+e)},C.squareRoot=C.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,c=o.s,u=o.e,l=B+4,d=new V("0.5");if(1!==c||!a||!a[0])return new V(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+Y(o)))||c==1/0?(((t=m(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=p((u+1)/2)-(u<0||u%2),n=new V(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new V(c+""),n.c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(s=n,n=d.times(s.plus(r(o,s,l,1))),m(s.c).slice(0,c)===(t=m(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(n,n.e+B+2,1),e=!n.times(n).eq(o));break}if(!i&&(W(s,s.e+B+2,0),s.times(s).eq(o))){n=s;break}l+=4,c+=4,i=1}return W(n,n.e+B+1,N,e)},C.toExponential=function(e,t){return null!=e&&(y(e,0,f),e++),G(this,e,t,1)},C.toFixed=function(e,t){return null!=e&&(y(e,0,f),e=e+this.e+1),G(this,e,t)},C.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=H;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,a=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",d=a[0],h=a[1],f=i.s<0,p=f?d.slice(1):d,m=p.length;if(u&&(s=c,c=u,u=s,m-=s),c>0&&m>0){for(s=m%c||c,d=p.substr(0,s);s<m;s+=c)d+=l+p.substr(s,c);u>0&&(d+=l+p.slice(s)),f&&(d="-"+d)}n=h?d+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):d}return(r.prefix||"")+n+(r.suffix||"")},C.toFraction=function(e){var t,n,i,s,a,c,l,h,f,p,g,y,w=this,b=w.c;if(null!=e&&(!(l=new V(e)).isInteger()&&(l.c||1!==l.s)||l.lt(j)))throw Error(o+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+Y(l));if(!b)return new V(w);for(t=new V(j),f=n=new V(j),i=h=new V(j),y=m(b),a=t.e=y.length-w.e-1,t.c[0]=d[(c=a%u)<0?u+c:c],e=!e||l.comparedTo(t)>0?a>0?t:f:l,c=R,R=1/0,l=new V(y),h.c[0]=0;p=r(l,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,f=h.plus(p.times(s=f)),h=s,t=l.minus(p.times(s=t)),l=s;return s=r(e.minus(n),i,0,1),h=h.plus(s.times(f)),n=n.plus(s.times(i)),h.s=f.s=w.s,g=r(f,i,a*=2,N).minus(w).abs().comparedTo(r(h,n,a,N).minus(w).abs())<1?[f,i]:[h,n],R=c,g},C.toNumber=function(){return+Y(this)},C.toPrecision=function(e,t){return null!=e&&y(e,1,f),G(this,e,t,2)},C.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=O||i>=L?b(m(r.c),i):v(m(r.c),i,"0"):10===e&&$?t=v(m((r=W(new V(r),B+i+1,N)).c),r.e,"0"):(y(e,2,F.length,"Base"),t=_(v(m(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},C.valueOf=C.toJSON=function(){return Y(this)},C._isBigNumber=!0,null!=t&&V.set(t),V}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"@metamask/smart-transactions-controller>bignumber.js",file:"node_modules/@metamask/smart-transactions-controller/node_modules/bignumber.js/bignumber.js"}],[12,{"../../../../shared/constants/network":3216,"../../../../shared/modules/hexstring-utils":3241,"./ens":11,"@metamask/obs-store":1156,loglevel:2749,"punycode/punycode":2848},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(e("punycode/punycode")),i=e("@metamask/obs-store"),s=u(e("loglevel")),o=e("../../../../shared/constants/network"),a=e("../../../../shared/modules/hexstring-utils"),c=u(e("./ens"));function u(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor({ens:e,provider:t,onNetworkDidChange:r,getCurrentChainId:n}={}){const s={ensResolutionsByAddress:{}};if(this._ens=e,!this._ens){const e=n(),r=o.CHAIN_ID_TO_NETWORK_ID_MAP[e];c.default.getNetworkEnsSupport(r)&&(this._ens=new c.default({network:r,provider:t}))}this.store=new i.ObservableStore(s),this.resetState=()=>{this.store.updateState(s)},r((()=>{this.store.putState(s);const e=n(),r=o.CHAIN_ID_TO_NETWORK_ID_MAP[e];c.default.getNetworkEnsSupport(r)?this._ens=new c.default({network:r,provider:t}):delete this._ens}))}reverseResolveAddress(e){return this._reverseResolveAddress((0,a.toChecksumHexAddress)(e))}async _reverseResolveAddress(e){if(!this._ens)return undefined;const t=this.store.getState();if(t.ensResolutionsByAddress[e])return t.ensResolutionsByAddress[e];let r,i;try{r=await this._ens.reverse(e)}catch(e){return s.default.debug(e),undefined}try{i=await this._ens.lookup(r)}catch(e){return s.default.debug(e),undefined}return"0x0000000000000000000000000000000000000000"===i||"0x"===i||(0,a.toChecksumHexAddress)(i)!==e?undefined:(this._updateResolutionsByAddress(e,n.default.toASCII(r)),r)}_updateResolutionsByAddress(e,t){const r=this.store.getState();this.store.putState({ensResolutionsByAddress:{...r.ensResolutionsByAddress,[e]:t}})}}}}},{package:"$root$",file:"app/scripts/controllers/ens/index.js"}],[120,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[121,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[1210,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=n}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,i=0;e[r]===a;)n++,r++;for(var s=(e.length-r)*c+1>>>0,u=new Uint8Array(s);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var d=0,h=s-1;(0!==l||d<i)&&-1!==h;h--,d++)l+=o*u[h]>>>0,u[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,r++}if(" "!==e[r]){for(var f=s-i;f!==s&&0===u[f];)f++;for(var p=new Uint8Array(n+(s-f)),m=n;f!==s;)p[m++]=u[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var c=(s-i)*u+1>>>0,l=new Uint8Array(c);i!==s;){for(var d=t[i],h=0,f=c-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*l[f]>>>0,l[f]=d%o>>>0,d=d/o>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var p=c-n;p!==c&&0===l[p];)p++;for(var m=a.repeat(r);p<c;++p)m+=e.charAt(l[p]);return m},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}}}},{package:"@ensdomains/content-hash>cids>multibase>@multiformats/base-x",file:"node_modules/@multiformats/base-x/src/index.js"}],[122,{"@metamask/controller-utils":998,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/controller-utils");var s={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach((e=>{r.add(e.chainId)}));for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,i.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[1224,{crypto:1788},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.curve25519=r.getSharedSecret=r.verify=r.sign=r.getPublicKey=r.Signature=r.Point=r.RistrettoPoint=r.ExtendedPoint=r.CURVE=void 0;const i=n(e("crypto")),s=BigInt(0),o=BigInt(1),a=BigInt(2),c=BigInt(255),u=a**BigInt(252)+BigInt("27742317777372353535851937790883648493"),l={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:a**c-BigInt(19),l:u,n:u,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")};r.CURVE=l;const d=a**BigInt(256),h=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),f=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),p=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),m=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),g=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class y{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.t=n}static fromAffine(e){if(!(e instanceof k))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(k.ZERO)?y.ZERO:new y(e.x,e.y,o,N(e.x*e.y))}static toAffineBatch(e){const t=function(e,t=l.P){const r=new Array(e.length),n=O(e.reduce(((e,n,i)=>n===s?e:(r[i]=e,N(e*n,t))),o),t);return e.reduceRight(((e,n,i)=>n===s?e:(r[i]=N(e*r[i],t),N(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){w(e);const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e,a=N(t*o),c=N(i*n),u=N(r*o),l=N(s*n);return a===c&&u===l}negate(){return new y(N(-this.x),this.y,this.z,N(-this.t))}double(){const{x:e,y:t,z:r}=this,{a:n}=l,i=N(e**a),s=N(t**a),o=N(a*N(r**a)),c=N(n*i),u=N(N((e+t)**a)-i-s),d=c+s,h=d-o,f=c-s,p=N(u*h),m=N(d*f),g=N(u*f),w=N(h*d);return new y(p,m,w,g)}add(e){w(e);const{x:t,y:r,z:n,t:i}=this,{x:o,y:c,z:u,t:l}=e,d=N((r-t)*(c+o)),h=N((r+t)*(c-o)),f=N(h-d);if(f===s)return this.double();const p=N(n*a*l),m=N(i*a*u),g=m+p,b=h+d,v=m-p,_=N(g*f),E=N(b*v),k=N(g*v),T=N(f*b);return new y(_,E,T,k)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,r=[];let n=this,i=n;for(let s=0;s<t;s++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(y.BASE)&&(t=k.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&E.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=y.normalizeZ(n),E.set(t,n)));let i=y.ZERO,s=y.ZERO;const a=1+256/r,c=2**(r-1),u=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let t=0;t<a;t++){const r=t*c;let a=Number(e&u);if(e>>=d,a>c&&(a-=l,e+=o),0===a){let e=n[r];t%2&&(e=e.negate()),s=s.add(e)}else{let e=n[r+Math.abs(a)-1];a<0&&(e=e.negate()),i=i.add(e)}}return y.normalizeZ([i,s])[0]}multiply(e,t){return this.wNAF(H(e,l.l),t)}multiplyUnsafe(e){let t=H(e,l.l,!1);const r=y.BASE,n=y.ZERO;if(t===s)return n;if(this.equals(n)||t===o)return this;if(this.equals(r))return this.wNAF(t);let i=n,a=this;for(;t>s;)t&o&&(i=i.add(a)),a=a.double(),t>>=o;return i}isSmallOrder(){return this.multiplyUnsafe(l.h).equals(y.ZERO)}isTorsionFree(){return this.multiplyUnsafe(l.l).equals(y.ZERO)}toAffine(e=O(this.z)){const{x:t,y:r,z:n}=this,i=N(t*e),s=N(r*e);if(N(n*e)!==o)throw new Error("invZ was invalid");return new k(i,s)}fromRistrettoBytes(){v()}toRistrettoBytes(){v()}fromRistrettoHash(){v()}}function w(e){if(!(e instanceof y))throw new TypeError("ExtendedPoint expected")}function b(e){if(!(e instanceof _))throw new TypeError("RistrettoPoint expected")}function v(){throw new Error("Legacy method: switch to RistrettoPoint")}r.ExtendedPoint=y,y.BASE=new y(l.Gx,l.Gy,o,N(l.Gx*l.Gy)),y.ZERO=new y(s,o,o,s);class _{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:t}=l,r=N(h*e*e),n=N((r+o)*m);let i=BigInt(-1);const s=N((i-t*r)*N(r+t));let{isValid:a,value:c}=R(n,s),u=N(c*e);C(u)||(u=N(-u)),a||(c=u),a||(i=r);const d=N(i*(r-o)*g-s),p=c*c,w=N((c+c)*s),b=N(d*f),v=N(o-p),_=N(o+p);return new y(N(w*_),N(v*b),N(b*_),N(w*v))}static hashToCurve(e){const t=B((e=U(e,64)).slice(0,32)),r=this.calcElligatorRistrettoMap(t),n=B(e.slice(32,64)),i=this.calcElligatorRistrettoMap(n);return new _(r.add(i))}static fromHex(e){e=U(e,32);const{a:t,d:r}=l,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=B(e);if(!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(x(i),e)||C(i))throw new Error(n);const a=N(i*i),c=N(o+t*a),u=N(o-t*a),d=N(c*c),h=N(u*u),f=N(t*r*d-h),{isValid:p,value:m}=K(N(f*h)),g=N(m*u),w=N(m*g*f);let b=N((i+i)*g);C(b)&&(b=N(-b));const v=N(c*w),E=N(b*v);if(!p||C(E)||v===s)throw new Error(n);return new _(new y(b,v,o,E))}toRawBytes(){let{x:e,y:t,z:r,t:n}=this.ep;const i=N(N(r+t)*N(r-t)),s=N(e*t),{value:o}=K(N(i*s**a)),c=N(o*i),u=N(o*s),l=N(c*u*n);let d;if(C(n*l)){let r=N(t*h),n=N(e*h);e=r,t=n,d=N(c*p)}else d=u;C(e*l)&&(t=N(-t));let f=N((r-t)*d);return C(f)&&(f=N(-f)),x(f)}toHex(){return A(this.toRawBytes())}toString(){return this.toHex()}equals(e){b(e);const t=this.ep,r=e.ep,n=N(t.x*r.y)===N(t.y*r.x),i=N(t.y*r.y)===N(t.x*r.x);return n||i}add(e){return b(e),new _(this.ep.add(e.ep))}subtract(e){return b(e),new _(this.ep.subtract(e.ep))}multiply(e){return new _(this.ep.multiply(e))}multiplyUnsafe(e){return new _(this.ep.multiplyUnsafe(e))}}r.RistrettoPoint=_,_.BASE=new _(y.BASE),_.ZERO=new _(y.ZERO);const E=new WeakMap;class k{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,E.delete(this)}static fromHex(e,t=!0){const{d:r,P:n}=l,i=(e=U(e,32)).slice();i[31]=-129&e[31];const s=j(i);if(t&&s>=n)throw new Error("Expected 0 < hex < P");if(!t&&s>=d)throw new Error("Expected 0 < hex < 2**256");const a=N(s*s),c=N(a-o),u=N(r*a+o);let{isValid:h,value:f}=R(c,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");const p=(f&o)===o;return 0!=(128&e[31])!==p&&(f=N(-f)),new k(f,s)}static async fromPrivateKey(e){return(await $(e)).point}toRawBytes(){const e=x(this.y);return e[31]|=this.x&o?128:0,e}toHex(){return A(this.toRawBytes())}toX25519(){const{y:e}=this;return x(N((o+e)*O(o-e)))}isTorsionFree(){return y.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new k(N(-this.x),this.y)}add(e){return y.fromAffine(this).add(y.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return y.fromAffine(this).multiply(e,this).toAffine()}}r.Point=k,k.BASE=new k(l.Gx,l.Gy),k.ZERO=new k(s,o);class T{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=U(e,64),r=k.fromHex(t.slice(0,32),!1),n=j(t.slice(32,64));return new T(r,n)}assertValidity(){const{r:e,s:t}=this;if(!(e instanceof k))throw new Error("Expected Point instance");return H(t,l.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(x(this.s),32),e}toHex(){return A(this.toRawBytes())}}r.Signature=T;const P=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function A(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=P[e[r]];return t}function I(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function S(e){return I(e.toString(16).padStart(64,"0"))}function x(e){return S(e).reverse()}function C(e){return(N(e)&o)===o}function j(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+A(Uint8Array.from(e).reverse()))}function B(e){return N(j(e)&a**c-o)}function N(e,t=l.P){const r=e%t;return r>=s?r:t+r}function O(e,t=l.P){if(e===s||t<=s)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=N(e,t),n=t,i=s,a=o,c=o,u=s;for(;r!==s;){const e=n/r,t=n%r,s=i-c*e,o=a-u*e;n=r,r=t,i=c,a=u,c=s,u=o}if(n!==o)throw new Error("invert: does not exist");return N(i,t)}function L(e,t){const{P:r}=l;let n=e;for(;t-- >s;)n*=n,n%=r;return n}function M(e){const{P:t}=l,r=BigInt(5),n=BigInt(10),i=BigInt(20),s=BigInt(40),c=BigInt(80),u=e*e%t*e%t,d=L(u,a)*u%t,h=L(d,o)*e%t,f=L(h,r)*h%t,p=L(f,n)*f%t,m=L(p,i)*p%t,g=L(m,s)*m%t,y=L(g,c)*g%t,w=L(y,c)*g%t,b=L(w,n)*f%t;return{pow_p_5_8:L(b,a)*e%t,b2:u}}function R(e,t){const r=N(t*t*t),n=N(r*r*t);let i=N(e*r*M(e*n).pow_p_5_8);const s=N(t*i*i),o=i,a=N(i*h),c=s===e,u=s===N(-e),l=s===N(-e*h);return c&&(i=o),(u||l)&&(i=a),C(i)&&(i=N(-i)),{isValid:c||u,value:i}}function K(e){return R(o,e)}async function D(...e){return N(j(await r.utils.sha512(function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...e))),l.l)}function U(e,t){const r=e instanceof Uint8Array?Uint8Array.from(e):I(e);if("number"==typeof t&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function H(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if("number"==typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"==typeof e&&e<t)if(r){if(s<e)return e}else if(s<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function F(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}async function $(e){if(32!==(e="bigint"==typeof e||"number"==typeof e?S(H(e,d)):U(e)).length)throw new Error("Expected 32 bytes");const t=await r.utils.sha512(e),n=F(t.slice(0,32)),i=t.slice(32,64),s=N(j(n),l.l),o=k.BASE.multiply(s),a=o.toRawBytes();return{head:n,prefix:i,scalar:s,point:o,pointBytes:a}}function V(e,t,r){const n=N(e*(t-r));return[t=N(t-n),r=N(r+n)]}r.getPublicKey=async function(e){return(await $(e)).pointBytes},r.sign=async function(e,t){e=U(e);const{prefix:r,scalar:n,pointBytes:i}=await $(t),s=await D(r,e),o=k.BASE.multiply(s),a=N(s+await D(o.toRawBytes(),i,e)*n,l.l);return new T(o,a).toRawBytes()},r.verify=async function(e,t,r){t=U(t),r instanceof k||(r=k.fromHex(r,!1));const{r:n,s:i}=e instanceof T?e.assertValidity():T.fromHex(e),s=y.BASE.multiplyUnsafe(i),o=await D(n.toRawBytes(),r.toRawBytes(),t),a=y.fromAffine(r).multiplyUnsafe(o);return y.fromAffine(n).add(a).subtract(s).multiplyUnsafe(l.h).equals(y.ZERO)},r.getSharedSecret=async function(e,t){const{head:n}=await $(e),i=k.fromHex(t).toX25519();return r.curve25519.scalarMult(n,i)},k.BASE._setWindowSize(8),r.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(e,t){const r=function(e,t){const{P:r}=l,n=H(e,r),i=H(t,r),c=BigInt(121665),u=n;let d,h=o,f=s,p=n,m=o,g=s;for(let e=BigInt(254);e>=s;e--){const t=i>>e&o;g^=t,d=V(g,h,p),h=d[0],p=d[1],d=V(g,f,m),f=d[0],m=d[1],g=t;const r=h+f,n=N(r*r),s=h-f,l=N(s*s),y=n-l,w=p+m,b=N((p-m)*r),v=N(w*s);p=N((b+v)**a),m=N(u*(b-v)**a),h=N(n*l),f=N(y*(n+N(c*y)))}d=V(g,h,p),h=d[0],p=d[1],d=V(g,f,m),f=d[0],m=d[1];const{pow_p_5_8:y,b2:w}=M(f),b=N(L(y,BigInt(3))*w);return N(h*b)}(function(e){const t=U(e,32);return t[31]&=127,j(t)}(t),j(F(U(e,32))));if(r===s)throw new Error("Invalid private or public key received");return function(e){return x(N(e,l.P))}(r)},scalarMultBase:e=>r.curve25519.scalarMult(e,r.curve25519.BASE_POINT_U)};const G={node:i.default,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined};r.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:A,getExtendedPublicKey:$,mod:N,invert:O,hashToPrivateScalar:e=>{if((e=U(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const t=N(j(e),l.l);if(t===s||t===o)throw new Error("Invalid private key");return t},randomBytes:(e=32)=>{if(G.web)return G.web.getRandomValues(new Uint8Array(e));if(G.node){const{randomBytes:t}=G.node;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>r.utils.randomBytes(32),sha512:async e=>{if(G.web){const t=await G.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}if(G.node)return Uint8Array.from(G.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")},precompute(e=8,t=k.BASE){const r=t.equals(k.BASE)?t:new k(t.x,t.y);return r._setWindowSize(e),r.multiply(a),r}}}}},{package:"@metamask/key-tree>@noble/ed25519",file:"node_modules/@noble/ed25519/lib/index.js"}],[1225,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=i,r.bytes=s,r.hash=o,r.exists=a,r.output=c;const u={number:n,bool:i,bytes:s,hash:o,exists:a,output:c};r.default=u}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/_assert.js"}],[1226,{"./_assert.js":1225,"./utils.js":1235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SHA2=void 0;const n=e("./_assert.js"),i=e("./utils.js");class s extends i.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){n.default.exists(this);const{view:t,buffer:r,blockLen:s}=this,o=(e=(0,i.toBytes)(e)).length;for(let n=0;n<o;){const a=Math.min(s-this.pos,o-n);if(a!==s)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=(0,i.createView)(e);for(;s<=o-n;n+=s)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){n.default.exists(this),n.default.output(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let e=a;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}(r,s-8,BigInt(8*this.length),o),this.process(r,0);const c=(0,i.createView)(e);this.get().forEach(((e,t)=>c.setUint32(4*t,e,o)))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}r.SHA2=s}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/_sha2.js"}],[1227,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=s(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}r.fromBig=s,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0);function a(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}r.add=a;const c={fromBig:s,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};r.default=c}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/_u64.js"}],[1228,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto={node:undefined,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined}}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/cryptoBrowser.js"}],[1229,{"./_assert.js":1225,"./utils.js":1235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=void 0;const n=e("./_assert.js"),i=e("./utils.js");class s extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,n.default.hash(e);const r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return n.default.exists(this),this.iHash.update(e),this}digestInto(e){n.default.exists(this),n.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}r.hmac=(e,t,r)=>new s(e,t).update(r).digest(),r.hmac.create=(e,t)=>new s(e,t)}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/hmac.js"}],[123,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[1230,{"./_assert.js":1225,"./hmac.js":1229,"./utils.js":1235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.pbkdf2Async=r.pbkdf2=void 0;const n=e("./_assert.js"),i=e("./hmac.js"),s=e("./utils.js");function o(e,t,r,o){n.default.hash(e);const a=(0,s.checkOpts)({dkLen:32,asyncTick:10},o),{c:c,dkLen:u,asyncTick:l}=a;if(n.default.number(c),n.default.number(u),n.default.number(l),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const d=(0,s.toBytes)(t),h=(0,s.toBytes)(r),f=new Uint8Array(u),p=i.hmac.create(e,d),m=p._cloneInto().update(h);return{c:c,dkLen:u,asyncTick:l,DK:f,PRF:p,PRFSalt:m}}function a(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}r.pbkdf2=function(e,t,r,n){const{c:i,dkLen:c,DK:u,PRF:l,PRFSalt:d}=o(e,t,r,n);let h;const f=new Uint8Array(4),p=(0,s.createView)(f),m=new Uint8Array(l.outputLen);for(let e=1,t=0;t<c;e++,t+=l.outputLen){const r=u.subarray(t,t+l.outputLen);p.setInt32(0,e,!1),(h=d._cloneInto(h)).update(f).digestInto(m),r.set(m.subarray(0,r.length));for(let e=1;e<i;e++){l._cloneInto(h).update(m).digestInto(m);for(let e=0;e<r.length;e++)r[e]^=m[e]}}return a(l,d,u,h,m)},r.pbkdf2Async=async function(e,t,r,n){const{c:i,dkLen:c,asyncTick:u,DK:l,PRF:d,PRFSalt:h}=o(e,t,r,n);let f;const p=new Uint8Array(4),m=(0,s.createView)(p),g=new Uint8Array(d.outputLen);for(let e=1,t=0;t<c;e++,t+=d.outputLen){const r=l.subarray(t,t+d.outputLen);m.setInt32(0,e,!1),(f=h._cloneInto(f)).update(p).digestInto(g),r.set(g.subarray(0,r.length)),await(0,s.asyncLoop)(i-1,u,(e=>{d._cloneInto(f).update(g).digestInto(g);for(let e=0;e<r.length;e++)r[e]^=g[e]}))}return a(d,h,l,f,g)}}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/pbkdf2.js"}],[1231,{"./_sha2.js":1226,"./utils.js":1235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ripemd160=r.RIPEMD160=void 0;const n=e("./_sha2.js"),i=e("./utils.js"),s=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),o=Uint8Array.from({length:16},((e,t)=>t)),a=o.map((e=>(9*e+5)%16));let c=[o],u=[a];for(let e=0;e<4;e++)for(let t of[c,u])t.push(t[e].map((e=>s[e])));const l=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),d=c.map(((e,t)=>e.map((e=>l[t][e])))),h=u.map(((e,t)=>e.map((e=>l[t][e])))),f=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),p=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),m=(e,t)=>e<<t|e>>>32-t;function g(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}const y=new Uint32Array(16);class w extends n.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)y[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,s=i,o=0|this.h2,a=o,l=0|this.h3,w=l,b=0|this.h4,v=b;for(let e=0;e<5;e++){const t=4-e,_=f[e],E=p[e],k=c[e],T=u[e],P=d[e],A=h[e];for(let t=0;t<16;t++){const n=m(r+g(e,i,o,l)+y[k[t]]+_,P[t])+b|0;r=b,b=l,l=0|m(o,10),o=i,i=n}for(let e=0;e<16;e++){const r=m(n+g(t,s,a,w)+y[T[e]]+E,A[e])+v|0;n=v,v=w,w=0|m(a,10),a=s,s=r}}this.set(this.h1+o+w|0,this.h2+l+v|0,this.h3+b+n|0,this.h4+r+s|0,this.h0+i+a|0)}roundClean(){y.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}r.RIPEMD160=w,r.ripemd160=(0,i.wrapConstructor)((()=>new w))}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/ripemd160.js"}],[1232,{"./_sha2.js":1226,"./utils.js":1235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sha256=void 0;const n=e("./_sha2.js"),i=e("./utils.js"),s=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=c[e-15],r=c[e-2],n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,s=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;c[e]=s+c[e-7]+n+c[e-16]|0}let{A:r,B:n,C:a,D:u,E:l,F:d,G:h,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+((p=l)&d^~p&h)+o[e]+c[e]|0,m=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+s(r,n,a)|0;f=h,h=d,d=l,l=u+t|0,u=a,a=n,n=r,r=t+m|0}var p;r=r+this.A|0,n=n+this.B|0,a=a+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,n,a,u,l,d,h,f)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}r.sha256=(0,i.wrapConstructor)((()=>new u))}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/sha256.js"}],[1233,{"./_assert.js":1225,"./_u64.js":1227,"./utils.js":1235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),i=e("./_u64.js"),s=e("./utils.js"),[o,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let i=u;for(let e=0;e<7;e++)t=(t<<l^(t>>h)*p)%f,t&d&&(i^=l<<(l<<BigInt(e))-l);c.push(i)}const[m,g]=i.default.split(c,!0),y=(e,t,r)=>r>32?i.default.rotlBH(e,t,r):i.default.rotlSH(e,t,r),w=(e,t,r)=>r>32?i.default.rotlBL(e,t,r):i.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=y(s,o,1)^r[n],c=w(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=a[r],s=y(t,i,n),c=w(t,i,n),u=o[r];t=e[u],i=e[u+1],e[u]=s,e[u+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=g[n]}r.fill(0)}r.keccakP=b;class v extends s.Hash{constructor(e,t,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){n.default.exists(this);const{blockLen:t,state:r}=this,i=(e=(0,s.toBytes)(e)).length;for(let n=0;n<i;){const s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){n.default.exists(this,!1),n.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return n.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(n.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new v(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}r.Keccak=v;const _=(e,t,r)=>(0,s.wrapConstructor)((()=>new v(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const E=(e,t,r)=>(0,s.wrapConstructorWithOpts)(((n={})=>new v(t,e,n.dkLen===undefined?r:n.dkLen,!0)));r.shake128=E(31,168,16),r.shake256=E(31,136,32)}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/sha3.js"}],[1234,{"./_sha2.js":1226,"./_u64.js":1227,"./utils.js":1235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sha384=r.sha512_256=r.sha512=r.SHA512=void 0;const n=e("./_sha2.js"),i=e("./_u64.js"),s=e("./utils.js"),[o,a]=i.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),c=new Uint32Array(80),u=new Uint32Array(80);class l extends n.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:l,Fl:d,Gh:h,Gl:f,Hh:p,Hl:m}=this;return[e,t,r,n,i,s,o,a,c,u,l,d,h,f,p,m]}set(e,t,r,n,i,s,o,a,c,u,l,d,h,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t),u[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],r=0|u[e-15],n=i.default.rotrSH(t,r,1)^i.default.rotrSH(t,r,8)^i.default.shrSH(t,r,7),s=i.default.rotrSL(t,r,1)^i.default.rotrSL(t,r,8)^i.default.shrSL(t,r,7),o=0|c[e-2],a=0|u[e-2],l=i.default.rotrSH(o,a,19)^i.default.rotrBH(o,a,61)^i.default.shrSH(o,a,6),d=i.default.rotrSL(o,a,19)^i.default.rotrBL(o,a,61)^i.default.shrSL(o,a,6),h=i.default.add4L(s,d,u[e-7],u[e-16]),f=i.default.add4H(h,n,l,c[e-7],c[e-16]);c[e]=0|f,u[e]=0|h}let{Ah:r,Al:n,Bh:s,Bl:l,Ch:d,Cl:h,Dh:f,Dl:p,Eh:m,El:g,Fh:y,Fl:w,Gh:b,Gl:v,Hh:_,Hl:E}=this;for(let e=0;e<80;e++){const t=i.default.rotrSH(m,g,14)^i.default.rotrSH(m,g,18)^i.default.rotrBH(m,g,41),k=i.default.rotrSL(m,g,14)^i.default.rotrSL(m,g,18)^i.default.rotrBL(m,g,41),T=m&y^~m&b,P=g&w^~g&v,A=i.default.add5L(E,k,P,a[e],u[e]),I=i.default.add5H(A,_,t,T,o[e],c[e]),S=0|A,x=i.default.rotrSH(r,n,28)^i.default.rotrBH(r,n,34)^i.default.rotrBH(r,n,39),C=i.default.rotrSL(r,n,28)^i.default.rotrBL(r,n,34)^i.default.rotrBL(r,n,39),j=r&s^r&d^s&d,B=n&l^n&h^l&h;_=0|b,E=0|v,b=0|y,v=0|w,y=0|m,w=0|g,({h:m,l:g}=i.default.add(0|f,0|p,0|I,0|S)),f=0|d,p=0|h,d=0|s,h=0|l,s=0|r,l=0|n;const N=i.default.add3L(S,C,B);r=i.default.add3H(N,I,x,j),n=0|N}({h:r,l:n}=i.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:l}=i.default.add(0|this.Bh,0|this.Bl,0|s,0|l)),({h:d,l:h}=i.default.add(0|this.Ch,0|this.Cl,0|d,0|h)),({h:f,l:p}=i.default.add(0|this.Dh,0|this.Dl,0|f,0|p)),({h:m,l:g}=i.default.add(0|this.Eh,0|this.El,0|m,0|g)),({h:y,l:w}=i.default.add(0|this.Fh,0|this.Fl,0|y,0|w)),({h:b,l:v}=i.default.add(0|this.Gh,0|this.Gl,0|b,0|v)),({h:_,l:E}=i.default.add(0|this.Hh,0|this.Hl,0|_,0|E)),this.set(r,n,s,l,d,h,f,p,m,g,y,w,b,v,_,E)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}r.SHA512=l;class d extends l{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class h extends l{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}r.sha512=(0,s.wrapConstructor)((()=>new l)),r.sha512_256=(0,s.wrapConstructor)((()=>new d)),r.sha384=(0,s.wrapConstructor)((()=>new h))}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/sha512.js"}],[1235,{"@noble/hashes/crypto":1228},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t};function s(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=s(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;e>=0&&e<t||(await(0,r.nextTick)(),i+=e)}},r.utf8ToBytes=s,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(t!==undefined&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}}}},{package:"@metamask/key-tree>@noble/hashes",file:"node_modules/@noble/hashes/utils.js"}],[124,{"../../../shared/modules/hexstring-utils":3241,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/modules/hexstring-utils");const s="SAI";function o(e={}){return e&&"object"==typeof e&&"DAI"===e.symbol&&"0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359"===(0,i.toChecksumHexAddress)(e.address)}var a={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)o(t)&&(t.symbol=s);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)o(e)&&(e.symbol=s)}}}return e}(r),t}};r.default=a}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[1241,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function i(...e){const t=(e,t)=>r=>e(t(r));return{encode:Array.from(e).reverse().reduce(((e,r)=>e?t(e,r.encode):r.encode),undefined),decode:e.reduce(((e,r)=>e?t(e,r.decode):r.decode),undefined)}}function s(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function a(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function c(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function u(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const s=[],o=Array.from(e);for(o.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let s=i;s<o.length;s++){const a=o[s],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");if(e=c%r,o[s]=Math.floor(c/r),!Number.isSafeInteger(o[s])||o[s]*r+e!==c)throw new Error("convertRadix: carry overflow");n&&(o[s]?n=!1:i=s)}if(s.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)s.push(0);return s.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64url=r.base64=r.base32crockford=r.base32hex=r.base32=r.base16=r.utils=r.assertNumber=void 0,r.assertNumber=n;const l=(e,t)=>t?l(t,e%t):e,d=(e,t)=>e+(t-l(e,t));function h(e,t,r,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(d(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${d(t,r)}`);let s=0,o=0;const a=2**r-1,c=[];for(const i of e){if(n(i),i>=2**t)throw new Error(`convertRadix2: invalid data word=${i} from=${t}`);if(s=s<<t|i,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)c.push((s>>o-r&a)>>>0);s&=2**o-1}if(s=s<<r-o&a,!i&&o>=t)throw new Error("Excess padding");if(!i&&s)throw new Error(`Non-zero padding: ${s}`);return i&&o>0&&c.push(s>>>0),c}function f(e){return n(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return u(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(u(t,e,256))}}}function p(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(d(8,e)>32||d(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return h(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(h(r,e,8,t))}}}function m(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function g(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-e),i=t(n).slice(0,e),s=r.slice(-e);for(let t=0;t<e;t++)if(i[t]!==s[t])throw new Error("Invalid checksum");return n}}}r.utils={alphabet:s,chain:i,checksum:g,radix:f,radix2:p,join:o,padding:a},r.base16=i(p(4),s("0123456789ABCDEF"),o("")),r.base32=i(p(5),s("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),o("")),r.base32hex=i(p(5),s("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),o("")),r.base32crockford=i(p(5),s("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),c((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),r.base64=i(p(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),o("")),r.base64url=i(p(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),o(""));const y=e=>i(f(58),s(e),o(""));r.base58=y("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=y("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=y("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){const i=e.subarray(n,n+8);t+=r.base58.encode(i).padStart(w[i.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const i=e.slice(n,n+11),s=w.indexOf(i.length),o=r.base58.decode(i);for(let e=0;e<o.length-s;e++)if(0!==o[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-s)))}return Uint8Array.from(t)}};r.base58check=e=>i(g(4,(t=>e(e(t)))),r.base58);const b=i(s("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),v=[996825010,642813549,513874426,1027748829,705979059];function _(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<v.length;e++)1==(t>>e&1)&&(r^=v[e]);return r}function E(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=_(i)^r>>5}i=_(i);for(let t=0;t<n;t++)i=_(i)^31&e.charCodeAt(t);for(let e of t)i=_(i)^e;for(let e=0;e<6;e++)i=_(i);return i^=r,b.encode(h([i%2**30],30,5,!1))}function k(e){const t="bech32"===e?1:734539939,r=p(5),n=r.decode,i=r.encode,s=m(n);function o(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=n).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const s=e.slice(0,i),o=e.slice(i+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const a=b.decode(o).slice(0,-6),c=E(s,a,t);if(!o.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:s,words:a}}return{encode:function(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);const i=e.length+7+r.length;if(!1!==n&&i>n)throw new TypeError(`Length ${i} exceeds limit ${n}`);return`${e=e.toLowerCase()}1${b.encode(r)}${E(e,r,t)}`},decode:o,decodeToBytes:function(e){const{prefix:t,words:r}=o(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:m(o),fromWords:n,fromWordsUnsafe:s,toWords:i}}r.bech32=k("bech32"),r.bech32m=k("bech32m"),r.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},r.hex=i(p(4),s("0123456789abcdef"),o(""),c((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const T={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},P=`Invalid encoding type. Available types: ${Object.keys(T).join(", ")}`;r.bytesToString=(e,t)=>{if("string"!=typeof e||!T.hasOwnProperty(e))throw new TypeError(P);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return T[e].encode(t)},r.str=r.bytesToString;r.stringToBytes=(e,t)=>{if(!T.hasOwnProperty(e))throw new TypeError(P);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return T[e].decode(t)},r.bytes=r.stringToBytes}}},{package:"@metamask/key-tree>@scure/base",file:"node_modules/@scure/base/lib/index.js"}],[1242,{"@noble/hashes/_assert":1225,"@noble/hashes/hmac":1229,"@noble/hashes/ripemd160":1231,"@noble/hashes/sha256":1232,"@noble/hashes/sha512":1234,"@noble/hashes/utils":1235,"@noble/secp256k1":1236,"@scure/base":1241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.HDKey=r.HARDENED_OFFSET=void 0;const n=e("@noble/hashes/hmac"),i=e("@noble/hashes/ripemd160"),s=e("@noble/hashes/sha256"),o=e("@noble/hashes/sha512"),a=e("@noble/hashes/_assert"),c=e("@noble/hashes/utils"),u=e("@noble/secp256k1"),l=e("@scure/base");u.utils.hmacSha256Sync=(e,...t)=>{const r=n.hmac.create(s.sha256,e);return t.forEach((e=>r.update(e))),r.digest()};const d=(0,l.base58check)(s.sha256);function h(e){return BigInt(`0x${(0,c.bytesToHex)(e)}`)}const f=(0,c.utf8ToBytes)("Bitcoin seed"),p={private:76066276,public:76067358};r.HARDENED_OFFSET=2147483648;const m=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return(0,c.createView)(t).setUint32(0,e,!1),t};class g{constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||p,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!u.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:h(e.privateKey),this.privKeyBytes=(t=this.privKey,(0,c.hexToBytes)(t.toString(16).padStart(64,"0"))),this.pubKey=u.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=u.Point.fromHex(e.publicKey).toRawBytes(!0)}var t,r;this.pubHash=(r=this.pubKey,(0,i.ripemd160)((0,s.sha256)(r)))}get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,(0,c.createView)(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return d.encode(this.serialize(this.versions.private,(0,c.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return d.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=p){if(8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const r=(0,n.hmac)(o.sha512,f,e);return new g({versions:t,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,t=p){const r=d.decode(e),n=(0,c.createView)(r),i=n.getUint32(0,!1),s={versions:t,depth:r[4],parentFingerprint:n.getUint32(5,!1),index:n.getUint32(9,!1),chainCode:r.slice(13,45)},o=r.slice(45),a=0===o[0];if(i!==t[a?"private":"public"])throw new Error("Version mismatch");return new g(a?{...s,privateKey:o.slice(1)}:{...s,publicKey:o})}static fromJSON(e){return g.fromExtendedKey(e.xpriv)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const e of t){const t=/^(\d+)('?)$/.exec(e);if(!t||3!==t.length)throw new Error(`Invalid child index: ${e}`);let i=+t[1];if(!Number.isSafeInteger(i)||i>=r.HARDENED_OFFSET)throw new Error("Invalid index");"'"===t[2]&&(i+=r.HARDENED_OFFSET),n=n.deriveChild(i)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=m(e);if(e>=r.HARDENED_OFFSET){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=(0,c.concatBytes)(new Uint8Array([0]),e,t)}else t=(0,c.concatBytes)(this.pubKey,t);const i=(0,n.hmac)(o.sha512,this.chainCode,t),s=h(i.slice(0,32)),a=i.slice(32);if(!u.utils.isValidPrivateKey(s))throw new Error("Tweak bigger than curve order");const l={versions:this.versions,chainCode:a,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=u.utils.mod(this.privKey+s,u.CURVE.n);if(!u.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");l.privateKey=e}else l.publicKey=u.Point.fromHex(this.pubKey).add(u.Point.fromPrivateKey(s)).toRawBytes(!0);return new g(l)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,a.bytes)(e,32),u.signSync(e,this.privKey,{canonical:!0,der:!1})}verify(e,t){if((0,a.bytes)(e,32),(0,a.bytes)(t,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=u.Signature.fromCompact(t)}catch(e){return!1}return u.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=undefined,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=undefined),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,a.bytes)(t,33),(0,c.concatBytes)(m(e),new Uint8Array([this.depth]),m(this.parentFingerprint),m(this.index),this.chainCode,t)}}r.HDKey=g}}},{package:"eth-lattice-keyring>@ethereumjs/util>ethereum-cryptography>@scure/bip32",file:"node_modules/@scure/bip32/lib/index.js"}],[1243,{assert:1556,buffer:1789,"component-type":1850,"join-component":2519},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("component-type"),i=e("join-component"),s=e("assert");t.exports=function(e,t){switch(a(e),t=t||e.type,s(t,"You must pass an event type."),t){case"track":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.event,'You must pass an "event".')}(e);case"group":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.groupId,'You must pass a "groupId".')}(e);case"identify":case"page":case"screen":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".')}(e);case"alias":return function(e){s(e.userId,'You must pass a "userId".'),s(e.previousId,'You must pass a "previousId".')}(e);default:s(0,'Invalid event type: "'+t+'"')}};var o={anonymousId:["string","number"],category:"string",context:"object",event:"string",groupId:["string","number"],integrations:"object",name:"string",previousId:["string","number"],timestamp:"date",userId:["string","number"],type:"string"};function a(e){s("object"===n(e),"You must pass a message object.");var t=JSON.stringify(e);for(var a in s(r.byteLength(t,"utf8")<32768,"Your message must be < 32kb."),o){var c=e[a];if(c){var u=o[a];"array"!==n(u)&&(u=[u]);var l="object"===u[0]?"an":"a";s(u.some((function(e){return n(c)===e})),'"'+a+'" must be '+l+" "+i(u,"or")+".")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@segment/loosely-validate-event",file:"node_modules/@segment/loosely-validate-event/index.js"}],[125,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[126,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[127,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[128,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[129,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[13,{"../../../shared/constants/network":3216,"../../../shared/constants/transaction":3223,"../../../shared/modules/conversion.utils":3237,"../../../shared/modules/fetch-with-timeout":3239,"../../../shared/modules/random-id":3245,"../lib/util":85,"@metamask/obs-store":1156,"bn.js":1746,loglevel:2749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),i=h(e("loglevel")),s=h(e("bn.js")),o=h(e("../../../shared/modules/random-id")),a=e("../lib/util"),c=h(e("../../../shared/modules/fetch-with-timeout")),u=e("../../../shared/constants/transaction"),l=e("../../../shared/constants/network"),d=e("../../../shared/modules/conversion.utils");function h(e){return e&&e.__esModule?e:{default:e}}const f=(0,c.default)();r.default=class{constructor(e={}){const{blockTracker:t,onNetworkDidChange:r,getCurrentChainId:i,preferencesController:s,onboardingController:o}=e;this.blockTracker=t,this.getCurrentChainId=i,this.preferencesController=s,this.onboardingController=o,this._onLatestBlock=async e=>{const t=this.preferencesController.getSelectedAddress(),r=parseInt(e,16);await this._update(t,r)};const c={incomingTransactions:{},incomingTxLastFetchedBlockByChainId:Object.keys(l.ETHERSCAN_SUPPORTED_NETWORKS).reduce(((e,t)=>(e[t]=null,e)),{}),...e.initState};this.store=new n.ObservableStore(c),this.preferencesController.store.subscribe((0,a.previousValueComparator)(((e,t)=>{const{featureFlags:{showIncomingTransactions:r}={}}=e,{featureFlags:{showIncomingTransactions:n}={}}=t;n!==r&&(!r||n?this.start():this.stop())}),this.preferencesController.store.getState())),this.preferencesController.store.subscribe((0,a.previousValueComparator)((async(e,t)=>{const{selectedAddress:r}=e,{selectedAddress:n}=t;n!==r&&await this._update(n)}),this.preferencesController.store.getState())),this.onboardingController.store.subscribe((0,a.previousValueComparator)((async(e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n}=t;if(!r&&n){const e=this.preferencesController.getSelectedAddress();await this._update(e)}}),this.onboardingController.store.getState())),r((async()=>{const e=this.preferencesController.getSelectedAddress();await this._update(e)}))}start(){const{featureFlags:e={}}=this.preferencesController.store.getState(),{showIncomingTransactions:t}=e;t&&(this.blockTracker.removeListener("latest",this._onLatestBlock),this.blockTracker.addListener("latest",this._onLatestBlock))}stop(){this.blockTracker.removeListener("latest",this._onLatestBlock)}async _update(e,t){const{completedOnboarding:r}=this.onboardingController.store.getState(),n=this.getCurrentChainId();if(Object.hasOwnProperty.call(l.ETHERSCAN_SUPPORTED_NETWORKS,n)&&e&&r)try{const r=this.store.getState(),i=parseInt(this.blockTracker.getCurrentBlock(),16),s=r.incomingTxLastFetchedBlockByChainId[n]??t??i,o=await this._getNewIncomingTransactions(e,s,n);let a=s;o.forEach((e=>{e.blockNumber&&parseInt(a,10)<parseInt(e.blockNumber,10)&&(a=parseInt(e.blockNumber,10))})),this.store.updateState({incomingTxLastFetchedBlockByChainId:{...r.incomingTxLastFetchedBlockByChainId,[n]:a+1},incomingTransactions:o.reduce(((e,t)=>(e[t.hash]=t,e)),{...r.incomingTransactions})})}catch(e){i.default.error(e)}}async _getNewIncomingTransactions(e,t,r){const n=l.ETHERSCAN_SUPPORTED_NETWORKS[r].domain;let i=`${`https://${l.ETHERSCAN_SUPPORTED_NETWORKS[r].subdomain}.${n}`}/api?module=account&action=txlist&address=${e}&tag=latest&page=1`;t&&(i+=`&startBlock=${parseInt(t,10)}`);const s=await f(i),{status:o,result:a}=await s.json();let c=[];if("1"===o&&Array.isArray(a)&&a.length>0){const t={},n=[];a.forEach((e=>{t[e.hash]||(n.push(this._normalizeTxFromEtherscan(e,r)),t[e.hash]=1)})),c=n.filter((t=>{var r,n;return(null===(r=t.txParams)||void 0===r||null===(n=r.to)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()})),c.sort(((e,t)=>e.time<t.time?-1:1))}return c}_normalizeTxFromEtherscan(e,t){const r=1e3*parseInt(e.timeStamp,10),n="0"===e.isError?u.TransactionStatus.confirmed:u.TransactionStatus.failed,i={from:e.from,gas:(0,d.bnToHex)(new s.default(e.gas)),nonce:(0,d.bnToHex)(new s.default(e.nonce)),to:e.to,value:(0,d.bnToHex)(new s.default(e.value))};return e.gasPrice?i.gasPrice=(0,d.bnToHex)(new s.default(e.gasPrice)):e.maxFeePerGas&&(i.maxFeePerGas=(0,d.bnToHex)(new s.default(e.maxFeePerGas)),i.maxPriorityFeePerGas=(0,d.bnToHex)(new s.default(e.maxPriorityFeePerGas))),{blockNumber:e.blockNumber,id:(0,o.default)(),chainId:t,metamaskNetworkId:l.ETHERSCAN_SUPPORTED_NETWORKS[t].networkId,status:n,time:r,txParams:i,hash:e.hash,type:u.TransactionType.incoming}}}}}},{package:"$root$",file:"app/scripts/controllers/incoming-transactions.js"}],[130,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;s.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};r.default=i;const s=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[131,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[132,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach((e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())}));return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[133,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:48,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,n,i,a,c,u,l,d;null===(t=e.NetworkController)||void 0===t||delete t.settings;const h=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==h.type||"string"==typeof h.chainId&&o.test(h.chainId))&&"localhost"!==h.type){if(null!==(n=e.NetworkController)&&void 0!==n&&n.provider){var f,p;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(f=e.NetworkController)||void 0===f||(null===(p=f.provider)||void 0===p||delete p.rpcTarget)}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(i=e.CachedBalancesController)||void 0===i||delete i.cachedBalances;const m=null===(a=e.TransactionController)||void 0===a?void 0:a.transactions;Array.isArray(m)&&m.forEach((e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&s.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))}));const g=(null===(c=e.AddressBookController)||void 0===c?void 0:c.addressBook)||{};Object.keys(g).forEach((e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach((e=>{e&&"object"==typeof e&&(e.chainId=t)}))}(g[e],t),g[t]?function(e,t,r){const n=e[t]||{},i={...e[r]};Object.keys(n).forEach((e=>{if(i[e]&&"object"==typeof i[e]){const t={};new Set([...Object.keys(i[e]),...Object.keys(n[e]||{})]).forEach((r=>{var s;t[r]=i[e][r]||(null===(s=n[e])||void 0===s?void 0:s[r])||""})),i[e]=t}else n[e]&&"object"==typeof n[e]&&(i[e]=n[e])})),e[r]=i}(g,e,t):g[t]=g[e],delete g[e]}})),null===(u=e.IncomingTransactionsController)||void 0===u||null===(l=u.incomingTxLastFetchedBlocksByNetwork)||void 0===l||delete l.localhost;const y=null===(d=e.PreferencesController)||void 0===d?void 0:d.accountTokens;y&&Object.keys(y).forEach((e=>{var t,r;const n=(null===(t=y[e])||void 0===t?void 0:t.localhost)||[];if(n.length>0){const t=y[e].rpc||[];t.length>0?y[e].rpc=function(e,t){const r=s(e),n=s(t),i=[];return new Set([...Object.keys(r),...Object.keys(n)]).forEach((e=>{i.push({...r[e],...n[e]})})),i;function s(e){return e.reduce(((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e)),{})}}(n,t):y[e].rpc=n}null===(r=y[e])||void 0===r||delete r.localhost}));return e}(r),t}};r.default=i;const s=/^0x[0-9a-f]+$/iu,o=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[134,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:49,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:n}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),n!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=n,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[135,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const i=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];var s={version:50,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=50,i.forEach((e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)})),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[136,{"../../../shared/constants/network":3216,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/network");var s={version:51,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:n,type:s}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},o=null===(r=i.BUILT_IN_NETWORKS[s])||void 0===r?void 0:r.chainId;o&&n!==o&&(e.NetworkController.provider.chainId=o);return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[137,{"../../../shared/constants/network":3216,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/network");var s={version:52,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:n}=e.PreferencesController,s={},o={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){s[e]={},t[e][i.NETWORK_TYPES.RPC]&&n.forEach((r=>{s[e][r.chainId]=t[e][i.NETWORK_TYPES.RPC]}));for(const r of Object.keys(t[e]))switch(r){case i.NETWORK_TYPES.MAINNET:s[e][i.CHAIN_IDS.MAINNET]=t[e][i.NETWORK_TYPES.MAINNET];break;case"ropsten":s[e]["0x3"]=t[e].ropsten;break;case"rinkeby":s[e]["0x4"]=t[e].rinkeby;break;case i.NETWORK_TYPES.GOERLI:s[e][i.CHAIN_IDS.GOERLI]=t[e][i.NETWORK_TYPES.GOERLI];break;case"kovan":s[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=s}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){o[e]={},r[e][i.NETWORK_TYPES.RPC]&&n.forEach((t=>{o[e][t.chainId]=r[e][i.NETWORK_TYPES.RPC]}));for(const t of Object.keys(r[e]))switch(t){case i.NETWORK_TYPES.MAINNET:o[e][i.CHAIN_IDS.MAINNET]=r[e][i.NETWORK_TYPES.MAINNET];break;case"ropsten":o[e]["0x3"]=r[e].ropsten;break;case"rinkeby":o[e]["0x4"]=r[e].rinkeby;break;case i.NETWORK_TYPES.GOERLI:o[e][i.CHAIN_IDS.GOERLI]=r[e][i.NETWORK_TYPES.GOERLI];break;case"kovan":o[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=o}}return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[138,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:53,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const n=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,s=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(n)&&n.forEach((e=>{e&&(e.type!==i.TransactionType.retry&&e.type!==i.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)}));if(s){Object.entries(s).forEach((([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:i.TransactionType.incoming})}))}return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[139,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");function i(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}var s={version:54,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=(t.PreferencesController.tokens||[]).filter((({decimals:e})=>i(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=r;const{accountTokens:n}=t.PreferencesController;if(n&&"object"==typeof n)for(const e of Object.keys(n)){const t=n[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter((({decimals:e})=>i(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=n,t}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[14,{"../../../shared/constants/alarms":3207,"../../../shared/constants/app":3209,"../../../shared/constants/metametrics":3215,"../../../shared/constants/time":3221,"../../../shared/modules/mv3.utils":3242,"../lib/util":85,"@metamask/obs-store":1156,buffer:1789,"ethereumjs-util":2044,lodash:2737,uuid:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/obs-store"),s=e("ethereumjs-util"),o=e("uuid"),a=e("../../../shared/constants/app"),c=e("../../../shared/constants/metametrics"),u=e("../../../shared/constants/time"),l=e("../../../shared/modules/mv3.utils"),d=e("../../../shared/constants/alarms"),h=e("../lib/util");function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=e=>{setTimeout((()=>{throw e}))},m=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,h.generateRandomId)()},g={'You must pass either an "anonymousId" or a "userId".':!0};r.default=class{constructor({segment:e,preferencesStore:t,onNetworkDidChange:r,getCurrentChainId:s,version:o,environment:a,initState:c,extension:m,captureException:y=p}){f(this,"_getAllNFTsFlattened",(0,n.memoize)(((e={})=>Object.values(e).reduce(((e,t)=>e.concat(...Object.values(t))),[])))),f(this,"_isValidTraitArray",(e=>Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"boolean"==typeof e))||e.every((e=>"number"==typeof e))))),f(this,"_isValidTraitDate",(e=>"[object Date]"===Object.prototype.toString.call(e))),this._captureException=e=>{g[e.message]||y(e)};const w=t.getState();this.chainId=s(),this.locale=w.currentLocale.replace("_","-"),this.version="production"===a?o:`${o}-${a}`,this.extension=m,this.environment=a;const b=(0,n.omitBy)(null==c?void 0:c.fragments,"persist"),v=(null==c?void 0:c.segmentApiCalls)||{};this.store=new i.ObservableStore({participateInMetaMetrics:null,metaMetricsId:null,eventsBeforeMetricsOptIn:[],traits:{},...c,fragments:{...null==c?void 0:c.fragments},segmentApiCalls:{...v}}),t.subscribe((({currentLocale:e})=>{this.locale=e.replace("_","-")})),r((()=>{this.chainId=s()})),this.segment=e,Object.values(b).forEach((e=>{this.finalizeEventFragment(e.id,{abandoned:!0})})),l.isManifestV3&&Object.values(v).forEach((({eventType:e,payload:t})=>{this._submitSegmentAPICall(e,t)})),l.isManifestV3?(chrome.alarms.getAll((e=>{(0,h.checkAlarmExists)(e,d.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||chrome.alarms.create(d.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})})),chrome.alarms.onAlarm.addListener((e=>{e.name===d.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()}))):setInterval((()=>{this.finalizeAbandonedFragments()}),30*u.SECOND)}finalizeAbandonedFragments(){Object.values(this.store.getState().fragments).forEach((e=>{e.timeout&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.finalizeEventFragment(e.id,{abandoned:!0})}))}generateMetaMetricsId(){return(0,s.bufferToHex)((0,s.keccak)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent||!e.category)throw new Error(`Must specify success event and category. Success event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.store.getState(),r=e.uniqueIdentifier??(0,o.v4)(),n={id:r,...e,lastUpdated:Date.now()};return this.store.updateState({fragments:{...t,[r]:n}}),e.initialEvent&&this.trackEvent({event:n.initialEvent,category:n.category,properties:n.properties,sensitiveProperties:n.sensitiveProperties,page:n.page,referrer:n.referrer,revenue:n.revenue,value:n.value,currency:n.currency,environmentType:n.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),n}getEventFragmentById(e){const{fragments:t}=this.store.getState();return t[e]}updateEventFragment(e,t){const{fragments:r}=this.store.getState();if(!r[e])throw new Error(`Event fragment with id ${e} does not exist.`);this.store.updateState({fragments:{...r,[e]:(0,n.merge)(r[e],{...t,lastUpdated:Date.now()})}})}finalizeEventFragment(e,{abandoned:t=!1,page:r,referrer:n}={}){const i=this.store.getState().fragments[e];if(!i)throw new Error(`Funnel with id ${e} does not exist.`);const s=t?i.failureEvent:i.successEvent;this.trackEvent({event:s,category:i.category,properties:i.properties,sensitiveProperties:i.sensitiveProperties,page:r??i.page,referrer:i.referrer??n,revenue:i.revenue,value:i.value,currency:i.currency,environmentType:i.environmentType,actionId:i.actionId,uniqueIdentifier:i.uniqueIdentifier?`${i.uniqueIdentifier}-${t?"failure":"success"}`:undefined});const{fragments:o}=this.store.getState();delete o[e],this.store.updateState({fragments:o})}identify(e){const{metaMetricsId:t,participateInMetaMetrics:r}=this.state;if(!r||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const n=this._buildValidTraits(e);this._identify(n)}updateExtensionUninstallUrl(e,r){const n={};e&&(n.mmi=t.from(r).toString("base64"),n.env=this.environment,n.av=this.version);const i=new URLSearchParams(n);this.extension&&this.extension.runtime&&this.extension.runtime.setUninstallURL(`https://metamask.io/uninstalled?${i}`)}setParticipateInMetaMetrics(e){let{metaMetricsId:t}=this.state;return e&&!t?t=this.generateMetaMetricsId():!1===e&&(t=null),this.store.updateState({participateInMetaMetrics:e,metaMetricsId:t}),e&&(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn()),this.updateExtensionUninstallUrl(e,t),t}get state(){return this.store.getState()}trackPage({name:e,params:t,environmentType:r,page:n,referrer:i,actionId:s},o){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==o||!o.isOptInPath))return;const{metaMetricsId:a}=this.state,u=a?"userId":"anonymousId",l=a??c.METAMETRICS_ANONYMOUS_ID;this._submitSegmentAPICall("page",{messageId:m({actionId:s}),[u]:l,name:e,properties:{params:t,locale:this.locale,chain_id:this.chainId,environment_type:r},context:this._buildContext(i,n)})}catch(e){this._captureException(e)}}trackEvent(e,t){this.validatePayload(e),this.submitEvent(e,t).catch((e=>this._captureException(e)))}async submitEvent(e,t){if(this.validatePayload(e),!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const r=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const i=(0,n.merge)(e.sensitiveProperties,e.properties);r.push(this._track(this._buildEventPayload({...e,properties:i,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}r.push(this._track(this._buildEventPayload(e),t)),await Promise.all(r)}validatePayload(e){if(!e.event||!e.category)throw new Error(`Must specify event and category. Event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.store.getState();e.forEach((e=>{this.trackEvent(e)}))}clearEventsAfterMetricsOptIn(){this.store.updateState({eventsBeforeMetricsOptIn:[]})}addEventBeforeMetricsOptIn(e){const t=this.store.getState().eventsBeforeMetricsOptIn;this.store.updateState({eventsBeforeMetricsOptIn:[...t,e]})}updateTraits(e){const{traits:t}=this.store.getState();this.store.updateState({traits:{...t,...e}})}_buildContext(e,t=c.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e}}_buildEventPayload(e){const{event:t,properties:r,revenue:i,value:s,currency:o,category:c,page:u,referrer:l,environmentType:d=a.ENVIRONMENT_TYPE_BACKGROUND}=e;return{event:t,messageId:m(e),properties:{...(0,n.omit)(r,["revenue","locale","currency","value"]),revenue:i,value:s,currency:o,category:c,locale:this.locale,chain_id:(null==r?void 0:r.chain_id)??this.chainId,environment_type:d},context:this._buildContext(l,u)}}_buildUserTraitsObject(e){const{traits:t,previousUserTraits:r}=this.store.getState(),i={[c.TRAITS.ADDRESS_BOOK_ENTRIES]:(0,n.sum)(Object.values(e.addressBook).map(n.size)),[c.TRAITS.INSTALL_DATE_EXT]:t[c.TRAITS.INSTALL_DATE_EXT]||"",[c.TRAITS.LEDGER_CONNECTION_TYPE]:e.ledgerTransportType,[c.TRAITS.NETWORKS_ADDED]:Object.values(e.networkConfigurations).map((e=>e.chainId)),[c.TRAITS.NETWORKS_WITHOUT_TICKER]:Object.values(e.networkConfigurations).filter((({ticker:e})=>!e)).map((({chainId:e})=>e)),[c.TRAITS.NFT_AUTODETECTION_ENABLED]:e.useNftDetection,[c.TRAITS.NUMBER_OF_ACCOUNTS]:Object.values(e.identities).length,[c.TRAITS.NUMBER_OF_NFT_COLLECTIONS]:this._getAllUniqueNFTAddressesLength(e.allNfts),[c.TRAITS.NUMBER_OF_NFTS]:this._getAllNFTsFlattened(e.allNfts).length,[c.TRAITS.NUMBER_OF_TOKENS]:this._getNumberOfTokens(e),[c.TRAITS.OPENSEA_API_ENABLED]:e.openSeaEnabled,[c.TRAITS.THREE_BOX_ENABLED]:!1,[c.TRAITS.THEME]:e.theme||"default",[c.TRAITS.TOKEN_DETECTION_ENABLED]:e.useTokenDetection,[c.TRAITS.SECURITY_PROVIDERS]:e.transactionSecurityCheckEnabled?["opensea"]:[]};if(!r)return this.store.updateState({previousUserTraits:i}),i;if(r&&!(0,n.isEqual)(r,i)){const e=(0,n.pickBy)(i,((e,t)=>!(0,n.isEqual)(r[t],e)));return this.store.updateState({previousUserTraits:i}),e}return null}_buildValidTraits(e){return Object.entries(e).reduce(((e,[t,r])=>(this._isValidTraitDate(r)?e[t]=r.toISOString():this._isValidTrait(r)?e[t]=r:console.warn(`MetaMetricsController: "${t}" value is not a valid trait type`),e)),{})}_getAllUniqueNFTAddressesLength(e={}){const t=this._getAllNFTsFlattened(e).map((e=>e.address));return new Set(t).size}_getNumberOfTokens(e){return Object.values(e.allTokens).reduce(((e,t)=>e+(0,n.sum)(Object.values(t).map(n.size))),0)}_identify(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{this._submitSegmentAPICall("identify",{userId:t,traits:e})}catch(e){this._captureException(e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}_isValidTrait(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||this._isValidTraitArray(e)||this._isValidTraitDate(e)}_track(e,t){const{isOptIn:r,metaMetricsId:n,matomoEvent:i,flushImmediately:s}=t||{};let o="userId",a=this.state.metaMetricsId,u=(null==t?void 0:t.excludeMetaMetricsId)??!1;return Boolean(e.event.match(/^send|^confirm/iu))&&(u=!0),u||r&&!n?(o="anonymousId",a=c.METAMETRICS_ANONYMOUS_ID):r&&n&&(a=n),e[o]=a,!0===i&&(e.properties.legacy_event=!0),new Promise(((t,r)=>{this._submitSegmentAPICall("track",e,(e=>{if(e){const t=new Error(e.message);return t.stack=e.stack,r(t)}return t()})),s&&this.segment.flush()}))}_submitSegmentAPICall(e,t,r){const{metaMetricsId:n,participateInMetaMetrics:i}=this.state;if(!i||!n)return;const s=t.messageId||(0,h.generateRandomId)();let o=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,h.isValidDate)(e)&&(o=e)}const a={...t,messageId:s,timestamp:o};this.store.updateState({segmentApiCalls:{...this.store.getState().segmentApiCalls,[s]:{eventType:e,payload:{...a,timestamp:a.timestamp.toString()}}}});this.segment[e](a,(e=>{const{segmentApiCalls:t}=this.store.getState();return delete t[s],this.store.updateState({segmentApiCalls:t}),null==r?void 0:r(e)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics.js"}],[140,{"../../../shared/constants/network":3216,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/network");var s={version:55,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,n.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,((e,t)=>{var r;return(null===(r=i.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??o})),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId.UNKNOWN,delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};r.default=s;const o="UNKNOWN";i.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},i.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},i.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}],[141,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:56,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=56;const{PreferencesController:r}=t.data;return Array.isArray(null==r?void 0:r.tokens)&&(r.tokens=r.tokens.filter((({address:e})=>e))),null!=r&&r.accountTokens&&"object"==typeof r.accountTokens&&Object.keys(r.accountTokens).forEach((e=>{Object.keys(r.accountTokens[e]).forEach((t=>{r.accountTokens[e][t]=r.accountTokens[e][t].filter((({address:e})=>e))}))})),null!=r&&r.assetImages&&"undefined"in r.assetImages&&delete r.assetImages.undefined,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/056.js"}],[142,{"../../../shared/modules/random-id":3245,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("lodash"),s=(n=e("../../../shared/modules/random-id"))&&n.__esModule?n:{default:n};var o={version:57,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=57;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.TransactionController)&&void 0!==t&&t.transactions&&Array.isArray(e.TransactionController.transactions)&&!e.TransactionController.transactions.some((e=>"object"!=typeof e||void 0===e.txParams))&&(e.TransactionController.transactions=(0,i.keyBy)(e.TransactionController.transactions,(e=>(void 0!==e.id&&null!==e.id||(e.id=(0,s.default)()),e.id))));return e}(r),t}};r.default=o}}},{package:"$root$",file:"app/scripts/migrations/057.js"}],[143,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:58,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[144,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");var s={version:59,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=59;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r)){const t=(0,n.groupBy)(Object.values(r),(e=>{var t;return`${null===(t=e.txParams)||void 0===t?void 0:t.nonce}-${e.chainId??e.metamaskNetworkId}`})),s=(0,n.pickBy)(t,(e=>e.some((e=>e.type!==i.TransactionType.cancel&&e.type!==i.TransactionType.retry))));e.TransactionController.transactions=(0,n.keyBy)((0,n.concat)(...Object.values(s)),(e=>e.id))}return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/059.js"}],[145,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const i="2020-08-31";var s={version:60,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=60;const r=function(e){var t;const r=null==e||null===(t=e.NotificationController)||void 0===t?void 0:t.notifications;var s;(0,n.isPlainObject)(r)&&(null===(s=r[2])||void 0===s?void 0:s.date)===i&&delete e.NotificationController.notifications[2];return e}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/060.js"}],[146,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:61,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[147,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:62,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[148,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:63,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,n,i,s,o,a,c;const u=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,l=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,d={};u&&Object.keys(u).forEach((e=>{Object.keys(u[e]).forEach((t=>{const r=u[e][t];d[t]===undefined?d[t]={[e]:r}:d[t]={...d[t],[e]:r}}))}));const h={};l&&Object.keys(l).forEach((e=>{Object.keys(l[e]).forEach((t=>{const r=l[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=d,e.TokensController.allIgnoredTokens=h):e.TokensController={allTokens:d,allIgnoredTokens:h};return null==e||(null===(n=e.PreferencesController)||void 0===n||delete n.accountHiddenTokens),null==e||null===(i=e.PreferencesController)||void 0===i||delete i.accountTokens,null==e||null===(s=e.PreferencesController)||void 0===s||delete s.assetImages,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.hiddenTokens,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.tokens,null==e||null===(c=e.PreferencesController)||void 0===c||delete c.suggestedTokens,e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[149,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/transaction");const s="sentEther";var o={version:64,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r))for(const e of Object.values(r))e.type===s&&(e.type=i.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===s&&(e.type=i.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}};r.default=o}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[15,{"../../../../shared/constants/network":3216,"@metamask/eth-json-rpc-infura":1013,"@metamask/eth-json-rpc-middleware":1040,"eth-block-tracker":1960,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({network:e,projectId:t}){const r=(0,s.createInfuraMiddleware)({network:e,projectId:t,maxAttempts:5,source:"metamask"}),a=(0,i.providerFromMiddleware)(r),u=new o.PollingBlockTracker({provider:a});return{networkMiddleware:(0,n.mergeMiddleware)([c({network:e}),(0,i.createBlockCacheMiddleware)({blockTracker:u}),(0,i.createInflightCacheMiddleware)(),(0,i.createBlockRefMiddleware)({blockTracker:u,provider:a}),(0,i.createRetryOnEmptyMiddleware)({blockTracker:u,provider:a}),(0,i.createBlockTrackerInspectorMiddleware)({blockTracker:u}),r]),blockTracker:u}};var n=e("json-rpc-engine"),i=e("@metamask/eth-json-rpc-middleware"),s=e("@metamask/eth-json-rpc-infura"),o=e("eth-block-tracker"),a=e("../../../../shared/constants/network");function c({network:e}){if(!a.BUILT_IN_NETWORKS[e])throw new Error(`createInfuraClient - unknown network "${e}"`);const{chainId:t,networkId:r}=a.BUILT_IN_NETWORKS[e];return(0,n.createScaffoldMiddleware)({eth_chainId:t,net_version:r})}}}},{package:"$root$",file:"app/scripts/controllers/network/createInfuraClient.js"}],[150,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:65,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[151,{"../../../shared/constants/hardware-wallets":3213,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/hardware-wallets");var s={version:66,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?i.LedgerTransportTypes.webhid:i.LedgerTransportTypes.u2f,n=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),s={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:n?i.LedgerTransportTypes.live:r}};return delete s.PreferencesController.useLedgerLive,s}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[1517,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */
!function(e){function n(e){return parseInt(e)===e}function i(e){if(!n(e.length))return!1;for(var t=0;t<e.length;t++)if(!n(e[t])||e[t]<0||e[t]>255)return!1;return!0}function s(e,t){if(e.buffer&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!i(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(n(e.length)&&i(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function o(e){return new Uint8Array(e)}function a(e,t,r,n,i){null==n&&null==i||(e=e.slice?e.slice(n,i):Array.prototype.slice.call(e,n,i)),t.set(e,r)}var c,u={toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var n=e.charCodeAt(r++);37===n?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(n)}return s(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var n=e[r];n<128?(t.push(String.fromCharCode(n)),r++):n>191&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}},l=(c="0123456789abcdef",{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(c[(240&n)>>4]+c[15&n])}return t.join("")}}),d={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],p=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],m=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],g=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],y=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],w=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],b=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],v=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],_=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],E=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],k=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],T=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],P=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],A=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function I(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var S=function(e){if(!(this instanceof S))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(e,!0)}),this._prepare()};S.prototype._prepare=function(){var e=d[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(e+1),i=this.key.length/4,s=I(this.key);for(t=0;t<i;t++)r=t>>2,this._Ke[r][t%4]=s[t],this._Kd[e-r][t%4]=s[t];for(var o,a=0,c=i;c<n;){if(o=s[i-1],s[0]^=f[o>>16&255]<<24^f[o>>8&255]<<16^f[255&o]<<8^f[o>>24&255]^h[a]<<24,a+=1,8!=i)for(t=1;t<i;t++)s[t]^=s[t-1];else{for(t=1;t<i/2;t++)s[t]^=s[t-1];o=s[i/2-1],s[i/2]^=f[255&o]^f[o>>8&255]<<8^f[o>>16&255]<<16^f[o>>24&255]<<24;for(t=i/2+1;t<i;t++)s[t]^=s[t-1]}for(t=0;t<i&&c<n;)u=c>>2,l=c%4,this._Ke[u][l]=s[t],this._Kd[e-u][l]=s[t++],c++}for(var u=1;u<e;u++)for(var l=0;l<4;l++)o=this._Kd[u][l],this._Kd[u][l]=k[o>>24&255]^T[o>>16&255]^P[o>>8&255]^A[255&o]},S.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],n=I(e),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=m[n[i]>>24&255]^g[n[(i+1)%4]>>16&255]^y[n[(i+2)%4]>>8&255]^w[255&n[(i+3)%4]]^this._Ke[s][i];n=r.slice()}var a,c=o(16);for(i=0;i<4;i++)a=this._Ke[t][i],c[4*i]=255&(f[n[i]>>24&255]^a>>24),c[4*i+1]=255&(f[n[(i+1)%4]>>16&255]^a>>16),c[4*i+2]=255&(f[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(f[255&n[(i+3)%4]]^a);return c},S.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],n=I(e),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=b[n[i]>>24&255]^v[n[(i+3)%4]>>16&255]^_[n[(i+2)%4]>>8&255]^E[255&n[(i+1)%4]]^this._Kd[s][i];n=r.slice()}var a,c=o(16);for(i=0;i<4;i++)a=this._Kd[t][i],c[4*i]=255&(p[n[i]>>24&255]^a>>24),c[4*i+1]=255&(p[n[(i+3)%4]>>16&255]^a>>16),c[4*i+2]=255&(p[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(p[255&n[(i+1)%4]]^a);return c};var x=function(e){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new S(e)};x.prototype.encrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)a(e,r,0,n,n+16),a(r=this._aes.encrypt(r),t,n);return t},x.prototype.decrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)a(e,r,0,n,n+16),a(r=this._aes.decrypt(r),t,n);return t};var C=function(e,t){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastCipherblock=s(t,!0),this._aes=new S(e)};C.prototype.encrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){a(e,r,0,n,n+16);for(var i=0;i<16;i++)r[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(r),a(this._lastCipherblock,t,n)}return t},C.prototype.decrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){a(e,r,0,n,n+16),r=this._aes.decrypt(r);for(var i=0;i<16;i++)t[n+i]=r[i]^this._lastCipherblock[i];a(e,this._lastCipherblock,0,n,n+16)}return t};var j=function(e,t,r){if(!(this instanceof j))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=o(16);r||(r=1),this.segmentSize=r,this._shiftRegister=s(t,!0),this._aes=new S(e)};j.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=s(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)r[n+i]^=t[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},j.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=s(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)r[n+i]^=t[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var B=function(e,t){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastPrecipher=s(t,!0),this._lastPrecipherIndex=16,this._aes=new S(e)};B.prototype.encrypt=function(e){for(var t=s(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},B.prototype.decrypt=B.prototype.encrypt;var N=function(e){if(!(this instanceof N))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=o(16),this.setValue(e)):this.setBytes(e)};N.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");if(e>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var t=15;t>=0;--t)this._counter[t]=e%256,e=parseInt(e/256)},N.prototype.setBytes=function(e){if(16!=(e=s(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},N.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var O=function(e,t){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof N||(t=new N(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new S(e)};O.prototype.encrypt=function(e){for(var t=s(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},O.prototype.decrypt=O.prototype.encrypt;var L={AES:S,Counter:N,ModeOfOperation:{ecb:x,cbc:C,cfb:j,ofb:B,ctr:O},utils:{hex:l,utf8:u},padding:{pkcs7:{pad:function(e){var t=16-(e=s(e,!0)).length%16,r=o(e.length+t);a(e,r);for(var n=e.length;n<r.length;n++)r[n]=t;return r},strip:function(e){if((e=s(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var r=e.length-t,n=0;n<t;n++)if(e[r+n]!==t)throw new Error("PKCS#7 invalid padding byte");var i=o(r);return a(e,i,0,0,r),i}}},_arrayTest:{coerceArray:s,createArray:o,copyArray:a}};void 0!==r?t.exports=L:"function"==typeof define&&define.amd?define([],(function(){return L})):(e.aesjs&&(L._aesjs=e.aesjs),e.aesjs=L)}(this)}}},{package:"ethereumjs-wallet>aes-js",file:"node_modules/aes-js/index.js"}],[152,{"../../../shared/constants/network":3216,"bignumber.js":1699,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("lodash"),s=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/network");const a=e=>new s.default(e||"0x0",16).gt(0);var c={version:67,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,n;const i=(null==e?void 0:e.PreferencesController)||{},s=i.preferences||{};if(s.showTestNetworks)return e;const c=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},u=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},l=(null===(n=e.CachedBalancesController)||void 0===n?void 0:n.cachedBalances)||{},d=o.TEST_CHAINS.includes(null==u?void 0:u.chainId),h=Object.values(c).some((({chainId:e})=>o.TEST_CHAINS.includes(e))),f=o.TEST_CHAINS.some((e=>Object.values(l[e]||{}).some(a))),p=d||h||f;return{...e,PreferencesController:{...i,preferences:{...s,showTestNetworks:p}}}}(t.data);return t.data=r,t}};r.default=c}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[153,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:68,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=68;const r=function(e){const{PermissionsController:t={},PermissionsMetadata:r={},...n}=e,{domainMetadata:i={},permissionsHistory:a={},permissionsLog:c=[]}=r;return{...n,PermissionController:s(t),PermissionLogController:{permissionActivityLog:c,permissionHistory:a},SubjectMetadataController:o(i)}}(t.data);return t.data=r,t}};function s(e){const{domains:t={}}=e;return{subjects:Object.entries(t).reduce(((e,[t,r])=>{const{permissions:[n]}=r,i=n.caveats.find((e=>"exposedAccounts"===e.name)),s={...n,caveats:[{type:"restrictReturnedAccounts",value:i.value}]};return delete s["@context"],e[t]={origin:t,permissions:{eth_accounts:s}},e}),{})}}function o(e){return{subjectMetadata:Object.entries(e).reduce(((e,[t,r])=>{const{name:n=null,icon:i=null,extensionId:s=null,...o}=r;return delete o.lastUpdated,delete o.host,t&&(e[t]={name:n,iconUrl:i,extensionId:s,...o,origin:t}),e}),{})}}r.default=i}}},{package:"$root$",file:"app/scripts/migrations/068.js"}],[154,{"@metamask/subject-metadata-controller":1194,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/subject-metadata-controller"),i=e("lodash");var s={version:69,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=69;const r=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?n.SubjectType.Extension:n.SubjectType.Website)}))}return e}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[155,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:70,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=70;const r=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[156,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:71,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=71;const r=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[1564,{_process:2832,timers:3093},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e,t){(function(){class n{constructor(e){this.tasks=[],this.count=e}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let e=this.tasks.shift();if(e===undefined)throw"Unexpected undefined value in tasks list";e()}}acquire(){return new Promise(((r,n)=>{this.tasks.push((()=>{var e=!1;r((()=>{e||(e=!0,this.count++,this.sched())}))})),e&&e.nextTick?e.nextTick(this.sched.bind(this)):t(this.sched.bind(this))}))}use(e){return this.acquire().then((t=>e().then((e=>(t(),e))).catch((e=>{throw t(),e}))))}}r.Semaphore=n;r.Mutex=class extends n{constructor(){super(1)}}}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"await-semaphore",file:"node_modules/await-semaphore/index.js"}],[157,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:72,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=72;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[158,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:73,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=73;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[159,{"../../../shared/constants/network":3216,"bignumber.js":1699,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("lodash"),s=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/network");const a=e=>new s.default(e||"0x0",16).gt(0),c=["0x3","0x2a","0x4"],u={"0x3":{rpcUrl:(0,o.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,o.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,o.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};var l={version:74,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=74;const r=function(e){var t,r;const n=(null==e?void 0:e.PreferencesController)||{},s=n.preferences||{},o=(null==e?void 0:e.NetworkController)||{},l=(null==o?void 0:o.provider)||{},d=c.filter((e=>e===(null==l?void 0:l.chainId)));if(!s.showTestNetworks&&0===d.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},f=(null===(r=e.CachedBalancesController)||void 0===r?void 0:r.cachedBalances)||{},p=Object.values(h).filter((({chainId:e})=>c.includes(e))).map((({chainId:e})=>e)),m=c.filter((e=>Object.values(f[e]||{}).some(a))),g=(0,i.uniq)([...m,...p,...d]),y=n.frequentRpcListDetail??[];g.forEach((e=>{y.find((t=>t.chainId===e))||y.unshift({rpcUrl:u[e].rpcUrl,chainId:e,ticker:u[e].ticker,nickname:u[e].nickname,rpcPrefs:{}})})),y.length&&(n.frequentRpcListDetail=y);if(d.length){const e=d[0];o.provider={...o.provider,type:"rpc",rpcUrl:u[e].rpcUrl,chainId:e,nickname:u[e].nickname,ticker:u[e].ticker}}return{...e,PreferencesController:{...n},NetworkController:{...o}}}(t.data);return t.data=r,t}};r.default=l}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[16,{"../../../../shared/constants/time":3221,"@metamask/eth-json-rpc-middleware":1040,"eth-block-tracker":1960,"json-rpc-engine":2529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({rpcUrl:e,chainId:t}){const r={},a=(0,i.createFetchMiddleware)({rpcUrl:e}),c=(0,i.providerFromMiddleware)(a),u=new s.PollingBlockTracker({...r,provider:c}),l=[];return{networkMiddleware:(0,n.mergeMiddleware)([...l,o(t),(0,i.createBlockRefRewriteMiddleware)({blockTracker:u}),(0,i.createBlockCacheMiddleware)({blockTracker:u}),(0,i.createInflightCacheMiddleware)(),(0,i.createBlockTrackerInspectorMiddleware)({blockTracker:u}),a]),blockTracker:u}};var n=e("json-rpc-engine"),i=e("@metamask/eth-json-rpc-middleware"),s=e("eth-block-tracker");e("../../../../shared/constants/time");function o(e){return(t,r,n,i)=>"eth_chainId"===t.method?(r.result=e,i()):n()}}}},{package:"$root$",file:"app/scripts/controllers/network/createJsonRpcClient.js"}],[160,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:75,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=75;const r=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[161,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:76,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=76;const r=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:r,ignoredCollectibles:n,...i}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...r?{allNfts:r}:{},...n?{ignoredNfts:n}:{},...i},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[162,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:77,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=77;const r=function(e){const t=(null==e?void 0:e.TokenListController)||{},{tokensChainsCache:r}=t;let n,i;for(const e in r){if(n=r[e].data,i={},Array.isArray(n))for(const e of n)i[e.address]=e;else if(Object.keys(n)[0].toLowerCase()!==n[Object.keys(n)[0]].address.toLowerCase())for(const e in n)i[n[e].address]=n[e];r[e].data=Object.keys(i).length>0?i:n}return t.tokensChainsCache=r,{...e,TokenListController:{...t}}}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/077.js"}],[163,{"@metamask/utils":1202,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=78,t.data=function(e){if(!(0,i.hasProperty)(e,"PhishingController")||!(0,i.isObject)(e.PhishingController))return e;const{PhishingController:t}=e;return delete t.phishing,delete t.lastFetched,e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");r.version=78}}},{package:"$root$",file:"app/scripts/migrations/078.ts"}],[164,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:79,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=79;const r=function(e){var t,r;(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.collectiblesDetectionNoticeDismissed)!==undefined&&delete e.AppStateController.collectiblesDetectionNoticeDismissed;(null==e||null===(r=e.metamask)||void 0===r?void 0:r.collectiblesDropdownState)!==undefined&&delete e.metamask.collectiblesDropdownState;return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/079.js"}],[165,{lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var i={version:80,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=80;const r=function(e){var t;(null==e||null===(t=e.metamask)||void 0===t?void 0:t.showPortfolioTooltip)!==undefined&&delete e.metamask.showPortfolioTooltip;return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/080.js"}],[166,{"@metamask/utils":1202,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);t.meta.version=81;const r=function(e){if(!(0,i.hasProperty)(e,"SnapController")||!(0,i.hasProperty)(e,"PermissionController")||!(0,i.isObject)(e.PermissionController))return e;const{PermissionController:t}=e,{subjects:r}=t;if(!(0,i.isObject)(r))return e;const s="wallet_snap_";for(const[t,o]of Object.entries(r)){if(!(0,i.isObject)(o)||!(0,i.isObject)(o.permissions))return e;let r,a=1;const{permissions:c}=o,u={...c};for(const[o,l]of Object.entries(c))if(o.startsWith(s)){if(!(0,i.isObject)(l)||!(0,i.hasProperty)(l,"id")||!(0,i.hasProperty)(l,"date"))return e;if((0,i.hasProperty)(u,"wallet_snap")||(u.wallet_snap={caveats:[{type:"snapIds",value:{}}],invoker:t,parentCapability:"wallet_snap"}),!(0,i.isObject)(u.wallet_snap))return e;if(!(0,n.isArray)(u.wallet_snap.caveats))return e;const c=o.slice(s.length),d=u.wallet_snap.caveats[0];if(!(0,i.isObject)(d))return e;if(!(0,i.hasProperty)(d,"type")||"snapIds"!==d.type||!(0,i.hasProperty)(d,"value")||!(0,i.isObject)(d.value))return e;if(d.value[c]={},"number"!=typeof l.date||"string"!=typeof l.id)return e;l.date>a&&(a=l.date,r=l.id),delete u[o]}u.wallet_snap&&(u.wallet_snap.date=a,u.wallet_snap.id=r,o.permissions=u)}return e}(t.data);return t.data=r,t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");r.version=81}}},{package:"$root$",file:"app/scripts/migrations/081.ts"}],[167,{"@metamask/utils":1202,lodash:2737,uuid:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=82,t.data=function(e){if(!((0,i.hasProperty)(e,"PreferencesController")&&(0,i.isObject)(e.PreferencesController)&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&Array.isArray(e.PreferencesController.frequentRpcListDetail)&&e.PreferencesController.frequentRpcListDetail.every(i.isObject)))return e;const{PreferencesController:t,NetworkController:r}=e,{frequentRpcListDetail:n}=t;if(!Array.isArray(n))return e;const o=n.reduce(((e,{rpcUrl:t,chainId:r,ticker:n,nickname:i,rpcPrefs:o})=>({...e,[(0,s.v4)()]:{rpcUrl:t,chainId:r,ticker:n,rpcPrefs:o,nickname:i}})),{});return delete t.frequentRpcListDetail,{...e,NetworkController:{...r,networkConfigurations:o},PreferencesController:{...t}}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils"),s=e("uuid");r.version=82}}},{package:"$root$",file:"app/scripts/migrations/082.ts"}],[168,{"../../../shared/constants/transaction":3223,lodash:2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){return function(s){const o=(0,n.cloneDeep)(s);o.meta.version=e;try{const e=function(e,t,r){const n=e,{TransactionController:s}=n;if(s&&s.transactions){const{transactions:e}=s;n.TransactionController.transactions=e.map((e=>t(e)?(e.status=i.TransactionStatus.failed,e.err={message:r,note:`Tx automatically failed by migration because ${r}`},e):e))}return n}(o.data,r,t);o.data=e}catch(t){console.warn(`MetaMask Migration #${e}${t.stack}`)}return Promise.resolve(o)}};var n=e("lodash"),i=e("../../../shared/constants/transaction")}}},{package:"$root$",file:"app/scripts/migrations/fail-tx.js"}]],[],{});