LavaPack.loadBundle([[10,{"@metamask/assets-controllers":1363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AssetsContractControllerInit=void 0;var n=e("@metamask/assets-controllers");r.AssetsContractControllerInit=({controllerMessenger:e,getGlobalChainId:t})=>({controller:new n.AssetsContractController({messenger:e,chainId:t()}),memStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/assets/assets-contract-controller-init.ts"}],[100,{"../../../shared/notifications":5930,"../../../test/e2e/default-fixture":5935,"../../../test/e2e/fixture-builder":5936,"../lib/encryptor-factory":130,"./with-address-book":101,"./with-app-state":102,"./with-confirmed-transactions":103,"./with-erc20-tokens":104,"./with-networks":105,"./with-preferences":106,"./with-unread-notifications":107,"@metamask/base-controller":1402,"@metamask/keyring-controller":2053,"@metamask/scure-bip39/dist/wordlists/english":2626,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.generateWalletState=async function(){const e=new u.default({inputChainId:"0xaa36a7"}),{vault:r,accounts:n}=await async function(e,r){const n=(new s.Messenger).getRestricted({name:"KeyringController"}),o=new i.KeyringController({encryptor:(0,l.encryptorFactory)(6e5),messenger:n}),c=t.from(e),u=e=>{const t=e.toString().split(" ").map((e=>a.wordlist.indexOf(e)));return new Uint8Array(new Uint16Array(t).buffer)};await o.createNewVaultAndRestore(r,u(c));const d=[],h=o.state.keyrings[0].accounts[0];d.push(h);for(let e=1;e<b.withAccounts;e++){const t=await o.addNewAccount(e);d.push(t)}const{vault:f}=o.state;return{vault:f,accounts:d}}(c.E2E_SRP,null);return e.withAccountsController(function(e){console.log("Generating AccountsController state");const t={selectedAccount:"account-id",accounts:{}};return e.forEach(((e,r)=>{t.accounts[`acount-id-${r}`]={selectedAccount:"account-id",id:"account-id",address:e,metadata:{name:`Account ${r+1}`,lastSelected:16655076e5,keyring:{type:"HD Key Tree"}},options:{},methods:["personal_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa"}})),{internalAccounts:t}}(n)).withAddressBookController(function(){console.log("Generating AddressBookController state");const e=b.withContacts;if(e>0)return(0,m.withAddressBook)(e);return{}}()).withAnnouncementController(function(){console.log("Generating AnnouncementController state");return Object.keys(o.UI_NOTIFICATIONS).reduce(((e,t)=>(e[t]={...o.UI_NOTIFICATIONS[t],isShown:!0},e)),{})}()).withAppStateController(d.FIXTURES_APP_STATE).withKeyringController(function(e){return console.log("Generating KeyringController state"),{...(0,c.defaultFixture)().data.KeyringController,vault:e}}(r)).withNetworkController(function(){console.log("Generating NetworkController state");const e={...(0,c.defaultFixture)().data.NetworkController,networkConfigurations:{},networksMetadata:{sepolia:{EIPS:{1559:!0},status:"available"}},selectedNetworkClientId:"sepolia"};if(b.withNetworks)return{...e,...h.FIXTURES_NETWORKS};return e}()).withNotificationServicesController(function(e){console.log("Generating NotificationController state");let t={};b.withUnreadNotifications>0&&(t=(0,y.withUnreadNotifications)(e,b.withUnreadNotifications));return t}(n[0])).withPreferencesController(function(e){console.log("Generating PreferencesController state");let t={};b.withPreferences&&(t=f.FIXTURES_PREFERENCES);return t.identities=Object.assign(...e.map(((e,t)=>({[e]:{address:e,lastSelected:1725363500048,name:`Account ${t+1}`}})))),t.lostIdentities=Object.assign(...e.map(((e,t)=>({[e]:{address:e,lastSelected:1725363500048,name:`Account ${t+1}`}})))),t}(n)).withTokensController(function(e){console.log("Generating TokensController state");const t=p.FIXTURES_ERC20_TOKENS;if(b.withErc20Tokens){for(const r of Object.values(t.allTokens))r[e]=r.myAccount,delete r.myAccount;return t}return{}}(n[0])).withTransactionController(function(e){console.log("Generating TransactionController state");let t={};b.withConfirmedTransactions>0&&(t=(0,g.withConfirmedTransactions)(e,b.withConfirmedTransactions));return t}(n[0])),e.fixture.data};var n,s=e("@metamask/base-controller"),i=e("@metamask/keyring-controller"),a=e("@metamask/scure-bip39/dist/wordlists/english"),o=e("../../../shared/notifications"),c=e("../../../test/e2e/default-fixture"),u=(n=e("../../../test/e2e/fixture-builder"))&&n.__esModule?n:{default:n},l=e("../lib/encryptor-factory"),d=e("./with-app-state"),h=e("./with-networks"),f=e("./with-preferences"),p=e("./with-erc20-tokens"),m=e("./with-address-book"),g=e("./with-confirmed-transactions"),y=e("./with-unread-notifications");const b={}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/fixtures/generate-wallet-state.js"}],[101,{"../../../shared/constants/network":5839},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withAddressBook=void 0;var n=e("../../../shared/constants/network");const s=()=>{let e="0x";for(let t=0;t<40;t++)e+="0123456789abcdef"[Math.floor(16*Math.random())];return e};r.withAddressBook=e=>{const t=[n.CHAIN_IDS.MAINNET,n.CHAIN_IDS.SEPOLIA],r={};return t.forEach((t=>{r[t]={};for(let n=1;n<=e;n++){const e=s();r[t][e]={address:e,chainId:t,isEns:!1,memo:"",name:`Contact ${n}`}}})),{addressBook:r}}}}},{package:"$root$",file:"app/scripts/fixtures/with-address-book.js"}],[102,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FIXTURES_APP_STATE=void 0;r.FIXTURES_APP_STATE={showProductTour:!1}}}},{package:"$root$",file:"app/scripts/fixtures/with-app-state.js"}],[103,{"../../../shared/constants/network":5839,uuid:5768},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withConfirmedTransactions=void 0;var n=e("uuid"),s=e("../../../shared/constants/network");r.withConfirmedTransactions=(e,t)=>{const r=[s.CHAIN_IDS.MAINNET,s.CHAIN_IDS.SEPOLIA],i={};return r.forEach((r=>{for(let s=0;s<t;s++){const t=(0,n.v4)(),s={chainId:r,dappSuggestedGasFees:{gas:"0x5208",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00"},history:[{chainId:r,dappSuggestedGasFees:{gas:"0x5208",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00"},id:t,loadingDefaults:!0,origin:"https://metamask.github.io",status:"confirmed",time:Date.now(),txParams:{from:e,gas:"0x5208",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00",to:"0x2f318c334780961fb129d2a6c30d0763d9a5c970",value:"0x29a2241af62c0000"},type:"simpleSend"},[{note:"Added new confirmed transaction.",op:"replace",path:"/loadingDefaults",timestamp:Date.now(),value:!1},{op:"add",path:"/simulationData",value:{error:{code:"disabled",message:"Simulation disabled"},tokenBalanceChanges:[]},note:"TransactionController#updateSimulationData - Update simulation data",timestamp:Date.now()}]],simulationData:{error:{code:"disabled",message:"Simulation disabled"},tokenBalanceChanges:[]},id:t,loadingDefaults:!1,origin:"https://metamask.github.io",status:"confirmed",time:Date.now(),txParams:{from:e,gas:"0x5208",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00",to:"0x2f318c334780961fb129d2a6c30d0763d9a5c970",value:"0x29a2241af62c0000"},type:"simpleSend"};i[t]=s}})),{transactions:i}}}}},{package:"$root$",file:"app/scripts/fixtures/with-confirmed-transactions.js"}],[104,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FIXTURES_ERC20_TOKENS=void 0;const n=[{address:"0x6B175474E89094C44Da98b954EedeAC495271d0F",symbol:"DAI",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0x6b175474e89094c44da98b954eedeac495271d0f.png",isERC721:!1,aggregators:[]},{address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",symbol:"USDC",decimals:6,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",isERC721:!1,aggregators:[]},{address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",symbol:"USDT",decimals:6,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0xdAC17F958D2ee523a2206206994597C13D831ec7.png",isERC721:!1,aggregators:[]},{address:"0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F",symbol:"SNX",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F.png",isERC721:!1,aggregators:[]},{address:"0x111111111117dC0aa78b770fA6A738034120C302",symbol:"1INCH",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0x111111111117dC0aa78b770fA6A738034120C302.png",isERC721:!1,aggregators:[]},{address:"0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0",symbol:"MATIC",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0.png",isERC721:!1,aggregators:[]},{address:"0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE",symbol:"SHIB",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE.png",isERC721:!1,aggregators:[]},{address:"0xFd09911130e6930Bf87F2B0554c44F400bD80D3e",symbol:"ETHIX",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0xFd09911130e6930Bf87F2B0554c44F400bD80D3e.png",isERC721:!1,aggregators:[]}];r.FIXTURES_ERC20_TOKENS={tokens:n,ignoredTokens:[],detectedTokens:[],allTokens:{"0x1":{myAccount:n}},allIgnoredTokens:{},allDetectedTokens:{}}}}},{package:"$root$",file:"app/scripts/fixtures/with-erc20-tokens.js"}],[105,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FIXTURES_NETWORKS=void 0;r.FIXTURES_NETWORKS={providerConfig:{chainId:"0xaa36a7",rpcPrefs:{blockExplorerUrl:"https://sepolia.etherscan.io"},ticker:"SepoliaETH",type:"sepolia"},networkConfigurations:{networkConfigurationId:{chainId:"0xaa36a7",nickname:"Sepolia",rpcPrefs:{},rpcUrl:"https://sepolia.infura.io/v3/",ticker:"SepoliaETH",networkConfigurationId:"networkConfigurationId"},optimism:{chainId:"0xa",id:"optimism",nickname:"OP Mainnet",rpcPrefs:{blockExplorerUrl:"https://optimistic.etherscan.io/",imageUrl:"./images/optimism.svg"},rpcUrl:"https://optimism-mainnet.infura.io/v3/",ticker:"ETH"},base:{chainId:"0x2105",id:"base",nickname:"Base Mainnet",rpcPrefs:{blockExplorerUrl:"https://basescan.org",imageUrl:"./images/base.svg"},rpcUrl:"https://mainnet.base.org",ticker:"ETH"},polygon:{chainId:"0x89",id:"polygon",nickname:"Polygon Mainnet",rpcPrefs:{blockExplorerUrl:"https://polygonscan.com/",imageUrl:"./images/matic-token.svg"},rpcUrl:"https://polygon-mainnet.infura.io/v3/",ticker:"MATIC"},binance:{chainId:"0x38",id:"binance",nickname:"BNB Chain",rpcPrefs:{blockExplorerUrl:"https://bscscan.com/",imageUrl:"./images/bnb.svg"},rpcUrl:"https://bsc-dataseed.binance.org/",ticker:"BNB"},gnosis:{id:"gnosis",rpcUrl:"https://rpc.gnosischain.com",chainId:"0x64",ticker:"XDAI",nickname:"Gnosis",rpcPrefs:{blockExplorerUrl:"https://gnosisscan.io",imageUrl:"./images/gnosis.svg"}},arbitrum:{id:"arbitrum",rpcUrl:"https://arbitrum-mainnet.infura.io/v3/",chainId:"0xa4b1",ticker:"ETH",nickname:"Arbitrum One",rpcPrefs:{blockExplorerUrl:"https://explorer.arbitrum.io",imageUrl:"./images/arbitrum.svg"}},avalanche:{id:"avalanche",rpcUrl:"https://avalanche-mainnet.infura.io/v3/",chainId:"0xa86a",ticker:"AVAX",nickname:"Avalanche Network C-Chain",rpcPrefs:{blockExplorerUrl:"https://snowtrace.io/",imageUrl:"./images/avax-token.svg"}},celo:{id:"celo",rpcUrl:"https://celo-mainnet.infura.io/v3/",chainId:"0xa4ec",ticker:"CELO",nickname:"Celo Mainnet",rpcPrefs:{blockExplorerUrl:"https://celoscan.io",imageUrl:"./images/celo.svg"}},zkSync:{id:"zkSync",rpcUrl:"https://mainnet.era.zksync.io",chainId:"0x144",ticker:"ETH",nickname:"zkSync Era Mainnet",rpcPrefs:{blockExplorerUrl:"https://explorer.zksync.io/",imageUrl:"./images/zk-sync.svg"}},localhost:{id:"localhost",rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{blockExplorerUrl:"",imageUrl:""}}}}}}},{package:"$root$",file:"app/scripts/fixtures/with-networks.js"}],[106,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FIXTURES_PREFERENCES=void 0;r.FIXTURES_PREFERENCES={preferences:{hideZeroBalanceTokens:!1,showExtensionInFullSizeView:!1,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,useNativeCurrencyAsPrimaryCurrency:!0,petnamesEnabled:!0,featureNotificationsEnabled:!0,showTokenAutodetectModal:!1,showNftAutodetectModal:!1,showConfirmationAdvancedDetails:!1,privacyMode:!1},featureFlags:{sendHexData:!0},firstTimeFlowType:"import",completedOnboarding:!0,currentLocale:"en",knownMethodData:{},use4ByteResolution:!0,participateInMetaMetrics:!0,dataCollectionForMarketing:!0,useNftDetection:!0,usePhishDetect:!0,useTokenDetection:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,theme:"light",useExternalNameSources:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0,useExternalServices:!0,isBackupAndSyncEnabled:!0,isAccountSyncingEnabled:!0}}}},{package:"$root$",file:"app/scripts/fixtures/with-preferences.js"}],[107,{uuid:5768},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withUnreadNotifications=void 0;var n=e("uuid");r.withUnreadNotifications=(e,t)=>{const r=[];for(let s=0;s<t;s++){const t=(0,n.v4)(),s=(0,n.v4)(),i=`0x${(0,n.v4)().replace(/-/gu,"").padEnd(64,"0")}`,a={address:e,block_number:59796924,block_timestamp:"1721922504",chain_id:1,created_at:(new Date).toISOString(),data:{to:e,from:e,kind:"eth_received",amount:{eth:"0.000100000000000000",usd:"0.27"},network_fee:{gas_price:"30000000078",native_token_price_in_usd:"0.497927"}},id:t,trigger_id:s,tx_hash:i,unread:!0,type:"eth_received",createdAt:(new Date).toISOString(),isRead:!1};r.push(a)}return{isFeatureAnnouncementsEnabled:!0,isMetamaskNotificationsFeatureSeen:!0,isNotificationServicesEnabled:!0,metamaskNotificationsReadList:[],metamaskNotificationsList:r}}}}},{package:"$root$",file:"app/scripts/fixtures/with-unread-notifications.js"}],[108,{"@metamask/name-controller":2307},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChangeType=r.AbstractPetnamesBridge=void 0;var n=e("@metamask/name-controller");function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r){a(e,t),t.set(e,r)}function a(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t){return e.get(u(e,t))}function c(e,t,r){return e.set(u(e,t),r),r}function u(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}let l=r.ChangeType=function(e){return e.ADDED="ADDED",e.UPDATED="UPDATED",e.DELETED="DELETED",e}({});var d=function(e){return e.SOURCE_TO_PETNAMES="Source->Petnames",e.PETNAMES_TO_SOURCE="Petnames->Source",e}(d||{});function h({type:e,variation:t,value:r}){return`${e}/${t}/${e===n.NameType.ETHEREUM_ADDRESS?r.toLowerCase():r}`}var f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakSet;function y(e){if(o(m,this)===e)throw new Error(`Attempted to synchronize recursively in same direction: ${e}`);if(null!==o(m,this))return;c(m,this,e);const[t,r]="Source->Petnames"===e?[this.getSourceEntries(),u(g,this,b).call(this)]:[u(g,this,b).call(this),this.getSourceEntries()],n=u(g,this,v).call(this,r,t);u(g,this,k).call(this,n),c(m,this,null)}function b(){const{names:e}=o(p,this).state,t=[];for(const r of Object.values(n.NameType))for(const n of Object.keys(e[r]))for(const s of Object.keys(e[r][n])){const{name:i,sourceId:a,origin:o}=e[r][n][s];if(!i)continue;const c={value:n,type:r,name:i,variation:s,sourceId:a??undefined,origin:o??undefined};this.shouldSyncPetname(c)&&t.push(c)}return t}function w(e,t){e===l.DELETED?(delete t.sourceId,delete t.origin,o(p,this).setName({...t,name:null})):o(p,this).setName(t)}function v(e,t){const r=[],n=[],s=[],i=new Map(e.map((e=>[h(e),e]))),a=new Map(t.map((e=>[h(e),e])));return a.forEach(((e,t)=>{const s=i.get(t);s?e.name!==s.name&&n.push(e):r.push(e)})),i.forEach(((e,t)=>{a.has(t)||s.push(e)})),{[l.ADDED]:r,[l.UPDATED]:n,[l.DELETED]:s}}function k(e){const t=o(m,this)===d.SOURCE_TO_PETNAMES?u(g,this,w).bind(this):this.updateSourceEntry.bind(this);for(const r of Object.values(l))for(const n of e[r])t(r,n)}r.AbstractPetnamesBridge=class{constructor({isTwoWay:e,nameController:t,messenger:r}){var n,o;a(n=this,o=g),o.add(n),i(this,f,void 0),i(this,p,void 0),i(this,m,null),s(this,"messenger",void 0),c(f,this,e),c(p,this,t),this.messenger=r}init(){o(f,this)&&this.messenger.subscribe("NameController:stateChange",(()=>u(g,this,y).call(this,d.PETNAMES_TO_SOURCE))),this.onSourceChange((()=>u(g,this,y).call(this,d.SOURCE_TO_PETNAMES)))}updateSourceEntry(e,t){throw new Error("updateSourceEntry must be overridden for two-way bridges")}shouldSyncPetname(e){return!0}}}}},{package:"$root$",file:"app/scripts/lib/AbstractPetnamesBridge.ts"}],[109,{"./AbstractPetnamesBridge":108,"@metamask/name-controller":2307},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccountIdentitiesPetnamesBridge=void 0;var n=e("@metamask/name-controller"),s=e("./AbstractPetnamesBridge");class i extends s.AbstractPetnamesBridge{constructor({nameController:e,messenger:t}){super({isTwoWay:!1,nameController:e,messenger:t})}getSourceEntries(){return this.messenger.call("AccountsController:listAccounts").map((e=>({value:e.address,type:n.NameType.ETHEREUM_ADDRESS,name:e.metadata.name,sourceId:undefined,variation:n.FALLBACK_VARIATION,origin:n.NameOrigin.ACCOUNT_IDENTITY})))}onSourceChange(e){this.messenger.subscribe("AccountsController:stateChange",e)}shouldSyncPetname(e){return e.origin===n.NameOrigin.ACCOUNT_IDENTITY}}r.AccountIdentitiesPetnamesBridge=i}}},{package:"$root$",file:"app/scripts/lib/AccountIdentitiesPetnamesBridge.ts"}],[11,{"./assets-contract-controller-init":10,"./nft-controller-init":12,"./nft-detection-controller-init":13,"./token-rates-controller-init":14},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AssetsContractControllerInit",{enumerable:!0,get:function(){return a.AssetsContractControllerInit}}),Object.defineProperty(r,"NftControllerInit",{enumerable:!0,get:function(){return s.NftControllerInit}}),Object.defineProperty(r,"NftDetectionControllerInit",{enumerable:!0,get:function(){return i.NftDetectionControllerInit}}),Object.defineProperty(r,"TokenRatesControllerInit",{enumerable:!0,get:function(){return n.TokenRatesControllerInit}});var n=e("./token-rates-controller-init"),s=e("./nft-controller-init"),i=e("./nft-detection-controller-init"),a=e("./assets-contract-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/assets/index.ts"}],[110,{"./AbstractPetnamesBridge":108,"@metamask/name-controller":2307,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookPetnamesBridge=void 0;var n=e("@metamask/name-controller"),s=e("@metamask/utils"),i=e("./AbstractPetnamesBridge");function a(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function o(e,t){return e.get(c(e,t))}function c(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var u=new WeakMap;class l extends i.AbstractPetnamesBridge{constructor({addressBookController:e,nameController:t,messenger:r}){var n,s,i;super({isTwoWay:!0,nameController:t,messenger:r}),a(this,u,void 0),s=this,i=e,(n=u).set(c(n,s),i)}getSourceEntries(){const e=[],{state:t}=o(u,this);for(const r of Object.keys(t.addressBook)){if(!(0,s.isStrictHexString)(r))continue;const i=t.addressBook[r];for(const s of Object.keys(i)){const i=t.addressBook[r][s],a=r.toLowerCase(),{name:o,isEns:c}=i;null!=o&&o.length&&null!=s&&s.length&&e.push({value:s,name:o,variation:a,type:n.NameType.ETHEREUM_ADDRESS,sourceId:c?"ens":undefined,origin:n.NameOrigin.ADDRESS_BOOK})}}return e}updateSourceEntry(e,t){e===i.ChangeType.DELETED?o(u,this).delete(t.variation,t.value):o(u,this).set(t.value,t.name,t.variation)}onSourceChange(e){this.messenger.subscribe("AddressBookController:stateChange",e)}}r.AddressBookPetnamesBridge=l}}},{package:"$root$",file:"app/scripts/lib/AddressBookPetnamesBridge.ts"}],[111,{"@metamask/base-controller":1402,"@metamask/obs-store":2445},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("@metamask/base-controller");function i(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var c=new WeakSet;class u extends n.ObservableStore{constructor({config:e,controllerMessenger:t,state:r,persist:n}){super(r),i(this,c),a(this,"config",{}),this.persist=n,this.controllerMessenger=t,e&&this.updateStructure(e)}updateStructure(e){this.config=e,this.removeAllListeners();const t={};for(const n of Object.keys(e)){var r;if(!e[n])throw new Error(`Undefined '${n}'`);const i=e[n];i.subscribe?e[n].subscribe((e=>{o(c,this,l).call(this,n,e)})):this.controllerMessenger.subscribe(`${i.name}:stateChange`,(t=>{let r=t;this.persist&&(r=(0,s.getPersistentState)(t,e[n].metadata)),o(c,this,l).call(this,n,r)}));const a=i.state??(null===(r=i.getState)||void 0===r?void 0:r.call(i));t[n]=this.persist&&e[n].metadata?(0,s.getPersistentState)(a,e[n].metadata):a}this.updateState(t)}getFlatState(){if(!this.config)return{};let e={};for(const t of Object.keys(this.config)){const r=this.config[t],n=r.getState?r.getState():r.state;e={...e,...n}}return e}}function l(e,t){const r=this.getState()[e];this.updateState({[e]:t}),this.emit("stateChange",{oldState:r,newState:t,controllerKey:e})}r.default=u}}},{package:"$root$",file:"app/scripts/lib/ComposableObservableStore.js"}],[112,{"./state-utils":186,"@metamask/utils":3026,uuid:5768},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PatchStore=void 0;var n=e("@metamask/utils"),s=e("uuid"),i=e("./state-utils");function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=(0,n.createProjectLogger)("patch-store");r.PatchStore=class{constructor(e){a(this,"id",void 0),a(this,"observableStore",void 0),a(this,"pendingPatches",new Map),a(this,"listener",void 0),this.id=(0,s.v4)(),this.observableStore=e,this.listener=this._onStateChange.bind(this),this.observableStore.on("stateChange",this.listener),o("Created",this.id)}flushPendingPatches(){const e=[...this.pendingPatches.values()];this.pendingPatches.clear();for(const t of e)o("Flushed",t.path.join("."),this.id,t);return e}destroy(){this.observableStore.removeListener("stateChange",this.listener),o("Destroyed",this.id)}_onStateChange({oldState:e,newState:t}){const r=(0,i.sanitizeUIState)(t),n=this._generatePatches(e,r),s=Boolean(t.vault);if(s&&n.push({op:"replace",path:["isInitialized"],value:s}),n.length)for(const e of n){const t=e.path.join(".");this.pendingPatches.set(t,e),o("Updated",t,this.id,e)}}_generatePatches(e,t){return Object.keys(t).map((r=>{const n=e[r],s=t[r];return n===s?null:{op:"replace",path:[r],value:s}})).filter(Boolean)}}}}},{package:"$root$",file:"app/scripts/lib/PatchStore.ts"}],[113,{"@metamask/name-controller":2307,"@metamask/snaps-utils":2925,loglevel:4942},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapsNameProvider=void 0;var n,s=e("@metamask/name-controller"),i=e("@metamask/snaps-utils"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n};function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t){return e.get(u(e,t))}function u(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var l=new WeakMap,d=new WeakSet;function h(){const e=c(l,this).call("PermissionController:getState").subjects;return c(l,this).call("SnapController:getAll").filter((({id:t})=>{var r;return null===(r=e[t])||void 0===r?void 0:r.permissions["endowment:name-lookup"]}))}async function f(e,t){const{variation:r,value:n}=t,s=e.id,o={chainId:`eip155:${parseInt(r,16)}`,address:n};let u,d;try{const t=await c(l,this).call("SnapController:handleRequest",{snapId:e.id,origin:"metamask",handler:i.HandlerType.OnNameLookup,request:{jsonrpc:"2.0",method:" ",params:o}}),r=null==t?void 0:t.resolvedDomains;u=r?[...new Set(r.map((e=>e.resolvedDomain)))]:[]}catch(t){a.default.error("Snap name provider request failed",{snapId:e.id,request:o,error:t}),d=t}return{sourceId:s,result:{proposedNames:u,error:d}}}r.SnapsNameProvider=class{constructor({messenger:e}){var t,r,n;!function(e,t){o(e,t),t.add(e)}(this,d),function(e,t,r){o(e,t),t.set(e,r)}(this,l,void 0),r=this,n=e,(t=l).set(u(t,r),n)}getMetadata(){const e=u(d,this,h).call(this);return{sourceIds:{[s.NameType.ETHEREUM_ADDRESS]:e.map((e=>e.id))},sourceLabels:e.reduce(((e,t)=>{const r=c(l,this).call("SnapController:get",t.id),n=null==r?void 0:r.manifest.proposedName;return{...e,[t.id]:n||t.id}}),{})}}async getProposedNames(e){const t=u(d,this,h).call(this);return{results:(await Promise.all(t.map((t=>u(d,this,f).call(this,t,e))))).reduce(((e,t)=>{const{sourceId:r,result:n}=t;return{...e,[r]:n}}),{})}}}}}},{package:"$root$",file:"app/scripts/lib/SnapsNameProvider.ts"}],[114,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.WeakRefObjectMap=void 0;class s{constructor(){n(this,"map",void 0),this.map=new Map}set(e,t){const r={};for(const e in t){if(!Object.prototype.hasOwnProperty.call(t,e))continue;const n=t[e];if("object"!=typeof n||null===n)throw new Error(`Property ${String(e)} is not an object and cannot be weakly referenced.`);r[e]=new WeakRef(n)}return this.map.set(e,r),this}get(e){const t=this.map.get(e);if(!t)return undefined;const r={};for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const s=t[n].deref();if(s===undefined)return this.map.delete(e),undefined;r[n]=s}return r}has(e){return this.get(e)!==undefined}delete(e){return this.get(e)!==undefined&&this.map.delete(e)}clear(){this.map.clear()}get size(){return this.map.size}entries(){const e=[];return this.map.forEach(((t,r)=>{const n=this.get(r);n!==undefined&&e.push([r,n])})),e.values()}keys(){return this.map.keys()}values(){const e=[];return this.map.forEach(((t,r)=>{const n=this.get(r);n!==undefined&&e.push(n)})),e.values()}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return"WeakRefObjectMap"}forEach(e,t){this.map.forEach(((r,n)=>{const s=this.get(n);s!==undefined&&(t?e.call(t,s,n,this):e(s,n,this))}))}}r.WeakRefObjectMap=s}}},{package:"$root$",file:"app/scripts/lib/WeakRefObjectMap.ts"}],[115,{"../../../../shared/constants/app":5824,"@metamask/controller-utils":1542,"@metamask/rpc-errors":2622,"@metamask/snaps-rpc-methods":2766,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.rejectAllApprovals=function({approvalController:e,deleteInterface:t}){const r=e.state.pendingApprovals,n=Object.values(r);for(const r of n)u({approvalController:e,approvalRequest:r,deleteInterface:t})},r.rejectOriginApprovals=function({approvalController:e,deleteInterface:t,origin:r}){const n=e.state.pendingApprovals,s=Object.values(n).filter((e=>e.origin===r));for(const r of s)u({approvalController:e,approvalRequest:r,deleteInterface:t})};var n=e("@metamask/controller-utils"),s=e("@metamask/snaps-rpc-methods"),i=e("@metamask/rpc-errors"),a=e("@metamask/utils"),o=e("../../../../shared/constants/app");const c=(0,a.createProjectLogger)("approval-utils");function u({approvalController:e,approvalRequest:t,deleteInterface:r}){var a;const{id:u,type:l,origin:d}=t,h=null===(a=t.requestData)||void 0===a?void 0:a.id;switch(l){case n.ApprovalType.SnapDialogAlert:case n.ApprovalType.SnapDialogPrompt:case s.DIALOG_APPROVAL_TYPES.default:c("Rejecting snap dialog",{id:u,interfaceId:h,origin:d,type:l}),e.accept(u,null),null==r||r(h);break;case n.ApprovalType.SnapDialogConfirmation:c("Rejecting snap confirmation",{id:u,interfaceId:h,origin:d,type:l}),e.accept(u,!1),null==r||r(h);break;case o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation:case o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval:case o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect:c("Rejecting snap account confirmation",{id:u,origin:d,type:l}),e.accept(u,!1);break;default:c("Rejecting pending approval",{id:u,origin:d,type:l}),e.reject(u,i.providerErrors.userRejectedRequest({data:{cause:"rejectAllApprovals"}}))}}}}},{package:"$root$",file:"app/scripts/lib/approval/utils.ts"}],[116,{"../../../shared/modules/string-utils":5926},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../shared/modules/string-utils");r.default=class{constructor(e={}){const{preferencesController:t,addressBookController:r,accountsController:n,networkController:s,trackMetaMetricsEvent:i}=e;this.preferencesController=t,this.accountsController=n,this.addressBookController=r,this.networkController=s,this._trackMetaMetricsEvent=i}async restoreUserData(e){const t=this.preferencesController.state,{preferences:r,addressBook:n,network:s,internalAccounts:i}=JSON.parse(e);r&&(r.identities=t.identities,r.lostIdentities=t.lostIdentities,r.selectedAddress=t.selectedAddress,this.preferencesController.update(r)),n&&this.addressBookController.update(n,!0),s&&this.networkController.loadBackup(s),i&&this.accountsController.loadBackup(i),(r||n||s||i)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.state},internalAccounts:{internalAccounts:this.accountsController.state.internalAccounts},addressBook:{...this.addressBookController.state},network:{networkConfigurationsByChainId:this.networkController.state.networkConfigurationsByChainId}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),r=new Date,s=e=>(0,n.prependZero)(e,2);return{fileName:`MetaMaskUserData.${r.getFullYear()}_${s(r.getMonth()+1)}_${s(r.getDay())}_${s(r.getHours())}_${s(r.getMinutes())}_${s(r.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/lib/backup.js"}],[117,{"../../../shared/constants/time":5852,loglevel:4942,"readable-stream":5299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.THREE_MINUTES=void 0,r.default=function(){const e=c();return new s.Transform({transform(t,r,n){const s=t.id===undefined,a=e.add(t.id);s||a?n(null,t):(i.default.debug(`RPC request with id "${t.id}" already seen.`),n())},objectMode:!0})};var n,s=e("readable-stream"),i=(n=e("loglevel"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/time");const o=r.THREE_MINUTES=3*a.MINUTE,c=()=>{const e=new Map;return setInterval((()=>{const t=Date.now()-o;for(const[r,n]of e.entries()){if(!(n<=t))break;e.delete(r)}}),o),{add:t=>!e.has(t)&&(e.set(t,Date.now()),!0)}}}}},{package:"$root$",file:"app/scripts/lib/createDupeReqFilterStream.ts"}],[118,{"../../../shared/constants/permissions":5843,"../controllers/permissions":88,"@metamask/keyring-api":2046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({messenger:e}){return function(t,r,s,i){const o=e.call("AccountsController:getSelectedAccount");if((0,n.isEvmAccountType)(o.type))return s();if(a.includes(t.method))return i(new Error(`Non-EVM account cannot request this method: ${t.method}`));if("wallet_requestPermissions"===t.method&&null!=t&&t.params&&Array.isArray(t.params)&&t.params.length>0&&t.params[0]){const e=Object.keys(t.params[0]);if(a.some((t=>e.includes(t))))return i(new Error(`Non-EVM account cannot request this method: ${e.toString()}`))}return s()}};var n=e("@metamask/keyring-api"),s=e("../../../shared/constants/permissions"),i=e("../controllers/permissions");const a=[...Object.values(s.RestrictedEthMethods),...i.unrestrictedEthSigningMethods]}}},{package:"$root$",file:"app/scripts/lib/createEvmMethodsToNonEvmAccountReqFilterMiddleware.ts"}],[119,{loglevel:4942},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){n((n=>{r.error&&s.default.debug("Error in RPC response:\n",r),t.isMetamaskInternal||(s.default.info(`RPC (${e.origin}): ${t.method} -> ${r.error?"error":"success"}`),n())}))}};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createLoggerMiddleware.js"}],[12,{"../../../../shared/constants/metametrics":5836,"@metamask/assets-controllers":1363,"@metamask/bridge-controller":1409},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NftControllerInit=void 0;var n=e("@metamask/assets-controllers"),s=e("@metamask/bridge-controller"),i=e("../../../../shared/constants/metametrics");r.NftControllerInit=({controllerMessenger:e,persistedState:t,getGlobalChainId:r,trackEvent:a})=>({controller:new n.NftController({state:t.NftController,messenger:e,chainId:r(),onNftAdded:({address:e,symbol:t,tokenId:r,standard:n,source:o})=>a({event:i.MetaMetricsEventName.NftAdded,category:i.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_contract_address:e,token_symbol:t??null,token_id:r,token_standard:n,asset_type:s.AssetType.NFT,source:o}})})})}}},{package:"$root$",file:"app/scripts/controller-init/assets/nft-controller-init.ts"}],[120,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({mainFrameOrigin:e}){return function(t,r,n){t.mainFrameOrigin=e,n()}}}}},{package:"$root$",file:"app/scripts/lib/createMainFrameOriginMiddleware.ts"}],[121,{"./stream-utils":191,"@metamask/rpc-errors":2622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/rpc-errors"),s=e("./stream-utils");r.default=(e,t)=>async r=>{if(!(0,s.isStreamWritable)(t))return;if(!e[r.method])return void t.write({jsonrpc:"2.0",error:n.rpcErrors.methodNotFound({message:`${r.method} not found`}),id:r.id});let i,a;try{i=await e[r.method](...r.params)}catch(e){a=e}(0,s.isStreamWritable)(t)?a?t.write({jsonrpc:"2.0",error:(0,n.serializeError)(a,{shouldIncludeStack:!0}),id:r.id}):t.write({jsonrpc:"2.0",result:i,id:r.id}):a&&console.error(a)}}}},{package:"$root$",file:"app/scripts/lib/createMetaRPCHandler.js"}],[122,{"./middleware/pending":140,"@metamask/eth-json-rpc-middleware":1642,"@metamask/json-rpc-engine":1996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({version:e,getAccounts:t,getCallsStatus:r,getCapabilities:a,processTransaction:o,processTypedMessage:c,processTypedMessageV3:u,processTypedMessageV4:l,processPersonalMessage:d,processDecryptMessage:h,processEncryptionPublicKey:f,processSendCalls:p,getPendingNonce:m,getPendingTransactionByHash:g}){return(0,n.mergeMiddleware)([(0,n.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,s.createWalletMiddleware)({getAccounts:t,getCallsStatus:r,getCapabilities:a,processTransaction:o,processTypedMessage:c,processTypedMessageV3:u,processTypedMessageV4:l,processPersonalMessage:d,processDecryptMessage:h,processEncryptionPublicKey:f,processSendCalls:p}),(0,i.createPendingNonceMiddleware)({getPendingNonce:m}),(0,i.createPendingTxMiddleware)({getPendingTransactionByHash:g})])};var n=e("@metamask/json-rpc-engine"),s=e("@metamask/eth-json-rpc-middleware"),i=e("./middleware/pending")}}},{package:"$root$",file:"app/scripts/lib/createMetamaskMiddleware.js"}],[123,{loglevel:4942,"webextension-polyfill":5801},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({location:e,registerOnboarding:t}){return async function(r,i,a,o){try{if("wallet_registerOnboarding"!==r.method)return void a();r.tabId&&r.tabId!==s.default.tabs.TAB_ID_NONE?await t(e,r.tabId):n.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),i.result=!0,o()}catch(e){o(e)}}};var n=i(e("loglevel")),s=i(e("webextension-polyfill"));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[124,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.origin=e.origin,n()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[125,{"../../../shared/constants/app":5824,"@metamask/rpc-errors":2622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SPAM_FILTER_ACTIVATED_ERROR=r.REJECTION_THRESHOLD_IN_MS=r.NUMBER_OF_REJECTIONS_THRESHOLD=r.BLOCKING_THRESHOLD_IN_MS=r.BLOCKABLE_METHODS=void 0,r.default=function({getThrottledOriginState:e,updateThrottledOriginState:t}){return function(r,n,s,h){const{method:f,origin:p}=r;if(!c.has(f)||u.includes(p))return void s();!function(e){if(!e)return!1;const t=Date.now(),{rejections:r,lastRejection:n}=e,s=t-n<=o;return r>=i&&s}(e(p))?s((r=>{if("error"in n&&n.error&&d(n.error)){var s;const i=null===(s=n.error)||void 0===s?void 0:s.data;if("rejectAllApprovals"===(null==i?void 0:i.cause))return void r();const o=e(p)||{rejections:0,lastRejection:0},c=Date.now(),u=c-o.lastRejection<a?o.rejections+1:1;t(p,{rejections:u,lastRejection:c})}else{const r=e(p);Boolean(r)&&t(p,{rejections:0,lastRejection:0})}r()})):h(l)}};var n=e("@metamask/rpc-errors"),s=e("../../../shared/constants/app");const i=r.NUMBER_OF_REJECTIONS_THRESHOLD=3,a=r.REJECTION_THRESHOLD_IN_MS=3e4,o=r.BLOCKING_THRESHOLD_IN_MS=6e4,c=r.BLOCKABLE_METHODS=new Set([s.MESSAGE_TYPE.ETH_SEND_TRANSACTION,s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA,s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1,s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3,s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4,s.MESSAGE_TYPE.PERSONAL_SIGN,s.MESSAGE_TYPE.WATCH_ASSET,s.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN,s.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]),u=["http://127.0.0.1:8080","http://127.0.0.1:8081","http://127.0.0.1:8082","http://localhost:8080","http://localhost:8081","http://localhost:8082"],l=r.SPAM_FILTER_ACTIVATED_ERROR=n.providerErrors.unauthorized("Request blocked due to spam filter."),d=e=>e.code===n.errorCodes.provider.userRejectedRequest}}},{package:"$root$",file:"app/scripts/lib/createOriginThrottlingMiddleware.ts"}],[126,{"../../../shared/constants/app":5824,"../../../shared/constants/metametrics":5836,"../../../shared/constants/security-provider":5846,"../../../shared/constants/signatures":5847,"../../../shared/constants/transaction":5854,"../../../shared/lib/confirmation.utils":5866,"../../../shared/lib/snaps/snaps":5890,"../../../shared/modules/error":5908,"../../../shared/modules/transaction.utils":5928,"../../../ui/helpers/utils/metrics":6970,"./snap-keyring/metrics":180,"@metamask/controller-utils":1542,"@metamask/rpc-errors":2622,"ethereumjs-util":4403},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({rateLimitTimeout:e=3e5,rateLimitSamplePercent:t=.001,globalRateLimitTimeout:r=3e5,globalRateLimitMaxAmount:S=10,getAccountType:P,getDeviceModel:M,getHardwareTypeForMetric:I,snapAndHardwareMessenger:C,appStateController:j,metaMetricsController:x,getHDEntropyIndex:B}){return async function(O,N,R){const{origin:D,method:$,params:L}=O,U=function(e){return[a.MESSAGE_TYPE.WALLET_CREATE_SESSION,a.MESSAGE_TYPE.WALLET_INVOKE_METHOD].includes(e)}($),H=U?o.MetaMetricsRequestedThrough.MultichainApi:o.MetaMetricsRequestedThrough.EthereumProvider,K=U?o.MetaMetricsEventCategory.MultichainApi:o.MetaMetricsEventCategory.InpageProvider;let F,G=$;var q;$===a.MESSAGE_TYPE.WALLET_INVOKE_METHOD&&(G=null==L||null===(q=L.request)||void 0===q?void 0:q.method,F=null==L?void 0:L.scope);const V=w[G];let W;switch(V){case y.TIMEOUT:W=void 0!==_[G];break;case y.NON_RATE_LIMITED:W=!1;break;case y.BLOCKED:W=!0;break;default:case y.RANDOM_SAMPLE:W=Math.random()>=t}const z=S>0&&A>=S,Y=!0===x.state.participateInMetaMetrics,J=k[G],Q={api_source:H};let X;F&&(Q.chain_id_caip=F);const Z=(0,m.isSnapPreinstalled)(D),ee=D!==a.ORIGIN_METAMASK&&!Z&&!W&&!z&&!0===Y;if(ee){var te;const t=J?J.REQUESTED:o.MetaMetricsEventName.ProviderMethodCalled;if(t===o.MetaMetricsEventName.SignatureRequested){var re,ne,se,ie,ae;let e;var oe,ce;if(Q.signature_type=G,Q.hd_entropy_index=B(),(0,i.isValidAddress)(null==O||null===(re=O.params)||void 0===re?void 0:re[1]))e=null==O||null===(oe=O.params)||void 0===oe?void 0:oe[0];else e=null==O||null===(ce=O.params)||void 0===ce?void 0:ce[1];null!==(ne=O.securityAlertResponse)&&void 0!==ne&&ne.providerRequestsCount&&Object.keys(O.securityAlertResponse.providerRequestsCount).forEach((e=>{Q[`ppom_${e}_count`]=O.securityAlertResponse.providerRequestsCount[e]})),Q.security_alert_response=(null===(se=O.securityAlertResponse)||void 0===se?void 0:se.result_type)??u.BlockaidResultType.NotApplicable,Q.security_alert_reason=(null===(ie=O.securityAlertResponse)||void 0===ie?void 0:ie.reason)??u.BlockaidReason.notApplicable,null!==(ae=O.securityAlertResponse)&&void 0!==ae&&ae.description&&(Q.security_alert_description=O.securityAlertResponse.description),(0,p.shouldUseRedesignForSignatures)({approvalType:v[G]})&&(Q.ui_customizations=[...Q.ui_customizations||[],o.MetaMetricsEventUiCustomization.RedesignedConfirmation]);const t=await(0,g.getSnapAndHardwareInfoForMetrics)(P,M,I,C);Object.assign(Q,t);try{if(G===a.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,n.detectSIWE)({data:e});t&&(Q.ui_customizations=[...Q.ui_customizations||[],o.MetaMetricsEventUiCustomization.Siwe])}else if(G===a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4){const t=(0,c.parseTypedDataMessage)(e);X={},Q.eip712_primary_type=t.primaryType,X.eip712_verifyingContract=t.domain.verifyingContract,X.eip712_domain_version=t.domain.version,X.eip712_domain_name=t.domain.name,l.PRIMARY_TYPES_PERMIT.includes(t.primaryType)?Q.ui_customizations=[...Q.ui_customizations||[],o.MetaMetricsEventUiCustomization.Permit]:l.PRIMARY_TYPES_ORDER.includes(t.primaryType)&&(Q.ui_customizations=[...Q.ui_customizations||[],o.MetaMetricsEventUiCustomization.Order])}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Errored - ${e}`)}}else Q.method=G;const s=E[G];if(s&&(Q.params=s(L)),null===(te=T[G])||void 0===te||te.call(T,O,undefined,b.REQUESTED,Q),t===o.MetaMetricsEventName.SignatureRequested){!function(e,t,r,n){e.createEventFragment({category:n,initialEvent:o.MetaMetricsEventName.SignatureRequested,successEvent:o.MetaMetricsEventName.SignatureApproved,failureEvent:o.MetaMetricsEventName.SignatureRejected,uniqueIdentifier:(0,f.generateSignatureUniqueId)(t.id),persist:!0,referrer:{url:t.origin},...r})}(x,O,{properties:Q,sensitiveProperties:X},K)}else x.trackEvent({event:t,category:K,referrer:{url:D},properties:Q});V===y.TIMEOUT&&(_[G]=setTimeout((()=>{delete _[G]}),e)),A+=1,setTimeout((()=>{A-=1}),r)}R((async e=>{var t,r,n,i;if(!1===ee||void 0===J)return e();const a=null===(t=N.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.location;let c,u;const l=(0,h.getErrorMessage)(N.error);if((null===(r=N.error)||void 0===r?void 0:r.code)===s.errorCodes.provider.userRejectedRequest?(c=J.REJECTED,u=b.REJECTED):(null===(n=N.error)||void 0===n?void 0:n.code)===s.errorCodes.rpc.internal&&[l,N.error.message].includes("Request rejected by user or snap.")?(c=J.REJECTED,u=b.REJECTED,Q.status=l):(c=J.APPROVED,u=b.APPROVED),!c)return e();null===(i=T[G])||void 0===i||i.call(T,O,N,u,Q);let p={};if(d.SIGNING_METHODS.includes(G)){var m;const e=j.getSignatureSecurityAlertResponse(null===(m=O.securityAlertResponse)||void 0===m?void 0:m.securityAlertId);p=(0,f.getBlockaidMetricsProps)({securityAlertResponse:e})}const g={...Q,...p,location:a};if(c===o.MetaMetricsEventName.SignatureRejected||c===o.MetaMetricsEventName.SignatureApproved){const e={abandoned:c===J.REJECTED},t={properties:{...g,hd_entropy_index:B()},sensitiveProperties:X};!function(e,t,r,n){const s=(0,f.generateSignatureUniqueId)(t.id);e.updateEventFragment(s,n),e.finalizeEventFragment(s,r)}(x,O,e,t)}else x.trackEvent({event:c,category:K,referrer:{url:D},properties:g});return e()}))}};var n=e("@metamask/controller-utils"),s=e("@metamask/rpc-errors"),i=e("ethereumjs-util"),a=e("../../../shared/constants/app"),o=e("../../../shared/constants/metametrics"),c=e("../../../shared/modules/transaction.utils"),u=e("../../../shared/constants/security-provider"),l=e("../../../shared/constants/signatures"),d=e("../../../shared/constants/transaction"),h=e("../../../shared/modules/error"),f=e("../../../ui/helpers/utils/metrics"),p=e("../../../shared/lib/confirmation.utils"),m=e("../../../shared/lib/snaps/snaps"),g=e("./snap-keyring/metrics");const y={TIMEOUT:"timeout",BLOCKED:"blocked",NON_RATE_LIMITED:"non_rate_limited",RANDOM_SAMPLE:"random_sample"},b={REQUESTED:"REQUESTED",APPROVED:"APPROVED",REJECTED:"REJECTED"},w={[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.PERSONAL_SIGN]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_DECRYPT]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:y.TIMEOUT,[a.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:y.TIMEOUT,[a.MESSAGE_TYPE.WALLET_CREATE_SESSION]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.SEND_METADATA]:y.BLOCKED,[a.MESSAGE_TYPE.ETH_CHAIN_ID]:y.BLOCKED,[a.MESSAGE_TYPE.ETH_ACCOUNTS]:y.BLOCKED,[a.MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE]:y.BLOCKED,[a.MESSAGE_TYPE.GET_PROVIDER_STATE]:y.BLOCKED,[a.MESSAGE_TYPE.WALLET_GET_CALLS_STATUS]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.WALLET_GET_CAPABILITIES]:y.NON_RATE_LIMITED,[a.MESSAGE_TYPE.WALLET_SEND_CALLS]:y.NON_RATE_LIMITED},v={[a.MESSAGE_TYPE.PERSONAL_SIGN]:n.ApprovalType.PersonalSign,[a.MESSAGE_TYPE.SIGN]:n.ApprovalType.SignTransaction,[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:n.ApprovalType.EthSignTypedData,[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1]:n.ApprovalType.EthSignTypedData,[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:n.ApprovalType.EthSignTypedData,[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:n.ApprovalType.EthSignTypedData},k={[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[a.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[a.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:o.MetaMetricsEventName.DecryptionApproved,REJECTED:o.MetaMetricsEventName.DecryptionRejected,REQUESTED:o.MetaMetricsEventName.DecryptionRequested},[a.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:o.MetaMetricsEventName.EncryptionPublicKeyApproved,REJECTED:o.MetaMetricsEventName.EncryptionPublicKeyRejected,REQUESTED:o.MetaMetricsEventName.EncryptionPublicKeyRequested},[a.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested},[a.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested},[a.MESSAGE_TYPE.WALLET_CREATE_SESSION]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested},[a.MESSAGE_TYPE.WALLET_GET_CALLS_STATUS]:{REQUESTED:o.MetaMetricsEventName.Wallet5792Called},[a.MESSAGE_TYPE.WALLET_GET_CAPABILITIES]:{REQUESTED:o.MetaMetricsEventName.Wallet5792Called},[a.MESSAGE_TYPE.WALLET_SEND_CALLS]:{REQUESTED:o.MetaMetricsEventName.Wallet5792Called}},E={[a.MESSAGE_TYPE.WATCH_ASSET]:({type:e})=>({type:e}),[a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN]:([{chainId:e}])=>({chainId:e}),[a.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]:([{chainId:e}])=>({chainId:e})},T={[a.MESSAGE_TYPE.WALLET_SEND_CALLS]:function(e,t,r,n){var s;if(r!==b.REQUESTED)return;const{params:i}=e,a=null==i||null===(s=i[0])||void 0===s||null===(s=s.calls)||void 0===s?void 0:s.length;a&&(n.batch_transaction_count=a)},[a.MESSAGE_TYPE.WALLET_CREATE_SESSION]:function(e,t,r,n){if(r===b.REQUESTED){const{params:t}=e,r=(null==t?void 0:t.requiredScopes)||{},s=(null==t?void 0:t.optionalScopes)||{},i=new Set;for(const e of Object.keys(r))i.add(e);for(const e of Object.keys(s))i.add(e);n.chain_id_list=Array.from(i)}else if(r===b.APPROVED){const{result:e}=t,r=Object.keys((null==e?void 0:e.sessionScopes)||{});n.chain_id_list=r}}},_={};let A=0}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[127,{"promise-to-callback":5098,"readable-stream":5299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return new a(e,t)};var n,s=e("readable-stream"),i=(n=e("promise-to-callback"))&&n.__esModule?n:{default:n};class a extends s.Writable{constructor(e,t){super({objectMode:!0,...t}),this._asyncWriteFn=e}_write(e,t,r){(0,i.default)(this._asyncWriteFn(e,t))(r)}}}}},{package:"$root$",file:"app/scripts/lib/createStreamSink.js"}],[128,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.tabId=e.tabId,n()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[129,{"../../../shared/constants/app":5824,"../../../shared/lib/trace":5895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return async function(e,t,r){const{id:n,method:o}=e,c=i[o];c&&(e.traceContext=await(0,s.trace)({name:c,id:n,tags:a[o]}),await(0,s.trace)({name:s.TraceName.Middleware,id:n,parentContext:e.traceContext})),r()}};var n=e("../../../shared/constants/app"),s=e("../../../shared/lib/trace");const i={[n.MESSAGE_TYPE.ETH_SEND_TRANSACTION]:s.TraceName.Transaction,[n.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:s.TraceName.Signature,[n.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1]:s.TraceName.Signature,[n.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:s.TraceName.Signature,[n.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:s.TraceName.Signature,[n.MESSAGE_TYPE.PERSONAL_SIGN]:s.TraceName.Signature},a={[n.MESSAGE_TYPE.ETH_SEND_TRANSACTION]:{source:"dapp"}}}}},{package:"$root$",file:"app/scripts/lib/createTracingMiddleware.ts"}],[13,{"@metamask/assets-controllers":1363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NftDetectionControllerInit=void 0;var n=e("@metamask/assets-controllers");r.NftDetectionControllerInit=e=>{const{controllerMessenger:t,getController:r}=e,s=()=>r("NftController");return{controller:new n.NftDetectionController({messenger:t,addNft:(...e)=>s().addNft(...e),getNftState:()=>s().state,disabled:!r("PreferencesController").state.useNftDetection})}}}}},{package:"$root$",file:"app/scripts/controller-init/assets/nft-detection-controller-init.ts"}],[130,{"@metamask/browser-passworder":1499},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.encryptorFactory=void 0;var n=e("@metamask/browser-passworder");const s=e=>async(t,r,s,i)=>(0,n.encrypt)(t,r,s,i,{algorithm:"PBKDF2",params:{iterations:e}}),i=e=>async(t,r,s)=>(0,n.encryptWithDetail)(t,r,s,{algorithm:"PBKDF2",params:{iterations:e}}),a=e=>async(t,r,s,i)=>(0,n.keyFromPassword)(t,r,s,i??{algorithm:"PBKDF2",params:{iterations:e}}),o=e=>t=>(0,n.isVaultUpdated)(t,{algorithm:"PBKDF2",params:{iterations:e}});r.encryptorFactory=e=>({encrypt:s(e),encryptWithKey:n.encryptWithKey,encryptWithDetail:i(e),decrypt:n.decrypt,decryptWithKey:n.decryptWithKey,decryptWithDetail:n.decryptWithDetail,keyFromPassword:a(e),isVaultUpdated:o(e),importKey:n.importKey,exportKey:n.exportKey,generateSalt:n.generateSalt})}}},{package:"$root$",file:"app/scripts/lib/encryptor-factory.ts"}],[131,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[132,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[1321,{"./utils.cjs":1323,"@metamask/base-controller":1402,"@metamask/eth-snap-keyring":1847,"@metamask/keyring-api":2046,"@metamask/keyring-controller":2053,"@metamask/keyring-utils":2126,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,f,p,m,g,y,b,w,v,k=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AccountsController=r.EMPTY_ACCOUNT=void 0;const E=e("@metamask/base-controller"),T=e("@metamask/eth-snap-keyring"),_=e("@metamask/keyring-api"),A=e("@metamask/keyring-controller"),S=e("@metamask/keyring-utils"),P=e("@metamask/utils"),M=e("./utils.cjs"),I="AccountsController",C={internalAccounts:{persist:!0,anonymous:!1}},j={internalAccounts:{accounts:{},selectedAccount:""}};r.EMPTY_ACCOUNT={id:"",address:"",options:{},methods:[],type:_.EthAccountType.Eoa,scopes:[_.EthScope.Eoa],metadata:{name:"",keyring:{type:""},importTime:0}};class x extends E.BaseController{constructor({messenger:e,state:t}){super({messenger:e,name:I,metadata:C,state:{...j,...t}}),n.add(this),k(this,n,"m",w).call(this),k(this,n,"m",v).call(this)}getAccount(e){return this.state.internalAccounts.accounts[e]}listAccounts(){return Object.values(this.state.internalAccounts.accounts).filter((e=>(0,_.isEvmAccountType)(e.type)))}listMultichainAccounts(e){const t=Object.values(this.state.internalAccounts.accounts);if(!e)return t;if(!(0,P.isCaipChainId)(e))throw new Error(`Invalid CAIP-2 chain ID: ${String(e)}`);return t.filter((t=>(0,S.isScopeEqualToAny)(e,t.scopes)))}getAccountExpect(e){const t=this.getAccount(e);if(t===undefined)throw new Error(`Account Id "${e}" not found`);return t}getSelectedAccount(){const{internalAccounts:{selectedAccount:e}}=this.state;if(""===e)return r.EMPTY_ACCOUNT;const t=this.getAccountExpect(e);if((0,_.isEvmAccountType)(t.type))return t;const s=this.listAccounts();if(!s.length)throw new Error("No EVM accounts");return k(this,n,"m",p).call(this,s)}getSelectedMultichainAccount(e){const{internalAccounts:{selectedAccount:t}}=this.state;if(""===t)return r.EMPTY_ACCOUNT;if(!e)return this.getAccountExpect(t);const s=this.listMultichainAccounts(e);return k(this,n,"m",p).call(this,s)}getAccountByAddress(e){return this.listMultichainAccounts().find((t=>t.address.toLowerCase()===e.toLowerCase()))}setSelectedAccount(e){const t=this.getAccountExpect(e);k(this,n,"m",d).call(this,(e=>{const{internalAccounts:r}=e;r.accounts[t.id].metadata.lastSelected=Date.now(),r.selectedAccount=t.id}))}setAccountName(e,t){this.updateAccountMetadata(e,{name:t,nameLastUpdatedAt:Date.now()})}setAccountNameAndSelectAccount(e,t){const r=this.getAccountExpect(e);k(this,n,"m",s).call(this,r,t);const i={...r,metadata:{...r.metadata,name:t,nameLastUpdatedAt:Date.now(),lastSelected:k(this,n,"m",m).call(this)}};k(this,n,"m",d).call(this,(e=>{e.internalAccounts.accounts[r.id]=i,e.internalAccounts.selectedAccount=r.id})),this.messagingSystem.publish("AccountsController:accountRenamed",i)}updateAccountMetadata(e,t){const r=this.getAccountExpect(e);t.name&&k(this,n,"m",s).call(this,r,t.name);const i={...r,metadata:{...r.metadata,...t}};k(this,n,"m",d).call(this,(t=>{t.internalAccounts.accounts[e]=i})),t.name&&this.messagingSystem.publish("AccountsController:accountRenamed",i)}async updateAccounts(){const e=await k(this,n,"m",o).call(this),t=await k(this,n,"m",c).call(this),r=new Map,s=this.state.internalAccounts.accounts,i=[...t,...e].reduce(((e,t)=>{const i=(0,M.keyringTypeToName)(t.metadata.keyring.type),a=r.get(i)??0;a?r.set(i,a+1):r.set(i,1);const o=s[t.id];return e[t.id]={...t,metadata:{...t.metadata,name:k(this,n,"m",b).call(this,o?.id,"name")??`${i} ${a+1}`,importTime:k(this,n,"m",b).call(this,o?.id,"importTime")??Date.now(),lastSelected:k(this,n,"m",b).call(this,o?.id,"lastSelected")??0}},e}),{});k(this,n,"m",d).call(this,(e=>{e.internalAccounts.accounts=i}))}loadBackup(e){e.internalAccounts&&this.update((t=>{t.internalAccounts=e.internalAccounts}))}getNextAvailableAccountName(e=A.KeyringTypes.hd,t){const r=(0,M.keyringTypeToName)(e),s=k(this,n,"m",f).call(this,e,t),i=s.reduce(((e,t)=>{const n=new RegExp(`${r} ([0-9]+)$`,"u").exec(t.metadata.name);if(n){const t=parseInt(n[1],10);return Math.max(e,t)}return e}),0),a=Math.max(s.length+1,i+1);return`${r} ${a}`}}r.AccountsController=x,n=new WeakSet,s=function(e,t){if(this.listMultichainAccounts().find((r=>r.metadata.name===t&&r.id!==e.id)))throw new Error("Account name already exists")},i=function(e,t){return{id:(0,M.getUUIDFromAddressOfNormalAccount)(e),address:e,options:{},methods:[_.EthMethod.PersonalSign,_.EthMethod.Sign,_.EthMethod.SignTransaction,_.EthMethod.SignTypedDataV1,_.EthMethod.SignTypedDataV3,_.EthMethod.SignTypedDataV4],scopes:[_.EthScope.Eoa],type:_.EthAccountType.Eoa,metadata:{name:"",importTime:Date.now(),keyring:{type:t}}}},a=function(){const[e]=this.messagingSystem.call("KeyringController:getKeyringsByType",T.SnapKeyring.type);return e},o=async function(){const e=k(this,n,"m",a).call(this);return e?e.listAccounts():[]},c=async function(){const e=[],{keyrings:t}=this.messagingSystem.call("KeyringController:getState");for(const r of t){const t=r.type;if((0,M.isNormalKeyringType)(t))for(const[s,i]of r.accounts.entries()){const a=(0,M.getUUIDFromAddressOfNormalAccount)(i);let o={};(0,M.isHdKeyringType)(r.type)&&(o={entropySource:r.metadata.id,derivationPath:(0,M.getDerivationPathForIndex)(s)});const c=k(this,n,"m",b).call(this,a,"nameLastUpdatedAt");e.push({id:a,address:i,options:o,methods:[_.EthMethod.PersonalSign,_.EthMethod.Sign,_.EthMethod.SignTransaction,_.EthMethod.SignTypedDataV1,_.EthMethod.SignTypedDataV3,_.EthMethod.SignTypedDataV4],scopes:[_.EthScope.Eoa],type:_.EthAccountType.Eoa,metadata:{name:k(this,n,"m",b).call(this,a,"name")??"",...c&&{nameLastUpdatedAt:c},importTime:k(this,n,"m",b).call(this,a,"importTime")??Date.now(),lastSelected:k(this,n,"m",b).call(this,a,"lastSelected")??0,keyring:{type:t}}})}}return e},u=function(e,...t){this.messagingSystem.publish(e,...t)},l=function({isUnlocked:e,keyrings:t}){if(!e||0===t.length)return;const r={snap:{previous:{},added:[],updated:[],removed:[]},normal:{previous:{},added:[],updated:[],removed:[]}},s=e=>e===A.KeyringTypes.snap?r.snap:r.normal;for(const e of this.listMultichainAccounts()){const t=e.address.toLowerCase();s(e.metadata.keyring.type).previous[t]=e}const i=new Set;for(const e of t){const t=s(e.type);for(const r of e.accounts){const n=r.toLowerCase(),s=t.previous[n];s?t.updated.push(s):t.added.push({address:n,type:e.type,options:e.type===A.KeyringTypes.hd?{entropySource:e.metadata.id}:{}}),i.add(n)}}for(const e of[r.snap,r.normal])for(const[t,r]of Object.entries(e.previous))i.has(t)||e.removed.push(r);const a={removed:[],added:[]};k(this,n,"m",d).call(this,(e=>{const{internalAccounts:t}=e;for(const e of[r.snap,r.normal]){for(const r of e.removed)delete t.accounts[r.id],a.removed.push(r.id);for(const r of e.added){const e=k(this,n,"m",g).call(this,r.address,r.type);if(e){const s=Object.values(t.accounts),i=this.getNextAvailableAccountName(e.metadata.keyring.type,s),o=0===s.length?k(this,n,"m",m).call(this):0;t.accounts[e.id]={...e,metadata:{...e.metadata,name:i,importTime:Date.now(),lastSelected:o},options:{...e.options,...r.options}},a.added.push(t.accounts[e.id])}}}}));for(const e of a.removed)this.messagingSystem.publish("AccountsController:accountRemoved",e);for(const e of a.added)this.messagingSystem.publish("AccountsController:accountAdded",e)},d=function(e){const t=this.state.internalAccounts.selectedAccount;this.update((r=>{e(r);const{internalAccounts:s}=r;if(!s.accounts[t]){const e=Object.values(s.accounts),t=k(this,n,"m",p).call(this,e);t?(s.selectedAccount=t.id,s.accounts[t.id].metadata.lastSelected=k(this,n,"m",m).call(this)):s.selectedAccount=""}}));const{selectedAccount:r}=this.state.internalAccounts;if(r&&r!==t){const e=this.getSelectedMultichainAccount();e&&((0,_.isEvmAccountType)(e.type)&&this.messagingSystem.publish("AccountsController:selectedEvmAccountChange",e),this.messagingSystem.publish("AccountsController:selectedAccountChange",e))}},h=function(e){const{snaps:t}=e,r=[];for(const e of this.listMultichainAccounts())if(e.metadata.snap){const n=t[e.metadata.snap.id];if(n){const t=n.enabled&&!n.blocked;e.metadata.snap.enabled!==t&&r.push({id:e.id,enabled:t})}else r.push({id:e.id,enabled:!1})}r.length>0&&this.update((e=>{for(const{id:t,enabled:n}of r){const r=e.internalAccounts.accounts[t];r.metadata.snap&&(r.metadata.snap.enabled=n)}}))},f=function(e,t){return(t??this.listMultichainAccounts()).filter((t=>e===A.KeyringTypes.hd||e===A.KeyringTypes.simple?t.metadata.keyring.type===A.KeyringTypes.hd||t.metadata.keyring.type===A.KeyringTypes.simple:t.metadata.keyring.type===e))},p=function(e){const[t]=e.sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)));return t},m=function(){return Date.now()},g=function(e,t){if(t===A.KeyringTypes.snap){const t=k(this,n,"m",a).call(this);return t?t.getAccountByAddress(e):undefined}return k(this,n,"m",i).call(this,e,t)},y=function(e){let t;if((0,P.isCaipChainId)(e)){const r=this.getSelectedMultichainAccount(e);t=r.id}else{const e=this.getSelectedAccount();t=e.id}this.update((e=>{e.internalAccounts.accounts[t].metadata.lastSelected=Date.now(),e.internalAccounts.selectedAccount=t}))},b=function(e,t,r){const n=r??this.getAccount(e);return n?n.metadata[t]:undefined},w=function(){this.messagingSystem.subscribe("SnapController:stateChange",(e=>k(this,n,"m",h).call(this,e))),this.messagingSystem.subscribe("KeyringController:stateChange",(e=>k(this,n,"m",l).call(this,e))),this.messagingSystem.subscribe("SnapKeyring:accountAssetListUpdated",(e=>k(this,n,"m",u).call(this,"AccountsController:accountAssetListUpdated",e))),this.messagingSystem.subscribe("SnapKeyring:accountBalancesUpdated",(e=>k(this,n,"m",u).call(this,"AccountsController:accountBalancesUpdated",e))),this.messagingSystem.subscribe("SnapKeyring:accountTransactionsUpdated",(e=>k(this,n,"m",u).call(this,"AccountsController:accountTransactionsUpdated",e))),this.messagingSystem.subscribe("MultichainNetworkController:networkDidChange",(e=>k(this,n,"m",y).call(this,e)))},v=function(){this.messagingSystem.registerActionHandler(`${I}:setSelectedAccount`,this.setSelectedAccount.bind(this)),this.messagingSystem.registerActionHandler(`${I}:listAccounts`,this.listAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${I}:listMultichainAccounts`,this.listMultichainAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${I}:setAccountName`,this.setAccountName.bind(this)),this.messagingSystem.registerActionHandler(`${I}:setAccountNameAndSelectAccount`,this.setAccountNameAndSelectAccount.bind(this)),this.messagingSystem.registerActionHandler(`${I}:updateAccounts`,this.updateAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${I}:getSelectedAccount`,this.getSelectedAccount.bind(this)),this.messagingSystem.registerActionHandler(`${I}:getSelectedMultichainAccount`,this.getSelectedMultichainAccount.bind(this)),this.messagingSystem.registerActionHandler(`${I}:getAccountByAddress`,this.getAccountByAddress.bind(this)),this.messagingSystem.registerActionHandler(`${I}:getNextAvailableAccountName`,this.getNextAvailableAccountName.bind(this)),this.messagingSystem.registerActionHandler("AccountsController:getAccount",this.getAccount.bind(this)),this.messagingSystem.registerActionHandler("AccountsController:updateAccountMetadata",this.updateAccountMetadata.bind(this))}}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/AccountsController.cjs"}],[1322,{"./AccountsController.cjs":1321,"./utils.cjs":1323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isNormalKeyringType=r.getUUIDFromAddressOfNormalAccount=r.getUUIDOptionsFromAddressOfNormalAccount=r.keyringTypeToName=r.AccountsController=r.EMPTY_ACCOUNT=void 0;var n=e("./AccountsController.cjs");Object.defineProperty(r,"EMPTY_ACCOUNT",{enumerable:!0,get:function(){return n.EMPTY_ACCOUNT}}),Object.defineProperty(r,"AccountsController",{enumerable:!0,get:function(){return n.AccountsController}});var s=e("./utils.cjs");Object.defineProperty(r,"keyringTypeToName",{enumerable:!0,get:function(){return s.keyringTypeToName}}),Object.defineProperty(r,"getUUIDOptionsFromAddressOfNormalAccount",{enumerable:!0,get:function(){return s.getUUIDOptionsFromAddressOfNormalAccount}}),Object.defineProperty(r,"getUUIDFromAddressOfNormalAccount",{enumerable:!0,get:function(){return s.getUUIDFromAddressOfNormalAccount}}),Object.defineProperty(r,"isNormalKeyringType",{enumerable:!0,get:function(){return s.isNormalKeyringType}})}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/index.cjs"}],[1323,{"@metamask/keyring-controller":2053,"@metamask/utils":3026,"ethereum-cryptography/sha256":4394,uuid:5768},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDerivationPathForIndex=r.isHdKeyringType=r.isNormalKeyringType=r.getUUIDFromAddressOfNormalAccount=r.getUUIDOptionsFromAddressOfNormalAccount=r.keyringTypeToName=void 0;const n=e("@metamask/keyring-controller"),s=e("@metamask/utils"),i=e("ethereum-cryptography/sha256"),a=e("uuid");function o(e){return{random:(0,i.sha256)((0,s.hexToBytes)(e)).slice(0,16)}}r.keyringTypeToName=function(e){switch(e){case n.KeyringTypes.simple:case n.KeyringTypes.hd:return"Account";case n.KeyringTypes.trezor:return"Trezor";case n.KeyringTypes.oneKey:return"OneKey";case n.KeyringTypes.ledger:return"Ledger";case n.KeyringTypes.lattice:return"Lattice";case n.KeyringTypes.qr:return"QR";case n.KeyringTypes.snap:return"Snap Account";default:throw new Error(`Unknown keyring ${e}`)}},r.getUUIDOptionsFromAddressOfNormalAccount=o,r.getUUIDFromAddressOfNormalAccount=function(e){return(0,a.v4)(o(e))},r.isNormalKeyringType=function(e){return e!==n.KeyringTypes.snap},r.isHdKeyringType=function(e){return e===n.KeyringTypes.hd},r.getDerivationPathForIndex=function(e){return`m/44'/60'/0'/0/${e}`}}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/utils.cjs"}],[1324,{"@metamask/base-controller":1402,"@metamask/controller-utils":1542},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookController=r.getDefaultAddressBookControllerState=r.controllerName=r.AddressType=void 0;const n=e("@metamask/base-controller"),s=e("@metamask/controller-utils");var i;!function(e){e.externallyOwnedAccounts="EXTERNALLY_OWNED_ACCOUNTS",e.contractAccounts="CONTRACT_ACCOUNTS",e.nonAccounts="NON_ACCOUNTS"}(i||(r.AddressType=i={})),r.controllerName="AddressBookController";const a={addressBook:{persist:!0,anonymous:!1}};r.getDefaultAddressBookControllerState=()=>({addressBook:{}});class o extends n.BaseController{constructor({messenger:e,state:t}){const n={...(0,r.getDefaultAddressBookControllerState)(),...t};super({messenger:e,metadata:a,name:r.controllerName,state:n})}clear(){this.update((e=>{e.addressBook={}}))}delete(e,t){return t=(0,s.toChecksumHexAddress)(t),!!([e,t].every((e=>(0,s.isSafeDynamicKey)(e)))&&(0,s.isValidHexAddress)(t)&&this.state.addressBook[e]&&this.state.addressBook[e][t])&&(this.update((r=>{delete r.addressBook[e][t],0===Object.keys(r.addressBook[e]).length&&delete r.addressBook[e]})),!0)}set(e,t,r=(0,s.toHex)(1),n="",i){if(e=(0,s.toChecksumHexAddress)(e),!(0,s.isValidHexAddress)(e))return!1;const a={address:e,chainId:r,isEns:!1,memo:n,name:t,addressType:i},o=(0,s.normalizeEnsName)(t);return o&&(a.name=o,a.isEns=!0),this.update((t=>{t.addressBook={...this.state.addressBook,[r]:{...this.state.addressBook[r],[e]:a}}})),!0}}r.AddressBookController=o,r.default=o}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/AddressBookController.cjs"}],[1325,{"./AddressBookController.cjs":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookController=r.getDefaultAddressBookControllerState=void 0;var n=e("./AddressBookController.cjs");Object.defineProperty(r,"getDefaultAddressBookControllerState",{enumerable:!0,get:function(){return n.getDefaultAddressBookControllerState}}),Object.defineProperty(r,"AddressBookController",{enumerable:!0,get:function(){return n.AddressBookController}})}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/index.cjs"}],[1326,{"@metamask/base-controller":1402},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementController=void 0;const a=e("@metamask/base-controller"),o={announcements:{}},c={announcements:{persist:!0,anonymous:!0}};class u extends a.BaseController{constructor({messenger:e,state:t,allAnnouncements:r}){const a={...o,...t};super({messenger:e,metadata:c,name:"AnnouncementController",state:a}),n.add(this),i(this,n,"m",s).call(this,r)}resetViewed(){this.update((({announcements:e})=>{for(const t of Object.values(e))t.isShown=!1}))}updateViewed(e){this.update((({announcements:t})=>{for(const r of Object.keys(e).map(Number))t[r].isShown=e[r]}))}}r.AnnouncementController=u,n=new WeakSet,s=function(e){this.update((t=>{Object.values(e).forEach((e=>{t.announcements[e.id]=t.announcements[e.id]??{...e,isShown:!1}}))}))}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.cjs"}],[1327,{"./AnnouncementController.cjs":1326},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementController=void 0;var n=e("./AnnouncementController.cjs");Object.defineProperty(r,"AnnouncementController",{enumerable:!0,get:function(){return n.AnnouncementController}})}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.cjs"}],[133,{"./contracts/registry":131,"./contracts/resolver":132,"@ensdomains/content-hash":450,"@ethersproject/contracts":540,"@ethersproject/providers":578,"eth-ens-namehash":4351},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=async function({provider:e,name:t}){const r=n.default.hash(t),u=Number.parseInt(await e.request({method:"net_version"}),10),d=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(u);if(!d)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${u}"`);const h=new i.Web3Provider(e),f=new a.Contract(d,o.default,h),p=await f.resolver(r);if(l(p))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const m=new a.Contract(p,c.default,h),g=await m.supportsInterface("0xbc1c58d1"),y=await m.supportsInterface("0xd8389dc5");if(g){const e=(await m.contenthash(r))[0];let t=s.default.decode(e);const n=s.default.getCodec(e);return"ipfs-ns"!==n&&"ipns-ns"!==n||(t=s.default.helpers.cidV0ToV1Base32(t)),{type:n,hash:t}}if(y){const e=(await m.content(r))[0];if(l(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var n=u(e("eth-ens-namehash")),s=u(e("@ensdomains/content-hash")),i=e("@ethersproject/providers"),a=e("@ethersproject/contracts"),o=u(e("./contracts/registry")),c=u(e("./contracts/resolver"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[134,{"../../../../shared/modules/fetch-with-timeout":5910,"./resolver":133,"base32-encode":4026,"base64-js":4027,"webextension-polyfill":5801},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:r,getUseAddressBarEnsResolution:a}){const c=l.map((e=>`*://*.${e}/*`));return i.default.webRequest.onErrorOccurred.addListener(d,{urls:c,types:["main_frame"]}),{remove(){i.default.webRequest.onErrorOccurred.removeListener(d)}};async function d(c){const{tabId:d,url:h}=c;if(-1===d||"0x1"!==t())return;const{hostname:f,pathname:p,search:m,hash:g}=new URL(h),y=f.split("."),b=y[y.length-1];l.includes(b)&&async function({tabId:t,name:c,pathname:l,search:d,fragment:h}){const f=r(),p=a(),m=`https://app.ens.domains/name/${c}`;p&&f&&await i.default.tabs.update(t,{url:"loading.html"});let g=m;0;try{const{type:t,hash:r}=await(0,o.default)({provider:e,name:c});if("ipfs-ns"===t||"ipns-ns"===t){if(""===f)return void(g=null);const e=`https://${r}.${t.slice(0,4)}.${f}${l}${d||""}${h||""}`;try{200===(await u(e,{method:"HEAD"})).status&&(g=e)}catch(e){console.warn(e)}}else if("swarm-ns"===t)g=`https://swarm-gateways.net/bzz:/${r}${l}${d||""}${h||""}`;else if("onion"===t||"onion3"===t)g=`http://${r}.onion${l}${d||""}${h||""}`;else if("zeronet"===t)g=`http://127.0.0.1:43110/${r}${l}${d||""}${h||""}`;else if("skynet-ns"===t){const e=r.padEnd(r.length+4-r.length%4,"="),t=s.default.toByteArray(e),i={padding:!1};g=`https://${(0,n.default)(t,"RFC4648-HEX",i).toLowerCase()}.siasky.net${l}${d||""}${h||""}`}}catch(e){console.warn(e)}finally{g&&(p||!p&&g!==m)&&await i.default.tabs.update(t,{url:g})}}({tabId:d,name:f,pathname:p,search:m,fragment:g})}};var n=c(e("base32-encode")),s=c(e("base64-js")),i=c(e("webextension-polyfill")),a=c(e("../../../../shared/modules/fetch-with-timeout")),o=c(e("./resolver"));function c(e){return e&&e.__esModule?e:{default:e}}const u=(0,a.default)(),l=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[137,{lodash:4934},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return s((0,n.cloneDeep)(e),(e=>null===e?"null":typeof e))};var n=e("lodash");function s(e={},t){return Object.entries(e).forEach((([r,n])=>{e[r]="object"==typeof n&&null!==n?s(n,t):t(n)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[138,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hardwareKeyringBuilderFactory=function(e,t){const r=()=>new e({bridge:new t});return r.type=e.type,r}}}},{package:"$root$",file:"app/scripts/lib/hardware-keyring-builder-factory.ts"}],[14,{"@metamask/assets-controllers":1363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TokenRatesControllerInit=void 0;var n=e("@metamask/assets-controllers");r.TokenRatesControllerInit=e=>{var t;const{controllerMessenger:r,getController:s,persistedState:i}=e;return{controller:new n.TokenRatesController({messenger:r,state:i.TokenRatesController,tokenPricesService:new n.CodefiTokenPricesServiceV2,disabled:!(null!==(t=s("PreferencesController").state)&&void 0!==t&&t.useCurrencyRateCheck)})}}}}},{package:"$root$",file:"app/scripts/controller-init/assets/token-rates-controller-init.ts"}],[140,{"../util":206,"@metamask/json-rpc-engine":1996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:s,params:i}=t;if("eth_getTransactionCount"!==s)return void n();const[a,o]=i;"pending"===o?r.result=await e(a,t.networkClientId):n()}))},r.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:i,params:a}=t;if("eth_getTransactionByHash"!==i)return void n();const[o]=a,c=e(o);c?r.result=(0,s.formatTxMetaForRpcResult)(c):n()}))};var n=e("@metamask/json-rpc-engine"),s=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[141,{events:4475,loglevel:4942},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("events")),s=i(e("loglevel"));function i(e){return e&&e.__esModule?e:{default:e}}class a extends n.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const r=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||r&&r.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const r of t)try{s.default.info(`Running migration ${r.version}...`);const t=await r.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==r.version)throw new Error("Migrator - Migration did not update version number correctly");e=t,s.default.info(`Migration ${r.version} complete`)}catch(t){const n=t.message;return t.message=`MetaMask Migration Error #${r.version}: ${n}`,this.emit("error",t),e}return e}generateInitialState(e){return{data:e,meta:{version:this.defaultVersion}}}}r.default=a}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[143,{"../../../../shared/constants/metametrics":5836,"../../../../shared/lib/only-keep-host":5889,"./utils":144,"@metamask/network-controller":2319,"@metamask/utils":3026,loglevel:4942},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.onRpcEndpointDegraded=function({chainId:e,endpointUrl:t,infuraProjectId:r,trackEvent:n,metaMetricsId:s}){const l=(0,u.getIsOurInfuraEndpointUrl)(t,r),d=(0,u.getIsQuicknodeEndpointUrl)(t);(0,u.shouldCreateRpcServiceEvents)(s)&&(l||d)&&(i.default.debug(`Creating Segment event "${o.MetaMetricsEventName.RpcServiceDegraded}" with chain_id_caip: "eip155:${(0,a.hexToNumber)(e)}", rpc_endpoint_url: ${(0,c.onlyKeepHost)(t)}`),n({category:o.MetaMetricsEventCategory.Network,event:o.MetaMetricsEventName.RpcServiceDegraded,properties:{chain_id_caip:`eip155:${(0,a.hexToNumber)(e)}`,rpc_endpoint_url:(0,c.onlyKeepHost)(t)}}))},r.onRpcEndpointUnavailable=function({chainId:e,endpointUrl:t,error:r,infuraProjectId:n,trackEvent:l,metaMetricsId:d}){const h=(0,u.getIsOurInfuraEndpointUrl)(t,n),f=(0,u.getIsQuicknodeEndpointUrl)(t);(0,u.shouldCreateRpcServiceEvents)(d)&&!(0,s.isConnectionError)(r)&&(h||f)&&(i.default.debug(`Creating Segment event "${o.MetaMetricsEventName.RpcServiceUnavailable}" with chain_id_caip: "eip155:${(0,a.hexToNumber)(e)}", rpc_endpoint_url: ${(0,c.onlyKeepHost)(t)}`),l({category:o.MetaMetricsEventCategory.Network,event:o.MetaMetricsEventName.RpcServiceUnavailable,properties:{chain_id_caip:`eip155:${(0,a.hexToNumber)(e)}`,rpc_endpoint_url:(0,c.onlyKeepHost)(t)}}))};var n,s=e("@metamask/network-controller"),i=(n=e("loglevel"))&&n.__esModule?n:{default:n},a=e("@metamask/utils"),o=e("../../../../shared/constants/metametrics"),c=e("../../../../shared/lib/only-keep-host"),u=e("./utils")}}},{package:"$root$",file:"app/scripts/lib/network-controller/messenger-action-handlers.ts"}],[144,{"../../../../development/build/constants":402,"../../../../shared/constants/network":5839,"@metamask/remote-feature-flag-controller":2615,lodash:4934},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getIsOurInfuraEndpointUrl=function(e,t){return new RegExp(`^https://[^.]+\\.infura\\.io/v3/${(0,n.escapeRegExp)(t)}$`,"u").test(e)},r.getIsQuicknodeEndpointUrl=function(e){return Object.values(i.QUICKNODE_ENDPOINT_URLS_BY_INFURA_NETWORK_NAME).map((e=>e())).includes(e)},r.shouldCreateRpcServiceEvents=function(e){if(null===e||"other"===undefined)return!1;if([a.ENVIRONMENT.PRODUCTION,a.ENVIRONMENT.RELEASE_CANDIDATE].includes("other"))return(0,s.generateDeterministicRandomNumber)(e)<o;return!0};var n=e("lodash"),s=e("@metamask/remote-feature-flag-controller"),i=e("../../../../shared/constants/network"),a=e("../../../../development/build/constants");const o=.1}}},{package:"$root$",file:"app/scripts/lib/network-controller/utils.ts"}],[145,{"../../../shared/constants/notifications":5840,"../platforms/extension":397,"@metamask/safe-event-emitter":2624},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.NOTIFICATION_MANAGER_EVENTS=void 0;var n=a(e("@metamask/safe-event-emitter")),s=a(e("../platforms/extension")),i=e("../../../shared/constants/notifications");function a(e){return e&&e.__esModule?e:{default:e}}const o=r.NOTIFICATION_MANAGER_EVENTS={POPUP_CLOSED:"onPopupClosed"};class c extends n.default{constructor(){super(),this.platform=new s.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const r=await this._getPopup(t);if(r)await this.platform.focusWindow(r.id);else{const e=0,t=0,r=await this.platform.openWindow({url:"notification.html",type:"popup",width:i.NOTIFICATION_WIDTH,height:i.NOTIFICATION_HEIGHT,left:e,top:t});r.left!==e&&"fullscreen"!==r.state&&await this.platform.updateWindowPosition(r.id,e,t),this._setCurrentPopupId(r.id),this._popupId=r.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(o.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}r.default=c}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[146,{"../../../../shared/constants/offscreen-communication":5841,"eth-lattice-keyring":4352},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LatticeKeyringOffscreen=void 0;var n,s=(n=e("eth-lattice-keyring"))&&n.__esModule?n:{default:n},i=e("../../../../shared/constants/offscreen-communication");class a extends s.default{constructor(e={}){super(e)}async _getCreds(){try{const e=this.appName?this.appName:"Unknown",t=`${i.KnownOrigins.lattice}?keyring=${e}&forceLogin=true`;return await new Promise(((e,r)=>{chrome.runtime.sendMessage({target:i.OffscreenCommunicationTarget.latticeOffscreen,params:{url:t}},(t=>{t.error&&r(t.error),e(t.result)}))}))}catch(e){throw new Error(e)}}}r.LatticeKeyringOffscreen=a,function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(a,"type",void 0),a.type=s.default.type}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/lattice-offscreen-keyring.ts"}],[147,{"../../../../shared/constants/offscreen-communication":5841},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerOffscreenBridge=void 0;var n=e("../../../../shared/constants/offscreen-communication");function s(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var o=new WeakSet;async function c(e,{timeout:t}={}){return new Promise(((r,s)=>{let i;t&&(i=setTimeout((()=>{s(new Error("Ledger iframe timeout"))}),t)),chrome.runtime.sendMessage({...e,target:n.OffscreenCommunicationTarget.ledgerOffscreen},(e=>{var t;(clearTimeout(i),null!=e&&e.success)?r(e.payload||e.success):s(new Error((null==e||null===(t=e.payload)||void 0===t?void 0:t.error)||"Unknown Ledger error"))}))}))}r.LedgerOffscreenBridge=class{constructor(){s(this,o),i(this,"isDeviceConnected",!1)}init(){return chrome.runtime.onMessage.addListener((e=>{e.target===n.OffscreenCommunicationTarget.extension&&e.event===n.OffscreenCommunicationEvents.ledgerDeviceConnect&&(this.isDeviceConnected=!0)})),Promise.resolve()}destroy(){return Promise.resolve()}getOptions(){return Promise.resolve({})}setOptions(){return Promise.resolve()}attemptMakeApp(){return a(o,this,c).call(this,{action:n.LedgerAction.makeApp},{timeout:4e3})}updateTransportMethod(e){return a(o,this,c).call(this,{action:n.LedgerAction.updateTransport,params:{transportType:e}},{timeout:4e3})}getPublicKey(e){return a(o,this,c).call(this,{action:n.LedgerAction.getPublicKey,params:e})}deviceSignTransaction(e){return a(o,this,c).call(this,{action:n.LedgerAction.signTransaction,params:e})}deviceSignMessage(e){return a(o,this,c).call(this,{action:n.LedgerAction.signPersonalMessage,params:e})}deviceSignTypedData(e){return a(o,this,c).call(this,{action:n.LedgerAction.signTypedData,params:e})}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/ledger-offscreen-bridge.ts"}],[148,{"../../../../shared/constants/offscreen-communication":5841},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorOffscreenBridge=void 0;var n=e("../../../../shared/constants/offscreen-communication");function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.TrezorOffscreenBridge=class{constructor(){s(this,"model",void 0),s(this,"minorVersion",void 0)}init(e){return chrome.runtime.onMessage.addListener((e=>{e.target===n.OffscreenCommunicationTarget.extension&&e.event===n.OffscreenCommunicationEvents.trezorDeviceConnect&&(this.model=e.payload.model,this.minorVersion=e.payload.minorVersion)})),new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.init,params:e},(()=>{t()}))}))}dispose(){return new Promise((e=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.dispose},(()=>{e()}))}))}getPublicKey(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.getPublicKey,params:e},(e=>{t(e)}))}))}ethereumSignTransaction(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signTransaction,params:e},(e=>{t(e)}))}))}ethereumSignMessage(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signMessage,params:e},(e=>{t(e)}))}))}ethereumSignTypedData(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signTypedData,params:e},(e=>{t(e)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/trezor-offscreen-bridge.ts"}],[149,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.IndexedDBPPOMStorage=void 0;const i=async(e,t,r)=>{const n=await crypto.subtle.digest("SHA-256",t);if(Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")!==r)throw new Error(`Checksum mismatch for key ${e}`)};var a=new WeakSet;function o(e){return new Promise(((t,r)=>{const n=indexedDB.open(this.storeName,this.dbVersion);n.onerror=e=>{var t;r(new Error(`Failed to open database ${this.storeName}: ${null===(t=e.target)||void 0===t?void 0:t.error}`))},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:["name","chainId"]})},n.onsuccess=r=>{const n=r.target.result.transaction([this.storeName],e).objectStore(this.storeName);t(n)}}))}r.IndexedDBPPOMStorage=class{constructor(e,t){n(this,a),s(this,"storeName",void 0),s(this,"dbVersion",void 0),this.storeName=e,this.dbVersion=t}async objectStoreAction(e,t,r="readonly"){return new Promise(((n,s)=>{(function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")})(a,this,o).call(this,r).then((r=>{const i=r[e](t);i.onsuccess=async e=>{n(e)},i.onerror=t=>{var r;s(new Error(`Error in indexDB operation ${e}: ${null===(r=t.target)||void 0===r?void 0:r.error}`))}})).catch((e=>{s(e)}))}))}async read(e,t){var r;const n=null===(r=(await this.objectStoreAction("get",[e.name,e.chainId])).target)||void 0===r||null===(r=r.result)||void 0===r?void 0:r.data;return await i(e,n,t),n}async write(e,t,r){await i(e,t,r),await this.objectStoreAction("put",{...e,data:t},"readwrite")}async delete(e){await this.objectStoreAction("delete",[e.name,e.chainId],"readwrite")}async dir(){var e;return null===(e=(await this.objectStoreAction("getAllKeys")).target)||void 0===e?void 0:e.result.map((([e,t])=>({name:e,chainId:t})))}}}}},{package:"$root$",file:"app/scripts/lib/ppom/indexed-db-backend.ts"}],[15,{"../../lib/ppom/indexed-db-backend":149,"../../lib/ppom/ppom":152,"@metamask/ppom-validator":2479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMControllerInit=void 0;var n=e("@metamask/ppom-validator"),s=e("../../lib/ppom/indexed-db-backend"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("../../lib/ppom/ppom"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}r.PPOMControllerInit=e=>{const{controllerMessenger:t,initMessenger:r,getController:a,getGlobalChainId:o,getProvider:c,persistedState:u}=e;return{controller:new n.PPOMController({messenger:t,storageBackend:new s.IndexedDBPPOMStorage("PPOMDB",1),provider:c(),ppomProvider:{PPOM:i.PPOM,ppomInit:()=>i.default("./ppom_bg.wasm")},state:u.PPOMController,chainId:o(),securityAlertsEnabled:a("PreferencesController").state.securityAlertsEnabled,onPreferencesChange:r.subscribe.bind(r,"PreferencesController:stateChange"),cdnBaseUrl:"static.cx.metamask.io/api/v1/confirmations/ppom",blockaidPublicKey:"066ad3e8af5583385e312c156d238055215d5f25247c1e91055afa756cb98a88"})}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/ppom-controller-init.ts"}],[150,{"../../../../shared/constants/app":5824,"../../../../shared/constants/security-provider":5846,"../../../../shared/constants/transaction":5854,"../../../../shared/lib/trace":5895,"../../../../shared/modules/selectors/networks":5923,"./ppom-util":151,"@metamask/controller-utils":1542},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPPOMMiddleware=function(e,t,r,d,h,f){return async(p,m,g)=>{try{const{securityAlertsEnabled:m}=t.state,{chainId:g}=(0,a.getProviderConfig)({metamask:r.state})??{};if(!g)return;if(!m||!l.includes(p.method))return;const y=p.params[0];if("string"==typeof y){const{isSIWEMessage:e}=(0,n.detectSIWE)({data:y});if(e)return}else if(p.method===s.MESSAGE_TYPE.ETH_SEND_TRANSACTION){const{to:e}=y??{},t=h.listAccounts();if(t.some((({address:t})=>(null==t?void 0:t.toLowerCase())===(null==e?void 0:e.toLowerCase()))))return}const b=(0,u.generateSecurityAlertId)();(0,o.trace)({name:o.TraceName.PPOMValidation,parentContext:p.traceContext},(()=>(0,u.validateRequestWithPPOM)({ppomController:e,request:p,securityAlertId:b,chainId:g,updateSecurityAlertResponse:f})));const w={...c.LOADING_SECURITY_ALERT_RESPONSE,securityAlertId:b};i.SIGNING_METHODS.includes(p.method)&&d.addSignatureSecurityAlertResponse(w),p.securityAlertResponse=w}catch(e){p.securityAlertResponse=(0,u.handlePPOMError)(e,"Error createPPOMMiddleware: ")}finally{g()}}};var n=e("@metamask/controller-utils"),s=e("../../../../shared/constants/app"),i=e("../../../../shared/constants/transaction"),a=e("../../../../shared/modules/selectors/networks"),o=e("../../../../shared/lib/trace"),c=e("../../../../shared/constants/security-provider"),u=e("./ppom-util");const l=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction",...i.SIGNING_METHODS])}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-middleware.ts"}],[151,{"../../../../shared/constants/app":5824,"../../../../shared/constants/security-provider":5846,"../../../../shared/constants/transaction":5854,"../../../../shared/modules/transaction.utils":5928,"../../../../shared/modules/typed-signature":5929,"./security-alerts-api":153,"@metamask/transaction-controller":2981,"@metamask/utils":3026,lodash:4934,uuid:5768},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.generateSecurityAlertId=function(){return(0,i.v4)()},r.handlePPOMError=g,r.updateSecurityAlertResponse=async function({appStateController:e,messenger:t,method:r,securityAlertId:n,securityAlertResponse:s,signatureController:i,transactionController:a}){if(c.SIGNING_METHODS.includes(r)){const r=await async function(e,t,r){const n=e=>Object.values(e.signatureRequests).find((e=>{var r;return(null===(r=e.securityAlertResponse)||void 0===r?void 0:r.securityAlertId)===t}));return new Promise((s=>{const i=n(e.state);if(i)return void s(i);const a=e=>{const t=n(e);t&&(f("Found signature request",t),r.unsubscribe("SignatureController:stateChange",a),s(t))};f("Waiting for signature request",t),r.subscribe("SignatureController:stateChange",a)}))}(i,n,t);return e.addSignatureSecurityAlertResponse({...s,securityAlertId:n}),r}const o=await async function(e,t,r){const n=e=>{var r;return(null===(r=e.securityAlertResponse)||void 0===r?void 0:r.securityAlertId)===t};return new Promise((s=>{const i=e.state.transactions.find(n);if(i)return void s(i);const a=e=>{n(e)&&(f("Found transaction metadata",e),r.unsubscribe("TransactionController:unapprovedTransactionAdded",a),s(e))};f("Waiting for transaction metadata",t),r.subscribe("TransactionController:unapprovedTransactionAdded",a)}))}(a,n,t);return a.updateSecurityAlertResponse(o.id,{...s,securityAlertId:n}),o},r.validateRequestWithPPOM=async function({ppomController:e,request:t,securityAlertId:r,chainId:s,updateSecurityAlertResponse:i}){try{const c=function(e,t){let r=(0,a.cloneDeep)(e);r=function(e){if(e.method!==d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3&&e.method!==d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4)return e;if(!Array.isArray(e.params)||!e.params[1])return e;const t=(0,l.parseTypedDataMessage)(e.params[1].toString()),r=(0,u.sanitizeMessageRecursively)(t.message,t.types,t.primaryType);return{...e,params:[e.params[0],JSON.stringify({...t,message:r})]}}(r),r=function(e,t){if(e.method!==d.MESSAGE_TYPE.ETH_SEND_TRANSACTION)return e;if(!Array.isArray(e.params)||!e.params[0])return e;const r=e.params[0];r.gas=t.txParams.gas,r.gasPrice=t.txParams.maxFeePerGas??t.txParams.gasPrice,delete r.gasLimit,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.type;const s=(0,n.normalizeTransactionParams)(r);return f("Normalized transaction params",s),{...e,params:[s]}}(r,t);const{delegationMock:s,id:i,jsonrpc:o,method:c,origin:h,params:p}=r;return{delegationMock:s,id:i,jsonrpc:o,method:c,origin:h,params:p}}(t,await i(t.method,r,o.LOADING_SECURITY_ALERT_RESPONSE));f("Normalized request",c);const p=(0,h.isSecurityAlertsAPIEnabled)()?await async function(e,t,r){try{return{...await(0,h.validateWithSecurityAlertsAPI)(t,r),source:o.SecurityAlertSource.API}}catch(n){return g(n,"Error validating request with security alerts API"),await y(e,r,t)}}(e,s,c):await y(e,c,s);await i(t.method,r,p)}catch(e){f("Error",e),await i(t.method,r,g(e,"Error validating JSON RPC using PPOM: "))}};var n=e("@metamask/transaction-controller"),s=e("@metamask/utils"),i=e("uuid"),a=e("lodash"),o=e("../../../../shared/constants/security-provider"),c=e("../../../../shared/constants/transaction"),u=e("../../../../shared/modules/typed-signature"),l=e("../../../../shared/modules/transaction.utils"),d=e("../../../../shared/constants/app"),h=e("./security-alerts-api");const f=(0,s.createProjectLogger)("ppom-util"),{sentry:p}=global,m={result_type:o.BlockaidResultType.Errored,reason:o.BlockaidReason.errored};function g(e,t,r=o.SecurityAlertSource.API){const n=function(e){if("object"==typeof e||"string"==typeof e)return e;return JSON.stringify(e)}(e),s=function(e){if(e instanceof Error)return`${e.name}: ${e.message}`;return JSON.stringify(e)}(e);return r===o.SecurityAlertSource.Local&&(null==p||p.captureException(e)),console.error(t,n),{...m,description:s,source:r}}async function y(e,t,r){try{return{...await e.usePPOM((e=>e.validateJsonRpc(t)),r),source:o.SecurityAlertSource.Local}}catch(e){return g(e,"Error validating request with PPOM controller",o.SecurityAlertSource.Local)}}}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-util.ts"}],[152,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.PPOM=void 0,r.initSync=function(e){if(n!==undefined)return n;const t=S();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const r=new WebAssembly.Instance(e,t);return P(r,e)},r.main=function(){n.main()};const s="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&s.decode();let i=null;function a(){return null!==i&&0!==i.byteLength||(i=new Uint8Array(n.memory.buffer)),i}function o(e,t){return e>>>=0,s.decode(a().subarray(e,e+t))}const c=new Array(128).fill(undefined);c.push(undefined,null,!0,!1);let u=c.length;function l(e){u===c.length&&c.push(c.length+1);const t=u;return u=c[t],c[t]=e,t}function d(e){return c[e]}function h(e){const t=d(e);return function(e){e<132||(c[e]=u,u=e)}(e),t}let f=0;const p="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},m="function"==typeof p.encodeInto?function(e,t){return p.encodeInto(e,t)}:function(e,t){const r=p.encode(e);return t.set(r),{read:e.length,written:r.length}};function g(e,t,r){if(r===undefined){const r=p.encode(e),n=t(r.length,1)>>>0;return a().subarray(n,n+r.length).set(r),f=r.length,n}let n=e.length,s=t(n,1)>>>0;const i=a();let o=0;for(;o<n;o++){const t=e.charCodeAt(o);if(t>127)break;i[s+o]=t}if(o!==n){0!==o&&(e=e.slice(o)),s=r(s,n,n=o+3*e.length,1)>>>0;const t=a().subarray(s+o,s+n);o+=m(e,t).written}return f=o,s}let y=null;function b(){return null!==y&&0!==y.byteLength||(y=new Int32Array(n.memory.buffer)),y}function w(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let r="[";t>0&&(r+=w(e[0]));for(let n=1;n<t;n++)r+=", "+w(e[n]);return r+="]",r}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(!(r.length>1))return toString.call(e);if(n=r[1],"Object"==n)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:n}function v(e,t,r){n.wasm_bindgen__convert__closures__invoke1_mut(e,t,l(r))}function k(e,t){n._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__destroy(e,t)}let E=null;function T(e,t){const r=t(4*e.length,4)>>>0,s=(null!==E&&0!==E.byteLength||(E=new Uint32Array(n.memory.buffer)),E);for(let t=0;t<e.length;t++)s[r/4+t]=l(e[t]);return f=e.length,r}function _(e,t){try{return e.apply(this,t)}catch(e){n.__wbindgen_exn_store(l(e))}}class A{static __wrap(e){e>>>=0;const t=Object.create(A.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();n.__wbg_ppom_free(e)}static new(e,t){const r=T(t,n.__wbindgen_malloc),s=f;return h(n.ppom_new(l(e),r,s))}validateJsonRpc(e){return h(n.ppom_validateJsonRpc(this.__wbg_ptr,l(e)))}static version(){return h(n.ppom_version())}}function S(){const e={wbg:{}};return e.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return l(d(e).buffer)},e.wbg.__wbg_call_01734de55d61e11d=function(){return _((function(e,t,r){return l(d(e).call(d(t),d(r)))}),arguments)},e.wbg.__wbg_call_4c92f6aec1e1d6e6=function(){return _((function(e,t,r,n){return l(d(e).call(d(t),d(r),d(n)))}),arguments)},e.wbg.__wbg_from_d7c216d4616bb368=function(e){return l(Array.from(d(e)))},e.wbg.__wbg_get_44be0491f933a435=function(e,t){return l(d(e)[t>>>0])},e.wbg.__wbg_length_72e2208bbc0efc61=function(e){return d(e).length},e.wbg.__wbg_length_d813e535247d427e=function(e){return d(e).length},e.wbg.__wbg_length_fff51ee6522a1a18=function(e){return d(e).length},e.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var r={a:e,b:t};const s=new Promise(((e,t)=>{const s=r.a;r.a=0;try{return function(e,t,r,s){n.wasm_bindgen__convert__closures__invoke2_mut(e,t,l(r),l(s))}(s,r.b,e,t)}finally{r.a=s}}));return l(s)}finally{r.a=r.b=0}},e.wbg.__wbg_new_8125e318e6245eed=function(e){return l(new Uint8Array(d(e)))},e.wbg.__wbg_parse_670c19d4e984792e=function(){return _((function(e,t){return l(JSON.parse(o(e,t)))}),arguments)},e.wbg.__wbg_ppom_new=function(e){return l(A.__wrap(e))},e.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return l(Promise.resolve(d(e)))},e.wbg.__wbg_set_5cf90238115182c3=function(e,t,r){d(e).set(d(t),r>>>0)},e.wbg.__wbg_stringify_e25465938f3f611f=function(){return _((function(e){return l(JSON.stringify(d(e)))}),arguments)},e.wbg.__wbg_then_b2267541e2a73865=function(e,t,r){return l(d(e).then(d(t),d(r)))},e.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return l(d(e).then(d(t)))},e.wbg.__wbindgen_cb_drop=function(e){const t=h(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbindgen_closure_wrapper_wasm_bindgen__closure__Closure_T___wrap__breaks_if_inlined=function(e,t,r){const n=function(e,t,r,n){const s={a:e,b:t,cnt:1},i=(...e)=>{s.cnt++;const t=s.a;s.a=0;try{return n(t,s.b,...e)}finally{0==--s.cnt?r(t,s.b):s.a=t}};return i.original=s,i}(e,t,k,v);return l(n)},e.wbg.__wbindgen_debug_string=function(e,t){const r=g(w(d(t)),n.__wbindgen_malloc,n.__wbindgen_realloc),s=f;b()[e/4+1]=s,b()[e/4+0]=r},e.wbg.__wbindgen_error_new=function(e,t){return l(new Error(o(e,t)))},e.wbg.__wbindgen_is_undefined=function(e){return d(e)===undefined},e.wbg.__wbindgen_memory=function(){return l(n.memory)},e.wbg.__wbindgen_object_drop_ref=function(e){h(e)},e.wbg.__wbindgen_string_get=function(e,t){const r=d(t),s="string"==typeof r?r:undefined;var i,a=(i=s)===undefined||null===i?0:g(s,n.__wbindgen_malloc,n.__wbindgen_realloc),o=f;b()[e/4+1]=o,b()[e/4+0]=a},e.wbg.__wbindgen_string_new=function(e,t){return l(o(e,t))},e.wbg.__wbindgen_throw=function(e,t){throw new Error(o(e,t))},e}function P(e,t){return n=e.exports,M.__wbindgen_wasm_module=t,y=null,E=null,i=null,n.__wbindgen_start(),n}async function M(e){if(n!==undefined)return n;const t=S();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:s}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}(await e,t);return P(r,s)}r.PPOM=A;r.default=M}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom.js"}],[153,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isSecurityAlertsAPIEnabled=function(){const e="true";return"true"===e.toString()},r.validateWithSecurityAlertsAPI=async function(e,t){return async function(e,t){const r=function(e){const t="https://security-alerts.api.cx.metamask.io";if(!t)throw new Error("Security alerts API URL is not set");return`${t}/${e}`}(e),n=await fetch(r,t);if(!n.ok)throw new Error(`Security alerts API request failed with status: ${n.status}`);return await n.json()}(`${n}/${e}`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})};const n="validate"}}},{package:"$root$",file:"app/scripts/lib/ppom/security-alerts-api.ts"}],[154,{"./handlers":160,"./handlers/wallet-getPermissions":167,"./handlers/wallet-requestPermissions":168,"./handlers/wallet-revokePermissions":169,"@metamask/rpc-errors":2622,"@metamask/snaps-rpc-methods":2766,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createMultichainMethodMiddleware=r.createEthAccountsMethodMiddleware=r.createEip1193MethodMiddleware=void 0,r.makeMethodMiddlewareMaker=l;var n=e("@metamask/rpc-errors"),s=e("@metamask/snaps-rpc-methods"),i=e("@metamask/utils"),a=e("./handlers"),o=e("./handlers/wallet-getPermissions"),c=e("./handlers/wallet-requestPermissions"),u=e("./handlers/wallet-revokePermissions");r.createEip1193MethodMiddleware=l([...a.handlers,...a.eip1193OnlyHandlers,o.getPermissionsHandler,c.requestPermissionsHandler,u.revokePermissionsHandler]),r.createEthAccountsMethodMiddleware=l([a.ethAccountsHandler]),r.createMultichainMethodMiddleware=l(a.handlers);function l(e){const t=e.reduce(((e,t)=>{for(const r of t.methodNames)e[r]=t;return e}),{}),r=new Set(e.flatMap((({hookNames:e})=>Object.getOwnPropertyNames(e))));return e=>{!function(e,t){const r=[];if(t.forEach((t=>{(0,i.hasProperty)(e,t)||r.push(t)})),r.length>0)throw new Error(`Missing expected hooks:\n\n${r.join("\n")}\n`);const n=Object.getOwnPropertyNames(e).filter((e=>!t.has(e)));if(n.length>0)throw new Error(`Received unexpected hooks:\n\n${n.join("\n")}\n`)}(e,r);return async(r,i,a,o)=>{const c=t[r.method];if(c){const{implementation:t,hookNames:u}=c;try{return await t(r,i,a,o,(0,s.selectHooks)(e,u))}catch(e){return o(e instanceof Error?e:n.rpcErrors.internal({data:e}))}}return a()}}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[1547,{"./constants.cjs":1548,"./utils.cjs":1550,"@metamask/base-controller":1402,"@metamask/keyring-controller":2053,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.DelegationController=r.controllerName=void 0;const o=e("@metamask/base-controller"),c=e("@metamask/keyring-controller"),u=e("@metamask/utils"),l=e("./constants.cjs"),d=e("./utils.cjs");r.controllerName="DelegationController";const h={delegations:{persist:!0,anonymous:!1}};class f extends o.BaseController{constructor({messenger:e,state:t,hashDelegation:a,getDelegationEnvironment:o}){super({messenger:e,metadata:h,name:r.controllerName,state:{delegations:{},...t}}),n.set(this,void 0),s.set(this,void 0),i(this,n,a,"f"),i(this,s,o,"f")}async signDelegation(e){const{delegation:t,chainId:r}=e,{DelegationManager:n}=a(this,s,"f").call(this,r),i=(0,d.createTypedMessageParams)({chainId:(0,u.hexToNumber)(r),from:t.delegator,delegation:{...t,signature:"0x"},verifyingContract:n});return await this.messagingSystem.call("KeyringController:signTypedMessage",i,c.SignTypedDataVersion.V4)}store(e){const{entry:t}=e,r=a(this,n,"f").call(this,t.delegation);if(!(0,d.isHexEqual)(t.delegation.authority,l.ROOT_AUTHORITY)&&!this.state.delegations[t.delegation.authority])throw new Error("Invalid authority");this.update((e=>{e.delegations[r]=t}))}list(e){const t=this.messagingSystem.call("AccountsController:getSelectedAccount").address;let r=Object.values(this.state.delegations);e?.from&&(r=r.filter((t=>(0,d.isHexEqual)(t.delegation.delegator,e.from)))),(!e?.from||e?.from&&!(0,d.isHexEqual)(e.from,t))&&(r=r.filter((e=>(0,d.isHexEqual)(e.delegation.delegate,t))));const n=e?.chainId;n&&(r=r.filter((e=>(0,d.isHexEqual)(e.chainId,n))));const s=e?.tags;return s&&s.length>0&&(r=r.filter((e=>s.every((t=>e.tags.includes(t)))))),r}retrieve(e){return this.state.delegations[e]??null}chain(e){const t=[],r=this.retrieve(e);if(!r)return null;t.push(r);for(let e=r.delegation.authority;e!==l.ROOT_AUTHORITY;){const r=this.retrieve(e);if(!r)throw new Error("Invalid delegation chain");t.push(r),e=r.delegation.authority}return t}delete(e){if(!this.retrieve(e))return 0;const t=Object.entries(this.state.delegations),r=[e],n=[];for(;r.length>0;){const e=r.pop();t.filter((([t,r])=>r.delegation.authority===e)).forEach((([e])=>{r.push(e)})),n.push(e)}return this.update((e=>{n.forEach((t=>{delete e.delegations[t]}))})),n.length}}r.DelegationController=f,n=new WeakMap,s=new WeakMap}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/DelegationController.cjs"}],[1548,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SIGNABLE_DELEGATION_TYPED_DATA=r.ROOT_AUTHORITY=void 0,r.ROOT_AUTHORITY="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";r.SIGNABLE_DELEGATION_TYPED_DATA={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}],Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}]}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/constants.cjs"}],[1549,{"./DelegationController.cjs":1547},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DelegationController=void 0;var n=e("./DelegationController.cjs");Object.defineProperty(r,"DelegationController",{enumerable:!0,get:function(){return n.DelegationController}})}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/index.cjs"}],[155,{"../../../../shared/constants/network":5839,"@metamask/rpc-errors":2622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createUnsupportedMethodMiddleware=function(e=s.UNSUPPORTED_RPC_METHODS){return async function(t,r,s,i){return e.has(t.method)?i(n.rpcErrors.methodNotSupported()):s()}};var n=e("@metamask/rpc-errors"),s=e("../../../../shared/constants/network")}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createUnsupportedMethodMiddleware.ts"}],[1550,{"./constants.cjs":1548,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createTypedMessageParams=r.toDelegationStruct=r.isHexEqual=void 0;const n=e("@metamask/utils"),s=e("./constants.cjs");r.isHexEqual=function(e,t){return e.toLowerCase()===t.toLowerCase()};r.toDelegationStruct=e=>{const t=e.caveats.map((e=>({enforcer:(0,n.getChecksumAddress)(e.enforcer),terms:e.terms,args:e.args}))),r="0x"===e.salt?0n:BigInt(e.salt);return{delegate:(0,n.getChecksumAddress)(e.delegate),delegator:(0,n.getChecksumAddress)(e.delegator),authority:e.authority,caveats:t,salt:r,signature:e.signature}},r.createTypedMessageParams=function(e){const{chainId:t,from:n,delegation:i,verifyingContract:a}=e;return{data:{types:s.SIGNABLE_DELEGATION_TYPED_DATA,primaryType:"Delegation",domain:{chainId:t,name:"DelegationManager",version:"1",verifyingContract:a},message:(0,r.toDelegationStruct)(i)},from:n}}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/utils.cjs"}],[156,{"../../../../../shared/constants/app":5824,"./ethereum-chain-utils":158,"@metamask/controller-utils":1542,"@metamask/network-controller":2319,"@metamask/rpc-errors":2622,lodash:4934,"uri-js":5742},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=s?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("uri-js")),s=e("@metamask/controller-utils"),i=e("@metamask/network-controller"),a=e("@metamask/rpc-errors"),o=e("lodash"),c=e("../../../../../shared/constants/app"),u=e("./ethereum-chain-utils");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}const d={methodNames:[c.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,r,c,{addNetwork:l,updateNetwork:d,getNetworkConfigurationByChainId:h,setActiveNetwork:f,requestUserApproval:p,getCurrentChainIdForDomain:m,getCaveat:g,requestPermittedChainsPermissionIncrementalForOrigin:y,rejectApprovalRequestsForOrigin:b,setTokenNetworkFilter:w,setEnabledNetworks:v}){let k;try{k=(0,u.validateAddEthereumChainParams)(e.params[0])}catch(e){return c(e)}const{chainId:E,chainName:T,firstValidBlockExplorerUrl:_,firstValidRPCUrl:A,ticker:S}=k,{origin:P}=e,M=m(P),I=h(E);if(I&&I.chainId===E&&I.nativeCurrency!==S)return c(a.rpcErrors.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${S}`}));let C=I,j=null==I?void 0:I.rpcEndpoints.findIndex((({url:e})=>n.equal(e,A))),x=_?null==I?void 0:I.blockExplorerUrls.findIndex((e=>n.equal(e,_))):undefined;const B=!I||j!==I.defaultRpcEndpointIndex||_&&x!==I.defaultBlockExplorerUrlIndex;if(B)try{if(await p({origin:P,type:s.ApprovalType.AddEthereumChain,requestData:{chainId:E,rpcPrefs:{blockExplorerUrl:_},chainName:T,rpcUrl:A,ticker:S}}),I){const e=(0,o.cloneDeep)(I);-1===j&&(e.rpcEndpoints=[...e.rpcEndpoints,{url:A,type:i.RpcEndpointType.Custom,name:T}],j=e.rpcEndpoints.length-1),e.defaultRpcEndpointIndex=j,_&&(-1===x&&(e.blockExplorerUrls=[...e.blockExplorerUrls,_],x=e.blockExplorerUrls.length-1),e.defaultBlockExplorerUrlIndex=x),C=await d(e.chainId,e,M===E?{replacementSelectedRpcEndpointIndex:e.defaultRpcEndpointIndex}:undefined)}else C=await l({blockExplorerUrls:_?[_]:[],defaultBlockExplorerUrlIndex:_?0:undefined,chainId:E,defaultRpcEndpointIndex:0,name:T,nativeCurrency:S,rpcEndpoints:[{url:A,name:T,type:i.RpcEndpointType.Custom}]})}catch(e){return c(e)}const{networkClientId:O}=C.rpcEndpoints[C.defaultRpcEndpointIndex];return(0,u.switchChain)(t,c,E,O,{isAddFlow:!0,autoApprove:B,setActiveNetwork:f,getCaveat:g,requestPermittedChainsPermissionIncrementalForOrigin:y,rejectApprovalRequestsForOrigin:b,setTokenNetworkFilter:w,setEnabledNetworks:v})},hookNames:{addNetwork:!0,updateNetwork:!0,getNetworkConfigurationByChainId:!0,setActiveNetwork:!0,requestUserApproval:!0,getCurrentChainIdForDomain:!0,getCaveat:!0,requestPermittedChainsPermissionIncrementalForOrigin:!0,rejectApprovalRequestsForOrigin:!0,setTokenNetworkFilter:!0,setEnabledNetworks:!0}};r.default=d}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[157,{"../../../../../shared/constants/app":5824},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,r,n,{getAccounts:s}){return t.result=s(),n()},hookNames:{getAccounts:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.ts"}],[1575,{"@ethersproject/providers":578,"@metamask/base-controller":1402,"@metamask/controller-utils":1542,"@metamask/utils":3026,"punycode/punycode.js":5163},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.EnsController=r.DEFAULT_ENS_NETWORK_MAP=void 0;const l=e("@ethersproject/providers"),d=e("@metamask/base-controller"),h=e("@metamask/controller-utils"),f=e("@metamask/utils"),p=e("punycode/punycode.js"),m=(0,f.createProjectLogger)("ens-controller");r.DEFAULT_ENS_NETWORK_MAP={1:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",4:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",5:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",17e3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",11155111:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"};const g={ensEntries:{persist:!0,anonymous:!1},ensResolutionsByAddress:{persist:!0,anonymous:!1}},y={ensEntries:{},ensResolutionsByAddress:{}};class b extends d.BaseController{constructor({registriesByChainId:e=r.DEFAULT_ENS_NETWORK_MAP,messenger:t,state:o={},onNetworkDidChange:u}){super({name:"EnsController",metadata:g,messenger:t,state:{...y,ensEntries:Object.fromEntries(Object.entries(e).map((([e,t])=>[(0,h.toHex)(e),{".":{address:t,chainId:(0,h.toHex)(e),ensName:"."}}]))),...o}}),n.add(this),s.set(this,null),c(this,n,"m",i).call(this,e),u&&u((({selectedNetworkClientId:t})=>{this.resetState(),c(this,n,"m",a).call(this,t,e)}))}resetState(){this.update((e=>{e.ensResolutionsByAddress={}}))}clear(){this.update((e=>{e.ensEntries={}}))}delete(e,t){const r=(0,h.normalizeEnsName)(t);return!!((0,h.isSafeDynamicKey)(e)&&r&&this.state.ensEntries[e]&&this.state.ensEntries[e][r])&&(this.update((t=>{delete t.ensEntries[e][r],0===Object.keys(t.ensEntries[e]).length&&delete t.ensEntries[e]})),!0)}get(e,t){const r=(0,h.normalizeEnsName)(t);return r&&this.state.ensEntries[e]&&this.state.ensEntries[e][r]||null}set(e,t,r){if(!Number.isInteger(Number.parseInt(e,10))||!t||"string"!=typeof t||r&&!(0,h.isValidHexAddress)(r))throw new Error(`Invalid ENS entry: { chainId:${e}, ensName:${t}, address:${r}}`);const n=(0,h.normalizeEnsName)(t);if(!n)throw new Error(`Invalid ENS name: ${t}`);const s=r?(0,h.toChecksumHexAddress)(r):null,i=this.state.ensEntries[e];return(!i?.[n]||i[n].address!==s)&&(this.update((t=>{t.ensEntries={...this.state.ensEntries,[e]:{...this.state.ensEntries[e],[n]:{address:s,chainId:e,ensName:n}}}})),!0)}async reverseResolveAddress(e){if(!c(this,s,"f"))return undefined;const t=(0,h.toChecksumHexAddress)(e);if(this.state.ensResolutionsByAddress[t])return this.state.ensResolutionsByAddress[t];let r,n;try{r=await c(this,s,"f").lookupAddress(t)}catch(e){return m(e),undefined}if(!r)return undefined;try{n=await c(this,s,"f").resolveName(r)}catch(e){return m(e),undefined}return n?"0x0000000000000000000000000000000000000000"===n||"0x"===n||(0,h.toChecksumHexAddress)(n)!==t?undefined:(this.update((e=>{e.ensResolutionsByAddress[t]=(0,p.toASCII)(r)})),r):undefined}}r.EnsController=b,s=new WeakMap,n=new WeakSet,i=function(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");c(this,n,"m",a).call(this,t,e)},a=function(e,t){const{configuration:{chainId:r},provider:i}=this.messagingSystem.call("NetworkController:getNetworkClientById",e);t&&t[parseInt(r,16)]&&c(this,n,"m",o).call(this,r)?u(this,s,new l.Web3Provider(i,{chainId:(0,h.convertHexToDecimal)(r),name:h.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP[r],ensAddress:t[parseInt(r,16)]}),"f"):u(this,s,null,"f")},o=function(e){return Boolean(this.state.ensEntries[e])},r.default=b}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/EnsController.cjs"}],[1576,{"./EnsController.cjs":1575},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./EnsController.cjs"),r)}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/index.cjs"}],[1577,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorReportingService=void 0;r.ErrorReportingService=class{constructor({messenger:e,captureException:t}){n.set(this,void 0),s.set(this,void 0),i(this,s,e,"f"),i(this,n,t,"f"),a(this,s,"f").registerActionHandler("ErrorReportingService:captureException",a(this,n,"f").bind(this))}captureException(e){a(this,n,"f").call(this,e)}},n=new WeakMap,s=new WeakMap}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/error-reporting-service.cjs"}],[1578,{"./error-reporting-service.cjs":1577},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorReportingService=void 0;var n=e("./error-reporting-service.cjs");Object.defineProperty(r,"ErrorReportingService",{enumerable:!0,get:function(){return n.ErrorReportingService}})}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/index.cjs"}],[158,{"../../../../../shared/constants/app":5824,"../../../../../shared/modules/network.utils":5916,"../../util":206,"@metamask/chain-agnostic-permission":1525,"@metamask/controller-utils":1542,"@metamask/rpc-errors":2622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.switchChain=async function(e,t,r,s,{origin:a,isAddFlow:o,isSwitchFlow:c,autoApprove:u,setActiveNetwork:l,getCaveat:d,requestPermittedChainsPermissionIncrementalForOrigin:h,setTokenNetworkFilter:f,rejectApprovalRequestsForOrigin:p,requestUserApproval:m,hasApprovalRequestsForOrigin:g,toNetworkConfiguration:y,fromNetworkConfiguration:b}){try{const w=d({target:i.Caip25EndowmentPermissionName,caveatType:i.Caip25CaveatType});if(w){if((0,i.getPermittedEthChainIds)(w.value).includes(r))null!=g&&g()&&!o&&await m({origin:a,type:n.ApprovalType.SwitchEthereumChain,requestData:{toNetworkConfiguration:y,fromNetworkConfiguration:b}});else{let e;c&&(e={isSwitchEthereumChain:!0}),await h({chainId:r,autoApprove:u,metadata:e})}}else await h({chainId:r,autoApprove:u});return null==p||p(),await l(s),f(r),e.result=null,t()}catch(e){return t(e)}},r.validateAddEthereumChainParams=function(e){if(!e||"object"!=typeof e)throw s.rpcErrors.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e)}`});const{chainId:t,chainName:r,blockExplorerUrls:n,nativeCurrency:i,rpcUrls:a,...l}=e,d=Object.keys(l).filter((e=>!["iconUrls"].includes(e)));if(d.length>0)throw s.rpcErrors.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${d}`});const h=u(t);if(!a||!Array.isArray(a)||0===a.length)throw s.rpcErrors.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${a}`});const f=e=>{const t=(0,c.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname||"https:"===t.protocol)},p=a.find((e=>f(e))),m=Array.isArray(n)?n.find((e=>f(e))):null;if(!p)throw s.rpcErrors.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${a}`});if("string"!=typeof r||!r)throw s.rpcErrors.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${r}`});const g=r.length>100?r.substring(0,100):r;if(null!==i){if("object"!=typeof i||Array.isArray(i))throw s.rpcErrors.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${i}`});if(18!==i.decimals)throw s.rpcErrors.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${i.decimals}`});if(!i.symbol||"string"!=typeof i.symbol)throw s.rpcErrors.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${i.symbol}`})}const y=(null==i?void 0:i.symbol)||o.UNKNOWN_TICKER_SYMBOL;if(y!==o.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof y||y.length<1||y.length>6))throw s.rpcErrors.invalidParams({message:`Expected 1-6 character string 'nativeCurrency.symbol'. Received:\n${y}`});return{chainId:h,chainName:g,firstValidBlockExplorerUrl:m,firstValidRPCUrl:p,ticker:y}},r.validateChainId=u,r.validateSwitchEthereumChainParams=function(e){var t;if(null===(t=e.params)||void 0===t||!t[0]||"object"!=typeof e.params[0])throw s.rpcErrors.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`});const{chainId:r,...n}=e.params[0];if(Object.keys(n).length>0)throw s.rpcErrors.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${Object.keys(n)}`});return u(r)};var n=e("@metamask/controller-utils"),s=e("@metamask/rpc-errors"),i=e("@metamask/chain-agnostic-permission"),a=e("../../../../../shared/modules/network.utils"),o=e("../../../../../shared/constants/app"),c=e("../../util");function u(e){const t="string"==typeof e?e.toLowerCase():null;if(!(0,a.isPrefixedFormattedHexString)(t))throw s.rpcErrors.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${e}`});if(!(0,a.isSafeChainId)(parseInt(e,16)))throw s.rpcErrors.invalidParams({message:`Invalid chain ID "${t}": numerical value greater than max safe value. Received:\n${e}`});return t}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/ethereum-chain-utils.js"}],[159,{"../../../../../shared/constants/app":5824},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,r,n,{getProviderState:s}){return t.result={...await s(e.origin)},n()},hookNames:{getProviderState:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.ts"}],[16,{"../../../../shared/lib/trace":5895,"../../../../shared/modules/selectors":5922,"../../lib/transaction/hooks/delegation-7702-publish":200,"../../lib/transaction/metrics":201,"../../lib/transaction/smart-transactions":202,"../../lib/transaction/util":204,"@metamask/smart-transactions-controller/dist/types":2693,"@metamask/transaction-controller":2981,_process:5097},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionControllerInit=void 0;var n=e("@metamask/transaction-controller"),s=e("@metamask/smart-transactions-controller/dist/types"),i=e("../../../../shared/modules/selectors"),a=e("../../lib/transaction/smart-transactions"),o=e("../../lib/transaction/util"),c=e("../../../../shared/lib/trace"),u=e("../../lib/transaction/metrics"),l=e("../../lib/transaction/hooks/delegation-7702-publish");function d(e,t){const r=h(e);return{isSmartTransaction:(0,i.getIsSmartTransaction)(r,t),featureFlags:(0,i.getFeatureFlagsByChainId)(r,t),isHardwareWalletAccount:(0,i.isHardwareWallet)(r)}}function h(e){return{metamask:e}}r.TransactionControllerInit=e=>{var r;const{controllerMessenger:f,initMessenger:p,getFlatState:m,getGlobalChainId:g,getPermittedAccounts:y,getTransactionMetricsRequest:b,updateAccountBalanceForTransactionNetwork:w,persistedState:v}=e,{gasFeeController:k,keyringController:E,networkController:T,onboardingController:_,preferencesController:A,smartTransactionsController:S}=function(e){return{gasFeeController:()=>e.getController("GasFeeController"),keyringController:()=>e.getController("KeyringController"),networkController:()=>e.getController("NetworkController"),onboardingController:()=>e.getController("OnboardingController"),preferencesController:()=>e.getController("PreferencesController"),smartTransactionsController:()=>e.getController("SmartTransactionsController"),transactionUpdateController:()=>e.getController("TransactionUpdateController"),institutionalSnapController:()=>e.getController("InstitutionalSnapController")}}(e),P=new n.TransactionController({getCurrentNetworkEIP1559Compatibility:()=>p.call("NetworkController:getEIP1559Compatibility"),getCurrentAccountEIP1559Compatibility:async()=>!0,getExternalPendingTransactions:e=>function(e,t){return e.getTransactions({addressFrom:t,status:s.SmartTransactionStatuses.PENDING})}(S(),e),getGasFeeEstimates:(...e)=>k().fetchGasFeeEstimates(...e),getNetworkClientRegistry:(...e)=>T().getNetworkClientRegistry(...e),getNetworkState:()=>T().state,getPermittedAccounts:y,getSavedGasFees:()=>{const e=g();return A().state.advancedGasFee[e]},incomingTransactions:{client:`extension-${null===(r=t.env.METAMASK_VERSION)||void 0===r?void 0:r.replace(/\./gu,"-")}`,includeTokenTransfers:!1,isEnabled:()=>A().state.useExternalServices&&_().state.completedOnboarding,queryEntireHistory:!1,updateTransactions:!1},isAutomaticGasFeeUpdateEnabled:()=>!0,isEIP7702GasFeeTokensEnabled:async e=>{const{chainId:t}=e,r=h(m());return!(0,i.getIsSmartTransaction)(r,t)},isFirstTimeInteractionEnabled:()=>A().state.securityAlertsEnabled,isSimulationEnabled:()=>A().state.useTransactionSimulations,messenger:f,pendingTransactions:{isResubmitEnabled:()=>{const e=h(m());return!((0,i.getSmartTransactionsPreferenceEnabled)(e)&&(0,i.getChainSupportsSmartTransactions)(e))}},publicKeyEIP7702:"0x3c7a1cCCe462e96D186B8ca9a1BCB2010C3dABa3",testGasFeeFlows:Boolean(!1),trace:c.trace,hooks:{beforePublish:e=>p.call("InstitutionalSnapController:publishHook",e),beforeCheckPendingTransactions:e=>p.call("InstitutionalSnapController:beforeCheckPendingTransactionHook",e),publish:(e,t)=>async function({flatState:e,initMessenger:t,signedTx:r,smartTransactionsController:n,transactionController:s,transactionMeta:i}){const o=await async function(e,t,r,n,s,i){const{isSmartTransaction:o,featureFlags:c,isHardwareWalletAccount:u}=d(n,s.chainId);if(!o)return{transactionHash:undefined};return await(0,a.submitSmartTransactionHook)({transactionMeta:s,signedTransactionInHex:i,transactionController:e,smartTransactionsController:t,controllerMessenger:r,isSmartTransaction:o,isHardwareWallet:u,featureFlags:c})}(s,n,t,e,i,r);if(null!=o&&o.transactionHash)return o;const c=new l.Delegation7702PublishHook({isAtomicBatchSupported:s.isAtomicBatchSupported.bind(s),messenger:t}).getHook();return await c(i,r)}({flatState:m(),initMessenger:p,signedTx:t,smartTransactionsController:S(),transactionController:P,transactionMeta:e}),publishBatch:async e=>await function({transactionController:e,smartTransactionsController:t,hookControllerMessenger:r,flatState:n,transactions:s}){const i=s[s.length-1],c=(0,o.getTransactionById)(i.id??"",e);if(!c)throw new Error(`publishBatchSmartTransactionHook: Could not find transaction with id ${i.id}`);const{isSmartTransaction:u,featureFlags:l,isHardwareWalletAccount:h}=d(n,c.chainId);if(!u)throw new Error("publishBatchSmartTransactionHook: Smart Transaction is required for batch submissions");return(0,a.submitBatchSmartTransactionHook)({transactions:s,transactionController:e,smartTransactionsController:t,controllerMessenger:r,isSmartTransaction:u,isHardwareWallet:h,featureFlags:l,transactionMeta:c})}({transactionController:P,smartTransactionsController:S(),hookControllerMessenger:p,flatState:m(),transactions:e.transactions})},sign:(...e)=>E().signTransaction(...e),state:v.TransactionController});!function(e,t,r){const n=t();e.subscribe("TransactionController:unapprovedTransactionAdded",r),e.subscribe("TransactionController:transactionConfirmed",r),e.subscribe("TransactionController:postTransactionBalanceUpdated",u.handlePostTransactionBalanceUpdate.bind(null,n)),e.subscribe("TransactionController:unapprovedTransactionAdded",(e=>(0,u.handleTransactionAdded)(n,{transactionMeta:e}))),e.subscribe("TransactionController:transactionApproved",u.handleTransactionApproved.bind(null,n)),e.subscribe("TransactionController:transactionDropped",u.handleTransactionDropped.bind(null,n)),e.subscribe("TransactionController:transactionConfirmed",u.handleTransactionConfirmed.bind(null,n)),e.subscribe("TransactionController:transactionFailed",u.handleTransactionFailed.bind(null,n)),e.subscribe("TransactionController:transactionNewSwap",(({transactionMeta:t})=>e.call("SwapsController:setTradeTxId",t.id))),e.subscribe("TransactionController:transactionNewSwapApproval",(({transactionMeta:t})=>e.call("SwapsController:setApproveTxId",t.id))),e.subscribe("TransactionController:transactionRejected",u.handleTransactionRejected.bind(null,n)),e.subscribe("TransactionController:transactionSubmitted",u.handleTransactionSubmitted.bind(null,n))}(p,b,w);const M=function(e){return{abortTransactionSigning:e.abortTransactionSigning.bind(e),getLayer1GasFee:e.getLayer1GasFee.bind(e),getTransactions:e.getTransactions.bind(e),isAtomicBatchSupported:e.isAtomicBatchSupported.bind(e),updateAtomicBatchData:e.updateAtomicBatchData.bind(e),updateBatchTransactions:e.updateBatchTransactions.bind(e),updateEditableParams:e.updateEditableParams.bind(e),updatePreviousGasParams:e.updatePreviousGasParams.bind(e),updateSelectedGasFeeToken:e.updateSelectedGasFeeToken.bind(e),updateTransactionGasFees:e.updateTransactionGasFees.bind(e),updateTransactionSendFlowHistory:e.updateTransactionSendFlowHistory.bind(e)}}(P);return{controller:P,api:M,memStateKey:"TxController"}}}).call(this)}).call(this,e("_process"))}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/transaction-controller-init.ts"}],[160,{"./add-ethereum-chain":156,"./eth-accounts":157,"./get-provider-state":159,"./log-web3-shim-usage":161,"./request-accounts":162,"./send-metadata":163,"./switch-ethereum-chain":164,"./watch-asset":170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handlers=r.ethAccountsHandler=r.eip1193OnlyHandlers=void 0;var n=d(e("./add-ethereum-chain")),s=d(e("./eth-accounts")),i=d(e("./get-provider-state")),a=d(e("./log-web3-shim-usage")),o=d(e("./request-accounts")),c=d(e("./send-metadata")),u=d(e("./switch-ethereum-chain")),l=d(e("./watch-asset"));function d(e){return e&&e.__esModule?e:{default:e}}r.handlers=[n.default,i.default,a.default,c.default,l.default],r.eip1193OnlyHandlers=[u.default,s.default,o.default],r.ethAccountsHandler=s.default}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/index.ts"}],[161,{"../../../../../shared/constants/app":5824},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,r,n,{getWeb3ShimUsageState:s,setWeb3ShimUsageRecorded:i}){const{origin:a}=e;s(a)===undefined&&i(a);return t.result=!0,n()},hookNames:{getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.ts"}],[162,{"../../../../../shared/constants/app":5824,"../../../../../shared/constants/metametrics":5836,"../../util":206,"@metamask/rpc-errors":2622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/rpc-errors"),s=e("../../../../../shared/constants/app"),i=e("../../../../../shared/constants/metametrics"),a=e("../../util");const o={methodNames:[s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS],implementation:async function(e,t,r,o,{getAccounts:u,getUnlockPromise:l,sendMetrics:d,metamaskState:h,getCaip25PermissionFromLegacyPermissionsForOrigin:f,requestPermissionsForOrigin:p}){const{origin:m}=e;if(c.has(m))return t.error=n.rpcErrors.resourceUnavailable(`Already processing ${s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS}. Please wait.`),o();let g=u({ignoreLock:!0});if(g.length>0){try{c.add(m),await l(!0),t.result=g,o()}catch(e){o(e)}finally{c.delete(m)}return undefined}try{const e=f();await p(e)}catch(e){return o(e)}if(g=u({ignoreLock:!0}),(0,a.shouldEmitDappViewedEvent)(h.metaMetricsId)){const e=!Object.keys(h.permissionHistory).includes(m);d({event:i.MetaMetricsEventName.DappViewed,category:i.MetaMetricsEventCategory.InpageProvider,referrer:{url:m},properties:{is_first_visit:e,number_of_accounts:Object.keys(h.accounts).length,number_of_accounts_connected:g.length}},{excludeMetaMetricsId:!0})}return t.result=g,o()},hookNames:{getAccounts:!0,getUnlockPromise:!0,sendMetrics:!0,metamaskState:!0,getCaip25PermissionFromLegacyPermissionsForOrigin:!0,requestPermissionsForOrigin:!0}};r.default=o;const c=new Set}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/request-accounts.js"}],[1623,{"./base-filter":1624},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter");t.exports=class extends n{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter-history.js"}],[1624,{"@metamask/safe-event-emitter":2624},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/safe-event-emitter").default;t.exports=class extends n{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach((e=>this.emit("update",e)))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter.js"}],[1625,{"./base-filter":1624,"./getBlocksForRange":1626,"./hexUtils":1627},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:i}=e("./hexUtils");t.exports=class extends n{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const r=t,n=i(e),a=(await s({provider:this.provider,fromBlock:n,toBlock:r})).map((e=>e.hash));this.addResults(a)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/block-filter.js"}],[1626,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function s(e){if(e===undefined||null===e)return e;return"0x"+e.toString(16)}t.exports=async function({provider:e,fromBlock:t,toBlock:r}){t||(t=r);const i=n(t),a=n(r),o=Array(a-i+1).fill().map(((e,t)=>i+t)).map(s);let c=await Promise.all(o.map((t=>async function(e,t,r){for(let n=0;n<3;n++)try{return e.request({id:1,jsonrpc:"2.0",method:t,params:r})}catch(e){console.error(`provider.request failed: ${e.stack||e.message||e}`)}return null}(e,"eth_getBlockByNumber",[t,!1]))));return c=c.filter((e=>null!==e)),c}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/getBlocksForRange.js"}],[1627,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e.sort(((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:s(e)-s(t)))}function s(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function i(e){if(e===undefined||null===e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function a(){return Math.floor(16*Math.random()).toString(16)}t.exports={minBlockRef:function(...e){return n(e)[0]},maxBlockRef:function(...e){const t=n(e);return t[t.length-1]},sortBlockRefs:n,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:s,incrementHexInt:function(e){if(e===undefined||null===e)return e;return i(s(e)+1)},intToHex:i,unsafeRandomBytes:function(e){let t="0x";for(let r=0;r<e;r++)t+=a(),t+=a();return t}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/hexUtils.js"}],[1628,{"./block-filter.js":1625,"./hexUtils":1627,"./log-filter.js":1629,"./tx-filter.js":1631,"@metamask/json-rpc-engine":1996,"async-mutex":3964},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("async-mutex").Mutex,{createAsyncMiddleware:s,createScaffoldMiddleware:i}=e("@metamask/json-rpc-engine"),a=e("./log-filter.js"),o=e("./block-filter.js"),c=e("./tx-filter.js"),{intToHex:u,hexToInt:l}=e("./hexUtils");function d(e){return h((async(...t)=>{const r=await e(...t);return u(r.id)}))}function h(e){return s((async(t,r)=>{const n=await e.apply(null,t.params);r.result=n}))}function f(e,t){const r=[];for(let t in e)r.push(e[t]);return r}t.exports=function({blockTracker:e,provider:t}){let r=0,s={};const p=new n,m=function({mutex:e}){return t=>async(r,n,s,i)=>{(await e.acquire())(),t(r,n,s,i)}}({mutex:p}),g=i({eth_newFilter:m(d(b)),eth_newBlockFilter:m(d(w)),eth_newPendingTransactionFilter:m(d(v)),eth_uninstallFilter:m(h(T)),eth_getFilterChanges:m(h(k)),eth_getFilterLogs:m(h(E))}),y=async({oldBlock:e,newBlock:t})=>{if(0===s.length)return;const r=await p.acquire();try{await Promise.all(f(s).map((async r=>{try{await r.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}})))}catch(e){console.error(e)}r()};return g.newLogFilter=b,g.newBlockFilter=w,g.newPendingTransactionFilter=v,g.uninstallFilter=T,g.getFilterChanges=k,g.getFilterLogs=E,g.destroy=()=>{!async function(){const e=f(s).length;s={},A({prevFilterCount:e,newFilterCount:0})}()},g;async function b(e){const r=new a({provider:t,params:e});await _(r);return r}async function w(){const e=new o({provider:t});await _(e);return e}async function v(){const e=new c({provider:t});await _(e);return e}async function k(e){const t=l(e),r=s[t];if(!r)throw new Error(`No filter for index "${t}"`);return r.getChangesAndClear()}async function E(e){const t=l(e),r=s[t];if(!r)throw new Error(`No filter for index "${t}"`);let n=[];return"log"===r.type&&(n=r.getAllResults()),n}async function T(e){const t=l(e),r=s[t],n=Boolean(r);return n&&await async function(e){const t=f(s).length;delete s[e];const r=f(s).length;A({prevFilterCount:t,newFilterCount:r})}(t),n}async function _(t){const n=f(s).length,i=await e.getLatestBlock();await t.initialize({currentBlock:i}),r++,s[r]=t,t.id=r,t.idHex=u(r);return A({prevFilterCount:n,newFilterCount:f(s).length}),r}function A({prevFilterCount:t,newFilterCount:r}){0===t&&r>0?e.on("sync",y):t>0&&0===r&&e.removeListener("sync",y)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/index.js"}],[1629,{"./base-filter-history":1623,"./hexUtils":1627,"@metamask/eth-query":1753,pify:5090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/eth-query"),s=e("pify"),i=e("./base-filter-history"),{bnToHex:a,hexToInt:o,incrementHexInt:c,minBlockRef:u,blockRefIsNumber:l}=e("./hexUtils");t.exports=class extends i{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new n(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:undefined,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map((e=>e.toLowerCase())))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const r=u(this.params.toBlock,e),n=Object.assign({},this.params,{toBlock:r}),s=await this._fetchLogs(n);this.addInitialResults(s)}async update({oldBlock:e,newBlock:t}){const r=t;let n;n=e?c(e):t;const s=Object.assign({},this.params,{fromBlock:n,toBlock:r}),i=(await this._fetchLogs(s)).filter((e=>this.matchLog(e)));this.addResults(i)}async _fetchLogs(e){return await s((t=>this.ethQuery.getLogs(e,t)))()}matchLog(e){if(o(this.params.fromBlock)>=o(e.blockNumber))return!1;if(l(this.params.toBlock)&&o(this.params.toBlock)<=o(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every(((t,r)=>{let n=e.topics[r];if(!n)return!1;n=n.toLowerCase();let s=Array.isArray(t)?t:[t];if(s.includes(null))return!0;s=s.map((e=>e.toLowerCase()));return s.includes(n)}))}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/log-filter.js"}],[163,{"../../../../../shared/constants/app":5824,"@metamask/rpc-errors":2622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/rpc-errors");const s={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.SEND_METADATA],implementation:function(e,t,r,s,{addSubjectMetadata:i,subjectType:a}){const{origin:o,params:c}=e;if(!c||"object"!=typeof c||Array.isArray(c))return s(n.rpcErrors.invalidParams({data:c}));{const{icon:e=null,name:t=null,...r}=c;i({...r,iconUrl:e,name:t,subjectType:a,origin:o})}return t.result=!0,s()},hookNames:{addSubjectMetadata:!0,subjectType:!0}};r.default=s}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/send-metadata.js"}],[1630,{"./getBlocksForRange.js":1626,"./hexUtils.js":1627,"./index.js":1628,"@metamask/json-rpc-engine":1996,"@metamask/safe-event-emitter":2624},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/safe-event-emitter").default,{createAsyncMiddleware:s,createScaffoldMiddleware:i}=e("@metamask/json-rpc-engine"),a=e("./index.js"),{unsafeRandomBytes:o,incrementHexInt:c}=e("./hexUtils.js"),u=e("./getBlocksForRange.js");function l(e){return null===e||e===undefined?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}t.exports=function({blockTracker:e,provider:t}){const r={},d=a({blockTracker:e,provider:t});let h=!1;const f=new n,p=i({eth_subscribe:s((async function(n,s){if(h)throw new Error("SubscriptionManager - attempting to use after destroying");const i=n.params[0],a=o(16);let f;switch(i){case"newHeads":f=p({subId:a});break;case"logs":const e=n.params[1];f=g({subId:a,filter:await d.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${i}"`)}return r[a]=f,void(s.result=a);function p({subId:r}){const n={type:i,destroy:async()=>{e.removeListener("sync",n.update)},update:async({oldBlock:e,newBlock:n})=>{const s=n,i=c(e);(await u({provider:t,fromBlock:i,toBlock:s})).map(l).filter((e=>null!==e)).forEach((e=>{m(r,e)}))}};return e.on("sync",n.update),n}function g({subId:e,filter:t}){t.on("update",(t=>m(e,t)));return{type:i,destroy:async()=>await d.uninstallFilter(t.idHex)}}})),eth_unsubscribe:s((async function(e,t){if(h)throw new Error("SubscriptionManager - attempting to use after destroying");const n=e.params[0],s=r[n];if(!s)return void(t.result=!1);delete r[n],await s.destroy(),t.result=!0}))});return p.destroy=function(){f.removeAllListeners();for(const e in r)r[e].destroy(),delete r[e];h=!0},{events:f,middleware:p};function m(e,t){f.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/subscriptionManager.js"}],[1631,{"./base-filter":1624,"./getBlocksForRange":1626,"./hexUtils":1627},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:i}=e("./hexUtils");t.exports=class extends n{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,r=i(e),n=await s({provider:this.provider,fromBlock:r,toBlock:t}),a=[];for(const e of n)a.push(...e.transactions);this.addResults(a)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/tx-filter.js"}],[1637,{"./logging-utils":1644,"./utils/cache":1650,"@metamask/json-rpc-engine":1996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./logging-utils"),i=e("./utils/cache"),a=(0,s.createModuleLogger)(s.projectLogger,"block-cache"),o=[undefined,null,"<nil>"];class c{constructor(){this.cache={}}getBlockCache(e){const t=Number.parseInt(e,16);let r=this.cache[t];if(!r){const e={};this.cache[t]=e,r=e}return r}async get(e,t){const r=this.getBlockCache(t),n=(0,i.cacheIdentifierForRequest)(e,!0);return n?r[n]:undefined}async set(e,t,r){if(!this.canCacheResult(e,r))return;const n=(0,i.cacheIdentifierForRequest)(e,!0);if(!n)return;this.getBlockCache(t)[n]=r}canCacheRequest(e){if(!(0,i.canCache)(e.method))return!1;return"pending"!==(0,i.blockTagForRequest)(e)}canCacheResult(e,t){return!o.includes(t)&&!(e.method&&["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(e.method)&&(!t||!t.blockHash||"0x0000000000000000000000000000000000000000000000000000000000000000"===t.blockHash))}clearBefore(e){const t=Number.parseInt(e,16);Object.keys(this.cache).map(Number).filter((e=>e<t)).forEach((e=>delete this.cache[e]))}}r.createBlockCacheMiddleware=function({blockTracker:e}={}){if(!e)throw new Error("createBlockCacheMiddleware - No PollingBlockTracker specified");const t=new c,r={[i.CacheStrategy.Permanent]:t,[i.CacheStrategy.Block]:t,[i.CacheStrategy.Fork]:t,[i.CacheStrategy.Never]:undefined};return(0,n.createAsyncMiddleware)((async(n,s,o)=>{if(n.skipCache)return o();const c=(0,i.cacheTypeForMethod)(n.method),u=r[c];if(!u)return o();if(!u.canCacheRequest(n))return o();const l=(0,i.blockTagForRequest)(n),d=l&&"string"==typeof l?l:"latest";let h;if(a("blockTag = %o, req = %o",d,n),"earliest"===d)h="0x00";else if("latest"===d){a("Fetching latest block number to determine cache key");const r=await e.getLatestBlock();a("Clearing values stored under block numbers before %o",r),t.clearBefore(r),h=r}else h=d;const f=await u.get(n,h);return f===undefined?(a("No cache stored under block number %o, carrying request forward",h),await o(),a("Populating cache with",s),await u.set(n,h,s.result)):(a("Cache hit, reusing cache result stored under block number %o",h),s.result=f),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-cache.js"}],[1638,{"./utils/cache":1650,"@metamask/json-rpc-engine":1996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefRewriteMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./utils/cache");r.createBlockRefRewriteMiddleware=function({blockTracker:e}={}){if(!e)throw Error('BlockRefRewriteMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const i=(0,s.blockTagParamIndex)(t.method);if(i===undefined)return n();if("latest"!==(Array.isArray(t.params)&&t.params[i]?t.params[i]:"latest"))return n();const a=await e.getLatestBlock();return Array.isArray(t.params)&&(t.params[i]=a),n()}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref-rewrite.js"}],[1639,{"./logging-utils":1644,"./utils/cache":1650,"@metamask/json-rpc-engine":1996,"klona/full":4786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("klona/full"),i=e("./logging-utils"),a=e("./utils/cache"),o=(0,i.createModuleLogger)(i.projectLogger,"block-ref");r.createBlockRefMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('BlockRefMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('BlockRefMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(r,n,i)=>{var c;const u=(0,a.blockTagParamIndex)(r.method);if(u===undefined)return i();if("latest"!==(Array.isArray(r.params)&&null!==(c=r.params[u])&&void 0!==c?c:"latest"))return o('blockRef is not "latest", carrying request forward'),i();const l=await t.getLatestBlock();o(`blockRef is "latest", setting param ${u} to latest block ${l}`);const d=(0,s.klona)(r);return Array.isArray(d.params)&&(d.params[u]=l),o("Performing another request %o",d),n.result=await e.request(d),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref.js"}],[164,{"../../../../../shared/constants/app":5824,"./ethereum-chain-utils":158,"@metamask/rpc-errors":2622,"@metamask/snaps-utils":2925},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/rpc-errors"),s=e("@metamask/snaps-utils"),i=e("../../../../../shared/constants/app"),a=e("./ethereum-chain-utils");const o={methodNames:[i.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN],implementation:async function(e,t,r,o,{getNetworkConfigurationByChainId:c,setActiveNetwork:u,requestUserApproval:l,getCaveat:d,getCurrentChainIdForDomain:h,requestPermittedChainsPermissionIncrementalForOrigin:f,rejectApprovalRequestsForOrigin:p,setTokenNetworkFilter:m,hasApprovalRequestsForOrigin:g}){let y;try{y=(0,a.validateSwitchEthereumChainParams)(e)}catch(e){return o(e)}const{origin:b}=e,w=h(b);if(w===y)return t.result=null,o();const v=c(y),k=null==v?void 0:v.rpcEndpoints[v.defaultRpcEndpointIndex].networkClientId;if(!k)return o(n.providerErrors.custom({code:4902,message:`Unrecognized chain ID "${y}". Try adding the chain using ${i.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN} first.`}));const E=c(w),T=c(y);return(0,a.switchChain)(t,o,y,k,{origin:b,isSwitchFlow:!0,autoApprove:(0,s.isSnapId)(b),setActiveNetwork:u,getCaveat:d,requestPermittedChainsPermissionIncrementalForOrigin:f,rejectApprovalRequestsForOrigin:p,setTokenNetworkFilter:m,requestUserApproval:l,hasApprovalRequestsForOrigin:g,toNetworkConfiguration:T,fromNetworkConfiguration:E})},hookNames:{getNetworkConfigurationByChainId:!0,setActiveNetwork:!0,requestUserApproval:!0,getCaveat:!0,getCurrentChainIdForDomain:!0,requestPermittedChainsPermissionIncrementalForOrigin:!0,rejectApprovalRequestsForOrigin:!0,setTokenNetworkFilter:!0,hasApprovalRequestsForOrigin:!0}};r.default=o}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/switch-ethereum-chain.js"}],[1640,{"./logging-utils":1644,"@metamask/json-rpc-engine":1996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockTrackerInspectorMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./logging-utils"),i=(0,s.createModuleLogger)(s.projectLogger,"block-tracker-inspector"),a=["eth_getTransactionByHash","eth_getTransactionReceipt"];function o(e){const{result:t}=e;return t&&"object"==typeof t&&(r=t,n="blockNumber",Object.hasOwnProperty.call(r,n))&&"string"==typeof t.blockNumber?t.blockNumber:undefined;var r,n}r.createBlockTrackerInspectorMiddleware=function({blockTracker:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(!a.includes(t.method))return n();await n();const s=o(r);if(!s)return undefined;i("res.result.blockNumber exists, proceeding. res = %o",r);return Number.parseInt(s,16)>Number.parseInt(e.getCurrentBlock(),16)&&(i("blockNumber from response is greater than current block number, refreshing current block number"),await e.checkForLatestBlock()),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-tracker-inspector.js"}],[1641,{"./utils/timeout":1654,"@metamask/json-rpc-engine":1996,"@metamask/rpc-errors":2622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createFetchConfigFromReq=r.createFetchMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("@metamask/rpc-errors"),i=e("./utils/timeout"),a=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function o(e){switch(e.status){case 405:throw s.rpcErrors.methodNotFound();case 418:throw s.rpcErrors.internal({message:"Request is being rate limited."});case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",s.rpcErrors.internal({message:e})}()}}function c(e,t){if(200!==e.status)throw s.rpcErrors.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw s.rpcErrors.internal({data:t.error});return t.result}function u({btoa:e,req:t,rpcUrl:r,originHttpHeaderKey:n}){const s=new URL(r),i=function(e){let t="";t+=e.protocol,t+=`//${e.hostname}`,e.port&&(t+=`:${e.port}`);return t+=`${e.pathname}`,t+=`${e.search}`,t}(s),a={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},o=t.origin,c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)};if(s.username&&s.password){const t=e(`${s.username}:${s.password}`);c.headers.Authorization=`Basic ${t}`}return n&&o&&(c.headers[n]=o),{fetchUrl:i,fetchParams:c}}r.createFetchMiddleware=function(e){return"rpcService"in e?function({rpcService:e,options:t={}}){return(0,n.createAsyncMiddleware)((async(r,n)=>{const i="originHttpHeaderKey"in t&&t.originHttpHeaderKey!==undefined&&r.origin!==undefined?{[t.originHttpHeaderKey]:r.origin}:{},a=await e.request({id:r.id,jsonrpc:r.jsonrpc,method:r.method,params:r.params},{headers:i});if("error"in a)throw s.rpcErrors.internal({data:a.error});n.result=a.result}))}(e):function({btoa:e,fetch:t,rpcUrl:r,originHttpHeaderKey:s}){return(0,n.createAsyncMiddleware)((async(n,l,d)=>{const{fetchUrl:h,fetchParams:f}=u({btoa:e,req:n,rpcUrl:r,originHttpHeaderKey:s}),p=5,m=1e3;for(let e=0;e<p;e++){try{const e=await t(h,f);o(e);const r=await e.text();let n;try{n=JSON.parse(r)}catch(e){throw new Error(`FetchMiddleware - failed to parse response body: "${r}"`)}const s=c(e,n);return void(l.result=s)}catch(e){const t=e.toString();if(!a.some((e=>t.includes(e))))throw e}await(0,i.timeout)(m)}}))}(e)},r.createFetchConfigFromReq=u}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/fetch.js"}],[1642,{"./block-cache":1637,"./block-ref":1639,"./block-ref-rewrite":1638,"./block-tracker-inspector":1640,"./fetch":1641,"./inflight-cache":1643,"./methods/wallet-get-calls-status":1645,"./providerAsMiddleware":1648,"./retryOnEmpty":1649,"./wallet":1656},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.GetCallsStatusCode=void 0,s(e("./block-cache"),r),s(e("./block-ref-rewrite"),r),s(e("./block-ref"),r),s(e("./block-tracker-inspector"),r),s(e("./fetch"),r),s(e("./inflight-cache"),r);var i=e("./methods/wallet-get-calls-status");Object.defineProperty(r,"GetCallsStatusCode",{enumerable:!0,get:function(){return i.GetCallsStatusCode}}),s(e("./providerAsMiddleware"),r),s(e("./retryOnEmpty"),r),s(e("./wallet"),r)}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/index.js"}],[1643,{"./logging-utils":1644,"./utils/cache":1650,"@metamask/json-rpc-engine":1996,"klona/full":4786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createInflightCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("klona/full"),i=e("./logging-utils"),a=e("./utils/cache"),o=(0,i.createModuleLogger)(i.projectLogger,"inflight-cache");r.createInflightCacheMiddleware=function(){const e={};return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(t.skipCache)return n();const i=(0,a.cacheIdentifierForRequest)(t);if(!i)return o("Request is not cacheable, proceeding. req = %o",t),n();let c=e[i];return c?(o("Running %i handler(s) for request %o",c.length,t),await async function(e,t){const{resolve:r,promise:n}=function(){let e;const t=new Promise((t=>{e=t}));return{resolve:e,promise:t}}();return t.push((t=>{e.result=(0,s.klona)(t.result),e.error=(0,s.klona)(t.error),r()})),n}(r,c),undefined):(c=[],e[i]=c,o("Carrying original request forward %o",t),await n(),delete e[i],o("Running %i collected handler(s) for request %o",c.length,t),function(e,t){setTimeout((()=>{t.forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}))}(r,c),undefined)}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/inflight-cache.js"}],[1644,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-json-rpc-middleware")}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/logging-utils.js"}],[1645,{"../utils/validation":1655,"@metamask/rpc-errors":2622,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletGetCallsStatus=r.GetCallsStatusCode=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),i=e("@metamask/utils"),a=e("../utils/validation"),o=(0,s.tuple)([i.StrictHexStruct]);!function(e){e[e.PENDING=100]="PENDING",e[e.CONFIRMED=200]="CONFIRMED",e[e.FAILED_OFFCHAIN=400]="FAILED_OFFCHAIN",e[e.REVERTED=500]="REVERTED",e[e.REVERTED_PARTIAL=600]="REVERTED_PARTIAL"}(r.GetCallsStatusCode||(r.GetCallsStatusCode={})),r.walletGetCallsStatus=async function(e,t,{getCallsStatus:r}){if(!r)throw n.rpcErrors.methodNotSupported();(0,a.validateParams)(e.params,o);const s=e.params[0];t.result=await r(s,e)}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/methods/wallet-get-calls-status.js"}],[1646,{"../utils/validation":1655,"@metamask/rpc-errors":2622,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletGetCapabilities=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),i=e("@metamask/utils"),a=e("../utils/validation"),o=(0,s.tuple)([i.HexChecksumAddressStruct,(0,s.optional)((0,s.array)(i.StrictHexStruct))]);r.walletGetCapabilities=async function(e,t,{getAccounts:r,getCapabilities:s}){if(!s)throw n.rpcErrors.methodNotSupported();(0,a.validateParams)(e.params,o);const i=e.params[0],c=e.params[1];await(0,a.validateAndNormalizeKeyholder)(i,e,{getAccounts:r});const u=await s(i,c,e);t.result=u}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/methods/wallet-get-capabilities.js"}],[1647,{"../utils/validation":1655,"@metamask/rpc-errors":2622,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletSendCalls=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),i=e("@metamask/utils"),a=e("../utils/validation"),o=(0,s.record)((0,s.string)(),(0,s.type)({optional:(0,s.optional)((0,s.boolean)())})),c=(0,s.tuple)([(0,s.object)({version:(0,s.nonempty)((0,s.string)()),id:(0,s.optional)(i.StrictHexStruct),from:(0,s.optional)(i.HexChecksumAddressStruct),chainId:i.StrictHexStruct,atomicRequired:(0,s.boolean)(),calls:(0,s.array)((0,s.object)({to:(0,s.optional)(i.HexChecksumAddressStruct),data:(0,s.optional)(i.StrictHexStruct),value:(0,s.optional)(i.StrictHexStruct),capabilities:(0,s.optional)(o)})),capabilities:(0,s.optional)(o)})]);r.walletSendCalls=async function(e,t,{getAccounts:r,processSendCalls:s}){if(!s)throw n.rpcErrors.methodNotSupported();(0,a.validateParams)(e.params,c);const i=e.params[0],o=i.from?await(0,a.validateAndNormalizeKeyholder)(i.from,e,{getAccounts:r}):undefined,u=Object.assign(Object.assign({},i),{from:o});t.result=await s(u,e)}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/methods/wallet-send-calls.js"}],[1648,{"@metamask/json-rpc-engine":1996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ethersProviderAsMiddleware=r.providerAsMiddleware=void 0;const n=e("@metamask/json-rpc-engine");r.providerAsMiddleware=function(e){return(0,n.createAsyncMiddleware)((async(t,r)=>{r.result=await e.request(t)}))},r.ethersProviderAsMiddleware=function(e){return(t,r,n,s)=>{e.send(t,((e,t)=>e?s(e):(Object.assign(r,t),s())))}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/providerAsMiddleware.js"}],[1649,{"./logging-utils":1644,"./utils/cache":1650,"./utils/error":1652,"./utils/timeout":1654,"@metamask/json-rpc-engine":1996,"klona/full":4786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createRetryOnEmptyMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("klona/full"),i=e("./logging-utils"),a=e("./utils/cache"),o=e("./utils/error"),c=e("./utils/timeout"),u=(0,i.createModuleLogger)(i.projectLogger,"retry-on-empty"),l=[undefined,null,"<nil>"];r.createRetryOnEmptyMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('RetryOnEmptyMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('RetryOnEmptyMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(r,n,i)=>{const d=(0,a.blockTagParamIndex)(r.method);if(d===undefined)return i();let h=Array.isArray(r.params)&&r.params[d]?r.params[d]:undefined;if(h===undefined&&(h="latest"),["latest","pending"].includes(h))return i();const f=Number.parseInt(h.slice(2),16);if(Number.isNaN(f))return i();const p=await t.getLatestBlock(),m=Number.parseInt(p.slice(2),16);if(f>m)return u("Requested block number %o is higher than latest block number %o, falling through to original request",f,m),i();u("Requested block number %o is not higher than latest block number %o, trying request until non-empty response is received",f,m);const g=(0,s.klona)(r),y=await async function(e,t){for(let r=0;r<e;r++)try{return await t()}catch(e){if((0,o.isExecutionRevertedError)(e))throw e;u("(call %i) Request failed, waiting 1s to retry again...",r+1),await(0,c.timeout)(1e3)}throw u("Retries exhausted"),new Error("RetryOnEmptyMiddleware - retries exhausted")}(10,(async()=>{u("Performing request %o",g);const t=await e.request(g);u("Result is %o",t);if(l.includes(t))throw new Error(`RetryOnEmptyMiddleware - empty result "${JSON.stringify(t)}" for request "${JSON.stringify(g)}"`);return t}));return u("Copying result %o",y),n.result=y,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/retryOnEmpty.js"}],[165,{"../../../../../../shared/constants/app":5824,"../../../../../../shared/constants/metametrics":5836,"../../../../../../shared/modules/string-utils":5926,"../../../util":206,"@metamask/chain-agnostic-permission":1525,"@metamask/multichain-transactions-controller":2216,"@metamask/permission-controller":2452,"@metamask/rpc-errors":2622,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletCreateSession=void 0;var n=e("@metamask/rpc-errors"),s=e("@metamask/chain-agnostic-permission"),i=e("@metamask/permission-controller"),a=e("@metamask/utils"),o=e("@metamask/multichain-transactions-controller"),c=e("../../../../../../shared/constants/metametrics"),u=e("../../../util"),l=e("../../../../../../shared/constants/app"),d=e("../../../../../../shared/modules/string-utils");r.walletCreateSession={methodNames:[l.MESSAGE_TYPE.WALLET_CREATE_SESSION],implementation:async function(e,t,r,l,h){const{origin:f}=e;if(!(0,a.isPlainObject)(e.params))return l((0,i.invalidParams)({data:{request:e}}));const{requiredScopes:p,optionalScopes:m,sessionProperties:g}=e.params;if(g&&0===Object.keys(g).length)return l(new n.JsonRpcError(5302,"Invalid sessionProperties requested"));const y=Object.fromEntries(Object.entries(g??{}).filter((([e])=>(0,s.isKnownSessionPropertyValue)(e))));try{var b;const{normalizedRequiredScopes:e,normalizedOptionalScopes:r}=(0,s.validateAndNormalizeScopes)(p||{},m||{}),i=(0,s.getSupportedScopeObjects)(e,{getNonEvmSupportedMethods:h.getNonEvmSupportedMethods}),g=(0,s.getSupportedScopeObjects)(r,{getNonEvmSupportedMethods:h.getNonEvmSupportedMethods}),w=e=>{try{return h.findNetworkClientIdByChainId(e),!0}catch(e){return!1}},v=(0,s.isNamespaceInScopesObject)(i,a.KnownCaipNamespace.Solana)||(0,s.isNamespaceInScopesObject)(g,a.KnownCaipNamespace.Solana);let k=!1;if(v){k=0===(await h.getNonEvmAccountAddresses(o.MultichainNetwork.Solana)).length}const{supportedScopes:E}=(0,s.bucketScopes)(i,{isEvmChainIdSupported:w,isEvmChainIdSupportable:()=>!1,getNonEvmSupportedMethods:h.getNonEvmSupportedMethods,isNonEvmScopeSupported:h.isNonEvmScopeSupported}),{supportedScopes:T}=(0,s.bucketScopes)(g,{isEvmChainIdSupported:w,isEvmChainIdSupportable:()=>!1,getNonEvmSupportedMethods:h.getNonEvmSupportedMethods,isNonEvmScopeSupported:h.isNonEvmScopeSupported}),_=(0,s.getCaipAccountIdsFromScopesObjects)([E,T]),A=(0,s.getAllScopesFromScopesObjects)([E,T]),S=h.listAccounts().map((e=>e.address)),P=_.filter((e=>{const{address:t,chain:{namespace:r},chainId:n}=(0,a.parseCaipAccountId)(e);return r===a.KnownCaipNamespace.Eip155?S.some((e=>(0,d.isEqualCaseInsensitive)(t,e))):h.getNonEvmAccountAddresses(n).some((t=>e===t))})),M={requiredScopes:(0,s.getInternalScopesObject)(E),optionalScopes:(0,s.getInternalScopesObject)(T),isMultichainOrigin:!0,sessionProperties:y},I=(0,s.setNonSCACaipAccountIdsInCaip25CaveatValue)(M,P);if(0===A.length){if(!k)return l(new n.JsonRpcError(5100,"Requested scopes are not supported"));I.optionalScopes[a.KnownCaipNamespace.Wallet]={accounts:[]}}const[C]=await h.requestPermissionsForOrigin({[s.Caip25EndowmentPermissionName]:{caveats:[{type:s.Caip25CaveatType,value:I}]}},{metadata:{promptToCreateSolanaAccount:k}}),j=C[s.Caip25EndowmentPermissionName],x=null==j||null===(b=j.caveats)||void 0===b||null===(b=b.find((e=>e.type===s.Caip25CaveatType)))||void 0===b?void 0:b.value;if(!x)throw n.rpcErrors.internal();const B=(0,s.getSessionScopes)(x,{getNonEvmSupportedMethods:h.getNonEvmSupportedMethods}),{sessionProperties:O={}}=x;if((0,u.shouldEmitDappViewedEvent)(h.metamaskState.metaMetricsId)){const e=!Object.keys(h.metamaskState.permissionHistory).includes(f),t=(0,s.getEthAccounts)(x);h.sendMetrics({event:c.MetaMetricsEventName.DappViewed,category:c.MetaMetricsEventCategory.InpageProvider,referrer:{url:f},properties:{is_first_visit:e,number_of_accounts:Object.keys(h.metamaskState.accounts).length,number_of_accounts_connected:t.length}},{excludeMetaMetricsId:!0})}return t.result={sessionScopes:B,sessionProperties:O},l()}catch(e){return l(e)}},hookNames:{findNetworkClientIdByChainId:!0,listAccounts:!0,requestPermissionsForOrigin:!0,sendMetrics:!0,metamaskState:!0,getNonEvmSupportedMethods:!0,isNonEvmScopeSupported:!0,getNonEvmAccountAddresses:!0}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-createSession/handler.ts"}],[1650,{"safe-stable-stringify":5617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.cacheTypeForMethod=r.blockTagParamIndex=r.blockTagForRequest=r.canCache=r.cacheIdentifierForRequest=r.CacheStrategy=void 0;const n=(0,e("safe-stable-stringify").configure)({bigint:!1,circularValue:Error});var s;function i(e){return o(e)!==s.Never}function a(e){switch(e){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return undefined}}function o(e){switch(e){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return s.Permanent;case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return s.Fork;case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return s.Block;default:return s.Never}}!function(e){e.Block="block",e.Fork="fork",e.Never="never",e.Permanent="perma"}(s=r.CacheStrategy||(r.CacheStrategy={})),r.cacheIdentifierForRequest=function(e,t){var r;const s=t?function(e){if(!e.params)return[];const t=a(e.method);if(t===undefined||!Array.isArray(e.params)||t>=e.params.length)return e.params;if("eth_getBlockByNumber"===e.method)return e.params.slice(1);return e.params.slice(0,t)}(e):null!==(r=e.params)&&void 0!==r?r:[];return i(e.method)?`${e.method}:${n(s)}`:null},r.canCache=i,r.blockTagForRequest=function(e){if(!e.params)return undefined;const t=a(e.method);return t===undefined||!Array.isArray(e.params)||t>=e.params.length?undefined:e.params[t]},r.blockTagParamIndex=a,r.cacheTypeForMethod=o}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/cache.js"}],[1651,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.stripArrayTypeIfPresent=void 0;r.stripArrayTypeIfPresent=e=>(null==e?void 0:e.match(/\S\[\d*\]$/u))?e.replace(/\[\d*\]$/gu,"").trim():e}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/common.js"}],[1652,{"@metamask/rpc-errors":2622,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isExecutionRevertedError=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/utils");r.isExecutionRevertedError=function(e){return(0,s.isJsonRpcError)(e)&&e.code===n.errorCodes.rpc.invalidInput&&"execution reverted"===e.message}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/error.js"}],[1653,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return"string"!=typeof e?e:JSON.parse(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.parseTypedMessage=r.normalizeTypedMessage=void 0,r.normalizeTypedMessage=function(e){var t;let r;try{r=n(e)}catch(t){return e}const{verifyingContract:s}=null!==(t=r.domain)&&void 0!==t?t:{};return s?(r.domain.verifyingContract=function(e){if(e.startsWith("0X"))return`0x${e.slice(2)}`;return e}(s),JSON.stringify(r)):e},r.parseTypedMessage=n}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/normalize.js"}],[1654,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeout=void 0,r.timeout=async function(e){return new Promise((t=>setTimeout(t,e)))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/timeout.js"}],[1655,{"@metamask/rpc-errors":2622,"@metamask/superstruct":2947},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.resemblesAddress=r.validateParams=r.validateAndNormalizeKeyholder=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/superstruct");function i(e){return 42===e.length}r.validateAndNormalizeKeyholder=async function(e,t,{getAccounts:r}){if("string"==typeof e&&e.length>0&&i(e)){const s=(await r(t)).map((e=>e.toLowerCase())),i=e.toLowerCase();if(s.includes(i))return i;throw n.providerErrors.unauthorized()}throw n.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})},r.validateParams=function(e,t){const[r]=(0,s.validate)(e,t);if(r)throw n.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map((e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`)).join("\n")}`}(r,"Invalid params"))},r.resemblesAddress=i}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/validation.js"}],[1656,{"./methods/wallet-get-calls-status":1645,"./methods/wallet-get-capabilities":1646,"./methods/wallet-send-calls":1647,"./utils/common":1651,"./utils/normalize":1653,"./utils/validation":1655,"@metamask/eth-sig-util":1693,"@metamask/json-rpc-engine":1996,"@metamask/rpc-errors":2622,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.createWalletMiddleware=void 0;const a=i(e("@metamask/eth-sig-util")),o=e("@metamask/json-rpc-engine"),c=e("@metamask/rpc-errors"),u=e("@metamask/utils"),l=e("./methods/wallet-get-calls-status"),d=e("./methods/wallet-get-capabilities"),h=e("./methods/wallet-send-calls"),f=e("./utils/common"),p=e("./utils/normalize"),m=e("./utils/validation");function g(e){const{primaryType:t,types:r}=(0,p.parseTypedMessage)(e);if(!r)throw c.rpcErrors.invalidInput();if(!r[(0,f.stripArrayTypeIfPresent)(t)])throw c.rpcErrors.invalidInput()}function y(e){const{domain:{verifyingContract:t}={}}=(0,p.parseTypedMessage)(e);if(t&&"cosmos"!==t&&!(0,u.isValidHexAddress)(t))throw c.rpcErrors.invalidInput()}r.createWalletMiddleware=function({getAccounts:e,getCallsStatus:t,getCapabilities:r,processDecryptMessage:n,processEncryptionPublicKey:s,processPersonalMessage:i,processTransaction:u,processSignTransaction:f,processTypedMessage:b,processTypedMessageV3:w,processTypedMessageV4:v,processSendCalls:k}){if(!e)throw new Error("opts.getAccounts is required");return(0,o.createScaffoldMiddleware)({eth_accounts:(0,o.createAsyncMiddleware)((async function(t,r){r.result=await e(t)})),eth_coinbase:(0,o.createAsyncMiddleware)((async function(t,r){const n=await e(t);r.result=n[0]||null})),eth_sendTransaction:(0,o.createAsyncMiddleware)((async function(e,t){if(!u)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await E((null==r?void 0:r.from)||"",e)});t.result=await u(n,e)})),eth_signTransaction:(0,o.createAsyncMiddleware)((async function(e,t){if(!f)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await E((null==r?void 0:r.from)||"",e)});t.result=await f(n,e)})),eth_signTypedData:(0,o.createAsyncMiddleware)((async function(e,t){if(!b)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],s=await E(r[1],e),i=r[2]||{},a=Object.assign(Object.assign({},i),{from:s,data:n,signatureMethod:"eth_signTypedData",version:"V1"});t.result=await b(a,e,"V1")})),eth_signTypedData_v3:(0,o.createAsyncMiddleware)((async function(e,t){if(!w)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await E(r[0],e),s=(0,p.normalizeTypedMessage)(r[1]);g(s),y(s);const i={data:s,from:n,version:"V3",signatureMethod:"eth_signTypedData_v3"};t.result=await w(i,e,"V3")})),eth_signTypedData_v4:(0,o.createAsyncMiddleware)((async function(e,t){if(!v)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await E(r[0],e),s=(0,p.normalizeTypedMessage)(r[1]);g(s),y(s);const i={data:s,from:n,version:"V4",signatureMethod:"eth_signTypedData_v4"};t.result=await v(i,e,"V4")})),personal_sign:(0,o.createAsyncMiddleware)((async function(e,t){if(!i)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],s=r[1],a=r[2]||{};let o,u;if((0,m.resemblesAddress)(n)&&!(0,m.resemblesAddress)(s)){let e="The eth_personalSign method requires params ordered ";e+="[message, address]. This was previously handled incorrectly, ",e+="and has been corrected automatically. ",e+="Please switch this param order for smooth behavior in the future.",t.warning=e,o=n,u=s}else u=n,o=s;o=await E(o,e);const l=Object.assign(Object.assign({},a),{from:o,data:u,signatureMethod:"personal_sign"});t.result=await i(l,e)})),eth_getEncryptionPublicKey:(0,o.createAsyncMiddleware)((async function(e,t){if(!s)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params,n=await E(r[0],e);t.result=await s(n,e)})),eth_decrypt:(0,o.createAsyncMiddleware)((async function(e,t){if(!n)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params,s=r[0],i=await E(r[1],e),a=r[2]||{},o=Object.assign(Object.assign({},a),{from:i,data:s});t.result=await n(o,e)})),personal_ecRecover:(0,o.createAsyncMiddleware)((async function(e,t){if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],s=r[1],i=a.recoverPersonalSignature({data:n,signature:s});t.result=i})),wallet_getCapabilities:(0,o.createAsyncMiddleware)((async(t,n)=>(0,d.walletGetCapabilities)(t,n,{getAccounts:e,getCapabilities:r}))),wallet_sendCalls:(0,o.createAsyncMiddleware)((async(t,r)=>(0,h.walletSendCalls)(t,r,{getAccounts:e,processSendCalls:k}))),wallet_getCallsStatus:(0,o.createAsyncMiddleware)((async(e,r)=>(0,l.walletGetCallsStatus)(e,r,{getCallsStatus:t})))});async function E(t,r){return(0,m.validateAndNormalizeKeyholder)(t,r,{getAccounts:e})}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/wallet.js"}],[1657,{"./bytes":1660,"./constants":1661,"./helpers":1663,"./internal":1665,"@ethereumjs/rlp":462,buffer:4138,"ethereum-cryptography/keccak":4372,"ethereum-cryptography/secp256k1":4393,"ethereum-cryptography/utils":4395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const n=e("@ethereumjs/rlp"),s=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),a=e("ethereum-cryptography/utils"),o=e("./bytes"),c=e("./constants"),u=e("./helpers"),l=e("./internal"),d=BigInt(0);class h{constructor(e=d,t=d,r=c.KECCAK256_RLP,n=c.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:s}=e;return new h(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,r!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):undefined,n!==undefined?(0,o.toBuffer)(n):undefined,s!==undefined?(0,o.toBuffer)(s):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,s]=e;return new h((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),n,s)}_validate(){if(this.nonce<d)throw new Error("nonce must be greater than zero");if(this.balance<d)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(n.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===d&&this.nonce===d&&this.codeHash.equals(c.KECCAK256_NULL)}}r.Account=h;r.isValidAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,u.assertIsHexString)(e);const n=(0,l.stripHexPrefix)(e).toLowerCase();let i="";if(r!==undefined){i=(0,o.bufferToBigInt)((0,o.toBuffer)(r)).toString()+"0x"}const c=t.from(i+n,"utf8"),d=(0,a.bytesToHex)((0,s.keccak256)(c));let h="0x";for(let e=0;e<n.length;e++)parseInt(d[e],16)>=8?h+=n[e].toUpperCase():h+=n[e];return h};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,o.bufferToBigInt)(r)===BigInt(0)?t.from((0,s.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,s.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,n){if((0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,u.assertIsBuffer)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const i=(0,s.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,s.keccak256)(n)]));return(0,o.toBuffer)(i).slice(-20)};r.isValidPrivate=function(e){return i.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,u.assertIsBuffer)(e),64===e.length)try{return i.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return i.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,u.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,s.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,u.assertIsBuffer)(e),t.from(i.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,u.assertIsBuffer)(e),64!==e.length&&(e=t.from(i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function f(e){const[t,r,n,s]=e;return[t,r,0===(0,o.arrToBufArr)(n).length?c.KECCAK256_RLP:n,0===(0,o.arrToBufArr)(s).length?c.KECCAK256_NULL:s]}r.isZeroAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=f;const p=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,n,s]=e;return[t,r,(0,o.arrToBufArr)(n).equals(c.KECCAK256_RLP)?p:n,(0,o.arrToBufArr)(s).equals(c.KECCAK256_NULL)?p:s]},r.accountBodyToRLP=function(e,t=!0){const r=t?f(e):e;return(0,o.arrToBufArr)(n.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/account.js"}],[1658,{"./account":1657,"./bytes":1660,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const n=e("./account"),s=e("./bytes");class i{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new i((0,s.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new i((0,s.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,n.pubToAddress)(e);return new i(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,n.privateToAddress)(e);return new i(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new i((0,n.generateAddress)(e.buf,(0,s.bigIntToBuffer)(t)))}static generate2(e,r,s){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(s))throw new Error("Expected initCode to be a Buffer");return new i((0,n.generateAddress2)(e.buf,r,s))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(i.zero())}isPrecompileOrSystemAddress(){const e=(0,s.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=i}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/address.js"}],[1659,{events:4475},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const n=e("events");class s extends n.EventEmitter{emit(e,...t){let[r,n]=t;const s=this;let i=s._events[e]??[];return n===undefined&&"function"==typeof r&&(n=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=undefined),i=Array.isArray(i)?i:[i],async function(e,t,r){let n;for await(const s of t)try{s.length<2?s.call(e,r):await new Promise(((t,n)=>{s.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(s,i.slice(),r).then(n).catch(n),s.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(s,i){r.removeListener(e,n),t(s,i)}:function(s){r.removeListener(e,n),t(s,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let s,i,a=this._events[e]??[];const o="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),i=a.length,s=a.length;s--;)if(a[s]===t){i=s+o;break}return a.splice(i,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=s}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[166,{"./handler":165},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./handler");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-createSession/index.ts"}],[1660,{"./helpers":1663,"./internal":1665,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const n=e("./helpers"),s=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const n=(0,r.intToHex)(e);return t.from((0,s.padToEven)(n.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const i=function(e,t,n){const s=(0,r.zeros)(t);return n?e.length<t?(e.copy(s),s):e.slice(0,t):e.length<t?(e.copy(s,t-e.length),s):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,n.assertIsBuffer)(e),i(e,t,!1)};r.setLengthRight=function(e,t){return(0,n.assertIsBuffer)(e),i(e,t,!0)};const a=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,n.assertIsBuffer)(e),a(e)};r.unpadArray=function(e){return(0,n.assertIsArray)(e),a(e)};r.unpadHexString=function(e){return(0,n.assertIsHexString)(e),e=(0,s.stripHexPrefix)(e),"0x"+a(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,s.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,s.padToEven)((0,s.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function c(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=o,r.bigIntToBuffer=c;r.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,o(e))};r.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,s.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const n=t.isBuffer(e)?e.toString("hex"):e;return n.length<=r?n:n.slice(0,r)+"…"};r.toUtf8=function(e){if((e=(0,s.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,r.baToJSON)(e[n]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(c(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/bytes.js"}],[1661,{buffer:4138,"ethereum-cryptography/secp256k1":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("buffer"),s=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=s.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=s.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=n.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/constants.js"}],[1662,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=t<<5,1&~e.length||(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,n.subarray(1)),n};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const n=2-(1&t[0]);return t.subarray(n)}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/encoding.js"}],[1663,{"../../../../../../is-buffer/index.js":4736,"./internal":1665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const n=e("./internal");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../is-buffer/index.js")})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/helpers.js"}],[1664,{"./account":1657,"./address":1658,"./asyncEventEmitter":1659,"./bytes":1660,"./constants":1661,"./encoding":1662,"./internal":1665,"./lock":1666,"./provider":1667,"./signature":1668,"./types":1669,"./units":1670,"./withdrawal":1671},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,s(e("./constants"),r),s(e("./units"),r),s(e("./account"),r),s(e("./address"),r),s(e("./withdrawal"),r),s(e("./signature"),r),s(e("./bytes"),r),s(e("./types"),r),s(e("./encoding"),r),s(e("./asyncEventEmitter"),r);var i=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return i.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return i.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),s(e("./lock"),r),s(e("./provider"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/index.js"}],[1665,{buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function n(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=n,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(t){return`0x${n(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let s=0;s<e.length;s++){let i=e[s][t];if(!0!==r||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";n.push(i)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/internal.js"}],[1666,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/lock.js"}],[1667,{"micro-ftch":4990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const n=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/provider.js"}],[1668,{"./bytes":1660,"./constants":1661,"./helpers":1663,buffer:4138,"ethereum-cryptography/keccak":4372,"ethereum-cryptography/secp256k1":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak"),s=e("ethereum-cryptography/secp256k1"),i=e("./bytes"),a=e("./constants"),o=e("./helpers");function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function u(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,n){const i=s.secp256k1.sign(e,r),a=i.toCompactRawBytes();return{r:t.from(a.slice(0,32)),s:t.from(a.slice(32,64)),v:n===undefined?BigInt(i.recovery+27):BigInt(i.recovery+35)+BigInt(n)*BigInt(2)}};r.ecrecover=function(e,r,n,a,o){const l=t.concat([(0,i.setLengthLeft)(n,32),(0,i.setLengthLeft)(a,32)],64),d=c(r,o);if(!u(d))throw new Error("Invalid signature v value");const h=s.secp256k1.Signature.fromCompact(l).addRecoveryBit(Number(d)).recoverPublicKey(e);return t.from(h.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,n,s){if(!u(c(e,s)))throw new Error("Invalid signature v value");return(0,i.bufferToHex)(t.concat([(0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(n,32),(0,i.toBuffer)(e)]))};r.toCompactSig=function(e,r,n,s){if(!u(c(e,s)))throw new Error("Invalid signature v value");let a=n;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(a=t.from(n),a[0]|=128),(0,i.bufferToHex)(t.concat([(0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(a,32)]))};r.fromRpcSig=function(e){const t=(0,i.toBuffer)(e);let r,n,s;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),s=(0,i.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),s=BigInt((0,i.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return s<27&&(s+=BigInt(27)),{v:s,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,s){if(32!==t.length||32!==r.length)return!1;if(!u(c(e,s)))return!1;const o=(0,i.bufferToBigInt)(t),l=(0,i.bufferToBigInt)(r);return!(o===BigInt(0)||o>=a.SECP256K1_ORDER||l===BigInt(0)||l>=a.SECP256K1_ORDER)&&!(n&&l>=a.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,n.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/signature.js"}],[1669,{"./bytes":1660,"./internal":1665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes"),s=e("./internal");var i;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(i=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,s.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case i.Buffer:return r;case i.BigInt:return(0,n.bufferToBigInt)(r);case i.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case i.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/types.js"}],[167,{"../../../../../shared/constants/permissions":5843,"../../../controllers/permissions":88,"@metamask/chain-agnostic-permission":1525,"@metamask/permission-controller":2452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionsHandler=void 0;var n=e("@metamask/permission-controller"),s=e("@metamask/chain-agnostic-permission"),i=e("../../../controllers/permissions"),a=e("../../../../../shared/constants/permissions");r.getPermissionsHandler={methodNames:[n.MethodNames.GetPermissions],implementation:async function(e,t,r,n,{getPermissionsForOrigin:o,getAccounts:c}){var u;const l={...o()},d=l[s.Caip25EndowmentPermissionName],h=null==d||null===(u=d.caveats)||void 0===u||null===(u=u.find((({type:e})=>e===s.Caip25CaveatType)))||void 0===u?void 0:u.value;if(delete l[s.Caip25EndowmentPermissionName],h){const e=c({ignoreLock:!0});e.length>0&&(l[a.RestrictedMethods.eth_accounts]={...d,parentCapability:a.RestrictedMethods.eth_accounts,caveats:[{type:a.CaveatTypes.restrictReturnedAccounts,value:e}]});const t=(0,s.getPermittedEthChainIds)(h);t.length>0&&(l[i.PermissionNames.permittedChains]={...d,parentCapability:i.PermissionNames.permittedChains,caveats:[{type:a.CaveatTypes.restrictNetworkSwitching,value:t}]})}return t.result=Object.values(l),n()},hookNames:{getPermissionsForOrigin:!0,getAccounts:!0}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-getPermissions.ts"}],[1670,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/units.js"}],[1671,{"./address":1658,"./bytes":1660,"./types":1669,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address"),s=e("./bytes"),i=e("./types");class a{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:s,amount:o}=e,c=(0,i.toType)(t,i.TypeOutput.BigInt),u=(0,i.toType)(r,i.TypeOutput.BigInt),l=new n.Address((0,i.toType)(s,i.TypeOutput.Buffer)),d=(0,i.toType)(o,i.TypeOutput.BigInt);return new a(c,u,l,d)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,s]=e;return a.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:s})}static toBufferArray(e){const{index:r,validatorIndex:s,address:a,amount:o}=e,c=(0,i.toType)(r,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(r,i.TypeOutput.Buffer),u=(0,i.toType)(s,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(s,i.TypeOutput.Buffer);let l;l=a instanceof n.Address?a.buf:(0,i.toType)(a,i.TypeOutput.Buffer);return[c,u,l,(0,i.toType)(o,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(o,i.TypeOutput.Buffer)]}raw(){return a.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,s.bigIntToHex)(this.index),validatorIndex:(0,s.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,s.bigIntToHex)(this.amount)}}}r.Withdrawal=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[1672,{"./errors":1673,"./packer":1676,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeSingle=r.decode=r.encodePacked=r.encodeSingle=r.encode=void 0;const n=e("@metamask/utils"),s=e("./errors"),i=e("./packer");r.encode=(e,t,r,n)=>{try{return(0,i.pack)({types:e,values:t,packed:r,tight:n})}catch(e){if(e instanceof s.ParserError)throw new s.ParserError(`Unable to encode value: ${e.message}`,e);throw new s.ParserError(`An unexpected error occurred: ${(0,s.getErrorMessage)(e)}`,e)}};r.encodeSingle=(e,t)=>(0,r.encode)([e],[t]);r.encodePacked=(e,t,n)=>(0,r.encode)(e,t,!0,n);r.decode=(e,t)=>{const r=(0,n.createBytes)(t);try{return(0,i.unpack)(e,r)}catch(e){if(e instanceof s.ParserError)throw new s.ParserError(`Unable to decode value: ${e.message}`,e);throw new s.ParserError(`An unexpected error occurred: ${(0,s.getErrorMessage)(e)}`,e)}};r.decodeSingle=(e,t)=>{const i=(0,r.decode)([e],t);return(0,n.assert)(1===i.length,new s.ParserError("Decoded value array has unexpected length.")),i[0]}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/abi.js"}],[1673,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParserError=r.getErrorStack=r.getErrorMessage=void 0;const n=e("@metamask/utils");r.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,n.isObject)(e)&&(0,n.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";r.getErrorStack=e=>e instanceof Error?e.stack:undefined;class s extends Error{constructor(e,t){super(e),this.name="ParserError";const n=(0,r.getErrorStack)(t);n&&(this.stack=n)}}r.ParserError=s}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/errors.js"}],[1674,{"./abi":1672,"./errors":1673,"./types":1689},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./abi"),r),s(e("./errors"),r),s(e("./types"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/index.js"}],[1675,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.iterate=void 0;const n=e("@metamask/utils");r.iterate=function*(e,t=32){for(let r=0;r<e.length;r+=t){const s=e=>{(0,n.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,n.assert)(e%t==0,"Length must be a multiple of the size."),r+=e},i=e.subarray(r);yield{skip:s,value:i}}return{skip:()=>undefined,value:new Uint8Array}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/iterator.js"}],[1676,{"./errors":1673,"./iterator":1675,"./parsers":1683,"./utils":1691,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unpack=r.pack=r.isDynamicParser=r.getParser=void 0;const n=e("@metamask/utils"),s=e("./errors"),i=e("./iterator"),a=e("./parsers"),o=e("./utils");r.getParser=e=>{const t={address:a.address,array:a.array,bool:a.bool,bytes:a.bytes,fixedBytes:a.fixedBytes,function:a.fn,number:a.number,string:a.string,tuple:a.tuple},r=t[e];if(r)return r;const n=Object.values(t).find((t=>t.isType(e)));if(n)return n;throw new s.ParserError(`The type "${e}" is not supported.`)};r.isDynamicParser=(e,t)=>{const{isDynamic:r}=e;return"function"==typeof r?r(t):r};r.pack=({types:e,values:t,packed:i=!1,tight:a=!1,arrayPacked:c=!1,byteArray:u=new Uint8Array})=>{(0,n.assert)(e.length===t.length,new s.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));const{staticBuffer:l,dynamicBuffer:d,pointers:h}=e.reduce((({staticBuffer:e,dynamicBuffer:s,pointers:o},u,l)=>{const d=(0,r.getParser)(u),h=t[l];if(i||c||!(0,r.isDynamicParser)(d,u))return{staticBuffer:d.encode({buffer:e,value:h,type:u,packed:i,tight:a}),dynamicBuffer:s,pointers:o};return{staticBuffer:(0,n.concatBytes)([e,new Uint8Array(32)]),dynamicBuffer:d.encode({buffer:s,value:h,type:u,packed:i,tight:a}),pointers:[...o,{position:e.length,pointer:s.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,n.assert)(!i&&!c||0===d.length,new s.ParserError("Invalid pack state."));const f=l.length,p=h.reduce(((e,{pointer:t,position:r})=>{const s=(0,o.padStart)((0,n.numberToBytes)(f+t));return(0,o.set)(e,s,r)}),l);return(0,n.concatBytes)([u,p,d])};r.unpack=(e,t)=>{const a=(0,i.iterate)(t);return e.map((e=>{const{value:{value:i,skip:o},done:c}=a.next();(0,n.assert)(!c,new s.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${e}".`));const u=(0,r.getParser)(e);if((0,r.isDynamicParser)(u,e)){const r=(0,n.bytesToNumber)(i.subarray(0,32)),s=t.subarray(r);return u.decode({type:e,value:s,skip:o})}return u.decode({type:e,value:i,skip:o})}))}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/packer.js"}],[1677,{"../errors":1673,"../utils":1691,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.address=r.getAddress=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../utils");r.getAddress=e=>{const t=(0,n.createBytes)(e);return(0,n.assert)(t.length<=20,new s.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,i.padStart)(t,20)},r.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:s}){const a=(0,r.getAddress)(t);if(s)return(0,n.concatBytes)([e,a]);const o=(0,i.padStart)(a);return(0,n.concatBytes)([e,o])},decode:({value:e})=>(0,n.add0x)((0,n.bytesToHex)(e.slice(12,32)))}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/address.js"}],[1678,{"../errors":1673,"../packer":1676,"../utils":1691,"./fixed-bytes":1681,"./tuple":1687,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.array=r.getTupleType=r.getArrayType=r.isArrayType=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../packer"),a=e("../utils"),o=e("./fixed-bytes"),c=e("./tuple"),u=/^(?<type>.*)\[(?<length>\d*?)\]$/u;r.isArrayType=e=>u.test(e);r.getArrayType=e=>{const t=e.match(u);return(0,n.assert)(t?.groups?.type,new s.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):undefined]};r.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,r.array={isDynamic(e){const[t,n]=(0,r.getArrayType)(e);return n===undefined||(0,i.isDynamicParser)((0,i.getParser)(t),t)},isType:e=>(0,r.isArrayType)(e),getByteLength(e){(0,n.assert)((0,r.isArrayType)(e),new s.ParserError(`Expected an array type, but received "${e}".`));const[t,a]=(0,r.getArrayType)(e);return(0,i.isDynamicParser)(this,e)||a===undefined?32:c.tuple.getByteLength((0,r.getTupleType)(t,a))},encode({type:e,buffer:t,value:u,packed:l,tight:d}){const[h,f]=(0,r.getArrayType)(e);if((0,n.assert)(!l||!(0,r.isArrayType)(h),new s.ParserError("Cannot pack nested arrays.")),l&&(0,i.isDynamicParser)((0,i.getParser)(h),h))return(0,i.pack)({types:new Array(u.length).fill(h),values:u,byteArray:t,packed:l,arrayPacked:!0,tight:d});if(f)return(0,n.assert)(f===u.length,new s.ParserError(`Array length does not match type length. Expected a length of ${f}, but received ${u.length}.`)),c.tuple.encode({type:(0,r.getTupleType)(h,f),buffer:t,value:u,packed:o.fixedBytes.isType(h)&&d,tight:d});if(l)return(0,i.pack)({types:new Array(u.length).fill(h),values:u,byteArray:t,packed:o.fixedBytes.isType(h)&&d,arrayPacked:!0,tight:d});const p=(0,a.padStart)((0,n.numberToBytes)(u.length));return(0,i.pack)({types:new Array(u.length).fill(h),values:u,byteArray:(0,n.concatBytes)([t,p]),packed:l,tight:d})},decode({type:e,value:t,...a}){const[o,u]=(0,r.getArrayType)(e);if(u){const e=c.tuple.decode({type:(0,r.getTupleType)(o,u),value:t,...a});return(0,n.assert)(e.length===u,new s.ParserError(`Array length does not match type length. Expected a length of ${u}, but received ${e.length}.`)),e}const l=(0,n.bytesToNumber)(t.subarray(0,32));return(0,i.unpack)(new Array(l).fill(o),t.subarray(32))}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/array.js"}],[1679,{"../errors":1673,"./number":1684,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bool=r.getBooleanValue=void 0;const n=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("../errors"),a=e("./number"),o=(0,n.coerce)((0,n.boolean)(),(0,n.union)([(0,n.literal)("true"),(0,n.literal)("false")]),(e=>"true"===e));r.getBooleanValue=e=>{try{return(0,n.create)(e,o)?BigInt(1):BigInt(0)}catch{throw new i.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},r.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:i}){const o=(0,r.getBooleanValue)(t);return n?(0,s.concatBytes)([e,(0,s.bigIntToBytes)(o)]):a.number.encode({type:"uint256",buffer:e,value:o,packed:n,tight:i})},decode:e=>a.number.decode({...e,type:"uint256"})===BigInt(1)}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/bool.js"}],[168,{"../../../../../shared/constants/permissions":5843,"../../../controllers/permissions":88,"@metamask/chain-agnostic-permission":1525,"@metamask/controller-utils":1542,"@metamask/permission-controller":2452,lodash:4934},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.requestPermissionsHandler=void 0;var n=e("lodash"),s=e("@metamask/controller-utils"),i=e("@metamask/permission-controller"),a=e("@metamask/chain-agnostic-permission"),o=e("../../../../../shared/constants/permissions"),c=e("../../../controllers/permissions");r.requestPermissionsHandler={methodNames:[i.MethodNames.RequestPermissions],implementation:async function(e,t,r,u,{getAccounts:l,requestPermissionsForOrigin:d,getCaip25PermissionFromLegacyPermissionsForOrigin:h}){const{params:f}=e;if(!Array.isArray(f)||!(0,s.isPlainObject)(f[0]))return u((0,i.invalidParams)({data:{request:e}}));let[p]=f;delete p[a.Caip25EndowmentPermissionName];const m=(0,n.pick)(p,[o.RestrictedMethods.eth_accounts,c.PermissionNames.permittedChains]);delete p[o.RestrictedMethods.eth_accounts],delete p[c.PermissionNames.permittedChains];const g=Object.keys(m).length>0;if(g){const e=h(m);p={...p,...e}}let y={};const[b]=await d(p);if(y={...b},g){var w;const e=y[a.Caip25EndowmentPermissionName];if(!e)throw new Error(`could not find ${a.Caip25EndowmentPermissionName} permission.`);const t=null===(w=e.caveats)||void 0===w||null===(w=w.find((({type:e})=>e===a.Caip25CaveatType)))||void 0===w?void 0:w.value;if(!t)throw new Error(`could not find ${a.Caip25CaveatType} in granted ${a.Caip25EndowmentPermissionName} permission.`);delete y[a.Caip25EndowmentPermissionName];const r=l();y[o.RestrictedMethods.eth_accounts]={...e,parentCapability:o.RestrictedMethods.eth_accounts,caveats:[{type:o.CaveatTypes.restrictReturnedAccounts,value:r}]};const n=(0,a.getPermittedEthChainIds)(t);n.length>0&&(y[c.PermissionNames.permittedChains]={...e,parentCapability:c.PermissionNames.permittedChains,caveats:[{type:o.CaveatTypes.restrictNetworkSwitching,value:n}]})}return t.result=Object.values(y).filter((e=>e!==undefined)),u()},hookNames:{getAccounts:!0,requestPermissionsForOrigin:!0,getCaip25PermissionFromLegacyPermissionsForOrigin:!0}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-requestPermissions.ts"}],[1680,{"../utils":1691,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=void 0;const n=e("@metamask/utils"),s=e("../utils");r.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r}){const i=(0,n.createBytes)(t);if(r)return(0,n.concatBytes)([e,i]);const a=32*Math.ceil(i.byteLength/32);return(0,n.concatBytes)([e,(0,s.padStart)((0,n.numberToBytes)(i.byteLength)),(0,s.padEnd)(i,a)])},decode({value:e}){const t=e.subarray(0,32),r=(0,n.bytesToNumber)(t);return e.slice(32,32+r)}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/bytes.js"}],[1681,{"../errors":1673,"../utils":1691,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fixedBytes=r.getByteLength=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../utils"),a=/^bytes([0-9]{1,2})$/u;r.getByteLength=e=>{const t=e.match(a)?.[1];(0,n.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const r=Number(t);return(0,n.assert)(r>0&&r<=32,new s.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),r},r.fixedBytes={isDynamic:!1,isType:e=>a.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:a,packed:o}){const c=(0,r.getByteLength)(e),u=(0,n.createBytes)(a);return(0,n.assert)(u.length<=c,new s.ParserError(`Expected a value of length ${c}, but received a value of length ${u.length}.`)),o?(0,n.concatBytes)([t,(0,i.padEnd)(u,c)]):(0,n.concatBytes)([t,(0,i.padEnd)(u)])},decode({type:e,value:t}){const n=(0,r.getByteLength)(e);return t.slice(0,n)}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/fixed-bytes.js"}],[1682,{"../errors":1673,"./fixed-bytes":1681,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fn=r.getFunction=void 0;const n=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("../errors"),a=e("./fixed-bytes"),o=(0,n.coerce)((0,n.object)({address:s.StrictHexStruct,selector:s.StrictHexStruct}),(0,n.union)([s.StrictHexStruct,(0,n.instance)(Uint8Array)]),(e=>{const t=(0,s.createBytes)(e);return(0,s.assert)(24===t.length,new i.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,s.bytesToHex)(t.subarray(0,20)),selector:(0,s.bytesToHex)(t.subarray(20,24))}}));r.getFunction=e=>{const t=(0,n.create)(e,o);return(0,s.concatBytes)([(0,s.hexToBytes)(t.address),(0,s.hexToBytes)(t.selector)])},r.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:s}){const i=(0,r.getFunction)(t);return a.fixedBytes.encode({type:"bytes24",buffer:e,value:i,packed:n,tight:s})},decode:({value:e})=>({address:(0,s.bytesToHex)(e.slice(0,20)),selector:(0,s.bytesToHex)(e.slice(20,24))})}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/function.js"}],[1683,{"./address":1677,"./array":1678,"./bool":1679,"./bytes":1680,"./fixed-bytes":1681,"./function":1682,"./number":1684,"./parser":1685,"./string":1686,"./tuple":1687},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./address"),r),s(e("./array"),r),s(e("./bool"),r),s(e("./bytes"),r),s(e("./fixed-bytes"),r),s(e("./function"),r),s(e("./number"),r),s(e("./parser"),r),s(e("./string"),r),s(e("./tuple"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/index.js"}],[1684,{"../errors":1673,"../utils":1691,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.number=r.getBigInt=r.assertNumberLength=r.getLength=r.isSigned=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../utils"),a=/^u?int(?<length>[0-9]*)?$/u;r.isSigned=e=>!e.startsWith("u");r.getLength=e=>{if("int"===e||"uint"===e)return 256;const t=e.match(a);(0,n.assert)(t?.groups?.length,new s.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));const r=parseInt(t.groups.length,10);return(0,n.assert)(r>=8&&r<=256,new s.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,n.assert)(r%8==0,new s.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),r};r.assertNumberLength=(e,t)=>{const i=(0,r.getLength)(t),a=BigInt(2)**BigInt(i-((0,r.isSigned)(t)?1:0))-BigInt(1);(0,r.isSigned)(t)?(0,n.assert)(e>=-(a+BigInt(1))&&e<=a,new s.ParserError(`Number "${e}" is out of range for type "${t}".`)):(0,n.assert)(e<=a,new s.ParserError(`Number "${e}" is out of range for type "${t}".`))};r.getBigInt=e=>{try{return(0,n.createBigInt)(e)}catch{throw new s.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}},r.number={isDynamic:!1,isType:e=>a.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:s,packed:a}){const o=(0,r.getBigInt)(s);if((0,r.assertNumberLength)(o,e),(0,r.isSigned)(e)){if(a){const s=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,n.signedBigIntToBytes)(o,s)])}return(0,n.concatBytes)([t,(0,i.padStart)((0,n.signedBigIntToBytes)(o,32))])}if(a){const s=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,i.padStart)((0,n.bigIntToBytes)(o),s)])}return(0,n.concatBytes)([t,(0,i.padStart)((0,n.bigIntToBytes)(o))])},decode({type:e,value:t}){const s=t.subarray(0,32);if((0,r.isSigned)(e)){const t=(0,n.bytesToSignedBigInt)(s);return(0,r.assertNumberLength)(t,e),t}const i=(0,n.bytesToBigInt)(s);return(0,r.assertNumberLength)(i,e),i}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/number.js"}],[1685,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/parser.js"}],[1686,{"./bytes":1680,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.string=void 0;const n=e("@metamask/utils"),s=e("./bytes");r.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode:({buffer:e,value:t,packed:r,tight:i})=>s.bytes.encode({type:"bytes",buffer:e,value:(0,n.stringToBytes)(t),packed:r,tight:i}),decode:e=>(0,n.bytesToString)(s.bytes.decode(e))}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/string.js"}],[1687,{"../errors":1673,"../packer":1676,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tuple=r.getTupleElements=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../packer"),a=/^\((.+)\)$/u;r.getTupleElements=e=>{(0,n.assert)(e.startsWith("(")&&e.endsWith(")"),new s.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));const t=[];let r="",i=0;for(let n=1;n<e.length-1;n++){const s=e[n];","===s&&0===i?(t.push(r.trim()),r=""):(r+=s,"("===s?i+=1:")"===s&&(i-=1))}return r.trim()&&t.push(r.trim()),t},r.tuple={isDynamic:e=>(0,r.getTupleElements)(e).some((e=>{const t=(0,i.getParser)(e);return(0,i.isDynamicParser)(t,e)})),isType:e=>(e=>a.test(e))(e),getByteLength(e){if((0,i.isDynamicParser)(this,e))return 32;return(0,r.getTupleElements)(e).reduce(((e,t)=>e+(0,i.getParser)(t).getByteLength(t)),0)},encode({type:e,buffer:t,value:n,packed:s,tight:a}){const o=(0,r.getTupleElements)(e);return(0,i.pack)({types:o,values:n,byteArray:t,packed:s,tight:a})},decode({type:e,value:t,skip:n}){const s=(0,r.getTupleElements)(e);return n(this.getByteLength(e)-32),(0,i.unpack)(s,t)}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/tuple.js"}],[1688,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/types/abi.js"}],[1689,{"./abi":1688},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./abi"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/types/index.js"}],[169,{"../../../../../shared/constants/permissions":5843,"../../../controllers/permissions":88,"@metamask/chain-agnostic-permission":1525,"@metamask/permission-controller":2452,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.revokePermissionsHandler=void 0;var n=e("@metamask/permission-controller"),s=e("@metamask/utils"),i=e("@metamask/chain-agnostic-permission"),a=e("../../../../../shared/constants/permissions"),o=e("../../../controllers/permissions");r.revokePermissionsHandler={methodNames:[n.MethodNames.RevokePermissions],implementation:function(e,t,r,c,{revokePermissionsForOrigin:u,rejectApprovalRequestsForOrigin:l}){const{params:d}=e,h=null==d?void 0:d[0];if(!h)return c((0,n.invalidParams)({data:{request:e}}));const f=Object.keys(h).filter((e=>e!==i.Caip25EndowmentPermissionName));if(!(0,s.isNonEmptyArray)(f))return c((0,n.invalidParams)({data:{request:e}}));const p=[a.RestrictedMethods.eth_accounts,o.PermissionNames.permittedChains],m=f.filter((e=>!p.includes(e)));m.length!==f.length&&m.push(i.Caip25EndowmentPermissionName);return u(m),l(),t.result=null,c()},hookNames:{revokePermissionsForOrigin:!0,rejectApprovalRequestsForOrigin:!0,updateCaveat:!0}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-revokePermissions.ts"}],[1690,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.padEnd=r.padStart=r.set=void 0;const n=e("@metamask/utils");r.set=(e,t,r)=>(0,n.concatBytes)([e.subarray(0,r),t,e.subarray(r+t.length)]);r.padStart=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([r,e])};r.padEnd=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([e,r])}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/utils/buffer.js"}],[1691,{"./buffer":1690},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./buffer"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/utils/index.js"}],[1692,{"./utils":1697,"@scure/base":1698,buffer:4138,tweetnacl:5723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const a=e("@scure/base"),o=i(e("tweetnacl")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.base64.decode(e)}catch(e){throw new Error("Bad public key")}const s=a.utf8.decode(t),i=o.randomBytes(o.box.nonceLength),c=o.box(s,i,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.base64.encode(i),ephemPublicKey:a.base64.encode(r.publicKey),ciphertext:a.base64.encode(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:r}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(r))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const n=t.from(r,"hex"),s=o.box.keyPair.fromSecretKey(n).secretKey,i=a.base64.decode(e.nonce),c=a.base64.decode(e.ciphertext),u=a.base64.decode(e.ephemPublicKey),l=o.box.open(c,i,u,s);try{if(!l)throw new Error;const e=a.utf8.encode(l);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const s={data:r,padding:""},i=t.byteLength(JSON.stringify(s),"utf-8")%2048;let a=0;return i>0&&(a=2048-i-16),s.padding="0".repeat(a),u({publicKey:e,data:JSON.stringify(s),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const r=t.from(e,"hex"),n=o.box.keyPair.fromSecretKey(r).publicKey;return a.base64.encode(n)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1693,{"./encryption":1692,"./personal-sign":1694,"./sign-eip7702-authorization":1695,"./sign-typed-data":1696,"./utils":1697},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,s(e("./personal-sign"),r),s(e("./sign-typed-data"),r),s(e("./encryption"),r),s(e("./sign-eip7702-authorization"),r);var i=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return i.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return i.normalize}})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/index.js"}],[1694,{"./utils":1697,"@ethereumjs/util":1664},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),s=e("./utils");function i(e,t){const r=(0,n.hashPersonalMessage)((0,s.legacyToBuffer)(e));return(0,s.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,s.isNullish)(t))throw new Error("Missing data parameter");if((0,s.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,s.legacyToBuffer)(t),i=(0,n.hashPersonalMessage)(r),a=(0,n.ecsign)(i,e);return(0,s.concatSig)((0,n.toBuffer)(a.v),a.r,a.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");const r=i(e,t),a=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(a)},r.extractPublicKey=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");return`0x${i(e,t).toString("hex")}`}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1695,{"./utils":1697,"@ethereumjs/rlp":462,"@ethereumjs/util":1664,"@metamask/utils":3026,buffer:4138,"ethereum-cryptography/keccak":4372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashEIP7702Authorization=r.recoverEIP7702Authorization=r.signEIP7702Authorization=void 0;const n=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),i=e("@metamask/utils"),a=e("ethereum-cryptography/keccak"),o=e("./utils");function c(e){u(e);const r=(0,n.encode)(e),s=t.concat([t.from("05","hex"),r]);return t.from((0,a.keccak256)(s))}function u(e){if((0,o.isNullish)(e))throw new Error("Missing authorization parameter");const[t,r,n]=e;if((0,o.isNullish)(t))throw new Error("Missing chainId parameter");if((0,o.isNullish)(r))throw new Error("Missing contractAddress parameter");if((0,o.isNullish)(n))throw new Error("Missing nonce parameter")}r.signEIP7702Authorization=function({privateKey:e,authorization:t}){if(u(t),(0,o.isNullish)(e))throw new Error("Missing privateKey parameter");const r=c(t),{r:n,s:i,v:a}=(0,s.ecsign)(r,e),l=(0,s.toBuffer)(a);return(0,o.concatSig)(l,n,i)},r.recoverEIP7702Authorization=function({signature:e,authorization:t}){if(u(t),(0,o.isNullish)(e))throw new Error("Missing signature parameter");const r=c(t),n=(0,o.recoverPublicKey)(r,e),a=(0,s.publicToAddress)(n);return(0,i.bytesToHex)(a)},r.hashEIP7702Authorization=c}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/sign-eip7702-authorization.js"}],[1696,{"./utils":1697,"@ethereumjs/util":1664,"@metamask/abi-utils":1674,"@metamask/abi-utils/dist/parsers":1683,"@metamask/abi-utils/dist/utils":1691,"@metamask/utils":3026,"ethereum-cryptography/keccak":4372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("@ethereumjs/util"),s=e("@metamask/abi-utils"),i=e("@metamask/abi-utils/dist/parsers"),a=e("@metamask/abi-utils/dist/utils"),o=e("@metamask/utils"),c=e("ethereum-cryptography/keccak"),u=e("./utils");var l;function d(e,t){if(!Object.keys(l).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function h(e,t){(0,o.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),n=(0,i.getLength)(e),s=BigInt(2)**BigInt(n)-BigInt(1);return(0,o.assert)(r>=-s&&r<=s,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function f(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,a.padStart)((0,o.bigIntToBytes)(t),20)}function p(e,t,r,i,u){if(d(u,[l.V3,l.V4]),e[r]!==undefined)return["bytes32",u===l.V4&&null==i?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,c.keccak256)(m(r,i,e,u)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(i===undefined)throw new Error(`missing value for field ${t} of type ${r}`);if("address"===r){if("number"==typeof i)return["address",(0,a.padStart)((0,o.numberToBytes)(i),20)];if((0,o.isStrictHexString)(i))return["address",(0,o.add0x)(i)];if("string"==typeof i)return["address",f(i).subarray(0,20)]}if("bool"===r)return["bool",Boolean(i)];if("bytes"===r)return"number"==typeof i?i=(0,o.numberToBytes)(i):(0,o.isStrictHexString)(i)||"0x"===i?i=(0,o.hexToBytes)(i):"string"==typeof i&&(i=(0,o.stringToBytes)(i)),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(i))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"==typeof i?i<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,o.bigIntToBytes)(BigInt(i))]:(0,o.isStrictHexString)(i)?["bytes32",(0,o.hexToBytes)(i)]:["bytes32",i];if(r.startsWith("int")&&!r.includes("[")){const e=h(r,i);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return i="number"==typeof i?(0,o.numberToBytes)(i):(0,o.stringToBytes)(null!=i?i:""),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(i))];if(r.endsWith("]")){if(u===l.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const a=r.slice(0,r.lastIndexOf("[")),o=i.map((r=>p(e,t,a,r,u)));return["bytes32",(0,n.arrToBufArr)((0,c.keccak256)((0,s.encode)(o.map((([e])=>e)),o.map((([,e])=>e)))))]}return[r,i]}function m(e,t,r,i){d(i,[l.V3,l.V4]);const a=["bytes32"],o=[w(e,r)];for(const n of r[e]){if(i===l.V3&&t[n.name]===undefined)continue;const[e,s]=p(r,n.name,n.type,t[n.name],i);a.push(e),o.push(s)}return(0,n.arrToBufArr)((0,s.encode)(a,o))}function g(e,t){let r="";const n=y(e,t);n.delete(e);const s=[e,...Array.from(n).sort()];for(const e of s){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function y(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])y(n.type,t,r);return r}function b(e,t,r,s){d(s,[l.V3,l.V4]);const i=m(e,t,r,s),a=(0,c.keccak256)(i);return(0,n.arrToBufArr)(a)}function w(e,t){const r=(0,o.stringToBytes)(g(e,t));return(0,n.arrToBufArr)((0,c.keccak256)(r))}function v(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function k(e,t){d(t,[l.V3,l.V4]);const r=v(e),{domain:n}=r;return b("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function E(e,t){if((0,i.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,i.getArrayType)(e);return t.map((e=>E(r,e)))}if("address"===e){if((0,o.isStrictHexString)(t))return(0,a.padStart)((0,o.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,a.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,i.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,o.numberToBytes)(t).subarray(0,r);if((0,o.isStrictHexString)(t))return(0,o.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,i.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function T(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=h(e,t);if(r>=BigInt(0))return(0,a.padStart)((0,o.bigIntToBytes)(r),32);const n=(0,i.getLength)(e),s=BigInt.asIntN(n,r);return(0,o.signedBigIntToBytes)(s,32)}return t}))}function _(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(n=r,n.map((e=>"number"==typeof e?(0,a.padStart)((0,o.numberToBytes)(e),32):(0,o.isStrictHexString)(e)?(0,a.padStart)((0,o.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,a.padStart)(e.subarray(0,32),32):e)))};var n;if(t.startsWith("int")&&(0,i.isArrayType)(t)){const[n,s]=(0,i.getArrayType)(t);return{name:e,type:`bytes32[${null!=s?s:""}]`,value:T(n,r)}}return{name:e,type:t,value:E(t,r)}})),l=r.map((e=>"bytes"!==e.type?e.value:(0,u.legacyToBuffer)(e.value))),d=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),h=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,n.arrToBufArr)((0,c.keccak256)((0,s.encodePacked)(["bytes32","bytes32"],[(0,c.keccak256)((0,s.encodePacked)(["string[]"],[h],!0)),(0,c.keccak256)((0,s.encodePacked)(d,l,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(l=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:m,encodeType:g,findTypeDependencies:y,hashStruct:b,hashType:w,sanitizeData:v,eip712Hash:function(e,t){d(t,[l.V3,l.V4]);const r=v(e),s=[(0,o.hexToBytes)("1901")];return s.push(k(e,t)),"EIP712Domain"!==r.primaryType&&s.push(b(r.primaryType,r.message,r.types,t)),(0,n.arrToBufArr)((0,c.keccak256)((0,o.concatBytes)(s)))},eip712DomainHash:k},r.typedSignatureHash=function(e){const t=_(e);return(0,o.bytesToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:s}){if(d(s),(0,u.isNullish)(t))throw new Error("Missing data parameter");if((0,u.isNullish)(e))throw new Error("Missing private key parameter");const i=s===l.V1?_(t):r.TypedDataUtils.eip712Hash(t,s),a=(0,n.ecsign)(i,e);return(0,u.concatSig)((0,n.arrToBufArr)((0,o.bigIntToBytes)(a.v)),a.r,a.s)},r.recoverTypedSignature=function({data:e,signature:t,version:s}){if(d(s),(0,u.isNullish)(e))throw new Error("Missing data parameter");if((0,u.isNullish)(t))throw new Error("Missing signature parameter");const i=s===l.V1?_(e):r.TypedDataUtils.eip712Hash(e,s),a=(0,u.recoverPublicKey)(i,t),c=(0,n.publicToAddress)(a);return(0,o.bytesToHex)(c)}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1697,{"@ethereumjs/util":1664,"@metamask/utils":3026,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),s=e("@metamask/utils");function i(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function a(e){return null===e||e===undefined}r.padWithZeroes=i,r.isNullish=a,r.legacyToBuffer=function(e){return"string"!=typeof e||(0,n.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const a=(0,n.fromSigned)(t),o=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=i((0,n.toUnsigned)(a).toString("hex"),64),l=i((0,n.toUnsigned)(o).toString("hex"),64),d=(0,s.remove0x)((0,s.numberToHex)(c));return(0,s.add0x)(u.concat(l,d))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(a(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,s.numberToBytes)(e);e=(0,s.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,s.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1698,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function s(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function i(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function a(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function c(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function u(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const i=[],a=Array.from(e);for(a.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let i=s;i<a.length;i++){const o=a[i],c=t*e+o;if(!Number.isSafeInteger(c)||t*e/t!==e||c-o!=t*e)throw new Error("convertRadix: carry overflow");e=c%r;const u=Math.floor(c/r);if(a[i]=u,!Number.isSafeInteger(u)||u*r+e!==c)throw new Error("convertRadix: carry overflow");n&&(u?n=!1:s=i)}if(i.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=void 0,r.assertNumber=n;const d=(e,t)=>t?d(t,e%t):e,h=(e,t)=>e+(t-d(e,t));function f(e,t,r,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(h(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${h(t,r)}`);let i=0,a=0;const o=2**r-1,c=[];for(const s of e){if(n(s),s>=2**t)throw new Error(`convertRadix2: invalid data word=${s} from=${t}`);if(i=i<<t|s,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=r;a-=r)c.push((i>>a-r&o)>>>0);i&=2**a-1}if(i=i<<r-a&o,!s&&a>=t)throw new Error("Excess padding");if(!s&&i)throw new Error(`Non-zero padding: ${i}`);return s&&a>0&&c.push(i>>>0),c}function p(e){return n(e),{encode:t=>{if(!s(t))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(l(t,e,256))}}}function m(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,e)>32||h(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!s(r))throw new Error("radix2.encode input should be Uint8Array");return f(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(f(r,e,8,t))}}}function g(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!s(r))throw new Error("checksum.encode: input should be Uint8Array");const n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!s(r))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-e),i=t(n).slice(0,e),a=r.slice(-e);for(let t=0;t<e;t++)if(i[t]!==a[t])throw new Error("Invalid checksum");return n}}}r.utils={alphabet:a,chain:i,checksum:y,convertRadix:l,convertRadix2:f,radix:p,radix2:m,join:o,padding:c},r.base16=i(m(4),a("0123456789ABCDEF"),o("")),r.base32=i(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),c(5),o("")),r.base32nopad=i(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o("")),r.base32hex=i(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),c(5),o("")),r.base32hexnopad=i(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o("")),r.base32crockford=i(m(5),a("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),u((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),r.base64=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),c(6),o("")),r.base64nopad=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o("")),r.base64url=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),c(6),o("")),r.base64urlnopad=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(""));const b=e=>i(p(58),a(e),o(""));r.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){const s=e.subarray(n,n+8);t+=r.base58.encode(s).padStart(w[s.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const s=e.slice(n,n+11),i=w.indexOf(s.length),a=r.base58.decode(s);for(let e=0;e<a.length-i;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-i)))}return Uint8Array.from(t)}};r.createBase58check=e=>i(y(4,(t=>e(e(t)))),r.base58),r.base58check=r.createBase58check;const v=i(a("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),k=[996825010,642813549,513874426,1027748829,705979059];function E(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<k.length;e++)1==(t>>e&1)&&(r^=k[e]);return r}function T(e,t,r=1){const n=e.length;let s=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);s=E(s)^r>>5}s=E(s);for(let t=0;t<n;t++)s=E(s)^31&e.charCodeAt(t);for(let e of t)s=E(s)^e;for(let e=0;e<6;e++)s=E(s);return s^=r,v.encode(f([s%2**30],30,5,!1))}function _(e){const t="bech32"===e?1:734539939,r=m(5),n=r.decode,s=r.encode,i=g(n);function a(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(r instanceof Uint8Array&&(r=Array.from(r)),!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);if(0===e.length)throw new TypeError(`Invalid prefix length ${e.length}`);const s=e.length+7+r.length;if(!1!==n&&s>n)throw new TypeError(`Length ${s} exceeds limit ${n}`);const i=e.toLowerCase(),a=T(i,r,t);return`${i}1${v.encode(r)}${a}`}function o(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=n.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const i=n.slice(0,s),a=n.slice(s+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const o=v.decode(a).slice(0,-6),c=T(i,o,t);if(!a.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:o}}return{encode:a,decode:o,encodeFromBytes:function(e,t){return a(e,s(t))},decodeToBytes:function(e){const{prefix:t,words:r}=o(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:g(o),fromWords:n,fromWordsUnsafe:i,toWords:s}}r.bech32=_("bech32"),r.bech32m=_("bech32m"),r.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},r.hex=i(m(4),a("0123456789abcdef"),o(""),u((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const A={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},S="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!A.hasOwnProperty(e))throw new TypeError(S);if(!s(t))throw new TypeError("bytesToString() expects Uint8Array");return A[e].encode(t)},r.str=r.bytesToString;r.stringToBytes=(e,t)=>{if(!A.hasOwnProperty(e))throw new TypeError(S);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return A[e].decode(t)},r.bytes=r.stringToBytes}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@scure/base",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@scure/base/lib/index.js"}],[17,{"@metamask/assets-controllers":1363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeFiPositionsControllerInit=void 0;var n=e("@metamask/assets-controllers");r.DeFiPositionsControllerInit=({initMessenger:e,controllerMessenger:t,getController:r})=>({controller:new n.DeFiPositionsController({messenger:t,isEnabled:()=>{var t;const n=r("PreferencesController"),{useExternalServices:s}=n.state,i=e.call("RemoteFeatureFlagController:getState"),a=Boolean(null==i||null===(t=i.remoteFeatureFlags)||void 0===t?void 0:t.assetsDefiPositionsEnabled);return s&&a}})})}}},{package:"$root$",file:"app/scripts/controller-init/defi-positions/defi-positions-controller-init.ts"}],[170,{"../../../../../shared/constants/app":5824,"@metamask/controller-utils":1542,"@metamask/rpc-errors":2622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/controller-utils"),s=e("@metamask/rpc-errors"),i=e("../../../../../shared/constants/app");const a={methodNames:[i.MESSAGE_TYPE.WATCH_ASSET,i.MESSAGE_TYPE.WATCH_ASSET_LEGACY],implementation:async function(e,t,r,i,{handleWatchAssetRequest:a}){try{const{params:{options:r,type:o},origin:c,networkClientId:u}=e,{tokenId:l}=r;return[n.ERC721,n.ERC1155].includes(o)&&l!==undefined&&"string"!=typeof l?i(s.rpcErrors.invalidParams({message:`Expected parameter 'tokenId' to be type 'string'. Received type '${typeof l}'`})):(await a({asset:r,type:o,origin:c,networkClientId:u}),t.result=!0,i())}catch(e){return i(e)}},hookNames:{handleWatchAssetRequest:!0}};r.default=a}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/watch-asset.js"}],[1703,{"./ledger-hw-app.cjs":1704,"./ledger-iframe-bridge.cjs":1705,"./ledger-keyring.cjs":1706,"./ledger-mobile-bridge.cjs":1707,"./ledger-transport-middleware.cjs":1708},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./ledger-keyring.cjs"),r),s(e("./ledger-iframe-bridge.cjs"),r),s(e("./ledger-mobile-bridge.cjs"),r),s(e("./ledger-transport-middleware.cjs"),r),s(e("./ledger-hw-app.cjs"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.cjs"}],[1704,{"@ledgerhq/hw-app-eth":844,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMaskLedgerHwAppEth=void 0;const s=n(e("@ledgerhq/hw-app-eth")),i=e("buffer");class a extends s.default{constructor(){super(...arguments),this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii"}async openEthApp(){await this.transport.send(224,216,0,0,i.Buffer.from(this.ethAppName,this.transportEncoding))}async closeApps(){await this.transport.send(176,167,0,0)}async getAppNameAndVersion(){const e=await this.transport.send(176,1,0,0);if(1!==e[0])throw new Error("Incorrect format return from getAppNameAndVersion.");let t=1;const r=e[t]??0;t+=1;const n=e.slice(t,t+=r).toString(this.transportEncoding),s=e[t]??0;t+=1;return{appName:n,version:e.slice(t,t+=s).toString(this.transportEncoding)}}}r.MetaMaskLedgerHwAppEth=a}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-hw-app.cjs"}],[1705,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},f=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerIframeBridge=r.IFrameMessageAction=void 0;const p=e("@metamask/utils");var m;!function(e){e.LedgerIsIframeReady="ledger-is-iframe-ready",e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(m||(r.IFrameMessageAction=m={}));r.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){n.add(this),this.iframeLoaded=!1,s.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,i.set(this,new Map),h(this,n,"m",d).call(this,e),f(this,s,{bridgeUrl:e?.bridgeUrl},"f")}async init(){await h(this,n,"m",o).call(this,h(this,s,"f").bridgeUrl),this.eventListener=h(this,n,"m",u).bind(this,h(this,s,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return h(this,s,"f")}async setOptions(e){h(this,n,"m",d).call(this,e),h(this,s,"f")?.bridgeUrl!==e.bridgeUrl&&(h(this,s,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){const e=await h(this,n,"m",l).call(this,{action:m.LedgerMakeApp},{timeout:4e3});if("success"in e&&e.success)return!0;throw"error"in e?e.error:new Error("Unknown error occurred")}async updateTransportMethod(e){if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");const t=await h(this,n,"m",l).call(this,{action:m.LedgerUpdateTransport,params:{transportType:e}},{timeout:4e3});if("success"in t&&t.success)return!0;throw new Error("Ledger transport could not be updated")}async getPublicKey(e){return h(this,n,"m",a).call(this,m.LedgerUnlock,e)}async deviceSignTransaction(e){return h(this,n,"m",a).call(this,m.LedgerSignTransaction,e)}async deviceSignMessage(e){return h(this,n,"m",a).call(this,m.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return h(this,n,"m",a).call(this,m.LedgerSignTypedData,e)}},s=new WeakMap,i=new WeakMap,n=new WeakSet,a=async function(...[e,t]){const r=await h(this,n,"m",l).call(this,{action:e,params:t});if("payload"in r&&r.payload){if("success"in r&&r.success)return r.payload;if("error"in r.payload)throw r.payload.error}throw new Error("Unknown error occurred")},o=async function(e){return new Promise((t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)}))},c=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},u=function(e,t){const{origin:r,data:s}=t;if(r===h(this,n,"m",c).call(this,e)&&s){const e=h(this,i,"f").get(s.messageId);e?(e.resolve(s),h(this,i,"f").delete(s.messageId)):s.action===m.LedgerConnectionChange&&(this.isDeviceConnected=s.payload.connected)}},l=async function(e,{timeout:t}={}){this.currentMessageId+=1;const r={...e,messageId:this.currentMessageId,target:"LEDGER-IFRAME"},n=(0,p.createDeferredPromise)();if(h(this,i,"f").set(this.currentMessageId,n),!this.iframeLoaded||!this.iframe?.contentWindow)throw new Error("The iframe is not loaded yet");return t&&setTimeout((()=>{h(this,i,"f").has(r.messageId)&&(h(this,i,"f").delete(r.messageId),n.reject(new Error("Ledger iframe message timeout")))}),t),this.iframe.contentWindow.postMessage(r,"*"),n.promise},d=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.cjs"}],[1706,{"@ethereumjs/rlp":1709,"@ethereumjs/tx":475,"@ethereumjs/util":490,"@metamask/eth-sig-util":1731,"@metamask/utils":3026,buffer:4138,hdkey:4708},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,f,p,m,g,y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerKeyring=void 0;const w=e("@ethereumjs/rlp"),v=e("@ethereumjs/tx"),k=e("@ethereumjs/util"),E=e("@metamask/eth-sig-util"),T=e("@metamask/utils"),_=e("buffer"),A=b(e("hdkey")),S="m",P=`${S}/44'/60'/0'`,M="Ledger Hardware";var I;!function(e){e.Ropsten="https://api-ropsten.etherscan.io",e.Kovan="https://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(I||(I={}));class C{constructor({bridge:e}){if(n.add(this),this.deviceId="",this.type=M,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new A.default,this.hdPath=P,this.paths={},this.network=I.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts.slice(),deviceId:this.deviceId,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e){this.hdPath=e.hdPath??P,this.accounts=e.accounts??[],this.deviceId=e.deviceId??"",this.accountDetails=e.accountDetails??{},e.accountDetails||y(this,n,"m",s).call(this,e),this.implementFullBIP44=e.implementFullBIP44??!1;const t=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter((e=>t.has(y(this,n,"m",g).call(this,e)))),Promise.resolve()}setDeviceId(e){this.deviceId=e}getDeviceId(){return this.deviceId}isUnlocked(){return Boolean(this.hdk.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=e}setHdPath(e){this.hdPath!==e&&(this.hdk=new A.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return y(this,n,"m",g).call(this,(0,T.bytesToHex)((0,k.publicToAddress)(this.hdk.publicKey,!0)));const r=e?y(this,n,"m",f).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:r})}catch(e){throw e instanceof Error?e:new Error("Ledger Ethereum app closed. Open it to unlock.")}return t&&s.chainCode&&(this.hdk.publicKey=_.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=_.Buffer.from(s.chainCode,"hex")),(0,T.add0x)(s.address)}async addAccounts(e){return new Promise(((t,r)=>{this.unlock().then((async r=>{const s=this.unlockedAccount,i=s+e,a=[];for(let e=s;e<i;e++){const t=y(this,n,"m",d).call(this,e);let r;r=y(this,n,"m",h).call(this)?await this.unlock(t):y(this,n,"m",u).call(this,S,e),this.accountDetails[y(this,n,"m",g).call(this,r)]={bip44:y(this,n,"m",h).call(this),hdPath:t},this.accounts.includes(r)||(this.accounts=[...this.accounts,r],a.push(r)),this.page=0}t(a)})).catch(r)}))}getName(){return M}async getFirstPage(){return this.page=0,y(this,n,"m",a).call(this,1)}async getNextPage(){return y(this,n,"m",a).call(this,1)}async getPreviousPage(){return y(this,n,"m",a).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()));if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[y(this,n,"m",g).call(this,e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let r;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=t.getChainId(),t.r="0x00",t.s="0x00",r=t.serialize().toString("hex"),y(this,n,"m",i).call(this,e,r,(e=>(t.v=_.Buffer.from(e.v,"hex"),t.r=_.Buffer.from(e.r,"hex"),t.s=_.Buffer.from(e.s,"hex"),t)));const s=t.getMessageToSign();return r=Array.isArray(s)?_.Buffer.from(w.RLP.encode(s)).toString("hex"):(0,T.bytesToHex)(s),y(this,n,"m",i).call(this,e,r,(e=>{const r=t.toJSON();return r.type=t.type,r.v=(0,T.add0x)(e.v),r.r=(0,T.add0x)(e.r),r.s=(0,T.add0x)(e.s),v.TransactionFactory.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: Unknown error while signing message");let s;try{s=await this.bridge.deviceSignMessage({hdPath:r,message:(0,T.remove0x)(t)})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let i=parseInt(String(s.v),10).toString(16);i.length<2&&(i=`0${i}`);const a=`0x${s.r}${s.s}${i}`,o=(0,E.recoverPersonalSignature)({data:t,signature:a});if(y(this,n,"m",g).call(this,o)!==y(this,n,"m",g).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return a}async unlockAccountByAddress(e){const t=y(this,n,"m",g).call(this,e),r=this.accountDetails[t];if(!r)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:s}=r;if((await this.unlock(s,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return s}async signTypedData(e,t,r){const{version:s}=r??{};if(!("V4"===s))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:i,types:a,primaryType:o,message:c}=E.TypedDataUtils.sanitizeData(t),u=await this.unlockAccountByAddress(e);if(!u)throw new Error("Ledger: Unknown error while signing message");let l;try{l=await this.bridge.deviceSignTypedData({hdPath:u,message:{domain:{name:i.name,chainId:i.chainId,version:i.version,verifyingContract:i.verifyingContract,salt:i.salt instanceof ArrayBuffer?_.Buffer.from(i.salt).toString("hex"):i.salt},types:a,primaryType:o.toString(),message:c}})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let d=parseInt(String(l.v),10).toString(16);d.length<2&&(d=`0${d}`);const h=`0x${l.r}${l.s}${d}`,f=(0,E.recoverTypedSignature)({data:t,signature:h,version:E.SignTypedDataVersion.V4});if(y(this,n,"m",g).call(this,f)!==y(this,n,"m",g).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return h}forgetDevice(){this.deviceId="",this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new A.default}}r.LedgerKeyring=C,n=new WeakSet,s=function(e){if(y(this,n,"m",h).call(this)&&e.accountIndexes)for(const[t,r]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:y(this,n,"m",d).call(this,r)};const t=new Set(Object.keys(this.accountDetails));y(this,n,"m",h).call(this)||this.accounts.forEach((e=>{const r=y(this,n,"m",g).call(this,e);t.has(r)||(this.accountDetails[r]={bip44:!1,hdPath:y(this,n,"m",l).call(this,e)})}))},i=async function(e,t,r){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: hdPath is empty while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:(0,T.remove0x)(t),hdPath:n})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing transaction")}const i=r(s);if(i.verifySignature())return i;throw new Error("Ledger: The transaction signature is not valid")},a=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let s;return await this.unlock(),s=y(this,n,"m",h).call(this)?await y(this,n,"m",o).call(this,t,r):y(this,n,"m",c).call(this,t,r),s},o=async function(e,t){const r=[];for(let s=e;s<t;s++){const e=y(this,n,"m",d).call(this,s),t=await this.unlock(e),i=!this.implementFullBIP44||await y(this,n,"m",p).call(this,t);if(r.push({address:t,balance:null,index:s}),!i)break}return r},c=function(e,t){const r=[];for(let s=e;s<t;s++){const e=y(this,n,"m",u).call(this,S,s);r.push({address:e,balance:null,index:s}),this.paths[y(this,n,"m",g).call(this,e)]=s}return r},u=function(e,t){const r=this.hdk.derive(`${e}/${t}`),s=(0,T.bytesToHex)((0,k.publicToAddress)(r.publicKey,!0));return y(this,n,"m",g).call(this,s)},l=function(e){const t=y(this,n,"m",g).call(this,e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===y(this,n,"m",u).call(this,S,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return y(this,n,"m",d).call(this,r)},d=function(e){return y(this,n,"m",h).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},h=function(){return"m/44'/60'/0'/0/0"===this.hdPath},f=function(e){return e.toString().replace("m/","")},p=async function(e){const t=y(this,n,"m",m).call(this),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await r.json();return"0"!==s.status&&s.result.length>0},m=function(){return this.network},g=function(e){return(0,T.getChecksumAddress)((0,T.add0x)(e))},C.type=M}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.cjs"}],[1707,{"./ledger-hw-app.cjs":1704},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerMobileBridge=void 0;e("./ledger-hw-app.cjs");r.LedgerMobileBridge=class{constructor(e,t={}){n.add(this),s.set(this,void 0),i.set(this,void 0),this.isDeviceConnected=!1,c(this,i,t,"f"),c(this,s,e,"f")}async init(){return Promise.resolve()}async destroy(){try{await u(this,n,"m",a).call(this).dispose()}catch(e){console.error(e)}this.isDeviceConnected=!1}async deviceSignMessage({hdPath:e,message:t}){return u(this,n,"m",o).call(this).signPersonalMessage(e,t)}async deviceSignTypedData({hdPath:e,message:t}){return u(this,n,"m",o).call(this).signEIP712Message(e,t)}async deviceSignTransaction({tx:e,hdPath:t}){return u(this,n,"m",o).call(this).clearSignTransaction(t,e,{externalPlugins:!0,erc20:!0,nft:!0})}async getPublicKey({hdPath:e}){return await u(this,n,"m",o).call(this).getAddress(e,!1,!0)}async getOptions(){return u(this,i,"f")}async setOptions(e){c(this,i,e,"f")}async updateTransportMethod(e){if(!e.deviceModel)throw new Error("Property `deviceModel` is not defined in `transport`.");if(!e.deviceModel.id)throw new Error("Property `deviceModel.id` is not defined in `transport`.");return u(this,n,"m",a).call(this).setTransport(e),this.isDeviceConnected=!0,Promise.resolve(!0)}async attemptMakeApp(){throw new Error("Method not supported.")}async openEthApp(){await u(this,n,"m",o).call(this).openEthApp()}async closeApps(){await u(this,n,"m",o).call(this).closeApps()}async getAppNameAndVersion(){return u(this,n,"m",o).call(this).getAppNameAndVersion()}},s=new WeakMap,i=new WeakMap,n=new WeakSet,a=function(){if(u(this,s,"f"))return u(this,s,"f");throw new Error("Instance `transportMiddleware` is not initialized.")},o=function(){return u(this,n,"m",a).call(this).getEthApp()}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-mobile-bridge.cjs"}],[1708,{"./ledger-hw-app.cjs":1704},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerTransportMiddleware=void 0;const a=e("./ledger-hw-app.cjs");r.LedgerTransportMiddleware=class{constructor(){this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii",n.set(this,void 0)}async dispose(){const e=this.getTransport();await e.close()}setTransport(e){s(this,n,e,"f")}getTransport(){if(!i(this,n,"f"))throw new Error("Instance `transport` is not initialized.");return i(this,n,"f")}getEthApp(){return new a.MetaMaskLedgerHwAppEth(this.getTransport())}},n=new WeakMap}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-transport-middleware.cjs"}],[1709,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];let r=0;for(let s=0;s<e.length;s++){const i=n(e[s]);t.push(i),r+=i.length}return f(a(r,192),...t)}const t=y(e);return 1===t.length&&t[0]<128?t:f(a(t.length,128),t)}function s(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(l(e))}function a(e,t){if(e<56)return Uint8Array.from([e+t]);const r=m(e),n=m(t+55+r.length/2);return Uint8Array.from(h(n+r))}function o(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=c(y(e));if(t)return{data:r.data,remainder:r.remainder.slice()};if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,a,o;const u=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(l<=183){if(t=l-127,n=128===l?Uint8Array.from([]):s(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.subarray(t)}}if(l<=191){if(r=l-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(s(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=s(e,r,t+r),{data:n,remainder:e.subarray(t+r)}}if(l<=247){for(t=l-191,a=s(e,1,t);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.subarray(t)}}{if(r=l-246,t=i(s(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=s(e,r,n);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.subarray(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.RLP=r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=o;const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l(e){let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=d(e.slice(n,n+2))}return t}function f(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}function p(e){return(new TextEncoder).encode(e)}function m(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?h((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):p(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?h(m(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:l,concatBytes:f,hexToBytes:h,utf8ToBytes:p},r.RLP={encode:n,decode:o}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ethereumjs/rlp",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@ethereumjs/rlp/dist/cjs/index.js"}],[171,{"./createMethodMiddleware":154,"./createUnsupportedMethodMiddleware":155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./createMethodMiddleware");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));var s=e("./createUnsupportedMethodMiddleware");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}}))}))}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/index.js"}],[1710,{"./errors":1711,"./packer":1714,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeSingle=r.decode=r.encodePacked=r.encodeSingle=r.encode=void 0;const n=e("@metamask/utils"),s=e("./errors"),i=e("./packer");r.encode=(e,t,r,n)=>{try{return(0,i.pack)({types:e,values:t,packed:r,tight:n})}catch(e){if(e instanceof s.ParserError)throw new s.ParserError(`Unable to encode value: ${e.message}`,e);throw new s.ParserError(`An unexpected error occurred: ${(0,s.getErrorMessage)(e)}`,e)}};r.encodeSingle=(e,t)=>(0,r.encode)([e],[t]);r.encodePacked=(e,t,n)=>(0,r.encode)(e,t,!0,n);r.decode=(e,t)=>{const r=(0,n.createBytes)(t);try{return(0,i.unpack)(e,r)}catch(e){if(e instanceof s.ParserError)throw new s.ParserError(`Unable to decode value: ${e.message}`,e);throw new s.ParserError(`An unexpected error occurred: ${(0,s.getErrorMessage)(e)}`,e)}};r.decodeSingle=(e,t)=>{const i=(0,r.decode)([e],t);return(0,n.assert)(1===i.length,new s.ParserError("Decoded value array has unexpected length.")),i[0]}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/abi.js"}],[1711,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParserError=r.getErrorStack=r.getErrorMessage=void 0;const n=e("@metamask/utils");r.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,n.isObject)(e)&&(0,n.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";r.getErrorStack=e=>e instanceof Error?e.stack:undefined;class s extends Error{constructor(e,t){super(e),this.name="ParserError";const n=(0,r.getErrorStack)(t);n&&(this.stack=n)}}r.ParserError=s}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/errors.js"}],[1712,{"./abi":1710,"./errors":1711,"./types":1727},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./abi"),r),s(e("./errors"),r),s(e("./types"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/index.js"}],[1713,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.iterate=void 0;const n=e("@metamask/utils");r.iterate=function*(e,t=32){for(let r=0;r<e.length;r+=t){const s=e=>{(0,n.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,n.assert)(e%t==0,"Length must be a multiple of the size."),r+=e},i=e.subarray(r);yield{skip:s,value:i}}return{skip:()=>undefined,value:new Uint8Array}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/iterator.js"}],[1714,{"./errors":1711,"./iterator":1713,"./parsers":1721,"./utils":1729,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unpack=r.pack=r.isDynamicParser=r.getParser=void 0;const n=e("@metamask/utils"),s=e("./errors"),i=e("./iterator"),a=e("./parsers"),o=e("./utils");r.getParser=e=>{const t={address:a.address,array:a.array,bool:a.bool,bytes:a.bytes,fixedBytes:a.fixedBytes,function:a.fn,number:a.number,string:a.string,tuple:a.tuple},r=t[e];if(r)return r;const n=Object.values(t).find((t=>t.isType(e)));if(n)return n;throw new s.ParserError(`The type "${e}" is not supported.`)};r.isDynamicParser=(e,t)=>{const{isDynamic:r}=e;return"function"==typeof r?r(t):r};r.pack=({types:e,values:t,packed:i=!1,tight:a=!1,arrayPacked:c=!1,byteArray:u=new Uint8Array})=>{(0,n.assert)(e.length===t.length,new s.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));const{staticBuffer:l,dynamicBuffer:d,pointers:h}=e.reduce((({staticBuffer:e,dynamicBuffer:s,pointers:o},u,l)=>{const d=(0,r.getParser)(u),h=t[l];if(i||c||!(0,r.isDynamicParser)(d,u))return{staticBuffer:d.encode({buffer:e,value:h,type:u,packed:i,tight:a}),dynamicBuffer:s,pointers:o};return{staticBuffer:(0,n.concatBytes)([e,new Uint8Array(32)]),dynamicBuffer:d.encode({buffer:s,value:h,type:u,packed:i,tight:a}),pointers:[...o,{position:e.length,pointer:s.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,n.assert)(!i&&!c||0===d.length,new s.ParserError("Invalid pack state."));const f=l.length,p=h.reduce(((e,{pointer:t,position:r})=>{const s=(0,o.padStart)((0,n.numberToBytes)(f+t));return(0,o.set)(e,s,r)}),l);return(0,n.concatBytes)([u,p,d])};r.unpack=(e,t)=>{const a=(0,i.iterate)(t);return e.map((e=>{const{value:{value:i,skip:o},done:c}=a.next();(0,n.assert)(!c,new s.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${e}".`));const u=(0,r.getParser)(e);if((0,r.isDynamicParser)(u,e)){const r=(0,n.bytesToNumber)(i.subarray(0,32)),s=t.subarray(r);return u.decode({type:e,value:s,skip:o})}return u.decode({type:e,value:i,skip:o})}))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/packer.js"}],[1715,{"../errors":1711,"../utils":1729,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.address=r.getAddress=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../utils");r.getAddress=e=>{const t=(0,n.createBytes)(e);return(0,n.assert)(t.length<=20,new s.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,i.padStart)(t,20)},r.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:s}){const a=(0,r.getAddress)(t);if(s)return(0,n.concatBytes)([e,a]);const o=(0,i.padStart)(a);return(0,n.concatBytes)([e,o])},decode:({value:e})=>(0,n.add0x)((0,n.bytesToHex)(e.slice(12,32)))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/address.js"}],[1716,{"../errors":1711,"../packer":1714,"../utils":1729,"./fixed-bytes":1719,"./tuple":1725,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.array=r.getTupleType=r.getArrayType=r.isArrayType=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../packer"),a=e("../utils"),o=e("./fixed-bytes"),c=e("./tuple"),u=/^(?<type>.*)\[(?<length>\d*?)\]$/u;r.isArrayType=e=>u.test(e);r.getArrayType=e=>{const t=e.match(u);return(0,n.assert)(t?.groups?.type,new s.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):undefined]};r.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,r.array={isDynamic(e){const[t,n]=(0,r.getArrayType)(e);return n===undefined||(0,i.isDynamicParser)((0,i.getParser)(t),t)},isType:e=>(0,r.isArrayType)(e),getByteLength(e){(0,n.assert)((0,r.isArrayType)(e),new s.ParserError(`Expected an array type, but received "${e}".`));const[t,a]=(0,r.getArrayType)(e);return(0,i.isDynamicParser)(this,e)||a===undefined?32:c.tuple.getByteLength((0,r.getTupleType)(t,a))},encode({type:e,buffer:t,value:u,packed:l,tight:d}){const[h,f]=(0,r.getArrayType)(e);if((0,n.assert)(!l||!(0,r.isArrayType)(h),new s.ParserError("Cannot pack nested arrays.")),l&&(0,i.isDynamicParser)((0,i.getParser)(h),h))return(0,i.pack)({types:new Array(u.length).fill(h),values:u,byteArray:t,packed:l,arrayPacked:!0,tight:d});if(f)return(0,n.assert)(f===u.length,new s.ParserError(`Array length does not match type length. Expected a length of ${f}, but received ${u.length}.`)),c.tuple.encode({type:(0,r.getTupleType)(h,f),buffer:t,value:u,packed:o.fixedBytes.isType(h)&&d,tight:d});if(l)return(0,i.pack)({types:new Array(u.length).fill(h),values:u,byteArray:t,packed:o.fixedBytes.isType(h)&&d,arrayPacked:!0,tight:d});const p=(0,a.padStart)((0,n.numberToBytes)(u.length));return(0,i.pack)({types:new Array(u.length).fill(h),values:u,byteArray:(0,n.concatBytes)([t,p]),packed:l,tight:d})},decode({type:e,value:t,...a}){const[o,u]=(0,r.getArrayType)(e);if(u){const e=c.tuple.decode({type:(0,r.getTupleType)(o,u),value:t,...a});return(0,n.assert)(e.length===u,new s.ParserError(`Array length does not match type length. Expected a length of ${u}, but received ${e.length}.`)),e}const l=(0,n.bytesToNumber)(t.subarray(0,32));return(0,i.unpack)(new Array(l).fill(o),t.subarray(32))}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/array.js"}],[1717,{"../errors":1711,"./number":1722,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bool=r.getBooleanValue=void 0;const n=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("../errors"),a=e("./number"),o=(0,n.coerce)((0,n.boolean)(),(0,n.union)([(0,n.literal)("true"),(0,n.literal)("false")]),(e=>"true"===e));r.getBooleanValue=e=>{try{return(0,n.create)(e,o)?BigInt(1):BigInt(0)}catch{throw new i.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},r.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:i}){const o=(0,r.getBooleanValue)(t);return n?(0,s.concatBytes)([e,(0,s.bigIntToBytes)(o)]):a.number.encode({type:"uint256",buffer:e,value:o,packed:n,tight:i})},decode:e=>a.number.decode({...e,type:"uint256"})===BigInt(1)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/bool.js"}],[1718,{"../utils":1729,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=void 0;const n=e("@metamask/utils"),s=e("../utils");r.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r}){const i=(0,n.createBytes)(t);if(r)return(0,n.concatBytes)([e,i]);const a=32*Math.ceil(i.byteLength/32);return(0,n.concatBytes)([e,(0,s.padStart)((0,n.numberToBytes)(i.byteLength)),(0,s.padEnd)(i,a)])},decode({value:e}){const t=e.subarray(0,32),r=(0,n.bytesToNumber)(t);return e.slice(32,32+r)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/bytes.js"}],[1719,{"../errors":1711,"../utils":1729,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fixedBytes=r.getByteLength=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../utils"),a=/^bytes([0-9]{1,2})$/u;r.getByteLength=e=>{const t=e.match(a)?.[1];(0,n.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const r=Number(t);return(0,n.assert)(r>0&&r<=32,new s.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),r},r.fixedBytes={isDynamic:!1,isType:e=>a.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:a,packed:o}){const c=(0,r.getByteLength)(e),u=(0,n.createBytes)(a);return(0,n.assert)(u.length<=c,new s.ParserError(`Expected a value of length ${c}, but received a value of length ${u.length}.`)),o?(0,n.concatBytes)([t,(0,i.padEnd)(u,c)]):(0,n.concatBytes)([t,(0,i.padEnd)(u)])},decode({type:e,value:t}){const n=(0,r.getByteLength)(e);return t.slice(0,n)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/fixed-bytes.js"}],[172,{"../util":206,"@segment/loosely-validate-event":3096,buffer:4138,"is-retry-allowed":4747,lodash:4934,"remove-trailing-slash":5384,timers:4140},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t,n){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=u(e("remove-trailing-slash")),i=u(e("@segment/loosely-validate-event")),a=e("lodash"),o=u(e("is-retry-allowed")),c=e("../util");function u(e){return e&&e.__esModule?e:{default:e}}const l=()=>({});r.default=class{constructor(e,t={}){this.writeKey=e,this.host=(0,s.default)(t.host||"https://api.segment.io"),this.flushInterval=t.flushInterval||1e4,this.flushAt=t.flushAt||Math.max(t.flushAt,1)||20,this.queue=[],this.path="/v1/batch",this.maxQueueSize=460800,this.flushed=!1,this.retryCount=3,Object.defineProperty(this,"enable",{configurable:!1,writable:!1,enumerable:!0,value:!0})}_validate(e,t){(0,i.default)(e,t)}_message(e,t,r){return this._validate(t,e),this.enqueue(e,t,r),this}identify(e,t){return this._message("identify",e,t)}track(e,t){return this._message("track",e,t)}page(e,t){return this._message("page",e,t)}enqueue(e,t,r=l){if(!this.enable)return void n(r);const s={...t,type:e};if(s.context={...s.context,library:{name:"analytics-node"}},s.timestamp||(s.timestamp=new Date),s.messageId||(s.messageId=(0,c.generateRandomId)()),s.anonymousId&&!(0,a.isString)(s.anonymousId)&&(s.anonymousId=JSON.stringify(s.anonymousId)),s.userId&&!(0,a.isString)(s.userId)&&(s.userId=JSON.stringify(s.userId)),this.queue.push({message:s,callback:r}),!this.flushed)return this.flushed=!0,void this.flush();const i=this.queue.length>=this.flushAt,o=this.queue.reduce(((e,t)=>e+JSON.stringify(t).length),0)>=this.maxQueueSize;(i||o)&&this.flush(),this.flushInterval&&!this.timer&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))}flush(e=l){if(!this.enable)return n(e),Promise.resolve();if(this.timer&&(clearTimeout(this.timer),this.timer=null),!this.queue.length)return n(e),Promise.resolve();const r=this.queue.splice(0,this.flushAt),s=r.map((e=>e.callback)),i={batch:r.map((e=>e.message)),timestamp:new Date,sentAt:new Date},a={Authorization:`Basic ${t.from(this.writeKey,"utf8").toString("base64")}`};return this._sendRequest(`${this.host}${this.path}`,{method:"POST",body:JSON.stringify(i),headers:a},(t=>{n((()=>{s.forEach((e=>e(t,i))),e(t,i)}))}),0)}_retryRequest(e,t,r,n){const s=100*Math.pow(2,n);setTimeout((()=>{this._sendRequest(e,t,r,n+1)}),s)}async _sendRequest(e,t,r,n){return fetch(e,t).then((async s=>{if(s.ok)r();else if(this._isErrorRetryable({response:s})&&n<=this.retryCount)this._retryRequest(e,t,r,n);else{const e=new Error(s.statusText);r(e)}})).catch((s=>{this._isErrorRetryable(s)&&n<=this.retryCount?this._retryRequest(e,t,r,n):r(s)}))}_isErrorRetryable(e){return!!function(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,o.default)(e)}(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}}).call(this)}).call(this,e("buffer").Buffer,e("timers").setImmediate)}}},{package:"$root$",file:"app/scripts/lib/segment/analytics.js"}],[1720,{"../errors":1711,"./fixed-bytes":1719,"@metamask/superstruct":2947,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fn=r.getFunction=void 0;const n=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("../errors"),a=e("./fixed-bytes"),o=(0,n.coerce)((0,n.object)({address:s.StrictHexStruct,selector:s.StrictHexStruct}),(0,n.union)([s.StrictHexStruct,(0,n.instance)(Uint8Array)]),(e=>{const t=(0,s.createBytes)(e);return(0,s.assert)(24===t.length,new i.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,s.bytesToHex)(t.subarray(0,20)),selector:(0,s.bytesToHex)(t.subarray(20,24))}}));r.getFunction=e=>{const t=(0,n.create)(e,o);return(0,s.concatBytes)([(0,s.hexToBytes)(t.address),(0,s.hexToBytes)(t.selector)])},r.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:s}){const i=(0,r.getFunction)(t);return a.fixedBytes.encode({type:"bytes24",buffer:e,value:i,packed:n,tight:s})},decode:({value:e})=>({address:(0,s.bytesToHex)(e.slice(0,20)),selector:(0,s.bytesToHex)(e.slice(20,24))})}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/function.js"}],[1721,{"./address":1715,"./array":1716,"./bool":1717,"./bytes":1718,"./fixed-bytes":1719,"./function":1720,"./number":1722,"./parser":1723,"./string":1724,"./tuple":1725},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./address"),r),s(e("./array"),r),s(e("./bool"),r),s(e("./bytes"),r),s(e("./fixed-bytes"),r),s(e("./function"),r),s(e("./number"),r),s(e("./parser"),r),s(e("./string"),r),s(e("./tuple"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/index.js"}],[1722,{"../errors":1711,"../utils":1729,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.number=r.getBigInt=r.assertNumberLength=r.getLength=r.isSigned=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../utils"),a=/^u?int(?<length>[0-9]*)?$/u;r.isSigned=e=>!e.startsWith("u");r.getLength=e=>{if("int"===e||"uint"===e)return 256;const t=e.match(a);(0,n.assert)(t?.groups?.length,new s.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));const r=parseInt(t.groups.length,10);return(0,n.assert)(r>=8&&r<=256,new s.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,n.assert)(r%8==0,new s.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),r};r.assertNumberLength=(e,t)=>{const i=(0,r.getLength)(t),a=BigInt(2)**BigInt(i-((0,r.isSigned)(t)?1:0))-BigInt(1);(0,r.isSigned)(t)?(0,n.assert)(e>=-(a+BigInt(1))&&e<=a,new s.ParserError(`Number "${e}" is out of range for type "${t}".`)):(0,n.assert)(e<=a,new s.ParserError(`Number "${e}" is out of range for type "${t}".`))};r.getBigInt=e=>{try{return(0,n.createBigInt)(e)}catch{throw new s.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}},r.number={isDynamic:!1,isType:e=>a.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:s,packed:a}){const o=(0,r.getBigInt)(s);if((0,r.assertNumberLength)(o,e),(0,r.isSigned)(e)){if(a){const s=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,n.signedBigIntToBytes)(o,s)])}return(0,n.concatBytes)([t,(0,i.padStart)((0,n.signedBigIntToBytes)(o,32))])}if(a){const s=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,i.padStart)((0,n.bigIntToBytes)(o),s)])}return(0,n.concatBytes)([t,(0,i.padStart)((0,n.bigIntToBytes)(o))])},decode({type:e,value:t}){const s=t.subarray(0,32);if((0,r.isSigned)(e)){const t=(0,n.bytesToSignedBigInt)(s);return(0,r.assertNumberLength)(t,e),t}const i=(0,n.bytesToBigInt)(s);return(0,r.assertNumberLength)(i,e),i}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/number.js"}],[1723,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/parser.js"}],[1724,{"./bytes":1718,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.string=void 0;const n=e("@metamask/utils"),s=e("./bytes");r.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode:({buffer:e,value:t,packed:r,tight:i})=>s.bytes.encode({type:"bytes",buffer:e,value:(0,n.stringToBytes)(t),packed:r,tight:i}),decode:e=>(0,n.bytesToString)(s.bytes.decode(e))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/string.js"}],[1725,{"../errors":1711,"../packer":1714,"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tuple=r.getTupleElements=void 0;const n=e("@metamask/utils"),s=e("../errors"),i=e("../packer"),a=/^\((.+)\)$/u;r.getTupleElements=e=>{(0,n.assert)(e.startsWith("(")&&e.endsWith(")"),new s.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));const t=[];let r="",i=0;for(let n=1;n<e.length-1;n++){const s=e[n];","===s&&0===i?(t.push(r.trim()),r=""):(r+=s,"("===s?i+=1:")"===s&&(i-=1))}return r.trim()&&t.push(r.trim()),t},r.tuple={isDynamic:e=>(0,r.getTupleElements)(e).some((e=>{const t=(0,i.getParser)(e);return(0,i.isDynamicParser)(t,e)})),isType:e=>(e=>a.test(e))(e),getByteLength(e){if((0,i.isDynamicParser)(this,e))return 32;return(0,r.getTupleElements)(e).reduce(((e,t)=>e+(0,i.getParser)(t).getByteLength(t)),0)},encode({type:e,buffer:t,value:n,packed:s,tight:a}){const o=(0,r.getTupleElements)(e);return(0,i.pack)({types:o,values:n,byteArray:t,packed:s,tight:a})},decode({type:e,value:t,skip:n}){const s=(0,r.getTupleElements)(e);return n(this.getByteLength(e)-32),(0,i.unpack)(s,t)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/tuple.js"}],[1726,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/types/abi.js"}],[1727,{"./abi":1726},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./abi"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/types/index.js"}],[1728,{"@metamask/utils":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.padEnd=r.padStart=r.set=void 0;const n=e("@metamask/utils");r.set=(e,t,r)=>(0,n.concatBytes)([e.subarray(0,r),t,e.subarray(r+t.length)]);r.padStart=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([r,e])};r.padEnd=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([e,r])}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/utils/buffer.js"}],[1729,{"./buffer":1728},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./buffer"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/utils/index.js"}],[173,{"../../../../shared/constants/time":5852,"./analytics":172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.segment=r.createSegmentMock=void 0;var n,s=e("../../../../shared/constants/time");(n=e("./analytics"))&&n.__esModule;s.SECOND;const i=(e=1)=>{const t={queue:[],flush(){t.queue.forEach((([e,t])=>{t()})),t.queue=[]},track(r,n=(()=>undefined)){t.queue.push([r,n]),t.queue.length>=e&&t.flush()},page(){},identify(){}};return t};r.createSegmentMock=i;r.segment=i(1)}}},{package:"$root$",file:"app/scripts/lib/segment/index.js"}],[1730,{"./utils":1735,"@scure/base":1752,buffer:4138,tweetnacl:5723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const a=e("@scure/base"),o=i(e("tweetnacl")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.base64.decode(e)}catch(e){throw new Error("Bad public key")}const s=a.utf8.decode(t),i=o.randomBytes(o.box.nonceLength),c=o.box(s,i,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.base64.encode(i),ephemPublicKey:a.base64.encode(r.publicKey),ciphertext:a.base64.encode(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:r}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(r))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const n=t.from(r,"hex"),s=o.box.keyPair.fromSecretKey(n).secretKey,i=a.base64.decode(e.nonce),c=a.base64.decode(e.ciphertext),u=a.base64.decode(e.ephemPublicKey),l=o.box.open(c,i,u,s);try{if(!l)throw new Error;const e=a.utf8.encode(l);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const s={data:r,padding:""},i=t.byteLength(JSON.stringify(s),"utf-8")%2048;let a=0;return i>0&&(a=2048-i-16),s.padding="0".repeat(a),u({publicKey:e,data:JSON.stringify(s),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const r=t.from(e,"hex"),n=o.box.keyPair.fromSecretKey(r).publicKey;return a.base64.encode(n)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1731,{"./encryption":1730,"./personal-sign":1732,"./sign-eip7702-authorization":1733,"./sign-typed-data":1734,"./utils":1735},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,s(e("./personal-sign"),r),s(e("./sign-typed-data"),r),s(e("./encryption"),r),s(e("./sign-eip7702-authorization"),r);var i=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return i.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return i.normalize}})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/index.js"}],[1732,{"./utils":1735,"@ethereumjs/util":1744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),s=e("./utils");function i(e,t){const r=(0,n.hashPersonalMessage)((0,s.legacyToBuffer)(e));return(0,s.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,s.isNullish)(t))throw new Error("Missing data parameter");if((0,s.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,s.legacyToBuffer)(t),i=(0,n.hashPersonalMessage)(r),a=(0,n.ecsign)(i,e);return(0,s.concatSig)((0,n.toBuffer)(a.v),a.r,a.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");const r=i(e,t),a=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(a)},r.extractPublicKey=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");return`0x${i(e,t).toString("hex")}`}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1733,{"./utils":1735,"@ethereumjs/rlp":1736,"@ethereumjs/util":1744,"@metamask/utils":3026,buffer:4138,"ethereum-cryptography/keccak":4372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashEIP7702Authorization=r.recoverEIP7702Authorization=r.signEIP7702Authorization=void 0;const n=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),i=e("@metamask/utils"),a=e("ethereum-cryptography/keccak"),o=e("./utils");function c(e){u(e);const r=(0,n.encode)(e),s=t.concat([t.from("05","hex"),r]);return t.from((0,a.keccak256)(s))}function u(e){if((0,o.isNullish)(e))throw new Error("Missing authorization parameter");const[t,r,n]=e;if((0,o.isNullish)(t))throw new Error("Missing chainId parameter");if((0,o.isNullish)(r))throw new Error("Missing contractAddress parameter");if((0,o.isNullish)(n))throw new Error("Missing nonce parameter")}r.signEIP7702Authorization=function({privateKey:e,authorization:t}){if(u(t),(0,o.isNullish)(e))throw new Error("Missing privateKey parameter");const r=c(t),{r:n,s:i,v:a}=(0,s.ecsign)(r,e),l=(0,s.toBuffer)(a);return(0,o.concatSig)(l,n,i)},r.recoverEIP7702Authorization=function({signature:e,authorization:t}){if(u(t),(0,o.isNullish)(e))throw new Error("Missing signature parameter");const r=c(t),n=(0,o.recoverPublicKey)(r,e),a=(0,s.publicToAddress)(n);return(0,i.bytesToHex)(a)},r.hashEIP7702Authorization=c}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/sign-eip7702-authorization.js"}],[1734,{"./utils":1735,"@ethereumjs/util":1744,"@metamask/abi-utils":1712,"@metamask/abi-utils/dist/parsers":1721,"@metamask/abi-utils/dist/utils":1729,"@metamask/utils":3026,"ethereum-cryptography/keccak":4372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("@ethereumjs/util"),s=e("@metamask/abi-utils"),i=e("@metamask/abi-utils/dist/parsers"),a=e("@metamask/abi-utils/dist/utils"),o=e("@metamask/utils"),c=e("ethereum-cryptography/keccak"),u=e("./utils");var l;function d(e,t){if(!Object.keys(l).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function h(e,t){(0,o.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),n=(0,i.getLength)(e),s=BigInt(2)**BigInt(n)-BigInt(1);return(0,o.assert)(r>=-s&&r<=s,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function f(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,a.padStart)((0,o.bigIntToBytes)(t),20)}function p(e,t,r,i,u){if(d(u,[l.V3,l.V4]),e[r]!==undefined)return["bytes32",u===l.V4&&null==i?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,c.keccak256)(m(r,i,e,u)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(i===undefined)throw new Error(`missing value for field ${t} of type ${r}`);if("address"===r){if("number"==typeof i)return["address",(0,a.padStart)((0,o.numberToBytes)(i),20)];if((0,o.isStrictHexString)(i))return["address",(0,o.add0x)(i)];if("string"==typeof i)return["address",f(i).subarray(0,20)]}if("bool"===r)return["bool",Boolean(i)];if("bytes"===r)return"number"==typeof i?i=(0,o.numberToBytes)(i):(0,o.isStrictHexString)(i)||"0x"===i?i=(0,o.hexToBytes)(i):"string"==typeof i&&(i=(0,o.stringToBytes)(i)),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(i))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"==typeof i?i<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,o.bigIntToBytes)(BigInt(i))]:(0,o.isStrictHexString)(i)?["bytes32",(0,o.hexToBytes)(i)]:["bytes32",i];if(r.startsWith("int")&&!r.includes("[")){const e=h(r,i);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return i="number"==typeof i?(0,o.numberToBytes)(i):(0,o.stringToBytes)(null!=i?i:""),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(i))];if(r.endsWith("]")){if(u===l.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const a=r.slice(0,r.lastIndexOf("[")),o=i.map((r=>p(e,t,a,r,u)));return["bytes32",(0,n.arrToBufArr)((0,c.keccak256)((0,s.encode)(o.map((([e])=>e)),o.map((([,e])=>e)))))]}return[r,i]}function m(e,t,r,i){d(i,[l.V3,l.V4]);const a=["bytes32"],o=[w(e,r)];for(const n of r[e]){if(i===l.V3&&t[n.name]===undefined)continue;const[e,s]=p(r,n.name,n.type,t[n.name],i);a.push(e),o.push(s)}return(0,n.arrToBufArr)((0,s.encode)(a,o))}function g(e,t){let r="";const n=y(e,t);n.delete(e);const s=[e,...Array.from(n).sort()];for(const e of s){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function y(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])y(n.type,t,r);return r}function b(e,t,r,s){d(s,[l.V3,l.V4]);const i=m(e,t,r,s),a=(0,c.keccak256)(i);return(0,n.arrToBufArr)(a)}function w(e,t){const r=(0,o.stringToBytes)(g(e,t));return(0,n.arrToBufArr)((0,c.keccak256)(r))}function v(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function k(e,t){d(t,[l.V3,l.V4]);const r=v(e),{domain:n}=r;return b("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function E(e,t){if((0,i.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,i.getArrayType)(e);return t.map((e=>E(r,e)))}if("address"===e){if((0,o.isStrictHexString)(t))return(0,a.padStart)((0,o.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,a.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,i.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,o.numberToBytes)(t).subarray(0,r);if((0,o.isStrictHexString)(t))return(0,o.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,i.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function T(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=h(e,t);if(r>=BigInt(0))return(0,a.padStart)((0,o.bigIntToBytes)(r),32);const n=(0,i.getLength)(e),s=BigInt.asIntN(n,r);return(0,o.signedBigIntToBytes)(s,32)}return t}))}function _(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(n=r,n.map((e=>"number"==typeof e?(0,a.padStart)((0,o.numberToBytes)(e),32):(0,o.isStrictHexString)(e)?(0,a.padStart)((0,o.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,a.padStart)(e.subarray(0,32),32):e)))};var n;if(t.startsWith("int")&&(0,i.isArrayType)(t)){const[n,s]=(0,i.getArrayType)(t);return{name:e,type:`bytes32[${null!=s?s:""}]`,value:T(n,r)}}return{name:e,type:t,value:E(t,r)}})),l=r.map((e=>"bytes"!==e.type?e.value:(0,u.legacyToBuffer)(e.value))),d=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),h=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,n.arrToBufArr)((0,c.keccak256)((0,s.encodePacked)(["bytes32","bytes32"],[(0,c.keccak256)((0,s.encodePacked)(["string[]"],[h],!0)),(0,c.keccak256)((0,s.encodePacked)(d,l,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(l=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:m,encodeType:g,findTypeDependencies:y,hashStruct:b,hashType:w,sanitizeData:v,eip712Hash:function(e,t){d(t,[l.V3,l.V4]);const r=v(e),s=[(0,o.hexToBytes)("1901")];return s.push(k(e,t)),"EIP712Domain"!==r.primaryType&&s.push(b(r.primaryType,r.message,r.types,t)),(0,n.arrToBufArr)((0,c.keccak256)((0,o.concatBytes)(s)))},eip712DomainHash:k},r.typedSignatureHash=function(e){const t=_(e);return(0,o.bytesToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:s}){if(d(s),(0,u.isNullish)(t))throw new Error("Missing data parameter");if((0,u.isNullish)(e))throw new Error("Missing private key parameter");const i=s===l.V1?_(t):r.TypedDataUtils.eip712Hash(t,s),a=(0,n.ecsign)(i,e);return(0,u.concatSig)((0,n.arrToBufArr)((0,o.bigIntToBytes)(a.v)),a.r,a.s)},r.recoverTypedSignature=function({data:e,signature:t,version:s}){if(d(s),(0,u.isNullish)(e))throw new Error("Missing data parameter");if((0,u.isNullish)(t))throw new Error("Missing signature parameter");const i=s===l.V1?_(e):r.TypedDataUtils.eip712Hash(e,s),a=(0,u.recoverPublicKey)(i,t),c=(0,n.publicToAddress)(a);return(0,o.bytesToHex)(c)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1735,{"@ethereumjs/util":1744,"@metamask/utils":3026,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),s=e("@metamask/utils");function i(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function a(e){return null===e||e===undefined}r.padWithZeroes=i,r.isNullish=a,r.legacyToBuffer=function(e){return"string"!=typeof e||(0,n.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const a=(0,n.fromSigned)(t),o=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=i((0,n.toUnsigned)(a).toString("hex"),64),l=i((0,n.toUnsigned)(o).toString("hex"),64),d=(0,s.remove0x)((0,s.numberToHex)(c));return(0,s.add0x)(u.concat(l,d))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(a(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,s.numberToBytes)(e);e=(0,s.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,s.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1736,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];let r=0;for(let s=0;s<e.length;s++){const i=n(e[s]);t.push(i),r+=i.length}return f(a(r,192),...t)}const t=y(e);return 1===t.length&&t[0]<128?t:f(a(t.length,128),t)}function s(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(l(e))}function a(e,t){if(e<56)return Uint8Array.from([e+t]);const r=m(e),n=m(t+55+r.length/2);return Uint8Array.from(h(n+r))}function o(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=c(y(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,a,o;const u=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(l<=183){if(t=l-127,n=128===l?Uint8Array.from([]):s(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(l<=191){if(r=l-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(s(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=s(e,r,t+r),{data:n,remainder:e.slice(t+r)}}if(l<=247){for(t=l-191,a=s(e,1,t);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.slice(t)}}{if(r=l-246,t=i(s(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=s(e,r,n);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.slice(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.RLP=r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=o;const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l(e){let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=d(e.slice(n,n+2))}return t}function f(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}function p(e){return(new TextEncoder).encode(e)}function m(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?h((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):p(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?h(m(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:l,concatBytes:f,hexToBytes:h,utf8ToBytes:p},r.RLP={encode:n,decode:o}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/rlp",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/rlp/dist/index.js"}],[1737,{"./bytes":1740,"./constants":1741,"./helpers":1743,"./internal":1745,"@ethereumjs/rlp":1736,buffer:4138,"ethereum-cryptography/keccak":4372,"ethereum-cryptography/secp256k1":4393,"ethereum-cryptography/utils":4395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const n=e("@ethereumjs/rlp"),s=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),a=e("ethereum-cryptography/utils"),o=e("./bytes"),c=e("./constants"),u=e("./helpers"),l=e("./internal"),d=BigInt(0);class h{constructor(e=d,t=d,r=c.KECCAK256_RLP,n=c.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:s}=e;return new h(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,r!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):undefined,n!==undefined?(0,o.toBuffer)(n):undefined,s!==undefined?(0,o.toBuffer)(s):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,s]=e;return new h((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),n,s)}_validate(){if(this.nonce<d)throw new Error("nonce must be greater than zero");if(this.balance<d)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(n.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===d&&this.nonce===d&&this.codeHash.equals(c.KECCAK256_NULL)}}r.Account=h;r.isValidAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,u.assertIsHexString)(e);const n=(0,l.stripHexPrefix)(e).toLowerCase();let i="";if(r!==undefined){i=(0,o.bufferToBigInt)((0,o.toBuffer)(r)).toString()+"0x"}const c=t.from(i+n,"utf8"),d=(0,a.bytesToHex)((0,s.keccak256)(c));let h="0x";for(let e=0;e<n.length;e++)parseInt(d[e],16)>=8?h+=n[e].toUpperCase():h+=n[e];return h};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,o.bufferToBigInt)(r)===BigInt(0)?t.from((0,s.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,s.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,n){if((0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,u.assertIsBuffer)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const i=(0,s.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,s.keccak256)(n)]));return(0,o.toBuffer)(i).slice(-20)};r.isValidPrivate=function(e){return i.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,u.assertIsBuffer)(e),64===e.length)try{return i.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return i.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,u.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,s.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,u.assertIsBuffer)(e),t.from(i.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,u.assertIsBuffer)(e),64!==e.length&&(e=t.from(i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function f(e){const[t,r,n,s]=e;return[t,r,0===(0,o.arrToBufArr)(n).length?c.KECCAK256_RLP:n,0===(0,o.arrToBufArr)(s).length?c.KECCAK256_NULL:s]}r.isZeroAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=f;const p=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,n,s]=e;return[t,r,(0,o.arrToBufArr)(n).equals(c.KECCAK256_RLP)?p:n,(0,o.arrToBufArr)(s).equals(c.KECCAK256_NULL)?p:s]},r.accountBodyToRLP=function(e,t=!0){const r=t?f(e):e;return(0,o.arrToBufArr)(n.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/account.js"}],[1738,{"./account":1737,"./bytes":1740,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const n=e("./account"),s=e("./bytes");class i{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new i((0,s.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new i((0,s.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,n.pubToAddress)(e);return new i(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,n.privateToAddress)(e);return new i(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new i((0,n.generateAddress)(e.buf,(0,s.bigIntToBuffer)(t)))}static generate2(e,r,s){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(s))throw new Error("Expected initCode to be a Buffer");return new i((0,n.generateAddress2)(e.buf,r,s))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(i.zero())}isPrecompileOrSystemAddress(){const e=(0,s.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=i}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/address.js"}],[1739,{events:4475},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const n=e("events");class s extends n.EventEmitter{emit(e,...t){let[r,n]=t;const s=this;let i=s._events[e]??[];return n===undefined&&"function"==typeof r&&(n=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=undefined),i=Array.isArray(i)?i:[i],async function(e,t,r){let n;for await(const s of t)try{s.length<2?s.call(e,r):await new Promise(((t,n)=>{s.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(s,i.slice(),r).then(n).catch(n),s.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(s,i){r.removeListener(e,n),t(s,i)}:function(s){r.removeListener(e,n),t(s,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let s,i,a=this._events[e]??[];const o="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),i=a.length,s=a.length;s--;)if(a[s]===t){i=s+o;break}return a.splice(i,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=s}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[1740,{"./helpers":1743,"./internal":1745,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const n=e("./helpers"),s=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const n=(0,r.intToHex)(e);return t.from((0,s.padToEven)(n.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const i=function(e,t,n){const s=(0,r.zeros)(t);return n?e.length<t?(e.copy(s),s):e.slice(0,t):e.length<t?(e.copy(s,t-e.length),s):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,n.assertIsBuffer)(e),i(e,t,!1)};r.setLengthRight=function(e,t){return(0,n.assertIsBuffer)(e),i(e,t,!0)};const a=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,n.assertIsBuffer)(e),a(e)};r.unpadArray=function(e){return(0,n.assertIsArray)(e),a(e)};r.unpadHexString=function(e){return(0,n.assertIsHexString)(e),e=(0,s.stripHexPrefix)(e),"0x"+a(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,s.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,s.padToEven)((0,s.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function c(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=o,r.bigIntToBuffer=c;r.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,o(e))};r.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,s.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const n=t.isBuffer(e)?e.toString("hex"):e;return n.length<=r?n:n.slice(0,r)+"…"};r.toUtf8=function(e){if((e=(0,s.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,r.baToJSON)(e[n]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(c(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/bytes.js"}],[1741,{buffer:4138,"ethereum-cryptography/secp256k1":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("buffer"),s=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=s.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=s.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=n.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/constants.js"}],[1742,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=t<<5,1&~e.length||(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,n.subarray(1)),n};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const n=2-(1&t[0]);return t.subarray(n)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/encoding.js"}],[1743,{"../../../../../../../../../is-buffer/index.js":4736,"./internal":1745},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const n=e("./internal");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/helpers.js"}],[1744,{"./account":1737,"./address":1738,"./asyncEventEmitter":1739,"./bytes":1740,"./constants":1741,"./encoding":1742,"./internal":1745,"./lock":1746,"./provider":1747,"./signature":1748,"./types":1749,"./units":1750,"./withdrawal":1751},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,s(e("./constants"),r),s(e("./units"),r),s(e("./account"),r),s(e("./address"),r),s(e("./withdrawal"),r),s(e("./signature"),r),s(e("./bytes"),r),s(e("./types"),r),s(e("./encoding"),r),s(e("./asyncEventEmitter"),r);var i=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return i.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return i.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),s(e("./lock"),r),s(e("./provider"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/index.js"}],[1745,{buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function n(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=n,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(t){return`0x${n(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let s=0;s<e.length;s++){let i=e[s][t];if(!0!==r||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";n.push(i)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/internal.js"}],[1746,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/lock.js"}],[1747,{"micro-ftch":4990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const n=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/provider.js"}],[1748,{"./bytes":1740,"./constants":1741,"./helpers":1743,buffer:4138,"ethereum-cryptography/keccak":4372,"ethereum-cryptography/secp256k1":4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak"),s=e("ethereum-cryptography/secp256k1"),i=e("./bytes"),a=e("./constants"),o=e("./helpers");function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function u(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,n){const i=s.secp256k1.sign(e,r),a=i.toCompactRawBytes();return{r:t.from(a.slice(0,32)),s:t.from(a.slice(32,64)),v:n===undefined?BigInt(i.recovery+27):BigInt(i.recovery+35)+BigInt(n)*BigInt(2)}};r.ecrecover=function(e,r,n,a,o){const l=t.concat([(0,i.setLengthLeft)(n,32),(0,i.setLengthLeft)(a,32)],64),d=c(r,o);if(!u(d))throw new Error("Invalid signature v value");const h=s.secp256k1.Signature.fromCompact(l).addRecoveryBit(Number(d)).recoverPublicKey(e);return t.from(h.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,n,s){if(!u(c(e,s)))throw new Error("Invalid signature v value");return(0,i.bufferToHex)(t.concat([(0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(n,32),(0,i.toBuffer)(e)]))};r.toCompactSig=function(e,r,n,s){if(!u(c(e,s)))throw new Error("Invalid signature v value");let a=n;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(a=t.from(n),a[0]|=128),(0,i.bufferToHex)(t.concat([(0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(a,32)]))};r.fromRpcSig=function(e){const t=(0,i.toBuffer)(e);let r,n,s;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),s=(0,i.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),s=BigInt((0,i.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return s<27&&(s+=BigInt(27)),{v:s,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,s){if(32!==t.length||32!==r.length)return!1;if(!u(c(e,s)))return!1;const o=(0,i.bufferToBigInt)(t),l=(0,i.bufferToBigInt)(r);return!(o===BigInt(0)||o>=a.SECP256K1_ORDER||l===BigInt(0)||l>=a.SECP256K1_ORDER)&&!(n&&l>=a.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,n.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/signature.js"}],[1749,{"./bytes":1740,"./internal":1745},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes"),s=e("./internal");var i;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(i=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,s.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case i.Buffer:return r;case i.BigInt:return(0,n.bufferToBigInt)(r);case i.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case i.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/types.js"}],[1750,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/units.js"}],[1751,{"./address":1738,"./bytes":1740,"./types":1749,buffer:4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address"),s=e("./bytes"),i=e("./types");class a{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:s,amount:o}=e,c=(0,i.toType)(t,i.TypeOutput.BigInt),u=(0,i.toType)(r,i.TypeOutput.BigInt),l=new n.Address((0,i.toType)(s,i.TypeOutput.Buffer)),d=(0,i.toType)(o,i.TypeOutput.BigInt);return new a(c,u,l,d)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,s]=e;return a.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:s})}static toBufferArray(e){const{index:r,validatorIndex:s,address:a,amount:o}=e,c=(0,i.toType)(r,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(r,i.TypeOutput.Buffer),u=(0,i.toType)(s,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(s,i.TypeOutput.Buffer);let l;l=a instanceof n.Address?a.buf:(0,i.toType)(a,i.TypeOutput.Buffer);return[c,u,l,(0,i.toType)(o,i.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,i.toType)(o,i.TypeOutput.Buffer)]}raw(){return a.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,s.bigIntToHex)(this.index),validatorIndex:(0,s.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,s.bigIntToHex)(this.amount)}}}r.Withdrawal=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[1752,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function s(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function i(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function a(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function c(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function u(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const i=[],a=Array.from(e);for(a.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let i=s;i<a.length;i++){const o=a[i],c=t*e+o;if(!Number.isSafeInteger(c)||t*e/t!==e||c-o!=t*e)throw new Error("convertRadix: carry overflow");e=c%r;const u=Math.floor(c/r);if(a[i]=u,!Number.isSafeInteger(u)||u*r+e!==c)throw new Error("convertRadix: carry overflow");n&&(u?n=!1:s=i)}if(i.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=void 0,r.assertNumber=n;const d=(e,t)=>t?d(t,e%t):e,h=(e,t)=>e+(t-d(e,t));function f(e,t,r,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(h(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${h(t,r)}`);let i=0,a=0;const o=2**r-1,c=[];for(const s of e){if(n(s),s>=2**t)throw new Error(`convertRadix2: invalid data word=${s} from=${t}`);if(i=i<<t|s,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=r;a-=r)c.push((i>>a-r&o)>>>0);i&=2**a-1}if(i=i<<r-a&o,!s&&a>=t)throw new Error("Excess padding");if(!s&&i)throw new Error(`Non-zero padding: ${i}`);return s&&a>0&&c.push(i>>>0),c}function p(e){return n(e),{encode:t=>{if(!s(t))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(l(t,e,256))}}}function m(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,e)>32||h(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!s(r))throw new Error("radix2.encode input should be Uint8Array");return f(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(f(r,e,8,t))}}}function g(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!s(r))throw new Error("checksum.encode: input should be Uint8Array");const n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!s(r))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-e),i=t(n).slice(0,e),a=r.slice(-e);for(let t=0;t<e;t++)if(i[t]!==a[t])throw new Error("Invalid checksum");return n}}}r.utils={alphabet:a,chain:i,checksum:y,convertRadix:l,convertRadix2:f,radix:p,radix2:m,join:o,padding:c},r.base16=i(m(4),a("0123456789ABCDEF"),o("")),r.base32=i(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),c(5),o("")),r.base32nopad=i(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o("")),r.base32hex=i(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),c(5),o("")),r.base32hexnopad=i(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o("")),r.base32crockford=i(m(5),a("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),u((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),r.base64=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),c(6),o("")),r.base64nopad=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o("")),r.base64url=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),c(6),o("")),r.base64urlnopad=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(""));const b=e=>i(p(58),a(e),o(""));r.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){const s=e.subarray(n,n+8);t+=r.base58.encode(s).padStart(w[s.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const s=e.slice(n,n+11),i=w.indexOf(s.length),a=r.base58.decode(s);for(let e=0;e<a.length-i;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-i)))}return Uint8Array.from(t)}};r.createBase58check=e=>i(y(4,(t=>e(e(t)))),r.base58),r.base58check=r.createBase58check;const v=i(a("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),k=[996825010,642813549,513874426,1027748829,705979059];function E(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<k.length;e++)1==(t>>e&1)&&(r^=k[e]);return r}function T(e,t,r=1){const n=e.length;let s=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);s=E(s)^r>>5}s=E(s);for(let t=0;t<n;t++)s=E(s)^31&e.charCodeAt(t);for(let e of t)s=E(s)^e;for(let e=0;e<6;e++)s=E(s);return s^=r,v.encode(f([s%2**30],30,5,!1))}function _(e){const t="bech32"===e?1:734539939,r=m(5),n=r.decode,s=r.encode,i=g(n);function a(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(r instanceof Uint8Array&&(r=Array.from(r)),!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);if(0===e.length)throw new TypeError(`Invalid prefix length ${e.length}`);const s=e.length+7+r.length;if(!1!==n&&s>n)throw new TypeError(`Length ${s} exceeds limit ${n}`);const i=e.toLowerCase(),a=T(i,r,t);return`${i}1${v.encode(r)}${a}`}function o(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=n.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const i=n.slice(0,s),a=n.slice(s+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const o=v.decode(a).slice(0,-6),c=T(i,o,t);if(!a.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:o}}return{encode:a,decode:o,encodeFromBytes:function(e,t){return a(e,s(t))},decodeToBytes:function(e){const{prefix:t,words:r}=o(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:g(o),fromWords:n,fromWordsUnsafe:i,toWords:s}}r.bech32=_("bech32"),r.bech32m=_("bech32m"),r.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},r.hex=i(m(4),a("0123456789abcdef"),o(""),u((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const A={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},S="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!A.hasOwnProperty(e))throw new TypeError(S);if(!s(t))throw new TypeError("bytesToString() expects Uint8Array");return A[e].encode(t)},r.str=r.bytesToString;r.stringToBytes=(e,t)=>{if(!A.hasOwnProperty(e))throw new TypeError(S);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return A[e].decode(t)},r.bytes=r.stringToBytes}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@scure/base",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@scure/base/lib/index.js"}],[177,{"../../../../shared/lib/trace":5895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.addPersonalMessage=async function({signatureParams:e,signatureController:t}){return s(e,t,"newUnsignedPersonalMessage")},r.addTypedMessage=async function({signatureParams:e,signatureController:t}){return s(e,t,"newUnsignedTypedMessage")};var n=e("../../../../shared/lib/trace");async function s(e,t,r){const[,s]=e,{id:i}=s,a=null==i?void 0:i.toString();(0,n.endTrace)({name:n.TraceName.Middleware,id:a});const o=await t[r](...e);return(0,n.endTrace)({name:n.TraceName.Signature,id:a}),o}}}},{package:"$root$",file:"app/scripts/lib/signature/util.ts"}],[178,{"./snap-keyring":181,"./utils":182},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getAccountsBySnapId",{enumerable:!0,get:function(){return s.getAccountsBySnapId}}),Object.defineProperty(r,"snapKeyringBuilder",{enumerable:!0,get:function(){return n.snapKeyringBuilder}});var n=e("./snap-keyring"),s=e("./utils")}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/index.ts"}],[179,{"@metamask/keyring-api":2046,"@metamask/permission-controller":2452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isProtocolAllowed=l,r.keyringSnapPermissionsBuilder=function(e,t){return()=>{if("metamask"===t)return a;if(i.includes(t))return c;const r=e.getSubjectMetadata(t);return(null==r?void 0:r.subjectType)===s.SubjectType.Website&&l(t)?o:[]}};var n=e("@metamask/keyring-api"),s=e("@metamask/permission-controller");const i=["https://portfolio.metamask.io"],a=[n.KeyringRpcMethod.ListAccounts,n.KeyringRpcMethod.GetAccount,n.KeyringRpcMethod.FilterAccountChains,n.KeyringRpcMethod.DeleteAccount,n.KeyringRpcMethod.ListRequests,n.KeyringRpcMethod.GetRequest,n.KeyringRpcMethod.SubmitRequest,n.KeyringRpcMethod.RejectRequest],o=[n.KeyringRpcMethod.ListAccounts,n.KeyringRpcMethod.GetAccount,n.KeyringRpcMethod.CreateAccount,n.KeyringRpcMethod.FilterAccountChains,n.KeyringRpcMethod.UpdateAccount,n.KeyringRpcMethod.DeleteAccount,n.KeyringRpcMethod.ExportAccount,n.KeyringRpcMethod.ListRequests,n.KeyringRpcMethod.GetRequest,n.KeyringRpcMethod.ApproveRequest,n.KeyringRpcMethod.RejectRequest],c=[n.KeyringRpcMethod.ListAccounts,n.KeyringRpcMethod.GetAccount,n.KeyringRpcMethod.GetAccountBalances,n.KeyringRpcMethod.SubmitRequest],u=["https:"];function l(e){try{const t=new URL(e);return u.includes(t.protocol)}catch(e){return!1}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/keyring-snaps-permissions.ts"}],[18,{"../../../../shared/lib/delegation":5878,"@metamask/delegation-controller":1549,"@metamask/transaction-controller":2981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DelegationControllerInit=void 0,r.awaitDeleteDelegationEntry=o;var n=e("@metamask/delegation-controller"),s=e("@metamask/transaction-controller"),i=e("../../../../shared/lib/delegation");const a=e=>(0,i.getDeleGatorEnvironment)(Number(e));async function o(e,t,{hash:r,txMeta:n,entryToStore:i}){let{id:a}=n,o="continue";const c=({transactionMeta:n})=>{if(n.id===a)if(n.status===s.TransactionStatus.dropped&&n.replacedById)a=n.replacedById;else{switch(n.type){case s.TransactionType.contractInteraction:case s.TransactionType.retry:switch(n.status){case s.TransactionStatus.confirmed:o="delete";break;case s.TransactionStatus.dropped:case s.TransactionStatus.failed:case s.TransactionStatus.rejected:o="unsubscribe";break;default:return}break;case s.TransactionType.cancel:o="unsubscribe";break;default:return void console.warn("awaitDeleteDelegationEntry: Unexpected tx type",n.type)}"delete"===o&&(e.delete(r),i&&e.store({entry:i})),"unsubscribe"!==o&&"delete"!==o||t.unsubscribe("TransactionController:transactionStatusUpdated",c)}};t.subscribe("TransactionController:transactionStatusUpdated",c)}r.DelegationControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:r})=>{const s=new n.DelegationController({messenger:e,state:t.DelegationController,hashDelegation:i.getDelegationHashOffchain,getDelegationEnvironment:a});return{controller:s,api:{signDelegation:s.signDelegation.bind(s),storeDelegationEntry:s.store.bind(s),listDelegationEntries:s.list.bind(s),getDelegationEntry:s.retrieve.bind(s),getDelegationEntryChain:s.chain.bind(s),deleteDelegationEntry:s.delete.bind(s),awaitDeleteDelegationEntry:o.bind(null,s,r)}}}}}},{package:"$root$",file:"app/scripts/controller-init/delegation/delegation-controller-init.ts"}],[180,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSnapAndHardwareInfoForMetrics=async function(e,t,r,n){var s,i,a;if(!n)return{};const o=n.call("AccountsController:getSelectedAccount"),c=o.address;let u;var l;null!==(s=o.metadata.snap)&&void 0!==s&&s.id&&(u=n.call("SnapController:get",null===(l=o.metadata.snap)||void 0===l?void 0:l.id));return{account_type:await e(c),device_model:await t(c),account_hardware_type:await r(c),account_snap_type:null===(i=u)||void 0===i?void 0:i.id,account_snap_version:null===(a=u)||void 0===a?void 0:a.version}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/metrics.ts"}],[181,{"../../../../shared/constants/app":5824,"../../../../shared/constants/metametrics":5836,"../../../../shared/lib/accounts":5859,"../../../../shared/lib/accounts/snaps":5861,"../../../../shared/lib/snaps/snaps":5890,"../../../../ui/components/component-library/icon":6462,"../../translate":399,"./utils/isBlockedUrl":183,"./utils/showResult":184,"@metamask/eth-snap-keyring":1847,"@metamask/snaps-utils":2925,"webextension-polyfill":5801},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.showAccountCreationDialog=k,r.showAccountNameSuggestionDialog=E,r.snapKeyringBuilder=function(e,t){const r=()=>new s.SnapKeyring(e,new M(e,t));return r.type=s.SnapKeyring.type,r};var n,s=e("@metamask/eth-snap-keyring"),i=(n=e("webextension-polyfill"))&&n.__esModule?n:{default:n},a=e("@metamask/snaps-utils"),o=e("../../../../shared/constants/metametrics"),c=e("../../../../shared/constants/app"),u=e("../../translate"),l=e("../../../../ui/components/component-library/icon"),d=e("../../../../shared/lib/accounts"),h=e("../../../../shared/lib/snaps/snaps"),f=e("../../../../shared/lib/accounts/snaps"),p=e("./utils/isBlockedUrl"),m=e("./utils/showResult");function g(e,t,r){y(e,t),t.set(e,r)}function y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(e,t){return e.get(v(e,t))}function w(e,t,r){return e.set(v(e,t),r),r}function v(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}async function k(e,t){try{return Boolean(await t.call("ApprovalController:addRequest",{origin:e,type:c.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation},!0))}catch(e){throw new Error(`Error occurred while showing account creation dialog.\n${e}`)}}async function E(e,t,r){try{return await t.call("ApprovalController:addRequest",{origin:e,type:c.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showNameSnapAccount,requestData:{snapSuggestedAccountName:r}},!0)}catch(e){throw new Error(`Error occurred while showing name account dialog.\n${e}`)}}var T=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakMap,P=new WeakSet;class M{constructor(e,{trackEvent:t,persistKeyringHelper:r,removeAccountHelper:n}){!function(e,t){y(e,t),t.add(e)}(this,P),g(this,T,void 0),g(this,_,void 0),g(this,A,void 0),g(this,S,void 0),w(T,this,e),w(_,this,t),w(A,this,r),w(S,this,n)}async addressExists(e){return(await b(T,this).call("KeyringController:getAccounts")).includes(e.toLowerCase())}async redirectUser(e,t,r){if(t.length>0||r.length>0){const n=await(0,p.isBlockedUrl)(t,(async()=>await b(T,this).call("PhishingController:maybeUpdateState")),(e=>b(T,this).call("PhishingController:testOrigin",e))),s=await b(T,this).call("ApprovalController:addRequest",{origin:e,requestData:{url:t,message:r,isBlockedUrl:n},type:c.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect},!0);Boolean(s)&&t.length>0?i.default.tabs.create({url:t}):console.log("User refused snap account redirection to:",t)}else console.log("Error occurred when redirecting snap account. url or message must be defined")}async saveState(){await b(A,this).call(this)}async addAccount(e,t,r,n,i="",{displayConfirmation:o,displayAccountNameSuggestion:c,setSelectedAccount:u}=(0,s.getDefaultInternalOptions)()){(0,a.assertIsValidSnapId)(t);const l=(0,h.isSnapPreinstalled)(t)&&!o,d=(0,h.isSnapPreinstalled)(t)&&!c,f=(0,h.isSnapPreinstalled)(t)&&!u,{accountName:p}=await v(P,this,x).call(this,{snapId:t,skipConfirmationDialog:l,skipAccountNameSuggestionDialog:d,accountNameSuggestion:i,handleUserInput:r});v(P,this,B).call(this,{address:e,snapId:t,skipConfirmationDialog:l,skipSetSelectedAccountStep:f,accountName:p,onceSaved:n,defaultAccountNameChosen:Boolean(i)&&p===i})}async removeAccount(e,t,r){(0,a.assertIsValidSnapId)(t);const n=(0,f.getSnapName)(t,b(T,this)),{id:s}=b(T,this).call("ApprovalController:startFlow"),i="https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-remove-an-account-from-your-metamask-wallet/",d=e=>{b(_,this).call(this,{event:e,category:o.MetaMetricsEventCategory.Accounts,properties:{account_type:o.MetaMetricsEventAccountType.Snap,snap_id:t,snap_name:n}})};let h=!1;try{if(h=Boolean(await b(T,this).call("ApprovalController:addRequest",{origin:t,type:c.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval,requestData:{publicAddress:e}},!0)),!h)throw await r(h),new Error("User denied account removal");try{await b(S,this).call(this,e),await r(h),await b(A,this).call(this),d(o.MetaMetricsEventName.RemoveSnapAccountSuccessViewed),await(0,m.showError)(b(T,this),t,{icon:l.IconName.UserCircleRemove,title:(0,u.t)("snapAccountRemoved")},{message:(0,u.t)("snapAccountRemovedDescription"),learnMoreLink:i}),d(o.MetaMetricsEventName.RemoveSnapAccountSuccessClicked)}catch(e){const r=e.message;throw await(0,m.showError)(b(T,this),t,{icon:l.IconName.UserCircleRemove,title:(0,u.t)("snapAccountRemovalFailed")},{message:(0,u.t)("snapAccountRemovalFailedDescription",n),learnMoreLink:i,error:r}),d(o.MetaMetricsEventName.AccountRemoveFailed),new Error(`Error occurred while removing snap account: ${r}`)}}finally{h&&d(o.MetaMetricsEventName.AccountRemoved),b(T,this).call("ApprovalController:endFlow",{id:s})}}}async function I(e){const{id:t}=b(T,this).call("ApprovalController:startFlow");try{return await e(t)}finally{b(T,this).call("ApprovalController:endFlow",{id:t})}}async function C(e,t){const{success:r,name:n}=await E(e,b(T,this),t);return{success:r,accountName:n}}async function j(e){const t=await b(T,this).call("AccountsController:listMultichainAccounts");return{success:!0,accountName:(0,d.getUniqueAccountName)(t,e)}}async function x({snapId:e,skipConfirmationDialog:t,skipAccountNameSuggestionDialog:r,handleUserInput:n,accountNameSuggestion:s}){return await v(P,this,I).call(this,(async i=>{{const r=t||await k(e,b(T,this));if(!r)throw await n(r),new Error("User denied account creation")}{const{success:t,accountName:i}=r?await v(P,this,j).call(this,s):await v(P,this,C).call(this,e,s);if(await n(t),!t)throw new Error("User denied account creation");return{accountName:i}}}))}async function B({address:e,snapId:t,skipConfirmationDialog:r,skipSetSelectedAccountStep:n,accountName:s,onceSaved:i,defaultAccountNameChosen:a}){const c="https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-add-accounts-in-your-wallet/",d=(0,f.getSnapName)(t,b(T,this)),h=e=>{b(_,this).call(this,{event:e,category:o.MetaMetricsEventCategory.Accounts,properties:{account_type:o.MetaMetricsEventAccountType.Snap,snap_id:t,snap_name:d,...e===o.MetaMetricsEventName.AccountAdded&&{is_suggested_name:a}}})};await v(P,this,I).call(this,(async a=>{try{const a=await i;n||b(T,this).call("AccountsController:setSelectedAccount",a),s&&b(T,this).call("AccountsController:setAccountName",a,s),r||(h(o.MetaMetricsEventName.AddSnapAccountSuccessViewed),await(0,m.showSuccess)(b(T,this),t,{icon:l.IconName.UserCircleAdd,title:(0,u.t)("snapAccountCreated")},{message:(0,u.t)("snapAccountCreatedDescription"),address:e,learnMoreLink:c}),h(o.MetaMetricsEventName.AddSnapAccountSuccessClicked)),h(o.MetaMetricsEventName.AccountAdded)}catch(e){const r=e.message;await(0,m.showError)(b(T,this),t,{icon:l.IconName.UserCircleAdd,title:(0,u.t)("snapAccountCreationFailed")},{message:(0,u.t)("snapAccountCreationFailedDescription",d),learnMoreLink:c,error:r}),console.error("Error occurred while creating snap account:",r)}}))}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/snap-keyring.ts"}],[182,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getAccountsBySnapId=void 0;r.getAccountsBySnapId=async(e,t)=>{const r=await e();return await r.getAccountsBySnapId(t)}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/utils.ts"}],[183,{"../keyring-snaps-permissions":179},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isBlockedUrl=void 0;var n=e("../keyring-snaps-permissions");r.isBlockedUrl=async(e,t,r)=>{try{return!(0,n.isProtocolAllowed)(e)||(await t(),r(e).result)}catch(e){return console.error("Invalid URL passed into snap-keyring:",e),!1}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/utils/isBlockedUrl.ts"}],[184,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.showSuccess=r.showError=void 0;const n=e=>({name:"SnapAuthorshipHeader",key:"snapHeader",properties:{snapId:e}});r.showError=(e,t,r,s)=>e.call("ApprovalController:showError",{header:[n(t)],title:r.title,icon:r.icon,error:{key:"snapAccountErrorMessage",name:"SnapAccountErrorMessage",properties:s}});r.showSuccess=(e,t,r,s)=>e.call("ApprovalController:showSuccess",{header:[n(t)],title:r.title,icon:r.icon,message:{key:"snapAccountSuccessMessage",name:"SnapAccountSuccessMessage",properties:s}})}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/utils/showResult.ts"}],[1841,{"./util.cjs":1853},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaseInsensitiveMap=void 0;const n=e("./util.cjs");class s extends Map{static fromObject(e){return new s(Object.entries(e))}toObject(){return Object.fromEntries(this.entries())}get(e){return super.get(e.toLowerCase())}getOrThrow(e,t="Key"){return this.get(e)??(0,n.throwError)(`${t} '${e}' not found`)}has(e){return super.has(e.toLowerCase())}set(e,t){return super.set(e.toLowerCase(),t)}delete(e){return super.delete(e.toLowerCase())}}r.CaseInsensitiveMap=s}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/CaseInsensitiveMap.cjs"}],[1842,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeferredPromise=void 0;r.DeferredPromise=class{constructor(){if(this.resolve=undefined,this.reject=undefined,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),!this.resolve||!this.reject)throw new Error("Promise constructor failed")}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/DeferredPromise.cjs"}],[1843,{"./CaseInsensitiveMap.cjs":1841},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapIdMap=r.InvalidSnapIdError=void 0;const a=e("./CaseInsensitiveMap.cjs");class o extends Error{constructor(e,t){super(`Snap "${e}" is not allowed to set "${t}"`),this.name="InvalidSnapIdError",this.snapId=e,this.key=t}}r.InvalidSnapIdError=o;class c{constructor(e){n.set(this,void 0),s(this,n,new a.CaseInsensitiveMap(e),"f")}toObject(){return i(this,n,"f").toObject()}static fromObject(e){return new c(Object.entries(e))}get(e,t){const r=i(this,n,"f").get(t);return r?.snapId===e?r:undefined}pop(e,t){const r=this.get(e,t);return this.delete(e,t),r}has(e,t){return this.get(e,t)!==undefined}hasSnapId(e){return[...i(this,n,"f").values()].some((t=>t.snapId===e))}delete(e,t){return this.has(e,t)&&i(this,n,"f").delete(t)}set(e,t){if(i(this,n,"f").has(e)&&!this.has(t.snapId,e))throw new o(t.snapId,e);return i(this,n,"f").set(e,t),this}values(){return i(this,n,"f").values()}get size(){return i(this,n,"f").size}}r.SnapIdMap=c,n=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapIdMap.cjs"}],[1844,{"./DeferredPromise.cjs":1842,"./SnapIdMap.cjs":1843,"./account.cjs":1845,"./events.cjs":1846,"./logger.cjs":1848,"./migrations/index.cjs":1849,"./options.cjs":1851,"./types.cjs":1852,"./util.cjs":1853,"./versions.cjs":1854,"@ethereumjs/tx":475,"@metamask/eth-sig-util":1891,"@metamask/keyring-api":2046,"@metamask/keyring-internal-api":2098,"@metamask/keyring-internal-snap-client":2102,"@metamask/keyring-utils":2126,"@metamask/superstruct":2947,"@metamask/utils":3026,events:4475,uuid:1897},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,u,l,d,h,f,p,m,g,y,b,w,v,k,E,T,_,A,S,P,M,I,C,j,x,B,O,N,R,D=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},$=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapKeyring=r.SNAP_KEYRING_TYPE=void 0;const L=e("@ethereumjs/tx"),U=e("@metamask/eth-sig-util"),H=e("@metamask/keyring-api"),K=e("@metamask/keyring-internal-api"),F=e("@metamask/keyring-internal-snap-client"),G=e("@metamask/keyring-utils"),q=e("@metamask/superstruct"),V=e("@metamask/utils"),W=e("events"),z=e("uuid"),Y=e("./account.cjs"),J=e("./DeferredPromise.cjs"),Q=e("./events.cjs"),X=e("./logger.cjs"),Z=e("./migrations/index.cjs"),ee=e("./options.cjs"),te=e("./SnapIdMap.cjs"),re=e("./types.cjs"),ne=e("./util.cjs"),se=e("./versions.cjs");function ie(e){return(0,H.isEvmAccountType)(e.type)?e.address.toLowerCase():e.address}r.SNAP_KEYRING_TYPE="Snap Keyring";class ae extends W.EventEmitter{constructor(e,t){super(),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),this.type=ae.type,D(this,s,e,"f"),D(this,i,new F.KeyringInternalSnapClient({messenger:e}),"f"),D(this,o,new te.SnapIdMap,"f"),D(this,a,new te.SnapIdMap,"f"),D(this,c,new te.SnapIdMap,"f"),D(this,u,t,"f")}async handleKeyringSnapMessage(e,t){switch((0,q.assert)(t,re.SnapMessageStruct),t.method){case`${H.KeyringEvent.AccountCreated}`:return $(this,n,"m",h).call(this,e,t);case`${H.KeyringEvent.AccountUpdated}`:return $(this,n,"m",f).call(this,e,t);case`${H.KeyringEvent.AccountDeleted}`:return $(this,n,"m",p).call(this,e,t);case`${H.KeyringEvent.RequestApproved}`:return $(this,n,"m",m).call(this,e,t);case`${H.KeyringEvent.RequestRejected}`:return $(this,n,"m",g).call(this,e,t);case`${H.KeyringEvent.AccountBalancesUpdated}`:return $(this,n,"m",b).call(this,e,t);case`${H.KeyringEvent.AccountAssetListUpdated}`:return $(this,n,"m",w).call(this,e,t);case`${H.KeyringEvent.AccountTransactionsUpdated}`:return $(this,n,"m",v).call(this,e,t);default:throw new Error(`Method not supported: ${t.method}`)}}async serialize(){return{accounts:$(this,a,"f").toObject()}}async deserialize(e){if(e===undefined)return;const t={};for(const[r,n]of Object.entries(e.accounts))(0,Z.isAccountV1)(n.account)?(console.info(`SnapKeyring - Found a KeyringAccountV1, migrating to V2: ${n.account.id}`),t[r]={...n,account:(0,Z.migrateAccountV1)(n.account)}):t[r]=n;D(this,a,te.SnapIdMap.fromObject(t),"f")}async getAccounts(){return(0,ne.unique)([...$(this,a,"f").values()].map((({account:e})=>ie(e))))}async getAccountsBySnapId(e){return(0,ne.unique)([...$(this,a,"f").values()].filter((({snapId:t})=>t===e)).map((({account:e})=>ie(e))))}async createAccount(e,t,r){const n=new F.KeyringInternalSnapClient({messenger:$(this,s,"f"),snapId:e}),i="metamask";if((0,V.hasProperty)(t,i))throw new Error(`The '${i}' property is reserved for internal use`);if(!r)return await n.createAccount(t);const a=(0,z.v4)();return $(this,c,"f").set(a,{snapId:e,options:r}),await n.createAccount({...t,metamask:{correlationId:a}})}hasSnapId(e){return $(this,a,"f").hasSnapId(e)}async resolveAccountAddress(e,t,r){if(!this.hasSnapId(e))throw new Error(`Unable to resolve account address: unknown Snap ID: ${e}`);return await $(this,i,"f").withSnapId(e).resolveAccountAddress(t,r)}async submitRequest({origin:e,account:t,method:r,params:s,scope:i}){const{account:a,snapId:o}=$(this,n,"m",k).call(this,t);return await $(this,n,"m",_).call(this,{origin:e,snapId:o,account:a,method:r,params:s,scope:i,noPending:!0})}async signTransaction(e,t,r={}){const s=t.common.chainId(),i=(0,ne.toJson)({...t.toJSON(),from:e,type:`0x${t.type.toString(16)}`,chainId:(0,V.bigIntToHex)(s)}),a=await $(this,n,"m",E).call(this,{origin:"metamask",address:e,method:H.EthMethod.SignTransaction,params:[i],scope:(0,V.toCaipChainId)(V.KnownCaipNamespace.Eip155,`${s}`)}),o=(0,q.mask)(a,(0,q.object)({r:(0,q.string)(),s:(0,q.string)(),v:(0,q.string)()}));return L.TransactionFactory.fromTxData({...i,r:o.r,s:o.s,v:o.v})}async signTypedData(e,t,r={version:U.SignTypedDataVersion.V1}){const s={[U.SignTypedDataVersion.V1]:H.EthMethod.SignTypedDataV1,[U.SignTypedDataVersion.V3]:H.EthMethod.SignTypedDataV3,[U.SignTypedDataVersion.V4]:H.EthMethod.SignTypedDataV4}[r.version]||H.EthMethod.SignTypedDataV1,i=t.domain?.chainId;return(0,G.strictMask)(await $(this,n,"m",E).call(this,{origin:"metamask",address:e,method:s,params:(0,ne.toJson)([e,t]),...i===undefined?{}:{scope:(0,V.toCaipChainId)(V.KnownCaipNamespace.Eip155,`${i}`)}}),H.EthBytesStruct)}async signMessage(e,t){return(0,G.strictMask)(await $(this,n,"m",E).call(this,{origin:"metamask",address:e,method:H.EthMethod.Sign,params:(0,ne.toJson)([e,t])}),H.EthBytesStruct)}async signPersonalMessage(e,t){return(0,G.strictMask)(await $(this,n,"m",E).call(this,{origin:"metamask",address:e,method:H.EthMethod.PersonalSign,params:(0,ne.toJson)([t,e])}),H.EthBytesStruct)}async prepareUserOperation(e,t,r){return(0,G.strictMask)(await $(this,n,"m",E).call(this,{origin:"metamask",address:e,method:H.EthMethod.PrepareUserOperation,params:(0,ne.toJson)(t),noPending:!0,scope:(0,V.toCaipChainId)(V.KnownCaipNamespace.Eip155,r.chainId)}),H.EthBaseUserOperationStruct)}async patchUserOperation(e,t,r){return(0,G.strictMask)(await $(this,n,"m",E).call(this,{origin:"metamask",address:e,method:H.EthMethod.PatchUserOperation,params:(0,ne.toJson)([t]),noPending:!0,scope:(0,V.toCaipChainId)(V.KnownCaipNamespace.Eip155,r.chainId)}),H.EthUserOperationPatchStruct)}async signUserOperation(e,t,r){return(0,G.strictMask)(await $(this,n,"m",E).call(this,{origin:"metamask",address:e,method:H.EthMethod.SignUserOperation,params:(0,ne.toJson)([t]),scope:(0,V.toCaipChainId)(V.KnownCaipNamespace.Eip155,r.chainId)}),H.EthBytesStruct)}exportAccount(e){throw new Error("Exporting accounts from snaps is not supported.")}async removeAccount(e){const{account:t,snapId:r}=$(this,n,"m",B).call(this,e);await $(this,n,"m",x).call(this,r,t)}getAccountByAddress(e){return this.listAccounts().find((({address:t})=>(0,ne.equalsIgnoreCase)(t,e)))}listAccounts(){return[...$(this,a,"f").values()].map((({account:e,snapId:t})=>{const r=$(this,n,"m",N).call(this,t);return{...e,address:ie(e),metadata:{name:"",importTime:0,keyring:{type:this.type},...r!==undefined&&{snap:r}}}}))}}r.SnapKeyring=ae,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,n=new WeakSet,l=function(e){return(0,se.getKeyringVersionFromPlatform)((t=>$(this,s,"f").call("SnapController:isMinimumPlatformVersion",e,t)))},d=function(e,t){if(t){const r=$(this,c,"f").pop(e,t);if(r)return r.options;console.warn(`SnapKeyring - Received unmapped correlation ID: "${t}"`)}return undefined},h=async function(e,t){(0,q.assert)(t,Q.AccountCreatedEventStruct);const{metamask:r,account:s,accountNameSuggestion:i,displayAccountNameSuggestion:o,displayConfirmation:c}=t.params,l=(0,Y.transformAccount)(s),h=ie(l);if(await $(this,u,"f").addressExists(h))throw new Error(`Account address '${h}' already exists`);if($(this,a,"f").has(e,l.id))throw new Error(`Account '${l.id}' already exists`);const f=new J.DeferredPromise;return await $(this,u,"f").addAccount(h,e,(async t=>{t&&($(this,a,"f").set(l.id,{account:l,snapId:e}),$(this,u,"f").saveState().then((()=>{f.resolve(l.id)})).catch((async t=>{await $(this,n,"m",x).call(this,e,l),f.reject(t)})))}),f.promise,i,(0,ee.getInternalOptionsOf)([$(this,n,"m",d).call(this,e,r?.correlationId)??{},{displayConfirmation:c,displayAccountNameSuggestion:o}])),null},f=async function(e,t){(0,q.assert)(t,Q.AccountUpdatedEventStruct);const{account:r}=t.params,{account:n}=$(this,a,"f").get(e,r.id)??(0,ne.throwError)(`Account '${r.id}' not found`),s=(0,Y.transformAccount)(r);if(!(0,ne.equalsIgnoreCase)(n.address,s.address))throw new Error(`Cannot change address of account '${s.id}'`);return $(this,a,"f").set(s.id,{account:s,snapId:e}),await $(this,u,"f").saveState(),null},p=async function(e,t){(0,q.assert)(t,Q.AccountDeletedEventStruct);const{id:r}=t.params,n=$(this,a,"f").get(e,r);if(n===undefined)return null;const{account:s}=n;return await $(this,u,"f").removeAccount(ie(s),e,(async e=>{e&&await $(this,u,"f").saveState()})),null},m=async function(e,t){(0,q.assert)(t,Q.RequestApprovedEventStruct);const{id:r,result:n}=t.params,{promise:s}=$(this,o,"f").get(e,r)??(0,ne.throwError)(`Request '${r}' not found`);return $(this,o,"f").delete(e,r),s.resolve(n),null},g=async function(e,t){(0,q.assert)(t,Q.RequestRejectedEventStruct);const{id:r}=t.params,{promise:n}=$(this,o,"f").get(e,r)??(0,ne.throwError)(`Request '${r}' not found`);return $(this,o,"f").delete(e,r),n.reject(new Error("Request rejected by user or snap.")),null},y=async function(e,t,r){return $(this,s,"f").publish(t,...r((r=>Object.entries(r).reduce(((r,[n,s])=>($(this,a,"f").has(e,n)?r[n]=s:console.warn(`SnapKeyring - ${t} - Found an unknown account ID "${n}" for Snap ID "${e}". Skipping.`),r)),{})))),null},b=async function(e,t){(0,q.assert)(t,H.AccountBalancesUpdatedEventStruct);const r=t.params;return $(this,n,"m",y).call(this,e,"SnapKeyring:accountBalancesUpdated",(e=>(r.balances=e(r.balances),[r])))},w=async function(e,t){(0,q.assert)(t,H.AccountAssetListUpdatedEventStruct);const r=t.params;return $(this,n,"m",y).call(this,e,"SnapKeyring:accountAssetListUpdated",(e=>(r.assets=e(r.assets),[r])))},v=async function(e,t){(0,q.assert)(t,H.AccountTransactionsUpdatedEventStruct);const r=t.params;return $(this,n,"m",y).call(this,e,"SnapKeyring:accountTransactionsUpdated",(e=>(r.transactions=e(r.transactions),[r])))},k=function(e){const t=[...$(this,a,"f").values()].find((t=>t.account.id===e));if(!t)throw new Error(`Unable to get account: unknown account ID: '${e}'`);return t},E=async function({origin:e,address:t,method:r,params:s,scope:i="",noPending:a=!1}){const{account:o,snapId:c}=$(this,n,"m",B).call(this,t);return await $(this,n,"m",_).call(this,{origin:e,snapId:c,account:o,method:r,params:s,scope:i,noPending:a})},T=async function({snapId:e,version:t,request:r}){const n=$(this,i,"f").withSnapId(e);return t===K.KeyringVersion.V1?await n.submitRequestV1((0,K.toKeyringRequestV1)(r)):await n.submitRequest(r)},_=async function({origin:e,snapId:t,account:r,method:s,params:i,scope:a,noPending:o}){if(!$(this,n,"m",A).call(this,r,s))throw new Error(`Method '${s}' not supported for account ${r.address}`);if(!e?.trim())throw new Error("An `origin` is required");const c=(0,z.v4)(),u=$(this,n,"m",S).call(this,c,t);try{const d=$(this,n,"m",l).call(this,t),h={id:c,origin:e,scope:a,account:r.id,request:{method:s,...i!==undefined&&{params:i}}};(0,X.projectLogger)("Submit Snap request: ",h);const f=await $(this,n,"m",T).call(this,{version:d,snapId:t,request:h});if(o&&f.pending)throw new Error(`Request '${c}' to Snap '${t}' is pending and noPending is true.`);return f.pending?((f.redirect?.message||f.redirect?.url)&&await $(this,n,"m",I).call(this,f.redirect,t),u.promise):$(this,n,"m",M).call(this,f,c,t)}catch(e){throw(0,X.projectLogger)("Snap Request failed: ",{requestId:c}),$(this,n,"m",P).call(this,c,t),e}},A=function(e,t){return e.methods.includes(t)},S=function(e,t){const r=new J.DeferredPromise;return $(this,o,"f").set(e,{promise:r,snapId:t}),r},P=function(e,t){$(this,o,"f").delete(t,e)},M=function(e,t,r){return $(this,o,"f").delete(r,t),e.result},I=async function(e,t){const{message:r="",url:s=""}=e,i=$(this,n,"m",C).call(this,s);i&&$(this,n,"m",j).call(this,i,t),await $(this,u,"f").redirectUser(t,i,r)},C=function(e){return e?(0,ne.sanitizeUrl)(e):e},j=function(e,t){const{origin:r}=new URL(e),s=$(this,n,"m",O).call(this,t);if(!s)throw new Error(`Snap '${t}' not found.`);if(!$(this,n,"m",R).call(this,s).includes(r))throw new Error(`Redirect URL domain '${r}' is not an allowed origin by snap '${t}'`)},x=async function(e,t){$(this,a,"f").delete(e,t.id);try{await $(this,i,"f").withSnapId(e).deleteAccount(t.id)}catch(r){console.error(`Account '${t.address}' may not have been removed from snap '${e}':`,r)}},B=function(e){return[...$(this,a,"f").values()].find((({account:t})=>(0,ne.equalsIgnoreCase)(t.address,e)))??(0,ne.throwError)(`Account '${e}' not found`)},O=function(e){return $(this,s,"f").call("SnapController:get",e)},N=function(e){const t=$(this,n,"m",O).call(this,e);return t?{id:e,name:t.manifest.proposedName,enabled:t.enabled}:undefined},R=function(e){return e.manifest.initialPermissions["endowment:keyring"]?.allowedOrigins??[]},ae.type=r.SNAP_KEYRING_TYPE}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapKeyring.cjs"}],[1845,{"./migrations/index.cjs":1849,"@metamask/keyring-api":2046,"@metamask/superstruct":2947},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringAccountV1Struct=void 0,r.assertKeyringAccount=a,r.transformAccount=function(e){return a((0,i.isAccountV1)(e)?(0,i.transformAccountV1)(e):e)};const n=e("@metamask/keyring-api"),s=e("@metamask/superstruct"),i=e("./migrations/index.cjs");function a(e){switch(e.type){case n.BtcAccountType.P2pkh:return(0,s.assert)(e,n.BtcP2pkhAccountStruct),e;case n.BtcAccountType.P2sh:return(0,s.assert)(e,n.BtcP2shAccountStruct),e;case n.BtcAccountType.P2wpkh:return(0,s.assert)(e,n.BtcP2wpkhAccountStruct),e;case n.BtcAccountType.P2tr:return(0,s.assert)(e,n.BtcP2trAccountStruct),e;case n.SolAccountType.DataAccount:return(0,s.assert)(e,n.SolDataAccountStruct),e;case n.EthAccountType.Erc4337:return(0,s.assert)(e,n.EthErc4337AccountStruct),e;case n.EthAccountType.Eoa:return(0,s.assert)(e,n.EthEoaAccountStruct),e;default:throw new Error(`Unknown account type: '${e.type}'`)}}r.KeyringAccountV1Struct=(0,s.omit)(n.KeyringAccountStruct,["scopes"])}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/account.cjs"}]],[],{});