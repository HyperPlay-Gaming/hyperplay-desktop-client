LavaPack.loadBundle([[6803,{"../../../shared/modules/hexstring-utils":5788},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.IconFactory=void 0,n.default=function(e){s||(s=new o(e));return s};var r=e("../../../shared/modules/hexstring-utils");function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t=i){a(this,"jazzicon",void 0),a(this,"generateSeed",void 0),a(this,"cache",void 0),this.jazzicon=e,this.generateSeed=t,this.cache={}}iconForAddress(e,t,n){return function(e,t){if(null==t||!t.iconUrl)return!1;return(0,r.isValidHexAddress)(e,{allowNonPrefixed:!1})}(e,n)?function(e){const t=document.createElement("img");return t.src=e.iconUrl,t.style.width="100%",t}(n):this.generateIdenticonSvg(e,t)}generateIdenticonSvg(e,t){const n=`${e}:${t}`;return(this.cache[n]||(this.cache[n]=this.generateNewIdenticon(e,t))).cloneNode(!0)}generateNewIdenticon(e,t){const n=this.generateSeed(e);return this.jazzicon(t,n)}}let s;function i(e){const t=e.slice(2,10);return parseInt(t,16)}n.IconFactory=o}}},{package:"$root$",file:"ui/helpers/utils/icon-factory.ts"}],[6805,{"../../../shared/constants/metametrics":5730,"../../../shared/constants/security-provider":5741,"../../../shared/lib/transactions-controller-utils":5775,"@metamask/transaction-controller":2905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatAccountType=function(e){if("default"===e)return"metamask";return e},n.generateSignatureUniqueId=function(e){return`signature-${e}`},n.getBlockaidMetricsProps=void 0,n.getMethodName=function(e){if(!e||"string"!=typeof e)return"";return e.replace(/([a-z])([A-Z])/gu,"$1 $2").replace(/([A-Z])([a-z])/gu," $1$2").replace(/ +/gu," ")},n.getSwapAndSendMetricsProps=void 0;var r=e("@metamask/transaction-controller"),a=e("../../../shared/constants/security-provider"),o=e("../../../shared/constants/metametrics"),s=e("../../../shared/lib/transactions-controller-utils");n.getBlockaidMetricsProps=({securityAlertResponse:e})=>{if(!e)return{};const t={},{providerRequestsCount:n,reason:r,result_type:s,description:i,source:c}=e,u=(e=>{let t;return e===a.BlockaidResultType.Malicious?t=[o.MetaMetricsEventUiCustomization.FlaggedAsMalicious]:e===a.BlockaidResultType.Warning?t=[o.MetaMetricsEventUiCustomization.FlaggedAsWarning]:e===a.BlockaidResultType.Errored&&(t=[o.MetaMetricsEventUiCustomization.SecurityAlertError]),t})(s);return u&&(t.ui_customizations=u),s!==a.BlockaidResultType.Benign&&(t.security_alert_reason=r??a.BlockaidReason.notApplicable),i&&(t.security_alert_description=i),t.security_alert_response=s??a.BlockaidResultType.NotApplicable,t.security_alert_source=c,n&&Object.keys(n).forEach((e=>{t[`ppom_${e}_count`]=n[e]})),t};n.getSwapAndSendMetricsProps=e=>{if(e.type!==r.TransactionType.swapAndSend)return{};const{chainId:t,sourceTokenAmount:n,sourceTokenDecimals:a,destinationTokenAmount:o,destinationTokenDecimals:i,sourceTokenSymbol:c,destinationTokenAddress:u,destinationTokenSymbol:l,sourceTokenAddress:d}=e;return{chain_id:t,token_amount_source:n&&a?(0,s.calcTokenAmount)(n,a).toString():undefined,token_amount_dest_estimate:o&&i?(0,s.calcTokenAmount)(o,i).toString():undefined,token_symbol_source:c,token_symbol_destination:l,token_address_source:d,token_address_destination:u}}}}},{package:"$root$",file:"ui/helpers/utils/metrics.js"}],[6814,{"../../../shared/modules/environment":5783},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSnapIgnoredInProd=n.decodeSnapIdFromPathname=void 0;var r=e("../../../shared/modules/environment");n.decodeSnapIdFromPathname=e=>{var t;const n=null==e||null===(t=e.match(/[^/]+$/u))||void 0===t?void 0:t[0];return n&&decodeURIComponent(n)};const a=["npm:@metamask/preinstalled-example-snap"];n.isSnapIgnoredInProd=e=>!!(0,r.isProduction)()&&a.includes(e)}}},{package:"$root$",file:"ui/helpers/utils/snaps.ts"}],[6816,{"../../../shared/constants/transaction":5749,"../../../shared/lib/metamask-controller-utils":5766,"../../../shared/lib/transactions-controller-utils":5775,"../../../shared/modules/Numeric":5777,"../../../shared/modules/string-utils":5802,"../../../shared/modules/transaction.utils":5804,"../../store/actions":7502,"./confirm-tx.util":6797,"./util":6819,loglevel:4863},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAssetDetails=async function(e,t,n,r){var d,m,g;const p=(0,i.parseStandardTokenTransactionData)(n);if(!p)throw new Error("Unable to detect valid token data");let f=(null===(d=y(p))||void 0===d?void 0:d.toString())??(0,u.getTokenValueParam)(p);const T=_(p);let h;if(null!=r&&r.length&&f){const t=r.find((({address:t,tokenId:n})=>(0,s.isEqualCaseInsensitive)(e,t)&&n===f));if(t&&(t.name||t.symbol))return{toAddress:T,...t}}try{h=await(0,o.getTokenStandardAndDetails)(e,t,f)}catch(e){return a.default.warn(e),{toAddress:T,tokenId:f}}const S=(0,u.getTokenValueParam)(p),E=null===(m=h)||void 0===m?void 0:m.decimals,A=p&&S&&E&&(0,l.calcTokenAmount)(S,E).toString(10),I=E&&Number(null==E?void 0:E.toString(10));(null===(g=h)||void 0===g?void 0:g.standard)===c.TokenStandard.ERC20&&(f=undefined);return{tokenAmount:A,toAddress:T,decimals:I,tokenId:f,...h}},n.getSymbolAndDecimalsAndName=A,n.getTokenAddressParam=_,n.getTokenFiatAmount=function(e,t,n,r,a,o=!0,s=!1){if(t<=0||!e||r===undefined||!1===r)return undefined;const i=new d.Numeric(e,10).times(new d.Numeric(t,10)).toString();let c,u=new d.Numeric(r,10);a!==n.toUpperCase()&&i&&(u=u.applyConversionRate(i));u=u.round(2).toString(),c=s&&o?(0,g.formatCurrency)(u,n):o?`${(0,g.formatCurrency)(u,n)} ${n.toUpperCase()}`:u;return c},n.getTokenIdParam=y,n.getTokenMetadata=T,n.tokenInfoGetter=function(){const e={};return async(t,n)=>(e[t]||(e[t]=await A(t,n)),e[t])};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("../../store/actions"),s=e("../../../shared/modules/string-utils"),i=e("../../../shared/modules/transaction.utils"),c=e("../../../shared/constants/transaction"),u=e("../../../shared/lib/metamask-controller-utils"),l=e("../../../shared/lib/transactions-controller-utils"),d=e("../../../shared/modules/Numeric"),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(e("./util")),g=e("./confirm-tx.util");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const f="";function T(e,t){return e&&t[e.toLowerCase()]}async function h(e,t){let n=await async function(e){const t=m.getContractAtAddress(e);try{return"0x"===await t.provider.getCode(e)?"":await t.symbol()}catch(t){return a.default.warn(`symbol() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=T(e,t);r&&(n=r.symbol)}return n}async function S(e,t){let n=await async function(e){const t=m.getContractAtAddress(e);try{return"0x"===await t.provider.getCode(e)?"":await t.name()}catch(t){return a.default.warn(`name() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=T(e,t);r&&(n=r.name)}return n}async function E(e,t){let n=await async function(e){const t=m.getContractAtAddress(e);try{if("0x"===await t.provider.getCode(e))return"0";const n=await t.decimals();return null==n?void 0:n.toString()}catch(t){return a.default.warn(`decimals() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n||"0"===n){const a=T(e,t);var r;if(a)n=null===(r=a.decimals)||void 0===r?void 0:r.toString()}return n}async function A(e,t){let n,r,o;try{const a=(await Promise.allSettled([h(e,t),E(e,t),S(e,t)])).filter((e=>"fulfilled"===e.status)).map((e=>e.value));[n,r,o]=a}catch(t){a.default.warn(`symbol() and decimal() and name() calls for token at address ${e} resulted in error:`,t)}return{symbol:n||f,decimals:r,name:o}}function _(e={}){var t,n,r;const a=(null==e||null===(t=e.args)||void 0===t?void 0:t._to)||(null==e||null===(n=e.args)||void 0===n?void 0:n.to)||(null==e||null===(r=e.args)||void 0===r?void 0:r[0]);return null==a?void 0:a.toString().toLowerCase()}function y(e={}){var t,n;return(null==e||null===(t=e.args)||void 0===t||null===(t=t._tokenId)||void 0===t?void 0:t.toString())??(null==e||null===(n=e.args)||void 0===n||null===(n=n.id)||void 0===n?void 0:n.toString())}}}},{package:"$root$",file:"ui/helpers/utils/token-util.js"}],[6817,{"../../../app/scripts/lib/util":187,"../../../shared/constants/transaction":5749,"../../../shared/modules/contract-utils":5781,"@metamask/transaction-controller":2905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFourBytePrefix=function(e=""){const t=(0,a.addHexPrefix)(e);return t.slice(0,10)},n.getLatestSubmittedTxWithNonce=function(e=[],t="0x0"){if(!e.length)return{};return e.reduce(((e,n)=>{const{submittedTime:r,txParams:{nonce:a}={}}=n;return a===t?e.submittedTime?r>e.submittedTime?n:e:n:e}),{})},n.getStatusKey=function(e){const{txReceipt:{status:t}={},type:n,status:a}=e;if("0x0"===t)return r.TransactionStatus.failed;if(a===r.TransactionStatus.confirmed&&n===r.TransactionType.cancel)return o.TransactionGroupStatus.cancelled;return e.status},n.getTransactionTypeTitle=function(e,t,n="ETH"){switch(t){case r.TransactionType.tokenMethodTransfer:return e("transfer");case r.TransactionType.tokenMethodTransferFrom:return e("transferFrom");case r.TransactionType.tokenMethodSafeTransferFrom:return e("safeTransferFrom");case r.TransactionType.tokenMethodApprove:return e("approve");case r.TransactionType.tokenMethodSetApprovalForAll:return e("setApprovalForAll");case r.TransactionType.tokenMethodIncreaseAllowance:return e("approveIncreaseAllowance");case r.TransactionType.simpleSend:return e("sendingNativeAsset",[n]);case r.TransactionType.contractInteraction:case r.TransactionType.batch:case r.TransactionType.revokeDelegation:return e("contractInteraction");case r.TransactionType.deployContract:return e("contractDeployment");case r.TransactionType.swap:return e("swap");case r.TransactionType.swapAndSend:return e("swapAndSend");case r.TransactionType.swapApproval:return e("swapApproval");default:throw new Error(`Unrecognized transaction type: ${t}`)}},n.isLegacyTransaction=function(e){return(null==e?void 0:e.type)===r.TransactionEnvelopeType.legacy},n.isSmartContractAddress=async function(e){const{isContractAddress:t}=await(0,s.readAddressAsContract)(global.ethereumProvider,e);return t},n.isTokenMethodAction=function(e){return[r.TransactionType.tokenMethodTransfer,r.TransactionType.tokenMethodApprove,r.TransactionType.tokenMethodSetApprovalForAll,r.TransactionType.tokenMethodTransferFrom,r.TransactionType.tokenMethodSafeTransferFrom,r.TransactionType.tokenMethodIncreaseAllowance].includes(e)};var r=e("@metamask/transaction-controller"),a=e("../../../app/scripts/lib/util"),o=e("../../../shared/constants/transaction"),s=e("../../../shared/modules/contract-utils")}}},{package:"$root$",file:"ui/helpers/utils/transactions.util.js"}],[6818,{"./util":6819,loglevel:4863},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,s,i){a.default.debug("tx-helper called with params:"),a.default.debug({unapprovedTxs:e,personalMsgs:t,decryptMsgs:n,encryptionPublicKeyMsgs:r,typedMessages:s,chainId:i});const c=i?(0,o.valuesFor)(e).filter((e=>e.chainId===i)):(0,o.valuesFor)(e),u=(0,o.valuesFor)(t),l=(0,o.valuesFor)(n),d=(0,o.valuesFor)(r),m=(0,o.valuesFor)(s),g=c.concat(u).concat(l).concat(d).concat(m).sort(((e,t)=>e.time-t.time));return a.default.debug(`tx helper found ${c.length} unapproved txs`),a.default.debug(`tx helper found ${u.length} unsigned personal messages`),a.default.debug(`tx helper found ${l.length} decrypt requests`),a.default.debug(`tx helper found ${d.length} encryptionPublicKey requests`),a.default.debug(`tx helper found ${m.length} unsigned typed messages`),g};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("./util")}}},{package:"$root$",file:"ui/helpers/utils/tx-helper.ts"}],[6819,{"../../../app/scripts/lib/multichain/address":128,"../../../shared/constants/labels":5728,"../../../shared/constants/network":5734,"../../../shared/lib/accounts":5754,"../../../shared/modules/Numeric":5777,"../../../shared/modules/conversion.utils":5782,"../../../shared/modules/error":5784,"../../../shared/modules/hexstring-utils":5788,"../../../shared/modules/string-utils":5802,"../constants/common":6768,"../constants/routes":6776,"@ethersproject/contracts":507,"@ethersproject/providers":545,"@metamask/assets-controllers":1329,"@metamask/keyring-controller":1990,"@metamask/snaps-rpc-methods":2700,"@metamask/snaps-utils":2850,"@metamask/utils":2950,"bignumber.js":3978,"bn.js":4026,bowser:4037,buffer:4074,"human-standard-token-abi":4640,lodash:4855,luxon:4865,"punycode/punycode":5071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.IS_FLASK=void 0,n.addressSummary=function(e,t=10,n=4,r=!0){if(!e)return"";let a=(0,v.normalizeSafeAddress)(e);r||(a=(0,E.stripHexPrefix)(a));return a?`${a.slice(0,t)}...${a.slice(a.length-n)}`:"..."},n.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).gt(t,10)},n.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).gte(t,10)},n.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).lt(t,10)},n.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).lte(t,10)},n.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},n.checkTokenIdExists=void 0,n.clearClipboard=function(){window.navigator.clipboard.writeText("")},n.fetchTokenExchangeRates=void 0,n.formatBalance=function(e,t,n=!0,r="ETH"){const a=n?M(e):e.split("."),o=a[0];let s=a[1],i="None";if(t===undefined)if("0"===o){if("0"!==s){const e=s.match(/^0*(.{2})/u);e&&(s=e[0]),i=`0.${s} ${r}`}}else i=`${o}.${s.slice(0,3)} ${r}`;else s+=Array(t).join("0"),i=`${o}.${s.slice(0,t)} ${r}`;return i},n.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return i.DateTime.fromMillis(e).toFormat(t)},n.formatDateWithSuffix=function(e){const t=i.DateTime.fromMillis(1e3*e),{day:n}=t,r=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(n);return t.toFormat(`MMM d'${r}', yyyy`)},n.formatDateWithYearContext=function(e,t="MMM d",n="MMM d, y"){if(!e)return"";const r=i.DateTime.fromMillis(e),a=i.DateTime.local();return r.toFormat(a.year===r.year?t:n)},n.formatUTCDateFromUnixTimestamp=void 0,n.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},n.getAssetImageURL=async function(e,t){if(!e||"string"!=typeof e)return"";if(t&&e.startsWith("ipfs://"))try{return await(0,c.getFormattedIpfsUrl)(t,e,!0)}catch(e){return(0,S.logErrorWithMessage)(e),""}return e},n.getCalculatedTokenAmount1dAgo=n.getAvatarFallbackLetter=void 0,n.getContractAtAddress=function(e){return new f.Contract(e,a.default,new p.Web3Provider(global.ethereumProvider))},n.getFilteredSnapPermissions=n.getDedupedSnaps=void 0,n.getIsBrowserDeprecated=function(e=l.default.getParser(window.navigator.userAgent)){return e.satisfies(y.OUTDATED_BROWSER_VERSIONS)??!1},n.getRandomFileName=function(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],n=Math.floor(7*Math.random()+6);for(let r=0;r<n;r++)e+=t[Math.floor(Math.random()*t.length)];return e},n.getSnapRoute=n.getSnapName=void 0,n.getURL=D,n.getURLHost=function(e){var t;return(null===(t=D(e))||void 0===t?void 0:t.host)||""},n.getURLHostName=function(e){var t;return(null===(t=D(e))||void 0===t?void 0:t.hostname)||""},n.isAbleToRevealSrp=n.isAbleToExportAccount=n.hexToText=void 0,n.isDefaultMetaMaskChain=function(e){if(!e||e===h.CHAIN_IDS.MAINNET||e===h.CHAIN_IDS.LINEA_MAINNET||e===h.CHAIN_IDS.GOERLI||e===h.CHAIN_IDS.SEPOLIA||e===h.CHAIN_IDS.LINEA_GOERLI||e===h.CHAIN_IDS.LINEA_SEPOLIA||e===h.CHAIN_IDS.LOCALHOST)return!0;return!1},n.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const n of t)if(e.startsWith(n))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},n.isIpAddress=void 0,n.isNullish=function(e){return null===e||e===undefined},n.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},n.isValidDomainName=function(e){return null!==r.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},n.numericBalance=R,n.parseBalance=M,n.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return new _.Numeric(new _.Numeric(e,10).toFixed(t),10).toNumber()},n.sanitizeString=n.sanitizeMessage=void 0,n.shortenAddress=function(e=""){return b(e,{truncatedCharLimit:A.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:A.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:A.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1})},n.shortenString=b,n.sortSelectedInternalAccounts=function(e){return e.sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)))},n.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},n.stripHttpsScheme=P,n.stripHttpsSchemeWithoutPort=function(e){if(D(e).port)return e;return P(e)},n.transformOriginToTitle=n.toHumanReadableTime=n.stripOneLayerofNesting=void 0,n.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var r=O(e("punycode/punycode")),a=O(e("human-standard-token-abi")),o=O(e("bignumber.js")),s=O(e("bn.js")),i=e("luxon"),c=e("@metamask/assets-controllers"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(e("lodash")),l=O(e("bowser")),d=e("@metamask/snaps-rpc-methods"),m=e("@metamask/snaps-utils"),g=e("@metamask/utils"),p=e("@ethersproject/providers"),f=e("@ethersproject/contracts"),T=e("@metamask/keyring-controller"),h=e("../../../shared/constants/network"),S=e("../../../shared/modules/error"),E=e("../../../shared/modules/hexstring-utils"),A=e("../../../shared/constants/labels"),_=e("../../../shared/modules/Numeric"),y=e("../constants/common"),I=e("../../../shared/modules/string-utils"),k=e("../../../shared/modules/conversion.utils"),N=e("../constants/routes"),v=e("../../../app/scripts/lib/multichain/address"),C=e("../../../shared/lib/accounts");function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(e){return e&&e.__esModule?e:{default:e}}function R(e){if(!e)return new s.default(0,16);const t=(0,E.stripHexPrefix)(e);return new s.default(t,16)}function M(e){let t;const n=R(e),r=n.toString(),a=r.length>18?r.slice(0,r.length-18):"0";return t=`000000000000000000${n}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[a,t]}function b(e="",{truncatedCharLimit:t,truncatedStartChars:n,truncatedEndChars:r,skipCharacterInEnd:a}={truncatedCharLimit:A.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:A.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:A.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1}){return e.length<t?e:`${e.slice(0,n)}...${a?"":e.slice(-r)}`}function P(e){return e.replace(/^https:\/\//u,"")}function D(e){try{return new URL(e)}catch(e){return""}}n.formatUTCDateFromUnixTimestamp=e=>e?i.DateTime.fromSeconds(e).toUTC().toFormat("dd LLLL yyyy, HH:mm"):e;n.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const n=Math.ceil(t/1e3);return n<=90?e("gasTimingSecondsShort",[n]):n<=5400?e("gasTimingMinutesShort",[Math.ceil(n/60)]):e("gasTimingHoursShort",[Math.ceil(n/3600)])};const B=(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),n=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),r=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),a=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),o=Array.from(new Array(80)).map(((e,t)=>r.map((e=>`${e}x${t+1}`)))),s=Array.from(new Array(80)).map(((e,t)=>a.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...n,...o.flat(),...s.flat()]})(),L=e=>e.replace(/\[(\d*)\]/u,"");n.stripOneLayerofNesting=L;const F=(e,t,n)=>{if(!n)throw new Error("Invalid types definition");const r=t&&null!==t.match(/\[[[0-9]*\]*/u);var a;if(r)return{value:e.map((e=>F(e,L(t),n))),type:t};if(a=t,B.includes(a))return{value:e,type:t};const o=r?(e=>e.replace(/\[[[0-9]*\]*/gu,""))(t):t,s=n[o];if(!s)throw new Error("Invalid primary type definition");const i={};return Object.keys(e).forEach((t=>{const r=Object.values(s).find((e=>e.name===t));r&&(i[t]=F(e[t],r.type,n))})),{value:i,type:t}};n.sanitizeMessage=F;n.getSnapName=e=>t=>{var n;return(null===(n=e[t])||void 0===n?void 0:n.name)??(0,m.stripSnapPrefix)(t)};n.getSnapRoute=e=>`${N.SNAPS_VIEW_ROUTE}/${encodeURIComponent(e)}`;n.getDedupedSnaps=(e,t)=>{var n,r;const a=null==e||null===(n=e.permissions)||void 0===n?void 0:n[d.WALLET_SNAP_PERMISSION_KEY],o=null==a?void 0:a.caveats[0].value,s=null==t||null===(r=t[d.WALLET_SNAP_PERMISSION_KEY])||void 0===r?void 0:r.caveats[0].value;if(!(0,g.isObject)(s)&&o)return Object.keys(o);const i=o?Object.keys(o):[],c=s?Object.keys(s):[],u=i.filter((e=>!c.includes(e)));return u.length>0?u:i};n.IS_FLASK=!1;n.sanitizeString=e=>{if(!e)return e;if(!u.isString(e))return e;return e.replace(/\u202E/giu,"\\u202E")};n.isAbleToExportAccount=(e="")=>!e.includes("Hardware")&&!e.includes("Snap");n.isAbleToRevealSrp=(e,t)=>{const{metadata:{keyring:{type:n},snap:r},options:{entropySource:a}}=e;if(n===T.KeyringTypes.hd)return!0;if(n===T.KeyringTypes.snap&&(0,C.isMultichainWalletSnap)(null==r?void 0:r.id)&&a){const e=a;return t.some((t=>t.type===T.KeyringTypes.hd&&t.metadata.id===e))}return!1};n.checkTokenIdExists=(e,t,n)=>{const r=(0,g.isStrictHexString)(t);let a=t;r&&(a=(0,k.hexToDecimal)(t));const o=(0,E.toChecksumHexAddress)(e);if(n[o]){const e=n[o];return u.some(e.nfts,(e=>e.address===o&&((0,I.isEqualCaseInsensitive)(e.tokenId,t)||(0,I.isEqualCaseInsensitive)(e.tokenId,a.toString()))))}return!1};n.fetchTokenExchangeRates=async(e,t,n)=>{try{return await(0,c.fetchTokenContractExchangeRates)({tokenPricesService:new c.CodefiTokenPricesServiceV2,nativeCurrency:e,tokenAddresses:t,chainId:n})}catch(e){return{}}};n.hexToText=e=>{if(!e)return e;try{const n=(0,E.stripHexPrefix)(e),r=t.from(n,"hex");return 32===r.length?e:r.toString("utf8")}catch(t){return e}};n.getAvatarFallbackLetter=e=>{var t;return(null==e||null===(t=e.match(/[a-z0-9]/iu))||void 0===t?void 0:t[0])??"?"};const U=e=>"string"==typeof e&&Boolean(e.match(/^(\d{1,3}\.){3}\d{1,3}$|^\[[0-9a-f:]+\]$/iu));n.isIpAddress=U;n.transformOriginToTitle=e=>{try{const t=new URL(e);if(U(t.hostname))return t.hostname;return t.hostname.split(".").slice(-2).join(".")}catch(e){return"Unknown Origin"}};n.getFilteredSnapPermissions=(e,t=Infinity,n=3)=>{const r=e.filter((e=>e.weight<=t));if(n&&r.length<n){const a=e.filter((e=>e.weight>t));return r.concat(a.slice(0,n-r.length))}return r};n.getCalculatedTokenAmount1dAgo=(e,t)=>t!==undefined&&e?e/(1+t/100):e??0}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/helpers/utils/util.js"}],[6824,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ActionType=void 0;n.ActionType=function(e){return e.CROSSCHAIN_V1="crosschain-v1",e.SWAPBRIDGE_V1="swapbridge-v1",e}({})}}},{package:"$root$",file:"ui/hooks/bridge/events/types.ts"}],[6870,{"../../shared/constants/common":5721,"../../shared/constants/network":5734,"../../shared/modules/Numeric":5777,"../../shared/modules/conversion.utils":5782,"../ducks/metamask/metamask":6758,"../helpers/utils/confirm-tx.util":6797,"../helpers/utils/token-util":6816,"../selectors/multichain":7489,"./useMultichainSelector":6888,"bignumber.js":3978,react:5259},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MIN_AMOUNT=n.DEFAULT_PRECISION=void 0,n.useCurrencyDisplay=function(e,{account:t,displayValue:n,prefix:r,numberOfDecimals:o,denomination:f,currency:S,isAggregatedFiatOverviewBalance:E,...A},_=null){const y=(0,p.useMultichainSelector)(i.getMultichainIsEvm,t),I=(0,p.useMultichainSelector)(i.getMultichainCurrentCurrency,t),k=(0,p.useMultichainSelector)(i.getMultichainNativeCurrency,t),N=(0,p.useMultichainSelector)(i.getMultichainConversionRate,t),v=(0,p.useMultichainSelector)(g.getCurrencyRates,t),C=S===I,w=S===k||S===u.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[_],O=(0,a.useMemo)((()=>{return n||(y||E?E?(0,s.formatCurrency)(e,S):function({isNativeCurrency:e,isUserPreferredCurrency:t,currency:n,nativeCurrency:r,inputValue:a,conversionRate:o,denomination:i,numberOfDecimals:u}){if(e||!t&&!r){const e=new l.Numeric(a,16,d.EtherDenomination.WEI).toDenomination(i||d.EtherDenomination.ETH).round(u||h).toBase(10).toString();return"0"===e&&a&&0!==Number(a)?T:e}if(t&&o)return(0,s.formatCurrency)((0,c.getValueFromWeiHex)({value:a,fromCurrency:r,toCurrency:n,conversionRate:o,numberOfDecimals:u||2,toDenomination:i}),n);return null}({isNativeCurrency:w,isUserPreferredCurrency:C,currency:S,nativeCurrency:k,inputValue:e,conversionRate:N,denomination:f,numberOfDecimals:o}):function({tokenSymbol:e,isNativeCurrency:t,isUserPreferredCurrency:n,currency:r,currentCurrency:a,nativeCurrency:o,inputValue:i,conversionRate:c}){if(t||!n&&!o)return new l.Numeric(i,10).toString();if(n&&c){const t=(0,m.getTokenFiatAmount)(1,Number(c),a,i,e,!1,!1)??"0";return(0,s.formatCurrency)(t,r)}return null}({tokenSymbol:k,isNativeCurrency:w,isUserPreferredCurrency:C,currency:S,currentCurrency:I,nativeCurrency:k,inputValue:e,conversionRate:_?null==v||null===(t=v[u.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[_]])||void 0===t?void 0:t.conversionRate:N}));var t}),[n,y,w,C,S,k,e,N,f,o,I,E,_,v]);let R;if(!A.hideLabel){const e=Object.values(u.TEST_NETWORK_TICKER_MAP).includes(S)?S:null==S?void 0:S.toUpperCase();R=A.suffix||e}return[`${r||""}${O}${R?` ${R}`:""}`,{prefix:r,value:O,suffix:R}]};var r,a=e("react"),o=(r=e("bignumber.js"))&&r.__esModule?r:{default:r},s=e("../helpers/utils/confirm-tx.util"),i=e("../selectors/multichain"),c=e("../../shared/modules/conversion.utils"),u=e("../../shared/constants/network"),l=e("../../shared/modules/Numeric"),d=e("../../shared/constants/common"),m=e("../helpers/utils/token-util"),g=e("../ducks/metamask/metamask"),p=e("./useMultichainSelector");const f=n.MIN_AMOUNT=1e-6,T=`<${f}`,h=n.DEFAULT_PRECISION=new o.default(f).decimalPlaces()}}},{package:"$root$",file:"ui/hooks/useCurrencyDisplay.js"}],[6880,{"../contexts/i18n":6730,react:5259},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useI18nContext=function(){return(0,r.useContext)(a.I18nContext)};var r=e("react"),a=e("../contexts/i18n")}}},{package:"$root$",file:"ui/hooks/useI18nContext.js"}],[6888,{"../selectors":7485,"react-redux":5217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainSelector=function(e,t){return(0,r.useSelector)((n=>e(n,t||(0,a.getSelectedInternalAccount)(n))))};var r=e("react-redux"),a=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useMultichainSelector.ts"}],[69,{"@metamask/multichain":2146,"@metamask/permission-controller":2393,"@metamask/snaps-utils":2850,nanoid:4959},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPermissionBackgroundApiMethods=function({permissionController:e,approvalController:t}){const n=t=>{let n;try{n=e.getCaveat(t,o.Caip25EndowmentPermissionName,o.Caip25CaveatType)}catch(e){if(!(e instanceof a.PermissionDoesNotExistError))throw e}return n},i=(t,r)=>{const a=n(t);if(!a)throw new Error(`Cannot add account permissions for origin "${t}": no permission currently exists for this origin.`);const s=(0,o.getEthAccounts)(a.value),i=Array.from(new Set([...s,...r])),c=(0,o.setEthAccounts)(a.value,i);e.updateCaveat(t,o.Caip25EndowmentPermissionName,o.Caip25CaveatType,c)},c=(t,r)=>{const a=n(t);if(!a)throw new Error(`Cannot add chain permissions for origin "${t}": no permission currently exists for this origin.`);const s=(0,o.getPermittedEthChainIds)(a.value),i=Array.from(new Set([...s,...r])),c=(0,o.setPermittedEthChainIds)(a.value,i),u=(0,o.getEthAccounts)(c),l=(0,o.setEthAccounts)(c,u);e.updateCaveat(t,o.Caip25EndowmentPermissionName,o.Caip25CaveatType,l)};return{addPermittedAccount:(e,t)=>i(e,[t]),addPermittedAccounts:(e,t)=>i(e,t),removePermittedAccount:(t,r)=>{const a=n(t);if(!a)throw new Error(`Cannot remove account "${r}": No permissions exist for origin "${t}".`);const s=(0,o.getEthAccounts)(a.value),i=s.filter((e=>e!==r));if(i.length!==s.length)if(0===i.length)e.revokePermission(t,o.Caip25EndowmentPermissionName);else{const n=(0,o.setEthAccounts)(a.value,i);e.updateCaveat(t,o.Caip25EndowmentPermissionName,o.Caip25CaveatType,n)}},addPermittedChain:(e,t)=>c(e,[t]),addPermittedChains:(e,t)=>c(e,t),removePermittedChain:(t,r)=>{const a=n(t);if(!a)throw new Error(`Cannot remove permission for chainId "${r}": No permissions exist for origin "${t}".`);const i=(0,o.getPermittedEthChainIds)(a.value),c=i.filter((e=>e!==r));if(c.length!==i.length)if(0!==c.length||(0,s.isSnapId)(t)){const n=(0,o.setPermittedEthChainIds)(a.value,c);e.updateCaveat(t,o.Caip25EndowmentPermissionName,o.Caip25CaveatType,n)}else e.revokePermission(t,o.Caip25EndowmentPermissionName)},requestAccountsAndChainPermissionsWithId:n=>{const s=(0,r.nanoid)();return(async(n,r)=>{const{permissions:s}=await t.addAndShowApprovalRequest({id:r,origin:n,requestData:{metadata:{id:r,origin:n},permissions:{[o.Caip25EndowmentPermissionName]:{caveats:[{type:o.Caip25CaveatType,value:{requiredScopes:{},optionalScopes:{},isMultichainOrigin:!1}}]}}},type:a.MethodNames.RequestPermissions});e.grantPermissions({subject:{origin:n},approvedPermissions:s})})(n,s),s}}};var r=e("nanoid"),a=e("@metamask/permission-controller"),o=e("@metamask/multichain"),s=e("@metamask/snaps-utils")}}},{package:"$root$",file:"app/scripts/controllers/permissions/background-api.js"}],[6908,{"../../shared/modules/selectors/networks":5799,"../../shared/modules/string-utils":5802,"../ducks/metamask/metamask":6758,"../helpers/utils/token-util":6816,"../selectors":7485,react:5259,"react-redux":5217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenFiatAmount=function(e,t,n,l={},d,m=null,g=!0){var p,f;const T=(0,a.useSelector)(o.getMarketData),h=(0,a.useSelector)(o.getTokenExchangeRates,a.shallowEqual),S=m&&T[m]?Object.entries(T[m]).reduce(((e,[t,n])=>(e[t]=(null==n?void 0:n.price)??null,e)),{}):null,E=m?S:h,A=(0,a.useSelector)(o.getConfirmationExchangeRates),_={...E,...A},y=(0,a.useSelector)(o.getCurrencyRates),I=(0,a.useSelector)(c.getConversionRate),k=(0,a.useSelector)(s.getNetworkConfigurationsByChainId),N=m?null==y||null===(p=y[null===(f=k[m])||void 0===f?void 0:f.nativeCurrency])||void 0===p?void 0:p.conversionRate:I,v=(0,a.useSelector)(c.getCurrentCurrency),C=(0,a.useSelector)(o.getShouldShowFiat),w=l.showFiat??C,O=Object.keys(_).find((t=>(0,u.isEqualCaseInsensitive)(t,e))),R=l.exchangeRate??(O&&_[O]),M=(0,r.useMemo)((()=>(0,i.getTokenFiatAmount)(R,N,v,t,n,g,d)),[N,R,v,t,n,d]);if(!w||v.toUpperCase()===n)return undefined;return M};var r=e("react"),a=e("react-redux"),o=e("../selectors"),s=e("../../shared/modules/selectors/networks"),i=e("../helpers/utils/token-util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/modules/string-utils")}}},{package:"$root$",file:"ui/hooks/useTokenFiatAmount.js"}],[6968,{"../../../../shared/constants/common":5721,"../../../../shared/lib/transactions-controller-utils":5775,"../../../../shared/modules/Numeric":5777,"../../../../shared/modules/conversion.utils":5782,"../../../helpers/utils/confirm-tx.util":6797,"../../../hooks/useCurrencyDisplay":6870,"../../confirmations/components/simulation-details/formatAmount":7136,"@metamask/bridge-controller":1390,"bignumber.js":3978},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isQuoteExpired=n.formatTokenAmount=n.formatProviderLabel=n.formatEtaInMinutes=n.formatCurrencyAmount=n.calcToAmount=n.calcSwapRate=n.calcSolanaTotalNetworkFee=n.calcSentAmount=n.calcRelayerFee=n.calcEstimatedAndMaxTotalGasFee=n.calcCost=n.calcAdjustedReturn=void 0;var r=e("bignumber.js"),a=e("@metamask/bridge-controller"),o=e("../../../../shared/lib/transactions-controller-utils"),s=e("../../../../shared/modules/conversion.utils"),i=e("../../../helpers/utils/confirm-tx.util"),c=e("../../../../shared/modules/Numeric"),u=e("../../../../shared/constants/common"),l=e("../../../hooks/useCurrencyDisplay"),d=e("../../confirmations/components/simulation-details/formatAmount");n.isQuoteExpired=(e,t,n)=>Boolean(!e&&n&&Date.now()-n>t);n.calcSolanaTotalNetworkFee=(e,t,n)=>{const{solanaFeesInLamports:a}=e,s=(0,o.calcTokenAmount)(new r.BigNumber(a??"0"),9);return{amount:s,valueInCurrency:t?s.mul(t.toString()):null,usd:n?s.mul(n.toString()):null}};n.calcToAmount=({destTokenAmount:e,destAsset:t},n,r)=>{const a=(0,o.calcTokenAmount)(e,t.decimals);return{amount:a,valueInCurrency:n?a.mul(n.toString()):null,usd:r?a.mul(r.toString()):null}};n.calcSentAmount=({srcTokenAmount:e,srcAsset:t,feeData:n},a,s)=>{const i=(0,o.calcTokenAmount)(new r.BigNumber(e).plus(n.metabridge.amount),t.decimals);return{amount:i,valueInCurrency:a?i.mul(a.toString()):null,usd:s?i.mul(s.toString()):null}};n.calcRelayerFee=(e,t,n)=>{const{quote:{srcAsset:i,srcTokenAmount:c,feeData:u},trade:l}=e,d=(0,o.calcTokenAmount)(new r.BigNumber((0,s.hexToDecimal)(l.value)).minus((0,a.isNativeAddress)(i.address)?new r.BigNumber(c).plus(u.metabridge.amount):0),18);return{amount:d,valueInCurrency:t?d.mul(t.toString()):null,usd:n?d.mul(n.toString()):null}};const m=({bridgeQuote:e,feePerGasInDecGwei:t,priorityFeePerGasInDecGwei:n,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:o})=>{var i,l;const{approval:d,trade:m,l1GasFeesInHexWei:g}=e,p=(0,s.sumDecimals)((null===(i=m.gasLimit)||void 0===i?void 0:i.toString())??"0",(null==d||null===(l=d.gasLimit)||void 0===l?void 0:l.toString())??"0"),f=(0,s.sumDecimals)(t,n),T=c.Numeric.from(g??"0",16,u.EtherDenomination.WEI).toDenomination(u.EtherDenomination.GWEI),h=p.times(f).add(T),S=new r.BigNumber(h.shiftedBy(9).toString()),E=a?S.times(a.toString()):null,A=o?S.times(o.toString()):null;return{amount:S,valueInCurrency:E,usd:A}};n.calcEstimatedAndMaxTotalGasFee=({bridgeQuote:e,estimatedBaseFeeInDecGwei:t,maxFeePerGasInDecGwei:n,maxPriorityFeePerGasInDecGwei:r,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:o})=>{const{amount:s,valueInCurrency:i,usd:c}=m({bridgeQuote:e,feePerGasInDecGwei:t,priorityFeePerGasInDecGwei:r,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:o}),{amount:u,valueInCurrency:l,usd:d}=m({bridgeQuote:e,feePerGasInDecGwei:n,priorityFeePerGasInDecGwei:r,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:o});return{amount:s,amountMax:u,valueInCurrency:i,valueInCurrencyMax:l,usd:c,usdMax:d}};n.calcAdjustedReturn=(e,t)=>({valueInCurrency:e.valueInCurrency&&t.valueInCurrency?e.valueInCurrency.minus(t.valueInCurrency):null,usd:e.usd&&t.usd?e.usd.minus(t.usd):null});n.calcSwapRate=(e,t)=>t.div(e);n.calcCost=(e,t)=>({valueInCurrency:e.valueInCurrency&&t.valueInCurrency?t.valueInCurrency.minus(e.valueInCurrency):null,usd:e.usd&&t.usd?t.usd.minus(e.usd):null});n.formatEtaInMinutes=e=>e<60?"< 1":(e/60).toFixed();n.formatTokenAmount=(e,t,n="")=>[(0,d.formatAmount)(e,t),n].join(" ").trim();n.formatCurrencyAmount=(e,t,n=l.DEFAULT_PRECISION)=>{if(!e)return undefined;if(0===n){if(e.lt(.01))return"<$0.01";if(e.lt(1))return(0,i.formatCurrency)(e.toString(),t,2)}return(0,i.formatCurrency)(e.toString(),t,n)};n.formatProviderLabel=e=>`${null==e?void 0:e.bridgeId}_${null==e?void 0:e.bridges[0]}`}}},{package:"$root$",file:"ui/pages/bridge/utils/quote.ts"}],[7,{"../../../shared/modules/object.utils":5793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SENTRY_UI_STATE=n.SENTRY_BACKGROUND_STATE=n.MMI_SENTRY_BACKGROUND_STATE=void 0;var r=e("../../../shared/modules/object.utils");n.MMI_SENTRY_BACKGROUND_STATE={MMIController:{opts:!0},CustodyController:{store:!0},MmiConfigurationController:{store:!0,configurationClient:!0}};const a=n.SENTRY_BACKGROUND_STATE={AccountsController:{internalAccounts:{accounts:!1,selectedAccount:!1}},AccountTracker:{accounts:!1,accountsByChainId:!1,currentBlockGasLimit:!0,currentBlockGasLimitByChainId:!0},AddressBookController:{addressBook:!1},AlertController:{alertEnabledness:!0,unconnectedAccountAlertShownOrigins:!1,web3ShimUsageOrigins:!1},AnnouncementController:{announcements:!1},AuthenticationController:{isSignedIn:!1,sessionData:{token:{accessToken:!1,expiresIn:!0,obtainedAt:!0},profile:!0}},NetworkOrderController:{orderedNetworkList:[]},AccountOrderController:{pinnedAccountList:[],hiddenAccountList:[]},AppMetadataController:{currentAppVersion:!0,currentMigrationVersion:!0,previousAppVersion:!0,previousMigrationVersion:!0},ApprovalController:{approvalFlows:!1,pendingApprovals:!1,pendingApprovalCount:!1},AppStateController:{browserEnvironment:!0,connectedStatusPopoverHasBeenShown:!0,currentPopupId:!1,onboardingDate:!1,currentExtensionPopupId:!1,defaultHomeActiveTabName:!0,fullScreenGasPollTokens:!0,hadAdvancedGasFeesSetPriorToMigration92_3:!0,isRampCardClosed:!0,nftsDetectionNoticeDismissed:!0,nftsDropdownState:!0,notificationGasPollTokens:!0,outdatedBrowserWarningLastShown:!0,popupGasPollTokens:!0,qrHardware:!0,recoveryPhraseReminderHasBeenShown:!0,recoveryPhraseReminderLastShown:!0,showBetaHeader:!0,showPermissionsTour:!0,showNetworkBanner:!0,showAccountBanner:!0,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,showTestnetMessageInDropdown:!0,surveyLinkLastClickedOrClosed:!0,snapsInstallPrivacyWarningShown:!0,termsOfUseLastAgreed:!0,throttledOrigins:!1,timeoutMinutes:!0,trezorModel:!0},MultichainBalancesController:{balances:!1},MultichainAssetsController:{accountsAssets:!1,assetsMetadata:!1},MultichainAssetsRatesController:{assetsRates:!1},BridgeController:{bridgeFeatureFlags:{extensionConfig:{support:!1,chains:{}},mobileConfig:!1},quoteRequest:{walletAddress:!1,srcTokenAddress:!0,slippage:!0,srcChainId:!0,destChainId:!0,destTokenAddress:!0,srcTokenAmount:!0},quotes:[],quotesInitialLoadTime:!0,quotesLastFetched:!0,quotesLoadingStatus:!0,quoteFetchError:!0,quotesRefreshCount:!0},BridgeStatusController:{bridgeStatusState:{txHistory:!1}},CronjobController:{jobs:!1},CurrencyController:{currentCurrency:!0,currencyRates:!0},DecryptMessageController:{unapprovedDecryptMsgs:!1,unapprovedDecryptMsgCount:!0},EncryptionPublicKeyController:{unapprovedEncryptionPublicKeyMsgs:!1,unapprovedEncryptionPublicKeyMsgCount:!0},EnsController:{ensResolutionsByAddress:!1,ensEntries:!1},GasFeeController:{estimatedGasFeeTimeBounds:!0,gasEstimateType:!0,gasFeeEstimates:!0,gasFeeEstimatesByChainId:!0,nonRPCGasFeeApisDisabled:!1},KeyringController:{isUnlocked:!0,keyrings:!1},LoggingController:{logs:!1},NotificationServicesController:{subscriptionAccountsSeen:!1,isMetamaskNotificationsFeatureSeen:!1,isNotificationServicesEnabled:!1,isFeatureAnnouncementsEnabled:!1,metamaskNotificationsList:!1,metamaskNotificationsReadList:!1,isCheckingAccountsPresence:!1,isFetchingMetamaskNotifications:!1,isUpdatingMetamaskNotifications:!1,isUpdatingMetamaskNotificationsAccount:!1},MetaMetricsController:{eventsBeforeMetricsOptIn:!1,fragments:!1,metaMetricsId:!0,participateInMetaMetrics:!0,segmentApiCalls:!1,traits:!1,dataCollectionForMarketing:!1,marketingCampaignCookieId:!0,latestNonAnonymousEventTimestamp:!0},MetaMetricsDataDeletionController:{metaMetricsDataDeletionId:!0,metaMetricsDataDeletionTimestamp:!0},NameController:{names:!1,nameSources:!1,useExternalNameSources:!1},NetworkController:{networkConfigurations:!1,networksMetadata:!0,selectedNetworkClientId:!1},NftController:{allNftContracts:!1,allNfts:!1,ignoredNfts:!1},OnboardingController:{completedOnboarding:!0,firstTimeFlowType:!0,onboardingTabs:!1,seedPhraseBackedUp:!0},PPOMController:{securityAlertsEnabled:!1,storageMetadata:[],versionInfo:[]},PermissionController:{subjects:!1},PermissionLogController:{permissionActivityLog:!1,permissionHistory:!1},PhishingController:{},PreferencesController:{advancedGasFee:!0,currentLocale:!0,dismissSeedBackUpReminder:!0,overrideContentSecurityPolicyHeader:!0,featureFlags:!0,forgottenPassword:!0,identities:!1,incomingTransactionsPreferences:!0,isIpfsGatewayEnabled:!1,ipfsGateway:!1,knownMethodData:!1,ledgerTransportType:!0,lostIdentities:!1,openSeaEnabled:!0,preferences:{autoLockTimeLimit:!0,hideZeroBalanceTokens:!0,showExtensionInFullSizeView:!0,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,tokenNetworkFilter:{},showNativeTokenAsMainBalance:!0,showConfirmationAdvancedDetails:!0,privacyMode:!1},useExternalServices:!1,selectedAddress:!1,snapRegistryList:!1,theme:!0,signatureSecurityAlertResponses:!1,use4ByteResolution:!0,useAddressBarEnsResolution:!0,useBlockie:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,useNftDetection:!0,usePhishDetect:!0,useTokenDetection:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0},RemoteFeatureFlagController:{remoteFeatureFlags:!0,cacheTimestamp:!1},NotificationServicesPushController:{fcmToken:!1},MultichainRatesController:{fiatCurrency:!0,rates:!0,cryptocurrencies:!0},QueuedRequestController:{queuedRequestCount:!0},SelectedNetworkController:{domains:!1},SignatureController:{unapprovedPersonalMsgCount:!0,unapprovedPersonalMsgs:!1,unapprovedTypedMessages:!1,unapprovedTypedMessagesCount:!0},SmartTransactionsController:{smartTransactionsState:{fees:{approvalTxFees:!0,tradeTxFees:!0},liveness:!0,smartTransactions:!1,userOptIn:!0,userOptInV2:!0}},SnapController:{snaps:!1},SnapInterfaceController:{interfaces:!1},SnapInsightsController:{insights:!1},SnapsRegistry:{database:!1,lastUpdated:!1,databaseUnavailable:!1},SubjectMetadataController:{subjectMetadata:!1},SwapsController:{swapsState:{approveTxId:!1,customApproveTxData:!1,customGasPrice:!0,customMaxFeePerGas:!0,customMaxGas:!0,customMaxPriorityFeePerGas:!0,errorKey:!0,fetchParams:!0,quotes:!1,quotesLastFetched:!0,quotesPollingLimitEnabled:!0,routeState:!0,saveFetchedQuotes:!0,selectedAggId:!0,swapsFeatureFlags:!0,swapsFeatureIsLive:!0,swapsQuotePrefetchingRefreshTime:!0,swapsQuoteRefreshTime:!0,swapsStxBatchStatusRefreshTime:!0,swapsStxStatusDeadline:!0,swapsStxGetTransactionsRefreshTime:!0,swapsStxMaxFeeMultiplier:!0,swapsUserFeeLevel:!0,tokens:!1,topAggId:!1,tradeTxId:!1}},TokenDetectionController:{[r.AllProperties]:!1},TokenListController:{preventPollingOnNetworkRestart:!0,tokenList:!1,tokensChainsCache:{[r.AllProperties]:!1}},TokenBalancesController:{tokenBalances:!1},TokenRatesController:{marketData:!1},TokensController:{allDetectedTokens:{[r.AllProperties]:!1},allIgnoredTokens:{[r.AllProperties]:!1},allTokens:{[r.AllProperties]:!1},detectedTokens:!1,ignoredTokens:!1,tokens:!1},TransactionController:{transactions:!1,lastFetchedBlockNumbers:!1,methodData:!1},TxController:{transactions:!1},UserOperationController:{userOperations:!1},UserStorageController:{isProfileSyncingEnabled:!0,isProfileSyncingUpdateLoading:!1,hasAccountSyncingSyncedAtLeastOnce:!1,isAccountSyncingReadyToBeDispatched:!1}},o=Object.values(a).reduce(((e,t)=>({...e,...t})),{});n.SENTRY_UI_STATE={gas:!0,history:!0,appState:{customNonceValue:!0,isAccountMenuOpen:!0,isNetworkMenuOpen:!0,nextNonce:!0,pendingTokens:!1,welcomeScreenSeen:!0,slides:!1,confirmationExchangeRates:!0},metamask:{...o,isInitialized:!0,useSafeChainsListValidation:!0,watchEthereumAccountEnabled:!1,addSnapAccountEnabled:!1,snapsAddSnapAccountModalDismissed:!1,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,newPrivacyPolicyToastClickedOrClosed:!1,newPrivacyPolicyToastShownDate:!1},unconnectedAccount:!0}}}},{package:"$root$",file:"app/scripts/constants/sentry-state.ts"}],[70,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRemovedAuthorizations=n.getChangedAuthorizations=n.diffMap=void 0;n.diffMap=(e,t)=>{if(t===undefined)return e;const n=new Map;if(e===t)return n;const r=new Set([...e.keys()]);for(const a of t.keys()){const o=e.get(a)??[];o!==t.get(a)&&n.set(a,o),r.delete(a)}for(const t of r.keys())n.set(t,e.get(t));return n};n.getChangedAuthorizations=(e,t)=>{if(t===undefined)return e;const n=new Map;if(e===t)return n;const r=new Set([...e.keys()]);for(const a of t.keys()){const o=e.get(a)??{requiredScopes:{},optionalScopes:{}};t.get(a)!==o&&n.set(a,{requiredScopes:o.requiredScopes,optionalScopes:o.optionalScopes}),r.delete(a)}for(const t of r.keys())n.set(t,e.get(t));return n};n.getRemovedAuthorizations=(e,t)=>{const n=new Map;if(t===undefined||e===t)return n;for(const[r,a]of t.entries()){const t=e.get(r);if(!t){n.set(r,a);continue}const o={};Object.entries(a.requiredScopes).forEach((([e,n])=>{t.requiredScopes[e]||(o[e]=n)}));const s={};Object.entries(a.optionalScopes).forEach((([e,n])=>{t.optionalScopes[e]||(s[e]=n)})),(Object.keys(o).length>0||Object.keys(s).length>0)&&n.set(r,{requiredScopes:o,optionalScopes:s})}return n}}}},{package:"$root$",file:"app/scripts/controllers/permissions/differs.ts"}],[71,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NOTIFICATION_NAMES=void 0;n.NOTIFICATION_NAMES=function(e){return e.accountsChanged="metamask_accountsChanged",e.chainChanged="metamask_chainChanged",e.sessionChanged="wallet_sessionChanged",e}({})}}},{package:"$root$",file:"app/scripts/controllers/permissions/enums.ts"}],[7136,{"../../../../hooks/useCurrencyDisplay":6870,"bignumber.js":3978},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatAmount=function(e,t){if(t.isZero())return s;if(t.abs().lessThan(a.MIN_AMOUNT))return`<${i(e,a.MIN_AMOUNT)}`;if(t.abs().lessThan(1))return new Intl.NumberFormat(e,{maximumSignificantDigits:o}).format(t.round(a.DEFAULT_PRECISION).toNumber());const n=t.abs().truncated().toString().length,r=Math.max(0,o-n+1);return new Intl.NumberFormat(e,{maximumFractionDigits:r}).format(t.toFixed(r))},n.formatAmountMaxPrecision=i;var r=e("bignumber.js"),a=e("../../../../hooks/useCurrencyDisplay");const o=3,s="0";function i(e,t){const n=new r.BigNumber(t),a=n.decimalPlaces(),o=n.toFixed(a),[s,i]=o.split("."),c=new Intl.NumberFormat(e).format(s);return i?`${c}.${i}`:c}}}},{package:"$root$",file:"ui/pages/confirmations/components/simulation-details/formatAmount.ts"}],[7159,{"../../../components/component-library":6314,"../../../helpers/constants/design-system":6770,"./util":7184,"@metamask/controller-utils":1474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ResultTemplate=void 0;var r=e("@metamask/controller-utils"),a=e("../../../components/component-library"),o=e("../../../helpers/constants/design-system"),s=e("./util");function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var u=new WeakMap,l=new WeakSet;function d(e,t){const{error:n,header:i,icon:l,message:d,title:m}=e,g=(f=this,(p=u).get(c(p,f))===r.ApprovalType.ResultSuccess);var p,f;return[...(0,s.processHeader)(i)??[],{key:"container",element:"Box",props:{flexDirection:o.FlexDirection.Column,alignItems:o.AlignItems.center,height:o.BlockSize.Full,padding:4},children:[{key:"content",element:"Box",props:{flexDirection:o.FlexDirection.Column,alignItems:o.AlignItems.center,justifyContent:o.JustifyContent.center,height:o.BlockSize.Full,style:{alignSelf:o.AlignItems.stretch}},children:[null===l?undefined:{key:"icon",element:"AvatarIcon",props:{iconName:l??(g?a.IconName.Confirmation:a.IconName.Warning),size:a.IconSize.Xl,iconProps:{size:a.IconSize.Xl},color:g?o.IconColor.successDefault:o.IconColor.errorDefault,backgroundColor:g?o.BackgroundColor.successMuted:o.BackgroundColor.errorMuted},children:"Icon"},null===m?undefined:{key:"title",element:"Typography",props:{variant:o.TypographyVariant.H3,fontWeight:o.FontWeight.Bold},children:m??t(g?"resultPageSuccess":"resultPageError")},{key:"message",element:"Box",props:{alignItems:o.AlignItems.center,textAlign:o.TextAlign.Center,flexDirection:o.FlexDirection.Column,width:o.BlockSize.Full},children:g?(0,s.processString)(d,t("resultPageSuccessDefaultMessage")):(0,s.processError)(n,t("resultPageErrorDefaultMessage"))}]}]}]}n.ResultTemplate=class{constructor(e){var t,n;i(t=this,n=l),n.add(t),function(e,t,n){i(e,t),t.set(e,n)}(this,u,void 0),function(e,t,n){e.set(c(e,t),n)}(u,this,e)}getValues(e,t,n){return{content:c(l,this,d).call(this,e.requestData||{},t),submitText:t("ok"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData),networkDisplay:!1}}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/ResultTemplate.ts"}],[7170,{"../../../../../shared/constants/network":5734,"../../../../../shared/modules/rpc.utils":5795,"../../../../helpers/constants/design-system":6770,"../../../../helpers/constants/routes":6776,"../../../../helpers/constants/zendesk-url":6783,"../../utils/confirm":7252,"@metamask/network-controller":2176,"@metamask/rpc-errors":2554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=e("@metamask/rpc-errors"),o=e("@metamask/network-controller"),s=e("../../../../../shared/constants/network"),i=e("../../../../helpers/constants/design-system"),c=e("../../../../helpers/constants/routes"),u=(r=e("../../../../helpers/constants/zendesk-url"))&&r.__esModule?r:{default:r},l=e("../../../../../shared/modules/rpc.utils"),d=e("../../utils/confirm");const m={id:"UNRECOGNIZED_CHAIN",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"unrecognizedChain"}}}},g={id:"SAFE_CHAIN_LIST_PROVIDER_ERROR",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorGettingSafeChainList"}}}},p={id:"MISMATCHED_CHAIN_RECOMMENDATION",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainRecommendation",variables:[{element:"a",key:"mismatchedChainLink",props:{href:u.default.VERIFY_CUSTOM_NETWORK,target:"__blank",tabIndex:0},children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainLinkText"}}}]}}}},f={id:"DEPRECATED_CHAIN_ALERT",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"deprecatedNetwork"}}}},T={id:"MISMATCHED_NETWORK_NAME",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkName"}}}},h={id:"MISMATCHED_NETWORK_SYMBOL",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkSymbol"}}}},S={id:"MISMATCHED_NETWORK_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcUrl"}}}},E={id:"MISMATCHED_NETWORK_RPC_CHAIN_ID",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcChainId"}}}},A={id:"ERROR_CONNECTING_TO_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorWhileConnectingToRPC"}}}};const _={getAlerts:async function(e,t){const n=[];if("metamask"===e.origin&&Boolean(t.matchedChain))return[];if(t.matchedChain){var r,a,o,i;(null===(r=t.matchedChain.name)||void 0===r?void 0:r.toLowerCase())!==e.requestData.chainName.toLowerCase()&&n.push(T),(null===(a=t.matchedChain.nativeCurrency)||void 0===a||null===(a=a.symbol)||void 0===a?void 0:a.toLowerCase())!==(null===(o=e.requestData.ticker)||void 0===o?void 0:o.toLowerCase())&&n.push(h);const{origin:c}=new URL(e.requestData.rpcUrl);null!==(i=t.matchedChain.rpc)&&void 0!==i&&i.map((e=>new URL(e).origin)).includes(c)||n.push(S),s.DEPRECATED_NETWORKS.includes(e.requestData.chainId)&&n.push(f)}return!t.matchedChain&&t.useSafeChainsListValidation&&(t.providerError?n.push(g):n.push(m)),n.length&&n.push(p),n},getValues:function(e,t,n,r,m){var g;const p="metamask"===e.origin,f=e.requestData.rpcUrl;let T,h;return T=p?t("wantToAddThisNetwork"):m.existingNetworkConfiguration?t("updateNetworkConfirmationTitle",[m.existingNetworkConfiguration.name]):t("addNetworkConfirmationTitle",[e.requestData.chainName]),h=m.existingNetworkConfiguration?t("updateEthereumChainConfirmationDescription"):t("multichainAddEthereumChainConfirmationDescription"),{content:[{element:"Typography",key:"title",children:T,props:{variant:i.TypographyVariant.H3,align:"center",fontWeight:"bold",boxProps:{margin:[0,0,4]}}},{element:"Typography",key:"description",children:h,props:{variant:i.TypographyVariant.H6,align:"center",boxProps:{margin:p?[0,8,4]:[0,0,4]}}},{element:"OriginPill",key:"origin-pill",props:{origin:e.origin,dataTestId:"signature-origin-pill"}},{element:"TruncatedDefinitionList",key:"network-details",props:{title:t("networkDetails"),tooltips:{[t("currencySymbol")]:t("currencySymbolDefinition"),[t("networkURL")]:t("networkURLDefinition"),[t("chainId")]:t("chainIdDefinition"),[t("networkName")]:t("networkNameDefinition"),[t("blockExplorerUrl")]:t("blockExplorerUrlDefinition")},warnings:{[t("networkURL")]:!f||(0,d.isValidASCIIURL)(f)?undefined:t("networkUrlErrorWarning",[(0,d.toPunycodeURL)(f)]),[t("currencySymbol")]:m.currencySymbolWarning},dictionary:{[t("currencySymbol")]:e.requestData.ticker,[t("networkURL")]:null!==(g=f.toLowerCase())&&void 0!==g&&g.includes(`/v3/${s.infuraProjectId}`)?f.replace(`/v3/${s.infuraProjectId}`,"").toLowerCase():f.toLowerCase(),[t("chainId")]:parseInt(e.requestData.chainId,16),[t("networkName")]:e.requestData.chainName,[t("blockExplorerUrl")]:e.requestData.rpcPrefs.blockExplorerUrl},prefaceKeys:[t("currencySymbol"),t("networkURL")]}},{element:"Typography",key:"only-add-networks-you-trust",children:[{element:"MetaMaskTranslation",key:"learn-about-risks",props:{translationKey:"watchOutMessage",variables:[{element:"a",children:t("securityMessageLinkForNetworks"),key:"securityMessageLinkForNetworks",props:{href:u.default.USER_GUIDE_CUSTOM_NETWORKS,target:"__blank"}}]}}],props:{variant:i.TypographyVariant.H6,boxProps:{margin:p?[0,8]:0,display:i.Display.Flex,flexDirection:i.FlexDirection.Column,alignItems:i.AlignItems.center}}}],cancelText:t("cancel"),submitText:t("approveButtonText"),loadingText:t("addingCustomNetwork"),onSubmit:async()=>{let t;try{t=await(0,l.jsonRpcRequest)(f,"eth_chainId")}catch(e){return console.error(`Request for method 'eth_chainId on ${f} failed`),[A]}if(e.requestData.chainId!==t)return console.error(`Chain ID returned by RPC URL ${f} does not match ${t}`),[E];if(await n.resolvePendingApproval(e.id,e.requestData),p){const t=e.requestData.rpcPrefs.blockExplorerUrl,a=await n.addNetwork({chainId:e.requestData.chainId,name:e.requestData.chainName,nativeCurrency:e.requestData.ticker,blockExplorerUrls:t?[t]:[],defaultBlockExplorerUrlIndex:t?0:undefined,defaultRpcEndpointIndex:0,rpcEndpoints:[{url:e.requestData.rpcUrl,type:o.RpcEndpointType.Custom}]});await n.setNewNetworkAdded({networkConfigurationId:a.rpcEndpoints[0].networkClientId,nickname:e.requestData.chainName});document.location.hash.replace("#","/")===c.ONBOARDING_PRIVACY_SETTINGS_ROUTE||r.push(c.DEFAULT_ROUTE)}return[]},onCancel:()=>n.rejectPendingApproval(e.id,a.providerErrors.userRejectedRequest().serialize()),networkDisplay:!p}},getState:function(e){return 1===parseInt(e.requestData.chainId,16)?{useWarningModal:!0}:{}}};n.default=_}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/add-ethereum-chain.js"}],[7171,{"../../../../../shared/constants/metametrics":5730},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,o,s){const{origin:i,snapName:c,requestData:u}=e,{snapSuggestedAccountName:l}=u,{trackEvent:d}=s,m=e=>{d({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})};return{content:[{element:"CreateNamedSnapAccount",key:"create-named-snap-account",props:{onActionComplete:async t=>{t.success?(m(r.MetaMetricsEventName.AddSnapAccountConfirmed),n.resolvePendingApproval(e.id,t)):(m(r.MetaMetricsEventName.AddSnapAccountCanceled),n.resolvePendingApproval(e.id,!1))},snapSuggestedAccountName:l}}],loadingText:t("addingAccount"),hideSubmitButton:!0,onLoad:()=>m(r.MetaMetricsEventName.AddSnapAccountViewed)}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-named-snap-account.js"}],[7172,{"../../../../../shared/constants/metametrics":5730},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,o,s){const{origin:i,snapName:c}=e,{trackEvent:u}=s,l=e=>{u({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},d=()=>{l(r.MetaMetricsEventName.AddSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)};return{content:[{element:"CreateSnapAccount",key:"create-snap-account",props:{snapId:i,snapName:c,onCancel:d}}],cancelText:t("cancel"),submitText:t("create"),onLoad:()=>l(r.MetaMetricsEventName.AddSnapAccountViewed),onSubmit:()=>{l(r.MetaMetricsEventName.AddSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:d}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-snap-account.js"}],[7173,{"../ResultTemplate":7159,"@metamask/controller-utils":1474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils");const a=new(e("../ResultTemplate").ResultTemplate)(r.ApprovalType.ResultError),o={getValues:a.getValues.bind(a)};n.default=o}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/error.js"}],[7174,{"../../../../../shared/constants/app":5719,"../../../../store/actions":7502,"./add-ethereum-chain":7170,"./create-named-snap-account":7171,"./create-snap-account":7172,"./error":7173,"./remove-snap-account":7175,"./smart-transaction-status-page":7176,"./snap-account-redirect":7177,"./snaps/snap-alert/snap-alert":7178,"./snaps/snap-confirmation/snap-confirmation":7179,"./snaps/snap-default/snap-default":7180,"./snaps/snap-prompt/snap-prompt":7181,"./success":7182,"./switch-ethereum-chain":7183,"@metamask/controller-utils":1474,lodash:4855},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=void 0,n.getTemplateAlerts=async function(e,t){var n;const r=null===(n=_[e.type])||void 0===n?void 0:n.getAlerts,a=r?await r(e,t):[];if(!Array.isArray(a))throw new Error(`Template alerts must be an array, received: ${a}`);if(a.some((e=>(null==e?void 0:e.id)===undefined)))throw new Error(`Template alert entries must be objects with an id key. Received: ${a}`);return a},n.getTemplateState=async function(e){var t;const n=(null===(t=_[e.type])||void 0===t?void 0:t.getState)??I,r=await n(e);if("object"!=typeof r||Array.isArray(r))throw new Error(`Template state must be an object, received: ${r}`);if(null===r||r===undefined)return{};return r},n.getTemplateValues=function(e,t,n,a,s,i){var c;const u=null===(c=_[e.type])||void 0===c?void 0:c.getValues;if(!u)throw new Error(`MESSAGE_TYPE: '${e.type}' is not specified in approval templates`);const l=function(e){return{rejectPendingApproval:(...t)=>e((0,o.rejectPendingApproval)(...t)),resolvePendingApproval:(...t)=>e((0,o.resolvePendingApproval)(...t)),addNetwork:(...t)=>e((0,o.addNetwork)(...t)),setNewNetworkAdded:(...t)=>e((0,o.setNewNetworkAdded)(...t)),deleteInterface:(...t)=>e((0,o.deleteInterface)(...t))}}(n),d=u(e,t,l,a,s,i),m=(0,r.omit)(d,y),g=(0,r.pick)(d,y);if(m.length>0)throw new Error(`Received extraneous keys from ${e.type}.getValues. These keys are not passed to the confirmation page: ${Object.keys(m)}`);return g};var r=e("lodash"),a=e("@metamask/controller-utils"),o=e("../../../../store/actions"),s=e("../../../../../shared/constants/app"),i=A(e("./smart-transaction-status-page")),c=A(e("./create-snap-account")),u=A(e("./remove-snap-account")),l=A(e("./snap-account-redirect")),d=A(e("./create-named-snap-account")),m=A(e("./add-ethereum-chain")),g=A(e("./switch-ethereum-chain")),p=A(e("./success")),f=A(e("./error")),T=A(e("./snaps/snap-alert/snap-alert")),h=A(e("./snaps/snap-confirmation/snap-confirmation")),S=A(e("./snaps/snap-prompt/snap-prompt")),E=A(e("./snaps/snap-default/snap-default"));function A(e){return e&&e.__esModule?e:{default:e}}const _={[a.ApprovalType.AddEthereumChain]:m.default,[a.ApprovalType.SwitchEthereumChain]:g.default,[a.ApprovalType.ResultSuccess]:p.default,[a.ApprovalType.ResultError]:f.default,[s.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage]:i.default,[a.ApprovalType.SnapDialogAlert]:T.default,[a.ApprovalType.SnapDialogConfirmation]:h.default,[a.ApprovalType.SnapDialogPrompt]:S.default,[a.ApprovalType.SnapDialogDefault]:E.default,[s.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation]:c.default,[s.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval]:u.default,[s.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showNameSnapAccount]:d.default,[s.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect]:l.default},y=(n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=Object.keys(_),["cancelText","content","onLoad","onCancel","onSubmit","networkDisplay","submitText","loadingText","hideSubmitButton"]);async function I(){return{}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/index.js"}],[7175,{"../../../../../shared/constants/metametrics":5730},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,o,s){const{origin:i,snapName:c}=e,{publicAddress:u}=e.requestData,{trackEvent:l}=s,d=e=>{l({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},m=()=>{d(r.MetaMetricsEventName.RemoveSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)};return{content:[{element:"RemoveSnapAccount",key:"remove-snap-account",props:{snapId:i,snapName:c,publicAddress:u,onCancel:m}}],cancelText:t("cancel"),submitText:t("remove"),onLoad:()=>d(r.MetaMetricsEventName.RemoveSnapAccountViewed),onSubmit:()=>{d(r.MetaMetricsEventName.RemoveSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:m}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/remove-snap-account.js"}],[7176,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n,r){const{id:a,requestState:o}=e;return{content:[{element:"SmartTransactionStatusPage",key:"smart-transaction-status-page",props:{requestState:o,onCloseExtension:()=>{n.resolvePendingApproval(a,!0)},onViewActivity:()=>{n.resolvePendingApproval(a,!0)}}}],hideSubmitButton:!0}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/smart-transaction-status-page.js"}],[7177,{"../../../../../shared/constants/metametrics":5730},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,o,s){const{origin:i,snapName:c}=e,{url:u,message:l,isBlockedUrl:d}=e.requestData,{trackEvent:m}=s,g=e=>{m({event:e,category:r.MetaMetricsEventCategory.Transactions,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},p=r=>u!==undefined&&null!==u&&u.length>0&&!1===d?{submitText:t("goToSite"),onSubmit:()=>{g(r),n.resolvePendingApproval(e.id,!0)}}:{};return{content:[{element:"SnapAccountRedirect",key:"snap-account-redirect",props:{url:u,message:l,snapId:i,snapName:c,isBlockedUrl:d,...p(r.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectSnapUrlClicked)}}],cancelText:t("close"),onLoad:()=>g(r.MetaMetricsEventName.SnapAccountTransactionFinalizeViewed),onCancel:()=>{g(r.MetaMetricsEventName.SnapAccountTransactionFinalizeClosed),n.resolvePendingApproval(e.id,!1)},...p(r.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectGoToSiteClicked)}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snap-account-redirect.js"}],[7178,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{submitText:t("ok").toUpperCase(),onSubmit:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-alert/snap-alert.js"}],[7179,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{cancelText:t("reject"),submitText:t("approveButtonText"),onSubmit:()=>{n.resolvePendingApproval(e.id,!0),n.deleteInterface(r)},onCancel:()=>{n.resolvePendingApproval(e.id,!1),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-confirmation/snap-confirmation.js"}],[7180,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{onCancel:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-default/snap-default.js"}],[7181,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{cancelText:t("cancel"),submitText:t("submit"),onSubmit:t=>{n.resolvePendingApproval(e.id,t),n.deleteInterface(r)},onCancel:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-prompt/snap-prompt.js"}],[7182,{"../ResultTemplate":7159,"@metamask/controller-utils":1474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils");const a=new(e("../ResultTemplate").ResultTemplate)(r.ApprovalType.ResultSuccess),o={getValues:a.getValues.bind(a)};n.default=o}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/success.js"}],[7183,{"../../../../helpers/constants/design-system":6770,"@metamask/rpc-errors":2554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/rpc-errors"),a=e("../../../../helpers/constants/design-system");const o={id:"PENDING_TX_DROP_NOTICE",severity:a.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"switchingNetworksCancelsPendingConfirmations"}}}};const s={getAlerts:async function(e,t){const n=[];return t.unapprovedTxsCount>0&&n.push(o),n},getValues:function(e,t,n){return{content:[{element:"Typography",key:"title",children:t("switchEthereumChainConfirmationTitle"),props:{variant:a.TypographyVariant.H3,align:"center",fontWeight:"normal",boxProps:{margin:[0,0,2],padding:[0,4,0,4]}}},{element:"Typography",key:"description",children:t("switchEthereumChainConfirmationDescription"),props:{variant:a.TypographyVariant.H7,color:a.TextColor.textAlternative,align:"center",boxProps:{padding:[0,4,0,4]}}},{element:"OriginPill",key:"origin-pill",props:{origin:e.origin,dataTestId:"signature-origin-pill"}},{element:"Box",key:"status-box",props:{justifyContent:a.JustifyContent.center},children:{element:"ConfirmationNetworkSwitch",key:"network-being-switched",props:{toNetwork:e.requestData.toNetworkConfiguration,fromNetwork:e.requestData.fromNetworkConfiguration}}}],cancelText:t("cancel"),submitText:t("switchNetwork"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData.toNetworkConfiguration),onCancel:()=>n.rejectPendingApproval(e.id,r.providerErrors.userRejectedRequest().serialize()),networkDisplay:!0}}};n.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/switch-ethereum-chain.js"}],[7184,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e===undefined?undefined:"string"==typeof e?e:Array.isArray(e)?e.map(r):{key:e.key,element:e.name,props:e.properties,children:r(e.children)}}Object.defineProperty(n,"__esModule",{value:!0}),n.processError=function(e,t){const n=r(e)||t;if("string"!=typeof n)return n;return{key:"error",element:"ActionableMessage",props:{type:"danger",message:n}}},n.processHeader=function(e){return r(e)},n.processString=function(e,t){const n=r(e)||t;if("string"!=typeof n)return n;return a=n,function(e,t,n){let r=0,a=0;const o=Array.from(e.matchAll(t)),s=[];for(const t of o){const o=e.substring(r,t.index);o.length&&s.push(o);const i=n(t[1],a);s.push(i),r=t.index+t[0].length,a+=1}const i=e.substring(r);return i.length&&s.push(i),s}(a,/\*\*(.+?)\*\*/gu,((e,t)=>({key:`bold-${t}`,element:"b",children:e})));var a}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/util.ts"}],[7185,{"../../../../shared/constants/network":5734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypedSignSignaturePrimaryTypes=n.TYPED_SIGNATURE_VERSIONS=n.SPENDING_CAP_UNLIMITED_MSG=n.IGNORE_GAS_LIMIT_CHAIN_IDS=void 0;var r=e("../../../../shared/constants/network");n.IGNORE_GAS_LIMIT_CHAIN_IDS=[r.CHAINLIST_CHAIN_IDS_MAP.MANTLE],n.TYPED_SIGNATURE_VERSIONS={V1:"V1",V3:"V3",V4:"V4"},n.SPENDING_CAP_UNLIMITED_MSG="UNLIMITED MESSAGE",n.TypedSignSignaturePrimaryTypes={PERMIT:"Permit",ORDER:"Order"}}}},{package:"$root$",file:"ui/pages/confirmations/constants/index.ts"}],[72,{"./background-api":69,"./differs":70,"./enums":71,"./selectors":73,"./specifications":74},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./background-api");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=e("./differs");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=e("./enums");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=e("./specifications");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var i=e("./selectors");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}))}}},{package:"$root$",file:"app/scripts/controllers/permissions/index.js"}],[7245,{"../../../../shared/modules/selectors/util":5801,"../../../selectors/approvals":7478,"@metamask/controller-utils":1474,reselect:5284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.oldestPendingConfirmationSelector=void 0,n.pendingConfirmationsSelector=function(e){return(0,o.getPendingApprovals)(e).filter((({type:e})=>i.includes(e)))},n.pendingConfirmationsSortedSelector=c;var r=e("@metamask/controller-utils"),a=e("reselect"),o=e("../../../selectors/approvals"),s=e("../../../../shared/modules/selectors/util");const i=[r.ApprovalType.PersonalSign,r.ApprovalType.EthSignTypedData,r.ApprovalType.Transaction];function c(e){return(0,o.getPendingApprovals)(e).filter((({type:e})=>i.includes(e))).sort(((e,t)=>e.time-t.time))}const u=(0,a.createSelector)(c,(e=>e[0]));n.oldestPendingConfirmationSelector=(0,s.createDeepEqualSelector)(u,(e=>e))}}},{package:"$root$",file:"ui/pages/confirmations/selectors/confirm.ts"}],[7250,{"../../../../shared/constants/common":5721,"../../../../shared/constants/gas":5725,"../../../../shared/modules/Numeric":5777},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE=n.SWAPS_QUOTES_ERROR=n.SWAPS_NO_QUOTES=n.REQUIRED_ERROR=n.RECIPIENT_TYPES=n.NO_RESOLUTION_FOR_DOMAIN=n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR=n.NEGATIVE_ETH_ERROR=n.MIN_GAS_TOTAL=n.MIN_GAS_PRICE_HEX=n.MIN_GAS_PRICE_GWEI=n.MIN_GAS_PRICE_DEC=n.MIN_GAS_LIMIT_DEC=n.MAX_GAS_LIMIT_DEC=n.KNOWN_RECIPIENT_ADDRESS_WARNING=n.INVALID_RECIPIENT_ADDRESS_ERROR=n.INVALID_HEX_DATA_ERROR=n.INSUFFICIENT_TOKENS_ERROR=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR=n.INSUFFICIENT_FUNDS_ERROR=n.HIGH_FEE_WARNING_MULTIPLIER=n.FLOAT_TOKENS_ERROR=n.ENS_UNKNOWN_ERROR=n.CONTRACT_ADDRESS_ERROR=n.CONFUSING_ENS_ERROR=void 0;var r=e("../../../../shared/constants/gas"),a=e("../../../../shared/modules/Numeric"),o=e("../../../../shared/constants/common");const s=n.MIN_GAS_PRICE_DEC="0",i=n.MIN_GAS_PRICE_HEX=parseInt(s,10).toString(16);n.MIN_GAS_LIMIT_DEC=new a.Numeric("21000",10),n.MAX_GAS_LIMIT_DEC="30000000",n.HIGH_FEE_WARNING_MULTIPLIER=1.5,n.MIN_GAS_PRICE_GWEI=new a.Numeric(i,16,o.EtherDenomination.WEI).toDenomination(o.EtherDenomination.GWEI).round(1).toPrefixedHexString(),n.MIN_GAS_TOTAL=new a.Numeric(r.MIN_GAS_LIMIT_HEX,16).times(new a.Numeric(i,16,o.EtherDenomination.WEI)).toPrefixedHexString(),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE="0xa9059cbb",n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE="0x23b872dd",n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE="0xf242432a",n.INSUFFICIENT_FUNDS_ERROR="insufficientFunds",n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR="insufficientFundsForGas",n.INSUFFICIENT_TOKENS_ERROR="insufficientTokens",n.NEGATIVE_ETH_ERROR="negativeETH",n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR="negativeOrZeroAmountToken",n.FLOAT_TOKENS_ERROR="floatAmountToken",n.INVALID_RECIPIENT_ADDRESS_ERROR="invalidAddressRecipient",n.REQUIRED_ERROR="required",n.KNOWN_RECIPIENT_ADDRESS_WARNING="knownAddressRecipient",n.CONTRACT_ADDRESS_ERROR="contractAddressError",n.CONFUSING_ENS_ERROR="confusingEnsDomain",n.ENS_UNKNOWN_ERROR="ensUnknownError",n.NO_RESOLUTION_FOR_DOMAIN="noDomainResolution",n.SWAPS_NO_QUOTES="swapQuotesNotAvailableErrorTitle",n.SWAPS_QUOTES_ERROR="swapFetchingQuotesErrorTitle",n.INVALID_HEX_DATA_ERROR="invalidHexDataError",n.RECIPIENT_TYPES={SMART_CONTRACT:"SMART_CONTRACT",NON_CONTRACT:"NON_CONTRACT"}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.constants.js"}],[7251,{"../../../../app/scripts/lib/util":187,"../../../../shared/constants/transaction":5749,"../../../../shared/modules/Numeric":5777,"./send.constants":7250,"@metamask/abi-utils":1251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=function(e,t,n=1.5){const r=new s.Numeric(e,16),a=new s.Numeric(t,16).times(new s.Numeric(.9,10)).round(0),o=r.times(new s.Numeric(n,10)).round(0);if(r.greaterThanOrEqualTo(a))return e;if(o.lessThan(a))return o.toString();return a.toString()},n.ellipsify=function(e,t=6,n=4){if(!e)return"";return`${e.slice(0,t)}...${e.slice(-n)}`},n.generateERC1155TransferData=l,n.generateERC20TransferData=c,n.generateERC721TransferData=u,n.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:n,amount:r}){switch(e.standard){case o.TokenStandard.ERC721:return u({toAddress:n,fromAddress:t,tokenId:e.tokenId});case o.TokenStandard.ERC1155:return l({toAddress:n,fromAddress:t,tokenId:e.tokenId});case o.TokenStandard.ERC20:default:return c({toAddress:n,amount:r,sendToken:e})}},n.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:n=1,gasTotal:r="0x0",primaryCurrency:a=undefined}){let o=new s.Numeric(e,16).add(new s.Numeric(r,16)),i=new s.Numeric(t,16);null!=a&&(o=o.applyConversionRate(n),i=i.applyConversionRate(n));return i.greaterThanOrEqualTo(o)},n.isERC1155BalanceSufficient=function({amount:e="0",tokenBalance:t}){const n=new s.Numeric(e,16);return new s.Numeric(t,10).greaterThanOrEqualTo(n)},n.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:n}){const r=new s.Numeric(e,16).shiftedBy(n);return new s.Numeric(t,16).greaterThanOrEqualTo(r)};var r=e("@metamask/abi-utils"),a=e("../../../../app/scripts/lib/util"),o=e("../../../../shared/constants/transaction"),s=e("../../../../shared/modules/Numeric"),i=e("./send.constants");function c({toAddress:e="0x0",amount:t="0x0",sendToken:n}){return n?i.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","uint256"],[(0,a.addHexPrefix)(e),(0,a.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function u({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n}){return n?i.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","address","uint256"],[(0,a.addHexPrefix)(t),(0,a.addHexPrefix)(e),BigInt(n)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function l({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n,amount:o="1",data:s="0"}){return n?i.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","address","uint256","uint256","bytes"],[(0,a.addHexPrefix)(t),(0,a.addHexPrefix)(e),BigInt(n),(0,a.addHexPrefix)(o),(0,a.addHexPrefix)(s)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.utils.js"}],[7252,{"../../../../shared/constants/signatures":5742,"../../../../shared/modules/transaction.utils":5804,"../../../helpers/utils/util":6819,"../constants":7185,"@metamask/transaction-controller":2905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toPunycodeURL=n.parseSanitizeTypedDataMessage=n.isValidASCIIURL=n.isSignatureTransactionType=n.isSIWESignatureRequest=n.isPermitSignatureRequest=n.isOrderSignatureRequest=n.SIGNATURE_TRANSACTION_TYPES=void 0;var r=e("@metamask/transaction-controller"),a=e("../../../../shared/constants/signatures"),o=e("../../../../shared/modules/transaction.utils"),s=e("../../../helpers/utils/util"),i=e("../constants");const c=n.SIGNATURE_TRANSACTION_TYPES=[r.TransactionType.personalSign,r.TransactionType.signTypedData],u=e=>e&&c.includes(e.type);n.isSignatureTransactionType=u;n.parseSanitizeTypedDataMessage=e=>{const{message:t,primaryType:n,types:r}=(0,o.parseTypedDataMessage)(e);return{sanitizedMessage:(0,s.sanitizeMessage)(t,n,r),primaryType:n}};n.isSIWESignatureRequest=e=>{var t;return Boolean(null==e||null===(t=e.msgParams)||void 0===t||null===(t=t.siwe)||void 0===t?void 0:t.isSIWEMessage)};n.isOrderSignatureRequest=e=>{var t,n;if(!e||!u(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:r}=(0,o.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return a.PRIMARY_TYPES_ORDER.includes(r)};n.isPermitSignatureRequest=e=>{var t,n;if(!e||!u(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:r}=(0,o.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return a.PRIMARY_TYPES_PERMIT.includes(r)};n.isValidASCIIURL=e=>{try{return!(!e||0===e.length)&&e.includes(new URL(e).host)}catch(t){return console.error(`Failed to detect if URL hostname contains non-ASCII characters: ${e}. Error: ${t}`),!1}};n.toPunycodeURL=e=>{try{const t=new URL(e);return"/"===t.pathname&&!e.endsWith("/")?t.href.slice(0,-1):t.href}catch(e){return console.error(`Failed to convert URL to Punycode: ${e}`),undefined}}}}},{package:"$root$",file:"ui/pages/confirmations/utils/confirm.ts"}],[73,{"@metamask/multichain":2146,reselect:5284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPermittedChainsByOrigin=n.getPermittedAccountsByOrigin=n.getAuthorizedScopesByOrigin=void 0;var r=e("@metamask/multichain"),a=e("reselect");const o=e=>e.subjects;n.getPermittedAccountsByOrigin=(0,a.createSelector)(o,(e=>Object.values(e).reduce(((e,t)=>{var n;const a=((null===(n=t.permissions)||void 0===n||null===(n=n[r.Caip25EndowmentPermissionName])||void 0===n?void 0:n.caveats)||[]).find((({type:e})=>e===r.Caip25CaveatType));if(a){const n=(0,r.getEthAccounts)(a.value);e.set(t.origin,n)}return e}),new Map))),n.getAuthorizedScopesByOrigin=(0,a.createSelector)(o,(e=>Object.values(e).reduce(((e,t)=>{var n;const a=((null===(n=t.permissions)||void 0===n||null===(n=n[r.Caip25EndowmentPermissionName])||void 0===n?void 0:n.caveats)||[]).find((({type:e})=>e===r.Caip25CaveatType));return a&&e.set(t.origin,a.value),e}),new Map))),n.getPermittedChainsByOrigin=(0,a.createSelector)(o,(e=>Object.values(e).reduce(((e,t)=>{var n;const a=((null===(n=t.permissions)||void 0===n||null===(n=n[r.Caip25EndowmentPermissionName])||void 0===n?void 0:n.caveats)||[]).find((({type:e})=>e===r.Caip25CaveatType));if(a){const n=(0,r.getPermittedEthChainIds)(a.value);e.set(t.origin,n)}return e}),new Map)))}}},{package:"$root$",file:"app/scripts/controllers/permissions/selectors.js"}],[74,{"../../../../shared/constants/permissions":5738,"@metamask/multichain":2146,"@metamask/snaps-rpc-methods":2700},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unrestrictedMethods=n.unrestrictedEthSigningMethods=n.getPermissionSpecifications=n.getCaveatSpecifications=n.PermissionNames=n.CaveatFactories=void 0;var r=e("@metamask/snaps-rpc-methods"),a=e("@metamask/multichain"),o=e("../../../../shared/constants/permissions");n.PermissionNames=Object.freeze({...o.RestrictedMethods,...o.EndowmentTypes}),n.CaveatFactories=Object.freeze({[a.Caip25CaveatType]:a.createCaip25Caveat});n.getCaveatSpecifications=({listAccounts:e,findNetworkClientIdByChainId:t})=>({[a.Caip25CaveatType]:(0,a.caip25CaveatBuilder)({listAccounts:e,findNetworkClientIdByChainId:t}),...r.caveatSpecifications,...r.endowmentCaveatSpecifications});n.getPermissionSpecifications=()=>({[a.caip25EndowmentBuilder.targetName]:a.caip25EndowmentBuilder.specificationBuilder({})});n.unrestrictedEthSigningMethods=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"]),n.unrestrictedMethods=Object.freeze(["eth_blockNumber","eth_call","eth_chainId","eth_coinbase","eth_decrypt","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getEncryptionPublicKey","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleByBlockHashAndIndex","eth_getUncleByBlockNumberAndIndex","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_getWork","eth_hashrate","eth_mining","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_protocolVersion","eth_requestAccounts","eth_sendRawTransaction","eth_sendTransaction","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_submitHashrate","eth_submitWork","eth_subscribe","eth_syncing","eth_uninstallFilter","eth_unsubscribe","metamask_getProviderState","metamask_logWeb3ShimUsage","metamask_sendDomainMetadata","metamask_watchAsset","net_listening","net_peerCount","net_version","personal_ecRecover","personal_sign","wallet_addEthereumChain","wallet_getCallsStatus","wallet_getCapabilities","wallet_getPermissions","wallet_requestPermissions","wallet_revokePermissions","wallet_registerOnboarding","wallet_sendCalls","wallet_switchEthereumChain","wallet_watchAsset","web3_clientVersion","web3_sha3","wallet_getAllSnaps","wallet_getSnaps","wallet_requestSnaps","wallet_invokeSnap","wallet_invokeKeyring","snap_getClientStatus","snap_getCurrencyRate","snap_clearState","snap_getFile","snap_getState","snap_listEntropySources","snap_createInterface","snap_updateInterface","snap_getInterfaceState","snap_getInterfaceContext","snap_resolveInterface","snap_setState","snap_scheduleBackgroundEvent","snap_cancelBackgroundEvent","snap_getBackgroundEvents","snap_experimentalProviderRequest"])}}},{package:"$root$",file:"app/scripts/controllers/permissions/specifications.js"}],[7466,{"../../store/background-connection":7503},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.estimateGasFee=function(e){return(0,r.submitRequestToBackground)("estimateGasFee",[e])};var r=e("../../store/background-connection")}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.gas.ts"}],[7467,{"../../../shared/constants/common":5721,"../../../shared/constants/network":5734,"../../../shared/constants/swaps":5745,"../../../shared/lib/fetch-with-cache":5763,"../../../shared/lib/swaps-utils":5770,"../../../shared/lib/transactions-controller-utils":5775,"../../../shared/modules/conversion.utils":5782,"../../../shared/modules/hexstring-utils":5788,"../../../shared/modules/swaps.utils":5803,"../../helpers/utils/confirm-tx.util":6797,"./swaps.util.gas":7466,"bignumber.js":3978},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=n.TOKEN_VALIDATORS=n.StxErrorTypes=void 0,n.fetchAggregatorMetadata=async function(e){const t=(0,m.getBaseApi)("aggregatorMetadata",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:T},functionName:"fetchAggregatorMetadata"}),r={};for(const e in n)(0,m.validateData)(_,n[e],t)&&(r[e]=n[e]);return r},n.fetchBlockedTokens=async function(e){const t=(0,m.getBaseApi)("blockedTokens",e);return await(0,u.default)({url:`${t}`,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:T},functionName:"fetchBlockedTokens"})},n.fetchSwapsFeatureFlags=async function(){const e=o.SWAPS_API_V2_BASE_URL;return await(0,u.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},n.fetchSwapsGasPrices=async function(e){const t=(0,m.getBaseApi)("gasPrices",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,m.validateData)(I,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:r,ProposeGasPrice:a,FastGasPrice:o}=n;return{safeLow:r,average:a,fast:o}},n.fetchToken=async function(e,t){const n=(0,m.getBaseApi)("token",t);return await(0,u.default)({url:`${n}?address=${e}`,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:T},functionName:"fetchToken"})},n.fetchTokenPrice=async function(e){var t;const n=`spot-prices?tokenAddresses=${e}&vsCurrency=eth&includeMarketData=false`,r=await(0,u.default)({url:`https://price.api.cx.metamask.io/v2/chains/1/${n}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==r||null===(t=r[e])||void 0===t?void 0:t.eth},n.fetchTokens=async function(e){const t=(0,m.getBaseApi)("tokens",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:T},functionName:"fetchTokens"});return[o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...n.filter((n=>(0,m.validateData)(E,n,t,false)&&!((0,s.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,s.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=await k(e);return t.reduce(((e,t,n)=>({...e,[t.address]:{index:String(n)}})),{})},n.fetchTopAssetsList=k,n.formatSwapsValueForDisplay=C,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=n.getClassNameForCharLength=void 0,n.getRenderableNetworkFeesForQuote=v,n.getSwapsLivenessForNetwork=n.getSwap1559GasFeeEstimates=void 0,n.getTransaction1559GasFeeEstimates=R,n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=void 0,n.quotesToRenderableData=function({quotes:e,gasPriceTrade:t,gasPriceApprove:n,conversionRate:r,currentCurrency:o,approveGas:i,tokenConversionRates:c,chainId:u,smartTransactionEstimatedGas:l,nativeCurrencySymbol:m,multiLayerL1ApprovalFeeTotal:p}){return Object.values(e).map((e=>{const{destinationAmount:f=0,sourceAmount:T=0,sourceTokenInfo:h,destinationTokenInfo:S,slippage:E,aggType:A,aggregator:_,gasEstimateWithRefund:y,averageGas:I,fee:k,trade:w,multiLayerL1TradeFeeTotal:O}=e;let R=null;null!==O&&null!==p?R=(0,g.sumHexes)(O||"0x0",p||"0x0"):null!==O&&(R=O);const M=(0,d.calcTokenAmount)(T,h.decimals).toString(10),b=(0,d.calcTokenAmount)(f,S.decimals).toPrecision(8);let P=null,D=null,B=null,L=null;({feeInFiat:P,feeInEth:D,rawNetworkFees:B,rawEthFee:L}=v({tradeGas:y||(0,g.decimalToHex)(I||8e5),approveGas:i,gasPriceTrade:t,gasPriceApprove:n,currentCurrency:o,conversionRate:r,tradeValue:w.value,sourceSymbol:h.symbol,sourceAmount:T,chainId:u,multiLayerL1FeeTotal:R})),l&&({feeInFiat:P,feeInEth:D}=N({chainId:u,currentCurrency:o,conversionRate:r,nativeCurrencySymbol:m,feeInWeiDec:l.feeEstimate}));const F=new a.BigNumber(100-E).div(100),U=new a.BigNumber(b).times(F).toFixed(6),x=c[S.address],G=(0,s.isSwapsDefaultTokenSymbol)(S.symbol,u)?(0,d.calcTokenAmount)(f,S.decimals).minus(L,10):new a.BigNumber(x||0,10).times((0,d.calcTokenAmount)(f,S.decimals),10).minus(L,10);let H,q=E;return"AGG"===A?H="swapAggregator":"RFQ"===A?(H="swapRequestForQuotation",q=0):H="DEX"===A?"swapDecentralizedExchange":"CONTRACT"===A?"swapDirectContract":"swapUnknown",{aggId:_,amountReceiving:`${b} ${S.symbol}`,destinationTokenDecimals:S.decimals,destinationTokenSymbol:S.symbol,destinationTokenValue:C(b),destinationIconUrl:S.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:H,feeInEth:D,detailedNetworkFees:`${D} (${P})`,networkFees:P,quoteSource:A,rawNetworkFees:B,slippage:q,sourceTokenDecimals:h.decimals,sourceTokenSymbol:h.symbol,sourceTokenValue:M,sourceTokenIconUrl:h.iconUrl,ethValueOfTrade:G,minimumAmountReceived:U,metaMaskFee:k}}))},n.showRemainingTimeInMinAndSec=void 0;var r,a=e("bignumber.js"),o=e("../../../shared/constants/swaps"),s=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),c=e("../../helpers/utils/confirm-tx.util"),u=(r=e("../../../shared/lib/fetch-with-cache"))&&r.__esModule?r:{default:r},l=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/transactions-controller-utils"),m=e("../../../shared/lib/swaps-utils"),g=e("../../../shared/modules/conversion.utils"),p=e("../../../shared/constants/common"),f=e("./swaps.util.gas");const T=3e5,h="usd",S={"X-Client-Id":o.SWAPS_CLIENT_ID},E=n.TOKEN_VALIDATORS=[{property:"address",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,m.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],A=E.slice(0,2),_=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:m.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],y=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),I=[{property:"SafeGasPrice",type:"string",validator:y},{property:"ProposeGasPrice",type:"string",validator:y},{property:"FastGasPrice",type:"string",validator:y}];async function k(e){const t=(0,m.getBaseApi)("topAssets",e);return(await(0,u.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:T}})||[]).filter((e=>(0,m.validateData)(A,e,t)))}const N=({chainId:e,currentCurrency:t,conversionRate:n,USDConversionRate:r,nativeCurrencySymbol:a,feeInWeiDec:s})=>{var i;const u=(0,g.decimalToHex)(s),l=(0,g.getValueFromWeiHex)({value:u,toDenomination:p.EtherDenomination.ETH,numberOfDecimals:5}),d=(0,g.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:n,numberOfDecimals:2});let m;m=t===h?d:(0,g.getValueFromWeiHex)({value:u,toCurrency:h,conversionRate:r,numberOfDecimals:2});return{rawNetworkFees:d,feeInUsd:m,feeInFiat:(0,c.formatCurrency)(d,t),feeInEth:`${l} ${a||(null===(i=o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:l}};function v({tradeGas:e,approveGas:t,gasPriceTrade:n,gasPriceApprove:r,currentCurrency:i,conversionRate:u,USDConversionRate:l,tradeValue:m,sourceSymbol:f,sourceAmount:T,chainId:S,nativeCurrencySymbol:E,multiLayerL1FeeTotal:A}){const _=(0,d.calcGasTotal)(e,n),y=t?(0,d.calcGasTotal)(t,r):"0x0",I=(0,g.sumHexes)(_,y,A||"0x0"),k=new a.BigNumber(m,16).minus((0,s.isSwapsDefaultTokenSymbol)(f,S)?T:0,10).toString(16),N=new a.BigNumber(I,16).plus(k,16).toString(16),v=(0,g.getValueFromWeiHex)({value:N,toDenomination:p.EtherDenomination.ETH,numberOfDecimals:5}),C=(0,g.getValueFromWeiHex)({value:N,toCurrency:i,conversionRate:u,numberOfDecimals:2}),w=(0,c.formatCurrency)(C,i);let O;O=i===h?C:(0,g.getValueFromWeiHex)({value:N,toCurrency:h,conversionRate:l,numberOfDecimals:2});return{rawNetworkFees:C,feeInUsd:O,rawEthFee:v,feeInFiat:w,feeInEth:`${v} ${E||o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[S].symbol}`,nonGasFee:k}}function C(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,d.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new a.BigNumber(t).toFixed()),t}n.getFeeForSmartTransaction=N;n.getClassNameForCharLength=(e,t)=>{let n;return n=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${n}`};n.isContractAddressValid=(e,t)=>!(!e||!o.ALLOWED_CONTRACT_ADDRESSES[t])&&o.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const w=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return o.ETHEREUM;case i.CHAIN_IDS.BSC:return o.BSC;case i.CHAIN_IDS.POLYGON:return o.POLYGON;case i.CHAIN_IDS.GOERLI:return o.GOERLI;case i.CHAIN_IDS.AVALANCHE:return o.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return o.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return o.ARBITRUM;case i.CHAIN_IDS.ZKSYNC_ERA:return o.ZKSYNC_ERA;case i.CHAIN_IDS.LINEA_MAINNET:return o.LINEA;case i.CHAIN_IDS.BASE:return o.BASE;default:return""}};n.getNetworkNameByChainId=w;n.getSwapsLivenessForNetwork=(e,t={})=>{const n=w(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[n])return{swapsFeatureIsLive:!1};return t[n].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[n].fallbackToV1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let O=n.StxErrorTypes=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});n.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case O.unavailable:case O.regularTxPending:return t("smartSwapsErrorUnavailable");case O.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())};async function R(e,t,n){const r=await(0,f.estimateGasFee)({transactionParams:e,chainId:n}),a=null==r?void 0:r.estimates,{maxFeePerGas:o}=(null==a?void 0:a.high)??{},{maxPriorityFeePerGas:s}=(null==a?void 0:a.high)??{};return{baseAndPriorityFeePerGas:s?(0,g.addHexes)(t,s):undefined,maxFeePerGas:o,maxPriorityFeePerGas:s}}n.getSwap1559GasFeeEstimates=async(e,t,n,r)=>{const a=(0,g.decGWEIToHexWEI)(n);return{tradeGasFeeEstimates:await R(e,a,r),approveGasFeeEstimates:t?await R(t,a,r):undefined,estimatedBaseFee:a}}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[7476,{"../../shared/lib/multichain/accounts":5767,"../../shared/modules/selectors/util":5801,"../../shared/modules/string-utils":5802,"@metamask/keyring-api":1983,reselect:5284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMemoizedInternalAccountByAddress=n.getInternalAccounts=void 0,n.getSelectedInternalAccount=d,n.hasCreatedBtcMainnetAccount=function(e){return m(e,o.isBtcMainnetAddress)},n.hasCreatedBtcTestnetAccount=function(e){return m(e,o.isBtcTestnetAddress)},n.hasCreatedSolanaAccount=function(e){return l(e).some((e=>u(e)))},n.isNonEvmAccount=function(e){const{P2wpkh:t}=r.BtcAccountType,{DataAccount:n}=r.SolAccountType;return Boolean(e&&(e.type===t||e.type===n))},n.isSelectedInternalAccountBtc=function(e){return c(d(e))},n.isSelectedInternalAccountEth=function(e){const t=d(e),{Eoa:n,Erc4337:a}=r.EthAccountType;return Boolean(t&&(t.type===n||t.type===a))},n.isSelectedInternalAccountSolana=function(e){return u(d(e))},n.isSolanaAccount=u;var r=e("@metamask/keyring-api"),a=e("reselect"),o=e("../../shared/lib/multichain/accounts"),s=e("../../shared/modules/selectors/util"),i=e("../../shared/modules/string-utils");function c(e){const{P2wpkh:t}=r.BtcAccountType;return Boolean(e&&e.type===t)}function u(e){const{DataAccount:t}=r.SolAccountType;return Boolean(e&&e.type===t)}const l=n.getInternalAccounts=(0,a.createSelector)((e=>Object.values(e.metamask.internalAccounts.accounts)),(e=>e));n.getMemoizedInternalAccountByAddress=(0,s.createDeepEqualSelector)([l,(e,t)=>t],((e,t)=>e.find((e=>(0,i.isEqualCaseInsensitive)(e.address,t)))));function d(e){const t=e.metamask.internalAccounts.selectedAccount;return e.metamask.internalAccounts.accounts[t]}function m(e,t){return l(e).some((e=>c(e)&&t(e.address)))}}}},{package:"$root$",file:"ui/selectors/accounts.ts"}],[7478,{"../../shared/modules/selectors/util":5801,"@metamask/controller-utils":1474,reselect:5284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getApprovalFlows=function(e){return e.metamask.approvalFlows},n.getApprovalsByOrigin=n.getApprovalRequestsByType=void 0,n.getPendingApprovals=s,n.hasPendingApprovals=function(e,t,n){const r=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>t.includes(e)));if(n)return r.some(n);return r.length>0},n.pendingApprovalsSortedSelector=i,n.selectPendingApprovalsForNavigation=n.selectPendingApproval=void 0;var r=e("@metamask/controller-utils"),a=e("reselect"),o=e("../../shared/modules/selectors/util");function s(e){return Object.values(e.metamask.pendingApprovals??{})}function i(e){return s(e).sort(((e,t)=>e.time-t.time))}n.getApprovalRequestsByType=(e,t,n)=>{const r=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return n?r.filter(n):r};n.selectPendingApprovalsForNavigation=(0,o.createDeepEqualSelector)(i,(e=>e.filter(((t,n)=>(!l(t)||e.findIndex(l)===n)&&(!u(t)||e.findIndex(u)===n)))));const c=(0,a.createSelector)(s,((e,t)=>t),((e,t)=>e.find((({id:e})=>e===t))));n.selectPendingApproval=(0,o.createDeepEqualSelector)(c,(e=>e));function u(e){var t;const n=null===(t=e.requestData)||void 0===t||null===(t=t.asset)||void 0===t?void 0:t.tokenId;return e.type===r.ApprovalType.WatchAsset&&!n}function l(e){var t;const n=null===(t=e.requestData)||void 0===t||null===(t=t.asset)||void 0===t?void 0:t.tokenId;return e.type===r.ApprovalType.WatchAsset&&Boolean(n)}n.getApprovalsByOrigin=(e,t)=>{const n=s(e);return null==n?void 0:n.filter((e=>e.origin===t))}}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[7480,{"../../shared/constants/gas":5725,"../../shared/modules/conversion.utils":5782,"../../shared/modules/gas.utils":5787,"../../shared/modules/selectors/networks":5799,"../ducks/metamask/metamask":6758,"../helpers/utils/confirm-tx.util":6797,"../helpers/utils/tx-helper":6818,"./custom-gas":7481,"./selectors":7494,"./transactions":7500,"@metamask/transaction-controller":2905,reselect:5284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.currentCurrencySelector=n.conversionRateSelector=void 0,n.selectIsMaxValueEnabled=k,n.selectMaxValue=void 0,n.selectMaxValueModeForTransaction=function(e,t){return v(e)[t]},n.selectTransactionAvailableBalance=I,n.selectTransactionFeeById=y,n.use4ByteResolutionSelector=n.unconfirmedTransactionsListSelector=n.unconfirmedTransactionsHashSelector=n.unconfirmedMessagesHashSelector=n.txDataSelector=n.transactionFeeSelector=n.tokenAddressSelector=n.selectTransactionValue=void 0;var r,a=e("reselect"),o=e("@metamask/transaction-controller"),s=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},i=e("../helpers/utils/confirm-tx.util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/constants/gas"),l=e("../../shared/modules/gas.utils"),d=e("../../shared/modules/conversion.utils"),m=e("../../shared/modules/selectors/networks"),g=e("./custom-gas"),p=e("./selectors"),f=e("./transactions");const T=e=>(0,f.getUnapprovedTransactions)(e);n.unconfirmedTransactionsListSelector=(0,a.createSelector)(T,f.unapprovedPersonalMsgsSelector,f.unapprovedDecryptMsgsSelector,f.unapprovedEncryptionPublicKeyMsgsSelector,f.unapprovedTypedMessagesSelector,((e={},t={},n={},r={},a={})=>(0,s.default)(e,t,n,r,a)||[])),n.unconfirmedTransactionsHashSelector=(0,a.createSelector)(T,f.unapprovedPersonalMsgsSelector,f.unapprovedDecryptMsgsSelector,f.unapprovedEncryptionPublicKeyMsgsSelector,f.unapprovedTypedMessagesSelector,((e={},t={},n={},r={},a={})=>({...e,...t,...n,...r,...a}))),n.unconfirmedMessagesHashSelector=(0,a.createSelector)(f.unapprovedPersonalMsgsSelector,f.unapprovedDecryptMsgsSelector,f.unapprovedEncryptionPublicKeyMsgsSelector,f.unapprovedTypedMessagesSelector,((e={},t={},n={},r={})=>({...e,...t,...n,...r})));n.use4ByteResolutionSelector=e=>e.metamask.use4ByteResolution;const h=e=>e.metamask.currentCurrency;n.currentCurrencySelector=h;const S=e=>{var t;return null===(t=e.metamask.currencyRates[(0,m.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate};n.conversionRateSelector=S;const E=e=>e.confirmTransaction.txData;n.txDataSelector=E;const A=(0,a.createSelector)(E,(e=>e&&e.txParams||{})),_=(n.tokenAddressSelector=(0,a.createSelector)(A,(e=>e&&e.to)),function(e,t){var n,r,a,s;const m=h(e),f=S(e),T=(0,c.getNativeCurrency)(e),E=(0,c.getGasFeeEstimates)(e)||{},A=(0,c.getGasEstimateType)(e),_=(0,p.checkNetworkAndAccountSupports1559)(e),y={gasLimit:(null===(n=t.txParams)||void 0===n?void 0:n.gas)??"0x0",gasLimitNoBuffer:t.gasLimitNoBuffer};if(_){var I;const{gasPrice:e="0"}=E,n=E[t.userFeeLevel]||{};if((null===(I=t.txParams)||void 0===I?void 0:I.type)===o.TransactionEnvelopeType.legacy){var k;y.gasPrice=(null===(k=t.txParams)||void 0===k?void 0:k.gasPrice)??(0,d.decGWEIToHexWEI)(e)}else{var N,v,C,w;const{suggestedMaxPriorityFeePerGas:r,suggestedMaxFeePerGas:a}=n;y.maxFeePerGas=null===(N=t.txParams)||void 0===N||!N.maxFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&a?(0,d.decGWEIToHexWEI)(a||e):null===(v=t.txParams)||void 0===v?void 0:v.maxFeePerGas,y.maxPriorityFeePerGas=null===(C=t.txParams)||void 0===C||!C.maxPriorityFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&r?r&&(0,d.decGWEIToHexWEI)(r)||y.maxFeePerGas:null===(w=t.txParams)||void 0===w?void 0:w.maxPriorityFeePerGas,y.baseFeePerGas=(0,d.decGWEIToHexWEI)(E.estimatedBaseFee)}}else switch(A){case u.GasEstimateTypes.feeMarket:case u.GasEstimateTypes.none:y.gasPrice=(null===(r=t.txParams)||void 0===r?void 0:r.gasPrice)??"0x0";break;case u.GasEstimateTypes.ethGasPrice:y.gasPrice=(null===(a=t.txParams)||void 0===a?void 0:a.gasPrice)??(0,d.decGWEIToHexWEI)(E.gasPrice);break;case u.GasEstimateTypes.legacy:y.gasPrice=(null===(s=t.txParams)||void 0===s?void 0:s.gasPrice)??(0,g.getAveragePriceEstimateInHexWEI)(e)}const{txParams:{value:O="0x0"}={}}=t,R=(0,d.getValueFromWeiHex)({value:O,fromCurrency:T,toCurrency:m,conversionRate:f,numberOfDecimals:2}),M=(0,d.getValueFromWeiHex)({value:O,fromCurrency:T,toCurrency:T,conversionRate:f,numberOfDecimals:6}),b=(0,l.getMinimumGasTotalInHexWei)(y),P=(0,l.getMaximumGasTotalInHexWei)(y),D=(0,i.getTransactionFee)({value:b,fromCurrency:T,toCurrency:m,numberOfDecimals:2,conversionRate:f}),B=(0,i.getTransactionFee)({value:P,fromCurrency:T,toCurrency:m,numberOfDecimals:2,conversionRate:f}),L=(0,i.getTransactionFee)({value:b,fromCurrency:T,toCurrency:T,numberOfDecimals:6,conversionRate:f});return{hexTransactionAmount:O,fiatTransactionAmount:R,ethTransactionAmount:M,hexMinimumTransactionFee:b,fiatMinimumTransactionFee:D,hexMaximumTransactionFee:P,fiatMaximumTransactionFee:B,ethTransactionFee:L,fiatTransactionTotal:(0,i.addFiat)(D,R),ethTransactionTotal:(0,i.addEth)(L,M),hexTransactionTotal:(0,d.sumHexes)(O,b),gasEstimationObject:y}});function y(e,t){const n=(0,f.selectTransactionMetadata)(e,t);return _(e,n??{})}function I(e,t){var n;return null===(n=(0,p.getMetaMaskAccounts)(e)[(0,f.selectTransactionSender)(e,t)])||void 0===n?void 0:n.balance}function k(e,t){var n;return(null===(n=e.confirmTransaction.maxValueMode)||void 0===n?void 0:n[t])??!1}n.transactionFeeSelector=_;const N=n.selectMaxValue=(0,a.createSelector)(y,I,((e,t)=>t&&e.hexMaximumTransactionFee?(0,d.subtractHexes)(t,e.hexMaximumTransactionFee):undefined)),v=(n.selectTransactionValue=(0,a.createSelector)(k,N,f.selectTransactionMetadata,((e,t,n)=>{var r;return e?t:null==n||null===(r=n.txParams)||void 0===r?void 0:r.value})),e=>e.confirmTransaction.maxValueMode)}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[7481,{"../../app/scripts/lib/util":187,"../../shared/constants/common":5721,"../../shared/constants/gas":5725,"../../shared/lib/transactions-controller-utils":5775,"../../shared/modules/Numeric":5777,"../../shared/modules/conversion.utils":5782,"../ducks/metamask/metamask":6758,"../ducks/send":6763,"../helpers/utils/confirm-tx.util":6797,"../helpers/utils/formatters":6799,"./selectors":7494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.basicPriceEstimateToETHTotal=S,n.getAverageEstimate=T,n.getAveragePriceEstimateInHexWEI=function(e){return A(T(e))},n.getBasicGasEstimateLoadingStatus=function(e){return!1===_(e)},n.getCustomGasLimit=function(e){return e.gas.customData.limit},n.getCustomGasPrice=p,n.getDefaultActiveButtonIndex=function(e,t,n){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,r.addHexPrefix)(t||n))},n.getFastPriceEstimate=h,n.getFastPriceEstimateInHexWEI=function(e){return A(h(e)||"0x0")},n.getGasPriceInHexWei=A,n.getIsCustomNetworkGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&!(0,g.getIsMainnet)(e)},n.getIsGasEstimatesFetched=_,n.getNoGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.none},n.getRenderableConvertedCurrencyFee=function(e,t,n,r){const s=S(new d.Numeric(e,10).toBase(16).toString(),t),i=(0,a.decEthToConvertedCurrency)(s,n,r);return(0,o.formatCurrency)(i,n)},n.getRenderableEthFee=function(e,t,n=9,r="ETH"){const a=S(new d.Numeric(e,10).toBase(16).toString(),t,n);return(0,s.formatETHFee)(a,r)},n.getSafeLowEstimate=f,n.isCustomPriceExcessive=function(e,t=!1){const n=t?(0,i.getGasPrice)(e):p(e),r=h(e);if(!n||!r)return!1;return new d.Numeric(n,16,m.EtherDenomination.WEI).toDenomination(m.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*r),10)},n.isCustomPriceSafe=function(e){const t=f(e),n=p(e);if(!n)return!0;if(!t)return!1;return new d.Numeric(n,16,m.EtherDenomination.WEI).toDenomination(m.EtherDenomination.GWEI).greaterThan(t,10)},n.isCustomPriceSafeForCustomNetwork=function(e){const t=T(e),n=p(e);if(!n)return!0;if(!t)return!1;return new d.Numeric(n,16,m.EtherDenomination.WEI).toDenomination(m.EtherDenomination.GWEI).greaterThan(t,10)},n.priceEstimateToWei=E;var r=e("../../app/scripts/lib/util"),a=e("../../shared/modules/conversion.utils"),o=e("../helpers/utils/confirm-tx.util"),s=e("../helpers/utils/formatters"),i=e("../ducks/send"),c=e("../../shared/constants/gas"),u=e("../ducks/metamask/metamask"),l=e("../../shared/lib/transactions-controller-utils"),d=e("../../shared/modules/Numeric"),m=e("../../shared/constants/common"),g=e("./selectors");function p(e){return e.gas.customData.price}function f(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function T(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function h(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function S(e,t,n=9){return new d.Numeric((0,l.calcGasTotal)(t,e),16,m.EtherDenomination.GWEI).round(n).toBase(10).toString()}function E(e){return new d.Numeric(e,16,m.EtherDenomination.GWEI).toDenomination(m.EtherDenomination.WEI).round(9).toString()}function A(e){const t=new d.Numeric(e,10).toBase(16).toString();return(0,r.addHexPrefix)(E(t))}function _(e){const t=(0,u.getGasEstimateType)(e);return!(0,u.isEIP1559Network)(e)&&t!==c.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[7482,{"../../shared/constants/onboarding":5737,"../helpers/constants/routes":6776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstTimeFlowType=void 0,n.getFirstTimeFlowTypeRouteAfterMetaMetricsOptIn=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===r.FirstTimeFlowType.create)return a.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===r.FirstTimeFlowType.import)return a.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===r.FirstTimeFlowType.restore)return a.ONBOARDING_SECURE_YOUR_WALLET_ROUTE;return a.DEFAULT_ROUTE},n.getFirstTimeFlowTypeRouteAfterUnlock=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===r.FirstTimeFlowType.create)return a.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===r.FirstTimeFlowType.import)return a.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===r.FirstTimeFlowType.restore)return a.ONBOARDING_METAMETRICS;return a.DEFAULT_ROUTE},n.getOnboardingInitiator=void 0;var r=e("../../shared/constants/onboarding"),a=e("../helpers/constants/routes");n.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;n.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const n=Object.keys(t)[0];return{location:n,tabId:t[n]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[7485,{"../pages/confirmations/selectors/confirm":7245,"./accounts":7476,"./approvals":7478,"./confirm-transaction":7480,"./custom-gas":7481,"./first-time-flow":7482,"./metametrics":7487,"./multichain/networks":7490,"./origin-throttling":7492,"./remote-feature-flags":7493,"./selectors":7494,"./transactions":7500},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("../pages/confirmations/selectors/confirm");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=e("./confirm-transaction");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=e("./custom-gas");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=e("./first-time-flow");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var i=e("./metametrics");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=e("./selectors");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=e("./transactions");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=e("./approvals");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=e("./accounts");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===d[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}}))}));var m=e("./remote-feature-flags");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===m[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return m[e]}}))}));var g=e("./origin-throttling");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===g[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return g[e]}}))}));var p=e("./multichain/networks");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===p[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return p[e]}}))}))}}},{package:"$root$",file:"ui/selectors/index.js"}],[7487,{reselect:5284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectMatchingFragment=n.selectFragments=n.selectFragmentBySuccessEvent=n.selectFragmentById=n.getParticipateInMetaMetrics=n.getLatestMetricsEventTimestamp=n.getDataCollectionForMarketing=void 0;var r=e("reselect");const a=e=>e.metamask.fragments;n.selectFragments=a;n.getDataCollectionForMarketing=e=>e.metamask.dataCollectionForMarketing;n.getParticipateInMetaMetrics=e=>Boolean(e.metamask.participateInMetaMetrics);n.getLatestMetricsEventTimestamp=e=>e.metamask.latestNonAnonymousEventTimestamp;const o=n.selectFragmentBySuccessEvent=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined)),s=n.selectFragmentById=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));n.selectMatchingFragment=(0,r.createSelector)(((e,t)=>o(e,t.fragmentOptions)),((e,t)=>s(e,t.existingId)),((e,t)=>t??e))}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[7489,{"../../app/scripts/lib/util":187,"../../shared/constants/multichain/assets":5732,"../../shared/constants/multichain/networks":5733,"../../shared/constants/network":5734,"../../shared/modules/Numeric":5777,"../../shared/modules/selectors/networks":5799,"../../shared/modules/selectors/util":5801,"../ducks/metamask/metamask":6758,"./accounts":7476,"./selectors":7494,"@metamask/keyring-api":1983,"@metamask/network-controller":2176,"@metamask/utils":2950,"prop-types":5013,reselect:5284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkPropType=n.InternalAccountPropType=void 0,n.getImageForChainId=function(e){return{...g.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP,...l.MULTICHAIN_TOKEN_IMAGE_MAP}[e]},n.getLastSelectedNonEvmAccount=function(e){const t=(0,h.getInternalAccounts)(e).filter((e=>!(0,o.isEvmAccountType)(e.type))).sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)));return t.length>0?t[0]:undefined},n.getLastSelectedSolanaAccount=function(e){const t=(0,h.getInternalAccounts)(e).filter((e=>(0,h.isSolanaAccount)(e))).sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)));return t.length>0?t[0]:undefined},n.getMemoizedMultichainNetworkConfigurationsByChainId=void 0,n.getMultichainBalances=C,n.getMultichainCoinRates=void 0,n.getMultichainConversionRate=function(e,t){var n;const{conversionRates:r}=e.metamask,{chainId:a}=A(e,t),o=null===(n=(0,f.getConversionRatesForNativeAsset)({conversionRates:r,chainId:a}))||void 0===n?void 0:n.rate;return _(e,t)?(0,d.getConversionRate)(e):o},n.getMultichainCurrencyImage=k,n.getMultichainCurrentChainId=function(e){const{chainId:t}=y(e);return t},n.getMultichainCurrentCurrency=function(e){return(0,d.getCurrentCurrency)(e)},n.getMultichainCurrentNetwork=I,n.getMultichainDefaultToken=N,n.getMultichainIsBitcoin=function(e,t){const n=_(e,t),{symbol:r}=N(e,t);return!n&&"BTC"===r},n.getMultichainIsEvm=_,n.getMultichainIsMainnet=function(e,t){const n=t??(0,h.getSelectedInternalAccount)(e),r=y(e,n);if(_(e,t))return(0,S.getIsMainnet)(e);const a=l.MULTICHAIN_ACCOUNT_TYPE_TO_MAINNET[n.type];return r.chainId===a??!1},n.getMultichainIsSolana=function(e,t){const n=_(e,t),{symbol:r}=N(e,t);return!n&&"SOL"===r},n.getMultichainIsTestnet=v,n.getMultichainNativeCurrency=function(e,t){return _(e,t)?(0,d.getNativeCurrency)(e):y(e,t).ticker},n.getMultichainNativeCurrencyImage=function(e,t){return k(e,t)},n.getMultichainNetwork=A,n.getMultichainNetworkConfigurationsByChainId=void 0,n.getMultichainNetworkProviders=E,n.getMultichainProviderConfig=y,n.getMultichainSelectedAccountCachedBalance=w,n.getMultichainSelectedAccountCachedBalanceIsZero=void 0,n.getMultichainShouldShowFiat=function(e,t){const n=t??(0,h.getSelectedInternalAccount)(e),r=v(e,n),a=!r;return _(e,n)?(0,S.getShouldShowFiat)(e):a||r&&(0,S.getShowFiatInTestnets)(e)},n.getMultichainTransactions=function(e){return e.metamask.nonEvmTransactions},n.getSelectedAccountMultichainTransactions=function(e){const t=(0,h.getSelectedInternalAccount)(e);if((0,o.isEvmAccountType)(t.type))return undefined;return e.metamask.nonEvmTransactions[t.id]},n.isChainIdMainnet=function(e){return e===g.CHAIN_IDS.MAINNET};var r,a=(r=e("prop-types"))&&r.__esModule?r:{default:r},o=e("@metamask/keyring-api"),s=e("@metamask/utils"),i=e("reselect"),c=e("@metamask/network-controller"),u=e("../../shared/modules/Numeric"),l=e("../../shared/constants/multichain/networks"),d=e("../ducks/metamask/metamask"),m=e("../../shared/constants/multichain/assets"),g=e("../../shared/constants/network"),p=e("../../shared/modules/selectors/networks"),f=e("../../app/scripts/lib/util"),T=e("../../shared/modules/selectors/util"),h=e("./accounts"),S=e("./selectors");n.MultichainNetworkPropType=a.default.shape({nickname:a.default.string.isRequired,isEvmNetwork:a.default.bool.isRequired,chainId:a.default.string,network:a.default.oneOfType([a.default.shape({rpcUrl:a.default.string,type:a.default.string.isRequired,chainId:a.default.string.isRequired,ticker:a.default.string.isRequired,rpcPrefs:a.default.shape({blockExplorerUrl:a.default.string,imageUrl:a.default.string}),nickname:a.default.string,id:a.default.string}),a.default.shape({chainId:a.default.string.isRequired,ticker:a.default.string.isRequired,rpcPrefs:a.default.shape({blockExplorerUrl:a.default.string,imageUrl:a.default.string})})]).isRequired}),n.InternalAccountPropType=a.default.shape({id:a.default.string.isRequired,address:a.default.string.isRequired,metadata:a.default.shape({name:a.default.string.isRequired,snap:a.default.shape({id:a.default.string.isRequired,name:a.default.string,enabled:a.default.bool}),keyring:a.default.shape({type:a.default.string.isRequired}).isRequired}).isRequired,type:a.default.string.isRequired});function E(e){return Object.values(l.MULTICHAIN_PROVIDER_CONFIGS)}function A(e,t){if(_(e,t)){var n;const t=(0,p.getCurrentChainId)(e),r=(0,p.getProviderConfig)(e),a=t;r.rpcPrefs={...r.rpcPrefs,imageUrl:g.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[a]};return{nickname:(null===(n=(0,p.getNetworkConfigurationsByChainId)(e)[t])||void 0===n?void 0:n.name)??r.rpcUrl,isEvmNetwork:!0,chainId:`${s.KnownCaipNamespace.Eip155}:${Number(t)}`,network:r}}const r=t??(0,h.getSelectedInternalAccount)(e),a=E().find((e=>e.isAddressCompatible(r.address)));if(!a)throw new Error("Could not find non-EVM provider for the current configuration. This should never happen.");return{nickname:a.nickname,isEvmNetwork:!1,chainId:null==a?void 0:a.chainId,network:a}}function _(e,t){const n=(0,d.getCompletedOnboarding)(e),r=t??(0,S.getMaybeSelectedInternalAccount)(e);return!n||!r||(0,o.isEvmAccountType)(r.type)}function y(e,t){return A(e,t).network}function I(e,t){return y(e,t)}function k(e,t){var n;if(_(e,t))return(0,S.getNativeCurrencyImage)(e);return null===(n=y(e,t).rpcPrefs)||void 0===n?void 0:n.imageUrl}function N(e,t){var n;return{symbol:_(e,t)?(null===(n=(0,p.getProviderConfig)(e))||void 0===n?void 0:n.ticker)??"ETH":y(e,t).ticker}}function v(e,t){const n=y(e,t??(0,h.getSelectedInternalAccount)(e));return _(e,t)?g.TEST_NETWORK_IDS.includes(n.chainId):n.chainId===l.MultichainNetworks.BITCOIN_TESTNET}function C(e){return e.metamask.balances}function w(e){return _(e)?(0,S.getSelectedAccountCachedBalance)(e):function(e,t){var n;const r=C(e),a=t??(0,h.getSelectedInternalAccount)(e),o=I(e),s=null===(n=m.MULTICHAIN_NETWORK_TO_ASSET_TYPES[o.chainId])||void 0===n?void 0:n[0];s||console.warn("Could not find asset type for network:",o);const i=null==r?void 0:r[a.id];i||console.warn("Could not find balances for account:",a);const c=null==i?void 0:i[s];return c||console.warn("Could not find balance for asset:",s),(null==c?void 0:c.amount)??0}(e)}n.getMultichainCoinRates=e=>e.metamask.rates;n.getMultichainSelectedAccountCachedBalanceIsZero=(0,i.createSelector)([_,w],((e,t)=>{const n=e?16:10;return new u.Numeric(t,n).isZero()}));const O=e=>({...(0,p.getNetworkConfigurationsByChainId)(e),[l.MultichainNetworks.SOLANA]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.SOLANA],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.SOLANA].nickname??"",nativeCurrency:"sol",rpcEndpoints:[{url:"",type:c.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.SOLANA}});n.getMultichainNetworkConfigurationsByChainId=O;n.getMemoizedMultichainNetworkConfigurationsByChainId=(0,T.createDeepEqualSelector)([O],(e=>e))}}},{package:"$root$",file:"ui/selectors/multichain.ts"}],[7490,{"../../../shared/modules/selectors/networks":5799,"../../../shared/modules/selectors/util":5801,"../accounts":7476,"../selectors":7494,"@metamask/keyring-api":1983,"@metamask/multichain-network-controller":2092},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSelectedMultichainNetworkConfiguration=n.getSelectedMultichainNetworkChainId=n.getNonEvmMultichainNetworkConfigurationsByChainId=n.getMultichainNetworkConfigurationsByChainId=n.getIsNonEvmNetworksEnabled=n.getIsEvmMultichainNetworkSelected=void 0;var r=e("@metamask/multichain-network-controller"),a=e("@metamask/keyring-api"),o=e("../../../shared/modules/selectors/networks"),s=e("../../../shared/modules/selectors/util"),i=e("../selectors"),c=e("../accounts");n.getNonEvmMultichainNetworkConfigurationsByChainId=e=>e.metamask.multichainNetworkConfigurationsByChainId;n.getIsNonEvmNetworksEnabled=(0,s.createDeepEqualSelector)(i.getIsBitcoinSupportEnabled,i.getIsSolanaSupportEnabled,c.getInternalAccounts,((e,t,n)=>{if(e&&t)return{bitcoinEnabled:!0,solanaEnabled:!0};let r=e,o=t;for(const{scopes:e}of n)if(null!=e&&e.includes(a.BtcScope.Mainnet)&&(r=!0),null!=e&&e.includes(a.SolScope.Mainnet)&&(o=!0),r&&o)break;return{bitcoinEnabled:r,solanaEnabled:o}}));const u=n.getMultichainNetworkConfigurationsByChainId=(0,s.createDeepEqualSelector)(o.getNetworkConfigurationsByChainId,(e=>[{...Object.entries(e).reduce(((e,[,t])=>({...e,[(0,r.toEvmCaipChainId)(t.chainId)]:{...(0,r.toMultichainNetworkConfiguration)(t),name:t.name||t.rpcEndpoints[t.defaultRpcEndpointIndex].url}})),{})},e])),l=e=>e.metamask.isEvmSelected;n.getIsEvmMultichainNetworkSelected=l;const d=e=>{if(l(e)){const t=(0,o.getProviderConfig)(e);return(0,r.toEvmCaipChainId)(t.chainId)}return e.metamask.selectedMultichainNetworkChainId};n.getSelectedMultichainNetworkChainId=d;n.getSelectedMultichainNetworkConfiguration=e=>{const t=d(e),[n]=u(e);return n[t]}}}},{package:"$root$",file:"ui/selectors/multichain/networks.ts"}],[7492,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectThrottledOrigins=void 0;n.selectThrottledOrigins=e=>e.metamask.throttledOrigins}}},{package:"$root$",file:"ui/selectors/origin-throttling.ts"}],[7493,{"../../shared/lib/manifestFlags":5765,"lodash/merge":4856},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRemoteFeatureFlags=function(e){const t=(0,o.getManifestFlags)().remoteFeatureFlags,n=e.metamask.remoteFeatureFlags;return(0,a.default)({},n,t)};var r,a=(r=e("lodash/merge"))&&r.__esModule?r:{default:r},o=e("../../shared/lib/manifestFlags")}}},{package:"$root$",file:"ui/selectors/remote-feature-flags.ts"}],[7494,{"../../app/scripts/lib/util":187,"../../shared/constants/app":5719,"../../shared/constants/bridge":5720,"../../shared/constants/hardware-wallets":5726,"../../shared/constants/keyring":5727,"../../shared/constants/labels":5728,"../../shared/constants/multichain/assets":5732,"../../shared/constants/network":5734,"../../shared/constants/swaps":5745,"../../shared/constants/terms":5746,"../../shared/constants/time":5747,"../../shared/constants/tokens":5748,"../../shared/constants/transaction":5749,"../../shared/modules/conversion.utils":5782,"../../shared/modules/hexstring-utils":5788,"../../shared/modules/selectors/networks":5799,"../../shared/modules/selectors/util":5801,"../../shared/modules/string-utils":5802,"../../shared/modules/transaction.utils":5804,"../../shared/notifications":5806,"../ducks/app/app":6743,"../ducks/metamask/metamask":6758,"../helpers/constants/design-system":6770,"../helpers/utils/snaps":6814,"../helpers/utils/util":6819,"../pages/confirmations/confirmation/templates":7174,"./accounts":7476,"./approvals":7478,"./multichain":7489,"./remote-feature-flags":7493,"./transactions":7500,"@metamask/bridge-controller":1390,"@metamask/controller-utils":1474,"@metamask/keyring-api":1983,"@metamask/keyring-controller":1990,"@metamask/multichain":2146,"@metamask/name-controller":2164,"@metamask/network-controller":2176,"@metamask/permission-controller":2393,"@metamask/snaps-rpc-methods":2700,"@metamask/snaps-utils":2850,"@metamask/transaction-controller":2905,lodash:4855,"punycode/punycode.js":5071,reselect:5284,semver:5547},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountSupportsSmartTx=function(e){const t=Z(e);return Boolean("snap"!==t)},n.accountsWithSendEtherInfoSelector=Ie,n.activeTabHasPermissions=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Boolean(Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},n.checkIfMethodIsEnabled=function(e,t){const n=(0,$.getSelectedInternalAccount)(e);return Boolean(n.methods.includes(t))},n.checkNetworkAndAccountSupports1559=function(e,t){return(0,P.isEIP1559Network)(e,t)},n.checkNetworkOrAccountNotSupports1559=function(e){return(0,P.isNotEIP1559Network)(e)},n.doesAddressRequireLedgerHidConnection=function(e,t){const n=(0,P.isAddressLedger)(e,t),r=(0,P.getLedgerTransportType)(e)===y.LedgerTransportTypes.webhid,a=(0,D.getLedgerWebHidConnectedStatus)(e)!==y.WebHIDConnectedStatuses.connected,o=(0,D.getLedgerTransportStatus)(e)!==y.HardwareTransportStates.verified;return n&&r&&(a||o)},n.getAccountName=function(e,t){const n=e.find((e=>(0,B.isEqualCaseInsensitive)(e.address,t)));return n&&""!==n.metadata.name?n.metadata.name:""},n.getAccountToConnectToActiveTab=function(e){const t=(0,$.getSelectedInternalAccount)(e),n=Rt(e),{metamask:{internalAccounts:{accounts:r}}}=e,a=Object.keys(r).length;if(n.length&&n.length!==a&&-1===n.findIndex((e=>e===t.address)))return re(e,t.id);return undefined},n.getAccountType=Z,n.getAccountTypeForKeyring=J,n.getAccountsWithLabels=function(e){return Te(e).map((e=>{const{address:t,metadata:{name:n},balance:r}=e;return{...e,addressLabel:`${n.length<k.TRUNCATED_NAME_CHAR_LIMIT?n:`${n.slice(0,k.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,w.shortenAddress)(t)})`,label:n,balance:r}}))},n.getAddressBook=_e,n.getAddressBookEntry=ye,n.getAddressBookEntryOrAccountName=function(e,t){const n=ye(e,t);if(n&&""!==n.name)return n.name;const r=Object.values((0,$.getInternalAccounts)(e)).find((e=>(0,B.isEqualCaseInsensitive)(e.address,t)));return(null==r?void 0:r.metadata.name)||t},n.getAddressConnectedSubjectMap=function(e){const t=Pt(e),n=bt(e),r={};return Object.keys(n).forEach((e=>{const{iconUrl:a,name:o}=t[e]||{};n[e].forEach((t=>{const n=o||e;r[t]=r[t]?{...r[t],[e]:{iconUrl:a,name:n}}:{[e]:{iconUrl:a,name:n}}}))})),r},n.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[(0,E.getCurrentChainId)(e)]},n.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},n.getAllAccountsOnNetworkAreEmpty=function(e){const t=de(e)??{},n=Object.values(t).every((e=>"0x0"===e||"0x00"===e)),r=0===ie(e);return n&&r},n.getAllConnectedAccounts=n.getAllChainsToPoll=void 0,n.getAllDetectedTokens=function(e){return e.metamask.allDetectedTokens},n.getAllDetectedTokensForSelectedAddress=function(e){if(!(0,P.getCompletedOnboarding)(e))return{};const{address:t}=(0,$.getSelectedInternalAccount)(e);return Object.entries(e.metamask.allDetectedTokens||{}).reduce(((e,[n,r])=>{const a=r[t];return a&&(e[n]=a.map((e=>({...e,chainId:n})))),e}),{})},n.getAllDomains=Ee,n.getAllSnapAvailableUpdates=n.getAllEnabledNetworks=void 0,n.getAllTokens=Se,n.getAnySnapUpdateAvailable=void 0,n.getAppIsLoading=function(e){return e.appState.isLoading},n.getBlockExplorerLinkText=function(e,t=!1){const n=It(e),r=Ye(e);let a={firstPart:"addBlockExplorer",secondPart:""};r.blockExplorerUrl?a=t?{firstPart:"blockExplorerView",secondPart:(0,w.getURLHostName)(r.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===n&&(a=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return a},n.getConnectedSubjectsForAllAddresses=n.getConnectedSnapsList=n.getConnectedSitesListWithNetworkInfo=n.getConnectedSitesList=n.getConfirmationExchangeRates=n.getChainIdsToPoll=void 0,n.getConnectedSubjectsForSelectedAddress=function(e){const t=(0,$.getSelectedInternalAccount)(e),n=Ct(e),r=Pt(e),a=[];return Object.entries(n).forEach((([e,n])=>{if(!Bt(n).includes(t.address))return;const{extensionId:o,name:s,iconUrl:i}=r[e]||{};a.push({extensionId:o,origin:e,name:s,iconUrl:i})})),a},n.getCrossChainMetaMaskCachedBalances=function(e){const t=e.metamask.accountsByChainId;return Object.keys(t).reduce(((e,n)=>(e[n]=Object.keys(t[n]).reduce(((e,r)=>(e[r]=t[n][r].balance,e)),{}),e)),{})},n.getCrossChainTokenExchangeRates=void 0,n.getCurrencyRates=Xe,n.getCurrentAccountWithSendEtherInfo=ke,n.getCurrentEthBalance=function(e){var t;return null===(t=ke(e))||void 0===t?void 0:t.balance},n.getCurrentKeyring=Q,n.getCurrentNetwork=void 0,n.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},n.getCustomNonceValue=function(e){return String(e.appState.customNonceValue)},n.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},n.getDefaultHomeActiveTabName=function(e){return e.metamask.defaultHomeActiveTabName},n.getDetectedTokensInCurrentNetwork=function(e){var t;const n=(0,E.getCurrentChainId)(e),{address:r}=(0,$.getSelectedInternalAccount)(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(t=t[n])||void 0===t?void 0:t[r]},n.getEditedNetwork=function(e){return e.appState.editedNetwork},n.getEnabledSnaps=void 0,n.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t]){const n=e.metamask.ensResolutionsByAddress[t];return(0,a.toUnicode)(n)}const n=ye(e,t)||ne(e,t);return(null==n?void 0:n.name)||""},n.getEthereumAddressNames=function(e){var t;return(null===(t=e.metamask.names)||void 0===t?void 0:t[d.NameType.ETHEREUM_ADDRESS])||{}},n.getEvmInternalAccounts=void 0,n.getExternalServicesOnboardingToggleState=function(e){return e.appState.externalServicesOnboardingToggleState},n.getFeatureFlags=function(e){return e.metamask.featureFlags},n.getFeatureNotificationsEnabled=function(e){const{featureNotificationsEnabled:t=!1}=be(e);return t},n.getFirstPermissionRequest=function(e){const t=jt(e);return t&&t[0]?t[0]:null},n.getFirstSnapInstallOrUpdateRequest=function(e){var t;return(null===(t=Wt(e))||void 0===t?void 0:t[0])??null},n.getFullTxData=void 0,n.getHDEntropyIndex=function(e){const t=te(e),n=ce(e),r=n.filter((e=>e.type===I.KeyringType.hdKeyTree)).findIndex((e=>e.accounts.includes(t)));return-1===r?undefined:r},n.getHardwareWalletType=function(e){const t=Q(e);return X(e)?t.type:undefined},n.getHdKeyringOfSelectedAccountOrPrimaryKeyring=n.getHdKeyringIndexByIdOrDefault=void 0,n.getHiddenAccountsList=ht,n.getInterfaceContent=n.getInterface=n.getInsightSnaps=n.getInsightSnapIds=n.getHideSnapBranding=void 0,n.getInternalAccount=re,n.getInternalAccountByAddress=ne,n.getInternalAccountsSortedByKeyring=void 0,n.getIpfsGateway=function(e){return e.metamask.ipfsGateway},n.getIsAddSnapAccountEnabled=function(e){return e.metamask.addSnapAccountEnabled},n.getIsAddingNewNetwork=function(e){return e.appState.isAddingNewNetwork},n.getIsBitcoinSupportEnabled=function(e){const{bitcoinSupportEnabled:t}=e.metamask;return Boolean(t)},n.getIsBitcoinTestnetSupportEnabled=function(e){const{bitcoinTestnetSupportEnabled:t}=e.metamask;return Boolean(t)},n.getIsBridgeChain=function(e,t){const n=(0,$.getSelectedInternalAccount)(e),{chainId:r,isEvmNetwork:a}=(0,V.getMultichainNetwork)(e,n);let o=r;a&&(o=(0,E.getCurrentChainId)(e));const s=t??o;return v.ALLOWED_BRIDGE_CHAIN_IDS.includes(s)},n.getIsBridgeEnabled=void 0,n.getIsCustomNetwork=It,n.getIsDynamicTokenListAvailable=_t,n.getIsLineaMainnet=function(e){return(0,E.getCurrentChainId)(e)===_.CHAIN_IDS.LINEA_MAINNET},n.getIsMainnet=Re,n.getIsMultiRpcOnboarding=function(e){return e.appState.isMultiRpcOnboarding},n.getIsNonStandardEthChain=function(e){return!(Re(e)||Me(e))},n.getIsPortfolioDiscoverButtonEnabled=function(e){const{nePortfolioDiscoverButton:t}=(0,Y.getRemoteFeatureFlags)(e);return Boolean(t)},n.getIsSecurityAlertsEnabled=function(e){return e.metamask.securityAlertsEnabled},n.getIsSigningQRHardwareTransaction=function(e){var t;return(null===(t=e.metamask.qrHardware)||void 0===t||null===(t=t.sign)||void 0===t?void 0:t.request)!==undefined},n.getIsSolanaSupportEnabled=function(e){const{addSolanaAccount:t}=(0,Y.getRemoteFeatureFlags)(e);return Boolean(t)},n.getIsSwapsChain=function(e,t){const n=(0,E.getCurrentChainId)(e),r=t??n;return N.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(r)},n.getIsTestnet=Me,n.getIsTokenDetectionInactiveOnMainnet=yt,n.getIsTokenDetectionSupported=function(e){const t=At(e),n=_t(e);return t&&n},n.getIsTokenNetworkFilterEqualCurrentNetwork=Be,n.getIsWatchEthereumAccountEnabled=function(e){return e.metamask.watchEthereumAccountEnabled},n.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=At(e),n=Re(e);return _t(e)&&!t&&!n},n.getKeyringOfSelectedAccount=void 0,n.getKeyringSnapAccounts=function(e){const t=(0,$.getInternalAccounts)(e);return Object.values(t).filter((e=>{const{keyring:t}=e.metadata;return t.type===I.KeyringType.snap}))},n.getKeyringSnapRemovalResult=function(e){return e.appState.keyringRemovalSnapModal},n.getKnownMethodData=function(e,t){const{knownMethodData:n,use4ByteResolution:r}=e.metamask;if(!r||!(0,H.hasTransactionData)(t))return null;const a=(0,A.addHexPrefix)(t).slice(0,10);if(a.length<10)return null;return(null==n?void 0:n[a])??null},n.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,n)=>(t[n].eth_accounts&&(e[n]=JSON.parse(JSON.stringify(t[n].eth_accounts))),e)),{})},n.getLastViewedUserSurvey=function(e){return e.metamask.lastViewedUserSurvey},n.getLocale=ut,n.getMarketData=void 0,n.getMaybeSelectedInternalAccount=function(e){var t,n;const r=null===(t=e.metamask.internalAccounts)||void 0===t?void 0:t.selectedAccount;return r?null===(n=e.metamask.internalAccounts)||void 0===n?void 0:n.accounts[r]:undefined},n.getMemoizedUnapprovedTemplatedConfirmations=n.getMemoizedUnapprovedConfirmations=n.getMemoizedTargetSubjectMetadata=n.getMemoizedMetadataContract=n.getMemoizedMetaMaskInternalAccounts=n.getMemoizedInterfaces=n.getMemoizedInterfaceContent=n.getMemoizedInterface=n.getMemoizedCurrentChainId=void 0,n.getMetaMaskAccountBalances=le,n.getMetaMaskAccountsOrdered=n.getMetaMaskAccountsConnected=n.getMetaMaskAccounts=void 0,n.getMetaMaskCachedBalances=de,n.getMetaMaskHdKeyrings=void 0,n.getMetaMaskKeyrings=ce,n.getMetaMaskKeyringsMetadata=function(e){return e.metamask.keyringsMetadata},n.getMetaMetricsDataDeletionId=function(e){return e.metamask.metaMetricsDataDeletionId},n.getMetaMetricsDataDeletionStatus=function(e){return e.metamask.metaMetricsDataDeletionStatus},n.getMetaMetricsDataDeletionTimestamp=function(e){return e.metamask.metaMetricsDataDeletionTimestamp},n.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},n.getNameLookupSnapsIds=n.getMultipleTargetsSubjectMetadata=n.getMetadataContractName=void 0,n.getNameSources=function(e){return e.metamask.nameSources||{}},n.getNames=function(e){return e.metamask.names||{}},n.getNativeCurrencyForChain=Ze,n.getNativeCurrencyImage=function(e){const t=(0,E.getCurrentChainId)(e);return _.CHAIN_ID_TOKEN_IMAGE_MAP[t]},n.getNativeTokenCachedBalanceByChainIdByAccountAddress=ge,n.getNetworkConfigurationIdByChainId=n.getNetworkClientIdsToPoll=n.getNativeTokenCachedBalanceByChainIdSelector=void 0,n.getNetworkIdentifier=function(e){const{type:t,nickname:n,rpcUrl:r}=(0,E.getProviderConfig)(e);return n||r||t},n.getNetworkToAutomaticallySwitchTo=function(e){const t=St(e),n=ze(e);if((0,A.getEnvironmentType)()===x.ENVIRONMENT_TYPE_POPUP&&(0,P.getIsUnlocked)(e)&&n&&0===t){const t=Ee(e)[n],r=Et(e);if(t&&r.id!==t)return t}return null},n.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},n.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},n.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},n.getNewTokensImported=function(e){return e.appState.newTokensImported},n.getNewTokensImportedError=function(e){return e.appState.newTokensImportedError},n.getNextSuggestedNonce=function(e){return Number(e.appState.nextNonce)},n.getNftIsStillFetchingIndication=function(e){return e.appState.isNftStillFetchingIndication},n.getNotifySnaps=void 0,n.getNumberOfAllUnapprovedTransactionsAndMessages=St,n.getNumberOfTokens=ie,n.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},n.getOnboardingDate=function(e){return e.metamask.onboardingDate},n.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},n.getOrderedConnectedAccountsForActiveTab=Ht,n.getOrderedConnectedAccountsForConnectedDapp=qt,n.getOrderedNetworksList=function(e){return e.metamask.orderedNetworkList},n.getOrigin=xt,n.getOriginOfCurrentTab=ze,n.getPendingTokens=void 0,n.getPermissionSubjects=Ct,n.getPermissionSubjectsDeepEqual=void 0,n.getPermissions=function(e,t){var n;return null===(n=Ct(e)[t])||void 0===n?void 0:n.permissions},n.getPermissionsForActiveTab=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r,o=(null===(t=a[n.origin])||void 0===t?void 0:t.permissions)??{};return Object.keys(o).map((e=>({key:e,value:o[e]})))},n.getPermissionsRequests=jt,n.getPermittedAccounts=wt,n.getPermittedAccountsByOrigin=bt,n.getPermittedAccountsForCurrentTab=Rt,n.getPermittedAccountsForSelectedTab=Mt,n.getPermittedChains=Ot,n.getPermittedChainsByOrigin=function(e){const t=Ct(e);return Object.keys(t).reduce(((e,n)=>{const r=Ut(Dt(t[n]));return r.length>0&&(e[n]=r),e}),{})},n.getPermittedChainsForCurrentTab=function(e){return wt(e,ze(e))},n.getPermittedChainsForSelectedTab=function(e,t){return Ot(e,t)},n.getPinnedAccountsList=Tt,n.getPreferences=be,n.getPreinstalledSnaps=void 0,n.getQueuedRequestCount=Ce,n.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},n.getRequestState=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.requestState},n.getRequestType=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.type},n.getRequestingNetworkInfo=function(e,t){let n=t===undefined?[]:t;"string"==typeof n&&(n=[n]);const r=n.flat();return Object.values((0,E.getNetworkConfigurationsByChainId)(e)).filter((e=>r.includes(e.chainId)))},n.getRpcPrefsForCurrentProvider=Ye,n.getSelectedAccount=void 0,n.getSelectedAccountCachedBalance=he,n.getSelectedAccountNativeTokenCachedBalanceByChainId=me,n.getSelectedAccountTokensAcrossChains=function(e){const{allTokens:t}=e.metamask,n=oe(e).address,r={},a=me(e);return new Set([...Object.keys(t||{}),...Object.keys(a||{})]).forEach((o=>{var s;r[o]||(r[o]=[]),null!==(s=t[o])&&void 0!==s&&s[n]&&t[o][n].forEach((e=>{const t={...e,chainId:o,isNative:!1};r[o].push(t)}));const i=a[o];if(i){const t=fe(e,o);r[o].push({...t,address:"",balance:i,chainId:o,isNative:!0})}})),r},n.getSelectedAddress=te,n.getSelectedEvmInternalAccount=void 0,n.getSelectedInternalAccountWithBalance=function(e){const t=(0,$.getSelectedInternalAccount)(e),n=le(e)[t.address];return{...t,balance:n?n.balance:"0x0"}},n.getSelectedNetwork=n.getSelectedKeyringByIdOrDefault=void 0,n.getSendInputCurrencySwitched=function({appState:e}){return e.sendInputCurrencySwitched},n.getSettingsPageSnapsIds=n.getSettingsPageSnaps=void 0,n.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=be(e);return t},n.getShouldShowAggregatedBalancePopover=function(e){const{shouldShowAggregatedBalancePopover:t}=be(e);return t},n.getShouldShowFiat=function(e){const t=(0,E.getCurrentChainId)(e),n=_.TEST_NETWORK_IDS.includes(t),{showFiatInTestnets:r}=be(e),a=(0,P.getConversionRate)(e),o=kt(e),s=Boolean(o&&a);if(n)return r&&s;return s},n.getShowAccountBanner=function(e){return e.metamask.showAccountBanner},n.getShowBasicFunctionalityModal=function(e){return e.appState.showBasicFunctionalityModal},n.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},n.getShowDataDeletionErrorModal=function(e){return e.appState.showDataDeletionErrorModal},n.getShowDeleteMetaMetricsDataModal=function(e){return e.appState.showDeleteMetaMetricsDataModal},n.getShowExtensionInFullSizeView=function(e){const{showExtensionInFullSizeView:t}=be(e);return Boolean(t)},n.getShowFiatInTestnets=function(e){const{showFiatInTestnets:t}=be(e);return t},n.getShowNetworkBanner=function(e){return e.metamask.showNetworkBanner},n.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*M.DAY},n.getShowPermissionsTour=function(e){return e.metamask.showPermissionsTour},n.getShowPermittedNetworkToastOpen=function(e){return e.appState.showPermittedNetworkToastOpen},n.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:n}=e.metamask,r=(new Date).getTime(),a=n?90*M.DAY:2*M.DAY;return r-t>=a},n.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(b.TERMS_OF_USE_LAST_UPDATED).getTime()},n.getShowTestNetworks=Pe,n.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},n.getSignatureInsightSnaps=n.getSignatureInsightSnapIds=void 0,n.getSlides=function(e){return e.metamask.slides||[]},n.getSnapInsights=n.getSnap=void 0,n.getSnapInstallOrUpdateRequests=Wt,n.getSnapMetadata=n.getSnapLatestVersion=void 0,n.getSnapRegistry=function(e){const{snapRegistryList:t}=e.metamask;return t},n.getSnapRegistryData=void 0,n.getSnaps=ct,n.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},n.getSnapsList=Nt,n.getSnapsMetadata=void 0,n.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),n={[U.NOTIFICATION_SOLANA_ON_METAMASK]:!0},r=t.filter((e=>!e.isShown&&n[e.id]));return r.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},n.getSubjectMetadata=Pt,n.getSubjectMetadataDeepEqual=void 0,n.getSubjectsWithPermission=function(e,t){const n=Ct(e),r=[];return Object.entries(n).forEach((([n,{permissions:a}])=>{if(a[t]){const{extensionId:t,name:a,iconUrl:o}=Fe(e,n)||{};r.push({extensionId:t,origin:n,name:a,iconUrl:o})}})),r},n.getSubjectsWithSnapPermission=function(e,t){const n=Ct(e);return Object.entries(n).filter((([e,{permissions:n}])=>{var r;return null===(r=n[f.WALLET_SNAP_PERMISSION_KEY])||void 0===r?void 0:r.caveats[0].value[t]})).map((([t,n])=>{const{extensionId:r,name:a,iconUrl:o}=Fe(e,t)||{};return{extensionId:r,origin:t,name:a,iconUrl:o}}))},n.getSuggestedNfts=function(e){var t;return(null===(t=we(e))||void 0===t?void 0:t.filter((({requestData:e,type:t})=>{var n;return t===s.ApprovalType.WatchAsset&&(null==e||null===(n=e.asset)||void 0===n?void 0:n.tokenId)!==undefined})))||[]},n.getSuggestedTokens=function(e){var t;return(null===(t=we(e))||void 0===t?void 0:t.filter((({type:e,requestData:t})=>{var n;return e===s.ApprovalType.WatchAsset&&(null==t||null===(n=t.asset)||void 0===n?void 0:n.tokenId)===undefined})))||[]},n.getSwapsDefaultToken=function(e,t=null){const n=Ae(e),r=null==n?void 0:n.balance,a=(0,E.getCurrentChainId)(e),o=t??a;return{...N.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[o],balance:(0,L.hexToDecimal)(r),string:(0,L.getValueFromWeiHex)({value:r,numberOfDecimals:4,toDenomination:"ETH"})}},n.getSwitchedNetworkDetails=function(e){const{switchedNetworkDetails:t}=e.metamask,n=(0,E.getNetworkConfigurationsByChainId)(e);if(t){const e=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t.networkClientId))));return{nickname:null==e?void 0:e.name,imageUrl:_.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==e?void 0:e.chainId],origin:null==t?void 0:t.origin}}return null},n.getTargetAccount=function(e,t){return ee(e)[t]},n.getTargetAccountWithSendEtherInfo=function(e,t){const n=Ie(e);return(0,w.getAccountByAddress)(n,t)},n.getTargetSubjectMetadata=Fe,n.getTestNetworkBackgroundColor=function(e){const t=(0,E.getProviderConfig)(e).ticker;switch(!0){case null==t?void 0:t.includes(_.GOERLI_DISPLAY_NAME):return F.BackgroundColor.goerli;case null==t?void 0:t.includes(_.SEPOLIA_DISPLAY_NAME):return F.BackgroundColor.sepolia;default:return undefined}},n.getTheme=function(e){return e.metamask.theme},n.getTokenSortConfig=n.getTokenNetworkFilter=n.getTokenList=n.getTokenExchangeRates=n.getTokenDetectionSupportNetworkByChainId=void 0,n.getTokensAcrossChainsByAccountAddress=pe,n.getTokensMarketData=n.getTokensAcrossChainsByAccountAddressSelector=void 0,n.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},n.getTxData=n.getTransaction=void 0,n.getUSDConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,E.getProviderConfig)(e).ticker])||void 0===t?void 0:t.usdConversionRate},n.getUnapprovedConfirmations=n.getUSDConversionRateByChainId=void 0,n.getUnapprovedTemplatedConfirmations=Oe,n.getUnapprovedTransaction=void 0,n.getUnapprovedTxCount=function(e){const t=(0,K.getUnapprovedTransactions)(e);return Object.keys(t).length},n.getUnconnectedAccounts=function(e,t){const n=Te(e),r=qt(e,t);return n.filter((e=>!r.some((t=>t.address===e.address))))},n.getUpdatedAndSortedAccounts=void 0,n.getUseBlockie=function(e){return Boolean(e.metamask.useBlockie)},n.getUseCurrencyRateCheck=kt,n.getUseExternalNameSources=function(e){return e.metamask.useExternalNameSources},n.getUseExternalServices=Qe,n.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},n.getUseTokenDetection=At,n.getUseTransactionSimulations=function(e){return Boolean(e.metamask.useTransactionSimulations)},n.getWatchedToken=void 0,n.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},n.getsnapsAddSnapAccountModalDismissed=function(e){const{snapsAddSnapAccountModalDismissed:t}=e.metamask;return t},n.isAccountConnectedToCurrentTab=void 0,n.isBalanceCached=function(e){var t;const{address:n}=(0,$.getSelectedInternalAccount)(e),r=null===(t=le(e)[n])||void 0===t?void 0:t.balance,a=he(e);return Boolean(!r&&a)},n.isCurrentProviderCustom=function(e){const t=(0,E.getProviderConfig)(e);return t.type===_.NETWORK_TYPES.RPC&&!Object.values(_.CHAIN_IDS).includes(t.chainId)},n.isHardwareWallet=X,n.useSafeChainsListValidationSelector=n.selectNftsByChainId=n.selectNetworkIdentifierByChainId=n.selectNetworkConfigurationByChainId=n.selectInstalledSnaps=n.selectERC20TokensByChain=n.selectERC20Tokens=n.selectDefaultRpcEndpointByChainId=n.selectConversionRateByChainId=n.selectAllTokensFlat=n.rawStateSelector=void 0;var r,a=e("punycode/punycode.js"),o=e("@metamask/permission-controller"),s=e("@metamask/controller-utils"),i=e("@metamask/snaps-utils"),c=e("lodash"),u=(r=e("semver"))&&r.__esModule?r:{default:r},l=e("reselect"),d=e("@metamask/name-controller"),m=e("@metamask/transaction-controller"),g=e("@metamask/keyring-api"),p=e("@metamask/network-controller"),f=e("@metamask/snaps-rpc-methods"),T=e("@metamask/multichain"),h=e("@metamask/keyring-controller"),S=e("@metamask/bridge-controller"),E=e("../../shared/modules/selectors/networks"),A=e("../../app/scripts/lib/util"),_=e("../../shared/constants/network"),y=e("../../shared/constants/hardware-wallets"),I=e("../../shared/constants/keyring"),k=e("../../shared/constants/labels"),N=e("../../shared/constants/swaps"),v=e("../../shared/constants/bridge"),C=e("../../shared/constants/transaction"),w=e("../helpers/utils/util"),O=e("../pages/confirmations/confirmation/templates"),R=e("../../shared/constants/tokens"),M=e("../../shared/constants/time"),b=e("../../shared/constants/terms"),P=e("../ducks/metamask/metamask"),D=e("../ducks/app/app"),B=e("../../shared/modules/string-utils"),L=e("../../shared/modules/conversion.utils"),F=e("../helpers/constants/design-system"),U=e("../../shared/notifications"),x=e("../../shared/constants/app"),G=e("../../shared/constants/multichain/assets"),H=e("../../shared/modules/transaction.utils"),q=e("../../shared/modules/hexstring-utils"),W=e("../../shared/modules/selectors/util"),j=e("../helpers/utils/snaps"),K=e("./transactions"),$=e("./accounts"),V=e("./multichain"),Y=e("./remote-feature-flags"),z=e("./approvals");n.getConfirmationExchangeRates=e=>e.appState.confirmationExchangeRates;function Q(e){const t=(0,$.getSelectedInternalAccount)(e);return t?t.metadata.keyring:null}function X(e){var t;const n=Q(e);return Boolean(null==n||null===(t=n.type)||void 0===t?void 0:t.includes("Hardware"))}function Z(e){return J(Q(e))}function J(e){if(!e)return"";const{type:t}=e;switch(t){case I.KeyringType.trezor:case I.KeyringType.oneKey:case I.KeyringType.ledger:case I.KeyringType.lattice:case I.KeyringType.qr:return"hardware";case I.KeyringType.imported:return"imported";case I.KeyringType.snap:return"snap";default:return"default"}}n.getPendingTokens=e=>e.appState.pendingTokens;const ee=n.getMetaMaskAccounts=(0,W.createDeepEqualSelector)($.getInternalAccounts,le,de,V.getMultichainBalances,V.getMultichainNetworkProviders,((e,t,n,r,a)=>Object.values(e).reduce(((e,o)=>{let s=o;if((0,g.isEvmAccountType)(o.type))null!=t&&t[o.address]&&(s={...s,...t[o.address]});else{var i;const e=a.find((e=>e.isAddressCompatible(o.address)));s={...s,balance:(null==r||null===(i=r[o.id])||void 0===i||null===(i=i[G.MULTICHAIN_NETWORK_TO_ASSET_TYPES[e.chainId]])||void 0===i?void 0:i.amount)??"0"}}return null!==s.balance&&s.balance!==undefined||(s={...s,balance:(n&&n[o.address])??"0x0"}),{...e,[o.address]:s}}),{})));function te(e){var t;return null===(t=(0,$.getSelectedInternalAccount)(e))||void 0===t?void 0:t.address}function ne(e,t){return Object.values(e.metamask.internalAccounts.accounts).find((e=>(0,B.isEqualCaseInsensitive)(e.address,t)))}function re(e,t){return e.metamask.internalAccounts.accounts[t]}const ae=n.getEvmInternalAccounts=(0,l.createSelector)($.getInternalAccounts,(e=>e.filter((e=>(0,g.isEvmAccountType)(e.type))))),oe=n.getSelectedEvmInternalAccount=(0,l.createSelector)(ae,(e=>{const[t]=(0,w.sortSelectedInternalAccounts)(e);return t})),se=n.getInternalAccountsSortedByKeyring=(0,W.createDeepEqualSelector)(ce,ee,((e,t)=>e.map((({accounts:e})=>e)).flat().map((e=>t[e]))));function ie(e){const{tokens:t}=e.metamask;return t?t.length:0}function ce(e){return e.metamask.keyrings.map(((t,n)=>{var r;return{...t,metadata:(null===(r=e.metamask.keyringsMetadata)||void 0===r?void 0:r[n])??{}}}))}const ue=n.getMetaMaskHdKeyrings=(0,l.createSelector)(ce,(e=>e.filter((e=>e.type===h.KeyringTypes.hd))));function le(e){return e.metamask.accounts}function de(e){var t;const n=(0,E.getCurrentChainId)(e);return null!==(t=e.metamask.accountsByChainId)&&void 0!==t&&t[n]?Object.entries(e.metamask.accountsByChainId[n]).reduce(((e,[t,n])=>(e[t]=n.balance,e)),{}):{}}function me(e){const{accountsByChainId:t}=e.metamask,{address:n}=oe(e),r={};for(const[e,a]of Object.entries(t||{}))a[n]&&(r[e]=a[n].balance);return r}n.getNativeTokenCachedBalanceByChainIdSelector=(0,l.createSelector)((e=>e),((e,t)=>t),((e,t)=>ge(e,t))),n.getTokensAcrossChainsByAccountAddressSelector=(0,l.createSelector)((e=>e),((e,t)=>t),((e,t)=>pe(e,t)));function ge(e,t){const{accountsByChainId:n}=e.metamask,r={};for(const[e,a]of Object.entries(n||{}))a[t]&&(r[e]=a[t].balance);return r}function pe(e,t){const{allTokens:n}=e.metamask,r={},a=ge(e,t);return new Set([...Object.keys(n||{}),...Object.keys(a||{})]).forEach((o=>{var s;r[o]||(r[o]=[]),null!==(s=n[o])&&void 0!==s&&s[t]&&n[o][t].forEach((e=>{const t={...e,chainId:o,isNative:!1};r[o].push(t)}));const i=a[o];if(i){const t=fe(e,o);r[o].push({...t,address:"",balance:i,chainId:o,isNative:!0,image:Ze(o)})}})),r}function fe(e,t){const{networkConfigurationsByChainId:n}=e.metamask,r=null==n?void 0:n[t];if(r){return{symbol:r.nativeCurrency||C.AssetType.native,decimals:18,name:r.name||"Native Token"}}const{provider:a}=e.metamask;if((null==a?void 0:a.chainId)===t){var o;return{symbol:a.ticker||C.AssetType.native,decimals:(null===(o=a.nativeCurrency)||void 0===o?void 0:o.decimals)||18,name:a.nickname||"Native Token"}}return{symbol:C.AssetType.native,decimals:18,name:"Native Token"}}const Te=n.getMetaMaskAccountsOrdered=(0,W.createDeepEqualSelector)(se,ee,((e,t)=>e.map((e=>({...e,...t[e.address]})))));n.getMetaMaskAccountsConnected=(0,l.createSelector)(Te,(e=>e.map((({address:e})=>e.toLowerCase()))));function he(e){const t=de(e),{address:n}=(0,$.getSelectedInternalAccount)(e);return null==t?void 0:t[n]}function Se(e){return e.metamask.allTokens}n.selectAllTokensFlat=(0,l.createSelector)(Se,(e=>Object.values(e).reduce(((e,t)=>{const n=Object.values(t);return e.concat(...n)}),[])));function Ee(e){return e.metamask.domains}const Ae=n.getSelectedAccount=(0,W.createDeepEqualSelector)(ee,$.getSelectedInternalAccount,((e,t)=>t?{...t,...e[t.address]}:undefined));n.getWatchedToken=e=>(0,l.createSelector)([Ae,Se],((t,n)=>{var r;const{chainId:a}=e;return null==n||null===(r=n[a])||void 0===r||null===(r=r[t.address])||void 0===r?void 0:r.find((t=>(0,q.toChecksumHexAddress)(t.address)===(0,q.toChecksumHexAddress)(e.txParams.to)))}));n.getTokenExchangeRates=e=>{var t;const n=(0,E.getCurrentChainId)(e),r=(null===(t=e.metamask.marketData)||void 0===t?void 0:t[n])??{};return Object.entries(r).reduce(((e,[t,n])=>(e[t]=(null==n?void 0:n.price)??null,e)),{})};n.getCrossChainTokenExchangeRates=e=>{const t=e.metamask.marketData??{};return Object.keys(t).reduce(((e,n)=>(e[n]=Object.keys(t[n]).reduce(((e,r)=>{var a;return e[r]=null===(a=t[n][r])||void 0===a?void 0:a.price,e}),{}),e)),{})};n.getTokensMarketData=e=>{var t;const n=(0,E.getCurrentChainId)(e);return null===(t=e.metamask.marketData)||void 0===t?void 0:t[n]};function _e(e){const t=(0,E.getCurrentChainId)(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function ye(e,t){return _e(e).find((e=>(0,B.isEqualCaseInsensitive)(e.address,t)))}function Ie(e){const t=ee(e),n=(0,$.getInternalAccounts)(e);return Object.values(n).map((e=>({...e,...t[e.address]})))}function ke(e){const{address:t}=(0,$.getSelectedInternalAccount)(e),n=Ie(e);return(0,w.getAccountByAddress)(n,t)}n.getMarketData=e=>e.metamask.marketData;n.getNetworkConfigurationIdByChainId=(0,W.createDeepEqualSelector)((e=>e.metamask.networkConfigurationsByChainId),(e=>Object.entries(e).reduce(((e,[t,n])=>{const r=n.rpcEndpoints[n.defaultRpcEndpointIndex];return e[t]=r.networkClientId,e}),{})));const Ne=n.selectNetworkConfigurationByChainId=(0,l.createSelector)(E.getNetworkConfigurationsByChainId,((e,t)=>t),((e,t)=>e[t])),ve=n.selectDefaultRpcEndpointByChainId=(0,l.createSelector)(Ne,(e=>{if(!e)return undefined;const{defaultRpcEndpointIndex:t,rpcEndpoints:n}=e;return n[t]}));n.selectConversionRateByChainId=(0,l.createSelector)(Ne,(e=>e),((e,t)=>{var n;if(!e)return undefined;const{nativeCurrency:r}=e;return null===(n=t.metamask.currencyRates[r])||void 0===n?void 0:n.conversionRate})),n.selectNftsByChainId=(0,l.createSelector)($.getSelectedInternalAccount,(e=>e.metamask.allNfts),((e,t)=>t),((e,t,n)=>{var r;return(null==t||null===(r=t[e.address])||void 0===r?void 0:r[n])??[]})),n.selectNetworkIdentifierByChainId=(0,l.createSelector)(Ne,ve,((e,t)=>{const{name:n}=e??{},{url:r,networkClientId:a}=t??{};return n||r||a}));function Ce(e){return e.metamask.queuedRequestCount??0}const we=n.getUnapprovedConfirmations=(0,W.createDeepEqualSelector)((e=>e.metamask.pendingApprovals||{}),(e=>Object.values(e)));function Oe(e){return we(e).filter((e=>O.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type)))}function Re(e){return(0,E.getCurrentChainId)(e)===_.CHAIN_IDS.MAINNET}function Me(e){const t=(0,E.getCurrentChainId)(e);return _.TEST_CHAINS.includes(t)}function be({metamask:e}){return e.preferences??{}}function Pe(e){const{showTestNetworks:t}=be(e);return Boolean(t)}n.getTokenSortConfig=(0,W.createDeepEqualSelector)(be,(({tokenSortConfig:e})=>e));const De=n.getTokenNetworkFilter=(0,W.createDeepEqualSelector)(E.getCurrentChainId,be,((e,{tokenNetworkFilter:t})=>_.FEATURED_NETWORK_CHAIN_IDS.includes(e)?Object.entries(t||{}).reduce(((e,[t,n])=>(_.FEATURED_NETWORK_CHAIN_IDS.includes(t)&&(e[t]=n),e)),{}):{[e]:!0}));function Be(e){const t=(0,E.getCurrentChainId)(e),n=De(e);return 1===Object.keys(n).length&&Object.keys(n)[0]===t}const Le=(0,c.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function Fe(e,t){const n=Pt(e)[t];if((null==n?void 0:n.subjectType)===o.SubjectType.Snap){const{svgIcon:e,...t}=n;return{...t,iconUrl:e?Le(e):null}}return n}const Ue=e=>e;n.rawStateSelector=Ue;const xe=(e,t)=>t,Ge=e=>e.metamask.snaps;n.selectInstalledSnaps=Ge;const He=n.getSnapRegistryData=(0,l.createSelector)([e=>{var t;return null===(t=e.metamask.database)||void 0===t?void 0:t.verifiedSnaps},xe],((e,t)=>e?e[t]:null)),qe=n.getSnapLatestVersion=(0,l.createSelector)([He],(e=>e?Object.keys(e.versions).reduce(((e,t)=>u.default.gt(t,e)?t:e),"0.0.0"):null)),We=n.getAllSnapAvailableUpdates=(0,l.createSelector)([Ge,Ue],((e,t)=>{const n=new Map;return Object.keys(e).forEach((r=>{const a=qe(t,r);n.set(r,!!a&&u.default.gt(a,e[r].version))})),n})),je=(n.getAnySnapUpdateAvailable=(0,l.createSelector)([We],(e=>[...e.values()].some((e=>!0===e)))),n.getHideSnapBranding=(0,W.createDeepEqualSelector)([Ge,xe],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.hideSnapBranding})),n.getMemoizedTargetSubjectMetadata=(0,W.createDeepEqualSelector)(Fe,(e=>e)),n.getMemoizedUnapprovedConfirmations=(0,W.createDeepEqualSelector)(we,(e=>e)),n.getMemoizedUnapprovedTemplatedConfirmations=(0,W.createDeepEqualSelector)(Oe,(e=>e)),(e,t)=>t),Ke=n.getMemoizedInterfaces=(0,W.createDeepEqualSelector)((e=>e.metamask.interfaces),(e=>e)),$e=n.getInterface=(0,l.createSelector)([Ke,je],((e,t)=>e[t])),Ve=(n.getMemoizedInterface=(0,W.createDeepEqualSelector)($e,(e=>e)),n.getInterfaceContent=(0,l.createSelector)([Ke,je],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.content})));n.getMemoizedInterfaceContent=(0,W.createDeepEqualSelector)(Ve,(e=>e)),n.getMultipleTargetsSubjectMetadata=(0,W.createDeepEqualSelector)([Ue,(e,t)=>t],((e,t)=>Object.keys(t??{}).reduce(((t,n)=>(t[n]=Fe(e,n),t)),{})));function Ye(e){const{rpcPrefs:t}=(0,E.getProviderConfig)(e);return t}function ze(e){return e.activeTab.origin}function Qe(e){return e.metamask.useExternalServices}function Xe(e){return e.metamask.currencyRates}n.getUSDConversionRateByChainId=e=>(0,l.createSelector)(Xe,(t=>Ne(t,e)),((e,t)=>{var n;if(!t)return undefined;const{nativeCurrency:r}=t;return null===(n=e[r])||void 0===n?void 0:n.usdConversionRate}));n.getIsBridgeEnabled=(0,l.createSelector)([function(e){return e.metamask.bridgeFeatureFlags},Qe],((e,t)=>{var n;return(t&&(null==e||null===(n=e[S.BridgeFeatureFlagsKey.EXTENSION_CONFIG])||void 0===n?void 0:n.support))??!1}));function Ze(e){return _.CHAIN_ID_TOKEN_IMAGE_MAP[e]??undefined}n.getMemoizedMetaMaskInternalAccounts=(0,W.createDeepEqualSelector)($.getInternalAccounts,(e=>e)),n.selectERC20TokensByChain=(0,W.createDeepEqualSelector)((e=>e.metamask.tokensChainsCache),(e=>e));const Je=n.selectERC20Tokens=(0,W.createDeepEqualSelector)((e=>e.metamask.tokenList),(e=>e)),et=n.getTokenList=(0,l.createSelector)(Je,yt,((e,t)=>t?R.STATIC_MAINNET_TOKEN_LIST:e)),tt=n.getMemoizedMetadataContract=(0,l.createSelector)(((e,t)=>et(e)),((e,t)=>t),((e,t)=>e[null==t?void 0:t.toLowerCase()])),nt=(n.getMetadataContractName=(0,l.createSelector)(tt,(e=>(null==e?void 0:e.name)??"")),e=>e.confirmTransaction.txData);n.getTxData=nt;const rt=n.getUnapprovedTransaction=(0,W.createDeepEqualSelector)((e=>(0,K.getUnapprovedTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t)))),at=n.getTransaction=(0,W.createDeepEqualSelector)((e=>(0,K.getCurrentNetworkTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{})),ot=(n.getFullTxData=(0,W.createDeepEqualSelector)(nt,((e,t,n)=>n===m.TransactionStatus.unapproved?rt(e,t)??{}:at(e,t)),((e,t,n,r,a)=>({customTxParamsData:r,hexTransactionAmount:a})),((e,t,{customTxParamsData:n,hexTransactionAmount:r})=>{let a={...e,...t};return t&&t.simulationFails&&(a.simulationFails={...t.simulationFails}),n&&(a={...a,txParams:{...a.txParams,data:n}}),r&&(a={...a,txParams:{...a.txParams,value:r}}),a})),n.getConnectedSubjectsForAllAddresses=(0,W.createDeepEqualSelector)(Ct,Pt,((e,t)=>{const n={};return Object.entries(e).forEach((([e,r])=>{Bt(r).forEach((r=>{n[r]||(n[r]=[]);const a=t[e];n[r].push({origin:e,...a})}))})),n}))),st=n.getAllConnectedAccounts=(0,W.createDeepEqualSelector)(ot,(e=>Object.keys(e))),it=n.getConnectedSitesList=(0,W.createDeepEqualSelector)(ot,$.getInternalAccounts,st,((e,t,n)=>{const r={};return n.forEach((n=>{e[n].forEach((e=>{const a=e.origin,o=t.find((e=>(0,B.isEqualCaseInsensitive)(e.address,n)));r[a]?(r[a].addresses.push(n),r[a].addressToNameMap[n]=(null==o?void 0:o.metadata.name)||""):r[a]={...e,addresses:[n],addressToNameMap:{[n]:(null==o?void 0:o.metadata.name)||""}}}))})),r}));n.getConnectedSnapsList=(0,W.createDeepEqualSelector)(Nt,(e=>{const t={};return Object.values(e).forEach((e=>{t[e.name]||(t[e.name]=e)})),t})),n.getMemoizedCurrentChainId=(0,W.createDeepEqualSelector)(E.getCurrentChainId,(e=>e));function ct(e){return e.metamask.snaps}function ut(e){return e.metamask.currentLocale}n.getSnap=(0,W.createDeepEqualSelector)(ct,((e,t)=>t),((e,t)=>e[t]));const lt=n.getSnapsMetadata=(0,W.createDeepEqualSelector)(ut,ct,((e,t)=>Object.values(t).reduce(((t,n)=>{const r=n.id,a=n.localizationFiles?(0,i.getLocalizedSnapManifest)(n.manifest,e,n.localizationFiles):n.manifest;return t[r]={name:a.proposedName,description:a.description,hidden:n.hidden},t}),{}))),dt=n.getSnapMetadata=(0,W.createDeepEqualSelector)(lt,((e,t)=>t),((e,t)=>e[t]??{name:t?(0,i.stripSnapPrefix)(t):null})),mt=n.getEnabledSnaps=(0,W.createDeepEqualSelector)(ct,(e=>Object.values(e).reduce(((e,t)=>(t.enabled&&(e[t.id]=t),e)),{}))),gt=(n.getPreinstalledSnaps=(0,W.createDeepEqualSelector)(ct,(e=>Object.values(e).reduce(((e,t)=>(t.preinstalled&&(e[t.id]=t),e)),{}))),n.getInsightSnaps=(0,W.createDeepEqualSelector)(mt,Ct,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:transaction-insight"]}))))),pt=n.getSettingsPageSnaps=(0,W.createDeepEqualSelector)(mt,Ct,((e,t)=>Object.values(e).filter((({id:e,preinstalled:n})=>{var r;return(null===(r=t[e])||void 0===r?void 0:r.permissions[f.SnapEndowments.SettingsPage])&&n&&!(0,j.isSnapIgnoredInProd)(e)})))),ft=n.getSignatureInsightSnaps=(0,W.createDeepEqualSelector)(mt,Ct,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:signature-insight"]}))));n.getSignatureInsightSnapIds=(0,W.createDeepEqualSelector)(ft,(e=>e.map((e=>e.id)))),n.getInsightSnapIds=(0,W.createDeepEqualSelector)(gt,(e=>e.map((e=>e.id)))),n.getNameLookupSnapsIds=(0,W.createDeepEqualSelector)(mt,Ct,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:name-lookup"]})).map((e=>e.id)))),n.getSettingsPageSnapsIds=(0,W.createDeepEqualSelector)(pt,(e=>e.map((e=>e.id)))),n.getNotifySnaps=(0,W.createDeepEqualSelector)(mt,Ct,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions.snap_notify}))));n.getSnapInsights=(0,W.createDeepEqualSelector)((function(e){return e.metamask.insights}),((e,t)=>t),((e,t)=>null==e?void 0:e[t]));function Tt(e){return e.metamask.pinnedAccountList}function ht(e){return e.metamask.hiddenAccountList}function St(e){const t=(0,K.getAllUnapprovedTransactions)(e),n=Ce(e),r={...t,...e.metamask.unapprovedDecryptMsgs,...e.metamask.unapprovedPersonalMsgs,...e.metamask.unapprovedEncryptionPublicKeyMsgs,...e.metamask.unapprovedTypedMessages};return Object.keys(r).length+n}const Et=n.getCurrentNetwork=(0,W.createDeepEqualSelector)(E.getNetworkConfigurationsByChainId,E.getCurrentChainId,((e,t)=>{var n;const r=e[t],a=r.rpcEndpoints[r.defaultRpcEndpointIndex],o=null===(n=r.blockExplorerUrls)||void 0===n?void 0:n[r.defaultBlockExplorerUrlIndex];return{chainId:r.chainId,id:a.networkClientId,nickname:r.name,rpcUrl:a.url,ticker:r.nativeCurrency,blockExplorerUrl:o,rpcPrefs:{blockExplorerUrl:o,imageUrl:_.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[r.chainId]},...a.type===p.RpcEndpointType.Infura&&{providerType:a.networkClientId}}}));n.getSelectedNetwork=(0,W.createDeepEqualSelector)(E.getSelectedNetworkClientId,E.getNetworkConfigurationsByChainId,((e,t)=>{if(e===undefined)throw new Error("No network is selected");const n=Object.values(t).find((t=>t.rpcEndpoints.some((t=>t.networkClientId===e))));if(n===undefined)throw new Error("Could not find network configuration for selected network client");return{configuration:n,clientId:e}})),n.getConnectedSitesListWithNetworkInfo=(0,W.createDeepEqualSelector)(it,Ee,E.getNetworkConfigurationsByChainId,Et,((e,t,n,r)=>(Object.keys(e).forEach((a=>{const o=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t[a]))));e[a].networkIconUrl=_.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==o?void 0:o.chainId]||"",e[a].networkName=(null==o?void 0:o.name)||(null==r?void 0:r.nickname)||""})),e)));function At(e){return Boolean(e.metamask.useTokenDetection)}n.getAllEnabledNetworks=(0,W.createDeepEqualSelector)(E.getNetworkConfigurationsByChainId,Pe,((e,t)=>Object.entries(e).reduce(((e,[n,r])=>(!t&&_.TEST_CHAINS.includes(n)||(e[n]=r),e)),{}))),n.getAllChainsToPoll=(0,W.createDeepEqualSelector)(E.getNetworkConfigurationsByChainId,E.getCurrentChainId,((e,t)=>Object.keys(e).filter((e=>e===t||_.FEATURED_NETWORK_CHAIN_IDS.includes(e))))),n.getChainIdsToPoll=(0,W.createDeepEqualSelector)(E.getNetworkConfigurationsByChainId,E.getCurrentChainId,Be,((e,t,n)=>n?[t]:Object.keys(e).filter((e=>e===t||_.FEATURED_NETWORK_CHAIN_IDS.includes(e))))),n.getNetworkClientIdsToPoll=(0,W.createDeepEqualSelector)(E.getNetworkConfigurationsByChainId,E.getCurrentChainId,Be,((e,t,n)=>{if(n){const n=e[t];return[n.rpcEndpoints[n.defaultRpcEndpointIndex].networkClientId]}return Object.entries(e).reduce(((e,[n,r])=>((n===t||_.FEATURED_NETWORK_CHAIN_IDS.includes(n))&&e.push(r.rpcEndpoints[r.defaultRpcEndpointIndex].networkClientId),e)),[])}));function _t(e){const t=(0,E.getCurrentChainId)(e);return[_.CHAIN_IDS.MAINNET,_.CHAIN_IDS.BSC,_.CHAIN_IDS.POLYGON,_.CHAIN_IDS.AVALANCHE,_.CHAIN_IDS.LINEA_GOERLI,_.CHAIN_IDS.LINEA_SEPOLIA,_.CHAIN_IDS.LINEA_MAINNET,_.CHAIN_IDS.ARBITRUM,_.CHAIN_IDS.OPTIMISM,_.CHAIN_IDS.BASE,_.CHAIN_IDS.ZKSYNC_ERA,_.CHAIN_IDS.CRONOS,_.CHAIN_IDS.CELO,_.CHAIN_IDS.GNOSIS,_.CHAIN_IDS.FANTOM,_.CHAIN_IDS.POLYGON_ZKEVM,_.CHAIN_IDS.MOONBEAM,_.CHAIN_IDS.MOONRIVER].includes(t)}function yt(e){const t=Re(e);return!At(e)&&t}function It(e){const t=(0,E.getCurrentChainId)(e);return!_.CHAIN_ID_TO_RPC_URL_MAP[t]}n.getTokenDetectionSupportNetworkByChainId=e=>{switch((0,E.getCurrentChainId)(e)){case _.CHAIN_IDS.MAINNET:return _.MAINNET_DISPLAY_NAME;case _.CHAIN_IDS.BSC:return _.BSC_DISPLAY_NAME;case _.CHAIN_IDS.POLYGON:return _.POLYGON_DISPLAY_NAME;case _.CHAIN_IDS.AVALANCHE:return _.AVALANCHE_DISPLAY_NAME;case _.CHAIN_IDS.LINEA_GOERLI:return _.LINEA_GOERLI_DISPLAY_NAME;case _.CHAIN_IDS.LINEA_SEPOLIA:return _.LINEA_SEPOLIA_DISPLAY_NAME;case _.CHAIN_IDS.LINEA_MAINNET:return _.LINEA_MAINNET_DISPLAY_NAME;case _.CHAIN_IDS.ARBITRUM:return _.ARBITRUM_DISPLAY_NAME;case _.CHAIN_IDS.OPTIMISM:return _.OPTIMISM_DISPLAY_NAME;case _.CHAIN_IDS.BASE:return _.BASE_DISPLAY_NAME;case _.CHAIN_IDS.ZKSYNC_ERA:return _.ZK_SYNC_ERA_DISPLAY_NAME;case _.CHAIN_IDS.CRONOS:return _.CRONOS_DISPLAY_NAME;case _.CHAIN_IDS.CELO:return _.CELO_DISPLAY_NAME;case _.CHAIN_IDS.GNOSIS:return _.GNOSIS_DISPLAY_NAME;case _.CHAIN_IDS.FANTOM:return _.FANTOM_DISPLAY_NAME;case _.CHAIN_IDS.POLYGON_ZKEVM:return _.POLYGON_ZKEVM_DISPLAY_NAME;case _.CHAIN_IDS.MOONBEAM:return _.MOONBEAM_DISPLAY_NAME;case _.CHAIN_IDS.MOONRIVER:return _.MOONRIVER_DISPLAY_NAME;default:return""}};n.getUpdatedAndSortedAccounts=(0,W.createDeepEqualSelector)(Te,Tt,ht,Ht,((e,t,n,r)=>{r.forEach((t=>{const n=e.find((e=>e.id===t.id));n&&t.metadata&&(n.connections=!0,n.lastSelected=t.metadata.lastSelected)}));const a=e.filter((e=>e.connections&&e.lastSelected)),o=a.length>0?a.reduce(((e,t)=>e.lastSelected>t.lastSelected?e:t)):null;e.forEach((e=>{e.pinned=Boolean(t.includes(e.address)),e.hidden=Boolean(n.includes(e.address)),e.active=Boolean(o&&e.id===o.id)}));return[...null==t?void 0:t.map((t=>e.find((e=>e.address===t)))).filter((e=>Boolean(e&&t.includes(e.address)&&!(null!=n&&n.includes(e.address))))),...e.filter((e=>!t.includes(e.address)&&!n.includes(e.address))),...e.filter((e=>n.includes(e.address)))]}));function kt(e){return Boolean(e.metamask.useCurrencyRateCheck)}function Nt(e){const t=ct(e);return Object.entries(t).filter((([e,t])=>t.status!==i.SnapStatus.Installing&&(!t.preinstalled||!1===t.hidden))).map((([t,n])=>{const r=Fe(e,null==n?void 0:n.id);return{key:t,id:n.id,iconUrl:null==r?void 0:r.iconUrl,subjectType:null==r?void 0:r.subjectType,packageName:(0,i.stripSnapPrefix)(n.id),name:dt(e,n.id).name}}))}n.useSafeChainsListValidationSelector=e=>e.metamask.useSafeChainsListValidation;n.getSelectedKeyringByIdOrDefault=(0,l.createSelector)(ce,((e,t)=>t),((e,t)=>e.find((e=>e.metadata.id===t))??e[0])),n.getHdKeyringIndexByIdOrDefault=(0,l.createSelector)(ue,((e,t)=>t),((e,t)=>e.findIndex((e=>e.metadata.id===t))??0));const vt=n.getKeyringOfSelectedAccount=(0,l.createSelector)($.getSelectedInternalAccount,ce,((e,t)=>t.find((t=>t.accounts.some((t=>(0,B.isEqualCaseInsensitive)(t,e.address)))))));n.getHdKeyringOfSelectedAccountOrPrimaryKeyring=(0,l.createSelector)(vt,ue,((e,t)=>e.type===h.KeyringTypes.hd?e:t[0])),n.getPermissionSubjectsDeepEqual=(0,W.createDeepEqualSelector)((e=>e.metamask.subjects||{}),(e=>e)),n.getSubjectMetadataDeepEqual=(0,W.createDeepEqualSelector)((e=>e.metamask.subjectMetadata),(e=>e));function Ct(e){return e.metamask.subjects||{}}function wt(e,t){return Ft(Dt(Gt(e,t)))}function Ot(e,t){return Ut(Dt(Gt(e,t)))}function Rt(e){return wt(e,ze(e))}function Mt(e,t){return wt(e,t)}function bt(e){const t=Ct(e);return Object.keys(t).reduce(((e,n)=>{const r=Bt(t[n]);return r.length>0&&(e[n]=r),e}),{})}function Pt(e){return e.metamask.subjectMetadata}n.isAccountConnectedToCurrentTab=(0,W.createDeepEqualSelector)(Rt,((e,t)=>t),((e,t)=>e.some((e=>e===t))));function Dt(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t[T.Caip25EndowmentPermissionName])||{}}function Bt(e){return Ft(Dt(e))}function Lt(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===T.Caip25CaveatType))}function Ft(e){const t=Lt(e);return t?(0,T.getEthAccounts)(t.value):[]}function Ut(e){const t=Lt(e);return t?(0,T.getPermittedEthChainIds)(t.value):[]}function xt(e){for(const t of Object.keys(e.metamask.subjects))if("file://"===t||"http://localhost:5173"===t)return t;return null}function Gt(e,t){var n;const r=xt(e);var a;return r?null===(a=e.metamask.subjects)||void 0===a?void 0:a[r]:t&&(null===(n=e.metamask.subjects)||void 0===n?void 0:n[t])}function Ht(e){var t;const{activeTab:n,metamask:{permissionHistory:r}}=e,a=null===(t=r[n.origin])||void 0===t||null===(t=t.eth_accounts)||void 0===t?void 0:t.accounts,o=Te(e),s=Rt(e);return o.filter((e=>s.includes(e.address))).filter((e=>(0,g.isEvmAccountType)(e.type))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==a?void 0:a[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))}function qt(e,t){var n;const{metamask:{permissionHistory:r}}=e,a=null===(n=r[t.origin])||void 0===n||null===(n=n.eth_accounts)||void 0===n?void 0:n.accounts,o=Te(e),s=Mt(e,t);return o.filter((e=>s.includes(e.address))).filter((e=>(0,g.isEvmAccountType)(e.type))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==a?void 0:a[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))}function Wt(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e||"wallet_installSnapResult"===e)).map((({requestData:e})=>e))}function jt(e){var t;return null===(t=(0,z.getApprovalRequestsByType)(e,s.ApprovalType.WalletRequestPermissions))||void 0===t?void 0:t.map((({requestData:e})=>e))}}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[7500,{"../../shared/constants/network":5734,"../../shared/constants/transaction":5749,"../../shared/modules/conversion.utils":5782,"../../shared/modules/selectors/networks":5799,"../../shared/modules/selectors/util":5801,"../helpers/constants/transactions":6782,"../helpers/utils/tx-helper":6818,"./accounts":7476,"./approvals":7478,"@metamask/controller-utils":1474,"@metamask/smart-transactions-controller/dist/types":2628,"@metamask/transaction-controller":2905,reselect:5284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUnapprovedTransactions=n.getTransactions=n.getCurrentNetworkTransactions=n.getApprovedAndSignedTransactions=n.getAllUnapprovedTransactions=n.getAllNetworkTransactions=void 0,n.hasTransactionPendingApprovals=function(e){return(0,T.getApprovalRequestsByType)(e,a.ApprovalType.Transaction).length>0||(0,T.hasPendingApprovals)(e,G)},n.nonceSortedTransactionsSelectorAllChains=n.nonceSortedTransactionsSelector=n.nonceSortedPendingTransactionsSelectorAllChains=n.nonceSortedPendingTransactionsSelector=n.nonceSortedCompletedTransactionsSelectorAllChains=n.nonceSortedCompletedTransactionsSelector=n.incomingTxListSelectorAllChains=n.incomingTxListSelector=void 0,n.selectTransactionMetadata=H,n.unapprovedTypedMessagesSelector=n.unapprovedPersonalMsgsSelector=n.unapprovedMessagesSelector=n.unapprovedEncryptionPublicKeyMsgsSelector=n.unapprovedDecryptMsgsSelector=n.transactionsSelectorAllChains=n.transactionsSelector=n.transactionSubSelectorAllChains=n.transactionSubSelector=n.submittedPendingTransactionsSelector=n.smartTransactionsListSelector=n.selectedAddressTxListSelectorAllChain=n.selectedAddressTxListSelector=n.selectTransactionSender=void 0;var r,a=e("@metamask/controller-utils"),o=e("reselect"),s=e("@metamask/transaction-controller"),i=e("@metamask/smart-transactions-controller/dist/types"),c=e("../helpers/constants/transactions"),u=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},l=e("../../shared/constants/transaction"),d=e("../../shared/modules/conversion.utils"),m=e("../../shared/modules/selectors/networks"),g=e("../../shared/modules/selectors/util"),p=e("../../shared/constants/network"),f=e("./accounts"),T=e("./approvals");const h=[s.TransactionType.cancel,s.TransactionType.retry],S=[i.SmartTransactionStatuses.PENDING,i.SmartTransactionStatuses.UNKNOWN,i.SmartTransactionStatuses.RESOLVED,i.SmartTransactionStatuses.CANCELLED],E=n.getTransactions=(0,g.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask??{};return null!=t&&t.length?[...t].sort(((e,t)=>e.time-t.time)):[]}),(e=>e)),A=n.getAllNetworkTransactions=(0,g.createDeepEqualSelector)(E,(e=>{if(!e.length)return[];const t=p.FEATURED_NETWORK_CHAIN_IDS;return e.filter((e=>t.includes(e.chainId)))})),_=n.getCurrentNetworkTransactions=(0,g.createDeepEqualSelector)((e=>{const t=E(e);if(!t.length)return[];const{chainId:n}=(0,m.getProviderConfig)(e);return t.filter((e=>e.chainId===n))}),(e=>e)),y=n.incomingTxListSelectorAllChains=(0,g.createDeepEqualSelector)((e=>{const{incomingTransactionsPreferences:t}=e.metamask;if(!t)return[];const n=A(e),{address:r}=(0,f.getSelectedInternalAccount)(e);return n.filter((e=>e.type===s.TransactionType.incoming&&e.txParams.to===r))}),(e=>e)),I=(n.getUnapprovedTransactions=(0,g.createDeepEqualSelector)((e=>{const t=E(e);return(0,g.filterAndShapeUnapprovedTransactions)(t)}),(e=>e)),n.getAllUnapprovedTransactions=(0,g.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask||[];if(null==t||!t.length)return[];const n=[...t].sort(((e,t)=>e.time-t.time));return(0,g.filterAndShapeUnapprovedTransactions)(n)}),(e=>e)),n.getApprovedAndSignedTransactions=(0,g.createDeepEqualSelector)((e=>E(e).filter((e=>[s.TransactionStatus.approved,s.TransactionStatus.signed].includes(e.status)))),(e=>e)),n.incomingTxListSelector=(0,g.createDeepEqualSelector)((e=>{const{incomingTransactionsPreferences:t}=e.metamask;if(!t)return[];const n=_(e),{address:r}=(0,f.getSelectedInternalAccount)(e);return n.filter((e=>e.type===s.TransactionType.incoming&&e.txParams.to===r))}),(e=>e))),k=e=>e.metamask.unapprovedPersonalMsgs;n.unapprovedPersonalMsgsSelector=k;const N=e=>e.metamask.unapprovedDecryptMsgs;n.unapprovedDecryptMsgsSelector=N;const v=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;n.unapprovedEncryptionPublicKeyMsgsSelector=v;const C=e=>e.metamask.unapprovedTypedMessages;n.unapprovedTypedMessagesSelector=C;const w=e=>{var t;const{address:n}=(0,f.getSelectedInternalAccount)(e);return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t||null===(t=t[(0,m.getCurrentChainId)(e)])||void 0===t?void 0:t.filter((e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.from)===n&&!e.confirmed&&(e.status===i.SmartTransactionStatuses.PENDING||(e.type===s.TransactionType.swap||e.type===s.TransactionType.swapApproval)&&S.includes(e.status))})).map((e=>{var t;return{...e,isSmartTransaction:!0,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?l.SmartTransactionStatus.cancelled:e.status}}))};n.smartTransactionsListSelector=w;const O=n.selectedAddressTxListSelectorAllChain=(0,o.createSelector)(f.getSelectedInternalAccount,A,w,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e.address)).filter((({type:e})=>e!==s.TransactionType.incoming)).concat(n))),R=n.selectedAddressTxListSelector=(0,o.createSelector)(f.getSelectedInternalAccount,_,w,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e.address)).filter((({type:e})=>e!==s.TransactionType.incoming)).concat(n))),M=n.unapprovedMessagesSelector=(0,o.createSelector)(k,N,v,C,m.getCurrentChainId,((e={},t={},n={},r={},a)=>(0,u.default)({},e,t,n,r,a)||[])),b=n.transactionSubSelectorAllChains=(0,o.createSelector)(M,y,((e=[],t=[])=>e.concat(t))),P=n.transactionSubSelector=(0,o.createSelector)(M,I,((e=[],t=[])=>e.concat(t))),D=n.transactionsSelector=(0,o.createSelector)(P,R,((e=[],t=[])=>[...t.concat(e)].sort(((e,t)=>t.time-e.time)))),B=n.transactionsSelectorAllChains=(0,o.createSelector)(b,O,((e=[],t=[])=>[...t.concat(e)].sort(((e,t)=>t.time-e.time)))),L=(e,t)=>{const{primaryTransaction:{time:n}={}}=t;let r=e.length;for(let t=0;t<e.length;t++){const a=e[t],{primaryTransaction:{time:o}={}}=a;if(o>n){r=t;break}}e.splice(r,0,t)},F=e=>{const t=[],n=[],r=[],a={};e.forEach((e=>{const{txParams:{nonce:o}={},status:i,type:u,time:l,txReceipt:m}=e;if(void 0===o||u===s.TransactionType.incoming){const r={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:o};u===s.TransactionType.incoming?n.push(r):L(t,r)}else if(o in a){var g,p;const t=a[o];((e,t)=>{const{time:n}=t;let r=e.length;for(let t=0;t<e.length;t++)if(e[t].time>n){r=t;break}e.splice(r,0,t)})(t.transactions,e);const{primaryTransaction:{time:n=0}={},initialTransaction:{time:r=0}={}}=t,d={isOnChainFailure:"0x0"===(null==m?void 0:m.status),isEphemeral:i===s.TransactionStatus.failed&&"0x0"!==(null==m?void 0:m.status),isRetryOrCancel:h.includes(u),occurredAfterPrimary:l>n,hasPriorityStatus:i in c.PRIORITY_STATUS_HASH,isConfirmed:i===s.TransactionStatus.confirmed,occurredBeforeInitial:l<r,isValidRetry:u===s.TransactionType.retry&&(i in c.PRIORITY_STATUS_HASH||i===s.TransactionStatus.dropped),isValidCancel:u===s.TransactionType.cancel&&(i in c.PRIORITY_STATUS_HASH||i===s.TransactionStatus.dropped),eligibleForInitial:!h.includes(u)&&i!==s.TransactionStatus.failed,shouldBePrimary:i===s.TransactionStatus.confirmed||"0x0"===(null==m?void 0:m.status)},f={isEphemeral:t.primaryTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(g=t.primaryTransaction)||void 0===g||null===(g=g.txReceipt)||void 0===g?void 0:g.status)},T={isEphemeral:t.initialTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(p=t.initialTransaction.txReceipt)||void 0===p?void 0:p.status)};(d.shouldBePrimary||f.isEphemeral||d.occurredAfterPrimary&&d.hasPriorityStatus)&&(t.primaryTransaction=e),(d.occurredBeforeInitial&&d.eligibleForInitial||T.isEphemeral&&d.eligibleForInitial)&&(t.initialTransaction=e),d.isValidRetry&&(t.hasRetried=!0),d.isValidCancel&&(t.hasCancelled=!0)}else a[o]={nonce:o,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:u===s.TransactionType.retry&&(i in c.PRIORITY_STATUS_HASH||i===s.TransactionStatus.dropped),hasCancelled:u===s.TransactionType.cancel&&(i in c.PRIORITY_STATUS_HASH||i===s.TransactionStatus.dropped)},((e,t)=>{let n=e.length;for(let r=0;r<e.length;r++){const a=e[r];if(Number((0,d.hexToDecimal)(a))>Number((0,d.hexToDecimal)(t))){n=r;break}}e.splice(n,0,t)})(r,o)}));const o=r.map((e=>a[e]));return((e,t)=>{t.forEach((t=>{L(e,t)}))})(o,n),t.concat(o).map((e=>{var t;if(h.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!h.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))},U=n.nonceSortedTransactionsSelector=(0,o.createSelector)(D,((e=[])=>F(e))),x=n.nonceSortedTransactionsSelectorAllChains=(0,o.createSelector)(B,((e=[])=>F(e))),G=(n.nonceSortedPendingTransactionsSelectorAllChains=(0,o.createSelector)(x,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in c.PENDING_STATUS_HASH)))),n.nonceSortedCompletedTransactionsSelectorAllChains=(0,o.createSelector)(x,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in c.PENDING_STATUS_HASH))).reverse())),n.nonceSortedPendingTransactionsSelector=(0,o.createSelector)(U,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in c.PENDING_STATUS_HASH)))),n.nonceSortedCompletedTransactionsSelector=(0,o.createSelector)(U,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in c.PENDING_STATUS_HASH))).reverse())),n.submittedPendingTransactionsSelector=(0,o.createSelector)(D,((e=[])=>e.filter((e=>e.status===s.TransactionStatus.submitted)))),[a.ApprovalType.EthDecrypt,a.ApprovalType.EthGetEncryptionPublicKey,a.ApprovalType.EthSignTypedData,a.ApprovalType.PersonalSign]);function H(e,t){return e.metamask.transactions.find((e=>e.id===t))}n.selectTransactionSender=(0,o.createSelector)(((e,t)=>H(e,t)),(e=>{var t;return null==e||null===(t=e.txParams)||void 0===t?void 0:t.from}))}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[7501,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_CUSTOM_NONCE=n.UNLOCK_SUCCEEDED=n.UNLOCK_IN_PROGRESS=n.UNLOCK_FAILED=n.TRANSACTION_ERROR=n.TOKEN_SORT_CRITERIA=n.TOGGLE_NETWORK_MENU=n.TOGGLE_GAS_LOADING_ANIMATION=n.TOGGLE_CURRENCY_INPUT_SWITCH=n.TOGGLE_ACCOUNT_MENU=n.SHOW_SETTINGS_PAGE_ERROR=n.SHOW_SEND_TOKEN_PAGE=n.SHOW_PRIVATE_KEY=n.SHOW_PERMITTED_NETWORK_TOAST_OPEN=n.SHOW_PERMITTED_NETWORK_TOAST_CLOSE=n.SHOW_NFT_STILL_FETCHING_INDICATION=n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST=n.SHOW_LOADING=n.SHOW_KEYRING_SNAP_REMOVAL_RESULT=n.SHOW_IPFS_MODAL_OPEN=n.SHOW_IPFS_MODAL_CLOSE=n.SHOW_CONF_TX_PAGE=n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN=n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE=n.SHOW_ACCOUNTS_PAGE=n.SET_WEBHID_CONNECTED_STATUS=n.SET_SMART_TRANSACTIONS_ERROR=n.SET_SLIDES=n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE=n.SET_SELECTED_NETWORK_CONFIGURATION_ID=n.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS=n.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS=n.SET_REQUEST_ACCOUNT_TABS=n.SET_REMOVE_NFT_MESSAGE=n.SET_PENDING_TOKENS=n.SET_PARTICIPATE_IN_METAMETRICS=n.SET_OPEN_METAMASK_TAB_IDS=n.SET_NEXT_NONCE=n.SET_NEW_TOKENS_IMPORTED_ERROR=n.SET_NEW_TOKENS_IMPORTED=n.SET_NEW_NFT_ADDED_MESSAGE=n.SET_NEW_NETWORK_ADDED=n.SET_LEDGER_TRANSPORT_STATUS=n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=n.SET_FIRST_TIME_FLOW_TYPE=n.SET_EDIT_NETWORK=n.SET_DATA_COLLECTION_FOR_MARKETING=n.SET_CUSTOM_TOKEN_AMOUNT=n.SET_CURRENT_LOCALE=n.SET_CONFIRMATION_EXCHANGE_RATES=n.SET_ACCOUNT_LABEL=n.SET_ACCOUNT_DETAILS_ADDRESS=n.SELECTED_ADDRESS_CHANGED=n.SELECTED_ACCOUNT_CHANGED=n.RESET_ONBOARDING=n.QR_CODE_DETECTED=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF=n.ONBOARDED_IN_THIS_UI_SESSION=n.NETWORK_DROPDOWN_OPEN=n.NETWORK_DROPDOWN_CLOSE=n.MODAL_OPEN=n.MODAL_CLOSE=n.LOCK_METAMASK=n.LOADING_METHOD_DATA_STARTED=n.LOADING_METHOD_DATA_FINISHED=n.IMPORT_TOKENS_POPOVER_OPEN=n.IMPORT_TOKENS_POPOVER_CLOSE=n.IMPORT_NFTS_MODAL_OPEN=n.IMPORT_NFTS_MODAL_CLOSE=n.HIDE_WHATS_NEW_POPUP=n.HIDE_WARNING=n.HIDE_SETTINGS_PAGE_ERROR=n.HIDE_NFT_STILL_FETCHING_INDICATION=n.HIDE_LOADING=n.HIDE_KEYRING_SNAP_REMOVAL_RESULT=n.GO_HOME=n.GAS_FEE_ESTIMATES_UPDATED=n.DISPLAY_WARNING=n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=n.DEPRECATED_NETWORK_POPOVER_OPEN=n.DEPRECATED_NETWORK_POPOVER_CLOSE=n.DELETE_METAMETRICS_DATA_MODAL_OPEN=n.DELETE_METAMETRICS_DATA_MODAL_CLOSE=n.DATA_DELETION_ERROR_MODAL_OPEN=n.DATA_DELETION_ERROR_MODAL_CLOSE=n.CONNECT_ACCOUNTS_MODAL_OPEN=n.CONNECT_ACCOUNTS_MODAL_CLOSE=n.COMPLETE_ONBOARDING=n.COMPLETED_TX=n.CLOSE_WELCOME_SCREEN=n.CLEAR_SWAP_AND_SEND_STATE=n.CLEAR_PENDING_TOKENS=n.CLEAR_ACCOUNT_DETAILS=n.CHAIN_CHANGED=n.CAPTURE_SINGLE_EXCEPTION=n.ALERT_OPEN=n.ALERT_CLOSE=n.ADDRESS_BOOK_UPDATED=n.ACCOUNT_CHANGED=void 0,n.UPDATE_TRANSACTION_PARAMS=n.UPDATE_METAMASK_STATE=void 0;n.GO_HOME="GO_HOME",n.MODAL_OPEN="UI_MODAL_OPEN",n.MODAL_CLOSE="UI_MODAL_CLOSE",n.SET_CONFIRMATION_EXCHANGE_RATES="SET_CONFIRMATION_EXCHANGE_RATES",n.ALERT_OPEN="UI_ALERT_OPEN",n.ALERT_CLOSE="UI_ALERT_CLOSE",n.QR_CODE_DETECTED="UI_QR_CODE_DETECTED",n.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN",n.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE",n.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN",n.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE",n.SHOW_IPFS_MODAL_OPEN="UI_IPFS_MODAL_OPEN",n.SHOW_PERMITTED_NETWORK_TOAST_OPEN="UI_PERMITTED_NETWORK_TOAST_OPEN",n.SHOW_PERMITTED_NETWORK_TOAST_CLOSE="UI_PERMITTED_NETWORK_TOAST_CLOSE",n.SHOW_IPFS_MODAL_CLOSE="UI_IPFS_MODAL_CLOSE",n.IMPORT_TOKENS_POPOVER_OPEN="UI_IMPORT_TOKENS_POPOVER_OPEN",n.IMPORT_TOKENS_POPOVER_CLOSE="UI_IMPORT_TOKENS_POPOVER_CLOSE",n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN="SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN",n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE="SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF",n.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE",n.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED",n.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED",n.ACCOUNT_CHANGED="ACCOUNT_CHANGED",n.CHAIN_CHANGED="CHAIN_CHANGED",n.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED",n.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED",n.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN",n.CLEAR_SWAP_AND_SEND_STATE="CLEAR_SWAP_AND_SEND_STATE",n.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS",n.UNLOCK_FAILED="UNLOCK_FAILED",n.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED",n.LOCK_METAMASK="LOCK_METAMASK",n.DISPLAY_WARNING="DISPLAY_WARNING",n.HIDE_WARNING="HIDE_WARNING",n.SHOW_SETTINGS_PAGE_ERROR="SHOW_SETTINGS_PAGE_ERROR",n.HIDE_SETTINGS_PAGE_ERROR="HIDE_SETTINGS_PAGE_ERROR",n.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION",n.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE",n.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE",n.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE",n.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY",n.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL",n.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS",n.SET_ACCOUNT_DETAILS_ADDRESS="SET_ACCOUNT_DETAILS_ADDRESS",n.COMPLETED_TX="COMPLETED_TX",n.TRANSACTION_ERROR="TRANSACTION_ERROR",n.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS",n.SET_NEXT_NONCE="SET_NEXT_NONCE",n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH",n.SHOW_LOADING="SHOW_LOADING_INDICATION",n.HIDE_LOADING="HIDE_LOADING_INDICATION",n.SHOW_NFT_STILL_FETCHING_INDICATION="SHOW_NFT_STILL_FETCHING_INDICATION",n.HIDE_NFT_STILL_FETCHING_INDICATION="HIDE_NFT_STILL_FETCHING_INDICATION",n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST="SHOW_NFT_DETECTION_ENABLEMENT_TOAST",n.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU",n.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU",n.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS="SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS",n.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS="SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS",n.DEPRECATED_NETWORK_POPOVER_OPEN="DEPRECATED_NETWORK_POPOVER_OPEN",n.DEPRECATED_NETWORK_POPOVER_CLOSE="DEPRECATED_NETWORK_POPOVER_CLOSE",n.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE",n.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS",n.SET_DATA_COLLECTION_FOR_MARKETING="SET_DATA_COLLECTION_FOR_MARKETING",n.DELETE_METAMETRICS_DATA_MODAL_OPEN="DELETE_METAMETRICS_DATA_MODAL_OPEN",n.DELETE_METAMETRICS_DATA_MODAL_CLOSE="DELETE_METAMETRICS_DATA_MODAL_CLOSE",n.DATA_DELETION_ERROR_MODAL_OPEN="DELETE_METAMETRICS_DATA_ERROR_MODAL_OPEN",n.DATA_DELETION_ERROR_MODAL_CLOSE="DELETE_METAMETRICS_DATA_ERROR_MODAL_CLOSE",n.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE",n.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING",n.RESET_ONBOARDING="RESET_ONBOARDING",n.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION",n.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS",n.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS",n.SET_PENDING_TOKENS="SET_PENDING_TOKENS",n.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS",n.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE",n.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID",n.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED",n.SET_EDIT_NETWORK="SET_EDIT_NETWORK",n.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE",n.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE",n.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED",n.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED",n.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS",n.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS",n.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP",n.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION",n.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR",n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE",n.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH",n.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED",n.SET_NEW_TOKENS_IMPORTED_ERROR="SET_NEW_TOKENS_IMPORTED_ERROR",n.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT",n.CONNECT_ACCOUNTS_MODAL_OPEN="UI_CONNECT_ACCOUNTS_MODAL_OPEN",n.CONNECT_ACCOUNTS_MODAL_CLOSE="UI_CONNECT_ACCOUNTS_MODAL_CLOSE",n.SHOW_KEYRING_SNAP_REMOVAL_RESULT="SHOW_KEYRING_SNAP_REMOVAL_RESULT",n.HIDE_KEYRING_SNAP_REMOVAL_RESULT="HIDE_KEYRING_SNAP_REMOVAL_RESULT",n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE="SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE",n.TOKEN_SORT_CRITERIA="TOKEN_SORT_CRITERIA",n.SET_SLIDES="SET_SLIDES"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}],[7502,{"../../app/scripts/lib/util":187,"../../shared/constants/app":5719,"../../shared/constants/hardware-wallets":5726,"../../shared/constants/metametrics":5730,"../../shared/lib/four-byte":5764,"../../shared/lib/switch-direction":5771,"../../shared/modules/conversion.utils":5782,"../../shared/modules/error":5784,"../../shared/modules/hexstring-utils":5788,"../../shared/modules/i18n":5789,"../../shared/modules/selectors":5798,"../../shared/modules/selectors/networks":5799,"../../shared/modules/string-utils":5802,"../ducks/alerts/unconnected-account":6742,"../ducks/metamask/metamask":6758,"../ducks/send":6763,"../helpers/constants/notifications":6774,"../pages/swaps/swaps.util":7467,"../selectors":7485,"./actionConstants":7501,"./background-connection":7503,"@metamask/profile-sync-controller/sdk":2461,"@metamask/rpc-errors":2554,"@sentry/browser":3084,buffer:4074,lodash:4855,loglevel:4863},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.abortTransactionSigning=function(e){return async t=>{try{await(0,w.submitRequestToBackground)("abortTransactionSigning",[e])}catch(e){t(ne(e))}}},n.accountTrackerStartPolling=async function(e){const t=await(0,w.submitRequestToBackground)("accountTrackerStartPolling",[e]);return await ge(t),t},n.accountTrackerStopPollingByPollingToken=async function(e){await(0,w.submitRequestToBackground)("accountTrackerStopPollingByPollingToken",[e]),await pe(e)},n.addImportedTokens=function(e,t){return async n=>{try{await(0,w.submitRequestToBackground)("addImportedTokens",[e,t])}catch(e){(0,k.logErrorWithMessage)(e)}finally{await se(n)}}},n.addNetwork=function(e){return async t=>{r.default.debug("background.addNetwork",e);try{return await(0,w.submitRequestToBackground)("addNetwork",[e])}catch(e){(0,k.logErrorWithMessage)(e),t(ne("Had a problem adding networks!"))}return undefined}},n.addNewAccount=function(){return r.default.debug("background.addNewAccount"),async(e,t)=>{const n=(0,d.getMetaMaskHdKeyrings)(t()),[r]=n;let a=r;if(!a)throw console.error("Should never reach this. There is always a keyring"),new Error("Keyring not found");const o=a.accounts;let s;e(Z());try{s=await(0,w.submitRequestToBackground)("addNewAccount",[o.length])}catch(t){throw e(ne(t)),t}finally{e(ee())}return await se(e),s}},n.addNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||r(Z());try{await(0,w.submitRequestToBackground)("addNft",[e,t])}catch(e){(0,k.logErrorWithMessage)(e),r(ne(e))}finally{await se(r),r(ee())}}},n.addNftVerifyOwnership=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||r(Z());try{await(0,w.submitRequestToBackground)("addNftVerifyOwnership",[e,t])}catch(e){if((0,k.isErrorWithMessage)(e)){const t=(0,k.getErrorMessage)(e);if(t.includes("This NFT is not owned by the user")||t.includes("Unable to verify ownership"))throw e;(0,k.logErrorWithMessage)(e),r(ne(e))}}finally{await se(r),r(ee())}}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,w.callBackgroundMethod)("addPermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await se(n)}},n.addPermittedAccounts=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,w.callBackgroundMethod)("addPermittedAccounts",[e,t],(e=>{e?r(e):n()}))})),await se(n)}},n.addPermittedChain=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,w.callBackgroundMethod)("addPermittedChain",[e,t],(e=>{e?r(e):n()}))})),await se(n)}},n.addPermittedChains=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,w.callBackgroundMethod)("addPermittedChains",[e,t],(e=>{e?r(e):n()}))})),await se(n)}},n.addPollingTokenToAppState=ge,n.addToAddressBook=function(e,t="",n=""){return r.default.debug("background.addToAddressBook"),async(r,a)=>{const{chainId:o}=(0,m.getProviderConfig)(a());let s;try{s=await(0,w.submitRequestToBackground)("setAddressBook",[(0,T.toChecksumHexAddress)(e),t,o,n]),await se(r)}catch(e){throw(0,k.logErrorWithMessage)(e),r(ne("Address book failed to update")),e}s||r(ne("Address book failed to update"))}},n.addToken=function({address:e,symbol:t,decimals:n,image:r,networkClientId:a},o){return async s=>{if(!e)throw new Error("MetaMask - Cannot add token without address");o||s(Z());try{await(0,w.submitRequestToBackground)("addToken",[{address:e,symbol:t,decimals:n,image:r,networkClientId:a}])}catch(e){(0,k.logErrorWithMessage)(e),s(ne(e))}finally{await se(s),s(ee())}}},n.addTransaction=async function(e,t){r.default.debug("background.addTransaction");const n=(0,w.generateActionId)();return await(0,w.submitRequestToBackground)("addTransaction",[e,{...t,origin:u.ORIGIN_METAMASK,actionId:n}])},n.addTransactionAndRouteToConfirmationPage=function(e,t){return async n=>{const a=(0,w.generateActionId)();try{r.default.debug("background.addTransaction");const o=await(0,w.submitRequestToBackground)("addTransaction",[e,{...t,actionId:a,origin:u.ORIGIN_METAMASK}]);return n(V()),o}catch(e){throw n(ee()),n(ne(e)),e}}},n.addTransactionAndWaitForPublish=async function(e,t){r.default.debug("background.addTransactionAndWaitForPublish");const n=(0,w.generateActionId)();return await(0,w.submitRequestToBackground)("addTransactionAndWaitForPublish",[e,{...t,origin:u.ORIGIN_METAMASK,actionId:n}])},n.approvePermissionsRequest=function(e){return t=>{(0,w.callBackgroundMethod)("approvePermissionsRequest",[e],(e=>{e&&t(ne(e)),se(t)}))}},n.attemptLedgerTransportCreation=async function(){return await(0,w.submitRequestToBackground)("attemptLedgerTransportCreation")},n.automaticallySwitchNetwork=function(e,t){return async n=>{await n(z(e)),await n(Y({networkClientId:e,origin:t})),await se(n)}},n.backupUserData=async function(){let e;try{e=await(0,w.submitRequestToBackground)("backupUserData")}catch(e){throw(0,k.logErrorWithMessage)(e),e}return e},n.cancelDecryptMsg=function(e){return async t=>{t(Z());try{await(0,w.submitRequestToBackground)("cancelDecryptMessage",[e.id])}finally{t(ee())}return await se(t),t(F(e.id)),t(X()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{t(Z());try{await(0,w.submitRequestToBackground)("cancelEncryptionPublicKey",[e.id])}finally{t(ee())}return await se(t),t(F(e.id)),t(X()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(ee()),await(0,w.submitRequestToBackground)("cancelQRHardwareSignRequest")}},n.cancelSmartTransaction=function(e){return async t=>{try{await(0,w.submitRequestToBackground)("cancelSmartTransaction",[e])}catch(e){if((0,k.logErrorWithMessage)(e),(0,k.isErrorWithMessage)(e)){const n=(0,k.getErrorMessage)(e);if(n.startsWith("Fetch error:")){const e=(0,E.parseSmartTransactionsError)(n);t({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(ee()),await(0,w.submitRequestToBackground)("cancelSyncQRHardware")}},n.cancelTx=function(e,t=!0){return n=>(t&&n(Z()),new Promise(((t,n)=>{(0,w.callBackgroundMethod)("rejectPendingApproval",[String(e.id),s.providerErrors.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))})).then((()=>se(n))).then((()=>(n((0,g.resetSendState)()),n(F(e.id)),n(ee()),n(X()),e))).catch((e=>{throw n(ee()),e})))},n.cancelTxs=function(e){return async t=>{t(Z());try{const n=e.map((({id:e})=>e)),r=n.map((e=>new Promise(((t,n)=>{(0,w.callBackgroundMethod)("rejectPendingApproval",[String(e),s.providerErrors.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))}))));await Promise.all(r),await se(t),t((0,g.resetSendState)()),n.forEach((e=>{t(F(e))}))}finally{(0,l.getEnvironmentType)()===u.ENVIRONMENT_TYPE_NOTIFICATION?fe():t(ee())}}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:r}=n().appState;e in r||(t({type:C.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,a.captureException)(Error(e)))}},n.checkAccountsPresence=function(e){return async()=>{try{return await(0,w.submitRequestToBackground)("checkAccountsPresence",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.checkAndUpdateAllNftsOwnershipStatus=async function(){await(0,w.submitRequestToBackground)("checkAndUpdateAllNftsOwnershipStatus")},n.checkAndUpdateSingleNftOwnershipStatus=async function(e){await(0,w.submitRequestToBackground)("checkAndUpdateSingleNftOwnershipStatus",[e,!1])},n.checkHardwareStatus=function(e,t){return r.default.debug("background.checkHardwareStatus",e,t),async n=>{n(Z());let r=!1;try{r=await(0,w.submitRequestToBackground)("checkHardwareStatus",[e,t])}catch(e){throw(0,k.logErrorWithMessage)(e),n(ne(e)),e}finally{n(ee())}return await se(n),r}},n.clearAccountDetails=function(){return{type:C.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:C.CLEAR_PENDING_TOKENS}},n.clearSmartTransactionFees=function(){(0,w.submitRequestToBackground)("clearSmartTransactionFees")},n.clearSwapsQuotes=function(){return async e=>{await(0,w.submitRequestToBackground)("clearSwapsQuotes"),await se(e)}},n.clearSwitchedNetworkDetails=function(){return async e=>{await(0,w.submitRequestToBackground)("clearSwitchedNetworkDetails",[]),await se(e)}},n.closeCurrentNotificationWindow=X,n.closeNotificationPopup=fe,n.closeWelcomeScreen=function(){return{type:C.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=ae,n.completedTx=F,n.connectHardware=function(e,t,n,a,s){return r.default.debug("background.connectHardware",e,t,n),async(r,i)=>{const{ledgerTransportType:c}=i().metamask;let u;r(Z(`Looking for your ${(0,o.capitalize)(e)}...`));try{if(a&&e===h.HardwareDeviceNames.ledger&&c===h.LedgerTransportTypes.webhid){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:h.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(h.LEDGER_USB_VENDOR_ID))))throw new Error(s("ledgerWebHIDNotConnectedErrorMessage"))}u=await(0,w.submitRequestToBackground)("connectHardware",[e,t,n])}catch(t){(0,k.logErrorWithMessage)(t);const n=(0,k.getErrorMessage)(t);throw e===h.HardwareDeviceNames.ledger&&c===h.LedgerTransportTypes.webhid&&(0,k.isErrorWithMessage)(t)&&n.match("Failed to open the device")?(r(ne(s("ledgerDeviceOpenFailureMessage"))),new Error(s("ledgerDeviceOpenFailureMessage"))):(e!==h.HardwareDeviceNames.qr&&r(ne(t)),t)}finally{r(ee())}return await se(r),u}},n.createCancelTransaction=function(e,t,n={}){let a;return r.default.debug("background.createCancelTransaction"),r=>{const o=(0,w.generateActionId)();return new Promise(((s,i)=>{(0,w.callBackgroundMethod)("createCancelTransaction",[e,t,{...n,actionId:o}],((t,n)=>{var o;if(t)return null!=t&&null!==(o=t.message)&&void 0!==o&&o.includes("Previous transaction is already confirmed")&&r(Q({name:"TRANSACTION_ALREADY_CONFIRMED",originalTransactionId:e})),r(ne(t)),void i(t);if(n){const e=(0,d.getCurrentNetworkTransactions)({metamask:n}),{id:t}=e[e.length-1];a=t,s()}}))})).then((()=>se(r))).then((()=>a))}},n.createEventFragment=function(e){const t=(0,w.generateActionId)();return(0,w.submitRequestToBackground)("createEventFragment",[{...e,actionId:t}])},n.createMetaMetricsDataDeletionTask=async function(){return await(0,w.submitRequestToBackground)("createMetaMetricsDataDeletionTask")},n.createNewVault=P,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(Z());try{await P(e);return await B(e)}catch(e){throw t(ne(e)),(0,k.isErrorWithMessage)(e)?new Error((0,k.getErrorMessage)(e)):e}finally{t(ee())}}},n.createNewVaultAndRestore=function(e,n){return a=>{a(Z()),r.default.debug("background.createNewVaultAndRestore");const o=Array.from(t.from(n,"utf8").values());return new Promise(((t,n)=>{(0,w.callBackgroundMethod)("createNewVaultAndRestore",[e,o],(e=>{e?n(e):t()}))})).then((()=>a(x()))).then((()=>{a($()),a(ee())})).catch((e=>(a(ne(e)),a(ee()),Promise.reject(e))))}},n.createOnChainTriggers=function(){return async()=>{try{await(0,w.submitRequestToBackground)("createOnChainTriggers")}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.createRetryTransaction=function(e,t){let n;return r=>new Promise(((a,o)=>{const s=(0,w.generateActionId)();(0,w.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{actionId:s}],((e,t)=>{if(e)return r(ne(e)),void o(e);if(t){const e=(0,d.getCurrentNetworkTransactions)(t);n=e[e.length-1],a()}}))})).then((()=>se(r))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n={}){let a;return r.default.debug("background.createSpeedUpTransaction"),r=>{const o=(0,w.generateActionId)();return new Promise(((s,i)=>{(0,w.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{...n,actionId:o}],((e,t)=>{if(e)return r(ne(e)),void i(e);if(t){const e=(0,d.getCurrentNetworkTransactions)(t);a=e[e.length-1],s()}}))})).then((()=>se(r))).then((()=>a))}},n.createTransactionEventFragment=function(e){const t=(0,w.generateActionId)();return(0,w.submitRequestToBackground)("createTransactionEventFragment",[{transactionId:e,actionId:t}])},n.currencyRateStartPolling=async function(e){const t=await(0,w.submitRequestToBackground)("currencyRateStartPolling",[{nativeCurrencies:e}]);return await ge(t),t},n.currencyRateStopPollingByPollingToken=async function(e){await(0,w.submitRequestToBackground)("currencyRateStopPollingByPollingToken",[e]),await pe(e)},n.decodeTransactionData=async function({transactionData:e,contractAddress:t,chainId:n}){return await(0,w.submitRequestToBackground)("decodeTransactionData",[{transactionData:e,contractAddress:t,chainId:n}])},n.decryptMsg=function(e){return r.default.debug("action - decryptMsg"),async t=>{t(Z()),r.default.debug("actions calling background.decryptMessage");try{await(0,w.submitRequestToBackground)("decryptMessage",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),t(ne(e)),e}finally{t(ee())}return await se(t),t(F(e.metamaskId)),t(X()),e}},n.decryptMsgInline=function(e){return r.default.debug("action - decryptMsgInline"),async t=>{r.default.debug("actions calling background.decryptMessageInline");try{await(0,w.submitRequestToBackground)("decryptMessageInline",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),t(ne(e)),e}return(await se(t)).unapprovedDecryptMsgs[e.metamaskId]}},n.deleteAccountSyncingDataFromUserStorage=function(){return async()=>{try{return await(0,w.submitRequestToBackground)("deleteAccountSyncingDataFromUserStorage",[i.USER_STORAGE_FEATURE_NAMES.accounts])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.deleteExpiredNotifications=function(){return async(e,t)=>{const n=t().metamask.metamaskNotificationsList.filter((e=>{const t=new Date(Date.now()-v.NOTIFICATIONS_EXPIRATION_DELAY);return Boolean(e.readDate&&new Date(e.readDate)<t)})).map((({id:e})=>e));n.length&&(await(0,w.submitRequestToBackground)("deleteNotificationsById",[n]),await se(e))}},n.deleteInterface=function(e){return async t=>{await(0,w.submitRequestToBackground)("deleteInterface",[e]),await se(t)}},n.deleteNotificationsById=function(e){return async()=>{try{return await(0,w.submitRequestToBackground)("deleteNotificationsById",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.deleteOnChainTriggersByAccount=function(e){return async()=>{try{await(0,w.submitRequestToBackground)("deleteOnChainTriggersByAccount",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.detectNfts=function(e){return async t=>{t(J()),r.default.debug("background.detectNfts");try{await(0,w.submitRequestToBackground)("detectNfts",[e])}finally{t(te())}await se(t)}},n.detectTokens=function(){return async e=>{e(Z()),r.default.debug("background.detectTokens"),await(0,w.submitRequestToBackground)("detectTokens"),e(ee()),await se(e)}},n.disableAccountUpgradeForChain=async function(e){return await(0,w.submitRequestToBackground)("disableAccountUpgradeForChain",[e])},n.disableMetamaskNotifications=function(){return async()=>{try{await(0,w.submitRequestToBackground)("disableMetamaskNotifications")}catch(e){throw r.default.error(e),e}}},n.disableProfileSyncing=function(){return async()=>{try{await(0,w.submitRequestToBackground)("disableProfileSyncing")}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.disableSnap=function(e){return async t=>{await(0,w.submitRequestToBackground)("disableSnap",[e]),await se(t)}},n.disconnectOriginFromSnap=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("disconnectOriginFromSnap",[e,t]),await se(n)}},n.dismissSmartTransactionsErrorMessage=function(){return{type:C.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=ne,n.enableMetamaskNotifications=function(){return async()=>{try{await(0,w.submitRequestToBackground)("enableMetamaskNotifications")}catch(e){throw r.default.error(e),e}}},n.enableProfileSyncing=function(){return async()=>{try{await(0,w.submitRequestToBackground)("enableProfileSyncing")}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.enableSnap=function(e){return async t=>{await(0,w.submitRequestToBackground)("enableSnap",[e]),await se(t)}},n.encryptionPublicKeyMsg=function(e){return r.default.debug("action - encryptionPublicKeyMsg"),async t=>{t(Z()),r.default.debug("actions calling background.encryptionPublicKey");try{await(0,w.submitRequestToBackground)("encryptionPublicKey",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),t(ne(e)),e}finally{t(ee())}return await se(t),t(F(e.metamaskId)),t(X()),e}},n.endBackgroundTrace=async function(e){const t=e.timestamp||performance.timeOrigin+performance.now();await(0,w.submitRequestToBackground)("endTrace",[{...e,timestamp:t}])},n.estimateGas=function(e){return(0,w.submitRequestToBackground)("estimateGas",[e])},n.exportAccount=function(e,t,n,a){return function(o){return o(Z()),r.default.debug("background.verifyPassword"),new Promise(((s,i)=>{(0,w.callBackgroundMethod)("verifyPassword",[e],(function(c){if(c)return r.default.error("Error in verifying password."),o(ee()),o(ne("Incorrect Password.")),void i(c);r.default.debug("background.exportAccount"),(0,w.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(o(ee()),e)return(0,k.logErrorWithMessage)(e),o(ne("Had a problem exporting the account.")),void i(e);n(t),a(!0),s(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return r.default.debug("background.verifyPassword"),new Promise(((a,o)=>{(0,w.callBackgroundMethod)("verifyPassword",[e],(function(s){if(s)return r.default.error("Error in submitting password."),void o(s);r.default.debug("background.exportAccounts");const i=t.map((t=>new Promise(((r,a)=>(0,w.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(e)return(0,k.logErrorWithMessage)(e),n(ne("Had a problem exporting the account.")),void a(e);r(t)}))))));a(Promise.all(i))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[r,a]=await(0,w.submitRequestToBackground)("fetchAndSetQuotes",[e,t]);return await se(n),[r,a]}},n.fetchAndUpdateMetamaskNotifications=function(e){return async()=>{try{return await(0,w.submitRequestToBackground)("fetchAndUpdateMetamaskNotifications",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.fetchSmartTransactionFees=function(e,t){return async n=>{t&&(t.value="0x0");try{const r=await await(0,w.submitRequestToBackground)("fetchSmartTransactionFees",[e,t]);return n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:null}),r}catch(e){if((0,k.logErrorWithMessage)(e),(0,k.isErrorWithMessage)(e)){const t=(0,k.getErrorMessage)(e);if(t.startsWith("Fetch error:")){const e=(0,E.parseSmartTransactionsError)(t);n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,w.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(e){(0,k.logErrorWithMessage)(e)}}},n.finalizeEventFragment=function(e,t){return(0,w.submitRequestToBackground)("finalizeEventFragment",[e,t])},n.forceUpdateMetamaskState=se,n.forgetDevice=function(e){return r.default.debug("background.forgetDevice",e),async t=>{t(Z());try{await(0,w.submitRequestToBackground)("forgetDevice",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),t(ne(e)),e}finally{t(ee())}await se(t)}},n.gasFeeStartPollingByNetworkClientId=async function(e){const t=await(0,w.submitRequestToBackground)("gasFeeStartPolling",[{networkClientId:e}]);return await ge(t),t},n.gasFeeStopPollingByPollingToken=async function(e){await(0,w.submitRequestToBackground)("gasFeeStopPollingByPollingToken",[e]),await pe(e)},n.getBalancesInSingleCall=async function(e,t,n){return await(0,w.submitRequestToBackground)("getBalancesInSingleCall",[e,t,n])},n.getCode=async function(e,t){return await(0,w.submitRequestToBackground)("getCode",[e,t])},n.getContractMethodData=function(e=""){return async(t,n)=>{const a=(0,l.addHexPrefix)(e).slice(0,10);if(a.length<10)return{};const{knownMethodData:o,use4ByteResolution:s}=n().metamask;if(null!=o&&o[a]&&0!==Object.keys(o[a]).length)return o[a];r.default.debug("loadingMethodData");const{name:i,params:c}=await(0,N.getMethodDataAsync)(a,s);return(0,w.callBackgroundMethod)("addKnownMethodData",[a,{name:i,params:c}],(e=>{e&&t(ne(e))})),{name:i,params:c}}},n.getCurrentNetworkEIP1559Compatibility=async function(){let e;try{e=await(0,w.submitRequestToBackground)("getCurrentNetworkEIP1559Compatibility")}catch(e){console.error(e)}return e},n.getGasFeeTimeEstimate=function(e,t){return(0,w.submitRequestToBackground)("getGasFeeTimeEstimate",[e,t])},n.getLastInteractedConfirmationInfo=async function(){return await(0,w.submitRequestToBackground)("getLastInteractedConfirmationInfo")},n.getLayer1GasFee=function({chainId:e,networkClientId:t,transactionParams:n}){return async()=>await(0,w.submitRequestToBackground)("getLayer1GasFee",[{chainId:e,networkClientId:t,transactionParams:n}])},n.getNFTContractInfo=async function(e,t){return await(0,w.submitRequestToBackground)("getNFTContractInfo",[e,t])},n.getNetworkConfigurationByNetworkClientId=async function(e){let t;try{t=await(0,w.submitRequestToBackground)("getNetworkConfigurationByNetworkClientId",[e])}catch(e){console.error(e)}return t},n.getNextAvailableAccountName=async function(e){return await(0,w.submitRequestToBackground)("getNextAvailableAccountName",[e])},n.getNextNonce=function(e){return async(t,n)=>{const r=(0,m.getSelectedNetworkClientId)(n());let a;try{a=await(0,w.submitRequestToBackground)("getNextNonce",[e,r])}catch(e){throw t(ne(e)),e}return t(le(a)),a}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(me(await(0,w.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},n.getPhishingResult=async function(e){return await(0,w.submitRequestToBackground)("getPhishingResult",[e])},n.getRequestAccountTabIds=function(){return async e=>{e(de(await(0,w.submitRequestToBackground)("getRequestAccountTabIds")))}},n.getRpcMethodPreferences=function(){return async e=>{e(Z()),await(0,w.submitRequestToBackground)("getRpcMethodPreferences",[]),e(ee())}},n.getSeedPhrase=B,n.getSnapAccountsById=async function(e){return await(0,w.submitRequestToBackground)("getAccountsBySnapId",[e])},n.getTokenStandardAndDetails=async function(e,t,n){return await(0,w.submitRequestToBackground)("getTokenStandardAndDetails",[e,t,n])},n.getTokenSymbol=async function(e){return await(0,w.submitRequestToBackground)("getTokenSymbol",[e])},n.getTransactions=async function(e={}){return await(0,w.submitRequestToBackground)("getTransactions",[e])},n.goHome=M,n.handleSnapRequest=async function(e){return(0,w.submitRequestToBackground)("handleSnapRequest",[e])},n.hideAccountBanner=function(){return(0,w.submitRequestToBackground)("setShowAccountBanner",[!1])},n.hideAlert=function(){return{type:C.ALERT_CLOSE}},n.hideBetaHeader=function(){return(0,w.submitRequestToBackground)("setShowBetaHeader",[!1])},n.hideDeprecatedNetworkModal=function(){return{type:C.DEPRECATED_NETWORK_POPOVER_CLOSE}},n.hideImportNftsModal=function(){return{type:C.IMPORT_NFTS_MODAL_CLOSE}},n.hideImportTokensModal=function(){return{type:C.IMPORT_TOKENS_POPOVER_CLOSE}},n.hideIpfsModal=function(){return{type:C.SHOW_IPFS_MODAL_CLOSE}},n.hideKeyringRemovalResultModal=function(){return{type:C.HIDE_KEYRING_SNAP_REMOVAL_RESULT}},n.hideLoadingIndication=ee,n.hideModal=function(){return{type:C.MODAL_CLOSE}},n.hideNetworkBanner=function(){return(0,w.submitRequestToBackground)("setShowNetworkBanner",[!1])},n.hideNetworkDropdown=function(){return{type:C.NETWORK_DROPDOWN_CLOSE}},n.hideNftStillFetchingIndication=te,n.hidePermissionsTour=function(){return(0,w.submitRequestToBackground)("setShowPermissionsTour",[!1])},n.hidePermittedNetworkToast=function(){return{type:C.SHOW_PERMITTED_NETWORK_TOAST_CLOSE}},n.hideTestNetMessage=function(){return(0,w.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},n.hideWarning=function(){return{type:C.HIDE_WARNING}},n.ignoreTokens=function({tokensToIgnore:e,dontShowLoadingIndicator:t=!1,networkClientId:n=null}){const r=Array.isArray(e)?e:[e];return async e=>{t||e(Z());try{await(0,w.submitRequestToBackground)("ignoreTokens",[r,n])}catch(t){(0,k.logErrorWithMessage)(t),e(ne(t))}finally{await se(e),e(ee())}}},n.importNewAccount=function(e,t,n){return async a=>{a(Z(n));try{r.default.debug("background.importAccountWithStrategy"),await(0,w.submitRequestToBackground)("importAccountWithStrategy",[e,t])}finally{a(ee())}return await se(a)}},n.isNftOwner=async function(e,t,n){return await(0,w.submitRequestToBackground)("isNftOwner",[e,t,n])},n.lockMetamask=function(){return r.default.debug("background.setLocked"),e=>(e(Z()),j().then((()=>se(e))).catch((t=>(e(ne((0,k.getErrorMessage)(t))),Promise.reject(t)))).then((()=>{e(ee()),e({type:C.LOCK_METAMASK})})).catch((()=>{e(ee()),e({type:C.LOCK_METAMASK})})))},n.markMetamaskNotificationsAsRead=function(e){return async()=>{try{await(0,w.submitRequestToBackground)("markMetamaskNotificationsAsRead",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>{(0,w.callBackgroundMethod)("markPasswordForgotten",[],(n=>{n?t(n):e()}))}))}finally{e(ee()),await se(e)}}},n.performSignIn=function(){return async()=>{try{await(0,w.submitRequestToBackground)("performSignIn")}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred during sign-in.";throw(0,k.logErrorWithMessage)(t),e}}},n.performSignOut=function(){return async()=>{try{await(0,w.submitRequestToBackground)("performSignOut")}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.qrCodeDetected=function(e){return async t=>{await t({type:C.QR_CODE_DETECTED,value:e}),t((0,g.computeEstimatedGasLimit)())}},n.rejectAllApprovals=function(){return async e=>{await(0,w.submitRequestToBackground)("rejectAllPendingApprovals");const{pendingApprovals:t}=await se(e);0===Object.values(t).length&&e(X())}},n.rejectAllMessages=function(e){return async t=>{const n=(0,s.serializeError)(s.providerErrors.userRejectedRequest());await Promise.all(e.map((async({id:e})=>await(0,w.submitRequestToBackground)("rejectPendingApproval",[e,n]))));const{pendingApprovals:r}=await se(t);0===Object.values(r).length&&t(X())}},n.rejectPendingApproval=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("rejectPendingApproval",[e,t]);const{pendingApprovals:r}=await se(n);0===Object.values(r).length&&n(X())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,r)=>{(0,w.callBackgroundMethod)("rejectPermissionsRequest",[e],(e=>{if(e)return t(ne(e)),void r(e);se(t).then(n).catch(r)}))}))},n.removeAccount=function(e){return async t=>{t(Z());try{await new Promise(((t,n)=>{(0,w.callBackgroundMethod)("removeAccount",[e],((e,r)=>{e?n(e):t(r)}))})),await se(t)}catch(e){throw t(ne(e)),e}finally{t(ee())}r.default.info(`Account removed: ${e}`),t($())}},n.removeAndIgnoreNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot ignore NFT without address");if(!t)throw new Error("MetaMask - Cannot ignore NFT without tokenID");n||r(Z());try{await(0,w.submitRequestToBackground)("removeAndIgnoreNft",[e,t])}catch(e){throw(0,k.logErrorWithMessage)(e),r(ne(e)),e}finally{await se(r),r(ee())}}},n.removeFromAddressBook=function(e,t){return r.default.debug("background.removeFromAddressBook"),async n=>{await(0,w.submitRequestToBackground)("removeFromAddressBook",[e,(0,T.toChecksumHexAddress)(t)]),await se(n)}},n.removeNetwork=function(e){return async()=>{try{await(0,w.submitRequestToBackground)("removeNetwork",[e])}catch(e){(0,k.logErrorWithMessage)(e)}}},n.removeNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot remove NFT without address");if(!t)throw new Error("MetaMask - Cannot remove NFT without tokenID");n||r(Z());try{await(0,w.submitRequestToBackground)("removeNft",[e,t])}catch(e){(0,k.logErrorWithMessage)(e),r(ne(e))}finally{await se(r),r(ee())}}},n.removePermissionsFor=function(e){return t=>{(0,w.callBackgroundMethod)("removePermissionsFor",[e],(e=>{e&&t(ne(e))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,w.callBackgroundMethod)("removePermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await se(n)}},n.removePermittedChain=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,w.callBackgroundMethod)("removePermittedChain",[e,t],(e=>{e?r(e):n()}))})),await se(n)}},n.removePollingTokenFromAppState=pe,n.removeSlide=function(e){return async()=>{try{await(0,w.submitRequestToBackground)("removeSlide",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.removeSnap=function(e){return async(t,n)=>{var r;t(Z());const a=(null===(r=(0,d.getPermissionSubjects)(n())[e])||void 0===r||null===(r=r.permissions)||void 0===r?void 0:r.snap_manageAccounts)!==undefined;try{if(a){const t=await(0,w.submitRequestToBackground)("getAccountsBySnapId",[e]);for(const e of t)await(0,w.submitRequestToBackground)("removeAccount",[e])}await(0,w.submitRequestToBackground)("removeSnap",[e]),await se(t)}catch(e){throw t(ne(e)),e}finally{t(ee())}}},n.requestAccountsAndChainPermissionsWithId=function(e){return async t=>{const n=await(0,w.submitRequestToBackground)("requestAccountsAndChainPermissionsWithId",[e]);return await se(t),n}},n.requestRevealSeedWords=function(e){return async t=>{t(Z()),r.default.debug("background.verifyPassword");try{await D(e);return await B(e)}finally{t(ee())}}},n.requestUserApproval=function({origin:e,type:t,requestData:n}){return async r=>{try{await(0,w.submitRequestToBackground)("requestUserApproval",[{origin:e,type:t,requestData:n}])}catch(e){(0,k.logErrorWithMessage)(e),r(ne("Had trouble requesting user approval"))}}},n.resetAccount=function(){return e=>(e(Z()),new Promise(((t,n)=>{(0,w.callBackgroundMethod)("resetAccount",[],((a,o)=>{if(e(ee()),a)return(0,k.isErrorWithMessage)(a)&&e(ne(a)),void n(a);r.default.info(`Transaction history reset for ${o}`),e($()),t(o)}))})))},n.resetBackgroundSwapsState=function(){return async e=>{await(0,w.submitRequestToBackground)("resetSwapsState"),await se(e)}},n.resetOnboarding=function(){return async e=>{try{await e(ue(!1)),e(oe())}catch(e){console.error(e)}}},n.resetOnboardingAction=oe,n.resetSwapsPostFetchState=function(){return async e=>{await(0,w.submitRequestToBackground)("resetPostFetchState"),await se(e)}},n.resetViewedNotifications=function(){return(0,w.submitRequestToBackground)("resetViewedNotifications")},n.resolvePendingApproval=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("resolvePendingApproval",[e,t]);const{pendingApprovals:r}=await se(n);0===Object.values(r).length&&n(X())}},n.restoreUserData=async function(e){try{await(0,w.submitRequestToBackground)("restoreUserData",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}return!0},n.revokeDynamicSnapPermissions=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("revokeDynamicSnapPermissions",[e,t]),await se(n)}},n.rollbackToPreviousProvider=function(){return async e=>{try{await(0,w.submitRequestToBackground)("rollbackToPreviousProvider")}catch(t){(0,k.logErrorWithMessage)(t),e(ne("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await(0,w.submitRequestToBackground)("safeRefetchQuotes"),await se(e)}},n.setAccountDetailsAddress=function(e){return{type:C.SET_ACCOUNT_DETAILS_ADDRESS,payload:e}},n.setAccountLabel=function(e,t){return n=>(n(Z()),r.default.debug("background.setAccountLabel"),new Promise(((r,a)=>{(0,w.callBackgroundMethod)("setAccountLabel",[e,t],(o=>{if(n(ee()),o)return n(ne(o)),void a(o);n({type:C.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),r(e)}))})))},n.setActiveNetwork=function(e){return async t=>{r.default.debug(`background.setActiveNetwork: ${e}`);try{await(0,w.submitRequestToBackground)("setActiveNetwork",[e])}catch(e){(0,k.logErrorWithMessage)(e),t(ne("Had a problem changing networks!"))}}},n.setActiveNetworkConfigurationId=z,n.setActiveNetworkWithError=function(e){return async t=>{r.default.debug(`background.setActiveNetwork: ${e}`);try{await(0,w.submitRequestToBackground)("setActiveNetwork",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),t(ne("Had a problem changing networks!")),new Error("Had a problem changing networks!")}}},n.setAddSnapAccountEnabled=async function(e){try{await(0,w.submitRequestToBackground)("setAddSnapAccountEnabled",[e])}catch(e){(0,k.logErrorWithMessage)(e)}},n.setAdvancedGasFee=function(e){return t=>{t(Z()),r.default.debug("background.setAdvancedGasFee"),(0,w.callBackgroundMethod)("setAdvancedGasFee",[e],(e=>{t(ee()),e&&t(ne(e))}))}},n.setAggregatedBalancePopoverShown=function(){return re("shouldShowAggregatedBalancePopover",!1)},n.setAlertEnabledness=async function(e,t){await(0,w.submitRequestToBackground)("setAlertEnabledness",[e,t])},n.setAutoLockTimeLimit=function(e){return re("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await(0,w.submitRequestToBackground)("setBackgroundSwapRouteState",[e]),await se(t)}},n.setCompletedOnboarding=function(){return async e=>{e(Z());try{await(0,w.submitRequestToBackground)("completeOnboarding"),e(ae())}catch(t){throw e(ne(t)),t}finally{e(ee())}}},n.setConfirmationAdvancedDetailsOpen=function(e){return re("showConfirmationAdvancedDetails",e)},n.setConfirmationExchangeRates=function(e){return{type:C.SET_CONFIRMATION_EXCHANGE_RATES,value:e}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,w.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(e=>{if((0,k.isErrorWithMessage)(e))throw new Error((0,k.getErrorMessage)(e))}))}},n.setCurrentCurrency=function(e){return async t=>{t(Z()),r.default.debug("background.setCurrentCurrency");try{await(0,w.submitRequestToBackground)("setCurrentCurrency",[e]),await se(t)}catch(e){return(0,k.logErrorWithMessage)(e),void t(ne(e))}finally{t(ee())}}},n.setCurrentExtensionPopupId=function(e){return async t=>{await(0,w.submitRequestToBackground)("setCurrentExtensionPopupId",[e]),await se(t)}},n.setCurrentLocale=ce,n.setCustomApproveTxData=function(e){return async t=>{await(0,w.submitRequestToBackground)("setCustomApproveTxData",[e]),await se(t)}},n.setDataCollectionForMarketing=function(e){return async t=>{r.default.debug("background.setDataCollectionForMarketing"),await(0,w.submitRequestToBackground)("setDataCollectionForMarketing",[e]),t({type:C.SET_DATA_COLLECTION_FOR_MARKETING,value:e})}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await(0,w.submitRequestToBackground)("setDefaultHomeActiveTabName",[e]),await se(t)}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(Z()),await(0,w.submitRequestToBackground)("setDismissSeedBackUpReminder",[e]),t(ee())}},n.setEditedNetwork=function(e=undefined){return{type:C.SET_EDIT_NETWORK,payload:e}},n.setFeatureAnnouncementsEnabled=function(e){return async()=>{try{await(0,w.submitRequestToBackground)("setFeatureAnnouncementsEnabled",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.setFeatureFlag=function(e,t,n){return r=>(r(Z()),new Promise(((a,o)=>{(0,w.callBackgroundMethod)("setFeatureFlag",[e,t],((e,t)=>{if(r(ee()),e)return r(ne(e)),void o(e);n&&r(Q({name:n})),a(t)}))})))},n.setFeatureNotificationsEnabled=function(e){return re("featureNotificationsEnabled",e)},n.setFirstTimeFlowType=function(e){return async t=>{try{r.default.debug("background.setFirstTimeFlowType"),await(0,w.submitRequestToBackground)("setFirstTimeFlowType",[e]),t({type:C.SET_FIRST_TIME_FLOW_TYPE,value:e})}catch(e){t(ne(e))}}},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:C.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,payload:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return re("hideZeroBalanceTokens",e)},n.setIncomingTransactionsPreferences=function(e,t){return async n=>{n(Z()),r.default.debug("background.setIncomingTransactionsPreferences"),await(0,w.submitRequestToBackground)("setIncomingTransactionsPreferences",[e,t]),n(ee())}},n.setInitialGasEstimate=function(e){return async t=>{await(0,w.submitRequestToBackground)("setInitialGasEstimate",[e]),await se(t)}},n.setIpfsGateway=function(e){return t=>{r.default.debug("background.setIpfsGateway"),(0,w.callBackgroundMethod)("setIpfsGateway",[e],(e=>{e&&t(ne(e))}))}},n.setIsIpfsGatewayEnabled=function(e){return t=>{r.default.debug("background.setIsIpfsGatewayEnabled"),(0,w.callBackgroundMethod)("setIsIpfsGatewayEnabled",[e],(e=>{e&&t(ne(e))}))}},n.setLastActiveTime=function(){return e=>{(0,w.callBackgroundMethod)("setLastActiveTime",[],(t=>{t&&e(ne(t))}))}},n.setLastInteractedConfirmationInfo=async function(e){return await(0,w.submitRequestToBackground)("setLastInteractedConfirmationInfo",[e])},n.setLastViewedUserSurvey=function(e){return async()=>{await(0,w.submitRequestToBackground)("setLastViewedUserSurvey",[e])}},n.setName=function(e){return async()=>{await(0,w.submitRequestToBackground)("setName",[e])}},n.setNetworkClientIdForDomain=function(e,t){return(0,w.submitRequestToBackground)("setNetworkClientIdForDomain",[e,t])},n.setNewNetworkAdded=function({networkConfigurationId:e,nickname:t}){return{type:C.SET_NEW_NETWORK_ADDED,payload:{networkConfigurationId:e,nickname:t}}},n.setNewNftAddedMessage=function(e){return{type:C.SET_NEW_NFT_ADDED_MESSAGE,payload:e}},n.setNewTokensImported=function(e){return{type:C.SET_NEW_TOKENS_IMPORTED,payload:e}},n.setNewTokensImportedError=function(e){return{type:C.SET_NEW_TOKENS_IMPORTED_ERROR,payload:e}},n.setNextNonce=le,n.setOpenMetamaskTabsIDs=me,n.setOpenSeaEnabled=function(e){return async t=>{t(Z()),r.default.debug("background.setOpenSeaEnabled");try{await(0,w.submitRequestToBackground)("setOpenSeaEnabled",[e])}finally{t(ee())}}},n.setOutdatedBrowserWarningLastShown=function(e){return async()=>{await(0,w.submitRequestToBackground)("setOutdatedBrowserWarningLastShown",[e])}},n.setOverrideContentSecurityPolicyHeader=function(e){return async t=>{t(Z()),await(0,w.submitRequestToBackground)("setOverrideContentSecurityPolicyHeader",[e]),t(ee())}},n.setParticipateInMetaMetrics=function(e){return t=>(r.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,a)=>{(0,w.callBackgroundMethod)("setParticipateInMetaMetrics",[e],((o,s)=>{if(r.default.debug(o),o)return t(ne(o)),void a(o);t({type:C.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,s])}))})))},n.setPendingTokens=function(e){const{customToken:t,selectedTokens:n={},tokenAddressList:r=[]}=e,a=null!=t&&t.address&&null!=t&&t.symbol&&Boolean((null==t?void 0:t.decimals)>=0&&(null==t?void 0:t.decimals)<=36)?{...n,[t.address]:{...t,isCustom:!0}}:n;return Object.keys(a).forEach((e=>{const t=r.find((t=>(0,A.isEqualCaseInsensitive)(t,e)));a[e]={...a[e],unlisted:!t}})),{type:C.SET_PENDING_TOKENS,payload:a}},n.setPreference=re,n.setPrivacyMode=function(e){return re("privacyMode",e,!1)},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,w.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(e=>{if((0,k.isErrorWithMessage)(e))throw new Error((0,k.getErrorMessage)(e))}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{(0,w.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[e],(e=>{if((0,k.isErrorWithMessage)(e))throw new Error((0,k.getErrorMessage)(e))}))}},n.setRemoveNftMessage=function(e){return{type:C.SET_REMOVE_NFT_MESSAGE,payload:e}},n.setRequestAccountTabIds=de,n.setSecurityAlertsEnabled=function(e){try{(0,w.submitRequestToBackground)("setSecurityAlertsEnabled",[e])}catch(e){(0,k.logErrorWithMessage)(e)}},n.setSeedPhraseBackedUp=ue,n.setSelectedAccount=function(e){return async(t,n)=>{t(Z()),r.default.debug("background.setSelectedAccount");const a=n(),o=(0,f.getUnconnectedAccountAlertEnabledness)(a),s=a.activeTab.origin,i=(0,d.getInternalAccountByAddress)(a,e),c=(0,d.getPermittedAccountsForCurrentTab)(a),u=Boolean(s)&&c.includes(i.address),l=Boolean(s)&&c.includes(e),m=u&&!l;try{await K(i.id),await se(t)}catch(e){return void t(ne(e))}finally{t(ee())}o&&m&&(t((0,p.switchedToUnconnectedAccount)()),await he(s))}},n.setSelectedInternalAccount=function(e){return async t=>{t(Z()),r.default.debug("background.setSelectedInternalAccount");try{await K(e)}catch(e){return void t(ne(e))}finally{t(ee())}}},n.setSelectedNetworkConfigurationId=function(e){return{type:C.SET_SELECTED_NETWORK_CONFIGURATION_ID,payload:e}},n.setSelectedQuoteAggId=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSelectedQuoteAggId",[e]),await se(t)}},n.setServiceWorkerKeepAlivePreference=function(e){return async t=>{t(Z()),r.default.debug("background.setServiceWorkerKeepAlivePreference");try{await(0,w.submitRequestToBackground)("setServiceWorkerKeepAlivePreference",[e])}catch(e){t(ne(e))}finally{t(ee())}}},n.setShowExtensionInFullSizeView=function(e){return re("showExtensionInFullSizeView",e)},n.setShowFiatConversionOnTestnetsPreference=function(e){return re("showFiatInTestnets",e)},n.setShowMultiRpcModal=function(e){return re("showMultiRpcModal",e)},n.setShowNativeTokenAsMainBalancePreference=function(e){return re("showNativeTokenAsMainBalance",e)},n.setShowTestNetworks=function(e){return re("showTestNetworks",e)},n.setSlides=function(e){return{type:C.SET_SLIDES,slides:e}},n.setSmartTransactionsPreferenceEnabled=function(e){return async(t,n)=>{const r=(0,_.getSmartTransactionsOptInStatusInternal)(n());Te({category:S.MetaMetricsEventCategory.Settings,event:S.MetaMetricsEventName.SettingsUpdated,properties:{stx_opt_in:e,prev_stx_opt_in:r}}),await t(re("smartTransactionsOptInStatus",e)),await se(t)}},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{if(e!==undefined&&null!==e)try{await(0,w.submitRequestToBackground)("setStatusRefreshInterval",[e])}catch(e){(0,k.logErrorWithMessage)(e)}}},n.setSnapsAddSnapAccountModalDismissed=async function(){await(0,w.submitRequestToBackground)("setSnapsAddSnapAccountModalDismissed",[!0])},n.setSnapsInstallPrivacyWarningShownStatus=function(e){return async()=>{await(0,w.submitRequestToBackground)("setSnapsInstallPrivacyWarningShownStatus",[e])}},n.setSwapsErrorKey=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsErrorKey",[e]),await se(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsFeatureFlags",[e]),await se(t)}},n.setSwapsLiveness=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsLiveness",[e]),await se(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[e]),await se(t)}},n.setSwapsTokens=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsTokens",[e]),await se(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await se(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsTxGasPrice",[e]),await se(t)}},n.setSwitchedNetworkDetails=Y,n.setTermsOfUseLastAgreed=function(e){return async()=>{await(0,w.submitRequestToBackground)("setTermsOfUseLastAgreed",[e])}},n.setTheme=function(e){return async t=>{t(Z()),r.default.debug("background.setTheme");try{await(0,w.submitRequestToBackground)("setTheme",[e])}finally{t(ee())}}},n.setTokenNetworkFilter=function(e){return re("tokenNetworkFilter",e,!1)},n.setTokenSortConfig=function(e){return re("tokenSortConfig",e,!1)},n.setTransactionActive=function(e,t){return async()=>{await(0,w.submitRequestToBackground)("setTransactionActive",[e,t])}},n.setUnconnectedAccountAlertShown=he,n.setUse4ByteResolution=function(e){return async t=>{t(Z()),r.default.debug("background.setUse4ByteResolution");try{await(0,w.submitRequestToBackground)("setUse4ByteResolution",[e])}catch(e){t(ne(e))}finally{t(ee())}}},n.setUseAddressBarEnsResolution=function(e){return t=>{r.default.debug("background.setUseAddressBarEnsResolution"),(0,w.callBackgroundMethod)("setUseAddressBarEnsResolution",[e],(e=>{e&&t(ne(e))}))}},n.setUseBlockie=function(e){return t=>{t(Z()),r.default.debug("background.setUseBlockie"),(0,w.callBackgroundMethod)("setUseBlockie",[e],(e=>{t(ee()),e&&t(ne(e))}))}},n.setUseCurrencyRateCheck=function(e){return t=>{t(Z()),r.default.debug("background.setUseCurrencyRateCheck"),(0,w.callBackgroundMethod)("setUseCurrencyRateCheck",[e],(e=>{t(ee()),e&&t(ne(e))}))}},n.setUseExternalNameSources=function(e){try{(0,w.submitRequestToBackground)("setUseExternalNameSources",[e])}catch(e){(0,k.logErrorWithMessage)(e)}},n.setUseMultiAccountBalanceChecker=function(e){return t=>{t(Z()),r.default.debug("background.setUseMultiAccountBalanceChecker"),(0,w.callBackgroundMethod)("setUseMultiAccountBalanceChecker",[e],(e=>{t(ee()),e&&t(ne(e))}))}},n.setUseNftDetection=function(e){return async t=>{t(Z()),r.default.debug("background.setUseNftDetection");try{await(0,w.submitRequestToBackground)("setUseNftDetection",[e])}finally{t(ee())}}},n.setUsePhishDetect=function(e){return t=>{t(Z()),r.default.debug("background.setUsePhishDetect"),(0,w.callBackgroundMethod)("setUsePhishDetect",[e],(e=>{t(ee()),e&&t(ne(e))}))}},n.setUseSafeChainsListValidation=function(e){return t=>{t(Z()),r.default.debug("background.setUseSafeChainsListValidation"),(0,w.callBackgroundMethod)("setUseSafeChainsListValidation",[e],(e=>{t(ee()),e&&t(ne(e))}))}},n.setUseTokenDetection=function(e){return t=>{t(Z()),r.default.debug("background.setUseTokenDetection"),(0,w.callBackgroundMethod)("setUseTokenDetection",[e],(e=>{t(ee()),e&&t(ne(e))}))}},n.setUseTransactionSimulations=function(e){try{(0,w.submitRequestToBackground)("setUseTransactionSimulations",[e])}catch(e){(0,k.logErrorWithMessage)(e)}},n.setWatchEthereumAccountEnabled=async function(e){try{await(0,w.submitRequestToBackground)("setWatchEthereumAccountEnabled",[e])}catch(e){(0,k.logErrorWithMessage)(e)}},n.setWeb3ShimUsageAlertDismissed=async function(e){await(0,w.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[e])},n.showAccountsPage=$,n.showAlert=function(e){return{type:C.ALERT_OPEN,payload:e}},n.showConfTxPage=V,n.showConfirmTurnOffProfileSyncing=function(){return e=>{e(Q({name:"CONFIRM_TURN_OFF_PROFILE_SYNCING"}))}},n.showConfirmTurnOnMetamaskNotifications=function(){return e=>{e(Q({name:"TURN_ON_METAMASK_NOTIFICATIONS"}))}},n.showDeprecatedNetworkModal=function(){return{type:C.DEPRECATED_NETWORK_POPOVER_OPEN}},n.showImportNftsModal=function(e){return{type:C.IMPORT_NFTS_MODAL_OPEN,payload:e}},n.showImportTokensModal=function(){return{type:C.IMPORT_TOKENS_POPOVER_OPEN}},n.showIpfsModal=function(){return{type:C.SHOW_IPFS_MODAL_OPEN}},n.showKeyringSnapRemovalModal=function(e){return{type:C.SHOW_KEYRING_SNAP_REMOVAL_RESULT,payload:e}},n.showLoadingIndication=Z,n.showModal=Q,n.showNetworkDropdown=function(){return{type:C.NETWORK_DROPDOWN_OPEN}},n.showNftStillFetchingIndication=J,n.showPermittedNetworkToast=function(){return{type:C.SHOW_PERMITTED_NETWORK_TOAST_OPEN}},n.showPrivateKey=function(e){return{type:C.SHOW_PRIVATE_KEY,payload:e}},n.showQrScanner=function(){return e=>{e(Q({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:C.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const r=await Se(e,t.fees);try{return(await(0,w.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:r,signedCanceledTransactions:[],txParams:e}])).uuid}catch(e){if((0,k.logErrorWithMessage)(e),(0,k.isErrorWithMessage)(e)){const t=(0,k.getErrorMessage)(e);if(t.startsWith("Fetch error:")){const e=(0,E.parseSmartTransactionsError)(t);n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.stopPollingForQuotes=function(){return async e=>{await(0,w.submitRequestToBackground)("stopPollingForQuotes"),await se(e)}},n.submitPassword=b,n.submitQRHardwareCryptoAccount=async function(e){await(0,w.submitRequestToBackground)("submitQRHardwareCryptoAccount",[e])},n.submitQRHardwareCryptoHDKey=async function(e){await(0,w.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[e])},n.submitQRHardwareSignature=async function(e,t){await(0,w.submitRequestToBackground)("submitQRHardwareSignature",[e,t])},n.syncInternalAccountsWithUserStorage=function(){return async()=>{try{return await(0,w.submitRequestToBackground)("syncInternalAccountsWithUserStorage")}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.throwTestBackgroundError=async function(e){await(0,w.submitRequestToBackground)("throwTestError",[e])},n.toggleAccountMenu=function(){return{type:C.TOGGLE_ACCOUNT_MENU}},n.toggleExternalServices=function(e){return async t=>{r.default.debug("background.toggleExternalServices");try{await(0,w.submitRequestToBackground)("toggleExternalServices",[e]),await se(t)}catch(e){t(ne(e))}}},n.toggleNetworkMenu=function(e){return{type:C.TOGGLE_NETWORK_MENU,payload:e}},n.tokenBalancesStartPolling=async function(e){const t=await(0,w.submitRequestToBackground)("tokenBalancesStartPolling",[{chainId:e}]);return await ge(t),t},n.tokenBalancesStopPollingByPollingToken=async function(e){await(0,w.submitRequestToBackground)("tokenBalancesStopPollingByPollingToken",[e]),await pe(e)},n.tokenDetectionStartPolling=async function(e){const t=await(0,w.submitRequestToBackground)("tokenDetectionStartPolling",[{chainIds:e}]);return await ge(t),t},n.tokenDetectionStopPollingByPollingToken=async function(e){await(0,w.submitRequestToBackground)("tokenDetectionStopPollingByPollingToken",[e]),await pe(e)},n.tokenListStartPolling=async function(e){const t=await(0,w.submitRequestToBackground)("tokenListStartPolling",[{chainId:e}]);return await ge(t),t},n.tokenListStopPollingByPollingToken=async function(e){await(0,w.submitRequestToBackground)("tokenListStopPollingByPollingToken",[e]),await pe(e)},n.tokenRatesStartPolling=async function(e){const t=await(0,w.submitRequestToBackground)("tokenRatesStartPolling",[{chainId:e}]);return await ge(t),t},n.tokenRatesStopPollingByPollingToken=async function(e){await(0,w.submitRequestToBackground)("tokenRatesStopPollingByPollingToken",[e]),await pe(e)},n.trackInsightSnapUsage=function(e){return async()=>{await(0,w.submitRequestToBackground)("trackInsightSnapView",[e])}},n.trackMetaMetricsEvent=Te,n.trackMetaMetricsPage=function(e,t){return(0,w.submitRequestToBackground)("trackMetaMetricsPage",[{...e,actionId:(0,w.generateActionId)()},t])},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{(0,w.callBackgroundMethod)("tryReverseResolveAddress",[e],(e=>{e&&(0,k.logErrorWithMessage)(e),t()}))}))},n.tryUnlockMetamask=function(e){return t=>(t(Z()),t(G()),r.default.debug("background.submitPassword"),new Promise(((t,n)=>{(0,w.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))})).then((()=>(t(q()),se(t)))).then((()=>{t(ee())})).catch((e=>(t(H((0,k.getErrorMessage)(e))),t(ee()),Promise.reject(e)))))},n.unMarkPasswordForgotten=x,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(Z());try{await b(e);const n=await B(e);return await se(t),n}catch(e){throw t(ne(e)),(0,k.isErrorWithMessage)(e)?new Error((0,k.getErrorMessage)(e)):e}finally{t(ee())}}},n.unlockFailed=H,n.unlockHardwareWalletAccounts=function(e,t,n,a){return r.default.debug("background.unlockHardwareWalletAccount",e,t,n,a),async r=>{r(Z());for(const o of e)try{await(0,w.submitRequestToBackground)("unlockHardwareWalletAccount",[o,t,n,a])}catch(e){throw(0,k.logErrorWithMessage)(e),r(ne(e)),r(ee()),e}return r(ee()),undefined}},n.unlockInProgress=G,n.unlockSucceeded=q,n.updateAccountsList=function(e){return async()=>{await(0,w.submitRequestToBackground)("updateAccountsList",[e])}},n.updateAndApproveTx=function(e,t,n){return(r,a)=>{!t&&r(Z(n));const o=()=>Boolean(a().send.stage!==g.SEND_STAGES.INACTIVE);return new Promise(((t,n)=>{const a=(0,w.generateActionId)();(0,w.callBackgroundMethod)("resolvePendingApproval",[String(e.id),{txMeta:e,actionId:a},{waitForResult:!0}],(a=>{if(r(U(e.id,e.txParams)),o()||r((0,g.resetSendState)()),a)return r(M()),(0,k.logErrorWithMessage)(a),void n(a);t(e)}))})).then((()=>se(r))).then((()=>(o()||r((0,g.resetSendState)()),r(F(e.id)),r(ee()),r(L("")),r(X()),e))).catch((e=>(r(ee()),Promise.reject(e))))}},n.updateCurrentLocale=ie,n.updateCustomNonce=L,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async r=>{await Promise.all([(0,w.submitRequestToBackground)("setSwapsTxGasLimit",[e]),(0,w.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[t]),(0,w.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[n])]),await se(r)}},n.updateDataDeletionTaskStatus=async function(){return await(0,w.submitRequestToBackground)("updateDataDeletionTaskStatus")},n.updateEditableParams=function(e,t){return async n=>{let r;try{r=await(0,w.submitRequestToBackground)("updateEditableParams",[e,t])}catch(e){throw(0,k.logErrorWithMessage)(e),e}return await se(n),r}},n.updateEventFragment=function(e,t){return(0,w.submitRequestToBackground)("updateEventFragment",[e,t])},n.updateHiddenAccountsList=function(e){return async()=>{await(0,w.submitRequestToBackground)("updateHiddenAccountsList",[e])}},n.updateInterfaceState=function(e,t){return async n=>{await(0,w.submitRequestToBackground)("updateInterfaceState",[e,t]),await se(n)}},n.updateMetamaskState=W,n.updateNetwork=function(e,t={}){return async n=>{r.default.debug("background.updateNetwork",e);try{return await(0,w.submitRequestToBackground)("updateNetwork",[e.chainId,e,t])}catch(e){(0,k.logErrorWithMessage)(e),n(ne("Had a problem updading networks!"))}return undefined}},n.updateNetworksList=function(e){return async()=>{await(0,w.submitRequestToBackground)("updateNetworksList",[e])}},n.updateNftDropDownState=function(e){return async t=>{await(0,w.submitRequestToBackground)("updateNftDropDownState",[e]),await se(t)}},n.updateOnChainTriggersByAccount=function(e){return async()=>{try{await(0,w.submitRequestToBackground)("updateOnChainTriggersByAccount",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.updatePreviousGasParams=function(e,t){return async()=>{let n;try{n=await(0,w.submitRequestToBackground)("updatePreviousGasParams",[e,t])}catch(e){throw(0,k.logErrorWithMessage)(e),e}return n}},n.updateProposedNames=function(e){return async()=>await(0,w.submitRequestToBackground)("updateProposedNames",[e])},n.updateSlides=function(e){return async()=>{try{await(0,w.submitRequestToBackground)("updateSlides",[e])}catch(e){throw(0,k.logErrorWithMessage)(e),e}}},n.updateSmartTransaction=function(e,t){return async n=>{try{await(0,w.submitRequestToBackground)("updateSmartTransaction",[{uuid:e,...t}])}catch(e){if((0,k.logErrorWithMessage)(e),(0,k.isErrorWithMessage)(e)){const t=(0,k.getErrorMessage)(e);if(t.startsWith("Fetch error:")){const e=(0,E.parseSmartTransactionsError)(t);n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.updateSnap=function(e,t){return async(n,r)=>{await(0,w.submitRequestToBackground)("updateSnap",[e,t]),await se(n);const a=r(),o=(0,d.getFirstSnapInstallOrUpdateRequest)(a);return null==o?void 0:o.metadata.id}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await(0,w.submitRequestToBackground)("setSwapsUserFeeLevel",[e]),await se(t)}},n.updateThrottledOriginState=function(e,t){return async()=>{await(0,w.submitRequestToBackground)("updateThrottledOriginState",[e,t])}},n.updateTokenType=async function(e){try{return await(0,w.submitRequestToBackground)("updateTokenType",[e])}catch(e){(0,k.logErrorWithMessage)(e)}return undefined},n.updateTransaction=function(e,t){return async n=>{!t&&n(Z());try{await(0,w.submitRequestToBackground)("updateTransaction",[e])}catch(t){throw n(U(e.id,e.txParams)),n(ee()),n(M()),(0,k.logErrorWithMessage)(t),t}try{return n(U(e.id,e.txParams)),await se(n),n(V({id:e.id})),e}finally{n(ee())}}},n.updateTransactionGasFees=function(e,t){return async()=>{let n;try{n=await(0,w.submitRequestToBackground)("updateTransactionGasFees",[e,t])}catch(e){throw(0,k.logErrorWithMessage)(e),e}return n}},n.updateTransactionParams=U,n.updateTransactionSendFlowHistory=function(e,t,n){return async()=>{let r;try{r=await(0,w.submitRequestToBackground)("updateTransactionSendFlowHistory",[e,t,n])}catch(e){throw(0,k.logErrorWithMessage)(e),e}return r}},n.updateViewedNotifications=function(e){return(0,w.submitRequestToBackground)("updateViewedNotifications",[e])},n.verifyPassword=D;var r=R(e("loglevel")),a=e("@sentry/browser"),o=e("lodash"),s=e("@metamask/rpc-errors"),i=e("@metamask/profile-sync-controller/sdk"),c=R(e("../../shared/lib/switch-direction")),u=e("../../shared/constants/app"),l=e("../../app/scripts/lib/util"),d=e("../selectors"),m=e("../../shared/modules/selectors/networks"),g=e("../ducks/send"),p=e("../ducks/alerts/unconnected-account"),f=e("../ducks/metamask/metamask"),T=e("../../shared/modules/hexstring-utils"),h=e("../../shared/constants/hardware-wallets"),S=e("../../shared/constants/metametrics"),E=e("../pages/swaps/swaps.util"),A=e("../../shared/modules/string-utils"),_=e("../../shared/modules/selectors"),y=e("../../shared/modules/i18n"),I=e("../../shared/modules/conversion.utils"),k=e("../../shared/modules/error"),N=e("../../shared/lib/four-byte"),v=e("../helpers/constants/notifications"),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(e("./actionConstants")),w=e("./background-connection");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function R(e){return e&&e.__esModule?e:{default:e}}function M(){return{type:C.GO_HOME}}function b(e){return new Promise(((t,n)=>{(0,w.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))}))}function P(e){return new Promise(((t,n)=>{(0,w.callBackgroundMethod)("createNewVaultAndKeychain",[e],(e=>{e?n(e):t(!0)}))}))}function D(e){return new Promise(((t,n)=>{(0,w.callBackgroundMethod)("verifyPassword",[e],(e=>{e?n(e):t(!0)}))}))}async function B(e){const n=await(0,w.submitRequestToBackground)("getSeedPhrase",[e]);return t.from(n).toString("utf8")}function L(e){return{type:C.UPDATE_CUSTOM_NONCE,value:e}}function F(e){return t=>{t({type:C.COMPLETED_TX,value:{id:e}})}}function U(e,t){return{type:C.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function x(){return e=>new Promise((e=>{(0,w.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{e()}))})).then((()=>se(e)))}function G(){return{type:C.UNLOCK_IN_PROGRESS}}function H(e){return{type:C.UNLOCK_FAILED,value:e}}function q(e){return{type:C.UNLOCK_SUCCEEDED,value:e}}function W(e){return(t,n)=>{var r,a;const s=n(),i=(0,m.getProviderConfig)(s),{metamask:c}=s;if(null==e||!e.length)return c;const u=function(e,t){const n={...e};for(const e of t){const{op:t,path:r,value:a}=e;if("replace"!==t)throw new Error(`Unsupported patch operation: ${t}`);n[r[0]]=a}return n}(c,e),{currentLocale:l}=c,p=(0,d.getSelectedInternalAccount)(s),f=null==p?void 0:p.address,{currentLocale:T}=u,h=(0,m.getProviderConfig)({metamask:u}),S=(0,d.getSelectedInternalAccount)({metamask:u}),E=null==S?void 0:S.address;l&&T&&l!==T&&t(ie(T)),f!==E&&t({type:C.SELECTED_ADDRESS_CHANGED});const A=(null===(r=u.addressBook)||void 0===r?void 0:r[null==h?void 0:h.chainId])??{},_=(null===(a=c.addressBook)||void 0===a?void 0:a[null==i?void 0:i.chainId])??{},y=(0,d.getMetaMaskAccounts)({metamask:u}),I=(0,d.getMetaMaskAccounts)({metamask:c}),k=y[E],N=y[f];return Object.entries(I).forEach((([e,n])=>{(0,o.isEqual)(n,y[e])||t({type:C.ACCOUNT_CHANGED,payload:{account:y[e]}})})),!1===(0,o.isEqual)(N,k)&&t({type:C.SELECTED_ACCOUNT_CHANGED,payload:{account:k}}),!1===(0,o.isEqual)(_,A)&&t({type:C.ADDRESS_BOOK_UPDATED,payload:{addressBook:A}}),!1===(0,o.isEqual)(c.gasFeeEstimates,u.gasFeeEstimates)&&t({type:C.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:u.gasFeeEstimates,gasEstimateType:u.gasEstimateType}}),t({type:C.UPDATE_METAMASK_STATE,value:u}),i.chainId!==h.chainId&&(t({type:C.CHAIN_CHANGED,payload:h.chainId}),t((0,g.initializeSendState)({chainHasChanged:!0}))),u}}const j=()=>new Promise(((e,t)=>{(0,w.callBackgroundMethod)("setLocked",[],(n=>{n?t(n):e()}))}));async function K(e){r.default.debug("background.setSelectedInternalAccount"),await(0,w.submitRequestToBackground)("setSelectedInternalAccount",[e])}function $(){return{type:C.SHOW_ACCOUNTS_PAGE}}function V({id:e}={}){return{type:C.SHOW_CONF_TX_PAGE,id:e}}function Y(e){return async t=>{await(0,w.submitRequestToBackground)("setSwitchedNetworkDetails",[e]),await se(t)}}function z(e){return async()=>{r.default.debug(`background.setActiveNetworkConfigurationId: ${e}`);try{await(0,w.submitRequestToBackground)("setActiveNetworkConfigurationId",[e])}catch(e){(0,k.logErrorWithMessage)(e)}}}function Q(e){return{type:C.MODAL_OPEN,payload:e}}function X(){return(e,t)=>{const n=t(),r=(0,d.getApprovalFlows)(n);(0,l.getEnvironmentType)()!==u.ENVIRONMENT_TYPE_NOTIFICATION||(0,d.hasTransactionPendingApprovals)(n)||(0,d.getIsSigningQRHardwareTransaction)(n)||0!==r.length||fe()}}function Z(e){return{type:C.SHOW_LOADING,payload:e}}function J(){return{type:C.SHOW_NFT_STILL_FETCHING_INDICATION}}function ee(){return{type:C.HIDE_LOADING}}function te(){return{type:C.HIDE_NFT_STILL_FETCHING_INDICATION}}function ne(e){var t;return(0,k.isErrorWithMessage)(e)?{type:C.DISPLAY_WARNING,payload:(null==e||null===(t=e.cause)||void 0===t?void 0:t.message)||e.message}:"string"==typeof e?{type:C.DISPLAY_WARNING,payload:e}:{type:C.DISPLAY_WARNING,payload:`${e}`}}function re(e,t,n=!0){return r=>(n&&r(Z()),new Promise(((a,o)=>{(0,w.callBackgroundMethod)("setPreference",[e,t],((e,t)=>{if(n&&r(ee()),e)return r(ne(e)),void o(e);a(t)}))})))}function ae(){return{type:C.COMPLETE_ONBOARDING}}function oe(){return{type:C.RESET_ONBOARDING}}async function se(e){let t;try{t=await(0,w.submitRequestToBackground)("getStatePatches")}catch(t){throw e(ne(t)),t}return e(W(t))}function ie(e){return async t=>{t(Z());try{await(0,y.loadRelativeTimeFormatLocaleData)(e);const n=await(0,y.fetchLocale)(e),r=await(0,w.submitRequestToBackground)("setCurrentLocale",[e]);(0,c.default)(r),t(ce(e,n))}catch(e){return void t(ne(e))}finally{t(ee())}}}function ce(e,t){return{type:C.SET_CURRENT_LOCALE,payload:{locale:e,messages:t}}}function ue(e){return t=>(r.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,r)=>{(0,w.callBackgroundMethod)("setSeedPhraseBackedUp",[e],(e=>{if(e)return t(ne(e)),void r(e);se(t).then(n).catch(r)}))})))}function le(e){return{type:C.SET_NEXT_NONCE,payload:e}}function de(e){return{type:C.SET_REQUEST_ACCOUNT_TABS,payload:e}}function me(e){return{type:C.SET_OPEN_METAMASK_TAB_IDS,payload:e}}async function ge(e){return(0,w.submitRequestToBackground)("addPollingTokenToAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,l.getEnvironmentType)()]])}async function pe(e){return(0,w.submitRequestToBackground)("removePollingTokenFromAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,l.getEnvironmentType)()]])}async function fe(){await(0,w.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}function Te(e,t){return(0,w.submitRequestToBackground)("trackMetaMetricsEvent",[{...e,actionId:(0,w.generateActionId)()},t])}async function he(e){await(0,w.submitRequestToBackground)("setUnconnectedAccountAlertShown",[e])}const Se=async(e,t,n)=>{const r=t.map((t=>{const r={...e,maxFeePerGas:(0,I.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,I.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,I.decimalToHex)(21e3):e.gas,value:e.value};return n&&(r.to=r.from,r.data="0x"),r}));return await(0,w.submitRequestToBackground)("approveTransactionsWithSameNonce",[r])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/store/actions.ts"}],[7503,{pify:5002},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.generateActionId=n.callBackgroundMethod=void 0,n.setBackgroundConnection=async function(e){o=e,s=(0,a.default)(o)},n.submitRequestToBackground=function(e,t){var n;return null===(n=s)||void 0===n?void 0:n[e](...t??[])};var r,a=(r=e("pify"))&&r.__esModule?r:{default:r};let o=null,s=null;n.generateActionId=()=>Date.now()+Math.random();n.callBackgroundMethod=(e,t,n)=>{var r;null===(r=o)||void 0===r||r[e](...t,n)}}}},{package:"$root$",file:"ui/store/background-connection.ts"}]],[],{});