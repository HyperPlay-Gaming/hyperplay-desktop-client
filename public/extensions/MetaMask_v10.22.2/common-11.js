LavaPack.loadBundle([[6797,{"../../../shared/constants/common":5114,"../../../shared/constants/network":5128,"../../../shared/constants/swaps":5138,"../../../shared/lib/fetch-with-cache":5146,"../../../shared/lib/swaps-utils":5151,"../../../shared/lib/transactions-controller-utils":5155,"../../../shared/modules/conversion.utils":5162,"../../../shared/modules/hexstring-utils":5168,"../../../shared/modules/swaps.utils":5183,"../../helpers/utils/confirm-tx.util":6132,"../../store/actions":6828,"bignumber.js":3549},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=n.TOKEN_VALIDATORS=n.StxErrorTypes=void 0,n.fetchAggregatorMetadata=async function(e){const t=(0,g.getBaseApi)("aggregatorMetadata",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:E},functionName:"fetchAggregatorMetadata"}),a={};for(const e in n)(0,g.validateData)(_,n[e],t)&&(a[e]=n[e]);return a},n.fetchBlockedTokens=async function(e){const t=(0,g.getBaseApi)("blockedTokens",e);return await(0,u.default)({url:`${t}`,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:E},functionName:"fetchBlockedTokens"})},n.fetchSwapsFeatureFlags=async function(){const e=s.SWAPS_API_V2_BASE_URL;return await(0,u.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},n.fetchSwapsGasPrices=async function(e){const t=(0,g.getBaseApi)("gasPrices",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,g.validateData)(k,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:a,ProposeGasPrice:r,FastGasPrice:s}=n;return{safeLow:a,average:r,fast:s}},n.fetchToken=async function(e,t){const n=(0,g.getBaseApi)("token",t);return await(0,u.default)({url:`${n}?address=${e}`,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:E},functionName:"fetchToken"})},n.fetchTokenPrice=async function(e){var t;const n=`spot-prices?tokenAddresses=${e}&vsCurrency=eth&includeMarketData=false`,a=await(0,u.default)({url:`https://price.api.cx.metamask.io/v2/chains/1/${n}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==a||null===(t=a[e])||void 0===t?void 0:t.eth},n.fetchTokens=async function(e){const t=(0,g.getBaseApi)("tokens",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:E},functionName:"fetchTokens"});return[s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...n.filter((n=>(0,g.validateData)(h,n,t,false)&&!((0,o.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,o.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=await I(e);return t.reduce(((e,t,n)=>({...e,[t.address]:{index:String(n)}})),{})},n.fetchTopAssetsList=I,n.formatSwapsValueForDisplay=O,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=n.getClassNameForCharLength=void 0,n.getRenderableNetworkFeesForQuote=w,n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=n.getSwapsLivenessForNetwork=n.getSwap1559GasFeeEstimates=void 0,n.quotesToRenderableData=function({quotes:e,gasPriceTrade:t,gasPriceApprove:n,conversionRate:a,currentCurrency:s,approveGas:i,tokenConversionRates:c,chainId:u,smartTransactionEstimatedGas:l,nativeCurrencySymbol:g,multiLayerL1ApprovalFeeTotal:T}){return Object.values(e).map((e=>{const{destinationAmount:p=0,sourceAmount:E=0,sourceTokenInfo:f,destinationTokenInfo:S,slippage:h,aggType:A,aggregator:_,gasEstimateWithRefund:N,averageGas:k,fee:I,trade:C,multiLayerL1TradeFeeTotal:v}=e;let R=null;null!==v&&null!==T?R=(0,m.sumHexes)(v||"0x0",T||"0x0"):null!==v&&(R=v);const M=(0,d.calcTokenAmount)(E,f.decimals).toString(10),b=(0,d.calcTokenAmount)(p,S.decimals).toPrecision(8);let P=null,D=null,L=null,B=null;({feeInFiat:P,feeInEth:D,rawNetworkFees:L,rawEthFee:B}=w({tradeGas:N||(0,m.decimalToHex)(k||8e5),approveGas:i,gasPriceTrade:t,gasPriceApprove:n,currentCurrency:s,conversionRate:a,tradeValue:C.value,sourceSymbol:f.symbol,sourceAmount:E,chainId:u,multiLayerL1FeeTotal:R})),l&&({feeInFiat:P,feeInEth:D}=y({chainId:u,currentCurrency:s,conversionRate:a,nativeCurrencySymbol:g,feeInWeiDec:l.feeEstimate}));const F=new r.BigNumber(100-h).div(100),U=new r.BigNumber(b).times(F).toFixed(6),G=c[S.address],W=(0,o.isSwapsDefaultTokenSymbol)(S.symbol,u)?(0,d.calcTokenAmount)(p,S.decimals).minus(B,10):new r.BigNumber(G||0,10).times((0,d.calcTokenAmount)(p,S.decimals),10).minus(B,10);let q,H=h;return"AGG"===A?q="swapAggregator":"RFQ"===A?(q="swapRequestForQuotation",H=0):q="DEX"===A?"swapDecentralizedExchange":"CONTRACT"===A?"swapDirectContract":"swapUnknown",{aggId:_,amountReceiving:`${b} ${S.symbol}`,destinationTokenDecimals:S.decimals,destinationTokenSymbol:S.symbol,destinationTokenValue:O(b),destinationIconUrl:S.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:q,feeInEth:D,detailedNetworkFees:`${D} (${P})`,networkFees:P,quoteSource:A,rawNetworkFees:L,slippage:H,sourceTokenDecimals:f.decimals,sourceTokenSymbol:f.symbol,sourceTokenValue:M,sourceTokenIconUrl:f.iconUrl,ethValueOfTrade:W,minimumAmountReceived:U,metaMaskFee:I}}))},n.showRemainingTimeInMinAndSec=void 0;var a,r=e("bignumber.js"),s=e("../../../shared/constants/swaps"),o=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),c=e("../../helpers/utils/confirm-tx.util"),u=(a=e("../../../shared/lib/fetch-with-cache"))&&a.__esModule?a:{default:a},l=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/transactions-controller-utils"),g=e("../../../shared/lib/swaps-utils"),m=e("../../../shared/modules/conversion.utils"),T=e("../../../shared/constants/common"),p=e("../../store/actions");const E=3e5,f="usd",S={"X-Client-Id":s.SWAPS_CLIENT_ID},h=n.TOKEN_VALIDATORS=[{property:"address",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,g.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],A=h.slice(0,2),_=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:g.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],N=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),k=[{property:"SafeGasPrice",type:"string",validator:N},{property:"ProposeGasPrice",type:"string",validator:N},{property:"FastGasPrice",type:"string",validator:N}];async function I(e){const t=(0,g.getBaseApi)("topAssets",e);return(await(0,u.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:S},cacheOptions:{cacheRefreshTime:E}})||[]).filter((e=>(0,g.validateData)(A,e,t)))}const y=({chainId:e,currentCurrency:t,conversionRate:n,USDConversionRate:a,nativeCurrencySymbol:r,feeInWeiDec:o})=>{var i;const u=(0,m.decimalToHex)(o),l=(0,m.getValueFromWeiHex)({value:u,toDenomination:T.EtherDenomination.ETH,numberOfDecimals:5}),d=(0,m.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:n,numberOfDecimals:2});let g;g=t===f?d:(0,m.getValueFromWeiHex)({value:u,toCurrency:f,conversionRate:a,numberOfDecimals:2});return{feeInUsd:g,feeInFiat:(0,c.formatCurrency)(d,t),feeInEth:`${l} ${r||(null===(i=s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:l}};function w({tradeGas:e,approveGas:t,gasPriceTrade:n,gasPriceApprove:a,currentCurrency:i,conversionRate:u,USDConversionRate:l,tradeValue:g,sourceSymbol:p,sourceAmount:E,chainId:S,nativeCurrencySymbol:h,multiLayerL1FeeTotal:A}){const _=(0,d.calcGasTotal)(e,n),N=t?(0,d.calcGasTotal)(t,a):"0x0",k=(0,m.sumHexes)(_,N,A||"0x0"),I=new r.BigNumber(g,16).minus((0,o.isSwapsDefaultTokenSymbol)(p,S)?E:0,10).toString(16),y=new r.BigNumber(k,16).plus(I,16).toString(16),w=(0,m.getValueFromWeiHex)({value:y,toDenomination:T.EtherDenomination.ETH,numberOfDecimals:5}),O=(0,m.getValueFromWeiHex)({value:y,toCurrency:i,conversionRate:u,numberOfDecimals:2}),C=(0,c.formatCurrency)(O,i);let v;v=i===f?O:(0,m.getValueFromWeiHex)({value:y,toCurrency:f,conversionRate:l,numberOfDecimals:2});return{rawNetworkFees:O,feeInUsd:v,rawEthFee:w,feeInFiat:C,feeInEth:`${w} ${h||s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[S].symbol}`,nonGasFee:I}}function O(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,d.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new r.BigNumber(t).toFixed()),t}n.getFeeForSmartTransaction=y;n.getClassNameForCharLength=(e,t)=>{let n;return n=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${n}`};n.isContractAddressValid=(e,t)=>!(!e||!s.ALLOWED_CONTRACT_ADDRESSES[t])&&s.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const C=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return s.ETHEREUM;case i.CHAIN_IDS.BSC:return s.BSC;case i.CHAIN_IDS.POLYGON:return s.POLYGON;case i.CHAIN_IDS.GOERLI:return s.GOERLI;case i.CHAIN_IDS.AVALANCHE:return s.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return s.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return s.ARBITRUM;case i.CHAIN_IDS.ZKSYNC_ERA:return s.ZKSYNC_ERA;case i.CHAIN_IDS.LINEA_MAINNET:return s.LINEA;case i.CHAIN_IDS.BASE:return s.BASE;default:return""}};n.getNetworkNameByChainId=C;n.getSwapsLivenessForNetwork=(e,t={})=>{const n=C(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[n])return{swapsFeatureIsLive:!1};return t[n].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[n].fallbackToV1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let v=n.StxErrorTypes=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});n.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case v.unavailable:case v.regularTxPending:return t("smartSwapsErrorUnavailable");case v.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())};async function R(e,t,n){const a=await(0,p.estimateGasFee)({transactionParams:e,chainId:n}),r=null==a?void 0:a.estimates,{maxFeePerGas:s}=(null==r?void 0:r.high)??{},{maxPriorityFeePerGas:o}=(null==r?void 0:r.high)??{};return{baseAndPriorityFeePerGas:o?(0,m.addHexes)(t,o):undefined,maxFeePerGas:s,maxPriorityFeePerGas:o}}n.getSwap1559GasFeeEstimates=async(e,t,n,a)=>{const r=(0,m.decGWEIToHexWEI)(n);return{tradeGasFeeEstimates:await R(e,r,a),approveGasFeeEstimates:t?await R(t,r,a):undefined,estimatedBaseFee:r}}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[6806,{"../../shared/lib/multichain":5149,"./selectors":6820,"@metamask/keyring-api":1591},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSelectedInternalAccount=i,n.hasCreatedBtcMainnetAccount=function(e){return c(e,r.isBtcMainnetAddress)},n.hasCreatedBtcTestnetAccount=function(e){return c(e,r.isBtcTestnetAddress)},n.isSelectedInternalAccountBtc=function(e){return o(i(e))},n.isSelectedInternalAccountEth=function(e){const t=i(e),{Eoa:n,Erc4337:r}=a.EthAccountType;return Boolean(t&&(t.type===n||t.type===r))};var a=e("@metamask/keyring-api"),r=e("../../shared/lib/multichain"),s=e("./selectors");function o(e){const{P2wpkh:t}=a.BtcAccountType;return Boolean(e&&e.type===t)}function i(e){const t=e.metamask.internalAccounts.selectedAccount;return e.metamask.internalAccounts.accounts[t]}function c(e,t){return(0,s.getInternalAccounts)(e).some((e=>o(e)&&t(e.address)))}}}},{package:"$root$",file:"ui/selectors/accounts.ts"}],[6808,{"./util":6826,reselect:4883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getApprovalFlows=function(e){return e.metamask.approvalFlows},n.getApprovalRequestsByType=void 0,n.getPendingApprovals=s,n.hasPendingApprovals=function(e,t,n){const a=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>t.includes(e)));if(n)return a.some(n);return a.length>0},n.pendingApprovalsSortedSelector=function(e){return s(e).sort(((e,t)=>e.time-t.time))},n.selectPendingApproval=void 0;var a=e("reselect"),r=e("./util");function s(e){return Object.values(e.metamask.pendingApprovals??[])}n.getApprovalRequestsByType=(e,t,n)=>{const a=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return n?a.filter(n):a};const o=(0,a.createSelector)(s,((e,t)=>t),((e,t)=>e.find((({id:e})=>e===t))));n.selectPendingApproval=(0,r.createDeepEqualSelector)(o,(e=>e))}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[6809,{"../../shared/constants/gas":5119,"../../shared/lib/transactions-controller-utils":5155,"../../shared/modules/conversion.utils":5162,"../../shared/modules/gas.utils":5167,"../../shared/modules/string-utils":5182,"../ducks/metamask/metamask":6093,"../helpers/utils/confirm-tx.util":6132,"../helpers/utils/tx-helper":6152,"./custom-gas":6810,"./selectors":6820,"./transactions":6825,"@metamask/transaction-controller":2721,reselect:4883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.currentCurrencySelector=n.conversionRateSelector=n.contractExchangeRateSelector=void 0,n.selectIsMaxValueEnabled=b,n.selectMaxValue=void 0,n.selectTransactionAvailableBalance=M,n.selectTransactionFeeById=R,n.use4ByteResolutionSelector=n.unconfirmedTransactionsListSelector=n.unconfirmedTransactionsHashSelector=n.unconfirmedMessagesHashSelector=n.txDataSelector=n.transactionFeeSelector=n.tokenAddressSelector=n.sendTokenTokenAmountAndToAddressSelector=n.selectTransactionValue=void 0;var a,r=e("reselect"),s=e("@metamask/transaction-controller"),o=(a=e("../helpers/utils/tx-helper"))&&a.__esModule?a:{default:a},i=e("../helpers/utils/confirm-tx.util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/constants/gas"),l=e("../../shared/modules/gas.utils"),d=e("../../shared/modules/string-utils"),g=e("../../shared/lib/transactions-controller-utils"),m=e("../../shared/modules/conversion.utils"),T=e("./custom-gas"),p=e("./selectors"),E=e("./transactions");const f=e=>(0,E.getUnapprovedTransactions)(e),S=e=>e.metamask.unapprovedPersonalMsgs,h=e=>e.metamask.unapprovedDecryptMsgs,A=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,_=e=>e.metamask.unapprovedTypedMessages;n.unconfirmedTransactionsListSelector=(0,r.createSelector)(f,S,h,A,_,p.getCurrentChainId,((e={},t={},n={},a={},r={},s)=>(0,o.default)(e,t,n,a,r,s)||[])),n.unconfirmedTransactionsHashSelector=(0,r.createSelector)(f,S,h,A,_,p.getCurrentChainId,((e={},t={},n={},a={},r={},s)=>({...Object.keys(e).reduce(((t,n)=>{const a={...t};return e[n].chainId===s&&(a[n]=e[n]),a}),{}),...t,...n,...a,...r}))),n.unconfirmedMessagesHashSelector=(0,r.createSelector)(S,h,A,_,((e={},t={},n={},a={})=>({...e,...t,...n,...a})));n.use4ByteResolutionSelector=e=>e.metamask.use4ByteResolution;const N=e=>e.metamask.currentCurrency;n.currentCurrencySelector=N;const k=e=>{var t;return null===(t=e.metamask.currencyRates[(0,c.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate};n.conversionRateSelector=k;const I=e=>e.confirmTransaction.txData;n.txDataSelector=I;const y=(0,r.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),w=(0,r.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),O=(0,r.createSelector)(I,(e=>e&&e.txParams||{})),C=n.tokenAddressSelector=(0,r.createSelector)(O,(e=>e&&e.to)),v=(n.sendTokenTokenAmountAndToAddressSelector=(0,r.createSelector)(w,y,((e,t)=>{let n="",a="0";if(e&&e.length){n=e._to;let r=e._value.toString();t&&(r=(0,g.calcTokenAmount)(r,t).toFixed()),a=(0,i.roundExponential)(r)}return{toAddress:n,tokenAmount:a}})),n.contractExchangeRateSelector=(0,r.createSelector)((e=>(0,p.getTokenExchangeRates)(e)),C,((e,t)=>e[Object.keys(e).find((e=>(0,d.isEqualCaseInsensitive)(e,t)))])),function(e,t){var n,a,r,o;const d=N(e),g=k(e),E=(0,c.getNativeCurrency)(e),f=(0,c.getGasFeeEstimates)(e)||{},S=(0,c.getGasEstimateType)(e),h=(0,p.checkNetworkAndAccountSupports1559)(e),A={gasLimit:(null===(n=t.txParams)||void 0===n?void 0:n.gas)??"0x0"};if(h){var _;const{gasPrice:e="0"}=f,n=f[t.userFeeLevel]||{};if((null===(_=t.txParams)||void 0===_?void 0:_.type)===s.TransactionEnvelopeType.legacy){var I;A.gasPrice=(null===(I=t.txParams)||void 0===I?void 0:I.gasPrice)??(0,m.decGWEIToHexWEI)(e)}else{var y,w,O,C;const{suggestedMaxPriorityFeePerGas:a,suggestedMaxFeePerGas:r}=n;A.maxFeePerGas=null===(y=t.txParams)||void 0===y||!y.maxFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&r?(0,m.decGWEIToHexWEI)(r||e):null===(w=t.txParams)||void 0===w?void 0:w.maxFeePerGas,A.maxPriorityFeePerGas=null===(O=t.txParams)||void 0===O||!O.maxPriorityFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&a?a&&(0,m.decGWEIToHexWEI)(a)||A.maxFeePerGas:null===(C=t.txParams)||void 0===C?void 0:C.maxPriorityFeePerGas,A.baseFeePerGas=(0,m.decGWEIToHexWEI)(f.estimatedBaseFee)}}else switch(S){case u.GasEstimateTypes.feeMarket:case u.GasEstimateTypes.none:A.gasPrice=(null===(a=t.txParams)||void 0===a?void 0:a.gasPrice)??"0x0";break;case u.GasEstimateTypes.ethGasPrice:A.gasPrice=(null===(r=t.txParams)||void 0===r?void 0:r.gasPrice)??(0,m.decGWEIToHexWEI)(f.gasPrice);break;case u.GasEstimateTypes.legacy:A.gasPrice=(null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)??(0,T.getAveragePriceEstimateInHexWEI)(e)}const{txParams:{value:v="0x0"}={}}=t,R=(0,m.getValueFromWeiHex)({value:v,fromCurrency:E,toCurrency:d,conversionRate:g,numberOfDecimals:2}),M=(0,m.getValueFromWeiHex)({value:v,fromCurrency:E,toCurrency:E,conversionRate:g,numberOfDecimals:6}),b=(0,l.getMinimumGasTotalInHexWei)(A),P=(0,l.getMaximumGasTotalInHexWei)(A),D=(0,i.getTransactionFee)({value:b,fromCurrency:E,toCurrency:d,numberOfDecimals:2,conversionRate:g}),L=(0,i.getTransactionFee)({value:P,fromCurrency:E,toCurrency:d,numberOfDecimals:2,conversionRate:g}),B=(0,i.getTransactionFee)({value:b,fromCurrency:E,toCurrency:E,numberOfDecimals:6,conversionRate:g});return{hexTransactionAmount:v,fiatTransactionAmount:R,ethTransactionAmount:M,hexMinimumTransactionFee:b,fiatMinimumTransactionFee:D,hexMaximumTransactionFee:P,fiatMaximumTransactionFee:L,ethTransactionFee:B,fiatTransactionTotal:(0,i.addFiat)(D,R),ethTransactionTotal:(0,i.addEth)(B,M),hexTransactionTotal:(0,m.sumHexes)(v,b),gasEstimationObject:A}});function R(e,t){const n=(0,E.selectTransactionMetadata)(e,t);return v(e,n??{})}function M(e,t){var n;return null===(n=(0,p.getMetaMaskAccounts)(e)[(0,E.selectTransactionSender)(e,t)])||void 0===n?void 0:n.balance}function b(e,t){var n;return(null===(n=e.confirmTransaction.maxValueMode)||void 0===n?void 0:n[t])??!1}n.transactionFeeSelector=v;const P=n.selectMaxValue=(0,r.createSelector)(R,M,((e,t)=>t&&e.hexMaximumTransactionFee?(0,m.subtractHexes)(t,e.hexMaximumTransactionFee):undefined));n.selectTransactionValue=(0,r.createSelector)(b,P,E.selectTransactionMetadata,((e,t,n)=>{var a;return e?t:null==n||null===(a=n.txParams)||void 0===a?void 0:a.value}))}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[6810,{"../../app/scripts/lib/util":130,"../../shared/constants/common":5114,"../../shared/constants/gas":5119,"../../shared/lib/transactions-controller-utils":5155,"../../shared/modules/Numeric":5157,"../../shared/modules/conversion.utils":5162,"../ducks/metamask/metamask":6093,"../ducks/send":6098,"../helpers/utils/confirm-tx.util":6132,"../helpers/utils/formatters":6134,"./selectors":6820},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.basicPriceEstimateToETHTotal=S,n.getAverageEstimate=E,n.getAveragePriceEstimateInHexWEI=function(e){return A(E(e))},n.getBasicGasEstimateLoadingStatus=function(e){return!1===_(e)},n.getCustomGasLimit=function(e){return e.gas.customData.limit},n.getCustomGasPrice=T,n.getDefaultActiveButtonIndex=function(e,t,n){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,a.addHexPrefix)(t||n))},n.getFastPriceEstimate=f,n.getFastPriceEstimateInHexWEI=function(e){return A(f(e)||"0x0")},n.getGasPriceInHexWei=A,n.getIsCustomNetworkGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&!(0,m.getIsMainnet)(e)},n.getIsEthGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&(0,m.getIsMainnet)(e)},n.getIsGasEstimatesFetched=_,n.getNoGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.none},n.getRenderableConvertedCurrencyFee=function(e,t,n,a){const o=S(new d.Numeric(e,10).toBase(16).toString(),t),i=(0,r.decEthToConvertedCurrency)(o,n,a);return(0,s.formatCurrency)(i,n)},n.getRenderableEthFee=function(e,t,n=9,a="ETH"){const r=S(new d.Numeric(e,10).toBase(16).toString(),t,n);return(0,o.formatETHFee)(r,a)},n.getSafeLowEstimate=p,n.isCustomPriceExcessive=function(e,t=!1){const n=t?(0,i.getGasPrice)(e):T(e),a=f(e);if(!n||!a)return!1;return new d.Numeric(n,16,g.EtherDenomination.WEI).toDenomination(g.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*a),10)},n.isCustomPriceSafe=function(e){const t=p(e),n=T(e);if(!n)return!0;if(!t)return!1;return new d.Numeric(n,16,g.EtherDenomination.WEI).toDenomination(g.EtherDenomination.GWEI).greaterThan(t,10)},n.isCustomPriceSafeForCustomNetwork=function(e){const t=E(e),n=T(e);if(!n)return!0;if(!t)return!1;return new d.Numeric(n,16,g.EtherDenomination.WEI).toDenomination(g.EtherDenomination.GWEI).greaterThan(t,10)},n.priceEstimateToWei=h;var a=e("../../app/scripts/lib/util"),r=e("../../shared/modules/conversion.utils"),s=e("../helpers/utils/confirm-tx.util"),o=e("../helpers/utils/formatters"),i=e("../ducks/send"),c=e("../../shared/constants/gas"),u=e("../ducks/metamask/metamask"),l=e("../../shared/lib/transactions-controller-utils"),d=e("../../shared/modules/Numeric"),g=e("../../shared/constants/common"),m=e("./selectors");function T(e){return e.gas.customData.price}function p(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function E(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function f(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function S(e,t,n=9){return new d.Numeric((0,l.calcGasTotal)(t,e),16,g.EtherDenomination.GWEI).round(n).toBase(10).toString()}function h(e){return new d.Numeric(e,16,g.EtherDenomination.GWEI).toDenomination(g.EtherDenomination.WEI).round(9).toString()}function A(e){const t=new d.Numeric(e,10).toBase(16).toString();return(0,a.addHexPrefix)(h(t))}function _(e){const t=(0,u.getGasEstimateType)(e);return!(0,u.isEIP1559Network)(e)&&t!==c.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[6811,{"../../shared/constants/onboarding":5131,"../helpers/constants/routes":6111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstTimeFlowType=void 0,n.getFirstTimeFlowTypeRouteAfterMetaMetricsOptIn=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===a.FirstTimeFlowType.create)return r.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===a.FirstTimeFlowType.import)return r.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===a.FirstTimeFlowType.restore)return r.ONBOARDING_SECURE_YOUR_WALLET_ROUTE;return r.DEFAULT_ROUTE},n.getFirstTimeFlowTypeRouteAfterUnlock=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===a.FirstTimeFlowType.create)return r.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===a.FirstTimeFlowType.import)return r.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===a.FirstTimeFlowType.restore)return r.ONBOARDING_METAMETRICS;return r.DEFAULT_ROUTE},n.getOnboardingInitiator=void 0;var a=e("../../shared/constants/onboarding"),r=e("../helpers/constants/routes");n.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;n.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const n=Object.keys(t)[0];return{location:n,tabId:t[n]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[6812,{"../pages/confirmations/selectors/confirm":6571,"./accounts":6806,"./approvals":6808,"./confirm-transaction":6809,"./custom-gas":6810,"./first-time-flow":6811,"./metametrics":6816,"./permissions":6819,"./selectors":6820,"./transactions":6825},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("../pages/confirmations/selectors/confirm");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}));var r=e("./confirm-transaction");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var s=e("./custom-gas");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=e("./first-time-flow");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=e("./metametrics");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=e("./permissions");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=e("./selectors");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=e("./transactions");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=e("./approvals");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===d[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}}))}));var g=e("./accounts");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===g[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return g[e]}}))}))}}},{package:"$root$",file:"ui/selectors/index.js"}],[6816,{reselect:4883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectMatchingFragment=n.selectFragments=n.selectFragmentBySuccessEvent=n.selectFragmentById=n.getParticipateInMetaMetrics=n.getLatestMetricsEventTimestamp=n.getDataCollectionForMarketing=void 0;var a=e("reselect");const r=e=>e.metamask.fragments;n.selectFragments=r;n.getDataCollectionForMarketing=e=>e.metamask.dataCollectionForMarketing;n.getParticipateInMetaMetrics=e=>Boolean(e.metamask.participateInMetaMetrics);n.getLatestMetricsEventTimestamp=e=>e.metamask.latestNonAnonymousEventTimestamp;const s=n.selectFragmentBySuccessEvent=(0,a.createSelector)(r,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined)),o=n.selectFragmentById=(0,a.createSelector)(r,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));n.selectMatchingFragment=(0,a.createSelector)(((e,t)=>s(e,t.fragmentOptions)),((e,t)=>o(e,t.existingId)),((e,t)=>t??e))}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[6817,{"../../shared/constants/multichain/assets":5126,"../../shared/constants/multichain/networks":5127,"../../shared/constants/network":5128,"../../shared/modules/Numeric":5157,"../ducks/metamask/metamask":6093,"./accounts":6806,"./selectors":6820,"@metamask/keyring-api":1591,"@metamask/utils":2850,"prop-types":4610,reselect:4883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkPropType=n.InternalAccountPropType=void 0,n.getMultichainBalances=k,n.getMultichainCoinRates=void 0,n.getMultichainConversionRate=function(e,t){var n;const{ticker:a}=S(e,t);return f(e,t)?(0,l.getConversionRate)(e):null===(n=I(e))||void 0===n||null===(n=n[a.toLowerCase()])||void 0===n?void 0:n.conversionRate},n.getMultichainCurrencyImage=h,n.getMultichainCurrentChainId=function(e){const{chainId:t}=S(e);return t},n.getMultichainCurrentCurrency=function(e,t){const n=(0,T.getCurrentCurrency)(e);if(f(e,t))return n;return n&&"usd"===n.toLowerCase()?"usd":S(e,t).ticker},n.getMultichainCurrentNetwork=function(e,t){return S(e,t)},n.getMultichainDefaultToken=A,n.getMultichainIsBitcoin=function(e,t){const n=f(e,t),{symbol:a}=A(e,t);return!n&&"BTC"===a},n.getMultichainIsEvm=f,n.getMultichainIsMainnet=_,n.getMultichainIsTestnet=N,n.getMultichainNativeCurrency=function(e,t){return f(e,t)?(0,l.getNativeCurrency)(e):S(e,t).ticker},n.getMultichainNativeCurrencyImage=function(e,t){return h(e,t)},n.getMultichainNetwork=E,n.getMultichainNetworkProviders=p,n.getMultichainProviderConfig=S,n.getMultichainSelectedAccountCachedBalance=y,n.getMultichainSelectedAccountCachedBalanceIsZero=void 0,n.getMultichainShouldShowFiat=function(e,t){const n=t??(0,m.getSelectedInternalAccount)(e),a=N(e,n),r=!a;return f(e,n)?(0,T.getShouldShowFiat)(e):r||a&&(0,T.getShowFiatInTestnets)(e)};var a,r=(a=e("prop-types"))&&a.__esModule?a:{default:a},s=e("@metamask/keyring-api"),o=e("@metamask/utils"),i=e("reselect"),c=e("../../shared/modules/Numeric"),u=e("../../shared/constants/multichain/networks"),l=e("../ducks/metamask/metamask"),d=e("../../shared/constants/multichain/assets"),g=e("../../shared/constants/network"),m=e("./accounts"),T=e("./selectors");n.MultichainNetworkPropType=r.default.shape({nickname:r.default.string.isRequired,isEvmNetwork:r.default.bool.isRequired,chainId:r.default.string,network:r.default.oneOfType([r.default.shape({rpcUrl:r.default.string,type:r.default.string.isRequired,chainId:r.default.string.isRequired,ticker:r.default.string.isRequired,rpcPrefs:r.default.shape({blockExplorerUrl:r.default.string,imageUrl:r.default.string}),nickname:r.default.string,id:r.default.string}),r.default.shape({chainId:r.default.string.isRequired,ticker:r.default.string.isRequired,rpcPrefs:r.default.shape({blockExplorerUrl:r.default.string,imageUrl:r.default.string})})]).isRequired}),n.InternalAccountPropType=r.default.shape({id:r.default.string.isRequired,address:r.default.string.isRequired,metadata:r.default.shape({name:r.default.string.isRequired,snap:r.default.shape({id:r.default.string.isRequired,name:r.default.string,enabled:r.default.bool}),keyring:r.default.shape({type:r.default.string.isRequired}).isRequired}).isRequired,type:r.default.string.isRequired});function p(e){return Object.values(u.MULTICHAIN_PROVIDER_CONFIGS)}function E(e,t){if(f(e,t)){var n;const t=(0,T.getCurrentChainId)(e),a=(0,l.getProviderConfig)(e),r=t;a.rpcPrefs={...a.rpcPrefs,imageUrl:g.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[r]};return{nickname:(null===(n=(0,T.getNetworkConfigurationsByChainId)(e)[t])||void 0===n?void 0:n.name)??a.rpcUrl,isEvmNetwork:!0,chainId:`${o.KnownCaipNamespace.Eip155}:${Number(t)}`,network:a}}const a=t??(0,m.getSelectedInternalAccount)(e),r=p().find((e=>e.isAddressCompatible(a.address)));if(!r)throw new Error("Could not find non-EVM provider for the current configuration. This should never happen.");return{nickname:r.nickname,isEvmNetwork:!1,chainId:null==r?void 0:r.chainId,network:r}}function f(e,t){const n=(0,l.getCompletedOnboarding)(e),a=t??(0,T.getMaybeSelectedInternalAccount)(e);return!n||!a||(0,s.isEvmAccountType)(a.type)}function S(e,t){return E(e,t).network}function h(e,t){var n;if(f(e,t))return(0,T.getNativeCurrencyImage)(e);return null===(n=S(e,t).rpcPrefs)||void 0===n?void 0:n.imageUrl}function A(e,t){var n;return{symbol:f(e,t)?(null===(n=(0,l.getProviderConfig)(e))||void 0===n?void 0:n.ticker)??"ETH":S(e,t).ticker}}function _(e,t){const n=S(e,t??(0,m.getSelectedInternalAccount)(e));return f(e,t)?(0,T.getIsMainnet)(e):n.chainId===u.MultichainNetworks.BITCOIN}function N(e,t){const n=S(e,t??(0,m.getSelectedInternalAccount)(e));return f(e,t)?g.TEST_NETWORK_IDS.includes(n.chainId):n.chainId===u.MultichainNetworks.BITCOIN_TESTNET}function k(e){return e.metamask.balances}const I=e=>e.metamask.rates;function y(e){return f(e)?(0,T.getSelectedAccountCachedBalance)(e):function(e){var t;const n=k(e),a=(0,m.getSelectedInternalAccount)(e),r=_(e)?d.MultichainNativeAssets.BITCOIN:d.MultichainNativeAssets.BITCOIN_TESTNET;return null==n||null===(t=n[a.id])||void 0===t||null===(t=t[r])||void 0===t?void 0:t.amount}(e)}n.getMultichainCoinRates=I;n.getMultichainSelectedAccountCachedBalanceIsZero=(0,i.createSelector)([f,y],((e,t)=>{const n=e?16:10;return new c.Numeric(t,n).isZero()}))}}},{package:"$root$",file:"ui/selectors/multichain.ts"}],[6819,{"../../app/scripts/controllers/permissions":26,"../../shared/constants/permissions":5132,"./accounts":6806,"./approvals":6808,"./selectors":6820,"./util":6826,"@metamask/controller-utils":1216,"@metamask/keyring-api":1591,"@metamask/snaps-rpc-methods":2437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.activeTabHasPermissions=function(e){var t;const{activeTab:n,metamask:a}=e,{subjects:r={}}=a;return Boolean(Object.keys((null===(t=r[n.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},n.getAccountToConnectToActiveTab=function(e){const t=(0,d.getSelectedInternalAccount)(e),n=p(e),{metamask:{internalAccounts:{accounts:a}}}=e,r=Object.keys(a).length;if(n.length&&n.length!==r&&-1===n.findIndex((e=>e===t.address)))return(0,l.getInternalAccount)(e,t.id);return undefined},n.getAddressConnectedSubjectMap=function(e){const t=S(e),n=f(e),a={};return Object.keys(n).forEach((e=>{const{iconUrl:r,name:s}=t[e]||{};n[e].forEach((t=>{const n=s||e;a[t]=a[t]?{...a[t],[e]:{iconUrl:r,name:n}}:{[e]:{iconUrl:r,name:n}}}))})),a},n.getConnectedSubjectsForAllAddresses=void 0,n.getConnectedSubjectsForSelectedAddress=function(e){const t=(0,d.getSelectedInternalAccount)(e),n=g(e),a=S(e),r=[];return Object.entries(n).forEach((([e,n])=>{if(!h(n).includes(t.address))return;const{extensionId:s,name:o,iconUrl:i}=a[e]||{};r.push({extensionId:s,origin:e,name:o,iconUrl:i})})),r},n.getFirstPermissionRequest=function(e){const t=w(e);return t&&t[0]?t[0]:null},n.getFirstSnapInstallOrUpdateRequest=function(e){var t;return(null===(t=y(e))||void 0===t?void 0:t[0])??null},n.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,n)=>(t[n].eth_accounts&&(e[n]=JSON.parse(JSON.stringify(t[n].eth_accounts))),e)),{})},n.getOrderedConnectedAccountsForActiveTab=function(e){var t;const{activeTab:n,metamask:{permissionHistory:a}}=e,r=null===(t=a[n.origin])||void 0===t||null===(t=t.eth_accounts)||void 0===t?void 0:t.accounts,o=(0,l.getMetaMaskAccountsOrdered)(e),i=p(e);return o.filter((e=>i.includes(e.address))).filter((e=>(0,s.isEvmAccountType)(e.type))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==r?void 0:r[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getOrderedConnectedAccountsForConnectedDapp=function(e,t){var n;const{metamask:{permissionHistory:a}}=e,r=null===(n=a[t.origin])||void 0===n||null===(n=n.eth_accounts)||void 0===n?void 0:n.accounts,o=(0,l.getMetaMaskAccountsOrdered)(e),i=E(e,t);return o.filter((e=>i.includes(e.address))).filter((e=>(0,s.isEvmAccountType)(e.type))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==r?void 0:r[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getPermissionSubjects=g,n.getPermissionSubjectsDeepEqual=void 0,n.getPermissions=function(e,t){var n;return null===(n=g(e)[t])||void 0===n?void 0:n.permissions},n.getPermissionsForActiveTab=function(e){var t;const{activeTab:n,metamask:a}=e,{subjects:r={}}=a,s=(null===(t=r[n.origin])||void 0===t?void 0:t.permissions)??{};return Object.keys(s).map((e=>({key:e,value:s[e]})))},n.getPermissionsRequests=w,n.getPermittedAccounts=m,n.getPermittedAccountsByOrigin=f,n.getPermittedAccountsForCurrentTab=p,n.getPermittedAccountsForSelectedTab=E,n.getPermittedChains=T,n.getPermittedChainsByOrigin=function(e){const t=g(e);return Object.keys(t).reduce(((e,n)=>{const a=k(_(t[n]));return a.length>0&&(e[n]=a),e}),{})},n.getPermittedChainsForCurrentTab=function(e){return m(e,(0,l.getOriginOfCurrentTab)(e))},n.getPermittedChainsForSelectedTab=function(e,t){return T(e,t)},n.getRequestState=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.requestState},n.getRequestType=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.type},n.getSnapInstallOrUpdateRequests=y,n.getSubjectMetadata=S,n.getSubjectMetadataDeepEqual=void 0,n.getSubjectsWithPermission=function(e,t){const n=g(e),a=[];return Object.entries(n).forEach((([n,{permissions:r}])=>{if(r[t]){const{extensionId:t,name:r,iconUrl:s}=(0,l.getTargetSubjectMetadata)(e,n)||{};a.push({extensionId:t,origin:n,name:r,iconUrl:s})}})),a},n.getSubjectsWithSnapPermission=function(e,t){const n=g(e);return Object.entries(n).filter((([e,{permissions:n}])=>{var a;return null===(a=n[r.WALLET_SNAP_PERMISSION_KEY])||void 0===a?void 0:a.caveats[0].value[t]})).map((([t,n])=>{const{extensionId:a,name:r,iconUrl:s}=(0,l.getTargetSubjectMetadata)(e,t)||{};return{extensionId:a,origin:t,name:r,iconUrl:s}}))},n.isAccountConnectedToCurrentTab=void 0;var a=e("@metamask/controller-utils"),r=e("@metamask/snaps-rpc-methods"),s=e("@metamask/keyring-api"),o=e("../../shared/constants/permissions"),i=e("../../app/scripts/controllers/permissions"),c=e("./approvals"),u=e("./util"),l=e("./selectors"),d=e("./accounts");n.getPermissionSubjectsDeepEqual=(0,u.createDeepEqualSelector)((e=>e.metamask.subjects||{}),(e=>e)),n.getSubjectMetadataDeepEqual=(0,u.createDeepEqualSelector)((e=>e.metamask.subjectMetadata),(e=>e));function g(e){return e.metamask.subjects||{}}function m(e,t){return N(A(I(e,t)))}function T(e,t){return k(_(I(e,t)))}function p(e){return m(e,(0,l.getOriginOfCurrentTab)(e))}function E(e,t){return m(e,t)}function f(e){const t=g(e);return Object.keys(t).reduce(((e,n)=>{const a=h(t[n]);return a.length>0&&(e[n]=a),e}),{})}function S(e){return e.metamask.subjectMetadata}n.getConnectedSubjectsForAllAddresses=(0,u.createDeepEqualSelector)(g,S,((e,t)=>{const n={};return Object.entries(e).forEach((([e,a])=>{h(a).forEach((a=>{n[a]||(n[a]=[]);const r=t[e];n[a].push({origin:e,...r})}))})),n}));n.isAccountConnectedToCurrentTab=(0,u.createDeepEqualSelector)(p,((e,t)=>t),((e,t)=>e.some((e=>e===t))));function h(e){return N(A(e))}function A(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function _(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t[i.PermissionNames.permittedChains])||{}}function N(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===o.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function k(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===o.CaveatTypes.restrictNetworkSwitching))}(e);return t&&Array.isArray(t.value)?t.value:[]}function I(e,t){var n;return t&&(null===(n=e.metamask.subjects)||void 0===n?void 0:n[t])}function y(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e||"wallet_installSnapResult"===e)).map((({requestData:e})=>e))}function w(e){var t;return null===(t=(0,c.getApprovalRequestsByType)(e,a.ApprovalType.WalletRequestPermissions))||void 0===t?void 0:t.map((({requestData:e})=>e))}}}},{package:"$root$",file:"ui/selectors/permissions.js"}],[6820,{"../../app/scripts/controllers/bridge/types":16,"../../app/scripts/lib/util":130,"../../shared/constants/app":5112,"../../shared/constants/bridge":5113,"../../shared/constants/hardware-wallets":5120,"../../shared/constants/keyring":5121,"../../shared/constants/labels":5122,"../../shared/constants/multichain/assets":5126,"../../shared/constants/network":5128,"../../shared/constants/swaps":5138,"../../shared/constants/terms":5139,"../../shared/constants/time":5140,"../../shared/constants/tokens":5141,"../../shared/modules/conversion.utils":5162,"../../shared/modules/hexstring-utils":5168,"../../shared/modules/selectors":5179,"../../shared/modules/string-utils":5182,"../../shared/modules/transaction.utils":5184,"../../shared/notifications":5186,"../ducks/app/app":6081,"../ducks/metamask/metamask":6093,"../helpers/constants/design-system":6105,"../helpers/utils/util":6153,"../pages/confirmations/confirmation/templates":6507,"./accounts":6806,"./multichain":6817,"./permissions":6819,"./transactions":6825,"./util":6826,"@metamask/controller-utils":1216,"@metamask/keyring-api":1591,"@metamask/name-controller":1657,"@metamask/network-controller":1692,"@metamask/permission-controller":1850,"@metamask/snaps-utils":2640,"@metamask/transaction-controller":2721,lodash:4463,reselect:4883,semver:4923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountSupportsSmartTx=function(e){const t=Y(e);return Boolean("snap"!==t)},n.accountsWithSendEtherInfoSelector=de,n.checkIfMethodIsEnabled=function(e,t){const n=(0,W.getSelectedInternalAccount)(e);return Boolean(n.methods.includes(t))},n.checkNetworkAndAccountSupports1559=function(e,t){return(0,O.isEIP1559Network)(e,t)},n.checkNetworkOrAccountNotSupports1559=function(e){return(0,O.isNotEIP1559Network)(e)},n.doesAddressRequireLedgerHidConnection=function(e,t){const n=(0,O.isAddressLedger)(e,t),a=(0,O.getLedgerTransportType)(e)===E.LedgerTransportTypes.webhid,r=(0,C.getLedgerWebHidConnectedStatus)(e)!==E.WebHIDConnectedStatuses.connected,s=(0,C.getLedgerTransportStatus)(e)!==E.HardwareTransportStates.verified;return n&&a&&(r||s)},n.getAccountName=function(e,t){const n=e.find((e=>(0,v.isEqualCaseInsensitive)(e.address,t)));return n&&""!==n.metadata.name?n.metadata.name:""},n.getAccountType=Y,n.getAccountTypeForKeyring=$,n.getAccountsWithLabels=function(e){return re(e).map((e=>{const{address:t,metadata:{name:n},balance:a}=e;return{...e,addressLabel:`${n.length<h.TRUNCATED_NAME_CHAR_LIMIT?n:`${n.slice(0,h.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,N.shortenAddress)(t)})`,label:n,balance:a}}))},n.getAddressBook=ue,n.getAddressBookEntry=le,n.getAddressBookEntryOrAccountName=function(e,t){const n=le(e,t);if(n&&""!==n.name)return n.name;const a=Object.values(X(e)).find((e=>(0,v.isEqualCaseInsensitive)(e.address,t)));return(null==a?void 0:a.metadata.name)||t},n.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[K(e)]},n.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},n.getAllAccountsOnNetworkAreEmpty=function(e){const t=ae(e)??{},n=Object.values(t).every((e=>"0x0"===e||"0x00"===e)),a=0===ee(e);return n&&a},n.getAllConnectedAccounts=void 0,n.getAllDomains=ie,n.getAllSnapAvailableUpdates=n.getAllEnabledNetworks=void 0,n.getAllTokens=oe,n.getAnySnapUpdateAvailable=void 0,n.getAppIsLoading=function(e){return e.appState.isLoading},n.getBlockExplorerLinkText=function(e,t=!1){const n=ct(e),a=De(e);let r={firstPart:"addBlockExplorer",secondPart:""};a.blockExplorerUrl?r=t?{firstPart:"blockExplorerView",secondPart:(0,N.getURLHostName)(a.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===n&&(r=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return r},n.getConnectedSnapsList=n.getConnectedSitesListWithNetworkInfo=n.getConnectedSitesList=n.getConfirmationExchangeRates=void 0,n.getCurrentAccountWithSendEtherInfo=ge,n.getCurrentChainId=K,n.getCurrentCurrency=function(e){return e.metamask.currentCurrency},n.getCurrentEthBalance=me,n.getCurrentKeyring=j,n.getCurrentNetwork=void 0,n.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},n.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},n.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},n.getDetectedTokensInCurrentNetwork=function(e){var t;const n=K(e),{address:a}=(0,W.getSelectedInternalAccount)(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(t=t[n])||void 0===t?void 0:t[a]},n.getEditedNetwork=function(e){return e.appState.editedNetwork},n.getEnabledSnaps=void 0,n.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t])return e.metamask.ensResolutionsByAddress[t];const n=le(e,t)||Q(e,t);return(null==n?void 0:n.name)||""},n.getEthereumAddressNames=function(e){var t;return(null===(t=e.metamask.names)||void 0===t?void 0:t[l.NameType.ETHEREUM_ADDRESS])||{}},n.getEvmInternalAccounts=void 0,n.getExternalServicesOnboardingToggleState=function(e){return e.appState.externalServicesOnboardingToggleState},n.getFeatureFlags=function(e){return e.metamask.featureFlags},n.getFeatureNotificationsEnabled=function(e){const{featureNotificationsEnabled:t=!1}=Ae(e);return t},n.getFullTxData=void 0,n.getGasIsLoading=function(e){return e.appState.gasIsLoading},n.getHardwareWalletType=function(e){const t=j(e);return V(e)?t.type:undefined},n.getHiddenAccountsList=tt,n.getHideSnapBranding=void 0,n.getInfuraBlocked=function(e){return e.metamask.networksMetadata[x(e)].status===p.NetworkStatus.Blocked},n.getInterfaceContent=n.getInterface=n.getInsightSnaps=n.getInsightSnapIds=void 0,n.getInternalAccount=function(e,t){return e.metamask.internalAccounts.accounts[t]},n.getInternalAccountByAddress=Q,n.getInternalAccounts=X,n.getInternalAccountsSortedByKeyring=void 0,n.getIpfsGateway=function(e){return e.metamask.ipfsGateway},n.getIsAddSnapAccountEnabled=function(e){return e.metamask.addSnapAccountEnabled},n.getIsAddingNewNetwork=function(e){return e.appState.isAddingNewNetwork},n.getIsBitcoinSupportEnabled=function(e){return e.metamask.bitcoinSupportEnabled},n.getIsBitcoinTestnetSupportEnabled=function(e){return e.metamask.bitcoinTestnetSupportEnabled},n.getIsBridgeChain=function(e){const t=K(e);return _.ALLOWED_BRIDGE_CHAIN_IDS.includes(t)},n.getIsBridgeEnabled=void 0,n.getIsCustomNetwork=ct,n.getIsDynamicTokenListAvailable=st,n.getIsLineaMainnet=function(e){return K(e)===p.CHAIN_IDS.LINEA_MAINNET},n.getIsMainnet=Se,n.getIsMultiRpcOnboarding=function(e){return e.appState.isMultiRpcOnboarding},n.getIsNetworkUsed=function(e){const t=K(e),{usedNetworks:n}=e.metamask;return Boolean(n[t])},n.getIsNonStandardEthChain=function(e){return!(Se(e)||he(e))},n.getIsSecurityAlertsEnabled=function(e){return e.metamask.securityAlertsEnabled},n.getIsSigningQRHardwareTransaction=function(e){var t;return(null===(t=e.metamask.qrHardware)||void 0===t||null===(t=t.sign)||void 0===t?void 0:t.request)!==undefined},n.getIsSwapsChain=function(e){const t=K(e);return A.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(t)},n.getIsTestnet=he,n.getIsTokenDetectionInactiveOnMainnet=ot,n.getIsTokenDetectionSupported=function(e){const t=rt(e),n=st(e);return t&&n},n.getIsWatchEthereumAccountEnabled=function(e){return e.metamask.watchEthereumAccountEnabled},n.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=rt(e),n=Se(e);return st(e)&&!t&&!n},n.getKeyringSnapAccounts=function(e){const t=X(e);return Object.values(t).filter((e=>{const{keyring:t}=e.metadata;return t.type===f.KeyringType.snap}))},n.getKeyringSnapRemovalResult=function(e){return e.appState.keyringRemovalSnapModal},n.getKnownMethodData=function(e,t){const{knownMethodData:n,use4ByteResolution:a}=e.metamask;if(!a||!(0,B.hasTransactionData)(t))return null;const r=(0,T.addHexPrefix)(t).slice(0,10);if(r.length<10)return null;return(null==n?void 0:n[r])??null},n.getLastViewedUserSurvey=function(e){return e.metamask.lastViewedUserSurvey},n.getLocale=Ve,n.getMaybeSelectedInternalAccount=function(e){var t,n;const a=null===(t=e.metamask.internalAccounts)||void 0===t?void 0:t.selectedAccount;return a?null===(n=e.metamask.internalAccounts)||void 0===n?void 0:n.accounts[a]:undefined},n.getMemoizedUnapprovedTemplatedConfirmations=n.getMemoizedUnapprovedPersonalMessages=n.getMemoizedUnapprovedConfirmations=n.getMemoizedTxId=n.getMemoizedTargetSubjectMetadata=n.getMemoizedMetadataContract=n.getMemoizedMetaMaskInternalAccounts=n.getMemoizedInterfaces=n.getMemoizedInterfaceContent=n.getMemoizedInterface=n.getMemoizedCurrentChainId=n.getMemoizedAddressBook=void 0,n.getMemoizedUnapprovedTypedMessages=void 0,n.getMetaMaskAccountBalances=ne,n.getMetaMaskAccountsOrdered=n.getMetaMaskAccountsConnected=n.getMetaMaskAccounts=void 0,n.getMetaMaskCachedBalances=ae,n.getMetaMaskKeyrings=te,n.getMetaMetricsDataDeletionId=function(e){return e.metamask.metaMetricsDataDeletionId},n.getMetaMetricsDataDeletionStatus=function(e){return e.metamask.metaMetricsDataDeletionStatus},n.getMetaMetricsDataDeletionTimestamp=function(e){return e.metamask.metaMetricsDataDeletionTimestamp},n.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},n.getNameLookupSnapsIds=n.getMultipleTargetsSubjectMetadata=n.getMetadataContractName=void 0,n.getNameSources=function(e){return e.metamask.nameSources||{}},n.getNames=function(e){return e.metamask.names||{}},n.getNativeCurrencyImage=function(e){const t=K(e);return p.CHAIN_ID_TOKEN_IMAGE_MAP[t]},n.getNetworkConfigurationsByChainId=void 0,n.getNetworkIdentifier=function(e){const{type:t,nickname:n,rpcUrl:a}=(0,O.getProviderConfig)(e);return n||a||t},n.getNetworkToAutomaticallySwitchTo=function(e){const t=nt(e),n=Le(e),a=it(e);if((0,T.getEnvironmentType)()===P.ENVIRONMENT_TYPE_POPUP&&(0,O.getIsUnlocked)(e)&&a&&n&&0===t){const t=ie(e)[n],a=at(e);if(t&&a.id!==t)return t}return null},n.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},n.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},n.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},n.getNewTokensImported=function(e){return e.appState.newTokensImported},n.getNewTokensImportedError=function(e){return e.appState.newTokensImportedError},n.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},n.getNftIsStillFetchingIndication=function(e){return e.appState.isNftStillFetchingIndication},n.getNotifications=Ze,n.getNotifySnaps=void 0,n.getNumberOfAllUnapprovedTransactionsAndMessages=nt,n.getNumberOfTokens=ee,n.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},n.getOnboardingDate=function(e){return e.metamask.onboardingDate},n.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},n.getOrderedNetworksList=function(e){return e.metamask.orderedNetworkList},n.getOriginOfCurrentTab=Le,n.getPetnamesEnabled=function(e){const{petnamesEnabled:t=!0}=Ae(e);return t},n.getPinnedAccountsList=et,n.getPreferences=Ae,n.getPrioritizedUnapprovedTemplatedConfirmations=n.getPreinstalledSnaps=void 0,n.getQueuedRequestCount=pe,n.getReadNotificationsCount=void 0,n.getRedesignedConfirmationsEnabled=function(e){const{redesignedConfirmationsEnabled:t}=Ae(e);return t},n.getRedesignedTransactionsEnabled=function(e){const{redesignedTransactionsEnabled:t}=Ae(e);return t},n.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},n.getRequestingNetworkInfo=function(e,t){let n=t===undefined?[]:t;"string"==typeof n&&(n=[n]);const a=n.flat();return Object.values(Te(e)).filter((e=>!p.TEST_CHAINS.includes(e.chainId)&&a.includes(e.chainId)))},n.getRpcPrefsForCurrentProvider=De,n.getSelectedAccount=void 0,n.getSelectedAccountCachedBalance=se,n.getSelectedAddress=function(e){var t;return null===(t=(0,W.getSelectedInternalAccount)(e))||void 0===t?void 0:t.address},n.getSelectedEvmInternalAccount=void 0,n.getSelectedInternalAccountWithBalance=function(e){const t=(0,W.getSelectedInternalAccount)(e),n=ne(e)[t.address];return{...t,balance:n?n.balance:"0x0"}},n.getSelectedNetworkClientId=x,n.getSendInputCurrencySwitched=function({appState:e}){return e.sendInputCurrencySwitched},n.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=Ae(e);return t},n.getShouldShowAggregatedBalancePopover=function(e){const{shouldShowAggregatedBalancePopover:t}=Ae(e);return t},n.getShouldShowFiat=function(e){const t=K(e),n=p.TEST_NETWORK_IDS.includes(t),{showFiatInTestnets:a}=Ae(e),r=(0,O.getConversionRate)(e),s=ut(e),o=Boolean(s&&r);if(n)return a&&o;return o},n.getShouldShowSeedPhraseReminder=function(e){const{tokens:t,seedPhraseBackedUp:n,dismissSeedBackUpReminder:a}=e.metamask,r=(0,W.getSelectedInternalAccount)(e)?me(e):0;return!1===n&&(parseInt(r,16)>0||t.length>0)&&!1===a},n.getShowAccountBanner=function(e){return e.metamask.showAccountBanner},n.getShowBasicFunctionalityModal=function(e){return e.appState.showBasicFunctionalityModal},n.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},n.getShowDataDeletionErrorModal=function(e){return e.appState.showDataDeletionErrorModal},n.getShowDeleteMetaMetricsDataModal=function(e){return e.appState.showDeleteMetaMetricsDataModal},n.getShowExtensionInFullSizeView=function(e){const{showExtensionInFullSizeView:t}=Ae(e);return Boolean(t)},n.getShowFiatInTestnets=function(e){const{showFiatInTestnets:t}=Ae(e);return t},n.getShowNetworkBanner=function(e){return e.metamask.showNetworkBanner},n.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*y.DAY},n.getShowPermissionsTour=function(e){return e.metamask.showPermissionsTour},n.getShowPermittedNetworkToastOpen=function(e){return e.appState.showPermittedNetworkToastOpen},n.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:n}=e.metamask,a=(new Date).getTime(),r=n?90*y.DAY:2*y.DAY;return a-t>=r},n.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(w.TERMS_OF_USE_LAST_UPDATED).getTime()},n.getShowTestNetworks=_e,n.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},n.getSnapMetadata=n.getSnapLatestVersion=n.getSnapInsights=n.getSnap=n.getSignatureInsightSnaps=n.getSignatureInsightSnapIds=void 0,n.getSnapRegistry=function(e){const{snapRegistryList:t}=e.metamask;return t},n.getSnapRegistryData=void 0,n.getSnaps=je,n.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},n.getSnapsList=lt,n.getSnapsMetadata=void 0,n.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),n=function(e){const t=j(e),n=(null==t?void 0:t.type)===f.KeyringType.ledger,a=window.navigator.userAgent.includes("Firefox");return{[b.NOTIFICATION_DROP_LEDGER_FIREFOX]:n&&a}}(e),a=t.filter((e=>!e.isShown&&n[e.id]));return a.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},n.getSuggestedNfts=function(e){var t;return(null===(t=Ee(e))||void 0===t?void 0:t.filter((({requestData:e,type:t})=>{var n;return t===s.ApprovalType.WatchAsset&&(null==e||null===(n=e.asset)||void 0===n?void 0:n.tokenId)!==undefined})))||[]},n.getSuggestedTokens=function(e){var t;return(null===(t=Ee(e))||void 0===t?void 0:t.filter((({type:e,requestData:t})=>{var n;return e===s.ApprovalType.WatchAsset&&(null==t||null===(n=t.asset)||void 0===n?void 0:n.tokenId)===undefined})))||[]},n.getSwapsDefaultToken=function(e){const t=ce(e),n=null==t?void 0:t.balance,a=K(e);return{...A.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[a],balance:(0,R.hexToDecimal)(n),string:(0,R.getValueFromWeiHex)({value:n,numberOfDecimals:4,toDenomination:"ETH"})}},n.getSwitchedNetworkDetails=function(e){const{switchedNetworkDetails:t}=e.metamask,n=Te(e);if(t){const e=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t.networkClientId))));return{nickname:null==e?void 0:e.name,imageUrl:p.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==e?void 0:e.chainId],origin:null==t?void 0:t.origin}}return null},n.getTargetAccount=function(e,t){return z(e)[t]},n.getTargetAccountWithSendEtherInfo=function(e,t){const n=de(e);return(0,N.getAccountByAddress)(n,t)},n.getTargetSubjectMetadata=ke,n.getTestNetworkBackgroundColor=function(e){const t=(0,O.getProviderConfig)(e).ticker;switch(!0){case null==t?void 0:t.includes(p.GOERLI_DISPLAY_NAME):return M.BackgroundColor.goerli;case null==t?void 0:t.includes(p.SEPOLIA_DISPLAY_NAME):return M.BackgroundColor.sepolia;default:return undefined}},n.getTheme=function(e){return e.metamask.theme},n.getTokensMarketData=n.getTokenList=n.getTokenExchangeRates=n.getTokenDetectionSupportNetworkByChainId=void 0,n.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},n.getTotalUnapprovedMessagesCount=function(e){const{unapprovedPersonalMsgCount:t=0,unapprovedDecryptMsgCount:n=0,unapprovedEncryptionPublicKeyMsgCount:a=0,unapprovedTypedMessagesCount:r=0}=e.metamask;return t+n+a+r},n.getTotalUnapprovedSignatureRequestCount=function(e){const{unapprovedPersonalMsgCount:t=0,unapprovedTypedMessagesCount:n=0}=e.metamask;return t+n},n.getTxData=n.getTransaction=void 0,n.getUSDConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,O.getProviderConfig)(e).ticker])||void 0===t?void 0:t.usdConversionRate},n.getUnapprovedConfirmations=void 0,n.getUnapprovedTemplatedConfirmations=fe,n.getUnapprovedTransaction=void 0,n.getUnapprovedTxCount=function(e){const t=(0,U.getUnapprovedTransactions)(e);return Object.keys(t).length},n.getUnconnectedAccounts=function(e,t){const n=re(e),a=(0,G.getOrderedConnectedAccountsForConnectedDapp)(e,t);return n.filter((e=>!a.some((t=>t.address===e.address))))},n.getUnreadNotifications=Je,n.getUpdatedAndSortedAccounts=n.getUnreadNotificationsCount=void 0,n.getUseBlockie=function(e){return Boolean(e.metamask.useBlockie)},n.getUseCurrencyRateCheck=ut,n.getUseExternalServices=Be,n.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},n.getUseNonceField=function(e){const t=(0,S.getIsSmartTransaction)(e);return Boolean(!t&&e.metamask.useNonceField)},n.getUseRequestQueue=it,n.getUseTokenDetection=rt,n.getWatchedToken=void 0,n.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},n.getsnapsAddSnapAccountModalDismissed=function(e){const{snapsAddSnapAccountModalDismissed:t}=e.metamask;return t},n.isBalanceCached=function(e){var t;const{address:n}=(0,W.getSelectedInternalAccount)(e),a=null===(t=ne(e)[n])||void 0===t?void 0:t.balance,r=se(e);return Boolean(!a&&r)},n.isCurrentProviderCustom=function(e){const t=(0,O.getProviderConfig)(e);return t.type===p.NETWORK_TYPES.RPC&&!Object.values(p.CHAIN_IDS).includes(t.chainId)},n.isHardwareWallet=V,n.isNetworkLoading=function(e){const t=x(e);return t&&e.metamask.networksMetadata[t].status!==p.NetworkStatus.Available},n.useSafeChainsListValidationSelector=n.selectNetworkConfigurationByChainId=n.selectInstalledSnaps=n.selectERC20TokensByChain=n.selectERC20Tokens=n.selectAllTokensFlat=n.rawStateSelector=void 0;var a,r=e("@metamask/permission-controller"),s=e("@metamask/controller-utils"),o=e("@metamask/snaps-utils"),i=e("lodash"),c=(a=e("semver"))&&a.__esModule?a:{default:a},u=e("reselect"),l=e("@metamask/name-controller"),d=e("@metamask/transaction-controller"),g=e("@metamask/keyring-api"),m=e("@metamask/network-controller"),T=e("../../app/scripts/lib/util"),p=e("../../shared/constants/network"),E=e("../../shared/constants/hardware-wallets"),f=e("../../shared/constants/keyring"),S=e("../../shared/modules/selectors"),h=e("../../shared/constants/labels"),A=e("../../shared/constants/swaps"),_=e("../../shared/constants/bridge"),N=e("../helpers/utils/util"),k=e("../pages/confirmations/confirmation/templates"),I=e("../../shared/constants/tokens"),y=e("../../shared/constants/time"),w=e("../../shared/constants/terms"),O=e("../ducks/metamask/metamask"),C=e("../ducks/app/app"),v=e("../../shared/modules/string-utils"),R=e("../../shared/modules/conversion.utils"),M=e("../helpers/constants/design-system"),b=e("../../shared/notifications"),P=e("../../shared/constants/app"),D=e("../../shared/constants/multichain/assets"),L=e("../../app/scripts/controllers/bridge/types"),B=e("../../shared/modules/transaction.utils"),F=e("../../shared/modules/hexstring-utils"),U=e("./transactions"),G=e("./permissions"),W=e("./accounts"),q=e("./util"),H=e("./multichain");function x(e){return e.metamask.selectedNetworkClientId}function K(e){const{chainId:t}=(0,O.getProviderConfig)(e);return t}function j(e){const t=(0,W.getSelectedInternalAccount)(e);return t?t.metadata.keyring:null}function V(e){var t;const n=j(e);return Boolean(null==n||null===(t=n.type)||void 0===t?void 0:t.includes("Hardware"))}function Y(e){return $(j(e))}function $(e){if(!e)return"";const{type:t}=e;switch(t){case f.KeyringType.trezor:case f.KeyringType.ledger:case f.KeyringType.lattice:case f.KeyringType.qr:return"hardware";case f.KeyringType.imported:return"imported";case f.KeyringType.snap:return"snap";default:return"default"}}const z=n.getMetaMaskAccounts=(0,u.createSelector)(X,ne,ae,H.getMultichainBalances,H.getMultichainNetwork,((e,t,n,a,r)=>Object.values(e).reduce(((e,s)=>{let o=s;var i;(0,g.isEvmAccountType)(s.type)?null!=t&&t[s.address]&&(o={...o,...t[s.address]}):o={...o,balance:(null==a||null===(i=a[s.id])||void 0===i||null===(i=i[D.MultichainNativeAssets[r.chainId]])||void 0===i?void 0:i.amount)??"0"};return null!==o.balance&&o.balance!==undefined||(o={...o,balance:(n&&n[s.address])??"0x0"}),{...e,[s.address]:o}}),{})));function Q(e,t){return Object.values(e.metamask.internalAccounts.accounts).find((e=>(0,v.isEqualCaseInsensitive)(e.address,t)))}function X(e){return Object.values(e.metamask.internalAccounts.accounts)}const Z=n.getEvmInternalAccounts=(0,u.createSelector)(X,(e=>e.filter((e=>(0,g.isEvmAccountType)(e.type))))),J=(n.getSelectedEvmInternalAccount=(0,u.createSelector)(Z,(e=>{const[t]=(0,N.sortSelectedInternalAccounts)(e);return t})),n.getInternalAccountsSortedByKeyring=(0,u.createSelector)(te,z,((e,t)=>e.map((({accounts:e})=>e)).flat().map((e=>t[e])))));function ee(e){const{tokens:t}=e.metamask;return t?t.length:0}function te(e){return e.metamask.keyrings}function ne(e){return e.metamask.accounts}function ae(e){var t;const n=K(e);return null!==(t=e.metamask.accountsByChainId)&&void 0!==t&&t[n]?Object.entries(e.metamask.accountsByChainId[n]).reduce(((e,[t,n])=>(e[t]=n.balance,e)),{}):{}}const re=n.getMetaMaskAccountsOrdered=(0,u.createSelector)(J,z,((e,t)=>e.map((e=>({...e,...t[e.address]})))));n.getMetaMaskAccountsConnected=(0,u.createSelector)(re,(e=>e.map((({address:e})=>e.toLowerCase()))));function se(e){const t=ae(e),{address:n}=(0,W.getSelectedInternalAccount)(e);return null==t?void 0:t[n]}function oe(e){return e.metamask.allTokens}n.selectAllTokensFlat=(0,u.createSelector)(oe,(e=>Object.values(e).reduce(((e,t)=>{const n=Object.values(t);return e.concat(...n)}),[])));function ie(e){return e.metamask.domains}n.getConfirmationExchangeRates=e=>e.metamask.confirmationExchangeRates;const ce=n.getSelectedAccount=(0,q.createDeepEqualSelector)(z,W.getSelectedInternalAccount,((e,t)=>t?{...t,...e[t.address]}:undefined));n.getWatchedToken=e=>(0,u.createSelector)([ce,oe],((t,n)=>{var a;const{chainId:r}=e;return null==n||null===(a=n[r])||void 0===a||null===(a=a[t.address])||void 0===a?void 0:a.find((t=>(0,F.toChecksumHexAddress)(t.address)===(0,F.toChecksumHexAddress)(e.txParams.to)))}));n.getTokenExchangeRates=e=>{var t;const n=K(e),a=(null===(t=e.metamask.marketData)||void 0===t?void 0:t[n])??{};return Object.entries(a).reduce(((e,[t,n])=>(e[t]=(null==n?void 0:n.price)??null,e)),{})};function ue(e){const t=K(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function le(e,t){return ue(e).find((e=>(0,v.isEqualCaseInsensitive)(e.address,t)))}function de(e){const t=z(e),n=X(e);return Object.values(n).map((e=>({...e,...t[e.address]})))}function ge(e){const{address:t}=(0,W.getSelectedInternalAccount)(e),n=de(e);return(0,N.getAccountByAddress)(n,t)}function me(e){var t;return null===(t=ge(e))||void 0===t?void 0:t.balance}n.getTokensMarketData=e=>{var t;const n=K(e);return null===(t=e.metamask.marketData)||void 0===t?void 0:t[n]};const Te=n.getNetworkConfigurationsByChainId=(0,q.createDeepEqualSelector)((e=>e.metamask.networkConfigurationsByChainId),(e=>e));n.selectNetworkConfigurationByChainId=(0,u.createSelector)(Te,((e,t)=>t),((e,t)=>e[t]));function pe(e){return e.metamask.queuedRequestCount??0}const Ee=n.getUnapprovedConfirmations=(0,q.createDeepEqualSelector)((e=>e.metamask.pendingApprovals||{}),(e=>Object.values(e)));function fe(e){return Ee(e).filter((e=>k.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type)))}n.getPrioritizedUnapprovedTemplatedConfirmations=(0,u.createSelector)(fe,(e=>e.filter((({type:e})=>k.PRIORITY_APPROVAL_TEMPLATE_TYPES.includes(e)))));function Se(e){return K(e)===p.CHAIN_IDS.MAINNET}function he(e){const t=K(e);return p.TEST_CHAINS.includes(t)}function Ae({metamask:e}){return e.preferences}function _e(e){const{showTestNetworks:t}=Ae(e);return Boolean(t)}const Ne=(0,i.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function ke(e,t){const n=(0,G.getSubjectMetadata)(e)[t];if((null==n?void 0:n.subjectType)===r.SubjectType.Snap){const{svgIcon:e,...t}=n;return{...t,iconUrl:e?Ne(e):null}}return n}const Ie=e=>e;n.rawStateSelector=Ie;const ye=(e,t)=>t,we=e=>e.metamask.snaps;n.selectInstalledSnaps=we;const Oe=n.getSnapRegistryData=(0,u.createSelector)([e=>{var t;return null===(t=e.metamask.database)||void 0===t?void 0:t.verifiedSnaps},ye],((e,t)=>e?e[t]:null)),Ce=n.getSnapLatestVersion=(0,u.createSelector)([Oe],(e=>e?Object.keys(e.versions).reduce(((e,t)=>c.default.gt(t,e)?t:e),"0.0.0"):null)),ve=n.getAllSnapAvailableUpdates=(0,u.createSelector)([we,Ie],((e,t)=>{const n=new Map;return Object.keys(e).forEach((a=>{const r=Ce(t,a);n.set(a,!!r&&c.default.gt(r,e[a].version))})),n})),Re=(n.getAnySnapUpdateAvailable=(0,u.createSelector)([ve],(e=>[...e.values()].some((e=>!0===e)))),n.getHideSnapBranding=(0,u.createSelector)([we,ye],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.hideSnapBranding})),n.getMemoizedTargetSubjectMetadata=(0,q.createDeepEqualSelector)(ke,(e=>e)),n.getMemoizedUnapprovedConfirmations=(0,q.createDeepEqualSelector)(Ee,(e=>e)),n.getMemoizedUnapprovedTemplatedConfirmations=(0,q.createDeepEqualSelector)(fe,(e=>e)),(e,t)=>t),Me=n.getMemoizedInterfaces=(0,q.createDeepEqualSelector)((e=>e.metamask.interfaces),(e=>e)),be=n.getInterface=(0,u.createSelector)([Me,Re],((e,t)=>e[t])),Pe=(n.getMemoizedInterface=(0,q.createDeepEqualSelector)(be,(e=>e)),n.getInterfaceContent=(0,u.createSelector)([Me,Re],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.content})));n.getMemoizedInterfaceContent=(0,q.createDeepEqualSelector)(Pe,(e=>e)),n.getMultipleTargetsSubjectMetadata=(0,q.createDeepEqualSelector)([Ie,(e,t)=>t],((e,t)=>Object.keys(t??{}).reduce(((t,n)=>(t[n]=ke(e,n),t)),{})));function De(e){const{rpcPrefs:t}=(0,O.getProviderConfig)(e);return t||{}}function Le(e){return e.activeTab.origin}function Be(e){return e.metamask.useExternalServices}n.getIsBridgeEnabled=(0,u.createSelector)([function(e){var t;return null===(t=e.metamask.bridgeState)||void 0===t?void 0:t.bridgeFeatureFlags},Be],((e,t)=>(t&&(null==e?void 0:e[L.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]))??!1));n.getMemoizedMetaMaskInternalAccounts=(0,q.createDeepEqualSelector)(X,(e=>e)),n.getMemoizedAddressBook=(0,q.createDeepEqualSelector)(ue,(e=>e)),n.selectERC20TokensByChain=(0,q.createDeepEqualSelector)((e=>e.metamask.tokensChainsCache),(e=>e));const Fe=n.selectERC20Tokens=(0,q.createDeepEqualSelector)((e=>e.metamask.tokenList),(e=>e)),Ue=n.getTokenList=(0,u.createSelector)(Fe,ot,((e,t)=>t?I.STATIC_MAINNET_TOKEN_LIST:e)),Ge=n.getMemoizedMetadataContract=(0,u.createSelector)(((e,t)=>Ue(e)),((e,t)=>t),((e,t)=>e[null==t?void 0:t.toLowerCase()])),We=(n.getMetadataContractName=(0,u.createSelector)(Ge,(e=>(null==e?void 0:e.name)??"")),e=>e.confirmTransaction.txData);n.getTxData=We;const qe=n.getUnapprovedTransaction=(0,q.createDeepEqualSelector)((e=>(0,U.getUnapprovedTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t)))),He=n.getTransaction=(0,q.createDeepEqualSelector)((e=>(0,U.getCurrentNetworkTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{})),xe=(n.getFullTxData=(0,q.createDeepEqualSelector)(We,((e,t,n)=>n===d.TransactionStatus.unapproved?qe(e,t)??{}:He(e,t)),((e,t,n,a,r)=>({customTxParamsData:a,hexTransactionAmount:r})),((e,t,{customTxParamsData:n,hexTransactionAmount:a})=>{let r={...e,...t};return t&&t.simulationFails&&(r.simulationFails={...t.simulationFails}),n&&(r={...r,txParams:{...r.txParams,data:n}}),a&&(r={...r,txParams:{...r.txParams,value:a}}),r})),n.getAllConnectedAccounts=(0,q.createDeepEqualSelector)(G.getConnectedSubjectsForAllAddresses,(e=>Object.keys(e)))),Ke=n.getConnectedSitesList=(0,q.createDeepEqualSelector)(G.getConnectedSubjectsForAllAddresses,X,xe,((e,t,n)=>{const a={};return n.forEach((n=>{e[n].forEach((e=>{const r=e.origin,s=t.find((e=>(0,v.isEqualCaseInsensitive)(e.address,n)));a[r]?(a[r].addresses.push(n),a[r].addressToNameMap[n]=(null==s?void 0:s.metadata.name)||""):a[r]={...e,addresses:[n],addressToNameMap:{[n]:(null==s?void 0:s.metadata.name)||""}}}))})),a}));n.getConnectedSnapsList=(0,q.createDeepEqualSelector)(lt,(e=>{const t={};return Object.values(e).forEach((e=>{t[e.name]||(t[e.name]=e)})),t})),n.getMemoizedCurrentChainId=(0,q.createDeepEqualSelector)(K,(e=>e)),n.getMemoizedTxId=(0,q.createDeepEqualSelector)((e=>e.appState.txId),(e=>e)),n.getMemoizedUnapprovedPersonalMessages=(0,q.createDeepEqualSelector)((e=>e.metamask.unapprovedPersonalMsgs),(e=>e)),n.getMemoizedUnapprovedTypedMessages=(0,q.createDeepEqualSelector)((e=>e.metamask.unapprovedTypedMessages),(e=>e));function je(e){return e.metamask.snaps}function Ve(e){return e.metamask.currentLocale}n.getSnap=(0,q.createDeepEqualSelector)(je,((e,t)=>t),((e,t)=>e[t]));const Ye=n.getSnapsMetadata=(0,q.createDeepEqualSelector)(Ve,je,((e,t)=>Object.values(t).reduce(((t,n)=>{const a=n.id,r=n.localizationFiles?(0,o.getLocalizedSnapManifest)(n.manifest,e,n.localizationFiles):n.manifest;return t[a]={name:r.proposedName,description:r.description,hidden:n.hidden},t}),{}))),$e=n.getSnapMetadata=(0,q.createDeepEqualSelector)(Ye,((e,t)=>t),((e,t)=>e[t]??{name:t?(0,o.stripSnapPrefix)(t):null})),ze=n.getEnabledSnaps=(0,q.createDeepEqualSelector)(je,(e=>Object.values(e).reduce(((e,t)=>(t.enabled&&(e[t.id]=t),e)),{}))),Qe=(n.getPreinstalledSnaps=(0,q.createDeepEqualSelector)(je,(e=>Object.values(e).reduce(((e,t)=>(t.preinstalled&&(e[t.id]=t),e)),{}))),n.getInsightSnaps=(0,q.createDeepEqualSelector)(ze,G.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:transaction-insight"]}))))),Xe=n.getSignatureInsightSnaps=(0,q.createDeepEqualSelector)(ze,G.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:signature-insight"]}))));n.getSignatureInsightSnapIds=(0,q.createDeepEqualSelector)(Xe,(e=>e.map((e=>e.id)))),n.getInsightSnapIds=(0,q.createDeepEqualSelector)(Qe,(e=>e.map((e=>e.id)))),n.getNameLookupSnapsIds=(0,q.createDeepEqualSelector)(ze,G.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:name-lookup"]})).map((e=>e.id)))),n.getNotifySnaps=(0,q.createDeepEqualSelector)(ze,G.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions.snap_notify}))));n.getSnapInsights=(0,q.createDeepEqualSelector)((function(e){return e.metamask.insights}),((e,t)=>t),((e,t)=>null==e?void 0:e[t]));function Ze(e){return Object.values(e.metamask.notifications).sort(((e,t)=>new Date(t.createdDate)-new Date(e.createdDate)))}function Je(e){return Ze(e).filter((e=>null===e.readDate))}n.getReadNotificationsCount=(0,u.createSelector)(Ze,(e=>e.filter((e=>null!==e.readDate)).length)),n.getUnreadNotificationsCount=(0,u.createSelector)(Je,(e=>e.length));function et(e){return e.metamask.pinnedAccountList}function tt(e){return e.metamask.hiddenAccountList}function nt(e){const t=(0,U.getAllUnapprovedTransactions)(e),n=pe(e),a={...t,...e.metamask.unapprovedDecryptMsgs,...e.metamask.unapprovedPersonalMsgs,...e.metamask.unapprovedEncryptionPublicKeyMsgs,...e.metamask.unapprovedTypedMessages};return Object.keys(a).length+n}const at=n.getCurrentNetwork=(0,q.createDeepEqualSelector)(Te,K,((e,t)=>{var n;const a=e[t],r=a.rpcEndpoints[a.defaultRpcEndpointIndex],s=null===(n=a.blockExplorerUrls)||void 0===n?void 0:n[a.defaultBlockExplorerUrlIndex];return{chainId:a.chainId,id:r.networkClientId,nickname:a.name,rpcUrl:r.url,ticker:a.nativeCurrency,blockExplorerUrl:s,rpcPrefs:{blockExplorerUrl:s,imageUrl:p.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[a.chainId]},...r.type===m.RpcEndpointType.Infura&&{providerType:r.networkClientId}}}));n.getConnectedSitesListWithNetworkInfo=(0,q.createDeepEqualSelector)(Ke,ie,Te,at,((e,t,n,a)=>(Object.keys(e).forEach((r=>{const s=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t[r]))));e[r].networkIconUrl=p.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==s?void 0:s.chainId]||"",e[r].networkName=(null==s?void 0:s.name)||(null==a?void 0:a.nickname)||""})),e)));function rt(e){return Boolean(e.metamask.useTokenDetection)}n.getAllEnabledNetworks=(0,q.createDeepEqualSelector)(Te,_e,((e,t)=>Object.entries(e).reduce(((e,[n,a])=>(!t&&p.TEST_CHAINS.includes(n)||(e[n]=a),e)),{})));function st(e){const t=K(e);return[p.CHAIN_IDS.MAINNET,p.CHAIN_IDS.BSC,p.CHAIN_IDS.POLYGON,p.CHAIN_IDS.AVALANCHE,p.CHAIN_IDS.LINEA_GOERLI,p.CHAIN_IDS.LINEA_SEPOLIA,p.CHAIN_IDS.LINEA_MAINNET,p.CHAIN_IDS.ARBITRUM,p.CHAIN_IDS.OPTIMISM,p.CHAIN_IDS.BASE,p.CHAIN_IDS.ZKSYNC_ERA,p.CHAIN_IDS.CRONOS,p.CHAIN_IDS.CELO,p.CHAIN_IDS.GNOSIS,p.CHAIN_IDS.FANTOM,p.CHAIN_IDS.POLYGON_ZKEVM,p.CHAIN_IDS.MOONBEAM,p.CHAIN_IDS.MOONRIVER].includes(t)}function ot(e){const t=Se(e);return!rt(e)&&t}function it(e){return e.metamask.useRequestQueue}function ct(e){const t=K(e);return!p.CHAIN_ID_TO_RPC_URL_MAP[t]}n.getTokenDetectionSupportNetworkByChainId=e=>{switch(K(e)){case p.CHAIN_IDS.MAINNET:return p.MAINNET_DISPLAY_NAME;case p.CHAIN_IDS.BSC:return p.BSC_DISPLAY_NAME;case p.CHAIN_IDS.POLYGON:return p.POLYGON_DISPLAY_NAME;case p.CHAIN_IDS.AVALANCHE:return p.AVALANCHE_DISPLAY_NAME;case p.CHAIN_IDS.LINEA_GOERLI:return p.LINEA_GOERLI_DISPLAY_NAME;case p.CHAIN_IDS.LINEA_SEPOLIA:return p.LINEA_SEPOLIA_DISPLAY_NAME;case p.CHAIN_IDS.LINEA_MAINNET:return p.LINEA_MAINNET_DISPLAY_NAME;case p.CHAIN_IDS.ARBITRUM:return p.ARBITRUM_DISPLAY_NAME;case p.CHAIN_IDS.OPTIMISM:return p.OPTIMISM_DISPLAY_NAME;case p.CHAIN_IDS.BASE:return p.BASE_DISPLAY_NAME;case p.CHAIN_IDS.ZKSYNC_ERA:return p.ZK_SYNC_ERA_DISPLAY_NAME;case p.CHAIN_IDS.CRONOS:return p.CRONOS_DISPLAY_NAME;case p.CHAIN_IDS.CELO:return p.CELO_DISPLAY_NAME;case p.CHAIN_IDS.GNOSIS:return p.GNOSIS_DISPLAY_NAME;case p.CHAIN_IDS.FANTOM:return p.FANTOM_DISPLAY_NAME;case p.CHAIN_IDS.POLYGON_ZKEVM:return p.POLYGON_ZKEVM_DISPLAY_NAME;case p.CHAIN_IDS.MOONBEAM:return p.MOONBEAM_DISPLAY_NAME;case p.CHAIN_IDS.MOONRIVER:return p.MOONRIVER_DISPLAY_NAME;default:return""}};n.getUpdatedAndSortedAccounts=(0,q.createDeepEqualSelector)(re,et,tt,G.getOrderedConnectedAccountsForActiveTab,((e,t,n,a)=>{a.forEach((t=>{const n=e.find((e=>e.id===t.id));n&&t.metadata&&(n.connections=!0,n.lastSelected=t.metadata.lastSelected)}));const r=e.filter((e=>e.connections&&e.lastSelected)),s=r.length>0?r.reduce(((e,t)=>e.lastSelected>t.lastSelected?e:t)):null;e.forEach((e=>{e.pinned=Boolean(t.includes(e.address)),e.hidden=Boolean(n.includes(e.address)),e.active=Boolean(s&&e.id===s.id)}));return[...null==t?void 0:t.map((t=>e.find((e=>e.address===t)))).filter((e=>Boolean(e&&t.includes(e.address)&&!(null!=n&&n.includes(e.address))))),...e.filter((e=>!t.includes(e.address)&&!n.includes(e.address))),...e.filter((e=>n.includes(e.address)))]}));function ut(e){return Boolean(e.metamask.useCurrencyRateCheck)}function lt(e){const t=je(e);return Object.entries(t).filter((([e,t])=>t.status!==o.SnapStatus.Installing&&(!t.preinstalled||!1===t.hidden))).map((([t,n])=>{const a=ke(e,null==n?void 0:n.id);return{key:t,id:n.id,iconUrl:null==a?void 0:a.iconUrl,subjectType:null==a?void 0:a.subjectType,packageName:(0,o.stripSnapPrefix)(n.id),name:$e(e,n.id).name}}))}n.useSafeChainsListValidationSelector=e=>e.metamask.useSafeChainsListValidation}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[6825,{"../../shared/constants/transaction":5142,"../../shared/modules/conversion.utils":5162,"../ducks/metamask/metamask":6093,"../helpers/constants/transactions":6117,"../helpers/utils/tx-helper":6152,"./accounts":6806,"./approvals":6808,"./selectors":6820,"./util":6826,"@metamask/controller-utils":1216,"@metamask/smart-transactions-controller/dist/types":2199,"@metamask/transaction-controller":2721,reselect:4883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUnapprovedTransactions=n.getTransactions=n.getCurrentNetworkTransactions=n.getApprovedAndSignedTransactions=n.getAllUnapprovedTransactions=void 0,n.hasTransactionPendingApprovals=function(e){return(0,p.getApprovalRequestsByType)(e,r.ApprovalType.Transaction).length>0||(0,p.hasPendingApprovals)(e,P)},n.nonceSortedTransactionsSelector=n.nonceSortedPendingTransactionsSelector=n.nonceSortedCompletedTransactionsSelector=n.incomingTxListSelector=void 0,n.selectTransactionMetadata=D,n.unapprovedTypedMessagesSelector=n.unapprovedPersonalMsgsSelector=n.unapprovedMessagesSelector=n.unapprovedEncryptionPublicKeyMsgsSelector=n.unapprovedDecryptMsgsSelector=n.transactionsSelector=n.transactionSubSelector=n.submittedPendingTransactionsSelector=n.smartTransactionsListSelector=n.selectedAddressTxListSelector=n.selectTransactionSender=void 0;var a,r=e("@metamask/controller-utils"),s=e("reselect"),o=e("@metamask/transaction-controller"),i=e("@metamask/smart-transactions-controller/dist/types"),c=e("../helpers/constants/transactions"),u=(a=e("../helpers/utils/tx-helper"))&&a.__esModule?a:{default:a},l=e("../../shared/constants/transaction"),d=e("../../shared/modules/conversion.utils"),g=e("../ducks/metamask/metamask"),m=e("./selectors"),T=e("./accounts"),p=e("./approvals"),E=e("./util");const f=[o.TransactionType.cancel,o.TransactionType.retry],S=[i.SmartTransactionStatuses.PENDING,i.SmartTransactionStatuses.UNKNOWN,i.SmartTransactionStatuses.RESOLVED,i.SmartTransactionStatuses.CANCELLED],h=n.getTransactions=(0,E.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask??{};return null!=t&&t.length?[...t].sort(((e,t)=>e.time-t.time)):[]}),(e=>e)),A=n.getCurrentNetworkTransactions=(0,E.createDeepEqualSelector)((e=>{const t=h(e);if(!t.length)return[];const{chainId:n}=(0,g.getProviderConfig)(e);return t.filter((e=>e.chainId===n))}),(e=>e)),_=(n.getUnapprovedTransactions=(0,E.createDeepEqualSelector)((e=>{const t=A(e);return(0,E.filterAndShapeUnapprovedTransactions)(t)}),(e=>e)),n.getAllUnapprovedTransactions=(0,E.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask||[];if(null==t||!t.length)return[];const n=[...t].sort(((e,t)=>e.time-t.time));return(0,E.filterAndShapeUnapprovedTransactions)(n)}),(e=>e)),n.getApprovedAndSignedTransactions=(0,E.createDeepEqualSelector)((e=>h(e).filter((e=>[o.TransactionStatus.approved,o.TransactionStatus.signed].includes(e.status)))),(e=>e)),n.incomingTxListSelector=(0,E.createDeepEqualSelector)((e=>{const{incomingTransactionsPreferences:t}=e.metamask;if(!t)return[];const n=A(e),{address:a}=(0,T.getSelectedInternalAccount)(e);return n.filter((e=>e.type===o.TransactionType.incoming&&e.txParams.to===a))}),(e=>e))),N=e=>e.metamask.unapprovedPersonalMsgs;n.unapprovedPersonalMsgsSelector=N;const k=e=>e.metamask.unapprovedDecryptMsgs;n.unapprovedDecryptMsgsSelector=k;const I=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;n.unapprovedEncryptionPublicKeyMsgsSelector=I;const y=e=>e.metamask.unapprovedTypedMessages;n.unapprovedTypedMessagesSelector=y;const w=e=>{var t;const{address:n}=(0,T.getSelectedInternalAccount)(e);return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t||null===(t=t[(0,m.getCurrentChainId)(e)])||void 0===t?void 0:t.filter((e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.from)===n&&!e.confirmed&&(e.status===i.SmartTransactionStatuses.PENDING||(e.type===o.TransactionType.swap||e.type===o.TransactionType.swapApproval)&&S.includes(e.status))})).map((e=>{var t;return{...e,isSmartTransaction:!0,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?l.SmartTransactionStatus.cancelled:e.status}}))};n.smartTransactionsListSelector=w;const O=n.selectedAddressTxListSelector=(0,s.createSelector)(T.getSelectedInternalAccount,A,w,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e.address)).filter((({type:e})=>e!==o.TransactionType.incoming)).concat(n))),C=n.unapprovedMessagesSelector=(0,s.createSelector)(N,k,I,y,m.getCurrentChainId,((e={},t={},n={},a={},r)=>(0,u.default)({},e,t,n,a,r)||[])),v=n.transactionSubSelector=(0,s.createSelector)(C,_,((e=[],t=[])=>e.concat(t))),R=n.transactionsSelector=(0,s.createSelector)(v,O,((e=[],t=[])=>[...t.concat(e)].sort(((e,t)=>t.time-e.time)))),M=(e,t)=>{const{primaryTransaction:{time:n}={}}=t;let a=e.length;for(let t=0;t<e.length;t++){const r=e[t],{primaryTransaction:{time:s}={}}=r;if(s>n){a=t;break}}e.splice(a,0,t)},b=n.nonceSortedTransactionsSelector=(0,s.createSelector)(R,((e=[])=>{const t=[],n=[],a=[],r={};e.forEach((e=>{const{txParams:{nonce:s}={},status:i,type:u,time:l,txReceipt:g}=e;if(void 0===s||u===o.TransactionType.incoming){const a={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:s};u===o.TransactionType.incoming?n.push(a):M(t,a)}else if(s in r){var m,T;const t=r[s];((e,t)=>{const{time:n}=t;let a=e.length;for(let t=0;t<e.length;t++)if(e[t].time>n){a=t;break}e.splice(a,0,t)})(t.transactions,e);const{primaryTransaction:{time:n=0}={},initialTransaction:{time:a=0}={}}=t,d={isOnChainFailure:"0x0"===(null==g?void 0:g.status),isEphemeral:i===o.TransactionStatus.failed&&"0x0"!==(null==g?void 0:g.status),isRetryOrCancel:f.includes(u),occurredAfterPrimary:l>n,hasPriorityStatus:i in c.PRIORITY_STATUS_HASH,isConfirmed:i===o.TransactionStatus.confirmed,occurredBeforeInitial:l<a,isValidRetry:u===o.TransactionType.retry&&(i in c.PRIORITY_STATUS_HASH||i===o.TransactionStatus.dropped),isValidCancel:u===o.TransactionType.cancel&&(i in c.PRIORITY_STATUS_HASH||i===o.TransactionStatus.dropped)};d.eligibleForInitial=!d.isRetryOrCancel&&!d.isEphemeral,d.shouldBePrimary=d.isConfirmed||d.isOnChainFailure;const p={isEphemeral:t.primaryTransaction.status===o.TransactionStatus.failed&&"0x0"!==(null===(m=t.primaryTransaction)||void 0===m||null===(m=m.txReceipt)||void 0===m?void 0:m.status)},E={isEphemeral:t.initialTransaction.status===o.TransactionStatus.failed&&"0x0"!==(null===(T=t.initialTransaction.txReceipt)||void 0===T?void 0:T.status)};(d.shouldBePrimary||p.isEphemeral||d.occurredAfterPrimary&&d.hasPriorityStatus)&&(t.primaryTransaction=e),(d.occurredBeforeInitial&&d.eligibleForInitial||E.isEphemeral&&d.eligibleForInitial)&&(t.initialTransaction=e),d.isValidRetry&&(t.hasRetried=!0),d.isValidCancel&&(t.hasCancelled=!0)}else r[s]={nonce:s,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===o.TransactionType.retry&&(e.status in c.PRIORITY_STATUS_HASH||e.status===o.TransactionStatus.dropped),hasCancelled:e.type===o.TransactionType.cancel&&(e.status in c.PRIORITY_STATUS_HASH||e.status===o.TransactionStatus.dropped)},((e,t)=>{let n=e.length;for(let a=0;a<e.length;a++){const r=e[a];if(Number((0,d.hexToDecimal)(r))>Number((0,d.hexToDecimal)(t))){n=a;break}}e.splice(n,0,t)})(a,s)}));const s=a.map((e=>r[e]));return((e,t)=>{t.forEach((t=>{M(e,t)}))})(s,n),t.concat(s).map((e=>{var t;if(f.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!f.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))})),P=(n.nonceSortedPendingTransactionsSelector=(0,s.createSelector)(b,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in c.PENDING_STATUS_HASH)))),n.nonceSortedCompletedTransactionsSelector=(0,s.createSelector)(b,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in c.PENDING_STATUS_HASH))).reverse())),n.submittedPendingTransactionsSelector=(0,s.createSelector)(R,((e=[])=>e.filter((e=>e.status===o.TransactionStatus.submitted)))),[r.ApprovalType.EthDecrypt,r.ApprovalType.EthGetEncryptionPublicKey,r.ApprovalType.EthSignTypedData,r.ApprovalType.PersonalSign]);function D(e,t){return e.metamask.transactions.find((e=>e.id===t))}n.selectTransactionSender=(0,s.createSelector)(((e,t)=>D(e,t)),(e=>{var t;return null==e||null===(t=e.txParams)||void 0===t?void 0:t.from}))}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[6826,{"@metamask/transaction-controller":2721,lodash:4463,reselect:4883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterAndShapeUnapprovedTransactions=n.createDeepEqualSelector=void 0;var a=e("@metamask/transaction-controller"),r=e("lodash"),s=e("reselect");n.createDeepEqualSelector=(0,s.createSelectorCreator)(s.defaultMemoize,r.isEqual);n.filterAndShapeUnapprovedTransactions=e=>e.filter((({status:e})=>e===a.TransactionStatus.unapproved)).reduce(((e,t)=>(e[t.id]=t,e)),{})}}},{package:"$root$",file:"ui/selectors/util.js"}],[6827,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_TRANSACTION_PARAMS=n.UPDATE_METAMASK_STATE=n.UPDATE_CUSTOM_NONCE=n.UNLOCK_SUCCEEDED=n.UNLOCK_IN_PROGRESS=n.UNLOCK_FAILED=n.TRANSACTION_ERROR=n.TOKEN_SORT_CRITERIA=n.TOGGLE_NETWORK_MENU=n.TOGGLE_GAS_LOADING_ANIMATION=n.TOGGLE_CURRENCY_INPUT_SWITCH=n.TOGGLE_ACCOUNT_MENU=n.SHOW_SEND_TOKEN_PAGE=n.SHOW_PRIVATE_KEY=n.SHOW_PERMITTED_NETWORK_TOAST_OPEN=n.SHOW_PERMITTED_NETWORK_TOAST_CLOSE=n.SHOW_NFT_STILL_FETCHING_INDICATION=n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST=n.SHOW_LOADING=n.SHOW_KEYRING_SNAP_REMOVAL_RESULT=n.SHOW_IPFS_MODAL_OPEN=n.SHOW_IPFS_MODAL_CLOSE=n.SHOW_CONF_TX_PAGE=n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN=n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE=n.SHOW_ACCOUNTS_PAGE=n.SET_WEBHID_CONNECTED_STATUS=n.SET_SMART_TRANSACTIONS_ERROR=n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE=n.SET_SELECTED_NETWORK_CONFIGURATION_ID=n.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS=n.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS=n.SET_REQUEST_ACCOUNT_TABS=n.SET_REMOVE_NFT_MESSAGE=n.SET_PENDING_TOKENS=n.SET_PARTICIPATE_IN_METAMETRICS=n.SET_OPEN_METAMASK_TAB_IDS=n.SET_NEXT_NONCE=n.SET_NEW_TOKENS_IMPORTED_ERROR=n.SET_NEW_TOKENS_IMPORTED=n.SET_NEW_NFT_ADDED_MESSAGE=n.SET_NEW_NETWORK_ADDED=n.SET_LEDGER_TRANSPORT_STATUS=n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=n.SET_FIRST_TIME_FLOW_TYPE=n.SET_EDIT_NETWORK=n.SET_DATA_COLLECTION_FOR_MARKETING=n.SET_CUSTOM_TOKEN_AMOUNT=n.SET_CURRENT_LOCALE=n.SET_CONFIRMATION_EXCHANGE_RATES=n.SET_ACCOUNT_LABEL=n.SET_ACCOUNT_DETAILS_ADDRESS=n.SELECTED_ADDRESS_CHANGED=n.SELECTED_ACCOUNT_CHANGED=n.RESET_ONBOARDING=n.QR_CODE_DETECTED=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF=n.ONBOARDED_IN_THIS_UI_SESSION=n.NETWORK_DROPDOWN_OPEN=n.NETWORK_DROPDOWN_CLOSE=n.MODAL_OPEN=n.MODAL_CLOSE=n.LOCK_METAMASK=n.LOADING_METHOD_DATA_STARTED=n.LOADING_METHOD_DATA_FINISHED=n.IMPORT_TOKENS_POPOVER_OPEN=n.IMPORT_TOKENS_POPOVER_CLOSE=n.IMPORT_NFTS_MODAL_OPEN=n.IMPORT_NFTS_MODAL_CLOSE=n.HIDE_WHATS_NEW_POPUP=n.HIDE_WARNING=n.HIDE_NFT_STILL_FETCHING_INDICATION=n.HIDE_LOADING=n.HIDE_KEYRING_SNAP_REMOVAL_RESULT=n.GO_HOME=n.GAS_FEE_ESTIMATES_UPDATED=n.DISPLAY_WARNING=n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=n.DEPRECATED_NETWORK_POPOVER_OPEN=n.DEPRECATED_NETWORK_POPOVER_CLOSE=n.DELETE_METAMETRICS_DATA_MODAL_OPEN=n.DELETE_METAMETRICS_DATA_MODAL_CLOSE=n.DATA_DELETION_ERROR_MODAL_OPEN=n.DATA_DELETION_ERROR_MODAL_CLOSE=n.CONNECT_ACCOUNTS_MODAL_OPEN=n.CONNECT_ACCOUNTS_MODAL_CLOSE=n.COMPLETE_ONBOARDING=n.COMPLETED_TX=n.CLOSE_WELCOME_SCREEN=n.CLEAR_SWAP_AND_SEND_STATE=n.CLEAR_PENDING_TOKENS=n.CLEAR_ACCOUNT_DETAILS=n.CHAIN_CHANGED=n.CAPTURE_SINGLE_EXCEPTION=n.ALERT_OPEN=n.ALERT_CLOSE=n.ADDRESS_BOOK_UPDATED=n.ACCOUNT_CHANGED=void 0;n.GO_HOME="GO_HOME",n.MODAL_OPEN="UI_MODAL_OPEN",n.MODAL_CLOSE="UI_MODAL_CLOSE",n.SET_CONFIRMATION_EXCHANGE_RATES="SET_CONFIRMATION_EXCHANGE_RATES",n.ALERT_OPEN="UI_ALERT_OPEN",n.ALERT_CLOSE="UI_ALERT_CLOSE",n.QR_CODE_DETECTED="UI_QR_CODE_DETECTED",n.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN",n.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE",n.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN",n.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE",n.SHOW_IPFS_MODAL_OPEN="UI_IPFS_MODAL_OPEN",n.SHOW_PERMITTED_NETWORK_TOAST_OPEN="UI_PERMITTED_NETWORK_TOAST_OPEN",n.SHOW_PERMITTED_NETWORK_TOAST_CLOSE="UI_PERMITTED_NETWORK_TOAST_CLOSE",n.SHOW_IPFS_MODAL_CLOSE="UI_IPFS_MODAL_CLOSE",n.IMPORT_TOKENS_POPOVER_OPEN="UI_IMPORT_TOKENS_POPOVER_OPEN",n.IMPORT_TOKENS_POPOVER_CLOSE="UI_IMPORT_TOKENS_POPOVER_CLOSE",n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN="SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN",n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE="SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF",n.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE",n.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED",n.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED",n.ACCOUNT_CHANGED="ACCOUNT_CHANGED",n.CHAIN_CHANGED="CHAIN_CHANGED",n.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED",n.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED",n.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN",n.CLEAR_SWAP_AND_SEND_STATE="CLEAR_SWAP_AND_SEND_STATE",n.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS",n.UNLOCK_FAILED="UNLOCK_FAILED",n.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED",n.LOCK_METAMASK="LOCK_METAMASK",n.DISPLAY_WARNING="DISPLAY_WARNING",n.HIDE_WARNING="HIDE_WARNING",n.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION",n.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE",n.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE",n.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE",n.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY",n.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL",n.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS",n.SET_ACCOUNT_DETAILS_ADDRESS="SET_ACCOUNT_DETAILS_ADDRESS",n.COMPLETED_TX="COMPLETED_TX",n.TRANSACTION_ERROR="TRANSACTION_ERROR",n.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS",n.SET_NEXT_NONCE="SET_NEXT_NONCE",n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH",n.SHOW_LOADING="SHOW_LOADING_INDICATION",n.HIDE_LOADING="HIDE_LOADING_INDICATION",n.SHOW_NFT_STILL_FETCHING_INDICATION="SHOW_NFT_STILL_FETCHING_INDICATION",n.HIDE_NFT_STILL_FETCHING_INDICATION="HIDE_NFT_STILL_FETCHING_INDICATION",n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST="SHOW_NFT_DETECTION_ENABLEMENT_TOAST",n.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU",n.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU",n.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS="SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS",n.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS="SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS",n.DEPRECATED_NETWORK_POPOVER_OPEN="DEPRECATED_NETWORK_POPOVER_OPEN",n.DEPRECATED_NETWORK_POPOVER_CLOSE="DEPRECATED_NETWORK_POPOVER_CLOSE",n.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE",n.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS",n.SET_DATA_COLLECTION_FOR_MARKETING="SET_DATA_COLLECTION_FOR_MARKETING",n.DELETE_METAMETRICS_DATA_MODAL_OPEN="DELETE_METAMETRICS_DATA_MODAL_OPEN",n.DELETE_METAMETRICS_DATA_MODAL_CLOSE="DELETE_METAMETRICS_DATA_MODAL_CLOSE",n.DATA_DELETION_ERROR_MODAL_OPEN="DELETE_METAMETRICS_DATA_ERROR_MODAL_OPEN",n.DATA_DELETION_ERROR_MODAL_CLOSE="DELETE_METAMETRICS_DATA_ERROR_MODAL_CLOSE",n.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE",n.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING",n.RESET_ONBOARDING="RESET_ONBOARDING",n.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION",n.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS",n.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS",n.SET_PENDING_TOKENS="SET_PENDING_TOKENS",n.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS",n.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE",n.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID",n.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED",n.SET_EDIT_NETWORK="SET_EDIT_NETWORK",n.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE",n.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE",n.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED",n.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED",n.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS",n.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS",n.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP",n.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION",n.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR",n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE",n.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH",n.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED",n.SET_NEW_TOKENS_IMPORTED_ERROR="SET_NEW_TOKENS_IMPORTED_ERROR",n.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT",n.CONNECT_ACCOUNTS_MODAL_OPEN="UI_CONNECT_ACCOUNTS_MODAL_OPEN",n.CONNECT_ACCOUNTS_MODAL_CLOSE="UI_CONNECT_ACCOUNTS_MODAL_CLOSE",n.SHOW_KEYRING_SNAP_REMOVAL_RESULT="SHOW_KEYRING_SNAP_REMOVAL_RESULT",n.HIDE_KEYRING_SNAP_REMOVAL_RESULT="HIDE_KEYRING_SNAP_REMOVAL_RESULT",n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE="SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE",n.TOKEN_SORT_CRITERIA="TOKEN_SORT_CRITERIA"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}],[6828,{"../../app/scripts/lib/util":130,"../../shared/constants/app":5112,"../../shared/constants/hardware-wallets":5120,"../../shared/constants/metametrics":5124,"../../shared/constants/permissions":5132,"../../shared/lib/four-byte":5147,"../../shared/lib/switch-direction":5152,"../../shared/modules/conversion.utils":5162,"../../shared/modules/error":5164,"../../shared/modules/hexstring-utils":5168,"../../shared/modules/i18n":5169,"../../shared/modules/selectors":5179,"../../shared/modules/string-utils":5182,"../ducks/alerts/unconnected-account":6080,"../ducks/metamask/metamask":6093,"../ducks/send":6098,"../helpers/constants/notifications":6109,"../pages/swaps/swaps.util":6797,"../selectors":6812,"./actionConstants":6827,"./background-connection":6829,"@metamask/keyring-controller":1623,"@metamask/rpc-errors":2104,"@metamask/snaps-utils":2640,"@sentry/browser":2960,buffer:3645,lodash:4463,loglevel:4469},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.abortTransactionSigning=function(e){return async t=>{try{await(0,v.submitRequestToBackground)("abortTransactionSigning",[e])}catch(e){t(re(e))}}},n.addImportedTokens=function(e,t){return async n=>{try{await(0,v.submitRequestToBackground)("addImportedTokens",[e,t])}catch(e){(0,y.logErrorWithMessage)(e)}finally{await ce(n)}}},n.addNetwork=function(e){return async t=>{a.default.debug("background.addNetwork",e);try{return await(0,v.submitRequestToBackground)("addNetwork",[e])}catch(e){(0,y.logErrorWithMessage)(e),t(re("Had a problem adding networks!"))}return undefined}},n.addNewAccount=function(){return a.default.debug("background.addNewAccount"),async(e,t)=>{const n=(0,g.getInternalAccounts)(t()).filter((e=>e.metadata.keyring.type===i.KeyringTypes.hd));let a;e(ee());try{a=await(0,v.submitRequestToBackground)("addNewAccount",[Object.keys(n).length])}catch(t){throw e(re(t)),t}finally{e(ne())}return await ce(e),a}},n.addNft=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||a(ee());try{await(0,v.submitRequestToBackground)("addNft",[e,t])}catch(e){(0,y.logErrorWithMessage)(e),a(re(e))}finally{await ce(a),a(ne())}}},n.addNftVerifyOwnership=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||a(ee());try{await(0,v.submitRequestToBackground)("addNftVerifyOwnership",[e,t])}catch(e){if((0,y.isErrorWithMessage)(e)){const t=(0,y.getErrorMessage)(e);if(t.includes("This NFT is not owned by the user")||t.includes("Unable to verify ownership"))throw e;(0,y.logErrorWithMessage)(e),a(re(e))}}finally{await ce(a),a(ne())}}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,v.callBackgroundMethod)("addPermittedAccount",[e,t],(e=>{e?a(e):n()}))})),await ce(n)}},n.addPermittedAccounts=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,v.callBackgroundMethod)("addPermittedAccounts",[e,t],(e=>{e?a(e):n()}))})),await ce(n)}},n.addPermittedChain=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,v.callBackgroundMethod)("addPermittedChain",[e,t],(e=>{e?a(e):n()}))})),await ce(n)}},n.addPermittedChains=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,v.callBackgroundMethod)("addPermittedChains",[e,t],(e=>{e?a(e):n()}))})),await ce(n)}},n.addPollingTokenToAppState=pe,n.addToAddressBook=function(e,t="",n=""){return a.default.debug("background.addToAddressBook"),async(a,r)=>{const{chainId:s}=(0,p.getProviderConfig)(r());let o;try{o=await(0,v.submitRequestToBackground)("setAddressBook",[(0,E.toChecksumHexAddress)(e),t,s,n]),await ce(a)}catch(e){throw(0,y.logErrorWithMessage)(e),a(re("Address book failed to update")),e}o||a(re("Address book failed to update"))}},n.addToken=function({address:e,symbol:t,decimals:n,image:a,networkClientId:r},s){return async o=>{if(!e)throw new Error("MetaMask - Cannot add token without address");s||o(ee());try{await(0,v.submitRequestToBackground)("addToken",[{address:e,symbol:t,decimals:n,image:a,networkClientId:r}])}catch(e){(0,y.logErrorWithMessage)(e),o(re(e))}finally{await ce(o),o(ne())}}},n.addTransactionAndRouteToConfirmationPage=function(e,t){return async n=>{const r=(0,v.generateActionId)();try{a.default.debug("background.addTransaction");const s=await(0,v.submitRequestToBackground)("addTransaction",[e,{...t,actionId:r,origin:l.ORIGIN_METAMASK}]);return n(z()),s}catch(e){throw n(ne()),n(re(e)),e}}},n.addTransactionAndWaitForPublish=async function(e,t){a.default.debug("background.addTransactionAndWaitForPublish");const n=(0,v.generateActionId)();return await(0,v.submitRequestToBackground)("addTransactionAndWaitForPublish",[e,{...t,origin:l.ORIGIN_METAMASK,actionId:n}])},n.approvePermissionsRequest=function(e){return t=>{(0,v.callBackgroundMethod)("approvePermissionsRequest",[e],(e=>{e&&t(re(e)),ce(t)}))}},n.attemptLedgerTransportCreation=async function(){return await(0,v.submitRequestToBackground)("attemptLedgerTransportCreation")},n.automaticallySwitchNetwork=function(e,t){return async n=>{await X(e),await n(Q({networkClientId:e,origin:t})),await ce(n)}},n.backupUserData=async function(){let e;try{e=await(0,v.submitRequestToBackground)("backupUserData")}catch(e){throw(0,y.logErrorWithMessage)(e),e}return e},n.cancelDecryptMsg=function(e){return async t=>{t(ee());try{await(0,v.submitRequestToBackground)("cancelDecryptMessage",[e.id])}finally{t(ne())}return await ce(t),t(U(e.id)),t(J()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{t(ee());try{await(0,v.submitRequestToBackground)("cancelEncryptionPublicKey",[e.id])}finally{t(ne())}return await ce(t),t(U(e.id)),t(J()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(ne()),await(0,v.submitRequestToBackground)("cancelQRHardwareSignRequest")}},n.cancelSmartTransaction=function(e){return async t=>{try{await(0,v.submitRequestToBackground)("cancelSmartTransaction",[e])}catch(e){if((0,y.logErrorWithMessage)(e),(0,y.isErrorWithMessage)(e)){const n=(0,y.getErrorMessage)(e);if(n.startsWith("Fetch error:")){const e=(0,h.parseSmartTransactionsError)(n);t({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(ne()),await(0,v.submitRequestToBackground)("cancelSyncQRHardware")}},n.cancelTx=function(e,t=!0){return n=>(t&&n(ee()),new Promise(((t,n)=>{(0,v.callBackgroundMethod)("rejectPendingApproval",[String(e.id),o.providerErrors.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))})).then((()=>ce(n))).then((()=>(n((0,m.resetSendState)()),n(U(e.id)),n(ne()),n(J()),e))).catch((e=>{throw n(ne()),e})))},n.cancelTxs=function(e){return async t=>{t(ee());try{const n=e.map((({id:e})=>e)),a=n.map((e=>new Promise(((t,n)=>{(0,v.callBackgroundMethod)("rejectPendingApproval",[String(e),o.providerErrors.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))}))));await Promise.all(a),await ce(t),t((0,m.resetSendState)()),n.forEach((e=>{t(U(e))}))}finally{(0,d.getEnvironmentType)()===l.ENVIRONMENT_TYPE_NOTIFICATION?fe():t(ne())}}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:a}=n().appState;e in a||(t({type:C.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,r.captureException)(Error(e)))}},n.checkAccountsPresence=function(e){return async()=>{try{return await(0,v.submitRequestToBackground)("checkAccountsPresence",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.checkAndUpdateAllNftsOwnershipStatus=async function(){await(0,v.submitRequestToBackground)("checkAndUpdateAllNftsOwnershipStatus")},n.checkAndUpdateSingleNftOwnershipStatus=async function(e){await(0,v.submitRequestToBackground)("checkAndUpdateSingleNftOwnershipStatus",[e,!1])},n.checkHardwareStatus=function(e,t){return a.default.debug("background.checkHardwareStatus",e,t),async n=>{n(ee());let a=!1;try{a=await(0,v.submitRequestToBackground)("checkHardwareStatus",[e,t])}catch(e){throw(0,y.logErrorWithMessage)(e),n(re(e)),e}finally{n(ne())}return await ce(n),a}},n.clearAccountDetails=function(){return{type:C.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:C.CLEAR_PENDING_TOKENS}},n.clearSmartTransactionFees=function(){(0,v.submitRequestToBackground)("clearSmartTransactionFees")},n.clearSwapsQuotes=function(){return async e=>{await(0,v.submitRequestToBackground)("clearSwapsQuotes"),await ce(e)}},n.clearSwitchedNetworkDetails=function(){return async e=>{await(0,v.submitRequestToBackground)("clearSwitchedNetworkDetails",[]),await ce(e)}},n.closeCurrentNotificationWindow=J,n.closeNotificationPopup=fe,n.closeWelcomeScreen=function(){return{type:C.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=oe,n.completedTx=U,n.connectHardware=function(e,t,n,r){return a.default.debug("background.connectHardware",e,t,n),async(a,o)=>{const{ledgerTransportType:i}=o().metamask;let c;a(ee(`Looking for your ${(0,s.capitalize)(e)}...`));try{if(e===f.HardwareDeviceNames.ledger&&i===f.LedgerTransportTypes.webhid){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:f.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(f.LEDGER_USB_VENDOR_ID))))throw new Error(r("ledgerWebHIDNotConnectedErrorMessage"))}c=await(0,v.submitRequestToBackground)("connectHardware",[e,t,n])}catch(t){(0,y.logErrorWithMessage)(t);const n=(0,y.getErrorMessage)(t);throw e===f.HardwareDeviceNames.ledger&&i===f.LedgerTransportTypes.webhid&&(0,y.isErrorWithMessage)(t)&&n.match("Failed to open the device")?(a(re(r("ledgerDeviceOpenFailureMessage"))),new Error(r("ledgerDeviceOpenFailureMessage"))):(e!==f.HardwareDeviceNames.qr&&a(re(t)),t)}finally{a(ne())}return await ce(a),c}},n.createCancelTransaction=function(e,t,n={}){let r;return a.default.debug("background.createCancelTransaction"),a=>{const s=(0,v.generateActionId)();return new Promise(((o,i)=>{(0,v.callBackgroundMethod)("createCancelTransaction",[e,t,{...n,actionId:s}],((t,n)=>{var s;if(t)return null!=t&&null!==(s=t.message)&&void 0!==s&&s.includes("Previous transaction is already confirmed")&&a(Z({name:"TRANSACTION_ALREADY_CONFIRMED",originalTransactionId:e})),a(re(t)),void i(t);if(n){const e=(0,g.getCurrentNetworkTransactions)({metamask:n}),{id:t}=e[e.length-1];r=t,o()}}))})).then((()=>ce(a))).then((()=>r))}},n.createEventFragment=function(e){const t=(0,v.generateActionId)();return(0,v.submitRequestToBackground)("createEventFragment",[{...e,actionId:t}])},n.createMetaMetricsDataDeletionTask=async function(){return await(0,v.submitRequestToBackground)("createMetaMetricsDataDeletionTask")},n.createNewVault=D,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(ee());try{await D(e);return await B(e)}catch(e){throw t(re(e)),(0,y.isErrorWithMessage)(e)?new Error((0,y.getErrorMessage)(e)):e}finally{t(ne())}}},n.createNewVaultAndRestore=function(e,n){return r=>{r(ee()),a.default.debug("background.createNewVaultAndRestore");const s=Array.from(t.from(n,"utf8").values());return new Promise(((t,n)=>{(0,v.callBackgroundMethod)("createNewVaultAndRestore",[e,s],(e=>{e?n(e):t()}))})).then((()=>r(q()))).then((()=>{r($()),r(ne())})).catch((e=>(r(re(e)),r(ne()),Promise.reject(e))))}},n.createOnChainTriggers=function(){return async()=>{try{await(0,v.submitRequestToBackground)("createOnChainTriggers")}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.createRetryTransaction=function(e,t){let n;return a=>new Promise(((r,s)=>{const o=(0,v.generateActionId)();(0,v.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{actionId:o}],((e,t)=>{if(e)return a(re(e)),void s(e);if(t){const e=(0,g.getCurrentNetworkTransactions)(t);n=e[e.length-1],r()}}))})).then((()=>ce(a))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n={}){let r;return a.default.debug("background.createSpeedUpTransaction"),a=>{const s=(0,v.generateActionId)();return new Promise(((o,i)=>{(0,v.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{...n,actionId:s}],((e,t)=>{if(e)return a(re(e)),void i(e);if(t){const e=(0,g.getCurrentNetworkTransactions)(t);r=e[e.length-1],o()}}))})).then((()=>ce(a))).then((()=>r))}},n.createTransactionEventFragment=function(e){const t=(0,v.generateActionId)();return(0,v.submitRequestToBackground)("createTransactionEventFragment",[{transactionId:e,actionId:t}])},n.currencyRateStartPolling=async function(e){const t=await(0,v.submitRequestToBackground)("currencyRateStartPolling",[{nativeCurrencies:e}]);return await pe(t),t},n.currencyRateStopPollingByPollingToken=async function(e){await(0,v.submitRequestToBackground)("currencyRateStopPollingByPollingToken",[e]),await Ee(e)},n.decodeTransactionData=async function({transactionData:e,contractAddress:t,chainId:n}){return await(0,v.submitRequestToBackground)("decodeTransactionData",[{transactionData:e,contractAddress:t,chainId:n}])},n.decryptMsg=function(e){return a.default.debug("action - decryptMsg"),async t=>{t(ee()),a.default.debug("actions calling background.decryptMessage");try{await(0,v.submitRequestToBackground)("decryptMessage",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),t(re(e)),e}finally{t(ne())}return await ce(t),t(U(e.metamaskId)),t(J()),e}},n.decryptMsgInline=function(e){return a.default.debug("action - decryptMsgInline"),async t=>{a.default.debug("actions calling background.decryptMessageInline");try{await(0,v.submitRequestToBackground)("decryptMessageInline",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),t(re(e)),e}return(await ce(t)).unapprovedDecryptMsgs[e.metamaskId]}},n.deleteAccountSyncingDataFromUserStorage=function(){return async()=>{try{return await(0,v.submitRequestToBackground)("deleteAccountSyncingDataFromUserStorage",["accounts"])}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.deleteExpiredNotifications=function(){return async(e,t)=>{const n=t(),a=(0,g.getNotifications)(n).filter((e=>{const t=new Date(Date.now()-N.NOTIFICATIONS_EXPIRATION_DELAY);return Boolean(e.readDate&&new Date(e.readDate)<t)})).map((({id:e})=>e));a.length&&(await(0,v.submitRequestToBackground)("dismissNotifications",[a]),await ce(e))}},n.deleteInterface=function(e){return async t=>{await(0,v.submitRequestToBackground)("deleteInterface",[e]),await ce(t)}},n.deleteOnChainTriggersByAccount=function(e){return async()=>{try{await(0,v.submitRequestToBackground)("deleteOnChainTriggersByAccount",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.detectNfts=function(){return async e=>{e(te()),a.default.debug("background.detectNfts");try{await(0,v.submitRequestToBackground)("detectNfts")}finally{e(ae())}await ce(e)}},n.detectTokens=function(){return async e=>{e(ee()),a.default.debug("background.detectTokens"),await(0,v.submitRequestToBackground)("detectTokens"),e(ne()),await ce(e)}},n.disableMetamaskNotifications=function(){return async()=>{try{await(0,v.submitRequestToBackground)("disableMetamaskNotifications")}catch(e){throw a.default.error(e),e}}},n.disableProfileSyncing=function(){return async()=>{try{await(0,v.submitRequestToBackground)("disableProfileSyncing")}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.disableSnap=function(e){return async t=>{await(0,v.submitRequestToBackground)("disableSnap",[e]),await ce(t)}},n.disconnectOriginFromSnap=function(e,t){return async n=>{await(0,v.submitRequestToBackground)("disconnectOriginFromSnap",[e,t]),await ce(n)}},n.dismissNotifications=function(e){return async t=>{await(0,v.submitRequestToBackground)("dismissNotifications",[e]),await ce(t)}},n.dismissSmartTransactionsErrorMessage=function(){return{type:C.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=re,n.enableMetamaskNotifications=function(){return async()=>{try{await(0,v.submitRequestToBackground)("enableMetamaskNotifications")}catch(e){throw a.default.error(e),e}}},n.enableProfileSyncing=function(){return async()=>{try{await(0,v.submitRequestToBackground)("enableProfileSyncing")}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.enableSnap=function(e){return async t=>{await(0,v.submitRequestToBackground)("enableSnap",[e]),await ce(t)}},n.encryptionPublicKeyMsg=function(e){return a.default.debug("action - encryptionPublicKeyMsg"),async t=>{t(ee()),a.default.debug("actions calling background.encryptionPublicKey");try{await(0,v.submitRequestToBackground)("encryptionPublicKey",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),t(re(e)),e}finally{t(ne())}return await ce(t),t(U(e.metamaskId)),t(J()),e}},n.endBackgroundTrace=async function(e){const t=e.timestamp||performance.timeOrigin+performance.now();await(0,v.submitRequestToBackground)("endTrace",[{...e,timestamp:t}])},n.estimateGas=function(e){return(0,v.submitRequestToBackground)("estimateGas",[e])},n.estimateGasFee=function(e){return(0,v.submitRequestToBackground)("estimateGasFee",[e])},n.exportAccount=function(e,t,n,r){return function(s){return s(ee()),a.default.debug("background.verifyPassword"),new Promise(((o,i)=>{(0,v.callBackgroundMethod)("verifyPassword",[e],(function(c){if(c)return a.default.error("Error in verifying password."),s(ne()),s(re("Incorrect Password.")),void i(c);a.default.debug("background.exportAccount"),(0,v.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(s(ne()),e)return(0,y.logErrorWithMessage)(e),s(re("Had a problem exporting the account.")),void i(e);n(t),r(!0),o(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return a.default.debug("background.verifyPassword"),new Promise(((r,s)=>{(0,v.callBackgroundMethod)("verifyPassword",[e],(function(o){if(o)return a.default.error("Error in submitting password."),void s(o);a.default.debug("background.exportAccounts");const i=t.map((t=>new Promise(((a,r)=>(0,v.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(e)return(0,y.logErrorWithMessage)(e),n(re("Had a problem exporting the account.")),void r(e);a(t)}))))));r(Promise.all(i))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[a,r]=await(0,v.submitRequestToBackground)("fetchAndSetQuotes",[e,t]);return await ce(n),[a,r]}},n.fetchAndUpdateMetamaskNotifications=function(e){return async()=>{try{return await(0,v.submitRequestToBackground)("fetchAndUpdateMetamaskNotifications",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.fetchSmartTransactionFees=function(e,t){return async n=>{t&&(t.value="0x0");try{const a=await await(0,v.submitRequestToBackground)("fetchSmartTransactionFees",[e,t]);return n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:null}),a}catch(e){if((0,y.logErrorWithMessage)(e),(0,y.isErrorWithMessage)(e)){const t=(0,y.getErrorMessage)(e);if(t.startsWith("Fetch error:")){const e=(0,h.parseSmartTransactionsError)(t);n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,v.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(e){(0,y.logErrorWithMessage)(e)}}},n.finalizeEventFragment=function(e,t){return(0,v.submitRequestToBackground)("finalizeEventFragment",[e,t])},n.forceUpdateMetamaskState=ce,n.forgetDevice=function(e){return a.default.debug("background.forgetDevice",e),async t=>{t(ee());try{await(0,v.submitRequestToBackground)("forgetDevice",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),t(re(e)),e}finally{t(ne())}await ce(t)}},n.gasFeeStartPollingByNetworkClientId=async function(e){const t=await(0,v.submitRequestToBackground)("gasFeeStartPollingByNetworkClientId",[e]);return await pe(t),t},n.gasFeeStopPollingByPollingToken=async function(e){await(0,v.submitRequestToBackground)("gasFeeStopPollingByPollingToken",[e]),await Ee(e)},n.getBalancesInSingleCall=async function(e,t,n){return await(0,v.submitRequestToBackground)("getBalancesInSingleCall",[e,t,n])},n.getContractMethodData=function(e=""){return async(t,n)=>{const r=(0,d.addHexPrefix)(e).slice(0,10);if(r.length<10)return{};const{knownMethodData:s,use4ByteResolution:o}=n().metamask;if(null!=s&&s[r]&&0!==Object.keys(s[r]).length)return s[r];a.default.debug("loadingMethodData");const{name:i,params:c}=await(0,w.getMethodDataAsync)(r,o);return(0,v.callBackgroundMethod)("addKnownMethodData",[r,{name:i,params:c}],(e=>{e&&t(re(e))})),{name:i,params:c}}},n.getCurrentNetworkEIP1559Compatibility=async function(){let e;try{e=await(0,v.submitRequestToBackground)("getCurrentNetworkEIP1559Compatibility")}catch(e){console.error(e)}return e},n.getDeviceNameForMetric=function(e,t){return a.default.debug("background.getDeviceNameForMetric",e,t),async n=>{let a;n(ee());try{a=await(0,v.submitRequestToBackground)("getDeviceNameForMetric",[e,t])}catch(e){throw(0,y.logErrorWithMessage)(e),n(re(e)),e}finally{n(ne())}return await ce(n),a}},n.getGasFeeTimeEstimate=function(e,t){return(0,v.submitRequestToBackground)("getGasFeeTimeEstimate",[e,t])},n.getLastInteractedConfirmationInfo=async function(){return await(0,v.submitRequestToBackground)("getLastInteractedConfirmationInfo")},n.getLayer1GasFee=function({chainId:e,networkClientId:t,transactionParams:n}){return async()=>await(0,v.submitRequestToBackground)("getLayer1GasFee",[{chainId:e,networkClientId:t,transactionParams:n}])},n.getNFTContractInfo=async function(e,t){return await(0,v.submitRequestToBackground)("getNFTContractInfo",[e,t])},n.getNetworkConfigurationByNetworkClientId=async function(e){let t;try{t=await(0,v.submitRequestToBackground)("getNetworkConfigurationByNetworkClientId",[e])}catch(e){console.error(e)}return t},n.getNextAvailableAccountName=async function(e){return await(0,v.submitRequestToBackground)("getNextAvailableAccountName",[e])},n.getNextNonce=function(){return async(e,t)=>{const{address:n}=(0,g.getSelectedInternalAccount)(t()),a=(0,g.getSelectedNetworkClientId)(t());let r;try{r=await(0,v.submitRequestToBackground)("getNextNonce",[n,a])}catch(t){throw e(re(t)),t}return e(ge(r)),r}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(Te(await(0,v.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},n.getPhishingResult=async function(e){return await(0,v.submitRequestToBackground)("getPhishingResult",[e])},n.getRequestAccountTabIds=function(){return async e=>{e(me(await(0,v.submitRequestToBackground)("getRequestAccountTabIds")))}},n.getRpcMethodPreferences=function(){return async e=>{e(ee()),await(0,v.submitRequestToBackground)("getRpcMethodPreferences",[]),e(ne())}},n.getSeedPhrase=B,n.getSnapAccountsById=async function(e){return await(0,v.submitRequestToBackground)("getAccountsBySnapId",[e])},n.getTokenStandardAndDetails=async function(e,t,n){return await(0,v.submitRequestToBackground)("getTokenStandardAndDetails",[e,t,n])},n.getTokenSymbol=async function(e){return await(0,v.submitRequestToBackground)("getTokenSymbol",[e])},n.getTransactions=async function(e={}){return await(0,v.submitRequestToBackground)("getTransactions",[e])},n.goHome=b,n.grantPermittedChain=async function(e,t){return await(0,v.submitRequestToBackground)("grantPermissionsIncremental",[{subject:{origin:e},approvedPermissions:{[O.EndowmentTypes.permittedChains]:{caveats:[{type:O.CaveatTypes.restrictNetworkSwitching,value:[t]}]}}}])},n.grantPermittedChains=async function(e,t){return await(0,v.submitRequestToBackground)("grantPermissions",[{subject:{origin:e},approvedPermissions:{[O.EndowmentTypes.permittedChains]:{caveats:[{type:O.CaveatTypes.restrictNetworkSwitching,value:t}]}}}])},n.handleSnapRequest=W,n.hideAccountBanner=function(){return(0,v.submitRequestToBackground)("setShowAccountBanner",[!1])},n.hideAlert=function(){return{type:C.ALERT_CLOSE}},n.hideBetaHeader=function(){return(0,v.submitRequestToBackground)("setShowBetaHeader",[!1])},n.hideDeprecatedNetworkModal=function(){return{type:C.DEPRECATED_NETWORK_POPOVER_CLOSE}},n.hideImportNftsModal=function(){return{type:C.IMPORT_NFTS_MODAL_CLOSE}},n.hideImportTokensModal=function(){return{type:C.IMPORT_TOKENS_POPOVER_CLOSE}},n.hideIpfsModal=function(){return{type:C.SHOW_IPFS_MODAL_CLOSE}},n.hideKeyringRemovalResultModal=function(){return{type:C.HIDE_KEYRING_SNAP_REMOVAL_RESULT}},n.hideLoadingIndication=ne,n.hideModal=function(){return{type:C.MODAL_CLOSE}},n.hideNetworkBanner=function(){return(0,v.submitRequestToBackground)("setShowNetworkBanner",[!1])},n.hideNetworkDropdown=function(){return{type:C.NETWORK_DROPDOWN_CLOSE}},n.hideNftStillFetchingIndication=ae,n.hidePermissionsTour=function(){return(0,v.submitRequestToBackground)("setShowPermissionsTour",[!1])},n.hidePermittedNetworkToast=function(){return{type:C.SHOW_PERMITTED_NETWORK_TOAST_CLOSE}},n.hideTestNetMessage=function(){return(0,v.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},n.hideWarning=function(){return{type:C.HIDE_WARNING}},n.ignoreTokens=function({tokensToIgnore:e,dontShowLoadingIndicator:t=!1}){const n=Array.isArray(e)?e:[e];return async e=>{t||e(ee());try{await(0,v.submitRequestToBackground)("ignoreTokens",[n])}catch(t){(0,y.logErrorWithMessage)(t),e(re(t))}finally{await ce(e),e(ne())}}},n.importNewAccount=function(e,t,n){return async r=>{r(ee(n));try{a.default.debug("background.importAccountWithStrategy"),await(0,v.submitRequestToBackground)("importAccountWithStrategy",[e,t])}finally{r(ne())}return await ce(r)}},n.isNftOwner=async function(e,t,n){return await(0,v.submitRequestToBackground)("isNftOwner",[e,t,n])},n.lockMetamask=function(){return a.default.debug("background.setLocked"),e=>(e(ee()),V().then((()=>ce(e))).catch((t=>(e(re((0,y.getErrorMessage)(t))),Promise.reject(t)))).then((()=>{e(ne()),e({type:C.LOCK_METAMASK})})).catch((()=>{e(ne()),e({type:C.LOCK_METAMASK})})))},n.markMetamaskNotificationsAsRead=function(e){return async()=>{try{await(0,v.submitRequestToBackground)("markMetamaskNotificationsAsRead",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.markNotificationsAsRead=function(e){return async t=>{await(0,v.submitRequestToBackground)("markNotificationsAsRead",[e]),await ce(t)}},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>{(0,v.callBackgroundMethod)("markPasswordForgotten",[],(n=>{n?t(n):e()}))}))}finally{e(ne()),await ce(e)}}},n.multichainUpdateBalance=async function(e){return await(0,v.submitRequestToBackground)("multichainUpdateBalance",[e])},n.multichainUpdateBalances=async function(){return await(0,v.submitRequestToBackground)("multichainUpdateBalances",[])},n.performSignIn=function(){return async()=>{try{await(0,v.submitRequestToBackground)("performSignIn")}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred during sign-in.";throw(0,y.logErrorWithMessage)(t),e}}},n.performSignOut=function(){return async()=>{try{await(0,v.submitRequestToBackground)("performSignOut")}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.qrCodeDetected=function(e){return async t=>{await t({type:C.QR_CODE_DETECTED,value:e}),t((0,m.computeEstimatedGasLimit)())}},n.rejectAllMessages=function(e){return async t=>{const n=(0,o.serializeError)(o.providerErrors.userRejectedRequest());await Promise.all(e.map((async({id:e})=>await(0,v.submitRequestToBackground)("rejectPendingApproval",[e,n]))));const{pendingApprovals:a}=await ce(t);0===Object.values(a).length&&t(J())}},n.rejectPendingApproval=function(e,t){return async n=>{await(0,v.submitRequestToBackground)("rejectPendingApproval",[e,t]);const{pendingApprovals:a}=await ce(n);0===Object.values(a).length&&n(J())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,a)=>{(0,v.callBackgroundMethod)("rejectPermissionsRequest",[e],(e=>{if(e)return t(re(e)),void a(e);ce(t).then(n).catch(a)}))}))},n.removeAccount=function(e){return async t=>{t(ee());try{await new Promise(((t,n)=>{(0,v.callBackgroundMethod)("removeAccount",[e],((e,a)=>{e?n(e):t(a)}))})),await ce(t)}catch(e){throw t(re(e)),e}finally{t(ne())}a.default.info(`Account removed: ${e}`),t($())}},n.removeAndIgnoreNft=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot ignore NFT without address");if(!t)throw new Error("MetaMask - Cannot ignore NFT without tokenID");n||a(ee());try{await(0,v.submitRequestToBackground)("removeAndIgnoreNft",[e,t])}catch(e){throw(0,y.logErrorWithMessage)(e),a(re(e)),e}finally{await ce(a),a(ne())}}},n.removeFromAddressBook=function(e,t){return a.default.debug("background.removeFromAddressBook"),async n=>{await(0,v.submitRequestToBackground)("removeFromAddressBook",[e,(0,E.toChecksumHexAddress)(t)]),await ce(n)}},n.removeNetwork=function(e){return async()=>{try{await(0,v.submitRequestToBackground)("removeNetwork",[e])}catch(e){(0,y.logErrorWithMessage)(e)}}},n.removeNft=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot remove NFT without address");if(!t)throw new Error("MetaMask - Cannot remove NFT without tokenID");n||a(ee());try{await(0,v.submitRequestToBackground)("removeNft",[e,t])}catch(e){(0,y.logErrorWithMessage)(e),a(re(e))}finally{await ce(a),a(ne())}}},n.removePermissionsFor=function(e){return t=>{(0,v.callBackgroundMethod)("removePermissionsFor",[e],(e=>{e&&t(re(e))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,v.callBackgroundMethod)("removePermittedAccount",[e,t],(e=>{e?a(e):n()}))})),await ce(n)}},n.removePermittedChain=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,v.callBackgroundMethod)("removePermittedChain",[e,t],(e=>{e?a(e):n()}))})),await ce(n)}},n.removePollingTokenFromAppState=Ee,n.removeSnap=function(e){return async(t,n)=>{var a;t(ee());const r=(null===(a=(0,g.getPermissionSubjects)(n())[e])||void 0===a||null===(a=a.permissions)||void 0===a?void 0:a.snap_manageAccounts)!==undefined;try{if(r){const t=await(0,v.submitRequestToBackground)("getAccountsBySnapId",[e]);for(const e of t)await(0,v.submitRequestToBackground)("removeAccount",[e])}await(0,v.submitRequestToBackground)("removeSnap",[e]),await ce(t)}catch(e){throw t(re(e)),e}finally{t(ne())}}},n.requestAccountsAndChainPermissionsWithId=function(e){return async t=>{const n=await(0,v.submitRequestToBackground)("requestAccountsAndChainPermissionsWithId",[e]);return await ce(t),n}},n.requestAccountsPermissionWithId=function(e){return async t=>{const n=await(0,v.submitRequestToBackground)("requestAccountsPermissionWithId",[e]);return await ce(t),n}},n.requestRevealSeedWords=function(e){return async t=>{t(ee()),a.default.debug("background.verifyPassword");try{await L(e);return await B(e)}finally{t(ne())}}},n.requestUserApproval=function({origin:e,type:t,requestData:n}){return async a=>{try{await(0,v.submitRequestToBackground)("requestUserApproval",[{origin:e,type:t,requestData:n}])}catch(e){(0,y.logErrorWithMessage)(e),a(re("Had trouble requesting user approval"))}}},n.resetAccount=function(){return e=>(e(ee()),new Promise(((t,n)=>{(0,v.callBackgroundMethod)("resetAccount",[],((r,s)=>{if(e(ne()),r)return(0,y.isErrorWithMessage)(r)&&e(re(r)),void n(r);a.default.info(`Transaction history reset for ${s}`),e($()),t(s)}))})))},n.resetBackgroundSwapsState=function(){return async e=>{await(0,v.submitRequestToBackground)("resetSwapsState"),await ce(e)}},n.resetOnboarding=function(){return async e=>{try{await e(de(!1)),e(ie())}catch(e){console.error(e)}}},n.resetOnboardingAction=ie,n.resetSwapsPostFetchState=function(){return async e=>{await(0,v.submitRequestToBackground)("resetPostFetchState"),await ce(e)}},n.resetViewedNotifications=function(){return(0,v.submitRequestToBackground)("resetViewedNotifications")},n.resolvePendingApproval=function(e,t){return async n=>{await(0,v.submitRequestToBackground)("resolvePendingApproval",[e,t]);const{pendingApprovals:a}=await ce(n);0===Object.values(a).length&&n(J())}},n.restoreUserData=async function(e){try{await(0,v.submitRequestToBackground)("restoreUserData",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),e}return!0},n.revokeDynamicSnapPermissions=function(e,t){return async n=>{await(0,v.submitRequestToBackground)("revokeDynamicSnapPermissions",[e,t]),await ce(n)}},n.rollbackToPreviousProvider=function(){return async e=>{try{await(0,v.submitRequestToBackground)("rollbackToPreviousProvider")}catch(t){(0,y.logErrorWithMessage)(t),e(re("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await(0,v.submitRequestToBackground)("safeRefetchQuotes"),await ce(e)}},n.sendMultichainTransaction=async function(e,t,n){await W({snapId:e,origin:"metamask",handler:c.HandlerType.OnRpcRequest,request:{method:"startSendTransactionFlow",params:{account:t,scope:n}}})},n.setAccountDetailsAddress=function(e){return{type:C.SET_ACCOUNT_DETAILS_ADDRESS,payload:e}},n.setAccountLabel=function(e,t){return n=>(n(ee()),a.default.debug("background.setAccountLabel"),new Promise(((a,r)=>{(0,v.callBackgroundMethod)("setAccountLabel",[e,t],(s=>{if(n(ne()),s)return n(re(s)),void r(s);n({type:C.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),a(e)}))})))},n.setActiveNetwork=function(e){return async t=>{a.default.debug(`background.setActiveNetwork: ${e}`);try{await(0,v.submitRequestToBackground)("setActiveNetwork",[e])}catch(e){(0,y.logErrorWithMessage)(e),t(re("Had a problem changing networks!"))}}},n.setActiveNetworkConfigurationId=X,n.setAddSnapAccountEnabled=async function(e){try{await(0,v.submitRequestToBackground)("setAddSnapAccountEnabled",[e])}catch(e){(0,y.logErrorWithMessage)(e)}},n.setAdvancedGasFee=function(e){return t=>{t(ee()),a.default.debug("background.setAdvancedGasFee"),(0,v.callBackgroundMethod)("setAdvancedGasFee",[e],(e=>{t(ne()),e&&t(re(e))}))}},n.setAggregatedBalancePopoverShown=function(){return se("shouldShowAggregatedBalancePopover",!1)},n.setAlertEnabledness=async function(e,t){await(0,v.submitRequestToBackground)("setAlertEnabledness",[e,t])},n.setAutoLockTimeLimit=function(e){return se("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await(0,v.submitRequestToBackground)("setBackgroundSwapRouteState",[e]),await ce(t)}},n.setBitcoinSupportEnabled=async function(e){try{await(0,v.submitRequestToBackground)("setBitcoinSupportEnabled",[e])}catch(e){(0,y.logErrorWithMessage)(e)}},n.setBitcoinTestnetSupportEnabled=async function(e){try{await(0,v.submitRequestToBackground)("setBitcoinTestnetSupportEnabled",[e])}catch(e){(0,y.logErrorWithMessage)(e)}},n.setCompletedOnboarding=function(){return async e=>{e(ee());try{await(0,v.submitRequestToBackground)("completeOnboarding"),e(oe())}catch(t){throw e(re(t)),t}finally{e(ne())}}},n.setConfirmationAdvancedDetailsOpen=function(e){return se("showConfirmationAdvancedDetails",e)},n.setConfirmationExchangeRates=function(e){return{type:C.SET_CONFIRMATION_EXCHANGE_RATES,value:e}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,v.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(e=>{if((0,y.isErrorWithMessage)(e))throw new Error((0,y.getErrorMessage)(e))}))}},n.setCurrentCurrency=function(e){return async t=>{t(ee()),a.default.debug("background.setCurrentCurrency");try{await(0,v.submitRequestToBackground)("setCurrentCurrency",[e]),await ce(t)}catch(e){return(0,y.logErrorWithMessage)(e),void t(re(e))}finally{t(ne())}}},n.setCurrentExtensionPopupId=function(e){return async t=>{await(0,v.submitRequestToBackground)("setCurrentExtensionPopupId",[e]),await ce(t)}},n.setCurrentLocale=le,n.setCustomApproveTxData=function(e){return async t=>{await(0,v.submitRequestToBackground)("setCustomApproveTxData",[e]),await ce(t)}},n.setDataCollectionForMarketing=function(e){return async t=>{a.default.debug("background.setDataCollectionForMarketing"),await(0,v.submitRequestToBackground)("setDataCollectionForMarketing",[e]),t({type:C.SET_DATA_COLLECTION_FOR_MARKETING,value:e})}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await(0,v.submitRequestToBackground)("setDefaultHomeActiveTabName",[e]),await ce(t)}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(ee()),await(0,v.submitRequestToBackground)("setDismissSeedBackUpReminder",[e]),t(ne())}},n.setEditedNetwork=function(e=undefined){return{type:C.SET_EDIT_NETWORK,payload:e}},n.setFeatureAnnouncementsEnabled=function(e){return async()=>{try{await(0,v.submitRequestToBackground)("setFeatureAnnouncementsEnabled",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.setFeatureFlag=function(e,t,n){return a=>(a(ee()),new Promise(((r,s)=>{(0,v.callBackgroundMethod)("setFeatureFlag",[e,t],((e,t)=>{if(a(ne()),e)return a(re(e)),void s(e);n&&a(Z({name:n})),r(t)}))})))},n.setFeatureNotificationsEnabled=function(e){return se("featureNotificationsEnabled",e)},n.setFirstTimeFlowType=function(e){return async t=>{try{a.default.debug("background.setFirstTimeFlowType"),await(0,v.submitRequestToBackground)("setFirstTimeFlowType",[e]),t({type:C.SET_FIRST_TIME_FLOW_TYPE,value:e})}catch(e){t(re(e))}}},n.setFirstTimeUsedNetwork=function(e){return(0,v.submitRequestToBackground)("setFirstTimeUsedNetwork",[e])},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:C.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,payload:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return se("hideZeroBalanceTokens",e)},n.setIncomingTransactionsPreferences=function(e,t){return async n=>{n(ee()),a.default.debug("background.setIncomingTransactionsPreferences"),await(0,v.submitRequestToBackground)("setIncomingTransactionsPreferences",[e,t]),n(ne())}},n.setInitialGasEstimate=function(e){return async t=>{await(0,v.submitRequestToBackground)("setInitialGasEstimate",[e]),await ce(t)}},n.setIpfsGateway=function(e){return t=>{a.default.debug("background.setIpfsGateway"),(0,v.callBackgroundMethod)("setIpfsGateway",[e],(e=>{e&&t(re(e))}))}},n.setIsIpfsGatewayEnabled=function(e){return t=>{a.default.debug("background.setIsIpfsGatewayEnabled"),(0,v.callBackgroundMethod)("setIsIpfsGatewayEnabled",[e],(e=>{e&&t(re(e))}))}},n.setIsProfileSyncingEnabled=function(e){return async t=>{try{t(ee()),await(0,v.submitRequestToBackground)("setIsProfileSyncingEnabled",[e]),t(ne())}catch(e){throw(0,y.logErrorWithMessage)(e),e}finally{t(ne())}}},n.setLastActiveTime=function(){return e=>{(0,v.callBackgroundMethod)("setLastActiveTime",[],(t=>{t&&e(re(t))}))}},n.setLastInteractedConfirmationInfo=async function(e){return await(0,v.submitRequestToBackground)("setLastInteractedConfirmationInfo",[e])},n.setLastViewedUserSurvey=function(e){return async()=>{await(0,v.submitRequestToBackground)("setLastViewedUserSurvey",[e])}},n.setName=function(e){return async()=>{await(0,v.submitRequestToBackground)("setName",[e])}},n.setNetworkClientIdForDomain=function(e,t){return(0,v.submitRequestToBackground)("setNetworkClientIdForDomain",[e,t])},n.setNewNetworkAdded=function({networkConfigurationId:e,nickname:t}){return{type:C.SET_NEW_NETWORK_ADDED,payload:{networkConfigurationId:e,nickname:t}}},n.setNewNftAddedMessage=function(e){return{type:C.SET_NEW_NFT_ADDED_MESSAGE,payload:e}},n.setNewTokensImported=function(e){return{type:C.SET_NEW_TOKENS_IMPORTED,payload:e}},n.setNewTokensImportedError=function(e){return{type:C.SET_NEW_TOKENS_IMPORTED_ERROR,payload:e}},n.setNextNonce=ge,n.setOpenMetamaskTabsIDs=Te,n.setOpenSeaEnabled=function(e){return async t=>{t(ee()),a.default.debug("background.setOpenSeaEnabled");try{await(0,v.submitRequestToBackground)("setOpenSeaEnabled",[e])}finally{t(ne())}}},n.setOutdatedBrowserWarningLastShown=function(e){return async()=>{await(0,v.submitRequestToBackground)("setOutdatedBrowserWarningLastShown",[e])}},n.setParticipateInMetaMetrics=function(e){return t=>(a.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,r)=>{(0,v.callBackgroundMethod)("setParticipateInMetaMetrics",[e],((s,o)=>{if(a.default.debug(s),s)return t(re(s)),void r(s);t({type:C.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,o])}))})))},n.setPendingTokens=function(e){const{customToken:t,selectedTokens:n={},tokenAddressList:a=[]}=e,r=null!=t&&t.address&&null!=t&&t.symbol&&Boolean((null==t?void 0:t.decimals)>=0&&(null==t?void 0:t.decimals)<=36)?{...n,[t.address]:{...t,isCustom:!0}}:n;return Object.keys(r).forEach((e=>{const t=a.find((t=>(0,A.isEqualCaseInsensitive)(t,e)));r[e]={...r[e],unlisted:!t}})),{type:C.SET_PENDING_TOKENS,payload:r}},n.setPetnamesEnabled=function(e){return se("petnamesEnabled",e)},n.setPreference=se,n.setPrivacyMode=function(e){return se("privacyMode",e,!1)},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,v.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(e=>{if((0,y.isErrorWithMessage)(e))throw new Error((0,y.getErrorMessage)(e))}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{(0,v.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[e],(e=>{if((0,y.isErrorWithMessage)(e))throw new Error((0,y.getErrorMessage)(e))}))}},n.setRedesignedConfirmationsDeveloperEnabled=function(e){return se("isRedesignedConfirmationsDeveloperEnabled",e)},n.setRedesignedConfirmationsEnabled=function(e){return se("redesignedConfirmationsEnabled",e)},n.setRedesignedTransactionsEnabled=function(e){return se("redesignedTransactionsEnabled",e)},n.setRemoveNftMessage=function(e){return{type:C.SET_REMOVE_NFT_MESSAGE,payload:e}},n.setRequestAccountTabIds=me,n.setSecurityAlertsEnabled=function(e){try{(0,v.submitRequestToBackground)("setSecurityAlertsEnabled",[e])}catch(e){(0,y.logErrorWithMessage)(e)}},n.setSeedPhraseBackedUp=de,n.setSelectedAccount=function(e){return async(t,n)=>{t(ee()),a.default.debug("background.setSelectedAccount");const r=n(),s=(0,p.getUnconnectedAccountAlertEnabledness)(r),o=r.activeTab.origin,i=(0,g.getInternalAccountByAddress)(r,e),c=(0,g.getPermittedAccountsForCurrentTab)(r),u=Boolean(o)&&c.includes(i.address),l=Boolean(o)&&c.includes(e),d=u&&!l;try{await Y(i.id),await ce(t)}catch(e){return void t(re(e))}finally{t(ne())}s&&d&&(t((0,T.switchedToUnconnectedAccount)()),await he(o))}},n.setSelectedInternalAccount=function(e){return async t=>{t(ee()),a.default.debug("background.setSelectedInternalAccount");try{await Y(e)}catch(e){return void t(re(e))}finally{t(ne())}}},n.setSelectedNetworkConfigurationId=function(e){return{type:C.SET_SELECTED_NETWORK_CONFIGURATION_ID,payload:e}},n.setSelectedQuoteAggId=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSelectedQuoteAggId",[e]),await ce(t)}},n.setServiceWorkerKeepAlivePreference=function(e){return async t=>{t(ee()),a.default.debug("background.setServiceWorkerKeepAlivePreference");try{await(0,v.submitRequestToBackground)("setServiceWorkerKeepAlivePreference",[e])}catch(e){t(re(e))}finally{t(ne())}}},n.setShowExtensionInFullSizeView=function(e){return se("showExtensionInFullSizeView",e)},n.setShowFiatConversionOnTestnetsPreference=function(e){return se("showFiatInTestnets",e)},n.setShowMultiRpcModal=function(e){return se("showMultiRpcModal",e)},n.setShowNativeTokenAsMainBalancePreference=function(e){return se("showNativeTokenAsMainBalance",e)},n.setShowTestNetworks=function(e){return se("showTestNetworks",e)},n.setSmartTransactionsPreferenceEnabled=function(e){return async(t,n)=>{const a=(0,_.getSmartTransactionsOptInStatusInternal)(n());Se({category:S.MetaMetricsEventCategory.Settings,event:S.MetaMetricsEventName.SettingsUpdated,properties:{stx_opt_in:e,prev_stx_opt_in:a}}),await t(se("smartTransactionsOptInStatus",e)),await ce(t)}},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{try{await(0,v.submitRequestToBackground)("setStatusRefreshInterval",[e])}catch(e){(0,y.logErrorWithMessage)(e)}}},n.setSnapsAddSnapAccountModalDismissed=async function(){await(0,v.submitRequestToBackground)("setSnapsAddSnapAccountModalDismissed",[!0])},n.setSnapsInstallPrivacyWarningShownStatus=function(e){return async()=>{await(0,v.submitRequestToBackground)("setSnapsInstallPrivacyWarningShownStatus",[e])}},n.setSwapsErrorKey=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsErrorKey",[e]),await ce(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsFeatureFlags",[e]),await ce(t)}},n.setSwapsLiveness=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsLiveness",[e]),await ce(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[e]),await ce(t)}},n.setSwapsTokens=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsTokens",[e]),await ce(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await ce(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsTxGasPrice",[e]),await ce(t)}},n.setSwitchedNetworkDetails=Q,n.setTermsOfUseLastAgreed=function(e){return async()=>{await(0,v.submitRequestToBackground)("setTermsOfUseLastAgreed",[e])}},n.setTheme=function(e){return async t=>{t(ee()),a.default.debug("background.setTheme");try{await(0,v.submitRequestToBackground)("setTheme",[e])}finally{t(ne())}}},n.setTokenNetworkFilter=function(e){return se("tokenNetworkFilter",e,!1)},n.setTokenSortConfig=function(e){return se("tokenSortConfig",e,!1)},n.setUnconnectedAccountAlertShown=he,n.setUse4ByteResolution=function(e){return async t=>{t(ee()),a.default.debug("background.setUse4ByteResolution");try{await(0,v.submitRequestToBackground)("setUse4ByteResolution",[e])}catch(e){t(re(e))}finally{t(ne())}}},n.setUseAddressBarEnsResolution=function(e){return t=>{a.default.debug("background.setUseAddressBarEnsResolution"),(0,v.callBackgroundMethod)("setUseAddressBarEnsResolution",[e],(e=>{e&&t(re(e))}))}},n.setUseBlockie=function(e){return t=>{t(ee()),a.default.debug("background.setUseBlockie"),(0,v.callBackgroundMethod)("setUseBlockie",[e],(e=>{t(ne()),e&&t(re(e))}))}},n.setUseCurrencyRateCheck=function(e){return t=>{t(ee()),a.default.debug("background.setUseCurrencyRateCheck"),(0,v.callBackgroundMethod)("setUseCurrencyRateCheck",[e],(e=>{t(ne()),e&&t(re(e))}))}},n.setUseExternalNameSources=function(e){try{(0,v.submitRequestToBackground)("setUseExternalNameSources",[e])}catch(e){(0,y.logErrorWithMessage)(e)}},n.setUseMultiAccountBalanceChecker=function(e){return t=>{t(ee()),a.default.debug("background.setUseMultiAccountBalanceChecker"),(0,v.callBackgroundMethod)("setUseMultiAccountBalanceChecker",[e],(e=>{t(ne()),e&&t(re(e))}))}},n.setUseNftDetection=function(e){return async t=>{t(ee()),a.default.debug("background.setUseNftDetection");try{await(0,v.submitRequestToBackground)("setUseNftDetection",[e])}finally{t(ne())}}},n.setUseNonceField=function(e){return async t=>{t(ee()),a.default.debug("background.setUseNonceField");try{await(0,v.submitRequestToBackground)("setUseNonceField",[e])}catch(e){t(re(e))}t(ne())}},n.setUsePhishDetect=function(e){return t=>{t(ee()),a.default.debug("background.setUsePhishDetect"),(0,v.callBackgroundMethod)("setUsePhishDetect",[e],(e=>{t(ne()),e&&t(re(e))}))}},n.setUseRequestQueue=function(e){try{(0,v.submitRequestToBackground)("setUseRequestQueue",[e])}catch(e){(0,y.logErrorWithMessage)(e)}},n.setUseSafeChainsListValidation=function(e){return t=>{t(ee()),a.default.debug("background.setUseSafeChainsListValidation"),(0,v.callBackgroundMethod)("setUseSafeChainsListValidation",[e],(e=>{t(ne()),e&&t(re(e))}))}},n.setUseTokenDetection=function(e){return t=>{t(ee()),a.default.debug("background.setUseTokenDetection"),(0,v.callBackgroundMethod)("setUseTokenDetection",[e],(e=>{t(ne()),e&&t(re(e))}))}},n.setUseTransactionSimulations=function(e){try{(0,v.submitRequestToBackground)("setUseTransactionSimulations",[e])}catch(e){(0,y.logErrorWithMessage)(e)}},n.setWatchEthereumAccountEnabled=async function(e){try{await(0,v.submitRequestToBackground)("setWatchEthereumAccountEnabled",[e])}catch(e){(0,y.logErrorWithMessage)(e)}},n.setWeb3ShimUsageAlertDismissed=async function(e){await(0,v.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[e])},n.showAccountsPage=$,n.showAlert=function(e){return{type:C.ALERT_OPEN,payload:e}},n.showConfTxPage=z,n.showConfirmTurnOffProfileSyncing=function(){return e=>{e(Z({name:"CONFIRM_TURN_OFF_PROFILE_SYNCING"}))}},n.showConfirmTurnOnMetamaskNotifications=function(){return e=>{e(Z({name:"TURN_ON_METAMASK_NOTIFICATIONS"}))}},n.showDeprecatedNetworkModal=function(){return{type:C.DEPRECATED_NETWORK_POPOVER_OPEN}},n.showImportNftsModal=function(e){return{type:C.IMPORT_NFTS_MODAL_OPEN,payload:e}},n.showImportTokensModal=function(){return{type:C.IMPORT_TOKENS_POPOVER_OPEN}},n.showIpfsModal=function(){return{type:C.SHOW_IPFS_MODAL_OPEN}},n.showKeyringSnapRemovalModal=function(e){return{type:C.SHOW_KEYRING_SNAP_REMOVAL_RESULT,payload:e}},n.showLoadingIndication=ee,n.showModal=Z,n.showNetworkDropdown=function(){return{type:C.NETWORK_DROPDOWN_OPEN}},n.showNftStillFetchingIndication=te,n.showPermittedNetworkToast=function(){return{type:C.SHOW_PERMITTED_NETWORK_TOAST_OPEN}},n.showPrivateKey=function(e){return{type:C.SHOW_PRIVATE_KEY,payload:e}},n.showQrScanner=function(){return e=>{e(Z({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:C.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const a=await Ae(e,t.fees);try{return(await(0,v.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:a,signedCanceledTransactions:[],txParams:e}])).uuid}catch(e){if((0,y.logErrorWithMessage)(e),(0,y.isErrorWithMessage)(e)){const t=(0,y.getErrorMessage)(e);if(t.startsWith("Fetch error:")){const e=(0,h.parseSmartTransactionsError)(t);n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.stopPollingForQuotes=function(){return async e=>{await(0,v.submitRequestToBackground)("stopPollingForQuotes"),await ce(e)}},n.submitPassword=P,n.submitQRHardwareCryptoAccount=async function(e){await(0,v.submitRequestToBackground)("submitQRHardwareCryptoAccount",[e])},n.submitQRHardwareCryptoHDKey=async function(e){await(0,v.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[e])},n.submitQRHardwareSignature=async function(e,t){await(0,v.submitRequestToBackground)("submitQRHardwareSignature",[e,t])},n.syncInternalAccountsWithUserStorage=function(){return async()=>{try{return await(0,v.submitRequestToBackground)("syncInternalAccountsWithUserStorage")}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.throwTestBackgroundError=async function(e){await(0,v.submitRequestToBackground)("throwTestError",[e])},n.toggleAccountMenu=function(){return{type:C.TOGGLE_ACCOUNT_MENU}},n.toggleExternalServices=function(e){return t=>{a.default.debug("background.toggleExternalServices"),(0,v.callBackgroundMethod)("toggleExternalServices",[e],(e=>{e&&t(re(e))}))}},n.toggleNetworkMenu=function(e){return{type:C.TOGGLE_NETWORK_MENU,payload:e}},n.trackInsightSnapUsage=function(e){return async()=>{await(0,v.submitRequestToBackground)("trackInsightSnapView",[e])}},n.trackMetaMetricsEvent=Se,n.trackMetaMetricsPage=function(e,t){return(0,v.submitRequestToBackground)("trackMetaMetricsPage",[{...e,actionId:(0,v.generateActionId)()},t])},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{(0,v.callBackgroundMethod)("tryReverseResolveAddress",[e],(e=>{e&&(0,y.logErrorWithMessage)(e),t()}))}))},n.tryUnlockMetamask=function(e){return t=>(t(ee()),t(H()),a.default.debug("background.submitPassword"),new Promise(((t,n)=>{(0,v.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))})).then((()=>(t(K()),ce(t)))).then((()=>{t(ne())})).catch((e=>(t(x((0,y.getErrorMessage)(e))),t(ne()),Promise.reject(e)))))},n.unMarkPasswordForgotten=q,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(ee());try{await P(e);const n=await B(e);return await ce(t),n}catch(e){throw t(re(e)),(0,y.isErrorWithMessage)(e)?new Error((0,y.getErrorMessage)(e)):e}finally{t(ne())}}},n.unlockFailed=x,n.unlockHardwareWalletAccounts=function(e,t,n,r){return a.default.debug("background.unlockHardwareWalletAccount",e,t,n,r),async a=>{a(ee());for(const s of e)try{await(0,v.submitRequestToBackground)("unlockHardwareWalletAccount",[s,t,n,r])}catch(e){throw(0,y.logErrorWithMessage)(e),a(re(e)),a(ne()),e}return a(ne()),undefined}},n.unlockInProgress=H,n.unlockSucceeded=K,n.updateAccountsList=function(e){return async()=>{await(0,v.submitRequestToBackground)("updateAccountsList",[e])}},n.updateAndApproveTx=function(e,t,n){return(a,r)=>{!t&&a(ee(n));const s=()=>Boolean(r().send.stage!==m.SEND_STAGES.INACTIVE);return new Promise(((t,n)=>{const r=(0,v.generateActionId)();(0,v.callBackgroundMethod)("resolvePendingApproval",[String(e.id),{txMeta:e,actionId:r},{waitForResult:!0}],(r=>{if(a(G(e.id,e.txParams)),s()||a((0,m.resetSendState)()),r)return a(b()),(0,y.logErrorWithMessage)(r),void n(r);t(e)}))})).then((()=>ce(a))).then((()=>(s()||a((0,m.resetSendState)()),a(U(e.id)),a(ne()),a(F("")),a(J()),e))).catch((e=>(a(ne()),Promise.reject(e))))}},n.updateCurrentLocale=ue,n.updateCustomNonce=F,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async a=>{await Promise.all([(0,v.submitRequestToBackground)("setSwapsTxGasLimit",[e]),(0,v.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[t]),(0,v.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[n])]),await ce(a)}},n.updateDataDeletionTaskStatus=async function(){return await(0,v.submitRequestToBackground)("updateDataDeletionTaskStatus")},n.updateEditableParams=function(e,t){return async n=>{let a;try{a=await(0,v.submitRequestToBackground)("updateEditableParams",[e,t])}catch(e){throw(0,y.logErrorWithMessage)(e),e}return await ce(n),a}},n.updateEventFragment=function(e,t){return(0,v.submitRequestToBackground)("updateEventFragment",[e,t])},n.updateHiddenAccountsList=function(e){return async()=>{await(0,v.submitRequestToBackground)("updateHiddenAccountsList",[e])}},n.updateInterfaceState=function(e,t){return async n=>{await(0,v.submitRequestToBackground)("updateInterfaceState",[e,t]),await ce(n)}},n.updateMetamaskState=j,n.updateNetwork=function(e,t={}){return async n=>{a.default.debug("background.updateNetwork",e);try{return await(0,v.submitRequestToBackground)("updateNetwork",[e.chainId,e,t])}catch(e){(0,y.logErrorWithMessage)(e),n(re("Had a problem updading networks!"))}return undefined}},n.updateNetworksList=function(e){return async()=>{await(0,v.submitRequestToBackground)("updateNetworksList",[e])}},n.updateNftDropDownState=function(e){return async t=>{await(0,v.submitRequestToBackground)("updateNftDropDownState",[e]),await ce(t)}},n.updateOnChainTriggersByAccount=function(e){return async()=>{try{await(0,v.submitRequestToBackground)("updateOnChainTriggersByAccount",[e])}catch(e){throw(0,y.logErrorWithMessage)(e),e}}},n.updatePreviousGasParams=function(e,t){return async()=>{let n;try{n=await(0,v.submitRequestToBackground)("updatePreviousGasParams",[e,t])}catch(e){throw(0,y.logErrorWithMessage)(e),e}return n}},n.updateProposedNames=function(e){return async()=>await(0,v.submitRequestToBackground)("updateProposedNames",[e])},n.updateSmartTransaction=function(e,t){return async n=>{try{await(0,v.submitRequestToBackground)("updateSmartTransaction",[{uuid:e,...t}])}catch(e){if((0,y.logErrorWithMessage)(e),(0,y.isErrorWithMessage)(e)){const t=(0,y.getErrorMessage)(e);if(t.startsWith("Fetch error:")){const e=(0,h.parseSmartTransactionsError)(t);n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.updateSnap=function(e,t){return async(n,a)=>{await(0,v.submitRequestToBackground)("updateSnap",[e,t]),await ce(n);const r=a(),s=(0,g.getFirstSnapInstallOrUpdateRequest)(r);return null==s?void 0:s.metadata.id}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsUserFeeLevel",[e]),await ce(t)}},n.updateTokenType=async function(e){try{return await(0,v.submitRequestToBackground)("updateTokenType",[e])}catch(e){(0,y.logErrorWithMessage)(e)}return undefined},n.updateTransaction=function(e,t){return async n=>{!t&&n(ee());try{await(0,v.submitRequestToBackground)("updateTransaction",[e])}catch(t){throw n(G(e.id,e.txParams)),n(ne()),n(b()),(0,y.logErrorWithMessage)(t),t}try{return n(G(e.id,e.txParams)),await ce(n),n(z({id:e.id})),e}finally{n(ne())}}},n.updateTransactionGasFees=function(e,t){return async()=>{let n;try{n=await(0,v.submitRequestToBackground)("updateTransactionGasFees",[e,t])}catch(e){throw(0,y.logErrorWithMessage)(e),e}return n}},n.updateTransactionParams=G,n.updateTransactionSendFlowHistory=function(e,t,n){return async()=>{let a;try{a=await(0,v.submitRequestToBackground)("updateTransactionSendFlowHistory",[e,t,n])}catch(e){throw(0,y.logErrorWithMessage)(e),e}return a}},n.updateViewedNotifications=function(e){return(0,v.submitRequestToBackground)("updateViewedNotifications",[e])},n.verifyPassword=L;var a=M(e("loglevel")),r=e("@sentry/browser"),s=e("lodash"),o=e("@metamask/rpc-errors"),i=e("@metamask/keyring-controller"),c=e("@metamask/snaps-utils"),u=M(e("../../shared/lib/switch-direction")),l=e("../../shared/constants/app"),d=e("../../app/scripts/lib/util"),g=e("../selectors"),m=e("../ducks/send"),T=e("../ducks/alerts/unconnected-account"),p=e("../ducks/metamask/metamask"),E=e("../../shared/modules/hexstring-utils"),f=e("../../shared/constants/hardware-wallets"),S=e("../../shared/constants/metametrics"),h=e("../pages/swaps/swaps.util"),A=e("../../shared/modules/string-utils"),_=e("../../shared/modules/selectors"),N=e("../helpers/constants/notifications"),k=e("../../shared/modules/i18n"),I=e("../../shared/modules/conversion.utils"),y=e("../../shared/modules/error"),w=e("../../shared/lib/four-byte"),O=e("../../shared/constants/permissions"),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("./actionConstants")),v=e("./background-connection");function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function M(e){return e&&e.__esModule?e:{default:e}}function b(){return{type:C.GO_HOME}}function P(e){return new Promise(((t,n)=>{(0,v.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))}))}function D(e){return new Promise(((t,n)=>{(0,v.callBackgroundMethod)("createNewVaultAndKeychain",[e],(e=>{e?n(e):t(!0)}))}))}function L(e){return new Promise(((t,n)=>{(0,v.callBackgroundMethod)("verifyPassword",[e],(e=>{e?n(e):t(!0)}))}))}async function B(e){const n=await(0,v.submitRequestToBackground)("getSeedPhrase",[e]);return t.from(n).toString("utf8")}function F(e){return{type:C.UPDATE_CUSTOM_NONCE,value:e}}function U(e){return t=>{t({type:C.COMPLETED_TX,value:{id:e}})}}function G(e,t){return{type:C.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}async function W(e){return(0,v.submitRequestToBackground)("handleSnapRequest",[e])}function q(){return e=>new Promise((e=>{(0,v.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{e()}))})).then((()=>ce(e)))}function H(){return{type:C.UNLOCK_IN_PROGRESS}}function x(e){return{type:C.UNLOCK_FAILED,value:e}}function K(e){return{type:C.UNLOCK_SUCCEEDED,value:e}}function j(e){return(t,n)=>{var a,r;const o=n(),i=(0,p.getProviderConfig)(o),{metamask:c}=o;if(null==e||!e.length)return c;const u=function(e,t){const n={...e};for(const e of t){const{op:t,path:a,value:r}=e;if("replace"!==t)throw new Error(`Unsupported patch operation: ${t}`);n[a[0]]=r}return n}(c,e),{currentLocale:l}=c,d=(0,g.getSelectedInternalAccount)(o),T=null==d?void 0:d.address,{currentLocale:E}=u,f=(0,p.getProviderConfig)({metamask:u}),S=(0,g.getSelectedInternalAccount)({metamask:u}),h=null==S?void 0:S.address;l&&E&&l!==E&&t(ue(E)),T!==h&&t({type:C.SELECTED_ADDRESS_CHANGED});const A=(null===(a=u.addressBook)||void 0===a?void 0:a[null==f?void 0:f.chainId])??{},_=(null===(r=c.addressBook)||void 0===r?void 0:r[null==i?void 0:i.chainId])??{},N=(0,g.getMetaMaskAccounts)({metamask:u}),k=(0,g.getMetaMaskAccounts)({metamask:c}),I=N[h],y=N[T];return Object.entries(k).forEach((([e,n])=>{(0,s.isEqual)(n,N[e])||t({type:C.ACCOUNT_CHANGED,payload:{account:N[e]}})})),!1===(0,s.isEqual)(y,I)&&t({type:C.SELECTED_ACCOUNT_CHANGED,payload:{account:I}}),!1===(0,s.isEqual)(_,A)&&t({type:C.ADDRESS_BOOK_UPDATED,payload:{addressBook:A}}),!1===(0,s.isEqual)(c.gasFeeEstimates,u.gasFeeEstimates)&&t({type:C.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:u.gasFeeEstimates,gasEstimateType:u.gasEstimateType}}),t({type:C.UPDATE_METAMASK_STATE,value:u}),i.chainId!==f.chainId&&(t({type:C.CHAIN_CHANGED,payload:f.chainId}),t((0,m.initializeSendState)({chainHasChanged:!0}))),u}}const V=()=>new Promise(((e,t)=>{(0,v.callBackgroundMethod)("setLocked",[],(n=>{n?t(n):e()}))}));async function Y(e){a.default.debug("background.setSelectedInternalAccount"),await(0,v.submitRequestToBackground)("setSelectedInternalAccount",[e])}function $(){return{type:C.SHOW_ACCOUNTS_PAGE}}function z({id:e}={}){return{type:C.SHOW_CONF_TX_PAGE,id:e}}function Q(e){return async t=>{await(0,v.submitRequestToBackground)("setSwitchedNetworkDetails",[e]),await ce(t)}}async function X(e){a.default.debug(`background.setActiveNetworkConfigurationId: ${e}`),await(0,v.submitRequestToBackground)("setActiveNetworkConfigurationId",[e])}function Z(e){return{type:C.MODAL_OPEN,payload:e}}function J(){return(e,t)=>{const n=t(),a=(0,g.getApprovalFlows)(n);(0,d.getEnvironmentType)()!==l.ENVIRONMENT_TYPE_NOTIFICATION||(0,g.hasTransactionPendingApprovals)(n)||(0,g.getIsSigningQRHardwareTransaction)(n)||0!==a.length||fe()}}function ee(e){return{type:C.SHOW_LOADING,payload:e}}function te(){return{type:C.SHOW_NFT_STILL_FETCHING_INDICATION}}function ne(){return{type:C.HIDE_LOADING}}function ae(){return{type:C.HIDE_NFT_STILL_FETCHING_INDICATION}}function re(e){var t;return(0,y.isErrorWithMessage)(e)?{type:C.DISPLAY_WARNING,payload:(null==e||null===(t=e.cause)||void 0===t?void 0:t.message)||e.message}:"string"==typeof e?{type:C.DISPLAY_WARNING,payload:e}:{type:C.DISPLAY_WARNING,payload:`${e}`}}function se(e,t,n=!0){return a=>(n&&a(ee()),new Promise(((r,s)=>{(0,v.callBackgroundMethod)("setPreference",[e,t],((e,t)=>{if(n&&a(ne()),e)return a(re(e)),void s(e);r(t)}))})))}function oe(){return{type:C.COMPLETE_ONBOARDING}}function ie(){return{type:C.RESET_ONBOARDING}}async function ce(e){let t;try{t=await(0,v.submitRequestToBackground)("getStatePatches")}catch(t){throw e(re(t)),t}return e(j(t))}function ue(e){return async t=>{t(ee());try{await(0,k.loadRelativeTimeFormatLocaleData)(e);const n=await(0,k.fetchLocale)(e),a=await(0,v.submitRequestToBackground)("setCurrentLocale",[e]);(0,u.default)(a),t(le(e,n))}catch(e){return void t(re(e))}finally{t(ne())}}}function le(e,t){return{type:C.SET_CURRENT_LOCALE,payload:{locale:e,messages:t}}}function de(e){return t=>(a.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,a)=>{(0,v.callBackgroundMethod)("setSeedPhraseBackedUp",[e],(e=>{if(e)return t(re(e)),void a(e);ce(t).then(n).catch(a)}))})))}function ge(e){return{type:C.SET_NEXT_NONCE,payload:e}}function me(e){return{type:C.SET_REQUEST_ACCOUNT_TABS,payload:e}}function Te(e){return{type:C.SET_OPEN_METAMASK_TAB_IDS,payload:e}}async function pe(e){return(0,v.submitRequestToBackground)("addPollingTokenToAppState",[e,l.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,d.getEnvironmentType)()]])}async function Ee(e){return(0,v.submitRequestToBackground)("removePollingTokenFromAppState",[e,l.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,d.getEnvironmentType)()]])}async function fe(){await(0,v.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}function Se(e,t){return(0,v.submitRequestToBackground)("trackMetaMetricsEvent",[{...e,actionId:(0,v.generateActionId)()},t])}async function he(e){await(0,v.submitRequestToBackground)("setUnconnectedAccountAlertShown",[e])}const Ae=async(e,t,n)=>{const a=t.map((t=>{const a={...e,maxFeePerGas:(0,I.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,I.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,I.decimalToHex)(21e3):e.gas,value:e.value};return n&&(a.to=a.from,a.data="0x"),a}));return await(0,v.submitRequestToBackground)("approveTransactionsWithSameNonce",[a])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/store/actions.ts"}],[6829,{pify:4599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.generateActionId=n.callBackgroundMethod=void 0,n.setBackgroundConnection=async function(e){s=e,o=(0,r.default)(s)},n.submitRequestToBackground=function(e,t){var n;return null===(n=o)||void 0===n?void 0:n[e](...t??[])};var a,r=(a=e("pify"))&&a.__esModule?a:{default:a};let s=null,o=null;n.generateActionId=()=>Date.now()+Math.random();n.callBackgroundMethod=(e,t,n)=>{var a;null===(a=s)||void 0===a||a[e](...t,n)}}}},{package:"$root$",file:"ui/store/background-connection.ts"}],[7,{"../../../shared/modules/object.utils":5173},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SENTRY_UI_STATE=n.SENTRY_BACKGROUND_STATE=n.MMI_SENTRY_BACKGROUND_STATE=void 0;var a=e("../../../shared/modules/object.utils");n.MMI_SENTRY_BACKGROUND_STATE={MMIController:{opts:!0},CustodyController:{store:!0},MmiConfigurationController:{store:!0,configurationClient:!0}};const r=n.SENTRY_BACKGROUND_STATE={AccountsController:{internalAccounts:{accounts:!1,selectedAccount:!1}},AccountTracker:{accounts:!1,accountsByChainId:!1,currentBlockGasLimit:!0,currentBlockGasLimitByChainId:!0},AddressBookController:{addressBook:!1},AlertController:{alertEnabledness:!0,unconnectedAccountAlertShownOrigins:!1,web3ShimUsageOrigins:!1},AnnouncementController:{announcements:!1},AuthenticationController:{isSignedIn:!1},NetworkOrderController:{orderedNetworkList:[]},AccountOrderController:{pinnedAccountList:[],hiddenAccountList:[]},AppMetadataController:{currentAppVersion:!0,currentMigrationVersion:!0,previousAppVersion:!0,previousMigrationVersion:!0},ApprovalController:{approvalFlows:!1,pendingApprovals:!1,pendingApprovalCount:!1},AppStateController:{browserEnvironment:!0,connectedStatusPopoverHasBeenShown:!0,currentPopupId:!1,onboardingDate:!1,currentExtensionPopupId:!1,defaultHomeActiveTabName:!0,fullScreenGasPollTokens:!0,hadAdvancedGasFeesSetPriorToMigration92_3:!0,nftsDetectionNoticeDismissed:!0,nftsDropdownState:!0,notificationGasPollTokens:!0,outdatedBrowserWarningLastShown:!0,popupGasPollTokens:!0,qrHardware:!0,recoveryPhraseReminderHasBeenShown:!0,recoveryPhraseReminderLastShown:!0,showBetaHeader:!0,showPermissionsTour:!0,showNetworkBanner:!0,showAccountBanner:!0,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,showTestnetMessageInDropdown:!0,surveyLinkLastClickedOrClosed:!0,snapsInstallPrivacyWarningShown:!0,termsOfUseLastAgreed:!0,timeoutMinutes:!0,trezorModel:!0,usedNetworks:!0},MultichainBalancesController:{balances:!1},BridgeController:{bridgeState:{bridgeFeatureFlags:{extensionConfig:!1,extensionSupport:!1,destNetworkAllowlist:[],srcNetworkAllowlist:[]},destTokens:{},destTopAssets:[],srcTokens:{},srcTopAssets:[],quoteRequest:{walletAddress:!1,srcTokenAddress:!0,slippage:!0,srcChainId:!0,destChainId:!0,destTokenAddress:!0,srcTokenAmount:!0},quotes:[],quotesLastFetched:!0,quotesLoadingStatus:!0}},CronjobController:{jobs:!1},CurrencyController:{currentCurrency:!0,currencyRates:!0},DecryptMessageController:{unapprovedDecryptMsgs:!1,unapprovedDecryptMsgCount:!0},EncryptionPublicKeyController:{unapprovedEncryptionPublicKeyMsgs:!1,unapprovedEncryptionPublicKeyMsgCount:!0},EnsController:{ensResolutionsByAddress:!1,ensEntries:!1},GasFeeController:{estimatedGasFeeTimeBounds:!0,gasEstimateType:!0,gasFeeEstimates:!0,gasFeeEstimatesByChainId:!0,nonRPCGasFeeApisDisabled:!1},KeyringController:{isUnlocked:!0,keyrings:!1},LoggingController:{logs:!1},NotificationServicesController:{subscriptionAccountsSeen:!1,isMetamaskNotificationsFeatureSeen:!1,isNotificationServicesEnabled:!1,isFeatureAnnouncementsEnabled:!1,metamaskNotificationsList:!1,metamaskNotificationsReadList:!1,isCheckingAccountsPresence:!1,isFetchingMetamaskNotifications:!1,isUpdatingMetamaskNotifications:!1,isUpdatingMetamaskNotificationsAccount:!1},MetaMetricsController:{eventsBeforeMetricsOptIn:!1,fragments:!1,metaMetricsId:!0,participateInMetaMetrics:!0,previousUserTraits:!1,segmentApiCalls:!1,traits:!1,dataCollectionForMarketing:!1,marketingCampaignCookieId:!0,latestNonAnonymousEventTimestamp:!0},MetaMetricsDataDeletionController:{metaMetricsDataDeletionId:!0,metaMetricsDataDeletionTimestamp:!0},NameController:{names:!1,nameSources:!1,useExternalNameSources:!1},NetworkController:{networkConfigurations:!1,networksMetadata:!0,selectedNetworkClientId:!1},NftController:{allNftContracts:!1,allNfts:!1,ignoredNfts:!1},NotificationController:{notifications:!1},OnboardingController:{completedOnboarding:!0,firstTimeFlowType:!0,onboardingTabs:!1,seedPhraseBackedUp:!0},PPOMController:{securityAlertsEnabled:!1,storageMetadata:[],versionInfo:[]},PermissionController:{subjects:!1},PermissionLogController:{permissionActivityLog:!1,permissionHistory:!1},PhishingController:{},PreferencesController:{advancedGasFee:!0,currentLocale:!0,dismissSeedBackUpReminder:!0,featureFlags:!0,forgottenPassword:!0,identities:!1,incomingTransactionsPreferences:!0,isIpfsGatewayEnabled:!1,ipfsGateway:!1,knownMethodData:!1,ledgerTransportType:!0,lostIdentities:!1,openSeaEnabled:!0,preferences:{autoLockTimeLimit:!0,hideZeroBalanceTokens:!0,redesignedConfirmationsEnabled:!0,redesignedTransactionsEnabled:!1,isRedesignedConfirmationsDeveloperEnabled:!1,showExtensionInFullSizeView:!0,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,showNativeTokenAsMainBalance:!0,petnamesEnabled:!0,showConfirmationAdvancedDetails:!0,privacyMode:!1},useExternalServices:!1,selectedAddress:!1,snapRegistryList:!1,theme:!0,signatureSecurityAlertResponses:!1,use4ByteResolution:!0,useAddressBarEnsResolution:!0,useBlockie:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,useNftDetection:!0,useNonceField:!0,usePhishDetect:!0,useTokenDetection:!0,useRequestQueue:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0},NotificationServicesPushController:{fcmToken:!1},MultichainRatesController:{fiatCurrency:!0,rates:!0,cryptocurrencies:!0},QueuedRequestController:{queuedRequestCount:!0},SelectedNetworkController:{domains:!1},SignatureController:{unapprovedPersonalMsgCount:!0,unapprovedPersonalMsgs:!1,unapprovedTypedMessages:!1,unapprovedTypedMessagesCount:!0},SmartTransactionsController:{smartTransactionsState:{fees:{approvalTxFees:!0,tradeTxFees:!0},liveness:!0,smartTransactions:!1,userOptIn:!0,userOptInV2:!0}},SnapController:{snaps:!1},SnapInterfaceController:{interfaces:!1},SnapInsightsController:{insights:!1},SnapsRegistry:{database:!1,lastUpdated:!1,databaseUnavailable:!1},SubjectMetadataController:{subjectMetadata:!1},SwapsController:{swapsState:{approveTxId:!1,customApproveTxData:!1,customGasPrice:!0,customMaxFeePerGas:!0,customMaxGas:!0,customMaxPriorityFeePerGas:!0,errorKey:!0,fetchParams:!0,quotes:!1,quotesLastFetched:!0,quotesPollingLimitEnabled:!0,routeState:!0,saveFetchedQuotes:!0,selectedAggId:!0,swapsFeatureFlags:!0,swapsFeatureIsLive:!0,swapsQuotePrefetchingRefreshTime:!0,swapsQuoteRefreshTime:!0,swapsStxBatchStatusRefreshTime:!0,swapsStxStatusDeadline:!0,swapsStxGetTransactionsRefreshTime:!0,swapsStxMaxFeeMultiplier:!0,swapsUserFeeLevel:!0,tokens:!1,topAggId:!1,tradeTxId:!1}},TokenDetectionController:{[a.AllProperties]:!1},TokenListController:{preventPollingOnNetworkRestart:!0,tokenList:!1,tokensChainsCache:{[a.AllProperties]:!1}},TokenRatesController:{marketData:!1},TokensController:{allDetectedTokens:{[a.AllProperties]:!1},allIgnoredTokens:{[a.AllProperties]:!1},allTokens:{[a.AllProperties]:!1},detectedTokens:!1,ignoredTokens:!1,tokens:!1},TransactionController:{transactions:!1,lastFetchedBlockNumbers:!1,methodData:!1},TxController:{transactions:!1},UserOperationController:{userOperations:!1},UserStorageController:{isProfileSyncingEnabled:!0,isProfileSyncingUpdateLoading:!1}},s=Object.values(r).reduce(((e,t)=>({...e,...t})),{});n.SENTRY_UI_STATE={gas:!0,history:!0,metamask:{...s,isInitialized:!0,customNonceValue:!0,isAccountMenuOpen:!0,isNetworkMenuOpen:!0,nextNonce:!0,pendingTokens:!1,welcomeScreenSeen:!0,confirmationExchangeRates:!0,useSafeChainsListValidation:!0,watchEthereumAccountEnabled:!1,bitcoinSupportEnabled:!1,bitcoinTestnetSupportEnabled:!1,addSnapAccountEnabled:!1,snapsAddSnapAccountModalDismissed:!1,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,newPrivacyPolicyToastClickedOrClosed:!1,newPrivacyPolicyToastShownDate:!1},unconnectedAccount:!0}}}},{package:"$root$",file:"app/scripts/constants/sentry-state.ts"}],[73,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(e.includes(a)){const t=e.slice(a.length);return t.slice(t.indexOf(r)+r.length)}return e};const a="Error: [ethjs-rpc] rpc error with payload ",r="Error: "}}},{package:"$root$",file:"app/scripts/lib/extractEthjsErrorMessage.js"}],[74,{"../../_locales/index.json":3,"webextension-polyfill":5090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(){let e;try{e=await a.default.i18n.getAcceptLanguages()}catch(t){e=[]}e||(e=[]);let t=e.map((e=>e.toLowerCase().replace("_","-"))).find((e=>o[e]!==undefined||o[e.split("-")[0]]!==undefined));t!==undefined&&o[t]===undefined&&(t=t.split("-")[0]);return o[t]||"en"};var a=s(e("webextension-polyfill")),r=s(e("../../_locales/index.json"));function s(e){return e&&e.__esModule?e:{default:e}}const o={zh:"zh_CN"};r.default.forEach((e=>{e&&e.code&&(o[e.code.toLowerCase().replace("_","-")]=e.code)}))}}},{package:"$root$",file:"app/scripts/lib/get-first-preferred-lang-code.js"}],[77,{"../../../shared/modules/browser-runtime.utils":5158,"@sentry/browser":2960,loglevel:4469,"webextension-polyfill":5090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(e("webextension-polyfill")),r=i(e("loglevel")),s=e("@sentry/browser"),o=e("../../../shared/modules/browser-runtime.utils");function i(e){return e&&e.__esModule?e:{default:e}}n.default=class{constructor(){this.isSupported=Boolean(a.default.storage.local),this.isSupported||r.default.error("Storage local API not available."),this.dataPersistenceFailing=!1,this.mostRecentRetrievedState=null,this.isExtensionInitialized=!1}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');try{await this._set({data:e,meta:this.metadata}),this.dataPersistenceFailing&&(this.dataPersistenceFailing=!1)}catch(e){this.dataPersistenceFailing||(this.dataPersistenceFailing=!0,(0,s.captureException)(e)),r.default.error("error setting state in local store:",e)}finally{this.isExtensionInitialized=!0}}async get(){if(!this.isSupported)return undefined;const e=await this._get();return t=e,0===Object.keys(t).length?(this.mostRecentRetrievedState=null,undefined):(this.isExtensionInitialized||(this.mostRecentRetrievedState=e),e);var t}_get(){const{local:e}=a.default.storage;return new Promise(((t,n)=>{e.get(null).then((e=>{const a=(0,o.checkForLastError)();a?n(a):t(e)}))}))}_set(e){const{local:t}=a.default.storage;return new Promise(((n,a)=>{t.set(e).then((()=>{const e=(0,o.checkForLastError)();e?a(e):n()}))}))}cleanUpMostRecentRetrievedState(){this.mostRecentRetrievedState&&(this.mostRecentRetrievedState=null)}}}}},{package:"$root$",file:"app/scripts/lib/local-store.js"}],[78,{"webextension-polyfill":5090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getManifestFlags=function(){return r.default.runtime.getManifest()._flags||{}};var a,r=(a=e("webextension-polyfill"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"app/scripts/lib/manifestFlags.ts"}],[82,{"../../../../shared/modules/hexstring-utils":5168,"@metamask/eth-sig-util":1421,"@metamask/utils":2850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEthAddress=o,n.normalizeAddress=function(e){return o(e)?(0,r.normalize)(e):e},n.normalizeSafeAddress=function(e){return o(e)?(0,s.toChecksumHexAddress)(e):e};var a=e("@metamask/utils"),r=e("@metamask/eth-sig-util"),s=e("../../../../shared/modules/hexstring-utils");function o(e){return(0,a.isValidHexAddress)(e)}}}},{package:"$root$",file:"app/scripts/lib/multichain/address.ts"}],[83,{"../../../shared/modules/fetch-with-timeout":5166,loglevel:4469},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(e("loglevel"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=(0,r(e("../../../shared/modules/fetch-with-timeout")).default)();n.default=class{constructor(){s(this,"isSupported",!0),this._initialized=!1,this._initializing=this._init(),this._state=undefined,this.mostRecentRetrievedState=null}async _init(){try{const e=await o("http://localhost:12345/state.json");e.ok&&(this._state=await e.json())}catch(e){a.default.debug(`Error loading network state: '${e.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this.mostRecentRetrievedState||(this.mostRecentRetrievedState=this._state),this._state}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');this._initialized||await this._initializing,this._state={data:e,meta:this._metadata}}cleanUpMostRecentRetrievedState(){this.mostRecentRetrievedState&&(this.mostRecentRetrievedState=null)}}}}},{package:"$root$",file:"app/scripts/lib/network-store.js"}]],[],{});