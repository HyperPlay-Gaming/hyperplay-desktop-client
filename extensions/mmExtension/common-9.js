LavaPack.loadBundle([[7156,{"../../../app/scripts/lib/util":85,"../../../shared/modules/conversion.utils":6607,"../../selectors":7536,"bignumber.js":1854,"currency-formatter":2112,"currency-formatter/currencies":2111},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addEth=function(...e){return e.reduce(((e,t)=>(0,c.addCurrencies)(e,t,{toNumericBase:"dec",numberOfDecimals:6,aBase:10,bBase:10})))},n.addFiat=function(...e){return e.reduce(((e,t)=>(0,c.addCurrencies)(e,t,{toNumericBase:"dec",numberOfDecimals:2,aBase:10,bBase:10})))},n.areDappSuggestedAndTxParamGasFeesTheSame=function(e={}){const{txParams:t,dappSuggestedGasFees:n}=e,{gasPrice:r,maxFeePerGas:a,maxPriorityFeePerGas:o}=t||{},{gasPrice:s,maxFeePerGas:i,maxPriorityFeePerGas:c}=n||{},u=!s&&!i&&!c;if(!r&&!a&&!o||u)return!1;const l=r&&r===s,d=[a,o].every((e=>e===s)),m=a&&a===i&&o===c;return l||d||m},n.convertTokenToFiat=function({value:e,fromCurrency:t="ETH",toCurrency:n,conversionRate:r,contractExchangeRate:a}){const o=r*a;return(0,c.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"dec",fromCurrency:t,toCurrency:n,numberOfDecimals:2,conversionRate:o})},n.formatCurrency=function(e,t){const n=t.toUpperCase();return a.default.find((e=>e.code===n))?r.default.format(Number(e),{code:n,style:"currency"}):e},n.getHexGasTotal=function({gasLimit:e,gasPrice:t}){return(0,s.addHexPrefix)((0,c.multiplyCurrencies)(e||"0x0",t||"0x0",{toNumericBase:"hex",multiplicandBase:16,multiplierBase:16}))},n.getTransactionFee=function({value:e,fromCurrency:t="ETH",toCurrency:n,conversionRate:r,numberOfDecimals:a}){return(0,c.conversionUtil)(e,{fromNumericBase:"BN",toNumericBase:"dec",fromDenomination:"WEI",fromCurrency:t,toCurrency:n,numberOfDecimals:a,conversionRate:r})},n.getValueFromWeiHex=function({value:e,fromCurrency:t="ETH",toCurrency:n,conversionRate:r,numberOfDecimals:a,toDenomination:o}){return(0,c.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"dec",fromCurrency:t,toCurrency:n,numberOfDecimals:a,fromDenomination:"WEI",toDenomination:o,conversionRate:r})},n.hasUnconfirmedTransactions=function(e){return(0,i.unconfirmedTransactionsCountSelector)(e)>0},n.hexGreaterThan=function(e,t){return(0,c.conversionGreaterThan)({value:e,fromNumericBase:"hex"},{value:t,fromNumericBase:"hex"})},n.increaseLastGasPrice=function(e){return(0,s.addHexPrefix)((0,c.multiplyCurrencies)(e||"0x0",1.1,{multiplicandBase:16,multiplierBase:10,toNumericBase:"hex"}))},n.roundExponential=function(e){const t=new o.default(e);return t.e>20?t.toPrecision(4):e};var r=u(e("currency-formatter")),a=u(e("currency-formatter/currencies")),o=u(e("bignumber.js")),s=e("../../../app/scripts/lib/util"),i=e("../../selectors"),c=e("../../../shared/modules/conversion.utils");function u(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$"}],[7157,{"../../../app/scripts/lib/util":85,"../../../shared/modules/conversion.utils":6607,"../constants/common":7135,"./confirm-tx.util":7156},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addHexWEIsToDec=function(e,t){return(0,o.addCurrencies)(e,t,{aBase:16,bBase:16,fromDenomination:"WEI",numberOfDecimals:6})},n.addHexes=u,n.bnToHex=function(e){return(0,a.addHexPrefix)(e.toString(16))},n.decETHToDecWEI=function(e){return(0,o.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"dec",fromDenomination:"ETH",toDenomination:"WEI"})},n.decEthToConvertedCurrency=c,n.decGWEIToHexWEI=function(e){return(0,o.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})},n.decWEIToDecETH=function(e){return(0,o.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"ETH"})},n.getEthConversionFromWeiHex=function({value:e,fromCurrency:t=r.ETH,conversionRate:n,numberOfDecimals:a=6}){const o=[t,r.GWEI,r.WEI];let s;for(let r=0;r<o.length;r++){const c=i({value:e,conversionRate:n,fromCurrency:t,toCurrency:t,numberOfDecimals:a,toDenomination:o[r]});if("0"!==c||r===o.length-1){s=`${c} ${o[r]}`;break}}return s},n.getValueFromWeiHex=i,n.getWeiHexFromDecimalValue=function({value:e,fromCurrency:t,conversionRate:n,fromDenomination:a,invertConversionRate:s}){return(0,o.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex",toCurrency:r.ETH,fromCurrency:t,conversionRate:n,invertConversionRate:s,fromDenomination:a,toDenomination:r.WEI})},n.hexWEIToDecETH=function(e){return(0,o.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"ETH"})},n.subtractHexWEIsToDec=function(e,t){return(0,o.subtractCurrencies)(e,t,{aBase:16,bBase:16,fromDenomination:"WEI",numberOfDecimals:6})},n.subtractHexes=function(e,t){return(0,o.subtractCurrencies)(e,t,{aBase:16,bBase:16,toNumericBase:"hex",numberOfDecimals:6})},n.sumHexWEIs=l,n.sumHexWEIsToRenderableFiat=function(e,t,n){const r=d(e,t,n);return(0,s.formatCurrency)(r,t)},n.sumHexWEIsToUnformattedFiat=d;var r=e("../constants/common"),a=e("../../../app/scripts/lib/util"),o=e("../../../shared/modules/conversion.utils"),s=e("./confirm-tx.util");function i({value:e,fromCurrency:t=r.ETH,toCurrency:n,conversionRate:a,numberOfDecimals:s,toDenomination:i}){return(0,o.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"dec",fromCurrency:t,toCurrency:n,numberOfDecimals:s,fromDenomination:r.WEI,toDenomination:i,conversionRate:a})}function c(e,t,n){return(0,o.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"dec",fromCurrency:"ETH",toCurrency:t,numberOfDecimals:2,conversionRate:n})}function u(e,t){return(0,o.addCurrencies)(e,t,{aBase:16,bBase:16,toNumericBase:"hex",numberOfDecimals:6})}function l(e){return e.filter(Boolean).reduce(u)}function d(e,t,n){return c(i({value:l(e),toCurrency:"ETH",numberOfDecimals:4}),t,n)}}}},{package:"$root$"}],[7159,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatETHFee=function(e,t="ETH"){return`${e} ${t}`}}}},{package:"$root$"}],[7162,{"../../../shared/modules/fetch-with-timeout":6608,"@sentry/browser":1347,loglevel:5639,react:6142},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchLocale=async function(e){try{const t=await c(`./_locales/${e}/messages.json`);return await t.json()}catch(t){return a.default.error(`failed to fetch ${e} locale because of ${t}`),{}}},n.getMessage=void 0,n.loadRelativeTimeFormatLocaleData=async function(e){const t=e.split("_")[0];if(Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&!m.has(t)){const e=await async function(e){const t=await c(`./intl/${e}/relative-time-format-data.json`);return await t.json()}(t);Intl.RelativeTimeFormat.__addLocaleData(e)}};var r=i(e("react")),a=i(e("loglevel")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("@sentry/browser"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function i(e){return e&&e.__esModule?e:{default:e}}const c=(0,i(e("../../../shared/modules/fetch-with-timeout")).default)(),u={},l={},d={};n.getMessage=(e,t,n,s)=>{if(!t)return null;if(!t[n])return"en"===e?l[n]||(l[n]=new Error(`Unable to find value of key "${n}" for locale "${e}"`),o.captureException(l[n]),a.default.error(l[n])):u[e]&&u[e][n]||(u[e]||(u[e]={}),u[e][n]=!0,a.default.warn(`Translator - Unable to find value of key "${n}" for locale "${e}"`)),null;let i=t[n].message;const c=Boolean(s&&s.length),m=c&&s.some((e=>null!==e&&("function"==typeof e||"object"==typeof e)));if(c){const t=i.split(/(\$\d)/gu).map((t=>{var r;const i=t.match(/\$(\d)/u);if(!i)return t;const c=Number(i[1])-1;if(!(null!==s[c]&&s[c]!==undefined||null!==(r=d[e])&&void 0!==r&&r[n])){d[e]||(d[e]={}),d[e][n]=!0;const t=new Error(`Insufficient number of substitutions for key "${n}" with locale "${e}"`);a.default.error(t),o.captureException(t)}return s[c]}));i=m?r.default.createElement("span",null," ",t," "):t.join("")}return i};const m=new Set}}},{package:"$root$"}],[7166,{"../../../shared/constants/network":6589},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatMoonpaySymbol=void 0;var r=e("../../../shared/constants/network");n.formatMoonpaySymbol=(e,t=r.CHAIN_IDS.MAINNET)=>{if(!e)return e;let n=e;var a;t===r.CHAIN_IDS.POLYGON||t===r.CHAIN_IDS.BSC?n=`${n}_${null===r.BUYABLE_CHAINS_MAP||void 0===r.BUYABLE_CHAINS_MAP||null===(a=r.BUYABLE_CHAINS_MAP[t])||void 0===a?void 0:a.network.toUpperCase()}`:t===r.CHAIN_IDS.AVALANCHE&&(n=`${n}_CCHAIN`);return n}}}},{package:"$root$"}],[7167,{"../../../../shared/modules/hexstring-utils":6610,"@ethereumjs/common":394,"@ethereumjs/tx":399,"ethereumjs-util":2496,lodash:5626},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=function(e){return{...(0,r.omit)(e.txParams,"gas"),gasLimit:e.txParams.gas}}(e),n=function(e){return o.default.forCustomChain(o.Chain.Mainnet,{chainId:new a.BN((0,i.stripHexPrefix)(e.chainId),16),networkId:new a.BN(e.metamaskNetworkId,10),defaultHardfork:o.Hardfork.SpuriousDragon})}(e);return s.TransactionFactory.fromTxData(t,{common:n})};var r=e("lodash"),a=e("ethereumjs-util"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("@ethereumjs/common")),s=e("@ethereumjs/tx"),i=e("../../../../shared/modules/hexstring-utils");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}}}},{package:"$root$"}],[7168,{"./buildUnserializedTransaction":7167,"@eth-optimism/contracts/dist/contract-defs":338,"@eth-optimism/contracts/dist/predeploys":339,ethers:2520},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e,t){var n;const r=function(e){const t=(0,o.getContractFactory)("OVM_GasPriceOracle").attach(s.predeploys.OVM_GasPriceOracle),n=JSON.parse(t.interface.format(a.utils.FormatTypes.json));return e.contract(n).at(t.address)}(e),c=(0,i.default)(t).serialize(),u=await r.getL1Fee(c);return null==u||null===(n=u[0])||void 0===n?void 0:n.toString(16)};var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ethers")),o=e("@eth-optimism/contracts/dist/contract-defs"),s=e("@eth-optimism/contracts/dist/predeploys"),i=(r=e("./buildUnserializedTransaction"))&&r.__esModule?r:{default:r};function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}}}},{package:"$root$"}],[7171,{"../../../shared/constants/transaction":6596,"../../../shared/lib/metamask-controller-utils":6599,"../../../shared/lib/transactions-controller-utils":6603,"../../../shared/modules/conversion.utils":6607,"../../../shared/modules/string-utils":6617,"../../../shared/modules/transaction.utils":6619,"../../store/actions":7543,"./confirm-tx.util":7156,"./util":7174,loglevel:5639},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAssetDetails=async function(e,t,n,r){var o,m,f,T,E,p,g;const S=(0,c.parseStandardTokenTransactionData)(n);if(!S)throw new Error("Unable to detect valid token data");let h=null!==(o=null===(m=A(S))||void 0===m?void 0:m.toString())&&void 0!==o?o:(0,l.getTokenValueParam)(S);const N=_(S);let y;if(null!=r&&r.length&&h){const t=r.find((({address:t,tokenId:n})=>(0,i.isEqualCaseInsensitive)(e,t)&&n===h));if(t)return{toAddress:N,...t}}try{y=await(0,s.getTokenStandardAndDetails)(e,t,h)}catch(e){return a.default.warn(e),{toAddress:N,tokenId:h}}const R=S&&(null===(f=y)||void 0===f?void 0:f.decimals)&&(0,d.calcTokenAmount)((0,l.getTokenValueParam)(S),null===(T=y)||void 0===T?void 0:T.decimals).toString(10),I=(null===(E=y)||void 0===E?void 0:E.decimals)&&Number(null===(p=y.decimals)||void 0===p?void 0:p.toString(10));(null===(g=y)||void 0===g?void 0:g.standard)===u.ERC20&&(h=undefined);return{tokenAmount:R,toAddress:N,decimals:I,tokenId:h,...y}},n.getSymbolAndDecimals=S,n.getTokenAddressParam=_,n.getTokenApprovedParam=function(e={}){var t;return null==e||null===(t=e.args)||void 0===t?void 0:t._approved},n.getTokenFiatAmount=function(e,t,n,r,a,s=!0,i=!1){if(t<=0||!e||r===undefined)return undefined;const c=(0,o.multiplyCurrencies)(e,t,{multiplicandBase:10,multiplierBase:10}),u=(0,o.conversionUtil)(r,{fromNumericBase:"dec",fromCurrency:a,toCurrency:n.toUpperCase(),numberOfDecimals:2,conversionRate:c});let l;l=i?(0,f.formatCurrency)(u,n):s?`${(0,f.formatCurrency)(u,n)} ${n.toUpperCase()}`:u;return l},n.getTokenIdParam=A,n.getTokenMetadata=E,n.tokenInfoGetter=function(){const e={};return async(t,n)=>(e[t]||(e[t]=await S(t,n)),e[t])};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("../../../shared/modules/conversion.utils"),s=e("../../store/actions"),i=e("../../../shared/modules/string-utils"),c=e("../../../shared/modules/transaction.utils"),u=e("../../../shared/constants/transaction"),l=e("../../../shared/lib/metamask-controller-utils"),d=e("../../../shared/lib/transactions-controller-utils"),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("./util")),f=e("./confirm-tx.util");function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function E(e,t){return e&&t[e.toLowerCase()]}async function p(e,t){let n=await async function(e){const t=m.getContractAtAddress(e);try{return(await t.symbol())[0]}catch(t){return a.default.warn(`symbol() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=E(e,t);r&&(n=r.symbol)}return n}async function g(e,t){let n=await async function(e){const t=m.getContractAtAddress(e);try{const e=(await t.decimals())[0];return null==e?void 0:e.toString()}catch(t){return a.default.warn(`decimals() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n||"0"===n){const a=E(e,t);var r;if(a)n=null===(r=a.decimals)||void 0===r?void 0:r.toString()}return n}async function S(e,t){let n,r;try{n=await p(e,t),r=await g(e,t)}catch(t){a.default.warn(`symbol() and decimal() calls for token at address ${e} resulted in error:`,t)}return{symbol:n||"",decimals:r}}function _(e={}){var t,n,r;const a=(null==e||null===(t=e.args)||void 0===t?void 0:t._to)||(null==e||null===(n=e.args)||void 0===n?void 0:n.to)||(null==e||null===(r=e.args)||void 0===r?void 0:r[0]);return null==a?void 0:a.toString().toLowerCase()}function A(e={}){var t,n,r,a,o;return null!==(t=null==e||null===(n=e.args)||void 0===n||null===(r=n._tokenId)||void 0===r?void 0:r.toString())&&void 0!==t?t:null==e||null===(a=e.args)||void 0===a||null===(o=a.id)||void 0===o?void 0:o.toString()}}}},{package:"$root$"}],[7172,{"../../../app/scripts/lib/util":85,"../../../shared/constants/transaction":6596,"../../../shared/lib/fetch-with-cache":6598,"../../../shared/modules/contract-utils":6606,"../../../shared/modules/conversion.utils":6607,"eth-method-registry":2413,loglevel:5639},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFourBytePrefix=function(e=""){const t=(0,o.addHexPrefix)(e);return t.slice(0,10)},n.getLatestSubmittedTxWithNonce=function(e=[],t="0x0"){if(!e.length)return{};return e.reduce(((e,n)=>{const{submittedTime:r,txParams:{nonce:a}={}}=n;return a===t?e.submittedTime?r>e.submittedTime?n:e:n:e}),{})},n.getMethodDataAsync=async function(e){try{const t=await async function(e){const t=await(0,u.default)(`https://www.4byte.directory/api/v1/signatures/?hex_signature=${e}`,{referrerPolicy:"no-referrer-when-downgrade",body:null,method:"GET",mode:"cors"});return t.results.sort(((e,t)=>new Date(e.created_at).getTime()<new Date(t.created_at).getTime()?-1:1)),t.results[0].text_signature}(e).catch((e=>(a.default.error(e),null)));if(d||(d=new r.MethodRegistry({provider:global.ethereumProvider})),!t)return{};const n=d.parse(t);return{name:n.name,params:n.args}}catch(e){return a.default.error(e),{}}},n.getStatusKey=function(e){const{txReceipt:{status:t}={},type:n,status:r}=e;if("0x0"===t)return s.TRANSACTION_STATUSES.FAILED;if(r===s.TRANSACTION_STATUSES.CONFIRMED&&n===s.TRANSACTION_TYPES.CANCEL)return s.TRANSACTION_GROUP_STATUSES.CANCELLED;return e.status},n.getTransactionTypeTitle=function(e,t,n="ETH"){switch(t){case s.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER:return e("transfer");case s.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER_FROM:return e("transferFrom");case s.TRANSACTION_TYPES.TOKEN_METHOD_SAFE_TRANSFER_FROM:return e("safeTransferFrom");case s.TRANSACTION_TYPES.TOKEN_METHOD_APPROVE:return e("approve");case s.TRANSACTION_TYPES.TOKEN_METHOD_SET_APPROVAL_FOR_ALL:return e("setApprovalForAll");case s.TRANSACTION_TYPES.SIMPLE_SEND:return e("sendingNativeAsset",[n]);case s.TRANSACTION_TYPES.CONTRACT_INTERACTION:return e("contractInteraction");case s.TRANSACTION_TYPES.DEPLOY_CONTRACT:return e("contractDeployment");case s.TRANSACTION_TYPES.SWAP:return e("swap");case s.TRANSACTION_TYPES.SWAP_APPROVAL:return e("swapApproval");default:throw new Error(`Unrecognized transaction type: ${t}`)}},n.isLegacyTransaction=function(e){return(null==e?void 0:e.type)===s.TRANSACTION_ENVELOPE_TYPES.LEGACY},n.isSmartContractAddress=async function(e){const{isContractAddress:t}=await(0,c.readAddressAsContract)(global.eth,e);return t},n.isTokenMethodAction=function(e){return[s.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER,s.TRANSACTION_TYPES.TOKEN_METHOD_APPROVE,s.TRANSACTION_TYPES.TOKEN_METHOD_SET_APPROVAL_FOR_ALL,s.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER_FROM,s.TRANSACTION_TYPES.TOKEN_METHOD_SAFE_TRANSFER_FROM].includes(e)},n.sumHexes=function(...e){const t=e.reduce(((e,t)=>(0,i.addCurrencies)(e,t,{toNumericBase:"hex",aBase:16,bBase:16})));return(0,o.addHexPrefix)(t)};var r=e("eth-method-registry"),a=l(e("loglevel")),o=e("../../../app/scripts/lib/util"),s=e("../../../shared/constants/transaction"),i=e("../../../shared/modules/conversion.utils"),c=e("../../../shared/modules/contract-utils"),u=l(e("../../../shared/lib/fetch-with-cache"));function l(e){return e&&e.__esModule?e:{default:e}}let d}}},{package:"$root$"}],[7173,{"../../../shared/modules/transaction.utils":6619,"./util":7174,loglevel:5639},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i,c,u,l){a.default.debug("tx-helper called with params:"),a.default.debug({unapprovedTxs:e,unapprovedMsgs:t,personalMsgs:n,decryptMsgs:r,encryptionPublicKeyMsgs:i,typedMessages:c,network:u,chainId:l});const d=u?(0,s.valuesFor)(e).filter((e=>(0,o.transactionMatchesNetwork)(e,l,u))):(0,s.valuesFor)(e);a.default.debug(`tx helper found ${d.length} unapproved txs`);const m=(0,s.valuesFor)(t);a.default.debug(`tx helper found ${m.length} unsigned messages`);let f=d.concat(m);const T=(0,s.valuesFor)(n);a.default.debug(`tx helper found ${T.length} unsigned personal messages`),f=f.concat(T);const E=(0,s.valuesFor)(r);a.default.debug(`tx helper found ${E.length} decrypt requests`),f=f.concat(E);const p=(0,s.valuesFor)(i);a.default.debug(`tx helper found ${p.length} encryptionPublicKey requests`),f=f.concat(p);const g=(0,s.valuesFor)(c);return a.default.debug(`tx helper found ${g.length} unsigned typed messages`),f=f.concat(g),f=f.sort(((e,t)=>e.time-t.time)),f};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("../../../shared/modules/transaction.utils"),s=e("./util")}}},{package:"$root$"}],[7174,{"../../../shared/constants/labels":6587,"../../../shared/constants/network":6589,"../../../shared/modules/conversion.utils":6607,"../../../shared/modules/hexstring-utils":6610,"@metamask/controllers/dist/util":1096,"@metamask/slip44":1222,"bignumber.js":1854,"ethereumjs-util":2496,"human-standard-token-abi":4867,luxon:5646,"punycode/punycode":5971},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addressSummary=function(e,t=10,n=4,r=!0){if(!e)return"";let a=(0,d.toChecksumHexAddress)(e);r||(a=(0,d.stripHexPrefix)(a));return a?`${a.slice(0,t)}...${a.slice(a.length-n)}`:"..."},n.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).gt(t,10)},n.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).gte(t,10)},n.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).lt(t,10)},n.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).lte(t,10)},n.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},n.clearClipboard=function(){window.navigator.clipboard.writeText("")},n.coinTypeToProtocolName=function(e){var t;if("1"===String(e))return"Test Networks";return(null===(t=u.default[e])||void 0===t?void 0:t.name)||undefined},n.formatBalance=function(e,t,n=!0,r="ETH"){const a=n?g(e):e.split("."),o=a[0];let s=a[1],i="None";if(t===undefined)if("0"===o){if("0"!==s){const e=s.match(/^0*(.{2})/u);e&&(s=e[0]),i=`0.${s} ${r}`}}else i=`${o}.${s.slice(0,3)} ${r}`;else s+=Array(t).join("0"),i=`${o}.${s.slice(0,t)} ${r}`;return i},n.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return i.DateTime.fromMillis(e).toFormat(t)},n.formatDateWithYearContext=function(e,t="MMM d",n="MMM d, y"){if(!e)return"";const r=i.DateTime.fromMillis(e),a=i.DateTime.local();return r.toFormat(a.year===r.year?t:n)},n.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},n.getAssetImageURL=function(e,t){if(!e||!t||"string"!=typeof e)return"";if(e.startsWith("ipfs://"))return(0,c.getFormattedIpfsUrl)(t,e,!0);return e},n.getContractAtAddress=function(e){return global.eth.contract(a.default).at(e)},n.getRandomFileName=function(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],n=Math.floor(7*Math.random()+6);for(let r=0;r<n;r++)e+=t[Math.floor(Math.random()*t.length)];return e},n.getURL=_,n.getURLHost=function(e){var t;return(null===(t=_(e))||void 0===t?void 0:t.host)||""},n.getURLHostName=function(e){var t;return(null===(t=_(e))||void 0===t?void 0:t.hostname)||""},n.isDefaultMetaMaskChain=function(e){if(!e||e===l.CHAIN_IDS.MAINNET||e===l.CHAIN_IDS.GOERLI||e===l.CHAIN_IDS.SEPOLIA||e===l.CHAIN_IDS.LOCALHOST)return!0;return!1},n.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const n of t)if(e.startsWith(n))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},n.isNullish=function(e){return null===e||e===undefined},n.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},n.isValidDomainName=function(e){return null!==r.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},n.numericBalance=p,n.parseBalance=g,n.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return f.toBigNumber.dec(f.toBigNumber.dec(e).toFixed(t)).toNumber()},n.sanitizeMessage=void 0,n.shortenAddress=function(e=""){if(e.length<m.TRUNCATED_NAME_CHAR_LIMIT)return e;return`${e.slice(0,m.TRUNCATED_ADDRESS_START_CHARS)}...${e.slice(-m.TRUNCATED_ADDRESS_END_CHARS)}`},n.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},n.stripHttpsScheme=S,n.stripHttpsSchemeWithoutPort=function(e){if(_(e).port)return e;return S(e)},n.toHumanReadableTime=void 0,n.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var r=E(e("punycode/punycode")),a=E(e("human-standard-token-abi")),o=E(e("bignumber.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ethereumjs-util")),i=e("luxon"),c=e("@metamask/controllers/dist/util"),u=E(e("@metamask/slip44")),l=e("../../../shared/constants/network"),d=e("../../../shared/modules/hexstring-utils"),m=e("../../../shared/constants/labels"),f=e("../../../shared/modules/conversion.utils");function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function E(e){return e&&e.__esModule?e:{default:e}}function p(e){if(!e)return new s.BN(0,16);const t=(0,d.stripHexPrefix)(e);return new s.BN(t,16)}function g(e){let t;const n=p(e),r=n.toString(),a=r.length>18?r.slice(0,r.length-18):"0";return t=`000000000000000000${n}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[a,t]}function S(e){return e.replace(/^https:\/\//u,"")}function _(e){try{return new URL(e)}catch(e){return""}}n.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const n=Math.ceil(t/1e3);return n<=90?e("gasTimingSecondsShort",[n]):n<=5400?e("gasTimingMinutesShort",[Math.ceil(n/60)]):e("gasTimingHoursShort",[Math.ceil(n/3600)])};const A=(e,t,n)=>{if(!n)throw new Error("Invalid types definition");const r=n[t];if(!r)throw new Error("Invalid primary type definition");const a={};return Object.keys(e).forEach((t=>{const o=Object.values(r).find((e=>e.name===t));if(!o)return;const s=o.type.replace(/\[\]$/u,"");if(n[s])o.type.endsWith("[]")>0?a[t]=e[t].map((e=>A(e,s,n))):a[t]=A(e[t],o.type,n);else{(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),n=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),r=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),a=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),o=Array.from(new Array(80)).map(((e,t)=>r.map((e=>`${e}x${t+1}`)))),s=Array.from(new Array(80)).map(((e,t)=>a.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...n,...o.flat(),...s.flat()]})().includes(s)&&(a[t]=e[t])}})),a};n.sanitizeMessage=A}}},{package:"$root$"}],[7268,{"../../../../shared/constants/network":6589,"../../../../shared/lib/fetch-with-cache":6598,"../../../helpers/constants/design-system":7137,"../../../helpers/constants/routes":7141,"../../../helpers/constants/zendesk-url":7144,"eth-rpc-errors":2421,react:6142},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),a=l(e("react")),o=e("../../../../shared/constants/network"),s=e("../../../helpers/constants/design-system"),i=e("../../../helpers/constants/routes"),c=l(e("../../../helpers/constants/zendesk-url")),u=l(e("../../../../shared/lib/fetch-with-cache"));function l(e){return e&&e.__esModule?e:{default:e}}const d={id:"UNRECOGNIZED_CHAIN",severity:s.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"unrecognizedChain"}}}},m={id:"MISMATCHED_CHAIN_RECOMMENDATION",content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainRecommendation",variables:[{element:"a",key:"mismatchedChainLink",props:{href:c.default.VERIFY_CUSTOM_NETWORK,target:"__blank",tabIndex:0},children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainLinkText"}}}]}}}},f={id:"MISMATCHED_NETWORK_NAME",severity:s.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkName"}}}},T={id:"MISMATCHED_NETWORK_SYMBOL",severity:s.SEVERITIES.DANGER,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkSymbol"}}}},E={id:"MISMATCHED_NETWORK_RPC",severity:s.SEVERITIES.DANGER,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcUrl"}}}};var p={getAlerts:async function(e){const t=[],n=(await(0,u.default)("https://chainid.network/chains.json")||[]).find((t=>t.chainId===parseInt(e.requestData.chainId,16)));if("metamask"===e.origin&&Boolean(n))return[];if(n){var r;n.name.toLowerCase()!==e.requestData.chainName.toLowerCase()&&t.push(f),(null===(r=n.nativeCurrency)||void 0===r?void 0:r.symbol)!==e.requestData.ticker&&t.push(T);const{origin:a}=new URL(e.requestData.rpcUrl);n.rpc.map((e=>new URL(e).origin)).includes(a)||t.push(E)}return n||t.push(d),t.length&&t.push(m),t},getValues:function(e,t,n,u){var l;const d="metamask"===e.origin;return{content:[{hide:!d,element:"Box",key:"network-box",props:{textAlign:s.TEXT_ALIGN.CENTER,display:s.DISPLAY.FLEX,justifyContent:s.JUSTIFY_CONTENT.CENTER,marginTop:4,marginBottom:2},children:[{element:"Chip",key:"network-chip",props:{label:e.requestData.chainName,backgroundColor:s.COLORS.BACKGROUND_ALTERNATIVE,leftIconUrl:e.requestData.imageUrl}}]},{element:"Typography",key:"title",children:t(d?"wantToAddThisNetwork":"addEthereumChainConfirmationTitle"),props:{variant:s.TYPOGRAPHY.H3,align:"center",fontWeight:"bold",boxProps:{margin:[0,0,4]}}},{element:"Typography",key:"description",children:t("addEthereumChainConfirmationDescription"),props:{variant:s.TYPOGRAPHY.H7,align:"center",boxProps:{margin:d?[0,8,4]:[0,0,4]}}},{element:"Typography",key:"only-add-networks-you-trust",children:[{element:"b",key:"bolded-text",props:{style:{display:d&&"-webkit-box"}},children:[`${t("addEthereumChainConfirmationRisks")} `,{hide:!d,element:"Tooltip",key:"tooltip-info",props:{position:"bottom",interactive:!0,trigger:"mouseenter",html:a.default.createElement("div",{style:{width:"180px",margin:"16px",textAlign:"left"}},t("someNetworksMayPoseSecurity")," ",a.default.createElement("a",{key:"zendesk_page_link",href:c.default.UNKNOWN_NETWORK,rel:"noreferrer",target:"_blank",style:{color:"var(--color-primary-default)"}},t("learnMoreUpperCase")))},children:[{element:"i",key:"info-circle",props:{className:"fas fa-info-circle",style:{marginLeft:"4px",color:"var(--color-icon-default)"}}}]}]},{element:"MetaMaskTranslation",key:"learn-about-risks",props:{translationKey:"addEthereumChainConfirmationRisksLearnMore",variables:[{element:"a",children:t("addEthereumChainConfirmationRisksLearnMoreLink"),key:"addEthereumChainConfirmationRisksLearnMoreLink",props:{href:c.default.USER_GUIDE_CUSTOM_NETWORKS,target:"__blank"}}]}}],props:{variant:s.TYPOGRAPHY.H7,boxProps:{margin:d?[0,8]:0,display:s.DISPLAY.FLEX,flexDirection:s.FLEX_DIRECTION.COLUMN,alignItems:s.ALIGN_ITEMS.CENTER}}},{element:"TruncatedDefinitionList",key:"network-details",props:{title:t("networkDetails"),tooltips:{[t("networkName")]:t("networkNameDefinition"),[t("networkURL")]:t("networkURLDefinition"),[t("chainId")]:t("chainIdDefinition"),[t("currencySymbol")]:t("currencySymbolDefinition"),[t("blockExplorerUrl")]:t("blockExplorerUrlDefinition")},dictionary:{[t("networkName")]:e.requestData.chainName,[t("networkURL")]:null!==(l=e.requestData.rpcUrl)&&void 0!==l&&l.includes(`/v3/${o.infuraProjectId}`)?e.requestData.rpcUrl.replace(`/v3/${o.infuraProjectId}`,""):e.requestData.rpcUrl,[t("chainId")]:parseInt(e.requestData.chainId,16),[t("currencySymbol")]:e.requestData.ticker,[t("blockExplorerUrl")]:e.requestData.blockExplorerUrl},prefaceKeys:[t("networkName"),t("networkURL"),t("chainId"),t("currencySymbol")]}}],approvalText:t("approveButtonText"),cancelText:t("cancel"),onApprove:async()=>{await n.resolvePendingApproval(e.id,e.requestData),d&&(n.addCustomNetwork(e.requestData),u.push(i.DEFAULT_ROUTE))},onCancel:()=>n.rejectPendingApproval(e.id,r.ethErrors.provider.userRejectedRequest().serialize()),networkDisplay:!d}}};n.default=p}}},{package:"$root$"}],[7269,{"../../../../shared/constants/app":6584,"../../../store/actions":7543,"./add-ethereum-chain":7268,"./switch-ethereum-chain":7270,lodash:5626},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TEMPLATED_CONFIRMATION_MESSAGE_TYPES=void 0,n.getTemplateAlerts=async function(e){var t;const n=null===(t=u[e.type])||void 0===t?void 0:t.getAlerts,r=n?await n(e):[];if(!Array.isArray(r))throw new Error(`Template alerts must be an array, received: ${r}`);if(r.some((e=>(null==e?void 0:e.id)===undefined)))throw new Error(`Template alert entries must be objects with an id key. Received: ${r}`);return r},n.getTemplateState=async function(e){var t,n;const r=null!==(t=null===(n=u[e.type])||void 0===n?void 0:n.getState)&&void 0!==t?t:m,a=await r(e);if("object"!=typeof a||Array.isArray(a))throw new Error(`Template state must be an object, received: ${a}`);if(null===a||a===undefined)return{};return a},n.getTemplateValues=function(e,t,n,a){var s;const i=null===(s=u[e.type])||void 0===s?void 0:s.getValues;if(!i)throw new Error(`MESSAGE_TYPE: '${e.type}' is not specified in approval templates`);const c=function(e){return{rejectPendingApproval:(...t)=>e((0,o.rejectPendingApproval)(...t)),resolvePendingApproval:(...t)=>e((0,o.resolvePendingApproval)(...t)),addCustomNetwork:(...t)=>e((0,o.addCustomNetwork)(...t))}}(n),l=i(e,t,c,a),m=(0,r.omit)(l,d),f=(0,r.pick)(l,d);if(m.length>0)throw new Error(`Received extraneous keys from ${e.type}.getValues. These keys are not passed to the confirmation page: ${Object.keys(m)}`);return f};var r=e("lodash"),a=e("../../../../shared/constants/app"),o=e("../../../store/actions"),s=c(e("./add-ethereum-chain")),i=c(e("./switch-ethereum-chain"));function c(e){return e&&e.__esModule?e:{default:e}}const u={[a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN]:s.default,[a.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]:i.default},l=Object.keys(u);n.TEMPLATED_CONFIRMATION_MESSAGE_TYPES=l;const d=["content","approvalText","cancelText","onApprove","onCancel","networkDisplay"];async function m(){return{}}}}},{package:"$root$"}],[7270,{"../../../helpers/constants/design-system":7137,"eth-rpc-errors":2421},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),a=e("../../../helpers/constants/design-system");const o={id:"PENDING_TX_DROP_NOTICE",severity:a.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"switchingNetworksCancelsPendingConfirmations"}}}};var s={getAlerts:async function(){return[o]},getValues:function(e,t,n){return{content:[{element:"Typography",key:"title",children:t("switchEthereumChainConfirmationTitle"),props:{variant:a.TYPOGRAPHY.H3,align:"center",fontWeight:"normal",boxProps:{margin:[0,0,2],padding:[0,4,0,4]}}},{element:"Typography",key:"description",children:t("switchEthereumChainConfirmationDescription"),props:{variant:a.TYPOGRAPHY.H7,color:a.COLORS.TEXT_ALTERNATIVE,align:"center",boxProps:{padding:[0,4,0,4]}}},{element:"Box",key:"status-box",props:{justifyContent:a.JUSTIFY_CONTENT.CENTER},children:{element:"ConfirmationNetworkSwitch",key:"network-being-switched",props:{newNetwork:{chainId:e.requestData.chainId,name:e.requestData.nickname}}}}],approvalText:t("switchNetwork"),cancelText:t("cancel"),onApprove:()=>n.resolvePendingApproval(e.id,e.requestData),onCancel:()=>n.rejectPendingApproval(e.id,r.ethErrors.provider.userRejectedRequest().serialize()),networkDisplay:!0}}};n.default=s}}},{package:"$root$"}],[7412,{"../../../app/scripts/lib/util":85,"../../../shared/constants/gas":6585,"../../../shared/modules/conversion.utils":6607},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE=n.REQUIRED_ERROR=n.RECIPIENT_TYPES=n.NEGATIVE_ETH_ERROR=n.MIN_GAS_TOTAL=n.MIN_GAS_PRICE_HEX=n.MIN_GAS_PRICE_GWEI=n.MIN_GAS_PRICE_DEC=n.MIN_GAS_LIMIT_DEC=n.MAX_GAS_LIMIT_DEC=n.KNOWN_RECIPIENT_ADDRESS_WARNING=n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR=n.INVALID_RECIPIENT_ADDRESS_ERROR=n.INSUFFICIENT_TOKENS_ERROR=n.INSUFFICIENT_FUNDS_ERROR=n.HIGH_FEE_WARNING_MULTIPLIER=n.ENS_UNKNOWN_ERROR=n.ENS_REGISTRATION_ERROR=n.ENS_NO_ADDRESS_FOR_NAME=n.ENS_NOT_SUPPORTED_ON_NETWORK=n.ENS_NOT_FOUND_ON_NETWORK=n.ENS_ILLEGAL_CHARACTER=n.CONTRACT_ADDRESS_ERROR=n.CONFUSING_ENS_ERROR=n.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE=void 0;var r=e("../../../shared/modules/conversion.utils"),a=e("../../../app/scripts/lib/util"),o=e("../../../shared/constants/gas");n.MIN_GAS_PRICE_DEC="0";const s=parseInt("0",10).toString(16);n.MIN_GAS_PRICE_HEX=s;n.MIN_GAS_LIMIT_DEC="21000";n.MAX_GAS_LIMIT_DEC="7920027";n.HIGH_FEE_WARNING_MULTIPLIER=1.5;const i=(0,a.addHexPrefix)((0,r.conversionUtil)(s,{fromDenomination:"WEI",toDenomination:"GWEI",fromNumericBase:"hex",toNumericBase:"hex",numberOfDecimals:1}));n.MIN_GAS_PRICE_GWEI=i;const c=(0,r.multiplyCurrencies)(o.MIN_GAS_LIMIT_HEX,s,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:16});n.MIN_GAS_TOTAL=c;n.TOKEN_TRANSFER_FUNCTION_SIGNATURE="0xa9059cbb";n.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE="0x23b872dd";n.INSUFFICIENT_FUNDS_ERROR="insufficientFunds";n.INSUFFICIENT_TOKENS_ERROR="insufficientTokens";n.NEGATIVE_ETH_ERROR="negativeETH";n.INVALID_RECIPIENT_ADDRESS_ERROR="invalidAddressRecipient";n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR="invalidAddressRecipientNotEthNetwork";n.REQUIRED_ERROR="required";n.KNOWN_RECIPIENT_ADDRESS_WARNING="knownAddressRecipient";n.CONTRACT_ADDRESS_ERROR="contractAddressError";n.CONFUSING_ENS_ERROR="confusingEnsDomain";n.ENS_NO_ADDRESS_FOR_NAME="noAddressForName";n.ENS_NOT_FOUND_ON_NETWORK="ensNotFoundOnCurrentNetwork";n.ENS_NOT_SUPPORTED_ON_NETWORK="ensNotSupportedOnNetwork";n.ENS_ILLEGAL_CHARACTER="ensIllegalCharacter";n.ENS_UNKNOWN_ERROR="ensUnknownError";n.ENS_REGISTRATION_ERROR="ensRegistrationError";n.RECIPIENT_TYPES={SMART_CONTRACT:"SMART_CONTRACT",NON_CONTRACT:"NON_CONTRACT"}}}},{package:"$root$"}],[7414,{"../../../app/scripts/lib/util":85,"../../../shared/constants/transaction":6596,"../../../shared/lib/transactions-controller-utils":6603,"../../../shared/modules/conversion.utils":6607,"./send.constants":7412,"ethereumjs-abi":2476},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=function(e,t,n=1.5){const r=(0,o.multiplyCurrencies)(t,.9,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:10,numberOfDecimals:"0"}),a=(0,o.multiplyCurrencies)(e,n,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:10,numberOfDecimals:"0"});if((0,o.conversionGreaterThan)({value:e,fromNumericBase:"hex"},{value:r,fromNumericBase:"hex"}))return e;if((0,o.conversionLessThan)({value:a,fromNumericBase:"hex"},{value:r,fromNumericBase:"hex"}))return a;return r},n.ellipsify=function(e,t=6,n=4){return`${e.slice(0,t)}...${e.slice(-n)}`},n.generateERC20TransferData=l,n.generateERC721TransferData=d,n.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:n,amount:r}){switch(e.standard){case i.ERC721:return d({toAddress:n,fromAddress:t,tokenId:e.tokenId});case i.ERC20:default:return l({toAddress:n,amount:r,sendToken:e})}},n.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:n=1,gasTotal:r="0x0",primaryCurrency:a}){const s=(0,o.addCurrencies)(e,r,{aBase:16,bBase:16,toNumericBase:"hex"});return(0,o.conversionGTE)({value:t,fromNumericBase:"hex",fromCurrency:a,conversionRate:n},{value:s,fromNumericBase:"hex",conversionRate:n,fromCurrency:a})},n.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:n}){const r=(0,o.conversionUtil)(e,{fromNumericBase:"hex"});return(0,o.conversionGTE)({value:t,fromNumericBase:"hex"},{value:(0,c.calcTokenAmount)(r,n)})};var r,a=(r=e("ethereumjs-abi"))&&r.__esModule?r:{default:r},o=e("../../../shared/modules/conversion.utils"),s=e("../../../app/scripts/lib/util"),i=e("../../../shared/constants/transaction"),c=e("../../../shared/lib/transactions-controller-utils"),u=e("./send.constants");function l({toAddress:e="0x0",amount:t="0x0",sendToken:n}){return n?u.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call(a.default.rawEncode(["address","uint256"],[(0,s.addHexPrefix)(e),(0,s.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function d({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n}){return n?u.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call(a.default.rawEncode(["address","address","uint256"],[(0,s.addHexPrefix)(t),(0,s.addHexPrefix)(e),n]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"$root$"}],[7522,{"../../../shared/constants/network":6589,"../../../shared/constants/swaps":6593,"../../../shared/constants/time":6594,"../../../shared/lib/fetch-with-cache":6598,"../../../shared/lib/swaps-utils":6601,"../../../shared/lib/transactions-controller-utils":6603,"../../../shared/modules/hexstring-utils":6610,"../../../shared/modules/swaps.utils":6618,"../../helpers/utils/confirm-tx.util":7156,"../../helpers/utils/conversions.util":7157,"bignumber.js":1854,"human-standard-token-abi":4867},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=void 0,n.fetchAggregatorMetadata=async function(e){const t=(0,f.getBaseApi)("aggregatorMetadata",e),n=await(0,l.default)(t,{method:"GET",headers:S},{cacheRefreshTime:p}),r={};for(const e in n)(0,f.validateData)(h,n[e],t)&&(r[e]=n[e]);return r},n.fetchSwapsFeatureFlags=async function(){const e=o.SWAPS_API_V2_BASE_URL;return await(0,l.default)(`${e}/featureFlags`,{method:"GET",headers:S},{cacheRefreshTime:6e5})},n.fetchSwapsGasPrices=async function(e){const t=(0,f.getBaseApi)("gasPrices",e),n=await(0,l.default)(t,{method:"GET",headers:S},{cacheRefreshTime:3e4});if(!(0,f.validateData)(y,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:r,ProposeGasPrice:a,FastGasPrice:o}=n;return{safeLow:r,average:a,fast:o}},n.fetchToken=async function(e,t){const n=(0,f.getBaseApi)("token",t);return await(0,l.default)(`${n}?address=${e}`,{method:"GET",headers:S},{cacheRefreshTime:p})},n.fetchTokenBalance=async function(e,t){const n=global.eth.contract(a.default).at(e),r=n?n.balanceOf(t):Promise.resolve();return await r},n.fetchTokenPrice=async function(e){var t;const n=`contract_addresses=${e}&vs_currencies=eth`,r=await(0,l.default)(`https://api.coingecko.com/api/v3/simple/token_price/ethereum?${n}`,{method:"GET"},{cacheRefreshTime:6e4});return r&&(null===(t=r[e])||void 0===t?void 0:t.eth)},n.fetchTokens=async function(e){const t=(0,f.getBaseApi)("tokens",e),n=await(0,l.default)(t,{method:"GET",headers:S},{cacheRefreshTime:p});return[o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e],...n.filter((n=>(0,f.validateData)(_,n,t,false)&&!((0,s.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,s.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=(0,f.getBaseApi)("topAssets",e),n=await(0,l.default)(t,{method:"GET",headers:S},{cacheRefreshTime:p})||[];return n.reduce(((e,n,r)=>(0,f.validateData)(A,n,t)?{...e,[n.address]:{index:String(r)}}:e),{})},n.fetchTradesInfo=async function({slippage:e,sourceToken:t,sourceDecimals:n,destinationToken:r,value:a,fromAddress:o,exchangeList:s},{chainId:i}){const c={destinationToken:r,sourceToken:t,sourceAmount:(0,f.calcTokenValue)(a,n).toString(10),slippage:e,timeout:10*T.SECOND,walletAddress:o};s&&(c.exchangeList=s);R(i,t,r)&&(c.enableDirectWrapping=!0);const u=new URLSearchParams(c).toString(),d=`${(0,f.getBaseApi)("trade",i)}${u}`,E=await(0,l.default)(d,{method:"GET",headers:S},{cacheRefreshTime:0,timeout:15*T.SECOND});return E.reduce(((t,n)=>{if(n.trade&&!n.error&&(0,f.validateData)(f.QUOTE_VALIDATORS,n,d)){const r=(0,f.constructTxParams)({to:n.trade.to,from:n.trade.from,data:n.trade.data,amount:(0,m.decimalToHex)(n.trade.value),gas:(0,m.decimalToHex)(n.maxGas)});let{approvalNeeded:a}=n;return a&&(a=(0,f.constructTxParams)({...a})),{...t,[n.aggregator]:{...n,slippage:e,trade:r,approvalNeeded:a}}}return t}),{})},n.formatSwapsValueForDisplay=k,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=void 0,n.getRenderableNetworkFeesForQuote=v,n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=n.getSwapsLivenessForNetwork=void 0,n.quotesToRenderableData=function(e,t,n,a,o,i,c,u,l){return Object.values(e).map((e=>{const{destinationAmount:d=0,sourceAmount:f=0,sourceTokenInfo:T,destinationTokenInfo:E,slippage:p,aggType:g,aggregator:S,gasEstimateWithRefund:_,averageGas:A,fee:h,trade:N}=e,y=(0,m.calcTokenAmount)(f,T.decimals).toString(10),R=(0,m.calcTokenAmount)(d,E.decimals).toPrecision(8);let O=null,C=null,w=null,P=null;({feeInFiat:O,feeInEth:C,rawNetworkFees:w,rawEthFee:P}=v({tradeGas:_||(0,m.decimalToHex)(A||8e5),approveGas:o,gasPrice:t,currentCurrency:a,conversionRate:n,tradeValue:N.value,sourceSymbol:T.symbol,sourceAmount:f,chainId:c})),u&&({feeInFiat:O,feeInEth:C}=I({chainId:c,currentCurrency:a,conversionRate:n,nativeCurrencySymbol:l,estimatedFeeInWeiDec:u.feeEstimate}));const b=new r.default(100-p).div(100),D=new r.default(R).times(b).toFixed(6),M=i[E.address],B=(0,s.isSwapsDefaultTokenSymbol)(E.symbol,c)?(0,m.calcTokenAmount)(d,E.decimals).minus(P,10):new r.default(M||0,10).times((0,m.calcTokenAmount)(d,E.decimals),10).minus(P,10);let L,x=p;return"AGG"===g?L="swapAggregator":"RFQ"===g?(L="swapRequestForQuotation",x=0):L="DEX"===g?"swapDecentralizedExchange":"CONTRACT"===g?"swapDirectContract":"swapUnknown",{aggId:S,amountReceiving:`${R} ${E.symbol}`,destinationTokenDecimals:E.decimals,destinationTokenSymbol:E.symbol,destinationTokenValue:k(R),destinationIconUrl:E.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:L,feeInEth:C,detailedNetworkFees:`${C} (${O})`,networkFees:O,quoteSource:g,rawNetworkFees:w,slippage:x,sourceTokenDecimals:T.decimals,sourceTokenSymbol:T.symbol,sourceTokenValue:y,sourceTokenIconUrl:T.iconUrl,ethValueOfTrade:B,minimumAmountReceived:D,metaMaskFee:h}}))},n.stxErrorTypes=n.showRemainingTimeInMinAndSec=n.shouldEnableDirectWrapping=void 0;var r=E(e("bignumber.js")),a=E(e("human-standard-token-abi")),o=e("../../../shared/constants/swaps"),s=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),c=e("../../helpers/utils/conversions.util"),u=e("../../helpers/utils/confirm-tx.util"),l=E(e("../../../shared/lib/fetch-with-cache")),d=e("../../../shared/modules/hexstring-utils"),m=e("../../../shared/lib/transactions-controller-utils"),f=e("../../../shared/lib/swaps-utils"),T=e("../../../shared/constants/time");function E(e){return e&&e.__esModule?e:{default:e}}const p=3e5,g="usd",S={"X-Client-Id":o.SWAPS_CLIENT_ID},_=[{property:"address",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,f.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],A=_.slice(0,2),h=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:f.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],N=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),y=[{property:"SafeGasPrice",type:"string",validator:N},{property:"ProposeGasPrice",type:"string",validator:N},{property:"FastGasPrice",type:"string",validator:N}],R=(e,t,n)=>{var r;if(!t||!n)return!1;const a=o.SWAPS_WRAPPED_TOKENS_ADDRESSES[e],s=null===(r=o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===r?void 0:r.address,i=t.toLowerCase(),c=n.toLowerCase();return i===a&&c===s||i===s&&c===a};n.shouldEnableDirectWrapping=R;const I=({chainId:e,currentCurrency:t,conversionRate:n,USDConversionRate:r,nativeCurrencySymbol:a,feeInWeiDec:s})=>{const l=(0,m.decimalToHex)(s),d=(0,c.getValueFromWeiHex)({value:l,toDenomination:i.CURRENCY_SYMBOLS.ETH,numberOfDecimals:5}),f=(0,c.getValueFromWeiHex)({value:l,toCurrency:t,conversionRate:n,numberOfDecimals:2});let T;T=t===g?f:(0,c.getValueFromWeiHex)({value:l,toCurrency:g,conversionRate:r,numberOfDecimals:2});return{feeInUsd:T,feeInFiat:(0,u.formatCurrency)(f,t),feeInEth:`${d} ${a||o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].symbol}`,rawEthFee:d}};function v({tradeGas:e,approveGas:t,gasPrice:n,currentCurrency:a,conversionRate:i,USDConversionRate:l,tradeValue:d,sourceSymbol:f,sourceAmount:T,chainId:E,nativeCurrencySymbol:p}){const S=new r.default(e||"0x0",16).plus(t||"0x0",16).toString(16),_=(0,m.calcGasTotal)(S,n),A=new r.default(d,16).minus((0,s.isSwapsDefaultTokenSymbol)(f,E)?T:0,10).toString(16),h=new r.default(_,16).plus(A,16).toString(16),N=(0,c.getValueFromWeiHex)({value:h,toDenomination:"ETH",numberOfDecimals:5}),y=(0,c.getValueFromWeiHex)({value:h,toCurrency:a,conversionRate:i,numberOfDecimals:2}),R=(0,u.formatCurrency)(y,a);let I;I=a===g?y:(0,c.getValueFromWeiHex)({value:h,toCurrency:g,conversionRate:l,numberOfDecimals:2});return{rawNetworkFees:y,feeInUsd:I,rawEthFee:N,feeInFiat:R,feeInEth:`${N} ${p||o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[E].symbol}`,nonGasFee:A}}function k(e){let t=(0,m.toPrecisionWithoutTrailingZeros)(e,12);return t.match(/e[+-]/u)&&(t=new r.default(t).toFixed()),t}n.getFeeForSmartTransaction=I;n.isContractAddressValid=(e,t=i.CHAIN_IDS.MAINNET)=>!(!e||!o.ALLOWED_CONTRACT_ADDRESSES[t])&&o.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const O=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return o.ETHEREUM;case i.CHAIN_IDS.BSC:return o.BSC;case i.CHAIN_IDS.POLYGON:return o.POLYGON;case i.CHAIN_IDS.GOERLI:return o.GOERLI;case i.CHAIN_IDS.AVALANCHE:return o.AVALANCHE;default:return""}};n.getNetworkNameByChainId=O;n.getSwapsLivenessForNetwork=(e={},t)=>{const n=O(t);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(t))return{swapsFeatureIsLive:!0};if(!e[n])return{swapsFeatureIsLive:!1};return e[n].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:e[n].fallbackToV1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};const C={UNAVAILABLE:"unavailable",NOT_ENOUGH_FUNDS:"not_enough_funds",REGULAR_TX_IN_PROGRESS:"regular_tx_pending"};n.stxErrorTypes=C;n.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case C.UNAVAILABLE:case C.REGULAR_TX_IN_PROGRESS:return t("stxErrorUnavailable");case C.NOT_ENOUGH_FUNDS:return t("stxErrorNotEnoughFunds");default:return t("stxErrorUnavailable")}};n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())}}}},{package:"$root$"}],[7533,{".":7536,"../../shared/constants/gas":6585,"../../shared/constants/transaction":6596,"../../shared/lib/transactions-controller-utils":6603,"../../shared/modules/gas.utils":6609,"../../shared/modules/string-utils":6617,"../../shared/modules/transaction.utils":6619,"../ducks/metamask/metamask":7129,"../helpers/utils/confirm-tx.util":7156,"../helpers/utils/conversions.util":7157,"../helpers/utils/transactions.util":7172,"../helpers/utils/tx-helper":7173,"./custom-gas":7534,"./selectors":7539,reselect:6169},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unconfirmedTransactionsListSelector=n.unconfirmedTransactionsHashSelector=n.unconfirmedTransactionsCountSelector=n.unconfirmedMessagesHashSelector=n.txDataSelector=n.transactionFeeSelector=n.tokenAddressSelector=n.sendTokenTokenAmountAndToAddressSelector=n.currentCurrencySelector=n.conversionRateSelector=n.contractExchangeRateSelector=void 0;var r,a=e("reselect"),o=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},s=e("../helpers/utils/confirm-tx.util"),i=e("../helpers/utils/transactions.util"),c=e("../../shared/modules/transaction.utils"),u=e("../ducks/metamask/metamask"),l=e("../../shared/constants/transaction"),d=e("../helpers/utils/conversions.util"),m=e("../../shared/constants/gas"),f=e("../../shared/modules/gas.utils"),T=e("../../shared/modules/string-utils"),E=e("../../shared/lib/transactions-controller-utils"),p=e("./custom-gas"),g=e("./selectors"),S=e(".");const _=e=>e.metamask.unapprovedTxs,A=e=>e.metamask.unapprovedMsgs,h=e=>e.metamask.unapprovedPersonalMsgs,N=e=>e.metamask.unapprovedDecryptMsgs,y=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,R=e=>e.metamask.unapprovedTypedMessages,I=(0,a.createSelector)(_,A,h,N,y,R,g.deprecatedGetCurrentNetworkId,g.getCurrentChainId,((e={},t={},n={},r={},a={},s={},i,c)=>(0,o.default)(e,t,n,r,a,s,i,c)||[]));n.unconfirmedTransactionsListSelector=I;const v=(0,a.createSelector)(_,A,h,N,y,R,g.deprecatedGetCurrentNetworkId,g.getCurrentChainId,((e={},t={},n={},r={},a={},o={},s,i)=>({...Object.keys(e).reduce(((t,n)=>{const r={...t};return(0,c.transactionMatchesNetwork)(e[n],i,s)&&(r[n]=e[n]),r}),{}),...t,...n,...r,...a,...o})));n.unconfirmedTransactionsHashSelector=v;const k=(0,a.createSelector)(A,h,N,y,R,((e={},t={},n={},r={},a={})=>({...e,...t,...n,...r,...a})));n.unconfirmedMessagesHashSelector=k;const O=(0,a.createSelector)(_,(e=>e.metamask.unapprovedMsgCount),(e=>e.metamask.unapprovedPersonalMsgCount),(e=>e.metamask.unapprovedDecryptMsgCount),(e=>e.metamask.unapprovedEncryptionPublicKeyMsgCount),(e=>e.metamask.unapprovedTypedMessagesCount),g.deprecatedGetCurrentNetworkId,g.getCurrentChainId,((e={},t=0,n=0,r=0,a=0,o=0,s,i)=>Object.keys(e).filter((t=>(0,c.transactionMatchesNetwork)(e[t],i,s))).length+o+t+n+r+a));n.unconfirmedTransactionsCountSelector=O;const C=e=>e.metamask.currentCurrency;n.currentCurrencySelector=C;const w=e=>e.metamask.conversionRate;n.conversionRateSelector=w;const P=e=>e.confirmTransaction.txData;n.txDataSelector=P;const b=(0,a.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),D=(0,a.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),M=(0,a.createSelector)(P,(e=>e&&e.txParams||{})),B=(0,a.createSelector)(M,(e=>e&&e.to));n.tokenAddressSelector=B;const L=(0,a.createSelector)(D,b,((e,t)=>{let n="",r="0";if(e&&e.length){n=e._to;let a=e._value.toString();t&&(a=(0,E.calcTokenAmount)(a,t).toFixed()),r=(0,s.roundExponential)(a)}return{toAddress:n,tokenAmount:r}}));n.sendTokenTokenAmountAndToAddressSelector=L;const x=(0,a.createSelector)((e=>e.metamask.contractExchangeRates),B,((e,t)=>e[Object.keys(e).find((e=>(0,T.isEqualCaseInsensitive)(e,t)))]));n.contractExchangeRateSelector=x;n.transactionFeeSelector=function(e,t){var n,r,a,o,c,T,E,g;const _=C(e),A=w(e),h=(0,u.getNativeCurrency)(e),N=(0,u.getGasFeeEstimates)(e)||{},y=(0,u.getGasEstimateType)(e),R=(0,S.checkNetworkAndAccountSupports1559)(e),I={gasLimit:null!==(n=null===(r=t.txParams)||void 0===r?void 0:r.gas)&&void 0!==n?n:"0x0"};if(R){var v;const{gasPrice:e="0"}=N,n=N[t.userFeeLevel]||{};if((null===(v=t.txParams)||void 0===v?void 0:v.type)===l.TRANSACTION_ENVELOPE_TYPES.LEGACY){var k,O;I.gasPrice=null!==(k=null===(O=t.txParams)||void 0===O?void 0:O.gasPrice)&&void 0!==k?k:(0,d.decGWEIToHexWEI)(e)}else{var P,b,D,M;const{suggestedMaxPriorityFeePerGas:r,suggestedMaxFeePerGas:a}=n;I.maxFeePerGas=null===(P=t.txParams)||void 0===P||!P.maxFeePerGas||t.userFeeLevel!==m.CUSTOM_GAS_ESTIMATE&&a?(0,d.decGWEIToHexWEI)(a||e):null===(b=t.txParams)||void 0===b?void 0:b.maxFeePerGas,I.maxPriorityFeePerGas=null===(D=t.txParams)||void 0===D||!D.maxPriorityFeePerGas||t.userFeeLevel!==m.CUSTOM_GAS_ESTIMATE&&r?r&&(0,d.decGWEIToHexWEI)(r)||I.maxFeePerGas:null===(M=t.txParams)||void 0===M?void 0:M.maxPriorityFeePerGas,I.baseFeePerGas=(0,d.decGWEIToHexWEI)(N.estimatedBaseFee)}}else switch(y){case m.GAS_ESTIMATE_TYPES.NONE:I.gasPrice=null!==(a=null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)&&void 0!==a?a:"0x0";break;case m.GAS_ESTIMATE_TYPES.ETH_GASPRICE:I.gasPrice=null!==(c=null===(T=t.txParams)||void 0===T?void 0:T.gasPrice)&&void 0!==c?c:(0,d.decGWEIToHexWEI)(N.gasPrice);break;case m.GAS_ESTIMATE_TYPES.LEGACY:I.gasPrice=null!==(E=null===(g=t.txParams)||void 0===g?void 0:g.gasPrice)&&void 0!==E?E:(0,p.getAveragePriceEstimateInHexWEI)(e);case m.GAS_ESTIMATE_TYPES.FEE_MARKET:}const{txParams:{value:B="0x0"}={}}=t,L=(0,s.getValueFromWeiHex)({value:B,fromCurrency:h,toCurrency:_,conversionRate:A,numberOfDecimals:2}),x=(0,s.getValueFromWeiHex)({value:B,fromCurrency:h,toCurrency:h,conversionRate:A,numberOfDecimals:6}),U=(0,f.getMinimumGasTotalInHexWei)(I),G=(0,f.getMaximumGasTotalInHexWei)(I),H=(0,s.getTransactionFee)({value:U,fromCurrency:h,toCurrency:_,numberOfDecimals:2,conversionRate:A}),F=(0,s.getTransactionFee)({value:G,fromCurrency:h,toCurrency:_,numberOfDecimals:2,conversionRate:A}),W=(0,s.getTransactionFee)({value:U,fromCurrency:h,toCurrency:h,numberOfDecimals:6,conversionRate:A});return{hexTransactionAmount:B,fiatTransactionAmount:L,ethTransactionAmount:x,hexMinimumTransactionFee:U,fiatMinimumTransactionFee:H,hexMaximumTransactionFee:G,fiatMaximumTransactionFee:F,ethTransactionFee:W,fiatTransactionTotal:(0,s.addFiat)(H,L),ethTransactionTotal:(0,s.addEth)(W,x),hexTransactionTotal:(0,i.sumHexes)(B,U),gasEstimationObject:I}}}}},{package:"$root$"}],[7534,{".":7536,"../../app/scripts/lib/util":85,"../../shared/constants/gas":6585,"../../shared/lib/transactions-controller-utils":6603,"../../shared/modules/conversion.utils":6607,"../ducks/metamask/metamask":7129,"../ducks/send":7131,"../helpers/utils/confirm-tx.util":7156,"../helpers/utils/conversions.util":7157,"../helpers/utils/formatters":7159},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.basicPriceEstimateToETHTotal=g,n.getAverageEstimate=E,n.getAveragePriceEstimateInHexWEI=function(e){return _(E(e))},n.getBasicGasEstimateLoadingStatus=function(e){return!1===A(e)},n.getCustomGasLimit=function(e){return e.gas.customData.limit},n.getCustomGasPrice=f,n.getDefaultActiveButtonIndex=function(e,t,n){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,r.addHexPrefix)(t||n))},n.getFastPriceEstimate=p,n.getFastPriceEstimateInHexWEI=function(e){return _(p(e)||"0x0")},n.getGasPriceInHexWei=_,n.getIsCustomNetworkGasPriceFetched=function(e){return(0,l.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.ETH_GASPRICE&&!(0,m.getIsMainnet)(e)},n.getIsEthGasPriceFetched=function(e){return(0,l.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.ETH_GASPRICE&&(0,m.getIsMainnet)(e)},n.getIsGasEstimatesFetched=A,n.getNoGasPriceFetched=function(e){return(0,l.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.NONE},n.getRenderableConvertedCurrencyFee=function(e,t,n,r){const i=g((0,a.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"}),t),c=(0,s.decEthToConvertedCurrency)(i,n,r);return(0,o.formatCurrency)(c,n)},n.getRenderableEthFee=function(e,t,n=9,r="ETH"){const o=g((0,a.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"}),t,n);return(0,i.formatETHFee)(o,r)},n.getSafeLowEstimate=T,n.isCustomPriceExcessive=function(e,t=!1){const n=t?(0,c.getGasPrice)(e):f(e),r=p(e);if(!n||!r)return!1;return(0,a.conversionGreaterThan)({value:n,fromNumericBase:"hex",fromDenomination:"WEI",toDenomination:"GWEI"},{fromNumericBase:"dec",value:Math.floor(1.5*r)})},n.isCustomPriceSafe=function(e){const t=T(e),n=f(e);if(!n)return!0;if(!t)return!1;return(0,a.conversionGreaterThan)({value:n,fromNumericBase:"hex",fromDenomination:"WEI",toDenomination:"GWEI"},{value:t,fromNumericBase:"dec"})},n.isCustomPriceSafeForCustomNetwork=function(e){const t=E(e),n=f(e);if(!n)return!0;if(!t)return!1;return(0,a.conversionGreaterThan)({value:n,fromNumericBase:"hex",fromDenomination:"WEI",toDenomination:"GWEI"},{value:t,fromNumericBase:"dec"})},n.priceEstimateToWei=S;var r=e("../../app/scripts/lib/util"),a=e("../../shared/modules/conversion.utils"),o=e("../helpers/utils/confirm-tx.util"),s=e("../helpers/utils/conversions.util"),i=e("../helpers/utils/formatters"),c=e("../ducks/send"),u=e("../../shared/constants/gas"),l=e("../ducks/metamask/metamask"),d=e("../../shared/lib/transactions-controller-utils"),m=e(".");function f(e){return e.gas.customData.price}function T(e){const t=(0,l.getGasFeeEstimates)(e);return(0,l.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.LEGACY?null==t?void 0:t.low:null}function E(e){const t=(0,l.getGasFeeEstimates)(e);return(0,l.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.LEGACY?null==t?void 0:t.medium:null}function p(e){const t=(0,l.getGasFeeEstimates)(e);return(0,l.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.LEGACY?null==t?void 0:t.high:null}function g(e,t,n=9){return(0,a.conversionUtil)((0,d.calcGasTotal)(t,e),{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"GWEI",numberOfDecimals:n})}function S(e){return(0,a.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI",numberOfDecimals:9})}function _(e){const t=(0,a.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"});return(0,r.addHexPrefix)(S(t))}function A(e){const t=(0,l.getGasEstimateType)(e);return!(0,l.isEIP1559Network)(e)&&t!==u.GAS_ESTIMATE_TYPES.NONE}}}},{package:"$root$"}],[7535,{"../helpers/constants/routes":7141},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstTimeFlowType=void 0,n.getFirstTimeFlowTypeRoute=function(e){const{firstTimeFlowType:t}=e.metamask;let n;n="create"===t?r.INITIALIZE_CREATE_PASSWORD_ROUTE:"import"===t?r.INITIALIZE_IMPORT_WITH_SEED_PHRASE_ROUTE:r.DEFAULT_ROUTE;return n},n.getOnboardingInitiator=void 0;var r=e("../helpers/constants/routes");n.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;n.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const n=Object.keys(t)[0];return{location:n,tabId:t[n]}}}}},{package:"$root$"}],[7536,{"./confirm-transaction":7533,"./custom-gas":7534,"./first-time-flow":7535,"./metametrics":7537,"./permissions":7538,"./selectors":7539,"./transactions":7540},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./confirm-transaction");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=e("./custom-gas");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=e("./first-time-flow");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=e("./metametrics");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var i=e("./permissions");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=e("./selectors");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=e("./transactions");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}}))}))}}},{package:"$root$"}],[7537,{reselect:6169},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectMatchingFragment=n.selectFragments=n.selectFragmentBySuccessEvent=n.selectFragmentById=void 0;var r=e("reselect");const a=e=>e.metamask.fragments;n.selectFragments=a;const o=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined));n.selectFragmentBySuccessEvent=o;const s=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));n.selectFragmentById=s;const i=(0,r.createSelector)(((e,t)=>o(e,t.fragmentOptions)),((e,t)=>s(e,t.existingId)),((e,t)=>null!=t?t:e));n.selectMatchingFragment=i}}},{package:"$root$"}],[7538,{".":7536,"../../shared/constants/permissions":6590},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.activeTabHasPermissions=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Boolean(Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},n.getAccountToConnectToActiveTab=function(e){const t=(0,a.getSelectedAddress)(e),n=i(e),{metamask:{identities:r}}=e,o=Object.keys(r).length;if(n.length&&n.length!==o&&-1===n.findIndex((e=>e===t)))return r[t];return undefined},n.getAddressConnectedSubjectMap=function(e){const t=(0,a.getSubjectMetadata)(e),n=c(e),r={};return Object.keys(n).forEach((e=>{const{iconUrl:a,name:o}=t[e]||{};n[e].forEach((t=>{const n=o||e;r[t]=r[t]?{...r[t],[e]:{iconUrl:a,name:n}}:{[e]:{iconUrl:a,name:n}}}))})),r},n.getConnectedSubjectsForSelectedAddress=function(e){const{selectedAddress:t}=e.metamask,n=o(e),r=(0,a.getSubjectMetadata)(e),s=[];return Object.entries(n).forEach((([e,n])=>{if(!u(n).includes(t))return;const{extensionId:a,name:o,iconUrl:i}=r[e]||{};s.push({extensionId:a,origin:e,name:o,iconUrl:i})})),s},n.getFirstPermissionRequest=function(e){const t=m(e);return t&&t[0]?t[0]:null},n.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,n)=>(t[n].eth_accounts&&(e[n]=JSON.parse(JSON.stringify(t[n].eth_accounts))),e)),{})},n.getOrderedConnectedAccountsForActiveTab=function(e){var t,n;const{activeTab:r,metamask:{permissionHistory:o}}=e,s=null===(t=o[r.origin])||void 0===t||null===(n=t.eth_accounts)||void 0===n?void 0:n.accounts,c=(0,a.getMetaMaskAccountsOrdered)(e),u=i(e);return c.filter((e=>u.includes(e.address))).map((e=>({...e,lastActive:null==s?void 0:s[e.address]}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getPermissionSubjects=o,n.getPermissions=function(e,t){return o(e)[t].permissions},n.getPermissionsForActiveTab=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).map((e=>({key:e})))},n.getPermissionsRequests=m,n.getPermittedAccounts=s,n.getPermittedAccountsByOrigin=c,n.getPermittedAccountsForCurrentTab=i,n.getSubjectsWithPermission=function(e,t){const n=o(e),r=[];return Object.entries(n).forEach((([n,{permissions:o}])=>{if(o[t]){const{extensionId:t,name:o,iconUrl:s}=(0,a.getTargetSubjectMetadata)(e,n)||{};r.push({extensionId:t,origin:n,name:o,iconUrl:s})}})),r};var r=e("../../shared/constants/permissions"),a=e(".");function o(e){return e.metamask.subjects||{}}function s(e,t){return d(l(function(e,t){var n;return t&&(null===(n=e.metamask.subjects)||void 0===n?void 0:n[t])}(e,t)))}function i(e){return s(e,(0,a.getOriginOfCurrentTab)(e))}function c(e){const t=o(e);return Object.keys(t).reduce(((e,n)=>{const r=u(t[n]);return r.length>0&&(e[n]=r),e}),{})}function u(e){return d(l(e))}function l(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function d(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===r.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function m(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_requestPermissions"===e)).map((({requestData:e})=>e))}}}},{package:"$root$"}],[7539,{"../../app/scripts/lib/util":85,"../../shared/constants/app":6584,"../../shared/constants/hardware-wallets":6586,"../../shared/constants/labels":6587,"../../shared/constants/network":6589,"../../shared/constants/swaps":6593,"../../shared/constants/time":6594,"../../shared/constants/tokens":6595,"../../shared/lib/metamask-controller-utils":6599,"../../shared/modules/hexstring-utils":6610,"../../shared/modules/string-utils":6617,"../ducks/app/app":7121,"../ducks/metamask/metamask":7129,"../helpers/utils/conversions.util":7157,"../helpers/utils/moonpay":7166,"../helpers/utils/util":7174,"../pages/confirmation/templates":7269,reselect:6169},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountsWithSendEtherInfoSelector=H,n.checkNetworkAndAccountSupports1559=function(e){const t=(0,p.isEIP1559Network)(e);return t&&true},n.checkNetworkOrAccountNotSupports1559=function(e){const t=(0,p.isNotEIP1559Network)(e);return t||!1},n.deprecatedGetCurrentNetworkId=I,n.doesAddressRequireLedgerHidConnection=function(e,t){const n=(0,p.isAddressLedger)(e,t),r=(0,p.getLedgerTransportType)(e)===s.LEDGER_TRANSPORT_TYPES.WEBHID,a=(0,g.getLedgerWebHidConnectedStatus)(e)!==s.WEBHID_CONNECTED_STATUSES.CONNECTED,o=(0,g.getLedgerTransportStatus)(e)!==s.TRANSPORT_STATES.VERIFIED;return n&&r&&(a||o)},n.getAccountType=function(e){const t=N(e);switch(t&&t.type){case s.KEYRING_TYPES.TREZOR:case s.KEYRING_TYPES.LEDGER:case s.KEYRING_TYPES.LATTICE:return"hardware";case"Simple Key Pair":return"imported";default:return"default"}},n.getAccountsWithLabels=function(e){return M(e).map((({address:e,name:t,balance:n})=>({address:e,addressLabel:`${t.length<c.TRUNCATED_NAME_CHAR_LIMIT?t:`${t.slice(0,c.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,l.shortenAddress)(e)})`,label:t,balance:n})))},n.getAddressBook=U,n.getAddressBookEntry=G,n.getAddressBookEntryOrAccountName=function(e,t){const n=G(e,t)||Object.values(e.metamask.identities).find((e=>(0,S.isEqualCaseInsensitive)(e.address,(0,T.toChecksumHexAddress)(t))));return n&&""!==n.name?n.name:t},n.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee},n.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},n.getAllAccountsOnNetworkAreEmpty=function(e){var t;const n=null!==(t=D(e))&&void 0!==t?t:{},r=Object.values(n).every((e=>"0x0"===e||"0x00"===e)),a=0===C(e);return r&&a},n.getAppIsLoading=function(e){return e.appState.isLoading},n.getBlockExplorerLinkText=function(e,t=!1){const n=ee(e),r=V(e);let a={firstPart:"addBlockExplorer",secondPart:""};r.blockExplorerUrl?a=t?{firstPart:"blockExplorerView",secondPart:(0,l.getURLHostName)(r.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===n&&(a=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return a},n.getCurrentAccountWithSendEtherInfo=F,n.getCurrentChainId=h,n.getCurrentCurrency=function(e){return e.metamask.currentCurrency},n.getCurrentEthBalance=W,n.getCurrentKeyring=N,n.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},n.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},n.getDetectedTokensInCurrentNetwork=function(e){return e.metamask.detectedTokens},n.getEIP1559V2Enabled=function(e){return e.metamask.eip1559V2Enabled},n.getEnsResolutionByAddress=function(e,t){return e.metamask.ensResolutionsByAddress[t]||""},n.getFeatureFlags=function(e){return e.metamask.featureFlags},n.getFrequentRpcListDetail=function(e){return e.metamask.frequentRpcListDetail},n.getGasIsLoading=function(e){return e.appState.gasIsLoading},n.getHardwareWalletType=function(e){const t=N(e);return R(e)?t.type:undefined},n.getInfuraBlocked=function(e){return Boolean(e.metamask.infuraBlocked)},n.getIpfsGateway=function(e){return e.metamask.ipfsGateway},n.getIsAdvancedGasFeeDefault=function(e){const{advancedGasFee:t}=e.metamask;return Boolean(null==t?void 0:t.maxBaseFee)&&Boolean(null==t?void 0:t.priorityFee)},n.getIsBuyableChain=function(e){const t=h(e);return Object.keys(o.BUYABLE_CHAINS_MAP).includes(t)},n.getIsBuyableCoinbasePayChain=function(e){var t;const n=h(e);return Boolean(null===o.BUYABLE_CHAINS_MAP||void 0===o.BUYABLE_CHAINS_MAP||null===(t=o.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.coinbasePayCurrencies)},n.getIsBuyableCoinbasePayToken=function(e,t){var n,r;const a=h(e);return Boolean(null===o.BUYABLE_CHAINS_MAP||void 0===o.BUYABLE_CHAINS_MAP||null===(n=o.BUYABLE_CHAINS_MAP[a])||void 0===n||null===(r=n.coinbasePayCurrencies)||void 0===r?void 0:r.includes(t))},n.getIsBuyableMoonPayChain=function(e){var t;const n=h(e);return Boolean(null===o.BUYABLE_CHAINS_MAP||void 0===o.BUYABLE_CHAINS_MAP||null===(t=o.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.moonPay)},n.getIsBuyableMoonpayToken=function(e,t){var n,r,a;const s=h(e),i=(0,A.formatMoonpaySymbol)(t,s);return Boolean(null===o.BUYABLE_CHAINS_MAP||void 0===o.BUYABLE_CHAINS_MAP||null===(n=o.BUYABLE_CHAINS_MAP[s])||void 0===n||null===(r=n.moonPay)||void 0===r||null===(a=r.showOnlyCurrencies)||void 0===a?void 0:a.includes(i))},n.getIsBuyableTransakChain=function(e){var t;const n=h(e);return Boolean(null===o.BUYABLE_CHAINS_MAP||void 0===o.BUYABLE_CHAINS_MAP||null===(t=o.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.transakCurrencies)},n.getIsBuyableTransakToken=function(e,t){var n,r;const a=h(e);return Boolean(null===o.BUYABLE_CHAINS_MAP||void 0===o.BUYABLE_CHAINS_MAP||null===(n=o.BUYABLE_CHAINS_MAP[a])||void 0===n||null===(r=n.transakCurrencies)||void 0===r?void 0:r.includes(t))},n.getIsBuyableWyreChain=function(e){var t;const n=h(e);return Boolean(null===o.BUYABLE_CHAINS_MAP||void 0===o.BUYABLE_CHAINS_MAP||null===(t=o.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.wyre)},n.getIsBuyableWyreToken=function(e,t){var n,r;const a=h(e);return Boolean(null===o.BUYABLE_CHAINS_MAP||void 0===o.BUYABLE_CHAINS_MAP||null===(n=o.BUYABLE_CHAINS_MAP[a])||void 0===n||null===(r=n.wyre)||void 0===r?void 0:r.currencies.includes(t))},n.getIsCustomNetwork=ee,n.getIsDynamicTokenListAvailable=Z,n.getIsMainnet=j,n.getIsMultiLayerFeeNetwork=function(e){return z(e)},n.getIsNetworkUsed=function(e){const t=h(e),{usedNetworks:n}=e.metamask;return Boolean(n[t])},n.getIsNonStandardEthChain=function(e){return!(j(e)||Y(e))},n.getIsOptimism=z,n.getIsSwapsChain=function(e){const t=h(e);return u.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(t)},n.getIsTestnet=Y,n.getIsTokenDetectionInactiveOnMainnet=J,n.getIsTokenDetectionSupported=function(e){const t=Q(e),n=Z(e);return t&&n},n.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=Q(e),n=j(e);return Z(e)&&!t&&!n},n.getKnownMethodData=function(e,t){if(!t)return null;const n=(0,a.addHexPrefix)(t).slice(0,10),{knownMethodData:r}=e.metamask;return r&&r[n]},n.getMetaMaskAccountsOrdered=n.getMetaMaskAccountsConnected=n.getMetaMaskAccounts=void 0,n.getMetaMaskAccountsRaw=b,n.getMetaMaskCachedBalances=D,n.getMetaMaskIdentities=P,n.getMetaMaskKeyrings=w,n.getMetricsNetworkIdentifier=function(e){const{provider:t}=e.metamask;return t.type===o.NETWORK_TYPES.RPC?t.rpcUrl:t.type},n.getNativeCurrencyImage=function(e){var t;const n=null===(t=(0,p.getNativeCurrency)(e))||void 0===t?void 0:t.toUpperCase();return o.NATIVE_CURRENCY_TOKEN_IMAGE_MAP[n]},n.getNetworkIdentifier=function(e){const{metamask:{provider:{type:t,nickname:n,rpcUrl:r}}}=e;return n||r||t},n.getNetworkSupportsSettingGasFees=function(e){return!z(e)},n.getNetworksTabSelectedRpcUrl=function(e){return e.appState.networksTabSelectedRpcUrl},n.getNewCollectibleAddedMessage=function(e){return e.appState.newCollectibleAddedMessage},n.getNewNetworkAdded=function(e){return e.appState.newNetworkAdded},n.getNewTokensImported=function(e){return e.appState.newTokensImported},n.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},n.getNumberOfAccounts=function(e){return Object.keys(e.metamask.accounts).length},n.getNumberOfTokens=C,n.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},n.getOriginOfCurrentTab=function(e){return e.activeTab.origin},n.getParticipateInMetaMetrics=function(e){return Boolean(e.metamask.participateInMetaMetrics)},n.getPreferences=K,n.getProvider=X,n.getRpcPrefsForCurrentProvider=V,n.getSelectedAccount=x,n.getSelectedAccountCachedBalance=L,n.getSelectedAddress=k,n.getSelectedIdentity=O,n.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=K(e);return t},n.getShouldShowFiat=function(e){const t=j(e),n=(0,p.getConversionRate)(e),{showFiatInTestnets:r}=K(e);return Boolean((t||r)&&n)},n.getShouldShowSeedPhraseReminder=function(e){var t;const{tokens:n,seedPhraseBackedUp:r,dismissSeedBackUpReminder:a}=e.metamask,o=null!==(t=W(e))&&void 0!==t?t:0;return!1===r&&(parseInt(o,16)>0||n.length>0)&&!1===a},n.getShowPortfolioTooltip=function(e){return e.metamask.showPortfolioTooltip},n.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:n}=e.metamask,r=(new Date).getTime(),a=n?90*E.DAY:2*E.DAY;return r-t>=a},n.getShowTestNetworks=function(e){const{showTestNetworks:t}=K(e);return Boolean(t)},n.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},n.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),n=function(e){const t=N(e),n=(null==t?void 0:t.type)===s.KEYRING_TYPES.LEDGER,r=window.navigator.hid!==undefined,a=(0,p.getLedgerTransportType)(e)===s.LEDGER_TRANSPORT_TYPES.LIVE,{threeBoxSyncingAllowed:o}=e.metamask;return{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:r&&n&&a,9:!1,10:!0,11:!0,12:!1,13:!1,14:o,15:!0}}(e),r=t.filter((e=>!e.isShown&&n[e.id]));return r.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},n.getSubjectMetadata=$,n.getSuggestedAssets=function(e){return e.metamask.suggestedAssets},n.getSwapsDefaultToken=function(e){const t=x(e),{balance:n}=t,r=h(e);return{...u.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[r],balance:(0,_.hexToDecimal)(n),string:(0,d.getValueFromWeiHex)({value:n,numberOfDecimals:4,toDenomination:"ETH"})}},n.getTargetAccount=function(e,t){return v(e)[t]},n.getTargetAccountWithSendEtherInfo=function(e,t){const n=H(e);return(0,l.getAccountByAddress)(n,t)},n.getTargetSubjectMetadata=function(e,t){return $(e)[t]},n.getTheme=function(e){return e.metamask.theme},n.getTokenExchangeRates=n.getTokenDetectionSupportNetworkByChainId=void 0,n.getTokenList=function(e){const t=J(e);return t?f.STATIC_MAINNET_TOKEN_LIST:e.metamask.tokenList},n.getTotalUnapprovedCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:n=0,unapprovedDecryptMsgCount:r=0,unapprovedEncryptionPublicKeyMsgCount:a=0,unapprovedTypedMessagesCount:o=0,pendingApprovalCount:s=0}=e.metamask;return t+n+r+a+o+function(e){const{unapprovedTxs:t={}}=e.metamask;return Object.keys(t).length}(e)+s+function(e){const{suggestedAssets:t=[]}=e.metamask;return t.length}(e)},n.getTotalUnapprovedMessagesCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:n=0,unapprovedDecryptMsgCount:r=0,unapprovedEncryptionPublicKeyMsgCount:a=0,unapprovedTypedMessagesCount:o=0}=e.metamask;return t+n+r+a+o},n.getUSDConversionRate=function(e){return e.metamask.usdConversionRate},n.getUnapprovedConfirmations=q,n.getUnapprovedTemplatedConfirmations=function(e){return q(e).filter((e=>m.TEMPLATED_CONFIRMATION_MESSAGE_TYPES.includes(e.type)))},n.getUseCollectibleDetection=function(e){return Boolean(e.metamask.useCollectibleDetection)},n.getUseNonceField=function(e){return Boolean(e.metamask.useNonceField)},n.getUseTokenDetection=Q,n.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},n.hasUnsignedQRHardwareMessage=function(e){const{type:t,msgParams:n}=e.confirmTransaction.txData;if(!t||!n)return!1;const{from:r}=n,{keyrings:a}=e.metamask,o=a.find((e=>e.type===s.KEYRING_TYPES.QR));if(!o)return!1;switch(t){case i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA:case i.MESSAGE_TYPE.ETH_SIGN:case i.MESSAGE_TYPE.PERSONAL_SIGN:return Boolean(o.accounts.find((e=>e.toLowerCase()===r.toLowerCase())));default:return!1}},n.hasUnsignedQRHardwareTransaction=function(e){const{txParams:t}=e.confirmTransaction.txData;if(!t)return!1;const{from:n}=t,{keyrings:r}=e.metamask,a=r.find((e=>e.type===s.KEYRING_TYPES.QR));if(!a)return!1;return Boolean(a.accounts.find((e=>e.toLowerCase()===n.toLowerCase())))},n.isBalanceCached=function(e){const t=e.metamask.accounts[k(e)].balance,n=L(e);return Boolean(!t&&n)},n.isCurrentProviderCustom=function(e){const t=X(e);return t.type===o.NETWORK_TYPES.RPC&&!Object.values(o.CHAIN_IDS).includes(t.chainId)},n.isEIP1559Account=y,n.isHardwareWallet=R,n.isNetworkLoading=function(e){return"loading"===e.metamask.network};var r=e("reselect"),a=e("../../app/scripts/lib/util"),o=e("../../shared/constants/network"),s=e("../../shared/constants/hardware-wallets"),i=e("../../shared/constants/app"),c=e("../../shared/constants/labels"),u=e("../../shared/constants/swaps"),l=e("../helpers/utils/util"),d=e("../helpers/utils/conversions.util"),m=e("../pages/confirmation/templates"),f=e("../../shared/constants/tokens"),T=e("../../shared/modules/hexstring-utils"),E=e("../../shared/constants/time"),p=e("../ducks/metamask/metamask"),g=e("../ducks/app/app"),S=e("../../shared/modules/string-utils"),_=e("../../shared/lib/metamask-controller-utils"),A=e("../helpers/utils/moonpay");function h(e){const{chainId:t}=e.metamask.provider;return t}function N(e){const t=O(e);if(!t)return null;return(0,p.findKeyringForAddress)(e,t.address)}function y(){return!0}function R(e){var t;const n=N(e);return Boolean(null==n||null===(t=n.type)||void 0===t?void 0:t.includes("Hardware"))}function I(e){return e.metamask.network}const v=(0,r.createSelector)(b,D,((e,t)=>Object.entries(e).reduce(((e,[n,r])=>null===r.balance||r.balance===undefined?{...e,[n]:{...r,balance:t&&t[n]}}:{...e,[n]:r}),{})));function k(e){return e.metamask.selectedAddress}function O(e){const t=k(e),{identities:n}=e.metamask;return n[t]}function C(e){const{tokens:t}=e.metamask;return t?t.length:0}function w(e){return e.metamask.keyrings}function P(e){return e.metamask.identities}function b(e){return e.metamask.accounts}function D(e){var t;const n=h(e),r=I(e);return null!==(t=e.metamask.cachedBalances[n])&&void 0!==t?t:e.metamask.cachedBalances[r]}n.getMetaMaskAccounts=v;const M=(0,r.createSelector)(w,P,v,((e,t,n)=>e.reduce(((e,t)=>e.concat(t.accounts)),[]).filter((e=>Boolean(t[e]))).map((e=>({...t[e],...n[e]})))));n.getMetaMaskAccountsOrdered=M;const B=(0,r.createSelector)(M,(e=>e.map((({address:e})=>e.toLowerCase()))));function L(e){const t=D(e),n=k(e);return t&&t[n]}function x(e){return v(e)[k(e)]}n.getMetaMaskAccountsConnected=B;function U(e){const t=h(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function G(e,t){return U(e).find((e=>(0,S.isEqualCaseInsensitive)(e.address,(0,T.toChecksumHexAddress)(t))))}function H(e){const t=v(e),n=P(e);return Object.entries(n).map((([e,n])=>({...n,...t[e]})))}function F(e){const t=k(e),n=H(e);return(0,l.getAccountByAddress)(n,t)}function W(e){var t;return null===(t=F(e))||void 0===t?void 0:t.balance}function q(e){const{pendingApprovals:t}=e.metamask;return Object.values(t)}function j(e){return h(e)===o.CHAIN_IDS.MAINNET}function Y(e){const t=h(e);return o.TEST_CHAINS.includes(t)}function K({metamask:e}){return e.preferences}function $(e){return e.metamask.subjectMetadata}function V(e){const{frequentRpcListDetail:t,provider:n}=e.metamask,r=t.find((e=>e.rpcUrl===n.rpcUrl)),{rpcPrefs:a={}}=r||{};return a}function Q(e){return Boolean(e.metamask.useTokenDetection)}function X(e){return e.metamask.provider}function z(e){return h(e)===o.CHAIN_IDS.OPTIMISM||h(e)===o.CHAIN_IDS.OPTIMISM_TESTNET}n.getTokenExchangeRates=e=>e.metamask.contractExchangeRates;function Z(e){const t=h(e);return[o.CHAIN_IDS.MAINNET,o.CHAIN_IDS.BSC,o.CHAIN_IDS.POLYGON,o.CHAIN_IDS.AVALANCHE].includes(t)}function J(e){const t=j(e);return!Q(e)&&t}function ee(e){const t=h(e);return!o.CHAIN_ID_TO_RPC_URL_MAP[t]}n.getTokenDetectionSupportNetworkByChainId=e=>{switch(h(e)){case o.CHAIN_IDS.MAINNET:return o.MAINNET_DISPLAY_NAME;case o.CHAIN_IDS.BSC:return o.BSC_DISPLAY_NAME;case o.CHAIN_IDS.POLYGON:return o.POLYGON_DISPLAY_NAME;case o.CHAIN_IDS.AVALANCHE:return o.AVALANCHE_DISPLAY_NAME;default:return""}}}}},{package:"$root$"}],[7540,{"../../shared/constants/transaction":6596,"../../shared/lib/metamask-controller-utils":6599,"../../shared/modules/transaction.utils":6619,"../helpers/constants/transactions":7143,"../helpers/utils/tx-helper":7173,"./selectors":7539,reselect:6169},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unapprovedTypedMessagesSelector=n.unapprovedPersonalMsgsSelector=n.unapprovedMsgsSelector=n.unapprovedMessagesSelector=n.unapprovedEncryptionPublicKeyMsgsSelector=n.unapprovedDecryptMsgsSelector=n.transactionsSelector=n.transactionSubSelector=n.submittedPendingTransactionsSelector=n.smartTransactionsListSelector=n.selectedAddressTxListSelector=n.nonceSortedTransactionsSelector=n.nonceSortedPendingTransactionsSelector=n.nonceSortedCompletedTransactionsSelector=n.incomingTxListSelector=n.currentNetworkTxListSelector=void 0;var r,a=e("reselect"),o=e("../helpers/constants/transactions"),s=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},i=e("../../shared/constants/transaction"),c=e("../../shared/modules/transaction.utils"),u=e("../../shared/lib/metamask-controller-utils"),l=e("./selectors");const d=[i.TRANSACTION_TYPES.CANCEL,i.TRANSACTION_TYPES.RETRY],m=e=>{const{showIncomingTransactions:t}=e.metamask.featureFlags;if(!t)return[];const{network:n,provider:{chainId:r}}=e.metamask,a=(0,l.getSelectedAddress)(e);return Object.values(e.metamask.incomingTransactions).filter((e=>e.txParams.to===a&&(0,c.transactionMatchesNetwork)(e,r,n)))};n.incomingTxListSelector=m;const f=e=>e.metamask.unapprovedMsgs;n.unapprovedMsgsSelector=f;const T=e=>e.metamask.currentNetworkTxList;n.currentNetworkTxListSelector=T;const E=e=>e.metamask.unapprovedPersonalMsgs;n.unapprovedPersonalMsgsSelector=E;const p=e=>e.metamask.unapprovedDecryptMsgs;n.unapprovedDecryptMsgsSelector=p;const g=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;n.unapprovedEncryptionPublicKeyMsgsSelector=g;const S=e=>e.metamask.unapprovedTypedMessages;n.unapprovedTypedMessagesSelector=S;const _=e=>{var t,n,r;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(n=t.smartTransactions)||void 0===n||null===(r=n[(0,l.getCurrentChainId)(e)])||void 0===r?void 0:r.filter((e=>!e.confirmed)).map((e=>{var t;return{...e,transactionType:i.TRANSACTION_TYPES.SMART,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?i.SMART_TRANSACTION_STATUSES.CANCELLED:e.status}}))};n.smartTransactionsListSelector=_;const A=(0,a.createSelector)(l.getSelectedAddress,T,_,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e)).concat(n)));n.selectedAddressTxListSelector=A;const h=(0,a.createSelector)(f,E,p,g,S,l.deprecatedGetCurrentNetworkId,l.getCurrentChainId,((e={},t={},n={},r={},a={},o,i)=>(0,s.default)({},e,t,n,r,a,o,i)||[]));n.unapprovedMessagesSelector=h;const N=(0,a.createSelector)(h,m,((e=[],t=[])=>e.concat(t)));n.transactionSubSelector=N;const y=(0,a.createSelector)(N,A,((e=[],t=[])=>t.concat(e).sort(((e,t)=>t.time-e.time))));n.transactionsSelector=y;const R=(e,t)=>{const{primaryTransaction:{time:n}={}}=t;let r=e.length;for(let t=0;t<e.length;t++){const a=e[t],{primaryTransaction:{time:o}={}}=a;if(o>n){r=t;break}}e.splice(r,0,t)},I=(0,a.createSelector)(y,((e=[])=>{const t=[],n=[],r=[],a={};e.forEach((e=>{const{txParams:{nonce:s}={},status:c,type:l,time:m,txReceipt:f}=e;if(void 0===s||l===i.TRANSACTION_TYPES.INCOMING){const r={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:s};l===i.TRANSACTION_TYPES.INCOMING?n.push(r):R(t,r)}else if(s in a){var T,E,p;const t=a[s];((e,t)=>{const{time:n}=t;let r=e.length;for(let t=0;t<e.length;t++)if(e[t].time>n){r=t;break}e.splice(r,0,t)})(t.transactions,e);const{primaryTransaction:{time:n=0}={},initialTransaction:{time:r=0}={}}=t,u={isOnChainFailure:"0x0"===(null==f?void 0:f.status),isEphemeral:c===i.TRANSACTION_STATUSES.FAILED&&"0x0"!==(null==f?void 0:f.status),isRetryOrCancel:d.includes(l),occurredAfterPrimary:m>n,hasPriorityStatus:c in o.PRIORITY_STATUS_HASH,isConfirmed:c===i.TRANSACTION_STATUSES.CONFIRMED,occurredBeforeInitial:m<r,isValidRetry:l===i.TRANSACTION_TYPES.RETRY&&(c in o.PRIORITY_STATUS_HASH||c===i.TRANSACTION_STATUSES.DROPPED),isValidCancel:l===i.TRANSACTION_TYPES.CANCEL&&(c in o.PRIORITY_STATUS_HASH||c===i.TRANSACTION_STATUSES.DROPPED)};u.eligibleForInitial=!u.isRetryOrCancel&&!u.isEphemeral,u.shouldBePrimary=u.isConfirmed||u.isOnChainFailure;const g={isEphemeral:t.primaryTransaction.status===i.TRANSACTION_STATUSES.FAILED&&"0x0"!==(null===(T=t.primaryTransaction)||void 0===T||null===(E=T.txReceipt)||void 0===E?void 0:E.status)},S={isEphemeral:t.initialTransaction.status===i.TRANSACTION_STATUSES.FAILED&&"0x0"!==(null===(p=t.initialTransaction.txReceipt)||void 0===p?void 0:p.status)};(u.shouldBePrimary||g.isEphemeral||u.occurredAfterPrimary&&u.hasPriorityStatus)&&(t.primaryTransaction=e),(u.occurredBeforeInitial&&u.eligibleForInitial||S.isEphemeral&&u.eligibleForInitial)&&(t.initialTransaction=e),u.isValidRetry&&(t.hasRetried=!0),u.isValidCancel&&(t.hasCancelled=!0)}else a[s]={nonce:s,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===i.TRANSACTION_TYPES.RETRY&&(e.status in o.PRIORITY_STATUS_HASH||e.status===i.TRANSACTION_STATUSES.DROPPED),hasCancelled:e.type===i.TRANSACTION_TYPES.CANCEL&&(e.status in o.PRIORITY_STATUS_HASH||e.status===i.TRANSACTION_STATUSES.DROPPED)},((e,t)=>{let n=e.length;for(let r=0;r<e.length;r++){const a=e[r];if(Number((0,u.hexToDecimal)(a))>Number((0,u.hexToDecimal)(t))){n=r;break}}e.splice(n,0,t)})(r,s)}));const s=r.map((e=>a[e]));return((e,t)=>{t.forEach((t=>{R(e,t)}))})(s,n),t.concat(s).map((e=>{var t;if(d.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!d.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))}));n.nonceSortedTransactionsSelector=I;const v=(0,a.createSelector)(I,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in o.PENDING_STATUS_HASH))));n.nonceSortedPendingTransactionsSelector=v;const k=(0,a.createSelector)(I,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in o.PENDING_STATUS_HASH))).reverse()));n.nonceSortedCompletedTransactionsSelector=k;const O=(0,a.createSelector)(y,((e=[])=>e.filter((e=>e.status===i.TRANSACTION_STATUSES.SUBMITTED))));n.submittedPendingTransactionsSelector=O}}},{package:"$root$"}],[7541,{"../../../shared/modules/mv3.utils":6611,pify:5865},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n._setBackgroundConnection=async function(e){s=e,i=(0,a.default)(s),o.isManifestV3&&(m&&console.warn("_setBackgroundConnection called while a queue was processing and not disconnected yet"),async function(){if(m)return;m=!0;try{for(;s.connectionStream.readable&&c.length>0;){const e=c.shift();await d({action:e,disconnectSideeffect:()=>c.unshift(e)})}}catch(e){console.error(e)}m=!1}())},n.callBackgroundMethod=void 0,n.dropQueue=function(e){e||c.forEach((({reject:e})=>e(Error("Background operation cancelled while waiting for connection."))));c.length=0},n.generateActionId=void 0,n.submitRequestToBackground=function(e,t=[],n=u()){if(o.isManifestV3)return new Promise(((r,a)=>{l({actionId:n,request:{method:e,args:t},resolve:r,reject:a})}));return i[e](...t)};var r,a=(r=e("pify"))&&r.__esModule?r:{default:r},o=e("../../../shared/modules/mv3.utils");let s=null,i=null;const c=[],u=()=>Date.now()+Math.random();n.generateActionId=u;const l=e=>{c.some((t=>t.actionId===e.actionId))||(s.connectionStream.readable?d({action:e,disconnectSideeffect:()=>c.push(e)}):c.push(e))};async function d({action:e,disconnectSideeffect:t}){const{request:{method:n,args:r},resolve:a,reject:o}=e;try{a(await i[n](...r))}catch(n){s.DisconnectError&&n instanceof s.DisconnectError?t(e):o(n)}}n.callBackgroundMethod=(e,t=[],n,r=u())=>{if(o.isManifestV3){l({actionId:r,request:{method:e,args:t},resolve:e=>n(null,e),reject:e=>n(e)})}else s[e](...t,n)};let m=!1}}},{package:"$root$"}],[7542,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_TRANSACTION_PARAMS=n.UPDATE_PREFERENCES=n.UPDATE_METAMASK_STATE=n.UPDATE_FEATURE_FLAGS=n.UPDATE_CUSTOM_NONCE=n.UNLOCK_SUCCEEDED=n.UNLOCK_IN_PROGRESS=n.UNLOCK_FAILED=n.TRANSACTION_ERROR=n.TOGGLE_GAS_LOADING_ANIMATION=n.TOGGLE_CURRENCY_INPUT_SWITCH=n.TOGGLE_ACCOUNT_MENU=n.SHOW_SEND_TOKEN_PAGE=n.SHOW_PRIVATE_KEY=n.SHOW_LOADING=n.SHOW_CONF_TX_PAGE=n.SHOW_ACCOUNT_DETAIL=n.SHOW_ACCOUNTS_PAGE=n.SET_WEBHID_CONNECTED_STATUS=n.SET_USE_NONCEFIELD=n.SET_USE_BLOCKIE=n.SET_SMART_TRANSACTIONS_ERROR=n.SET_SELECTED_SETTINGS_RPC_URL=n.SET_RPC_TARGET=n.SET_REQUEST_ACCOUNT_TABS=n.SET_PROVIDER_TYPE=n.SET_PENDING_TOKENS=n.SET_PARTICIPATE_IN_METAMETRICS=n.SET_OPEN_METAMASK_TAB_IDS=n.SET_NEXT_NONCE=n.SET_NEW_TOKENS_IMPORTED=n.SET_NEW_NETWORK_ADDED=n.SET_NEW_CUSTOM_NETWORK_ADDED=n.SET_NEW_COLLECTIBLE_ADDED_MESSAGE=n.SET_MOUSE_USER_STATE=n.SET_LEDGER_TRANSPORT_STATUS=n.SET_IPFS_GATEWAY=n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=n.SET_FIRST_TIME_FLOW_TYPE=n.SET_CURRENT_WINDOW_TAB=n.SET_CURRENT_LOCALE=n.SET_ACCOUNT_LABEL=n.SELECTED_ADDRESS_CHANGED=n.SELECTED_ACCOUNT_CHANGED=n.QR_CODE_DETECTED=n.PORTFOLIO_TOOLTIP_WAS_SHOWN_IN_THIS_SESSION=n.ONBOARDED_IN_THIS_UI_SESSION=n.NETWORK_DROPDOWN_OPEN=n.NETWORK_DROPDOWN_CLOSE=n.MODAL_OPEN=n.MODAL_CLOSE=n.LOCK_METAMASK=n.LOADING_TOKEN_PARAMS_STARTED=n.LOADING_TOKEN_PARAMS_FINISHED=n.LOADING_METHOD_DATA_STARTED=n.LOADING_METHOD_DATA_FINISHED=n.HIDE_WHATS_NEW_POPUP=n.HIDE_WARNING=n.HIDE_LOADING=n.GO_HOME=n.GAS_FEE_ESTIMATES_UPDATED=n.FORGOT_PASSWORD=n.DISPLAY_WARNING=n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=n.COMPLETE_ONBOARDING=n.COMPLETED_TX=n.CLOSE_WELCOME_SCREEN=n.CLEAR_PENDING_TOKENS=n.CLEAR_ACCOUNT_DETAILS=n.CHAIN_CHANGED=n.CAPTURE_SINGLE_EXCEPTION=n.BUY=n.ALERT_OPEN=n.ALERT_CLOSE=n.ADDRESS_BOOK_UPDATED=n.ACCOUNT_CHANGED=void 0;n.GO_HOME="GO_HOME";n.MODAL_OPEN="UI_MODAL_OPEN";n.MODAL_CLOSE="UI_MODAL_CLOSE";n.ALERT_OPEN="UI_ALERT_OPEN";n.ALERT_CLOSE="UI_ALERT_CLOSE";n.QR_CODE_DETECTED="UI_QR_CODE_DETECTED";n.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN";n.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE";n.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE";n.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED";n.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED";n.ACCOUNT_CHANGED="ACCOUNT_CHANGED";n.CHAIN_CHANGED="CHAIN_CHANGED";n.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED";n.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED";n.FORGOT_PASSWORD="FORGOT_PASSWORD";n.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN";n.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS";n.UNLOCK_FAILED="UNLOCK_FAILED";n.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED";n.LOCK_METAMASK="LOCK_METAMASK";n.DISPLAY_WARNING="DISPLAY_WARNING";n.HIDE_WARNING="HIDE_WARNING";n.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION";n.SHOW_ACCOUNT_DETAIL="SHOW_ACCOUNT_DETAIL";n.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE";n.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE";n.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE";n.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY";n.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL";n.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS";n.COMPLETED_TX="COMPLETED_TX";n.TRANSACTION_ERROR="TRANSACTION_ERROR";n.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS";n.SET_NEXT_NONCE="SET_NEXT_NONCE";n.SET_RPC_TARGET="SET_RPC_TARGET";n.SET_PROVIDER_TYPE="SET_PROVIDER_TYPE";n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH";n.SHOW_LOADING="SHOW_LOADING_INDICATION";n.HIDE_LOADING="HIDE_LOADING_INDICATION";n.BUY="BUY";n.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU";n.SET_USE_BLOCKIE="SET_USE_BLOCKIE";n.SET_USE_NONCEFIELD="SET_USE_NONCEFIELD";n.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE";n.SET_IPFS_GATEWAY="SET_IPFS_GATEWAY";n.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS";n.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE";n.UPDATE_FEATURE_FLAGS="UPDATE_FEATURE_FLAGS";n.UPDATE_PREFERENCES="UPDATE_PREFERENCES";n.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING";n.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION";n.SET_MOUSE_USER_STATE="SET_MOUSE_USER_STATE";n.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS";n.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS";n.SET_PENDING_TOKENS="SET_PENDING_TOKENS";n.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS";n.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE";n.SET_SELECTED_SETTINGS_RPC_URL="SET_SELECTED_SETTINGS_RPC_URL";n.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED";n.SET_NEW_COLLECTIBLE_ADDED_MESSAGE="SET_NEW_COLLECTIBLE_ADDED_MESSAGE";n.SET_NEW_CUSTOM_NETWORK_ADDED="SET_NEW_CUSTOM_NETWORK_ADDED";n.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED";n.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED";n.LOADING_TOKEN_PARAMS_STARTED="LOADING_TOKEN_PARAMS_STARTED";n.LOADING_TOKEN_PARAMS_FINISHED="LOADING_TOKEN_PARAMS_FINISHED";n.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS";n.SET_CURRENT_WINDOW_TAB="SET_CURRENT_WINDOW_TAB";n.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS";n.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP";n.PORTFOLIO_TOOLTIP_WAS_SHOWN_IN_THIS_SESSION="PORTFOLIO_TOOLTIP_WAS_SHOWN_IN_THIS_SESSION";n.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION";n.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR";n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE";n.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH";n.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED"}}},{package:"$root$"}],[7543,{"../../app/scripts/lib/buy-url":43,"../../app/scripts/lib/util":85,"../../shared/constants/app":6584,"../../shared/constants/hardware-wallets":6586,"../../shared/constants/metametrics":6588,"../../shared/lib/switch-direction":6602,"../../shared/lib/transactions-controller-utils":6603,"../../shared/modules/hexstring-utils":6610,"../../shared/modules/string-utils":6617,"../ducks/alerts/unconnected-account":7120,"../ducks/app/app":7121,"../ducks/metamask/metamask":7129,"../ducks/send":7131,"../helpers/utils/confirm-tx.util":7156,"../helpers/utils/i18n-helper":7162,"../helpers/utils/transactions.util":7172,"../helpers/utils/tx-helper":7173,"../pages/swaps/swaps.util":7522,"../selectors":7536,"./action-queue":7541,"./actionConstants":7542,"@sentry/browser":1347,buffer:1966,lodash:5626,loglevel:5639},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.acceptWatchAsset=function(e){return async t=>{t(Z());try{await(0,v.submitRequestToBackground)("acceptWatchAsset",[e]),await se(t)}catch(e){return r.default.error(e),void t(ee(e.message))}finally{t(J())}t(z())}},n.addCollectible=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot add collectible without address");if(!t)throw new Error("MetaMask - Cannot add collectible without tokenID");n||a(Z());try{await(0,v.submitRequestToBackground)("addCollectible",[e,t])}catch(e){r.default.error(e),a(ee(e.message))}finally{await se(a),a(J())}}},n.addCollectibleVerifyOwnership=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot add collectible without address");if(!t)throw new Error("MetaMask - Cannot add collectible without tokenID");n||a(Z());try{await(0,v.submitRequestToBackground)("addCollectibleVerifyOwnership",[e,t])}catch(e){if(e.message.includes("This collectible is not owned by the user")||e.message.includes("Unable to verify ownership."))throw e;r.default.error(e),a(ee(e.message))}finally{await se(a),a(J())}}},n.addCustomNetwork=function(e){return async t=>{try{t((0,N.setNewCustomNetworkAdded)(e)),await(0,v.submitRequestToBackground)("addCustomNetwork",[e])}catch(e){r.default.error(e),t(ee("Had a problem changing networks!"))}}},n.addDetectedTokens=function(e){return async t=>{try{await(0,v.submitRequestToBackground)("addDetectedTokens",[e])}catch(e){r.default.error(e)}finally{await se(t)}}},n.addImportedTokens=function(e){return async t=>{try{await(0,v.submitRequestToBackground)("addImportedTokens",[e])}catch(e){r.default.error(e)}finally{await se(t)}}},n.addNewAccount=function(){return r.default.debug("background.addNewAccount"),async(e,t)=>{const n=t().metamask.identities;let r;e(Z());try{const{identities:t}=await(0,v.submitRequestToBackground)("addNewAccount",[Object.keys(n).length]);r=t}catch(t){throw e(ee(t.message)),t}finally{e(J())}const a=Object.keys(r).find((e=>!n[e]));return await se(e),a}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,v.callBackgroundMethod)("addPermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await se(n)}},n.addPollingTokenToAppState=async function(e){return(0,v.submitRequestToBackground)("addPollingTokenToAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,m.getEnvironmentType)()]])},n.addToAddressBook=function(e,t="",n=""){return r.default.debug("background.addToAddressBook"),async(a,o)=>{const{chainId:s}=o().metamask.provider;let i;try{i=await(0,v.submitRequestToBackground)("setAddressBook",[(0,g.toChecksumHexAddress)(e),t,s,n])}catch(e){throw r.default.error(e),a(ee("Address book failed to update")),e}i||a(ee("Address book failed to update"))}},n.addToken=V,n.addTokens=function(e){return t=>Array.isArray(e)?Promise.all(e.map((({address:e,symbol:n,decimals:r})=>t(V(e,n,r))))):Promise.all(Object.entries(e).map((([e,{address:n,symbol:r,decimals:a}])=>t(V(n,r,a)))))},n.addUnapprovedTransaction=async function(e,t){r.default.debug("background.addUnapprovedTransaction");const n=(0,v.generateActionId)();return await(0,v.submitRequestToBackground)("addUnapprovedTransaction",[e,u.ORIGIN_METAMASK,t,undefined,n],n)},n.addUnapprovedTransactionAndRouteToConfirmationPage=function(e,t,n){return async a=>{const o=(0,v.generateActionId)();try{r.default.debug("background.addUnapprovedTransaction");const s=await(0,v.submitRequestToBackground)("addUnapprovedTransaction",[e,u.ORIGIN_METAMASK,t,n,o],o);return a($()),s}catch(e){a(J()),a(ee(e.message))}return null}},n.approvePermissionsRequest=function(e){return t=>{(0,v.callBackgroundMethod)("approvePermissionsRequest",[e],(e=>{e&&t(ee(e.message))}))}},n.attemptLedgerTransportCreation=async function(){return await(0,v.submitRequestToBackground)("attemptLedgerTransportCreation")},n.backupUserData=async function(){let e;try{e=await(0,v.submitRequestToBackground)("backupUserData")}catch(e){throw r.default.error(e.message),e}return e},n.buy=function(e){return async t=>{const n=await(0,s.default)(e);n&&(global.platform.openTab({url:n}),t({type:I.BUY}))}},n.cancelDecryptMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,v.submitRequestToBackground)("cancelDecryptMessage",[e.id])}finally{t(J())}return t(j(n)),t(L(e.id)),t(z()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,v.submitRequestToBackground)("cancelEncryptionPublicKey",[e.id])}finally{t(J())}return t(j(n)),t(L(e.id)),t(z()),e}},n.cancelMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,v.submitRequestToBackground)("cancelMessage",[e.id])}finally{t(J())}return t(j(n)),t(L(e.id)),t(z()),e}},n.cancelMsgs=function(e){return async t=>{t(Z());try{const n=e.map((e=>e)),r=e.map((({id:e,type:t})=>new Promise(((n,r)=>{switch(t){case u.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA:return void(0,v.callBackgroundMethod)("cancelTypedMessage",[e],(e=>{e?r(e):n()}));case u.MESSAGE_TYPE.PERSONAL_SIGN:return void(0,v.callBackgroundMethod)("cancelPersonalMessage",[e],(e=>{e?r(e):n()}));case u.MESSAGE_TYPE.ETH_DECRYPT:return void(0,v.callBackgroundMethod)("cancelDecryptMessage",[e],(e=>{e?r(e):n()}));case u.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY:return void(0,v.callBackgroundMethod)("cancelEncryptionPublicKey",[e],(e=>{e?r(e):n()}));case u.MESSAGE_TYPE.ETH_SIGN:return void(0,v.callBackgroundMethod)("cancelMessage",[e],(e=>{e?r(e):n()}));default:r(new Error(`MetaMask Message Signature: Unknown message type: ${e}`))}}))));await Promise.all(r);const a=await B();t(j(a)),n.forEach((e=>{t(L(e))}))}catch(e){r.default.error(e)}finally{(0,m.getEnvironmentType)()===u.ENVIRONMENT_TYPE_NOTIFICATION?Se():t(J())}}},n.cancelPersonalMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,v.submitRequestToBackground)("cancelPersonalMessage",[e.id])}finally{t(J())}return t(j(n)),t(L(e.id)),t(z()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(J()),await(0,v.submitRequestToBackground)("cancelQRHardwareSignRequest")}},n.cancelSmartTransaction=function(e){return async t=>{try{await(0,v.submitRequestToBackground)("cancelSmartTransaction",[e])}catch(e){if(r.default.error(e),e.message.startsWith("Fetch error:")){const n=(0,A.parseSmartTransactionsError)(e.message);t({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:n})}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(J()),await(0,v.submitRequestToBackground)("cancelSyncQRHardware")}},n.cancelTx=function(e,t=!0){return n=>(t&&n(Z()),new Promise(((t,n)=>{const r=(0,v.generateActionId)();(0,v.callBackgroundMethod)("cancelTransaction",[e.id,r],(e=>{e?n(e):t()}))})).then((()=>B())).then((e=>n(j(e)))).then((()=>(n((0,T.resetSendState)()),n(L(e.id)),n(J()),n(z()),e))).catch((e=>{throw n(J()),e})))},n.cancelTxs=function(e){return async t=>{t(Z());try{const n=e.map((({id:e})=>e)),r=n.map((e=>new Promise(((t,n)=>{const r=(0,v.generateActionId)();(0,v.callBackgroundMethod)("cancelTransaction",[e,r],(e=>{e?n(e):t()}))}))));await Promise.all(r);const a=await B();t(j(a)),t((0,T.resetSendState)()),n.forEach((e=>{t(L(e))}))}finally{(0,m.getEnvironmentType)()===u.ENVIRONMENT_TYPE_NOTIFICATION?Se():t(J())}}},n.cancelTypedMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,v.submitRequestToBackground)("cancelTypedMessage",[e.id])}finally{t(J())}return t(j(n)),t(L(e.id)),t(z()),e}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:r}=n().appState;e in r||(t({type:I.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,a.captureException)(Error(e)))}},n.checkAndUpdateAllCollectiblesOwnershipStatus=async function(){await(0,v.submitRequestToBackground)("checkAndUpdateAllCollectiblesOwnershipStatus")},n.checkAndUpdateSingleCollectibleOwnershipStatus=async function(e){await(0,v.submitRequestToBackground)("checkAndUpdateSingleCollectibleOwnershipStatus",[e,!1])},n.checkHardwareStatus=function(e,t){return r.default.debug("background.checkHardwareStatus",e,t),async n=>{let a;n(Z());try{a=await(0,v.submitRequestToBackground)("checkHardwareStatus",[e,t])}catch(e){throw r.default.error(e),n(ee(e.message)),e}finally{n(J())}return await se(n),a}},n.clearAccountDetails=function(){return{type:I.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:I.CLEAR_PENDING_TOKENS}},n.clearSmartTransactionFees=function(){(0,v.submitRequestToBackground)("clearSmartTransactionFees")},n.clearSwapsQuotes=function(){return async e=>{await(0,v.submitRequestToBackground)("clearSwapsQuotes"),await se(e)}},n.closeCurrentNotificationWindow=z,n.closeNotificationPopup=Se,n.closeWelcomeScreen=function(){return{type:I.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=oe,n.completedTx=L,n.connectHardware=function(e,t,n,a){return r.default.debug("background.connectHardware",e,t,n),async(s,i)=>{const{ledgerTransportType:c}=i().metamask;let u;s(Z(`Looking for your ${(0,o.capitalize)(e)}...`));try{if(e===S.DEVICE_NAMES.LEDGER&&await(0,v.submitRequestToBackground)("establishLedgerTransportPreference"),e===S.DEVICE_NAMES.LEDGER&&c===S.LEDGER_TRANSPORT_TYPES.WEBHID){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:S.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(S.LEDGER_USB_VENDOR_ID))))throw new Error(a("ledgerWebHIDNotConnectedErrorMessage"))}u=await(0,v.submitRequestToBackground)("connectHardware",[e,t,n])}catch(t){throw r.default.error(t),e===S.DEVICE_NAMES.LEDGER&&c===S.LEDGER_TRANSPORT_TYPES.WEBHID&&t.message.match("Failed to open the device")?(s(ee(a("ledgerDeviceOpenFailureMessage"))),new Error(a("ledgerDeviceOpenFailureMessage"))):(e!==S.DEVICE_NAMES.QR&&s(ee(t.message)),t)}finally{s(J())}return await se(s),u}},n.createCancelTransaction=function(e,t,n){let a;return r.default.debug("background.cancelTransaction"),r=>{const o=(0,v.generateActionId)();return new Promise(((s,i)=>{(0,v.callBackgroundMethod)("createCancelTransaction",[e,t,{...n,actionId:o}],((e,t)=>{if(e)return r(ee(e.message)),void i(e);const{currentNetworkTxList:n}=t,{id:o}=n[n.length-1];a=o,s(t)}),o)})).then((e=>r(j(e)))).then((()=>a))}},n.createEventFragment=function(e){const t=(0,v.generateActionId)();return(0,v.submitRequestToBackground)("createEventFragment",[{...e,actionId:t}])},n.createNewVault=P,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(Z());try{await P(e);return await D()}catch(e){throw t(ee(e.message)),new Error(e.message)}finally{t(J())}}},n.createNewVaultAndRestore=function(e,n){return a=>{a(Z()),r.default.debug("background.createNewVaultAndRestore");const o=Array.from(t.from(n,"utf8").values());let s;return new Promise(((t,n)=>{(0,v.callBackgroundMethod)("createNewVaultAndRestore",[e,o],((e,r)=>{e?n(e):(s=r,t())}))})).then((()=>a(G()))).then((()=>(a(K()),a(J()),s))).catch((e=>(a(ee(e.message)),a(J()),Promise.reject(e))))}},n.createRetryTransaction=function(e,t){let n;return r=>new Promise(((a,o)=>{const s=(0,v.generateActionId)();(0,v.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{actionId:s}],((e,t)=>{if(e)return r(ee(e.message)),void o(e);const{currentNetworkTxList:s}=t;n=s[s.length-1],a(t)}))})).then((e=>r(j(e)))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n){let a;return r.default.debug("background.createSpeedUpTransaction"),r=>{const o=(0,v.generateActionId)();return new Promise(((s,i)=>{(0,v.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{...n,actionId:o}],((e,t)=>{if(e)return r(ee(e.message)),void i(e);const{currentNetworkTxList:n}=t;a=n[n.length-1],s(t)}),o)})).then((e=>r(j(e)))).then((()=>a))}},n.createTransactionEventFragment=function(e,t){const n=(0,v.generateActionId)();return(0,v.submitRequestToBackground)("createTransactionEventFragment",[e,t,n])},n.customSwapsGasParamsUpdated=function(e,t){return async n=>{await(0,v.submitRequestToBackground)("setSwapsTxGasPrice",[t]),await(0,v.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await se(n)}},n.decryptMsg=function(e){return r.default.debug("action - decryptMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.decryptMessage");try{n=await(0,v.submitRequestToBackground)("decryptMessage",[e])}catch(e){throw r.default.error(e),t(ee(e.message)),e}finally{t(J())}return t(j(n)),t(L(e.metamaskId)),t(z()),e}},n.decryptMsgInline=function(e){return r.default.debug("action - decryptMsgInline"),async t=>{let n;r.default.debug("actions calling background.decryptMessageInline");try{n=await(0,v.submitRequestToBackground)("decryptMessageInline",[e])}catch(e){throw r.default.error(e),t(ee(e.message)),e}return t(j(n)),n.unapprovedDecryptMsgs[e.metamaskId]}},n.delRpcTarget=function(e){return t=>(r.default.debug(`background.delRpcTarget: ${e}`),new Promise(((n,a)=>{(0,v.callBackgroundMethod)("delCustomRpc",[e],(e=>{if(e)return r.default.error(e),t(ee("Had a problem removing network!")),void a(e);n()}))})))},n.detectCollectibles=function(){return async e=>{e(Z()),r.default.debug("background.detectCollectibles"),await(0,v.submitRequestToBackground)("detectCollectibles"),e(J()),await se(e)}},n.detectNewTokens=async function(){return(0,v.submitRequestToBackground)("detectNewTokens")},n.disconnectGasFeeEstimatePoller=function(e){return(0,v.submitRequestToBackground)("disconnectGasFeeEstimatePoller",[e])},n.dismissSmartTransactionsErrorMessage=function(){return{type:I.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=ee,n.editRpc=function(e,t,n,a="ETH",o,s){return async i=>{r.default.debug(`background.delRpcTarget: ${e}`);try{(0,v.submitRequestToBackground)("delCustomRpc",[e])}catch(e){return r.default.error(e),void i(ee("Had a problem removing network!"))}try{await(0,v.submitRequestToBackground)("updateAndSetCustomRpc",[t,n,a,o||t,s])}catch(e){return r.default.error(e),void i(ee("Had a problem changing networks!"))}i({type:I.SET_RPC_TARGET,value:t})}},n.encryptionPublicKeyMsg=function(e){return r.default.debug("action - encryptionPublicKeyMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.encryptionPublicKey");try{n=await(0,v.submitRequestToBackground)("encryptionPublicKey",[e])}catch(e){throw r.default.error(e),t(ee(e.message)),e}finally{t(J())}return t(j(n)),t(L(e.metamaskId)),t(z()),e}},n.estimateGas=function(e){return(0,v.submitRequestToBackground)("estimateGas",[e])},n.exportAccount=function(e,t){return function(n){return n(Z()),r.default.debug("background.verifyPassword"),new Promise(((a,o)=>{(0,v.callBackgroundMethod)("verifyPassword",[e],(function(e){if(e)return r.default.error("Error in verifying password."),n(J()),n(ee("Incorrect Password.")),void o(e);r.default.debug("background.exportAccount"),(0,v.callBackgroundMethod)("exportAccount",[t],(function(e,t){if(n(J()),e)return r.default.error(e),n(ee("Had a problem exporting the account.")),void o(e);n(te(t)),a(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return r.default.debug("background.verifyPassword"),new Promise(((a,o)=>{(0,v.callBackgroundMethod)("verifyPassword",[e],(function(e){if(e)return r.default.error("Error in submitting password."),void o(e);r.default.debug("background.exportAccounts");const s=t.map((e=>new Promise(((t,a)=>(0,v.callBackgroundMethod)("exportAccount",[e],(function(e,o){if(e)return r.default.error(e),n(ee("Had a problem exporting the account.")),void a(e);t(o)}))))));a(Promise.all(s))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[r,a]=await(0,v.submitRequestToBackground)("fetchAndSetQuotes",[e,t]);return await se(n),[r,a]}},n.fetchInfoToSync=function(){return e=>(r.default.debug("background.fetchInfoToSync"),new Promise(((t,n)=>{(0,v.callBackgroundMethod)("fetchInfoToSync",[],((r,a)=>{if(r)return e(ee(r.message)),void n(r);t(a)}))})))},n.fetchSmartTransactionFees=function(e,t){return async n=>{t&&(t.value="0x0");try{const r=await await(0,v.submitRequestToBackground)("fetchSmartTransactionFees",[e,t]);return n({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:null}),r}catch(e){if(r.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,A.parseSmartTransactionsError)(e.message);n({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,v.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(e){r.default.error(e)}}},n.finalizeEventFragment=function(e,t){return(0,v.submitRequestToBackground)("finalizeEventFragment",[e,t])},n.forceUpdateMetamaskState=se,n.forgetDevice=function(e){return r.default.debug("background.forgetDevice",e),async t=>{t(Z());try{await(0,v.submitRequestToBackground)("forgetDevice",[e])}catch(e){throw r.default.error(e),t(ee(e.message)),e}finally{t(J())}await se(t)}},n.forgotPassword=H,n.getBalancesInSingleCall=async function(e){return await(0,v.submitRequestToBackground)("getBalancesInSingleCall",[e])},n.getContractMethodData=function(e=""){return(t,n)=>{const a=(0,m.addHexPrefix)(e).slice(0,10);if(a.length<10)return Promise.resolve({});const{knownMethodData:o}=n().metamask;return o&&o[a]&&0!==Object.keys(o[a]).length?Promise.resolve(o[a]):(t(ue()),r.default.debug("loadingMethodData"),(0,i.getMethodDataAsync)(a).then((({name:e,params:n})=>(t(le()),(0,v.callBackgroundMethod)("addKnownMethodData",[a,{name:e,params:n}],(e=>{e&&t(ee(e.message))})),{name:e,params:n}))))}},n.getCurrentWindowTab=function(){return async e=>{e(ge(await global.platform.currentTab()))}},n.getGasFeeEstimatesAndStartPolling=function(){return(0,v.submitRequestToBackground)("getGasFeeEstimatesAndStartPolling")},n.getGasFeeTimeEstimate=function(e,t){return(0,v.submitRequestToBackground)("getGasFeeTimeEstimate",[e,t])},n.getNextNonce=function(){return async(e,t)=>{const n=t().metamask.selectedAddress;let r;try{r=await(0,v.submitRequestToBackground)("getNextNonce",[n])}catch(t){throw e(ee(t.message)),t}return e(Te(r)),r}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(pe(await(0,v.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},n.getRequestAccountTabIds=function(){return async e=>{e(Ee(await(0,v.submitRequestToBackground)("getRequestAccountTabIds")))}},n.getThreeBoxLastUpdated=function(){return e=>new Promise(((t,n)=>{(0,v.callBackgroundMethod)("getThreeBoxLastUpdated",[],((r,a)=>{if(r)return e(ee(r.message)),void n(r);t(a)}))}))},n.getTokenStandardAndDetails=async function(e,t,n){return await(0,v.submitRequestToBackground)("getTokenStandardAndDetails",[e,t,n])},n.getTransactions=async function(e={}){return await(0,v.submitRequestToBackground)("getTransactions",[e])},n.goHome=C,n.hideAlert=function(){return{type:I.ALERT_CLOSE}},n.hideLoadingIndication=J,n.hideModal=function(e){return{type:I.MODAL_CLOSE,payload:e}},n.hideNetworkDropdown=function(){return{type:I.NETWORK_DROPDOWN_CLOSE}},n.hidePortfolioTooltip=function(){return(0,v.submitRequestToBackground)("setShowPortfolioTooltip",[!1])},n.hideTestNetMessage=function(){return(0,v.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},n.hideWarning=function(){return{type:I.HIDE_WARNING}},n.ignoreTokens=function({tokensToIgnore:e,dontShowLoadingIndicator:t=!1}){const n=Array.isArray(e)?e:[e];return async e=>{t||e(Z());try{await(0,v.submitRequestToBackground)("ignoreTokens",[n])}catch(t){r.default.error(t),e(ee(t.message))}finally{await se(e),e(J())}}},n.importNewAccount=function(e,t){return async n=>{let a;n(Z("This may take a while, please be patient."));try{r.default.debug("background.importAccountWithStrategy"),await(0,v.submitRequestToBackground)("importAccountWithStrategy",[e,t]),r.default.debug("background.getState"),a=await(0,v.submitRequestToBackground)("getState")}catch(e){throw n(ee(e.message)),e}finally{n(J())}return n(j(a)),a.selectedAddress&&n({type:I.SHOW_ACCOUNT_DETAIL,value:a.selectedAddress}),a}},n.initializeThreeBox=de,n.isCollectibleOwner=async function(e,t,n){return await(0,v.submitRequestToBackground)("isCollectibleOwner",[e,t,n])},n.loadingMethodDataFinished=le,n.loadingMethodDataStarted=ue,n.loadingTokenParamsFinished=function(){return{type:I.LOADING_TOKEN_PARAMS_FINISHED}},n.loadingTokenParamsStarted=function(){return{type:I.LOADING_TOKEN_PARAMS_STARTED}},n.lockMetamask=function(){return r.default.debug("background.setLocked"),e=>(e(Z()),new Promise(((e,t)=>{(0,v.callBackgroundMethod)("setLocked",[],(n=>{n?t(n):e()}))})).then((()=>B())).catch((t=>(e(ee(t.message)),Promise.reject(t)))).then((t=>{e(j(t)),e(J()),e({type:I.LOCK_METAMASK})})).catch((()=>{e(J()),e({type:I.LOCK_METAMASK})})))},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>{(0,v.callBackgroundMethod)("markPasswordForgotten",[],(n=>{n?t(n):e()}))}))}finally{e(J()),e(H()),await se(e)}}},n.qrCodeDetected=function(e){return async t=>{await t({type:I.QR_CODE_DETECTED,value:e}),t((0,T.computeEstimatedGasLimit)())}},n.rejectPendingApproval=function(e,t){return async n=>{await(0,v.submitRequestToBackground)("rejectPendingApproval",[e,t]);const{pendingApprovals:r}=await se(n);0===Object.values(r).length&&n(z())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,r)=>{(0,v.callBackgroundMethod)("rejectPermissionsRequest",[e],(e=>{if(e)return t(ee(e.message)),void r(e);se(t).then(n).catch(r)}))}))},n.rejectWatchAsset=function(e){return async t=>{t(Z());try{await(0,v.submitRequestToBackground)("rejectWatchAsset",[e]),await se(t)}catch(e){return r.default.error(e),void t(ee(e.message))}finally{t(J())}t(z())}},n.removeAccount=function(e){return async t=>{t(Z());try{await new Promise(((t,n)=>{(0,v.callBackgroundMethod)("removeAccount",[e],((e,r)=>{e?n(e):t(r)}))})),await se(t)}catch(e){throw t(ee(e.message)),e}finally{t(J())}r.default.info(`Account removed: ${e}`),t(K())}},n.removeAndIgnoreCollectible=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot ignore collectible without address");if(!t)throw new Error("MetaMask - Cannot ignore collectible without tokenID");n||a(Z());try{await(0,v.submitRequestToBackground)("removeAndIgnoreCollectible",[e,t])}catch(e){r.default.error(e),a(ee(e.message))}finally{await se(a),a(J())}}},n.removeCollectible=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot remove collectible without address");if(!t)throw new Error("MetaMask - Cannot remove collectible without tokenID");n||a(Z());try{await(0,v.submitRequestToBackground)("removeCollectible",[e,t])}catch(e){r.default.error(e),a(ee(e.message))}finally{await se(a),a(J())}}},n.removeFromAddressBook=function(e,t){return r.default.debug("background.removeFromAddressBook"),async()=>{await(0,v.submitRequestToBackground)("removeFromAddressBook",[e,(0,g.toChecksumHexAddress)(t)])}},n.removePermissionsFor=function(e){return t=>{(0,v.callBackgroundMethod)("removePermissionsFor",[e],(e=>{e&&t(ee(e.message))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,v.callBackgroundMethod)("removePermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await se(n)}},n.removePollingTokenFromAppState=async function(e){return(0,v.submitRequestToBackground)("removePollingTokenFromAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,m.getEnvironmentType)()]])},n.requestAccountsPermissionWithId=function(e){return async t=>{const n=await(0,v.submitRequestToBackground)("requestAccountsPermissionWithId",[e]);return await se(t),n}},n.requestAddNetworkApproval=function(e,t){return async n=>{try{await(0,v.submitRequestToBackground)("requestAddNetworkApproval",[e,t])}catch(e){r.default.error(e),n(ee("Had a problem changing networks!"))}}},n.requestRevealSeedWords=function(e){return async t=>{t(Z()),r.default.debug("background.verifyPassword");try{await b(e);return await D()}catch(e){throw t(ee(e.message)),e}finally{t(J())}}},n.resetAccount=function(){return e=>(e(Z()),new Promise(((t,n)=>{(0,v.callBackgroundMethod)("resetAccount",[],((a,o)=>{if(e(J()),a)return e(ee(a.message)),void n(a);r.default.info(`Transaction history reset for ${o}`),e(K()),t(o)}))})))},n.resetBackgroundSwapsState=function(){return async e=>{const t=await(0,v.submitRequestToBackground)("resetSwapsState");return await se(e),t}},n.resetSwapsPostFetchState=function(){return async e=>{await(0,v.submitRequestToBackground)("resetPostFetchState"),await se(e)}},n.resolvePendingApproval=function(e,t){return async n=>{await(0,v.submitRequestToBackground)("resolvePendingApproval",[e,t]);const{pendingApprovals:r}=await se(n);0===Object.values(r).length&&n(z())}},n.restoreFromThreeBox=function(e){return t=>new Promise(((n,r)=>{(0,v.callBackgroundMethod)("restoreFromThreeBox",[e],(e=>{if(e)return t(ee(e.message)),void r(e);n()}))}))},n.restoreUserData=async function(e){try{await(0,v.submitRequestToBackground)("restoreUserData",[e])}catch(e){throw r.default.error(e.message),e}return!0},n.rollbackToPreviousProvider=function(){return async e=>{try{await(0,v.submitRequestToBackground)("rollbackToPreviousProvider")}catch(t){r.default.error(t),e(ee("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await(0,v.submitRequestToBackground)("safeRefetchQuotes"),await se(e)}},n.setAccountLabel=function(e,t){return n=>(n(Z()),r.default.debug("background.setAccountLabel"),new Promise(((r,a)=>{(0,v.callBackgroundMethod)("setAccountLabel",[e,t],(o=>{if(n(J()),o)return n(ee(o.message)),void a(o);n({type:I.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),r(e)}))})))},n.setAdvancedGasFee=function(e){return t=>{t(Z()),r.default.debug("background.setAdvancedGasFee"),(0,v.callBackgroundMethod)("setAdvancedGasFee",[e],(e=>{t(J()),e&&t(ee(e.message))}))}},n.setAlertEnabledness=async function(e,t){await(0,v.submitRequestToBackground)("setAlertEnabledness",[e,t])},n.setApproveTxId=function(e){return async t=>{await(0,v.submitRequestToBackground)("setApproveTxId",[e]),await se(t)}},n.setAutoLockTimeLimit=function(e){return re("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await(0,v.submitRequestToBackground)("setBackgroundSwapRouteState",[e]),await se(t)}},n.setCollectiblesDetectionNoticeDismissed=function(){return(0,v.submitRequestToBackground)("setCollectiblesDetectionNoticeDismissed",[!0])},n.setCompletedOnboarding=function(){return async e=>{e(Z());try{await(0,v.submitRequestToBackground)("completeOnboarding"),e(oe())}catch(t){throw e(ee(t.message)),t}finally{e(J())}}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,v.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(e=>{if(e)throw new Error(e.message)}))}},n.setCurrentCurrency=function(e){return async t=>{t(Z()),r.default.debug("background.setCurrentCurrency");try{await(0,v.submitRequestToBackground)("setCurrentCurrency",[e]),await se(t)}catch(e){return r.default.error(e),void t(ee(e.message))}finally{t(J())}}},n.setCurrentLocale=ce,n.setCurrentWindowTab=ge,n.setCustomApproveTxData=function(e){return async t=>{await(0,v.submitRequestToBackground)("setCustomApproveTxData",[e]),await se(t)}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await(0,v.submitRequestToBackground)("setDefaultHomeActiveTabName",[e]),await se(t)}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(Z()),await(0,v.submitRequestToBackground)("setDismissSeedBackUpReminder",[e]),t(J())}},n.setEIP1559V2Enabled=function(e){return async t=>{t(Z()),r.default.debug("background.setEIP1559V2Enabled");try{await(0,v.submitRequestToBackground)("setEIP1559V2Enabled",[e])}finally{t(J())}}},n.setEnableEIP1559V2NoticeDismissed=function(){return(0,v.submitRequestToBackground)("setEnableEIP1559V2NoticeDismissed",[!0])},n.setFeatureFlag=function(e,t,n){return r=>(r(Z()),new Promise(((a,o)=>{(0,v.callBackgroundMethod)("setFeatureFlag",[e,t],((e,t)=>{if(r(J()),e)return r(ee(e.message)),void o(e);r(ne(t)),n&&r(X({name:n})),a(t)}))})))},n.setFirstTimeFlowType=function(e){return t=>{r.default.debug("background.setFirstTimeFlowType"),(0,v.callBackgroundMethod)("setFirstTimeFlowType",[e],(e=>{e&&t(ee(e.message))})),t({type:I.SET_FIRST_TIME_FLOW_TYPE,value:e})}},n.setFirstTimeUsedNetwork=function(e){return(0,v.submitRequestToBackground)("setFirstTimeUsedNetwork",[e])},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:I.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,value:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return re("hideZeroBalanceTokens",e)},n.setInitialGasEstimate=function(e){return async t=>{await(0,v.submitRequestToBackground)("setInitialGasEstimate",[e]),await se(t)}},n.setIpfsGateway=function(e){return t=>{t(Z()),r.default.debug("background.setIpfsGateway"),(0,v.callBackgroundMethod)("setIpfsGateway",[e],(n=>{t(J()),t(n?ee(n.message):{type:I.SET_IPFS_GATEWAY,value:e})}))}},n.setLastActiveTime=function(){return e=>{(0,v.callBackgroundMethod)("setLastActiveTime",[],(t=>{t&&e(ee(t.message))}))}},n.setLedgerTransportPreference=function(e){return async t=>{t(Z()),await(0,v.submitRequestToBackground)("setLedgerTransportPreference",[e]),t(J())}},n.setMouseUserState=function(e){return{type:I.SET_MOUSE_USER_STATE,value:e}},n.setNewCollectibleAddedMessage=function(e){return{type:I.SET_NEW_COLLECTIBLE_ADDED_MESSAGE,value:e}},n.setNewNetworkAdded=function(e){return{type:I.SET_NEW_NETWORK_ADDED,value:e}},n.setNewTokensImported=function(e){return{type:I.SET_NEW_TOKENS_IMPORTED,value:e}},n.setNextNonce=Te,n.setOpenMetamaskTabsIDs=pe,n.setOpenSeaEnabled=function(e){return t=>{t(Z()),r.default.debug("background.setOpenSeaEnabled"),(0,v.callBackgroundMethod)("setOpenSeaEnabled",[e],(e=>{t(J()),e&&t(ee(e.message))}))}},n.setParticipateInMetaMetrics=function(e){return t=>(r.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,a)=>{(0,v.callBackgroundMethod)("setParticipateInMetaMetrics",[e],((o,s)=>{if(r.default.debug(o),o)return t(ee(o.message)),void a(o);t({type:I.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,s])}))})))},n.setPendingTokens=function(e){const{customToken:t={},selectedTokens:n={},tokenAddressList:r=[]}=e,{address:a,symbol:o,decimals:s}=t,i=a&&o&&s>=0<=36?{...n,[a]:{...t,isCustom:!0}}:n;return Object.keys(i).forEach((e=>{i[e].unlisted=!r.find((t=>(0,h.isEqualCaseInsensitive)(t,e)))})),{type:I.SET_PENDING_TOKENS,payload:i}},n.setPreference=re,n.setProviderType=function(e){return async t=>{r.default.debug("background.setProviderType",e);try{await(0,v.submitRequestToBackground)("setProviderType",[e])}catch(e){return r.default.error(e),void t(ee("Had a problem changing networks!"))}t(Q(e))}},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,v.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(e=>{if(e)throw new Error(e.message)}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{(0,v.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[e],(e=>{if(e)throw new Error(e.message)}))}},n.setRequestAccountTabIds=Ee,n.setRpcTarget=function(e,t,n="ETH",a){return async o=>{r.default.debug(`background.setRpcTarget: ${e} ${t} ${n} ${a}`);try{await(0,v.submitRequestToBackground)("setCustomRpc",[e,t,n,a||e])}catch(e){r.default.error(e),o(ee("Had a problem changing networks!"))}}},n.setSeedPhraseBackedUp=function(e){return t=>(r.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,r)=>{(0,v.callBackgroundMethod)("setSeedPhraseBackedUp",[e],(e=>{if(e)return t(ee(e.message)),void r(e);se(t).then(n).catch(r)}))})))},n.setSelectedAddress=function(e){return async t=>{t(Z()),r.default.debug("background.setSelectedAddress");try{await Y(e)}catch(e){return void t(ee(e.message))}finally{t(J())}}},n.setSelectedQuoteAggId=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSelectedQuoteAggId",[e]),await se(t)}},n.setSelectedSettingsRpcUrl=function(e){return{type:I.SET_SELECTED_SETTINGS_RPC_URL,value:e}},n.setShowFiatConversionOnTestnetsPreference=function(e){return re("showFiatInTestnets",e)},n.setShowRestorePromptToFalse=function(){return e=>new Promise(((t,n)=>{(0,v.callBackgroundMethod)("setShowRestorePromptToFalse",[],(r=>{if(r)return e(ee(r.message)),void n(r);t()}))}))},n.setShowTestNetworks=function(e){return re("showTestNetworks",e)},n.setSmartTransactionsOptInStatus=async function(e,t){_e({event:"STX OptIn",category:_.EVENT.CATEGORIES.SWAPS,sensitiveProperties:{stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:e,stx_prev_user_opt_in:t}}),await(0,v.submitRequestToBackground)("setSmartTransactionsOptInStatus",[e])},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{try{await(0,v.submitRequestToBackground)("setStatusRefreshInterval",[e])}catch(e){r.default.error(e)}}},n.setSwapsErrorKey=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsErrorKey",[e]),await se(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsFeatureFlags",[e]),await se(t)}},n.setSwapsLiveness=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsLiveness",[e]),await se(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[e]),await se(t)}},n.setSwapsTokens=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsTokens",[e]),await se(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await se(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsTxGasPrice",[e]),await se(t)}},n.setTheme=function(e){return async t=>{t(Z()),r.default.debug("background.setTheme");try{await(0,v.submitRequestToBackground)("setTheme",[e])}finally{t(J())}}},n.setThreeBoxSyncingPermission=fe,n.setTradeTxId=function(e){return async t=>{await(0,v.submitRequestToBackground)("setTradeTxId",[e]),await se(t)}},n.setUnconnectedAccountAlertShown=Ae,n.setUseBlockie=function(e){return t=>{t(Z()),r.default.debug("background.setUseBlockie"),(0,v.callBackgroundMethod)("setUseBlockie",[e],(e=>{t(J()),e&&t(ee(e.message))})),t({type:I.SET_USE_BLOCKIE,value:e})}},n.setUseCollectibleDetection=function(e){return t=>{t(Z()),r.default.debug("background.setUseCollectibleDetection"),(0,v.callBackgroundMethod)("setUseCollectibleDetection",[e],(e=>{t(J()),e&&t(ee(e.message))}))}},n.setUseNativeCurrencyAsPrimaryCurrencyPreference=function(e){return re("useNativeCurrencyAsPrimaryCurrency",e)},n.setUseNonceField=function(e){return async t=>{t(Z()),r.default.debug("background.setUseNonceField");try{await(0,v.submitRequestToBackground)("setUseNonceField",[e])}catch(e){t(ee(e.message))}t(J()),t({type:I.SET_USE_NONCEFIELD,value:e})}},n.setUsePhishDetect=function(e){return t=>{t(Z()),r.default.debug("background.setUsePhishDetect"),(0,v.callBackgroundMethod)("setUsePhishDetect",[e],(e=>{t(J()),e&&t(ee(e.message))}))}},n.setUseTokenDetection=function(e){return t=>{t(Z()),r.default.debug("background.setUseTokenDetection"),(0,v.callBackgroundMethod)("setUseTokenDetection",[e],(e=>{t(J()),e&&t(ee(e.message))}))}},n.setWeb3ShimUsageAlertDismissed=async function(e){await(0,v.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[e])},n.showAccountDetail=function(e){return async(t,n)=>{t(Z()),r.default.debug("background.setSelectedAddress");const a=n(),o=(0,p.getUnconnectedAccountAlertEnabledness)(a),s=a.activeTab.origin,i=(0,f.getSelectedAddress)(a),c=(0,f.getPermittedAccountsForCurrentTab)(a),u=Boolean(s)&&c.includes(i),l=Boolean(s)&&c.includes(e),d=u&&!l;try{await Y(e),await se(t)}catch(e){return void t(ee(e.message))}finally{t(J())}t({type:I.SHOW_ACCOUNT_DETAIL,value:e}),o&&d&&(t((0,E.switchedToUnconnectedAccount)()),await Ae(s))}},n.showAccountsPage=K,n.showAlert=function(e){return{type:I.ALERT_OPEN,value:e}},n.showConfTxPage=$,n.showLoadingIndication=Z,n.showModal=X,n.showNetworkDropdown=function(){return{type:I.NETWORK_DROPDOWN_OPEN}},n.showPrivateKey=te,n.showQrScanner=function(){return e=>{e(X({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:I.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const a=await he(e,t.fees),o=await he(e,t.cancelFees,!0);try{return(await(0,v.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:a,signedCanceledTransactions:o,txParams:e}])).uuid}catch(e){if(r.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,A.parseSmartTransactionsError)(e.message);n({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.signMsg=function(e){return r.default.debug("action - signMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.signMessage");try{n=await(0,v.submitRequestToBackground)("signMessage",[e])}catch(e){throw r.default.error(e),t(ee(e.message)),e}finally{t(J())}return t(j(n)),t(L(e.metamaskId)),t(z()),e}},n.signPersonalMsg=function(e){return r.default.debug("action - signPersonalMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.signPersonalMessage");try{n=await(0,v.submitRequestToBackground)("signPersonalMessage",[e])}catch(e){throw r.default.error(e),t(ee(e.message)),e}finally{t(J())}return t(j(n)),t(L(e.metamaskId)),t(z()),e}},n.signTypedMsg=function(e){return r.default.debug("action - signTypedMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.signTypedMessage");try{n=await(0,v.submitRequestToBackground)("signTypedMessage",[e])}catch(e){throw r.default.error(e),t(ee(e.message)),e}finally{t(J())}return t(j(n)),t(L(e.metamaskId)),t(z()),e}},n.stopPollingForQuotes=function(){return async e=>{await(0,v.submitRequestToBackground)("stopPollingForQuotes"),await se(e)}},n.submitPassword=w,n.submitQRHardwareCryptoAccount=async function(e){await(0,v.submitRequestToBackground)("submitQRHardwareCryptoAccount",[e])},n.submitQRHardwareCryptoHDKey=async function(e){await(0,v.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[e])},n.submitQRHardwareSignature=async function(e,t){await(0,v.submitRequestToBackground)("submitQRHardwareSignature",[e,t])},n.toggleAccountMenu=function(){return{type:I.TOGGLE_ACCOUNT_MENU}},n.trackMetaMetricsEvent=_e,n.trackMetaMetricsPage=function(e,t){return(0,v.submitRequestToBackground)("trackMetaMetricsPage",[e,t])},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{(0,v.callBackgroundMethod)("tryReverseResolveAddress",[e],(e=>{e&&r.default.error(e),t()}))}))},n.tryUnlockMetamask=function(e){return t=>(t(Z()),t(F()),r.default.debug("background.submitPassword"),new Promise(((t,n)=>{(0,v.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))})).then((()=>(t(q()),se(t)))).then((()=>{t(J())})).catch((e=>(t(W(e.message)),t(J()),Promise.reject(e)))))},n.turnThreeBoxSyncingOn=me,n.turnThreeBoxSyncingOnAndInitialize=function(){return async e=>{await e(fe(!0)),await e(me()),await e(de())}},n.txError=U,n.unMarkPasswordForgotten=G,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(Z());try{await w(e);const n=await D();return await se(t),n}catch(e){throw t(ee(e.message)),new Error(e.message)}finally{t(J())}}},n.unlockFailed=W,n.unlockHardwareWalletAccounts=function(e,t,n,a){return r.default.debug("background.unlockHardwareWalletAccount",e,t,n,a),async o=>{o(Z());for(const s of e)try{await(0,v.submitRequestToBackground)("unlockHardwareWalletAccount",[s,t,n,a])}catch(e){throw r.default.error(e),o(ee(e.message)),o(J()),e}return o(J()),undefined}},n.unlockInProgress=F,n.unlockSucceeded=q,n.updateAndApproveTx=function(e,t){return n=>(!t&&n(Z()),new Promise(((t,a)=>{const o=(0,v.generateActionId)();(0,v.callBackgroundMethod)("updateAndApproveTransaction",[e,o],(o=>{if(n(x(e.id,e.txParams)),n((0,T.resetSendState)()),o)return n(U(o)),n(C()),r.default.error(o.message),void a(o);t(e)}))})).then((()=>B())).then((e=>n(j(e)))).then((()=>(n((0,T.resetSendState)()),n(L(e.id)),n(J()),n(M("")),n(z()),e))).catch((e=>(n(J()),Promise.reject(e)))))},n.updateAndSetCustomRpc=function(e,t,n="ETH",a,o){return async s=>{r.default.debug(`background.updateAndSetCustomRpc: ${e} ${t} ${n} ${a}`);try{await(0,v.submitRequestToBackground)("updateAndSetCustomRpc",[e,t,n,a||e,o])}catch(e){return r.default.error(e),void s(ee("Had a problem changing networks!"))}s({type:I.SET_RPC_TARGET,value:e})}},n.updateCollectibleDropDownState=function(e){return async t=>{await(0,v.submitRequestToBackground)("updateCollectibleDropDownState",[e]),await se(t)}},n.updateCurrentLocale=ie,n.updateCustomNonce=M,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async r=>{await Promise.all([(0,v.submitRequestToBackground)("setSwapsTxGasLimit",[e]),(0,v.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[t]),(0,v.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[n])]),await se(r)}},n.updateEditableParams=function(e,t){return async n=>{let a;try{a=await(0,v.submitRequestToBackground)("updateEditableParams",[e,t])}catch(e){throw n(U(e)),r.default.error(e.message),e}return await se(n),a}},n.updateEventFragment=function(e,t){return(0,v.submitRequestToBackground)("updateEventFragment",[e,t])},n.updateFeatureFlags=ne,n.updateMetamaskState=j,n.updatePreferences=ae,n.updatePreviousGasParams=function(e,t){return async n=>{let a;try{a=await(0,v.submitRequestToBackground)("updatePreviousGasParams",[e,t])}catch(e){throw n(U(e)),r.default.error(e.message),e}return a}},n.updateProviderType=Q,n.updateSmartTransaction=function(e,t){return async n=>{try{await(0,v.submitRequestToBackground)("updateSmartTransaction",[{uuid:e,...t}])}catch(e){if(r.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,A.parseSmartTransactionsError)(e.message);n({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.updateSwapApprovalTransaction=function(e,t){return async n=>{let a;try{a=await(0,v.submitRequestToBackground)("updateSwapApprovalTransaction",[e,t])}catch(e){throw n(U(e)),r.default.error(e.message),e}return a}},n.updateSwapTransaction=function(e,t){return async n=>{let a;try{a=await(0,v.submitRequestToBackground)("updateSwapTransaction",[e,t])}catch(e){throw n(U(e)),r.default.error(e.message),e}return a}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await(0,v.submitRequestToBackground)("setSwapsUserFeeLevel",[e]),await se(t)}},n.updateTokenType=async function(e){let t={};try{t=await(0,v.submitRequestToBackground)("updateTokenType",[e])}catch(e){r.default.error(e)}return t},n.updateTransaction=function(e,t){return async n=>{!t&&n(Z());try{await(0,v.submitRequestToBackground)("updateTransaction",[e])}catch(t){throw n(x(e.id,e.txParams)),n(J()),n(U(t)),n(C()),r.default.error(t.message),t}try{n(x(e.id,e.txParams));return n(j(await B())),n($({id:e.id})),e}finally{n(J())}}},n.updateTransactionGasFees=function(e,t){return async n=>{let a;try{a=await(0,v.submitRequestToBackground)("updateTransactionGasFees",[e,t])}catch(e){throw n(U(e)),r.default.error(e.message),e}return a}},n.updateTransactionParams=x,n.updateTransactionSendFlowHistory=function(e,t,n){return async a=>{let o;try{o=await(0,v.submitRequestToBackground)("updateTransactionSendFlowHistory",[e,t,n])}catch(e){throw a(U(e)),r.default.error(e.message),e}return o}},n.updateViewedNotifications=function(e){return(0,v.submitRequestToBackground)("updateViewedNotifications",[e])},n.verifyPassword=b,n.verifySeedPhrase=D;var r=O(e("loglevel")),a=e("@sentry/browser"),o=e("lodash"),s=O(e("../../app/scripts/lib/buy-url")),i=e("../helpers/utils/transactions.util"),c=O(e("../../shared/lib/switch-direction")),u=e("../../shared/constants/app"),l=e("../helpers/utils/confirm-tx.util"),d=O(e("../helpers/utils/tx-helper")),m=e("../../app/scripts/lib/util"),f=e("../selectors"),T=e("../ducks/send"),E=e("../ducks/alerts/unconnected-account"),p=e("../ducks/metamask/metamask"),g=e("../../shared/modules/hexstring-utils"),S=e("../../shared/constants/hardware-wallets"),_=e("../../shared/constants/metametrics"),A=e("../pages/swaps/swaps.util"),h=e("../../shared/modules/string-utils"),N=e("../ducks/app/app"),y=e("../../shared/lib/transactions-controller-utils"),R=e("../helpers/utils/i18n-helper"),I=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("./actionConstants")),v=e("./action-queue");function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function O(e){return e&&e.__esModule?e:{default:e}}function C(){return{type:I.GO_HOME}}function w(e){return new Promise(((t,n)=>{(0,v.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))}))}function P(e){return new Promise(((t,n)=>{(0,v.callBackgroundMethod)("createNewVaultAndKeychain",[e],(e=>{e?n(e):t(!0)}))}))}function b(e){return new Promise(((t,n)=>{(0,v.callBackgroundMethod)("verifyPassword",[e],(e=>{e?n(e):t(!0)}))}))}async function D(){const e=await(0,v.submitRequestToBackground)("verifySeedPhrase");return t.from(e).toString("utf8")}function M(e){return{type:I.UPDATE_CUSTOM_NONCE,value:e}}const B=()=>(r.default.debug("background.getState"),new Promise(((e,t)=>{(0,v.callBackgroundMethod)("getState",[],((n,r)=>{n?t(n):e(r)}))})));function L(e){return(t,n)=>{const r=n(),{unapprovedTxs:a,unapprovedMsgs:o,unapprovedPersonalMsgs:s,unapprovedTypedMessages:i,network:c,provider:{chainId:u}}=r.metamask,l=(0,d.default)(a,o,s,i,c,u).filter((t=>t.id!==e));t({type:I.COMPLETED_TX,value:{id:e,unconfirmedActionsCount:l.length}})}}function x(e,t){return{type:I.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function U(e){return{type:I.TRANSACTION_ERROR,message:e.message}}function G(){return e=>new Promise((t=>{(0,v.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{e(H(!1)),t()}))})).then((()=>se(e)))}function H(e=!0){return{type:I.FORGOT_PASSWORD,value:e}}function F(){return{type:I.UNLOCK_IN_PROGRESS}}function W(e){return{type:I.UNLOCK_FAILED,value:e}}function q(e){return{type:I.UNLOCK_SUCCEEDED,value:e}}function j(e){return(t,n)=>{var r,a,s,i;const{metamask:c}=n(),{currentLocale:u,selectedAddress:l,provider:d}=c,{currentLocale:m,selectedAddress:E,provider:p}=e;u&&m&&u!==m&&t(ie(m)),l!==E&&t({type:I.SELECTED_ADDRESS_CHANGED});const g=null!==(r=null===(a=e.addressBook)||void 0===a?void 0:a[null==p?void 0:p.chainId])&&void 0!==r?r:{},S=null!==(s=null===(i=c.addressBook)||void 0===i?void 0:i[null==d?void 0:d.chainId])&&void 0!==s?s:{},_=(0,f.getMetaMaskAccounts)({metamask:e}),A=(0,f.getMetaMaskAccounts)({metamask:c}),h=_[E],N=_[l];Object.entries(A).forEach((([e,n])=>{(0,o.isEqual)(n,_[e])||t({type:I.ACCOUNT_CHANGED,payload:{account:_[e]}})})),!1===(0,o.isEqual)(N,h)&&t({type:I.SELECTED_ACCOUNT_CHANGED,payload:{account:h}}),!1===(0,o.isEqual)(S,g)&&t({type:I.ADDRESS_BOOK_UPDATED,payload:{addressBook:g}}),!1===(0,o.isEqual)(c.gasFeeEstimates,e.gasFeeEstimates)&&t({type:I.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:e.gasFeeEstimates,gasEstimateType:e.gasEstimateType}}),t({type:I.UPDATE_METAMASK_STATE,value:e}),d.chainId!==p.chainId&&(t({type:I.CHAIN_CHANGED,payload:p.chainId}),t((0,T.initializeSendState)({chainHasChanged:!0})))}}async function Y(e){r.default.debug("background.setSelectedAddress"),await(0,v.submitRequestToBackground)("setSelectedAddress",[e])}function K(){return{type:I.SHOW_ACCOUNTS_PAGE}}function $({id:e}={}){return{type:I.SHOW_CONF_TX_PAGE,id:e}}function V(e,t,n,a,o){return async s=>{if(!e)throw new Error("MetaMask - Cannot add token without address");o||s(Z());try{await(0,v.submitRequestToBackground)("addToken",[e,t,n,a])}catch(e){r.default.error(e),s(ee(e.message))}finally{await se(s),s(J())}}}function Q(e){return{type:I.SET_PROVIDER_TYPE,value:e}}function X(e){return{type:I.MODAL_OPEN,payload:e}}function z(){return(e,t)=>{(0,m.getEnvironmentType)()!==u.ENVIRONMENT_TYPE_NOTIFICATION||(0,l.hasUnconfirmedTransactions)(t())||Se()}}function Z(e){return{type:I.SHOW_LOADING,value:e}}function J(){return{type:I.HIDE_LOADING}}function ee(e){return{type:I.DISPLAY_WARNING,value:e}}function te(e){return{type:I.SHOW_PRIVATE_KEY,value:e}}function ne(e){return{type:I.UPDATE_FEATURE_FLAGS,value:e}}function re(e,t){return n=>(n(Z()),new Promise(((r,a)=>{(0,v.callBackgroundMethod)("setPreference",[e,t],((e,t)=>{if(n(J()),e)return n(ee(e.message)),void a(e);n(ae(t)),r(t)}))})))}function ae(e){return{type:I.UPDATE_PREFERENCES,value:e}}function oe(){return{type:I.COMPLETE_ONBOARDING}}async function se(e){let t;r.default.debug("background.getState");try{t=await(0,v.submitRequestToBackground)("getState")}catch(t){throw e(ee(t.message)),t}return e(j(t)),t}function ie(e){return async t=>{t(Z());try{await(0,R.loadRelativeTimeFormatLocaleData)(e);const n=await(0,R.fetchLocale)(e),r=await(0,v.submitRequestToBackground)("setCurrentLocale",[e]);await(0,c.default)(r),t(ce(e,n))}catch(e){return void t(ee(e.message))}finally{t(J())}}}function ce(e,t){return{type:I.SET_CURRENT_LOCALE,value:{locale:e,messages:t}}}function ue(){return{type:I.LOADING_METHOD_DATA_STARTED}}function le(){return{type:I.LOADING_METHOD_DATA_FINISHED}}function de(){return e=>new Promise(((t,n)=>{(0,v.callBackgroundMethod)("initializeThreeBox",[],(r=>{if(r)return e(ee(r.message)),void n(r);t()}))}))}function me(){return e=>new Promise(((t,n)=>{(0,v.callBackgroundMethod)("turnThreeBoxSyncingOn",[],(r=>{if(r)return e(ee(r.message)),void n(r);t()}))}))}function fe(e){return t=>new Promise(((n,r)=>{(0,v.callBackgroundMethod)("setThreeBoxSyncingPermission",[e],(e=>{if(e)return t(ee(e.message)),void r(e);n()}))}))}function Te(e){return{type:I.SET_NEXT_NONCE,value:e}}function Ee(e){return{type:I.SET_REQUEST_ACCOUNT_TABS,value:e}}function pe(e){return{type:I.SET_OPEN_METAMASK_TAB_IDS,value:e}}function ge(e){return{type:I.SET_CURRENT_WINDOW_TAB,value:e}}async function Se(){await(0,v.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}function _e(e,t){return(0,v.submitRequestToBackground)("trackMetaMetricsEvent",[e,t])}async function Ae(e){await(0,v.submitRequestToBackground)("setUnconnectedAccountAlertShown",[e])}const he=async(e,t,n)=>{const r=t.map((t=>{const r={...e,maxFeePerGas:(0,y.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,y.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,y.decimalToHex)(21e3):e.gas,value:e.value};return n&&(r.to=r.from,r.data="0x"),r}));return await(0,v.submitRequestToBackground)("approveTransactionsWithSameNonce",[r])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$"}],[81,{"@sentry/utils":1406},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FilterEvents=void 0;var r=e("@sentry/utils");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor({getMetaMetricsEnabled:e}){a(this,"name",o.id),a(this,"getMetaMetricsEnabled",void 0),this.getMetaMetricsEnabled=e}setupOnce(e,t){e((e=>{const n=t().getIntegration(o);return n&&!n.getMetaMetricsEnabled()?(r.logger.warn("Event dropped due to MetaMetrics setting."),null):e}))}}n.FilterEvents=o,a(o,"id","FilterEvents")}}},{package:"$root$"}],[82,{"../../../shared/constants/app":6584,"./extractEthjsErrorMessage":58,"./sentry-filter-events":81,"@sentry/browser":1347,"@sentry/integrations":1387,_process:5870},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.SENTRY_STATE=void 0,n.default=function({release:e,getState:t}){if(!e)throw new Error("Missing release");const n=d===s.BuildType.main?l:"production-main";let r;console.log(`Setting up Sentry Remote Error Reporting for '${n}': SENTRY_DSN`),r="https://3567c198f8a8412082d32655da2961d0@sentry.io/273505";return a.init({dsn:r,debug:false,environment:n,integrations:[new i.FilterEvents({getMetaMetricsEnabled:function(){if(!t)return!1;{var e,n;const r=t();if(null==r||null===(e=r.store)||void 0===e||null===(n=e.metamask)||void 0===n||!n.participateInMetaMetrics)return!1}return!0}}),new o.Dedupe,new o.ExtraErrorData],release:e,beforeSend:e=>function(e){try{if(function(e){!function(e,t){"string"==typeof e.message&&(e.message=t(e.message));e.exception&&e.exception.values&&e.exception.values.forEach((e=>{"string"==typeof e.value&&(e.value=t(e.value))}))}(e,(e=>{let t=(0,c.default)(e);return 0===t.indexOf("Transaction Failed: known transaction")&&(t="Transaction Failed: known transaction"),t}))}(e),function(e){e.request.url=m(e.request.url),e.exception&&e.exception.values&&e.exception.values.forEach((e=>{e.stacktrace&&e.stacktrace.frames.forEach((e=>{e.filename=m(e.filename)}))}))}(e),t){const n=t();e.extra||(e.extra={}),e.extra.appState=n}}catch(e){console.warn(e)}return e}(e),beforeBreadcrumb(e){if(!t)return null;{var n,r,a,o;const s=t();if(Object.values(s).length&&(null==s||null===(n=s.store)||void 0===n||null===(r=n.metamask)||void 0===r||!r.participateInMetaMetrics||null==s||null===(a=s.store)||void 0===a||null===(o=a.metamask)||void 0===o||!o.completedOnboarding||"ui.input"===(null==e?void 0:e.category)))return null}return e}}),a};var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("@sentry/browser")),o=e("@sentry/integrations"),s=e("../../../shared/constants/app"),i=e("./sentry-filter-events"),c=(r=e("./extractEthjsErrorMessage"))&&r.__esModule?r:{default:r};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const l="production",d=(t.env.SENTRY_DSN_DEV,"main");function m(e){const t=e.split(window.location.origin)[1];if(!t)return e;return`metamask${t}`}n.SENTRY_STATE={gas:!0,history:!0,metamask:{alertEnabledness:!0,completedOnboarding:!0,connectedStatusPopoverHasBeenShown:!0,conversionDate:!0,conversionRate:!0,currentBlockGasLimit:!0,currentCurrency:!0,currentLocale:!0,customNonceValue:!0,defaultHomeActiveTabName:!0,featureFlags:!0,firstTimeFlowType:!0,forgottenPassword:!0,incomingTxLastFetchedBlockByChainId:!0,ipfsGateway:!0,isAccountMenuOpen:!0,isInitialized:!0,isUnlocked:!0,metaMetricsId:!0,nativeCurrency:!0,network:!0,nextNonce:!0,participateInMetaMetrics:!0,preferences:!0,provider:{nickname:!0,ticker:!0,type:!0},seedPhraseBackedUp:!0,showRestorePrompt:!0,threeBoxDisabled:!0,threeBoxLastUpdated:!0,threeBoxSynced:!0,threeBoxSyncingAllowed:!0,unapprovedDecryptMsgCount:!0,unapprovedEncryptionPublicKeyMsgCount:!0,unapprovedMsgCount:!0,unapprovedPersonalMsgCount:!0,unapprovedTypedMessagesCount:!0,useBlockie:!0,useNonceField:!0,usePhishDetect:!0,welcomeScreenSeen:!0},unconnectedAccount:!0}}).call(this)}).call(this,e("_process"))}}},{package:"$root$"}],[83,{"obj-multiplex":5756,pump:5970},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setupMultiplex=function(e){const t=new r.default;return(0,a.default)(e,t,e,(e=>{e&&console.error(e)})),t};var r=o(e("obj-multiplex")),a=o(e("pump"));function o(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$"}],[85,{"../../../shared/constants/app":6584,"../../../shared/constants/network":6589,"../../../shared/modules/hexstring-utils":6610,"bn.js":1922,lodash:5626,"webextension-polyfill":6558},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BnMultiplyByFraction=function(e,t,n){const r=new a.default(t),o=new a.default(n);return e.mul(r).div(o)},n.addHexPrefix=void 0,n.bnToHex=function(e){return d(e.toString(16))},n.checkForError=function(){const{lastError:e}=r.default.runtime;if(!e)return undefined;if(e.stack&&e.message)return e;return new Error(e.message)},n.getChainType=function(e){if(e===s.CHAIN_IDS.MAINNET)return"mainnet";if(s.TEST_CHAINS.includes(e))return"testnet";return"custom"},n.getPlatform=n.getEnvironmentType=void 0,n.hexToBn=function(e){return new a.default((0,c.stripHexPrefix)(e),16)};var r=u(e("webextension-polyfill")),a=u(e("bn.js")),o=e("lodash"),s=e("../../../shared/constants/network"),i=e("../../../shared/constants/app"),c=e("../../../shared/modules/hexstring-utils");function u(e){return e&&e.__esModule?e:{default:e}}const l=(0,o.memoize)((e=>{const t=new URL(e);return"/popup.html"===t.pathname?i.ENVIRONMENT_TYPE_POPUP:["/home.html"].includes(t.pathname)?i.ENVIRONMENT_TYPE_FULLSCREEN:"/notification.html"===t.pathname?i.ENVIRONMENT_TYPE_NOTIFICATION:i.ENVIRONMENT_TYPE_BACKGROUND}));n.getEnvironmentType=(e=window.location.href)=>l(e);n.getPlatform=()=>{const{navigator:e}=window,{userAgent:t}=e;return t.includes("Firefox")?i.PLATFORM_FIREFOX:"brave"in e?i.PLATFORM_BRAVE:t.includes("Edg/")?i.PLATFORM_EDGE:t.includes("OPR")?i.PLATFORM_OPERA:i.PLATFORM_CHROME};const d=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):e.startsWith("-")?e.replace("-","-0x"):`0x${e}`;n.addHexPrefix=d}}},{package:"$root$"}]],[],{});